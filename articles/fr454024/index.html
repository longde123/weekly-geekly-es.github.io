<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶í üì≤ üßëüèø‚Äçü§ù‚Äçüßëüèª Contr√¥leur de charge MPPT sur STM32F334C8T6 üëêüèæ „Ä∞Ô∏è üë©üèæ‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les commentaires sous mes articles pr√©c√©dents ont soulev√© √† plusieurs reprises la question tout √† fait raisonnable: "Pourquoi faire des convertisseurs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contr√¥leur de charge MPPT sur STM32F334C8T6</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454024/"><p> Les commentaires sous mes articles pr√©c√©dents ont soulev√© √† plusieurs reprises la question tout √† fait raisonnable: <em>"Pourquoi faire des convertisseurs DC / DC sur un microcontr√¥leur quand il y en a des pr√™ts √† l'emploi?"</em>  et comme r√©ponse, j'ai constamment mentionn√©, comme exemple le plus frappant, un contr√¥leur de charge avec algorithme MPPT.  Mais pour dire une chose, et pour montrer ... c'est beaucoup plus int√©ressant et clair, donc aujourd'hui je vais vous parler de mon petit projet lent d'un tel contr√¥leur. </p><br><p>  Le projet du contr√¥leur est ouvert, tous les fichiers sources sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> .  Le contr√¥leur lui-m√™me est assez simple √† mettre en ≈ìuvre, il est construit sur la topologie de buck, il utilise les composants disponibles et tout cela donne une bonne r√©p√©tabilit√© m√™me sans trop de connaissances.  La disposition des connecteurs et des composants est con√ßue pour que ce contr√¥leur puisse √™tre utilis√© √† la fois comme une carte de d√©bogage pour √©tudier l'√©lectronique de puissance, et comme un appareil fini, il ne reste plus qu'√† le justifier. </p><br><p><img src="https://habrastorage.org/webt/m9/jz/zv/m9jzzv8udvu62hfujno-cwyeerg.jpeg" alt="Photos IRM"></p><a name="habracut"></a><br><h1 id="glava-1-chto-takoe-algoritm-mppt-i-zachem-on-nuzhen">  Chapitre 1. Qu'est-ce que l'algorithme MPPT et pourquoi est-il n√©cessaire </h1><br><p>  Le MPPT lui-m√™me est le processus de recherche du point de puissance maximale d'un panneau solaire.  La pr√©sence de cet algorithme dans le contr√¥leur permet dans certaines conditions d'augmenter significativement l'efficacit√© d'utilisation des panneaux solaires.  Lorsqu'un fabricant √©crit la puissance sur le panneau, par exemple 100 ... 200 ... 250 ... 320 W, cela signifie la puissance nominale du panneau solaire √† un niveau d'ensoleillement de 1000 W / m <sup>2</sup> .  Bien entendu, les fabricants ne prennent pas les panneaux √† l'ext√©rieur et n'attendent pas les conditions m√©t√©orologiques id√©ales, donc cette valeur est accept√©e en standard et est "g√©n√©r√©e" sur le banc de laboratoire. </p><br><p>  En conditions r√©elles, avec un ciel d√©gag√©, le niveau maximum d'insolation varie de 250 W / m <sup>2</sup> quelque part en Norv√®ge √† 900-1000 W / m <sup>2</sup> en Afrique du Nord.  Il s'ensuit qu'au Nord le panneau solaire ne donnera pas sa puissance d√©clar√©e, mais en Afrique c'est facile.  MAIS ... D√®s que des nuages ‚Äã‚Äãapparaissent dans le ciel qui obscurcissent le panneau solaire, le niveau d'insolation diminue.  Rappelez-vous la m√©t√©o du mois dernier, combien de jours ensoleill√©s id√©aux avez-vous vus?  Si vous √™tes de Krasnodar, alors peut-√™tre beaucoup, mais les habitants de la bande m√©diane de nuages ‚Äã‚Äãsont certainement plus. </p><br><p>  En fait, quel est le probl√®me ... Avec une diminution de l'√©clairage du panneau solaire, l'emplacement du point de puissance maximale (TMM) sur le CVC du vrai panneau solaire change.  Voyons maintenant ce qu'est le TMM ... Pour cela, nous prenons un panneau solaire avec la puissance d√©clar√©e de 200 W (j'ai Delta BST200-24P) et en supprimons la caract√©ristique courant-tension (I-V) √† un niveau d'ensoleillement de 1000 W / m <sup>2</sup> : </p><br><p><img src="https://habrastorage.org/webt/19/of/fo/19offomrype-rernndjj3hb2wqm.png" alt="VAC du panneau solaire"></p><br><p><img src="https://habrastorage.org/webt/qz/ul/97/qzul97qjoj_0vwksddogizi9wkk.jpeg" alt="Panneau solaire TTX"></p><br><p>  Si vous regardez le graphique de puissance, il montre clairement le pic dans lequel le panneau donne la puissance maximale possible - c'est TMM.  De plus, si vous abaissez la ligne √† partir de ce point, elle coupera le CVC - les coordonn√©es de ce point sont le r√©sultat m√™me que vous devez trouver.  En termes simples: <strong>"MPPT est le processus de recherche d'un point sur la caract√©ristique I-V auquel le produit du courant et de la tension a une valeur maximale"</strong> </p><br><p>  De plus, il vaut la peine de faire attention que le panneau solaire puisse donner un peu plus, c'est normal, car  son efficacit√© d√©pend non seulement du niveau d'insolation, mais aussi de la temp√©rature.  Si vous mettez le panneau au soleil, apr√®s quelques heures, il chauffera assez fortement et la puissance diminuera d'environ 10%. </p><br><p>  Voyons maintenant ce que fera exactement le contr√¥leur de charge et pourquoi il a besoin d'IRM.  Comme mentionn√© pr√©c√©demment, le niveau d'ensoleillement changera consid√©rablement pendant le fonctionnement: les nuages, le temps nuageux, l'aube et le coucher du soleil, respectivement, et la caract√©ristique I-V du panneau solaire changera √©galement: </p><br><p><img src="https://habrastorage.org/webt/um/ll/w_/umllw__pu-2_11x5p3kdytfbjqm.png" alt="CVC de l'insolation"></p><br><p>  Le graphique montre la caract√©ristique I-V pour 4 cas: 1000, 800, 600 et 400 W / m <sup>2</sup> et, en cons√©quence, pour chaque cas, nous aurons notre propre point sur la caract√©ristique I-V, o√π le produit du courant et de la tension aura une valeur maximale.  <strong>La t√¢che du contr√¥leur de charge avec MPPT est de rechercher le point de puissance maximale pour des conditions m√©t√©orologiques sp√©cifiques.</strong>  Par exemple, vous vivez quelque part √† Voronezh, vous avez de la chaleur et beaucoup d'√©nergie solaire et vous avez trouv√© du TMM et tirez le meilleur parti de l'√©nergie, mais apr√®s 15 minutes, un nuage s'est lev√© au-dessus de vos panneaux et a ferm√© partiellement les panneaux et la valeur d'insolation a chang√©, et donc le CVC a chang√© panneaux.  Pour que le contr√¥leur de charge puisse s'adapter √† de nouvelles conditions, il doit, avec une certaine fr√©quence, par exemple, toutes les 5 minutes, effectuer des calculs et rechercher TMM pour un nouveau CVC. </p><br><p>  Il existe de nombreux algorithmes de recherche TMM, allant du plus simple "0.8 * U <sub>xx</sub> " √† divers algorithmes de balayage avec des r√©seaux de neurones, mais je d√©crirai plus en d√©tail les algorithmes et leur impl√©mentation dans le code dans un article s√©par√©.  J'esp√®re que vous comprenez ce qu'est le TMM et pourquoi nous le recherchons; maintenant vous pouvez aller directement √† la glande. </p><br><h1 id="glava-2-tehnicheskie-harakteristiki-i-funkcional-kontrollera">  Chapitre 2. Sp√©cifications et fonctionnalit√©s du contr√¥leur </h1><br><p>  Maintenant, il est n√©cessaire de d√©cider ce que le contr√¥leur devrait √™tre en mesure de fournir les fonctionnalit√©s n√©cessaires.  Tout d'abord, le contr√¥leur charge la batterie, et il est donc n√©cessaire de mettre en ≈ìuvre un contr√¥le CC / CV (stabilisation du courant et de la tension) √† la sortie, et pour cela, vous devez mesurer le courant et la tension √† la sortie.  Deuxi√®mement, pour rechercher TMM, il est n√©cessaire de mesurer la caract√©ristique I-V du panneau solaire, ce qui signifie qu'il est n√©cessaire de mesurer le courant et la tension √† l'entr√©e.  Troisi√®mement, il devrait y avoir un abaisseur continu / continu, qui abaissera la tension d'entr√©e √† 12 ou 24 V, dans ce cas, ce sera un abaisseur synchrone.  Tout cela vous permettra de mettre en ≈ìuvre les fonctionnalit√©s de base de l'appareil, par cons√©quent, le diagramme fonctionnel ressemblera √† ceci: </p><br><p><img src="https://habrastorage.org/webt/kr/eu/e0/kreue0025-em-j32uy7zfzqo2gw.png" alt="Diagramme fonctionnel"></p><br><p>  Comme vous pouvez le voir, il n'y a rien de compliqu√©, le circuit est tr√®s similaire √† l'exemple de cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> et les seules diff√©rences sont dans les circuits de r√©troaction suppl√©mentaires pour impl√©menter l'algorithme de recherche TMM et le processus de charge.  En outre, il est n√©cessaire de mettre en ≈ìuvre une protection contre la surchauffe, des courants traversants, d'ajouter quelques interfaces pour communiquer avec le monde ext√©rieur et de mettre √† jour le firmware de mani√®re pratique. </p><br><h5 id="tehnicheskie-harakteristiki">  Sp√©cifications: </h5><br><ul><li>  Tension d'entr√©e: 15 ... 60V </li><li>  Tension de sortie: 12 / 24V </li><li>  Courant de sortie nominal: 20A </li><li>  Algorithmes IRM: Oui </li><li>  Fr√©quence de conversion: 100 kHz </li><li>  Protection contre la surchauffe: Oui </li><li>  Gr√¢ce √† la protection actuelle: Oui </li><li>  Protection de la batterie: OVP et OCP </li><li>  Interfaces: USB, Modbus </li><li>  Ressource: au moins 50 000 heures </li><li>  Dimensions hors tout: 1109020 mm </li></ul><br><p>  Il n'y a pas de fioritures sp√©ciales dans cette solution, le principal biais est la fiabilit√© accrue, l'efficacit√© des algorithmes TMM et le maintien d'un co√ªt de contr√¥leur ad√©quat.  Parmi les commodit√©s, il a √©t√© d√©cid√© de poser un USB isol√© galvaniquement pour r√©gler et flasher le microcontr√¥leur de contr√¥le + il peut √™tre utilis√© pour le d√©bogage si vous n'aimez pas SWO.  En outre, pour la mise en ≈ìuvre de la t√©l√©commande et de la surveillance, le RS-485 a √©t√© install√©, ce qui est fiable, bon march√© √† mettre en ≈ìuvre et vous permet d'organiser la communication sur une distance de 1000 m√®tres.  Du wi-fi et d'autres choses, la radio a refus√© imm√©diatement, car  le contr√¥leur est g√©n√©ralement utilis√© dans un panneau m√©tallique et en option dans un b√¢timent en b√©ton arm√©. </p><br><h1 id="glava-3-vybor-komponentov">  Chapitre 3. S√©lection des composants </h1><br><p>  Sur KDPV, il est visible que l'appareil se compose de deux cartes de circuits imprim√©s: module de contr√¥le √† 4 couches et la carte principale √† 2 couches.  Attentif peut remarquer que le module de contr√¥le est similaire √† la solution du dernier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> , mais enti√®rement repens√©.  En effet, apr√®s avoir test√© la version pr√©c√©dente de la <em>carte de contr√¥le</em> et apr√®s discussions dans les commentaires, il a √©t√© d√©cid√© d'apporter un certain nombre de changements globaux: </p><br><ul><li>  Refus d'installation verticale dans le connecteur et passage √† l'horizontale.  Cela nous a permis de r√©soudre le probl√®me avec le connecteur et de se passer des PLS 2,54 mm habituels, ainsi que de r√©duire consid√©rablement la hauteur de l'appareil.  Avec la version verticale, la hauteur du contr√¥leur serait de 60 mm, pas 20, et il y aurait une grande chance de casser la carte de contr√¥le.  Maintenant, il ne se d√©marque pas de l'arri√®re-plan des autres composants et prend toujours peu de place; </li><li>  Dimensions du panneau r√©duites √† 90x35 mm; </li><li>  Le contr√¥leur STM32F334R8T6 a √©t√© remplac√© par un STM32F334C8T6 plus compact et moins cher.  Ce remplacement a √©galement entra√Æn√© une diminution du nombre de canaux de commande du demi-pont de 5 √† 4.  Comme le montre la pratique, ce contr√¥leur ne prend pas le contr√¥le √† la fois par 5 demi-ponts, √† moins d'algorithmes tr√®s simples.  Sur cette base, il a √©t√© d√©cid√© d'abandonner le package LQFP-64 au profit du LQFP-48; </li><li>  Ajout d'un pont USB isol√© galvaniquement, ou plus pr√©cis√©ment, du pont USB-UART, car  le microcontr√¥leur lui-m√™me n'a pas d'interface mat√©rielle USB; </li><li>  Suppression de la puce PHY pour RS-485 de la carte de contr√¥le, comme  tout le monde n'en a pas besoin et pas toujours, mais pour son utilisation possible, un UART et un gpio suppl√©mentaire pour la r√©ception / transmission du contr√¥le sont sortis sur le connecteur.  Aussi maintenant, sur le tableau principal, vous pouvez mettre PHY isol√© galvaniquement et ne pas √™tre li√© √† ma d√©cision; </li><li>  En plus de l'interface SWD, il a √©t√© d√©cid√© de sortir SWO sur le connecteur de d√©bogage pour un d√©bogage plus pratique du programme. </li></ul><br><p><img src="https://habrastorage.org/webt/bz/tw/cd/bztwcd9f2vlp49nv4ajjzq5pux4.jpeg" alt="Conseil d'administration"></p><br><p>  Passons maintenant √† la s√©lection des composants pour la partie principale (puissance) du convertisseur.  Dans mon histoire pr√©c√©dente sur la topologie Buck, j'ai parl√© du choix des composants de puissance (transistors, condensateurs, inductances) et de la m√©thode de calcul de leurs valeurs nominales.  Aujourd'hui, je voudrais parler un peu plus de composants tout aussi importants, √† savoir le pilote de gestion des touches d'alimentation, les capteurs de courant, etc. </p><br><h5 id="datchik-toka">  Capteur de courant </h5><br><p>  Pour contr√¥ler la charge de la batterie et mesurer la caract√©ristique courant-tension du panneau solaire, il est n√©cessaire de mesurer un courant continu dans la plage de 0 √† 20A.  Il n'y a pas beaucoup d'options pour mesurer le courant continu; les m√©thodes les plus efficaces et les plus simples sont un shunt de courant et un capteur √† effet Hall.  Dans la premi√®re version, j'ai essay√© un tas de "shunt + INA194", l'option fonctionne g√©n√©ralement, mais le moniteur lui-m√™me √©tait assez bruyant et il y avait un probl√®me de mesure des courants inf√©rieurs √† 3-4A.  Le probl√®me a √©t√© r√©solu en augmentant la valeur nominale du shunt et du filtre num√©rique, mais ensuite la puissance lib√©r√©e sur le shunt sous forme de chaleur a augment√©, ce que je ne voulais pas beaucoup. </p><br><p>  Au d√©part, j'ai lanc√© l'option avec l'utilisation de capteurs √† effet Hall, √† savoir la s√©rie ACS (par exemple, ACS758 ou ACS711), car  J'ai d√©j√† essay√© de les appliquer par le pass√©, mais ils ont beaucoup menti et leur plage de mesure est faible.  Certes, dans l'une des discussions, un homme a parl√© de l'exp√©rience r√©ussie de l'utilisation de ces capteurs, il s'est av√©r√© que des s√©ries relativement nouvelles ont cess√© de r√©pondre √† la moindre interf√©rence, l'essentiel est qu'il n'y avait rien de fer ou quelque chose qui pourrait √™tre magn√©tis√© pr√®s d'eux.  J'ai besoin de mesurer le courant continu dans un syst√®me o√π le taux de changement de courant n'est pas √©lev√©, et donc une bande de 100 kHz est suffisante.  Sur la base de la simplicit√© et du prix de la solution, dans la deuxi√®me version du contr√¥leur MPPT, j'ai install√© ACS713ELCTR-30A.  Allegro a deux versions de capteurs - DC et DC / AC, je n'ai pas besoin de mesurer le changement, et donc le choix est √©vident en faveur de DC, qui ont √©galement une grande valeur de "volts par amp√®re".  Cela a permis de mesurer avec pr√©cision non seulement les grands courants, mais aussi les petits au niveau de 0,3 ... 0,5A avec une erreur r√©elle de ¬± 5%.  Le circuit d'allumage de ce capteur est extr√™mement simple: </p><br><p><img src="https://habrastorage.org/webt/ep/-r/r2/ep-rr2vao5uk4rxhnpkxcibhgos.png" alt="Circuit de capteur de courant"></p><br><p>  L'inclusion est standard, il n'y a pas de magie dans le circuit, la seule chose √† faire est de "coordonner" la plage de sortie du capteur 0 ... 5V avec ce qu'il peut mesurer l'ADC du microcontr√¥leur STM32, √† savoir avec la plage de 0 ... 3.3V.  Le capteur a une tension de sortie, il est lin√©aire et une augmentation de la tension de sortie de 133 mV signifie une augmentation du courant traversant le capteur de 1A.  Sur cette base, la tension de sortie minimale est de 0 V et la tension maximale de 30 A * 133 mV / A = 3,99 V.  Th√©oriquement, le diviseur de tension n'a pas pu √™tre r√©gl√©, car  le courant maximum n'est que de 20 A et donc la tension de sortie sera √† moins de 2,66 V et ne menace en aucun cas l'entr√©e ADC, mais il est pr√©f√©rable de la jouer en toute s√©curit√©.  Peut-√™tre qu'apr√®s des tests et une longue intrusion de l'appareil, je retire toujours le diviseur et place un suiveur de tension sur l'ampli-op. </p><br><h5 id="drayver-upravleniya-zatvorami-tranzistorov">  Transistor Gate Driver </h5><br><p>  M√™me au stade de l'id√©e, j'ai d√©cid√© d'abandonner imm√©diatement l'isolement galvanique complet du circuit de commande du circuit de puissance, il est banal cher, m√™me s'il √©limine les interf√©rences et prot√®ge la partie num√©rique.  L'introduction d'une isolation galvanique de 2 tensions et d'un driver augmenterait le prix du convertisseur de 40%.  Par cons√©quent, j'ai d√ª refuser mes pilotes Infineon 1ED / 1EDI pr√©f√©r√©s et choisir quelque chose de d√©cent avec une puissance d'amor√ßage pour la touche sup√©rieure, mon choix s'est port√© sur une solution assez nouvelle - NCP5183DR2G.  Le pilote s'est r√©v√©l√© tr√®s stable en fonctionnement et suffisant pour contr√¥ler une paire de mosfets √† une fr√©quence de 100 kHz.  J'ai trouv√© un inconv√©nient - l'absence d'une entr√©e s√©par√©e, par exemple, ShutDown ou Enable pour d√©sactiver le pilote en cas d'accident.Par cons√©quent, pour mettre en ≈ìuvre la protection, vous devez installer une logique discr√®te suppl√©mentaire ou utiliser l'entr√©e mat√©rielle FAULT dans le microcontr√¥leur STM32F334 lui-m√™me.  J'ai choisi la deuxi√®me option et jusqu'√† pr√©sent elle ne m'a pas √©chou√©, m√™me si au d√©part j'√©tais sceptique quant √† la fiabilit√© d'une telle solution.  Le circuit de commande du transistor ressemble √† ceci: </p><br><p><img src="https://habrastorage.org/webt/lb/ga/kd/lbgakdmt_teki4jkembec5gwgwe.png" alt="Circuit pilote"></p><br><p>  La solution est simple et claire, la seule chose que j'ajouterai de moi-m√™me est que le condensateur C1 doit √™tre en c√©ramique avec un di√©lectrique X7R et de pr√©f√©rence pas le plus pourri, l'original Yageo / Murata / Samsung est suffisant pour tout le monde.  Le reste de la poudre libre peut √™tre une marque plus simple.  √Ä propos, vous pouvez lire sur "l'agonie de choix" de la valeur nominale des r√©sistances de grille R1 et R5 dans cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> . </p><br><h5 id="vyhodnye-kondensatory">  Condensateurs de sortie </h5><br><p>  J'ai indiqu√© ci-dessus la priorit√© de la fiabilit√© et des ressources du convertisseur, et il est donc n√©cessaire d'√©liminer toutes les faiblesses.  √Ä mon avis, il n'y a qu'un seul point faible dans les convertisseurs cc / cc modernes - les condensateurs √©lectrolytiques, qui en quelque sorte ¬´s√®chent¬ª et se d√©gradent apr√®s un certain temps, ce qui conduit d'abord √† une augmentation de l'ondulation et de la surchauffe, puis √† la d√©faillance du convertisseur. </p><br><p>  Dans mon contr√¥leur de charge, il y en a jusqu'√† 2: des condensateurs √† l'entr√©e et √† la sortie.  Il a √©t√© d√©cid√© de remplacer les √©lectrolytes de sortie par des condensateurs polym√®res √† l'√©tat solide (comme dans vos cartes vid√©o), qui sont beaucoup plus faciles √† r√©aliser sur des courants de dizaines d'amp√®res et ont une ressource d'un ordre de grandeur sup√©rieur √† celui du condensateur √©lectrolytique de la plus haute qualit√©.  Ils ont un inconv√©nient - le prix, ce plaisir de Panasonic co√ªte 2 $ / pc, mais √ßa vaut le coup. </p><br><p>  A l'entr√©e de l'appareil, la tension peut atteindre 60V, ce qui signifie que les condensateurs polym√®res √† l'√©tat solide ne peuvent plus √™tre aliment√©s, ils n'existent tout simplement pas, un maximum de 35V.  Certes, il existe des options hybrides, il s'agit d'un lien interm√©diaire entre l'√©lectrolyte et un condensateur √† semi-conducteurs, ils sont jusqu'√† 100V.  Pour ce type de condensateur, l'√©lectrolyte liquide est remplac√© par un √©lectrolytique p√¢teux, ce qui permet plusieurs fois d'augmenter sa ressource. </p><br><p><img src="https://habrastorage.org/webt/gl/tf/wd/gltfwd1e_9rxm2hpssaf225lico.jpeg" alt="Photos IRM"></p><br><p>  Les plus attentifs peuvent remarquer que les condensateurs √† semi-conducteurs de sortie sont diff√©rents sur deux cartes.  Je pense que tout le monde a "appr√©ci√©" le co√ªt d'un condensateur 120 uF 35V, l'√©lectrolyte de Wurth co√ªte 10 fois moins cher.  Sur cette base, j'ai d√©cid√© de faire des tests pour acheter une alternative aux condensateurs 35SEK330M de Panasonic.  Eh bien, comme alternative ... il y a une telle soci√©t√© asiatique <em>Lelon</em> , qui fabrique un analogique complet (selon leurs mots) de condensateurs Panasonic.  J'ai mis l'original sur une carte, sur un autre analogique, les appareils eux-m√™mes ont d√©j√† √©t√© test√©s pendant environ un mois et jusqu'√† ce que la diff√©rence soit vraiment remarqu√©e, voyons quelle sera la ressource finale, mais pour ceux qui veulent baisser le prix 5 fois √† 0,4 $ / pi√®ce, je vous conseille d'y penser. </p><br><h5 id="obschie-svedeniya-po-komponentam">  Pr√©sentation des composants </h5><br><p>  Je voudrais parler s√©par√©ment de la politique de choix des composants et des solutions.  √âtant donn√© que l'id√©e implique l'utilisation de ce contr√¥leur non seulement pour √©tudier sur la table, mais aussi pour travailler ¬´sur le terrain¬ª, il a √©t√© d√©cid√© de n'utiliser que des fabricants de confiance et de ne pas utiliser de composants chinois (sauf pour l'exp√©rience avec <em>Lelon</em> ) et divers m√©tiers avec aliexpress.  Dans ma version et dans la nomenclature, des originaux avec digikey de fabricants tels que Infineon, TI, ON, ST, Yageo, Bourns et d'autres apparaissent.  En principe, personne ne vous interdit de mettre des composants plus facilement, avec le m√™me aliexpress, mais soyez pr√™t √† r√©duire la fiabilit√© et l'efficacit√© du contr√¥leur. </p><br><h1 id="glava-4-o-proekte-i-ishodnikah">  Chapitre 4. √Ä propos du projet et des codes source </h1><br><p>  J'ai d√©j√† √©crit sur les composants de puissance et les m√©thodes de calcul dans mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article sur buck</a> , vous pouvez le lire ici.  Je ne donnerai que les r√©sultats que j'ai obtenus: </p><br><ul><li><p>  L'inductance de l'inductance de puissance est de 30 ŒºH, enroul√©e sur un anneau R32 / 20/10 en mat√©riau Kool Mu.  L'anneau est franchement s√©lectionn√© avec une marge, car  des exp√©riences de fr√©quence et d'augmentation de courant √©taient pr√©vues; </p><br></li><li><p>  La capacit√© des condensateurs de sortie est d'environ 300 microfarads, en r√©alit√©, la capacit√© est consid√©rablement plus √©lev√©e, ce qui a r√©duit l'ondulation de sortie.  J'ai essay√© de travailler avec 3 condensateurs, tout va bien, donc si vous d√©cidez de le r√©p√©ter, n'h√©sitez pas √† laisser la moiti√© des si√®ges pour les condensateurs de sortie vides.  En principe, vous pouvez essayer de souder 6 condensateurs √©lectrolytiques ordinaires, s'il n'est pas possible d'acheter des condensateurs √† semi-conducteurs.  Selon mes hypoth√®ses, le contr√¥leur fonctionnera sans aucun probl√®me; </p><br></li><li><p>  Transistors ( <em>IPD053N08N3GATMA1</em> ) J'ai choisi ceux qui √©taient dans mes stocks et assez faciles √† acheter.  Si vous avez d√©j√† les cl√©s ou ne pouvez pas acheter celles que j'ai, choisissez un transistor avec une r√©sistance de canal de pas plus de 8 mOhm et une grille de pas plus de 100 nC.  Sinon, le rendement chutera suffisamment et les transistors surchaufferont consid√©rablement. </p><br></li></ul><br><p>  Il y a aussi probablement ceux qui sont trop paresseux pour aller sur github, donc je vais laisser le sch√©ma complet de l'appareil au format PDF: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie puissance du contr√¥leur de charge</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tableau de commande universel</a> </li></ul><br><p>  La partie en fer du projet a √©t√© achev√©e dans Altium Designer 19, et le projet peut √©galement √™tre ouvert dans Curcuit Studio.  Pour ceux qui ne veulent pas s'impliquer dans l'achat de logiciels ou de piratage, il existe un sch√©ma dans les fichiers PDF et Gerber, cela vous suffira pour commander des cartes de circuits imprim√©s et construire vous-m√™me un contr√¥leur MPPT. </p><br><p>    ‚Ä¶     ""             github,         ,          .          dc/dc ,    -, -, -,  ,        . </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>       , ..     ,   , ,           .1         .                ‚Äî   10 ,   HIN  LIN   (GND).       ,     ""    . </p><br><p>      PCBway      ,       .     ,     , <del>   </del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Votre soutien sera consacr√© au mat√©riel et cela se traduira par un article int√©ressant. </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il me reste √©galement 2 jeux de cartes de circuits imprim√©s, si quelqu'un veut assembler un contr√¥leur, je donnerai gratuitement de bonnes mains. </font><font style="vertical-align: inherit;">Il vous suffit de collecter et, si vous le souhaitez, de m'√©crire vos commentaires et suggestions. </font><font style="vertical-align: inherit;">Les personnes int√©ress√©es √©crivent de fa√ßon personnelle.</font></font></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projets Github</font></font></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454024/">https://habr.com/ru/post/fr454024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454006/index.html">√Ä propos de l'informatique sans liens: promotions, r√©tention et chiffre d'affaires dans les entreprises de la CEI et des √âtats-Unis</a></li>
<li><a href="../fr454010/index.html">Enseignement sup√©rieur et continu en informatique: r√©sultats de l'√©tude My Circle</a></li>
<li><a href="../fr454012/index.html">La fin de l'√®re des appareils de r√©paration. Comment Apple et Amazon nettoient les anciens marchands d'√©lectronique</a></li>
<li><a href="../fr454016/index.html">3CX v16 Update 1, application 3CX pour iOS Beta et la nouvelle version 3CX Call Flow Designer</a></li>
<li><a href="../fr454018/index.html">R√©sum√© iOS n ¬∞ 6 (17 mai - 30 mai)</a></li>
<li><a href="../fr454028/index.html">Croquis avec PHP Russie 2019: code propre, magie noire</a></li>
<li><a href="../fr454030/index.html">Odigest: int√©ressant pour les cr√©ateurs de la semaine</a></li>
<li><a href="../fr454032/index.html">Routeur et donn√©es passant une architecture propre et rapide</a></li>
<li><a href="../fr454034/index.html">Premier mod√®le: Dataset Fashion MNIST</a></li>
<li><a href="../fr454036/index.html">6 fa√ßons d'aller √† l'enfer des solutions toutes faites et de r√©duire un million ou deux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>