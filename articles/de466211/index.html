<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏻 👩🏾‍🚀 🕹️ Projekt Mainline in Android 10 🙄 🧘🏾 ⛓️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gestern wurde das nächste Betriebssystem-Update für mobile Geräte von Google veröffentlicht. Eine der Hauptinnovationen von Android 10 war die "Projec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Projekt Mainline in Android 10</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466211/"> Gestern wurde das nächste Betriebssystem-Update für mobile Geräte von Google veröffentlicht.  Eine der Hauptinnovationen von Android 10 war die "Project Mainline".  Ich werde versuchen herauszufinden, was es ist, warum und wie es funktioniert. <br><a name="habracut"></a><br>  Seit vielen Jahren versucht Google, das Problem der Sicherheitsupdates auf Android zu lösen.  Android ist derzeit auf mehreren Milliarden Geräten installiert, aber die meisten Hersteller unterstützen Geräte nach der Veröffentlichung nur sehr ungern.  Dies führt dazu, dass viele Geräte in Betrieb sind, auf denen eine Version mit bekannten Schwachstellen installiert ist. <br><br>  Der erste große Schritt zur Vereinfachung der Aktualisierung von Android war „Project Treble“, bei dem Android in zwei Teile „unterteilt“ wurde: hardwareabhängig und unabhängig.  Dies erleichterte die Veröffentlichung von Updates für neue Versionen von Android.  Der nächste große Schritt war Project Mainline.  Sie können einzelne Komponenten des Betriebssystems aktualisieren, ohne das gesamte System zu aktualisieren, ähnlich wie beim Aktualisieren von Anwendungen. <br><h3>  Warum wird das benötigt? </h3><br>  In der Android-Architektur ist das Betriebssystem (häufig als Firmware bezeichnet) eng von Benutzerdaten und Anwendungen getrennt.  Es befindet sich in einem separaten Bereich des Flash-Speichers, ist schreibgeschützt und in den neuesten Versionen von Android zur Integritätskontrolle digital signiert.  Für Android-Anwendungen, die Teil des Betriebssystems sind, ist ein Update möglich, indem neue Versionen von Anwendungen in den Speicherbereich des Benutzers eingefügt werden.  Das Aktualisieren anderer Teile des Betriebssystems (Dienste, Bibliotheken usw.), beispielsweise mithilfe des Paketmanagers, wie bei Linux-Distributionen, war nicht möglich.  Für solche Korrekturen musste der Hersteller ein Update des gesamten Systems veröffentlichen.  Gleichzeitig erfordert jedes Update bei Verwendung von Google Mobile Services (die überwiegende Mehrheit der Geräte verwendet diese) eine Zertifizierung durch Google.  Und „Project Mainline“ löst dieses Problem. Jetzt können die Systemkomponenten ähnlich wie bei Android-Anwendungen einzeln aktualisiert werden.  Zusätzlich zu Sicherheitsupdates vereinfacht es auch die Aktualisierung von Systemeinstellungen und Daten, z. B. Zeitzonen (tzdata). <br><br><h3>  Wie funktioniert es? </h3><br>  Der Kern von Project Mainline ist der neue Container für APEX-Systemanwendungen (kurz für Android Pony EXpress). <br><br>  In Android 10 identifizierte Google 13 APEX-Pakete im System, die unabhängig voneinander aktualisiert werden können: <br><br><ul><li>  Sicherheit: Mediencodecs, Media Framework-Komponenten, DNS-Resolver, Verschlüsselung </li><li>  Datenschutz: Benutzeroberfläche für Dokumente, Berechtigungscontroller, ExtServices </li><li>  Konsistenz: Zeitzonendaten, ANGLE (Entwickler-Opt-In), Modul-Metadaten, Netzwerkkomponenten, Captive Portal-Anmeldung, Netzwerkberechtigungskonfiguration </li></ul><br>  APEX-Pakete können ähnlich wie APKs mit dem "Paketinstallationsprogramm", adb oder Google Play installiert werden. <br><br><h4>  Apex </h4><br>  Die APEX-Datei ähnelt der für Andoird APK-Anwendungen verwendeten. <br><br>  APEX ist ein Zip-Archiv mit 4 Hauptdateien: <br><br><ul><li>  apex_manifest.json - enthält den Namen des Pakets und seine Version; </li><li>  AndroidManifest.xml - Paketmetadaten (ähnlich wie APK); </li><li>  apex_payload.img - Image des ext4-Dateisystems; </li><li>  apex_pubkey - öffentlicher Schlüssel zum Überprüfen der Signatur des Bildes. </li></ul><br>  Der APEX Manager-Systemdienst (apexd) funktioniert mit APEX-Paketen. <br><br><h4>  Apex-Manager </h4><br><ul><li>  Das Paketinstallationsprogramm, das festgestellt hat, dass es sich um ein APEX-Paket handelt, übergibt es an den APEX-Manager. </li><li>  Der APEX-Manager überprüft das Paket und seine Version. </li><li>  Wenn die Überprüfungen erfolgreich sind, wird sie in den Benutzerbereich des Speichers entpackt, der Datensatz in der Datenbank aktualisiert und die Geräte neu gestartet. </li><li>  Beim Start von APEX überprüft der Manager alle Pakete aus der Datenbank, erstellt ein Schleifengerät für das ext4-Image und stellt es entlang des Pfads / apex / name @ ver bereit. </li></ul><br>  In einem Bild aus einem APEX-Paket kann Folgendes enthalten sein: <br><br><ul><li>  ausführbare Dateien </li><li>  gemeinsam genutzte (.so) Bibliotheken </li><li>  JAR-Bibliotheken, </li><li>  Datendateien </li><li>  Konfigurationsdateien. </li></ul><br><h4>  Unterschrift APEX-Paket </h4><br>  Das APEX-Paket wird zweimal mit zwei verschiedenen Schlüsseln signiert.  Das ext4-Image wird mit einem Schlüssel signiert (dm-verity wird wie beim Android Verified-Start verwendet), das APEX-Paket (Zip-Datei) wird mit dem zweiten Schlüssel signiert, ähnlich wie beim APK-Paket. <br><br><h4>  Linux-Kernel </h4><br>  APEX verwendet eine Reihe von Linux-Kernelmechanismen, z. B. ein Loop-Gerät, DM-Verity. <br>  APEX wird ab Kernel Version 4.4 unterstützt.  Für Geräte mit älteren Versionen des Kernels wird nur die Arbeit im "flachen" Modus unterstützt, der keine Aktualisierung unterstützt. <br><br>  Referenzen: <br>  <a href="">android.googlesource.com/platform/system/apex/+/refs/heads/master/docs/README.md</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">android-developers.googleblog.com/2019/05/fresher-os-with-projects-treble-and-mainline.html</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466211/">https://habr.com/ru/post/de466211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466195/index.html">PVS-Studio 7.04</a></li>
<li><a href="../de466197/index.html">PVS-Studio 7.04</a></li>
<li><a href="../de466199/index.html">Sperren in PostgreSQL: 4. Sperren im Speicher</a></li>
<li><a href="../de466201/index.html">Wie man die Wissenschaft in der IT verlässt und Tester wird: die Geschichte einer Karriere</a></li>
<li><a href="../de466203/index.html">Techdir-Tag in St. Petersburg. Bier, Pizza, zwei Mikrofone</a></li>
<li><a href="../de466213/index.html">4 Schritte zum Erstellen eines Kandidatenprofils</a></li>
<li><a href="../de466215/index.html">Modellorientiertes Design. Erstellung eines zuverlässigen Modells am Beispiel eines Luftfahrtwärmetauschers</a></li>
<li><a href="../de466217/index.html">Generieren von Dokumenten mit ONLYOFFICE DocumentBuilder</a></li>
<li><a href="../de466223/index.html">Saubere Zersetzung</a></li>
<li><a href="../de466227/index.html">Knotenorientierte Programmierung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>