<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> う  Estamos lanzando un proyecto Java con Maven de una nueva manera   じ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos hemos estado acostumbrados a Maven , a las versiones que ofrece y a la gesti贸n de dependencias. Maven naci贸 cuando la asamblea diaria del proyec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos lanzando un proyecto Java con Maven de una nueva manera</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424425/">  Todos hemos estado acostumbrados a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Maven</a> , a las versiones que ofrece y a la gesti贸n de dependencias.  Maven naci贸 cuando la asamblea diaria del proyecto era la m谩s atrevida, cuando se consideraba normal que se lanzara al menos un par de veces al a帽o, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jenkins se</a> llamaba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hudson</a> y los 谩rboles eran grandes ... <br><br>  Las ideas que Maven trajo al mundo del desarrollo fueron extremadamente populares y r谩pidamente ganaron popularidad: definiendo un proyecto de flujo de trabajo est谩ndar, un modelo de directorio est谩ndar y mucho m谩s, que durante mucho tiempo se dio por sentado. <br><br>  Como una de las innovaciones, maven introdujo un sistema de versiones est谩ndar.  La versi贸n se almacen贸 en el archivo del proyecto y cambi贸 cada vez que lanzamos una nueva versi贸n.  En un mundo donde hacer una rama y su merjunt no era una haza帽a accesible para todos, ese enfoque era bastante com煤n. <br><br>  Todo esto simplific贸 enormemente el desarrollo, el inicio de nuevos proyectos, la introducci贸n de desarrolladores al proyecto, el lanzamiento de la versi贸n y la gesti贸n de dependencias. <br><br>  Pero el mundo no se detiene, y a pesar del hecho de que muchas ideas implementadas por maven a煤n viven y se mueven de un proyecto a otro, el versionado de maven se ha convertido en un problema m谩s que una ventaja. <br><br>  A continuaci贸n, intentaremos cambiar el mundo para mejor y simplificar nuestras vidas. <a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Descargo de responsabilidad</b> <div class="spoiler_text">  Supongo que el lector est谩 familiarizado con Java, Maven, el ciclo de vida del desarrollo y la configuraci贸n de CI / CD, entiende por qu茅 necesita todo esto <s>e incluso un ninja</s> . <br></div></div><br>  En las realidades modernas, el lanzamiento de varias versiones por semana e incluso por d铆a se considera, si no la norma, el objetivo.  Y, en tales condiciones, almacenar la versi贸n en el archivo del proyecto conduce a una sobrecarga muy grande. <br><br>  Cada versi贸n lleva a dos confirmaciones en el repositorio y, como resultado, con el desarrollo activo y la versi贸n del proyecto, hay m谩s confirmaciones t茅cnicas que 煤tiles.  La historia del proyecto est谩 llena de basura y es dif铆cil de entender. <br>  Adem谩s, este enfoque conduce a la duplicaci贸n de informaci贸n: se ha vuelto habitual almacenar la versi贸n no solo en el archivo del proyecto, sino tambi茅n en forma de una etiqueta de repositorio. <br><br>  Adem谩s, surgi贸 la pregunta de seguridad: cuando tiene un proyecto grande, la m谩quina de compilaci贸n solo necesita acceso a 茅l.  Cuando hay muchos proyectos, el acceso a muchos proyectos es necesario y creamos un s煤per usuario con acceso a todos los proyectos con derecho a escribir, o tenemos la carga adicional de administrar una gran cantidad de usuarios con un conjunto limitado de derechos, pero a煤n con el derecho de escribir en el repositorio, y a menudo, y el derecho de comprometerse con el maestro sin grupo de solicitud y revisi贸n. <br><br>  Cuando se usa maven con el complemento de lanzamiento, aparece otra caracter铆stica interesante: la reconstrucci贸n no se realiza con el mismo conjunto de comandos que la versi贸n original. <br><br>  Quiz谩s todos estos problemas parezcan exagerados para alguien, pero con un n煤mero m谩s o menos grande de proyectos, administrar y configurar CI / CD se convierte en un proceso extremadamente desagradable y confuso. <br><br>  Ahora que el problema es visible, tratemos de resolverlo, de modo que no cambiemos el conjunto de herramientas, procesos y, en general, sea de alguna manera. <br><br>  Lo que se requiere: <br><br><ul><li>  la versi贸n se almacena una vez, como una etiqueta de repositorio </li><li>  es posible reconstruir cualquier versi贸n, el conjunto de pasos debe ser el mismo que en el caso de una nueva versi贸n </li><li>  no necesita permisos de escritura en el repositorio </li><li>  todav铆a usamos maven como gerente de proyecto </li></ul><br>  Supongamos que CI / CD obtendr谩 una etiqueta para nosotros y verificar谩 un proyecto. <br><br>  Supongamos que la etiqueta para nosotros est谩 llena de CI / CD en la variable de entorno RELEASE_TAG, luego, para liberar la versi贸n, debemos ejecutar los siguientes comandos: <br><br><pre><code class="bash hljs">mvn -B versions:<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -DnewVersion=<span class="hljs-variable"><span class="hljs-variable">$RELEASE_TAG</span></span> (1) mvn -B deploy (2)</code> </pre> <br>  1 - actualiza las versiones en pom-files del proyecto y sus m贸dulos <br>  2: compila y, si el proyecto est谩 configurado correctamente, carga los artefactos en el repositorio <br><br>  No olvide establecer el indicador <b>-B</b> , de lo contrario, el registro de ejecuci贸n se convierte en una calabaza. <br><br>  Importante: para evitar confusiones y mostrar claramente c贸mo y de d贸nde proviene el ensamblaje, debe instalar la versi贸n del proyecto en algo abstracto, por ejemplo, DESARROLLO-INSTANTNEA.  Puede usar el mismo comando: version: set.  La operaci贸n es 煤nica, porque ya no almacenamos la versi贸n del proyecto en un archivo. <br><br>  Como resultado de los cambios, puede eliminar la configuraci贸n de bloque maven-release-plugin y scm del archivo pom. <br><br>  禄De las desventajas: <br>  Si usa las versiones SNAPSHOT en alg煤n lugar, entonces puede comenzar la confusi贸n, ahora todas las versiones SNAPSHOT tienen el mismo aspecto.  Y quiz谩s esta forma de lanzar proyectos no es para ti. <br><br>  Puede parecer que el artefacto recogido de la misma confirmaci贸n pero con diferentes etiquetas ser谩 el mismo, pero, desafortunadamente, esto no es as铆.  A煤n exponemos la versi贸n en el archivo y, como resultado, los paquetes recopilados ser谩n diferentes. <br><br>  禄De los profesionales: <br><br><ul><li>  Se cumplen todos los requisitos, 隆y a煤n m谩s! </li><li>  la versi贸n se almacena solo en la etiqueta del proyecto </li><li>  El ensamblaje de la versi贸n nueva y la reconstrucci贸n de la versi贸n anterior se realiza mediante el mismo conjunto de comandos que la versi贸n original </li><li>  sin necesidad de derechos para comprometerse con el proyecto </li><li>  la caja de herramientas permanece igual </li><li>  bono: configuraci贸n del proyecto simplificada </li></ul><br>  Entonces, dos l铆neas salvaron nuevamente al mundo. <br>  Eso es todo, 隆gracias por su atenci贸n! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424425/">https://habr.com/ru/post/es424425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424415/index.html">Una soluci贸n compleja a los problemas simples de los servicios web de HighLoad</a></li>
<li><a href="../es424417/index.html">Roskomnadzor informa sobre los resultados de una lucha de tres a帽os contra piratas</a></li>
<li><a href="../es424419/index.html">驴Qu茅 sucede al crear un contenedor Flexbox?</a></li>
<li><a href="../es424421/index.html">Errores comunes de negocios en Internet que puede evitar</a></li>
<li><a href="../es424423/index.html">Google Chrome 69 inicia sesi贸n autom谩ticamente en su cuenta y no borra las cookies de Google al borrar el historial</a></li>
<li><a href="../es424427/index.html">Roskomnadzor y Telegram bots a trav茅s de un proxy</a></li>
<li><a href="../es424429/index.html">Ciencia Arte y Sonido: 4 proyectos impresionantes</a></li>
<li><a href="../es424431/index.html">Valve revela la clasificaci贸n de Steam Game Controller</a></li>
<li><a href="../es424433/index.html">驴Por qu茅 los hackers Mikrotik y c贸mo escond铆 100 mil RouterOS de una botnet?</a></li>
<li><a href="../es424435/index.html">Zoo de perforaci贸n petrolera: poner las cosas en orden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>