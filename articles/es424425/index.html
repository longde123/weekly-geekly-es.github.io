<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙌🏾 🤦🏾 🥁 Estamos lanzando un proyecto Java con Maven de una nueva manera 🍺 👇🏾 🤸🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos hemos estado acostumbrados a Maven , a las versiones que ofrece y a la gestión de dependencias. Maven nació cuando la asamblea diaria del proyec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos lanzando un proyecto Java con Maven de una nueva manera</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424425/">  Todos hemos estado acostumbrados a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Maven</a> , a las versiones que ofrece y a la gestión de dependencias.  Maven nació cuando la asamblea diaria del proyecto era la más atrevida, cuando se consideraba normal que se lanzara al menos un par de veces al año, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jenkins se</a> llamaba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hudson</a> y los árboles eran grandes ... <br><br>  Las ideas que Maven trajo al mundo del desarrollo fueron extremadamente populares y rápidamente ganaron popularidad: definiendo un proyecto de flujo de trabajo estándar, un modelo de directorio estándar y mucho más, que durante mucho tiempo se dio por sentado. <br><br>  Como una de las innovaciones, maven introdujo un sistema de versiones estándar.  La versión se almacenó en el archivo del proyecto y cambió cada vez que lanzamos una nueva versión.  En un mundo donde hacer una rama y su merjunt no era una hazaña accesible para todos, ese enfoque era bastante común. <br><br>  Todo esto simplificó enormemente el desarrollo, el inicio de nuevos proyectos, la introducción de desarrolladores al proyecto, el lanzamiento de la versión y la gestión de dependencias. <br><br>  Pero el mundo no se detiene, y a pesar del hecho de que muchas ideas implementadas por maven aún viven y se mueven de un proyecto a otro, el versionado de maven se ha convertido en un problema más que una ventaja. <br><br>  A continuación, intentaremos cambiar el mundo para mejor y simplificar nuestras vidas. <a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Descargo de responsabilidad</b> <div class="spoiler_text">  Supongo que el lector está familiarizado con Java, Maven, el ciclo de vida del desarrollo y la configuración de CI / CD, entiende por qué necesita todo esto <s>e incluso un ninja</s> . <br></div></div><br>  En las realidades modernas, el lanzamiento de varias versiones por semana e incluso por día se considera, si no la norma, el objetivo.  Y, en tales condiciones, almacenar la versión en el archivo del proyecto conduce a una sobrecarga muy grande. <br><br>  Cada versión lleva a dos confirmaciones en el repositorio y, como resultado, con el desarrollo activo y la versión del proyecto, hay más confirmaciones técnicas que útiles.  La historia del proyecto está llena de basura y es difícil de entender. <br>  Además, este enfoque conduce a la duplicación de información: se ha vuelto habitual almacenar la versión no solo en el archivo del proyecto, sino también en forma de una etiqueta de repositorio. <br><br>  Además, surgió la pregunta de seguridad: cuando tiene un proyecto grande, la máquina de compilación solo necesita acceso a él.  Cuando hay muchos proyectos, el acceso a muchos proyectos es necesario y creamos un súper usuario con acceso a todos los proyectos con derecho a escribir, o tenemos la carga adicional de administrar una gran cantidad de usuarios con un conjunto limitado de derechos, pero aún con el derecho de escribir en el repositorio, y a menudo, y el derecho de comprometerse con el maestro sin grupo de solicitud y revisión. <br><br>  Cuando se usa maven con el complemento de lanzamiento, aparece otra característica interesante: la reconstrucción no se realiza con el mismo conjunto de comandos que la versión original. <br><br>  Quizás todos estos problemas parezcan exagerados para alguien, pero con un número más o menos grande de proyectos, administrar y configurar CI / CD se convierte en un proceso extremadamente desagradable y confuso. <br><br>  Ahora que el problema es visible, tratemos de resolverlo, de modo que no cambiemos el conjunto de herramientas, procesos y, en general, sea de alguna manera. <br><br>  Lo que se requiere: <br><br><ul><li>  la versión se almacena una vez, como una etiqueta de repositorio </li><li>  es posible reconstruir cualquier versión, el conjunto de pasos debe ser el mismo que en el caso de una nueva versión </li><li>  no necesita permisos de escritura en el repositorio </li><li>  todavía usamos maven como gerente de proyecto </li></ul><br>  Supongamos que CI / CD obtendrá una etiqueta para nosotros y verificará un proyecto. <br><br>  Supongamos que la etiqueta para nosotros está llena de CI / CD en la variable de entorno RELEASE_TAG, luego, para liberar la versión, debemos ejecutar los siguientes comandos: <br><br><pre><code class="bash hljs">mvn -B versions:<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -DnewVersion=<span class="hljs-variable"><span class="hljs-variable">$RELEASE_TAG</span></span> (1) mvn -B deploy (2)</code> </pre> <br>  1 - actualiza las versiones en pom-files del proyecto y sus módulos <br>  2: compila y, si el proyecto está configurado correctamente, carga los artefactos en el repositorio <br><br>  No olvide establecer el indicador <b>-B</b> , de lo contrario, el registro de ejecución se convierte en una calabaza. <br><br>  Importante: para evitar confusiones y mostrar claramente cómo y de dónde proviene el ensamblaje, debe instalar la versión del proyecto en algo abstracto, por ejemplo, DESARROLLO-INSTANTÁNEA.  Puede usar el mismo comando: version: set.  La operación es única, porque ya no almacenamos la versión del proyecto en un archivo. <br><br>  Como resultado de los cambios, puede eliminar la configuración de bloque maven-release-plugin y scm del archivo pom. <br><br>  »De las desventajas: <br>  Si usa las versiones SNAPSHOT en algún lugar, entonces puede comenzar la confusión, ahora todas las versiones SNAPSHOT tienen el mismo aspecto.  Y quizás esta forma de lanzar proyectos no es para ti. <br><br>  Puede parecer que el artefacto recogido de la misma confirmación pero con diferentes etiquetas será el mismo, pero, desafortunadamente, esto no es así.  Aún exponemos la versión en el archivo y, como resultado, los paquetes recopilados serán diferentes. <br><br>  »De los profesionales: <br><br><ul><li>  Se cumplen todos los requisitos, ¡y aún más! </li><li>  la versión se almacena solo en la etiqueta del proyecto </li><li>  El ensamblaje de la versión nueva y la reconstrucción de la versión anterior se realiza mediante el mismo conjunto de comandos que la versión original </li><li>  sin necesidad de derechos para comprometerse con el proyecto </li><li>  la caja de herramientas permanece igual </li><li>  bono: configuración del proyecto simplificada </li></ul><br>  Entonces, dos líneas salvaron nuevamente al mundo. <br>  Eso es todo, ¡gracias por su atención! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424425/">https://habr.com/ru/post/es424425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424415/index.html">Una solución compleja a los problemas simples de los servicios web de HighLoad</a></li>
<li><a href="../es424417/index.html">Roskomnadzor informa sobre los resultados de una lucha de tres años contra piratas</a></li>
<li><a href="../es424419/index.html">¿Qué sucede al crear un contenedor Flexbox?</a></li>
<li><a href="../es424421/index.html">Errores comunes de negocios en Internet que puede evitar</a></li>
<li><a href="../es424423/index.html">Google Chrome 69 inicia sesión automáticamente en su cuenta y no borra las cookies de Google al borrar el historial</a></li>
<li><a href="../es424427/index.html">Roskomnadzor y Telegram bots a través de un proxy</a></li>
<li><a href="../es424429/index.html">Ciencia Arte y Sonido: 4 proyectos impresionantes</a></li>
<li><a href="../es424431/index.html">Valve revela la clasificación de Steam Game Controller</a></li>
<li><a href="../es424433/index.html">¿Por qué los hackers Mikrotik y cómo escondí 100 mil RouterOS de una botnet?</a></li>
<li><a href="../es424435/index.html">Zoo de perforación petrolera: poner las cosas en orden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>