<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📻 🤘🏻 🤽🏻 Smart Contracts Waves. Erste Erfahrung 👩🏾‍🎤 👩🏾‍💻 🔭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im April 2018 präsentierte das Waves-Team seine nicht vollständig abgeschlossenen Smart-Verträge. 

 Wenig später, als der Waves-Hackathon angekündigt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Contracts Waves. Erste Erfahrung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424111/"><img src="https://habrastorage.org/webt/ip/ma/mp/ipmampafkwgxtl86xk0emyupu9u.png" alt="Bild"><br><br>  Im April 2018 präsentierte das Waves-Team seine nicht vollständig abgeschlossenen Smart-Verträge. <br><br>  Wenig später, als der Waves-Hackathon angekündigt wurde, entschied ich, dass es Zeit war, in neue Technologien einzutauchen.  Unter dem Schnitt finden Sie detaillierte Informationen zu dem Smart-Vertrag, der beim Hackathon den dritten Platz gewonnen hat. <br><br>  Der Artikel ist nützlich für Entwickler, um ihre eigenen intelligenten Verträge zu implementieren und sich mit Technologie vertraut zu machen. <br><a name="habracut"></a><br><h4>  Idee </h4><br>  Die Idee des Projekts ist es, die Gehälter von Softwareentwicklern, die Github verwenden, automatisch proportional zur geleisteten Arbeit zu verteilen.  Die Hauptaufgabe, die Aufgabe, die der intelligente Vertrag gleichzeitig löst, befreit uns von der Notwendigkeit, dem Geldverteilungsprogramm zu vertrauen, und ermöglicht es dem Benutzer ohne Programmierkenntnisse sogar, die korrekte Verteilung von Geldern zu überprüfen, bevor er Geld überweist <br><br><h4>  Technologie-Stack </h4><br>  HTML und JavaScript (Node.js Waves- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliothek</a> ), Open <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Source</a> auf GitHub und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demonstration des Projekts</a> auf Firebase Hosting <br><br><h4>  Der Prozess </h4><br><ol><li>  Der Benutzer wählt das GitHub-Repository aus und bestimmt die Gesamtmenge der Gehälter </li><li>  Der Benutzer zahlt 0,01 Wellen (ca. 0,02 US-Dollar), um Daten in der Blockchain zu speichern und einen intelligenten Vertrag zu erstellen </li><li>  Der Benutzer überprüft die Richtigkeit der Daten und überträgt dann die Höhe der Gehälter an die Adresse des Smart-Vertrags </li><li>  Die Gehälter werden zwischen den Entwicklern geteilt </li></ol><br><h4>  Entwicklung </h4><br>  Der beste Einstiegspunkt für Anfänger ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demokonsole</a> , die ein gutes Beispiel und eine Konsole zum Testen von Code enthält.  Während der Entwicklung ist es besser, eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testblockkette zu verwenden</a> , bei der Sie mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem Klick</a> 10 kostenlose <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testwellen erhalten</a> .  Obwohl Google aufgrund der Neuheit der Technologie immer noch nicht viele Beispiele findet, sind intelligente Verträge gut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dokumentiert</a> und enthalten alle erforderlichen Informationen. <br><br>  Die NodeJs-Bibliothek (1.4.0) funktioniert bereits gut in Browsern (mit Ausnahme der Erstellung von Alias), ist jedoch leider noch NICHT mit Google Functions oder React Native kompatibel (Waves-Entwickler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">versprechen,</a> dies in naher Zukunft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zu</a> beheben). <br><br><h4>  Intelligenter Vertrag </h4><br>  Für ein Konto wird ein intelligenter Vertrag erstellt, der jede Aktion mit diesem Konto überprüft (mit Ausnahme eingehender Geldtransfers): <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> signature = base58<span class="hljs-string"><span class="hljs-string">'${currentWallet.keyPair.publicKey}'</span></span>; match tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> tx:<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TransferTransaction</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employerAddress = addressFromPublicKey(tx.senderPk); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dateKey = toBase58String(addressFromRecipient(tx.recipient).bytes); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> salary = extract(getLong(employerAddress, dateKey)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((salary == tx.amount) &amp;&amp; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], signature)) then <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><h4>  Intelligentes zeilenweises Parsen von Verträgen </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> signature = base58<span class="hljs-string"><span class="hljs-string">'${currentWallet.keyPair.publicKey}'</span></span>;</code> </pre><br>  Hier speichern wir den öffentlichen Schlüssel der Brieftasche (Ihr JavaScript muss die mit dem Befehl Waves.Seed.create () erstellte Variable currentWallet enthalten), damit nur das Smart Contract-Konto der Brieftasche (in unserem Fall Smart Rewarding Project) Geld überweisen kann. <br><br><pre> <code class="javascript hljs">match tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> tx:<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TransferTransaction</span></span></span><span class="hljs-function"> =&gt;</span></span> {some validations} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  Dies ist die Grundkonstruktion eines intelligenten Waves-Vertrags. Er besagt, dass dieser Vertrag andere Aktivitäten als das Überweisen von Geldern (TransferTransaction) verbietet.  Nach dem Erstellen eines Vertrags ist es daher unmöglich, Daten über Entwickler (DataTransaction) oder den Smart-Vertrag selbst (SetScript) zu ändern. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employerAddress = addressFromPublicKey(tx.senderPk);</code> </pre><br>  Es verwendet die Basismethode addressFromPublicKey der integrierten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliothek</a> , um die Adresse des Anforderungserstellers aus seinem öffentlichen Schlüssel abzurufen. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dateKey = toBase58String(addressFromRecipient(tx.recipient).bytes);</code> </pre><br>  Die Basismethode addressFromRecipient ruft die Adresse des Geldempfängers ab <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> salary = extract(getLong(employerAddress, dateKey));</code> </pre><br>  Die grundlegende getLong-Methode liefert uns Daten, die in der Blockchain unter der Adresse des Anforderungserstellers gespeichert sind. Dies ist die Höhe des Gehalts des Entwicklers.  Der Vertrag kann auf Daten zugreifen, die in der Waves-Blockchain gespeichert sind (und NICHT auf Daten, die sich auf einer Website oder einem Server eines Drittanbieters befinden). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((salary == tx.amount) &amp;&amp; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], signature)) then <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Hier erfolgt die Überprüfung des korrekten Betrags und der Unterschrift.  True bedeutet, dass die Transaktion zulässig ist, und false bedeutet, dass die Transaktion abgelehnt wird.  Somit wird bei jeder Überweisung von diesem Konto überprüft, dass das Geld nur an die Geldbörse des Entwicklers und in dem bereits in der Blockkette gespeicherten Betrag im Format eines leicht lesbaren Schlüsselpaars (Adresse als Schlüssel und Betrag als Wert) gesendet wird, was dies ermöglicht Vertrauen Sie dem Programm, überprüfen Sie alle Daten selbst für 5-10 Sekunden, bevor Sie Gehälter übertragen. <br><br>  Online-Demonstration des Projekts in der Testblockchain, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> verfügbar <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier sehen</a> Sie den Projektcode. <br><br>  Ich hoffe, dass der Artikel informativ war und für Sie nützlich sein wird, um Ihren ersten intelligenten Vertrag zu schreiben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424111/">https://habr.com/ru/post/de424111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424099/index.html">Bestimmen der Reife einer Wassermelone mithilfe von Keras: ein vollständiger Zyklus von einer Idee bis zu einem Programm bei Google Play</a></li>
<li><a href="../de424103/index.html">Silicon Valley ist seit den 1970er Jahren für seine Mitarbeiter „unverzeihlich“</a></li>
<li><a href="../de424105/index.html">Die NASA weiß, wie man den Mars wieder grün macht</a></li>
<li><a href="../de424107/index.html">Es ist ein Jahr seit der Lücke im My Cloud-Heimnetzwerkspeicher von WD vergangen</a></li>
<li><a href="../de424109/index.html">VSCE # 2: Podcast für Medienunternehmer</a></li>
<li><a href="../de424113/index.html">Designprozess, Forschung und Jobsuche</a></li>
<li><a href="../de424115/index.html">Anwendungsfälle oder welche Load Balancer fehlen</a></li>
<li><a href="../de424121/index.html">Erstellen einer Triggerfunktion in pgModeler</a></li>
<li><a href="../de424127/index.html">Wie man Freunde findet Ovirt und Let's Encrypt</a></li>
<li><a href="../de424129/index.html">Android-Entwicklung. Ein bisschen über die schnelle Arbeit mit Listen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>