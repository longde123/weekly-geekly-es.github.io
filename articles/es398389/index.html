<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôíÔ∏è üë®üèæ ‚èπÔ∏è KiQ broma cat o c√≥mo hicimos un juguete parlante para adultos üò∂ üèéÔ∏è ‚ù§Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el mundo hay una cantidad incre√≠ble de juguetes parlantes para ni√±os y esto solo da la impresi√≥n de que los adultos se aburren. Nuestro equipo deci...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>KiQ broma cat o c√≥mo hicimos un juguete parlante para adultos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398389/"><img src="https://ksr-ugc.imgix.net/assets/013/958/564/d6c061618e04b2f7d81d1d88c07c543d_original.jpg?w=680&amp;fit=max&amp;v=1475469443&amp;auto=format&amp;q=92&amp;s=94a8eb1e4d730d541ec407637a1490ee" alt="Juguete Kiq"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el mundo hay una cantidad incre√≠ble de juguetes parlantes para ni√±os y esto solo da la impresi√≥n de que los adultos se aburren. </font><font style="vertical-align: inherit;">Nuestro equipo decidi√≥ rectificar esta situaci√≥n.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El comienzo de la historia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo comenz√≥ con el hecho de que </font><font style="vertical-align: inherit;">un pensamiento brillante lleg√≥ </font><font style="vertical-align: inherit;">a la mente inquisitiva de un amigo m√≠o y un colega de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ¬øpor qu√© no solo ni√±os, sino tambi√©n adultos para divertir bromas tem√°ticas? El beneficio del hierro asequible y bien probado ahora nunca es una rareza, y no solo puede parpadear con luces, sino tambi√©n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cantar canciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este sentido, me llam√≥ y se ofreci√≥ a </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repetir la haza√±a √©pica para</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asegurarse de que ESP8266 reproduzca m√∫sica MP3 en la red para que sea bueno y </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si el h√°mster se est√° rompiendo en pedazos, ¬ø</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hay realmente un rendimiento suficiente, que hice r√°pidamente en las vacaciones de A√±o Nuevo en 2016:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pW-BoVe46O8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 reproduce una radio por Internet en el video, emitiendo sonido usando el PWM de 5 bits a trav√©s del truco I2S. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, reproducir radio MP3 desde Internet consumi√≥ casi todo el recurso ESP8266 y son√≥ "regular", mientras que la imaginaci√≥n ya nos atrajo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algo m√°s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que una columna de radio MP3. </font><font style="vertical-align: inherit;">Con estos impulsos creativos, fuimos a nuestro equipo y amado chef </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vladimir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de una peque√±a lluvia de ideas, una imagen m√°s detallada e incluso una </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadena l√≥gica</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de lo que no solo queremos, sino que podemos hacer:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para reemplazar MP3 con algo </font><font style="vertical-align: inherit;">que </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;">requiere</font></a><font style="vertical-align: inherit;"> menos recursos y es m√°s libre, nos detuvimos en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn se transfiri√≥ con</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bastante √©xito y rapidez a ESP8266.</font></font><br>
<br>
</li>
<li>           SD , ..    ,    ESP8266     ‚Äî    .<br>
<br>
</li>
<li> ¬´ ¬ª  - ,     random .     ,        .         Apple Notification Center Service (ANCS),     iPod, iPhone  iPad.<br>
<br>
</li>
<li>     Bluetooth Low Energy (BLE),            .<br>
<br>
</li>
<li>                .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pawn language</a>.<br>
<br>
</li>
<li>       ,           ‚Äî          ¬´¬ª  ¬´¬ª (),   -        .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, quer√≠a hacer un prototipo muy simple pero totalmente funcional en una placa todo en uno, as√≠ que decidimos probar </font><font style="vertical-align: inherit;">MediaTek </font><font style="vertical-align: inherit;">en </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkIt ONE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Y la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u√±a de la red</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tuvo √©xito casi de inmediato. Hubo una conexi√≥n con el tel√©fono y desde la tarjeta SD MP3 se reprodujo perfectamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que aqu√≠ est√° la felicidad y una plataforma lista para usar. Pero luego nos enfrentamos con la </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dura realidad de las</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> limitaciones de su SDK cerrado y la euforia pas√≥. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos dimos cuenta de que la plataforma terminada en una placa, que cumpl√≠a todos nuestros deseos, no estaba en la naturaleza, lo que significa que ten√≠amos que crearla desde cero.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tuvimos que elegir (febrero de 2016) el chip BLE m√°s adecuado, que deb√≠a conectarse con el ESP8266. </font><font style="vertical-align: inherit;">Como una conexi√≥n entre el ESP8266 y el chip BLE (a√∫n no sab√≠amos qu√© tipo de chip ser√≠a), decidimos usar el TWI est√°ndar (I2C). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero con BLE, la elecci√≥n no fue muy buena entonces:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI CC2541</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : de alguna manera no me gust√≥ de inmediato debido a la arquitectura de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y 8 Kb de RAM parec√≠a una vida f√°cil poco prometedora, teniendo en cuenta la cantidad de servicios BLE y las caracter√≠sticas que necesit√°bamos en el juguete.</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BCM20732</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : parec√≠a muy prometedor, pero de hecho el SDK result√≥ ser muy tosco, y el "llavero" WICED Smart BLE de Broadcom es tan defectuoso que no escribir√© nada aqu√≠ para no jurar. </font><font style="vertical-align: inherit;">Av√≠seme si la situaci√≥n ha mejorado ahora.</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nRF52832</a> ‚Äî  ,   .      BLE  ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">rekod</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>, SDK  ,    <i></i> .  BLE ANCS          iPhone    UART.           SEGGER J-Link,       .<br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nRF51822</a> ‚Äî      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>,     SEGGER  nRF52832.      ‚Äî     nRF52832     nRF51822  !</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, el primer hierro se parec√≠a </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a una ara√±a tar√°ntula</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> algo as√≠: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic1.jpg" alt="ara√±a de hierro"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fue muy triste detectar fallas debido a la ca√≠da de cables Dupont, especialmente en el m√≥dulo nRF51822, donde los pines eran un poco m√°s peque√±os.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servicios BLE en nRF51822 y aplicaci√≥n iOS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asunto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y yo </font><font style="vertical-align: inherit;">en este spider iron comenzamos a implementar servicios y caracter√≠sticas BLE en nRF51822, dividiendo todo en aproximadamente la mitad:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servicio de centro de notificaciones de Apple ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANCS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): para recibir notificaciones de eventos desde un tel√©fono inteligente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servicio de hora actual de Apple (CTS): cuando est√° conectado, el juguete toma tiempo desde el tel√©fono.</font></font></li>
<li>HandShake Service (HSS) ‚Äî  , ,   ¬´¬ª        .   ,     lientID      pair     Bluetooth,    ,      .      ,    .</li>
<li>Battery As Service (BAS) ‚Äî       .</li>
<li>Content Service (CONTS) ‚Äî       ,   (     ).</li>
<li>Settings Service (SETTS) ‚Äî       ,      (, )  ..</li>
</ul><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MaximKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al mismo tiempo estaba haciendo una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaci√≥n para iOS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://ksr-ugc.imgix.net/assets/013/983/125/8dfbfd651b320b4818fa9ed65ebf67fc_original.jpg?w=680&amp;fit=max&amp;v=1475618060&amp;auto=format&amp;q=92&amp;s=952c7ac032d25e8b72ec4425cad5891d" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La imagen de la derecha muestra la pantalla principal de la aplicaci√≥n. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no pudo soportar nuestro sufrimiento debido a la ca√≠da de cables e hizo el </font><font style="vertical-align: inherit;">primer prototipo normal </font><font style="vertical-align: inherit;">en casa con una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plancha l√°ser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic2.jpg" alt="primer prototipo m√°s o menos"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no es visible en la foto, pero ya hay una ranura para tarjeta microSD all√≠. </font><font style="vertical-align: inherit;">En el peque√±o chal cuadrado a continuaci√≥n: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALC5627</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , el sonido ya era mucho mejor que el PWM de 5 bits a trav√©s de I2S. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">AXP209 fue</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
elegido para la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">administraci√≥n de</font></a><font style="vertical-align: inherit;"> energ√≠a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le permite cargar y usar la bater√≠a al mismo tiempo, as√≠ como controlar su estado. </font><font style="vertical-align: inherit;">El chip es muy com√∫n, pero tiene muchos detalles tanto en programaci√≥n como en los componentes externos requeridos, los llamados </font><font style="vertical-align: inherit;">"Arn√©s".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Magia en el ESP8266</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paralelamente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> port√≥ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FatFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al ESP8266, cre√≥ un gestor de arranque para el ESP8266 y el nRF51822 para que fuera posible no actualizar el firmware por cable, sino hacerlo colocando los archivos de firmware en una tarjeta microSD. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Personalmente, me parece que los extraterrestres lo ayudaron, ya que hizo todo esto en aproximadamente un mes. Pero √©l no admite estar en contacto con una mente extra√±a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego el segundo prototipo m√°s normal: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic3.jpg" alt="primer prototipo m√°s o menos"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el prototipo m√°s normal ya no se subi√≥ a un juguete blando. E incluso si √©l entraba, entonces, con un movimiento brusco en un usuario potencial de un juguete, un "extra√±o" subir√≠a, lo que por supuesto era inaceptable para MVP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, se decidi√≥ ordenar una tarifa a los profesionales y esto es lo que sucedi√≥ como resultado:</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic4.jpg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tal dise√±o ya encaja perfectamente en el gato, aunque parece de alguna manera inhumano: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic5.jpg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
al mismo tiempo, se confirmaron los temores de que los eventos desde el tel√©fono pudieran llegar con bastante frecuencia y, como resultado, el usuario se molestar√≠a en lugar de divertirse. Se requer√≠a una l√≥gica de filtrado flexible, que se puede cambiar f√°cilmente en cualquier momento sin parpadear. En este sentido, despu√©s de estudiar el material y darme cuenta de que no hay scripts r√°pidos y compactos para ESP8266 (Lua y microPython son int√©rpretes), decid√≠ portar el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lenguaje Pawn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que r√°pidamente (solo 18 veces m√°s lento que el nativo) ejecuta un bytecode compacto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, las fuentes de peones son muy similares a C, por lo que es un placer modificar los scripts, simplemente comp√≠lelos en el c√≥digo de bytes AMX y c√≥pielos en una tarjeta SD.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aparatos de enga√±o. </font><font style="vertical-align: inherit;">Pretende ser iOS en Android</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego "de repente" todos recordamos que los tel√©fonos Android en el mundo no son tan peque√±os, sino incluso m√°s que los tel√©fonos con iOS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, tuve que acelerar para verificar si podemos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enga√±ar a los dispositivos y pretender ser iOS en Android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que vean el servicio ANCS indistinguible de Apple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, todo funcion√≥ y despu√©s de una semana, los dispositivos (y nuestro gato no es una excepci√≥n) sinceramente cre√≠an que ten√≠a un iPhone con servicio ANCS, que se conectaba a mi Nexus 5 e incluso al viejo Samsung Galaxy con Android 4.4.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ir a la nube</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como a nadie le gusta escuchar un chiste varias veces (hecho), y tambi√©n hay preferencias y restricciones culturales, se decidi√≥ que cada usuario creara una lista de reproducci√≥n √∫nica. Para hacer esto, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asunto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se enfrent√≥ con el servidor en la nube. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, ¬øc√≥mo decidir a qui√©n le va a gustar? As√≠ es, ¬°deja que el usuario decida! Para hacer esto, realic√© una detecci√≥n b√°sica de gestos en el aceler√≥metro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIS3DH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de STMicroelectronics. Me gust√≥ la broma: inclin√© al gato, como si "s√≠", no me gust√≥ la broma, me inclin√© hacia un lado, como si "no". </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y agreg√≥ un "no me olvides" para el tel√©fono: si la conexi√≥n BLE desaparece y el aceler√≥metro detecta movimiento, entonces el gato est√° siendo llevado a alg√∫n lado y el tel√©fono ha sido olvidado.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de que el usuario "polikal" y, por lo tanto, design√≥ sus preferencias, la informaci√≥n va a un servidor donde se comparan los "genomas" de las listas de reproducci√≥n y se generan nuevos juegos de bromas para el usuario. </font><font style="vertical-align: inherit;">Pero este es un tema para un art√≠culo separado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, el entretenimiento result√≥ ser una excelente plataforma que puede:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunicarse con el tel√©fono a trav√©s de BLE y recibir notificaciones de eventos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunicarse a trav√©s de WiFi y descargar contenido y actualizaciones de firmware;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guardar y leer archivos en FAT32 en microSD;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jugar bromas llenas de c√≥dec speex;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Determine las preferencias del usuario utilizando un aceler√≥metro (detecci√≥n de gestos)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formar listas de reproducci√≥n para cada usuario en funci√≥n de sus preferencias de humor;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que es digno de menci√≥n, "manijas muy inteligentes" bien pueden estar conectadas a los pines correspondientes (se dejan incluso los agujeros para los conectores en el tablero) y "sabio hasta el gato" como lo deseen. </font><font style="vertical-align: inherit;">Esto hace que la plataforma todo en uno sea atractiva para los geeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esta plataforma, comenzamos el kickstarter, llamando al juguete terminado KiQ. </font><font style="vertical-align: inherit;">El primer d√≠a, se recolect√≥ el 40%, y ahora el 57%. </font><font style="vertical-align: inherit;">Pero esta es una historia completamente diferente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a todos los que leyeron esta l√≠nea. </font><font style="vertical-align: inherit;">Esperando preguntas interesantes de usted.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es398389/">https://habr.com/ru/post/es398389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es398377/index.html">¬øQu√© es la informaci√≥n en t√©rminos de f√≠sica?</a></li>
<li><a href="../es398379/index.html">Llega tu taxi no tripulado</a></li>
<li><a href="../es398381/index.html">Prototipo de robot de lapso de tiempo Arduino</a></li>
<li><a href="../es398385/index.html">Ilusiones del cerebro. La primera alucinaci√≥n universal del mundo.</a></li>
<li><a href="../es398387/index.html">Ataque automovil√≠stico: batalla feroz</a></li>
<li><a href="../es398391/index.html">"Gris, golpe, genial ...", o la l√≥gica del control clim√°tico en una casa inteligente</a></li>
<li><a href="../es398393/index.html">La fr√≠a Nikon D5500a toma impresionantes fotos espaciales</a></li>
<li><a href="../es398395/index.html">–í–æ—Ç —ç—Ç–æ –¥–∞: –Ω–æ–±–µ–ª–µ–≤–∫—É –≤–º–µ—Å—Ç–æ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤–æ–ª–Ω –¥–∞–ª–∏ –∑–∞ —Ç–æ–ø–æ–ª–æ–≥–∏—é</a></li>
<li><a href="../es398397/index.html">Se encontraron fuentes de rayos X ultrabrillantes en dos galaxias antiguas. ¬øUn nuevo fen√≥meno natural?</a></li>
<li><a href="../es398399/index.html">Auto digest: tecnolog√≠as del presente y del futuro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>