<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¥üèº üëê üôÇ Teste de Python com pytest. Simples, r√°pido, eficiente e escal√°vel. Pref√°cio e Introdu√ß√£o üèµÔ∏è üö¢ üññüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mais longe 


 O teste sistem√°tico de software, especialmente na comunidade Python, geralmente √© completamente ignorado ou executado de uma maneira es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Teste de Python com pytest. Simples, r√°pido, eficiente e escal√°vel. Pref√°cio e Introdu√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426699/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mais longe</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p><br><p>  <em>O teste sistem√°tico de software, especialmente na comunidade Python, geralmente √© completamente ignorado ou executado de uma maneira especial.</em>  <em>Muitos programadores de Python desconhecem completamente a exist√™ncia de pytest.</em>  <em>Brian Ocken se esfor√ßa para provar que o teste de software com pytest √© f√°cil, natural e at√© interessante.</em> <em><br></em> <br>  Dmitry Zinoviev <br>  Autor do Data Science Essentials em Python </p><br><p><img src="https://habrastorage.org/webt/hd/--/9w/hd--9w134j0rxhmxftrflbbdopy.png"></p><a name="habracut"></a><br><p>  Os exemplos deste livro foram escritos usando Python 3.6 e pytest 3.2.  O pytest 3.2 suporta Python 2.6, 2.7 e Python 3.3+. </p><br><blockquote>  O c√≥digo-fonte do projeto Tarefas, bem como todos os testes mostrados neste livro, est√£o dispon√≠veis no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest/source_code">link</a> na p√°gina da Web do livro em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest">pragprog.com</a> .  Voc√™ n√£o precisa fazer o download do c√≥digo-fonte para entender o c√≥digo de teste;  o c√≥digo de teste √© apresentado de forma conveniente nos exemplos.  Mas, para acompanhar as tarefas do projeto ou adaptar exemplos de teste para testar seu pr√≥prio projeto (suas m√£os est√£o desamarradas!), Voc√™ deve acessar a p√°gina da Web do livro e fazer o download do trabalho.  L√°, na p√°gina da web do livro, h√° um link para mensagens de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest/errata">errata</a> e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://forums.pragprog.com/forums/438">f√≥rum de discuss√£o</a> . </blockquote><p>  Sob o spoiler, h√° uma lista de artigos desta s√©rie. </p><br><div class="spoiler">  <b class="spoiler_title">Sum√°rio</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Introdu√ß√£o</strong></a> (Este artigo) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 1: Introdu√ß√£o ao pytest</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 2: Escrevendo fun√ß√µes de teste</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 3: Acess√≥rios Pytest</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 4: Acess√≥rios embutidos</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 5: Plugins</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 6: Configura√ß√£o</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>Cap√≠tulo 7: Usando pytest com outras ferramentas</strong></a> </li></ul></div></div><br><h1 id="blagodarnosti">  Agradecimentos </h1><br><p>  Primeiro tenho que agradecer a Michelle - minha esposa e melhor amiga.  √â uma pena que voc√™ n√£o veja a sala em que estou escrevendo.  Em vez de uma mesa, tenho uma mesa de jantar quadrada de carvalho antiga, na qual h√° espa√ßo suficiente para que o papel seja colocado.  Uma linda estante de vidro com meus brinquedos retroespaciais que coletamos ao longo dos anos, al√©m de livros t√©cnicos, placas de circuito e bolas de malabarismo.  Caixas de alum√≠nio antigas para guardar papel at√© o topo preenchidas com notas, cabos e at√© os adesivos restantes para foguetes.  Uma parede est√° coberta de veludo, que compramos h√° muitos anos, quando a loja de tecidos decidiu fechar definitivamente.  O tecido deve acalmar o eco quando eu gravar podcasts. </p><br><p>  Eu gosto de escrever aqui n√£o apenas porque √© conveniente e consistente com o meu mundo interior, mas tamb√©m porque √© o espa√ßo que Michel criou comigo e para mim.  Ela e eu sempre fomos uma equipe, e ela incrivelmente apoiou minhas id√©ias malucas de escrever um blog, iniciar um ou dois podcasts e agora, ao longo do √∫ltimo ano, escrever este livro.  Ela garantiu que eu tivesse tempo e espa√ßo para escrever.  Quando me canso e penso se ainda tenho for√ßas para escrever, ela me oferece apenas para continuar por vinte minutos e ver como me sentirei ent√£o, ela fez o mesmo quando me ajudou a noites de faculdade.  Eu realmente, realmente n√£o poderia ter feito isso sem ela. </p><br><p>  Eu tamb√©m tenho duas filhas surpreendentemente incr√≠veis, curiosas e brilhantes, Gabriella e Sofia, que s√£o duas das minhas maiores f√£s.  Ella oferece a todos que falam sobre programa√ß√£o para ouvir meus podcasts, e Phia ostentou um adesivo para o c√≥digo de teste em sua mochila, que ela tirou na segunda s√©rie. </p><br><p>  H√° muito mais pessoas para agradecer. </p><br><p>  Minha editora, Katherine Dvorak, me ajudou a reunir um monte de id√©ias e t√≥picos aleat√≥rios em uma progress√£o coesa, e √© por isso que este √© um livro, n√£o uma s√©rie de posts mantidos juntos.  Entrei nesse projeto como blogueiro e me apeguei demais √†s muitas manchetes, subt√≠tulos e itens da lista, e Katie pacientemente me guiou para que eu pudesse me tornar uma escritora melhor. </p><br><p>  Agrade√ßo a Suzanne Davidson Palatinate, Andy Hunt e o resto da Pragmatic Bookshelf por me darem a chance. </p><br><p>  Os revisores t√©cnicos me mantiveram honesto no pytest, mas tamb√©m no estilo Python, e s√£o a raz√£o pela qual os exemplos de c√≥digo seguem o PEP 8. Agradecimentos a Oliver Bestwalter, Florian Bruhin, Floris Bruinog, Mark Goody, Peter Hampton, Peter Hampton, Dave Hunt, Al Crinker e Lokesh. Kumaru Makani, Bruno Oliveira, Ronnie Pfannschmidt, Rafael Pierzine, Luciano Ramallo, Frank Ruiz e Dmitry Zinoviev.  Muitos desta lista tamb√©m s√£o desenvolvedores de kernel pytest e / ou suportam plugins pytest incr√≠veis. </p><br><p>  Agradecimentos especiais a Luciano.  Depois de escrever este livro, enviei os quatro primeiros cap√≠tulos para v√°rios revisores.  Luciano era um deles, e sua cr√≠tica foi a mais dif√≠cil de ler.  Eu n√£o acho que segui todos os seus conselhos, mas por causa de suas observa√ß√µes, revisei e reescrevi a maioria dos tr√™s primeiros cap√≠tulos e mudei algo no restante do livro. </p><br><p>  Obrigado a toda a equipe pytest-dev por criar uma ferramenta de teste t√£o legal.  Agrade√ßo a Oliver Bestwalter, Florian Bruhin, Floris Bruinoh, Dave Hunt, Holger Krekel, Bruno Oliveira, Ronnie Pfannschmidt, Rafael Pierzine e muitos outros por responderem minhas perguntas sobre a vida ao longo dos anos. </p><br><p>  E por √∫ltimo, mas n√£o menos importante, preciso agradecer √†s pessoas que me agradeceram.  Eles aproveitaram a oportunidade para me informar por e-mail que meu trabalho economizava tempo e tornava o trabalho mais f√°cil.  Isso √© legal e me faz feliz!  Obrigada </p><br><p>  <strong>Brian okken</strong> </p><br><p>  <em>setembro 2017</em> </p><br><h1 id="predislovie">  Pref√°cio </h1><br><p>  O uso do Python est√° aumentando n√£o apenas no desenvolvimento de software, mas tamb√©m em √°reas como an√°lise de dados, pesquisa, teste e medi√ß√£o, bem como em outros setores.  O desenvolvimento do Python em muitas √°reas cr√≠ticas tamb√©m √© acompanhado pelo desejo de realizar testes de software corretamente, de forma eficiente e eficaz, para garantir que os programas funcionem corretamente e d√™ os resultados corretos.  Al√©m disso, mais e mais projetos de software abrangem a integra√ß√£o cont√≠nua e incluem uma fase de teste automatizada, √† medida que os ciclos de libera√ß√£o s√£o encurtados e o teste manual cuidadoso de projetos cada vez mais complexos simplesmente n√£o √© vi√°vel.  As equipes devem poder confiar nos testes realizados pelos servidores de integra√ß√£o cont√≠nua que informam se podem confiar no software o suficiente para liber√°-lo. </p><br><p>  Digite pytest. </p><br><h2 id="chto-takoe-pytest">  O que √© pytest? </h2><br><p>  Uma ferramenta de teste confi√°vel do Python, o pytest pode ser usado para todos os tipos e n√≠veis de teste de software.  O pytest pode ser usado por equipes de desenvolvimento, equipes de controle de qualidade, grupos de teste independentes, indiv√≠duos praticando TDD e projetos de c√≥digo aberto.  De fato, projetos na Internet mudaram de <em>unittest</em> ou <em>nose</em> para <em>pytest</em> , incluindo Mozilla e Dropbox.  Porque  Porque o pytest oferece recursos avan√ßados, como reescrever "afirmar", modelos de plug-in de terceiros e um modelo de acess√≥rio poderoso, por√©m simples, incompar√°vel em qualquer outra estrutura de teste. </p><br><p>  pytest √© uma plataforma de teste de software, o que significa que pytest √© um programa de linha de comando.  Uma ferramenta que encontra automaticamente testes escritos, executa testes e escreve relat√≥rios com o resultado.  Possui uma biblioteca de lo√ß√µes que voc√™ pode usar em testes para ajud√°-lo a testar com mais efici√™ncia.  Pode ser expandido escrevendo seus pr√≥prios plug-ins ou instalando plug-ins de terceiros.  Pode ser usado para testar distribui√ß√µes Python.  E integra-se perfeitamente a outras ferramentas, como integra√ß√£o cont√≠nua e automa√ß√£o da web. </p><br><p>  Aqui est√£o algumas raz√µes pelas quais o pytest se destaca entre muitos outros testes de sistema integrado: </p><br><ul><li>  Testes simples s√£o f√°ceis de escrever em pytest. </li><li>  Testes complexos s√£o ainda mais f√°ceis de escrever. </li><li>  Os testes s√£o f√°ceis de ler. </li><li>  Os testes s√£o f√°ceis de ler.  (√â t√£o importante que isso seja indicado duas vezes.) </li><li>  Voc√™ pode come√ßar em segundos. </li><li> <code>assert</code> usado para falhar no teste, n√£o <code>self.assertEqual()</code> ou <code>self.assertLessThan()</code> .  Apenas <strong>afirme</strong> ! </li><li>  Voc√™ pode usar o pytest para executar testes escritos para unittest ou nose. </li></ul><br><p>  <strong>O pytest √©</strong> desenvolvido e apoiado ativamente por uma comunidade apaixonada e crescente.  √â t√£o expans√≠vel e flex√≠vel que cabe facilmente no seu fluxo de trabalho.  E como ele √© instalado separadamente da sua vers√£o do Python, voc√™ pode usar a mesma vers√£o mais recente do pytest no Python 2 herdado (2.6 e superior) e Python 3 (3.3 e superior). </p><br><h1 id="izuchenie-pytest-pri-testirovanii-primera-prilozheniya">  Aprendendo pytest ao testar um aplicativo de exemplo </h1><br><p>  Voc√™ gostaria de aprender pytest testando exemplos tolos que voc√™ nunca ver√° na vida real?  Eu tamb√©m  N√£o vamos fazer isso neste livro.  Em vez disso, vamos escrever testes para um projeto que, espero, tenha muito em comum com os aplicativos que voc√™ testar√° depois de ler este livro. </p><br><h2 id="proekt-tasks">  Projeto Tarefas </h2><br><p>  O aplicativo que examinaremos se chama Tarefas.  Tarefas √© um aplicativo m√≠nimo de rastreamento de tarefas com uma interface de linha de comando.  Ele tem bastante em comum com muitos outros tipos de aplicativos, os quais, espero, voc√™ pode ver facilmente como os conceitos de teste aprendidos ao desenvolver testes contra problemas s√£o aplic√°veis ‚Äã‚Äãaos seus projetos agora e no futuro. </p><br><p>  Embora o Tasks tenha uma interface de linha de comando (CLI), a CLI interage com o restante do c√≥digo por meio de uma interface de programa√ß√£o de aplicativos (API).  Uma API √© a interface para a qual direcionaremos a maioria dos nossos testes.  A API interage com a camada de gerenciamento de banco de dados, que interage com o banco de dados de documentos - <em>MongoDB</em> ou <em>TinyDB</em> .  O tipo de banco de dados √© configurado quando o banco de dados √© inicializado.  Antes de focar na API, vejamos as pr√≥prias tarefas, uma ferramenta de linha de comando que fornece uma interface de usu√°rio para tarefas. </p><br><p>  Aqui est√° uma sess√£o de exemplo: </p><br><pre> <code class="plaintext hljs">$ tasks add 'do something' --owner Brian $ tasks add 'do something else' $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian False do something 2 False do something else $ tasks update 2 --owner Brian $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian False do something 2 Brian False do something else $ tasks update 1 --done True $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian True do something 2 Brian False do something else $ tasks delete 1 $ tasks list ID owner done summary -- ----- ---- ------- 2 Brian False do something else $</code> </pre> <br><blockquote>  <strong><em>Nota do tradutor:</em></strong> No caso de usar a plataforma Windows, tive v√°rios problemas ao testar esta sess√£o. <br><ol><li>  Uma pasta deve ser criada para o banco de dados do TinyDB denominado <strong><code>tasks_db</code></strong> na pasta do usu√°rio.  Por exemplo <code>c:\Users\User_1\tasks_db\</code> </li><li>  Use aspas em vez de ap√≥strofos.  Caso contr√°rio, obteremos esse erro. <br><br>  $ tasks adiciona 'fa√ßa outra coisa' <br>  Uso: tarefas adicionam [OPTIONS] RESUMO <br><br>  Erro: obtive argumentos extras inesperados (outra coisa ') <br></li></ol><br></blockquote><p>  Esse n√£o √© o aplicativo de gerenciamento de tarefas mais dif√≠cil, mas complexo o suficiente para ser usado no estudo de testes. </p><br><h2 id="strategiya-testirovaniya">  Estrat√©gia de teste </h2><br><p>  Embora o pytest seja adequado para teste de unidade, teste de integra√ß√£o, teste de sistema ou teste de ponta a ponta e teste funcional, a estrat√©gia de teste do projeto Tarefas se concentra principalmente em testes funcionais subcut√¢neos.  A seguir est√£o algumas defini√ß√µes √∫teis: </p><br><ul><li>  <em>Teste de unidade</em> : teste que testa um pequeno peda√ßo de c√≥digo, como uma fun√ß√£o ou classe, isoladamente do resto do sistema.  Reviso os testes no Cap√≠tulo 1, Introdu√ß√£o ao pytest, na p√°gina 1, para realizar testes de unidade.A estrutura de dados das tarefas. </li><li>  <em>Teste de integra√ß√£o</em> : um teste que testa um peda√ßo maior de c√≥digo pode incluir v√°rias classes ou subsistemas.  Principalmente o r√≥tulo usado para alguns testes √© maior que um teste de unidade, mas menor que um teste de sistema. </li><li>  <strong>Teste do sistema</strong> <em>(ponta a ponta)</em> : um teste que testa todo o sistema em teste em um ambiente o mais pr√≥ximo poss√≠vel do ambiente do usu√°rio final. </li><li>  <em>Teste funcional</em> : um teste que testa uma parte da funcionalidade do sistema.  Um teste que testa qu√£o bem adicionamos, removemos ou atualizamos um item de tarefa no Tasks √© um teste funcional. </li><li>  <strong>Teste subcut√¢neo</strong> : um teste executado n√£o para a interface do usu√°rio final, mas para uma interface localizada logo abaixo da superf√≠cie.  Como a maioria dos testes deste livro √© testada no n√≠vel da API, n√£o na CLI, eles se qualificam como testes subcut√¢neos. </li></ul><br><h2 id="kak-organizovana-eta-kniga">  Como √© organizado este livro? </h2><br><p>  No Cap√≠tulo 1, ‚ÄúIntrodu√ß√£o ao pytest‚Äù na p√°gina 1, voc√™ instala o pytest e se prepara para us√°-lo.  Em seguida, voc√™ participa de uma parte do projeto Tarefas - uma estrutura de dados que representa uma √∫nica tarefa (denominada dupla chamada Tarefa) e a utiliza para testar exemplos.  Voc√™ aprender√° como executar o pytest com v√°rios arquivos de teste.  Voc√™ ver√° muitas op√ß√µes de linha de comando populares e extremamente √∫teis para o pytest, como a capacidade de reiniciar falhas de teste, interromper a execu√ß√£o ap√≥s a primeira falha, controlar o rastreamento de pilha e a vers√£o de v√°rias p√°ginas da execu√ß√£o de teste e muito mais. </p><br><p>  No cap√≠tulo 2, ‚ÄúCriando fun√ß√µes de teste‚Äù, na p√°gina 23, voc√™ instala tarefas localmente com o pip e v√™ como estruturar testes em um projeto Python.  Voc√™ deve fazer isso para come√ßar a escrever testes para um aplicativo real.  Todos os exemplos neste cap√≠tulo executam testes para o aplicativo instalado, incluindo a grava√ß√£o no banco de dados.  As fun√ß√µes reais de teste s√£o o foco deste cap√≠tulo e voc√™ aprender√° como usar a <code>assert</code> efetivamente nos testes.  Voc√™ tamb√©m aprender√° sobre marcadores.  Uma fun√ß√£o que permite marcar muitos testes que ser√£o executados simultaneamente, marcar testes que ser√£o ignorados ou informar ao pytest que j√° sabemos que alguns testes falhar√£o.  Vou falar sobre como executar apenas alguns testes, n√£o apenas com marcadores, mas tamb√©m estruturando nosso c√≥digo de teste em diret√≥rios, m√≥dulos e classes, e como executar esses subconjuntos de testes. </p><br><p>  Nem todos os c√≥digos de teste est√£o inclu√≠dos nas fun√ß√µes de teste.  No cap√≠tulo 3, ‚Äúpytest Fixtures‚Äù, na p√°gina 49, voc√™ aprender√° a inserir dados de teste em fixtures de teste, al√©m de configurar e quebrar o c√≥digo.  Definir o estado de um sistema (ou subsistema ou unidade individual) √© uma parte importante dos testes de software.  Voc√™ aprender√° esse aspecto dos equipamentos pytest para ajudar a inicializar o banco de dados do projeto Tarefas e preencher previamente os dados de teste para alguns testes.  As lumin√°rias s√£o uma parte incrivelmente poderosa do pytest, e voc√™ aprender√° como us√°-las efetivamente para reduzir ainda mais a duplica√ß√£o do c√≥digo de teste e ajudar a tornar seu c√≥digo de teste incrivelmente leg√≠vel e sustent√°vel.  Os equipamentos Pytest tamb√©m s√£o parametriz√°veis, semelhantes √†s fun√ß√µes de teste, e voc√™ usar√° essa fun√ß√£o para poder executar todos os seus testes com o TinyDB e o MongoDB, as partes do servidor de banco de dados suportadas pelo Tasks. </p><br><p>  No cap√≠tulo 4, ‚ÄúAcess√≥rios embutidos‚Äù, na p√°gina 71, voc√™ ver√° alguns dos acess√≥rios internos fornecidos pelo pytest.  Voc√™ aprender√° como os acess√≥rios internos do pytest podem rastrear diret√≥rios e arquivos tempor√°rios para voc√™, ajud√°-lo a verificar a sa√≠da do c√≥digo de teste, usar patches de macacos, verificar avisos e muito mais. </p><br><p>  No cap√≠tulo 5, ‚ÄúPlugins‚Äù, na p√°gina 95, voc√™ aprender√° como adicionar op√ß√µes de linha de comando ao pytest, alterar a sa√≠da do pytest e compartilhar configura√ß√µes do pytest, incluindo acess√≥rios, com outros usu√°rios por meio da escrita, empacotamento e distribui√ß√£o ( distribui√ß√£o) pr√≥prios plugins.  O plug-in que desenvolvemos neste cap√≠tulo √© usado para criar os erros de teste que vemos ao testar tarefas, um pouco melhor.  Voc√™ tamb√©m aprender√° como testar os Plugins corretamente.  Que tipo de meta?  E, caso voc√™ n√£o tenha se inspirado o suficiente neste cap√≠tulo para escrever seus pr√≥prios plug-ins, peguei v√°rios √≥timos plug-ins para mostrar o que √© poss√≠vel no Ap√™ndice 3, ‚ÄúPacote de Sampler de Plug-in‚Äù, na p√°gina 163. </p><br><p>  Falando em customiza√ß√£o, no cap√≠tulo 6, ‚ÄúConfigura√ß√£o‚Äù, na p√°gina 113, voc√™ aprender√° como configurar o lan√ßamento do pytest padr√£o para o seu projeto usando arquivos de configura√ß√£o.  Com o arquivo <em>pytest.ini</em> , voc√™ pode fazer coisas como armazenar par√¢metros da linha de comando para n√£o precisar digit√°-los o tempo todo, dizer ao pytest para n√£o procurar em diret√≥rios espec√≠ficos arquivos de teste, especificar a vers√£o m√≠nima do pytest que seu testes e muito mais.  Esses itens de configura√ß√£o podem ser colocados em <em>tox.ini</em> ou <em>setup.cfg</em> . </p><br><p>  No cap√≠tulo final, Cap√≠tulo 7, usando o pytest com outras ferramentas, na p√°gina 125, voc√™ ver√° como pode fazer o pytest j√° poderoso e sobrecarregar seu teste com ferramentas adicionais.  Voc√™ executar√° o projeto Tarefas em v√°rias vers√µes do Python com tox.  Voc√™ testar√° as tarefas da CLI sem executar o resto do sistema com simula√ß√£o.  Voc√™ usar√° o license.py para verificar se o c√≥digo-fonte do projeto da tarefa est√° sendo testado.  Voc√™ usar√° o Jenkins para executar su√≠tes de teste e exibir resultados ao longo do tempo.  E, finalmente, voc√™ ver√° como o pytest pode ser usado para executar testes unittest, bem como para trocar acess√≥rios do estilo pytest por testes unittest. </p><br><h2 id="chto-vam-nuzhno-znat">  O que voc√™ precisa saber </h2><br><p>  <strong>Python</strong> </p><br><p>  Voc√™ n√£o precisa ser um guru do Python.  Exemplos n√£o fazem nada sobrenatural ou bizarro. </p><br><p>  <strong>pip</strong> </p><br><p>  Voc√™ deve usar o pip para instalar os plugins pytest e o pr√≥prio pytest.  Se voc√™ deseja atualizar o pip, consulte o Ap√™ndice 2, pip, na p√°gina 159. </p><br><h2 id="komandnaya-stroka">  Linha de comando </h2><br><p>  Escrevi este livro e capturei exemplos de resultados usando o bash em um laptop Mac.  No entanto, os √∫nicos comandos que uso no bash s√£o o cd para ir para um diret√≥rio espec√≠fico e, claro, o pytest.  Como o cd existe no Windows cmd.exe e em todos os shells unix que eu conhe√ßo, todos os exemplos devem estar dispon√≠veis para execu√ß√£o em qualquer aplicativo de terminal que voc√™ decidir usar. </p><br><p>  Isso √© tudo.  Voc√™ n√£o precisa ser um especialista em programa√ß√£o para come√ßar a escrever testes automatizados com o pytest. </p><br><h2 id="primery-koda-i-internet-resursy">  Exemplos de c√≥digo e recursos da Internet </h2><br><p>  Os exemplos deste livro foram escritos usando Python 3.6 e pytest 3.2.  O pytest 3.2 suporta Python 2.6, 2.7 e Python 3.3+. </p><br><p>  O c√≥digo-fonte do projeto Tarefas, bem como todos os testes mostrados neste livro, est√£o dispon√≠veis no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest/source_code">link</a> na p√°gina da Web do livro em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest">pragprog.com</a> .  Voc√™ n√£o precisa fazer o download do c√≥digo-fonte para entender o c√≥digo de teste;  o c√≥digo de teste √© apresentado de forma conveniente nos exemplos.  Mas, para acompanhar as tarefas do projeto ou adaptar exemplos de teste para testar seu pr√≥prio projeto (suas m√£os est√£o desamarradas!), Voc√™ deve ir √† p√°gina do livro para baixar o trabalho.  L√°, na p√°gina do livro, h√° um link para o post da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://pragprog.com/titles/bopytest/errata">errata</a> e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="https://forums.pragprog.com/forums/438">f√≥rum de discuss√£o</a> . </p><br><p>  Fa√ßo programa√ß√£o h√° mais de vinte e cinco anos e nada me fez gostar de escrever c√≥digo de teste tanto quanto o pytest.  Espero que voc√™ aprenda muito com este livro e espero que, no final, voc√™ ame o c√≥digo de teste como eu. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mais longe</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt426699/">https://habr.com/ru/post/pt426699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt426689/index.html">Somos respons√°veis ‚Äã‚Äãpelo mercado de outra pessoa: o que as redes sociais dizem sobre CRM</a></li>
<li><a href="../pt426691/index.html">Programador em licen√ßa m√©dica</a></li>
<li><a href="../pt426693/index.html">Preste servi√ßos de manuten√ß√£o √† navega√ß√£o do rob√¥ em um campo de golfe. Construindo um caminho e evitando obst√°culos</a></li>
<li><a href="../pt426695/index.html">C√¢meras de vis√£o de m√°quina para entusiastas. Como usar a c√¢mera para navega√ß√£o offline?</a></li>
<li><a href="../pt426697/index.html">Trabalhando com dispositivos LibUsb no Android</a></li>
<li><a href="../pt426701/index.html">Flutter - uma nova vis√£o do desenvolvimento de plataforma cruzada</a></li>
<li><a href="../pt426703/index.html">O que foi interessante no DataVizDay em Minsk</a></li>
<li><a href="../pt426705/index.html">Desenvolvimento e teste inteligentes de contratos do Hyperledger Fabric</a></li>
<li><a href="../pt426707/index.html">Sistema de aprova√ß√£o. Como inventamos a bicicleta</a></li>
<li><a href="../pt426709/index.html">Temporizadores JavaScript: tudo o que voc√™ precisa saber</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>