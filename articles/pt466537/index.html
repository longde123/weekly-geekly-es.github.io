<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöú üìç üëÜ Utilizando M√≥dulos JavaScript em Produ√ß√£o: Situa√ß√£o Atual. Parte 1 ‚öôÔ∏è üë©üèΩ‚Äç‚öñÔ∏è üìÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° dois anos, escrevi sobre uma t√©cnica que agora √© comumente chamada de padr√£o m√≥dulo / nom√≥dulo. Seu aplicativo permite escrever c√≥digo JavaScript u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilizando M√≥dulos JavaScript em Produ√ß√£o: Situa√ß√£o Atual. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/466537/"> H√° dois anos, escrevi sobre uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">t√©cnica</a> que agora √© comumente chamada de padr√£o m√≥dulo / nom√≥dulo.  Seu aplicativo permite escrever c√≥digo JavaScript usando os recursos do ES2015 + e, em seguida, usar bundlers e transpilers para criar duas vers√µes da base de c√≥digo.  Um deles cont√©m sintaxe moderna (√© carregado usando uma estrutura como <code>&lt;script type="module"&gt;</code> e o segundo √© a sintaxe ES5 (carregado com <code>&lt;script nomodule&gt;</code> ). O padr√£o module / nomodule permite enviar para navegadores que suportam m√≥dulos, muito menos c√≥digo do que os navegadores que n√£o suportam esse recurso, agora esse padr√£o √© suportado pela maioria das estruturas da Web e ferramentas de linha de comando. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/sd/_p/je/sd_pjea-digdrv7bbr_b3n4wdtq.jpeg"></a> <br><br>  Anteriormente, mesmo considerando a capacidade de enviar c√≥digo JavaScript moderno para produ√ß√£o, e mesmo que a maioria dos navegadores suportasse m√≥dulos, eu recomendei a coleta de c√≥digo em pacotes configur√°veis. <br><a name="habracut"></a><br>  Porque  Principalmente porque tive a sensa√ß√£o de que o carregamento dos m√≥dulos no navegador era lento.  Embora protocolos recentes, como o HTTP / 2, teoricamente suportassem o carregamento eficiente de v√°rios arquivos, todos os estudos de desempenho da √©poca conclu√≠ram que o uso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bundlers</a> ainda √© mais eficiente do que o uso de m√≥dulos. <br><br>  Mas deve-se admitir que esses estudos estavam incompletos.  Os casos de teste usando os m√≥dulos estudados consistiram em arquivos de c√≥digo-fonte n√£o otimizados e n√£o minimizados que foram implementados na produ√ß√£o.  N√£o houve compara√ß√µes do pacote otimizado com os m√≥dulos com o script cl√°ssico otimizado. <br><br>  No entanto, para ser sincero, n√£o havia uma maneira ideal de implantar os m√≥dulos naquele momento.  Mas agora, gra√ßas a algumas melhorias modernas nas tecnologias de empacotador, √© poss√≠vel implantar o c√≥digo de produ√ß√£o na forma de m√≥dulos ES2015 usando comandos de importa√ß√£o est√°ticos e din√¢micos e, ao mesmo tempo, obter um desempenho superior ao obtido com as op√ß√µes dispon√≠veis, nas quais m√≥dulos n√£o s√£o usados. <br><br>  Note-se que no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> em que o material original √© publicado, a primeira parte da tradu√ß√£o que publicamos hoje, os m√≥dulos s√£o utilizados na produ√ß√£o h√° v√°rios meses. <br><br><h2>  <font color="#3AC1EF">Equ√≠vocos sobre m√≥dulos</font> </h2><br>  Muitas pessoas com quem conversei rejeitam completamente os m√≥dulos, nem mesmo os consideram uma das op√ß√µes para aplicativos de produ√ß√£o em larga escala.  Muitos deles citam o pr√≥prio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudo</a> que eu j√° mencionei.  Nomeadamente, a parte dele, que afirma que os m√≥dulos n√£o devem ser usados ‚Äã‚Äãna produ√ß√£o, a menos que seja uma quest√£o de ‚Äúpequenas aplica√ß√µes web, que incluem menos de 100 m√≥dulos que diferem em uma √°rvore de depend√™ncia relativamente‚Äú pequena ‚Äù(ou seja, - aquele cuja profundidade n√£o exceda 5 n√≠veis). ‚Äù <br><br>  Se voc√™ j√° examinou o diret√≥rio <code>node_modules</code> de qualquer um de seus projetos, provavelmente sabe que mesmo um aplicativo pequeno pode facilmente ter mais de 100 m√≥dulos de depend√™ncia.  Quero oferecer uma olhada em quantos m√≥dulos est√£o dispon√≠veis em alguns dos pacotes npm mais populares. <br><div class="scrollable-table"><table><tbody><tr><td>  Pacote <br></td><td>  N√∫mero de m√≥dulos <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">date-fns</a> <br></td><td>  729 <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lodash-es</a> <br></td><td>  643 <br></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rxjs</a> <br></td><td>  226 <br></td></tr></tbody></table></div><br>  √â aqui que o principal equ√≠voco referente aos m√≥dulos est√° enraizado.  Os programadores acreditam que, quando se trata de usar m√≥dulos na produ√ß√£o, eles t√™m apenas duas op√ß√µes.  A primeira √© implantar todo o c√≥digo-fonte em seu formato existente (incluindo o diret√≥rio <code>node_modules</code> ).  O segundo √© n√£o usar m√≥dulos. <br><br>  No entanto, se voc√™ examinar atentamente as recomenda√ß√µes do estudo citado acima, descobrir√° que n√£o h√° nada a dizer que o carregamento de m√≥dulos √© mais lento do que o carregamento de scripts regulares.  N√£o diz que os m√≥dulos n√£o devem ser utilizados.  Ele apenas fala sobre o fato de que se algu√©m implantar centenas de arquivos de m√≥dulo n√£o infectados na produ√ß√£o, o Chrome n√£o poder√° carreg√°-los t√£o rapidamente quanto um √∫nico pacote compactado.  Como resultado, o estudo recomenda continuar usando bundlers, compiladores e minificadores. <br><br>  Mas voc√™ sabe o que?  O fato √© que voc√™ pode usar tudo isso e usar m√≥dulos na produ√ß√£o. <br><br>  De fato, os m√≥dulos s√£o um formato no qual devemos nos esfor√ßar para converter, j√° que os navegadores j√° sabem como carregar m√≥dulos (e os navegadores que n√£o podem fazer isso podem carregar uma vers√£o sobressalente do c√≥digo usando o mecanismo de nomodule).  Se voc√™ observar o c√≥digo que os empacotadores mais populares geram, encontrar√° muitos fragmentos de modelo cujo objetivo √© apenas carregar dinamicamente outro c√≥digo e gerenciar depend√™ncias.  Mas tudo isso n√£o ser√° necess√°rio se apenas usarmos os m√≥dulos e express√µes <code>import</code> e <code>export</code> . <br><br>  Felizmente, pelo menos um dos empacotadores modernos populares ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rollup</a> ) suporta m√≥dulos na forma de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dados</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sa√≠da</a> .  Isso significa que voc√™ pode processar o c√≥digo com um bundler e implantar m√≥dulos na produ√ß√£o (sem usar fragmentos de modelo para carregar o c√≥digo).  E, como o Rollup possui uma excelente implementa√ß√£o do algoritmo de agita√ß√£o de √°rvore (o melhor que j√° vi nos empacotadores), a cria√ß√£o de programas na forma de m√≥dulos usando o Rollup permite obter um c√≥digo menor que o tamanho do mesmo c√≥digo obtido ao aplicar outros mecanismos dispon√≠veis hoje. <br><br>  Note-se que eles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">planejam</a> adicionar suporte para m√≥dulos na pr√≥xima vers√£o do Parcel.  O Webpack ainda n√£o suporta m√≥dulos como um formato de sa√≠da, mas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">est√°</a> - discuss√µes que focam nessa quest√£o. <br><br>  Outro equ√≠voco em rela√ß√£o aos m√≥dulos √© que algumas pessoas acreditam que os m√≥dulos s√≥ podem ser usados ‚Äã‚Äãse 100% das depend√™ncias do projeto usarem m√≥dulos.  Infelizmente (acho que √© um grande arrependimento), a maioria dos pacotes npm ainda est√° sendo preparada para publica√ß√£o usando o formato CommonJS (alguns m√≥dulos, mesmo aqueles escritos usando os recursos do ES2015, s√£o traduzidos para o formato CommonJS antes de serem publicados no npm)! <br><br>  Aqui, novamente, quero observar que o Rollup possui um plug-in ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rollup-plugin-commonjs</a> ) que pega o c√≥digo-fonte de entrada gravado usando o CommonJS e o converte no c√≥digo ES2015.  Definitivamente, seria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">melhor</a> se o formato de depend√™ncia usado desde o in√≠cio usasse o formato de m√≥dulo ES2015.  Por√©m, se algumas depend√™ncias n√£o forem assim, isso n√£o impedir√° que voc√™ implante projetos usando m√≥dulos em produ√ß√£o. <br><br>  Nas partes seguintes deste artigo, mostrarei como coleciono projetos em pacotes configur√°veis ‚Äã‚Äãque usam m√≥dulos (incluindo o uso de importa√ß√µes din√¢micas e separa√ß√£o de c√≥digo), discutirei por que essas solu√ß√µes geralmente s√£o mais produtivas que os scripts cl√°ssicos e mostramos como elas funcionam. com navegadores que n√£o suportam m√≥dulos. <br><br><h2>  <font color="#3AC1EF">Estrat√©gia de cria√ß√£o de c√≥digo ideal</font> </h2><br>  O c√≥digo de constru√ß√£o da produ√ß√£o √© sempre uma tentativa de equilibrar os pr√≥s e os contras de v√°rias solu√ß√µes.  Por um lado, o desenvolvedor deseja que seu c√≥digo seja carregado e executado o mais r√°pido poss√≠vel.  Por outro lado, ele n√£o deseja baixar o c√≥digo que n√£o ser√° usado pelos usu√°rios do projeto. <br><br>  Al√©m disso, os desenvolvedores precisam ter certeza de que seu c√≥digo √© mais adequado para armazenamento em cache.  O grande problema do pacote de c√≥digos √© que qualquer altera√ß√£o no c√≥digo, mesmo uma linha alterada, leva √† invalida√ß√£o do cache de todo o pacote.  Se voc√™ implantar um aplicativo que consiste em milhares de pequenos m√≥dulos (apresentados exatamente na forma em que est√£o presentes no c√≥digo-fonte), poder√° fazer pequenas altera√ß√µes no c√≥digo com seguran√ßa e ao mesmo tempo saber que a maior parte do c√≥digo do aplicativo ser√° armazenada em cache .  Mas, como eu j√° disse, essa abordagem ao desenvolvimento provavelmente pode significar que o carregamento do c√≥digo na primeira visita ao recurso pode demorar mais do que quando se usa abordagens mais tradicionais. <br><br>  Como resultado, enfrentamos uma tarefa dif√≠cil, que √© encontrar a abordagem correta para dividir os pacotes em partes.  Precisamos encontrar o equil√≠brio certo entre a velocidade de carregamento dos materiais e o armazenamento em cache a longo prazo. <br><br>  A maioria dos empacotadores, por padr√£o, usa t√©cnicas de divis√£o de c√≥digo com base em comandos de importa√ß√£o din√¢mica.  Mas eu diria que dividir o c√≥digo apenas com foco na importa√ß√£o din√¢mica n√£o permite dividi-lo em fragmentos suficientemente pequenos.  Isso √© especialmente verdadeiro para sites com muitos usu√°rios recorrentes (ou seja, em situa√ß√µes em que o cache √© importante). <br><br>  Eu acredito que o c√≥digo deve ser dividido em fragmentos t√£o pequenos quanto poss√≠vel.  Vale a pena reduzir o tamanho dos fragmentos at√© o n√∫mero deles aumentar tanto que isso afetar√° a velocidade de download do projeto.  E embora eu recomendo definitivamente que todos realizem sua pr√≥pria an√°lise da situa√ß√£o, se voc√™ acredita nos c√°lculos aproximados feitos no estudo que mencionei, ao carregar menos de 100 m√≥dulos, n√£o h√° uma desacelera√ß√£o percept√≠vel no carregamento.  Um estudo separado sobre o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://medium.com/%40asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-">desempenho do HTTP / 2</a> n√£o revelou uma desacelera√ß√£o percept√≠vel no projeto ao baixar menos de 50 arquivos.  No entanto, testamos apenas as op√ß√µes em que o n√∫mero de arquivos era 1, 6, 50 e 1000. Como resultado, provavelmente 100 arquivos s√£o o valor que voc√™ pode navegar facilmente sem medo de perder a velocidade de download. <br><br>  Ent√£o, qual √© a melhor maneira de dividir agressivamente, mas n√£o muito agressivamente, o c√≥digo em partes?  Al√©m da separa√ß√£o de c√≥digo com base nos comandos de importa√ß√£o din√¢mica, aconselho que voc√™ d√™ uma olhada mais de perto na separa√ß√£o de c√≥digo pelos pacotes npm.  Com essa abordagem, o que √© importado para o projeto da pasta <code>node_modules</code> cai em um fragmento separado do c√≥digo finalizado com base no nome do pacote. <br><br><h2>  <font color="#3AC1EF">Separa√ß√£o de Pacotes</font> </h2><br>  Eu disse acima que alguns dos recursos modernos dos empacotadores tornam poss√≠vel organizar um esquema de alto desempenho para a implanta√ß√£o de projetos baseados em m√≥dulos.  O que eu estava falando √© representado por dois novos recursos de Rollup.  O primeiro √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a separa√ß√£o autom√°tica de c√≥digo</a> atrav√©s dos comandos <code>import()</code> din√¢micos (adicionados <a href="">na v1.0.0</a> ).  A segunda op√ß√£o √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a separa√ß√£o manual de c√≥digo</a> realizada pelo programa com base na op√ß√£o <code>manualChunks</code> (adicionada na <a href="">v1.11.0</a> ). <br><br>  Gra√ßas a esses dois recursos, agora √© muito f√°cil configurar o processo de compila√ß√£o, no qual o c√≥digo √© dividido no n√≠vel do pacote. <br><br>  Aqui est√° um exemplo de configura√ß√£o que usa a op√ß√£o <code>manualChunks</code> , gra√ßas √† qual cada m√≥dulo importado de <code>node_modules</code> cai em um fragmento de c√≥digo separado cujo nome corresponde ao nome do pacote (tecnicamente, o nome do diret√≥rio do pacote na pasta <code>node_modules</code> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {  <span class="hljs-attr"><span class="hljs-attr">input</span></span>: {    <span class="hljs-attr"><span class="hljs-attr">main</span></span>: <span class="hljs-string"><span class="hljs-string">'src/main.mjs'</span></span>,  },  <span class="hljs-attr"><span class="hljs-attr">output</span></span>: {    <span class="hljs-attr"><span class="hljs-attr">dir</span></span>: <span class="hljs-string"><span class="hljs-string">'build'</span></span>,    <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'esm'</span></span>,    <span class="hljs-attr"><span class="hljs-attr">entryFileNames</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].[hash].mjs'</span></span>,  },  manualChunks(id) {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (id.includes(<span class="hljs-string"><span class="hljs-string">'node_modules'</span></span>)) {      <span class="hljs-comment"><span class="hljs-comment">//   ,    `node_modules`.      //   - ,       .      const dirs = id.split(path.sep);      return dirs[dirs.lastIndexOf('node_modules') + 1];    }  }, }</span></span></code> </pre> <br>  A op√ß√£o <code>manualChunk</code> aceita uma fun√ß√£o que aceita, como argumento √∫nico, o caminho para o arquivo do m√≥dulo.  Esta fun√ß√£o pode retornar um nome de string.  O que ele retornar√° apontar√° para um fragmento da montagem ao qual o m√≥dulo atual deve ser adicionado.  Se a fun√ß√£o n√£o retornar nada, o m√≥dulo ser√° adicionado ao fragmento padr√£o. <br><br>  Considere um aplicativo que importe os <code>cloneDeep()</code> , <code>debounce()</code> e <code>find()</code> do pacote <code>lodash-es</code> .  Se voc√™ aplicar a configura√ß√£o acima ao criar este aplicativo, cada um desses m√≥dulos (assim como cada m√≥dulo <code>lodash</code> importado por esses m√≥dulos) ser√° colocado em um √∫nico arquivo de sa√≠da com um nome como <code>npm.lodash-es.XXXX.mjs</code> (aqui <code>XXXX</code> √© exclusivo hash do arquivo de m√≥dulo no fragmento <code>lodash-es</code> ). <br><br>  No final do arquivo, voc√™ ver√° uma express√£o de exporta√ß√£o como a seguinte.  Observe que esta express√£o cont√©m apenas comandos de exporta√ß√£o para os m√≥dulos adicionados ao fragmento, e nem todos os m√≥dulos <code>lodash</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> {cloneDeep, debounce, find};</code> </pre> <br>  Ent√£o, se o c√≥digo em qualquer um dos outros fragmentos usar esses m√≥dulos <code>lodash</code> (talvez apenas o m√©todo <code>debounce()</code> ), nesses fragmentos, em sua parte superior, haver√° uma express√£o de importa√ß√£o com a seguinte apar√™ncia: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {debounce} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./npm.lodash.XXXX.mjs'</span></span>;</code> </pre> <br>  Esperamos que este exemplo tenha esclarecido a quest√£o de como a separa√ß√£o manual de c√≥digos funciona no pacote cumulativo.  Al√©m disso, acho que os resultados da separa√ß√£o de c√≥digo usando as express√µes de <code>import</code> e <code>export</code> s√£o muito mais f√°ceis de ler e entender do que o c√≥digo de fragmentos, cuja forma√ß√£o utilizou mecanismos n√£o padr√£o que s√£o usados ‚Äã‚Äãapenas em um determinado empacotador. <br><br>  Por exemplo, √© muito dif√≠cil descobrir o que est√° acontecendo no pr√≥ximo arquivo.  Esta √© a sa√≠da de um dos meus projetos antigos que usavam o webpack para dividir o c√≥digo.  Quase tudo neste c√≥digo n√£o √© necess√°rio em navegadores que suportam m√≥dulos. <br><br><pre> <code class="javascript hljs">(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"webpackJsonp"</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"webpackJsonp"</span></span>] || []).push([[<span class="hljs-string"><span class="hljs-string">"import1"</span></span>],{ <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> <span class="hljs-string"><span class="hljs-string">"tLzr"</span></span>: <span class="hljs-comment"><span class="hljs-comment">/*!*********************************!*\  !*** ./app/scripts/import-1.js ***!  \*********************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*! exports provided: import1 */</span></span> <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module, __webpack_exports__, __webpack_require__</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">"use strict"</span></span>; __webpack_require__.r(__webpack_exports__); <span class="hljs-comment"><span class="hljs-comment">/* harmony export (binding) */</span></span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string"><span class="hljs-string">"import1"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> import1; }); <span class="hljs-comment"><span class="hljs-comment">/* harmony import */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _dep_1__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-comment"><span class="hljs-comment">/*! ./dep-1 */</span></span> <span class="hljs-string"><span class="hljs-string">"6xPP"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> import1 = <span class="hljs-string"><span class="hljs-string">"imported: "</span></span> + _dep_1__WEBPACK_IMPORTED_MODULE_0__[<span class="hljs-string"><span class="hljs-string">"dep1"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/***/</span></span> }) }]);</code> </pre> <br><h2>  <font color="#3AC1EF">E se houver centenas de depend√™ncias npm?</font> </h2><br>  Como eu j√° disse, acredito que a separa√ß√£o no n√≠vel do c√≥digo no n√≠vel do pacote geralmente permite ao desenvolvedor entrar em uma posi√ß√£o favor√°vel quando a separa√ß√£o do c√≥digo √© realizada de forma agressiva, mas n√£o muito agressiva. <br><br>  Obviamente, se o seu aplicativo importar m√≥dulos de centenas de pacotes npm diferentes, voc√™ ainda poder√° estar em uma situa√ß√£o em que o navegador n√£o poder√° carreg√°-los com efici√™ncia. <br><br>  No entanto, se voc√™ realmente possui muitas depend√™ncias npm, n√£o deve abandonar completamente essa estrat√©gia por enquanto.  Lembre-se de que voc√™ provavelmente n√£o baixar√° todas as depend√™ncias npm em todas as p√°ginas.  Portanto, √© importante descobrir quantas depend√™ncias realmente carregam. <br><br>  No entanto, estou certo de que existem alguns aplicativos reais que possuem tantas depend√™ncias npm que essas depend√™ncias simplesmente n√£o podem ser representadas como fragmentos separados.  Se o seu projeto √© exatamente isso - eu recomendaria que voc√™ procure uma maneira de agrupar pacotes onde o c√≥digo no qual com alta probabilidade possa mudar ao mesmo tempo (como <code>react</code> e <code>react-dom</code> ), pois a <code>react-dom</code> cache de fragmentos com esses pacotes tamb√©m ser√° executada ao mesmo tempo  Posteriormente, mostrarei um exemplo no qual todas as depend√™ncias do React est√£o agrupadas no mesmo <a href="">fragmento</a> . <br><br>  Para continuar ... <br><br>  <b>Caros leitores!</b>  Como voc√™ aborda o problema da separa√ß√£o de c√≥digo em seus projetos? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466537/">https://habr.com/ru/post/pt466537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466525/index.html">O que √© um layout de iPhone para PSD e como us√°-lo?</a></li>
<li><a href="../pt466527/index.html">Testando a funcionalidade do usu√°rio do site com objetos de p√°gina da Capybara</a></li>
<li><a href="../pt466529/index.html">Tipos de compila√ß√£o na JVM: expondo a sess√£o de magia negra</a></li>
<li><a href="../pt466533/index.html">Pastilda: resultados</a></li>
<li><a href="../pt466535/index.html">Repensando deepClone</a></li>
<li><a href="../pt466539/index.html">Utilizando M√≥dulos JavaScript em Produ√ß√£o: Situa√ß√£o Atual. Parte 2</a></li>
<li><a href="../pt466541/index.html">Usando o DbTool para propagar bancos de dados em aplicativos .NET (Core)</a></li>
<li><a href="../pt466543/index.html">Os cr√©ditos do Habr Weekly # 17 / Sberbank ser√£o aprovados pela AI - assustador, publicidade em produtos de c√≥digo aberto - duvidoso</a></li>
<li><a href="../pt466547/index.html">Feliz Dia do Programador</a></li>
<li><a href="../pt466549/index.html">Princ√≠pios gerais de opera√ß√£o da QEMU-KVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>