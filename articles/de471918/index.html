<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🉐 👩🏿‍🏫 🐬 SwiftUI: Bekanntschaft 💇🏾 🐽 🎅🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Tutorial erfahren Sie, wie Sie UI-Anwendungen mit View planen und wie Sie Statusvariablen zum Ändern von UIs verwenden. 

 Geschätzte Leseze...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SwiftUI: Bekanntschaft</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471918/">  In diesem Tutorial erfahren Sie, wie Sie UI-Anwendungen mit View planen und wie Sie <b>Statusvariablen</b> zum Ändern von UIs verwenden. <br><br>  Geschätzte Lesezeit: 25 Minuten. <br><a name="habracut"></a><br>  Mit SwiftUI können wir Interface Builder (IB) und Storyboards komplett vergessen.  IB und Xcode waren vor Xcode 4 separate Anwendungen, aber das „Andocken“ zwischen ihnen ist immer noch sichtbar, wenn wir den Namen IBAction oder IBOutlet bearbeiten und unsere Anwendung abstürzt, sodass IB nichts über Änderungen im Code weiß.  Oder wenn wir Bezeichner für Segues oder für Tabellenzellen festlegen, Xcode sie jedoch nicht überprüfen kann, da es sich um Zeichenfolgen handelt. <br><br>  SwiftUI zur Rettung!  Wir sehen die Änderungen sofort in der Ansicht, sobald wir den Code eingeben.  Änderungen auf der einen Seite führen zu einer Aktualisierung auf der anderen Seite, sodass sie immer miteinander verbunden sind.  Es gibt keine Zeichenfolgenbezeichner, die falsch sein könnten.  Und das ist der gesamte Code, aber er ist viel kleiner als wenn wir ihn mit UIKit geschrieben hätten, sodass es einfacher ist, ihn zu verstehen, zu bearbeiten und zu debuggen.  Sag mir, ist das nicht wunderbar? <br><br><h2>  Lass uns gehen </h2><br>  Beginnen wir ein neues Projekt im Xcode-Projekt ( <b>Shift-Command-N</b> ), wählen Sie <b>iOS ▸ Single View App</b> , rufen Sie RGBullsEye auf und wählen Sie <b>SwiftUI</b> als Schnittstelle. <br><br>  Jetzt ist <b>AppDelegate.swift</b> in zwei Dateien aufgeteilt: <b>AppDelegate.swift und SceneDelegate.swift</b> , und SceneDelegate enthält ein Fenster: <br><br><img src="https://habrastorage.org/webt/jc/kw/b2/jckwb27k-lv_t6aiwlqhe_-upi0.png"><br><br>  <b>SceneDelegate ist</b> mit Ausnahme dieser Zeile fast nicht mit SwiftUI verwandt: <br><br><pre><code class="swift hljs">window.rootViewController = <span class="hljs-type"><span class="hljs-type">UIHostingController</span></span>(rootView: <span class="hljs-type"><span class="hljs-type">ContentView</span></span>())</code> </pre> <br>  <b>UIHostingController</b> erstellt einen Ansichtscontroller für SwiftUI-view <b>ContentView</b> . <br><blockquote>  Hinweis: Mit <b>UIHostingController</b> können wir SwiftUI-view in eine vorhandene Anwendung integrieren.  Fügen Sie den Hosting View Controller zu unserem Storyboard hinzu und erstellen Sie einen Übergang vom UIViewController.  Dann verwenden wir Control-Drag mit Segue auf den View-Controller-Code, um eine <b>IBSegueAction</b> zu erstellen, in der wir den Hosting-Controller auf <b>rootView</b> - SwiftUI-view setzen. </blockquote>  Beim Start der Anwendung wird im Fenster eine Instanz von <b>ContentView angezeigt</b> , die in der Datei <b>ContentView.swift definiert ist</b> .  Dies ist eine <b>Struktur</b> , die dem <b>View-</b> Protokoll entspricht: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>) } }</code> </pre> <br>  Dies ist eine SwiftUI-Deklaration des Inhalts einer ContentView ( <b>body</b> ).  Es gibt jetzt eine Textansicht mit dem Text Hello World. <br><br>  Direkt unter ContentView_Previews wird eine Instanz von ContentView zurückgegeben. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView_Previews</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PreviewProvider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> previews: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">ContentView</span></span>() } }</code> </pre> <br>  Hier können wir die Testdaten für die Vorschau einstellen.  Aber wo genau ist diese Vorschau? <br><br>  Unmittelbar nach dem Code befindet sich ein großer leerer Bereich mit dem oben genannten: <br><br><img src="https://habrastorage.org/webt/u3/iv/qu/u3ivquebtlhjhi0-vnbctvg49tw.png"><br><br>  Klicken Sie auf <b>Fortsetzen</b> , warten Sie einen Moment und ... <br><br><img src="https://habrastorage.org/webt/7x/hl/kh/7xhlkhixvhssyu34vjnvxdz7hkq.png"><br><br><h2>  Skizzieren Sie unsere Benutzeroberfläche </h2><br>  Etwas Vertrautes ist nicht sichtbar - dies ist die Datei <b>Main.storyboard</b> .  Wir werden unsere Benutzeroberfläche mit SwiftUI direkt im Code erstellen, während wir uns die Vorschau ansehen: Was bekommen wir dort?  Aber keine Sorge, wir müssen nicht Hunderte von Codezeilen schreiben, um unsere Ansichten zu erstellen. <br><br>  SwiftUI ist deklarativ: Sie geben an, wie Ihre Benutzeroberfläche aussehen soll, und SwiftUI konvertiert all dies in effizienten Code, der die ganze Arbeit erledigt.  Mit Apple können Sie so viele Ansichten wie nötig erstellen, damit der Code einfach und unkompliziert ist.  Wiederverwendbare Ansichten mit Parametern werden besonders empfohlen - dies ähnelt der Zuordnung von Code zu einer separaten Funktion.  Sie werden es später selbst tun. <br><br>  Unsere Anwendung wird viele Ansichten haben, daher skizzieren wir zunächst Textansichten als Stubs. <br><br>  Ersetzen Sie Text ("Hallo Welt") durch: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Target Color Block"</span></span>)</code> </pre> <br>  Klicken Sie ggf. auf <b>Fortsetzen</b> , um die Vorschau zu aktualisieren. <br><br>  <b>Klicken</b> Sie nun <b>bei gedrückter Befehlstaste</b> auf diese Ansicht in der <b>Vorschau</b> und wählen Sie <b>In HStack einbetten</b> : <br><br><img src="https://habrastorage.org/webt/s-/tm/dy/s-tmdyehpyekmyid1tdxsbfh_xy.png"><br><br>  Bitte beachten Sie, dass sich auch Ihr Code geändert hat: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Target Color Block"</span></span>) }</code> </pre> <br>  Kopieren Sie den Textoperator, fügen Sie ihn ein und bearbeiten Sie ihn in unserem HStack.  Bitte beachten Sie: Wir trennen die Operatoren nicht durch ein Komma, sondern schreiben sie jeweils in eine neue Zeile: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Target Color Block"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Guess Color Block"</span></span>) }</code> </pre><br>  Und so sieht es in der Vorschau aus: <br><br><img src="https://habrastorage.org/webt/pj/sp/n6/pjspn6qoeesvvhbvuhj59po64oe.png"><br><br>  <b>Bereiten</b> <b>wir</b> nun einen Platz für die Slider-Stubs vor, indem wir den <b>HStack</b> auf <b>VStack platzieren</b> .  Dieses Mal werden wir <b>Command-Click</b> auf den HStack <b>in unserem Code machen</b> : <br><br><img src="https://habrastorage.org/webt/wa/bo/fn/wabofnratyjqvqaprm0nyali_zq.png"><br><br>  Wählen Sie <b>In VStack einbetten</b> .  Ein neuer Code wird angezeigt, die Vorschau ändert sich jedoch nicht.  Wenig später werden wir die Ansicht unter zukünftigen Farbblöcken hinzufügen. <br><br>  Fügen Sie unmittelbar nach dem HStack eine neue Zeile hinzu, klicken Sie auf <b>+</b> in der Symbolleiste, um die Bibliothek zu öffnen, und ziehen Sie den <b>vertikalen Stapel</b> auf eine neue Zeile: <br><br><img src="https://habrastorage.org/webt/rl/dd/pw/rlddpwk_2bjxsrmi7hudiymh3na.png"><br><br>  Wie erwartet haben sich sowohl der Code als auch die Vorschau geändert: <br><br><img src="https://habrastorage.org/webt/f-/aq/w1/f-aqw1b3zp5aunz2cqysubhysug.png"><br><br>  Beenden Sie die Arbeit an der Entwurfs-Benutzeroberfläche, damit alles so aussieht: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Target Color Block"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Guess Color Block"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hit me button"</span></span>) <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Red slider"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Green slider"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Blue slider"</span></span>) } }</code> </pre> <br>  Im neuen VStack werden etwas später drei Schieberegler sowie eine Schaltfläche zwischen den Schiebereglern und den Farbblöcken angezeigt. <br><br><h2>  Wir arbeiten weiter an der Benutzeroberfläche </h2><br>  Lassen Sie uns nun in SwiftUI üben, einen HStack mit farbigen Blöcken zu füllen: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Target color block VStack { Rectangle() Text("Match this color") } // Guess color block VStack { Rectangle() HStack { Text("R: xxx") Text("G: xxx") Text("B: xxx") } } }</span></span></code> </pre> <br>  Jeder Farbblock hat ein Rechteck.  Der Zielfarbblock (Ziel) hat eine Textansicht unter dem Rechteck und der ausgewählte (Vermutung) hat drei Textansichten.  Wenig später werden wir 'xxx' durch die realen Werte der Schieberegler ersetzen. <br><br><h2>  Verwenden der Variablen '@State' </h2><br>  In SwiftUI können wir reguläre Variablen verwenden. Wenn sich die Änderung der Variablen jedoch auf die Benutzeroberfläche auswirken soll, markieren wir Variablen wie <b>'@State'</b> .  In unserer Anwendung wählen wir die Farbe aus, sodass alle Variablen, die sich auf die ausgewählte Farbe auswirken, '@ State'-Variablen sind. <br><br>  Fügen Sie diese Zeilen vor der <b>Body-</b> Deklaration in die <b>Struktur ContentView ein</b> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rTarget = <span class="hljs-type"><span class="hljs-type">Double</span></span>.random(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>..&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> gTarget = <span class="hljs-type"><span class="hljs-type">Double</span></span>.random(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>..&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bTarget = <span class="hljs-type"><span class="hljs-type">Double</span></span>.random(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>..&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rGuess: <span class="hljs-type"><span class="hljs-type">Double</span></span> @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gGuess: <span class="hljs-type"><span class="hljs-type">Double</span></span> @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bGuess: <span class="hljs-type"><span class="hljs-type">Double</span></span></code> </pre> <br>  Die Werte von R, G und B liegen zwischen 0 und 1. Wir initialisieren die gewünschten Werte mit Zufallswerten.  Wir könnten die ausgewählten Werte auch auf 0,5 initialisieren, sie jedoch vorerst nicht initialisieren, um zu zeigen, was in diesem Fall zu tun ist. <br><br>  Gehen wir etwas tiefer zur <b>Struktur ContentView_Previews</b> , die die ContentView-Instanz <b>für die Vorschau</b> initialisiert.  Jetzt benötigt der Initialisierer die Anfangswerte der ausgewählten Werte.  Ändern Sie <b>ContentView ()</b> wie <b>folgt</b> : <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ContentView</span></span>(rGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, gGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, bGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Wenn wir die Schieberegler erstellen, befinden sich ihre Werte in der Vorschau in der Mitte. <br><br>  Wir sollten den <b>Initialisierer auch</b> in <b>SceneDelegate</b> in der <b>Szenenfunktion</b> <b>(_: willConnectTo: options :)</b> <b>reparieren</b> - <b>ContentView () durch</b> Folgendes ersetzen: <br><br><pre> <code class="swift hljs">window.rootViewController = <span class="hljs-type"><span class="hljs-type">UIHostingController</span></span>(rootView: <span class="hljs-type"><span class="hljs-type">ContentView</span></span>(rGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, gGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, bGuess: <span class="hljs-number"><span class="hljs-number">0.5</span></span>))</code> </pre><br>  Wenn die Anwendung geladen wird, befinden sich die Schieberegler in der Mitte. <br><br>  Fügen Sie nun dem Zielrechteck einen Farbmodifikator hinzu: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Rectangle</span></span>() .foregroundColor(<span class="hljs-type"><span class="hljs-type">Color</span></span>(red: rTarget, green: gTarget, blue: bTarget, opacity: <span class="hljs-number"><span class="hljs-number">1.0</span></span>))</code> </pre> <br>  Der Modifikator <b>.foregroundColor</b> erstellt eine neue Rechteckansicht mit der Farbe, die durch zufällig generierte RGB-Werte angegeben wird. <br><br>  Ändern Sie in ähnlicher Weise das Vermutungsrechteck: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Rectangle</span></span>() .foregroundColor(<span class="hljs-type"><span class="hljs-type">Color</span></span>(red: rGuess, green: gGuess, blue: bGuess, opacity: <span class="hljs-number"><span class="hljs-number">1.0</span></span>))</code> </pre> <br>  Mit Werten von R, G und B bei 0,5 erhalten wir eine graue Farbe. <br><br>  Klicken Sie auf Fortsetzen und warten Sie einen Moment. <br><br><img src="https://habrastorage.org/webt/yl/nr/d5/ylnrd5lgrnbg2zgnqwapyzuwrhm.png"><br><br><h2>  Ansicht wiederverwendbar machen </h2><br>  Erstens werden wir nicht über die Wiederverwendung nachdenken und nur einen Schieberegler für Rot erstellen.  <b>Ersetzen Sie</b> in <b>VStack</b> für Schieberegler den <b>Textstecker</b> ("Roter Schieberegler") durch diesen <b>HStack</b> : <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"0"</span></span>) .foregroundColor(.red) <span class="hljs-type"><span class="hljs-type">Slider</span></span>(value: $rGuess) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"255"</span></span>) .foregroundColor(.red) }</code> </pre> <br>  Wir haben die Textfarbe in der Textansicht rot gemacht.  Und sie haben Slider mit einem Standardwert hinzugefügt.  Der Standardbereich des Schiebereglers liegt zwischen 0 und 1, was perfekt zu uns passt. <br><blockquote>  Hinweis: Wir wissen, dass der Schieberegler von 0 bis 1 reicht und die Textbezeichnung "255" lautet, um Benutzern die Darstellung von RGB-Werten im Bereich von 0 bis 255 zu erleichtern. </blockquote>  Aber welche Art von <b>$</b> -Symbol hat die Variable?  Wissen wir über <b>?</b>  <b>und!</b>  bei der arbeit mit <b>optionalen</b> und jetzt auch <b>$</b> ? <br><br>  Trotz der Tatsache, dass er so klein und unauffällig ist, ist er sehr wichtig.  <b>RGuess</b> selbst ist nur ein schreibgeschützter Wert.  Aber <b>$ rGuess ist eine Bindung</b> . Wir benötigen sie, um das Rechteck der ausgewählten Farbe zu aktualisieren, wenn der Benutzer den Schieberegler bewegt. <br><br>  Um den Unterschied zu verstehen, legen Sie die Werte für die Drei-Text-Ansicht unter dem vorhersagbaren Rechteck fest: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"R: \(Int(rGuess * 255.0))"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"G: \(Int(gGuess * 255.0))"</span></span>) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"B: \(Int(bGuess * 255.0))"</span></span>) }</code> </pre> <br>  Hier verwenden wir nur die Werte, ändern sie nicht, daher benötigen wir das Präfix $ nicht. <br><br>  Warten Sie auf das Vorschau-Update: <br><br><img src="https://habrastorage.org/webt/yf/fi/fx/yffifxnmxgba3ghsjg8hwptqces.png"><br><br>  Farbige Rechtecke schrumpften leicht, um dem Schieberegler zu entsprechen.  Die Textbeschriftungen des Schiebereglers sehen jedoch unordentlich aus - sie sind zu stark an die Ränder gedrückt.  Fügen wir HStack - padding einen weiteren Modifikator hinzu: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HStack</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"0"</span></span>) .foregroundColor(.red) <span class="hljs-type"><span class="hljs-type">Slider</span></span>(value: $rGuess) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"255"</span></span>) .foregroundColor(.red) } .padding()</code> </pre> <br>  Jetzt viel besser! <br><br><img src="https://habrastorage.org/webt/rw/4d/mj/rw4dmjkhddr768hvcgfg3-fljqk.png"><br><br>  <b>Befehl</b> erstellen <b>Klicken Sie</b> auf den roten Schieberegler HStack und wählen Sie <b>Unteransicht extrahieren</b> : <br><br><img src="https://habrastorage.org/webt/vr/ln/-q/vrln-q4ebzp3m5aubyaysixuu0u.png"><br><br>  Dies funktioniert genauso wie <b>Refactor ▸ In Funktion</b> extrahieren, jedoch für die SwiftUI-Ansicht. <br><br>  An diesem Punkt werden mehrere Fehlermeldungen angezeigt, keine Sorge, jetzt werden wir es beheben. <br><br>  <b>Benennen Sie</b> die resultierende Ansicht <b>ColorSlider</b> und fügen Sie diesen Code oben vor dem Hauptteil unserer neuen Ansicht hinzu: <br><br><pre> <code class="swift hljs">@<span class="hljs-type"><span class="hljs-type">Binding</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value: <span class="hljs-type"><span class="hljs-type">Double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textColor: <span class="hljs-type"><span class="hljs-type">Color</span></span></code> </pre> <br>  Ersetzen Sie nun <b>$ rGuess durch $ value und .red durch textColor</b> : <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"0"</span></span>) .foregroundColor(textColor) <span class="hljs-type"><span class="hljs-type">Slider</span></span>(value: $value) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"255"</span></span>) .foregroundColor(textColor)</code> </pre> <br>  Kehren wir zur Definition von ColorSlider () in VStack zurück und fügen unsere Parameter hinzu: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ColorSlider</span></span>(value: $rGuess, textColor: .red)</code> </pre> <br>  Stellen Sie sicher, dass die Vorschau mit dem roten Schieberegler in Ordnung ist, und ersetzen Sie die Textstubs durch die grünen und blauen Schieberegler.  Vergessen Sie nicht, dort die richtigen Parameter einzugeben: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ColorSlider</span></span>(value: $gGuess, textColor: .green) <span class="hljs-type"><span class="hljs-type">ColorSlider</span></span>(value: $bGuess, textColor: .blue)</code> </pre> <br>  Klicken Sie auf <b>Fortsetzen</b> , um die Vorschau zu aktualisieren: <br><br><img src="https://habrastorage.org/webt/nx/4c/1z/nx4c1zblb3lkvi123ucqt6gte5e.png"><br><blockquote>  Hinweis: Möglicherweise haben Sie bemerkt, dass Sie häufig auf <b>Fortsetzen</b> klicken müssen.  Wenn Sie Verknüpfungen mögen, werden Sie <b>Option-Command-P</b> wahrscheinlich lieben. </blockquote>  Und jetzt etwas Schönes!  Klicken Sie in der unteren rechten Ecke der Vorschau auf die Schaltfläche <b>Live-Vorschau</b> : <br><br><img src="https://habrastorage.org/webt/76/er/wu/76erwudgdom32-amjikoa6lfiya.png"><br><br>  Mit der Live-Vorschau können wir mit der Vorschau interagieren, als ob die Anwendung auf einem Simulator ausgeführt würde! <br><br>  Versuchen Sie, die Schieberegler zu bewegen: <br><br><img src="https://habrastorage.org/webt/9h/9e/pi/9h9epih_dde4yuduxpiu6lhdswg.png"><br><br>  Großartig!  Wir gehen zur letzten Etappe über.  Wir wollen doch wissen, wie gut wir die Farbe ausgewählt haben? <br><br><h2>  Warnung anzeigen </h2><br>  Nachdem die Schieberegler auf die gewünschten Positionen eingestellt wurden, drückt der Benutzer die <b>Hit Me-</b> Taste. Anschließend wird eine <b>Warnung</b> mit einer Bewertung angezeigt. <br><br>  Fügen Sie der ContentView zunächst eine Methode hinzu, um die Punktzahl zu berechnen.  Zwischen den Variablen @State und <br>  Körper diese Methode hinzufügen: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computeScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rDiff = rGuess - rTarget <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> gDiff = gGuess - gTarget <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bDiff = bGuess - bTarget <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> diff = sqrt(rDiff * rDiff + gDiff * gDiff + bDiff * bDiff) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span>((<span class="hljs-number"><span class="hljs-number">1.0</span></span> - diff) * <span class="hljs-number"><span class="hljs-number">100.0</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) }</code> </pre> <br>  Der <b>Diff-</b> Wert ist einfach der Abstand zwischen zwei Punkten im dreidimensionalen Raum, dh der Wert des Benutzerfehlers.  Um eine Schätzung zu erhalten, subtrahieren Sie diff von 1 und reduzieren Sie dann seinen Wert auf den Bereich 0 - 100. Je kleiner das diff, desto höher die Schätzung. <br><br>  Ersetzen Sie dann den <b>Text-</b> Stub <b>("Hit me button")</b> durch diesen Code: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Button</span></span>(action: { }) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hit Me!"</span></span>) }</code> </pre> <br>  Button hat Action und Label, wie UIButton.  Wir möchten, dass eine Aktion eine Warnansicht auslöst.  Wenn wir jedoch eine Warnung in der Aktionsschaltfläche erstellen, geschieht nichts. <br><br>  Stattdessen machen wir Alert zu einem Teil der ContentView und fügen eine '@State'-Variable vom Typ Bool hinzu.  Dann setzen wir diese Variable an der Stelle, an der unser Alert in der Aktionsschaltfläche angezeigt werden soll, auf true.  Der Wert wird auf false zurückgesetzt, um die Warnung auszublenden, wenn der Benutzer die Warnung ausblendet. <br><br>  Fügen Sie diese Variable '@State' hinzu: <br><br><pre> <code class="swift hljs">@<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> showAlert = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Fügen Sie dann diesen Code als Aktionsschaltfläche hinzu: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.showAlert = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Selbst ist für uns notwendig, da showAlert in der Schließung ist. <br><br>  Fügen Sie zum Schluss den Alert-Modifikator zur Schaltfläche hinzu, damit unsere Schaltfläche ganz wie folgt aussieht: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Button</span></span>(action: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.showAlert = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hit Me!"</span></span>) } .alert(isPresented: $showAlert) { <span class="hljs-type"><span class="hljs-type">Alert</span></span>(title: <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Your Score"</span></span>), message: <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"\(computeScore())"</span></span>)) }</code> </pre><br>  Wir übergeben $ showAlert als Bindung, da sich der Wert dieser Variablen ändert, sobald der Benutzer die Warnung verbirgt, und diese Änderung dazu führt, dass die Ansicht aktualisiert wird. <br><br>  SwiftUI verfügt über einen einfachen Initialisierer für die Warnungsansicht.  Standardmäßig verfügt es über eine OK-Schaltfläche, sodass wir sie nicht einmal als Parameter festlegen müssen. <br><br>  Schalten Sie die Live-Vorschau ein, bewegen Sie die Schieberegler und drücken Sie die Taste "Hit me".  Voila! <br><br><img src="https://habrastorage.org/webt/je/j2/lu/jej2lu5e6ookqthzdqvhz03lcqk.png"><br><br>  Mit der Live-Vorschau benötigen Sie keinen iOS-Simulator mehr.  Obwohl Sie damit Ihre Anwendung horizontal testen können: <br><br><img src="https://habrastorage.org/webt/m2/xe/np/m2xenpxqc1hzub85tqronv9ykwe.png"><br><br><h2>  Fazit </h2><br>  <a href="" rel="nofollow">Hier können</a> Sie den fertigen Publikationsentwurf herunterladen. <br><br>  In diesem Tutorial wurde SwiftUI nur geringfügig behandelt. Jetzt haben Sie einen Eindruck von den neuen Funktionen von Xcode zum Erstellen von Benutzeroberflächen und Vorschauen sowie von der Verwendung der Variablen "@State" zum Aktualisieren Ihrer Benutzeroberfläche. <br><br>  Der Einfachheit halber haben wir kein Datenmodell für RGB erstellt.  Die meisten Anwendungen erstellen jedoch Modelle ihrer Daten mithilfe von Strukturen oder Klassen.  Wenn Sie Änderungen im Modell in SwiftUI verfolgen möchten, muss es dem <b>ObservableObject-</b> Protokoll entsprechen und die Eigenschaft <b>willChange</b> implementieren, die Sie über Änderungen <b>informiert</b> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Schauen Sie sich</a> Apple-Beispiele und insbesondere den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Datenfluss durch SwiftUI an</a> . <br><br>  Um SwiftUI verständlicher zu machen, können Sie einer vorhandenen Anwendung eine SwiftUI-Ansicht hinzufügen.  Sehen Sie sich Beispiele an, wie Sie dies schnell und einfach tun können. <br><br>  Siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">meine Veröffentlichung</a> zur Implementierung von Falt- / Dropdown-Listen mit SwiftUI. <br><br>  Schließlich studieren Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Dokumentation für SwiftUI</a> , und es gibt wirklich viele nützliche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Dinge</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471918/">https://habr.com/ru/post/de471918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471904/index.html">Ressourcenplaner bei HPE InfoSight</a></li>
<li><a href="../de471906/index.html">Die Gefahren unsachgemäßer Optimierungen</a></li>
<li><a href="../de471908/index.html">Die unerwartete Schönheit von Primzahlen</a></li>
<li><a href="../de471912/index.html">Englisch lernen: 7 praktische Möglichkeiten, Ihren Wortschatz zu erweitern</a></li>
<li><a href="../de471914/index.html">Funktionsweise des Sega Mega Drive-Grafiksystems: Videoanzeigeprozessor</a></li>
<li><a href="../de471924/index.html">Einführung in Sass-Module</a></li>
<li><a href="../de471928/index.html">Stellen Sie die zuletzt gespeicherte Konfiguration in Mikrotik-Routern automatisch wieder her</a></li>
<li><a href="../de471930/index.html">Atomic Design Mitap - Buchstaben, Farben, Uniformen, Team und Geld</a></li>
<li><a href="../de471938/index.html">Layout-Hinweise: Nützliche Google Chrome-Erweiterungen im Jahr 2019</a></li>
<li><a href="../de471940/index.html">So reduzieren Sie das Risiko von Ausfällen bei aufgeschobenen Abrechnungen: Factoring für Unternehmen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>