<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¶üèæ üõµ üå®Ô∏è Introduction √† CatBoost. Rapport Yandex üòµ üë©üèª‚Äçüé§ ü§ôüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mon nom est Stas Kirillov, je suis un d√©veloppeur leader dans le groupe de plates-formes ML de Yandex. Nous d√©veloppons des outils d'apprentissage aut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introduction √† CatBoost. Rapport Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/458790/">  Mon nom est Stas Kirillov, je suis un d√©veloppeur leader dans le groupe de plates-formes ML de Yandex.  Nous d√©veloppons des outils d'apprentissage automatique, soutenons et d√©veloppons une infrastructure pour eux.  Vous trouverez ci-dessous mon r√©cent expos√© sur le fonctionnement de la biblioth√®que CatBoost.  Dans le rapport, j'ai parl√© des points d'entr√©e et des fonctionnalit√©s du code pour ceux qui veulent le comprendre ou devenir notre contributeur. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ySla2kczbeM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - CatBoost vit sur GitHub sous la licence Apache 2.0, c'est-√†-dire qu'il est ouvert et gratuit pour tout le monde.  Le projet se d√©veloppe activement, maintenant notre r√©f√©rentiel compte plus de quatre mille √©toiles.  CatBoost est √©crit en C ++, c'est une biblioth√®que de boost de gradient sur les arbres de d√©cision.  Il prend en charge plusieurs types d'arbres, y compris les arbres dits "sym√©triques", qui sont utilis√©s par d√©faut dans la biblioth√®que. <br><br><a name="habracut"></a>  Quel est le profit de nos arbres inconscients?  Ils apprennent rapidement, appliquent rapidement et aident √† apprendre √† √™tre plus r√©sistants aux changements de param√®tres en termes de changements dans la qualit√© finale du mod√®le, ce qui r√©duit consid√©rablement le besoin de s√©lection des param√®tres.  Notre biblioth√®que vise √† faciliter son utilisation en production, √† apprendre rapidement et √† obtenir une bonne qualit√© imm√©diatement. <br><br><img src="https://habrastorage.org/webt/wv/0s/8f/wv0s8fv32vjvrpihdkyek1uv-yu.jpeg"><br><br>  L'amplification du gradient est un algorithme dans lequel nous construisons des pr√©dicteurs simples qui am√©liorent notre fonction objectif.  Autrement dit, au lieu de construire imm√©diatement un mod√®le complexe, nous construisons tour √† tour de nombreux petits mod√®les. <br><br><img src="https://habrastorage.org/webt/nn/jd/e0/nnjde08vq2zueuftpfs6nv1pemw.jpeg"><br><br>  Comment se d√©roule le processus d'apprentissage dans CatBoost?  Je vais vous expliquer comment cela fonctionne en termes de code.  Tout d'abord, nous analysons les param√®tres de formation que l'utilisateur transmet, les validons, puis voyons si nous devons charger les donn√©es.  Parce que les donn√©es peuvent d√©j√† √™tre charg√©es - par exemple, en Python ou R. Ensuite, nous chargeons les donn√©es et construisons une grille √† partir des bordures afin de quantifier les caract√©ristiques num√©riques.  Cela est n√©cessaire pour acc√©l√©rer l'apprentissage. <br><br>  Les fonctionnalit√©s cat√©gorielles que nous traitons un peu diff√©remment.  Nous cat√©gorisons les entit√©s au tout d√©but, puis renum√©rotons les hachages de z√©ro au nombre de valeurs uniques de l'entit√© cat√©gorielle afin de lire rapidement les combinaisons d'entit√©s cat√©gorielles. <br><br>  Ensuite, nous lan√ßons directement la boucle de formation - le cycle principal de notre apprentissage automatique, o√π nous construisons de mani√®re it√©rative des arbres.  Apr√®s ce cycle, le mod√®le est export√©. <br><br><img src="https://habrastorage.org/webt/ed/m6/lm/edm6lmnfi6ub-9ocgvxci6x7usm.jpeg"><br><br>  Le cycle de formation lui-m√™me comprend quatre points.  Premi√®rement, nous essayons de construire un arbre.  Ensuite, nous examinons le type d'augmentation ou de diminution de la qualit√© qu'il donne.  Ensuite, nous v√©rifions si notre d√©tecteur de recyclage a fonctionn√©.  Ensuite, nous, si le moment est venu, enregistrons l'instantan√©. <br><br><img src="https://habrastorage.org/webt/wn/es/f2/wnesf2muxq15auqojtipuwjzrjk.jpeg"><br><br>  L'apprentissage d'un seul arbre est un cycle √† travers les niveaux des arbres.  Au tout d√©but, nous s√©lectionnons au hasard une permutation de donn√©es si nous utilisons le boosting ordonn√© ou si nous avons des fonctionnalit√©s cat√©gorielles.  Ensuite, nous comptons les compteurs sur cette permutation.  Ensuite, nous essayons de choisir goul√ªment de bonnes divisions dans cet arbre.  Par scissions, nous entendons simplement certaines conditions binaires: telle ou telle caract√©ristique num√©rique est sup√©rieure √† telle ou telle valeur, ou telle ou telle contre par caract√©ristique cat√©gorielle est sup√©rieure √† telle ou telle valeur. <br><br>  Comment est organis√© le cycle de niveau d'arbre gourmand?  Au tout d√©but, le bootstrap est fait - nous pesons √† nouveau ou √©chantillonnons les objets, apr√®s quoi seuls les objets s√©lectionn√©s seront utilis√©s pour construire l'arborescence.  Le bootstrap peut √©galement √™tre recompt√© avant de s√©lectionner chaque division si l'option d'√©chantillonnage √† chaque niveau est activ√©e. <br><br>  Ensuite, nous agr√©gons les d√©riv√©es en histogrammes, comme nous le faisons pour chaque candidat divis√©.  √Ä l'aide d'histogrammes, nous essayons d'√©valuer le changement dans la fonction objectif qui se produira si nous s√©lectionnons ce candidat divis√©. <br><br>  Nous s√©lectionnons le candidat avec la meilleure vitesse et l'ajoutons √† l'arbre.  Ensuite, nous calculons des statistiques en utilisant cet arbre s√©lectionn√© sur les permutations restantes, mettons √† jour la valeur dans les feuilles √† ces permutations, calculons les valeurs dans les feuilles pour le mod√®le et proc√©dons √† l'it√©ration suivante de la boucle. <br><br><img src="https://habrastorage.org/webt/7s/bd/dt/7sbddtjen2ktfvjvgccack2hrrm.jpeg"><br><br>  Il est tr√®s difficile de distinguer un endroit o√π la formation a lieu, donc sur cette diapositive - vous pouvez l'utiliser comme point d'entr√©e - les principaux fichiers que nous utilisons pour la formation sont r√©pertori√©s.  C'est greedy_tensor_search, dans lequel nous vivons la proc√©dure m√™me de s√©lection gourmande des splits.  C'est train.cpp, o√π nous avons la principale usine de formation CPU.  C'est aprox_calcer, o√π se trouvent les fonctions de mise √† jour des valeurs dans les feuilles.  Et aussi score_calcer - une fonction pour √©valuer un candidat. <br><br>  Les parties tout aussi importantes sont catboost.pyx et core.py.  Ceci est le code de l'encapsuleur python, tr√®s probablement beaucoup d'entre vous incorporeront une sorte de substance dans l'encapsuleur python.  Notre wrapper python est √©crit en Cython, Cython est traduit en C ++, donc ce code devrait √™tre rapide. <br><br>  Notre R-wrapper se trouve dans le dossier R-package.  Peut-√™tre que quelqu'un devra ajouter ou corriger certaines options, pour les options, nous avons une biblioth√®que distincte - catboost / libs / options. <br><br>  Nous sommes venus d'Arcadia √† GitHub, nous avons donc de nombreux artefacts int√©ressants que vous rencontrerez. <br><br><img src="https://habrastorage.org/webt/wc/aw/as/wcawas_io1tv2tsyir8wv9y9ewu.jpeg"><br><br><img src="https://habrastorage.org/webt/yc/w6/or/ycw6or5ltsotncff_edmb_aq_4e.jpeg"><br><br>  Commen√ßons par la structure du r√©f√©rentiel.  Nous avons un dossier util o√π les primitives de base sont: les vecteurs, les cartes, les syst√®mes de fichiers, le travail avec les cha√Ænes, les flux. <br><br>  Nous avons une biblioth√®que o√π se trouvent les biblioth√®ques partag√©es utilis√©es par Yandex - beaucoup, pas seulement CatBoost. <br><br>  Le dossier CatBoost et contrib est le code des biblioth√®ques tierces auxquelles nous lions. <br><br>  Parlons maintenant des primitives C ++ que vous rencontrerez.  Le premier est les pointeurs intelligents.  Dans Yandex, nous utilisons THolder depuis std :: unique_ptr, et MakeHolder est utilis√© √† la place de std :: make_unique. <br><br><img src="https://habrastorage.org/webt/vo/uy/dw/vouydw0bfucjevtxvyttk36rkim.jpeg"><br><br>  Nous avons notre propre SharedPtr.  De plus, il existe sous deux formes, SimpleSharedPtr et AtomicSharedPtr, qui diff√®rent par le type de compteur.  Dans un cas, il est atomique, ce qui signifie que comme si plusieurs flux pouvaient poss√©der un objet.  Il sera donc √† l'abri du point de vue du transfert entre flux. <br><br>  Une classe distincte, IntrusivePtr, vous permet de poss√©der des objets h√©rit√©s de la classe TRefCounted, c'est-√†-dire des classes qui ont un compteur de r√©f√©rence int√©gr√©.  Il s'agit d'allouer de tels objets √† la fois, sans allouer en plus un bloc de contr√¥le avec un compteur. <br><br>  Nous avons √©galement notre propre syst√®me d'entr√©e et de sortie.  IInputStream et IOutputStream sont des interfaces d'entr√©e et de sortie.  Ils ont des m√©thodes utiles, telles que ReadTo, ReadLine, ReadAll, en g√©n√©ral, tout ce qui peut √™tre attendu de InputStreams.  Et nous avons des impl√©mentations de ces flux pour travailler avec la console: Cin, Cout, Cerr et s√©par√©ment Endl, qui est similaire √† std :: endl, c'est-√†-dire qu'il vide le flux. <br><br><img src="https://habrastorage.org/webt/n4/cs/wa/n4cswarvhmfpciuulxej55cbea8.jpeg"><br><br>  Nous avons √©galement nos propres impl√©mentations d'interface pour les fichiers: TInputFile, TOutputFile.  Il s'agit d'une lecture en m√©moire tampon.  Ils impl√©mentent la lecture et l'√©criture tamponn√©es dans un fichier, vous pouvez donc les utiliser. <br><br>  Util / system / fs.h a des m√©thodes NFs :: Exists et NFs :: Copy, si vous devez soudainement copier quelque chose ou v√©rifier qu'un fichier existe vraiment. <br><br><img src="https://habrastorage.org/webt/a0/vq/4z/a0vq4zt1s-biymm5n2y4bix80a0.jpeg"><br><br>  Nous avons nos propres conteneurs.  Ils sont pass√©s √† l'utilisation de std :: vector il y a longtemps, c'est-√†-dire qu'ils h√©ritent simplement de std :: vector, std :: set et std :: map, mais nous avons √©galement nos propres THashMap et THashSet, qui ont en partie des interfaces compatibles avec unordered_map et unordered_set.  Mais pour certaines t√¢ches, ils se sont av√©r√©s plus rapides, nous les utilisons donc toujours. <br><br><img src="https://habrastorage.org/webt/h-/he/go/h-hegomeoamviz05exj_rt03bzg.jpeg"><br><br>  Les r√©f√©rences de tableau sont analogues √† std :: span de C ++.  Certes, il n'est pas apparu avec nous la vingti√®me ann√©e, mais bien plus t√¥t.  Nous l'utilisons activement pour transf√©rer des r√©f√©rences √† des tableaux, comme s'ils √©taient allou√©s sur de grands tampons, afin de ne pas allouer de tampons temporaires √† chaque fois.  Supposons que, pour compter les d√©riv√©es ou certaines approximations, nous pouvons allouer de la m√©moire sur un grand tampon pr√©-allou√© et passer uniquement TArrayRef √† la fonction de comptage.  C'est tr√®s pratique et nous l'utilisons beaucoup. <br><br><img src="https://habrastorage.org/webt/18/f0/km/18f0kmuuuuigc-j7zdck_yzn_qi.jpeg"><br><br>  Arcadia utilise son propre ensemble de classes pour travailler avec des cha√Ænes.  Il s'agit, tout d'abord, de TStingBuf - un analogue de str :: string_view de C ++ 17. <br><br>  TString n'est pas du tout std :: sting, c'est une cha√Æne CopyOnWrite, vous devez donc travailler avec pr√©caution.  De plus, TUtf16String est le m√™me TString, seul son type de base n'est pas char, mais wchar 16 bits. <br><br>  Et nous avons des outils pour convertir de cha√Æne en cha√Æne.  Il s'agit de ToString, qui est un analogue de std :: to_string et FromString associ√© √† TryFromString, qui vous permet de transformer la cha√Æne en le type dont vous avez besoin. <br><br><img src="https://habrastorage.org/webt/2f/fo/jv/2ffojvcw39thuqmjwps2cl2kreu.jpeg"><br><br>  Nous avons notre propre structure d'exception, l'exception de base dans les biblioth√®ques d'arcade est yexception, qui h√©rite de std :: exception.  Nous avons une macro ythrow qui ajoute des informations sur l'endroit o√π l'exception a √©t√© lev√©e √† yexception, c'est juste un wrapper pratique. <br><br>  Il existe un analogue de std :: current_exception - CurrentExceptionMessage, cette fonction l√®ve l'exception actuelle sous forme de cha√Æne. <br><br>  Il existe des macros pour les assertions et les v√©rifications - ce sont Y_ASSERT et Y_VERIFY. <br><br><img src="https://habrastorage.org/webt/ac/ao/di/acaodinndi3xj9hr7kiju_vreew.jpeg"><br><br>  Et nous avons notre propre s√©rialisation int√©gr√©e, elle est binaire et n'est pas destin√©e √† transf√©rer des donn√©es entre diff√©rentes r√©visions.  Au contraire, cette s√©rialisation est n√©cessaire pour transf√©rer des donn√©es entre deux binaires de la m√™me r√©vision, par exemple, dans l'apprentissage distribu√©. <br><br>  Il se trouve que nous avons deux versions de s√©rialisation dans CatBoost.  La premi√®re option fonctionne via les m√©thodes d'interface Enregistrer et Charger, qui s√©rialisent vers le flux.  Une autre option est utilis√©e dans notre formation distribu√©e, elle utilise une biblioth√®que BinSaver interne assez ancienne, pratique pour s√©rialiser des objets polymorphes qui doivent √™tre enregistr√©s dans une usine sp√©ciale.  Cela est n√©cessaire pour la formation distribu√©e, dont nous n'aurons probablement pas le temps de parler ici. <br><br><img src="https://habrastorage.org/webt/lb/oa/q9/lboaq9rvcuexqpoea75mbnbve8g.jpeg"><br><br>  Nous avons √©galement notre propre boost_optional analogique ou std :: optional - TMaybe.  Analogue de std :: variant - TVariant.  Vous devez les utiliser. <br><br><img src="https://habrastorage.org/webt/fd/eg/xo/fdegxof00jzhggi1slypv6s_uvi.jpeg"><br><br>  Il existe une certaine convention selon laquelle, dans le code CatBoost, nous lan√ßons une TCatBoostException au lieu d'une yexception.  Il s'agit de la m√™me exception, seule la trace de pile est toujours ajout√©e lorsqu'elle est lev√©e. <br><br>  Et nous utilisons √©galement la macro CB_ENSURE pour v√©rifier facilement certaines choses et lever des exceptions si elles ne sont pas ex√©cut√©es.  Par exemple, nous l'utilisons souvent pour analyser les options ou analyser les param√®tres transmis par l'utilisateur. <br><br><img src="https://habrastorage.org/webt/qn/ut/jk/qnutjk-36n7wnibgpx_1xvhzsw4.jpeg"><br><h5>  <sup><sub>Liens depuis la diapositive: <a href="">premier</a> , <a href="">deuxi√®me</a></sub></sup> </h5><br>  Assurez-vous de v√©rifier le style de code avant de commencer le travail, il se compose de deux parties.  Le premier est un style de code g√©n√©ral, qui se trouve directement √† la racine du r√©f√©rentiel dans le fichier CPP_STYLE_GUIDE.md.  √Ä la racine du r√©f√©rentiel se trouve √©galement un guide s√©par√© pour notre √©quipe: catboost_command_style_guide_extension.md. <br><br>  Nous essayons de formater le code Python en utilisant PEP8.  Cela ne fonctionne pas toujours, car pour le code Cython, le linter ne fonctionne pas pour nous, et parfois quelque chose se passe avec PEP8. <br><br><img src="https://habrastorage.org/webt/dp/cl/kg/dpclkg4wxn_ilcriilpquvfpihk.jpeg"><br><br>  Quelles sont les caract√©ristiques de notre montage?  L'assemblage Arcadia visait √† l'origine √† collecter les applications les plus √©tanches, c'est-√†-dire qu'il y aurait un minimum de d√©pendances externes en raison de la liaison statique.  Cela vous permet d'utiliser le m√™me binaire sur diff√©rentes versions de Linux sans recompiler, ce qui est assez pratique.  Les objectifs de l'assemblage sont d√©crits dans les fichiers ya.make.  Un exemple de ya.make peut √™tre vu sur la diapositive suivante. <br><br><img src="https://habrastorage.org/webt/ua/zz/eh/uazzehw8w6k-2lo2f49jyk_tv9e.jpeg"><br><br>  Si vous souhaitez soudainement ajouter une sorte de biblioth√®que, un programme ou autre chose, vous pouvez, premi√®rement, simplement regarder dans les fichiers ya.make voisins, et deuxi√®mement, utiliser cet exemple.  Ici, nous avons r√©pertori√© les √©l√©ments les plus importants de ya.make.  Au tout d√©but du fichier, nous disons que nous voulons d√©clarer une biblioth√®que, puis nous listons les unit√©s de compilation que nous voulons mettre dans cette biblioth√®que.  Il peut s'agir √† la fois de fichiers cpp et, par exemple, de fichiers pyx pour lesquels Cython d√©marre automatiquement, puis du compilateur.  Les d√©pendances de biblioth√®que sont r√©pertori√©es via la macro PEERDIR.  Il √©crit simplement les chemins d'acc√®s au dossier avec la biblioth√®que ou avec un autre artefact √† l'int√©rieur, par rapport √† la racine du r√©f√©rentiel. <br><br>  Il y a une chose utile, GENERATE_ENUM_SERIALIZATION, n√©cessaire pour g√©n√©rer des m√©thodes ToString, FromString pour les classes d'√©num√©ration et les √©num√©rations d√©crites dans un fichier d'en-t√™te que vous transmettez √† cette macro. <br><br><img src="https://habrastorage.org/webt/gj/w3/rq/gjw3rq4uayzgspxh4sj95pcgime.jpeg"><br><br>  Maintenant sur la chose la plus importante - comment compiler et ex√©cuter une sorte de test.  √Ä la racine du r√©f√©rentiel se trouve le script ya, qui t√©l√©charge les kits et outils n√©cessaires, et il a la commande ya make - la sous-commande make - qui vous permet de cr√©er une version -r avec le commutateur -r et une version de d√©bogage avec la cl√© -d.  Les artefacts qui s'y trouvent sont transmis et s√©par√©s par un espace. <br><br>  Pour construire Python, j'ai imm√©diatement signal√© ici des drapeaux qui pourraient √™tre utiles.  Nous parlons de construire avec le syst√®me Python, dans ce cas avec Python 3. Si vous avez soudainement un CUDA Toolkit install√© sur votre ordinateur portable ou votre machine de d√©veloppement, alors pour un assemblage plus rapide, nous vous recommandons de sp√©cifier ‚Äìd have_cuda no flag.  CUDA s'appuie depuis un certain temps, en particulier sur les syst√®mes √† 4 c≈ìurs. <br><br><img src="https://habrastorage.org/webt/eg/sn/4k/egsn4kcvq8bepyogckxf0p1vylw.jpeg"><br><br>  Ya ide devrait d√©j√† fonctionner.  Il s'agit d'un outil qui va g√©n√©rer une solution clion ou qt pour vous.  Et pour ceux qui sont venus avec Windows, nous avons une solution Microsoft Visual Studio, qui se trouve dans le dossier msvs. <br><br>  Auditeur: <br>  - Avez-vous tous les tests via le wrapper Python? <br><br>  Stas: <br>  - Non, nous avons s√©par√©ment des tests qui se trouvent dans le dossier pytest.  Ce sont des tests de notre interface CLI, c'est-√†-dire de notre application.  Certes, ils fonctionnent via pytest, c'est-√†-dire que ce sont des fonctions Python dans lesquelles nous faisons un appel de v√©rification de sous-processus et v√©rifions que le programme ne plante pas et fonctionne correctement avec certains param√®tres. <br><br>  Auditeur: <br>  - Et les tests unitaires en C ++? <br><br>  Stas: <br>  - Nous avons √©galement des tests unitaires en C ++.  Ils se trouvent g√©n√©ralement dans le dossier lib des sous-dossiers ut.  Et ils sont √©crits comme √ßa - test unitaire ou test unitaire pour.  Il y a des exemples.  Il existe des macros sp√©ciales pour d√©clarer une classe de test unitaire et des registres s√©par√©s pour la fonction de test unitaire. <br><br>  Auditeur: <br>  - Pour v√©rifier que rien ne s'est cass√©, vaut-il mieux lancer ceux-ci et ceux-l√†? <br><br>  Stas: <br>  - Oui.  La seule chose est que nos tests open source ne sont verts que sous Linux.  Par cons√©quent, si vous compilez, par exemple, sous Mac, si cinq tests √©chouent, il n'y a rien √† craindre.  En raison de l'impl√©mentation diff√©rente de l'exposant sur diff√©rentes plateformes ou de quelques autres diff√©rences mineures, les r√©sultats peuvent √™tre tr√®s diff√©rents. <br><br><img src="https://habrastorage.org/webt/kr/bs/n0/krbsn0v7mas3stqnhzg19l_uwrq.jpeg"><br><br>  Pour un exemple, nous prendrons une t√¢che.  Je voudrais montrer un exemple.  Nous avons un fichier avec des t√¢ches - open_problems.md.  R√©solvons le probl√®me ‚Ññ4 de open_problems.md.  Il est formul√© comme suit: si l'utilisateur d√©finit le taux d'apprentissage √† z√©ro, alors nous devons tomber de TCatBoostException.  Vous devez ajouter la validation des options. <br><br><img src="https://habrastorage.org/webt/ut/uu/hq/utuuhqx7huwgb0cuqoolyy253vm.jpeg"><br><br>  Tout d'abord, nous devons cr√©er une branche, cloner notre fork, cloner l'origine, l'origine pop, ex√©cuter l'origine dans notre fork, puis cr√©er une branche et commencer √† y travailler. <br><br>  Comment fonctionne l'analyse des options?  Comme je l'ai dit, nous avons un important dossier catboost / libs / options o√π l'analyse de toutes les options est stock√©e. <br><br><img src="https://habrastorage.org/webt/e-/n4/bi/e-n4bi3t-z6l5fedfrlaexyeiza.jpeg"><br><br>  Nous avons toutes les options stock√©es dans le wrapper TOption, ce qui nous permet de comprendre si l'option a √©t√© remplac√©e par l'utilisateur.  Si ce n'est pas le cas, il conserve une valeur par d√©faut en soi.  En g√©n√©ral, CatBoost analyse toutes les options sous la forme d'un grand dictionnaire JSON, qui pendant l'analyse se transforme en dictionnaires et structures imbriqu√©s. <br><br><img src="https://habrastorage.org/webt/bm/zo/ch/bmzochyhm--wr1cwi9jg5snn3aq.jpeg"><br><br>  Nous avons en quelque sorte d√©couvert - par exemple, en recherchant avec un grep ou en lisant le code - que nous avons le taux d'apprentissage dans TBoostingOptions.  Essayons d'√©crire du code qui ajoute simplement CB_ENSURE, que notre taux d'apprentissage est sup√©rieur √† std :: numeric_limits :: epsilon, que l'utilisateur a entr√© quelque chose de plus ou moins raisonnable. <br><br><img src="https://habrastorage.org/webt/1m/u1/ay/1mu1ay3e5usvwwp51l1ctaxjtqy.jpeg"><br><br>  Ici, nous venons d'utiliser la macro CB_ENSURE, √©crit du code et maintenant nous voulons ajouter des tests. <br><br><img src="https://habrastorage.org/webt/ut/sb/gq/utsbgqg6miybtxhekflu0w6frie.jpeg"><br><br>  Dans ce cas, nous ajoutons un test sur l'interface de ligne de commande.  Dans le dossier pytest, nous avons le script test.py, o√π il y a d√©j√† pas mal d'exemples de tests et vous pouvez simplement en choisir un qui ressemble √† votre t√¢che, le copier et changer les param√®tres pour qu'il commence √† tomber ou √† ne pas tomber, selon les param√®tres que vous avez pass√©s.  Dans ce cas, nous prenons et cr√©ons simplement un pool simple de deux lignes.  (Nous appelons les pools d'ensembles de donn√©es dans Yandex. C'est notre particularit√©.) Et puis nous v√©rifions que notre binaire chute vraiment si nous passons le taux d'apprentissage 0.0. <br><br><img src="https://habrastorage.org/webt/xb/uk/jn/xbukjnn55irccxybobjki-b8iyw.jpeg"><br><br>  Nous ajoutons √©galement un test √† python-package, qui se trouve dans atBoost / python-package / ut / medium.  Nous avons √©galement de tr√®s gros tests qui sont li√©s aux tests de construction de packages de roues python. <br><br><img src="https://habrastorage.org/webt/ki/jh/1p/kijh1pd1b8rdeyr2scg82dbjtis.jpeg"><br><br>  De plus, nous avons des cl√©s pour vous faire - -t et -A.  -t ex√©cute les tests, -A force tous les tests √† s'ex√©cuter, qu'ils aient des balises grandes ou moyennes. <br><br>  Ici, pour la beaut√©, j'ai √©galement utilis√© un filtre nomm√© test.  Il est d√©fini √† l'aide de l'option -F et du nom de test sp√©cifi√© plus tard, qui peuvent √™tre des √©toiles de caract√®re sauvage.  Dans ce cas, j'ai utilis√© test.py::test_zero_learning_rate*, car, en regardant nos tests de paquetages python, vous verrez: presque toutes les fonctions prennent en charge un type de t√¢che.  C'est ainsi que, selon le code, nos tests de package python sont identiques pour l'apprentissage du CPU et du GPU et peuvent √™tre utilis√©s pour les tests de formateur de GPU et de CPU. <br><br><img src="https://habrastorage.org/webt/hz/qj/yf/hzqjyf9cp0mlftldhq74zot4nya.jpeg"><br><br><img src="https://habrastorage.org/webt/d_/qx/g2/d_qxg2fyla89bki38tdx5o3gc68.jpeg"><br><br>  Validez ensuite nos modifications et transf√©rez-les dans notre r√©f√©rentiel fork√©.  Nous publions la demande de pool.  Il a d√©j√† rejoint, tout va bien. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458790/">https://habr.com/ru/post/fr458790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458778/index.html">Satellite 6.5 Reporting Engine: quoi et pourquoi</a></li>
<li><a href="../fr458782/index.html">Adaptation de programmes pour ZX Spectrum √† TR-DOS par des moyens modernes. 3e partie</a></li>
<li><a href="../fr458784/index.html">Diffuser des projets et des biblioth√®ques d'Altium Designer vers PADS Professional</a></li>
<li><a href="../fr458786/index.html">Les gardiens de jeux vid√©o gardent la culture du jeu √©tape par √©tape</a></li>
<li><a href="../fr458788/index.html">Mod√®les personnalis√©s dans GTM: un exemple</a></li>
<li><a href="../fr458792/index.html">Employ√©s ¬´br√ªl√©s¬ª: y a-t-il une issue?</a></li>
<li><a href="../fr458794/index.html">R√©union des analystes d'affaires √† Redmadrobot le 18 juillet</a></li>
<li><a href="../fr458796/index.html">Comment pr√©parer votre site √† de lourdes charges de travail: 5 conseils pratiques et outils utiles</a></li>
<li><a href="../fr458798/index.html">Nutrient Bot ou comment je veux prendre du pain avec des entra√Æneurs de fitness</a></li>
<li><a href="../fr458800/index.html">Apprentissage profond. Apprentissage f√©d√©r√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>