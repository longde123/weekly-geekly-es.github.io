<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õµÔ∏è üí™üèΩ üìø Kafka √† Wargaming: Blitz üë≤üèº ü§Æ üç£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pourquoi Kafka? Quelles sont vos impressions globales? Quelle est la composition des clusters? Under the cut - une douzaine de courtes questions pour ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kafka √† Wargaming: Blitz</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/425703/"> Pourquoi Kafka?  Quelles sont vos impressions globales?  Quelle est la composition des clusters?  Under the cut - une douzaine de courtes questions pour Levon Avakyan, qui est responsable de la fiabilit√©, de l'architecture des applications, de l'infrastructure et de la production chez Wargaming. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/97a/0a5/8d7/97a0a58d7aefa424ce5c54754450e195.jpg"><br><a name="habracut"></a><br>  <b>- Comment avez-vous choisi Kafka?</b>  <b>Qu'est-ce qui √©tait utilis√© auparavant?</b>  <b>Quelles alternatives ont √©t√© envisag√©es?</b> <br><br>  Pas une question tr√®s correcte en ce qui concerne le d√©veloppement du r√©servoir.  Apache Kafka √©tait d√©j√† utilis√© dans l'entreprise pour les besoins de notre entrep√¥t de donn√©es, et initialement il y avait une t√¢che d'int√©gration, et c'est seulement √† ce moment-l√† que nous avons vu que Kafka pouvait √™tre utilis√© pour diff√©rentes t√¢ches. <br><br>  <b>- Combien d'√©v√©nements sont g√©n√©r√©s par votre cluster de jeux?</b> <br><br>  Un cluster de r√©servoirs est un cluster de clusters, le syst√®me est distribu√© et g√©n√®re des √©v√©nements dans diff√©rents Kafka.  Tous les clusters g√©n√®rent en moyenne 12 000 messages, aux pointes environ 30 000 messages par seconde. <br><br>  <b>- Et combien de clusters avez-vous et quelle est leur composition?</b> <br><br>  Le plus grand cluster central se compose de cinq n≈ìuds de fer.  Les clusters plus petits qui ne servent que des p√©riph√©riques de r√©servoir sont environ trois n≈ìuds chacun plus des machines virtuelles.  Nous avons quatre clusters locaux pour la r√©gion de la CEI. <br><br>  <b>- Combien de producteurs et de consommateurs √™tes-vous?</b>  <b>Quels sont les taux de lecture / √©criture?</b> <br><br>  Bonne question.  Pour la p√©riph√©rie locale de Kafka, le producteur est un - un groupe de r√©servoirs et il y a des dizaines de consommateurs.  Par taux: jusqu'√† 75 000 messages par seconde sont √©crits sur le cluster central, en moyenne 12 000, sur les locaux jusqu'√† 7 000 et en moyenne 3 000. <br><br>  <b>- Combien de grands √©v√©nements √©crivez-vous √† Kafka?</b>  <b>Y a-t-il des d√©lais de livraison?</b> <br><br>  Limite de 1 Mo - personne d'autre n'a demand√©.  Il existe des restrictions sur le d√©lai de livraison pour certains consommateurs, pour certains non.  Certains lisent une fois par semaine. <br><br>  <b>- Avez-vous rencontr√© des fonctionnalit√©s et des bugs int√©ressants lors du partage ou de la r√©plication?</b> <br><br>  Face √† la perte de donn√©es lors de la r√©√©lection en raison des param√®tres du sujet.  Une r√©√©lection sale a √©t√© autoris√©e et le mauvais ISR a √©t√© choisi. <br><br>  <b>- Et est-il arriv√© de reposer contre un disque ou un r√©seau?</b> <br><br>  Ils ne reposaient pas sur le r√©seau, nous avons des interfaces r√©seau de 10 Go.  Ils ne se sont pas appuy√©s non plus sur le disque.  Reposait sur les descripteurs de fichiers finis.  La stabilit√© est venue apr√®s une mise √† niveau de java-1.7.0-openjdk-1.7.0.55-2.4.7.1.el6_5.x86_64 vers jdk1.8.0_66-1.8.0_66-fcs.x86_64. <br><br>  <b>- Quels frais g√©n√©raux la JVM apporte-t-elle avec Kafka?</b>  <b>Une configuration sp√©ciale de GC est-elle requise?</b>  <b>Combien de m√©moire une instance consomme-t-elle dans votre cas?</b> <br><br>  12 Go de m√©moire sont allou√©s, tout le reste est standard. <br><br>  <b>- Avez-vous d√ª utiliser des fonctionnalit√©s sp√©ciales de Kafka?</b>  <b>Compaction du journal?</b> <br>  Log Compaction utilis√© pour certains sujets, mais pas pour le projet World of Tanks.  Inclus sur des sujets sp√©cifiques, mais le r√©sultat n'est pas clair, personne n'a donn√© de feedback.  Offsets.retention.minutes a √©galement √©t√© augment√© jusqu'√† sept jours, de sorte que les concierges qui lisent une fois par semaine continuent de lire l√† o√π ils se sont arr√™t√©s. <br><br>  <b>- Quelles biblioth√®ques Python ont √©t√© utilis√©es pour travailler avec Kafka?</b>  <b>Qu'avez-vous aim√©?</b> <br><br>  Un seul de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mes rapports</a> sur Moscou Python Conf ++ portera sur l'exp√©rience de l'utilisation de diverses biblioth√®ques Python pour Kafka dans WoT.  Notre actif est Kafka-python, confluent-kafka-python, aiokafka.  Chacune de ces biblioth√®ques a ses avantages et ses inconv√©nients. <br><br>  <b>- Que diriez-vous des avantages et des inconv√©nients du stockage bas√© sur fichiers par rapport √† la m√©moire en m√©moire?</b>  <b>Pour quels types de t√¢ches pourriez-vous recommander l'un ou l'autre?</b> <br><br>  Ici, le principe est simple.  Sur le syst√®me de fichiers, il est plus fiable, mais plus lent.  La m√©moire est plus rapide, mais la fiabilit√© est plus faible.  De plus, une limitation de volume importante: vous pouvez stocker des t√©raoctets dans le syst√®me de fichiers, mais nous utilisons toujours des gigaoctets en m√©moire.  De l√†, vous pouvez fantasmer beaucoup, √† partir d'une impl√©mentation sp√©cifique. <br><br>  Sur la base de ce qui pr√©c√®de: si vous en avez besoin rapidement, le volume est petit et la s√©curit√© n'est pas importante, alors en m√©moire, sinon nous regardons les fichiers. <br><br>  <b>- Des impressions g√©n√©rales de Kafka?</b>  <b>Si vous deviez faire la m√™me t√¢che maintenant, quitteriez-vous Kafka ou envisagez-vous d'autres solutions?</b> <br><br>  Kafka est un outil simple et efficace pour fournir un acc√®s de l'ext√©rieur √† de grandes quantit√©s de donn√©es, qui peuvent ensuite √™tre trait√©es lentement √† des fins diff√©rentes, par diff√©rentes √©quipes √† diff√©rents endroits.  Dans WoT, nous avons de nombreux outils diff√©rents pour r√©soudre nos probl√®mes, donc l√† o√π il convient de choisir Kafka, nous choisissons Kafka, sinon, nous regardons d'autres outils. <br><br>  Encore une fois, si vous √™tes int√©ress√© par les d√©tails de notre exp√©rience avec Kafka, venez √† mon discours √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moscow Python Conf ++</a> .  J'esp√®re que beaucoup le trouveront int√©ressant et utile. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425703/">https://habr.com/ru/post/fr425703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425691/index.html">Conf√©rence DEFCON 20. Comment baiser les m√©chants (et la mafia) en utilisant le botnet JavaScript. Partie 1</a></li>
<li><a href="../fr425693/index.html">Recherche VPS 5 ans! 70 h√©bergeurs offrent des r√©ductions de 10 √† 80%</a></li>
<li><a href="../fr425695/index.html">CI et CD Battle Talks, Orchestration et OpenStack Secrets</a></li>
<li><a href="../fr425697/index.html">KotlinConf 2018 - keynote et premi√®res vid√©os</a></li>
<li><a href="../fr425701/index.html">IoT Security Week 38: vuln√©rabilit√©s des routeurs MikroTik, D-Link et TP-Link</a></li>
<li><a href="../fr425705/index.html">R√©plication de Percona Server pour MySQL vers PostgreSQL √† l'aide de l'outil pg_chameleon</a></li>
<li><a href="../fr425707/index.html">Syst√®me de notification de la console au t√©l√©gramme</a></li>
<li><a href="../fr425709/index.html">Nous avons fait un m√©mo pour les Chinois qui sont venus chez vous</a></li>
<li><a href="../fr425711/index.html">Perte de ligne non adapt√©e</a></li>
<li><a href="../fr425713/index.html">Int√©gration du moteur HTML dans une application Windows native - choix et architecture</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>