<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö¥üèΩ üòí ü§µüèø C for Metal: metal precioso para la inform√°tica en tarjetas gr√°ficas Intel üß¢ üï∫üèø üë®üèª‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øCu√°ntos n√∫cleos de procesador Intel tiene en su computadora? Si utiliza un sistema basado en Intel, en la gran mayor√≠a de los casos, deber√° agregar u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C for Metal: metal precioso para la inform√°tica en tarjetas gr√°ficas Intel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/466521/">  ¬øCu√°ntos n√∫cleos de procesador Intel tiene en su computadora?  Si utiliza un sistema basado en Intel, en la gran mayor√≠a de los casos, deber√° agregar uno a su respuesta.  La composici√≥n de casi todos los procesadores Intel: desde Atom hasta Xeon E3, por supuesto, sin perderse el Core, durante muchos a√±os ahora incluye el n√∫cleo de gr√°ficos integrados Intel Graphics, que es esencialmente un procesador completo y, en consecuencia, capaz de mostrar im√°genes en la pantalla y acelerar el video, pero tambi√©n realiza c√°lculos de prop√≥sito general "ordinarios".  ¬øC√≥mo se puede usar esto de manera efectiva?  Mira debajo del corte. <br><br><img src="https://habrastorage.org/webt/od/zy/qg/odzyqgwdoyvgvhlbsvulnty_doo.jpeg"><br><a name="habracut"></a><br>  Primero, explicaremos brevemente por qu√© vale la pena confiar en una GPU Intel.  Por supuesto, el rendimiento de la CPU en el sistema casi siempre excede significativamente la GPU, por eso tambi√©n es el procesador central. <br><br>  Pero es interesante observar que el rendimiento de las GPU integradas de Intel en la √∫ltima d√©cada ha crecido en t√©rminos porcentuales mucho m√°s que el de la CPU, y esta tendencia ciertamente continuar√° con la llegada de nuevas tarjetas gr√°ficas discretas de Intel.  Adem√°s, la GPU, en virtud de su arquitectura (muchos dispositivos de ejecuci√≥n de vectores), es mucho m√°s adecuada para realizar un cierto tipo de tarea: procesamiento de im√°genes, es decir, para llevar a cabo cualquier tipo de operaciones en matrices de datos.  La GPU hace esto con una paralelizaci√≥n interna completa, gasta menos energ√≠a que la CPU y, en algunos casos, incluso la supera en velocidad absoluta.  Finalmente, la GPU y la CPU pueden trabajar en paralelo, cada una en sus propias tareas, proporcionando el m√°ximo rendimiento y / o el m√≠nimo consumo de energ√≠a de todo el sistema. <br><br>  - Ok, Intel.  Decidimos usar la GPU Intel para c√°lculos de prop√≥sito general, ¬øc√≥mo hacerlo? <br>  - La forma m√°s sencilla que no requiere ning√∫n conocimiento especial en gr√°ficos (sombreadores Direct3D y OpenGL) es OpenCL. <br><br>  Los n√∫cleos OpenCL son independientes de la plataforma y se ejecutar√°n autom√°ticamente en todos los dispositivos inform√°ticos disponibles en el sistema: CPU, GPU, FPGA, etc.  Pero la tarifa por tal versatilidad est√° lejos del m√°ximo rendimiento posible en cada tipo de dispositivo, y especialmente en la GPU Intel integrada.  Aqu√≠ podemos dar un ejemplo: al ejecutar c√≥digo en cualquier GPU Intel que transponga una matriz de bytes de 16x16, ¬°la ventaja de rendimiento de la programaci√≥n directa de la GPU Intel ser√° 8 veces mayor que con la versi√≥n OpenCL! <br><br>  Adem√°s, algunas de las funcionalidades requeridas para implementar algoritmos comunes (por ejemplo, "filtros anchos" que usan datos de un gran grupo de p√≠xeles en una sola transformaci√≥n), OpenCL simplemente no es compatible. <br><br>  Por lo tanto, si necesita una velocidad m√°xima en la GPU y / o algo m√°s complicado que trabajar de forma independiente con cada elemento de la matriz y sus vecinos m√°s cercanos, Intel C for Metal (ICM), una herramienta para desarrollar aplicaciones que se ejecutan en Intel Graphics, lo ayudar√° . <br><br><h2>  <font color="#0071c5">ICM: ¬°bienvenido a la fragua!</font> </h2><br>  Desde el punto de vista del rendimiento y la funcionalidad, ICM puede considerarse "ensamblador de tarjetas gr√°ficas Intel" y, en t√©rminos de circuitos y usabilidad, "an√°logo de OpenCL para tarjetas gr√°ficas Intel". <br><br>  Durante muchos a√±os, Intel ha utilizado ICM internamente en el desarrollo de productos de procesamiento de medios en la GPU Intel.  Pero en 2018, ICM se lanz√≥ al p√∫blico, ¬°e incluso con c√≥digo abierto! <br><br>  Intel C for Metal obtuvo su nombre actual hace unos meses, antes de eso se llamaba Intel C for Media (el mismo acr√≥nimo ICM o solo CM o incluso Cm), e incluso antes, el Marco de desarrollo de medios (MDF).  Entonces, si en alg√∫n lugar del nombre del componente, en la documentaci√≥n o en los comentarios de c√≥digo abierto, los nombres antiguos se encuentran, no se alarme, este es un valor hist√≥rico. <br><br>  Entonces, el c√≥digo de la aplicaci√≥n ICM, al igual que en OpenCL, contiene dos partes: la "administrativa", ejecutada en el procesador, y el n√∫cleo, ejecutado en la GPU.  No es sorprendente que la primera parte se llame host, y la segunda es el kernel. <br><br>  Los n√∫cleos son una funci√≥n de procesar un bloque de p√≠xeles dado (o solo datos), se escriben en el lenguaje Intel C para Metal y se compilan en el conjunto de instrucciones Intel GPU (ISA) utilizando el compilador ICM. <br><br>  El host es una especie de "administrador del equipo de kernel", administra el proceso de transferencia de datos entre la CPU y la GPU y realiza otro "trabajo administrativo" a trav√©s de la biblioteca de tiempo de ejecuci√≥n ICM Runtime y el controlador de medios Intel GPU. <br>  Un flujo de trabajo detallado de ICM se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ol/a1/q4/ola1q4zotlteitoqxvmttsuulu0.png"></div><br><ul><li>  El c√≥digo de host ICM es compilado por cualquier compilador x86 C / C ++ junto con toda la aplicaci√≥n; </li><li>  El compilador ICM compila el c√≥digo del n√∫cleo ICM en un archivo binario con alg√∫n conjunto de instrucciones comunes (ISA com√∫n); </li><li>  En tiempo de ejecuci√≥n, este conjunto general de instrucciones JIT se traduce en una GPU Intel espec√≠fica; </li><li>  El host ICM invoca la biblioteca de tiempo de ejecuci√≥n ICM para comunicarse con la GPU y el sistema operativo. </li></ul><br>  Un par de puntos m√°s importantes y √∫tiles: <br><br><ul><li>  Las superficies utilizadas en ICM para representar / almacenar datos se pueden compartir con DirectX 11 y 9 (DXVA en Linux). </li><li>  La GPU puede tomar y escribir datos tanto de la memoria de video como de la memoria del sistema compartida con la CPU.  ICM incluye funciones especiales para ambos casos de transferencia de datos en ambas direcciones.  Al mismo tiempo, la memoria del sistema se comparte exactamente y no se requiere una copia real en ella; para esto, la llamada copia cero se proporciona en ICM. </li></ul><br><h2>  <font color="#0071c5">ICM - en el respiradero del volc√°n!</font> </h2><br>  Ya del propio nombre "C for Iron", se deduce que el dispositivo de lenguaje corresponde al dispositivo gr√°fico interno de Intel.  Es decir, tiene en cuenta el hecho de que el c√≥digo se ejecutar√° en varias decenas de unidades de ejecuci√≥n de la tarjeta gr√°fica, cada una de las cuales es un procesador completamente vectorial capaz de ejecutar varios subprocesos simult√°neamente. <br><br>  El lenguaje ICM en s√≠ mismo es C ++ con algunas limitaciones y extensiones.  En comparaci√≥n con C ++, ICM carece de ... punteros, asignaci√≥n de memoria y variables est√°ticas.  Bajo la prohibici√≥n tambi√©n funciones recursivas.  Pero hay una programaci√≥n expl√≠cita del modelo vectorial (SIMD): tipos de datos vectoriales: vector, matriz y superficie;  operaciones de vector en estos tipos de datos, condiciones de vector si / si no, realizadas independientemente para cada elemento del vector;  as√≠ como funciones integradas para acceder a la funcionalidad fija del hardware de la GPU Intel. <br><br>  El trabajo con vectores, matrices y superficies en tareas reales se ve facilitado por objetos de "subconjuntos": de los objetos b√°sicos correspondientes puede elegir solo los bloques de "referencia" que le interesen o, como caso especial, elementos individuales por m√°scara. <br><br>  Por ejemplo, veamos el c√≥digo ICM que implementa un filtro lineal, reemplazando un valor <br>  Colores RGB de cada p√≠xel por su valor promedio y 8 vecinos en la imagen: <br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/webt/0q/xk/of/0qxkofxlflf0p_pxmtzgvcd7aze.png"></td><td>  <b>I (x, y) = [I (x-1, y-1) + I (x-1, y) + I (x-1, y + 1) + I (x, y-1) +</b> <b><br></b>  <b>+ I (x, y) + I (x, y + 1) + I (x + 1, y-1) + I (x + 1, y) + I (x + 1, y + 1)] / 9</b> <br></td></tr></tbody></table></div><br>  Si los colores (datos) en la matriz est√°n ubicados como <b>R8G8B8</b> , el c√°lculo con la divisi√≥n de la imagen de entrada en bloques de 6x8 p√≠xeles (elementos de datos de 6x24 bytes) ser√° el siguiente: <br><br><pre><code class="cpp hljs">_<span class="hljs-function"><span class="hljs-function">GENX_MAIN_ </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SurfaceIndex inBuf, SurfaceIndex outBuf, uint h_pos, uint v_pos)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    8x32 matrix&lt;uchar, 8, 32&gt; in; //   6x24 matrix&lt;uchar, 6, 24&gt; out; matrix&lt;float, 6, 24&gt; m; //    read(inBuf h_pos*24, v_pos*6, in); //    -  m = in.select&lt;6,1,24,1&gt;(1,3); m += in.select&lt;6,1,24,1&gt;(0,0); m += in.select&lt;6,1,24,1&gt;(0,3); m += in.select&lt;6,1,24,1&gt;(0,6); m += in.select&lt;6,1,24,1&gt;(1,0); m += in.select&lt;6,1,24,1&gt;(1,6); m += in.select&lt;6,1,24,1&gt;(2,0); m += in.select&lt;6,1,24,1&gt;(2,3); m += in.select&lt;6,1,24,1&gt;(2,6); //  -   9   * 0.111f; out = m * 0.111f; //   write(outBuf, h_pos*24, v_pos*6, out); }</span></span></code> </pre> <br><ul><li>  El tama√±o de las matrices se establece en la forma &lt;tipo de datos, alto, ancho&gt;; </li><li>  el <i>operador select &lt;v_size, v_stride, h_size, h_stride&gt; (i, j)</i> devuelve la submatriz que comienza con el elemento <i>(i, j)</i> , <i>v_size</i> muestra el n√∫mero de filas seleccionadas, <i>v_stride</i> - la distancia entre las filas seleccionadas <i>h_size</i> - el n√∫mero de columnas seleccionadas, <i>h_stride</i> - la distancia entre ellas . </li></ul><br>  Tenga en cuenta que el tama√±o de la matriz de entrada de 8x32 se elige porque aunque el bloque de 8x30 es algor√≠tmicamente suficiente para calcular los valores de todos los p√≠xeles en el bloque de 6x24, el bloque de datos se lee en ICM, no en bytes, sino en elementos dword de 32 bits. <br><br>  El c√≥digo anterior es, de hecho, un n√∫cleo ICM completo.  Como se mencion√≥, ser√° compilado por el compilador ICM en dos etapas (precompilaci√≥n y posterior traducci√≥n JIT).  El compilador ICM est√° construido sobre la base de LLVM y, si lo desea, puede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudiarlo en las fuentes y crearlo usted mismo</a> . <br><br>  Pero, ¬øqu√© hace el host ICM?  Invoca las funciones de la biblioteca de tiempo de ejecuci√≥n ICM Runtime que: <br><br><ul><li>  Cree, inicialice y elimine despu√©s de usar el dispositivo GPU (CmDevice), as√≠ como las superficies que contienen datos de usuario utilizados en los n√∫cleos (CmSurface); </li><li>  Trabaje con n√∫cleos: desc√°rguelos de archivos <i>.isa</i> precompilados, prepare sus argumentos e indique la parte de los datos con los que trabajar√° cada n√∫cleo; </li><li>  Crear y administrar la cola de ejecuci√≥n del kernel; </li><li>  Controlan el funcionamiento de los hilos que ejecutan cada n√∫cleo en la GPU; </li><li>  Gestionar eventos (CmEvent): objetos de sincronizaci√≥n de la GPU y la CPU; </li><li>  Transfiera datos entre la GPU y la CPU, o m√°s bien, entre el sistema y la memoria de video; </li><li>  Informar errores, medir el tiempo de funcionamiento de los n√∫cleos. </li></ul><br>  El c√≥digo de host m√°s simple se ve as√≠: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  CmDevice cm_result_check(::CreateCmDevice(p_cm_device, version)); //  hello_world_genx.isa std::string isa_code = isa::loadFile("hello_world_genx.isa"); //    isa  CmProgram CmProgram *p_program = nullptr; cm_result_check(p_cm_device-&gt;LoadProgram(const_cast&lt;char* &gt;(isa_code.data()),isa_code.size(), p_program)); //  hello_world . CmKernel *p_kernel = nullptr; cm_result_check(p_cm_device-&gt;CreateKernel(p_program, "hello_world", p_kernel)); //       CmKernel CmThreadSpace *p_thread_space = nullptr; cm_result_check(p_cm_device-&gt;CreateThreadSpace(thread_width, thread_height, p_thread_space)); //   . cm_result_check(p_kernel-&gt;SetKernelArg(0, sizeof(thread_width), &amp;thread_width)); //  CmTask ‚Äì      //         //     . CmTask *p_task = nullptr; cm_result_check(p_cm_device-&gt;CreateTask(p_task)); cm_result_check(p_task-&gt;AddKernel(p_kernel)); //   CmQueue *p_queue = nullptr; cm_result_check(p_cm_device-&gt;CreateQueue(p_queue)); //    GPU (    ). CmEvent *p_event = nullptr; cm_result_check(p_queue-&gt;Enqueue(p_task, p_event, p_thread_space)); //   . cm_result_check(p_event-&gt;WaitForTaskFinished());</span></span></code> </pre> <br>  Como puede ver, no hay nada complicado en crear y usar n√∫cleos y un host.  ¬°Todo es simple! <br><br>  La √∫nica dificultad para advertir para poder regresar al mundo real: actualmente en la versi√≥n p√∫blica de ICM, la √∫nica forma de depurar los n√∫cleos es imprimir mensajes.  C√≥mo usarlos correctamente se puede ver en el ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hello, World</a> . <br><br><h2>  <font color="#0071c5">ICM: ¬°no es metal pesado!</font> </h2><br>  Ahora veamos c√≥mo funciona en la pr√°ctica.  ICM Developer Kit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√° disponible para Windows y Linux</a> , y para ambos sistemas operativos contiene el Compilador ICM, documentaci√≥n y casos de uso de tutoriales.  Una descripci√≥n detallada de estos ejemplos de capacitaci√≥n se <a href="">descarga por separado</a> . <br><br>  Para Linux, el paquete tambi√©n incluye un controlador de medios en modo de usuario para VAAPI con una biblioteca de tiempo de ejecuci√≥n ICM Runtime integrada.  Para Windows, el controlador de gr√°ficos Intel habitual para Windows funcionar√° con ICM.  La biblioteca de tiempo de ejecuci√≥n ICM Runtime se incluye en el conjunto dll de este controlador.  El paquete ICM incluye solo el archivo de enlace .lib para √©l.  Si el controlador falta en su sistema por alg√∫n motivo, se descarga del sitio web de Intel y se garantiza el funcionamiento correcto de ICM en los controladores, a partir de la versi√≥n 15.60 - 2017). <br><br>  El c√≥digo fuente de los componentes se puede encontrar aqu√≠: <br><br><ul><li>  Intel Media Driver para VAAPI e Intel C para Media Runtime: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/intel/media-driver</a> </li><li>  Intel C para Media Compiler y ejemplos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/intel/cm-compiler</a> </li><li>  Compilador de gr√°ficos Intel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/intel/intel-graphics-compiler</a> </li></ul><br>  El contenido adicional de esta secci√≥n se aplica exclusivamente a Windows, pero los principios generales de trabajar con ICM tambi√©n son aplicables a Linux. <br><br>  Para el trabajo "regular" con el paquete ICM, necesitar√° Visual Studio a partir de 2015 y Cmake a partir de la versi√≥n 3.2.  Al mismo tiempo, la configuraci√≥n y los archivos de script de los ejemplos de capacitaci√≥n est√°n dise√±ados para VS 2015, para usar versiones m√°s recientes de los archivos VS, deber√° estudiar y editar las rutas a los componentes VS usted mismo. <br><br>  Entonces, conociendo ICM para Windows: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descargue el archivo</a> ; </li><li>  Desempacarlo; </li><li>  Comenzamos (preferiblemente en la l√≠nea de comando VS) el script de configuraci√≥n del entorno setupenv.bat con tres par√°metros: la generaci√≥n de GPU Intel (correspondiente al procesador en el que est√° integrada la GPU, puede dejarse por defecto: gen9), la plataforma de compilaci√≥n: x86 \ x64 y la versi√≥n DirectX para compartiendo con ICM: dx9 / dx11. </li></ul><br>  Despu√©s de eso, simplemente puede compilar todos los ejemplos de capacitaci√≥n: en la carpeta de ejemplos, el script <i>build_all.bat</i> lo har√° o generar√° proyectos para Microsoft Visual Studio; esto <i>crear√° el</i> script <i>create_vs.bat</i> con el nombre de un ejemplo espec√≠fico como par√°metro. <br><br>  Como puede ver, la aplicaci√≥n ICM ser√° un archivo .exe con la parte del host y un archivo .isa con la parte de GPU precompilada correspondiente. <br><br>  Se incluyen varios ejemplos en el paquete ICM, desde el m√°s simple Hello, World, que muestra los principios b√°sicos del funcionamiento de ICM, hasta el bastante complicado: la implementaci√≥n del algoritmo para encontrar el "flujo m√°ximo - corte m√≠nimo" del gr√°fico (problema de corte m√≠nimo y corte m√°ximo) utilizado en la segmentaci√≥n y costura de im√°genes . <br><br>  Todos los estudios de caso de ICM est√°n bien documentados en el c√≥digo y en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descripci√≥n separada</a> ya mencionada.  Se recomienda profundizar en ICM precisamente sobre √©l, estudiando y ejecutando ejemplos secuencialmente y luego modific√°ndolos para que se ajusten a sus necesidades. <br><br>  Para una comprensi√≥n general de todas las caracter√≠sticas de ICM existentes, se recomienda encarecidamente que estudie la ‚Äúespecificaci√≥n‚Äù: la descripci√≥n de ICM <i>cmlangspec.html</i> en la <i>carpeta</i> <i>\ documents \ compiler \ html \ cmlangspec</i> . <br><br>  En particular, describe la API de las funciones ICM implementadas en el hardware: acceso a los llamados muestreadores de textura (Sampler), un mecanismo para filtrar im√°genes de diferentes formatos, as√≠ como para evaluar el movimiento (Estimaci√≥n de movimiento) entre cuadros de video y algunas capacidades de an√°lisis de video. <br><br><h2>  <font color="#0071c5">ICM: ¬°ataca mientras hace calor!</font> </h2><br>  Al hablar sobre el rendimiento de las aplicaciones ICM, debe tenerse en cuenta que los estudios de casos incluyen la medici√≥n del tiempo de su trabajo, de modo que al ejecutarlos en el sistema de destino y compararlos con sus tareas, puede evaluar la conveniencia de utilizar ICM para ellos. <br><br>  Y las consideraciones generales sobre el rendimiento de ICM son bastante simples: <br><br><ul><li>  Al descargar c√°lculos en una GPU, recuerde la sobrecarga de transferir datos de CPU &lt;-&gt; GPU y sincronizar estos dispositivos.  Por lo tanto, un ejemplo como Hello, World no es un buen candidato para una implementaci√≥n de ICM.  Pero los algoritmos de visi√≥n por computadora, IA y cualquier procesamiento no trivial de matrices de datos, especialmente con un cambio en el orden de estos datos en el proceso o en la salida, son lo que ICM necesita. </li><li>  Adem√°s, al dise√±ar un c√≥digo ICM, es necesario tener en cuenta el dispositivo interno de la GPU, es decir, es aconsejable crear un n√∫mero suficiente (&gt; 1000) de subprocesos de GPU y cargarlos a todos con trabajo.  En este caso, es una buena idea dividir las im√°genes para procesarlas en peque√±os bloques.  Pero la forma espec√≠fica de particionar, as√≠ como la elecci√≥n de un algoritmo de procesamiento espec√≠fico para lograr el m√°ximo rendimiento, no es una tarea trivial.  Sin embargo, esto se aplica a cualquier forma de trabajar con cualquier GPU (y CPU). </li></ul><br>  ¬øTiene c√≥digo OpenCL, pero su rendimiento no le agrada?  ¬øO el c√≥digo CUDA, pero quieres trabajar en un n√∫mero mucho mayor de plataformas?  Entonces vale la pena echarle un vistazo a ICM. <br><br>  ICM es un producto vivo y en evoluci√≥n.  Puede participar en su uso y su desarrollo: los repositorios correspondientes en github est√°n esperando sus confirmaciones.  Toda la informaci√≥n necesaria para ambos procesos se encuentra en este art√≠culo y en los archivos l√©ame en github.  Y si falta algo, aparecer√° despu√©s de sus preguntas en los comentarios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466521/">https://habr.com/ru/post/466521/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466505/index.html">YIMP - Panel de control para Yii 2 en Bootstrap 4</a></li>
<li><a href="../466509/index.html">Una mirada al interior: el proceso del dispositivo para trabajar y la adaptaci√≥n en Google</a></li>
<li><a href="../466515/index.html">Entrevista ¬øQu√© deber√≠a esperar un ingeniero de trabajar en una startup europea? ¬øC√≥mo se hacen las entrevistas? ¬øEs dif√≠cil adaptarse?</a></li>
<li><a href="../466517/index.html">Entrenamiento de localizaci√≥n de la Universidad de Washington</a></li>
<li><a href="../466519/index.html">An√°lisis detallado de AWS Lambda</a></li>
<li><a href="../466525/index.html">¬øQu√© es un dise√±o de iPhone PSD y c√≥mo usarlo?</a></li>
<li><a href="../466527/index.html">Probar la funcionalidad del usuario del sitio web con los objetos de p√°gina de Capybara</a></li>
<li><a href="../466529/index.html">Tipos de compilaci√≥n en la JVM: Exposici√≥n de la sesi√≥n de magia negra</a></li>
<li><a href="../466533/index.html">Pastilda: resultados</a></li>
<li><a href="../466535/index.html">Repensar deepClone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>