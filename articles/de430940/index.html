<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🎤 👩‍👦‍👦 👨🏾‍✈️ SDK für Sie, SDK für mich, SDK für alle! Wie erstelle ich ein SDK und warum wird es benötigt? 🎶 🕴🏽 👩‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 


 Unser Unternehmen bietet einen Service zum Speichern und Verarbeiten von Daten von Industriegeräten (Pumpen, Bohrern und anderen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SDK für Sie, SDK für mich, SDK für alle! Wie erstelle ich ein SDK und warum wird es benötigt?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430940/"><p><img src="https://habrastorage.org/webt/pk/ur/nt/pkurntejpmw1zarvuwn67jvh61k.jpeg"></p><br><p>  Hallo allerseits! </p><br><p>  Unser Unternehmen bietet einen Service zum Speichern und Verarbeiten von Daten von Industriegeräten (Pumpen, Bohrern und anderen Industrieanlagen).  Wir speichern die Daten unserer Kunden und bieten Funktionen für deren Analyse: Erstellen von Berichten, Grafiken und vielem mehr. </p><br><p> Im Laufe der Arbeit haben wir festgestellt, dass sich die Integration jedes neuen Kunden stark verzögert und die Anzahl der verschiedenen Fehler ständig zunimmt.  Dann wurde klar, dass es Zeit war, sich damit zu befassen.  Wie eine Analyse der Situation ergab, entwickelte die IT-Abteilung jedes unserer Kunden eine eigene Lösung, um Daten lokal von Geräten zu sammeln und an unseren Service zu senden.  Dies erschwert die Tatsache, dass unter Berücksichtigung der Besonderheiten der Branche nicht immer Zugang zum Internet besteht und Daten lokal gespeichert und so schnell wie möglich gesendet werden müssen.  Und es gibt eine ausreichend große Anzahl solcher Nuancen, was zu einer Zunahme der Anzahl von Fehlern führt. </p><br><p>  Und dann wurde uns klar, dass die beste Lösung in dieser Situation darin besteht, ein SDK zu entwickeln und es dem Kunden zur Verfügung zu stellen.  Sofort begann ich nach Best Practices und Überlegungen zur Entwicklung des SDK zu suchen und war sehr überrascht - es gibt praktisch nichts in RuNet, aber es gibt nur sehr wenige Informationen im Basurmani-Internet und es ist verstreut.  Nun, die Aufgabe ist klar, durchdacht und umgesetzt. </p><br><p>  Es war jedoch der Mangel an Informationen zu diesem Thema, der den Wunsch weckte, die Community über die Gedanken, Entscheidungen und Schlussfolgerungen zur Entwicklung des SDK zu informieren.  Dieser Artikel beschreibt eine Lösung für .NET, aber es handelt sich um ein Konzept, das für viele interessant sein wird.  Details unter dem Schnitt! </p><a name="habracut"></a><br><h2 id="pora-opredelyatsya">  Es ist Zeit, entschlossen zu sein </h2><br><p>  Beginnen wir damit, zu definieren, was das SDK ist und warum es möglicherweise benötigt wird. </p><br><blockquote>  SDK (aus dem englischen Software Development Kit) ist eine Reihe von Entwicklungstools, mit denen Softwarespezialisten Anwendungen für ein bestimmtes Softwarepaket, eine grundlegende Entwicklungssoftware, eine Hardwareplattform, ein Computersystem, Spielekonsolen, Betriebssysteme und andere Plattformen erstellen können.  Das SDK nutzt jede Plattform und reduziert die Integrationszeit. <br>  ... <br>  Ein Softwareentwickler erhält normalerweise ein SDK vom Entwickler des Zielsystems. </blockquote><p>  Das ist logisch.  Mit einfachen Worten, das SDK ist ein Paket von Bibliotheken, sodass der Client einfach und schnell mit Ihrem System arbeiten kann (in diesem Artikel werden wir über unseren Service sprechen, aber alles, was im Artikel vorgestellt wird, gilt für andere Arten von SDKs) oder dieselben Aktionen ausführen kann. </p><br><p>  Wie jeder Ansatz hat auch der SDK-Pfad Vor- und Nachteile. </p><br><h3 id="preimuschestva">  Die Vorteile </h3><br><p>  <strong>Hochgeschwindigkeitsintegration eines neuen Clients</strong> - Ihre Kunden müssen weniger Code schreiben. </p><br><p>  <strong>Wiederverwendung von Code</strong> - Der gleiche Code wird an mehreren Stellen gleichzeitig verwendet.  Wir können sagen, dass dies eine Verdoppelung des vorherigen Absatzes ist, aber wir sprechen über die Tatsache, dass die Logik der Arbeit überall einsam ist, was impliziert </p><br><p>  <strong>Vorhersagbarkeit des Verhaltens</strong> - Die Verwendung derselben Bibliotheken bringt das Verhalten von Systemen auf einen bestimmten Standard, was die Suche und Beseitigung von Fehlern und Schwachstellen erheblich erleichtert. </p><br><p>  <strong>In der Qualität des Codes</strong> sparen viele Menschen gerne beim Testen (entschuldigen Sie das Budget, die Fristen und andere Gründe).  Es ist klar, dass es in der realen Welt eine sehr mühsame Aufgabe ist, alle Abschnitte des Projekts mit Tests zu testen.  Das qualitative Testen aller SDK-Module und deren anschließende Verwendung ist jedoch eine Möglichkeit, den Prozentsatz der Testabdeckung zu erhöhen, was zu einer Verringerung der Anzahl von Fehlern führt. </p><br><p>  <strong>Die Dokumentation</strong> ist das gleiche Szenario wie bei den Tests.  Die Dokumentation des gesamten Projekts ist recht problematisch.  Die Wiederverwendung von SDKs erhöht den Prozentsatz der Dokumentationsabdeckung, wodurch die Schwelle für den Eintritt neuer Mitarbeiter in das Projekt gesenkt wird und im Allgemeinen das Leben erleichtert wird. </p><br><p>  Alle Vorteile sind in der Tat die Konsequenzen des Wichtigsten: <strong>Wir schreiben den Code einmal in sehr hoher Qualität und verwenden ihn dann wieder</strong> . </p><br><h3 id="nedostatki">  Nachteile </h3><br><p>  <strong>Die hohen Qualitätsanforderungen des SDK-Codes</strong> sind das Ergebnis des Hauptvorteils.  Ein Fehler im SDK führt auf allen Systemen, die es verwenden, zu Fehlern. </p><br><p>  <strong>Festlegen von Einschränkungen</strong> - Das SDK besteht aus einer Reihe von Bibliotheken zum Implementieren von <strong>Standardskripten</strong> .  Manchmal glauben SDK-Entwickler, dass der Client neben der Implementierung eines der bereitgestellten Szenarien nichts benötigt und es für den Client einfacher ist, alles von Grund auf selbst zu tun, als ein Podest aus Krücken für das SDK zu erstellen. </p><br><p>  <strong>Abhängigkeitshölle und Aktualisierungen</strong> - Wenn Sie die Funktionalität erweitern (z. B. eine Lösung für einen bestimmten Client anpassen), wird eine neue Version der Bibliothek veröffentlicht.  Es gibt jedoch Abhängigkeiten, unterschiedliche Sätze von Bibliotheksversionen für unterschiedliche Clients, und Sie müssen die Abwärtskompatibilität oder die strikte Versionierung sorgfältig überwachen. </p><br><h3 id="kogda-sdk-deystvitelno-nuzhen">  Wenn das SDK wirklich benötigt wird </h3><br><p>  <strong>Sie haben mehrere Standardszenarien, die von Zeit zu Zeit neu implementiert werden</strong> - in unserem Fall sogar. </p><br><p>  <strong>Interne Entwicklung</strong> - Verwenden Sie in verschiedenen Projekten Protokollierungssysteme, Systemkonfigurationen, Arbeiten mit HttpRequest, Datenbanken, Dateien?  Erstellen Sie ein <strong>internes SDK</strong> - eine Reihe von Bibliotheken für den internen Gebrauch.  Sie können die SDK-Funktionalität jederzeit erweitern, aber die Geschwindigkeit der Entwicklung neuer Projekte, der Prozentsatz der Abdeckung mit Tests und Dokumentation steigt und der Schwellenwert für die Teilnahme neuer Entwickler sinkt. </p><br><h3 id="kogda-sdk-skoree-vsego-budet-lishnim">  Wenn das SDK wahrscheinlich redundant ist </h3><br><p>  <strong>Nutzungsszenarien sind nicht definiert oder ändern sich ständig</strong> - überlassen Sie die Implementierung kundenspezifischer Lösungen den Kunden und helfen Sie ihnen.  Es ist nicht nötig, ein Wunderkind aus Wunderwaffel zu machen, das nur stört.  Sehr relevant für junge Unternehmen und Startups. </p><br><p>  <strong>Sie wissen nicht, wie Sie es qualitativ machen sollen</strong> - ich habe schlechte Nachrichten für Sie: Es ist Zeit zu lernen.  Aber einem Kunden eine krumme Entscheidung zu geben, ist sehr, sehr falsch.  Kunden müssen schließlich respektiert werden. </p><br><p>  Also haben wir entschieden, was das SDK mit seinen Vor- und Nachteilen ist und wann wir es brauchen.  Wenn Sie danach festgestellt haben, dass das SDK wirklich benötigt wird, lade ich Sie ein, sich auf den "SDK-Pfad" zu begeben und herauszufinden, was es sein sollte und wie zum Teufel es zu tun ist? </p><br><h2 id="a-vy-lyubite-lego---modulnost">  "Liebst du Lego?"  - Modularität </h2><br><p>  Stellen Sie sich alle möglichen Szenarien für die Verwendung des SDK vor (Sie haben bereits entschieden, warum Sie es benötigen, oder?) Und erstellen Sie ein Skript für die Bibliothek.  Was ist keine Option?  Aber das ist ein schlechter Ansatz, und deshalb werden wir es nicht tun.  Und wir werden so sein: </p><br><ul><li>  Teilen Sie alle Skripte in Schritte auf </li><li>  gemeinsame Schritte identifizieren </li><li>  Erstellen Sie eine Liste von <strong>Modulen</strong> , die alle möglichen Schritte implementieren (ein Modul ist dafür verantwortlich, etwas Bestimmtes zu implementieren, z. B. mit Konfigurationen zu arbeiten). </li></ul><br><p>  Unter Berücksichtigung der Besonderheiten der Aufgabe muss beispielsweise die gesamte Logik aus Konfigurationen festgelegt werden.  Wir implementieren das Modul für die Arbeit mit Konfigurationen (Lesen, Schreiben, Aktualisieren, Validieren und Verarbeiten von Konfigurationen) und werden es in allen anderen Modulen verwenden. </p><br><p>  Und für die Implementierung von Standardszenarien werden wir wirklich Module erstellen - eine Art "Steuer" -Modul, von dem jedes ein bestimmtes Szenario unter Verwendung anderer Module desselben SDK implementiert.  Für die Implementierung von Standardszenarien muss der Client nur das Steuermodul des Skripts verbinden (und er wird alle Abhängigkeiten aufrufen), und für die Implementierung von nicht standardmäßigen verwenden wir die Basismodule und verwenden den Code ebenfalls wieder. </p><br><p>  Dies ist genau der Grund, warum das SDK nicht eine Bibliothek sein sollte (obwohl ich es wirklich will, verstehe ich. Wenn sich das gesamte SDK in einer Bibliothek befindet, können Sie schließlich die Abhängigkeiten und alles, was damit verbunden ist, vergessen), sondern eine Reihe von Bibliotheken sein.  Ein zusätzlicher Vorteil dieses Ansatzes ist die Reduzierung des "Gewichts" des Client-Programms - es wird ein schweres SDK abgerufen und nur die erforderlichen Module werden aufgerufen. </p><br><p>  Sie sollten aber sowieso keine Module produzieren, denn je mehr Module, desto mehr Kopfschmerzen entstehen durch ihre Abhängigkeiten!  Das heißt,  Es ist wichtig, die Logik korrekt in Module zu unterteilen und ein Gleichgewicht zwischen der Entscheidung "Alles in einem" und "Jedes Modul hat sein eigenes Modul" aufrechtzuerhalten. </p><br><h2 id="a-chto-tak-mozhno-bylo---universalnost">  "Und so war es möglich ?!"  - Vielseitigkeit </h2><br><p>  Stellen Sie dem Client verschiedene Schnittstellen für die Arbeit mit Ihrer Bibliothek zur Verfügung.  Ich werde ein Beispiel geben: </p><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadConfiguration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadConfigurationAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  Wenn Sie nur die synchrone Version bereitstellen, wird der Client beim Implementieren einer asynchronen Anwendung gezwungen, asynchrone Wrapper Ihrer synchronen Methode auszuführen.  Wenn Sie nur die asynchrone Version angeben, ist die Situation ähnlich.  Geben Sie dem Kunden beides und er wird es Ihnen danken. </p><br><p>  Generika werden ein schönes Plus sein.  Zum Beispiel haben wir eine Klasse für die Arbeit mit Konfigurationen, die Methoden zum Packen einer Konfiguration in eine Zeichenfolge, zum Laden einer Konfiguration aus einer Datei usw. implementiert.  Die Konfiguration eines bestimmten Moduls wird von unserer Basisklasse geerbt. Um jedoch mit der neuen Klasse arbeiten zu können, müssen auch Entpackungsmethoden bereitgestellt werden. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseConfiguration</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BaseConfiguration </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BaseConfiguration </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source,Type configurationType</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T FromString&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> source) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T:BaseConfiguration } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomConfiguration</span></span> : <span class="hljs-title"><span class="hljs-title">BaseConfiguration</span></span>{}</code> </pre> <br><p>  Daher haben wir dem Kunden drei Implementierungen zur Verfügung gestellt, die er verwenden kann.  Generika sind sehr praktisch, aber wenn Sie mit dynamischen Typen arbeiten, können sie nur durch Reflexion aufgerufen werden, was unrentabel ist.  Ich hoffe, das allgemeine Prinzip der Universalität ist klar. </p><br><h2 id="roditel-1-roditel-2-deti----imenovanie">  "Elternteil 1, Elternteil 2, Kinder []" - Benennung </h2><br><blockquote>  Was ist der schwierigste Teil eines Programmierers?  Erfinde Namen für Variablen. </blockquote><p>  Trotzdem ... Die richtige Benennung von Modulen, Klassen, Eigenschaften und Methoden wird denjenigen, die mit Ihrem SDK arbeiten, sehr helfen.  Beispiel ohne Kommentare: </p><br><p>  <strong>Kinect 2.0 SDK-Beispiel</strong> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skeletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Skeleton[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skeletonFrame = e.OpenSkeletonFrame()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skeletonFrame != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { skeletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Skeleton[skeletonFrame.SkeletonArrayLength]; skeletonFrame.CopySkeletonDataTo(skeletons); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skeletons.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skel = skeletons.FirstOrDefault(x =&gt; x.TrackingState == SkeletonTrackingState.Tracked); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skel == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rightHand = skel.Joints[JointType.WristRight]; XValueRight.Text = rightHand.Position.X.ToString(CultureInfo.InvariantCulture); YValueRight.Text = rightHand.Position.Y.ToString(CultureInfo.InvariantCulture); ZValueRight.Text = rightHand.Position.Z.ToString(CultureInfo.InvariantCulture);</code> </pre> <br><p>  Aus den Namen der Klassen und Methoden geht alles hervor.  Und wenn Ihre IDE Code vervollständigt, ist es oft möglich, nicht in die Dokumentation zu schauen, wenn bereits alles klar ist. </p><br><h2 id="uveren-esli-by-smert-znala-chto-takoe-byurokratiya-lyudi-by-nikogda-ne-umirali-vechno-stoya-v-ocheredi---dokumentaciya">  "Ich bin sicher, wenn der Tod wüsste, was Bürokratie ist, würden Menschen niemals sterben und für immer in der Schlange stehen ..." - Dokumentation </h2><br><p>  Aber selbst wenn alle Module, Klassen, Methoden und Eigenschaften sehr schön und dringend benannt sind, müssen Sie dennoch Dokumentation schreiben.  Erstens werden Ihre Nerven erheblich geschont (die Anzahl der Kundenfragen wird um eine Größenordnung reduziert. Alles ist in der Dokumentation enthalten), und zweitens ist immer klar, warum Sie dies getan haben und nicht anders. </p><br><blockquote>  Die Dokumentation im SDK ist normalerweise einfach und übersichtlich.  Es besteht normalerweise aus zwei Teilen: Tutorial - ein schrittweiser Kurs im Stil von „Bauen Sie eine Stadt in 10 Minuten“ und Abschnitt Referenz - ein Verweis auf alles, was mit diesem SDK möglich ist. </blockquote><p>  Wir haben den einfachsten Weg gewählt - Zusammenfassung + Artikel.  Wir fügen XML-Attribute für Methoden und Klassen hinzu, die in Intellisense als QuickInfos leuchten.  Mit Docfx erstellen wir eine Dokumentation zu diesen Attributen und erhalten eine detaillierte und bequeme Dokumentation, die durch Artikel ergänzt wird, die Anwendungsfälle und Beispiele beschreiben. </p><br><h2 id="-chtoby-chisto-bylo--kak-ya-budu-vilkoy-to-chistit---testirovanie">  "- Um es sauber zu halten! - Wie werde ich es mit einer Gabel reinigen?"  - Testen </h2><br><p>  Was kann man über das Testen im Rahmen der Diskussion über das SDK sagen ... Muss man haben!  Die beste Lösung wäre TDD (obwohl ich diesen Ansatz negativ finde, habe ich mich in diesem Fall für ihn entschieden).  Ja, lange Zeit.  Ja, langweilig.  Aber in Zukunft werden Sie sich nicht mehr an den ständigen Stürzen des SDK und den Folgen dieses Sturzes festhalten. </p><br><p>  Der Hauptgrund für die Situation ist, dass Sie durch die Übergabe des SDK an den Client die Kontrolle verlieren: Sie können den Fehler nicht schnell beheben, es ist schwierig, diesen Fehler zu finden, und Sie werden in einer solchen Situation dumm genug aussehen.  Deshalb - testen.  Besser testen.  Und noch einmal.  Und für alle Fälle testen Sie Ihre Tests.  Und Testtests.  Also, etwas, das mich mitgerissen hat, aber die Wichtigkeit, das SDK zu testen, ist hoffentlich klar. </p><br><h2 id="zhertva-kotoraya-ne-mogla-protivostoyat-svoemu-proshlomu-byla-pogloschena-im---logi">  "Ein Opfer, das ihrer Vergangenheit nicht widerstehen konnte, wurde von ihm verzehrt" - Logi </h2><br><p>  Da Sie das SDK an ein Drittunternehmen weitergeben, wodurch Sie im Falle eines Fehlers die Kontrolle über die Situation verlieren (in der Testphase haben Sie alle entschieden, dass es funktioniert, oder?), Wartet ein ziemlich langer und schmerzhafter Prozess darauf, dass Sie genau nach diesem Fehler suchen.  Hier helfen Ihnen die Protokolle. </p><br><p>  <strong>Protokollieren Sie alles</strong> , absolut alles, und fragen Sie Ihren Client nach Protokollen, wenn ein Fehler auftritt.  Auf diese Weise sparen Sie viel Zeit und können Ihr Gesicht nicht vor dem Kunden reiben. </p><br><h2 id="alarm-achtung-attention---oshibki">  "Alarm! Achtung! Achtung!"  - Fehler </h2><br><p><img src="https://habrastorage.org/webt/au/2d/b0/au2db0fwmmfbfxrtkw4kqmexht4.gif"><br>  Während ich viel über Fehler nachdachte, kam ich zu einem interessanten Ergebnis - <strong>keine einzige Methode in Ihrem SDK sollte einen Fehler ergeben, der nicht in der Dokumentation beschrieben ist</strong> .  Sie müssen zugeben, dass es sehr unangenehm ist, wenn Sie eine Bibliothek eines Drittanbieters für die Arbeit mit HttpRequest verbinden, und es wirft eine NullPointerException und StackTrace auf Sie, die Sie in den Darm der Bibliothek führen.  Und Sie müssen in diese „Eingeweide“ eintauchen und versuchen zu verstehen, wie tief das Kaninchenloch ist und was tatsächlich das Problem ist. </p><br><p>  Daher schlage ich folgende Lösung vor: Deklarieren Sie eine geschlossene Liste möglicher Ausnahmen und dokumentieren Sie diese.  Aber weil  Sie können nicht sicher sein, ob Sie alles bereitgestellt haben, die Methode in einen Try-Catch einschließen und den abgefangenen Fehler in den deklarierten.  Beispielsweise ist eine ConfigurationException, die eine InnerException enthält, ein abgefangener Fehler.  Auf diese Weise kann ein Drittanbieter alle möglichen Fehler abfangen. Wenn jedoch etwas passiert, müssen Sie schnell herausfinden, worum es geht. </p><br><h2 id="versii-ili-kak-ne-ukusit-sebya-za-hvost">  Versionen oder "wie man nicht in den Schwanz beißt" </h2><br><p>  Um zukünftige Probleme zu vermeiden, empfehle ich dringend die strikte Versionierung.  Wählen Sie das für Sie geeignete Versionsverwaltungssystem und verwenden Sie es.  Wenn die neue Version der Bibliothek jedoch keine Abwärtskompatibilität aufweist, muss dies angegeben werden.  Wie man es löst - denken Sie.  Aber Sie sollten auf jeden Fall darüber nachdenken. </p><br><h2 id="parovozik-kotoryy-smog---deploy">  "Ein Zug, der könnte" - Bereitstellen </h2><br><p>  Die Notwendigkeit der Relevanz von Dokumentation und Versionen führt zur Anforderung an die Richtigkeit der Bereitstellung.  Bei unserer Entscheidung verwenden wir die folgende Lösung (Krücken, aber sie funktionieren). <br>  Wenn eine neue Version veröffentlicht werden muss, zieht der Entwickler den Bat'nik mit der Versionsnummer und anschließend mit der Batch-Datei: </p><br><ul><li>  Release erstellen </li><li>  legt alle Bibliotheken im Archiv ab </li><li>  Erstellen Sie die neueste Version der Dokumentation (docfx). </li><li>  gibt die Release-Version in der Dokumentation und im Namen des Archivs an </li><li>  Bringt das Neueste in das Git-Repository </li><li>  WebApp unter MS Azure ruft ein neues Git-Hook-Commit auf und veröffentlicht Änderungen </li></ul><br><p>  Bei der Ausgabe erhalten wir eine aktualisierte Version der Site mit Dokumentation, von der Sie das Archiv mit der neuesten Version des SDK herunterladen können. <br>  Zukünftige Pläne sehen vor, alles in Nuget-Pakete zu packen und im lokalen Nuget-Repository zu veröffentlichen. </p><br><p>  Ich empfehle, auf diesen Punkt zu achten, da Sie die Kopfschmerzen, die durch den Mangel an relevanten Informationen über die neue Version der Bibliothek verursacht werden, erheblich reduzieren können. </p><br><h2 id="-a-tak-mozhesh---fignya-smotri-kak-nado---primery--toolkit">  "- Und so kannst du? - Bullshit. Schau, wie es sollte!"  - Beispiele &amp; Toolkit </h2><br><p>  Ein wichtiger Punkt in der Dokumentation sind Verwendungsbeispiele.  Darüber hinaus ist es häufig erforderlich, keine Bibliothek bereitzustellen, sondern eine Anwendung, die die meisten Standardszenarien implementiert.  Ich empfehle, diese Anwendungen mit offenem und gut kommentiertem Quellcode zu erstellen, mit dem Sie zwei Fliegen mit einer Klappe schlagen können - stellen Sie eine funktionierende Anwendung bereit und geben Sie ein Beispiel für die Verwendung des SDK. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Die SDK-Entwicklung ist für mich zu einer interessanten neuen Aufgabe geworden, die viele wichtige architektonische Probleme aufgeworfen hat.  Viele der im Artikel beschriebenen Dinge sind (für mich) offensichtliche Dinge, aber ich halte es für wichtig, auch die offensichtlichen Dinge anzukündigen, um ein klares Gesamtbild zu erhalten. </p><br><h2 id="ps">  PS </h2><br><p>  Vielen Dank fürs Lesen, ich freue mich über Ihre Kommentare.  Ich hoffe, dieser Artikel ist hilfreich für Sie. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de430940/">https://habr.com/ru/post/de430940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de430930/index.html">Über 3D-Grafiken in einfachen Worten</a></li>
<li><a href="../de430932/index.html">Hacker haben einer russischen Bank mehr als 21 Millionen Rubel gestohlen</a></li>
<li><a href="../de430934/index.html">Asterisk Dialplan-Erweiterungsmaskengenerator</a></li>
<li><a href="../de430936/index.html">DEFCON 21. DNS-Konferenzen können gesundheitsschädlich sein. Teil 2</a></li>
<li><a href="../de430938/index.html">So erhalten Sie die ersten Aufträge im Design, wenn kein Portfolio und keine Erfahrung vorhanden sind</a></li>
<li><a href="../de430942/index.html">Julia. Skripte und Parsing-Befehlszeilenargumente</a></li>
<li><a href="../de430944/index.html">Die NASA hat die Teilnehmer für ihren Mini-Moon-Rover-Wettbewerb ausgewählt</a></li>
<li><a href="../de430948/index.html">Das Kommunikationsministerium schlägt vor, die Kontrolle über personenbezogene Daten zu verschärfen</a></li>
<li><a href="../de430950/index.html">Modernes Bauen</a></li>
<li><a href="../de430952/index.html">Elektroautos und Hybridautos müssen zusätzliche Geräusche machen: Warum wird das benötigt?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>