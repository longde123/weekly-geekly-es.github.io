<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™Šï¸ ğŸ˜š ğŸ‘¼ğŸ¿ RÃ©utilisation des bibliothÃ¨ques Android privÃ©es avec Sonatype Nexus Repository OSS ğŸ“– ğŸ˜º ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je pense que beaucoup avaient besoin de rÃ©utiliser des modules individuels de leur application Android dans un autre projet. Il existe des moyens simp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RÃ©utilisation des bibliothÃ¨ques Android privÃ©es avec Sonatype Nexus Repository OSS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416665/"> <i>Je pense que beaucoup avaient besoin de rÃ©utiliser des modules individuels de leur application Android dans un autre projet.</i>  <i>Il existe des moyens simples de rÃ©soudre ce problÃ¨me, par exemple, hÃ©berger publiquement votre bibliothÃ¨que Android Ã  l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JitPack</a> .</i>  <i>La solution est excellente, mais si vous devez placer la bibliothÃ¨que en privÃ©, vous devrez payer et le tarif dÃ©pendra le plus souvent du nombre d'artefacts placÃ©s.</i>  <i>Cette solution ne convient pas Ã  tout le monde.</i> <i><br><br></i>  <i>Ci-dessous, je proposerai une solution simple Ã  ce problÃ¨me en utilisant Sonatype Nexus Repository OSS.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/ob/tl/sxobtlhtftpweuwfp36sn0xqtou.png"></div><a name="habracut"></a><br><h2>  PrÃ©sentation </h2><br>  L'article n'est pas destinÃ© Ã  Ãªtre complet et ne reflÃ¨te qu'une solution de base.  En consÃ©quence, vous aurez installÃ© un logiciel pour gÃ©rer les artefacts du cÃ´tÃ© d'un hÃ´te, un script pour publier une bibliothÃ¨que Android, la possibilitÃ© d'implÃ©menter des dÃ©pendances dans votre application Ã  partir du rÃ©fÃ©rentiel maven local.  Il existe peut-Ãªtre dÃ©jÃ  des publications de ce type sur HabrÃ©, mais je n'ai pas trouvÃ© de tutoriel comprÃ©hensible pour le dÃ©veloppeur Android, ce qui m'a incitÃ© Ã  partager des informations avec vous.  Je serai heureux si cela s'avÃ¨re vraiment utile dans le travail. <br><br><h3>  Ã‰tape 1. PrÃ©paration </h3><br>  Vous devez d'abord dÃ©cider oÃ¹ installer Nexus.  Il est logique qu'il s'agisse d'un serveur auquel vous aurez toujours accÃ¨s pendant le dÃ©veloppement.  Dans cet article, nous allons installer Nexus sur le mÃªme hÃ´te sur lequel nous dÃ©veloppons.  Les diffÃ©rences lors de l'installation sur le serveur ne concerneront que l'adresse IP Ã  laquelle nous accÃ©derons aux rÃ©fÃ©rentiels. <br><br>  Avant d'installer Nexus, vous devez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tÃ©lÃ©charger</a> et installer JRE.  Seul Oracle JRE est adaptÃ© et seule la version 1.8 (essayÃ© 10, mais Nexus a jurÃ©), cela est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">clairement indiquÃ© dans la documentation</a> .  N'oubliez pas d'ajouter le chemin d'accÃ¨s aux exÃ©cutables JRE dans votre PATH. <br><br>  Vous devez ensuite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tÃ©lÃ©charger Nexus sur le site officiel</a> .  Au moment de la rÃ©daction, il s'agit de la version 3.12 <br><br><h3>  Ã‰tape 2. Installez et configurez Nexus </h3><br>  Il suffit de dÃ©compresser l'archive tÃ©lÃ©chargÃ©e oÃ¹ cela vous convient.  Ensuite, vous pouvez dÃ©marrer le programme et commencer Ã  travailler.  Pour une utilisation Ã  long terme et pratique, vous devez enregistrer Nexus en tant que service et l'exÃ©cuter au dÃ©marrage du systÃ¨me d'exploitation.  La procÃ©dure Ã  suivre est assez clairement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dÃ©crite dans la documentation</a> .  Dans notre cas, accÃ©dez simplement au <code>nexus-3.12/bin/</code> " <code>nexus-3.12/bin/</code> " et exÃ©cutez le fichier nexus Ã  partir de la ligne de commande. <br><br>  Dans le cas de c Windows: <br><br><pre> <code class="bash hljs">nexus.exe /run</code> </pre> <br>  Dans le cas d'Unix: <br><br><pre> <code class="bash hljs">./nexus run</code> </pre> <br>  Par consÃ©quent, vous devriez voir une notification concernant un lancement rÃ©ussi, cela ressemble Ã  ceci: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/y3/cm/-p/y3cm-pjjz88bd0w98he6o-koov0.png"><br></div></div><br>  Le moment est venu de tester les fonctionnalitÃ©s du Nexus.  Pour ce faire, accÃ©dez simplement au lien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost: 8081</a> .  Comme vous le comprenez, dans le cas d'un serveur, au lieu de " <code>localhost</code> ", vous devez spÃ©cifier l'adresse IP de votre serveur, et Nexus utilise le port 8081 pour fonctionner. Vous verrez cette page: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4j/9r/gw/4j9rgwjh5sh3fe4qwlakw1ncu1a.png"><br></div></div><br>  Tout d'abord, vous devez vous connecter, cliquez sur " <code>Sign in</code> " <code>Sign in</code> haut Ã  droite et entrez le login ( <code>admin</code> ) et le mot de passe ( <code>admin123</code> ) de l'administrateur.  AprÃ¨s cela, l'icÃ´ne d'engrenage apparaÃ®t, en cliquant sur lequel nous entrons dans les paramÃ¨tres. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/v0/9m/jz/v09mjzgstl_cec4ypfaub3ocrng.png"><br></div></div><br>  Sur l'Ã©cran des paramÃ¨tres, vous verrez des liens vers les <code>Blob Stores</code> et les <code>Repositories</code> .  <code>Blob Stores</code> sont les rÃ©fÃ©rentiels de vos donnÃ©es de rÃ©fÃ©rentiel.  Dans les paramÃ¨tres de chaque rÃ©fÃ©rentiel, vous pouvez spÃ©cifier un <code>Blob Store</code> spÃ©cifique pour le stockage des informations.  Un nous suffira, crÃ©Ã© par dÃ©faut.  <code>Repositories</code> sont les rÃ©fÃ©rentiels qui nous intÃ©ressent, dans lesquels les bibliothÃ¨ques seront stockÃ©es. <br><br>  Mais avant de passer Ã  la description des rÃ©fÃ©rentiels, il convient de dÃ©finir des paramÃ¨tres de base pour les utilisateurs.  Passons Ã  la section " <code>Roles</code> ". <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hk/ej/bf/hkejbf6v6vfhkrouiyvzwgu4w78.png"><br></div></div><br>  En plus des rÃ´les d'administrateur et d'utilisateur anonyme, je propose d'allouer des rÃ´les de type " <code>Downloader</code> " - pour charger les dÃ©pendances dans les projets, " <code>Contributor</code> " - pour envoyer des bibliothÃ¨ques Ã  Nexus. <br><br>  Cliquez sur "CrÃ©er un rÃ´le", puis sÃ©lectionnez le "rÃ´le Nexus", entrez les donnÃ©es du "Downloader" comme dans la capture d'Ã©cran ci-dessous: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3h/46/f3/3h46f3qn0okr_a0bacvz9bua4ya.png"><br></div></div><br>  Quels privilÃ¨ges sont responsables de ce qui est dÃ©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en</a> dÃ©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans la documentation</a> .  Nous devons sÃ©lectionner un privilÃ¨ge avec le drapeau " <code>repository-view</code> " (il est responsable de travailler avec les donnÃ©es des rÃ©fÃ©rentiels), le privilÃ¨ge devrait Ã©galement donner le droit de lire les donnÃ©es du rÃ©fÃ©rentiel, c'est le drapeau " <code>read</code> ", et comme dans Android nous travaillons avec les rÃ©fÃ©rentiels maven, cela vaut la peine s'attarder sur le drapeau " <code>maven2</code> " pour empÃªcher l'utilisateur de travailler avec d'autres types de rÃ©fÃ©rentiels.  Cliquez sur " <code>Create role</code> ". <br><br>  Par analogie, nous crÃ©ons le rÃ´le " <code>Contributor</code> ".  La seule diffÃ©rence est que nous hÃ©riterons de la lecture directement du rÃ´le " <code>Downloader</code> " (paramÃ¨tre en bas de la page), et avec nos mains nous donnerons des privilÃ¨ges pour Ã©diter, ajouter des artefacts au rÃ©fÃ©rentiel, et aussi pour visualiser les donnÃ©es des rÃ©fÃ©rentiels via l'interface web. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zy/9f/ya/zy9fyarwz7uh9gpimpq7nnccwsm.png"><br></div></div><br>  Ensuite, crÃ©ez les utilisateurs auxquels nous assignerons les rÃ´les configurÃ©s.  Nous allons dans la section " <code>Users</code> " (sur le cÃ´tÃ© gauche de la fenÃªtre) et cliquez sur " <code>Create local user</code> ".  Pour vÃ©rification, vous pouvez dÃ©finir des mots de passe similaires au mot de passe administrateur standard, c'est-Ã -dire " <code>downloader123</code> " et " <code>contributor123</code> ".  Exemple de remplissage Ã  l'Ã©cran: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/e3/us/dv/e3usdvidigjijw9nlrn4kvel-eq.png"><br></div></div><br>  Ã‰tant donnÃ© que notre objectif est le travail privÃ©, il convient de dÃ©sactiver l'accÃ¨s aux donnÃ©es du rÃ©fÃ©rentiel pour les utilisateurs anonymes. Pour ce faire, accÃ©dez Ã  l'utilisateur " <code>anonimous</code> " et changez son statut de " <code>Active</code> " en " <code>Disabled</code> ".  Dans ce cas, il ne sera pas possible d'obtenir de maniÃ¨re anonyme des dÃ©pendances dans le projet Android, mais uniquement avec un utilisateur et un mot de passe spÃ©cifiques, mais il sera toujours possible de tÃ©lÃ©charger des donnÃ©es via l'interface Web. <br><br>  Afin d'interdire aux utilisateurs anonymes d'afficher le contenu des rÃ©fÃ©rentiels via l'interface Web, accÃ©dez Ã  la section " <code>Anonimous</code> " et dÃ©cochez l'option " <code>Allow anonymous users to access the server</code> ".  N'oubliez pas d'enregistrer les modifications. <br><br>  La derniÃ¨re Ã©tape reste la mise en place de rÃ©fÃ©rentiels.  Allez dans la section " <code>Repositories</code> " et voyez les rÃ©fÃ©rentiels par dÃ©faut qui y sont crÃ©Ã©s.  Parmi eux, il existe des rÃ©fÃ©rentiels " <code>maven2</code> ", si vous regardez attentivement, vous pouvez voir diffÃ©rents types: "proxy", "groupe", "hÃ©bergÃ©".  Lorsque le rÃ©fÃ©rentiel proxy transfÃ¨re simplement l'utilisateur vers un autre rÃ©fÃ©rentiel, dans le cas du " <code>maven-central</code> " prÃ©configurÃ©, il s'agit d'un lien vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://repo1.maven.org/maven2/</a> , "groupe" peut inclure plusieurs rÃ©fÃ©rentiels, et Â«hÃ©bergÃ©Â» est dÃ©jÃ  un rÃ©fÃ©rentiel spÃ©cifique stockÃ© dans Nexus.  Ils nous seront utiles maintenant. <br><br>  CrÃ©ez des rÃ©fÃ©rentiels pour les versions Â«ReleaseÂ» et Â«SnapshotÂ» des artefacts.  Cliquez sur " <code>Create repository</code> ", sÃ©lectionnez " <code>maven2 (hosted)</code> ".  Nous appellerons le premier dÃ©pÃ´t Â«androidÂ» et l'enregistrerons simplement sans modifier les paramÃ¨tres: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5m/ak/n9/5makn9e9beis7qcsj6fbd0gv8yq.png"><br></div></div><br>  Nous appelons le deuxiÃ¨me rÃ©fÃ©rentiel Â«android_snapshotÂ», changeons la Â« <code>Version policy</code> Â» en Â«SpapshotÂ» et la Â« <code>Deployment policy</code> Â» en Â«Autoriser le redÃ©ploiementÂ». <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dh/lb/3b/dhlb3bf_iy8to-k2r3952qrmlem.png"><br></div></div><br>  S'il n'est pas clair ce que cela affecte, vous pouvez le lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  En fait, le rÃ©fÃ©rentiel Â«androidÂ» ne pourra pas tÃ©lÃ©charger la mÃªme version de la bibliothÃ¨que Ã  plusieurs reprises, c'est le comportement habituel lors de la communication, par exemple, avec maven-central.  Pour le rÃ©fÃ©rentiel android_snapshot, le nom de la version doit nÃ©cessairement se terminer par INSTANTANÃ‰ et la mÃªme version sera Ã  nouveau disponible pour tÃ©lÃ©chargement. <br><br>  Faites Ã©galement attention au fait que la liste des rÃ©fÃ©rentiels comporte une colonne "URL" avec des boutons "Copier", nous aurons besoin de ces liens Ã  l'avenir pour accÃ©der aux rÃ©fÃ©rentiels Ã  partir des projets. <br><br>  FÃ©licitations!  La configuration de base de Nexus est terminÃ©e, il est temps de commencer Ã  crÃ©er et Ã  publier la bibliothÃ¨que. <br><br><h3>  Ã‰tape 3. CrÃ©ez et publiez une bibliothÃ¨que Android </h3><br>  Nous crÃ©ons le projet Android, nous l'appellerons "TestLibrary".  Ensuite, dans la Â«Vue du projetÂ», cliquez sur la racine du projet avec le bouton droit de la souris, sÃ©lectionnez Â«NouveauÂ» et Â«ModuleÂ».  Dans la fenÃªtre qui s'ouvre, sÃ©lectionnez Â«BibliothÃ¨que AndroidÂ» et nommez la bibliothÃ¨que Â«HelloLibraryÂ».  En consÃ©quence, vous verrez le module de notre nouvelle bibliothÃ¨que Ã  cÃ´tÃ© du module Â«appÂ». <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zv/cl/hm/zvclhm_otuqkgiz7c_k5qrcsnnq.png"><br></div></div><br>  Ajoutez une classe avec une fonction de bienvenue Ã  la bibliothÃ¨que: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.nexus.hellolibrary <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">helloFromOurLibrary</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { println(<span class="hljs-string"><span class="hljs-string">"### Hello World! This is our new Android library!"</span></span>) }</code> </pre><br>  La bibliothÃ¨que est prÃªte, il est temps de publier.  Dans la "Vue du projet" du module "hellolibrary", ajoutez le fichier et appelez-le "publisher.gradle".  Il stockera le script pour la publication de la bibliothÃ¨que. <br><br><pre> <code class="hljs pgsql">//     apply plugin: <span class="hljs-string"><span class="hljs-string">'maven-publish'</span></span> ext { // URL  <span class="hljs-keyword"><span class="hljs-keyword">Release</span></span>  repositoryReleaseUrl = "http://localhost:8081/repository/android/" // URL  <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>  repositorySnapshotUrl = "http://localhost:8081/repository/android_snapshot/" //  ,      contributorUserName = "contributor" //  ,      contributorPassword = "contributor123" //    libraryGroupId = "com.example.nexus" //   libraryArtifact = "hellolibrary" //   libraryVersion = "0.0.1" } //  publishing { //    repositories { //    maven { //     credentials { username contributorUserName <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> contributorPassword } //         <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>     url libraryVersion.endsWith("SNAPSHOT") ? repositorySnapshotUrl : repositoryReleaseUrl } } //     maven-publish  publications { // AndroidLibrary -   ,    //  ,     AndroidLibrary(MavenPublication) { //     groupId libraryGroupId artifactId libraryArtifact <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> libraryVersion //      artifact "$buildDir/outputs/aar/${project.getName()}-release.aar" pom { //         , //   ClassNotFoundException   // . withXml { def dependencies = asNode().appendNode("dependencies") configurations.getByName("releaseCompileClasspath") .getResolvedConfiguration() .getFirstLevelModuleDependencies() .<span class="hljs-keyword"><span class="hljs-keyword">each</span></span> { def dependency = dependencies.appendNode("dependency") dependency.appendNode("groupId", it.moduleGroup) dependency.appendNode("artifactId", it.moduleName) dependency.appendNode("version", it.moduleVersion) } } // withXml } // pom } // AndroidLibrary } // publications //  assembleRelease   model { tasks.publishAndroidLibraryPublicationToMavenRepository { dependsOn project.tasks.assembleRelease } } } //publishing</code> </pre><br>  Ensuite, accÃ©dez au "build.gradle" de notre bibliothÃ¨que, appliquez-y notre Ã©diteur et supprimez-le des dÃ©pendances inutiles: <br><pre> <code class="hljs pgsql">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> //  publisher apply <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: "publisher.gradle" android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName "1.0" } buildTypes { <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> { minifyEnabled <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { implementation fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version" } repositories { mavenCentral() }</code> </pre><br>  Maintenant, nous pouvons publier simplement en effectuant la tÃ¢che " <code>publishAndroidLibraryPublicationToMavenRepository</code> ". <br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hy/gu/ly/hyguly_fd3pu0wh1x7z6jxbg9kw.png"><br></div></div><br>  La bibliothÃ¨que est publiÃ©e, fÃ©licitations!  VÃ©rifiez le rÃ©sultat dans l'interface Web de notre Nexus.  AccÃ©dez Ã  l'Ã©lÃ©ment Â«ParcourirÂ» et sÃ©lectionnez le rÃ©fÃ©rentiel Â«androidÂ».  Vous devriez voir ce qui suit: <br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/am/a-/l9/ama-l9nhjhc_wm1p6iaxoenp0ki.png"><br></div></div><br><h3>  Ã‰tape 4. Utilisation des dÃ©pendances de Nexus </h3><br>  Pour le test, je propose de crÃ©er un autre projet Android vide. <br><br>  Pour commencer, connectez le rÃ©fÃ©rentiel au projet en ajoutant simplement des donnÃ©es au fichier Â«build.gradleÂ» du niveau projet: <br><br><pre> <code class="hljs pgsql">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.50'</span></span> repositories { google() jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.1.3'</span></span> classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" } } allprojects { repositories { google() jcenter() //    maven { credentials { username "downloader" <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> "downloader123" } url "http://localhost:8081/repository/android" } } } task clean(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> rootProject.buildDir }</code> </pre><br>  Et maintenant, comme avec n'importe quelle autre bibliothÃ¨que, nous obtenons une dÃ©pendance de notre Â«bibliothÃ¨que hellÃ©niqueÂ» grÃ¢ce Ã  l'implÃ©mentation dans le fichier Â«build.gradleÂ» du niveau Â«appÂ». <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">apply</span></span> plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { <span class="hljs-attribute"><span class="hljs-attribute">compileSdkVersion</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { <span class="hljs-attribute"><span class="hljs-attribute">applicationId</span></span> <span class="hljs-string"><span class="hljs-string">"com.example.nexus.fff"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">"android.support.test.runner.AndroidJUnitRunner"</span></span> } buildTypes { <span class="hljs-section"><span class="hljs-section">release</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">minifyEnabled</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, include: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation<span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$kotlin_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:28.0.0-alpha3'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'junit:junit:4.12'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test:runner:1.0.2'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span> //   implementation <span class="hljs-string"><span class="hljs-string">"com.example.nexus:hellolibrary:0.0.1"</span></span> }</code> </pre><br>  Le chemin d'accÃ¨s Ã  la dÃ©pendance est <code>groupId:artifactId:version</code> sous la forme <code>groupId:artifactId:version</code> . <br><br>  Vous pouvez maintenant appeler la fonction <code>helloFromOurLibrary()</code> dans votre projet Android et tester les performances de l'ensemble du circuit.  FÃ©licitations! <br><br><h2>  RÃ©sumÃ© </h2><br>  Vous avez maintenant la possibilitÃ© de rÃ©utiliser des bibliothÃ¨ques Android privÃ©es dans des projets.  En attente de commentaires! <br><br>  J'espÃ¨re que vous n'avez pas perdu votre temps, merci! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416665/">https://habr.com/ru/post/fr416665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416651/index.html">1M HTTP rps sur 1 cÅ“ur de processeur. DPDK au lieu de nginx + noyau Linux TCP / IP</a></li>
<li><a href="../fr416653/index.html">Tri de bibliothÃ¨que</a></li>
<li><a href="../fr416657/index.html">Les deux tiers des cartes mÃ©moire utilisÃ©es contiennent des donnÃ©es personnelles d'anciens propriÃ©taires</a></li>
<li><a href="../fr416659/index.html">En raison de ce que le volume des paiements numÃ©riques pour l'Ã©conomie des concerts atteindra 1,2 billion de dollars</a></li>
<li><a href="../fr416661/index.html">Quelles tendances devraient Ãªtre prises en compte par les utilisateurs et les fournisseurs de services bancaires mobiles</a></li>
<li><a href="../fr416667/index.html">Insonoriser la poussiÃ¨re et le bruit de l'ancienne unitÃ© centrale</a></li>
<li><a href="../fr416669/index.html">Toute la vÃ©ritÃ© sur Linux Epoll</a></li>
<li><a href="../fr416673/index.html">Solution analytique pour manager</a></li>
<li><a href="../fr416677/index.html">Lunettes cyberpunk et miroir: reflets de la mode et de la culture</a></li>
<li><a href="../fr416679/index.html">Informatique pÃ©riphÃ©rique: une concordance amicale du Â«brouillardÂ» avec les Â«nuagesÂ»</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>