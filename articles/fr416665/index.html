<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôäÔ∏è üòö üëºüèø R√©utilisation des biblioth√®ques Android priv√©es avec Sonatype Nexus Repository OSS üìñ üò∫ üë©üèø‚Äçü§ù‚Äçüë©üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je pense que beaucoup avaient besoin de r√©utiliser des modules individuels de leur application Android dans un autre projet. Il existe des moyens simp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>R√©utilisation des biblioth√®ques Android priv√©es avec Sonatype Nexus Repository OSS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416665/"> <i>Je pense que beaucoup avaient besoin de r√©utiliser des modules individuels de leur application Android dans un autre projet.</i>  <i>Il existe des moyens simples de r√©soudre ce probl√®me, par exemple, h√©berger publiquement votre biblioth√®que Android √† l'aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JitPack</a> .</i>  <i>La solution est excellente, mais si vous devez placer la biblioth√®que en priv√©, vous devrez payer et le tarif d√©pendra le plus souvent du nombre d'artefacts plac√©s.</i>  <i>Cette solution ne convient pas √† tout le monde.</i> <i><br><br></i>  <i>Ci-dessous, je proposerai une solution simple √† ce probl√®me en utilisant Sonatype Nexus Repository OSS.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/ob/tl/sxobtlhtftpweuwfp36sn0xqtou.png"></div><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br>  L'article n'est pas destin√© √† √™tre complet et ne refl√®te qu'une solution de base.  En cons√©quence, vous aurez install√© un logiciel pour g√©rer les artefacts du c√¥t√© d'un h√¥te, un script pour publier une biblioth√®que Android, la possibilit√© d'impl√©menter des d√©pendances dans votre application √† partir du r√©f√©rentiel maven local.  Il existe peut-√™tre d√©j√† des publications de ce type sur Habr√©, mais je n'ai pas trouv√© de tutoriel compr√©hensible pour le d√©veloppeur Android, ce qui m'a incit√© √† partager des informations avec vous.  Je serai heureux si cela s'av√®re vraiment utile dans le travail. <br><br><h3>  √âtape 1. Pr√©paration </h3><br>  Vous devez d'abord d√©cider o√π installer Nexus.  Il est logique qu'il s'agisse d'un serveur auquel vous aurez toujours acc√®s pendant le d√©veloppement.  Dans cet article, nous allons installer Nexus sur le m√™me h√¥te sur lequel nous d√©veloppons.  Les diff√©rences lors de l'installation sur le serveur ne concerneront que l'adresse IP √† laquelle nous acc√©derons aux r√©f√©rentiels. <br><br>  Avant d'installer Nexus, vous devez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charger</a> et installer JRE.  Seul Oracle JRE est adapt√© et seule la version 1.8 (essay√© 10, mais Nexus a jur√©), cela est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">clairement indiqu√© dans la documentation</a> .  N'oubliez pas d'ajouter le chemin d'acc√®s aux ex√©cutables JRE dans votre PATH. <br><br>  Vous devez ensuite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charger Nexus sur le site officiel</a> .  Au moment de la r√©daction, il s'agit de la version 3.12 <br><br><h3>  √âtape 2. Installez et configurez Nexus </h3><br>  Il suffit de d√©compresser l'archive t√©l√©charg√©e o√π cela vous convient.  Ensuite, vous pouvez d√©marrer le programme et commencer √† travailler.  Pour une utilisation √† long terme et pratique, vous devez enregistrer Nexus en tant que service et l'ex√©cuter au d√©marrage du syst√®me d'exploitation.  La proc√©dure √† suivre est assez clairement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©crite dans la documentation</a> .  Dans notre cas, acc√©dez simplement au <code>nexus-3.12/bin/</code> " <code>nexus-3.12/bin/</code> " et ex√©cutez le fichier nexus √† partir de la ligne de commande. <br><br>  Dans le cas de c Windows: <br><br><pre> <code class="bash hljs">nexus.exe /run</code> </pre> <br>  Dans le cas d'Unix: <br><br><pre> <code class="bash hljs">./nexus run</code> </pre> <br>  Par cons√©quent, vous devriez voir une notification concernant un lancement r√©ussi, cela ressemble √† ceci: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/y3/cm/-p/y3cm-pjjz88bd0w98he6o-koov0.png"><br></div></div><br>  Le moment est venu de tester les fonctionnalit√©s du Nexus.  Pour ce faire, acc√©dez simplement au lien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost: 8081</a> .  Comme vous le comprenez, dans le cas d'un serveur, au lieu de " <code>localhost</code> ", vous devez sp√©cifier l'adresse IP de votre serveur, et Nexus utilise le port 8081 pour fonctionner. Vous verrez cette page: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4j/9r/gw/4j9rgwjh5sh3fe4qwlakw1ncu1a.png"><br></div></div><br>  Tout d'abord, vous devez vous connecter, cliquez sur " <code>Sign in</code> " <code>Sign in</code> haut √† droite et entrez le login ( <code>admin</code> ) et le mot de passe ( <code>admin123</code> ) de l'administrateur.  Apr√®s cela, l'ic√¥ne d'engrenage appara√Æt, en cliquant sur lequel nous entrons dans les param√®tres. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/v0/9m/jz/v09mjzgstl_cec4ypfaub3ocrng.png"><br></div></div><br>  Sur l'√©cran des param√®tres, vous verrez des liens vers les <code>Blob Stores</code> et les <code>Repositories</code> .  <code>Blob Stores</code> sont les r√©f√©rentiels de vos donn√©es de r√©f√©rentiel.  Dans les param√®tres de chaque r√©f√©rentiel, vous pouvez sp√©cifier un <code>Blob Store</code> sp√©cifique pour le stockage des informations.  Un nous suffira, cr√©√© par d√©faut.  <code>Repositories</code> sont les r√©f√©rentiels qui nous int√©ressent, dans lesquels les biblioth√®ques seront stock√©es. <br><br>  Mais avant de passer √† la description des r√©f√©rentiels, il convient de d√©finir des param√®tres de base pour les utilisateurs.  Passons √† la section " <code>Roles</code> ". <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hk/ej/bf/hkejbf6v6vfhkrouiyvzwgu4w78.png"><br></div></div><br>  En plus des r√¥les d'administrateur et d'utilisateur anonyme, je propose d'allouer des r√¥les de type " <code>Downloader</code> " - pour charger les d√©pendances dans les projets, " <code>Contributor</code> " - pour envoyer des biblioth√®ques √† Nexus. <br><br>  Cliquez sur "Cr√©er un r√¥le", puis s√©lectionnez le "r√¥le Nexus", entrez les donn√©es du "Downloader" comme dans la capture d'√©cran ci-dessous: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3h/46/f3/3h46f3qn0okr_a0bacvz9bua4ya.png"><br></div></div><br>  Quels privil√®ges sont responsables de ce qui est d√©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en</a> d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans la documentation</a> .  Nous devons s√©lectionner un privil√®ge avec le drapeau " <code>repository-view</code> " (il est responsable de travailler avec les donn√©es des r√©f√©rentiels), le privil√®ge devrait √©galement donner le droit de lire les donn√©es du r√©f√©rentiel, c'est le drapeau " <code>read</code> ", et comme dans Android nous travaillons avec les r√©f√©rentiels maven, cela vaut la peine s'attarder sur le drapeau " <code>maven2</code> " pour emp√™cher l'utilisateur de travailler avec d'autres types de r√©f√©rentiels.  Cliquez sur " <code>Create role</code> ". <br><br>  Par analogie, nous cr√©ons le r√¥le " <code>Contributor</code> ".  La seule diff√©rence est que nous h√©riterons de la lecture directement du r√¥le " <code>Downloader</code> " (param√®tre en bas de la page), et avec nos mains nous donnerons des privil√®ges pour √©diter, ajouter des artefacts au r√©f√©rentiel, et aussi pour visualiser les donn√©es des r√©f√©rentiels via l'interface web. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zy/9f/ya/zy9fyarwz7uh9gpimpq7nnccwsm.png"><br></div></div><br>  Ensuite, cr√©ez les utilisateurs auxquels nous assignerons les r√¥les configur√©s.  Nous allons dans la section " <code>Users</code> " (sur le c√¥t√© gauche de la fen√™tre) et cliquez sur " <code>Create local user</code> ".  Pour v√©rification, vous pouvez d√©finir des mots de passe similaires au mot de passe administrateur standard, c'est-√†-dire " <code>downloader123</code> " et " <code>contributor123</code> ".  Exemple de remplissage √† l'√©cran: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/e3/us/dv/e3usdvidigjijw9nlrn4kvel-eq.png"><br></div></div><br>  √âtant donn√© que notre objectif est le travail priv√©, il convient de d√©sactiver l'acc√®s aux donn√©es du r√©f√©rentiel pour les utilisateurs anonymes. Pour ce faire, acc√©dez √† l'utilisateur " <code>anonimous</code> " et changez son statut de " <code>Active</code> " en " <code>Disabled</code> ".  Dans ce cas, il ne sera pas possible d'obtenir de mani√®re anonyme des d√©pendances dans le projet Android, mais uniquement avec un utilisateur et un mot de passe sp√©cifiques, mais il sera toujours possible de t√©l√©charger des donn√©es via l'interface Web. <br><br>  Afin d'interdire aux utilisateurs anonymes d'afficher le contenu des r√©f√©rentiels via l'interface Web, acc√©dez √† la section " <code>Anonimous</code> " et d√©cochez l'option " <code>Allow anonymous users to access the server</code> ".  N'oubliez pas d'enregistrer les modifications. <br><br>  La derni√®re √©tape reste la mise en place de r√©f√©rentiels.  Allez dans la section " <code>Repositories</code> " et voyez les r√©f√©rentiels par d√©faut qui y sont cr√©√©s.  Parmi eux, il existe des r√©f√©rentiels " <code>maven2</code> ", si vous regardez attentivement, vous pouvez voir diff√©rents types: "proxy", "groupe", "h√©berg√©".  Lorsque le r√©f√©rentiel proxy transf√®re simplement l'utilisateur vers un autre r√©f√©rentiel, dans le cas du " <code>maven-central</code> " pr√©configur√©, il s'agit d'un lien vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://repo1.maven.org/maven2/</a> , "groupe" peut inclure plusieurs r√©f√©rentiels, et ¬´h√©berg√©¬ª est d√©j√† un r√©f√©rentiel sp√©cifique stock√© dans Nexus.  Ils nous seront utiles maintenant. <br><br>  Cr√©ez des r√©f√©rentiels pour les versions ¬´Release¬ª et ¬´Snapshot¬ª des artefacts.  Cliquez sur " <code>Create repository</code> ", s√©lectionnez " <code>maven2 (hosted)</code> ".  Nous appellerons le premier d√©p√¥t ¬´android¬ª et l'enregistrerons simplement sans modifier les param√®tres: <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5m/ak/n9/5makn9e9beis7qcsj6fbd0gv8yq.png"><br></div></div><br>  Nous appelons le deuxi√®me r√©f√©rentiel ¬´android_snapshot¬ª, changeons la ¬´ <code>Version policy</code> ¬ª en ¬´Spapshot¬ª et la ¬´ <code>Deployment policy</code> ¬ª en ¬´Autoriser le red√©ploiement¬ª. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dh/lb/3b/dhlb3bf_iy8to-k2r3952qrmlem.png"><br></div></div><br>  S'il n'est pas clair ce que cela affecte, vous pouvez le lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  En fait, le r√©f√©rentiel ¬´android¬ª ne pourra pas t√©l√©charger la m√™me version de la biblioth√®que √† plusieurs reprises, c'est le comportement habituel lors de la communication, par exemple, avec maven-central.  Pour le r√©f√©rentiel android_snapshot, le nom de la version doit n√©cessairement se terminer par INSTANTAN√â et la m√™me version sera √† nouveau disponible pour t√©l√©chargement. <br><br>  Faites √©galement attention au fait que la liste des r√©f√©rentiels comporte une colonne "URL" avec des boutons "Copier", nous aurons besoin de ces liens √† l'avenir pour acc√©der aux r√©f√©rentiels √† partir des projets. <br><br>  F√©licitations!  La configuration de base de Nexus est termin√©e, il est temps de commencer √† cr√©er et √† publier la biblioth√®que. <br><br><h3>  √âtape 3. Cr√©ez et publiez une biblioth√®que Android </h3><br>  Nous cr√©ons le projet Android, nous l'appellerons "TestLibrary".  Ensuite, dans la ¬´Vue du projet¬ª, cliquez sur la racine du projet avec le bouton droit de la souris, s√©lectionnez ¬´Nouveau¬ª et ¬´Module¬ª.  Dans la fen√™tre qui s'ouvre, s√©lectionnez ¬´Biblioth√®que Android¬ª et nommez la biblioth√®que ¬´HelloLibrary¬ª.  En cons√©quence, vous verrez le module de notre nouvelle biblioth√®que √† c√¥t√© du module ¬´app¬ª. <br><br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zv/cl/hm/zvclhm_otuqkgiz7c_k5qrcsnnq.png"><br></div></div><br>  Ajoutez une classe avec une fonction de bienvenue √† la biblioth√®que: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.nexus.hellolibrary <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">helloFromOurLibrary</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { println(<span class="hljs-string"><span class="hljs-string">"### Hello World! This is our new Android library!"</span></span>) }</code> </pre><br>  La biblioth√®que est pr√™te, il est temps de publier.  Dans la "Vue du projet" du module "hellolibrary", ajoutez le fichier et appelez-le "publisher.gradle".  Il stockera le script pour la publication de la biblioth√®que. <br><br><pre> <code class="hljs pgsql">//     apply plugin: <span class="hljs-string"><span class="hljs-string">'maven-publish'</span></span> ext { // URL  <span class="hljs-keyword"><span class="hljs-keyword">Release</span></span>  repositoryReleaseUrl = "http://localhost:8081/repository/android/" // URL  <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>  repositorySnapshotUrl = "http://localhost:8081/repository/android_snapshot/" //  ,      contributorUserName = "contributor" //  ,      contributorPassword = "contributor123" //    libraryGroupId = "com.example.nexus" //   libraryArtifact = "hellolibrary" //   libraryVersion = "0.0.1" } //  publishing { //    repositories { //    maven { //     credentials { username contributorUserName <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> contributorPassword } //         <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span>     url libraryVersion.endsWith("SNAPSHOT") ? repositorySnapshotUrl : repositoryReleaseUrl } } //     maven-publish  publications { // AndroidLibrary -   ,    //  ,     AndroidLibrary(MavenPublication) { //     groupId libraryGroupId artifactId libraryArtifact <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> libraryVersion //      artifact "$buildDir/outputs/aar/${project.getName()}-release.aar" pom { //         , //   ClassNotFoundException   // . withXml { def dependencies = asNode().appendNode("dependencies") configurations.getByName("releaseCompileClasspath") .getResolvedConfiguration() .getFirstLevelModuleDependencies() .<span class="hljs-keyword"><span class="hljs-keyword">each</span></span> { def dependency = dependencies.appendNode("dependency") dependency.appendNode("groupId", it.moduleGroup) dependency.appendNode("artifactId", it.moduleName) dependency.appendNode("version", it.moduleVersion) } } // withXml } // pom } // AndroidLibrary } // publications //  assembleRelease   model { tasks.publishAndroidLibraryPublicationToMavenRepository { dependsOn project.tasks.assembleRelease } } } //publishing</code> </pre><br>  Ensuite, acc√©dez au "build.gradle" de notre biblioth√®que, appliquez-y notre √©diteur et supprimez-le des d√©pendances inutiles: <br><pre> <code class="hljs pgsql">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> //  publisher apply <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: "publisher.gradle" android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName "1.0" } buildTypes { <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> { minifyEnabled <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { implementation fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version" } repositories { mavenCentral() }</code> </pre><br>  Maintenant, nous pouvons publier simplement en effectuant la t√¢che " <code>publishAndroidLibraryPublicationToMavenRepository</code> ". <br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hy/gu/ly/hyguly_fd3pu0wh1x7z6jxbg9kw.png"><br></div></div><br>  La biblioth√®que est publi√©e, f√©licitations!  V√©rifiez le r√©sultat dans l'interface Web de notre Nexus.  Acc√©dez √† l'√©l√©ment ¬´Parcourir¬ª et s√©lectionnez le r√©f√©rentiel ¬´android¬ª.  Vous devriez voir ce qui suit: <br><div class="spoiler">  <b class="spoiler_title">Image</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/am/a-/l9/ama-l9nhjhc_wm1p6iaxoenp0ki.png"><br></div></div><br><h3>  √âtape 4. Utilisation des d√©pendances de Nexus </h3><br>  Pour le test, je propose de cr√©er un autre projet Android vide. <br><br>  Pour commencer, connectez le r√©f√©rentiel au projet en ajoutant simplement des donn√©es au fichier ¬´build.gradle¬ª du niveau projet: <br><br><pre> <code class="hljs pgsql">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.50'</span></span> repositories { google() jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.1.3'</span></span> classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" } } allprojects { repositories { google() jcenter() //    maven { credentials { username "downloader" <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> "downloader123" } url "http://localhost:8081/repository/android" } } } task clean(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> rootProject.buildDir }</code> </pre><br>  Et maintenant, comme avec n'importe quelle autre biblioth√®que, nous obtenons une d√©pendance de notre ¬´biblioth√®que hell√©nique¬ª gr√¢ce √† l'impl√©mentation dans le fichier ¬´build.gradle¬ª du niveau ¬´app¬ª. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">apply</span></span> plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { <span class="hljs-attribute"><span class="hljs-attribute">compileSdkVersion</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { <span class="hljs-attribute"><span class="hljs-attribute">applicationId</span></span> <span class="hljs-string"><span class="hljs-string">"com.example.nexus.fff"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">18</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">"android.support.test.runner.AndroidJUnitRunner"</span></span> } buildTypes { <span class="hljs-section"><span class="hljs-section">release</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">minifyEnabled</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, include: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation<span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$kotlin_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:28.0.0-alpha3'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'junit:junit:4.12'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test:runner:1.0.2'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span> //   implementation <span class="hljs-string"><span class="hljs-string">"com.example.nexus:hellolibrary:0.0.1"</span></span> }</code> </pre><br>  Le chemin d'acc√®s √† la d√©pendance est <code>groupId:artifactId:version</code> sous la forme <code>groupId:artifactId:version</code> . <br><br>  Vous pouvez maintenant appeler la fonction <code>helloFromOurLibrary()</code> dans votre projet Android et tester les performances de l'ensemble du circuit.  F√©licitations! <br><br><h2>  R√©sum√© </h2><br>  Vous avez maintenant la possibilit√© de r√©utiliser des biblioth√®ques Android priv√©es dans des projets.  En attente de commentaires! <br><br>  J'esp√®re que vous n'avez pas perdu votre temps, merci! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416665/">https://habr.com/ru/post/fr416665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416651/index.html">1M HTTP rps sur 1 c≈ìur de processeur. DPDK au lieu de nginx + noyau Linux TCP / IP</a></li>
<li><a href="../fr416653/index.html">Tri de biblioth√®que</a></li>
<li><a href="../fr416657/index.html">Les deux tiers des cartes m√©moire utilis√©es contiennent des donn√©es personnelles d'anciens propri√©taires</a></li>
<li><a href="../fr416659/index.html">En raison de ce que le volume des paiements num√©riques pour l'√©conomie des concerts atteindra 1,2 billion de dollars</a></li>
<li><a href="../fr416661/index.html">Quelles tendances devraient √™tre prises en compte par les utilisateurs et les fournisseurs de services bancaires mobiles</a></li>
<li><a href="../fr416667/index.html">Insonoriser la poussi√®re et le bruit de l'ancienne unit√© centrale</a></li>
<li><a href="../fr416669/index.html">Toute la v√©rit√© sur Linux Epoll</a></li>
<li><a href="../fr416673/index.html">Solution analytique pour manager</a></li>
<li><a href="../fr416677/index.html">Lunettes cyberpunk et miroir: reflets de la mode et de la culture</a></li>
<li><a href="../fr416679/index.html">Informatique p√©riph√©rique: une concordance amicale du ¬´brouillard¬ª avec les ¬´nuages¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>