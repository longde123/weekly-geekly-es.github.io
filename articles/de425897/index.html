<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèª ‚ôçÔ∏è ‚úåüèæ Funktionen zur Verwendung der RxJs-Bibliothek in einem Online-Banking-System ‚úçüèΩ ü§∑üèº ‚õΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 
 Das Entwerfen eines modernen Online-Banking-Systems ist eine ziemlich komplizierte Aufgabe. Gleichzeitig sind eine Reihe von Aufgaben zur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Funktionen zur Verwendung der RxJs-Bibliothek in einem Online-Banking-System</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/425897/"><h3>  Einf√ºhrung </h3><br>  Das Entwerfen eines modernen Online-Banking-Systems ist eine ziemlich komplizierte Aufgabe.  Gleichzeitig sind eine Reihe von Aufgaben zur Entwicklung des Client-Teils der Anwendung mit dem Prozess der Verarbeitung einer gro√üen Datenmenge verbunden, die fast gleichzeitig aus mehreren Informationsquellen stammt.  Daten aus dem Remote-Banking-System (RBS), Instant Messaging-Diensten und verschiedenen Informationsdiensten sollten hier und jetzt in Echtzeit empfangen und verarbeitet werden.  Um Probleme dieser Art zu l√∂sen, werden heute h√§ufig reaktive Programmiermethoden eingesetzt. <br><a name="habracut"></a><br>  Der Begriff "reaktive Programmierung" im weiteren Sinne bedeutet eine solche Organisation der Anwendung, bei der die Ausbreitung von √Ñnderungen im System infolge der Verarbeitung der Zust√§nde von Datenstr√∂men erfolgt.  Wichtige Probleme bei dieser Methode sind die einfache Darstellung von Informationsfl√ºssen und die M√∂glichkeit, auf Fehler zu reagieren, die w√§hrend der asynchronen Verarbeitung von Darstellungsergebnissen auftreten. <br><br>  Im engeren Sinne kann reaktive Web-UI-Programmierung die Verwendung von Standard-Entwicklertools wie der RxJs-Bibliothek bedeuten.  Diese Bibliothek bietet eine diskrete Darstellung von Datensequenzen unter Verwendung des Observable-Objekts, das in bestimmten Intervallen als Informationsquelle f√ºr die Anwendung dient. <br><br>  Betrachten Sie die Funktionen der Verwendung der Bibliothek am Beispiel des Entwurfs der Weboberfl√§che einer Online-Bank f√ºr kleine Unternehmen.  Bei der Entwicklung der Benutzeroberfl√§che haben wir die Google Angular 6-Plattform mit der integrierten RxJs-Bibliothek Version 6 verwendet. <br><br><h3>  Reaktive UI-Entwurfsaufgaben </h3><br>  F√ºr den Benutzer sind die meisten Vorg√§nge in der Internetbank h√§ufig dreistufig: <br><br><ul><li>  Ausw√§hlen der erforderlichen Operation aus der Liste, z. B. R√ºckzahlung eines Kredits oder Auff√ºllen eines Kontos; </li><li>  teilweises Ausf√ºllen des entsprechenden Formulars (Zahlungsdetails werden automatisch mit dem Namen der Organisation oder dem vom Benutzer eingegebenen Namen des Zahlungsempf√§ngers ausgef√ºllt); </li><li>  Automatische Best√§tigung von Vorg√§ngen mithilfe von SMS-Nachrichten oder elektronischen Signaturen. </li></ul><br>  Aus Sicht des Entwicklers umfasst die Implementierung dieser Phasen die L√∂sung der folgenden Aufgaben: <br><br><ul><li>  √úberpr√ºfung des Status des RBS-Systems, Sicherstellung der Relevanz von Daten zu Vorg√§ngen in der Liste; </li><li>  asynchrone Verarbeitung von Datenfl√ºssen beim Ausf√ºllen eines Formulars, einschlie√ülich Daten, die vom Benutzer eingegeben und von Informationsnachrichtendiensten empfangen wurden (z. B. Name, TIN und BIC der Bank); </li><li>  Validierung des ausgef√ºllten Formulars; </li><li>  Automatisches Speichern von Daten im Formular. </li></ul><br><h3>  √úberpr√ºfen des Status des RBS-Systems </h3><br>  Der Prozess zum Abrufen relevanter Daten aus dem RB-System, z. B. Informationen √ºber eine Kreditlinie oder den Status eines Zahlungsauftrags, umfasst zwei Phasen: <br><br><ul><li>  √úberpr√ºfen des Datenverf√ºgbarkeitsstatus; </li><li>  aktualisierte Daten empfangen. </li></ul><br>  Um den aktuellen Status der Daten zu √ºberpr√ºfen, werden innerhalb eines bestimmten Zeitraums und bis eine Antwort √ºber die Bereitschaft der Daten eingeht, Anforderungen an die API des Systems gestellt <br><br>  F√ºr das RB-System gibt es mehrere m√∂gliche Antworten: <br><br><ul><li>  {leer: wahr} - die Daten sind noch nicht fertig; </li><li>  aktualisierte Daten k√∂nnen vom Kunden empfangen werden; </li></ul><br><pre><code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">empty</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">// -   }</span></span></code> </pre> <br><ul><li>  ein Fehler. </li></ul><br>  Infolgedessen erfolgt der Empfang der relevanten Daten in Form von: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MIN_TIME = <span class="hljs-number"><span class="hljs-number">2000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_TIME = <span class="hljs-number"><span class="hljs-number">60000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EXP_BASE = <span class="hljs-number"><span class="hljs-number">1.4</span></span>; request() <span class="hljs-comment"><span class="hljs-comment">//     .pipe( expand((response, index) =&gt; { const delayTime = Math.min(MIN_TIME * Math.pow(EXP_BASE, index), MAX_TIME); return response.empty ? request().pipe(delay(delayTime)) : EMPTY; }), last() ) .subscribe((response) =&gt; { /** -  */ });</span></span></code> </pre><br><br>  Lassen Sie uns Schritt f√ºr Schritt analysieren: <br><br><ol><li>  Wir senden eine Anfrage.  Anfrage () </li><li>  Die Antwort wird erweitert.  Expand ist eine RxJS-Anweisung, die den Code innerhalb ihres Blocks f√ºr jede n√§chste Benachrichtigung f√ºr das interne und externe Observable rekursiv wiederholt, bis der Stream seinen erfolgreichen Abschluss meldet.  Um den Stream zu vervollst√§ndigen, ist es daher erforderlich, ein solches Observable zur√ºckzugeben, damit es kein einziges n√§chstes gibt - LEER. </li><li>  Wenn die Antwort {leer: wahr} kam, stellen wir nach einer bestimmten Zeitverz√∂gerung (delayTime) eine zweite Anfrage.  Um den Server nicht mit Anforderungen zu √ºberlasten, erh√∂hen wir das Zeitintervall f√ºr den Ping mit jeder neuen Anforderung. </li><li>  Wenn w√§hrend der n√§chsten Anfrage etwas anderes als Antwort kam, h√∂ren wir auf zu pingen (LEER zur√ºckgeben) und geben das Ergebnis der letzten Anfrage an den Abonnenten zur√ºck (last () -Operator). </li><li>  Nach Erhalt der Antwort nehmen wir das Ergebnis und verarbeiten es.  Ein Objekt des Formulars wird abonniert: </li></ol><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">empty</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">// -   }</span></span></code> </pre><br><br><h3>  Reaktive Formen </h3><br>  Betrachten Sie die Aufgabe, ein reaktives Webformular eines Zahlungsdokuments mithilfe der ReactiveForms-Bibliothek aus dem Angular-Framework zu entwerfen. <br><br>  Mit den drei Basisklassen der Bibliothek FormControl, FormGroup und FormArray k√∂nnen Sie eine deklarative Beschreibung der Formularfelder verwenden, die Anfangswerte der Felder festlegen und au√üerdem Validierungsregeln f√ºr jedes Feld festlegen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl(<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required), <span class="hljs-comment"><span class="hljs-comment">//          surname: new FormControl('') });</span></span></code> </pre><br><br>  F√ºr Formulare mit einer gro√üen Anzahl von Feldern ist es √ºblich, den FormBuilder-Dienst zu verwenden, mit dem Sie sie mit kompakterem Code erstellen k√∂nnen <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.group({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required], <span class="hljs-attr"><span class="hljs-attr">surname</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> });</code> </pre><br><br>  Nach dem Erstellen des Formulars in der Vorlage auf der Zahlungsauftragsseite reicht es aus, einen Link zum myForm-Formular sowie die Namen der Felder Vor- und Nachname anzugeben <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formGroup</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myForm"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>Name: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>Surname: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Das resultierende Design erm√∂glicht es Ihnen, jeden Informationsfluss zu generieren und zu verfolgen, der als Ergebnis von Benutzereingaben und basierend auf der Gesch√§ftslogik der Anwendung durch die Formularfelder flie√üt.  Abonnieren Sie dazu einfach die Ereignisse, die vom asynchronen Beobachter des ValueChanges-Formulars generiert wurden <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm.valueChanges .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> { ‚Ä¶ <span class="hljs-comment"><span class="hljs-comment">//     })</span></span></code> </pre><br><br>  Angenommen, die Gesch√§ftslogik definiert die Anforderungen f√ºr das automatische Ausf√ºllen der Details des Zahlungsziels, wenn der Benutzer die TIN des Empf√§ngers oder den Namen der Organisation eingibt.  Der Code f√ºr die Verarbeitung der vom Benutzer in die TIN / den Namen der Organisation eingegebenen Daten sieht folgenderma√üen aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.payForm.valueChanges .pipe( mergeMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getRequisites(value)) <span class="hljs-comment"><span class="hljs-comment">//       ) .subscribe(requisites =&gt; { this.patchFormByRequisites(requisites) //        })</span></span></code> </pre><br><br><h3>  Validierung </h3><br>  Validatoren gibt es in zwei Formen: <br><br><ul><li>  synchron; </li><li>  asynchron. </li></ul><br>  Wir begegnen regelm√§√üig synchronen Validatoren - dies sind Funktionen, die die eingegebenen Daten bei der Arbeit mit dem Feld √ºberpr√ºfen.  In Bezug auf reaktive Formen: <br>  "Ein synchroner Validator ist eine Funktion, die Kontrollformen annimmt und einen wahrheitsgem√§√üen Wert zur√ºckgibt, wenn ein Fehler vorliegt und andernfalls ein Fehler vorliegt." <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">customValidator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isInvalid(control.value) ? { <span class="hljs-attr"><span class="hljs-attr">code</span></span>: <span class="hljs-string"><span class="hljs-string">"mistake"</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">"smth wents wrong"</span></span> } : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre><br><br>  Wir werden einen Validator implementieren, der pr√ºft, ob der Benutzer in dem Formular eine Reihe von Dokumenten angegeben hat, wenn der Pass zuvor als Typ des Ausweisdokuments angegeben wurde: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requredSeria</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> docType = control.parent.get(<span class="hljs-string"><span class="hljs-string">"docType"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (docType &amp;&amp; docType.value === <span class="hljs-string"><span class="hljs-string">"passport"</span></span> &amp;&amp; !control.value) { error = { <span class="hljs-attr"><span class="hljs-attr">code</span></span>: <span class="hljs-string"><span class="hljs-string">"wrongSeria"</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">"  "</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> error; }</code> </pre><br><br>  Hier verweisen wir auch auf das √ºbergeordnete Formular und erhalten damit den Wert eines anderen Feldes.  Es war m√∂glich, nur true als Fehler zur√ºckzugeben, aber in diesem Fall wurde beschlossen, etwas anderes zu tun.  Sie k√∂nnen diese Fehlermeldungen im Fehlerfeld eines Steuerelements oder Formulars abfangen.  Wenn das Feld mehrere Validatoren enth√§lt, k√∂nnen Sie genau angeben, welcher der Validatoren die gew√ºnschte Fehlermeldung nicht anzeigen oder die Validierung anderer Felder anpassen konnte. <br><br>  Der Validator wird dem Formular wie folgt hinzugef√ºgt: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.documentForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.group({ <span class="hljs-attr"><span class="hljs-attr">docType</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required], <span class="hljs-attr"><span class="hljs-attr">seria</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, requredSeria], <span class="hljs-attr"><span class="hljs-attr">number</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> });</code> </pre><br><br>  Standardm√§√üig sind auch mehrere h√§ufig vorkommende Validatoren verf√ºgbar.  Alle von ihnen werden durch statische Methoden der Validators-Klasse dargestellt.  Es gibt auch Methoden zum Erstellen von Validatoren. <br>  Die Unrichtigkeit eines Feldes f√ºhrt sofort zur Ung√ºltigkeit des gesamten Formulars.  Dies kann verwendet werden, wenn Sie eine bestimmte OK-Schaltfl√§che deaktivieren m√ºssen, wenn das Formular mindestens ein ung√ºltiges Feld enth√§lt.  Dann kommt es darauf an, eine Bedingung ‚Äûmyform.invalid‚Äú zu √ºberpr√ºfen, die true zur√ºckgibt, wenn das Formular ung√ºltig ist. <br><br>  Der asynchrone Validator hat einen Unterschied - den Typ des R√ºckgabewerts.  Der Wahrheits- oder Falschwert muss in einem Versprechen oder in einem Observable √ºbergeben werden. <br><br>  Jedes Steuerelement oder jedes Formular hat einen Status (mySuperForm.status), der "G√úLTIG", "UNG√úLTIG", "DEAKTIVIERT" sein kann.  Da bei Verwendung von asynchronen Validatoren m√∂glicherweise nicht klar ist, in welchem ‚Äã‚ÄãStatus sich das Formular gerade befindet, gibt es den Sonderstatus "PENDING".  Dank dieser Bedingung (mySuperForm.status === "PENDING") k√∂nnen Sie den Preloader anzeigen oder ein anderes Formular-Styling vornehmen. <br><br><h3>  Automatisch speichern </h3><br>  Die Entwicklung von Bankensoftware (Software) umfasst die Arbeit mit verschiedenen Standarddokumenten.  Dies sind beispielsweise Antragsformulare oder Frageb√∂gen, die aus Dutzenden von erforderlichen Feldern bestehen k√∂nnen.  Wenn Sie mit solch umfangreichen Dokumenten arbeiten, ist f√ºr zus√§tzlichen Benutzerkomfort eine automatische Speicherunterst√ºtzung erforderlich. Wenn Sie Ihre Internetverbindung oder andere technische Probleme verlieren, bleiben die zuvor eingegebenen Daten in der Entwurfsversion auf dem Server. <br><br>  Hier sind die Hauptaspekte der automatischen Speicherprozedur f√ºr die Client-Server-Architektur: <br><br><ol><li>  Speicheranforderungen m√ºssen vom Server in der Reihenfolge verarbeitet werden, in der die √Ñnderungen vorgenommen wurden.  Wenn Sie sofort eine Anfrage an jede √Ñnderung senden, k√∂nnen Sie nicht garantieren, dass eine fr√ºhere Anfrage nicht als n√§chstes kommt und neue √Ñnderungen nicht √ºberschreibt. </li><li>  Es ist nicht erforderlich, eine gro√üe Anzahl von Anforderungen an den Server zu senden, bis der Benutzer die Eingabe abgeschlossen hat. Es reicht aus, dies durch Timing zu tun. </li><li>  Wenn mehrere √Ñnderungen mit einer relativ gro√üen Verz√∂gerung vorgenommen wurden und die Anforderung f√ºr die ersten √Ñnderungen noch nicht zur√ºckgegeben wurde, m√ºssen keine Anforderungen f√ºr jede nachfolgende √Ñnderung sofort nach der R√ºckgabe der ersten Anforderung gesendet werden.  Sie k√∂nnen nur letzteres nehmen, um keine irrelevanten Daten zu senden. </li></ol><br>  Der erste Fall kann einfach mit dem Operator <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">concatMap behandelt</a> werden.  Der zweite Fall wird ohne Probleme mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">debounceTime</a> gel√∂st.  Die Logik des dritten kann beschrieben werden als: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lastRequest$ = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BehaviorSubject(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   queue$.subscribe(lastRequest$); queue$ .pipe( debounceTime(1000), exaustMap(request$ =&gt; request$.pipe( //  ,     map(response =&gt; ({request$, response})), //       catchError(() =&gt; of(null) //   ) ) .subscribe(({request$, response}) =&gt; { if (lastRequest$.value !== request$) { queue$.next(lastRequest$.value); //     } });</span></span></code> </pre><br><br>  Es bleibt in saveQueue $, um eine Anfrage zu senden.  Beachten Sie das Vorhandensein des Operators <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">exaustMap</a> anstelle von concatMap.  Dieser Operator muss alle Benachrichtigungen des externen Observable ignorieren, bis der interne seine Beobachtung abgeschlossen hat ("kompiliert").  In unserem Fall m√ºssen wir jedoch die letzte nehmen und den Rest verwerfen, wenn w√§hrend der Anforderung eine Warteschlange mit neuen Benachrichtigungen angezeigt wird.  exaustMap l√§sst alles fallen, auch das letzte.  Daher speichern wir die letzte Benachrichtigung in BehaviorSubject. Wenn sich die aktuell abgeschlossene Anforderung von der letzten unterscheidet, wird die letzte Anforderung im Abonnement erneut in die Warteschlange gestellt. <br><br>  Es ist auch erw√§hnenswert, Fehler bei Abfragen zu ignorieren, die mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">catchError-Anweisung</a> implementiert wurden.  Sie k√∂nnen eine komplexere Fehlerbehandlung mit einer Benachrichtigung f√ºr den Benutzer schreiben, dass beim Speichern ein Fehler aufgetreten ist.  Im Wesentlichen sollte der Stream jedoch nicht geschlossen werden, wenn ein Fehler im Stream auftritt, wie dies bei Fehlern und vollst√§ndigen Benachrichtigungen der Fall ist. <br><br><h3>  Fazit </h3><br>  Der heutige Entwicklungsstand reaktiver Programmiertechnologien unter Verwendung der RxJS-Bibliothek erm√∂glicht es Ihnen, vollwertige Clientanwendungen f√ºr Online-Banking-Systeme ohne zus√§tzliche Arbeitskosten f√ºr die Organisation der Interaktion mit hoch belasteten Schnittstellen von Remote-Banking-Systemen zu erstellen. <br><br>  Die erste Bekanntschaft mit RxJS kann sogar einen erfahrenen Entwickler abschrecken, der mit den ‚ÄûFeinheiten‚Äú der Bibliothek konfrontiert ist, die das Entwurfsmuster ‚ÄûObserver‚Äú implementieren.  Um diese Schwierigkeiten m√∂glicherweise zu √ºberwinden, wird RxJS in Zukunft ein unverzichtbares Werkzeug sein, um die Probleme der asynchronen Verarbeitung heterogener Datenstr√∂me in Echtzeit zu l√∂sen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425897/">https://habr.com/ru/post/de425897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425883/index.html">Vollzeit</a></li>
<li><a href="../de425887/index.html">Und hier ist die neunte Generation von Intel Core</a></li>
<li><a href="../de425889/index.html">Oktober IT Events Digest (Teil 2)</a></li>
<li><a href="../de425891/index.html">3D-Bus - eine vielversprechende Architektur von Computersystemen</a></li>
<li><a href="../de425893/index.html">‚ÄûFlutter spricht die Community an, aber noch nicht die Kunden‚Äú: Interview mit Paulina Szklarska</a></li>
<li><a href="../de425899/index.html">Ameisenh√ºgel oder Festung? Ich baue ein Haus zum Preis einer Wohnung. 1 Teil</a></li>
<li><a href="../de425901/index.html">Wetterstation auf Arduino von A bis Z. Teil 1</a></li>
<li><a href="../de425903/index.html">Urlaub kommt zu uns: SCRF hat das ISM-Band von 868 MHz verdoppelt</a></li>
<li><a href="../de425905/index.html">So schreiben Sie Assembler-Code mit √ºberlappenden Anweisungen (eine andere Technik zum Verschleiern von Bytecode)</a></li>
<li><a href="../de425907/index.html">Wir machen ein maschinelles Lernprojekt in Python. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>