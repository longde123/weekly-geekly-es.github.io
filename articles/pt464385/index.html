<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÇ üë©üèæ‚Äçüéì üë©üèø‚Äçüé§ Python como o caso final de C ++. Parte 1/2 üë©üèæ‚Äçü§ù‚Äçüë®üèΩ üèôÔ∏è ü§πüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Do tradutor 

 Brandon Rhodes √© uma pessoa muito modesta que se apresenta no Twitter como "um programador Python que paga um empr√©stimo √† comunidade n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python como o caso final de C ++. Parte 1/2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464385/"><div class="spoiler">  <b class="spoiler_title">Do tradutor</b> <div class="spoiler_text"><p>  Brandon Rhodes √© uma pessoa muito modesta que se apresenta no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Twitter</a> como "um programador Python que paga um empr√©stimo √† comunidade na forma de relat√≥rios ou ensaios".  O n√∫mero desses "relat√≥rios e ensaios" √© impressionante, assim como o n√∫mero de projetos gratuitos dos quais Brandon foi ou contribui.  E Brandon publicou dois livros e est√° escrevendo um terceiro. </p><br><p>  Muitas vezes encontro nos coment√°rios sobre Habr√© um equ√≠voco ou rejei√ß√£o fundamental de linguagens din√¢micas, tipagem din√¢mica, programa√ß√£o generalizada e outros paradigmas.  Estou publicando esta tradu√ß√£o (transcri√ß√£o) autorizada (abreviada) de um dos relat√≥rios de Brandon, na esperan√ßa de que ajude os programadores existentes nos paradigmas das linguagens est√°ticas a entender melhor as linguagens din√¢micas, em particular o Python. </p><br><p>  Como √© habitual comigo, pe√ßo que me informe no PM sobre meus erros e erros de digita√ß√£o. </p></div></div><br><p> O que a frase "caso marginal" significa no t√≠tulo do meu relat√≥rio?  O caso limite surge quando voc√™ itera uma sequ√™ncia de op√ß√µes at√© atingir o valor extremo.  Por exemplo, um pol√≠gono de n lados.  Se n = 3, ent√£o este √© um tri√¢ngulo, n = 4 √© um quadr√¢ngulo, n = 5 √© um pent√°gono etc. √Ä medida que n se aproxima do infinito, os lados se tornam menores e maiores, e o contorno do pol√≠gono se torna como um c√≠rculo.  Assim, o c√≠rculo √© o caso limitante para pol√≠gonos regulares.  √â o que acontece quando uma certa id√©ia √© levada ao limite. </p><br><p>  Eu quero falar sobre Python como um caso extremo de C ++.  Se voc√™ pegar todas as boas id√©ias do C ++ e limp√°-las at√© a conclus√£o l√≥gica, tenho certeza de que voc√™ terminar√° no Python t√£o naturalmente quanto uma s√©rie de pol√≠gonos chega a um c√≠rculo. </p><a name="habracut"></a><br><h1>  Ativos n√£o essenciais </h1><br><p> Fiquei interessado em Python nos anos 90: foi um per√≠odo na minha vida em que me livrei de "ativos n√£o essenciais", como eu o chamo.  Muitas coisas come√ßaram a me aborrecer.  Interrup√ß√µes, por exemplo.  Lembre-se, uma vez em muitas placas de computador, houve contatos com jumpers?  E voc√™ define esses jumpers nos manuais para que a placa de v√≠deo receba uma interrup√ß√£o de prioridade mais alta, para que seu jogo corra mais r√°pido?  Ent√£o, eu estava cansado de alocar e liberar mem√≥ria usando <code>malloc()</code> e <code>free()</code> ao mesmo tempo em que parei de ajustar o desempenho do meu computador com jumpers.  Era 1997 mais ou menos. </p><br><p>  Quero dizer, quando estudamos um processo, geralmente nos esfor√ßamos para obter controle completo sobre ele, para ter em m√£os todas as alavancas e bot√µes poss√≠veis.  Ent√£o algumas pessoas ainda est√£o fascinadas por essa possibilidade de controle.  Mas meu personagem √© que, assim que me acostumo √† ger√™ncia e entendo o que √© isso, come√ßo imediatamente a procurar a oportunidade de abrir m√£o de alguns dos meus poderes, transferir alavancas e bot√µes para alguma m√°quina, para que isso atribua interrup√ß√µes para mim. </p><br><p>  Portanto, no final dos anos 90, eu estava procurando uma linguagem de programa√ß√£o que me permitisse focar na √°rea de assunto e na modelagem de tarefas, em vez de me preocupar com a √°rea da mem√≥ria do meu computador armazenada.  Como podemos simplificar o C ++ sem repetir os pecados das famosas linguagens de script? </p><br><p>  Por exemplo, eu n√£o poderia usar Perl, e voc√™ sabe por qu√™?  Este cifr√£o!  Ele imediatamente deixou claro que o criador do Perl n√£o entendia como as linguagens de programa√ß√£o funcionavam.  Voc√™ usa o d√≥lar no Bash para separar nomes de vari√°veis ‚Äã‚Äãdo restante da cadeia, porque um programa Bash consiste em comandos literalmente percebidos e seus par√¢metros.  Mas depois de conhecer essas linguagens de programa√ß√£o, nas quais as seq√º√™ncias de caracteres s√£o colocadas entre pares de caracteres pequenos chamados aspas e n√£o em todo o texto do programa, voc√™ come√ßa a perceber <code>$</code> como lixo visual.  O cifr√£o √© in√∫til, √© feio, deve desaparecer!  Se voc√™ deseja criar uma linguagem para programa√ß√£o s√©ria, n√£o use caracteres especiais para indicar vari√°veis. </p><br><h1>  Sintaxe </h1><br><p>  E a sintaxe?  Tome C como base!  Funciona muito bem.  Permita que a atribui√ß√£o seja indicada por um sinal de igual.  Essa designa√ß√£o n√£o √© aceita em todos os idiomas, mas, de uma maneira ou de outra, muitos est√£o acostumados.  Mas n√£o vamos fazer da atribui√ß√£o uma express√£o.  Os usu√°rios de nossa linguagem ser√£o n√£o apenas programadores profissionais, mas tamb√©m crian√ßas em idade escolar, cientistas ou cientistas de dados (se voc√™ n√£o souber qual dessas categorias de usu√°rios escreve o pior c√≥digo, sugerirei que n√£o s√£o crian√ßas em idade escolar).  N√£o daremos aos usu√°rios a oportunidade de alterar o estado das vari√°veis ‚Äã‚Äãem locais inesperados e tornaremos a atribui√ß√£o um operador. </p><br><p>  O que ent√£o deve ser usado para denotar igualdade se o sinal de igual j√° tiver sido usado para atribui√ß√£o?  Claro, dupla atribui√ß√£o, como √© feito em C!  Muitos j√° est√£o acostumados.  Tamb√©m emprestaremos de C a nota√ß√£o para todas as opera√ß√µes aritm√©ticas e bit a bit, porque essas nota√ß√µes funcionam e muitas est√£o felizes com elas. </p><br><p>  Claro, podemos melhorar alguma coisa.  O que voc√™ pensa quando v√™ o sinal de porcentagem no texto do programa?  Sobre interpola√ß√£o de strings, √© claro!  Embora o <code>%</code> seja principalmente um operador de captura de m√≥dulo, ele era simplesmente indefinido para seq√º√™ncias de caracteres.  E se sim, por que n√£o reutiliz√°-lo? </p><br><p>  Literais num√©ricos e de cadeias que controlam seq√º√™ncias com barras invertidas - tudo isso ser√° semelhante a C. </p><br><p>  Controle de fluxo de execu√ß√£o?  O mesmo <code>if</code> , <code>else</code> , <code>while</code> , <code>break</code> e <code>continue</code> .  Obviamente, adicionaremos um pouco de divers√£o ao cooptar os bons e velhos <code>for</code> iterar sobre estruturas de dados e intervalos de valores.  Isso ser√° proposto posteriormente no C ++ 11, mas no Python, o operador <code>for</code> encapsulou todas as opera√ß√µes para calcular tamanhos, atravessar links, incrementar o contador etc., ou seja, fazer tudo o que era necess√°rio para fornecer ao usu√°rio um elemento da estrutura de dados.  Que tipo de estruturas?  N√£o importa, basta pass√°-lo <code>for</code> , ele vai descobrir. </p><br><p>  Tamb√©m tomaremos emprestadas exce√ß√µes do C ++, mas as tornaremos t√£o baratas em termos de consumo de recursos que elas podem ser usadas n√£o apenas para lidar com erros, mas tamb√©m para controlar o fluxo de execu√ß√£o.  Tornaremos a indexa√ß√£o mais interessante adicionando o fatiamento - a capacidade de indexar n√£o apenas elementos individuais de estruturas de dados sequenciais, mas tamb√©m seus intervalos. </p><br><p>  Ah sim!  Corrigiremos a falha de design original em C - adicione uma v√≠rgula pendente! </p><br><p>  Essa hist√≥ria come√ßou com Pascal, uma linguagem terr√≠vel na qual um ponto e v√≠rgula √© usado como <em>delimitador de</em> express√£o.  Isso significa que o usu√°rio deve colocar um ponto e v√≠rgula no final de <em>cada</em> express√£o no bloco, <em>exceto a √∫ltima</em> .  Portanto, toda vez que voc√™ altera a ordem das express√µes em um programa no Pascal, corre o risco de receber um erro de sintaxe se n√£o remover o ponto-e-v√≠rgula da √∫ltima linha e adicion√°-lo ao final da linha que costumava ser a √∫ltima. </p><br><pre> <code class="plaintext hljs">If (n = 0) then begin writeln('N is now zero'); func := 1 end</code> </pre> <br><p>  Kernigan e Ritchie fizeram a coisa certa quando definiram o ponto-e-v√≠rgula em C como o <em>terminador da</em> express√£o, e n√£o o delimitador, criando essa maravilhosa simetria quando cada linha do programa, incluindo a √∫ltima, termina a mesma e pode ser trocada livremente.  Infelizmente, no futuro, um senso de harmonia mudou para eles, e eles fizeram da v√≠rgula um <em>separador</em> em inicializadores est√°ticos.  Isso parece bom quando a express√£o se encaixa em uma linha: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a[] = {<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>};</code> </pre> <br><p>  mas quando seu inicializador fica mais longo e voc√™ o organiza verticalmente, voc√™ obt√©m a mesma assimetria desconfort√°vel que em Pascal: </p><br><pre> <code class="plaintext hljs">int a[] = { 4, 5, 6 };</code> </pre> <br><p>  No est√°gio inicial de seu desenvolvimento, o Python tornou a v√≠rgula suspensa nas estruturas de dados completamente opcional, independentemente de como os elementos dessa estrutura s√£o organizados: horizontal ou verticalmente.  A prop√≥sito, isso √© muito conveniente para a gera√ß√£o autom√°tica de c√≥digo: voc√™ n√£o precisa tratar o √∫ltimo elemento como um caso especial. </p><br><p>  Posteriormente, os padr√µes C99 e C ++ 11 tamb√©m corrigiram o mal-entendido inicial, permitindo adicionar uma v√≠rgula ap√≥s o √∫ltimo literal no inicializador. </p><br><h1>  Namespaces </h1><br><p>  Tamb√©m precisamos implementar em nossa linguagem de programa√ß√£o algo como namespaces ou namespaces.  Esta √© uma parte cr√≠tica da linguagem que deve nos salvar de erros como conflitos de nome.  Seremos mais f√°ceis que o C ++: em vez de dar ao usu√°rio a capacidade de nomear arbitrariamente o espa√ßo para nome, criaremos um espa√ßo para nome por m√≥dulo (arquivo) e os designaremos com nomes de arquivo.  Por exemplo, se voc√™ criar o m√≥dulo <code>foo.py</code> , ele receber√° o espa√ßo de nomes <code>foo</code> . </p><br><p>  Para trabalhar com um modelo simplificado de namespaces, um usu√°rio precisa de apenas um operador. </p><br><p>  Crie o diret√≥rio <code>my_package</code> , coloque o arquivo <code>my_module.py</code> e declare a classe no arquivo: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> READ = <span class="hljs-number"><span class="hljs-number">1</span></span> WRITE = <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br><p>  o acesso aos atributos da classe ser√° o seguinte: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_package.my_module my_package.my_module.C.READ</code> </pre> <br><p>  N√£o se preocupe, n√£o for√ßaremos o usu√°rio a imprimir o nome completo toda vez.  Daremos a ele a oportunidade de usar v√°rias vers√µes da declara√ß√£o de <code>import</code> para variar o grau de "proximidade" do espa√ßo para nome: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_package.my_module my_package.my_module.C.READ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> my_package <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_module my_module.C.READ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> my_package.my_module <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> C C.READ</code> </pre> <br><p>  Assim, os mesmos nomes dados em pacotes diferentes nunca entrar√£o em conflito: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json j = json.load(file) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle p = pickle.load(file)</code> </pre> <br><p>  O fato de cada m√≥dulo ter seu pr√≥prio espa√ßo para nome tamb√©m significa que n√£o precisamos de um modificador <code>static</code> .  No entanto, lembramos de uma fun√ß√£o executada <code>static</code> - encapsulando vari√°veis ‚Äã‚Äãinternas.  Para mostrar aos colegas que um determinado nome (vari√°vel, classe ou m√≥dulo) n√£o √© p√∫blico, iniciamos com um sublinhado, por exemplo, <code>_ignore_this</code> .  Tamb√©m pode ser um sinal para o IDE n√£o usar esse nome no preenchimento autom√°tico. </p><br><h1>  Sobrecarga de fun√ß√£o </h1><br><p>  N√£o implementaremos sobrecarga de fun√ß√µes em nosso idioma.  O mecanismo de sobrecarga √© muito complicado.  Em vez disso, usaremos argumentos opcionais com valores padr√£o que podem ser omitidos da chamada, bem como argumentos nomeados para ‚Äúpular‚Äù sobre os argumentos opcionais com padr√µes v√°lidos e definir apenas os valores que diferem dos padr√µes.  √â importante ressaltar que a falta de sobrecarga nos poupar√° da necessidade de determinar qual fun√ß√£o do conjunto de fun√ß√µes sobrecarregadas acabou de ser chamada, como o gerenciador de chamadas funcionava: a fun√ß√£o √© sempre uma neste m√≥dulo, √© f√°cil encontrar pelo nome. </p><br><h1>  APIs do sistema </h1><br><p>  Daremos ao usu√°rio acesso total a muitas APIs do sistema, incluindo soquetes.  N√£o entendo por que os autores de linguagens de script sempre oferecem suas pr√≥prias maneiras engenhosas de abrir um soquete.  No entanto, eles nunca realizam a API do Unix Socket completa.  Eles implementam 5-6 fun√ß√µes que entendem e jogam fora todo o resto.  O Python, diferentemente deles, possui m√≥dulos padr√£o para interagir com o sistema operacional que implementam cada chamada de sistema padr√£o.  Isso significa que voc√™ pode abrir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o livro de Stevens</a> agora e come√ßar a escrever o c√≥digo.  E todos os seus soquetes, processos e garfos funcionar√£o exatamente como ele diz.  Sim, √© poss√≠vel que Guido ou os primeiros colaboradores do Python tenham feito exatamente isso, porque estavam com pregui√ßa de escrever sua implementa√ß√£o das bibliotecas do sistema, com pregui√ßa de explicar aos usu√°rios novamente como os soquetes funcionam.  Mas, como resultado, eles obtiveram um efeito maravilhoso: voc√™ pode transferir todo o seu conhecimento UNIX adquirido em C e C ++ para o ambiente Python. </p><br><p>  Portanto, decidimos quais recursos ‚Äúemprestaremos‚Äù do C ++ para criar nossa linguagem de script simples.  Agora precisamos decidir o que queremos consertar. </p><br><h1>  Comportamento indefinido </h1><br><p>  Comportamento desconhecido, comportamento indefinido, comportamento definido pela implementa√ß√£o ... Todas essas s√£o id√©ias ruins para a linguagem que ser√° usada por crian√ßas em idade escolar, cientistas e cientistas de dados.  E o ganho de desempenho para o qual essas coisas s√£o permitidas geralmente √© insignificante em compara√ß√£o com os inconvenientes.  Em vez disso, anunciaremos que qualquer programa sintaticamente correto produz o mesmo resultado em qualquer plataforma.  Vamos descrever o padr√£o da linguagem com frases como ‚ÄúPython avalia todas as express√µes da esquerda para a direita‚Äù em vez de tentar reorganizar os c√°lculos, dependendo do processador, sistema operacional ou fase da lua.  Se o usu√°rio tem certeza de que a ordem dos c√°lculos √© importante, ele tem o direito de reescrever o c√≥digo corretamente: no final, o usu√°rio √© o principal. </p><br><h1>  Prioridades de opera√ß√£o </h1><br><p>  Voc√™ deve ter encontrado erros semelhantes: express√£o </p><br><pre> <code class="cpp hljs">oflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> == nflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br><p>  sempre retorna 0, porque as compara√ß√µes em C t√™m preced√™ncia sobre opera√ß√µes bit a bit.  Em outras palavras, essa express√£o avalia como </p><br><pre> <code class="cpp hljs">oflags &amp; (<span class="hljs-number"><span class="hljs-number">0x80</span></span> == nflags) &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br><p>  Oh, esse C! </p><br><p>  Eliminaremos a causa potencial de tais erros em nossa linguagem de script simples, colocando a prioridade das opera√ß√µes de compara√ß√£o atr√°s da aritm√©tica e da manipula√ß√£o de bits, para que a express√£o do nosso exemplo seja calculada de maneira mais intuitiva: </p><br><pre> <code class="cpp hljs">(oflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span>) == (nflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span>)</code> </pre> <br><h1>  Outras melhorias </h1><br><p>  A legibilidade do c√≥digo √© importante para n√≥s.  Se as opera√ß√µes aritm√©ticas da linguagem C s√£o familiares ao usu√°rio, mesmo pela aritm√©tica da escola, a confus√£o entre opera√ß√µes l√≥gicas e bit a bit √© uma fonte clara de erros.  Substituiremos o duplo e comercial pela palavra ee a dupla linha vertical pela palavra <code>or</code> , para que nossa linguagem se pare√ßa mais com a fala humana do que com o piquete de caracteres de ‚Äúcomputador‚Äù. </p><br><p>  Vamos deixar a possibilidade de computa√ß√£o abreviada para nossos operadores l√≥gicos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://en.wikipedia.org/wiki/Short-circuit_evaluation</a> ), mas tamb√©m damos a eles a capacidade de retornar o valor final de qualquer tipo, n√£o apenas booleano.  Ent√£o express√µes como </p><br><pre> <code class="python hljs">s = error.message <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'Error'</span></span></code> </pre> <br><p>  Neste exemplo, a vari√°vel ser√° configurada como <code>error.message</code> se n√£o for vazia, caso contr√°rio, a string 'Error'. </p><br><p>  Estendemos a ideia de C de que 0 √© equivalente a false para objetos que n√£o sejam n√∫meros inteiros.  Por exemplo, em linhas e cont√™ineres vazios. </p><br><p>  Destruiremos o excesso de n√∫mero inteiro.  Nossa linguagem ser√° consistente na implementa√ß√£o e f√°cil de usar; portanto, nossos usu√°rios n√£o precisar√£o lembrar de um valor especial suspeito, pr√≥ximo a dois bilh√µes, ap√≥s o qual o todo, aumentado em um, muda repentinamente de sinal.  Implementamos n√∫meros inteiros que se comportam como n√∫meros inteiros at√© esgotar toda a mem√≥ria dispon√≠vel. </p><br><h1>  Digita√ß√£o estrita vs fraca </h1><br><p>  Outra quest√£o importante no design da linguagem de script: o rigor da digita√ß√£o.  Muitos na plat√©ia est√£o familiarizados com JavaScript?  O que acontece se o n√∫mero 3 for subtra√≠do da sequ√™ncia '4'? </p><br><pre> <code class="javascript hljs">js&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  √ìtimo!  E se voc√™ adicionar o n√∫mero 3 √† sequ√™ncia '4'? </p><br><pre> <code class="javascript hljs">js&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">"43"</span></span></code> </pre> <br><p>  Isso √© chamado de digita√ß√£o frouxa (ou fraca).  Isso √© algo como um complexo de inferioridade quando uma linguagem de programa√ß√£o pensa que um programador a condenar√° se n√£o puder retornar o resultado de qualquer express√£o, mesmo obviamente sem sentido, por tipos de convers√£o repetidos.  O problema √© que a convers√£o de tipo, que uma linguagem de tipo fraco produz automaticamente, muito raramente leva a um resultado significativo.  Vamos tentar convers√µes um pouco mais complexas: </p><br><pre> <code class="javascript hljs">js&gt; [] + [] <span class="hljs-string"><span class="hljs-string">""</span></span> js&gt; [] + {} <span class="hljs-string"><span class="hljs-string">"[object Object]"</span></span></code> </pre> <br><p>  Esperamos que a opera√ß√£o de adi√ß√£o seja comutativa, mas o que acontece se mudarmos os termos no √∫ltimo caso? </p><br><pre> <code class="javascript hljs">js&gt; {} + [] <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  JavaScript n√£o est√° sozinho em seus problemas.  Perl em uma situa√ß√£o semelhante tamb√©m tenta retornar pelo menos algo: </p><br><pre> <code class="perl hljs">perl&gt; <span class="hljs-string"><span class="hljs-string">"3"</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br><p>  E o awk far√° algo assim: </p><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> | awk <span class="hljs-string"><span class="hljs-string">'{print "3" + 1}'</span></span> 4</code> </pre> <br><p>  Os criadores de linguagens de script tradicionalmente acreditam que a digita√ß√£o solta √© <em>conveniente</em> .  Eles estavam enganados: a digita√ß√£o solta √© <em>terr√≠vel</em> !  Viola o princ√≠pio da localidade.  Se houver um erro no c√≥digo, a linguagem de programa√ß√£o dever√° informar o usu√°rio sobre isso, causando uma exce√ß√£o o mais pr√≥ximo poss√≠vel do local problem√°tico no c√≥digo.  Mas em todas essas linguagens, que lan√ßam tipos infinitamente, at√© que algo seja resolvido, o controle geralmente chega ao fim e obtemos o resultado, julgando pelo qual, em nosso programa, algo est√° errado em algum lugar.  E temos que depurar todo o nosso programa, uma linha ap√≥s a outra, para encontrar esse erro. </p><br><p>  A digita√ß√£o solta tamb√©m diminui a legibilidade do c√≥digo, porque, mesmo que usemos corretamente a convers√£o impl√≠cita de tipos em um programa, isso acontece inesperadamente para outro programador. </p><br><p>  No Python, como no C ++, essas express√µes retornar√£o um erro. </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-string"><span class="hljs-string">'4'</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> TypeError &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + <span class="hljs-number"><span class="hljs-number">3</span></span> TypeError</code> </pre> <br><p>  Como a convers√£o de tipo, se realmente necess√°rio, √© f√°cil de escrever explicitamente: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>int(<span class="hljs-string"><span class="hljs-string">'4'</span></span>) + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + str(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">'43'</span></span></code> </pre> <br><p>  Esse c√≥digo √© f√°cil de ler e manter, deixa claro o que exatamente acontece no programa, o que leva a esse resultado.  Isso ocorre porque os programadores Python acreditam que expl√≠cito √© melhor que impl√≠cito, e o erro n√£o deve passar despercebido. </p><br><p>  Python √© uma linguagem fortemente tipada e a √∫nica convers√£o impl√≠cita de tipo ocorre durante opera√ß√µes aritm√©ticas em n√∫meros inteiros, cujo resultado deve ser expresso como um n√∫mero fracion√°rio.  Talvez isso tamb√©m n√£o deva ser permitido no programa, mas nesse caso muitos usu√°rios precisariam explicar imediatamente a diferen√ßa entre n√∫meros inteiros e n√∫meros de ponto flutuante, o que complicaria seus primeiros passos no Python. </p><br><p>  Continua√ß√£o: ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Python como o caso final de C ++.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2/2</a> . " </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464385/">https://habr.com/ru/post/pt464385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464373/index.html">Edge-to-edge no Android: fazendo certo</a></li>
<li><a href="../pt464375/index.html">Como os mecanismos de pesquisa funcionam</a></li>
<li><a href="../pt464377/index.html">Montador sujo hacks 6502</a></li>
<li><a href="../pt464381/index.html">Viagem ao Alasca ou KDD'19 atrav√©s dos olhos de uma testemunha ocular</a></li>
<li><a href="../pt464383/index.html">Como eu coloco as coisas em ordem em um projeto em que h√° uma floresta de m√£os diretas (configura√ß√µes tslint, mais bonitas, etc.)</a></li>
<li><a href="../pt464387/index.html">Pegada russa na saga escandinava dos videogames, terminando</a></li>
<li><a href="../pt464391/index.html">10 relat√≥rios interessantes de confer√™ncias de hackers</a></li>
<li><a href="../pt464393/index.html">Como encontrar cursos de programa√ß√£o e quais s√£o as garantias de emprego</a></li>
<li><a href="../pt464395/index.html">Aleat√≥rio baseado em blockchain RSA</a></li>
<li><a href="../pt464399/index.html">Raspagem da Web no R, Parte 2. Acelerando o processo com computa√ß√£o paralela e usando o pacote Rcrawler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>