<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌱 🤾🏽 🕥 Arduino dans la voiture. Sonner le tableau de bord 👏🏼 👨🏾‍💻 🌿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le dispositif parlant est conçu pour ceux qui ne remarquent pas les ampoules sur le tableau de bord, et se rattrape périodiquement avec le fait qu'ils...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino dans la voiture. Sonner le tableau de bord</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401671/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le dispositif parlant est conçu pour ceux qui ne remarquent pas les ampoules sur le tableau de bord, et se rattrape périodiquement avec le fait qu'ils voyagent avec un frein à main ou des feux de route. </font><font style="vertical-align: inherit;">Ou que la flèche de l'indicateur de vitesse rampait doucement en avant ... Ouais, je l'ai fait moi-même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a été testé sur (au sol) le Daewoo Nexia N150, mais il devrait fonctionner sur n'importe quelle machine avec un compteur de vitesse électronique (capteur de vitesse - 6 impulsions par mètre, un peu comme un standard). </font><font style="vertical-align: inherit;">Les photos sont un peu boueuses (amateur):</font></font><br>
<br>
<img src="http://s010.radikal.ru/i312/1702/1a/9da80561b358.jpg" alt="image"><br>
<a name="habracut"></a><br>
<img src="http://s020.radikal.ru/i710/1702/a7/a69f6a25b9d0.jpg" alt="image"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnalité:</font></font></b><div class="spoiler_text"><b>1.</b>   (5  )    (  )<br>
<br>
) <br>
) <br>
<br>
   ,     mp3-   .  ,       .<br>
<br>
<b>2.</b>       (      ,      0-9).     .<br>
<br>
<b>3.</b>   / ,        « »  « ,  ».       (            -    ).<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Événements sonores (en sourdine)</font></font></b><div class="spoiler_text"> —  (      ) <br>
 —    (  ,     ,   ,    )<br>
 —    (     ,       ,    ).<br>
 —    (    )<br>
 —    40, 50,… 120, 130 /.<br>
 —    40, 50,… 120, 130 /.<br>
 —  ,  , /     (     ).<br>
<br>
  :<br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fhF56peN2yI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connexion à une voiture</font></font></b><div class="spoiler_text"><b>1.</b>   —   : , +12 (        ),    .<br>
<br>
<b>2.</b>   — ,  ,   ().<br>
<br>
     —       «1»,   12       .     +12,   —   «.1».       —  ,    ,    «.0».<br>
<br>
 —      .   1:13,   ,       16 ( )        1,2.<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La composition de l'appareil</font></font></b><div class="spoiler_text"><b>1.</b> Arduino nano v3 <br>
<br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></div></div><br>
<b>2.</b>  mp3 — DFplayer mini <br>
<br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></div></div><br>
   -   tx/rx ,     busy,      ,      ,    .<br>
<br>
<b>3.</b>  PAM8403 ( )<br>
<br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></div></div><br>
<b>4.</b>  , 5  (2   ,  3   DFplayer), 4  (  +12),         +5  LM7805 (   DC/DC  AMSR 7805,        ),  (    3-,      ),    - ( 2.5   ,   )   (  RCA),       (  IDC10,     —    )</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware:</font></font></b><div class="spoiler_text">     ,     ,    <b></b> - (     - IRRecvDump).         (   ,     ,     —   ,  ).<br>
<br>
<pre><code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#include &lt;Wire.h&gt; </span></span>
<span class="hljs-comment"><span class="hljs-comment">//#include &lt;LiquidCrystal_I2C.h&gt;</span></span>
<span class="hljs-meta"><span class="hljs-meta">#include &lt;IRremote.h&gt;</span></span>
<span class="hljs-meta"><span class="hljs-meta">#include &lt;EEPROM.h&gt;</span></span>
<span class="hljs-meta"><span class="hljs-meta">#include &lt;SoftwareSerial.h&gt;</span></span>
<span class="hljs-meta"><span class="hljs-meta">#include &lt;DFPlayer_Mini_Mp3.h&gt;</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> RECV_PIN = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  IR </span></span>
<span class="hljs-function"><span class="hljs-function">IRrecv </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">irrecv</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RECV_PIN</span></span></span><span class="hljs-function">)</span></span>;<font></font>
decode_results results;<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> cfg[<span class="hljs-number"><span class="hljs-number">16</span></span>] = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>};
<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> mp3stek[<span class="hljs-number"><span class="hljs-number">16</span></span>] = {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>};
<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> mp3stekpos = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> busy = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//mp3 busy  0=play</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> softbusy = <span class="hljs-number"><span class="hljs-number">0</span></span>; 
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> nomer_mp3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> unsigned <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> micros_sp = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> sz = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> unsigned <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sp = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> unsigned <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sp20 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//*10</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> boolean st = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ruka = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> dsvet = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//.</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> gaba = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lastspeed = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lastdsvet = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   .</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lastgaba = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   DHO</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lastgabaonoff = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> word gabaonofftimer = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> gabaonoffcounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed40 = <span class="hljs-number"><span class="hljs-number">38</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 40</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed60 = <span class="hljs-number"><span class="hljs-number">58</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 60</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed80 = <span class="hljs-number"><span class="hljs-number">78</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 80</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed110 = <span class="hljs-number"><span class="hljs-number">108</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 110</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed40 = <span class="hljs-number"><span class="hljs-number">36</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 40</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed60 = <span class="hljs-number"><span class="hljs-number">56</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 60</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed80 = <span class="hljs-number"><span class="hljs-number">76</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 80</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed110 = <span class="hljs-number"><span class="hljs-number">106</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 110</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed50 = <span class="hljs-number"><span class="hljs-number">48</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 50</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed50 = <span class="hljs-number"><span class="hljs-number">46</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 50</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed70 = <span class="hljs-number"><span class="hljs-number">68</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 70</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed70 = <span class="hljs-number"><span class="hljs-number">66</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 70</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed90 = <span class="hljs-number"><span class="hljs-number">88</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 90</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed90 = <span class="hljs-number"><span class="hljs-number">86</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 90</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed100 = <span class="hljs-number"><span class="hljs-number">98</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 100</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed100 = <span class="hljs-number"><span class="hljs-number">96</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 100</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed120 = <span class="hljs-number"><span class="hljs-number">118</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 120</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed120 = <span class="hljs-number"><span class="hljs-number">116</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 120</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> speed130 = <span class="hljs-number"><span class="hljs-number">128</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 130</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> unspeed130 = <span class="hljs-number"><span class="hljs-number">126</span></span>; <span class="hljs-comment"><span class="hljs-comment">// no 130</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s40 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s50 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s60 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s70 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s80 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s90 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s100 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s110 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s120 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> s130 = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//LiquidCrystal_I2C lcd(0x3F, 16, 2);</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sensorValue = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//V</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outputValue = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//V</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span><font></font>
{<font></font>
       Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
       Serial.println(<span class="hljs-string"><span class="hljs-string">"start programm NEXIA 1.0"</span></span>);
       <span class="hljs-comment"><span class="hljs-comment">//start IR reciver </span></span>
        irrecv.enableIRIn(); <span class="hljs-comment"><span class="hljs-comment">// Start the receiver</span></span>
	<span class="hljs-comment"><span class="hljs-comment">// initialize the LCD</span></span>
	<span class="hljs-comment"><span class="hljs-comment">//lcd.begin();</span></span>
	<span class="hljs-comment"><span class="hljs-comment">// Turn on the blacklight and print a message.</span></span>
	<span class="hljs-comment"><span class="hljs-comment">//lcd.backlight();</span></span>
<span class="hljs-comment"><span class="hljs-comment">//	lcd.print("Hello, world!");</span></span>
        <span class="hljs-comment"><span class="hljs-comment">//tone (17,3000); //    D3</span></span>
        pinMode(<span class="hljs-number"><span class="hljs-number">2</span></span>, INPUT);	<span class="hljs-comment"><span class="hljs-comment">//       speed</span></span>
        digitalWrite(<span class="hljs-number"><span class="hljs-number">2</span></span>, HIGH);<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
        pinMode(<span class="hljs-number"><span class="hljs-number">3</span></span>, INPUT);	<span class="hljs-comment"><span class="hljs-comment">//      </span></span>
        digitalWrite(<span class="hljs-number"><span class="hljs-number">3</span></span>, HIGH);<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
        pinMode(<span class="hljs-number"><span class="hljs-number">4</span></span>, INPUT);	<span class="hljs-comment"><span class="hljs-comment">//      </span></span>
        digitalWrite(<span class="hljs-number"><span class="hljs-number">4</span></span>, HIGH);<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
        pinMode(<span class="hljs-number"><span class="hljs-number">5</span></span>, INPUT);	<span class="hljs-comment"><span class="hljs-comment">//      </span></span>
        digitalWrite(<span class="hljs-number"><span class="hljs-number">5</span></span>, HIGH);<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-comment"><span class="hljs-comment">//      pinMode(13, OUTPUT);	// </span></span>
        lastgabaonoff = digitalRead(<span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">//gaba</span></span>
        attachInterrupt(<span class="hljs-number"><span class="hljs-number">0</span></span>,speedometr, RISING);<font></font>
        cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">//0=all sound  1=no sound(ruka) 2=no sound all</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-comment"><span class="hljs-comment">//volume mp3 0..30</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-comment"><span class="hljs-comment">//0 = dsvet sound? 1 = no dsvet sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-comment"><span class="hljs-comment">//0 = 40sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">9</span></span>); <span class="hljs-comment"><span class="hljs-comment">//0 = 60sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">10</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 80sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">11</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 110 sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">12</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = Voltmetr sound </span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">13</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = DHO sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">14</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 50sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">15</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 70sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">16</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 90sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">17</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 100sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">18</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 120sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">19</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 130sound</span></span>
        cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]=EEPROM.read(<span class="hljs-number"><span class="hljs-number">20</span></span>);<span class="hljs-comment"><span class="hljs-comment">//0 = 0, 1=1</span></span>
        <span class="hljs-comment"><span class="hljs-comment">// 3</span></span>
        pinMode(<span class="hljs-number"><span class="hljs-number">7</span></span>, INPUT);  <span class="hljs-comment"><span class="hljs-comment">//busy</span></span><font></font>
        mp3_set_serial (Serial);    <font></font>
<span class="hljs-comment"><span class="hljs-comment">//      mp3_set_volume (25);</span></span><font></font>
        mp3setvol();<font></font>
        delay (<span class="hljs-number"><span class="hljs-number">100</span></span>); <font></font>
        add_mp3(<span class="hljs-number"><span class="hljs-number">32</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
       <span class="hljs-comment"><span class="hljs-comment">// </span></span><font></font>
       analogReference (INTERNAL);<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//    voltmeter();</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>){voltmetertest();} <span class="hljs-comment"><span class="hljs-comment">// </span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span><font></font>
{<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
    dsvet = digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    : </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  if (dsvet==1) {  lcd.setCursor(3, 0);  lcd.print("DD ");}</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  else{lcd.setCursor(3, 0); lcd.print("_s ");};</span></span><font></font>
  <font></font>
      ruka = digitalRead(<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    : </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  if (ruka==1) {  lcd.setCursor(0, 0);  lcd.print("_r ");}</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  else{lcd.setCursor(0, 0); lcd.print("RR ");};</span></span><font></font>
  <font></font>
      gaba = digitalRead(<span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    : </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  if (gaba==1) {  lcd.setCursor(6, 0);  lcd.print("GG");}</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  else{lcd.setCursor(6, 0); lcd.print("_g");};</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//voltmetertest(); // </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    digitalWrite(13, !digitalRead(2));</span></span><font></font>
  <font></font>
  <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.setCursor(10, 0);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.print("     ");</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.setCursor(10, 0);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.print(sp);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.setCursor(0, 1);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.print("     ");</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.setCursor(0, 1);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  lcd.print(sp20);</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sz != <span class="hljs-number"><span class="hljs-number">0</span></span>){sz--;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{sp20=<span class="hljs-number"><span class="hljs-number">0</span></span>;sp=<span class="hljs-number"><span class="hljs-number">0</span></span>;};<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">50</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">//  sdisplay();</span></span>
<span class="hljs-comment"><span class="hljs-comment">//</span></span>
gabamute(); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((sp20&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;(ruka==<span class="hljs-number"><span class="hljs-number">0</span></span>)) {rukabeep();}<span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
{ <span class="hljs-comment"><span class="hljs-comment">// .       </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsvet==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( lastdsvet&lt;<span class="hljs-number"><span class="hljs-number">200</span></span>){lastdsvet=lastdsvet+<span class="hljs-number"><span class="hljs-number">1</span></span>;};}
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsvet==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastdsvet&gt;<span class="hljs-number"><span class="hljs-number">35</span></span>)&amp;(lastdsvet&lt;<span class="hljs-number"><span class="hljs-number">38</span></span>)){svetbeep();}; }
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsvet==<span class="hljs-number"><span class="hljs-number">0</span></span>) {lastdsvet=<span class="hljs-number"><span class="hljs-number">0</span></span>;};
<span class="hljs-comment"><span class="hljs-comment">//  . </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((gaba==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(sp20&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( lastgaba&lt;<span class="hljs-number"><span class="hljs-number">150</span></span>){lastgaba=lastgaba+<span class="hljs-number"><span class="hljs-number">1</span></span>;};}
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((gaba==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(sp20&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastgaba&gt;<span class="hljs-number"><span class="hljs-number">20</span></span>)&amp;(lastgaba&lt;<span class="hljs-number"><span class="hljs-number">23</span></span>)){DHO_beep();}; }
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gaba==<span class="hljs-number"><span class="hljs-number">1</span></span>) {lastgaba=<span class="hljs-number"><span class="hljs-number">0</span></span>;};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sp20==<span class="hljs-number"><span class="hljs-number">0</span></span>) {lastgaba=<span class="hljs-number"><span class="hljs-number">0</span></span>;};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    40, 60, 80, 110</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed40)&amp;(sp&gt;=speed40)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s40&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet1beep(); s40=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed40)&amp;(sp&lt;unspeed40)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s40&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet1beep(); s40=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed50)&amp;(sp&gt;=speed50)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s50&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet50beep(); s50=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed50)&amp;(sp&lt;unspeed50)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s50&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet50beep(); s50=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed60)&amp;(sp&gt;=speed60)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s60&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet2beep(); s60=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed60)&amp;(sp&lt;unspeed60)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s60&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet2beep(); s60=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed70)&amp;(sp&gt;=speed70)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s70&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet70beep(); s70=<span class="hljs-number"><span class="hljs-number">1</span></span>; }}; 
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed70)&amp;(sp&lt;unspeed70)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s70&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet70beep(); s70=<span class="hljs-number"><span class="hljs-number">0</span></span>; }}; <span class="hljs-comment"><span class="hljs-comment">//.   66/    " 70" - .     .</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed80)&amp;(sp&gt;=speed80)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s80&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet3beep(); s80=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed80)&amp;(sp&lt;unspeed80)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s80&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet3beep(); s80=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed90)&amp;(sp&gt;=speed90)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s90&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet90beep(); s90=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed90)&amp;(sp&lt;unspeed90)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s90&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet90beep(); s90=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed100)&amp;(sp&gt;=speed100)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s100&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet100beep(); s100=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed100)&amp;(sp&lt;unspeed100)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s100&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet100beep(); s100=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed110)&amp;(sp&gt;=speed110)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s110&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet4beep(); s110=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed110)&amp;(sp&lt;unspeed110)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s110&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet4beep(); s110=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed120)&amp;(sp&gt;=speed120)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s120&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet120beep(); s120=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed120)&amp;(sp&lt;unspeed120)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s120&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet120beep(); s120=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&lt;speed130)&amp;(sp&gt;=speed130)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s130&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { svet130beep(); s130=<span class="hljs-number"><span class="hljs-number">1</span></span>; }};
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((lastspeed&gt;=unspeed130)&amp;(sp&lt;unspeed130)) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s130&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { nsvet130beep(); s130=<span class="hljs-number"><span class="hljs-number">0</span></span>; }};<font></font>
lastspeed=sp;<font></font>
delay(<span class="hljs-number"><span class="hljs-number">50</span></span>);
<span class="hljs-comment"><span class="hljs-comment">//   </span></span>
}<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-comment"><span class="hljs-comment">// voltmeter();</span></span><font></font>
  <font></font>
<span class="hljs-comment"><span class="hljs-comment">//  3</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mp3stekpos != <span class="hljs-number"><span class="hljs-number">0</span></span>) <font></font>
{ busy = digitalRead(<span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    7: </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (softbusy &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) softbusy = softbusy<span class="hljs-number"><span class="hljs-number">-1</span></span>;<span class="hljs-comment"><span class="hljs-comment">// , .. busy   </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((busy&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (softbusy ==<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-comment"><span class="hljs-comment">//   3</span></span>
  {mp3stekpos = mp3stekpos<span class="hljs-number"><span class="hljs-number">-1</span></span>;<font></font>
   nomer_mp3 = mp3stek[<span class="hljs-number"><span class="hljs-number">1</span></span>];
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {mp3_play (mp3stek[<span class="hljs-number"><span class="hljs-number">1</span></span>]);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {mp3_play (mp3stek[<span class="hljs-number"><span class="hljs-number">1</span></span>]+<span class="hljs-number"><span class="hljs-number">100</span></span>);} <span class="hljs-comment"><span class="hljs-comment">// </span></span>
   softbusy = <span class="hljs-number"><span class="hljs-number">25</span></span>;   delay(<span class="hljs-number"><span class="hljs-number">50</span></span>);
   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; i++){mp3stek[i]=mp3stek[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]; }<font></font>
   mp3stek[<span class="hljs-number"><span class="hljs-number">9</span></span>]= <span class="hljs-number"><span class="hljs-number">0</span></span>;  };}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-comment"><span class="hljs-comment">/**/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (irrecv.decode(&amp;results)) <font></font>
  {<font></font>
    Serial.println(results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>);
<span class="hljs-comment"><span class="hljs-comment">//    lcd.setCursor(6, 1); </span></span>
<span class="hljs-comment"><span class="hljs-comment">//    lcd.print(results.value);</span></span><font></font>
    <font></font>
    <span class="hljs-comment"><span class="hljs-comment">// </span></span>
    <span class="hljs-comment"><span class="hljs-comment">//        0-2</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255209021</span></span>)|| (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255218711</span></span>))<font></font>
    {  cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]=cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;
       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">2</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>; };    EEPROM.write(<span class="hljs-number"><span class="hljs-number">5</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]);
       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">5</span></span>);}; <span class="hljs-comment"><span class="hljs-comment">//sound on</span></span>
       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">3</span></span>);}; <span class="hljs-comment"><span class="hljs-comment">//sound off krome ruka</span></span>
       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">2</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">4</span></span>);}; }<span class="hljs-comment"><span class="hljs-comment">//sound off all</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// V+ -   3</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255188111</span></span>)||(results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2155866645</span></span>))<font></font>
    {   cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]=cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">4</span></span>) {cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]=<span class="hljs-number"><span class="hljs-number">4</span></span>;add_mp3(<span class="hljs-number"><span class="hljs-number">41</span></span>);}
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">38</span></span>);}
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">2</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">39</span></span>);}
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">3</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">40</span></span>);}
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">4</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">41</span></span>);}<font></font>
    mp3setvol();   EEPROM.write(<span class="hljs-number"><span class="hljs-number">6</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]);  }<font></font>
    <font></font>
    <span class="hljs-comment"><span class="hljs-comment">// V- -   3</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255210551</span></span>)||(results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2155809015</span></span>))  <font></font>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>)  {add_mp3(<span class="hljs-number"><span class="hljs-number">37</span></span>); }  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]=cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>;}
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">38</span></span>);}
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">2</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">39</span></span>);}
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">3</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">40</span></span>);}<font></font>
      mp3setvol();     EEPROM.write(<span class="hljs-number"><span class="hljs-number">6</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]);   }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255192191</span></span>)  <span class="hljs-comment"><span class="hljs-comment">// sourse -    +100</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>){  cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;}  
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {           cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;} add_mp3(<span class="hljs-number"><span class="hljs-number">42</span></span>);    <font></font>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">20</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">15</span></span>]);    }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255222791</span></span>)    <span class="hljs-comment"><span class="hljs-comment">//  -  .</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {  cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">18</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//no dsvet</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {            cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">19</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//dsvet on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">7</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]);    }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255220751</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 4 -   40</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {  cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">36</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//40 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {           cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">35</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//40 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">8</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]);   }<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255200351</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 5 -   50</span></span>
    {  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">65</span></span>); } <span class="hljs-comment"><span class="hljs-comment">//50 off</span></span>
       <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {          cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">66</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//50 on</span></span>
       EEPROM.write(<span class="hljs-number"><span class="hljs-number">14</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]);    }<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255184031</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 6 -   60</span></span>
    {  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">12</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//60 off</span></span>
       <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>   {         cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">13</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//60 on</span></span>
       EEPROM.write(<span class="hljs-number"><span class="hljs-number">9</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]);   }<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255171791</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 7 -   70</span></span>
    {  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">45</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//70 off</span></span>
       <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>   {         cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">46</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//70 on</span></span>
       EEPROM.write(<span class="hljs-number"><span class="hljs-number">15</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]); }<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255204431</span></span>)   <span class="hljs-comment"><span class="hljs-comment">// 8 -   80</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {  cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">14</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//80 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {           cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">15</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//80 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">10</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]);   }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255179951</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 9 -   90</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">49</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//90 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {           cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">50</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//90 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">16</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]);  }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255194231</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 0 -   100</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">53</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//100 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {          cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">54</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//100 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">17</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]);  }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255167711</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 1 -   110</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">16</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//110 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>   {         cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">17</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//110 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">11</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]);   }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255163631</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 2 -   120</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">57</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//120 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {            cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">58</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//120 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">18</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]);   }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255175871</span></span>)    <span class="hljs-comment"><span class="hljs-comment">// 3 -   130</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">61</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//130 off</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>   {          cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;  add_mp3(<span class="hljs-number"><span class="hljs-number">62</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//130 on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">19</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]);   }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255206471</span></span>)||(results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2155829925</span></span>)) <span class="hljs-comment"><span class="hljs-comment">// ? -  </span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)  { cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">27</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//no </span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>    {         cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">28</span></span>);  voltmetertest(); }<span class="hljs-comment"><span class="hljs-comment">// on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">12</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">7</span></span>]);   }<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>==<span class="hljs-number"><span class="hljs-number">2255190151</span></span>)   <span class="hljs-comment"><span class="hljs-comment">//  -  DHO</span></span>
    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {  cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">31</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//no DHO</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>    {         cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>;   add_mp3(<span class="hljs-number"><span class="hljs-number">30</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//DHO on</span></span>
      EEPROM.write(<span class="hljs-number"><span class="hljs-number">13</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]);    }<font></font>
     <font></font>
    irrecv.resume(); <span class="hljs-comment"><span class="hljs-comment">// Receive the next value</span></span><font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     </span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sdisplay</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ruka==<span class="hljs-number"><span class="hljs-number">1</span></span>) {  Serial.print(<span class="hljs-string"><span class="hljs-string">"ruka=off "</span></span>);}  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ Serial.print(<span class="hljs-string"><span class="hljs-string">"RUKA=ON  "</span></span>);}; 
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsvet==<span class="hljs-number"><span class="hljs-number">1</span></span>) {  Serial.print(<span class="hljs-string"><span class="hljs-string">"dsvet=off "</span></span>);}  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ Serial.print(<span class="hljs-string"><span class="hljs-string">"DSVET=ON  "</span></span>);};  
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gaba==<span class="hljs-number"><span class="hljs-number">1</span></span>) {  Serial.print(<span class="hljs-string"><span class="hljs-string">"gaba=off "</span></span>);}  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ Serial.print(<span class="hljs-string"><span class="hljs-string">"GABA=ON  "</span></span>);};  <font></font>
 Serial.println(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
 Serial.print(<span class="hljs-string"><span class="hljs-string">" speed="</span></span>);<font></font>
 Serial.println(sp);<font></font>
 Serial.println(<span class="hljs-string"><span class="hljs-string">"++++++++++++++++++ END ++++++"</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">speedometr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!st){micros_sp = micros();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {sp20 = (<span class="hljs-number"><span class="hljs-number">12000000</span></span>/(micros() - micros_sp));}  sp=sp20/<span class="hljs-number"><span class="hljs-number">20</span></span>;  st = !st;  sz=<span class="hljs-number"><span class="hljs-number">10</span></span>;}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rukabeep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>  (cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]!=<span class="hljs-number"><span class="hljs-number">2</span></span>) {mp3_play (<span class="hljs-number"><span class="hljs-number">1</span></span>);} delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svetbeep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">2</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">2</span></span>);}}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DHO_beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">8</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">29</span></span>);}}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet1beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>   { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">33</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//40</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet1beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">3</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">34</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n40</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet50beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">63</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//50</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet50beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">9</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">64</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n50</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet2beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>   { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">6</span></span>);}}  <span class="hljs-comment"><span class="hljs-comment">//60</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet2beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">4</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">7</span></span>);}}  <span class="hljs-comment"><span class="hljs-comment">//n60</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet70beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">43</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//70</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet70beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">10</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">44</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n70</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet3beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>   { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">8</span></span>);}}  <span class="hljs-comment"><span class="hljs-comment">//80</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet3beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">5</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">9</span></span>);}}  <span class="hljs-comment"><span class="hljs-comment">//n80</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet90beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">47</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//90</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet90beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">11</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">48</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n90</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet100beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">51</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//100</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet100beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">12</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">52</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n100</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet4beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>   { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">10</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//110</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet4beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>  { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">6</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))   {add_mp3(<span class="hljs-number"><span class="hljs-number">11</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n110</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet120beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">55</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//120</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet120beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">13</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">56</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n120</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svet130beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">59</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//130</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nsvet130beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((cfg[<span class="hljs-number"><span class="hljs-number">14</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>))  {add_mp3(<span class="hljs-number"><span class="hljs-number">60</span></span>);}} <span class="hljs-comment"><span class="hljs-comment">//n130</span></span>
<span class="hljs-comment"><span class="hljs-comment">//void svet1unbeep(){  tone (17,1000);  delay(200);  noTone(17);}</span></span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_mp3</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nomermp3</span></span></span><span class="hljs-function">)</span></span>
{  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((mp3stekpos &gt; <span class="hljs-number"><span class="hljs-number">8</span></span>)&amp;&amp;(cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]&lt;<span class="hljs-number"><span class="hljs-number">2</span></span>))<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
  {  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>)  { tone (<span class="hljs-number"><span class="hljs-number">17</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>);  delay(<span class="hljs-number"><span class="hljs-number">200</span></span>);  tone (<span class="hljs-number"><span class="hljs-number">17</span></span>,<span class="hljs-number"><span class="hljs-number">1400</span></span>);  delay(<span class="hljs-number"><span class="hljs-number">200</span></span>);  noTone(<span class="hljs-number"><span class="hljs-number">17</span></span>);  }}<span class="hljs-comment"><span class="hljs-comment">//      </span></span>
     <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>   {  mp3stekpos = mp3stekpos+<span class="hljs-number"><span class="hljs-number">1</span></span>;  mp3stek[mp3stekpos] = nomermp3;   }} <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mp3setvol</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//    0-4  0-30</span></span></span></span>
{<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>){mp3_set_volume(<span class="hljs-number"><span class="hljs-number">10</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>){mp3_set_volume(<span class="hljs-number"><span class="hljs-number">15</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">2</span></span>){mp3_set_volume(<span class="hljs-number"><span class="hljs-number">20</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">3</span></span>){mp3_set_volume(<span class="hljs-number"><span class="hljs-number">25</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cfg[<span class="hljs-number"><span class="hljs-number">1</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">3</span></span>){mp3_set_volume(<span class="hljs-number"><span class="hljs-number">30</span></span>);}}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">voltmetertest</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
{ outputValue = <span class="hljs-number"><span class="hljs-number">0</span></span>; 
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> u_x10 =<span class="hljs-number"><span class="hljs-number">0</span></span> ; 
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> u_x1 =<span class="hljs-number"><span class="hljs-number">0</span></span> ; 
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> u_x0 =<span class="hljs-number"><span class="hljs-number">0</span></span> ;
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iii=<span class="hljs-number"><span class="hljs-number">0</span></span>; iii &lt;<span class="hljs-number"><span class="hljs-number">10</span></span> ; iii++) {  outputValue =outputValue + <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>(analogRead(A0));  delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); }<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  outputValue =  outputValue/<span class="hljs-number"><span class="hljs-number">620</span></span>;<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
  u_x10=round(outputValue*<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 10 </span></span>
  u_x1=floor(u_x10/<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  add_mp3(<span class="hljs-number"><span class="hljs-number">70</span></span>+u_x1);<font></font>
  u_x0=u_x10-(<span class="hljs-number"><span class="hljs-number">10</span></span>*u_x1);   <span class="hljs-comment"><span class="hljs-comment">// = 10U-10U</span></span>
  add_mp3(<span class="hljs-number"><span class="hljs-number">90</span></span>+u_x0);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gabamute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
{  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lastgabaonoff==gaba)<font></font>
{<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
gabaonofftimer=gabaonofftimer+<span class="hljs-number"><span class="hljs-number">1</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gabaonofftimer&gt;<span class="hljs-number"><span class="hljs-number">250</span></span> ) <font></font>
 {<span class="hljs-comment"><span class="hljs-comment">//    -  </span></span>
 gabaonofftimer=<span class="hljs-number"><span class="hljs-number">250</span></span>;<font></font>
 gabaonoffcounter=<span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
 }<font></font>
}<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
{<span class="hljs-comment"><span class="hljs-comment">// </span></span><font></font>
lastgabaonoff=gaba;<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gabaonoffcounter==<span class="hljs-number"><span class="hljs-number">0</span></span>) {gabaonofftimer=<span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-comment"><span class="hljs-comment">// Serial.println(gabaonofftimer);</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gabaonofftimer&lt;<span class="hljs-number"><span class="hljs-number">25</span></span>)<font></font>
 {<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
 gabaonoffcounter=gabaonoffcounter+<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
 gabaonofftimer=<span class="hljs-number"><span class="hljs-number">0</span></span>;
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gabaonoffcounter&gt;<span class="hljs-number"><span class="hljs-number">5</span></span>) <font></font>
   {<span class="hljs-comment"><span class="hljs-comment">// -   </span></span>
    gabaonoffcounter=<span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]=cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">2</span></span>) { cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>; };<font></font>
    EEPROM.write(<span class="hljs-number"><span class="hljs-number">5</span></span>,cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">5</span></span>);}; <span class="hljs-comment"><span class="hljs-comment">//sound on</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">3</span></span>);}; <span class="hljs-comment"><span class="hljs-comment">//sound off krome ruka</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">2</span></span>) {add_mp3(<span class="hljs-number"><span class="hljs-number">4</span></span>);}; <span class="hljs-comment"><span class="hljs-comment">//sound off all</span></span><font></font>
   } }<font></font>
 <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  {   gabaonoffcounter=<span class="hljs-number"><span class="hljs-number">0</span></span>;   gabaonofftimer=<span class="hljs-number"><span class="hljs-number">0</span></span>; }<font></font>
}}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Micrologiciel de la carte optionnelle</font></font></b><div class="spoiler_text"> ,       — arduino uno   LCD-  . <br>
<br>
    — ,  , ,     0  150 .   —    ,       .<br>
<br>
<pre><code class="hljs go">#include &lt;Wire.h&gt; <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
#include &lt;LiquidCrystal.h&gt;<font></font>
<font></font>
LiquidCrystal lcd(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span> );<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rukaPin =  <span class="hljs-number"><span class="hljs-number">2</span></span>;      <span class="hljs-comment"><span class="hljs-comment">//  = </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> dsvetPin =  <span class="hljs-number"><span class="hljs-number">1</span></span>;      <span class="hljs-comment"><span class="hljs-comment">//  = .</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> speedPin =  <span class="hljs-number"><span class="hljs-number">0</span></span>;      <span class="hljs-comment"><span class="hljs-comment">//  =  </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gabaPin =  <span class="hljs-number"><span class="hljs-number">11</span></span>;      <span class="hljs-comment"><span class="hljs-comment">// 6 = </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rukaState = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> dsvetState = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> speedState = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gabaState = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> speedkm = <span class="hljs-number"><span class="hljs-number">0</span></span>;  <span class="hljs-comment"><span class="hljs-comment">// /</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lowdelay = <span class="hljs-number"><span class="hljs-number">250</span></span>;  <span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> button;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_NONE   = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_RIGHT  = <span class="hljs-number"><span class="hljs-number">1</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_UP     = <span class="hljs-number"><span class="hljs-number">2</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_DOWN   = <span class="hljs-number"><span class="hljs-number">3</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_LEFT   = <span class="hljs-number"><span class="hljs-number">4</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BUTTON_SELECT = <span class="hljs-number"><span class="hljs-number">5</span></span>;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> getPressedButton()<font></font>
{<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> buttonValue = analogRead(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     (A0) </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonValue &lt; <span class="hljs-number"><span class="hljs-number">60</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_RIGHT;  <font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonValue &lt; <span class="hljs-number"><span class="hljs-number">200</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_UP;<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonValue &lt; <span class="hljs-number"><span class="hljs-number">400</span></span>){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_DOWN;<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonValue &lt; <span class="hljs-number"><span class="hljs-number">600</span></span>){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_LEFT;<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonValue &lt; <span class="hljs-number"><span class="hljs-number">800</span></span>){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_SELECT;<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BUTTON_NONE;<font></font>
}<font></font>
<font></font>
void setup()<font></font>
{<font></font>
  pinMode(rukaPin, OUTPUT); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  pinMode(dsvetPin, OUTPUT); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  pinMode(speedPin, OUTPUT); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  pinMode(gabaPin, OUTPUT); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  lcd.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);             <font></font>
  lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"starting..."</span></span>);     <font></font>
  delay (<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
     lcd.clear();<font></font>
     lcd.setCursor(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);
     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(gabaState == <span class="hljs-number"><span class="hljs-number">1</span></span>){lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"G_ON"</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"GOFF"</span></span>);}<font></font>
     digitalWrite(gabaPin,gabaState);<font></font>
     lcd.setCursor(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);     
     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dsvetState == <span class="hljs-number"><span class="hljs-number">1</span></span>){lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"D__ON"</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"D_OFF"</span></span>);}   <font></font>
     digitalWrite(dsvetPin,dsvetState);<font></font>
     lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);     
     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rukaState == <span class="hljs-number"><span class="hljs-number">0</span></span>){lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"R__ON"</span></span>);}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"R_OFF"</span></span>);}   <font></font>
     digitalWrite(rukaPin,rukaState);<font></font>
 }<font></font>
<font></font>
void loop()<font></font>
{<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">50</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((speedState&lt;=<span class="hljs-number"><span class="hljs-number">36</span></span>)&amp;(speedState&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>))<font></font>
  {<font></font>
  lowdelay=<span class="hljs-number"><span class="hljs-number">500</span></span>/speedState;<font></font>
  digitalWrite(speedPin,<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  delay(lowdelay);<font></font>
  digitalWrite(speedPin,<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  delay(lowdelay);<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(lowdelay);<font></font>
  lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
<font></font>
  }<font></font>
   <font></font>
  button = getPressedButton();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (button)<font></font>
  {<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BUTTON_RIGHT: <span class="hljs-comment"><span class="hljs-comment">//      </span></span>
    lcd.setCursor(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gabaState == <span class="hljs-number"><span class="hljs-number">0</span></span>) <font></font>
    { <font></font>
      gabaState = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"G_ON "</span></span>);<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
    {<font></font>
      gabaState = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"GOFF "</span></span>);<font></font>
    }<font></font>
      digitalWrite(gabaPin,gabaState);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BUTTON_LEFT:<font></font>
    lcd.setCursor(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsvetState == <span class="hljs-number"><span class="hljs-number">0</span></span>) <font></font>
    { <font></font>
      dsvetState = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"D__ON "</span></span>);<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
    {<font></font>
      dsvetState = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"D_OFF "</span></span>);<font></font>
    }<font></font>
    digitalWrite(dsvetPin,dsvetState);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BUTTON_UP:
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedState&lt;<span class="hljs-number"><span class="hljs-number">5</span></span>){speedState=speedState+<span class="hljs-number"><span class="hljs-number">1</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedState&lt;<span class="hljs-number"><span class="hljs-number">250</span></span>){speedState=speedState+<span class="hljs-number"><span class="hljs-number">5</span></span>;};}<font></font>
    lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(speedState);<font></font>
    speedkm=speedState*<span class="hljs-number"><span class="hljs-number">0.6</span></span>;<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"  "</span></span>);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(speedkm);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"km/h "</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedState&gt;<span class="hljs-number"><span class="hljs-number">35</span></span>){ tone(speedPin,speedState);}
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
      {<font></font>
      noTone(speedPin);<font></font>
     <font></font>
      };<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BUTTON_DOWN:
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((speedState&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>)&amp;(speedState&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>)){speedState=speedState<span class="hljs-number"><span class="hljs-number">-1</span></span>;} 
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <font></font>
     {<font></font>
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((speedState&lt;<span class="hljs-number"><span class="hljs-number">255</span></span>)&amp;(speedState&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>)){speedState=speedState<span class="hljs-number"><span class="hljs-number">-5</span></span>;}<font></font>
    }  ;<font></font>
    lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(speedState);<font></font>
    speedkm=speedState*<span class="hljs-number"><span class="hljs-number">0.6</span></span>;<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"  "</span></span>);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(speedkm);<font></font>
    lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"km/h "</span></span>);
<span class="hljs-comment"><span class="hljs-comment">//    if (speedState==0){noTone(speedPin);} else {tone(speedPin,speedState);};</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speedState&gt;<span class="hljs-number"><span class="hljs-number">35</span></span>){ tone(speedPin,speedState);}
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
      {<font></font>
      noTone(speedPin);<font></font>
           };<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> BUTTON_SELECT:
<span class="hljs-comment"><span class="hljs-comment">//    lcd.setCursor(0, 0); </span></span>
<span class="hljs-comment"><span class="hljs-comment">//    lcd.print("                 "); </span></span>
    lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rukaState == <span class="hljs-number"><span class="hljs-number">0</span></span>) <font></font>
    { <font></font>
      rukaState = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"R_OFF "</span></span>);<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
    {<font></font>
      rukaState = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
      lcd.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"R__ON "</span></span>);<font></font>
    }<font></font>
     digitalWrite(rukaPin,rukaState);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr401671/">https://habr.com/ru/post/fr401671/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr401659/index.html">Bureau de Plarium Kharkiv: ici nous développons des jeux</a></li>
<li><a href="../fr401661/index.html">PewDiePie Vlogger teste le modèle commercial de YouTube pour sa résistance</a></li>
<li><a href="../fr401663/index.html">Zéro à intermédiaire supérieur</a></li>
<li><a href="../fr401665/index.html">L'état actuel de l'énergie solaire dans les ménages américains</a></li>
<li><a href="../fr401669/index.html">Point d'accès Wi-Fi pour le prix d'une voiture. Présentation du légendaire point d'accès Motorola AP7131</a></li>
<li><a href="../fr401673/index.html">Sans plus attendre: revue Audio-Technica ATH-MSR7NC</a></li>
<li><a href="../fr401675/index.html">Commentez n'importe quel article sur le pilote automatique et l'IA</a></li>
<li><a href="../fr401677/index.html">Chasse à la matière noire</a></li>
<li><a href="../fr401679/index.html">Radiographie divertissante</a></li>
<li><a href="../fr401681/index.html">Rayons cosmiques - la cause des accidents informatiques aléatoires?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>