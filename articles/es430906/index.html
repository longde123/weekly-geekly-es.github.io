<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游꼙 游둟游 游닔 Mam치 duerme tranquilamente por la noche: recolectamos OpenCV para Raspbian'a 游뱇游 游똁游낕 游붎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las 칰ltimas dos semanas han sido dif칤ciles para nuestro equipo. Se lanz칩 OpenCV 4 , y con 칠l, se prepararon para el kit de herramientas OpenVINO R4 de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mam치 duerme tranquilamente por la noche: recolectamos OpenCV para Raspbian'a</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430906/"><p> Las 칰ltimas dos semanas han sido dif칤ciles para nuestro equipo.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Se lanz칩 OpenCV 4</a> , y con 칠l, se prepararon para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el kit de herramientas OpenVINO</a> R4 de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Intel</a> , que incluye OpenCV.  Piensas, estoy distra칤do por un tiempo, mirar칠, como siempre, sobre los foros de OpenCV y los comentarios de los usuarios, y aqu칤 est치 de moda que digas que OpenCV no es IoT, que bajo Raspberry Pi es suficiente para ensamblar, no hay suficiente soldadura para poner <code>make -j2</code> . por la ma침ana estar치 listo si tienes suerte. </p><br><p>  Por lo tanto, propongo unir nuestras manos y ver c칩mo puede ensamblar la biblioteca OpenCV para un sistema operativo de 32 bits que se ejecuta en un procesador ARM utilizando los recursos de una m치quina con sistema operativo de 64 bits, impulsado por una excelente arquitectura de CPU. <del>  Brujer칤a </del>  춰Compilaci칩n cruzada, no de otra manera! </p><a name="habracut"></a><br><h2 id="postanovka-zadachi">  Declaraci칩n del problema. </h2><br><p>  Compilar directamente en el tablero, que com칰nmente se llama nativo, es realmente laborioso, por lo que aqu칤 consideraremos una forma de construir un proyecto que permita dispositivos inform치ticos m치s fuertes (llam칠moslos hosts) para preparar binarios para sus peque침os familiares.  Adem치s, ambas m치quinas pueden tener diferentes arquitecturas de CPU.  Esta es una compilaci칩n cruzada. </p><br><p>  Entonces, para preparar una tarta de frambuesa rellena con OpenCV, necesitamos: </p><br><ul><li>  Carcasa de acoplador de imagen Ubuntu 16.04 </li><li>  La m치quina host es m치s potente que la Raspberry Pi (de lo contrario, 쯖u치l es el punto, no?) </li><li>  Compilador cruzado para ARMhf, as칤 como bibliotecas de la arquitectura correspondiente </li></ul><br><p>  Todo el proceso de construcci칩n de OpenCV tendr치 lugar en la m치quina host.  Yo uso Ubuntu en casa.  Con otra versi칩n de Linux, los problemas de reproducci칩n no deber칤an ocurrir.  Para los usuarios de Windows: mi sincero deseo de no rendirme y tratar de resolverlo por nosotros mismos. </p><br><h2 id="ustanovka-docker">  Instalar Docker </h2><br><p>  Comenc칠 a conocer a Docker hace aproximadamente una semana, as칤 que agregue sal gourmet y az칰car sint치ctica al gusto.  Tres ingredientes son suficientes para usted y para m칤: Dockerfile, el concepto de imagen y contenedor. </p><br><p>  Docker es una herramienta para crear y reproducir la configuraci칩n de cualquier sistema operativo con el conjunto de componentes necesarios.  Dockerfile es un conjunto de comandos de shell que usualmente se usa en la m치quina host, pero en este caso, todos se aplican a la llamada imagen de <code>docker</code> . </p><br><p>  Para instalar Docker, considere la forma m치s simple: solicite un paquete a trav칠s del servicio de entrega <code>apt-get</code> : </p><br><pre> <code class="bash hljs">sudo apt-get install -y docker.io</code> </pre> <br><p>  Le daremos al docker daemon todo lo que pida y cerraremos la sesi칩n del sistema (observe el inicio de sesi칩n correspondiente). </p><br><pre> <code class="bash hljs">sudo usermod -a -G docker <span class="hljs-variable"><span class="hljs-variable">$USER</span></span></code> </pre> <br><h2 id="podgotavlivaem-rabochee-prostranstvo">  Preparando el espacio de trabajo </h2><br><p>  Raspberry Pi (en mi caso RPI 2 Modelo B) en la preparaci칩n m치s com칰n es una CPU ARMv7 con el sistema operativo Raspbian (basado en Debian).  Crearemos una imagen <code>docker</code> basada en Ubuntu 16.04, en la que informaremos el compilador cruzado, las bibliotecas del ej칠rcito y recopilaremos OpenCV en el mismo lugar. </p><br><p>  Crea un pap치 donde se encuentre nuestro <code>Dockerfile</code> : </p><br><pre> <code class="bash hljs">mkdir ubuntu16_armhf_opencv &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ubuntu16_armhf_opencv touch Dockerfile</code> </pre> <br><p>  Agregue informaci칩n sobre el sistema operativo base y la arquitectura <code>armhf</code> para el instalador del paquete <code>apt-get</code> : </p><br><pre> <code class="plaintext hljs">FROM ubuntu:16.04 USER root RUN dpkg --add-architecture armhf RUN apt-get update</code> </pre> <br><p>  Tenga en cuenta que los comandos como <code>FROM ...</code> , <code>RUN ...</code> son la sintaxis de <code>Dockerfile</code> y est치n escritos en el archivo de prueba <code>Dockerfile</code> creado. </p><br><p>  Volvamos al directorio principal <code>ubuntu16_armhf_opencv</code> e intentemos crear nuestra imagen acoplable: </p><br><pre> <code class="bash hljs">docker image build ubuntu16_armhf_opencv</code> </pre> <br><p>  Durante la ejecuci칩n del comando <code>apt-get update</code> , deber칤a ver los errores del siguiente tipo: <code>Err:[] [url] xenial[-] armhf Packages</code> </p><br><pre> <code class="bash hljs">Ign:30 http://archive.ubuntu.com/ubuntu xenial-backports/main armhf Packages Ign:32 http://archive.ubuntu.com/ubuntu xenial-backports/universe armhf Packages Err:7 http://archive.ubuntu.com/ubuntu xenial/main armhf Packages 404 Not Found Ign:9 http://archive.ubuntu.com/ubuntu xenial/restricted armhf Packages Ign:18 http://archive.ubuntu.com/ubuntu xenial/universe armhf Packages Ign:20 http://archive.ubuntu.com/ubuntu xenial/multiverse armhf Packages Err:22 http://archive.ubuntu.com/ubuntu xenial-updates/main armhf Packages 404 Not Found Ign:24 http://archive.ubuntu.com/ubuntu xenial-updates/restricted armhf Packages Ign:26 http://archive.ubuntu.com/ubuntu xenial-updates/universe armhf Packages Ign:28 http://archive.ubuntu.com/ubuntu xenial-updates/multiverse armhf Packages Err:30 http://archive.ubuntu.com/ubuntu xenial-backports/main armhf Packages 404 Not Found Ign:32 http://archive.ubuntu.com/ubuntu xenial-backports/universe armhf Packages</code> </pre> <br><p>  Si observa el archivo <code>/etc/apt/sources.list</code> cada error corresponde a alguna l칤nea, por ejemplo: </p><br><p>  <strong>Error</strong> </p><br><pre> <code class="plaintext hljs">Err:22 http://archive.ubuntu.com/ubuntu xenial-updates/main armhf Packages 404 Not Found</code> </pre> <br><p>  <strong>L칤nea en /etc/apt/sources.list</strong> : </p><br><pre> <code class="plaintext hljs">deb http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted</code> </pre> <br><p>  <strong>Soluci칩n</strong> : <br>  Romper en dos: </p><br><pre> <code class="plaintext hljs">deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted deb [arch=armhf] http://ports.ubuntu.com/ubuntu-ports/ xenial-updates main restricted</code> </pre> <br><p>  Por lo tanto, debe reemplazar varias fuentes de paquetes.  En nuestra ventana acoplable, los reemplazaremos todos con un comando: </p><br><pre> <code class="plaintext hljs">RUN sed -i -E 's|^deb ([^ ]+) (.*)$|deb [arch=amd64] \1 \2\ndeb [arch=armhf] http://ports.ubuntu.com/ubuntu-ports/ \2|' /etc/apt/sources.list</code> </pre> <br><p>  Ahora <code>apt-get update</code> deber칤a funcionar sin errores. </p><br><h2 id="stavim-neobhodimye-pakety">  Ponemos los paquetes necesarios </h2><br><p>  Necesitamos suministrar paquetes de host como <code>git</code> , <code>python-pip</code> , <code>cmake</code> y <code>pkg-config</code> , as칤 como <code>crossbuild-essential-armhf</code> , que es un conjunto de compiladores cruzados gcc / g ++ ( <code>arm-linux-gnueabihf-gcc</code> y <code>arm-linux-gnueabihf-g++</code> ) y bibliotecas del sistema de la arquitectura correspondiente: </p><br><pre> <code class="plaintext hljs">RUN apt-get install -y git python-pip cmake pkg-config crossbuild-essential-armhf</code> </pre> <br><p>  Desde lo inusual: tambi칠n descargamos GTK (utilizado para dibujar ventanas en el m칩dulo highgui), GStreamer y Python, pero con una indicaci칩n expl칤cita de una arquitectura extranjera: </p><br><pre> <code class="plaintext hljs">RUN apt-get install -y --no-install-recommends \ libgtk2.0-dev:armhf \ libpython-dev:armhf \ libgstreamer1.0-dev:armhf \ libgstreamer-plugins-base1.0-dev:armhf \ libgstreamer-plugins-good1.0-dev:armhf \ libgstreamer-plugins-bad1.0-dev:armhf</code> </pre> <br><p>  Y luego clonamos y recolectamos, indicando las banderas necesarias: </p><br><pre> <code class="plaintext hljs">RUN git clone https://github.com/opencv/opencv --depth 1 RUN mkdir opencv/build &amp;&amp; cd opencv/build &amp;&amp; \ export PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig &amp;&amp; \ cmake -DCMAKE_BUILD_TYPE=Release \ -DOPENCV_CONFIG_INSTALL_PATH="cmake" \ -DCMAKE_TOOLCHAIN_FILE="../opencv/platforms/linux/arm-gnueabi.toolchain.cmake" \ -DWITH_IPP=OFF \ -DBUILD_TESTS=OFF \ -DBUILD_PERF_TESTS=OFF \ -DOPENCV_ENABLE_PKG_CONFIG=ON \ -DPYTHON2_INCLUDE_PATH="/usr/include/python2.7" \ -DPYTHON2_NUMPY_INCLUDE_DIRS="/usr/local/lib/python2.7/dist-packages/numpy/core/include" \ -DENABLE_NEON=ON \ -DCPU_BASELINE="NEON" ..</code> </pre> <br><p>  donde </p><br><ul><li><p>  <code>CMAKE_TOOLCHAIN_FILE</code> : la ruta al archivo cmake que define el proceso de compilaci칩n cruzada (establece el compilador deseado, restringe el uso de bibliotecas de host. </p><br></li><li><p>  <code>WITH_IPP=OFF</code> , - deshabilita las dependencias pesadas. </p><br></li><li><p>  <code>BUILD_TESTS=OFF</code> , <code>BUILD_PERF_TESTS=OFF</code> , deshabilita la compilaci칩n de prueba. </p><br></li><li><p>  <code>OPENCV_ENABLE_PKG_CONFIG=ON</code> - para que pkg-config pueda encontrar dependencias como GTK.  <code>PKG_CONFIG_PATH</code> es la ruta correcta donde <code>pkg-config</code> buscar치 bibliotecas. </p><br></li><li><p>  <code>PYTHON2_INCLUDE_PATH</code> , <code>PYTHON2_NUMPY_INCLUDE_DIRS</code> : rutas necesarias para los contenedores de compilaci칩n cruzada para python2. </p><br></li><li><p>  <code>ENABLE_NEON=ON</code> , <code>CPU_BASELINE="NEON"</code> - habilita la optimizaci칩n NEON. </p><br></li><li><p>  <code>OPENCV_CONFIG_INSTALL_PATH</code> : ajusta la ubicaci칩n de los archivos en el directorio de <code>install</code> . </p><br></li></ul><br><p>  Lo principal a lo que debe prestar atenci칩n despu칠s de la ejecuci칩n de <code>cmake</code> es que todos los m칩dulos necesarios est치n ensamblados (python2, por ejemplo): </p><br><pre> <code class="plaintext hljs">-- OpenCV modules: -- To be built: calib3d core dnn features2d flann gapi highgui imgcodecs imgproc java_bindings_generator ml objdetect photo python2 python_bindings_generator stitching ts video videoio -- Disabled: world -- Disabled by dependency: - -- Unavailable: java js python3 -- Applications: tests perf_tests apps -- Documentation: NO -- Non-free algorithms: NO</code> </pre> <br><p>  y se encontraron las dependencias necesarias, como GTK: </p><br><pre> <code class="plaintext hljs">-- GUI: -- GTK+: YES (ver 2.24.30) -- GThread : YES (ver 2.48.2) -- GtkGlExt: NO -- -- Video I/O: -- GStreamer: -- base: YES (ver 1.8.3) -- video: YES (ver 1.8.3) -- app: YES (ver 1.8.3) -- riff: YES (ver 1.8.3) -- pbutils: YES (ver 1.8.3) -- v4l/v4l2: linux/videodev2.h</code> </pre> <br><p>  Todo lo que queda es llamar a <code>make</code> , <code>make install</code> y esperar a que se complete la compilaci칩n: </p><br><pre> <code class="plaintext hljs">Successfully built 4dae6b1a7d32</code> </pre> <br><p>  Use esta <code>id</code> imagen para etiquetar y crear un contenedor: </p><br><pre> <code class="plaintext hljs">docker tag 4dae6b1a7d32 ubuntu16_armhf_opencv:latest docker run ubuntu16_armhf_opencv</code> </pre> <br><p>  Y solo tenemos que bombear el OpenCV ensamblado fuera del contenedor.  Primero, veamos el identificador del contenedor creado: </p><br><pre> <code class="plaintext hljs">$ docker container ls --all CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e94667fe60d2 ubuntu16_armhf_opencv "/bin/bash" 6 seconds ago Exited (0) 5 seconds ago clever_yalow</code> </pre> <br><p>  Y copie el directorio de instalaci칩n con OpenCV instalado: </p><br><pre> <code class="plaintext hljs">docker cp e94667fe60d2:/opencv/build/install/ ./ mv install ocv_install</code> </pre> <br><h2 id="nakryvaem-na-stol">  Poner la mesa </h2><br><p>  Copie <code>ocv_install</code> en Raspberry Pi, configure las rutas e intente ejecutar OpenCV desde python. </p><br><pre> <code class="plaintext hljs">export LD_LIBRARY_PATH=/path/to/ocv_install/lib/:$LD_LIBRARY_PATH export PYTHONPATH=/path/to/ocv_install/python/:$PYTHONPATH</code> </pre> <br><p>  Ejecute el ejemplo de detecci칩n utilizando la red neuronal MobileNet-SSD desde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/chuanqi305/MobileNet-SSD</a> : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> cv <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> cv.__file__ classes = [<span class="hljs-string"><span class="hljs-string">'backgroud'</span></span>, <span class="hljs-string"><span class="hljs-string">'aeroplane'</span></span>, <span class="hljs-string"><span class="hljs-string">'bicycle'</span></span>, <span class="hljs-string"><span class="hljs-string">'bird'</span></span>, <span class="hljs-string"><span class="hljs-string">'boat'</span></span>, <span class="hljs-string"><span class="hljs-string">'bottle'</span></span>, <span class="hljs-string"><span class="hljs-string">'bus'</span></span>, <span class="hljs-string"><span class="hljs-string">'car'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'chair'</span></span>, <span class="hljs-string"><span class="hljs-string">'cow'</span></span>, <span class="hljs-string"><span class="hljs-string">'diningtable'</span></span>, <span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'horse'</span></span>, <span class="hljs-string"><span class="hljs-string">'motorbike'</span></span>, <span class="hljs-string"><span class="hljs-string">'person'</span></span>, <span class="hljs-string"><span class="hljs-string">'pottedplant'</span></span>, <span class="hljs-string"><span class="hljs-string">'sheep'</span></span>, <span class="hljs-string"><span class="hljs-string">'sofa'</span></span>, <span class="hljs-string"><span class="hljs-string">'train'</span></span>, <span class="hljs-string"><span class="hljs-string">'tvmonitor'</span></span>] cap = cv.VideoCapture(<span class="hljs-number"><span class="hljs-number">0</span></span>) net = cv.dnn.readNet(<span class="hljs-string"><span class="hljs-string">'MobileNetSSD_deploy.caffemodel'</span></span>, <span class="hljs-string"><span class="hljs-string">'MobileNetSSD_deploy.prototxt'</span></span>) cv.namedWindow(<span class="hljs-string"><span class="hljs-string">'Object detection'</span></span>, cv.WINDOW_NORMAL) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> cv.waitKey(<span class="hljs-number"><span class="hljs-number">1</span></span>) != <span class="hljs-number"><span class="hljs-number">27</span></span>: hasFrame, frame = cap.read() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasFrame: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> frame_height, frame_width = frame.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>], frame.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>] blob = cv.dnn.blobFromImage(frame, scalefactor=<span class="hljs-number"><span class="hljs-number">0.007843</span></span>, size=(<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">300</span></span>), mean=(<span class="hljs-number"><span class="hljs-number">127.5</span></span>, <span class="hljs-number"><span class="hljs-number">127.5</span></span>, <span class="hljs-number"><span class="hljs-number">127.5</span></span>)) net.setInput(blob) out = net.forward() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> detection <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> out.reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>): classId = int(detection[<span class="hljs-number"><span class="hljs-number">1</span></span>]) confidence = float(detection[<span class="hljs-number"><span class="hljs-number">2</span></span>]) xmin = int(detection[<span class="hljs-number"><span class="hljs-number">3</span></span>] * frame_width) ymin = int(detection[<span class="hljs-number"><span class="hljs-number">4</span></span>] * frame_height) xmax = int(detection[<span class="hljs-number"><span class="hljs-number">5</span></span>] * frame_width) ymax = int(detection[<span class="hljs-number"><span class="hljs-number">6</span></span>] * frame_height) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> confidence &gt; <span class="hljs-number"><span class="hljs-number">0.5</span></span>: cv.rectangle(frame, (xmin, ymin), (xmax, ymax), color=(<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>), thickness=<span class="hljs-number"><span class="hljs-number">3</span></span>) label = <span class="hljs-string"><span class="hljs-string">'%s: %.2f'</span></span> % (classes[classId], confidence) labelSize, baseLine = cv.getTextSize(label, cv.FONT_HERSHEY_SIMPLEX, <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) ymin = max(ymin, labelSize[<span class="hljs-number"><span class="hljs-number">1</span></span>]) cv.rectangle(frame, (xmin, ymin - labelSize[<span class="hljs-number"><span class="hljs-number">1</span></span>]), (xmin + labelSize[<span class="hljs-number"><span class="hljs-number">0</span></span>], ymin + baseLine), (<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>), cv.FILLED) cv.putText(frame, label, (xmin, ymin), cv.FONT_HERSHEY_SIMPLEX, <span class="hljs-number"><span class="hljs-number">0.5</span></span>, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)) cv.imshow(<span class="hljs-string"><span class="hljs-string">'Object detection'</span></span>, frame)</code> </pre> <br><p><img src="https://habrastorage.org/webt/1h/sd/0m/1hsd0mmmse6gslxx169tw4lc2wu.png"></p><br><p>  Eso es todo, un ensamblaje completo no lleva m치s de 20 minutos.  Adjunto la versi칩n final del <code>Dockerfile</code> continuaci칩n y, aprovechando esta oportunidad, propongo realizar una breve encuesta del equipo de OpenCV para aquellos que alguna vez tuvieron experiencia con la biblioteca: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://opencv.org/survey-2018.html</a> . </p><br><p>  Y s칤, 춰felicidades por OpenCV 4!  Este no es solo el trabajo de un equipo separado, es el trabajo de toda la comunidad: OpenCV 4 usted. </p><br><pre> <code class="plaintext hljs">FROM ubuntu:16.04 USER root RUN dpkg --add-architecture armhf RUN sed -i -E 's|^deb ([^ ]+) (.*)$|deb [arch=amd64] \1 \2\ndeb [arch=armhf] http://ports.ubuntu.com/ubuntu-ports/ \2|' /etc/apt/sources.list RUN apt-get update &amp;&amp; \ apt-get install -y --no-install-recommends \ cmake \ pkg-config \ crossbuild-essential-armhf \ git \ python-pip \ libgtk2.0-dev:armhf \ libpython-dev:armhf \ libgstreamer1.0-dev:armhf \ libgstreamer-plugins-base1.0-dev:armhf \ libgstreamer-plugins-good1.0-dev:armhf \ libgstreamer-plugins-bad1.0-dev:armhf RUN pip install numpy==1.12.1 RUN git clone https://github.com/opencv/opencv --depth 1 RUN mkdir opencv/build &amp;&amp; cd opencv/build &amp;&amp; \ export PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig &amp;&amp; \ cmake -DCMAKE_BUILD_TYPE=Release \ -DOPENCV_CONFIG_INSTALL_PATH="cmake" \ -DCMAKE_TOOLCHAIN_FILE="../opencv/platforms/linux/arm-gnueabi.toolchain.cmake" \ -DWITH_IPP=OFF \ -DBUILD_TESTS=OFF \ -DBUILD_PERF_TESTS=OFF \ -DOPENCV_ENABLE_PKG_CONFIG=ON \ -DPYTHON2_INCLUDE_PATH="/usr/include/python2.7" \ -DPYTHON2_NUMPY_INCLUDE_DIRS="/usr/local/lib/python2.7/dist-packages/numpy/core/include" \ -DENABLE_NEON=ON \ -DCPU_BASELINE="NEON" .. &amp;&amp; make -j4 &amp;&amp; make install</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430906/">https://habr.com/ru/post/es430906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430892/index.html">La combinaci칩n del enfoque multiplataforma y nativo en el desarrollo de aplicaciones m칩viles.</a></li>
<li><a href="../es430894/index.html">Situaci칩n: las marcas gastan cada vez m치s dinero en publicidad en podcasts: entendemos por qu칠</a></li>
<li><a href="../es430896/index.html">Linux Foundation ha establecido fondos para GraphQL y Ceph: por qu칠 son necesarios y qu칠 esperar de ellos</a></li>
<li><a href="../es430900/index.html">El primer l치ser de la historia: qu칠 fue</a></li>
<li><a href="../es430902/index.html">Elfos en la memoria. Ejecutando ELF en Linux RAM</a></li>
<li><a href="../es430908/index.html">M칩dulo de control del convertidor de potencia: desarrollo y montaje</a></li>
<li><a href="../es430910/index.html">Beca Fulbright: 쮺칩mo y por qu칠?</a></li>
<li><a href="../es430912/index.html">Traemos un mentiroso al agua limpia: una entrevista no es una relaci칩n laboral. Naturalmente</a></li>
<li><a href="../es430914/index.html">An치lisis de los precios del mercado negro para datos personales y penetraci칩n</a></li>
<li><a href="../es430916/index.html">Detector de di칩xido de carbono MT8057S. No revisi칩n con la participaci칩n de un no emulador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>