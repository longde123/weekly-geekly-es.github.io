<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è∏Ô∏è üöò ‚ò£Ô∏è Crie uma cascata elegante do RiME diretamente no Unity ou UE4 üîè ‚òîÔ∏è üë©üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existem jogos com um visual t√£o memor√°vel que √© assustador considerar o tempo gasto em seu desenvolvimento, pelo menos o √∫ltimo God of War ou RDR2. E ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crie uma cascata elegante do RiME diretamente no Unity ou UE4</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/434620/">  Existem jogos com um visual t√£o memor√°vel que √© assustador considerar o tempo gasto em seu desenvolvimento, pelo menos o √∫ltimo God of War ou RDR2.  E h√° projetos que subornam com sua atmosfera, mesmo que estejam longe da AAA.  Como exemplo, o RiME foi elogiado mais de uma vez por estilo, som e hist√≥ria.  E, recentemente, o designer de n√≠vel do jogo se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">juntou</a> √† equipe CD Projekt Red para trabalhar no Cyberpunk 2077. O RiME tamb√©m inspirou o artista 3D Math Roodhuizen a criar sua pr√≥pria arte. <br><br>  E no contexto de tudo isso, me deparei com uma ArtStation em um guia para criar √°gua realista.  Se da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√∫ltima vez</a> est√°vamos conversando sobre o rio, desta vez sobre uma cachoeira estilizada.  Na primeira parte, veremos como criar um "efeito de onda" e at√© diretamente no mecanismo do jogo.  Por conveni√™ncia, todas as etapas s√£o acompanhadas de gifs e / ou imagens. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8l/uk/aj/8lukajs1s-31mo7gfvimmginvuq.gif"></div><a name="habracut"></a><br>  Primeiro, gra√ßas a Simon Trumpler, um artista da Tequila Games que trabalhou no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RiME</a> .  Eu ainda era novo no shaders e no VFX quando encontrei o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">material</a> dele e pensei: "Uau, posso fazer o mesmo?"  Eu recomendo que voc√™ leia o relat√≥rio para aprender mais sobre maneiras de criar efeitos estilizados (como fogo, por exemplo). <br><br>  Agora vamos falar sobre a cria√ß√£o de uma cachoeira.  Isso ser√° especialmente √∫til para pessoas que n√£o est√£o familiarizadas com o sistema Shader Graph.  Nosso objetivo: aprender novas maneiras de trabalhar e entender melhor os shaders. <br><br>  Usarei o Unity como exemplo, mas a maioria dos m√©todos tamb√©m √© aplic√°vel no UE4 - se voc√™ est√° acostumado a trabalhar l√°, basta repetir depois de mim.  Por conveni√™ncia, cada etapa √© visualizada com um gif ou imagem. <br><br>  Ent√£o voc√™ vai precisar de: <br><br><ul><li>  Unity 2018. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amplify Shader Editor</a> (plugin Unity).  Mas se voc√™ n√£o deseja gastar dinheiro com isso, instale o Unity 2017 e fa√ßa o download do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shaderforge</a> gratuito da loja de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ativos</a> (a nova vers√£o do mecanismo n√£o suporta esse plug-in, mas ainda funciona no Unity 2017).  Ambas as ferramentas s√£o quase id√™nticas, exceto que alguns pontos s√£o chamados de maneira diferente. </li><li>  Autodesk Maya. </li><li>  Qualquer coisa para criar ou editar texturas.  Eu uso o Photoshop e, √†s vezes, at√© o Substance Designer (mas voc√™ definitivamente n√£o precisa dele para essa cachoeira). </li></ul><br>  Primeiro, sobre o "efeito cascata" que ocorre quando uma cachoeira cai na superf√≠cie.  Tamb√©m pode ser usado para outros fins, por exemplo, para criar ondula√ß√µes em torno de objetos na √°gua. <br><br><img src="https://habrastorage.org/webt/ub/jk/o5/ubjko5iypg5csetxipvglwfpjy8.gif"><br><br>  Abra o Unity e verifique se voc√™ tem o plugin shader instalado.  No momento da reda√ß√£o deste artigo, o Unity tinha seu pr√≥prio Shader Graph, que ainda est√° em desenvolvimento.  E enquanto ele n√£o estiver pronto, ainda recomendo usar o Editor de Sombras Amplify para Unity 2018 ou Shaderforge no Unity 2017. <br><br>  Crie um novo material e d√™ um nome a ele (tenho MAT_WaterWrinkles).  Em seguida, clique com o bot√£o direito do mouse no material na guia Projeto e v√° para Criar&gt; Amplify Shader&gt; Surface Shader.  Nesse caso, o novo sombreador ser√° aplicado automaticamente. <br><br>  Voc√™ pode selecionar um sombreador a qualquer momento na guia Materiais&gt; lista suspensa de sombreadores (para Shaderforge, haver√° algo como um sombreador PBL).  Lembre-se de que o sombreador deve ser nomeado na lista de pastas e no pr√≥prio sombreador ap√≥s ser aberto. <br><br><img src="https://habrastorage.org/webt/8g/05/ve/8g05ve_dflwmkgqywfjpq30crdu.jpeg"><br><br>  Assim que voc√™ abrir um novo sombreador, ver√° algo assim: <br><br><img src="https://habrastorage.org/webt/7i/ee/pk/7ieepkf2levm_2zi1pjphvgeuue.jpeg"><br><br>  N√£o escreverei um guia detalhado sobre o uso do Shader Graph e, se voc√™ for completamente novo, leia primeiro os guias introdut√≥rios. <br><br>  De qualquer forma, para obter o efeito desejado, primeiro precisamos de um Panner regular.  Aqui est√° a textura de teste no avi√£o: <br><br><img src="https://habrastorage.org/webt/83/hd/9f/83hd9fk8wgk-hcuhmoxac7rcz_u.gif"><br><br>  Panner move as coordenadas UV.  Verifique se a textura do modo de quebra autom√°tica est√° definida como repetir.  No Shaderforge, pode ser necess√°rio conectar um n√≥ tempor√°rio √† entrada Panner, pois o Amplify alguns desses valores b√°sicos j√° est√£o inclu√≠dos no pr√≥prio n√≥. <br><br>  Portanto, temos uma textura em movimento.  Mas queremos alcan√ßar esse efeito: <br><br><img src="https://habrastorage.org/webt/ub/jk/o5/ubjko5iypg5csetxipvglwfpjy8.gif"><br><br>  E para isso √© necess√°rio que ele role assim: <br><br><img src="https://habrastorage.org/webt/lw/ww/em/lwwwemj-vv8amtlxpfkynjek1gq.gif"><br><br>  Como voc√™ pode ver, a estrutura do n√≥ √© a mesma - Panner simplesmente move as coordenadas UV nas dire√ß√µes U e V (ou X e Y).  Para obter a dire√ß√£o desejada do pan, precisamos criar uma malha personalizada com UV.  Gif para maior clareza: <br><br>  Aplicando o mesmo material a outra malha, podemos controlar a dire√ß√£o da textura no espa√ßo 3D quando ele se move no espa√ßo UV. <br><br><img src="https://habrastorage.org/webt/j9/1o/dr/j91odru3w4elitmc02elpxlm00s.gif"><br><br>  Para aprimorar o efeito, adicione mais alguns pol√≠gonos e distor√ßa os UV, para que a textura no centro se mova mais rapidamente do que nas bordas.  E coloque o UV para que a costura n√£o fique vis√≠vel. <br><br><img src="https://habrastorage.org/webt/vs/fv/qy/vsfvqynzumjlprdxippxpz_odqg.jpeg"><br><br>  Uma conclus√£o importante vem da√≠: bons efeitos raramente consistem em um sistema e geralmente s√£o uma combina√ß√£o de v√°rios. <br><br>  Temos uma textura se movendo na dire√ß√£o certa, na velocidade certa.  A varredura UV √© posicionada de forma que a movimenta√ß√£o da direita para a esquerda no espa√ßo UV com o Panner se transforme em movimento interno e externo no espa√ßo 3D.  Para evitar costuras na textura no modelo 3D, √© necess√°rio fixar a varredura UV (tecla de atalho X para encaixar na grade) nos v√©rtices do espa√ßo de textura verticalmente.  Como resultado, alcan√ßamos o efeito desejado. <br><br>  Agora transpar√™ncia.  Vamos come√ßar com as coisas b√°sicas.  Muitos c√°lculos simples que voc√™ faz no sombreador variam de 0 (preto) a 1 (branco).  Ou seja, 0,5 √© um tom de cinza e 0,2 √© um tom de cinza escuro.  Ao aplicar esses valores (nesse caso, ao canal Opacity do n√≥ principal de sa√≠da), voc√™ controlar√° o n√≠vel de transpar√™ncia do material.  Lembre-se de que voc√™ deve ativar esse recurso primeiro.  No Amplify, voc√™ pode alterar o tipo de renderiza√ß√£o (no modo de mesclagem) de opaco para, por exemplo, transparente.  Nesse caso, usaremos o tipo de renderiza√ß√£o de recorte transparente - o pixel exibido por esse material √© completamente transparente ou totalmente opaco.  Isso pode ser visto no gif acima - n√£o h√° pixels "transl√∫cidos" exibidos por esse shader. <br><br><img src="https://habrastorage.org/webt/0z/v2/zw/0zv2zwyehiurwcxxdvdq9c6jmrg.jpeg"><br><br>  Pegamos uma textura gradiente com um passo e a colocamos no shader.  Aqui, ele se conecta √† sa√≠da albedo (cor) do n√≥ principal. <br><br><img src="https://habrastorage.org/webt/ft/vm/x1/ftvmx1e9ujfhpcfcizmjwof5jmy.jpeg"><br><br>  E aqui est√° conectado √† sa√≠da da M√°scara de opacidade (este par√¢metro √© ativado quando o tipo de renderiza√ß√£o √© Recorte transparente). <br><br><img src="https://habrastorage.org/webt/zv/l7/oh/zvl7oholli9y2wtctoafl_gcoda.jpeg"><br><br>  Pode-se observar que a textura do gradiente usa valores de pixel preto e branco para determinar a transpar√™ncia ou a opacidade.  Tudo de 1 (branco) a 0,5 (cinza) se torna opaco e tudo de 0,5 (cinza) a 1 (preto) se torna completamente transparente (ou n√£o √© exibido).  A M√°scara de opacidade cria uma linha r√≠gida e arredonda os valores para 0 ou 1, dependendo de qual n√∫mero est√° mais pr√≥ximo. <br><br>  Outra textura em escala de cinza: <br><br><img src="https://habrastorage.org/webt/ol/_v/ka/ol_vkageq7enmygek80rhan1-hk.jpeg"><br><br>  Conectado √† m√°scara de opacidade: <br><br><img src="https://habrastorage.org/webt/cd/9w/jt/cd9wjtycl78kqj0wx_f8mimpnti.jpeg"><br><br>  Voc√™ entendeu a ideia.  E voc√™ adivinha como pode ser usado: <br><br><img src="https://habrastorage.org/webt/2u/rq/dc/2urqdccavjdibo7blc0frlq-xpk.gif"><br><br>  Voc√™ v√™ basicamente uma imagem azul rolando no Gr√°fico Shader.  E o fato de eu usar apenas a sa√≠da R (vermelha) desse n√≥.  Por uma quest√£o de otimiza√ß√£o, agrupei duas texturas em escala de cinza (texturas em escala de cinza) em um arquivo, mas isso n√£o √© necess√°rio.  Imagens semelhantes podem ser empacotadas usando o Photoshop ou o Substance Designer. <br><br><img src="https://habrastorage.org/webt/px/7k/6u/px7k6ulmvnbqonfar8_sqjkfzga.jpeg"><br><br>  O efeito cascata √© um bom come√ßo, mas pode ser melhor.  Por que n√£o empilhar duas texturas em escala de cinza umas sobre as outras para tornar o efeito cascata mais aleat√≥rio? <br><br><img src="https://habrastorage.org/webt/zg/tn/78/zgtn78eo71em4hd8zyosznmyfjy.gif"><br><br>  Eu uso a mesma textura, mas adiciono canais diferentes.  Eu as rolo em velocidades diferentes e um pouco em dire√ß√µes diferentes.  A textura possui um bom gradiente de valores de cinza, o que d√° uma sensa√ß√£o de efeito de onda aleat√≥ria. <br><br>  No pr√≥ximo gif, h√° mais uma coisa que ainda n√£o discutimos - portanto, sua vers√£o pode parecer um pouco diferente: <br><br><img src="https://habrastorage.org/webt/7u/ow/bn/7uowbnsld8tvgzcl6amkm2wajps.gif"><br><br>  Voc√™ pode ver, por exemplo, que um pixel com um valor de 0,2 (que n√£o √© renderizado) passa sobre um pixel com um valor de 0,4 (que tamb√©m n√£o √© renderizado) e de repente se torna um pixel com um valor de 0,6 - j√° que estamos usando um n√≥ adicional (0,2 adicionado a 0,4 e 0,6).  Adicionar essas duas texturas de escala de cinza em ondas umas sobre as outras em velocidades diferentes d√° um efeito pr√≥ximo ao desejado. <br><br><img src="https://habrastorage.org/webt/2u/rq/dc/2urqdccavjdibo7blc0frlq-xpk.gif"><br><br>  Aqui, para demonstrar o resultado, adicionei texturas em escala de cinza no Photoshop. <br><br><img src="https://habrastorage.org/webt/va/at/uy/vaatuyfg9hr2clslyh3xoskstra.gif"><br><br>  No entanto, a costura no final da malha ainda √© distinta.  E precisamos entender isso: <br><br><img src="https://habrastorage.org/webt/e-/qs/5f/e-qs5fmcvn2fjqd3jdjxnoty-nw.gif"><br><br>  Em vez disso: <br><br><img src="https://habrastorage.org/webt/49/64/w_/4964w_tiq28mxap8bnczbd0tqm8.gif"><br><br>  No primeiro dos dois GIFs, as ondula√ß√µes diminuem lentamente e se tornam menores quando se aproximam da borda da grade.  A maneira mais f√°cil de fazer isso √© usar a cor do v√©rtice (cor do v√©rtice). <br><br>  Cada v√©rtice do modelo cont√©m seus pr√≥prios dados (por exemplo, coordenadas X, Y e Z), al√©m de uma cor que possui um valor de 0 a 1. A cor dos v√©rtices tamb√©m pode ser definida no editor 3D. <br>  A maioria dos v√©rtices externos √© preta (ou seja, eles t√™m um valor de 0).  Eles se tornam brancos (mais perto de 1) ao se aproximar do centro.  Observe que voc√™ precisar√° de subdivis√µes adicionais para obter v√©rtices que podem ser coloridos. <br><br><img src="https://habrastorage.org/webt/bu/uo/pp/buuoppsouwnxep4s4ujpbbazixk.jpeg"><br><br>  Por exemplo, no Maya, para colorir, voc√™ pode ir ao menu Exibi√ß√£o de malha&gt; Pintar cor de v√©rtice e clicar no campo Mais op√ß√µes. <br><br>  Agora podemos combinar o Vertex Color em nosso shader usando o Multiply. <br><br><img src="https://habrastorage.org/webt/66/sm/-w/66sm-wwyze85kybg_srrerrqabo.gif"><br><br>  Eu apliquei um gradiente sobre as texturas usadas e configurei o modo de camada para Multiply. <br><br><img src="https://habrastorage.org/webt/xi/wi/d1/xiwid1mg_pfo461adllkdm2t6-k.gif"><br><br>  O gradiente aumenta o valor de cinza para 0 (preto), portanto, os pixels de renderiza√ß√£o ser√£o mais dif√≠ceis (eles n√£o aparecem abaixo do valor de 0,5).  Isso leva ao fato de que as linhas de pulsa√ß√µes s√£o comprimidas mais perto da borda (as cores dos v√©rtices atuam principalmente como um gradiente). <br><br><img src="https://habrastorage.org/webt/e-/qs/5f/e-qs5fmcvn2fjqd3jdjxnoty-nw.gif"><br><br>  Adicionei mais alguns n√≥s para controlar a espessura das linhas onduladas.  Aqui est√° o gr√°fico completo: <br><br><img src="https://habrastorage.org/webt/vu/b-/so/vub-soqrrulpflvlb3xhnzacme8.jpeg"><br><br>  Apenas experimente a velocidade / dire√ß√£o da rolagem, ajuste a textura e tente alterar os ladrilhos para aproveitar ao m√°ximo o efeito. <br><br>  Isso nos ajudar√° a criar um shader mais complexo - uma cachoeira.  Falaremos sobre ele na pr√≥xima parte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434620/">https://habr.com/ru/post/pt434620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434598/index.html">Um olhar para o futuro ou quais mudan√ßas est√£o chegando no setor de minera√ß√£o at√© 2050</a></li>
<li><a href="../pt434602/index.html">Como o Google tentou conquistar a China - e perdeu</a></li>
<li><a href="../pt434604/index.html">Como n√£o escrever modelos para inicializa√ß√£o</a></li>
<li><a href="../pt434616/index.html">HI-FI sovi√©tico e seus criadores: grava√ß√£o de som digital na URSS - a um passo da vit√≥ria</a></li>
<li><a href="../pt434618/index.html">MVP e Dagger 2 - Esqueleto de aplicativo Android - Parte 2</a></li>
<li><a href="../pt434622/index.html">Que mundos podem sobreviver ap√≥s a morte do sol?</a></li>
<li><a href="../pt434624/index.html">Como eu encontrei um bug no GNU Tar</a></li>
<li><a href="../pt434626/index.html">Novo Buhtrap Downloader</a></li>
<li><a href="../pt434628/index.html">bitContainer (para alimentos) - Yandex.Station caseiro</a></li>
<li><a href="../pt434634/index.html">Universal Radio Hacker - Uma maneira f√°cil de explorar protocolos de r√°dio digital</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>