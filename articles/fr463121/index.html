<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôâ üçò ‚öõÔ∏è Nous mangeons l'√©l√©phant par parties. Exemple de strat√©gie de surveillance de l'int√©grit√© des applications ü§Ωüèª üçè ‚ñ´Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 

 Notre entreprise est engag√©e dans le d√©veloppement de logiciels et le support technique ult√©rieur. Dans le cadre du support techniq...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous mangeons l'√©l√©phant par parties. Exemple de strat√©gie de surveillance de l'int√©grit√© des applications</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463121/">  Bonjour √† tous! <br><br>  Notre entreprise est engag√©e dans le d√©veloppement de logiciels et le support technique ult√©rieur.  Dans le cadre du support technique, vous devez non seulement corriger les erreurs, mais √©galement surveiller les performances de nos applications. <br><br>  Par exemple, si l'un des services ¬´plante¬ª, vous devez r√©soudre automatiquement ce probl√®me et commencer √† le r√©soudre, sans attendre les appels au support technique pour les utilisateurs m√©contents. <br><br>  Nous avons une petite entreprise, il n'y a pas de ressources pour √©tudier et contenir des solutions complexes pour la surveillance des applications, il fallait trouver une solution simple et efficace. <br><br><img src="https://habrastorage.org/webt/qo/zb/np/qozbnp3tqosarppzcbttecwzpda.png"><br><a name="habracut"></a><br><h2>  Strat√©gie de surveillance </h2><br>  Effectuer un bilan de sant√© des applications n'est pas facile, cette t√¢che n'est pas anodine, on pourrait m√™me dire cr√©ative.  Il est particuli√®rement difficile de tester un syst√®me multi-liens complexe. <br><br>  Comment manger un √©l√©phant?  Seulement en parties!  Nous utilisons cette approche pour surveiller les applications. <br><br>  L'essence de notre strat√©gie de surveillance: <br><blockquote>  D√©composez l'application en composants. <br>  Pour chaque composant, proposer des contr√¥les de contr√¥le. </blockquote>  Un composant est consid√©r√© comme sain si toutes ses v√©rifications de contr√¥le sont effectu√©es sans erreur.  Une application est consid√©r√©e comme saine si tous ses composants sont fonctionnels. <br><br>  Ainsi, tout syst√®me peut √™tre repr√©sent√© comme un arbre de composants.  Les composants complexes sont d√©compos√©s en composants plus simples.  Les composants simples ont des contr√¥les. <br><br><img src="https://habrastorage.org/webt/ts/jj/un/tsjjunljmwoa6dex7za-zfnqvwq.png"><br><br>  Les v√©rifications de contr√¥le ne doivent pas effectuer de tests fonctionnels, ce ne sont pas des tests unitaires.  Les v√©rifications de contr√¥le doivent v√©rifier comment le composant se sent au moment actuel, s'il y a toutes les ressources n√©cessaires √† son fonctionnement, s'il y a des probl√®mes. <br><br>  Il n'y a pas de miracles, la plupart des contr√¥les devront √™tre d√©velopp√©s ind√©pendamment.  Mais n'ayez pas peur, car dans la plupart des cas, une v√©rification prend 5 √† 10 lignes de code, mais vous pouvez alors impl√©menter n'importe quelle logique et vous comprendrez clairement comment la v√©rification fonctionne. <br><br><h2>  Syst√®me de surveillance </h2><br>  Supposons que nous divisions l'application en composants, inventons et impl√©mentions des contr√¥les pour chaque composant, mais que faire des r√©sultats de ces contr√¥les?  Comment savons-nous qu'une sorte de contr√¥le a √©chou√©? <br><br>  Nous aurons besoin d'un syst√®me de surveillance.  Elle effectuera les t√¢ches suivantes: <br><br><ul><li>  Recevez les r√©sultats des tests et d√©terminez l'√©tat des composants √† partir d'eux. <br>  Visuellement, cela ressemble √† mettre en surbrillance l'arborescence des composants.  Les composants utilisables deviennent verts, les composants d√©fectueux deviennent rouges. <br></li><li>  Effectuez des v√©rifications g√©n√©rales hors de la bo√Æte. <br>  Le syst√®me de surveillance peut effectuer lui-m√™me certaines v√©rifications.  Pourquoi r√©inventer la roue, nous les utiliserons.  Par exemple, vous pouvez v√©rifier que la page du site s'ouvre ou que le serveur r√©pond. <br></li><li>  Envoyez des notifications de probl√®mes aux parties int√©ress√©es. </li><li>  Visualisation des donn√©es de surveillance, fournissant des rapports, des graphiques et des statistiques. </li></ul><br><h2>  Br√®ve description du syst√®me ASMO </h2><br>  Mieux expliqu√© par l'exemple.  Voyons comment s'organise le suivi du fonctionnement du syst√®me ASMO. <br><br>  ASMO est un syst√®me d'assistance m√©t√©orologique automatis√©.  Le syst√®me aide les sp√©cialistes des services routiers √† comprendre o√π et quand il est n√©cessaire de traiter la route avec des mat√©riaux antigivrants.  Le syst√®me collecte des donn√©es √† partir des points de contr√¥le du trafic.  Un point de contr√¥le routier est un endroit sur la route o√π l'√©quipement est install√©: une station m√©t√©o, une cam√©ra vid√©o, etc.  Pour pr√©voir des situations dangereuses, le syst√®me re√ßoit des pr√©visions m√©t√©orologiques de sources externes. <br><br><img src="https://habrastorage.org/webt/yo/wo/ib/yowoibav3w7q6pcrq4wbldp3bjw.png"><br><br>  Ainsi, la composition du syst√®me est assez typique: site Web, agent, √©quipement.  Commen√ßons la surveillance. <br><br><h2>  Nous divisons le syst√®me en composants </h2><br>  Les composants suivants peuvent √™tre distingu√©s dans le syst√®me ASMO: <br><br>  <b>1. Compte personnel</b> <br>  Ceci est une application Web.  Au minimum, vous devez v√©rifier que l'application est disponible sur Internet. <br><br>  <b>2. Base de donn√©es</b> <br>  Les donn√©es importantes pour les rapports sont stock√©es dans la base de donn√©es; il est n√©cessaire de v√©rifier que les sauvegardes de la base de donn√©es ont bien √©t√© cr√©√©es. <br><br>  <b>3. Serveur</b> <br>  Par serveur, nous entendons le mat√©riel sur lequel les applications s'ex√©cutent.  Il est n√©cessaire de v√©rifier l'√©tat du disque dur, de la RAM, du CPU. <br><br>  <b>4. Agent</b> <br>  Il s'agit d'un service Windows qui effectue de nombreuses t√¢ches planifi√©es diff√©rentes.  Au minimum, vous devez v√©rifier que le service est en cours d'ex√©cution. <br><br>  <b>5. T√¢che d'agent</b> <br>  Le simple fait de savoir que l'agent travaille ne suffit pas.  Un agent peut travailler, mais pas accomplir les t√¢ches qui lui sont assign√©es.  Nous divisons le composant agent en t√¢ches et v√©rifions si chaque t√¢che d'agent fonctionne correctement. <br><br>  <b>6. Points de contr√¥le routier (conteneur de tous les PPM)</b> <br>  Il existe de nombreux points de contr√¥le routier, nous allons donc combiner tous les MPC en un seul composant.  Cela facilitera la lecture des donn√©es de surveillance.  Lors de la visualisation de l'√©tat du composant "syst√®me ASMO", il sera imm√©diatement clair o√π se trouvent les probl√®mes: dans les applications, le mat√©riel ou dans MPC. <br><br>  <b>7. Point de contr√¥le routier (un MPC)</b> <br>  Nous consid√©rerons ce composant comme r√©parable si tous les p√©riph√©riques de ce MPC sont r√©parables. <br><br>  <b>8. Appareil</b> <br>  Il s'agit d'une cam√©ra vid√©o ou d'une station m√©t√©o install√©e sur le MPC.  Vous devez v√©rifier que l'appareil fonctionne correctement. <br><br>  Dans le syst√®me de surveillance, l'arborescence des composants ressemblera √† ceci: <br><br><img src="https://habrastorage.org/webt/fx/rm/ki/fxrmkikhpp6we9dhhgifttv_9k4.png"><br><br><h2>  Surveillance des applications Web </h2><br>  Nous avons donc divis√© le syst√®me en composants, nous devons maintenant proposer des v√©rifications pour chaque composant. <br><br>  Pour surveiller l'application Web, nous utilisons les contr√¥les suivants: <br><br>  <b>1. V√©rification de l'ouverture de la page principale</b> <br>  Cette v√©rification est effectu√©e par le syst√®me de surveillance.  Pour son ex√©cution, nous indiquons l'adresse de la page, le fragment de r√©ponse attendu et le temps d'ex√©cution maximal de la requ√™te. <br><br>  <b>2. V√©rification des conditions de paiement du domaine</b> <br>  Contr√¥le tr√®s important.  Lorsqu'un domaine est laiss√© sans paiement, les utilisateurs ne peuvent pas ouvrir le site.  La r√©solution du probl√®me peut prendre plusieurs jours.  Les modifications DNS ne sont pas appliqu√©es imm√©diatement. <br><br>  <b>3. V√©rification du certificat SSL</b> <br>  D√©sormais, presque tous les sites utilisent le protocole https pour l'acc√®s.  Pour que le protocole fonctionne correctement, vous avez besoin d'un certificat SSL valide. <br><br>  Vous trouverez ci-dessous le composant "Compte personnel" dans le syst√®me de surveillance: <br><br><img src="https://habrastorage.org/webt/2q/ib/gu/2qibguw4p_2djjqryrp0mozkt20.png"><br><br>  Toutes les v√©rifications ci-dessus conviennent √† la plupart des applications et ne n√©cessitent pas d'√©criture de code.  C'est g√©nial car vous pouvez commencer √† surveiller n'importe quelle application Web en 5 minutes.  Vous trouverez ci-dessous des v√©rifications suppl√©mentaires qui peuvent √™tre effectu√©es pour une application Web, mais leur impl√©mentation est plus complexe et sp√©cifique pour diff√©rentes applications, nous ne les analyserons donc pas dans cet article. <br><br>  Que puis-je v√©rifier d'autre? <br><br>  Pour une surveillance plus compl√®te de l'application Web, vous pouvez effectuer les v√©rifications suivantes: <br><br><ul><li>  Nombre d'erreurs JavaScript par p√©riode </li><li>  Le nombre d'erreurs sur le c√¥t√© de l'application Web (back-end) pour la p√©riode </li><li>  Le nombre de r√©ponses infructueuses de l'application Web (code de r√©ponse 404, 500, etc.) </li><li>  Temps d'ex√©cution moyen des requ√™tes </li></ul><br><h2>  Surveillance du service Windows (agent) </h2><br>  Dans le syst√®me ASMO, l'agent agit comme un planificateur de t√¢ches qui, en arri√®re-plan, ex√©cute des t√¢ches planifi√©es. <br><br>  Si toutes les t√¢ches de l'agent r√©ussissent, l'agent fonctionne correctement.  Il s'av√®re que pour surveiller un agent, il est n√©cessaire de surveiller ses t√¢ches.  Par cons√©quent, nous divisons le composant Agent en t√¢ches.  Nous cr√©erons pour chaque t√¢che un composant distinct dans le syst√®me de surveillance, o√π le composant ¬´Agent¬ª sera le ¬´parent¬ª. <br><br>  Nous divisons le composant Agent en composants enfants (t√¢ches): <br><br><img src="https://habrastorage.org/webt/4c/qc/tg/4cqctgxm0ynlhbmsrptau2cxdue.png"><br><br>  Nous avons donc divis√© un composant complexe en plusieurs composants simples.  Vous devez maintenant trouver des v√©rifications pour chaque composant simple.  Veuillez noter que le composant parent "Agent" n'aura pas une seule v√©rification, car le syst√®me de surveillance calculera son √©tat sur la base de l'√©tat de ses composants enfants.  En d'autres termes, si toutes les t√¢ches sont termin√©es avec succ√®s, l'agent fonctionne √©galement correctement. <br><br>  Il y a plus d'une centaine de t√¢ches dans le syst√®me ASMO, est-il vraiment n√©cessaire de proposer des contr√¥les uniques pour chaque t√¢che?  Bien s√ªr, le contr√¥le sera meilleur si, pour chaque t√¢che de l'agent, nous inventons et mettons en ≈ìuvre nos propres contr√¥les sp√©ciaux, mais dans la plupart des cas, il suffit d'utiliser des contr√¥les universels. <br><br>  Le syst√®me ASMO n'utilise que des v√©rifications universelles des t√¢ches, ce qui suffit pour surveiller les performances du syst√®me. <br><br>  <b>V√©rifier l'ex√©cution</b> <br>  La v√©rification la plus simple et la plus efficace est une v√©rification des progr√®s.  La v√©rification v√©rifie que la t√¢che est en cours d'ex√©cution et sans erreur.  Toutes les t√¢ches ont cette v√©rification. <br><blockquote>  Algorithme de validation <br><br>  Apr√®s chaque ex√©cution de t√¢che, il est n√©cessaire d'envoyer au syst√®me de surveillance le r√©sultat du contr√¥le SUCCESS si la t√¢che a r√©ussi, ou ERREUR si l'ex√©cution a √©chou√©. </blockquote>  Cette v√©rification vous permet de d√©tecter les probl√®mes suivants: <br><br><ol><li>  La t√¢che s'ex√©cute, mais √©choue. </li><li>  La t√¢che a cess√© de s'ex√©cuter, par exemple, elle a gel√©. </li></ol><br>  Voyons comment ces probl√®mes sont r√©solus plus en d√©tail. <br><br>  <b>Probl√®me 1 - La t√¢che s'ex√©cute, mais √©choue</b> <br>  Vous trouverez ci-dessous le cas o√π la t√¢che est effectu√©e, mais de 14h00 √† 16h00 √©choue. <br><br><img src="https://habrastorage.org/webt/s0/rg/8p/s0rg8pg32epl1ncyrkwuoncpxiy.png"><br><br>  La figure montre que lorsque la t√¢che √©choue, le signal est imm√©diatement envoy√© au syst√®me de surveillance et l'√©tat du contr√¥le correspondant dans le syst√®me de surveillance devient alarme. <br><br>  Veuillez noter que dans le syst√®me de surveillance, l'√©tat du composant d√©pend de l'√©tat de la v√©rification.  L'√©tat d'alarme de la v√©rification traduira tous les composants de niveau sup√©rieur en alarme, voir la figure ci-dessous. <br><br><img src="https://habrastorage.org/webt/fo/gl/yz/foglyzszffhzaf0mrpk_6my0jp0.png"><br><br>  <b>Probl√®me 2 - La t√¢che a cess√© de fonctionner (bloqu√©e)</b> <br>  Comment le syst√®me de surveillance comprend-il que la t√¢che est gel√©e? <br><br>  Le r√©sultat de la v√©rification a un temps de pertinence, par exemple 1 heure.  Si une heure s'√©coule et qu'il n'y a pas de nouveau r√©sultat de v√©rification, le syst√®me de surveillance d√©finira l'√©tat d'alarme lors de la v√©rification. <br><br><img src="https://habrastorage.org/webt/qk/sy/o7/qksyo76gplxby3hfwoxjsr3zvla.png"><br><br>  Dans l'image ci-dessus √† 14h00, les lumi√®res ont √©t√© √©teintes.  √Ä 15h00, le syst√®me de surveillance d√©tectera que le r√©sultat du test (√† partir de 14h00) est pourri, car  le temps de pertinence a expir√© (une heure), mais il n'y a pas de nouveau r√©sultat et transf√©rera le ch√®que √† l'√©tat d'alarme. <br><br>  √Ä 16h00, la lumi√®re a √©t√© rallum√©e, le programme terminera la t√¢che et enverra le r√©sultat au syst√®me de surveillance, l'√©tat de v√©rification redeviendra un succ√®s. <br><br>  Quelle est la dur√©e de validit√© du ch√®que? <br><br>  Le temps de pertinence doit √™tre plus long que la p√©riode d'ex√©cution de la t√¢che.  Je recommande de d√©finir le temps de pertinence 2-3 fois plus longtemps que la p√©riode de la t√¢che.  Cela est n√©cessaire pour ne pas recevoir de fausses notifications lorsque, par exemple, la t√¢che a pris plus de temps que d'habitude ou lorsque quelqu'un a recharg√© le programme. <br><br>  <b>V√©rification des progr√®s</b> <br><br>  Le syst√®me ASMO a pour t√¢che ¬´T√©l√©charger une pr√©vision¬ª, qui une fois par heure essaie de t√©l√©charger une nouvelle pr√©vision √† partir d'une source externe.  L'heure exacte √† laquelle une nouvelle pr√©vision appara√Æt dans le syst√®me externe n'est pas connue, mais il est connu que cela se produit 2 fois par jour.  Il s'av√®re que s'il n'y a pas de nouvelle pr√©vision pour plusieurs heures, alors c'est normal, mais s'il n'y a pas de nouvelle pr√©vision pour plus d'une journ√©e, alors quelque chose s'est cass√© quelque part.  Par exemple, dans un syst√®me de pr√©visions externe, le format des donn√©es peut changer, car ASMO ne verra pas de nouvelle version des pr√©visions. <br><blockquote>  Algorithme de validation <br><br>  La t√¢che envoie le r√©sultat du contr√¥le SUCCESS au syst√®me de surveillance lorsqu'il est possible d'obtenir des progr√®s (t√©l√©charger une nouvelle pr√©vision m√©t√©o).  S'il n'y a pas de progr√®s ou qu'une erreur s'est produite, rien n'est envoy√© au syst√®me de surveillance. <br><br>  L'audit doit avoir un intervalle de pertinence tel qu'il soit garanti de recevoir de nouveaux progr√®s pendant cette p√©riode. </blockquote><img src="https://habrastorage.org/webt/4c/oa/ot/4coaotwdujcgv41vjexohnepxv8.png"><br><br>  Veuillez noter que nous apprenons le probl√®me avec un retard, car le syst√®me de surveillance attend jusqu'√† ce que le temps de pertinence du dernier r√©sultat du test expire.  Par cons√©quent, le temps de pertinence du contr√¥le n'a pas besoin d'√™tre trop long. <br><br><h2>  Surveillance de la base de donn√©es </h2><br>  Pour contr√¥ler la base de donn√©es dans le syst√®me ASMO, nous effectuons les v√©rifications suivantes: <br><br><ol><li>  V√©rifier les sauvegardes </li><li>  V√©rification de l'espace disque libre </li></ol><br>  <b>V√©rifier les sauvegardes</b> <br>  Dans la plupart des applications, il est important de disposer de sauvegardes de base de donn√©es en cours, afin qu'en cas de d√©faillance d'un serveur, vous puissiez d√©ployer le programme sur un nouveau serveur. <br><br>  ASMO cr√©e une copie de sauvegarde une fois par semaine et l'envoie au r√©f√©rentiel.  Une fois cette proc√©dure termin√©e avec succ√®s, le r√©sultat du contr√¥le de r√©ussite est envoy√© au syst√®me de surveillance.  Le r√©sultat du contr√¥le a une dur√©e de validit√© de 9 jours.  C'est-√†-dire  Pour contr√¥ler la cr√©ation des sauvegardes, le m√©canisme de ¬´v√©rification de la progression¬ª est utilis√©, que nous avons examin√© ci-dessus. <br><br>  <b>V√©rification de l'espace disque libre</b> <br>  S'il n'y a pas assez d'espace libre sur le disque, la base de donn√©es ne pourra pas fonctionner normalement, il est donc important de contr√¥ler la quantit√© d'espace libre. <br><br>  Il est pratique d'utiliser des m√©triques pour v√©rifier les param√®tres num√©riques. <br><blockquote>  <b>La m√©trique</b> est une variable num√©rique dont la valeur est transmise au syst√®me de surveillance.  Le syst√®me de surveillance v√©rifie les seuils et calcule l'√©tat de la m√©trique. </blockquote>  Voici une image de ce √† quoi ressemble le composant ¬´Base de donn√©es¬ª dans le syst√®me de surveillance: <br><br><img src="https://habrastorage.org/webt/me/k2/3i/mek23iw6yn36d1ocos5hq_3pxga.png"><br><br><h2>  Surveillance du serveur </h2><br>  Pour surveiller le serveur, nous utilisons les contr√¥les et mesures suivants: <br><br>  <b>1. Espace disque libre</b> <br>  Si l'espace disque est √©puis√©, l'application ne pourra pas fonctionner.  Nous utilisons 2 valeurs de seuil: le premier niveau est AVERTISSEMENT, le deuxi√®me niveau est ALARME. <br><br>  <b>2. La valeur moyenne de la RAM en pourcentage par heure</b> <br>  Nous utilisons la valeur moyenne par heure, comme  nous ne sommes pas int√©ress√©s par les races rares. <br><br>  <b>3. La valeur moyenne du CPU en pourcentage par heure</b> <br>  Nous utilisons la valeur moyenne par heure, comme  nous ne sommes pas int√©ress√©s par les races rares. <br><br>  <b>4. V√©rification Ping</b> <br>  V√©rifie que le serveur est en ligne.  Le syst√®me de surveillance est en mesure d'effectuer cette v√©rification, pas besoin d'√©crire du code. <br><br>  Voici une image de ce √† quoi ressemble le composant ¬´Serveur¬ª dans le syst√®me de surveillance: <br><br><img src="https://habrastorage.org/webt/pw/pp/xb/pwppxbrmsqreuojevziycqoda7q.png"><br><br><h2>  Surveillance des √©quipements </h2><br>  Je vais vous dire comment les donn√©es sont re√ßues.  Pour chaque point de contr√¥le routier (MPC) dans le planificateur de t√¢ches, il existe une t√¢che, par exemple, "Polling MPC M2 km 200".  La t√¢che une fois toutes les 30 minutes re√ßoit les donn√©es de tous les p√©riph√©riques MPC. <br><br>  <b>Probl√®me de canal de communication</b> <br>  La plupart des √©quipements sont situ√©s en dehors de la ville, un r√©seau GSM est utilis√© pour la transmission de donn√©es, qui ne fonctionne pas de mani√®re stable (c'est-√†-dire qu'il n'existe pas). <br><br>  En raison de d√©faillances fr√©quentes du r√©seau, la premi√®re v√©rification de l'enqu√™te MPC dans la surveillance ressemblait √† ceci: <br><br><img src="https://habrastorage.org/webt/0e/at/me/0eatme_jcfrfkkzu8k7tkimmlpc.png"><br><br>  Il est devenu clair que cela ne fonctionne pas, car de nombreuses fausses alertes ont √©t√© re√ßues concernant les probl√®mes.  Ensuite, il a √©t√© d√©cid√© pour chaque appareil d'utiliser un "contr√¥le de progression", c'est-√†-dire  seul le signal de r√©ussite est envoy√© au syst√®me de surveillance lorsque l'appareil est interrog√© sans erreur.  Le temps de pertinence a √©t√© fix√© √† 5 heures. <br><br><img src="https://habrastorage.org/webt/ql/pm/4f/qlpm4fedlrheg_dw33mb9uspvay.png"><br><br>  La surveillance envoie d√©sormais une notification des probl√®mes uniquement lorsque l'appareil ne parvient pas √† interroger pendant plus de 5 heures.  Avec un degr√© de probabilit√© √©lev√©, ce ne sont pas de fausses alarmes, mais de vrais probl√®mes. <br><br>  Ci-dessous est une image de ce √† quoi ressemble l'√©quipement dans un syst√®me de surveillance: <br><br><img src="https://habrastorage.org/webt/a7/o8/m1/a7o8m1fjmicudpjx9ynmepfl-jg.png"><br><br>  <b>Important!</b> <br>  Lorsque le r√©seau GSM cesse de fonctionner, tous les appareils MPC ne sont pas interrog√©s.  Pour r√©duire le nombre de lettres du syst√®me de surveillance, nos ing√©nieurs souscrivent aux notifications de probl√®mes de composants de type "MPC", et non "Device".  Cela vous permet de recevoir une notification pour chaque MAC, plut√¥t que de recevoir une notification distincte pour chaque appareil. <br><br><h2>  Le sch√©ma de surveillance final ASMO </h2><br>  Mettons tout cela ensemble et voyons quel type de syst√®me de surveillance nous avons. <br><br><img src="https://habrastorage.org/webt/b7/1l/nr/b71lnrqwuh-gv2boh9pbd7uao3y.png"><br><br><h2>  Conclusion </h2><br>  R√©sumons. <br>  Que nous a apport√© le suivi des performances de l'ASMO? <br><br>  <b>1. Temps de d√©pannage r√©duit</b> <br>  Nous avions l'habitude d'en savoir plus sur les d√©fauts des utilisateurs, mais tous les utilisateurs ne signalent pas de d√©fauts.  Il se trouve que nous avons d√©couvert le dysfonctionnement d'un composant du syst√®me une semaine apr√®s son apparition.  Maintenant, le syst√®me de surveillance nous informe des probl√®mes d√®s que le probl√®me est d√©tect√©. <br><br>  <b>2. Stabilit√© accrue du syst√®me</b> <br>  Comme les d√©fauts ont commenc√© √† √™tre corrig√©s plus t√¥t, le syst√®me dans son ensemble a commenc√© √† fonctionner de mani√®re beaucoup plus stable. <br><br>  <b>3. R√©duire le nombre d'appels au support technique</b> <br>  De nombreux probl√®mes sont d√©sormais r√©solus avant que les utilisateurs ne les d√©couvrent.  Les utilisateurs ont moins de contact avec le support technique.  Tout cela a un bon effet sur notre r√©putation. <br><br>  <b>4. Accro√Ætre la fid√©lit√© des clients et des utilisateurs</b> <br>  Le client a remarqu√© des changements positifs dans la stabilit√© du syst√®me.  Les utilisateurs sont moins susceptibles de rencontrer des probl√®mes avec le syst√®me. <br><br>  <b>5. R√©duisez les co√ªts de support technique</b> <br>  Nous avons arr√™t√© d'effectuer manuellement des v√©rifications.  D√©sormais, tous les contr√¥les sont automatis√©s.  Nous avions l'habitude de conna√Ætre les probl√®mes des utilisateurs, il √©tait souvent difficile de comprendre de quel probl√®me l'utilisateur parlait.  Maintenant, la plupart des probl√®mes sont signal√©s par le syst√®me de surveillance, les notifications contiennent des donn√©es techniques, sur lesquelles il est toujours clair quoi et o√π il s'est cass√©. <br><br>  <b>Important!</b> <br>  Vous ne pouvez pas installer un syst√®me de surveillance sur le m√™me serveur sur lequel vos applications s'ex√©cutent.  Si le serveur tombe en panne, les applications cesseront de fonctionner et il n'y aura personne pour envoyer une notification √† ce sujet. <br><br>  Le syst√®me de surveillance doit fonctionner sur un serveur distinct dans un autre centre de donn√©es. <br><br>  Si vous ne souhaitez pas utiliser de serveur d√©di√© dans le nouveau centre de donn√©es, vous pouvez utiliser le syst√®me de surveillance cloud.  Notre entreprise utilise le syst√®me de surveillance cloud Zidium, mais vous pouvez utiliser tout autre syst√®me de surveillance.  Le co√ªt d'un syst√®me de surveillance cloud est inf√©rieur √† la location d'un nouveau serveur. <br><br>  <b>Recommandations:</b> <br><br><ol><li>  Cassez les applications et les syst√®mes sous la forme d'une arborescence de composants avec autant de d√©tails que possible, il sera donc pratique de comprendre o√π et ce qui s'est cass√©, et le contr√¥le sera plus complet. </li><li>  Pour v√©rifier l'int√©grit√© d'un composant, utilisez les v√©rifications.  Il vaut mieux utiliser beaucoup de contr√¥les simples que complexes. </li><li>  Les valeurs m√©triques de seuil sont configur√©es sur le c√¥t√© du syst√®me de surveillance et n'√©crivent pas dans le code.  Cela vous √©vitera de recompiler, de reconfigurer ou de red√©marrer l'application. </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour les contr√¥les utilisateurs, utilisez le temps de pertinence avec une marge afin de ne pas recevoir de fausses notifications car certains contr√¥les ont pris un peu plus de temps que d'habitude. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essayez de vous assurer que les composants du syst√®me de surveillance ne deviennent rouges qu'en cas de probl√®me. </font><font style="vertical-align: inherit;">S'ils deviennent rouges pour rien, vous cesserez de pr√™ter attention aux notifications du syst√®me de surveillance, sa signification sera perdue.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous n'utilisez pas d√©j√† un syst√®me de surveillance, commencez! </font><font style="vertical-align: inherit;">Ce n'est pas aussi difficile qu'il y para√Æt. </font><font style="vertical-align: inherit;">Prenez de la hauteur en regardant l'arbre des composants verts que vous avez cultiv√© vous-m√™me.</font></font><br><br>  Bonne chance </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463121/">https://habr.com/ru/post/fr463121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463105/index.html">Mon quatri√®me jour avec Haiku: probl√®mes d'installation et de d√©marrage</a></li>
<li><a href="../fr463107/index.html">ShIoTiny: petite automatisation, Internet des objets, ou ¬´six mois avant les vacances¬ª</a></li>
<li><a href="../fr463113/index.html">Contr√¥le de version des donn√©es et des mod√®les dans la rencontre Computer Vision</a></li>
<li><a href="../fr463115/index.html">Le probl√®me des portes dans la conception des tireurs</a></li>
<li><a href="../fr463117/index.html">Pr√©chargement en PHP 7.4</a></li>
<li><a href="../fr463123/index.html">Biblioth√®que de g√©n√©rateur de code assembleur pour microcontr√¥leurs AVR. 3e partie</a></li>
<li><a href="../fr463125/index.html">OOP en images</a></li>
<li><a href="../fr463127/index.html">Surveillance UPS. Deuxi√®me partie - Automatiser l'analyse</a></li>
<li><a href="../fr463135/index.html">Dans quels pays est-il rentable d'enregistrer des soci√©t√©s informatiques en 2019?</a></li>
<li><a href="../fr463137/index.html">M√™me si vous voulez √™tre un game designer, personne ne vous apprendra comment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>