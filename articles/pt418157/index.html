<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëàüèæ üö∏ üòæ O livro "Objetos elegantes. Edi√ß√£o Java ¬ª üÜô üõåüèø üëåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi, habrozhiteli! Este livro revisa seriamente a ess√™ncia e os princ√≠pios da programa√ß√£o orientada a objetos (OOP) e pode ser metaforicamente chamado ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro "Objetos elegantes. Edi√ß√£o Java ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/418157/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/w_/ty/kk/w_tykkzjrz7fxozztm-4tp4asci.jpeg" align="left" alt="imagem"></a>  Oi, habrozhiteli!  Este livro revisa seriamente a ess√™ncia e os princ√≠pios da programa√ß√£o orientada a objetos (OOP) e pode ser metaforicamente chamado de "Lobachevsky OOP".  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Egor Bugaenko</a> , um desenvolvedor com 20 anos de experi√™ncia, analisa criticamente os dogmas da OOP e se oferece para examinar esse paradigma de uma maneira completamente nova.  Ent√£o, ele estigmatiza m√©todos est√°ticos, getters, setters, m√©todos mut√°veis, acreditando que isso √© mau.  Para um programador iniciante, esse volume pode se tornar ilumina√ß√£o ou choque e, para um programador experiente, √© uma leitura obrigat√≥ria. <br><br><h3>  Trecho "N√£o use m√©todos est√°ticos" </h3><br>  Ah, m√©todos est√°ticos ... Um dos meus t√≥picos favoritos.  Levei v√°rios anos para perceber o qu√£o importante √© esse problema.  Agora me arrependo de todo o tempo que gastei escrevendo software processual em vez de orientado a objetos.  Eu era cego, mas agora eu vi.  Os m√©todos est√°ticos s√£o t√£o grandes, se n√£o um problema maior no POO, quanto ter uma constante NULL.  Os m√©todos est√°ticos, em princ√≠pio, n√£o deveriam estar em Java e em outras linguagens orientadas a objetos, mas, infelizmente, est√£o l√°.  N√£o devemos saber sobre coisas como a palavra-chave est√°tica em Java, mas, infelizmente, somos for√ßados. N√£o sei quem os trouxe para Java, mas eles s√£o pura maldade. M√©todos est√°ticos, n√£o os autores desse recurso.  Espero que sim. <br><a name="habracut"></a><br>  Vamos ver o que s√£o m√©todos est√°ticos e por que ainda os criamos.  Digamos que eu precise da funcionalidade de carregar uma p√°gina da web por meio de solicita√ß√µes HTTP.  Eu crio uma "classe": <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WebPage</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String uri</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  HTTP- //     UTF8- } }</span></span></code> </pre> <br>  √â muito conveniente us√°-lo: <br><br><pre> <code class="hljs pgsql">String html = WebPage.<span class="hljs-keyword"><span class="hljs-keyword">read</span></span>("http://www.java.com");</code> </pre> <br>  O m√©todo read () pertence √† classe de m√©todos que eu me oponho.  Sugiro usar um objeto (tamb√©m alterei o nome do m√©todo de acordo com as recomenda√ß√µes da se√ß√£o 2.4): <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String uri; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">content</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  HTTP- //     UTF8- } }</span></span></code> </pre> <br>  Veja como us√°-lo: <br><br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebPage(<span class="hljs-string"><span class="hljs-string">"http://www.java.com"</span></span>) .content();</code> </pre> <br>  Voc√™ pode dizer que n√£o h√° muita diferen√ßa entre eles.  Os m√©todos est√°ticos funcionam ainda mais r√°pido, porque n√£o precisamos criar um novo objeto toda vez que precisamos baixar uma p√°gina da web.  Basta chamar o m√©todo est√°tico, ele far√° o trabalho, voc√™ obter√° o resultado e continuar√° a trabalhar. N√£o h√° necessidade de mexer nos objetos e no coletor de lixo.  Al√©m disso, podemos agrupar v√°rios m√©todos est√°ticos em uma classe de utilit√°rio e nomear, por exemplo, WebUtils. <br><br>  Esses m√©todos ajudar√£o a carregar p√°ginas da web, obter informa√ß√µes estat√≠sticas, determinar o tempo de resposta, etc. Haver√° muitos m√©todos neles, e us√°-los √© simples e intuitivo.  Al√©m disso, como aplicar m√©todos est√°ticos tamb√©m √© intuitivo.  Todo mundo entende como eles funcionam.  Basta escrever WebPage.read () e - voc√™ adivinhou!  - a p√°gina ser√° lida.  Demos instru√ß√µes ao computador e ele √© executado. Simples e claro, certo?  E n√£o! <br><br>  M√©todos est√°ticos em qualquer contexto s√£o um indicador inconfund√≠vel de um programador ruim que n√£o tem id√©ia sobre OOP.  N√£o h√° justificativa para aplicar m√©todos est√°ticos em qualquer situa√ß√£o.  Cuidar do desempenho n√£o conta.  Os m√©todos est√°ticos s√£o uma zombaria de um paradigma orientado a objetos.  Eles existem em Java, Ruby, C ++, PHP e outras linguagens.  Infelizmente  N√£o podemos jog√°-los fora, n√£o podemos reescrever todas as bibliotecas de c√≥digo aberto cheias de m√©todos est√°ticos, mas podemos parar de us√°-las em nosso c√≥digo. <br><br>  Devemos parar de usar m√©todos est√°ticos. <br><br>  Agora, vamos examin√°-los de v√°rias posi√ß√µes diferentes e discutir suas defici√™ncias pr√°ticas.  Posso generaliz√°-los com anteced√™ncia: m√©todos est√°ticos degradam a manuten√ß√£o do software.  Isso n√£o deveria surpreend√™-lo.  Tudo se resume √† manuten√ß√£o. <br><br><h3>  Objetivo versus pensamento computacional </h3><br>  Inicialmente, chamei essa subse√ß√£o de Objetivo versus Pensamento Processual, mas depois a renomeei.  ‚ÄúPensamento procedural‚Äù significa quase a mesma coisa, mas a frase ‚Äúpense como um computador‚Äù descreve melhor o problema. Herdamos essa maneira de pensar das linguagens de programa√ß√£o iniciais, como Assembly, C, COBOL, Basic, Pascal e muitas outras.  A base do paradigma √© que o computador funciona para n√≥s, e dizemos a ele o que fazer, fornecendo instru√ß√µes expl√≠citas, por exemplo: <br><br><pre> <code class="hljs cmake"> CMP AX, BX JNAE <span class="hljs-keyword"><span class="hljs-keyword">greater</span></span> MOV CX, BX RET <span class="hljs-keyword"><span class="hljs-keyword">greater</span></span>: MOV CX, AX RET</code> </pre> <br>  Essa √© uma "rotina" de montagem do processador Intel 8086. Ele encontra e retorna o maior dos dois n√∫meros.  N√≥s os colocamos nos registros AX e BX, respectivamente, e o resultado cai no registro CX.  Aqui est√° exatamente o mesmo c√≥digo C: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &gt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br>  "O que h√° de t√£o errado nisso?"  - voc√™ pergunta.  Nada .. Est√° tudo bem com este c√≥digo - ele funciona como deveria.√â assim que todos os computadores funcionam.  Eles esperam que n√≥s lhes demos instru√ß√µes de que eles seguir√£o um ap√≥s o outro. Por muitos anos, escrevemos programas dessa maneira.  A vantagem dessa abordagem √© que permanecemos pr√≥ximos ao processador, direcionando seu movimento adicional.  Estamos no comando, e o computador segue nossas instru√ß√µes.  Dizemos ao computador como encontrar o maior dos dois n√∫meros.  Tomamos decis√µes, ele as segue.  O fluxo de execu√ß√£o √© sempre consistente, desde o in√≠cio do script at√© o fim. <br><br>  Esse tipo de pensamento linear √© chamado "pense como um computador".  Em algum momento, o computador come√ßa a executar instru√ß√µes e, em algum momento, termina de faz√™-lo.  Ao escrever c√≥digo em C, somos for√ßados a pensar dessa maneira.  Operadores separados por ponto e v√≠rgula v√£o de cima para baixo.  Esse estilo √© herdado do assembler. <br>  Embora as linguagens de n√≠vel superior ao assembler possuam procedimentos, sub-rotinas e outros mecanismos de abstra√ß√£o, elas n√£o eliminam uma maneira consistente de pensar.O programa ainda √© executado de cima para baixo.  N√£o h√° nada errado com essa abordagem ao escrever pequenos programas, mas em uma escala maior √© dif√≠cil pensar assim. <br><br>  D√™ uma olhada no mesmo c√≥digo escrito na linguagem de programa√ß√£o funcional Lisp: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defun</span></span> max (<span class="hljs-name"><span class="hljs-name">ab</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">&gt;</span></span> ab) ab))</code> </pre> <br>  Voc√™ pode dizer onde a execu√ß√£o desse c√≥digo come√ßa e termina?  N√£o.  N√£o sabemos como o processador obter√° o resultado ou como a fun√ß√£o if funcionar√°.  Estamos muito distantes do processador.  Pensamos como uma fun√ß√£o, n√£o como um computador.  Quando precisamos de uma coisa nova, n√≥s a definimos: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">def</span></span> x (<span class="hljs-name"><span class="hljs-name">max</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>))</code> </pre> <br>  Definimos, n√£o fornecemos instru√ß√µes ao processador.  Com esta linha, ligamos x a (max 5 9).  N√£o pedimos ao computador que calcule o maior dos dois n√∫meros.  Simplesmente dizemos que x √© o maior dos dois n√∫meros.  N√£o controlamos como e quando ser√° calculado.  Observe que isso √© importante: x √© o maior dos n√∫meros.  A rela√ß√£o ‚Äú√©‚Äù (‚Äúser‚Äù, ‚Äúser‚Äù) √© a diferen√ßa entre um paradigma de programa√ß√£o funcional, l√≥gico e orientado a objetos e um paradigma processual. <br><br>  Com uma mentalidade de computador, estamos no comando e controlamos o fluxo de instru√ß√µes.  Com uma maneira de pensar orientada a objetos, simplesmente determinamos quem √© quem e deixamos que eles interajam quando precisam.  Veja como o c√°lculo do maior de dois n√∫meros deve parecer no OOP: <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Max</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number a; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Number left, Number right)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = left; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = right; } }</code> </pre> <br>  E ent√£o eu vou us√°-lo: <br><br><pre> <code class="hljs pgsql">Number x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br>  Olha, eu n√£o estou calculando o maior dos dois n√∫meros.  Eu determino que x √© o maior dos dois n√∫meros.  Eu realmente n√£o me importo com o que est√° dentro do objeto da classe Max e como exatamente ele implementa a interface Number.  N√£o dou instru√ß√µes ao processador em rela√ß√£o a este c√°lculo.  Eu apenas instanciamos o objeto.  Isso √© muito semelhante ao def no Lisp. Nesse sentido, o OOP √© muito semelhante √† programa√ß√£o funcional. <br><br>  Por outro lado, os m√©todos est√°ticos no OOP s√£o os mesmos que as sub-rotinas em C ou assembler.  Eles n√£o est√£o relacionados ao OOP e nos for√ßam a escrever c√≥digo processual na sintaxe orientada a objetos.  Aqui est√° o c√≥digo Java: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> x = Math.max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br>  Isso est√° completamente errado e n√£o deve ser usado no design real orientado a objetos. <br><br><h3>  Estilo declarativo versus imperativo </h3><br>  A programa√ß√£o imperativa ‚Äúdescreve c√°lculos em termos de operadores que alteram o estado de um programa‚Äù. A programa√ß√£o declarativa, por outro lado, ‚Äúexpressa a l√≥gica da computa√ß√£o sem descrever o fluxo de sua execu√ß√£o‚Äù (cito a Wikipedia).  De fato, conversamos sobre isso ao longo de v√°rias p√°ginas anteriores.  A programa√ß√£o imperativa √© semelhante ao que os computadores fazem - executando instru√ß√µes em sequ√™ncia.  A programa√ß√£o declarativa est√° mais pr√≥xima da maneira natural de pensar em que temos entidades e relacionamentos entre elas.  Obviamente, a programa√ß√£o declarativa √© uma abordagem mais poderosa, mas uma abordagem imperativa √© mais compreens√≠vel para os programadores de procedimentos.  Por que a abordagem declarativa √© mais poderosa?  N√£o mude, e depois de algumas p√°ginas chegamos ao ponto. <br><br>  O que tudo isso tem a ver com m√©todos est√°ticos?  N√£o importa se √© um m√©todo ou objeto est√°tico, ainda temos que escrever se (a&gt; b) em algum lugar, certo?  Sim exatamente.  O m√©todo est√°tico e o objeto s√£o apenas um inv√≥lucro na instru√ß√£o if, que executa a tarefa de comparar a com b.  A diferen√ßa √© como essa funcionalidade √© usada por outras classes, objetos e m√©todos.  E esta √© uma diferen√ßa significativa.  Considere isso com um exemplo. <br>  Digamos que eu tenha um intervalo limitado a dois n√∫meros inteiros e um n√∫mero inteiro que deve cair nele. Eu tenho que garantir que sim.  Aqui est√° o que devo fazer se o m√©todo max () for est√°tico: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-type"><span class="hljs-type">int</span></span> l, <span class="hljs-type"><span class="hljs-type">int</span></span> r, <span class="hljs-type"><span class="hljs-type">int</span></span> x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Math.min(Math.max(l, x), r); }</code> </pre> <br>  Precisamos criar outro m√©todo est√°tico, between (), que usa os dois m√©todos est√°ticos dispon√≠veis, Math.min () e Math.max ().  H√° apenas uma maneira de fazer isso - uma abordagem imperativa, pois o valor √© calculado imediatamente.  Quando fa√ßo uma chamada, recebo imediatamente o resultado: <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = Math.between(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  9</span></span></code> </pre> <br>  Recebo o n√∫mero 9 logo ap√≥s ligar entre ().  Quando a chamada √© feita, meu processador come√ßar√° imediatamente a trabalhar nesse c√°lculo.  Esta √© uma abordagem imperativa.  E ent√£o, como √© a abordagem declarativa? <br><br>  Aqui, d√™ uma olhada: <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Between</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number num; Between(Number left, Number right, Number x) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Min(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Max(left, x), right); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num.intValue(); } }</code> </pre> <br>  √â assim que eu vou us√°-lo: <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Between(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   !</span></span></code> </pre> <br>  Sente a diferen√ßa?  Ela √© extremamente importante.  Esse estilo ser√° declarativo, porque n√£o digo ao processador que os c√°lculos precisam ser feitos imediatamente.  Eu apenas determinei o que era e deixei que o usu√°rio decidisse quando (e se era necess√°rio) calcular a vari√°vel y usando o m√©todo intValue ().  Talvez nunca seja calculado e meu processador nunca saber√° qual √© o n√∫mero 9. Tudo o que fiz foi declarar o que √© y.  Acabou de anunciar.  Ainda n√£o dei nenhum trabalho ao processador.  Conforme indicado na defini√ß√£o, expressou a l√≥gica sem descrever o processo. <br><br>  Eu j√° ouvi: ‚ÄúOk, eu entendo voc√™.  Existem duas abordagens - declarativas e processuais, mas por que a primeira √© melhor que a segunda? ‚Äù  Mencionei anteriormente que √© √≥bvio que a abordagem declarativa √© mais poderosa, mas n√£o explicou o porqu√™.  Agora que examinamos as duas abordagens com exemplos, discutiremos as vantagens de uma abordagem declarativa. <br><br>  Em primeiro lugar, √© mais r√°pido.  √Ä primeira vista, pode parecer mais lento.  Mas se voc√™ olhar mais de perto, ficar√° claro que, na verdade, √© mais r√°pido, pois a otimiza√ß√£o do desempenho est√° completamente em nossas m√£os.  De fato, levar√° mais tempo para criar uma inst√¢ncia da classe Between do que chamar o m√©todo static between (), pelo menos na maioria das linguagens de programa√ß√£o dispon√≠veis no momento da reda√ß√£o deste livro. Espero realmente que tenhamos uma linguagem no futuro pr√≥ximo. em que instanciar um objeto ser√° t√£o r√°pido quanto chamar um m√©todo.  Mas ainda n√£o chegamos a ele.  √â por isso que a abordagem declarativa √© mais lenta ... quando o caminho da execu√ß√£o √© simples e direto. <br><br>  Se estamos falando de uma simples chamada para um m√©todo est√°tico, certamente ser√° mais r√°pido do que criar uma inst√¢ncia de um objeto e chamar seus m√©todos.  Por√©m, se tivermos muitos m√©todos est√°ticos, eles ser√£o chamados sequencialmente ao resolver o problema, e n√£o apenas para trabalhar nos resultados que realmente precisamos.  Que tal isso: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> doIt() { <span class="hljs-type"><span class="hljs-type">int</span></span> x = Math.<span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*  ? */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("x=" + x); } }</code> </pre> <br>  Neste exemplo, calculamos x independentemente de precisarmos ou n√£o de seu valor .. O processador encontrar√° o valor 9. Nos dois casos, o pr√≥ximo m√©todo usando a abordagem declarativa funcionar√° t√£o r√°pido quanto o anterior? <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> doIt() { <span class="hljs-type"><span class="hljs-type">Integer</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*  ? */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("x=" + x); } }</code> </pre> <br>  Eu acho que o c√≥digo declarativo ser√° mais r√°pido.  √â melhor otimizado.  E n√£o diz ao processador o que fazer. Pelo contr√°rio, permite que o processador decida quando e onde o resultado √© realmente necess√°rio - os c√°lculos s√£o realizados sob demanda. <br><br>  O ponto principal √© que a abordagem declarativa √© mais r√°pida porque √© ideal.  Este √© o primeiro argumento a favor de uma abordagem declarativa em compara√ß√£o com o imperativo na programa√ß√£o orientada a objetos.  O estilo imperativo definitivamente n√£o tem lugar no OOP, e a primeira raz√£o para isso √© a otimiza√ß√£o do desempenho. Voc√™ n√£o deve dizer que quanto mais voc√™ controla a otimiza√ß√£o do c√≥digo, mais ele √© seguido.  Em vez de deixar a otimiza√ß√£o do processo de c√°lculo para o compilador, m√°quina virtual ou processador, fazemos isso sozinhos. <br><br>  O segundo argumento √© polimorfismo.  Simplificando, polimorfismo √© a capacidade de quebrar depend√™ncias entre blocos de c√≥digo.  Suponha que eu queira alterar o algoritmo para determinar se um n√∫mero cai em um determinado intervalo.  √â bastante primitivo em si, mas eu quero mudar isso.  Eu n√£o quero usar as classes Max e Min.  E eu quero que ele fa√ßa uma compara√ß√£o usando as instru√ß√µes if-then-else. Veja como fazer isso declarativamente: <br><br><pre> <code class="hljs axapta"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Between</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number num; Between(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Min(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Max(left, x), right)); } Between(Number number) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num = number; } }</code> </pre> <br>  √â a mesma classe Between que no exemplo anterior, mas com um construtor adicional.  Agora eu posso us√°-lo com outro algoritmo: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">Integer</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Between</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> IntegerWithMyOwnAlgorithm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>) );</code> </pre> <br>  Este provavelmente n√£o √© o melhor exemplo, j√° que a classe Between √© muito primitiva, mas espero que voc√™ entenda o que quero dizer.  A classe Between √© muito f√°cil de separar das classes Max e Min, pois s√£o classes.  Na programa√ß√£o orientada a objetos, um objeto √© um cidad√£o completo, mas o m√©todo est√°tico n√£o √©.  Podemos passar o objeto como argumento para o construtor, mas n√£o podemos fazer o mesmo com o m√©todo est√°tico.  No OOP, os objetos s√£o associados a objetos, se comunicam com objetos e trocam dados com eles.  Para desanexar completamente um objeto de outros objetos, devemos garantir que ele n√£o use o novo operador em nenhum de seus m√©todos (consulte a se√ß√£o 3.6), bem como no construtor principal. <br><br>  Deixe-me repetir: para desanexar completamente um objeto de outros objetos, voc√™ s√≥ precisa garantir que o novo operador n√£o seja usado em nenhum de seus m√©todos, incluindo o construtor principal. <br><br>  Voc√™ pode fazer o mesmo desacoplamento e refatora√ß√£o com um trecho de c√≥digo imperativo? <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> y = Math.<span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>);</code> </pre> <br>  N√£o, voc√™ n√£o pode.  O m√©todo static between () usa dois m√©todos est√°ticos, min () e max (), e voc√™ n√£o pode fazer nada at√© reescrev√™-lo completamente.  E como voc√™ pode reescrev√™-lo?  Passar o quarto par√¢metro para o novo m√©todo est√°tico? <br><br>  Qu√£o feio vai parecer?  Eu acho muito. <br><br>  Aqui est√° o meu segundo argumento a favor de um estilo de programa√ß√£o declarativo - ele reduz a coes√£o dos objetos e o torna muito elegante. Sem mencionar o fato de que menos coes√£o significa mais facilidade de manuten√ß√£o. <br><br>  O terceiro argumento a favor da superioridade da abordagem declarativa sobre o imperativo - a abordagem declarativa fala dos resultados, enquanto o imperativo explica a √∫nica maneira de obt√™-los.  A segunda abordagem √© muito menos intuitiva que a primeira.  Preciso primeiro "executar" o c√≥digo na minha cabe√ßa para entender o resultado esperado.  Aqui est√° uma abordagem imperativa: <br><br><pre> <code class="hljs pgsql">Collection&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt; evens = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> LinkedList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> number : numbers) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) { evens.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(number); } }</code> </pre> <br>  Para entender o que esse c√≥digo faz, eu tenho que passar por ele, visualizar esse ciclo. Na verdade, eu tenho que fazer o que o processador faz - passar por toda a matriz de n√∫meros e colocar os n√∫meros pares na nova lista.  Aqui est√° o mesmo algoritmo, escrito em um estilo declarativo: <br><br><pre> <code class="hljs pgsql">Collection&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt; evens = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Filtered( numbers, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Predicate&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt;() { @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">boolean</span></span> suitable(<span class="hljs-type"><span class="hljs-type">Integer</span></span> number) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>; } } );</code> </pre> <br>  Esse trecho de c√≥digo est√° muito mais pr√≥ximo do idioma ingl√™s do que o anterior.  Ele l√™ da seguinte maneira: "evens √© uma cole√ß√£o filtrada que inclui apenas os elementos que s√£o pares".  N√£o sei exatamente como a classe Filtrada cria uma cole√ß√£o - ela usa uma instru√ß√£o for ou algo mais.  Tudo o que preciso saber ao ler este c√≥digo √© que a cole√ß√£o foi filtrada.  Os detalhes da implementa√ß√£o est√£o ocultos e o comportamento √© expresso. <br><br>  Percebo que, para alguns leitores deste livro, foi mais f√°cil perceber o primeiro fragmento. √â um pouco mais curto e muito semelhante ao que voc√™ v√™ diariamente no c√≥digo com o qual est√° lidando.  Garanto-lhe que isso √© uma quest√£o de h√°bito.  Este √© um sentimento enganador.  Comece a pensar em termos de objetos e seu comportamento, em vez de algoritmos e sua execu√ß√£o, e voc√™ obter√° uma verdadeira percep√ß√£o.  O estilo declarativo se relaciona diretamente aos objetos e seu comportamento, e o imperativo - aos algoritmos e √† sua execu√ß√£o. <br><br>  Se voc√™ achar esse c√≥digo feio, tente o Groovy, por exemplo: <br><br><pre> <code class="hljs scala"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evens</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Filtered</span></span>( numbers, { <span class="hljs-type"><span class="hljs-type">Integer</span></span> number -&gt; number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> } );</code> </pre> <br>  O quarto argumento √© a integridade do c√≥digo.  D√™ uma olhada nos dois trechos anteriores.  Observe que no segundo fragmento declaramos o evens como um operador - evens = Filtrado (...).  Isso significa que todas as linhas de c√≥digo respons√°veis ‚Äã‚Äãpelo c√°lculo dessa cole√ß√£o est√£o pr√≥ximas umas das outras e n√£o podem ser separadas por engano.  Pelo contr√°rio, no primeiro fragmento n√£o existe uma "colagem" √≥bvia das linhas.  Voc√™ pode facilmente alterar a ordem deles por engano, e o algoritmo ser√° interrompido. <br><br>  Em um peda√ßo de c√≥digo t√£o simples, esse √© um pequeno problema, pois o algoritmo √© √≥bvio.  Mas se o fragmento do c√≥digo imperativo for maior - digamos, 50 linhas, pode ser dif√≠cil entender quais linhas de c√≥digo est√£o relacionadas entre si. Discutimos o problema da concatena√ß√£o temporal um pouco antes - durante a discuss√£o de objetos imut√°veis. O estilo de programa√ß√£o declarativo tamb√©m ajuda a eliminar essa concatena√ß√£o , devido a qual manuten√ß√£o √© aprimorada. <br><br>  Provavelmente ainda existem argumentos, mas citei o mais importante, do meu ponto de vista, daqueles relacionados ao POO.  Espero ter conseguido convenc√™-lo de que estilo declarativo √© o que voc√™ precisa.  Alguns de voc√™s podem dizer: ‚ÄúSim, entendo o que voc√™ quer dizer.  Vou combinar abordagens declarativas e imperativas, quando apropriado.  Usarei objetos onde faz sentido, e m√©todos est√°ticos quando precisar fazer algo simples rapidamente, como calcular o maior de dois n√∫meros. ".." "N√£o, voc√™ est√° errado!"  - Eu responderei.  Voc√™ n√£o deve combin√°-los. Nunca use um estilo imperativo.  Isso n√£o √© um dogma. Isso tem uma explica√ß√£o muito pragm√°tica. <br><br>  O estilo imperativo n√£o pode ser combinado com o declarativo puramente t√©cnico.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quando voc√™ come√ßa a usar a abordagem imperativa, est√° condenado - gradualmente todo o seu c√≥digo se tornar√° imperativo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suponha que tenhamos dois m√©todos est√°ticos - max () e min (). </font><font style="vertical-align: inherit;">Eles fazem pequenos c√°lculos r√°pidos, por isso os tornamos est√°ticos. </font><font style="vertical-align: inherit;">Agora precisamos criar um algoritmo maior para determinar se o n√∫mero pertence ao intervalo. Desta vez, queremos ir declarativamente - para criar a classe Between, e n√£o o m√©todo est√°tico between (). </font><font style="vertical-align: inherit;">Podemos fazer isso? </font><font style="vertical-align: inherit;">Provavelmente sim, mas de uma maneira substituta, e n√£o como deveria ser. </font><font style="vertical-align: inherit;">N√£o podemos usar construtores e encapsulamento. </font><font style="vertical-align: inherit;">E for√ßado a fazer chamadas diretas e expl√≠citas para m√©todos est√°ticos diretamente dentro da classe Between. </font><font style="vertical-align: inherit;">Em outras palavras, n√£o podemos escrever c√≥digo puramente orientado a objetos se os componentes reutiliz√°veis ‚Äã‚Äãforem m√©todos est√°ticos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os m√©todos est√°ticos lembram o c√¢ncer de um software orientado a objetos: depois de permitir que eles se estabele√ßam no c√≥digo, n√£o poderemos nos livrar deles - sua col√¥nia s√≥ crescer√°. Apenas ignore-os em princ√≠pio.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúMas eu os tenho em todos os lugares! - voc√™ vai exclamar. "O que fazer?" O que posso dizer ... voc√™ tem problemas, como todos n√≥s. Existem milhares de bibliotecas orientadas a objetos que s√£o quase inteiramente compostas de classes de utilidade (iremos discuti-las na pr√≥xima se√ß√£o). Aqui, como em um tumor, o melhor rem√©dio √© uma faca. N√£o use esses programas se puder pagar. No entanto, na maioria dos casos, voc√™ n√£o pode usar uma faca, pois essas bibliotecas s√£o muito populares e oferecem funcionalidade √∫til. Nesse caso, a melhor coisa que voc√™ pode fazer √© isolar o tumor criando suas pr√≥prias classes que envolvem m√©todos est√°ticos para que seu c√≥digo funcione exclusivamente com objetos. Por exemplo, na biblioteca do Apache Commons, existe um m√©todo est√°tico FileUtils.readLines (), que l√™ todas as linhas de um arquivo de texto.Veja como podemos transform√°-lo em um objeto:</font></font><br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileLines</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> File file; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Iterator&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList( FileUtils.readLines(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.file) ).iterator(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agora, para ler todas as linhas de um arquivo de texto, nosso aplicativo precisar√° fazer o seguinte: </font></font><br><br><pre> <code class="hljs lisp">Iterable&lt;String&gt; lines = new FileLines(<span class="hljs-name"><span class="hljs-name">f</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um m√©todo est√°tico ser√° chamado apenas dentro da classe FileLines e, com o tempo, podemos nos livrar dele. </font><font style="vertical-align: inherit;">Ou isso nunca vai acontecer. </font><font style="vertical-align: inherit;">Mas a conclus√£o √© que, em nosso c√≥digo, os m√©todos est√°ticos n√£o ser√£o chamados em nenhum lugar, exceto em um local - a classe FileLines. </font><font style="vertical-align: inherit;">Portanto, isolamos os mortos, o que nos permite lidar com eles gradualmente.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Classes de utilidade </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As chamadas classes de utilit√°rio, na verdade, n√£o s√£o classes, mas apenas um conjunto de m√©todos est√°ticos usados ‚Äã‚Äãpor outras classes por conveni√™ncia (eles tamb√©m s√£o conhecidos como m√©todos auxiliares). Por exemplo, a classe java.lang.Math √© um exemplo cl√°ssico de uma classe de utilit√°rio. Esses produtos s√£o muito populares em Java, Ruby e, infelizmente, em quase todas as linguagens de programa√ß√£o modernas. Por que eles n√£o s√£o classes? Por causa deles, voc√™ n√£o pode instanciar objetos. Na se√ß√£o 1.1, discutimos a diferen√ßa entre um objeto e uma classe e chegamos √† conclus√£o de que uma classe √© uma f√°brica de objetos. A classe de utilit√°rio n√£o √© uma f√°brica, por exemplo:</font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math { private Math() { //   } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">int</span></span> max(<span class="hljs-type"><span class="hljs-type">int</span></span> a, <span class="hljs-type"><span class="hljs-type">int</span></span> b) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â uma boa pr√°tica para quem usa classes de utilit√°rio criar um construtor privado, como no exemplo, para evitar a cria√ß√£o de uma inst√¢ncia da classe. </font><font style="vertical-align: inherit;">Como o construtor √© privado, ningu√©m al√©m dos m√©todos da classe pode instanciar a classe. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As classes de utilit√°rio s√£o o triunfo dos programadores de procedimentos no campo da programa√ß√£o orientada a objetos. </font><font style="vertical-align: inherit;">Uma classe de utilidade n√£o √© apenas uma coisa terr√≠vel, como um m√©todo est√°tico - √© um monte de coisas terr√≠veis. </font><font style="vertical-align: inherit;">Todos os palavr√µes falados sobre m√©todos est√°ticos podem ser repetidos com amplifica√ß√£o m√∫ltipla. </font><font style="vertical-align: inherit;">As classes de utilidade s√£o um terr√≠vel antipadr√£o no OOP. Fique longe delas.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Padr√£o Singleton </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O padr√£o Singleton √© uma t√©cnica popular que afirma ser uma substitui√ß√£o de m√©todos est√°ticos. De fato, haver√° apenas um m√©todo est√°tico na classe, e o singleton quase parecer√° um objeto real. No entanto, ele n√£o √©:</font></font><br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Math</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Math INSTANCE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Math(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Math</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Math </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Math.INSTANCE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O exemplo acima √© um exemplo t√≠pico de singleton. H√° uma √∫nica inst√¢ncia da classe Math chamada INSTANCE. Todos podem acess√°-la simplesmente chamando getInstance (). O construtor √© tornado privado, a fim de impedir a instancia√ß√£o direta de objetos dessa classe. A √∫nica maneira de acessar o INSTANCE √© chamar getInstance (). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Singleton √© conhecido como padr√£o de design, mas, na realidade, √© um terr√≠vel antipadr√£o. H√° muitas raz√µes pelas quais essa √© uma t√©cnica de programa√ß√£o ruim. Vou dar apenas alguns deles sobre m√©todos est√°ticos. Obviamente, seria mais f√°cil se discut√≠ssemos primeiro como o singleton difere da classe de utilidade sobre a qual acabamos de falar. Aqui est√° a apar√™ncia de uma classe de utilit√°rio de matem√°tica, que faz o mesmo que o singleton fornecido anteriormente:</font></font><br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Math</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Math</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √â assim que o m√©todo max () ser√° usado: </font></font><br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">Math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>); <span class="hljs-comment"><span class="hljs-comment">// - Math.getInstance().max(5, 9); // </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual a diferen√ßa? </font><font style="vertical-align: inherit;">Parece que a segunda linha √© apenas mais longa, mas faz o mesmo. </font><font style="vertical-align: inherit;">Por que reinventar o singleton se j√° t√≠nhamos m√©todos est√°ticos e classes de utilidade? </font><font style="vertical-align: inherit;">Costumo fazer essa pergunta em entrevistas com programadores Java. </font><font style="vertical-align: inherit;">A primeira coisa que geralmente ou√ßo em resposta √©: "Singleton permite que voc√™ encapsule um estado".</font></font> Por exemplo: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> User INSTANCE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> User.INSTANCE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String txt</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = txt; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este √© um peda√ßo terr√≠vel de c√≥digo, mas tenho que citar isso como uma ilustra√ß√£o para meus argumentos. Esse singleton significa literalmente "o usu√°rio atualmente usando o sistema". Essa abordagem √© muito popular em muitas estruturas da Web onde existem singles de usu√°rios, sess√µes da Web etc. Portanto, a resposta t√≠pica para minha pergunta sobre a diferen√ßa entre um singleton e uma classe de utilit√°rio √©: ‚ÄúSingleton encapsula estado‚Äù .. Mas isso est√° incorreto a resposta O objetivo do singleton n√£o √© armazenar o estado. Aqui est√° uma classe de utilit√°rio que faz o mesmo que o singleton mencionado anteriormente:</font></font><br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> User.name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String txt</span></span></span><span class="hljs-function">)</span></span> { User.name = txt; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa classe de utilit√°rio armazena o estado e n√£o h√° diferen√ßa entre ela e o singleton mencionado. Ent√£o qual √© o problema? E qual √© a resposta correta? A √∫nica resposta verdadeira √© que um singleton √© uma depend√™ncia que pode ser quebrada e uma classe de utilit√°rio √© uma conex√£o estreita codificada que n√£o pode ser quebrada. Em outras palavras, a vantagem das singletones √© que voc√™ pode adicionar o m√©todo setInstance () a elas, juntamente com getInstance (). Esta resposta est√° correta, embora eu a ou√ßa com pouca frequ√™ncia. Suponha que eu use singleton da seguinte maneira:</font></font><br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Math</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.getInstance</span></span>()<span class="hljs-selector-class"><span class="hljs-selector-class">.max</span></span>(5, 9);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meu c√≥digo est√° vinculado √† classe Math. Em outras palavras, a classe Math √© a depend√™ncia em que confio. Sem essa classe, o c√≥digo n√£o funcionaria e, para test√°-lo, eu teria que deixar a classe Math dispon√≠vel para poder atender a solicita√ß√µes. No caso dessa classe em particular, esse problema √© pequeno, pois √© muito primitivo. No entanto, se o singleton for grande, talvez seja necess√°rio aplicar zombaria ou substitu√≠-lo por algo mais adequado para o teste. Simplificando, n√£o quero que o m√©todo Math.max () seja executado enquanto o teste de unidade estiver em execu√ß√£o. Como eu fa√ßo isso? E aqui est√° como:</font></font><br><br><pre> <code class="hljs cmake"><span class="hljs-keyword"><span class="hljs-keyword">Math</span></span> <span class="hljs-keyword"><span class="hljs-keyword">math</span></span> = new FakeMath(); <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.setInstance(<span class="hljs-keyword"><span class="hljs-keyword">math</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O padr√£o Singleton fornece a capacidade de substituir um objeto est√°tico encapsulado, o que permite testar o objeto. </font><font style="vertical-align: inherit;">A verdade √© a seguinte: um singleton √© muito melhor do que uma classe de utilit√°rio apenas porque permite substituir um objeto encapsulado. </font><font style="vertical-align: inherit;">N√£o h√° objeto na classe de utilit√°rio - n√£o podemos mudar nada. </font><font style="vertical-align: inherit;">Uma classe de utilidade - uma depend√™ncia codificada e inextric√°vel - √© o mal mais puro da OOP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o, o que eu estou falando? </font><font style="vertical-align: inherit;">Singleton √© melhor que a classe de utilidade, mas ainda √© antipadr√£o e bastante ruim.</font></font> Porque<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como l√≥gica e tecnicamente, um singleton √© uma vari√°vel global, nem mais nem menos. Mas no OOP n√£o h√° escopo global. </font><font style="vertical-align: inherit;">Portanto, vari√°veis ‚Äã‚Äãglobais n√£o pertencem aqui. </font><font style="vertical-align: inherit;">Aqui est√° um programa C no qual uma vari√°vel √© declarada no escopo global:</font></font><br><br><pre> <code class="hljs mel">#include &lt;stdio&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> line = <span class="hljs-number"><span class="hljs-number">0</span></span>; void echo(char* <span class="hljs-keyword"><span class="hljs-keyword">text</span></span>) { printf(<span class="hljs-string"><span class="hljs-string">"[%d] %s\n"</span></span>, ++line, <span class="hljs-keyword"><span class="hljs-keyword">text</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sempre que chamamos echo (), a linha vari√°vel global √© incrementada. Puramente tecnicamente, a vari√°vel de linha √© vis√≠vel em cada fun√ß√£o e cada linha de c√≥digo no arquivo * .s √â vis√≠vel globalmente. Elogie os desenvolvedores Java por n√£o copiarem esse recurso do C. No Java, como no Ruby e em muitas outras linguagens sub-OOP, vari√°veis ‚Äã‚Äãglobais s√£o proibidas.</font></font> Porque<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porque eles n√£o t√™m nada a ver com OOP. Esta √© uma oportunidade puramente processual. Vari√°veis ‚Äã‚Äãglobais violam claramente o princ√≠pio do encapsulamento. Eles s√£o simplesmente terr√≠veis. Espero n√£o ter mais que explicar isso neste livro. Parece-me √≥bvio que vari√°veis ‚Äã‚Äãglobais s√£o t√£o ruins quanto o operador GOTO √© ruim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, apesar de todos os argumentos contra vari√°veis ‚Äã‚Äãglobais, algu√©m encontrou uma maneira de traz√™-las para Java, criando assim o padr√£o "Singleton". Isso √© simplesmente uma zombaria dos princ√≠pios do design orientado a objetos, possibilitado pela presen√ßa de m√©todos est√°ticos. Esses m√©todos tecnicamente permitem essa fraude. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca use singletones. Nem pense.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como substitu√≠-los? - voc√™ pergunta. "Se precisamos de algo acess√≠vel a muitas classes de todo o produto de software, o que podemos fazer?" Digamos que realmente precisamos da maioria das classes para saber qual usu√°rio est√° conectado no momento. N√£o temos classes de utilidade ou singletones. O que n√≥s temos? Encapsulamento! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apenas encapsule o usu√°rio em todos os objetos nos quais ele pode ser √∫til.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tudo o que sua classe precisa para trabalhar deve ser passado pelo construtor e encapsulado dentro da classe. Isso √© tudo. </font><font style="vertical-align: inherit;">Sem exce√ß√£o. </font><font style="vertical-align: inherit;">Um objeto n√£o deve afetar nada al√©m de suas propriedades encapsuladas. </font><font style="vertical-align: inherit;">Voc√™ pode dizer que precisa encapsular demais: conex√µes com os bancos de dados do usu√°rio logado, argumentos de linha de comando etc. Sim, de fato, tudo isso pode ser demais se a classe for muito grande e n√£o for conclu√≠da o suficiente. </font><font style="vertical-align: inherit;">Se voc√™ precisar encapsular muito, redesenhe a classe - reduza-a, conforme discutido na se√ß√£o 2.1. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas nunca use singleton. </font><font style="vertical-align: inherit;">N√£o h√° exce√ß√µes a esta regra.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Programa√ß√£o funcional </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Costumo ouvir esse argumento: se os objetos s√£o pequenos e imut√°veis ‚Äã‚Äãe os m√©todos est√°ticos n√£o est√£o envolvidos, por que n√£o usar a programa√ß√£o funcional (FP)? </font><font style="vertical-align: inherit;">De fato, se os objetos s√£o t√£o elegantes quanto o recomendado neste livro, eles s√£o muito semelhantes √†s fun√ß√µes. Ent√£o, por que precisamos de objetos? </font><font style="vertical-align: inherit;">Por que n√£o usar Lisp, Clojure ou Haskell em vez de Java ou C ++? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° uma classe que representa um algoritmo para determinar o maior de dois n√∫meros:</font></font><br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Max</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = left; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = right; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a &gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eis como devemos aplic√°-lo: </font></font><br><br><pre> <code class="hljs pgsql">Number x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> E aqui est√° como definir√≠amos uma fun√ß√£o no Lisp que faria o mesmo: </font></font><br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defn</span></span> max (<span class="hljs-name"><span class="hljs-name">ab</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">&gt;</span></span> ab) ab))</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o, por que usar objetos? </font><font style="vertical-align: inherit;">O c√≥digo Lisp √© muito mais curto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OOP √© mais expressivo e possui √≥timos recursos, pois opera em objetos e m√©todos, enquanto fun√ß√µes somente de FP. </font><font style="vertical-align: inherit;">Algumas linguagens FP tamb√©m t√™m objetos, mas eu as chamaria de linguagens OOP com recursos FP, e n√£o vice-versa. </font><font style="vertical-align: inherit;">Eu tamb√©m acredito que as express√µes lambda em Java, sendo um movimento em dire√ß√£o ao FP, tornam o Java mais livre, nos afastando do verdadeiro caminho OOP. </font><font style="vertical-align: inherit;">AF √© um grande paradigma, mas POO √© melhor. </font><font style="vertical-align: inherit;">Especialmente quando usado corretamente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece-me que, em uma linguagem OOP ideal, ter√≠amos aulas com fun√ß√µes internas. </font><font style="vertical-align: inherit;">N√£o m√©todos de microprocedimento, como √© agora em Java, mas fun√ß√µes reais (no sentido de um paradigma funcional) que possuem um √∫nico ponto de sa√≠da. </font><font style="vertical-align: inherit;">Isso seria perfeito.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Decoradores compost√°veis </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece que cunhei o termo. Decoradores vincul√°veis ‚Äã‚Äãs√£o simplesmente objetos de inv√≥lucro sobre outros objetos. Eles s√£o decoradores - um padr√£o bem conhecido de design orientado a objetos - mas se tornam compost√°veis ‚Äã‚Äãquando os combinamos em estruturas multicamadas, por exemplo:</font></font><br><br><pre> <code class="hljs lisp">names = new Sorted( <span class="hljs-name"><span class="hljs-name">new</span></span> Unique( <span class="hljs-name"><span class="hljs-name">new</span></span> Capitalized( <span class="hljs-name"><span class="hljs-name">new</span></span> Replaced( <span class="hljs-name"><span class="hljs-name">new</span></span> FileNames( <span class="hljs-name"><span class="hljs-name">new</span></span> Directory( <span class="hljs-string"><span class="hljs-string">"/var/users/*.xml"</span></span> ) ), <span class="hljs-string"><span class="hljs-string">"([^.]+)\\.xml"</span></span>, <span class="hljs-string"><span class="hljs-string">"$1"</span></span> ) ) ) )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esse c√≥digo, do meu ponto de vista, parece muito limpo e orientado a objetos. √â exclusivamente declarativo, conforme explicado na se√ß√£o 3.2. Ele n√£o faz nada, apenas declara um objeto de nomes, que √© uma cole√ß√£o classificada de seq√º√™ncias mai√∫sculas exclusivas que representam os nomes dos arquivos em um diret√≥rio que s√£o modificados por uma express√£o regular espec√≠fica. Acabei de explicar o que √© esse objeto, sem dizer uma palavra sobre como ele √© organizado. Acabei de anunciar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ acha esse c√≥digo limpo e f√°cil de entender? Espero que sim, levando em considera√ß√£o tudo o que falamos anteriormente.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â isso que chamo de decoradores compos√≠veis. As classes Directory, FileNames, Replaced, Capitalized, Unique e Sorted s√£o decoradoras, porque seu comportamento √© completamente determinado pelos objetos que eles encapsulam. Eles adicionam algum comportamento aos objetos encapsulados. Seu estado coincide com o estado dos objetos encapsulados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Äs vezes, eles fornecem a mesma interface que os objetos que encapsulam (mas isso n√£o √© necess√°rio). Por exemplo, Exclusivo √© Iter√°vel, que tamb√©m encapsula um iterador de linha. No entanto, FileNames √© um iterador de linha que encapsula um iterador de arquivo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A maior parte do c√≥digo em software orientado a objetos puro deve ser semelhante ao fornecido anteriormente. </font><font style="vertical-align: inherit;">Temos que compor os decoradores um no outro, e at√© um pouco mais do que isso. Em algum momento, chamamos app.run (), e toda a pir√¢mide de objetos come√ßa a responder. </font><font style="vertical-align: inherit;">O c√≥digo n√£o deve ter todas as instru√ß√µes processuais como if, for, switch e while. </font><font style="vertical-align: inherit;">Parece utopia, mas n√£o √© utopia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A instru√ß√£o if √© fornecida pela linguagem Java e √© usada por n√≥s de maneira processual, operador por operador. </font><font style="vertical-align: inherit;">Por que n√£o criar uma linguagem Java de substitui√ß√£o na qual a classe If seria? </font><font style="vertical-align: inherit;">Em vez do c√≥digo de procedimento a seguir:</font></font><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">float</span></span> rate; <span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (client.age() &gt; <span class="hljs-number"><span class="hljs-number">65</span></span>){ <span class="hljs-attribute"><span class="hljs-attribute">rate</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-section"><span class="hljs-section">else</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">rate</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√≥s escrever√≠amos esse c√≥digo orientado a objetos: </font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> rate = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>( client.age() &gt; <span class="hljs-number"><span class="hljs-number">65</span></span>, <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> E esse aqui? </font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> rate = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Greater(client.age(), <span class="hljs-number"><span class="hljs-number">65</span></span>), <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> E, finalmente, a √∫ltima melhoria: </font></font><br><br><pre> <code class="hljs lisp">float rate = new If( <span class="hljs-name"><span class="hljs-name">new</span></span> GreaterThan( <span class="hljs-name"><span class="hljs-name">new</span></span> AgeOf(<span class="hljs-name"><span class="hljs-name">client</span></span>), <span class="hljs-number"><span class="hljs-number">65</span></span> ), <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â assim que parece o c√≥digo declarado e orientado a objeto puro. Ele n√£o faz nada - ele simplesmente anuncia qual √© a taxa. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do meu ponto de vista, em uma OOP pura, n√£o s√£o necess√°rios operadores herdados de linguagens procedurais como C. Se, por, alternar e enquanto n√£o forem necess√°rios. Precisamos das classes If, For, Switch e While. Sente a diferen√ßa? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainda n√£o alcan√ßamos essas l√≠nguas, mas mais cedo ou mais tarde certamente chegaremos a ela. Eu tenho certeza disso. Enquanto isso, tente ficar longe de m√©todos longos e procedimentos complicados. Projete microclasses para que sejam compost√°veis. Verifique se eles podem ser reutilizados como elementos de composi√ß√£o em objetos maiores. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu diria que a programa√ß√£o orientada a objetos √© a montagem de objetos grandes a partir de objetos menores.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que isso tem a ver com m√©todos est√°ticos? </font><font style="vertical-align: inherit;">Tenho certeza que voc√™ j√° entendeu: m√©todos est√°ticos n√£o podem ser vinculados de forma alguma. </font><font style="vertical-align: inherit;">Eles inviabilizam tudo o que falei e o que mostrei anteriormente. </font><font style="vertical-align: inherit;">N√£o podemos coletar objetos grandes de objetos menores usando m√©todos est√°ticos. </font><font style="vertical-align: inherit;">Esses m√©todos s√£o contr√°rios √† id√©ia de layout. </font><font style="vertical-align: inherit;">Aqui est√° outra raz√£o pela qual os m√©todos est√°ticos s√£o pura maldade. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concluindo: em lugar nenhum e nunca use a palavra-chave est√°tica no seu c√≥digo - isso provar√° para voc√™ e para aqueles que usar√£o seu c√≥digo um √≥timo servi√ßo.</font></font><br><br>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20% de desconto no cupom para </font><b><font style="vertical-align: inherit;">Java</font></b><font style="vertical-align: inherit;"> Fermenters - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java</font></font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418157/">https://habr.com/ru/post/pt418157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418145/index.html">O primeiro processo contra Roskomnadzor de uma empresa que sofreu quando o Telegram foi bloqueado</a></li>
<li><a href="../pt418147/index.html">Sil√™ncio de execu√ß√µes Ruby: Rails transacionais / PostgreSQL Thriller</a></li>
<li><a href="../pt418149/index.html">Phishing com tag de t√≠tulo</a></li>
<li><a href="../pt418151/index.html">Introdu√ß√£o √† tarefa de reconhecer emo√ß√µes</a></li>
<li><a href="../pt418155/index.html">Diodo LED Diodo Zener</a></li>
<li><a href="../pt418159/index.html">Onde ir para o designer: pr√™mios de prest√≠gio da R√∫ssia, Europa Oriental e pa√≠ses da CEI</a></li>
<li><a href="../pt418161/index.html">Em Stanford, as baterias de streaming em temperatura ambiente desenvolvidas</a></li>
<li><a href="../pt418163/index.html">Testes de produ√ß√£o: Netflix Chaos Automation Platform</a></li>
<li><a href="../pt418165/index.html">Quasar, Sobaken e Vermin: revelando detalhes da campanha de espionagem cibern√©tica em andamento</a></li>
<li><a href="../pt418167/index.html">ScadaPy: adicione o protocolo IEC 60870-5-104</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>