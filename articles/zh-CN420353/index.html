<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ ğŸ‘¨â€âœˆï¸ â„¹ï¸ æˆ‘ä»¬ä½¿è™¾æ›´æœ‰ç”¨ï¼šå°†å›¾åƒè½¬ç æ·»åŠ åˆ°å…¶ä»–æ ¼å¼ ğŸ‘± ğŸ§›ğŸ½ ğŸ†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è‡ª2017å¹´åˆä»¥æ¥ï¼Œæˆ‘ä»¬çš„å°å‹å›¢é˜Ÿä¸€ç›´åœ¨å¼€å‘RESTinio OpenSourceåº“ï¼Œä»¥å°†HTTPæœåŠ¡å™¨åµŒå…¥C ++åº”ç”¨ç¨‹åºä¸­ã€‚ ä»¤æˆ‘ä»¬æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šæ”¶åˆ°â€œä¸ºä»€ä¹ˆä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼C ++ HTTPæœåŠ¡å™¨ï¼Ÿâ€è¿™ä¸€ç±»åˆ«çš„é—®é¢˜ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæœ€ç®€å•çš„é—®é¢˜å¾ˆéš¾å›ç­”ã€‚ æœ‰æ—¶æœ€å¥½çš„ç­”æ¡ˆæ˜¯ç¤ºä¾‹ä»£ç ã€‚ 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬ä½¿è™¾æ›´æœ‰ç”¨ï¼šå°†å›¾åƒè½¬ç æ·»åŠ åˆ°å…¶ä»–æ ¼å¼</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420353/"><img src="https://habrastorage.org/webt/7w/iy/b5/7wiyb5u0fpwa1duglcppwofjloa.jpeg"><br><br> è‡ª2017å¹´åˆä»¥æ¥ï¼Œæˆ‘ä»¬çš„å°å‹å›¢é˜Ÿä¸€ç›´åœ¨å¼€å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RESTinio OpenSourceåº“ï¼Œ</a>ä»¥å°†HTTPæœåŠ¡å™¨åµŒå…¥C ++åº”ç”¨ç¨‹åºä¸­ã€‚ ä»¤æˆ‘ä»¬æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šæ”¶åˆ°â€œä¸ºä»€ä¹ˆä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼C ++ HTTPæœåŠ¡å™¨ï¼Ÿâ€è¿™ä¸€ç±»åˆ«çš„é—®é¢˜ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæœ€ç®€å•çš„é—®é¢˜å¾ˆéš¾å›ç­”ã€‚ æœ‰æ—¶æœ€å¥½çš„ç­”æ¡ˆæ˜¯ç¤ºä¾‹ä»£ç ã€‚ <br><br> å‡ ä¸ªæœˆå‰ï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªå°å‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¼”ç¤ºé¡¹ç›®Shrimp</a> ï¼Œè¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¹ç›®</a>æ¸…æ¥šåœ°å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„åœºæ™¯ï¼Œåœ¨è¯¥åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬çš„å›¾ä¹¦é¦†è¢«â€œé”åŒ–äº†â€ã€‚ è¯¥æ¼”ç¤ºé¡¹ç›®æ˜¯ä¸€ä¸ªç®€å•çš„WebæœåŠ¡ï¼Œå®ƒæ¥æ”¶ç¼©æ”¾æœåŠ¡å™¨ä¸Šå­˜å‚¨çš„å›¾åƒçš„è¯·æ±‚ï¼Œå¹¶è¿”å›ç”¨æˆ·æ‰€éœ€å¤§å°çš„å›¾ç‰‡ã€‚ <br><br> è¯¥æ¼”ç¤ºé¡¹ç›®çš„ä¼˜ç‚¹åœ¨äºï¼Œé¦–å…ˆï¼Œå®ƒéœ€è¦ä¸å¾ˆä¹…ä»¥å‰ç”¨Cæˆ–C ++ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºImageMagickï¼‰ç¼–å†™å¹¶æ­£å¸¸å·¥ä½œçš„ä»£ç è¿›è¡Œé›†æˆã€‚ å› æ­¤ï¼Œåº”è¯¥æ¸…æ¥šä¸ºä»€ä¹ˆå°†HTTPæœåŠ¡å™¨åµŒå…¥C ++åº”ç”¨ç¨‹åºæ‰æœ‰æ„ä¹‰ã€‚ <br><br> å…¶æ¬¡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å¼‚æ­¥å¤„ç†è¯·æ±‚ï¼Œä»¥ä¾¿åœ¨ç¼©æ”¾å›¾åƒæ—¶HTTPæœåŠ¡å™¨ä¸ä¼šé˜»å¡ï¼ˆè¿™å¯èƒ½éœ€è¦æ•°ç™¾æ¯«ç§’ç”šè‡³å‡ ç§’é’Ÿï¼‰ã€‚ æ­£æ˜¯ç”±äºæˆ‘ä»¬æ‰¾ä¸åˆ°ä¸“é—¨é’ˆå¯¹å¼‚æ­¥è¯·æ±‚å¤„ç†çš„å¥å…¨çš„C ++åµŒå…¥å¼æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ‰å¼€å§‹RESTinioçš„å¼€å‘ã€‚ <br><br> æˆ‘ä»¬è¿­ä»£åœ°åœ¨Shrimpä¸Šæ„å»ºå·¥ä½œï¼šé¦–å…ˆï¼Œåˆ¶ä½œå¹¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æè¿°</a>äº†æœ€ç®€å•çš„ç‰ˆæœ¬ï¼Œä»…ç¼©æ”¾äº†å›¾ç‰‡ã€‚ ç„¶åï¼Œæˆ‘ä»¬ä¿®å¤äº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„è®¸å¤šç¼ºç‚¹ï¼Œå¹¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨ç¬¬äºŒç¯‡æ–‡ç« ä¸­å¯¹æ­¤è¿›è¡Œäº†æè¿°</a> ã€‚ æœ€åï¼Œæˆ‘ä»¬å†æ¬¡æ‰©å±•äº†Shrimpçš„åŠŸèƒ½ï¼šæ·»åŠ äº†å›¾åƒä»ä¸€ç§æ ¼å¼åˆ°å¦ä¸€ç§æ ¼å¼çš„è½¬æ¢ã€‚ æœ‰å…³å¦‚ä½•å®Œæˆçš„ï¼Œå°†åœ¨æœ¬æ–‡ä¸­è¿›è¡Œè®¨è®ºã€‚ <br><a name="habracut"></a><br><h1> ç›®æ ‡æ ¼å¼æ”¯æŒ </h1><br> å› æ­¤ï¼Œåœ¨ä¸‹ä¸€ç‰ˆæœ¬çš„Shrimpä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä»¥ä¸åŒæ ¼å¼ç”Ÿæˆç¼©æ”¾å›¾ç‰‡çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨å‘å‡ºä»¥ä¸‹å½¢å¼çš„è™¾è¯·æ±‚ï¼š <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">curl</span></span> <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/my_picture.jpg?op=resize&amp;max=1920"</span></span></code> </pre> <br> ç„¶åè™¾å°†ä»¥ä¸åŸå§‹å›¾åƒç›¸åŒçš„JPGæ ¼å¼æ¸²æŸ“å›¾åƒã€‚ <br><br> ä½†æ˜¯ï¼Œå¦‚æœå°†target-formatå‚æ•°æ·»åŠ åˆ°URLï¼Œåˆ™Shrimpä¼šå°†å›¾åƒè½¬æ¢ä¸ºæŒ‡å®šçš„ç›®æ ‡æ ¼å¼ã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">curl</span></span> <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/my_picture.jpg?op=resize&amp;max=1920&amp;target-format=webp"</span></span></code> </pre> <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒShrimpå°†ä»¥webpæ ¼å¼å‘ˆç°å›¾åƒã€‚ <br><br> æ›´æ–°çš„è™¾æ”¯æŒäº”ç§å›¾åƒæ ¼å¼ï¼šjpgï¼Œpngï¼Œgifï¼Œwebpå’Œheicï¼ˆä¹Ÿç§°ä¸ºHEIFï¼‰ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨ç‰¹æ®Šçš„ç½‘é¡µä¸Š</a>å°è¯•å„ç§æ ¼å¼ï¼š <br><br><img src="https://habrastorage.org/webt/99/ab/ke/99abkec8ode-lxyxufceqjmwxt8.png"><br><br>  ï¼ˆåœ¨æ­¤é¡µé¢ä¸Šï¼Œæ— æ³•é€‰æ‹©heicæ ¼å¼ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹æ™®é€šå°å¼æœºæµè§ˆå™¨ä¸æ”¯æŒæ­¤æ ¼å¼ï¼‰ã€‚ <br><br> ä¸ºäº†æ”¯æŒShrimpä¸­çš„ç›®æ ‡æ ¼å¼ï¼Œéœ€è¦ç¨å¾®ä¿®æ”¹Shrimpä»£ç ï¼ˆæˆ‘ä»¬è‡ªå·±å¾ˆæƒŠè®¶ï¼Œå› ä¸ºå®é™…ä¸Šæ‰€åšçš„æ›´æ”¹å¾ˆå°‘ï¼‰ã€‚ ä½†å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä¸å¾—ä¸ç©ImageMagickçš„ç¨‹åºé›†ï¼Œå¯¹æ­¤æˆ‘ä»¬æ„Ÿåˆ°æ›´åŠ æƒŠè®¶ï¼Œå› ä¸º è¾ƒæ—©ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¾—ä¸é€šè¿‡å¶ç„¶çš„æ–¹å¼æ¥å¤„ç†è¿™ä¸ªå¨æˆ¿ã€‚ ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬ä¾æ¬¡è®¨è®ºæ‰€æœ‰å†…å®¹ã€‚ <br><br><h2>  ImageMagickå¿…é¡»äº†è§£ä¸åŒçš„æ ¼å¼ </h2><br>  ImageMagickä½¿ç”¨å¤–éƒ¨åº“å¯¹å›¾åƒè¿›è¡Œç¼–ç /è§£ç ï¼šlibjpegï¼Œlibpngï¼Œlibgifç­‰ã€‚ åœ¨é…ç½®å’Œæ„å»ºImageMagickä¹‹å‰ï¼Œå¿…é¡»åœ¨ç³»ç»Ÿä¸Šå®‰è£…è¿™äº›åº“ã€‚ <br><br> ä¸ºäº†ä½¿ImageMagickæ”¯æŒwebpå’Œheicæ ¼å¼ï¼Œåº”è¯¥å‘ç”Ÿç›¸åŒçš„äº‹æƒ…ï¼šé¦–å…ˆï¼Œæ‚¨éœ€è¦æ„å»ºå¹¶å®‰è£…libwebpå’Œlibheifï¼Œç„¶åé…ç½®å¹¶å®‰è£…ImageMagickã€‚ å¦‚æœä½¿ç”¨libwebpä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼Œé‚£ä¹ˆåœ¨libheifå‘¨å›´ï¼Œæˆ‘ä¸å¾—ä¸å’Œæ‰‹é¼“è·³èˆã€‚ å°½ç®¡è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰€æœ‰äº‹æƒ…ç»ˆäºéƒ½æ”¶é›†èµ·æ¥å¹¶å·¥ä½œäº†ï¼Œä½†ç°åœ¨è¿˜ä¸æ¸…æ¥šï¼šä¸ºä»€ä¹ˆä½ ä¸å¾—ä¸è¯‰è¯¸æ‰‹é¼“ï¼Œä¸€åˆ‡ä¼¼ä¹éƒ½å¾ˆçç¢ï¼Ÿ  ;ï¼‰ <br><br> é€šå¸¸ï¼Œå¦‚æœæœ‰äººæƒ³ä¸heicå’ŒImageMagickäº¤æœ‹å‹ï¼Œåˆ™å¿…é¡»å®‰è£…ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¥è‡ªvideolan.orgçš„x265</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">libde265</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ©æ¯”è€¶å¤«</a> </li></ul><br> å®ƒçš„é¡ºåºæ˜¯è¿™æ ·ï¼ˆæ‚¨å¯èƒ½å¿…é¡»å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">nasm</a>æ‰èƒ½ä½¿x265ä»¥æœ€å¿«çš„é€Ÿåº¦å·¥ä½œï¼‰ã€‚ ç„¶åï¼Œåœ¨å‘å‡º<i>./configure</i>å‘½ä»¤æ—¶ï¼ŒImageMagickå°†èƒ½å¤Ÿæ‰¾åˆ°æ”¯æŒ.heicæ–‡ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ã€‚ <br><br><h2> æ”¯æŒä¼ å…¥è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„ç›®æ ‡æ ¼å¼ </h2><br> åœ¨ä½¿ç”¨webpå’Œheicæ ¼å¼ä½¿ImageMagickæˆä¸ºæœ‹å‹ä¹‹åï¼Œæ˜¯æ—¶å€™ä¿®æ”¹Shrimpä»£ç äº†ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ å¦‚ä½•è¯†åˆ«ä¼ å…¥HTTPè¯·æ±‚ä¸­çš„target-formatå‚æ•°ã€‚ <br><br> ä»RESTinioçš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ ¹æœ¬ä¸æ˜¯é—®é¢˜ã€‚ å¥½å§ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²ä¸­å‡ºç°äº†å¦ä¸€ä¸ªå‚æ•°ï¼Œé‚£åˆå¦‚ä½•å‘¢ï¼Ÿ ä½†æ˜¯ä»Shrimpçš„è§’åº¦æ¥çœ‹ï¼Œæƒ…å†µå˜å¾—æ›´åŠ å¤æ‚ï¼Œå› æ­¤è´Ÿè´£è§£æHTTPè¯·æ±‚çš„åŠŸèƒ½çš„ä»£ç ä¹Ÿå˜å¾—æ›´åŠ å¤æ‚ã€‚ <br><br> äº‹å®æ˜¯ï¼Œåœ¨ä»…éœ€è¦åŒºåˆ†ä¸¤ç§æƒ…å†µä¹‹å‰ï¼š <br><br><ul><li> å‘å‡ºçš„å½¢å¼ä¸ºâ€œ /filename.extâ€çš„è¯·æ±‚æ²¡æœ‰ä»»ä½•å…¶ä»–å‚æ•°ã€‚ å› æ­¤ï¼Œæ‚¨åªéœ€è¦åŸæ ·æä¾›æ–‡ä»¶â€œ filename.extâ€å³å¯ï¼› </li><li> è¯·æ±‚ä»¥â€œ /filename.ext?op=resizeï¼†...â€çš„å½¢å¼å‡ºç°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä»æ–‡ä»¶â€œ filename.extâ€ç¼©æ”¾å›¾åƒã€‚ </li></ul><br> ä½†æ˜¯åœ¨æ·»åŠ äº†ç›®æ ‡æ ¼å¼ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†å››ç§æƒ…å†µï¼š <br><br><ul><li> å‘å‡ºçš„å½¢å¼ä¸ºâ€œ /filename.extâ€çš„è¯·æ±‚æ²¡æœ‰ä»»ä½•å…¶ä»–å‚æ•°ã€‚ å› æ­¤ï¼Œæ‚¨åªéœ€è¦æŒ‰åŸæ ·æä¾›æ–‡ä»¶â€œ filename.extâ€ï¼Œæ— éœ€ç¼©æ”¾å³å¯å°†å…¶è½¬ç ä¸ºå¦ä¸€ç§æ ¼å¼ï¼› </li><li> å‘å‡ºçš„æ ¼å¼ä¸ºâ€œ /filename.ext?target-format=fmtâ€çš„è¯·æ±‚æ²¡æœ‰ä»»ä½•å…¶ä»–å‚æ•°ã€‚ è¿™æ„å‘³ç€ä»æ–‡ä»¶â€œ filename.extâ€ä¸­è·å–å›¾åƒå¹¶å°†å…¶è½¬ç ä¸ºâ€œ fmtâ€æ ¼å¼ï¼ŒåŒæ—¶ä¿ç•™åŸå§‹å¤§å°ï¼› </li><li> è¯·æ±‚çš„æ ¼å¼ä¸ºâ€œ /filename.ext?op=resizeï¼†...â€ï¼Œä½†æ²¡æœ‰ç›®æ ‡æ ¼å¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ç¼©æ”¾æ–‡ä»¶â€œ filename.extâ€ä¸­çš„å›¾åƒå¹¶ä»¥åŸå§‹æ ¼å¼æä¾›å›¾åƒï¼› </li><li> è¯·æ±‚çš„æ ¼å¼ä¸ºâ€œ /filename.ext?op=resize&amp;...&amp;target-format=fmtâ€ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦æ‰§è¡Œç¼©æ”¾ï¼Œç„¶åå°†ç»“æœè½¬ç ä¸ºâ€œ fmtâ€æ ¼å¼ã€‚ </li></ul><br> ç»“æœï¼Œç”¨äºç¡®å®šæŸ¥è¯¢å‚æ•°çš„å‡½æ•°é‡‡ç”¨<a href="https://bitbucket.org/sobjectizerteam/shrimp-demo/src/4049abf4ca148fb0d291239b28135315d5f4053f/dev/shrimp/">ä»¥ä¸‹å½¢å¼</a> ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">void</span></span> add_transform_op_handler( const app_params_t &amp; app_params, http_req_router_t &amp; router, so_5::mbox_t req_handler_mbox ) { router.http_get( R"(/:path(.*)\.:ext(.{3,4}))", restinio::path2regex::options_t{}.<span class="hljs-keyword"><span class="hljs-keyword">strict</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ), [req_handler_mbox, &amp;app_params]( auto req, auto params ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( has_illegal_path_components( req-&gt;<span class="hljs-keyword"><span class="hljs-keyword">header</span></span>().path() ) ) { //     . <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> do_400_response( std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ) ); } //   . const auto qp = restinio::parse_query( req-&gt;<span class="hljs-keyword"><span class="hljs-keyword">header</span></span>().query() ); const auto target_format = qp.get_param( "target-format"sv ); //        // .   target-<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>,    //   .   target-<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>  // ,    ,  //    . const auto image_format = try_detect_target_image_format( params[ "ext" ], target_format ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !image_format ) { //     .   . <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> do_400_response( std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ) ); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !qp.size() ) { //    ,    . <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> serve_as_regular_file( app_params.m_storage.m_root_dir, std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ), *image_format ); } const auto operation = qp.get_param( "op"sv ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( operation &amp;&amp; "resize"sv != *operation ) { //    ,     resize. <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> do_400_response( std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ) ); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !operation &amp;&amp; !target_format ) { //      op=resize, //   target-<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>=something. <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> do_400_response( std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ) ); } handle_resize_op_request( req_handler_mbox, *image_format, qp, std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>( req ) ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> restinio::request_accepted(); } ); }</code> </pre> <br> åœ¨Shrimpçš„å…ˆå‰ç‰ˆæœ¬ä¸­ï¼Œæ‚¨æ— éœ€å¯¹å›¾åƒè¿›è¡Œè½¬ç ï¼Œä½¿ç”¨è¯·æ±‚å‚æ•°<a href="https://bitbucket.org/sobjectizerteam/shrimp-demo/src/3e8beeeb8935f84e492af188dd6fc6f2ba785657/dev/shrimp/">çœ‹èµ·æ¥æ›´åŠ å®¹æ˜“</a> ã€‚ <br><br><h2> é’ˆå¯¹ç›®æ ‡æ ¼å¼é‡èº«å®šåˆ¶çš„è¯·æ±‚é˜Ÿåˆ—å’Œå›¾åƒç¼“å­˜ </h2><br> å®ç°ç›®æ ‡æ ¼å¼æ”¯æŒçš„ä¸‹ä¸€ç‚¹æ˜¯åœ¨a_transform_managerä»£ç†ä¸­å¤„ç†ç­‰å¾…è¯·æ±‚é˜Ÿåˆ—å’Œç°æˆå›¾åƒçš„ç¼“å­˜ã€‚ æˆ‘ä»¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­</a>æ›´è¯¦ç»†åœ°è®¨è®ºäº†è¿™äº›äº‹æƒ…ï¼Œä½†è®©æˆ‘ä»¬ç¨å¾®æé†’ä¸€ä¸‹å®ƒçš„å«ä¹‰ã€‚ <br><br> å½“å›¾åƒè½¬æ¢è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°å…·æœ‰æ­¤ç±»å‚æ•°çš„å®Œæˆå›¾åƒå·²åœ¨ç¼“å­˜ä¸­ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨æ— éœ€æ‰§è¡Œä»»ä½•æ“ä½œï¼Œåªéœ€ä»ç¼“å­˜ä¸­å‘é€å›¾åƒä½œä¸ºå“åº”å³å¯ã€‚ å¦‚æœéœ€è¦è½¬æ¢å›¾ç‰‡ï¼Œåˆ™å¯èƒ½è¡¨æ˜ç›®å‰æ²¡æœ‰å…è´¹çš„å·¥ä½œäººå‘˜ï¼Œæ‚¨éœ€è¦ç­‰å¾…ç›´åˆ°å›¾ç‰‡å‡ºç°ã€‚ ä¸ºæ­¤ï¼Œå¿…é¡»å°†è¯·æ±‚ä¿¡æ¯æ’é˜Ÿã€‚ ä½†åŒæ—¶ï¼Œæœ‰å¿…è¦æ£€æŸ¥è¯·æ±‚çš„å”¯ä¸€æ€§-å¦‚æœæˆ‘ä»¬æœ‰ä¸‰ä¸ªç›¸åŒçš„è¯·æ±‚åœ¨ç­‰å¾…å¤„ç†ï¼ˆå³æˆ‘ä»¬éœ€è¦ä»¥ç›¸åŒçš„æ–¹å¼è½¬æ¢ç›¸åŒçš„å›¾åƒï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åªå¤„ç†ä¸€æ¬¡å›¾åƒï¼Œå¹¶ç»™å‡ºå¤„ç†ç»“æœä½œä¸ºå“åº”å¯¹è¿™ä¸‰ä¸ªè¯·æ±‚ã€‚ å³ åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¿…é¡»å°†ç›¸åŒçš„è¯·æ±‚åˆ†ç»„ã€‚ <br><br> åœ¨Shrimpçš„æ—©æœŸï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„ç»„åˆé”®æ¥æœç´¢å›¾åƒç¼“å­˜å’Œç­‰å¾…é˜Ÿåˆ—ï¼š <a href="">åŸå§‹æ–‡ä»¶å+å›¾åƒå¤§å°è°ƒæ•´é€‰é¡¹çš„ç»„åˆ</a> ã€‚ ç°åœ¨ï¼Œå¿…é¡»è€ƒè™‘ä¸¤ä¸ªæ–°å› ç´ ï¼š <br><br><ul><li> é¦–å…ˆï¼Œç›®æ ‡å›¾åƒæ ¼å¼ï¼ˆå³åŸå§‹å›¾åƒå¯ä»¥æ˜¯jpgï¼Œç»“æœå›¾åƒå¯ä»¥æ˜¯pngï¼‰ï¼› </li><li> å…¶æ¬¡ï¼Œç¼©æ”¾å›¾ç‰‡å¯èƒ½ä¸æ˜¯å¿…éœ€çš„ã€‚ å‘ç”Ÿè¿™ç§æƒ…å†µçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä»…å‘½ä»¤å°†å›¾åƒä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼ï¼Œä½†ä¿ç•™äº†å›¾åƒçš„åŸå§‹å¤§å°ã€‚ </li></ul><br> æˆ‘å¿…é¡»è¯´ï¼Œè¿™é‡Œæˆ‘ä»¬èµ°äº†æœ€ç®€å•çš„é“è·¯ï¼Œè€Œæ²¡æœ‰å°è¯•ä»¥æŸç§æ–¹å¼ä¼˜åŒ–ä»»ä½•ä¸œè¥¿ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯ä»¥å°è¯•å»ºç«‹ä¸¤ä¸ªç¼“å­˜ï¼šä¸€ä¸ªä»¥åŸå§‹æ ¼å¼å­˜å‚¨å›¾åƒï¼Œä½†æŒ‰æ¯”ä¾‹ç¼©æ”¾åˆ°æ‰€éœ€çš„å¤§å°ï¼Œç¬¬äºŒä¸ªï¼Œå°†ç¼©æ”¾åçš„å›¾åƒè½¬æ¢ä¸ºç›®æ ‡æ ¼å¼ã€‚ <br><br> ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§åŒé‡ç¼“å­˜ï¼Ÿ äº‹å®æ˜¯ï¼Œåœ¨è½¬æ¢å›¾ç‰‡æ—¶ï¼Œæ—¶é—´ä¸Šä¸¤ä¸ªæœ€æ˜‚è´µçš„æ“ä½œæ˜¯å°†å›¾ç‰‡è°ƒæ•´å¤§å°å¹¶å°†å…¶åºåˆ—åŒ–ä¸ºç›®æ ‡æ ¼å¼ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ”¶åˆ°äº†å°†example.jpgå›¾åƒç¼©æ”¾åˆ°1920å®½åº¦å¹¶å°†å…¶è½¬æ¢ä¸ºwebpæ ¼å¼çš„è¯·æ±‚ï¼Œåˆ™å¯ä»¥åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸¤ä¸ªå›¾åƒï¼šexample_1920px_width.jpgå’Œexample_1920px_width.webpã€‚ å½“æˆ‘ä»¬æ”¶åˆ°ç¬¬äºŒä¸ªè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬å°†æä¾›ä¸€ä¸ªexample_1920px_width.webpå›¾ç‰‡ã€‚ ä½†æ˜¯ï¼Œåœ¨æ¥æ”¶å°†example.jpgç¼©æ”¾ä¸º1920å®½åº¦å¹¶å°†å…¶è½¬æ¢ä¸ºheicæ ¼å¼çš„è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨example_1920px_width.jpgå›¾ç‰‡ã€‚ æˆ‘ä»¬å¯ä»¥è·³è¿‡è°ƒæ•´å¤§å°çš„æ“ä½œï¼Œè€Œåªè¿›è¡Œæ ¼å¼è½¬æ¢ï¼ˆå³ï¼Œå®Œæˆçš„å›¾åƒexample_1920px_width.jpgå°†è¢«è½¬ç ä¸ºheicæ ¼å¼ï¼‰ã€‚ <br><br> å¦ä¸€ä¸ªæ½œåœ¨æœºä¼šï¼šå½“è¯·æ±‚å°†å›¾åƒè½¬ç ä¸ºå…¶ä»–æ ¼å¼è€Œä¸è°ƒæ•´å¤§å°æ—¶ï¼Œæ‚¨å¯ä»¥ç¡®å®šå›¾åƒçš„å®é™…å¤§å°ï¼Œå¹¶åœ¨ç»„åˆé”®ä¸­ä½¿ç”¨æ­¤å¤§å°ã€‚ ä¾‹å¦‚ï¼Œè®©example.jpgçš„å¤§å°ä¸º3000x2000åƒç´ ã€‚ å¦‚æœä¸‹ä¸€æ¬¡æ”¶åˆ°å°†example.jpgç¼©æ”¾åˆ°2000pxé«˜åº¦çš„è¯·æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç«‹å³ç¡®å®šæˆ‘ä»¬å·²ç»æœ‰æ­¤å°ºå¯¸çš„å›¾ç‰‡ã€‚ <br><br> ä»ç†è®ºä¸Šè®²ï¼Œæ‰€æœ‰è¿™äº›è€ƒè™‘éƒ½å€¼å¾—å…³æ³¨ã€‚ ä½†æ˜¯ä»å®é™…çš„è§’åº¦æ¥çœ‹ï¼Œå°šä¸æ¸…æ¥šè¿™ç§äº‹ä»¶å‘å±•çš„å¯èƒ½æ€§æœ‰å¤šé«˜ã€‚ å³ æˆ‘ä»¬å¤šä¹…ä¼šæ”¶åˆ°å°†example.jpgç¼©æ”¾åˆ°1920pxå¹¶è½¬æ¢ä¸ºwebpçš„è¯·æ±‚ï¼Œç„¶ååˆæ”¶åˆ°å¯¹åŒä¸€å›¾åƒè¿›è¡Œç›¸åŒç¼©æ”¾ä½†è½¬æ¢ä¸ºpngçš„è¯·æ±‚ï¼Ÿ æ²¡æœ‰çœŸå®çš„ç»Ÿè®¡æ•°æ®å¾ˆéš¾è¯´ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å†³å®šä¸è®©æˆ‘ä»¬çš„æ¼”ç¤ºé¡¹ç›®å¤æ‚åŒ–ï¼Œè€Œæ˜¯é¦–å…ˆèµ°æœ€ç®€å•çš„é“è·¯ã€‚ æœŸæœ›å¦‚æœæœ‰äººéœ€è¦æ›´é«˜çº§çš„ç¼“å­˜æ–¹æ¡ˆï¼Œåˆ™å¯ä»¥åœ¨ä»¥åä½¿ç”¨çœŸå®çš„ï¼Œéè™šæ„çš„Shrimpåœºæ™¯å¼€å§‹æ·»åŠ ã€‚ <br><br> ç»“æœï¼Œåœ¨æ›´æ–°ç‰ˆæœ¬çš„Shrimpä¸­ï¼Œæˆ‘ä»¬ç¨å¾®æ‰©å±•äº†å¯†é’¥ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ äº†è¯¸å¦‚ç›®æ ‡æ ¼å¼ä¹‹ç±»çš„å‚æ•°ï¼š <br><br><pre> <code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">resize_request_key_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> m_path; <span class="hljs-keyword"><span class="hljs-keyword">image_format_t</span></span> m_format; <span class="hljs-keyword"><span class="hljs-keyword">resize_params_t</span></span> m_params; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">resize_request_key_t</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> path, <span class="hljs-keyword"><span class="hljs-keyword">image_format_t</span></span> format, <span class="hljs-keyword"><span class="hljs-keyword">resize_params_t</span></span> params ) : m_path{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(path) } , m_format{ format } , m_params{ params } {} [[nodiscard]] <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">resize_request_key_t</span></span> &amp; o ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">noexcept</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tie( m_path, m_format, m_params ) &lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tie( o.m_path, o.m_format, o.m_params ); } [[nodiscard]] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">path</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">noexcept</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_path; } [[nodiscard]] <span class="hljs-keyword"><span class="hljs-keyword">image_format_t</span></span> format() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">noexcept</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_format; } [[nodiscard]] <span class="hljs-keyword"><span class="hljs-keyword">resize_params_t</span></span> params() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">noexcept</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_params; } };</code> </pre> <br> å³ å°†example.jpgè°ƒæ•´ä¸º1920pxå¹¶è½¬æ¢ä¸ºpngçš„è¯·æ±‚ä¸ç›¸åŒçš„è°ƒæ•´å¤§å°ä¸åŒï¼Œä½†è½¬æ¢ä¸ºwebpæˆ–heicã€‚ <br><br> ä½†æ˜¯ï¼Œä¸»è¦ç„¦ç‚¹åœ¨äº<a href="">resize_params_tç±»çš„æ–°å®ç°ï¼Œè¯¥å®ç°</a>ç¡®å®šäº†ç¼©æ”¾å›¾åƒçš„æ–°å¤§å°ã€‚  <a href="">ä»¥å‰ï¼Œæ­¤ç±»</a>æ”¯æŒä¸‰ä¸ªé€‰é¡¹ï¼šä»…è®¾ç½®å®½åº¦ï¼Œä»…è®¾ç½®é«˜åº¦æˆ–è®¾ç½®é•¿è¾¹ï¼ˆé«˜åº¦æˆ–å®½åº¦ç”±å½“å‰å›¾åƒå¤§å°ç¡®å®šï¼‰ã€‚ å› æ­¤ï¼Œ <a href="">resize_params_t :: valueï¼ˆï¼‰</a>æ–¹æ³•å§‹ç»ˆè¿”å›ä¸€äº›å®é™…å€¼ï¼ˆè¯¥å€¼ç”±<a href="">resize_params_t :: modeï¼ˆï¼‰</a>æ–¹æ³•ç¡®å®šï¼‰ã€‚ <br><br> ä½†æ˜¯åœ¨æ–°çš„Shrimpä¸­ï¼Œæ·»åŠ äº†å¦ä¸€ç§æ¨¡å¼-keep_originalï¼Œè¿™æ„å‘³ç€ä¸æ‰§è¡Œç¼©æ”¾å¹¶ä¸”å›¾ç‰‡ä»¥å…¶åŸå§‹å¤§å°è¿›è¡Œæ¸²æŸ“ã€‚ ä¸ºäº†æ”¯æŒæ­¤æ¨¡å¼ï¼Œresize_params_tå¿…é¡»è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚ é¦–å…ˆï¼Œç°åœ¨ï¼Œ <a href="">resize_params_t :: makeï¼ˆï¼‰</a>æ–¹æ³•ç¡®å®šæ˜¯å¦ä½¿ç”¨keep_originalæ¨¡å¼ï¼ˆå¦‚æœæœªæŒ‡å®šä¼ å…¥è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„widthï¼Œheightå’Œmaxå‚æ•°ï¼Œåˆ™è®¤ä¸ºä½¿ç”¨äº†è¯¥æ¨¡å¼ï¼‰ã€‚ è¿™ä½¿æˆ‘ä»¬ä¸å¿…é‡å†™<a href="https://bitbucket.org/sobjectizerteam/shrimp-demo/src/4049abf4ca148fb0d291239b28135315d5f4053f/dev/shrimp/">handle_resize_op_requestï¼ˆï¼‰</a>å‡½æ•°ï¼Œè¯¥å‡½æ•°<a href="https://bitbucket.org/sobjectizerteam/shrimp-demo/src/4049abf4ca148fb0d291239b28135315d5f4053f/dev/shrimp/">å°†æŒ‰</a>æ¯”ä¾‹ç¼©æ”¾è¦æ‰§è¡Œçš„å›¾ç‰‡çš„è¯·æ±‚ã€‚ <br><br> å…¶æ¬¡ï¼Œç°åœ¨ä¸æ€»æ˜¯å¯ä»¥è°ƒç”¨<a href="">resize_params_t :: valueï¼ˆï¼‰</a>æ–¹æ³•ï¼Œè€Œä»…åœ¨ç¼©æ”¾æ¨¡å¼ä¸åŒäºkeep_originalæ—¶æ‰å¯ä»¥è°ƒç”¨ã€‚ <br><br> ä½†æ˜¯æœ€é‡â€‹â€‹è¦çš„æ˜¯<a href="">resize_params_t ::è¿ç®—ç¬¦&lt;ï¼ˆï¼‰</a>ç»§ç»­æŒ‰é¢„æœŸå·¥ä½œã€‚ <br><br> ç”±äºa_transform_managerä¸­çš„æ‰€æœ‰è¿™äº›æ›´æ”¹ï¼Œç¼©æ”¾åçš„å›¾åƒç¼“å­˜å’Œç­‰å¾…è¯·æ±‚çš„é˜Ÿåˆ—éƒ½ä¿æŒä¸å˜ã€‚ ä½†æ˜¯ç°åœ¨ï¼Œæœ‰å…³å„ç§æŸ¥è¯¢çš„ä¿¡æ¯å­˜å‚¨åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸­ã€‚ å› æ­¤ï¼Œé”®{â€œ example.jpgâ€ï¼Œâ€œ jpgâ€ï¼Œkeep_original}ä¸é”®{â€œ example.jpgâ€ï¼Œâ€œ pngâ€ï¼Œkeep_original}ä»¥åŠé”®{â€œ example.jpgâ€ï¼Œâ€œ jpgâ€ï¼Œå®½åº¦= 1920px}ã€‚ <br><br> äº‹å®è¯æ˜ï¼Œåœ¨ç®€åŒ–è¯¸å¦‚resize_params_tå’Œresize_params_key_tè¿™æ ·çš„ç®€å•æ•°æ®ç»“æ„çš„å®šä¹‰æ—¶ï¼Œæˆ‘ä»¬é¿å…äº†æ›´æ”¹æ›´å¤æ‚çš„ç»“æ„ï¼Œä¾‹å¦‚ç”Ÿæˆçš„å›¾åƒçš„ç¼“å­˜å’Œç­‰å¾…è¯·æ±‚çš„é˜Ÿåˆ—ã€‚ <br><br><h2> æ”¯æŒa_transformerä¸­çš„ç›®æ ‡æ ¼å¼ </h2><br> å¥½äº†ï¼Œæ”¯æŒç›®æ ‡æ ¼å¼çš„æœ€åä¸€æ­¥æ˜¯æ‰©å±•a_transformerä»£ç†çš„é€»è¾‘ï¼Œä»¥ä¾¿å°†å¯èƒ½å·²ç»ç¼©æ”¾çš„å›¾ç‰‡è½¬æ¢ä¸ºç›®æ ‡æ ¼å¼ã€‚ <br><br> äº‹å®è¯æ˜ï¼Œè¿™æ ·åšæœ€ç®€å•ï¼Œæ‰€éœ€è¦åšçš„åªæ˜¯æ‰©å±•<a href="">a_transform_t :: handle_resize_requestï¼ˆï¼‰</a>æ–¹æ³•çš„ä»£ç ï¼š <br><br><pre> <code class="hljs pgsql">[[nodiscard]] a_transform_manager_t::resize_result_t::result_t a_transformer_t::handle_resize_request( const <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span>::resize_request_key_t &amp; key ) { try { m_logger-&gt;trace( "transformation started; request_key={}", key ); auto image = load_image( key.path() ); const auto resize_duration = measure_duration( [&amp;]{ //       //    keep_original. <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span>::resize_params_t::mode_t::keep_original != key.params().mode() ) { <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span>::resize( key.params(), total_pixel_count, image ); } } ); m_logger-&gt;<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>( "resize finished; request_key={}, time={}ms", key, std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( resize_duration).count() ); image.magick( magick_from_image_format( key.format() ) ); datasizable_blob_shared_ptr_t blob; const auto serialize_duration = measure_duration( [&amp;] { blob = make_blob( image ); } ); m_logger-&gt;<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>( "serialization finished; request_key={}, time={}ms", key, std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( serialize_duration).count() ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a_transform_manager_t::successful_resize_t{ std::<span class="hljs-keyword"><span class="hljs-keyword">move</span></span>(blob), std::chrono::duration_cast&lt;std::chrono::microseconds&gt;( resize_duration), std::chrono::duration_cast&lt;std::chrono::microseconds&gt;( serialize_duration) }; } catch( const std::<span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> &amp; x ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a_transform_manager_t::failed_resize_t{ x.what() }; } }</code> </pre> <br> ä¸<a href="">ä»¥å‰çš„ç‰ˆæœ¬</a>ç›¸æ¯”<a href="">ï¼Œ</a>æœ‰ä¸¤ä¸ªåŸºæœ¬è¡¥å……ã€‚ <br><br> é¦–å…ˆï¼Œåœ¨è°ƒæ•´å¤§å°åè°ƒç”¨çœŸæ­£é­”æœ¯çš„image.magickï¼ˆï¼‰æ–¹æ³•ã€‚ æ­¤æ–¹æ³•å‘Šè¯‰ImageMagickç”Ÿæˆçš„å›¾åƒæ ¼å¼ã€‚ åŒæ—¶ï¼Œå›¾åƒåœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºå½¢å¼ä¸ä¼šæ›´æ”¹-ImageMagickç»§ç»­å­˜å‚¨é€‚åˆçš„å›¾åƒã€‚ ä½†æ˜¯ï¼Œåœ¨éšåçš„Image :: writeï¼ˆï¼‰è°ƒç”¨æœŸé—´ï¼Œå°†è€ƒè™‘magickï¼ˆï¼‰æ–¹æ³•è®¾ç½®çš„å€¼ã€‚ <br><br> å…¶æ¬¡ï¼Œæ›´æ–°çš„ç‰ˆæœ¬è®°å½•äº†å°†å›¾åƒåºåˆ—åŒ–ä¸ºæŒ‡å®šæ ¼å¼æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ ç°åœ¨ï¼Œæ–°ç‰ˆæœ¬çš„Shrimpåˆ†åˆ«ä¿®å¤äº†ç¼©æ”¾æ‰€èŠ±è´¹çš„æ—¶é—´ä»¥åŠè½¬æ¢ä¸ºç›®æ ‡æ ¼å¼æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ <br><br> ä»£ç†a_transformer_tçš„å…¶ä½™éƒ¨åˆ†æœªè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ <br><br><h1>  ImageMagickå¹¶è¡ŒåŒ– </h1><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒImageMagicå†…ç½®OpenMPæ”¯æŒã€‚ å³ å¯ä»¥å¹¶è¡Œå¤„ç†ImageMagickæ‰§è¡Œçš„å›¾åƒä¸Šçš„æ“ä½œã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡MAGICK_THREAD_LIMITæ¥æ§åˆ¶ImageMagickåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨çš„å·¥ä½œæµç¨‹æ•°é‡ã€‚ <br><br> ä¾‹å¦‚ï¼Œåœ¨æˆ‘çš„æµ‹è¯•æœºä¸Šï¼Œå€¼MAGICK_THREAD_LIMIT = 1ï¼ˆå³ï¼Œæ²¡æœ‰çœŸæ­£çš„å¹¶è¡ŒåŒ–ï¼‰ï¼Œæˆ‘å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š <br><br><pre> <code class="hljs powershell">curl <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/DSC08084.jpg?op=resize&amp;max=2400"</span></span> <span class="hljs-literal"><span class="hljs-literal">-v</span></span> &gt; /dev/null &gt; GET /DSC08084.jpg?op=resize&amp;max=<span class="hljs-number"><span class="hljs-number">2400</span></span> HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> &gt; Host: localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span> &gt; User<span class="hljs-literal"><span class="hljs-literal">-Agent</span></span>: curl/<span class="hljs-number"><span class="hljs-number">7.47</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; Accept: */* &gt; &lt; HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK &lt; Connection: keep<span class="hljs-literal"><span class="hljs-literal">-alive</span></span> &lt; Content<span class="hljs-literal"><span class="hljs-literal">-Length</span></span>: <span class="hljs-number"><span class="hljs-number">2043917</span></span> &lt; Server: Shrimp draft server &lt; Date: Wed, <span class="hljs-number"><span class="hljs-number">15</span></span> Aug <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>:<span class="hljs-number"><span class="hljs-number">24</span></span> GMT &lt; Last<span class="hljs-literal"><span class="hljs-literal">-Modified</span></span>: Wed, <span class="hljs-number"><span class="hljs-number">15</span></span> Aug <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>:<span class="hljs-number"><span class="hljs-number">24</span></span> GMT &lt; Access<span class="hljs-literal"><span class="hljs-literal">-Control</span></span><span class="hljs-literal"><span class="hljs-literal">-Allow</span></span><span class="hljs-literal"><span class="hljs-literal">-Origin</span></span>: * &lt; Access<span class="hljs-literal"><span class="hljs-literal">-Control</span></span><span class="hljs-literal"><span class="hljs-literal">-Expose</span></span><span class="hljs-literal"><span class="hljs-literal">-Headers</span></span>: Shrimp<span class="hljs-literal"><span class="hljs-literal">-Processing</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Resize</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Encoding</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Image</span></span><span class="hljs-literal"><span class="hljs-literal">-Src</span></span> &lt; Content<span class="hljs-literal"><span class="hljs-literal">-Type</span></span>: image/jpeg &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Image</span></span><span class="hljs-literal"><span class="hljs-literal">-Src</span></span>: transform &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Processing</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">1323</span></span> &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Resize</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">1086.72</span></span> &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Encoding</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">236.276</span></span></code> </pre><br> è°ƒæ•´å¤§å°æ‰€èŠ±è´¹çš„æ—¶é—´åœ¨Shrimp-Resize-Timeæ ‡å¤´ä¸­æŒ‡ç¤ºã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸º1086.72msã€‚ <br><br> ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šè®¾ç½®MAGICK_THREAD_LIMIT = 3å¹¶è¿è¡ŒShrimpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è·å¾—ä¸åŒçš„å€¼ï¼š <br><br><pre> <code class="hljs powershell">curl <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/DSC08084.jpg?op=resize&amp;max=2400"</span></span> <span class="hljs-literal"><span class="hljs-literal">-v</span></span> &gt; /dev/null &gt; GET /DSC08084.jpg?op=resize&amp;max=<span class="hljs-number"><span class="hljs-number">2400</span></span> HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> &gt; Host: localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span> &gt; User<span class="hljs-literal"><span class="hljs-literal">-Agent</span></span>: curl/<span class="hljs-number"><span class="hljs-number">7.47</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; Accept: */* &gt; &lt; HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK &lt; Connection: keep<span class="hljs-literal"><span class="hljs-literal">-alive</span></span> &lt; Content<span class="hljs-literal"><span class="hljs-literal">-Length</span></span>: <span class="hljs-number"><span class="hljs-number">2043917</span></span> &lt; Server: Shrimp draft server &lt; Date: Wed, <span class="hljs-number"><span class="hljs-number">15</span></span> Aug <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">53</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span> GMT &lt; Last<span class="hljs-literal"><span class="hljs-literal">-Modified</span></span>: Wed, <span class="hljs-number"><span class="hljs-number">15</span></span> Aug <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">53</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span> GMT &lt; Access<span class="hljs-literal"><span class="hljs-literal">-Control</span></span><span class="hljs-literal"><span class="hljs-literal">-Allow</span></span><span class="hljs-literal"><span class="hljs-literal">-Origin</span></span>: * &lt; Access<span class="hljs-literal"><span class="hljs-literal">-Control</span></span><span class="hljs-literal"><span class="hljs-literal">-Expose</span></span><span class="hljs-literal"><span class="hljs-literal">-Headers</span></span>: Shrimp<span class="hljs-literal"><span class="hljs-literal">-Processing</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Resize</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Encoding</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>, Shrimp<span class="hljs-literal"><span class="hljs-literal">-Image</span></span><span class="hljs-literal"><span class="hljs-literal">-Src</span></span> &lt; Content<span class="hljs-literal"><span class="hljs-literal">-Type</span></span>: image/jpeg &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Image</span></span><span class="hljs-literal"><span class="hljs-literal">-Src</span></span>: transform &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Processing</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">779.901</span></span> &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Resize</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">558.246</span></span> &lt; Shrimp<span class="hljs-literal"><span class="hljs-literal">-Encoding</span></span><span class="hljs-literal"><span class="hljs-literal">-Time</span></span>: <span class="hljs-number"><span class="hljs-number">221.655</span></span></code> </pre> <br> å³ è°ƒæ•´å¤§å°æ—¶é—´å‡å°‘åˆ°558.25msã€‚ <br><br> å› æ­¤ï¼Œç”±äºImageMagickæä¾›äº†å¹¶è¡Œè®¡ç®—çš„åŠŸèƒ½ï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ©ç”¨è¿™ä¸€æœºä¼šã€‚ ä½†åŒæ—¶ï¼Œäººä»¬å¸Œæœ›èƒ½å¤Ÿæ§åˆ¶è™¾è‡ªå·±å¸¦èµ°äº†å¤šå°‘ä¸ªå·¥ä½œçº¿ç¨‹ã€‚ åœ¨æ—©æœŸç‰ˆæœ¬çš„Shrimpä¸­ï¼Œæ— æ³•å½±å“Shrimpåˆ›å»ºçš„å·¥ä½œæµç¨‹æ•°é‡ã€‚ åœ¨è™¾çš„æ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ æˆ–é€šè¿‡ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="hljs tex">SHRIMP_IO_THREADS=1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>SHRIMP_WORKER_THREADS=3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>MAGICK_THREAD_LIMIT=4 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>shrimp.app -p 8080 -i ...</code> </pre> <br> æˆ–é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="hljs powershell">MAGICK_THREAD_LIMIT=<span class="hljs-number"><span class="hljs-number">4</span></span> \ shrimp.app <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">8080</span></span> <span class="hljs-literal"><span class="hljs-literal">-i</span></span> ... -<span class="hljs-literal"><span class="hljs-literal">-io</span></span><span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> -<span class="hljs-literal"><span class="hljs-literal">-worker</span></span><span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br> é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šçš„å€¼å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ <br><br> åº”è¯¥å¼ºè°ƒçš„æ˜¯ï¼ŒMAGICK_THREAD_LIMITä»…å½±å“ImageMagickè‡ªèº«æ‰§è¡Œçš„é‚£äº›æ“ä½œã€‚ ä¾‹å¦‚ï¼Œè°ƒæ•´å¤§å°æ˜¯ç”±ImageMagickå®Œæˆçš„ã€‚ ä½†æ˜¯ä»ä¸€ç§æ ¼å¼åˆ°å¦ä¸€ç§ImageMagickçš„è½¬æ¢å°†å§”æ‰˜ç»™å¤–éƒ¨åº“ã€‚ è¿™äº›å¤–éƒ¨åº“ä¸­çš„æ“ä½œå¦‚ä½•å¹¶è¡ŒåŒ–æ˜¯æˆ‘ä»¬ä¸äº†è§£çš„å•ç‹¬é—®é¢˜ã€‚ <br><br><h1> ç»“è®º </h1><br> ä¹Ÿè®¸åœ¨æ­¤ç‰ˆæœ¬çš„Shrimpä¸­ï¼Œæˆ‘ä»¬ä½¿æ¼”ç¤ºé¡¹ç›®è¾¾åˆ°äº†å¯æ¥å—çš„çŠ¶æ€ã€‚ æƒ³è¦è§‚çœ‹å’Œå®éªŒçš„äººå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BitBucket</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub</a>ä¸Šæ‰¾åˆ°Shrimpçš„æºæ–‡æœ¬ã€‚ æ‚¨è¿˜å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°Dockerfileæ¥ä¸ºæ‚¨çš„å®éªŒæ„å»ºShrimpã€‚ <br><br> æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡å¯åŠ¨æ­¤æ¼”ç¤ºé¡¹ç›®å®ç°äº†æˆ‘ä»¬è®¾å®šçš„ç›®æ ‡ã€‚ ä¸ºäº†è¿›ä¸€æ­¥å¼€å‘RESTinioå’ŒSObjectizerï¼Œå‡ºç°äº†è®¸å¤šæƒ³æ³•ï¼Œå…¶ä¸­ä¸€äº›å·²ç»æ‰¾åˆ°äº†ä½“ç°ã€‚ å› æ­¤ï¼Œè™¾æ˜¯å¦ä¼šè¿›ä¸€æ­¥å‘å±•å®Œå…¨å–å†³äºé—®é¢˜å’Œæ„¿æœ›ã€‚ å¦‚æœæœ‰çš„è¯ï¼Œè™¾å¯ä»¥æ‰©å¤§ã€‚ å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆShrimpå°†ä»ç„¶æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®å’Œä¸€ä¸ªè¯•éªŒåœºï¼Œç”¨äºè¯•éªŒRESTinioå’ŒSObjectizerçš„æ–°ç‰ˆæœ¬ã€‚ <br><br> æœ€åï¼Œæˆ‘è¦ç‰¹åˆ«æ„Ÿè°¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">aensidhe</a>çš„å¸®åŠ©å’Œå»ºè®®ï¼Œå¦‚æœæ²¡æœ‰ä»–ä»¬çš„å¸®åŠ©å’Œå»ºè®®ï¼Œæˆ‘ä»¬ä¸é“ƒé¼“çš„èˆè¹ˆå°†å˜å¾—æ›´é•¿è€Œæ‚²ä¼¤ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN420353/">https://habr.com/ru/post/zh-CN420353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN420343/index.html">LEDç¯è¡Œ</a></li>
<li><a href="../zh-CN420345/index.html">IXcellerateæ•°æ®ä¸­å¿ƒæ¦‚è¿°ï¼ˆä¿„ç½—æ–¯è”é‚¦æœ€å¤§çš„æœºæˆ¿ï¼‰</a></li>
<li><a href="../zh-CN420347/index.html">äº†è§£å¦‚ä½•åœ¨ä¸åˆ°4åˆ†é’Ÿçš„æ—¶é—´å†…åˆ›å»ºè‡ªå·±çš„bashå‘½ä»¤</a></li>
<li><a href="../zh-CN420349/index.html">ITå¤–åŒ…æ¸…å•ï¼šæ— é£é™©å·¥ä½œ</a></li>
<li><a href="../zh-CN420351/index.html">å¦‚ä½•ä½¿ç”¨Vueåœ¨GitHubä¸Šè¿›è¡Œç”¨æˆ·æœç´¢</a></li>
<li><a href="../zh-CN420355/index.html">æ™ºèƒ½æ‰‹è¡¨Pebbleï¼šå¦‚ä½•åœ¨ä¸€å¤œä¹‹é—´å˜å¾—ç¨€æœ‰</a></li>
<li><a href="../zh-CN420357/index.html">Vuexï¼šæ„å»ºå¤§å‹é¡¹ç›®å¹¶ä½¿ç”¨æ¨¡å—</a></li>
<li><a href="../zh-CN420359/index.html">Varï¼Œletè¿˜æ˜¯constï¼Ÿ å¯å˜èŒƒå›´é—®é¢˜å’ŒES6</a></li>
<li><a href="../zh-CN420361/index.html">åœ¨.NET WPFä¸­è¿è¡ŒTextBox.GetLineTextæ—¶çš„é”™è¯¯</a></li>
<li><a href="../zh-CN420363/index.html">8æœˆè‡³10æœˆçš„HPEç½‘ç»œç ”è®¨ä¼šï¼šæ–°ä¸»é¢˜ï¼ˆ+ SHDï¼ŒAIå®è·µï¼Œäº¤é’¥åŒ™PBå­˜å‚¨ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>