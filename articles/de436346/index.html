<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§® üçâ üë®üèΩ‚Äç‚úàÔ∏è Ben√∂tigen Sie immer Docker, Microservices und reaktive Programmierung? üöÑ üëµ ü§òüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gepostet von Denis Tsyplakov , Solution Architect, DataArt 

 In DataArt arbeite ich auf zwei Arten. Im ersten Fall helfe ich Menschen, Systeme zu rep...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ben√∂tigen Sie immer Docker, Microservices und reaktive Programmierung?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/436346/"><img src="https://habrastorage.org/webt/1i/fo/8q/1ifo8qsvpiw12dn-kv78tby-gue.jpeg"><br><br>  <i>Gepostet von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Denis Tsyplakov</a> , Solution Architect, DataArt</i> <br><br>  In DataArt arbeite ich auf zwei Arten.  Im ersten Fall helfe ich Menschen, Systeme zu reparieren, die auf die eine oder andere Weise und aus verschiedenen Gr√ºnden defekt sind.  Im zweiten Teil helfe ich dabei, neue Systeme so zu gestalten, dass sie in Zukunft nicht kaputt gehen, oder realistischer war es schwieriger, sie kaputt zu machen. <br><br>  Wenn Sie nicht etwas grundlegend Neues tun, zum Beispiel die weltweit erste Internet-Suchmaschine oder k√ºnstliche Intelligenz, die den Start von Atomraketen steuert, ist es ganz einfach, ein gutes Systemdesign zu erstellen.  Es reicht aus, alle Anforderungen zu ber√ºcksichtigen, das Design √§hnlicher Systeme zu betrachten und ungef√§hr das Gleiche zu tun, ohne ernsthafte Fehler zu machen.  Es klingt nach einer √ºberm√§√üigen Vereinfachung des Problems, aber erinnern wir uns, dass auf dem Hof ‚Äã‚Äãdas Jahr 2019 ist und es f√ºr fast alles ‚ÄûStandardrezepte‚Äú f√ºr das Systemdesign gibt.  Ein Unternehmen kann komplexe technische Aufgaben bew√§ltigen - beispielsweise eine Million heterogener PDF-Dateien verarbeiten und Kostentabellen daraus herausnehmen -, aber die Systemarchitektur ist selten sehr originell.  Die Hauptsache dabei ist, keinen Fehler bei der Bestimmung des von uns gebauten Systems zu machen und die Auswahl der Technologien nicht zu verpassen. <br><br>  Typische Fehler treten regelm√§√üig im letzten Absatz auf, von denen ich einige in einem Artikel diskutieren werde. <a name="habracut"></a><br><br>  Was ist die Schwierigkeit bei der Auswahl eines technischen Stacks?  Das Hinzuf√ºgen einer Technologie zum Projekt macht es schwieriger und bringt einige Einschr√§nkungen mit sich.  Dementsprechend sollte das Hinzuf√ºgen eines neuen Tools (Framework, Bibliothek) nur erfolgen, wenn dieses Tool n√ºtzlicher als sch√§dlich ist.  In Gespr√§chen mit Teammitgliedern √ºber das Hinzuf√ºgen von Bibliotheken und Frameworks verwende ich oft scherzhaft den folgenden Trick: ‚ÄûWenn Sie dem Projekt eine neue Abh√§ngigkeit hinzuf√ºgen m√∂chten, stellen Sie eine Schachtel Bier f√ºr das Team bereit.  Wenn Sie der Meinung sind, dass sich diese Abh√§ngigkeit von einer Kiste Bier nicht lohnt, f√ºgen Sie sie nicht hinzu. ‚Äú <br><br>  Angenommen, wir erstellen eine bestimmte Anwendung, beispielsweise in Java, und um die Daten zu √§ndern, f√ºgen wir dem Projekt die TimeMagus-Bibliothek (ein fiktives Beispiel) hinzu.  Die Bibliothek ist ausgezeichnet, sie bietet uns viele Funktionen, die in der Standardklassenbibliothek nicht verf√ºgbar sind.  Wie kann eine solche Entscheidung sch√§dlich sein?  Schauen wir uns die m√∂glichen Szenarien an: <br><br><ol><li>  Nicht alle Entwickler kennen eine nicht standardm√§√üige Bibliothek. Die Einstiegsschwelle f√ºr neue Entwickler ist h√∂her.  Die Wahrscheinlichkeit steigt, dass ein neuer Entwickler einen Fehler macht, wenn er ein Datum mit einer unbekannten Bibliothek bearbeitet. </li><li> Die Gr√∂√üe der Verteilung nimmt zu.  Wenn die Gr√∂√üe der durchschnittlichen Anwendung auf Spring Boot leicht auf 100 MB anwachsen kann, ist dies keineswegs eine Kleinigkeit.  Ich habe F√§lle gesehen, in denen aus Gr√ºnden einer Methode eine 30-MB-Bibliothek in das Distributionskit gezogen wurde.  Sie begr√ºndeten dies folgenderma√üen: "Ich habe diese Bibliothek in einem fr√ºheren Projekt verwendet, und dort gibt es eine bequeme Methode." </li><li>  Je nach Bibliothek kann sich die Startzeit erheblich verl√§ngern. </li><li>  Der Bibliotheksentwickler kann seine Idee aufgeben, dann beginnt die Bibliothek mit der neuen Java-Version in Konflikt zu geraten, oder es wird ein Fehler darin erkannt (der beispielsweise durch das √Ñndern von Zeitzonen verursacht wird), und es wird kein Patch ver√∂ffentlicht. </li><li>  Die Bibliothekslizenz steht irgendwann im Widerspruch zur Lizenz Ihres Produkts (√ºberpr√ºfen Sie die Lizenzen f√ºr alle von Ihnen verwendeten Produkte?). </li><li>  Jar hell - Die TimeMagus-Bibliothek ben√∂tigt die neueste Version der SuperCollections-Bibliothek. Nach einigen Monaten m√ºssen Sie die Bibliothek f√ºr die Integration mit einer Drittanbieter-API verbinden, die nicht mit der neuesten Version von SuperCollections funktioniert und nur mit Version 2.x funktioniert.  Sie k√∂nnen keine API verbinden. Es gibt keine andere Bibliothek f√ºr die Arbeit mit dieser API. </li></ol><br>  Auf der anderen Seite bietet uns die Standardbibliothek praktische Tools zum Bearbeiten von Datumsangaben. Wenn Sie beispielsweise keinen exotischen Kalender pflegen oder die Anzahl der Tage von heute bis zum ‚Äûzweiten Tag des dritten Neumondes im Vorjahr des hochfliegenden Adlers‚Äú berechnen m√ºssen, ist dies m√∂glicherweise sinnvoll Verwenden Sie keine Bibliothek von Drittanbietern.  Selbst wenn es wunderbar und im Projektma√üstab ist, sparen Sie bis zu 50 Codezeilen. <br><br>  Das betrachtete Beispiel ist recht einfach und ich denke, es ist einfach, eine Entscheidung zu treffen.  Es gibt jedoch eine Reihe von Technologien, die in aller Munde sind, und ihre Verwendung ist offensichtlich, was die Auswahl erschwert - sie bieten dem Entwickler wirklich ernsthafte Vorteile.  Dies muss jedoch nicht immer eine Gelegenheit sein, sie in Ihr Projekt zu ziehen.  Schauen wir uns einige davon an. <br><br><h2>  Docker </h2><br>  Vor dem Aufkommen dieser wirklich coolen Technologie gab es bei der Bereitstellung von Systemen viele unangenehme und komplexe Probleme im Zusammenhang mit Versionskonflikten und obskuren Abh√§ngigkeiten.  Mit Docker k√∂nnen Sie eine Momentaufnahme des Systemstatus packen, in die Produktion einbinden und dort ausf√ºhren.  Dadurch k√∂nnen die genannten Konflikte vermieden werden, was nat√ºrlich gro√üartig ist. <br><br>  Zuvor war dies auf monstr√∂se Weise geschehen, und einige Aufgaben wurden √ºberhaupt nicht gel√∂st.  Sie haben beispielsweise eine PHP-Anwendung, die die ImageMagick-Bibliothek zum Arbeiten mit Bildern verwendet, Ihre Anwendung ben√∂tigt au√üerdem bestimmte php.ini-Einstellungen und die Anwendung selbst wird √ºber Apache httpd gehostet.  Es gibt jedoch ein Problem: Einige regul√§re Routinen werden durch Ausf√ºhren von Python-Skripten von cron implementiert, und die von diesen Skripten verwendete Bibliothek steht in Konflikt mit den in Ihrer Anwendung verwendeten Bibliotheksversionen.  Mit Docker k√∂nnen Sie Ihre gesamte Anwendung zusammen mit Einstellungen, Bibliotheken und einem HTTP-Server in einen Container packen, der Anforderungen an Port 80 bedient, und Routinen in einen anderen Container.  Alles zusammen wird perfekt funktionieren und Sie k√∂nnen den Konflikt der Bibliotheken vergessen. <br><br>  Sollte ich Docker verwenden, um jede Anwendung zu packen?  Meine Meinung: Nein, das ist es nicht wert.  Das Bild zeigt eine typische Zusammensetzung einer in AWS bereitgestellten Docker-Anwendung.  Die Rechtecke hier geben die Isolationsschichten an, die wir haben. <br><br><img src="https://habrastorage.org/webt/wg/l9/0_/wgl90_ho4o9feo2r7o7ktzhiy4a.png"><br><br>  Das gr√∂√üte Rechteck ist die physische Maschine.  Als n√§chstes folgt das Betriebssystem der physischen Maschine.  Dann - der Amazonian Virtualizer, dann das Betriebssystem der virtuellen Maschine, dann der Docker-Container, gefolgt vom Container-Betriebssystem, der JVM, dann dem Servlet-Container (wenn es sich um eine Webanwendung handelt) und Ihr Anwendungscode befindet sich bereits darin.  Das hei√üt, wir sehen bereits einige Isolationsschichten. <br><br>  Die Situation wird noch schlimmer aussehen, wenn wir uns das Akronym JVM ansehen.  JVM ist seltsamerweise die Java Virtual Machine, das hei√üt, wir haben immer mindestens eine virtuelle Maschine in Java.  Das Hinzuf√ºgen eines zus√§tzlichen Docker-Containers bietet erstens oft keinen so sp√ºrbaren Vorteil, da die JVM selbst uns bereits ziemlich gut von der externen Umgebung isoliert und zweitens nicht ohne Kosten ist. <br><br>  Ich habe vor zwei Jahren Zahlen aus einer IBM-Studie genommen, wenn nicht sogar falsch.  Kurz gesagt, wenn es um Festplattenvorg√§nge, Prozessorauslastung oder Speicherzugriff geht, f√ºgt Docker fast keinen Overhead hinzu (buchst√§blich ein Bruchteil eines Prozent), aber wenn wir √ºber Netzwerklatenz sprechen, sind die Verz√∂gerungen ziemlich sp√ºrbar.  Sie sind nicht gigantisch, aber je nachdem, welche Anwendung Sie haben, k√∂nnen sie Sie unangenehm √ºberraschen. <br><br><img src="https://habrastorage.org/webt/pb/om/j-/pbomj-5curelulxpmomito3jy7a.png"><br><br>  Au√üerdem verbraucht Docker zus√§tzlichen Speicherplatz, nimmt einen Teil des Speichers ein und verl√§ngert die Startzeit.  Alle drei Punkte sind f√ºr die meisten Systeme unkritisch - normalerweise gibt es viel Speicherplatz und Speicher.  Die Startzeit ist in der Regel auch kein kritisches Problem, Hauptsache, die Anwendung startet.  Es gibt jedoch immer noch Situationen, in denen der Speicher m√∂glicherweise knapp wird und die Gesamtstartzeit des Systems, das aus zwanzig abh√§ngigen Diensten besteht, bereits recht gro√ü ist.  Dies wirkt sich au√üerdem auf die Hostingkosten aus.  Und wenn Sie im Hochfrequenzhandel t√§tig sind, passt Docker kategorisch nicht zu Ihnen.  Im Allgemeinen ist es besser, keine Anwendung anzudocken, die empfindlich auf Netzwerkverz√∂gerungen von bis zu 250 bis 500 ms reagiert. <br><br>  Mit dem Docker ist die Analyse von Problemen in Netzwerkprotokollen sp√ºrbar kompliziert, nicht nur die Verz√∂gerungen nehmen zu, sondern alle Timings werden unterschiedlich. <br><br><h3>  Wann wird Docker wirklich ben√∂tigt? </h3><br>  Wenn wir verschiedene Versionen der JRE haben und es sch√∂n w√§re, die JRE mitzuziehen.  Es gibt Zeiten, in denen Sie eine bestimmte Java-Version ausf√ºhren m√ºssen (nicht ‚Äûdas neueste Java 8‚Äú, sondern etwas Spezifischeres).  In diesem Fall empfiehlt es sich, die JRE mit der Anwendung zu packen und als Container auszuf√ºhren.  Grunds√§tzlich ist klar, dass aufgrund von JAVA_HOME usw. verschiedene Versionen von Java auf das Zielsystem gestellt werden k√∂nnen. Docker ist jedoch in diesem Sinne viel praktischer, da Sie die genaue Version der JRE kennen, alles zusammen gepackt ist und mit einer anderen JRE die Anwendung nicht einmal versehentlich startet . <br><br>  Docker ist auch erforderlich, wenn Sie Abh√§ngigkeiten von einigen Bin√§rbibliotheken haben, z. B. f√ºr die Bildverarbeitung.  In diesem Fall ist es m√∂glicherweise eine gute Idee, alle erforderlichen Bibliotheken mit der Java-Anwendung selbst zu packen. <br><br>  Der folgende Fall bezieht sich auf ein System, das eine komplexe Zusammenstellung verschiedener Dienste darstellt, die in verschiedenen Sprachen geschrieben sind.  Sie haben ein St√ºck auf Node.js, einen Teil in Java, eine Bibliothek in Go und zus√§tzlich eine Art maschinelles Lernen in Python.  Dieser ganze Zoo muss sorgf√§ltig und sorgf√§ltig abgestimmt werden, um seinen Elementen beizubringen, sich gegenseitig zu sehen.  Abh√§ngigkeiten, Pfade, IP-Adressen - all dies muss in der Produktion gemalt und sorgf√§ltig hervorgehoben werden.  In diesem Fall hilft Ihnen Docker nat√ºrlich sehr.  Dar√ºber hinaus ist es einfach schmerzhaft, es ohne seine Hilfe zu tun. <br><br>  Docker bietet einige Annehmlichkeiten, wenn Sie in der Befehlszeile viele verschiedene Parameter angeben m√ºssen, um die Anwendung zu starten.  Auf der anderen Seite machen Bash-Skripte dies sehr gut, oft aus einer einzigen Zeile.  Entscheiden Sie, welche Sie besser verwenden m√∂chten. <br><br>  Das Letzte, was Ihnen sofort einf√§llt, ist die Situation, in der Sie beispielsweise Kubernetes verwenden und das System orchestrieren m√ºssen, dh eine bestimmte Anzahl verschiedener Mikrodienste ausl√∂sen, die automatisch nach bestimmten Regeln skaliert werden. <br><br>  In allen anderen F√§llen reicht Spring Boot aus, um alles in eine einzige JAR-Datei zu packen.  Und im Prinzip ist das Springboot-Glas eine gute Metapher f√ºr den Docker-Container.  Dies ist nat√ºrlich nicht dasselbe, aber in Bezug auf die einfache Bereitstellung sind sie sich sehr √§hnlich. <br><br><h2>  Kubernetes </h2><br>  Was ist, wenn wir Kubernetes verwenden?  Mit dieser Technologie k√∂nnen Sie zun√§chst eine gro√üe Anzahl von Mikrodiensten auf verschiedenen Computern bereitstellen, verwalten, automatisch skalieren usw. Es gibt jedoch viele Anwendungen, mit denen Sie die Orchestrierung steuern k√∂nnen, z. B. Puppet, CF-Engine, SaltStack und andere.  Kubernetes selbst ist sicherlich gut, kann aber einen erheblichen Overhead verursachen, mit dem nicht jedes Projekt leben kann. <br><br>  Mein Lieblingswerkzeug ist Ansible, kombiniert mit Terraform, wo Sie es brauchen.  Ansible ist ein ziemlich einfaches deklaratives leichtes Werkzeug.  Es erfordert keine Installation spezieller Agenten und verf√ºgt √ºber die verst√§ndliche Syntax von Konfigurationsdateien.  Wenn Sie mit Docker Compose vertraut sind, werden sofort √ºberlappende Abschnitte angezeigt.  Und wenn Sie Ansible verwenden, m√ºssen Sie nicht vorab rezerezieren - Sie k√∂nnen Systeme mit klassischeren Mitteln bereitstellen. <br><br>  Es ist klar, dass es sich dennoch um unterschiedliche Technologien handelt, aber es gibt einige Aufgaben, bei denen sie austauschbar sind.  Und ein gewissenhafter Designansatz erfordert eine Analyse, welche Technologie f√ºr das zu entwickelnde System besser geeignet ist.  Und wie wird es in ein paar Jahren besser sein, es zu erreichen. <br><br>  Wenn die Anzahl der verschiedenen Dienste auf Ihrem System gering und ihre Konfiguration relativ einfach ist, Sie beispielsweise nur eine JAR-Datei haben und keine pl√∂tzliche, explosive Zunahme der Komplexit√§t feststellen, m√ºssen Sie m√∂glicherweise mit klassischen Bereitstellungsmechanismen auskommen. <br><br>  Dies wirft die Frage auf: "Warten Sie, wie ist eine JAR-Datei?".  Das System sollte aus m√∂glichst vielen atomaren Mikrodiensten bestehen!  Mal sehen, wer und was das System mit Microservices machen soll. <br><br><h2>  Microservices </h2><br>  Erstens erm√∂glichen Microservices eine gr√∂√üere Flexibilit√§t und Skalierbarkeit sowie eine flexible Versionierung einzelner Teile des Systems.  Angenommen, wir haben eine Anwendung, die seit vielen Jahren in Produktion ist.  Die Funktionalit√§t w√§chst, aber wir k√∂nnen sie nicht umfassend weiterentwickeln.  Zum Beispiel. <br><br>  Wir haben eine Anwendung in Spring Boot 1 und Java 8. Eine wunderbare, stabile Kombination.  Aber das Jahr ist 2019, und ob es uns gef√§llt oder nicht, wir m√ºssen auf Spring Boot 2 und Java 12 umsteigen. Selbst der relativ einfache √úbergang eines gro√üen Systems zur neuen Version von Spring Boot kann sehr m√ºhsam sein, aber es geht darum, √ºber den Abgrund von Java 8 nach Java zu springen 12 Ich m√∂chte nicht reden.  Das hei√üt, theoretisch ist alles einfach: Wir migrieren, beheben die aufgetretenen Probleme, testen alles und f√ºhren es in der Produktion aus.  In der Praxis kann dies mehrere Monate Arbeit bedeuten, die dem Unternehmen keine neuen Funktionen bringen.  Wie Sie wissen, funktioniert ein kleiner Wechsel zu Java 12 ebenfalls nicht.  Hier kann uns die Microservice-Architektur helfen. <br><br>  Wir k√∂nnen eine kompakte Gruppe von Funktionen unserer Anwendung einem separaten Service zuordnen, diese Gruppe von Funktionen auf einen neuen technischen Stack migrieren und sie in relativ kurzer Zeit in die Produktion einbinden.  Wiederholen Sie den Vorgang St√ºck f√ºr St√ºck, bis die alten Technologien vollst√§ndig ersch√∂pft sind. <br><br>  Microservices k√∂nnen auch eine Fehlerisolierung bieten, wenn eine heruntergefallene Komponente nicht das gesamte System ruiniert. <br><br>  Microservices erm√∂glichen es uns, einen flexiblen technischen Stack zu haben, dh nicht alles monolithisch in einer Sprache und einer Version zu schreiben und bei Bedarf einen anderen technischen Stack f√ºr einzelne Komponenten zu verwenden.  Nat√ºrlich ist es besser, wenn Sie einen einheitlichen technischen Stack verwenden, aber dies ist nicht immer m√∂glich, und in diesem Fall k√∂nnen Microservices hilfreich sein. <br><br>  Microservices bieten auch eine technische M√∂glichkeit, eine Reihe von Managementproblemen zu l√∂sen.  Zum Beispiel, wenn Ihr gro√ües Team aus separaten Gruppen besteht, die in verschiedenen Unternehmen arbeiten (in verschiedenen Zeitzonen sitzen und verschiedene Sprachen sprechen).  Microservices helfen dabei, diese organisatorische Vielfalt durch Komponenten zu isolieren, die separat entwickelt werden.  Die Probleme eines Teils des Teams bleiben innerhalb eines Dienstes und werden nicht √ºber die gesamte Anwendung verteilt. <br><br>  Microservices sind jedoch nicht die einzige M√∂glichkeit, diese Probleme zu l√∂sen.  Seltsamerweise haben sich vor einigen Jahrzehnten f√ºr die H√§lfte von ihnen die Leute Klassen ausgedacht, und wenig sp√§ter - Komponenten und das Inversion of Control-Muster. <br><br>  Wenn wir uns Spring ansehen, sehen wir, dass es sich tats√§chlich um eine Microservice-Architektur innerhalb eines Java-Prozesses handelt.  Wir k√∂nnen eine Komponente deklarieren, die im Wesentlichen eine Dienstleistung ist.  Wir haben die M√∂glichkeit, eine Suche √ºber @Autowired durchzuf√ºhren. Es gibt Tools zum Verwalten des Komponentenlebenszyklus und die M√∂glichkeit, Komponenten aus einem Dutzend verschiedener Quellen separat zu konfigurieren.  Im Prinzip erhalten wir fast alles, was wir mit Microservices haben - nur innerhalb eines Prozesses, was die Kosten erheblich senkt.  Eine regul√§re Java-Klasse ist derselbe API-Vertrag, mit dem Sie auch Implementierungsdetails isolieren k√∂nnen. <br><br>  Genau genommen sind Microservices in der Java-Welt OSGi am √§hnlichsten - dort haben wir eine fast exakte Kopie von allem, was sich in Microservices befindet, au√üer der M√∂glichkeit, verschiedene Programmiersprachen und Codeausf√ºhrung auf verschiedenen Servern zu verwenden.  Aber selbst wenn wir innerhalb der M√∂glichkeiten von Java-Klassen bleiben, haben wir ein ziemlich leistungsf√§higes Werkzeug, um eine gro√üe Anzahl von Isolationsproblemen zu l√∂sen. <br><br>  Selbst in einem ‚ÄûManagement‚Äú -Szenario mit Teamisolation k√∂nnen wir ein separates Repository erstellen, das ein separates Java-Modul mit einem eindeutigen externen Vertrag und einer Reihe von Tests enth√§lt.  Dies verringert die F√§higkeit eines Teams, das Leben eines anderen Teams versehentlich zu verkomplizieren, erheblich. <br><br><img src="https://habrastorage.org/webt/fq/kn/v8/fqknv8g8bzypbpunprhjeeru_is.png"><br><br>  Ich habe wiederholt geh√∂rt, dass es unm√∂glich ist, Implementierungsdetails ohne Microservices zu isolieren.  Aber ich kann antworten, dass es in der gesamten Softwareindustrie nur darum geht, die Implementierung zu isolieren.  Zu diesem Zweck wurde zuerst das Unterprogramm erfunden (in den 50er Jahren des letzten Jahrhunderts), dann Funktionen, Verfahren, Klassen und sp√§ter Mikrodienste.  Die Tatsache, dass Microservices in dieser Reihe zuletzt erschienen sind, macht sie jedoch nicht zum h√∂chsten Entwicklungspunkt und verpflichtet uns nicht, immer auf ihre Hilfe zur√ºckzugreifen. <br><br>  Bei der Verwendung von Microservices sollte auch ber√ºcksichtigt werden, dass Anrufe zwischen ihnen einige Zeit dauern.  Dies ist oft unwichtig, aber ich habe einen Fall gesehen, in dem der Kunde die Systemantwortzeit von 3 Sekunden anpassen musste.  Es war eine vertragliche Verpflichtung, eine Verbindung zu einem Drittanbieter-System herzustellen.  Die Anrufkette durchlief mehrere Dutzend atomare Mikrodienste, und der Aufwand f√ºr HTTP-Anrufe erm√∂glichte es nicht, innerhalb von 3 Sekunden zu schrumpfen.  Im Allgemeinen m√ºssen Sie verstehen, dass jede Aufteilung von monolithischem Code in eine Reihe von Diensten zwangsl√§ufig die Gesamtsystemleistung beeinflusst.  Nur weil Daten nicht "kostenlos" zwischen Prozessen und Servern teleportiert werden k√∂nnen. <br><br><h3>  Wann werden Microservices ben√∂tigt? </h3><br>  In welchen F√§llen muss eine monolithische Anwendung wirklich in mehrere Mikrodienste unterteilt werden?  Erstens, wenn Ressourcen in Funktionsbereichen unausgewogen eingesetzt werden. <br><br>  Zum Beispiel haben wir eine Gruppe von API-Aufrufen, die Berechnungen durchf√ºhren, die viel Prozessorzeit erfordern.  Und es gibt eine Gruppe von API-Aufrufen, die sehr schnell ausgef√ºhrt werden, f√ºr deren Speicherung jedoch eine umst√§ndliche 64-GB-Datenstruktur erforderlich ist.  F√ºr die erste Gruppe ben√∂tigen wir eine Gruppe von Maschinen mit insgesamt 32 Prozessoren, f√ºr die zweite Gruppe reicht eine Maschine mit 64 GB Arbeitsspeicher aus (OK, es gibt zwei Maschinen f√ºr Fehlertoleranz).  Wenn wir eine monolithische Anwendung haben, ben√∂tigen wir 64 GB Speicher auf jedem Computer, was die Kosten f√ºr jeden Computer erh√∂ht.  Wenn diese Funktionen in zwei separate Dienste unterteilt sind, k√∂nnen wir Ressourcen sparen, indem wir den Server f√ºr eine bestimmte Funktion optimieren.  Die Serverkonfiguration sieht m√∂glicherweise folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/q3/2s/yo/q32syo6fpc3c3avb_wphdtwupp8.png"><br><br>  Microservices werden ben√∂tigt und wenn wir einen engen Funktionsbereich ernsthaft skalieren m√ºssen.  Zum Beispiel werden hundert API-Methoden 10 Mal pro Sekunde aufgerufen, und beispielsweise werden vier API-Methoden 10 Tausend Mal pro Sekunde aufgerufen.  Eine Skalierung des gesamten Systems ist h√§ufig nicht erforderlich, dh wir k√∂nnen nat√ºrlich alle 100 Methoden auf viele Server multiplizieren. Dies ist jedoch in der Regel sp√ºrbar teurer und komplizierter als die Skalierung einer engen Gruppe von Methoden.  Wir k√∂nnen diese vier Anrufe in einen separaten Dienst aufteilen und ihn nur auf eine gro√üe Anzahl von Servern skalieren. <br><br>  Es ist auch klar, dass wir m√∂glicherweise einen Microservice ben√∂tigen, wenn wir einen separaten Funktionsbereich geschrieben haben, beispielsweise in Python.  Da sich herausstellte, dass einige Bibliotheken (z. B. f√ºr maschinelles Lernen) nur in Python verf√ºgbar sind und wir sie in einen separaten Dienst aufteilen m√∂chten.  Es ist auch sinnvoll, einen Microservice zu erstellen, wenn ein Teil des Systems fehleranf√§llig ist.  Es ist nat√ºrlich gut, Code so zu schreiben, dass im Prinzip keine Fehler auftreten, aber die Gr√ºnde k√∂nnen extern sein.  Und niemand ist vor seinen eigenen Fehlern sicher.  In diesem Fall kann der Fehler in einem separaten Prozess isoliert werden. <br><br>  Wenn Ihre Anwendung keine der oben genannten Voraussetzungen erf√ºllt und in absehbarer Zeit nicht erwartet wird, ist eine monolithische Anwendung h√∂chstwahrscheinlich am besten f√ºr Sie geeignet.  Das einzige - ich empfehle, es so zu schreiben, dass Funktionsbereiche, die nicht miteinander in Beziehung stehen, im Code nicht voneinander abh√§ngen.  Damit k√∂nnen bei Bedarf nicht miteinander verbundene Funktionsbereiche voneinander getrennt werden.  Dies ist jedoch immer eine gute Empfehlung, die die interne Konsistenz erh√∂ht und Sie lehrt, Modulvertr√§ge sorgf√§ltig zu formulieren. <br><br><h2>  Reaktive Architektur und reaktive Programmierung </h2><br>  Ein reaktiver Ansatz ist relativ neu.  Der Zeitpunkt seines Erscheinens kann als das Jahr 2014 angesehen werden, in dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das reaktive Manifest</a> ver√∂ffentlicht wurde.  Zwei Jahre nach der Ver√∂ffentlichung des Manifests war er allen bekannt.  Dies ist ein wirklich revolution√§rer Ansatz f√ºr das Systemdesign.       ,      ,   ,     ,              . <br><br><img src="https://habrastorage.org/webt/5x/dh/zb/5xdhzbusskuvnn13ygva5cwu2wk.png"><br><br>  ,         .  ,      ,    : ¬´  ,      !?¬ª     , ,  ,            ,         ¬´¬ª.     ,   100%   ,      ,     . <br><br>      ‚Äî   ,      ‚Äî     .          . <br><br>     ?  ,     . <br><br>   - ,  - .     -  -, , HTTP-.     ,      .   ,       .     ,   ,     ,  . <br><br>          ?   ,  HTTP-            ,   ( callback)        (  )  .     ,  -   ( ,      HTTP-)   . <br><br>    ‚Äî   .            . . .      3 Ghz      ,   ,      . .    .  ,   Java-,    HTTP- ‚Äî     5-10%.  ,   , , ,    100   50 $/  ‚Äî    $500    .  ,  ,      . <br><br> ,   ?    . <br><br>        ,       .  ,        ,   ,   ,        ,       ,    .     ,   ,             .      . <br><br>     -   . , JDBC      (     . ADA, R2DBC,         ).   90 %      ,         .      ‚Äî  HTTP-    ,         .      ,          . <br><br><img src="https://habrastorage.org/webt/t-/om/uv/t-omuvjblahs0nbrkpmeomfh970.png"><br><br><h3>     ? </h3><br>  ,     , ,      (    )              .    ‚Äî         -    ,    .      ,      , ,  HTTP. <br><br>             ,       , ,        ,     , ,  . <br><br>              . ,  ¬´          ,       ¬ª       , ,     ,                 . ,        ,    ,    10  11 , ,         ,    . <br><br><h2>  Fazit </h2><br>    ,         .              ,  ,        ,        . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436346/">https://habr.com/ru/post/de436346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436334/index.html">Lernkonzepte durch sensomotorische Interaktion</a></li>
<li><a href="../de436338/index.html">Wie funktioniert der Flughafen Vnukovo?</a></li>
<li><a href="../de436340/index.html">Separate Protokollierungsstufe f√ºr jede Anforderung</a></li>
<li><a href="../de436342/index.html">Eine Einf√ºhrung in die robuste Optimierung [... und eine kleine Einkaufsliste, die ich vergessen habe ...]</a></li>
<li><a href="../de436344/index.html">Fibaro Home Center 2 und Thermostat f√ºr Fu√übodenheizung HeatIt. Wie man die Temperatur erh√∂ht</a></li>
<li><a href="../de436348/index.html">Aufbau eines Teams zur Abfrage von Daten aus der Datenbank - Teil 2</a></li>
<li><a href="../de436350/index.html">Lernen Sie kontroverse Taktiken, Techniken und allgemeines Wissen (ATT @ CK). Unternehmenstaktik. Teil 7</a></li>
<li><a href="../de436352/index.html">PostgreSQL News Digest. Ausgabe Nr. 14</a></li>
<li><a href="../de436354/index.html">Das US-Milit√§r vernachl√§ssigt Fragen der Cybersicherheit</a></li>
<li><a href="../de436356/index.html">[Interessant hinter dem H√ºgel] Wie stoppen wir die technologische Abh√§ngigkeit?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>