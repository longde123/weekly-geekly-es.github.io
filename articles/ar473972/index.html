<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฟ ๐ ๐๐ฝ ุญุณุจ ุชุฑุชูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุจุญุซ ุนู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS โช๏ธ ๐ ๐๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูู ูููู ุจุจุฑุงูุฌ ูููุฑูููุชุฑููุฑ ุฑุจูุง ูุนุฑู ุนู FreeRTOS ุ ุฃู ุนูู ุงูุฃูู ุณูุน ุนู ูุธุงู ุงูุชุดุบูู ูุฐุง. ูุฑุฑ Amazon Amazon ุชูุณูุน ูุฏุฑุงุช ูุธุงู ุงูุชุดุบูู ูุฐุง ููุนูู ูุน ุฎ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุญุณุจ ุชุฑุชูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุจุญุซ ุนู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/473972/" style=";text-align:right;direction:rtl">  ูู ูู ูููู ุจุจุฑุงูุฌ ูููุฑูููุชุฑููุฑ ุฑุจูุง ูุนุฑู ุนู FreeRTOS ุ ุฃู ุนูู ุงูุฃูู ุณูุน ุนู ูุธุงู ุงูุชุดุบูู ูุฐุง.  ูุฑุฑ Amazon Amazon ุชูุณูุน ูุฏุฑุงุช ูุธุงู ุงูุชุดุบูู ูุฐุง ููุนูู ูุน ุฎุฏูุงุช AWS Internet of Things - ููุฐุง ุธูุฑุช Amazon FreeRTOS.  ุทููุจ ููุง ุ ูุทูุฑู ูุญูู ููุฏ PVS-Studio ุ ุงูุชุญูู ูู ูุฐู ุงููุดุงุฑูุน ูู ุงูุจุฑูุฏ ููู ุงูุชุนูููุงุช ุงููุงุฑุฏุฉ ุฃุฏูุงู.  ุญุณููุง ุ ููุฏ ุทูุจุช - ูุนููุง ุฐูู.  ูุง ุฌุงุก ููู - ุชุงุจุน ุงููุฑุงุกุฉ. <br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8d2/efa/d2f/8d2efad2f7885ec13add7368f6d2ff96.png" alt="ุงูุดูู 3"></div><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ููููุง ุนู ุงููุดุงุฑูุน </h2><br>  ููุจุฏุก ุ ุณูู ุฃุฎุจุฑูู ููููุงู ุนู "ุฃุจู" ุงููุดุฑูุน ุงููุญุฏุฏ - FreeRTOS (ููููู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงููุตุฏุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ).  ููุง ุชููู ููููุจูุฏูุง ุ ูุฅู FreeRTOS ูู ูุธุงู ุชุดุบูู ูุชุนุฏุฏ ุงูููุงู ูู ุงูููุช ุงููุนูู ููุฃูุธูุฉ ุงููุฏูุฌุฉ. <br><br>  ููุฏ ููุชุจ ูู ูุบุฉ C ุงููุฏููุฉ ุงูุฌูุฏุฉ ุ ููู ุฃูุฑ ุบูุฑ ููุงุฌุฆ - ูุฌุจ ุฃู ูุนูู ูุธุงู ุงูุชุดุบูู ูุฐุง ูู ุธุฑูู ูููุฐุฌูุฉ ูููููุฑููููุชุฑููุฑ: ุทุงูุฉ ุญูุณุจุฉ ููุฎูุถุฉ ุ ูููุฉ ุตุบูุฑุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููุง ุดุงุจู.  ุชุณูุญ ูู ูุบุฉ C ุจุงูุนูู ูุน ุงูููุงุฑุฏ ุจูุณุชูู ููุฎูุถ ููุฏููุง ุฃุฏุงุก ุนุงูู ุ ูุฐูู ููู ุงูุฃูุณุจ ูุชุทููุฑ ูุธุงู ุงูุชุดุบูู ูุฐุง. <br><br>  ุนุงุฏ ุงูุขู ุฅูู ููุทูุฉ ุงูุฃูุงุฒูู ุ ุงูุชู ูุง ุชูู ููุชููุฉ ุงูุฃูุฏู ูุชุชุทูุฑ ูู ูุฎุชูู ุงููุฌุงูุงุช ุงููุงุนุฏุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชุนูู ุฃูุงุฒูู ุนูู ุชุทููุฑ ูุญุฑู AAA ููุนุจุฉ Amazon Lumberyard ุ ูุงูุฐู ูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุงุฎุชุจุงุฑู ุฃูุถูุง</a> . <br><br>  ุฃุญุฏ ูุฐู ุงููุฌุงูุงุช ูู ุฅูุชุฑูุช ุงูุฃุดูุงุก (ุฅูุชุฑูุช ุงูุฃุดูุงุก ุ ุฅูุชุฑูุช ุงูุฃุดูุงุก).  ููุชุทููุฑ ูู ูุฐุง ุงููุฌุงู ุ ูุฑุฑุช Amazon ูุชุงุจุฉ ูุธุงู ุงูุชุดุบูู ุงูุฎุงุต ุจูุง - ูุฃุฎุฐูุง ููุงุฉ FreeRTOS ูุฃุณุงุณ. <br><br>  ูุชู ูุถุน ุงููุธุงู ุงููุงุชุฌ - Amazon FreeRTOS - ุนูู ุฃูู "ูููุฑ ุงููุฏุฑุฉ ุนูู ุงูุงุชุตุงู ุจุฃูุงู ุจุฎุฏูุงุช ุงูููุจ ูู Amazon ุ ูุซู AWS IoT Core ุฃู AWS IoT Greengrass."  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชู ุชุฎุฒูู</a> ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ููุฐุง ุงููุดุฑูุน ุนูู ุฌูุซุจ. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณูุจุญุซ ูููุง ุฅุฐุง ูุงูุช ููุงู ุฃุฎุทุงุก ูู FreeRTOS ุ ููุฐูู ูุฏู ุฃูุงู ูุธุงู ุงูุชุดุบูู ูู Amazon ูู ุญูุซ ุชุญููู ุงูููุฏ ุงูุซุงุจุช. <br><br><h2 style=";text-align:right;direction:rtl">  ููู ูุงู ุงูุดูู </h2><br>  ุชู ูุญุต ุงูููุฏ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุจุญุซ ุงูุชููุงุฆู ุนู ุงูุฃุฎุทุงุก: ูุญูู ุงูููุฏ ุงูุซุงุจุช PVS-Studio.  ุฅูู ูุงุฏุฑ ุนูู ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู ุงูุจุฑุงูุฌ ุงูููุชูุจุฉ ุจูุบุงุช C ู C ++ ู C # ู Java. <br><br>  ูุจู ุงูุจุฏุก ูู ุงูุชุญููู ุ ูู ุงูุถุฑูุฑู ุชุฌููุน ุงููุดุฑูุน - ูุฐูู ุณุฃููู ูุชุฃูุฏูุง ูู ุฃู ูุฏู ูู ุงูุชุจุนูุงุช ุงููุงุฒูุฉ ููู ุดูุก ูุชูุงูู ูุน ุงููุดุฑูุน.  ููุงู ุนุฏุฉ ุทุฑู ููุชุญูู ูู ุงููุดุฑูุน - ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ูุธุงู ูุฑุงูุจุฉ ุงูุชุฑุฌูุฉ.  ููุฏ ุฃุฌุฑูุช ุงูุชุญููู ุจุงุณุชุฎุฏุงู ุงููููู ุงูุฅุถุงูู ูุจุฑูุงูุฌ Visual Studio - ูู ุงูุฌูุฏ ุฃู ุชุญุชูู ูุณุชูุฏุนุงุช ููุง ุงููุดุฑูุนูู ุนูู ูุฌููุนุฉ ูู ูููุงุช ุงููุดุงุฑูุน ุงูุชู ุชุณูู ุงูุฅูุดุงุก ูู ูุธุงู Windows. <br><br>  ูู ูุง ูุงู ูุทููุจูุง ุจุงููุณุจุฉ ูู ูู ุฌูุน ุงููุดุฑูุนุงุช ููุชุฃูุฏ ูู ูุฌูุฏ ูู ูุง ูู ุถุฑูุฑู ููุชุญูู.  ุจุนุฏ ุฐูู ุ ุฃุทููุช ุงูุชุญููู ูููููุง!  - ุฃูุงูู ุชูุฑูุฑ ูุญูู ุฌุงูุฒ. <br><br>  ูุฏ ุชุญุชูู ููุชุจุงุช ุงูุทุฑู ุงูุซุงูุซ ุงููุถููุฉ ูู ูุฐู ุงููุดุงุฑูุน ุฃูุถูุง ุนูู ุฃุฎุทุงุก ุ ููููููุง ุจุงูุทุจุน ุฃู ุชุคุซุฑ ุฃูุถูุง ุนูู ุชุดุบูู ุงูุจุฑูุงูุฌ.  ููุน ุฐูู ุ ุงุณุชุจุนุฏุชูู ูู ุงูุชุญููู ูู ุฃุฌู ููุงุก ุงูุณุฑุฏ. <br><br>  ูุฐูู ุ ูุชู ุชุญููู ุงููุดุงุฑูุน ุ ุชููู ุงูุชูุงุฑูุฑ ุ ูุชู ูุชุงุจุฉ ุฃุฎุทุงุก ูุซูุฑุฉ ููุงูุชูุงู.  ุญุงู ุงูููุช ููุงูุชูุงู ุฅูู ุชุญููููู! <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูุฎูู FreeRTOS </h2><br>  ูู ุงูุจุฏุงูุฉ ุ ููุช ุฃุชููุน ุฃู ุฃูุชุจ ููุงูุชูู ูููุตูุชูู: ูุงุญุฏุฉ ููู ูุธุงู ุชุดุบูู.  ููุฏ ูุฑูุช ูุฏู ุจุงููุนู ุ ูุฃุนุฏ ููุชุงุจุฉ ููุงู ุฌูุฏ ุญูู FreeRTOS.  ุชููุนูุง ูุงูุชุดุงู ุจุถุน ุฃุฎุทุงุก ุนูู ุงูุฃูู (ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CWE-457</a> ) ุ ูุธุฑุช ุจุดุบู ุฅูู ุชุญุฐูุฑุงุช ุงููุญูู ุงูููููุฉ ุ ู ... ููุง ุดูุก.  ูู ุฃุฌุฏ ุฃู ุฎุทุฃ ูุซูุฑ ููุงูุชูุงู. <br><br>  ุงูุนุฏูุฏ ูู ุงูุชุญุฐูุฑุงุช ุงูุชู ุฃุตุฏุฑูุง ุงููุญูู ูู ุชูู ุฐุงุช ุตูุฉ ุจู FreeRTOS.  ุนูู ุณุจูู ุงููุซุงู ุ ูุงูุช ูุฐู ุงูุชุญุฐูุฑุงุช ูู ุนููุจ 64 ุจุช ูุซู casting <i>size_t</i> ุฅูู <i>uint32_t</i> .  ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู FreeRTOS ูุตูู ููุนูู ุนูู ุฃุฌูุฒุฉ ุจุญุฌู ูุคุดุฑ ูุง ูุฒูุฏ ุนู 32 ุจุช. <br><br>  ุฑุงุฌุนุช ุจุนูุงูุฉ ุฌููุน ุงูุชุญุฐูุฑุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V1027</a> ุงููุชุนููุฉ ูููู ุจูู ุงููุคุดุฑุงุช ุฅูู ููุงูู ูุง ุนูุงูุฉ ููุง.  ุฅุฐุง ูุงูุช ุงูููุงูู ุงููุงุจูุฉ ููุงุฎุชุฒุงู ููุง ููุณ ุงููุญุงุฐุงุฉ ุ ููุง ูููู ูุฐุง ุงูุฎุทุฃ ุฎุทุฃู.  ููู ุฃุฌุฏ ูุฑูููุง ุฎุทูุฑูุง ูุงุญุฏูุง! <br><br>  ุฌููุน ุงูุฃูุงูู ุงููุดุจููุฉ ุงูุฃุฎุฑู ูุงูุช ุฅูุง ูุฑุชุจุทุฉ ุจููุท ุงูุชุฑููุฒ ุ ุฃู ุชู ุชุฌููุฒูุง ุจุชุนููู ูุดุฑุญ ุณุจุจ ุฐูู ููุง ุจุงูุถุจุท ูููุงุฐุง ูุฐุง ููุณ ุฎุทุฃ. <br><br>  ุจุดูู ุนุงู ุ ุฃุฑูุฏ ุงูุงุชุตุงู ุจูุทูุฑู FreeRTOS.  ูุง ุฑูุงู ุฑุงุฆุนุฉ ุญููุง!  ูู ููุชู ุชูุฑูุจูุง ุจูุดุงุฑูุน ูุธููุฉ ูุนุงููุฉ ุงูุฌูุฏุฉ ูุซู ูุดุงุฑูุนู.  ูุณุฑูู ุฌุฏูุง ุฃู ุฃูุฑุฃ ุฑูุฒูุง ูุธูููุง ููุฑุชุจูุง ูููุซููุง ุฌูุฏูุง.  ุงููุจุนุงุช ูุจุงูุฉ ูู. <br><br>  ุฑุบู ุฃููู ูู ุฃุฌุฏ ุฃู ุฃุฎุทุงุก ูุซูุฑุฉ ููุงูุชูุงู ูู ุฐูู ุงูููู ุ ูููุช ุฃููู ูู ุฃุชููู ุนูุฏ ูุฐุง ุงูุญุฏ.  ููุช ุฐุงูุจูุง ุฅูู ุงูููุฒู ูุน ุฅููุงูู ุงูุฑุงุณุฎ ุจุฃู ููุงู ุดูุฆูุง ูุซูุฑูุง ููุงูุชูุงู ูููู ุงูุนุซูุฑ ุนููู ูู ุงูุฅุตุฏุงุฑ ูู Amazon 100ูช ุ ูุฃูู ุบุฏุงู ุณุฃุฌูุน ุจุงูุชุฃููุฏ ุฃุฎุทุงุก ูุงููุฉ ููุฐู ุงูููุงูุฉ.  ููุง ููุช ุฑุจูุง ุฎููุช ุ ููุช ุนูู ุญู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูุฎูู ุงูุฃูุงุฒูู FreeRTOS </h2><br>  ุชุญููุช ูุณุฎุฉ ูุธุงู ุฃูุงุฒูู ุฅูู ... ูุชููู ูุนุชุฏูุฉ ุ ุฃุณูุฃ ููููุงู.  ุธู ุชุฑุงุซ FreeRTOS ูุธูููุง ุชูุงููุง ุ ููู ุงููุฑุงุฌุนุงุช ุงูุฌุฏูุฏุฉ ุงุชุถุญ ุฃููุง ูุซูุฑุฉ ุฌุฏูุง ููุงูุชูุงู. <br><br>  ูู ุจุนุถ ุงูุฃูุงูู ุ ุชู ุงูุชูุงู ููุทู ุงูุจุฑูุงูุฌ ุ ุญูุซ ุนูู ุจุดูู ุบูุฑ ุตุญูุญ ูุน ุงููุคุดุฑุงุช.  ูู ุจุนุถ ุงูุฃูุงูู ุ ูููู ุฃู ุชุคุฏู ุงูุดูุฑุฉ ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ ุ ูููู ูู ููุงู ูุง ูู ููู ุงููุจุฑูุฌ ูุนุฑู ุจุจุณุงุทุฉ ุนู ููุท ุงูุฎุทุฃ ุงูุฐู ุงุฑุชูุจู.  ููุฏ ูุฌุฏุช ุจุนุถ ููุงุท ุงูุถุนู ุงููุญุชููุฉ ุงูุฎุทูุฑุฉ. <br><br>  ุดูุก ุชุฃุฎุฑุช ูุน ุงูููุฏูุฉ.  ุฏุนูุง ูุจุฏุฃ ูู ุชุญููู ุงูุฃุฎุทุงุก! <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชูุงู ููุทู ุงูุจุฑูุงูุฌ </h3><br>  ููุจุฏุฃ ุจุงูููุงุทู ุงูุชู ุชูุฌุฏ ุจูุง ูุดููุงุช ุ ูุงูุชู ุชุดูุฑ ุจูุถูุญ ุฅูู ุฃู ุงูุจุฑูุงูุฌ ูุง ูุนูู ุชูุงููุง ููุง ุชููุน ุงููุจุฑูุฌ.  ุฃูู ููุงู ูู ูุฐุง ุงููุจูู ุณูููู ุงูุนูู ุงููุดุจูู ูุน ูุฌููุนุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @brief Pool of request and associated response buffers, * handles, and configurations. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> _requestPool_t _requestPool = { <span class="hljs-number"><span class="hljs-number">0</span></span> }; .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _scheduleAsyncRequest(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> reqIndex, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> currentRange) { .... <span class="hljs-comment"><span class="hljs-comment">/* Set the user private data to use in the asynchronous callback context. */</span></span> _requestPool.pRequestDatas[reqIndex].pConnHandle = &amp;_connHandle; _requestPool.pRequestDatas[reqIndex].pConnConfig = &amp;_connConfig; _requestPool.pRequestDatas[reqIndex].reqNum = reqIndex; _requestPool.pRequestDatas[reqIndex].currRange = currentRange; _requestPool.pRequestDatas[reqIndex].currDownloaded = <span class="hljs-number"><span class="hljs-number">0</span></span>; _requestPool.pRequestDatas[reqIndex].numReqBytes = numReqBytes; .... _requestPool.pRequestDatas-&gt;scheduled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... }</code> </pre> <br>  ุฃุตุฏุฑ PVS-Studio ุชุญุฐูุฑูู ููุฐุง ุงูุฌุฒุก ูู ุงูููุฏ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V619 ูุชู ุงุณุชุฎุฏุงู ุงูุตููู '_requestPool.pRequestDatas' ููุคุดุฑ ููุงุฆู ููุฑุฏ.  iot_demo_https_s3_download_async.c 973 </li><li style=";text-align:right;direction:rtl">  V574 ูุชู ุงุณุชุฎุฏุงู ูุคุดุฑ '_requestPool.pRequestDatas' ูู ููุณ ุงูููุช ูุตููู ูููุคุดุฑ ููุงุฆู ูุงุญุฏ.  ุฎุทูุท ุงูุชุญูู: 931 ุ 973. iot_demo_https_s3_download_async.c 973 </li></ul><br>  ููุท ูู ุญุงูุฉ ุงุณูุญ ูู ุฃู ุฃุฐูุฑูู: ุงุณู ุงููุตูููุฉ ูู ูุคุดุฑ ุนูู ุงูุนูุตุฑ ุงูุฃูู.  ูุฐุง ุฅุฐุง ูุงู <i>_requestPool.pRequestDatas</i> ุนุจุงุฑุฉ ุนู ุตููู ูู ุงูููุงูู ุ ูุฅู <i>_requestPool.pRequestDatas [i] .scheduled</i> ูู ุงููุตูู ุฅูู ุงูุนุถู <i>ุงููุฌุฏูู</i> ูู ุงูุจููุฉ i ููุตููู.  ูุฅุฐุง ููุช ุจูุชุงุจุฉ <i>_requestPool.pRequestDatas-&gt; ุงููุฌุฏููุฉ</i> ุ ููุฐุง ุณูุนูู ุงููุตูู ุฅูู ุงูุนุถู <i>ุงููุฌุฏูู</i> ูู ุงูุจููุฉ ุงูุฃููู ููุตููู. <br><br>  ูุฐุง ูุง ูุญุฏุซ ูู ููุชุทู ุงูุดูุฑุฉ ุฃุนูุงู.  ูุบูุฑ ุงูุณุทุฑ ุงูุฃุฎูุฑ ุฏุงุฆููุง ุงููููุฉ ููุท ูุนุถู ูู ุงูุจููุฉ ุงูุฃููู ููุตููู.  ูู ุญุฏ ุฐุงุชู ุ ุชููู ูุซู ูุฐู ุงูููุงููุฉ ูุดุจููุฉ ุจุงููุนู ุ ูููู ุงููููู ููุง ุฃูุซุฑ ูุถูุญูุง: <i>ูุชู</i> ุงููุตูู ุฅูู ุตููู <i>_requestPool.pRequestDatas</i> ุนุจุฑ ุงูููุฑุณ <i>ุจุงููุงูู</i> ุ ูููุท ูู ููุงูุฉ ุนูููุฉ ุงูููุฑุณุฉ ุชู ุชุทุจูููุง. <br><br>  ููุง ุฃููููุง ุ ูุฌุจ ุฃู ูุจุฏู ุงูุณุทุฑ ุงูุฃุฎูุฑ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">_requestPool.pRequestDatas[reqIndex].scheduled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> <br>  ุงูุฎุทุฃ ุงูุชุงูู ูููู ูู ูุธููุฉ ุตุบูุฑุฉ ุ ูุฐูู ุณุฃูุฏููุง ุจุงููุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Return true if the string " pcString" is found * inside the token pxTok in JSON file pcJson. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> BaseType_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prvGGDJsoneq</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pcJson, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">jsmntok_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pxTok, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pcString )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ulStringSize = ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) pxTok-&gt;end - ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) pxTok-&gt;start; BaseType_t xStatus = pdFALSE; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( pxTok-&gt;type == JSMN_STRING ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> ) <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>( pcString ) == ulStringSize ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> ) <span class="hljs-built_in"><span class="hljs-built_in">strncmp</span></span>( &amp;pcJson[ pxTok-&gt;start ], <span class="hljs-comment"><span class="hljs-comment">// &lt;= pcString, ulStringSize ) == 0 ) { xStatus = pdTRUE; } } } return xStatus; }</span></span></code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V642 [CWE-197] ูุนุฏ ุญูุธ ูุชูุฌุฉ ุฏุงูุฉ strncmp ุฏุงุฎู ูุชุบูุฑ ุงูููุน "ุงููุตูุฑ" ุบูุฑ ููุงุณุจ.  ูููู ุฃู ุชุถูุน ุงูุจุชุงุช ูุจูุฑุฉ ูุณุฑ ููุทู ุงูุจุฑูุงูุฌ.  aws_greengrass_discovery.c 637 <br><br>  ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุชุนุฑูู ูุธููุฉ strncmp: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strncmp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *lhs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *rhs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count )</span></span></span></span>;</code> </pre> <br>  ูู ุงููุซุงู ุ ูุชู ุชุญููู ูุชูุฌุฉ type <i>int</i> ุ ุงูุชู ูุจูุบ ุญุฌููุง 32 ุจุช ุ ุฅูู ูุชุบูุฑ ูู ุงูููุน <i>int16_t</i> .  ูุน ูุซู ูุฐุง ุงูุชุญููู "ุงูุถูู" ุ ุณูุชู ููุฏ ุงูุฃุฌุฒุงุก ุงูุฃูุซุฑ ุฃูููุฉ ูู ูููุฉ ุงูุฅุฑุฌุงุน.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุฏุงูุฉ <i>strncmp</i> ุชูุฑุฌุน <i>0x00010000</i> ุ <i>ูุณุชุถูุน</i> ุงููุธููุฉ ุฃุซูุงุก ุงูุชุญููู ุ ูุณูุชู ุงุณุชููุงุก ุงูุดุฑุท. <br><br>  ูู ุงููุงูุน ุ ูู ุงูุบุฑูุจ ุฃู ูุฑู ูุซู ูุฐุง ุงููุฏูู ุจูุง ูู ุญุงูุฉ.  ููุงุฐุง ุญุชู ุชูุนู ุฐูู ุฅุฐุง ููุช ุชุณุชุทูุน ููุงุฑูุฉ <i>ูุซุงูุฉ ุงูุนูููุงุช</i> ุงูุนุงุฏูุฉ ูุน ุงูุตูุฑุ  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฅุฐุง ุฃุฑุงุฏ ุงููุจุฑูุฌ ุจูุนู ุฃู ุชุนูุฏ ุงููุธููุฉ ุฅูู <i>ุญูููุฉ</i> ูู ุจุนุถ ุงูุฃุญูุงู ุ ุญุชู ูู ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูููุงุฐุง ูุง ูุชู ูุตู ูุฐุง ุงูุณููู ุงูุตุนุจ ูู ุงูุชุนูููุ  ูููู ุจุนุฏ ุฐูู ูุฐุง ูู ุจุงููุนู ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ.  ุจุดูู ุนุงู ุ ุฃูุง ุฃููู ุฅูู ุงูุงุนุชูุงุฏ ุจุฃู ูุฐุง ุฎุทุฃ.  ูุง ุฑุงูู <br><br><h3 style=";text-align:right;direction:rtl">  ุณููู ุบูุฑ ูุญุฏุฏ ููุคุดุฑุงุช </h3><br>  ุงูุขู ุณูููู ููุงู ูุซุงู ูุจูุฑ ุฅูู ุญุฏ ูุง.  ูุฎูู ุงูุชุฑุงุฌุน ุงููุญุชูู ููุคุดุฑ ูุงุฑุบ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _networkReceiveCallback(....) { IotHttpsReturnCode_t status = IOT_HTTPS_OK; _httpsResponse_t* pCurrentHttpsResponse = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; IotLink_t* pQItem = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-comment"><span class="hljs-comment">/* Get the response from the response queue. */</span></span> IotMutex_Lock(&amp;(pHttpsConnection-&gt;connectionMutex)); pQItem = IotDeQueue_PeekHead(&amp;(pHttpsConnection-&gt;respQ)); IotMutex_Unlock(&amp;(pHttpsConnection-&gt;connectionMutex)); <span class="hljs-comment"><span class="hljs-comment">/* If the receive callback is invoked * and there is no response expected, * then this a violation of the HTTP/1.1 protocol. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pQItem == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { IotLogError(....); fatalDisconnect = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; status = IOT_HTTPS_NETWORK_ERROR; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> iotCleanup; } .... iotCleanup : <span class="hljs-comment"><span class="hljs-comment">/* Report errors back to the application. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status != IOT_HTTPS_OK) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pCurrentHttpsResponse-&gt;isAsync &amp;&amp; pCurrentHttpsResponse-&gt;pCallbacks-&gt;errorCallback) { pCurrentHttpsResponse-&gt;pCallbacks-&gt;errorCallback(....); } pCurrentHttpsResponse-&gt;syncStatus = status; } .... }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V522 [CWE-690] ูุฏ ูููู ููุงู ุฅูุบุงุก ูุฑุฌุนูุฉ ููุคุดุฑ ูุงุฑุบ ูุญุชูู "pCurrentHttpsResponse".  iot_https_client.c 1184 <br><br>  dereferences ุงููุดููุฉ ูู ูู ุฃุณูู <i>ุฅุฐุง</i> .  ุฏุนููุง ูุฑู ูุง ูุญุฏุซ ููุง. <br><br>  ูู ุจุฏุงูุฉ ุงููุธููุฉ ุ <i>ุชุชู</i> ุชููุฆุฉ <i>ูุชุบูุฑุงุช pCurrentHttpsResponse</i> ู <i>pQItem</i> ุฅูู <i>NULL</i> ุ ููุชู <i>ุชููุฆุฉ</i> ูุชุบูุฑ <i>ุงูุญุงูุฉ</i> ุฅูู <i>IOT_HTTPS_OK</i> ุ ููุง ูุนูู ุฃู ูู ุดูุก ูุณูุฑ ุจุณูุงุณุฉ. <br><br>  ุจุนุฏ ุฐูู ุ <i>ูุชู</i> ุชุนููู <i>pQItem</i> ุงููููุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ูู ุฏุงูุฉ <i>IotDeQueue_PeekHead</i> ุ ูุงูุชู ุชูุฑุฌุน ูุคุดุฑูุง ุฅูู ุจุฏุงูุฉ ูุงุฆูุฉ ุงูุชุธุงุฑ ูุชุตูุฉ ุจุดูู ูุถุงุนู. <br><br>  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุงูุช ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุงุฑุบุฉุ  ูู ูุฐู ุงูุญุงูุฉ ุ <i>ุชุฑุฌุน</i> ุงูุฏุงูุฉ <i>IotDeQueue_PeekHead</i> <i>NULL</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> IotLink_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IotDeQueue_PeekHead</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IotDeQueue_t* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pQueue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IotListDouble_PeekHead(pQueue); } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> IotLink_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IotListDouble_PeekHead</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IotListDouble_t* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pList)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">/* @[declare_linear_containers_list_double_peekhead] */</span></span></span><span class="hljs-function"> </span></span>{ IotLink_t* pHead = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pList != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IotListDouble_IsEmpty(pList) == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { pHead = pList-&gt;pNext; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pHead; }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุงูุดุฑุท <i>pQItem == NULL</i> ุ ููุชู ุงูุชุญูู ูู ุชุฏูู ุงูุชุญูู ุนุจุฑ ุงูุงูุชูุงู ุฅูู ุงูุฌุฒุก ุงูุณููู ูู ุงูุฌุณู ุงููุธููู.  ุจุญููู ูุฐุง ุงูููุช ุ <i>ุณูุธู</i> ูุคุดุฑ <i>pCurrentHttpsResponse</i> ุฎุงูููุง ุ <i>ููู</i> ุชููู ุงูุญุงูุฉ ูุณุงููุฉ ูู <i>IOT_HTTPS_OK</i> .  ูุชูุฌุฉ ูุฐูู ุ ุณููุน ูู ูุฐุง ุงููุฑุน ุจุงูุฐุงุช <i>ุฅุฐุง</i> ุ ู ... ุจุฑูุฏุฒ!  ุนูุงูุจ ูุฐุง dereferencing ุฃูุช ููุณู ุชุนุฑู. <br><br>  ุญุณูุง.  ูุงู ูุซุงูุง ูุฒุฎุฑู ููููุง.  ุงูุขู ุฃูุฏ ุฃู ุฃููุช ุงูุชุจุงููู ุฅูู ุฅูุบุงุก ุงูุชุณุฌูู ุงููุญุชูู ุงูุจุณูุท ูุงูููููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PKI_mbedTLSSignatureToPkcs11Signature</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pxSignaturePKCS, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * pxMbedSignature )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> xReturn = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> * pxNextLength; <span class="hljs-comment"><span class="hljs-comment">/* The 4th byte contains the length of the R component */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> ucSigComponentLength = pxMbedSignature[ <span class="hljs-number"><span class="hljs-number">3</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">// &lt;= if( ( pxSignaturePKCS == NULL ) || ( pxMbedSignature == NULL ) ) { xReturn = FAILURE; } .... }</span></span></code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V595 [CWE-476] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "pxMbedSignature" ูุจู ุฃู ูุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 52 ุ 54. iot_pki_utils.c 52 <br><br>  ุชุญุตู ูุฐู ุงููุธููุฉ ุนูู ูุคุดุฑูู ุฅูู <i>uint8_t</i> .  ูุชู ุงูุชุญูู ูู ููุง ุงููุคุดุฑูู ูู <i>NULL</i> ุ ููู ููุงุฑุณุฉ ุฌูุฏุฉ - ูุฌุจ ุญู ูุฐู ุงูููุงูู ุนูู ุงูููุฑ. <br><br>  ูููู ูุฐุง ูู ุงูุญุธ ุงูุณูุฆ: ุจุญููู ุงูููุช ุงูุฐู ูุชู ููู ุชุญุฏูุฏ <i>pxMbedSignature</i> ุ ุณูุชู ุจุงููุนู <i>ุฅูุบุงุก ุชุฃุฌููู</i> ุญุฑูููุง ุณุทุฑ ูุงุญุฏ ุฃุนูุงู.  ุชุง-DAA! <br><br>  ูุซุงู ุขุฎุฑ ุนูู ููุฏ ุงููุถุงุฑุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">CK_RV </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vAppendSHA256AlgorithmIdentifierSequence</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * x32ByteHashedMessage, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * x51ByteHashOidBuffer )</span></span></span><span class="hljs-function"> </span></span>{ CK_RV xResult = CKR_OK; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> xOidSequence[] = pkcs11STUFF_APPENDED_TO_RSA_SIG; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ( x32ByteHashedMessage == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) || ( x51ByteHashOidBuffer == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) ) { xResult = CKR_ARGUMENTS_BAD; } <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>( x51ByteHashOidBuffer, xOidSequence, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>( xOidSequence ) ); <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>( &amp;x51ByteHashOidBuffer[ <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>( xOidSequence ) ], x32ByteHashedMessage, <span class="hljs-number"><span class="hljs-number">32</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> xResult; }</code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V1004 [CWE-628] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ 'x51ByteHashOidBuffer' ุจุทุฑููุฉ ุบูุฑ ุขููุฉ ุจุนุฏ ุฃู ุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 275 ุ 280. iot_pkcs11.c 280 </li><li style=";text-align:right;direction:rtl">  V1004 [CWE-628] ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ 'x32ByteHashedMessage' ุจุทุฑููุฉ ุบูุฑ ุขููุฉ ุจุนุฏ ุฃู ุชู ุงูุชุญูู ููู ุถุฏ nullptr.  ุฎุทูุท ุงูุชุญูู: 275 ุ 281. iot_pkcs11.c 281 </li></ul><br>  ูุญุฐุฑ ุงููุญูู ูู ุฃู ูุนููุงุช ุงููุธุงุฆู ุงูุชู ูู ูุคุดุฑุงุช ุชุณุชุฎุฏู ุจุดูู ุบูุฑ ุขูู ุจุนุฏ ุฃู ุชู ุงุฎุชุจุงุฑูุง ูู ุฃุฌู <i>NULL</i> .  ูู ุงููุงูุน ุ ูุชู ุงูุชุญูู ูู ุงููุณูุทุงุช ุ ูููู ุฅุฐุง ุชุจูู ุฃู ุฃู ูููุง <i>ูุงุฑุบ</i> ุ ููุง ูุชู ุงุชุฎุงุฐ ุฃู ุฅุฌุฑุงุก ุ ุจุงุณุชุซูุงุก ุงููุชุงุจุฉ ุฅูู <i>xResult</i> .  ูุจุฏู ุฃู ูุฐู ุงูุดูุฑุฉ ุชููู: "ูุนู ุ ูุฐุง ูุนูู ุฃู ุงูุญุฌุฌ ูุงูุช ุณูุฆุฉ.  ุณููุชุจูุง ุงูุขู ุ ุจูููุง ุชุณุชูุฑ ุ ุชุงุจุน. " <br><br>  ุฎูุงุตุฉ ุงูููู: ุณูุชู ุชูุฑูุฑ <i>NULL</i> ุฅูู <i>memcpy</i> .  ูุงุฐุง ูููู ุฃู ูุฃุชู ูู ูุฐุงุ  ุฃูู ุณูุชู ูุณุฎ ุงูููู ูุฃููุงุ  ูู ุงููุงูุน ุ ุงูุชุฎููู ุญูู ูุฐุง ุงูุฃูุฑ ูุง ูุณุชุญู ูู ูุฐุง ุงูุนูุงุก ุ ูุฃูู  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุต</a> ุงููุนูุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุถูุญ ุนูู</a> ุฃู ูุซู ูุฐู ุงูุฏุนูุฉ ุชุคุฏู ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ (ุงูุธุฑ ุงูููุฑุฉ 1). <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cf7/7d6/856/cf77d6856666f6a1529a1744832bd5bf.png" alt="ุงูุดูู 2"></div><br><br>  ูุง ูุฒุงู ุชูุฑูุฑ ุงููุญูู ูุญุชูู ุนูู ุฃูุซูุฉ ูุนูููุฉ ุบูุฑ ุตุญูุญุฉ ูุน ูุคุดุฑุงุช ูุฌุฏุชูุง ูู Amazon FreeRTOS ุ ููููู ุฃุนุชูุฏ ุฃู ุงูุฃูุซูุฉ ุงูููุฏูุฉ ูุงููุฉ ุจุงููุนู ูุฅุธูุงุฑ ูุฏุฑุงุช PVS-Studio ูู ุงูุชุดุงู ูุซู ูุฐู ุงูุฃุฎุทุงุก.  ุงููุธุฑ ูู ุดูุก ุฌุฏูุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุตุญูุญ! = 1 </h3><br>  ุงูุนุฏูุฏ ูู ุงูุฃุฎุทุงุก ุงูุชู ูุฌุฏุชูุง ูุงูุช ูุฑุชุจุทุฉ ุจููุท ูุงุญุฏ ุ ูุงูุฐู ุ ููุฃุณู ุ ุบุงูุจุงู ูุง ูุชู ูุณูุงูู. <br><br>  ุงูุญูููุฉ ูู ุฃู ููุน <i>bool</i> (ูู C ++) ูุฎุชูู ุนู ููุน <i>BOOL</i> (ูุณุชุฎุฏู ุนุงุฏุฉู ูู C).  ุงูุฃูู ูููู ุฃู ูุญุชูู ููุท ุนูู <i>ุตูุงุจ</i> ุฃู <i>ุฎุทุฃ</i> .  ูุงูุซุงูู ูู typedef ูุจุนุถ ุฃููุงุน ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ( <i>int</i> ุ <i>ุทูููุฉ</i> ุ ุฅูุฎ).  ุจุงููุณุจุฉ ูู ุ "false" ูู ุงููููุฉ <i>0</i> ุ ู "true" ูู ุฃู ูููุฉ ุบูุฑ ุงูุตูุฑ. <br><br>  ูุธุฑูุง ูุนุฏู ูุฌูุฏ ููุน ููุทูู ูุฏูุฌ ูู C ุ ูุชู ุชุนุฑูู ูุฐู ุงูุซูุงุจุช ููุฑุงุญุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> FALSE 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TRUE 1</span></span></code> </pre> <br>  ุงูุขู ุงููุธุฑ ูู ูุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mbedtls_hardware_poll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* output, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> len, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">* olen)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lStatus = MBEDTLS_ERR_ENTROPY_SOURCE_FAILED; HCRYPTPROV hProv = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Unferenced parameter. */</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)data; <span class="hljs-comment"><span class="hljs-comment">/* * This is port-specific for the Windows simulator, * so just use Crypto API. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == CryptAcquireContextA( &amp;hProv, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == CryptGenRandom(hProv, len, output)) { lStatus = <span class="hljs-number"><span class="hljs-number">0</span></span>; *olen = len; } CryptReleaseContext(hProv, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lStatus; }</code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V676 [CWE-253] ูู ุงูุฎุทุฃ ููุงุฑูุฉ ูุชุบูุฑ ููุน BOOL ูุน TRUE.  aws_entropy_hardware_poll.c 48 </li><li style=";text-align:right;direction:rtl">  V676 [CWE-253] ูู ุงูุฎุทุฃ ููุงุฑูุฉ ูุชุบูุฑ ููุน BOOL ูุน TRUE.  ุงูุชุนุจูุฑ ุงูุตุญูุญ ูู: 'FALSE! = CryptGenRandom (hProv ุ len ุ ุงูุฅุฎุฑุงุฌ)'.  aws_entropy_hardware_poll.c 51 </li></ul><br>  ูุฌุฏุช ุฎุทุฃุ  ููู :) ูุธุงุฆู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i>CryptAcquireContextA</i></a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i>CryptGenRandom</i></a> ูู ูุธุงุฆู ููุงุณูุฉ ูู ุฑุฃุณ <i>wincrypt.h</i> .  ุฅุฐุง ูุฌุญุช ุ ูุฅููุง ุชูุฑุฌุน ูููุฉ ุบูุฑ ุตูุฑูุฉ.  ุฃุคูุฏ - <i>ุบูุฑ ุงูุตูุฑ</i> .  ูุฐูู ุ ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูููู ุฃู ุชููู ูุฐู ุฃู ูููุฉ ุบูุฑ ุงูุตูุฑ: <i>1</i> ุ <i>314</i> ุ <i>42</i> ุ <i>420</i> . <br><br>  ุนูู ูุง ูุจุฏู ุ ูู ูููุฑ ุงููุจุฑูุฌ ุงูุฐู ูุชุจ ุงููุธููุฉ ูู ุงููุซุงู ูู ุฐูู ุ ููุชูุฌุฉ ูุฐูู ุ ุชุชู ููุงุฑูุฉ ุงูููู ุงูุชู ุชู ุงูุญุตูู ุนูููุง ุจุงููุญุฏุฉ. <br><br>  ูุน ูุง ูู ุงูุงุญุชูุงู ุงูุดุฑุท <i>TRUE == CryptGenRandom (....)</i> ูู ูุชุญููุ  ูู ุงูุตุนุจ ุงูููู.  ุฑุจูุง ุชููู <i>CryptGenRandom</i> ุจุฅุฑุฌุงุน ูุญุฏุฉ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฃูุซุฑ ูู ุงูููู ุงูุฃุฎุฑู ุ ูุฑุจูุง ุชุฑุฌุน ุฏุงุฆููุง ูุญุฏุฉ ูุงุญุฏุฉ ููุท.  ูุง ูููููุง ุฃู ูุนุฑู ุนูู ูุฌู ุงููููู: ุชูููุฐ ูุฐู ุงููุธููุฉ ุงูุชุดููุฑ ูุฎูู ุนู ุฃุนูู ุงููุจุฑูุฌูู ุงูุจุดุฑ :) <br><br>  ูู ุงูููู ุฃู ูุชุฐูุฑ ุฃู ูุฐู ุงูููุงุฑูุงุช ูุฏ ุชููู ุฎุทูุฑุฉ.  ูุจุฏูุงู ูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TRUE == GetBOOL())</code> </pre> <br>  ุงุณุชุฎุฏู ุฎูุงุฑูุง ุฃูุซุฑ ุฃูุงููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FALSE != GetBOOL())</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ูุถุงูุง ุงูุชุญุณูู </h3><br>  ุงุฑุชุจุทุช ุงูุนุฏูุฏ ูู ุชุญุฐูุฑุงุช ุงููุญูู ุจุจููุงุช ุงูุชุดุบูู ุงูุจุทูุก.  ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _IotHttpsDemo_GetS3ObjectFileSize(....) { .... pFileSizeStr = <span class="hljs-built_in"><span class="hljs-built_in">strstr</span></span>(contentRangeValStr, <span class="hljs-string"><span class="hljs-string">"/"</span></span>); .... }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V817 ูุนุชุจุฑ ุงูุจุญุซ ุนู ุญุฑู "/" ุฃูุซุฑ ูุนุงููุฉ ูู ุงูุจุญุซ ุนู ุณูุณูุฉ.  iot_demo_https_common.c 205 <br><br>  ุจุงุฎุชุตุงุฑ ููุงุถุญ ุ ุฃููุณ ูุฐููุ  ูุชู ุงุณุชุฎุฏุงู ูุธููุฉ <i>strstr</i> ููุง ููุจุญุซ ุนู ุญุฑู ูุงุญุฏ ููุท ุ ูุงูุฐู ูุชู ุชูุฑูุฑู ุฅูู ุงููุนููุฉ ูุณูุณูุฉ (ูุชู ุชุถูููู ูู ุนูุงูุงุช ุงูุชุจุงุณ ูุฒุฏูุฌุฉ). <br><br>  ูููู ุชุญุณูู ูุฐุง ุงูููุงู ุนู ุทุฑูู ุงุณุชุจุฏุงู <i>strstr</i> ุจู <i>strchr</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _IotHttpsDemo_GetS3ObjectFileSize(....) { .... pFileSizeStr = <span class="hljs-built_in"><span class="hljs-built_in">strchr</span></span>(contentRangeValStr, <span class="hljs-string"><span class="hljs-string">'/'</span></span>); .... }</code> </pre> <br>  ุซู ุงูุจุญุซ ุณูู ุชุนูู ุจุดูู ุฃุณุฑุน ููููุง.  ุชุงูู ุ ูููู ูุทููุฉ. <br><br>  ูุฐู ุงูุชุญุณููุงุช ุฌูุฏุฉ ุ ุจุงูุทุจุน ุ ููุฏ ูุฌุฏ ุงููุญูู ููุงููุง ุขุฎุฑ ูููู ุชุญุณููู ุจุดูู ููุญูุธ ุฃูุซุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vRunOTAUpdateDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; ; ) { .... xConnectInfo.cleanSession = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; xConnectInfo.clientIdentifierLength = (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span>)<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(clientcredentialIOT_THING_NAME); xConnectInfo.pClientIdentifier = clientcredentialIOT_THING_NAME; .... } }</code> </pre> <br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V814 ุงูุฎูุงุถ ุงูุฃุฏุงุก.  ุชู ุงุณุชุฏุนุงุก ุงููุธููุฉ "strlen" ุนุฏุฉ ูุฑุงุช ุฏุงุฎู ุฌุณู ุงูุญููุฉ.  aws_iot_ota_update_demo.c 235 <br><br>  Hmmm ... ุฏุงุฎู ุงูุญููุฉ ุ ูู ูู ุชูุฑุงุฑ ุ ูุชู ุงุณุชุฏุนุงุก <i>strlen</i> ุ ูุงูุฐู ูููู ูู ูู ูุฑุฉ ุจุญุณุงุจ ุทูู ููุณ ุงูุฎุท.  ููุณุช ุงูุนูููุฉ ุงูุฃูุซุฑ ููุงุกุฉ :) <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุนุฑูู <i>clientcredentialIOT_THING_NAME</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * @brief Host name. * * @todo Set this to the unique name of your IoT Thing. */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> clientcredentialIOT_THING_NAME </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span></span></code> </pre> <br>  ุชุชู ูุทุงูุจุฉ ุงููุณุชุฎุฏู ุจุฅุฏุฎุงู ุงุณู ุงูุฌูุงุฒ ุงูุฎุงุต ุจู ููุง.  ุจุดูู ุงูุชุฑุงุถู ุ ุฅูู ูุงุฑุบ ุ ููู ูุฐู ุงูุญุงูุฉ ุ ูู ุดูุก ุนูู ูุง ูุฑุงู.  ูููู ูุงุฐุง ูู ุฃุฑุงุฏ ุงููุณุชุฎุฏู ุฅุฏุฎุงู ุงุณู ุทููู ูุฌููู ููุงูุ  ุนูู ุณุจูู ุงููุซุงู ุ ุฃุญุจ ุฃู ุฃุณูู ุจูุงุช ุฃููุงุฑู " <i>ุขูุฉ ุงููููุฉ ุงูุนุงุทููุฉ ูุงููุชุทูุฑุฉ BarBarista-N061E The Ultimate Edition</i> ".  ูู ููููู ุฃู ุชุชุฎูู ูุง ุณูููู ููุงุฌุฃุชู ุฅุฐุง ุจุฏุฃุช ุจุนุฏ ุฐูู ุขูุฉ ุงููููุฉ ุงูุฌูููุฉ ูู ุงูุนูู ุจุดูู ุฃุจุทุฃ ููููุงูุ  ุงุถุทุฑุงุจ! <br><br>  ูุฅุตูุงุญ ุงูุฎุทุฃ ุ ูุฌุจ ุฅุฎุฑุงุฌ <i>strlen</i> ูู ุฌุณู ุงูุญููุฉ.  ุจุนุฏ ูู ุดูุก ุ ูุง ูุชุบูุฑ ุงุณู ุงูุฌูุงุฒ ุฃุซูุงุก ุชุดุบูู ุงูุจุฑูุงูุฌ.  Ehhh ุ ููุง ุณูููู <i>constexpr</i> ูู C ++ ... <br><br>  ุญุณูุง ุ ุญุณูุง ุ ุฃูุง ุฃุนุชุฑู: ููุช ููุง ุณูููุฉ ููููุง.  ููุง ูุงุญุธ ุฒูููู Andrei Karpov ุ ูุฅู ุงููุชุฑุฌููู ุงููุนุงุตุฑูู ูุนุฑููู ูุง <i>ูู ุงูุณูุงุณุฉ</i> ุ ููุงุญุธ ุดุฎุตูุงู ููู ูุณุชุฎุฏููู ุจุจุณุงุทุฉ ุงูุซุงุจุช ูู ุงูููุฏ ุงูุซูุงุฆู ุฅุฐุง ููููุง ุฃู ุทูู ุงูุณูุณูุฉ ูุง ูููู ุฃู ูุชุบูุฑ.  ูุฐูู ููุงู ุงุญุชูุงู ูุจูุฑ ูู ูุถุน ุงูุฅูุดุงุก ูุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ ุ ุจุฏูุงู ูู ุงูุญุณุงุจ ุงูุญูููู ูุทูู ุงูุณูุณูุฉ ุ ุณูุชู ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู ูููุฉ ูุญุณูุจุฉ ูุณุจููุง.  ููุน ุฐูู ุ ูุง ูุนูู ูุฐุง ุฏุงุฆููุง ุ ูุฐุง ูุฅู ูุชุงุจุฉ ูุฐู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุณุช ููุงุฑุณุฉ ุฌูุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุถุน ูููุงุช ุนู ููุณุฑุง </h2><br>  ูุญุชูู ูุญูู PVS-Studio ุนูู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูููุงุนุฏ ุงูุชู ุชุณูุญ ูู ุจุงูุชุญูู ูู ุงูููุฏ ุงูุฎุงุต ุจู ููุชุฃูุฏ ูู ุงูุชุซุงูู ููุนุงููุฑ MISRA C ู MISRA C ++.  ูุง ูู ูุฐู ุงููุนุงููุฑุ <br><br>  MISRA ูู ูุนูุงุฑ ุงูุชุฑููุฒ ููุฃูุธูุฉ ุงููุฏูุฌุฉ ุนุงููุฉ ุงูุงุณุชุฌุงุจุฉ.  ุฃูู ูุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูููุงุนุฏ ูุงููุจุงุฏุฆ ุงูุชูุฌูููุฉ ุงูุตุงุฑูุฉ ููุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฅุนุฏุงุฏ ุนูููุฉ ุงูุชุทููุฑ.  ููุงู ุนุฏุฏ ุบูุฑ ูููู ูู ูุฐู ุงูููุงุนุฏ ุ ููู ูุง ุชูุฏู ููุท ุฅูู ุงููุถุงุก ุนูู ุงูุฃุฎุทุงุก ุงูุฎุทูุฑุฉ ุ ูููู ุฃูุถูุง ุฅูู "ุฑูุงุฆุญ ุงูููุฏ" ุงููุฎุชููุฉ ุ ููุฐูู ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฃูุซุฑ ูุงุจููุฉ ููููู ูุงููุฑุงุกุฉ. <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุงุชุจุงุน ูุนูุงุฑ MISRA ูุง ูุณุงุนุฏ ููุท ูู ุชุฌูุจ ุงูุฃุฎุทุงุก ูููุงุท ุงูุถุนู ุ ูููู ุฃูุถูุง ุจุดูู ูุจูุฑ - ุฅูู ุญุฏ ูุจูุฑ!  - ุชูููู ุงุญุชูุงููุฉ ุญุฏูุซูุง ูู ุงูููุฏ ุงูููุฌูุฏ. <br><br>  ูุณุชุฎุฏู MISRA ูู ุงูุตูุงุนุงุช ุงูุฌููุฉ ูุงูุทุจูุฉ ูุงูุนุณูุฑูุฉ - ุญูุซ ุชุนุชูุฏ ุญูุงุฉ ุงูุจุดุฑ ุนูู ุฌูุฏุฉ ุงูุจุฑุงูุฌ ุงููุฏูุฌุฉ. <br><br>  ุนูู ูุง ูุจุฏู ุ ูุฏุฑู ูุทูุฑู Amazon FreeRTOS ูุฐุง ุงููุนูุงุฑ ุ ููุชุจุนููู ูู ูุนุธู ุงูุฃุญูุงู.  ูุฐุง ุตุญูุญ: ุฅุฐุง ููุช ุชูุชุจ ูุธุงู ุชุดุบูู ุนุฑูุถ ุงููุงุนุฏุฉ ููุฃูุธูุฉ ุงููุฏูุฌุฉ ุ ูุนููู ุงูุชูููุฑ ูู ุงูุฃูุงู. <br><br>  ููุน ุฐูู ุ ููุฏ ูุฌุฏุช ุนุฏุฏูุง ููููุงู ูู ุงูุงูุชูุงูุงุช ููุนูุงุฑ MISRA.  ูู ุฃูุฏู ููุง ุฃูุซูุฉ ูููุงุนุฏ ูุซู "ูุง ุชุณุชุฎุฏู ุงูุงุชุญุงุฏ" ุฃู "ูุฌุจ ุฃู ูููู ูููุธููุฉ ุนุงุฆุฏ ูุงุญุฏ ููุท ูู ููุงูุฉ ุงูุฌุณู" - ูุณูุก ุงูุญุธ ุ ููู ููุณุช ูุฐููุฉ ุ ูุซู ูุนุธู ููุงุนุฏ MISRA.  ูู ุงูุฃูุถู ุฃู ุฃูุฏู ููู ุฃูุซูุฉ ุนูู ุงูุงูุชูุงูุงุช ุงูุชู ูุฏ ุชุคุฏู ุฅูู ุนูุงูุจ ูุฎููุฉ. <br><br>  ููุจุฏุฃ ูุน ูุญุฏุงุช ุงููุงูุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> FreeRTOS_ms_to_tick(ms) ( ( ms * configTICK_RATE_HZ + 500 ) / 1000 )</span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SOCKETS_htonl( ulIn ) ( ( uint32_t ) \ ( ( ( ulIn &amp; 0xFF ) </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; 24 ) | ( ( ulIn &amp; 0xFF00 ) &lt;&lt; 8 ) \ | ( ( ulIn &amp; 0xFF0000 ) &gt;&gt; 8 ) | ( ( ulIn &amp; 0xFF000000 ) &gt;&gt; 24 ) ) )</span></span></span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LEFT_ROTATE( x, c ) ( ( x </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; c ) | ( x &gt;&gt; ( 32 - c ) ) )</span></span></span></span></code> </pre> <br>  <b>ุชุญุฐูุฑุงุช PVS-Studio:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ "ูููู ุซุงููุฉ" ูู ุงููุงูุฑู "FreeRTOS_ms_to_tick".  FreeRTOS_IP.h 201 </li><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ 'ulIn' ูู ุงููุงูุฑู 'SOCKETS_htonl'.  iot_secure_sockets.h 512 </li><li style=";text-align:right;direction:rtl">  V2546 [MISRA C 20.7] ูุฌุจ ูุถุน ุงููุงูุฑู ููุนููุงุชู ุจูู ููุณูู.  ุถุน ูู ุงุนุชุจุงุฑู ูุญุต ุงููุนููุงุช 'x' ู 'c' ูููุงูุฑู 'LEFT_ROTATE'.  iot_device_metrics.c 90 </li></ul><br>  ูุนู ุ ูุฐุง ุจุงูุถุจุท ูุง ููุฑุช ุจู.  ูุง ูุชู ุงูุชูุงู ูุนููุงุช ูุญุฏุงุช ุงููุงูุฑู ูุฐู ุจูู ููุณูู.  ุฅุฐุง ูุงู ุดุฎุต ูุง ููุชุจ ุนู ุทุฑูู ุงูุฎุทุฃ ุดูุก ูู ูุฐุง ุงููุจูู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">val = LEFT_ROTATE(A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span>, B);</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุณูุชู ูุชุญ ูุงูุฑู "call" ูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">val = ( ( A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; B ) | ( A[i] | <span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt; ( <span class="hljs-number"><span class="hljs-number">32</span></span> - B ) ) );</code> </pre> <br>  ุชุฐูุฑ ุฃููููุงุช ุงูุนูููุงุชุ  ุฃููุงู ุ ูุชู ุฅุฌุฑุงุก ุชุญูู bitwise ุ ูููุท ุจุนุฏ ุฐูู ูููู "bitwise" ุฃู "bit".  ูุฐูู ุ ุณูุชู ุงูุชูุงู ููุทู ุงูุจุฑูุงูุฌ.  ูุซุงู ุฃุจุณุท: ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุชู ุชูุฑูุฑ ุงูุชุนุจูุฑ " <i>x + y</i> " ุฅูู ุงููุงูุฑู <i>FreeRTOS_ms_to_tick</i> ุ  ุฃุญุฏ ุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ ูู MISRA ูู ููุน ุญุฏูุซ ูุซู ูุฐู ุงูุญุงูุงุช. <br><br>  ูุฏ ูุนุชุฑุถ ุดุฎุต ูุง: "ุฅุฐุง ูุงู ูุฏูู ูุจุฑูุฌูู ูุง ูุนุฑููู ุฐูู ุ ููู ูููุฐู ุฃู ูุนูุงุฑ!" ููู ุฃูุงูู ุนูู ุฐูู.  ุงููุจุฑูุฌูู ูู ุฃูุถูุง ุฃุดุฎุงุต ุ ูุจุบุถ ุงููุธุฑ ุนู ูุฏู ุฎุจุฑุฉ ุฃู ุดุฎุต ุ ููููู ุฃูุถูุง ุฃู ูุชุนุจ ููุฑุชูุจ ุฎุทุฃ ูู ููุงูุฉ ููู ุงูุนูู.  ูุฐุง ูู ุฃุญุฏ ุงูุฃุณุจุงุจ ุงูุชู ุชูุตู MISRA ุจุดุฏุฉ ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงูุชุญููู ุงูุขูู ููุชุญูู ูู ุตุญุฉ ุงููุดุฑูุน ููุงูุชุซุงู ูููุนุงููุฑ. <br><br>  ุฃูุชูู ุฅูู ูุทูุฑู Amazon FreeRTOS: ูุฌุฏุช PVS-Studio 12 ุฃูุซุฑ ูู ูุญุฏุงุช ุงููุงูุฑู ุบูุฑ ุงูุขููุฉ ุ ูุฐูู ุฃูุช ุฃูุซุฑ ุญุฐุฑุง ูุนูู :) <br><br>  ุงูุชูุงู MISRA ุขุฎุฑ ูุซูุฑ ููุงูุชูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @brief Callback for an asynchronous request to notify * that the response is complete. * * @param[in] 0pPrivData - User private data configured * with the HTTPS Client library request configuration. * @param[in] respHandle - Identifier for the current response finished. * @param[in] rc - Return code from the HTTPS Client Library * signaling a possible error. * @param[in] status - The HTTP response status. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _responseCompleteCallback(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* pPrivData, IotHttpsResponseHandle_t respHandle, IotHttpsReturnCode_t rc, <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> status) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>* pUploadSuccess = (<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>*)pPrivData; <span class="hljs-comment"><span class="hljs-comment">/* When the remote server response with 200 OK, the file was successfully uploaded. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status == IOT_HTTPS_STATUS_OK) { *pUploadSuccess = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { *pUploadSuccess = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* Post to the semaphore that the upload is finished. */</span></span> IotSemaphore_Post(&amp;(_uploadFinishedSem)); }</code> </pre> <br>  ููููู ุฃู ุชุฌุฏ ุงูุฎุทุฃ ููุณูุ <br><br>  <b>ุชุญุฐูุฑ PVS-Studio:</b> V2537 [MISRA C 2.7] ูุฌุจ ุฃูุง ุชุญุชูู ุงููุธุงุฆู ุนูู ูุนููุงุช ุบูุฑ ูุณุชุฎุฏูุฉ.  ุงููุธุฑ ูู ูุญุต ุงููุนููุฉ: 'rc'.  iot_demo_https_s3_upload_async.c 234 <br><br>  ูููู ูุธุฑุฉ ูุงุญุตุฉ: ูุง ูุชู ุงุณุชุฎุฏุงู ุงููุนููุฉ <i>rc</i> ูู ุฃู ููุงู ูู ุงูุฌุณู ูุธููุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูุชุนููู ุนูู ุงููุธููุฉ ุ ูููุชุจ ุจุดูู ุตุฑูุญ ุฃู ูุฐู ุงููุนููุฉ ูู ุฑูุฒ ุงูุฅุฑุฌุงุน ููุธููุฉ ุฃุฎุฑู ุ ูุฃูู ูููู ุฃู ูุดูุฑ ุฅูู ูุฌูุฏ ุฎุทุฃ.  ุซู ููุงุฐุง ูุง ุชุชู ูุนุงูุฌุฉ ูุฐู ุงููุนููุฉ ุจุฃู ุดูู ูู ุงูุฃุดูุงูุ  ูู ุงููุงุถุญ ุฃู ููุงู ุฎุทุฃ ูุง ููุง. <br><br>  ููุน ุฐูู ุ ุญุชู ุจุฏูู ูุฐู ุงูุชุนูููุงุช ุ ุบุงูุจูุง ูุง ุชุดูุฑ ุงููุนููุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ุฅูู ููุทู ุงูุจุฑูุงูุฌ ุงููุนุทูุจ.  ุฎูุงู ุฐูู ุ ููุงุฐุง ูู ุจุญุงุฌุฉ ูู ุงูุชูููุน ูุธููุฉุ <br><br>  ููุฏ ูุฏูุช ููุง ูุธููุฉ ุตุบูุฑุฉ ููุงุณุจุฉ ุชูุงููุง ููุญุตูู ุนูู ูุซุงู ูู ุงูููุงู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุฏ ูุฌุฏุช 10 ูุนููุงุช ุฃูุซุฑ ุบูุฑ ุงููุณุชุฎุฏูุฉ.  ูุชู ุงุณุชุฎุฏุงู ุงููุซูุฑ ูููุง ูู ูุธุงุฆู ุฃูุจุฑ ุ ูุงูุนุซูุฑ ุนูููุง ููุณ ูู ุฃุณูู ุดูุก. <br><br>  ูู ุงููุดููู ููู ุฃูู ูู ูุชู ุงูุนุซูุฑ ุนูููู ูู ูุจู.  ูู ุงููุงูุน ุ ูููู ูููุชุฑุฌููู ุงูุชุดุงู ูุซู ูุฐู ุงูุญุงูุงุช ุจุณูููุฉ. <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b80/6c7/bb9/b806c7bb94c335ce2712e9b46cffc560.png" alt="ุงูุดูู 1"></div><br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ูู ุชูู ูุฐู ูู ุฌููุน ุงููุดููุงุช ุงูุชู ูุฌุฏูุง ุงููุญูู ุ ููู ุงูููุงูุฉ ูุงูุช ูุจูุฑุฉ ุฌุฏูุง ุจุงููุนู.  ุฃุชููู ุฃู ูุชููู ูุทูุฑู Amazon FreeRTOS ูู ุฅุตูุงุญ ุจุนุถ ุฃูุฌู ุงููุตูุฑ ุ ูุฑุจูุง ูุฑูุฏูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌุฑุจุฉ PVS-Studio</a> ุจููุฑุฏูู.  ูุจูุฐู ุงูุทุฑููุฉ ุ ุณูููู ูู ุงููููู ุฏุฑุงุณุฉ ุงูุชุญุฐูุฑุงุช ุจุดูู ุฃูุซุฑ ุดููููุง ุ ุจู ุฅู ุงูุนูู ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ ูุฑูุญุฉ ุฃุณูู ุจูุซูุฑ ูู ุงููุธุฑ ูู ุชูุฑูุฑ ูุตู. <br><br>  ุดูุฑุง ููุฑุงุกุฉ ููุงูุงุชูุง!  ูุฑุงูู ูู ุงูุนุฏุฏ ุงููุงุฏู: ุฏ <br><br>  ููุญูุธุฉ: ููุฏ ุญุฏุซ ุฃู ููุดุฑุช ูุฐู ุงูููุงูุฉ ูู 31 ุฃูุชูุจุฑ.  ูุฐูู ุ ุฃุชููู ููุฌููุน ุนูุฏ ุณุนูุฏ! <br><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุดุงุฑูุฉ ูุฐุง ุงูููุงู ูุน ุฌูููุฑ ูุงุทู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุ ููุฑุฌู ุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุงูุฎุงุต ุจุงูุชุฑุฌูุฉ: George Gribkov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุงุกู ุนูู ุทูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar473972/">https://habr.com/ru/post/ar473972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar473956/index.html">ูุนูููุงุช ุณุฑูุฉ ูู ุดุฑูุฉ ูุงุชู ุชุงุฌุฑ ูุฎุฏุฑุงุช</a></li>
<li><a href="../ar473958/index.html">ูุฏู ุงููุงุจุงูููู ูู NICT ูุฌููุนุฉ ููููุฉ ุนุงููุฉ ุจุนุฑุถ ูุทุงู ูุฏุฑู 1 Pbit / s</a></li>
<li><a href="../ar473960/index.html">ุงุณุชุฑุงุชูุฌูุงุช ุชุนุฑูุจ ุงููุญุชูู</a></li>
<li><a href="../ar473962/index.html">ูุถุน ุงูุธูุงู ูู ุงูุขู ูู ูู ููุงู. ูู ูู ูููุฏ ุฌุฏุงุ (ูู ููุงูุฉ ุงูุงุณุชุทูุงุน ุงููุงุญู)</a></li>
<li><a href="../ar473966/index.html">ุจูุงุกู ุนูู ุทูุจ ุงููุทูุฑูู ุงููุถูููู: ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู Amazon FreeRTOS</a></li>
<li><a href="../ar473974/index.html">ุฅูุชุฑููู 19 - ุณูุนูุฏ ูุคุชูุฑ ุญูู ุฃุชูุชุฉ ุงูุงุชุตุงูุงุช ูู Voximplant ูู 14 ููููุจุฑ</a></li>
<li><a href="../ar473976/index.html">AWS Elasticsearch: ุงูููุชุฌ ุงููุนูุจ ุจุดูู ุฃุณุงุณู</a></li>
<li><a href="../ar473978/index.html">ูุซู ูุฐุง ุงูุฃูู ุ ูุซู ูุฐุง ุงูุฃูู ุ ุชุณุฌูู ุงูููุฏูุฉ ูุฎุฏูุฉ 2: 0</a></li>
<li><a href="../ar473980/index.html">ุงูุชูููููุฌูุง ูุงูุนุงูู ุงูุญูููู: 4 ุดุฑูุงุช ูุงุดุฆุฉ ุชุนูู ุนูู ุชุบููุฑ ูุณุชูุจู ุงูุชุตููู ุงูุฏุงุฎูู</a></li>
<li><a href="../ar473982/index.html">ููุญูุธุฉ: ุฅูุชุฑูุช ุงูุฃุดูุงุกุ ุงูุฌุฒุก 3: SCEF - ูุงูุฐุฉ ูุตูู ูุงุญุฏุฉ ุฅูู ุฎุฏูุงุช ุงููุดุบู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>