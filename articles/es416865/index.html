<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëéüèø üòá üèÜ Dise√±o retro para la primera consola port√°til del lejano 1979 üôä ‚õπüèº üõÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En 1974, Texas Instruments lanz√≥ los primeros microcontroladores de 4 bits de la familia TMS1000, e Intel en 1976 comenz√≥ la producci√≥n de microcontro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dise√±o retro para la primera consola port√°til del lejano 1979</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416865/"><img src="https://habrastorage.org/webt/41/yf/ic/41yfickhp7ywna9ls3tj4tigy24.jpeg"><br><br>  En 1974, Texas Instruments lanz√≥ los primeros microcontroladores de 4 bits de la familia TMS1000, e Intel en 1976 comenz√≥ la producci√≥n de microcontroladores de 8 bits de su famosa serie MCS-48.  Y entonces comenz√≥. <br><a name="habracut"></a><br>  Debido al bajo costo y la autosuficiencia de los microcontroladores (entonces se los llam√≥ directamente, un microordenador de un solo chip), los dispositivos electr√≥nicos de consumo fueron mucho m√°s sabios, y su n√∫mero creci√≥ m√°s que nunca.  Con el advenimiento de los microcontroladores, surgi√≥ una clase de dispositivos como los juegos electr√≥nicos port√°tiles, la escala del "desastre" se puede estimar en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este enlace</a> .  Entre toda esta variedad de juegos tempranos, uno que discutir√© en esta publicaci√≥n se destac√≥: este es Milton Bradley Microvision, el primer juego electr√≥nico port√°til con cartuchos reemplazables, que utiliz√≥ los dos microcontroladores anteriores.  Tambi√©n intentar√© detenerme en los detalles del desarrollo de esta consola. <br><br><h3>  Descripci√≥n general </h3><br> <a href=""><img src="https://habrastorage.org/webt/9_/vz/pz/9_vzpzmfre7fck4ey-suxwkrgna.jpeg"></a> <br><br>  Microvision fue lanzado en los Estados Unidos hace casi cuarenta a√±os, en 1979.  En total, se vendieron 12 cartuchos con juegos para ella, entre los que se encontraban - que se completaban con la consola Block Buster (an√°logo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Breakout</a> ), deportes - Bowling and Baseball, una versi√≥n electr√≥nica del famoso juego de mesa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Connect Four</a> , Pinball y otros.  La mayor√≠a de los juegos se pueden evaluar en el emulador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MVEM</a> , que se realiz√≥ sobre la base de una interesante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie de publicaciones</a> , de las cuales tambi√©n aprend√≠ muchas cosas √∫tiles.  Aqu√≠ no me detendr√© en detalle en la descripci√≥n de los juegos originales de la consola, pero me referir√© inmediatamente a su mundo interior. <br><br> <a href=""><img src="https://habrastorage.org/webt/gr/gu/lb/grgulbct_3jmlu9830qx2upfble.jpeg"></a> <br><br>  Una caracter√≠stica importante de la consola es una pantalla LCD de 2 pulgadas con una resoluci√≥n de 16x16 p√≠xeles.  Bastante primitivo para los est√°ndares actuales, pero en comparaci√≥n con los conjuntos de LED y los indicadores luminiscentes al vac√≠o utilizados en los juegos port√°tiles, la pantalla LCD de matriz fue un paso bastante progresivo.  Adem√°s de Microvision, en el mismo a√±o, una serie de juegos electr√≥nicos Mego Mini-Vid con una pantalla similar apareci√≥ a la venta, aunque 13x20.  Aparentemente, en ese momento, estos eran los √∫nicos dispositivos a la venta con LCD de matriz de tal resoluci√≥n. <br><br><img src="https://habrastorage.org/webt/ga/uh/tv/gauhtvjy3-ltagudiptipvvl6lm.jpeg"><br><br>  La pantalla est√° controlada por el chip Hughes SCUS0488; este es un controlador de matriz LCD.  El controlador est√° alimentado por un estabilizador de voltaje negativo UA79MG con un par de condensadores y resistencias, que es la base de elementos m√°s simple. <br> <a href=""><img src="https://habrastorage.org/webt/ws/li/pb/wslipbri9usvwd5o8eztgddsnry.jpeg"></a> <br><br>  En la carcasa de la consola tambi√©n se encuentran los controles: una matriz de botones de 4x3 y una resistencia variable de 10kŒ© como una paleta.  Para la reproducci√≥n de sonido hay una piezodin√°mica. <br><br>  Lo m√°s importante es por qu√© Microvision ha hecho historia, y todos se han olvidado del Mini-Vid mencionado anteriormente, usando cartuchos reemplazables. <br><br> <a href=""><img src="https://habrastorage.org/webt/12/ke/qw/12keqw-kmdbgoo85q50i2yunnjc.jpeg"></a> <br><br>  Externamente, el cartucho era una parte superior desmontable de la carcasa.  En el centro del cartucho hab√≠a una ventana de pl√°stico que cubr√≠a la pantalla, en la que se aplicaban elementos de color e inscripciones individuales para cada juego.  Debajo estaban los agujeros para los botones cubiertos por una pel√≠cula delgada, sobre la cual se aplicaron las firmas, y para cada juego, se hicieron agujeros solo para los botones utilizados.  Probablemente, esta disposici√≥n del cartucho, seg√∫n los autores, hizo posible maximizar la adaptaci√≥n de la consola a un juego espec√≠fico. <br><br> <a href=""><img src="https://habrastorage.org/webt/ub/od/ou/ubodouuncl6f7az9o4v8n2slwuq.jpeg"></a> <br>  <i>Tablero de juego Block Buster, en el estuche y en la parte posterior</i> <br><br>  La parte electr√≥nica del cartucho se construy√≥ en uno de los dos microcontroladores: TMS1100 o Intel 8021 con el arn√©s necesario.  Colocar el "cerebro" de una consola en un cartucho puede parecer una decisi√≥n bastante extra√±a, pero solo te permite sobrevivir con dos fichas por juego.  Adem√°s, tambi√©n agreg√≥ versatilidad.  Al mismo tiempo, el precio del cartucho, aparentemente debido a la presencia del microcontrolador, no aument√≥ mucho (por ejemplo, el costo de 8021 en lotes grandes en 1976 fue de aproximadamente $ 3). <br><br>  Todo esto aliment√≥ una o dos coronas conectadas en paralelo (8021 era bastante voraz).  Adem√°s, en versiones posteriores, se eliminaron los contactos para la segunda bater√≠a y se recomend√≥ utilizar el espacio restante para una bater√≠a de repuesto.  Aparentemente, esto se debi√≥ al hecho de que los usuarios a menudo confund√≠an la polaridad, obteniendo un cortocircuito bastante peligroso. <br><br><h3>  Empate </h3><br>  Compr√© esta consola antigua para escribir alg√∫n tipo de juego y hacer un cartucho y, si es posible, copiar la base del elemento del original tanto como sea posible. <br>  Pero hay un problema importante: que TMS1100, que Intel 8021 ten√≠a una ROM enmascarada, es decir  programado en la f√°brica durante el proceso de fabricaci√≥n.  Hay una salida para el microcontrolador de Intel: 8021 es una versi√≥n reducida de 8048, que tambi√©n ten√≠a una ROM enmascarada, pero Intel produjo un an√°logo de 8048 con una ROM programable - 8748, tanto en el caso de borrado ultravioleta como m√°s barato una vez programable. <br><br>  Desafortunadamente, la situaci√≥n es mucho peor para el TMS1100: hab√≠a una versi√≥n de depuraci√≥n del chip que funciona con una ROM externa: TMS1098, pero comprarlo ahora, si es posible, es muy dif√≠cil.  Adem√°s, el chip se fabric√≥ en el paquete DIP-64, es enorme en s√≠ mismo y no cabe en la longitud del cartucho, pero tambi√©n se necesita una ROM bastante grande. <br><br>  En general, el 8748 borrable por UV es lo que necesita, y la versi√≥n final del cartucho se puede hacer en una versi√≥n indeleble. <br><br> <a href=""><img src="https://habrastorage.org/webt/kg/gs/jp/kggsjpioqodpscq5i9orcdp_0im.jpeg"></a> <br>  <i>Arriba hay un P8748H programable uno y debajo hay un D8748H borrable por UV</i> <br><br><h3>  Intel 8021 </h3><br>  A continuaci√≥n se muestra una breve descripci√≥n de 8021, no 8748, porque  Usar√© solo funciones truncadas de 8021 para tener solo recursos originalmente establecidos por los desarrolladores de la consola. <br><br>  El subsistema de memoria, como toda la familia MCS-48, se basa en una arquitectura Harvard modificada.  La memoria del programa es una ROM interna de 1024 bytes, la memoria de datos es de 64 bytes de RAM din√°mica. <br><br>  La organizaci√≥n de la RAM se muestra en la siguiente figura: <br><br><img src="https://habrastorage.org/webt/ak/9m/2y/ak9m2y_m9qmrnnwbj8a8f55slf4.png"><br><br>  Las celdas 0‚Äì7 ocupan registros de trabajo direccionados directamente R0 - R7, con R0 y R1 como punteros para el acceso indirecto a todas las celdas RAM.  Las celdas 8-23 se usan para la pila de llamadas de 8 niveles, aunque tambi√©n se pueden usar a trav√©s de R0-R1. <br><br>  El microcontrolador tiene un generador de reloj incorporado, la frecuencia de referencia se establece mediante un cuarzo externo, cadena RC o cadena LC.  Un ciclo de m√°quina dura 10 ciclos, y cada ciclo toma 3 per√≠odos de la frecuencia de referencia.  La frecuencia m√°xima es de 3.58 MHz, mientras que el ciclo de la m√°quina dura 8.38 Œºs.  La frecuencia m√≠nima est√° limitada por las especificaciones de DRAM y es de 600 kHz. <br><br>  8021 contiene dos puertos de 8 bits y uno de 4 bits, que tambi√©n se pueden usar para conectar un expansor de puertos de E / S, chip 8243. Todos los puertos son cuasi-bidireccionales. <br><br>  Adem√°s, el microcontrolador tiene un temporizador / contador incorporado de ocho d√≠gitos.  En el modo de temporizador, el contador T se incrementa en 1 cada 32 ciclos de m√°quina.  En el desbordamiento T, se establece el indicador TF.  En modo contador, los pulsos se cuentan en la entrada de prueba T1. <br><br>  El sistema de comando contiene 64 instrucciones, de las cuales 36 se ejecutan en un ciclo y 28 en dos.  La mayor√≠a de las instrucciones son de un solo byte. <br><br><div class="spoiler">  <b class="spoiler_title">Lista de instrucciones con breves descripciones.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/dy/lw/hd/dylwhdauhna9z62ivd8z2slns-s.png"><br></div></div><br><h3>  Preparaci√≥n </h3><br>  No hubo problemas con la compra de 8748, lo principal es prestar atenci√≥n a que los chips se produjeron utilizando diferentes tecnolog√≠as.  Los primeros NMOP requer√≠an un voltaje de 25 V para el firmware, etiquetado D8748.  A finales de los a√±os 70, estos microcontroladores comenzaron a construirse utilizando la tecnolog√≠a HMOP-E (una versi√≥n mejorada de NMOP de Intel), fueron etiquetados como D8748H y ya requer√≠an 21V.  El mismo voltaje fue requerido por un clon posterior de NEC (mPD8748H).  La √∫nica versi√≥n programable fue etiquetada P8748H. <br><br>  El borrador UV se compr√≥ el chino m√°s simple y m√°s barato con un temporizador mec√°nico, que, como la pr√°ctica ha demostrado, hace frente a su tarea perfectamente (aunque no hay precisi√≥n del temporizador a intervalos cortos).  Borra de manera confiable la ROM de los chips en ~ 2.5 minutos.  M√°s tarde, compr√© una goma de borrar ZAX Quick-EII por un precio simb√≥lico de manos japonesas, ni siquiera s√© en qu√© a√±o es, por el aspecto de principios de los 90.  Utiliza un flash de xen√≥n y borra 8748 en 3 (!) Segundos, literalmente.  Un video (no el m√≠o) con una demostraci√≥n de trabajo se puede ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  El principal problema fue el programador.  El soporte para esta obsoleta familia Intel en programadores modernos est√° disponible solo a un costo de $ 300.  Aunque, hay un Willem aficionado relativamente barato que puede trabajar con el MCS-48 a trav√©s de un adaptador, pero necesita LPT, lo que no me conven√≠a en absoluto.  Tuve que soldarme a m√≠ mismo.  Soy, digamos, un radioaficionado novato, as√≠ que pas√© aproximadamente una semana con √©l, abandonando a uno de los dos 8748 que hab√≠an llegado para entonces (aunque me gusta pensar que originalmente era as√≠).  Tom√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el</a> circuito publicado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠ como</a> base, solo lo adapt√© para Atmega y una alimentaci√≥n de 24V m√°s conveniente.  Todo esto fue soldado en una placa de pruebas: <br><br><img src="https://habrastorage.org/webt/5c/tt/ut/5cttutbzs817thtcpq37vlakkx0.jpeg"><br><br>  Result√≥, por supuesto, bastante feo, y uno de los mosfets funciona hasta el l√≠mite (aunque sea un poco), pero, al final, el programador hizo frente a su tarea y me sirvi√≥ bien. <br><br>  Entonces, todo est√° listo, el firmware de prueba parpadea felizmente con el LED, es hora de hacer un cartucho. <br><br><h3>  Cartucho </h3><br>  La mayor parte de los cartuchos funcion√≥ en el TMS1100, porque  Signetics, que lanz√≥ la licencia Intel 8021 de Intel, no pudo proporcionar el suministro de chip MB requerido.  Incluso algunos juegos que ya estaban escritos para 8021 tuvieron que ser portados al TMS1100.  Esto, por cierto, nos permiti√≥ abandonar el paquete peligroso de dos bater√≠as, porque el consumo del microcontrolador TI fue de solo 0.1W versus 1W para Intel.  Solo tengo uno de los 6 cartuchos con 8021, este es el juego Connect Four, y fue tomado como base. <br><br>  Trat√© de hacer que el tablero fuera lo m√°s similar posible al original, pero, por supuesto, tuve que hacer cambios.  En primer lugar, el tama√±o del chip (DIP-40 versus DIP-28) y un pinout diferente.  En segundo lugar, tuvimos que cambiar las denominaciones en el circuito oscilatorio que establece la frecuencia del reloj, porque  el ciclo de la m√°quina para las versiones HMOS de microcircuitos es de 15 ciclos, y para las versiones MOS que se utilizaron en los cartuchos originales, 30 ciclos.  Por lo tanto, para una autenticidad completa, mi cartucho funcionar√° a 1.25 MHz contra los 2.5 MHz originales, al tiempo que garantiza el mismo rendimiento. <br><br> <a href=""><img src="https://habrastorage.org/webt/bz/9f/zx/bz9fzxh_7-9-djp9yamoeog5tfe.jpeg"></a> <br><br>  En la foto de arriba, las placas de circuito impreso terminadas se ordenaron en China, y mientras estaban encendidas, dibuj√© y grab√© la placa de circuito y ensambl√© tal "complejo de depuraci√≥n": <br> <a href=""><img src="https://habrastorage.org/webt/yh/gx/vn/yhgxvntybge5njn2cw3dppmogrs.jpeg"></a> <br><br>  Finalmente, la parte del hardware est√° lista y puede comenzar a programar. <br><br><h3>  Display </h3><br> <a href=""><img src="https://habrastorage.org/webt/wa/g6/jx/wag6jx-tblcypxvqvgmz-pwau_q.jpeg"></a> <br><br>  En primer lugar, tuve que lidiar con la salida a la pantalla LCD.  Como escrib√≠ anteriormente, fue controlado por el controlador Hughes 0488 mediante multiplexaci√≥n (recientemente se public√≥ un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> interesante sobre esta forma de control LCD en Habr√©).  Es un controlador, no un controlador, por lo que no puede encender un p√≠xel y ocuparse de su negocio, debe actualizar constantemente el contenido de la pantalla con una frecuencia de 30-50 Hz con comandos de bajo nivel. <br><br>  El diagrama de conexi√≥n es el siguiente: <br><br> <a href=""><img src="https://habrastorage.org/webt/ul/ym/rg/ulymrgc1oyensrme_-wjhprv2_u.png"></a> <br><br>  Pinout H0488: <br><br>  <b>Vdd</b> - Potencia (3-8V) <br>  <b>R1-R16</b> - Salidas de control de cadena <br>  <b>C1-C16</b> - Salidas de control de columna <br>  <b>DATA0-DATA3</b> - Bus de datos <br>  <b>! Data Clk</b> - Entrada de reloj de grabaci√≥n de datos <br>  <b>Impulso de</b> enganche: se√±al de estado de distribuci√≥n R0-R15, C0-C15 <br><br>  El significado del chip es el siguiente: <br><br>  A trav√©s de 4 l√≠neas de informaci√≥n, el estado necesario de las 32 salidas del microcircuito se establece secuencialmente (16 por fila y columna).  Es decir  indicamos en porciones de 4 bits el estado de las salidas para las filas 1-4, luego 5-8, 9-12 y finalmente para 13-16, y tambi√©n 4 veces en 4 bits indicamos el estado de las columnas.  Cada nuevo dato se registra mediante un pulso a lo largo de la l√≠nea! DATA CLK.  Despu√©s de que hayamos enviado los 8 datos, un pulso en la l√≠nea Latch Pulse establece el estado indicado de las salidas R1-R16, C1-C16 que se mantendr√°n hasta el siguiente pulso en esta l√≠nea. <br><br>  Naturalmente, en uno de esos ciclos no podemos indicar el estado de cada p√≠xel individual independientemente de los dem√°s, solo podemos 16 (por el n√∫mero de intersecciones de filas con columnas).  Por lo tanto, para actualizar de forma independiente el estado de cada p√≠xel, se requerir√°n 256/16 = 16 ciclos. <br><br>  Adem√°s, tenemos la responsabilidad de cambiar la polaridad para eliminar el voltaje constante de los electrodos LCD, de lo contrario la pantalla se degradar√° r√°pidamente.  El cambio de polaridad se produce en el borde posterior de la se√±al en el Latch Pulse en una entrada baja! Reloj de datos.  Se recomienda cambiar la polaridad con la frecuencia de actualizaci√≥n de la pantalla. <br><br>  Lo anterior se ilustra en el siguiente cuadro de tiempo de una hoja de datos: <br><br><img src="https://habrastorage.org/webt/58/ok/zu/58okzuokeat3bg6nf98bppvxpco.png"><br><br>  Todo esto, implementado en el ensamblador 8021 (que, por cierto, se reduce significativamente en comparaci√≥n con el ensamblador del resto de la familia, todo por la misma autenticidad que us√© solo las instrucciones compatibles con 8021), podr√≠a verse as√≠: <br><br><pre><code class="hljs ruby">mov R<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-comment"><span class="hljs-comment">#32 ;    . mov r1, #10000000b ;    r1-r2 mov r2, #00000000b ;  . mov r4, #00000010b ;    !DATA CLK. mov r3, #11110000b clr c loop: ;   r1-r16   . mov a, r1 ;   r1 loadNibble ;    R1-R4. mov a, r1 ;  4   r1 rrc a ;      , xch a, r1 ;    . swap a loadNibble ;    R5-R8. mov a, r2 ;   r2 loadNibble ;    R9-R12. mov a, r2 ;  4   r2 rrc a ;      ,  xch a, r2 ;  C,     . swap a loadNibble ;    R13-R16 ;   C1-C16     . mov a, </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@R</span></span></span><span class="hljs-comment">0 ;       loadNibble ;       C1-C4. mov a, </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@R</span></span></span><span class="hljs-comment">0 swap a ;   4 . loadNibble ;     C4-C8. inc R0 ;     mov a, </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@R</span></span></span><span class="hljs-comment">0 ;     , loadNibble ;      4 . mov a, </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@R</span></span></span><span class="hljs-comment">0 swap a ;   4 . loadNibble ;     C9-C12. inc R0 ;    inc a ;   R0-R15  C0-C15, outl p1, a ;  Latch Pulse  1. jnc loop ;      . clr a ; outl p1, a ; . inc a ; outl p1, a ; loadNibble macro anl a, r3 ;    . outl p1, a ;   . orl a, r4 outl p1, a ; !DATA CLK. endm</span></span></code> </pre> <br>  Esta es mi versi√≥n m√°s r√°pida de la subrutina que muestra la imagen almacenada en la RAM.  Se realiza en 1152 ciclos de m√°quina (que en nuestro caso es ~ 12 Œºs). <br><br>  La frecuencia de actualizaci√≥n m√°xima de la pantalla es de aproximadamente 70 fotogramas por segundo (si el microcontrolador no hace nada m√°s), lo que en principio es redundante, por lo tanto, para guardar registros y ROM, en la pr√°ctica utilic√© otras subrutinas, m√°s lentas y m√°s adecuadas para tareas espec√≠ficas.  Pero, a esta frecuencia, teniendo en cuenta la alta inercia de esta pantalla, es posible mostrar im√°genes con 4 gradaciones de gris (como un niblonog en KPDV), cambiando r√°pidamente los cuadros.  O incluso animaciones cortas de cuatro colores: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jl/9v/1z/jl9v1zg4fi77u_67qendhuxbtt0.gif"></div><br>  Como puede ver, el contraste deja mucho que desear, es especialmente sorprendente cuando todas las filas y columnas est√°n involucradas, pero no hay nada que hacer: los costos del control multiplex. <br><br><h3>  Teclado </h3><br> <a href=""><img src="https://habrastorage.org/webt/yh/96/k4/yh96k4mzlmmxlt7bczu5whiozcg.jpeg"></a> <br><br>  Aqu√≠ todo es mucho m√°s simple.  Los botones se agrupan en una matriz de 4 filas y 3 columnas.  Las filas est√°n conectadas a los pines P0.4-P0.7, las columnas est√°n conectadas a P0.0-P0.2. <br><br> <a href=""><img src="https://habrastorage.org/webt/zk/2b/cy/zk2bcyshihgdt_h5ygvmxyu4gqw.png"></a> <br><br>  Como se√±al√© anteriormente, los puertos de 8021 son casi bidireccionales, por lo tanto, para conocer el estado de las terminales, primero debe enviarles unidades.  Es decir  al ingresar datos, se produce una conjunci√≥n entre las se√±ales de entrada y el contenido del b√∫fer, que corresponde a los √∫ltimos datos que se muestran en el puerto.  Una encuesta de teclado se ve as√≠: <br><br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">mov</span></span> a, <span class="hljs-comment"><span class="hljs-comment">#01111111b ; 0        1, outl p0, a ; ,      . in a, p0 ; , 0       ;     </span></span></code> </pre><br><h3>  Paleta </h3><br> <a href=""><img src="https://habrastorage.org/webt/4n/ck/j1/4nckj1to9wuxdqnp4qbuzr4zrku.jpeg"></a> <br><br>  O, en ruso, la rueda del manipulador instalada en la parte inferior de la consola es una resistencia variable de 10kŒ© con una manija decorativa, que se puede girar para controlar algo en el juego.  Por supuesto, no hab√≠a ADC ni en 8021 ni en el TMS1100.  El √°ngulo de rotaci√≥n fue determinado por la velocidad de carga del condensador, que fue soldado prudentemente a la placa de la consola. <br><br> <a href=""><img src="https://habrastorage.org/webt/he/kh/k2/hekhk2fa7hrnv1odcm5lxximh7m.png"></a> <br><br>  Todo funciona de la siguiente manera: mientras los pines P2.2-P2.3 son altos, el condensador se descarga y la unidad l√≥gica se encuentra en la entrada de prueba T1.  Despu√©s de configurar P2.2 a P2.3 en un nivel bajo, el capacitor comenzar√° a cargarse y despu√©s de un tiempo, dependiendo exponencialmente de la resistencia de la resistencia variable, la ca√≠da de voltaje a trav√©s de √©l ser√° tal que T1 se establece en 0. Solo queda detectar el tiempo hasta la aparici√≥n de cero en T1, que ser√° proporcional al √°ngulo de rotaci√≥n de la pala (se pueden encontrar m√°s detalles y m√°s interesantes sobre tales esquemas en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DI HALT'a</a> ).  En c√≥digo, esto podr√≠a verse as√≠: <br><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">clr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">r1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">outl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">p2</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> ; 0  <span class="hljs-selector-tag"><span class="hljs-selector-tag">P2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2-P2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">loop</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">inc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">r1</span></span> ; <span class="hljs-selector-tag"><span class="hljs-selector-tag">r1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jt1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">loop</span></span> ;  <span class="hljs-selector-tag"><span class="hljs-selector-tag">T1</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#00110000b</span></span> ; 1  <span class="hljs-selector-tag"><span class="hljs-selector-tag">P2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2-P2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">outl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">p2</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> ;    </code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ir/2c/1y/ir2c1yukhpzppj3h9jznphe_s-k.gif"></div><br><br><h3>  Sonido </h3><br>  Aqu√≠ es bastante simple, hay una piezodin√°mica conectada a las dos l√≠neas de los puertos P2.0 y P2.1, todo lo que tenemos que hacer es sacudir las piernas alternativamente con la frecuencia correcta. <br><br><h3>  Que paso </h3><br>  Como resultado, escrib√≠ dos juegos: Tetris y una especie de Flappy Bird.  Para la depuraci√≥n, utilic√© Intel D8748H y un clon de NEC D8749HD que difiere solo en tama√±o de ROM.  Utilic√© el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">8048 Integrated Development Environment</a> como ensamblador y depurador.  En el proceso obtuve una experiencia inolvidable: el flujo constante de microcontroladores desde la consola al borrador, del borrador al programador, y de all√≠ a la consola, y todo esto va acompa√±ado de un olor hospitalario de aire ultravioleta ionizado ... <br><br>  Escrib√≠ los programas terminados en el alguna vez programable Intel P8748H que solde en las placas de circuito impreso que hab√≠an llegado para entonces. <br><br> <a href=""><img src="https://habrastorage.org/webt/_p/f8/oo/_pf8ool9qniaa7--uotj-o-bx6i.jpeg"></a> <br>  <i>Comparaci√≥n con las placas originales, de izquierda a derecha: Block Buster, Mi opci√≥n, Connect Four</i> <br><br>  Tuve que usar el original como estuche; solo ten√≠a uno de los dos cartuchos disponibles para el juego Block Buster que result√≥ inoperativo. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9gqDIIBmB2c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  El casco no fue suficiente para el segundo juego: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zir4Owh1Pxc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Conclusi√≥n </h3><br>  Microvision MB se produjo antes de 1981, y aunque las ventas al principio fueron bastante exitosas, una peque√±a cantidad de juegos (se lanzaron 13 cartuchos en total) y los problemas de calidad generalmente se llaman las razones de la disminuci√≥n de las ventas.  Agregar√≠a a esto un tama√±o excesivamente grande, especialmente en comparaci√≥n con la serie Nintendo Game &amp; Watch que apareci√≥ en ese momento y se convirti√≥ en un √©xito. <br><br>  C√≥digos fuente y esquemas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicados en GitHub</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416865/">https://habr.com/ru/post/es416865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416851/index.html">Hibernate: sobre lo que los tutoriales guardan silencio</a></li>
<li><a href="../es416855/index.html">Bachiller de la Universidad Estatal de San Petersburgo</a></li>
<li><a href="../es416857/index.html">Construimos templos, en c√≥digo y en la vida. Mi experiencia desarrollando mi segunda aplicaci√≥n de Android</a></li>
<li><a href="../es416859/index.html">Meet All at Once React Boilerplate por Maximilian Stoiber v3.6.0</a></li>
<li><a href="../es416863/index.html">Una nueva forma de presentar expositores</a></li>
<li><a href="../es416867/index.html">Los investigadores han creado un dispositivo para ataques locales en sistemas SCADA</a></li>
<li><a href="../es416871/index.html">Estoy cansado de aceptar pagos a trav√©s de WebView. Que hago</a></li>
<li><a href="../es416877/index.html">Gesti√≥n de infraestructura de impresi√≥n</a></li>
<li><a href="../es416879/index.html">Oficina √°gil: ¬øD√≥nde alojar a mil desarrolladores?</a></li>
<li><a href="../es416881/index.html">Introducci√≥n a los contratos inteligentes. Sus limitaciones potenciales y reales.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>