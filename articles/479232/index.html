<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143967986-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143967986-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏻 🕙 🧝🏻 MQ JMS application development on Spring Boot 👩🏾‍🚒 👘 ❤️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Java developers, when using the JMS interface, often prefer to work with the Spring Framework. Spring can simplify the coding of new applications by p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MQ JMS application development on Spring Boot</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479232/"><img src="https://habrastorage.org/webt/kh/zx/cv/khzxcv9mqf40w5pv8yg9txypqiu.png"><br><br>  Java developers, when using the JMS interface, often prefer to work with the Spring Framework.  Spring can simplify the coding of new applications by providing templates for common patterns and has been used successfully for many years with the MQ JMS classes.  The Spring JmsTemplate class is a key interface, but it still depends on the configurations and dependencies in the code. <br><br>  The Spring Framework includes various modules for various needs.  One such component is Spring Boot.  Spring Boot starters conveniently pull up all the dependencies and auto-configuration libraries needed to use a particular technology.  This makes it very easy to get started with a new application and technology, faster than working directly with classes such as JmsTemplate.  So, how can we take advantage of this easy access for MQ applications? <br><br>  Translated by <b><a href="http://tele.gg/middle_java">@middle_java</a></b> <br><a name="habracut"></a><br>  <a href="https://developer.ibm.com/messaging/author/marke_taylor/">Mark e taylor</a> <br>  Posted on 04/03/2018 / Updated 12/06/2018 <br>  <a href="https://developer.ibm.com/messaging/2018/04/03/mq-jms-spring-boot/">11 comments</a> <br><br>  In <a href="https://developer.ibm.com/messaging/2018/01/09/developing-mq-java-applications-maven/">this article,</a> I described how to directly download MQ classes from <a href="http://search.maven.org/">Maven Central Repository</a> Java.  And now we will use this to create the <a href="http://search.maven.org/">Spring Boot Starter for MQ</a> .  You can download the full source code of the module from <a href="https://github.com/ibm-messaging/mq-jms-spring">GitHub</a> . <br><br><h2>  Getting started with MQ Spring Boot </h2><br>  First of all, we need a running queue manager.  Then we will create an application that accesses this queue manager. <br><br><h3>  Starting a queue manager in a container </h3><br>  To get started quickly, you can use the <a href="https://github.com/ibm-messaging/mq-docker">IBM MQ</a> container <a href="https://github.com/ibm-messaging/mq-docker">for developers</a> , which runs server processes.  When this container is launched, several objects are created by default and their definitions are known to the auto-configuration module.  The default values ​​correspond to the values ​​required by the container queue manager. <br><br>  This means that you can start the queue manager using the Docker environment and connect to it without additional settings.  You can start the container on Linux using the following command: <br><br><pre><code class="plaintext hljs">docker run --env LICENSE=accept --env MQ_QMGR_NAME=QM1 \ --publish 1414:1414 \ --publish 9443:9443 \ --detach \ ibmcom/mq</code> </pre> <br><h3>  Application example </h3><br>  It uses an approach consistent with the JMS application model in the <a href="https://spring.io/guides/gs/messaging-jms/">Spring JMS Getting Started Guide</a> .  I followed the path of importing this project into the Eclipse workspace and used the <b>gradle</b> build <b>process</b> , but the <b>maven-</b> based process also works.  As an exercise, I used the maven configuration from the command line instead of the Eclipse IDE. <br>  The same code from the example works with MQ with minimal modification: <br><br><ul><li>  Modify the source messaging provider in the dependency list to point to the IBM MQ package. </li><li>  Change the queue name in Application.java (the example uses “mailbox”) to “DEV.QUEUE.1” - this is the queue predefined by the Developer configuration in the Docker container.  If you do not use the default Developer configuration parameters, then you will either have to set the queue name to the same as the existing queue, or define the corresponding new queue. </li></ul><br>  The modified <i>build.gradle</i> file that controls compilation now has: <br><br><pre> <code class="plaintext hljs"> dependencies { compile("com.ibm.mq:mq-jms-spring-boot-starter:+") compile("com.fasterxml.jackson.core:jackson-databind") }</code> </pre><br>  If you prefer to use Maven, then the corresponding section in <i>pom.xml is</i> as follows: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.fasterxml.jackson.core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jackson-databind<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.ibm.mq<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mq-jms-spring-boot-starter<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>0.0.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The only real difference is that a specific version of the MQ Spring Boot module is specified in the Maven configuration. <br><br><h3>  Default configuration </h3><br>  MQ Boot Starter configuration attribute names begin with the ibm.mq prefix.  Attributes by default <br><br><pre> <code class="plaintext hljs"> ibm.mq.queueManager=QM1 ibm.mq.channel=DEV.ADMIN.SVRCONN ibm.mq.connName=localhost(1414) ibm.mq.user=admin ibm.mq.password=passw0rd</code> </pre> <br>  They correspond to the default values ​​of the Docker container. <br><br><h3>  Advanced configuration options </h3><br>  If you already have a running MQ queue manager that you want to use, then you can easily change the default configuration by specifying overridden values.  A queue manager can be a local service or even a service hosted on <a href="https://console.bluemix.net/catalog/services/mq%3FtaxonomyNavigation%3Dapps%26cm_sp%3Ddw-bluemix-_-messaging-_-devcenter">IBM Cloud</a> .  The <i>application.properties</i> file in a Java project is one way of putting these attributes out of the project.  The configuration takes effect without any code changes. <br><br>  Specify the name of the queue manager attribute: <br><br><pre> <code class="plaintext hljs">ibm.mq.queueManager=QM1</code> </pre> <br>  For client connections to the queue manager, you must also set <br><br><pre> <code class="plaintext hljs">ibm.mq.channel ibm.mq.connName</code> </pre> <br>  If neither channel nor connName is specified, it is assumed that the local queue manager is used.  The configuration component also supports some TLS-related attributes.  They are described in more detail in the README file, but their default values ​​are null.  You may also need to install <br><br><pre> <code class="plaintext hljs">ibm.mq.user ibm.mq.password=passw0rd</code> </pre><br>  to override the default values.  These attributes can be left blank to use the local userid of the operating system without authentication, if allowed by the queue manager. <br><br>  Example contents of <i>application.properties</i> file: <br><br><pre> <code class="plaintext hljs"> ibm.mq.queueManager=QM1 ibm.mq.channel=SYSTEM.DEF.SVRCONN ibm.mq.connName=server.example.com(1414) ibm.mq.user=user1 ibm.mq.password=passw0rd</code> </pre> <br>  After that, Spring Boot will create a ConnectionFactory that can be used to interact with the queue manager. <br><br><h3>  Testing the sample program </h3><br>  You can run the sample program using the <code>gradle bootRun</code> .  Or use maven to run <code>mvn package</code> and then <code>java -jar ./target/gs-messaging-jms.jar</code> to execute the program.  You should see the following: <br><br><img src="https://habrastorage.org/webt/lx/xy/no/lxxynoshl7wnpqlne7gcwbd3orm.png"><br><br>  Here you can see how the application put the message (“sending an email message”), and then retrieved it. <br><br><h2>  conclusions </h2><br>  Using Spring Boot Starter with MQ allows you to get started very quickly.  Then, after launching your first application, you can expand it to use other MQ features.  After you try it, you can give feedback here or on the <a href="https://github.com/ibm-messaging/mq-jms-spring/issues">GitHub issues</a> page. <br><br><h2>  Update - June 2018 </h2><br>  Earlier this year, a major update to the Spring Boot Framework, known as Boot 2, was released. The MQ Boot Starter was updated to work with this new version of the platform.  Of course, all publicly released versions of this code are available in the <a href="https://search.maven.org/">Maven Central Repository</a> .  For compatibility with Spring Boot 1, you must continue to use <a href="http://search.maven.org/remotecontent%3Ffilepath%3Dcom/ibm/mq/mq-jms-spring-boot-starter/0.0.4/mq-jms-spring-boot-starter-0.0.4.jar">version 0.0.4 of</a> this artifact;  <a href="http://search.maven.org/remotecontent%3Ffilepath%3Dcom/ibm/mq/mq-jms-spring-boot-starter/2.0.0/mq-jms-spring-boot-starter-2.0.0.jar">version 2.0.0 is</a> compatible with Boot 2 and will be used as the basis for any future updates. <br><br>  Tags <a href="https://developer.ibm.com/messaging/tag/jms/">jms</a> , <a href="https://developer.ibm.com/messaging/tag/mq/">mq</a> , <a href="https://developer.ibm.com/messaging/tag/mqseries/">mqseries</a> , <a href="https://developer.ibm.com/messaging/tag/spring/">spring</a> , <a href="https://developer.ibm.com/messaging/tag/spring-boot/">spring boot</a> <br><br>  author <a href="https://developer.ibm.com/messaging/author/marke_taylor/">Mark E Taylor</a> <br><br><h2>  11 comments on the article "Developing MQ JMS applications on Spring Boot" </h2><br>  <i>(Only useful comments and comments with answers translated)</i> <br><br>  3. <br>  Horacio May 16, 2019 <br>  Mark, great job. <br>  Can I handle more than one queue? <br>  I see that the prefix is ​​hardcoded in @ConfigurationProperties (prefix = "bm.mq") <br><br>  o Mark E Taylor May 17, 2019 <br>  I really don't understand the question.  A “prefix” refers to configuration attributes that basically show how to connect to the queue manager.  This has nothing to do with the queues that the application uses after connecting.  If you really wanted to ask about connecting to multiple queue managers, see <a href="https://github.com/ibm-messaging/mq-jms-spring/issues/7">github.com/ibm-messaging/mq-jms-spring/issues/7</a> to see which approaches people use. <br><br>  7. <br>  Peter May 17, 2018 <br>  "Hello.Application" is missing, are the files located on github? <br><br>  o Mark E Taylor June 12, 2018 <br>  To extract and import a sample application, I used the Spring Getting Started page (see <a href="https://spring.io/guides/gs/messaging-jms">spring.io/guides/gs/messaging-jms</a> ), and then made minor changes.  For various reasons, I intentionally did not want to have a separate copy of this code here. <br><br>  Translated by <b><a href="http://tele.gg/middle_java">@middle_java</a></b> . </div></div><p>Source: <a href="https://habr.com/ru/post/479232/">https://habr.com/ru/post/479232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479216/index.html">Second wind Pandora DXL 3000 or how I screwed my own telemetry</a></li>
<li><a href="../479218/index.html">How to make a bot that turns a photo into a comic book: step-by-step instructions for dummies</a></li>
<li><a href="../479220/index.html">Nano-neuron - 7 simple JavaScript functions showing how the machine can "learn"</a></li>
<li><a href="../479222/index.html">The digest of interesting materials for the mobile # 325 developer (on December 2 - 8)</a></li>
<li><a href="../479226/index.html">Habr-analysis: what users order as a gift from Habr</a></li>
<li><a href="../479234/index.html">News from the world of OpenStreetMap No. 488 (11/19/2019 - 11/25/2019)</a></li>
<li><a href="../479236/index.html">Kivy. Build packages for Android and no magic</a></li>
<li><a href="../479238/index.html">Functional programming is not what we are told</a></li>
<li><a href="../479240/index.html">The code we live in</a></li>
<li><a href="../479242/index.html">We are finalizing Yandex. Station to watch YouTube</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter54458986 = new Ya.Metrika({
                  id:54458986,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/54458986" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-143967986-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=IU0EG0jaqnehka2lu5TyzAcchrZXI4Yb1QXKQvJxpqE&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>