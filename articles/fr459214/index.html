<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÆ üë©üèª‚Äçüé§ ü§£ Tol√©rance aux pannes dans le stockage Qsan üë† üë©üèª‚Äçü§ù‚Äçüë®üèº üöÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, dans l'infrastructure informatique, avec l'utilisation g√©n√©ralis√©e de la virtualisation, les syst√®mes de stockage sont au c≈ìur du stockag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tol√©rance aux pannes dans le stockage Qsan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/459214/"><p> Aujourd'hui, dans l'infrastructure informatique, avec l'utilisation g√©n√©ralis√©e de la virtualisation, les syst√®mes de stockage sont au c≈ìur du stockage de toutes les machines virtuelles.  L'√©chec de ce n≈ìud est capable d'arr√™ter compl√®tement le travail du centre de donn√©es.  Bien qu'une partie consid√©rable de l'√©quipement serveur ait une tol√©rance aux pannes sous une forme ou une autre ¬´par d√©faut¬ª, c'est pr√©cis√©ment en raison du r√¥le particulier des syst√®mes de stockage au sein du centre de donn√©es qu'ils ont des exigences accrues en termes de ¬´capacit√© de survie¬ª. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/un/l2/qlunl2stlgw2znymm7koq0fauvg.jpeg"></div><br><a name="habracut"></a><br><p>  La m√©thode la plus efficace pour garantir la tol√©rance aux pannes en informatique est l'utilisation de plusieurs instances d'√©quipements et de logiciels (dans le cas le plus simple, la duplication).  Bien s√ªr, le stockage peut √™tre enti√®rement dupliqu√©.  Et pour la reprise apr√®s sinistre, c'est exactement l'approche qui est utilis√©e.  Mais toutes les entreprises ne peuvent pas se permettre une telle solution.  Il ne s'agit pas seulement de doubler le co√ªt des √©quipements, mais aussi des autres co√ªts d'organisation d'une telle solution et de son accompagnement. </p><br><p>  Cependant, la possibilit√© de duplication des √©quipements n'√©limine pas la n√©cessit√© d'assurer une tol√©rance aux pannes au niveau des composants.  En particulier, la redondance est appliqu√©e aux syst√®mes de stockage pour les alimentations, les modules de refroidissement, les disques et, bien s√ªr, les contr√¥leurs.  Tout cela est depuis longtemps devenu monnaie courante.  Il est difficile de trouver du stockage sans utiliser une conception similaire.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici, Qsan</a> ne fait pas exception.  Mais nous voulons parler dans cet article de ce qui n'est pas imm√©diatement √©vident, et en m√™me temps il vise principalement √† augmenter la tol√©rance aux pannes du syst√®me dans son ensemble. </p><br><h3>  Modules de refroidissement </h3><br><p>  Tr√®s souvent dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les syst√®mes de stockage</a> avec des bo√Ætiers 2U-3U, des modules combin√©s sont utilis√©s qui combinent alimentations et ventilateurs.  D'une part, c'est pratique car  Une seule unit√© doit √™tre r√©par√©e.  En revanche, si le syst√®me de refroidissement tombe en panne, l'alimentation peut √™tre coup√©e de force pour √©viter une surchauffe.  Et il semble que la situation la plus critique ne se produira pas, mais il ne vaut √©videmment pas la peine d'ajouter des vuln√©rabilit√©s de stockage. </p><br><p>  Le refroidissement des syst√®mes de stockage Qsan est organis√© sous la forme de modules s√©par√©s avec un remplacement "√† chaud", ind√©pendant des alimentations.  En fait, les blocs d'alimentation ont leurs propres ventilateurs, con√ßus pour souffler le bloc d'alimentation lui-m√™me.  Le module de refroidissement accueille deux ventilateurs ind√©pendants qui s'assurent mutuellement.  Il existe deux modules de ce type dans le syst√®me de stockage: √† droite et √† gauche - pour une circulation d'air efficace de tous les composants.  Si l'un des ventilateurs tombe en panne, tous les autres augmentent automatiquement leur vitesse afin de compenser le manque de flux d'air qui en r√©sulte.  C'est pourquoi un dysfonctionnement du ventilateur n'entra√Æne pas de risque de surchauffe de l'ensemble de l'appareil. </p><br><h3>  Topologie de connexion des √©tag√®res d'extension </h3><br><p>  Le sch√©ma classique de connexion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des √©tag√®res d'extension</a> au stockage signifie une topologie appel√©e cascade.  Dans ce cas, l'√©tag√®re et les contr√¥leurs de stockage correspondants sont interconnect√©s par un seul c√¢ble SAS.  Au total, 2 c√¢bles pour un syst√®me √† double contr√¥leur sont obtenus.  Si vous souhaitez connecter la seconde, elle est connect√©e de la m√™me mani√®re √† la premi√®re √©tag√®re.  Et ainsi de suite.  L'avantage de cette topologie est la facilit√© de mise en ≈ìuvre dans les √©quipements.  Et le moins sera une vuln√©rabilit√© √† une rupture soudaine du circuit SAS en raison de la d√©faillance crois√©e des contr√¥leurs de stockage et des √©tag√®res non connect√©s ou en raison d'une panne de courant d'une des √©tag√®res d'extension au milieu de la cha√Æne.  Il en r√©sultera une perte d'acc√®s √† une partie des disques et un √©ventuel effondrement du groupe RAID s'il est ¬´r√©parti¬ª sur plusieurs cas. </p><br><p>  En cas de d√©faillance de plusieurs contr√¥leurs, Qsan b√©n√©ficie d'une protection sous la forme d'une communication logique interne entre les contr√¥leurs via le fond de panier de stockage.  C'est-√†-dire  le contr√¥leur de stockage voit non seulement le contr√¥leur JBOD qui lui est directement connect√©, mais √©galement le contr√¥leur ¬´voisin¬ª via une liaison sp√©ciale dans le fond de panier.  Par cons√©quent, si une telle situation se produit et que personne ne tire physiquement les c√¢bles SAS entre le syst√®me de stockage et l'√©tag√®re, l'acc√®s √† tous les lecteurs sera pr√©serv√©. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a8/kh/7f/a8kh7fjyjtcrxcvkyfbjghld4tk.jpeg"></div><br><p>  Pour prot√©ger le circuit SAS contre les ruptures, par exemple, en raison de la mise hors tension de l'√©tag√®re d'extension, une topologie de connexion diff√©rente est g√©n√©ralement utilis√©e - la cascade inverse.  Dans ce cas, le syst√®me de stockage est connect√© imm√©diatement √† la premi√®re et √† la derni√®re √©tag√®re de la cha√Æne, acc√©dant aux disques des deux c√¥t√©s. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/4w/zq/mr4wzqj7-o1locvqsiiohdbkdzg.jpeg"></div><br><p>  Si vous souhaitez une protection renforc√©e, vous pouvez cr√©er des configurations √† plus grande √©chelle, en utilisant, par exemple, la topologie de l'arborescence.  Ou bien compliquez-vous en combinant les topologies mentionn√©es.  Cela est possible en raison du grand nombre de connecteurs SAS sur les p√©riph√©riques (2 pour chaque contr√¥leur de stockage et 5 pour chaque contr√¥leur JBOD) avec d√©tection automatique des modes de fonctionnement d'entr√©e / sortie.  L'essentiel est que l'administrateur lui-m√™me ne soit pas confus.  Et le syst√®me de stockage pourra configurer correctement la configuration. </p><br><h3>  Reconstruction rapide </h3><br><p>  La disponibilit√© de disques de rechange √† chaud dans le syst√®me augmente consid√©rablement la fiabilit√© du stockage des informations.  Cependant, le simple fait que ces disques soient allou√©s ne signifie pas une protection absolue.  Le fait est que le processus de r√©cup√©ration (reconstruction) est assez long et souvent long.  La complexit√© provient de l'acc√®s continu aux donn√©es de base.  C'est-√†-dire  le syst√®me, ainsi que le travail en cours, doit √©galement copier les donn√©es sur un nouveau disque.  Et la dur√©e de la reconstruction d√©pend directement de la capacit√© du variateur et de ses caract√©ristiques de vitesse.  √âtant donn√© que le syst√®me ne sait rien de l'espace disque r√©ellement occup√©, il est tout simplement en train de le reconstruire: bloc par bloc. </p><br><p>  En cons√©quence, la restauration d'un disque moderne haute capacit√© de 10 + To avec une charge s√©rieuse sur les syst√®mes de stockage peut facilement prendre une semaine ou plus.  Vous devez √©galement garder √† l'esprit le fait que lors de la reconstruction, la probabilit√© de d√©faillance d'autres disques augmente consid√©rablement en raison de la charge accrue sur eux.  Et cela peut d√©j√† repr√©senter un grave danger dans le cas de l'utilisation, par exemple, du RAID5. </p><br><p>  Pour r√©soudre ce probl√®me, de nombreux d√©veloppeurs de stockage souhaitent acc√©l√©rer le processus de r√©cup√©ration.  Diff√©rentes approches peuvent √™tre utilis√©es pour cela, mais l'essence est la m√™me: copier uniquement les blocs r√©ellement occup√©s pendant la reconstruction.  Qsan ne s'est pas √©cart√© de ce probl√®me.  Dans le syst√®me de stockage de ce fournisseur, lorsque l'option <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fast Rebuild</a> est activ√©e, le syst√®me conserve la trace des blocs utilis√©s pour l'enregistrement, ce qui permet de les copier uniquement sur un nouveau lecteur en cas de d√©faillance du disque. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/hx/ld/4jhxldznr4kaf8va446yntwnc6k.jpeg"></div><br><p>  L'option de reconstruction rapide n'est pas activ√©e par d√©faut lors de la cr√©ation de nouveaux volumes, car  son utilisation a un impact sur les performances, notamment avec les op√©rations d'√©criture al√©atoire, car: </p><br><p></p><ol><li>  Il est n√©cessaire de suivre les enregistrements par blocs; </li><li>  Lors de la reconstruction, les sommes de contr√¥le ne sont pas recalcul√©es pour l'espace non allou√©. Par cons√©quent, lorsqu'une nouvelle entr√©e est effectu√©e dans cette zone, vous devez d'abord ¬´l'initialiser¬ª. </li></ol><br><p>  Par cons√©quent, il n'est pas recommand√© d'utiliser Fast Rebuild pour les volumes, par exemple, avec des bases de donn√©es tr√®s charg√©es ou dans des syst√®mes de vid√©osurveillance, o√π le volume sera toujours √† 100% plein.  Mais pour les serveurs de fichiers ou de messagerie, cette option sera tout simplement tr√®s utile. </p><br><h2>  Au lieu d'une conclusion </h2><br><p>  Chaque fabricant de stockage implique que ses appareils sont fiables.  Et s'il n'y a pas d'erreurs de calcul fatales dans le d√©veloppement des appareils et une incroyable soif d'√©conomies dans le processus de production et de test, alors en g√©n√©ral, nous pouvons √™tre d'accord avec le fournisseur.  Cependant, vous devez comprendre: </p><br><p></p><ul><li>  la tol√©rance aux pannes de base des syst√®mes de stockage est avant tout un moyen de continuer √† avoir acc√®s aux donn√©es en cas de d√©faillance d'un ou de plusieurs composants; </li><li>  les options suppl√©mentaires concernant la tol√©rance aux pannes (telles que celles d√©crites ci-dessus) sont l'√©limination de certains types de dysfonctionnements et l'augmentation de vos chances d'avoir acc√®s aux donn√©es; </li><li>  La fiabilit√© √† 100%, h√©las, ne se produit pas.  Mais, pour s'en rapprocher le plus possible, la plupart des fournisseurs de stockage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sens√©s</a> (et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qsan</a> parmi eux) mettent tout en ≈ìuvre pour am√©liorer continuellement leurs produits tant au niveau mat√©riel que logiciel. </li></ul><br><p>  Dans le m√™me temps, il ne faut pas oublier qu'aucune fiabilit√© absolue des syst√®mes de stockage n'annule la disponibilit√© des copies de sauvegarde, des plans de r√©cup√©ration clairs et r√©p√©t√©s en cas d'accident et un support technique op√©rationnel pour le vendeur. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459214/">https://habr.com/ru/post/fr459214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459198/index.html">Analyse des performances des requ√™tes dans ClickHouse. Rapport Yandex</a></li>
<li><a href="../fr459204/index.html">10 ++ fa√ßons de travailler avec les registres mat√©riels en C ++ (par exemple, IAR et Cortex M)</a></li>
<li><a href="../fr459206/index.html">9 ans dans un monolithe √† Node.JS</a></li>
<li><a href="../fr459208/index.html">Courir avec des proth√®ses: simulation de Nekstgen du mouvement humain √† l'aide de muscles, d'os et d'un r√©seau neuronal</a></li>
<li><a href="../fr459212/index.html">Impl√©mentation de propri√©t√© en C ++</a></li>
<li><a href="../fr459216/index.html">Structure de donn√©es de l'arbre B</a></li>
<li><a href="../fr459220/index.html">Test d'int√©gration pour v√©rifier les fuites de m√©moire</a></li>
<li><a href="../fr459224/index.html">D'un agent immobilier √† un d√©veloppeur de jeux 2. ¬´Op√©ration: Android¬ª</a></li>
<li><a href="../fr459226/index.html">¬´Fast-PoE et Perpetual-PoE - sont-ce ou non de nouvelles normes?¬ª</a></li>
<li><a href="../fr459230/index.html">Un voyage au centre d'appels et au Product Backlog √† travers les yeux du d√©veloppeur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>