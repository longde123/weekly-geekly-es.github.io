<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐮 👩🏻‍🎤 🤣 Tolérance aux pannes dans le stockage Qsan 👠 👩🏻‍🤝‍👨🏼 🚄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, dans l'infrastructure informatique, avec l'utilisation généralisée de la virtualisation, les systèmes de stockage sont au cœur du stockag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tolérance aux pannes dans le stockage Qsan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/459214/"><p> Aujourd'hui, dans l'infrastructure informatique, avec l'utilisation généralisée de la virtualisation, les systèmes de stockage sont au cœur du stockage de toutes les machines virtuelles.  L'échec de ce nœud est capable d'arrêter complètement le travail du centre de données.  Bien qu'une partie considérable de l'équipement serveur ait une tolérance aux pannes sous une forme ou une autre «par défaut», c'est précisément en raison du rôle particulier des systèmes de stockage au sein du centre de données qu'ils ont des exigences accrues en termes de «capacité de survie». </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/un/l2/qlunl2stlgw2znymm7koq0fauvg.jpeg"></div><br><a name="habracut"></a><br><p>  La méthode la plus efficace pour garantir la tolérance aux pannes en informatique est l'utilisation de plusieurs instances d'équipements et de logiciels (dans le cas le plus simple, la duplication).  Bien sûr, le stockage peut être entièrement dupliqué.  Et pour la reprise après sinistre, c'est exactement l'approche qui est utilisée.  Mais toutes les entreprises ne peuvent pas se permettre une telle solution.  Il ne s'agit pas seulement de doubler le coût des équipements, mais aussi des autres coûts d'organisation d'une telle solution et de son accompagnement. </p><br><p>  Cependant, la possibilité de duplication des équipements n'élimine pas la nécessité d'assurer une tolérance aux pannes au niveau des composants.  En particulier, la redondance est appliquée aux systèmes de stockage pour les alimentations, les modules de refroidissement, les disques et, bien sûr, les contrôleurs.  Tout cela est depuis longtemps devenu monnaie courante.  Il est difficile de trouver du stockage sans utiliser une conception similaire.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici, Qsan</a> ne fait pas exception.  Mais nous voulons parler dans cet article de ce qui n'est pas immédiatement évident, et en même temps il vise principalement à augmenter la tolérance aux pannes du système dans son ensemble. </p><br><h3>  Modules de refroidissement </h3><br><p>  Très souvent dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les systèmes de stockage</a> avec des boîtiers 2U-3U, des modules combinés sont utilisés qui combinent alimentations et ventilateurs.  D'une part, c'est pratique car  Une seule unité doit être réparée.  En revanche, si le système de refroidissement tombe en panne, l'alimentation peut être coupée de force pour éviter une surchauffe.  Et il semble que la situation la plus critique ne se produira pas, mais il ne vaut évidemment pas la peine d'ajouter des vulnérabilités de stockage. </p><br><p>  Le refroidissement des systèmes de stockage Qsan est organisé sous la forme de modules séparés avec un remplacement "à chaud", indépendant des alimentations.  En fait, les blocs d'alimentation ont leurs propres ventilateurs, conçus pour souffler le bloc d'alimentation lui-même.  Le module de refroidissement accueille deux ventilateurs indépendants qui s'assurent mutuellement.  Il existe deux modules de ce type dans le système de stockage: à droite et à gauche - pour une circulation d'air efficace de tous les composants.  Si l'un des ventilateurs tombe en panne, tous les autres augmentent automatiquement leur vitesse afin de compenser le manque de flux d'air qui en résulte.  C'est pourquoi un dysfonctionnement du ventilateur n'entraîne pas de risque de surchauffe de l'ensemble de l'appareil. </p><br><h3>  Topologie de connexion des étagères d'extension </h3><br><p>  Le schéma classique de connexion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des étagères d'extension</a> au stockage signifie une topologie appelée cascade.  Dans ce cas, l'étagère et les contrôleurs de stockage correspondants sont interconnectés par un seul câble SAS.  Au total, 2 câbles pour un système à double contrôleur sont obtenus.  Si vous souhaitez connecter la seconde, elle est connectée de la même manière à la première étagère.  Et ainsi de suite.  L'avantage de cette topologie est la facilité de mise en œuvre dans les équipements.  Et le moins sera une vulnérabilité à une rupture soudaine du circuit SAS en raison de la défaillance croisée des contrôleurs de stockage et des étagères non connectés ou en raison d'une panne de courant d'une des étagères d'extension au milieu de la chaîne.  Il en résultera une perte d'accès à une partie des disques et un éventuel effondrement du groupe RAID s'il est «réparti» sur plusieurs cas. </p><br><p>  En cas de défaillance de plusieurs contrôleurs, Qsan bénéficie d'une protection sous la forme d'une communication logique interne entre les contrôleurs via le fond de panier de stockage.  C'est-à-dire  le contrôleur de stockage voit non seulement le contrôleur JBOD qui lui est directement connecté, mais également le contrôleur «voisin» via une liaison spéciale dans le fond de panier.  Par conséquent, si une telle situation se produit et que personne ne tire physiquement les câbles SAS entre le système de stockage et l'étagère, l'accès à tous les lecteurs sera préservé. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a8/kh/7f/a8kh7fjyjtcrxcvkyfbjghld4tk.jpeg"></div><br><p>  Pour protéger le circuit SAS contre les ruptures, par exemple, en raison de la mise hors tension de l'étagère d'extension, une topologie de connexion différente est généralement utilisée - la cascade inverse.  Dans ce cas, le système de stockage est connecté immédiatement à la première et à la dernière étagère de la chaîne, accédant aux disques des deux côtés. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/4w/zq/mr4wzqj7-o1locvqsiiohdbkdzg.jpeg"></div><br><p>  Si vous souhaitez une protection renforcée, vous pouvez créer des configurations à plus grande échelle, en utilisant, par exemple, la topologie de l'arborescence.  Ou bien compliquez-vous en combinant les topologies mentionnées.  Cela est possible en raison du grand nombre de connecteurs SAS sur les périphériques (2 pour chaque contrôleur de stockage et 5 pour chaque contrôleur JBOD) avec détection automatique des modes de fonctionnement d'entrée / sortie.  L'essentiel est que l'administrateur lui-même ne soit pas confus.  Et le système de stockage pourra configurer correctement la configuration. </p><br><h3>  Reconstruction rapide </h3><br><p>  La disponibilité de disques de rechange à chaud dans le système augmente considérablement la fiabilité du stockage des informations.  Cependant, le simple fait que ces disques soient alloués ne signifie pas une protection absolue.  Le fait est que le processus de récupération (reconstruction) est assez long et souvent long.  La complexité provient de l'accès continu aux données de base.  C'est-à-dire  le système, ainsi que le travail en cours, doit également copier les données sur un nouveau disque.  Et la durée de la reconstruction dépend directement de la capacité du variateur et de ses caractéristiques de vitesse.  Étant donné que le système ne sait rien de l'espace disque réellement occupé, il est tout simplement en train de le reconstruire: bloc par bloc. </p><br><p>  En conséquence, la restauration d'un disque moderne haute capacité de 10 + To avec une charge sérieuse sur les systèmes de stockage peut facilement prendre une semaine ou plus.  Vous devez également garder à l'esprit le fait que lors de la reconstruction, la probabilité de défaillance d'autres disques augmente considérablement en raison de la charge accrue sur eux.  Et cela peut déjà représenter un grave danger dans le cas de l'utilisation, par exemple, du RAID5. </p><br><p>  Pour résoudre ce problème, de nombreux développeurs de stockage souhaitent accélérer le processus de récupération.  Différentes approches peuvent être utilisées pour cela, mais l'essence est la même: copier uniquement les blocs réellement occupés pendant la reconstruction.  Qsan ne s'est pas écarté de ce problème.  Dans le système de stockage de ce fournisseur, lorsque l'option <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fast Rebuild</a> est activée, le système conserve la trace des blocs utilisés pour l'enregistrement, ce qui permet de les copier uniquement sur un nouveau lecteur en cas de défaillance du disque. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/hx/ld/4jhxldznr4kaf8va446yntwnc6k.jpeg"></div><br><p>  L'option de reconstruction rapide n'est pas activée par défaut lors de la création de nouveaux volumes, car  son utilisation a un impact sur les performances, notamment avec les opérations d'écriture aléatoire, car: </p><br><p></p><ol><li>  Il est nécessaire de suivre les enregistrements par blocs; </li><li>  Lors de la reconstruction, les sommes de contrôle ne sont pas recalculées pour l'espace non alloué. Par conséquent, lorsqu'une nouvelle entrée est effectuée dans cette zone, vous devez d'abord «l'initialiser». </li></ol><br><p>  Par conséquent, il n'est pas recommandé d'utiliser Fast Rebuild pour les volumes, par exemple, avec des bases de données très chargées ou dans des systèmes de vidéosurveillance, où le volume sera toujours à 100% plein.  Mais pour les serveurs de fichiers ou de messagerie, cette option sera tout simplement très utile. </p><br><h2>  Au lieu d'une conclusion </h2><br><p>  Chaque fabricant de stockage implique que ses appareils sont fiables.  Et s'il n'y a pas d'erreurs de calcul fatales dans le développement des appareils et une incroyable soif d'économies dans le processus de production et de test, alors en général, nous pouvons être d'accord avec le fournisseur.  Cependant, vous devez comprendre: </p><br><p></p><ul><li>  la tolérance aux pannes de base des systèmes de stockage est avant tout un moyen de continuer à avoir accès aux données en cas de défaillance d'un ou de plusieurs composants; </li><li>  les options supplémentaires concernant la tolérance aux pannes (telles que celles décrites ci-dessus) sont l'élimination de certains types de dysfonctionnements et l'augmentation de vos chances d'avoir accès aux données; </li><li>  La fiabilité à 100%, hélas, ne se produit pas.  Mais, pour s'en rapprocher le plus possible, la plupart des fournisseurs de stockage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sensés</a> (et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qsan</a> parmi eux) mettent tout en œuvre pour améliorer continuellement leurs produits tant au niveau matériel que logiciel. </li></ul><br><p>  Dans le même temps, il ne faut pas oublier qu'aucune fiabilité absolue des systèmes de stockage n'annule la disponibilité des copies de sauvegarde, des plans de récupération clairs et répétés en cas d'accident et un support technique opérationnel pour le vendeur. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459214/">https://habr.com/ru/post/fr459214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459198/index.html">Analyse des performances des requêtes dans ClickHouse. Rapport Yandex</a></li>
<li><a href="../fr459204/index.html">10 ++ façons de travailler avec les registres matériels en C ++ (par exemple, IAR et Cortex M)</a></li>
<li><a href="../fr459206/index.html">9 ans dans un monolithe à Node.JS</a></li>
<li><a href="../fr459208/index.html">Courir avec des prothèses: simulation de Nekstgen du mouvement humain à l'aide de muscles, d'os et d'un réseau neuronal</a></li>
<li><a href="../fr459212/index.html">Implémentation de propriété en C ++</a></li>
<li><a href="../fr459216/index.html">Structure de données de l'arbre B</a></li>
<li><a href="../fr459220/index.html">Test d'intégration pour vérifier les fuites de mémoire</a></li>
<li><a href="../fr459224/index.html">D'un agent immobilier à un développeur de jeux 2. «Opération: Android»</a></li>
<li><a href="../fr459226/index.html">«Fast-PoE et Perpetual-PoE - sont-ce ou non de nouvelles normes?»</a></li>
<li><a href="../fr459230/index.html">Un voyage au centre d'appels et au Product Backlog à travers les yeux du développeur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>