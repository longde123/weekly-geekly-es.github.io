<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê≠ ‚úçüèª üë©üèΩ‚ÄçüöÄ Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows üè≥Ô∏è üë¨ üß£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est consacr√© aux fonctionnalit√©s de v√©rification des projets Unreal Engine √† l'aide de l'analyseur statique PVS-Studio sur le syst√®me d'ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/466479/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/977/529/b80/977529b809b96ad36c8f2c766610263a.png" alt="Image 2"></div><br>  Cet article est consacr√© aux fonctionnalit√©s de v√©rification des projets Unreal Engine √† l'aide de l'analyseur statique PVS-Studio sur le syst√®me d'exploitation Windows: comment installer l'analyseur, comment v√©rifier le projet, o√π et comment afficher le rapport d'erreur. <br><a name="habracut"></a><br>  Une partie int√©grante du cycle de nos articles sont des sujets d'une mani√®re ou d'une autre li√©s √† l'industrie du jeu.  V√©rifier le moteur physique utilis√© dans les jeux AAA - faites les meilleures erreurs dans l'industrie du jeu - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour votre sant√©</a> , trouver des bugs dans l'un des moteurs de jeux les plus populaires - Unreal Engine (UE) - est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">facile</a> .  Lors du d√©veloppement de jeux, ainsi que lors de l'√©criture d'autres applications, la qualit√© du code est importante.  Les erreurs sont mieux d√©tect√©es le plus t√¥t possible et il est conseill√© de le faire automatiquement - c'est l√† que les analyseurs de code statique viennent en aide aux programmeurs. <br><br>  Dans cet article, je vais essayer de parler bri√®vement de la fa√ßon dont vous pouvez utiliser l'analyseur statique PVS-Studio pour analyser les projets cr√©√©s dans l'UE.  PVS-Studio vous aidera √† am√©liorer le code de vos projets en y trouvant des erreurs, vous permettant ainsi de r√©duire le temps consacr√© √† la r√©vision du code. <br><br>  Veuillez noter que cet article s'ajoute √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation existante</a> sur l'analyse des projets UE et ne sert pas √† le remplacer, empruntant largement le contenu de la documentation. <br><br><h2>  Installer PVS-Studio </h2><br>  La fa√ßon la plus simple d'installer l'analyseur PVS-Studio est de t√©l√©charger son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fichier d'installation</a> .  Pour pouvoir analyser les projets cr√©√©s dans l'UE, lors de l'installation de PVS-Studio, vous devez s√©lectionner les composants suivants: ¬´Surveillance du compilateur C et C ++¬ª et ¬´Int√©gration avec Microsoft Visual Studio (Visual C ++ / C #)¬ª.  Le dernier √©l√©ment est responsable de l'int√©gration du plug-in PVS-Studio dans l'IDE Visual Studio, √† travers lequel il est pratique de travailler avec le journal des erreurs et avec les param√®tres g√©n√©raux de l'analyseur lui-m√™me. <br><br>  Pour travailler pleinement avec PVS-Studio, vous devez entrer une licence.  Cela peut √™tre fait en ouvrant Visual Studio IDE (VS) et en entrant la licence dans la fen√™tre 'PVS-Studio | Options ... | Enregistrement'.  Dans VS 2019, le menu PVS-Studio a √©t√© supprim√© dans le menu 'Extensions', donc le chemin d'acc√®s √† la fen√™tre d'entr√©e de licence ressemblera √† ceci: 'Extensions' | 'PVS-Studio | Options ... | Enregistrement'.  La licence peut √™tre obtenue sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site Web</a> . <br><br>  Pour construire des projets UE, ce n'est pas le syst√®me d'assemblage standard utilis√© dans VS-MSBuild qui est utilis√©, mais le propre programme d'Epic Games responsable de l'assemblage - UnrealBuildTool (UBT).  √Ä cet √©gard, le plugin PVS-Studio n'est pas en mesure d'impl√©menter le script habituel pour v√©rifier les projets C ++ / C # cr√©√©s dans VS: ¬´PVS-Studio -&gt; V√©rifier -&gt; Projet actuel¬ª.  Il existe plusieurs solutions pour contourner cette limitation. <br><br><h2>  Effectuer une analyse √† l'aide d'un syst√®me de surveillance de compilation </h2><br>  La premi√®re et la plus simple fa√ßon de v√©rifier l'UE du projet peut √™tre effectu√©e √† l'aide du programme de surveillance du compilateur C et C ++ (appel√© Standalone.exe), qui se trouve dans le r√©pertoire d'installation de PVS-Studio.  Le principe de son travail est de surveiller les lancements de processus correspondant au compilateur cible (cl.exe dans ce cas) et de collecter toutes les informations n√©cessaires au pr√©traitement et √† l'analyse approfondie des fichiers sources.  Apr√®s avoir ouvert la surveillance du compilateur C et C ++, utilisez le menu "Outils" et s√©lectionnez l'option "Analyser vos fichiers (C et C ++) ...".  Appuyez sur le bouton "D√©marrer la surveillance" et vous verrez une fen√™tre appara√Ætre dans le coin inf√©rieur gauche de l'√©cran informant que les appels du compilateur sont surveill√©s: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/c56/21a/d04c5621a3674d9003777275c3698398.png" alt="Image 1"></div><br>  Ensuite, construisez votre projet UE et appuyez sur la touche ¬´Stop Monitoring¬ª. <br><br>  Apr√®s cela, l'analyse des fichiers source qui ont √©t√© compil√©s commencera.  Un rapport des avertissements trouv√©s sera affich√© dans la fen√™tre Sortie de l'analyseur du programme de surveillance du compilateur C et C ++. <br><br>  Un suivi similaire des appels du compilateur et une analyse ult√©rieure des fichiers re√ßus peuvent √™tre effectu√©s √† l'aide du programme de console CLMonitor.exe situ√© dans le m√™me dossier o√π PVS-Studio a √©t√© install√©.  CLMonitor.exe a deux modes de fonctionnement: le mode serveur (lorsque le suivi d√©marre des processus correspondant au compilateur cible) et le mode client (lors de l'analyse des fichiers source re√ßus √† l'√©tape de suivi et de la g√©n√©ration d'un rapport sur les r√©sultats de l'analyse).  Pour ex√©cuter CLMonitor.exe en mode serveur, ex√©cutez la commande suivante: <br><br><pre><code class="cpp hljs">CLMonitor.exe monitor</code> </pre> <br>  Apr√®s cela, g√©n√©rez votre projet UE et ex√©cutez la commande ci-dessous: <br><br><pre> <code class="cpp hljs">CLMonitor.exe analyze -l <span class="hljs-string"><span class="hljs-string">"c:\ptest.plog"</span></span></code> </pre> <br>  La commande ¬´analyse¬ª lance CLMonitor.exe en mode client et ferme l'instance en cours d'ex√©cution de ce programme fonctionnant en mode serveur.  Apr√®s avoir ex√©cut√© cette commande, CLMonitor.exe commencera √† analyser les fichiers.  Le param√®tre de l'option "-l" est le chemin d'acc√®s au fichier dans lequel les r√©sultats de l'analyseur seront √©crits. <br><br><h2>  Ex√©cution d'une analyse √† l'aide de la cl√© -StaticAnalyzer = PVSStudio </h2><br>  Une approche alternative et plus pratique pour l'analyse des projets UE est l'int√©gration directe avec le syst√®me d'assemblage UBT.  Pour ce faire, dans VS, ouvrez la fen√™tre des propri√©t√©s de votre projet UE et s√©lectionnez ¬´NMake¬ª dans la liste ¬´Propri√©t√©s de configuration¬ª.  Ajoutez l'indicateur -StaticAnalyzer = PVSStudio √† la zone de texte de la propri√©t√© Build Command Line.  Par exemple, la valeur du champ ¬´Build Command Line¬ª peut ressembler √† ceci: <br><br><pre> <code class="cpp hljs">C:\Program Files\Epic Games\UE_4<span class="hljs-number"><span class="hljs-number">.22</span></span>\Engine\Build\BatchFiles\Build.bat<span class="hljs-string"><span class="hljs-string">" MyProject Win64 DebugGame -Project="</span></span>$(SolutionDir)$(ProjectName).uproject<span class="hljs-string"><span class="hljs-string">" -WaitMutex -FromMsBuild -StaticAnalyzer=PVSStudio</span></span></code> </pre> <br>  Il convient de noter qu'√† pr√©sent, lors de l'assemblage du projet, seule l'analyse sera effectu√©e, mais l'assemblage lui-m√™me ne sera pas effectu√©.  Un sc√©nario dans lequel l'assemblage et l'analyse ult√©rieure sont effectu√©s sera d√©crit ci-dessous.  Il est √©galement n√©cessaire de comprendre que seuls les fichiers source seront analys√©s qui ont √©t√© modifi√©s depuis la derni√®re g√©n√©ration du projet (si un fichier .h du plug-in a √©t√© modifi√©, ce ne sera pas la raison de l'analyse lors de la prochaine g√©n√©ration).  Pour effectuer une analyse compl√®te, vous devez ajouter le m√™me indicateur au champ de texte de la propri√©t√© ¬´Reconstruire toutes les lignes de commande¬ª.  Maintenant, lorsque vous reconstruisez le projet, vous obtiendrez le r√©sultat de l'analyse de l'ensemble du projet. <br><br><h2>  Script d'analyse en modifiant les fichiers batch </h2><br>  Examinons maintenant un autre sc√©nario d'int√©gration de l'analyseur PVS-Studio dans le syst√®me d'assemblage UBT, dans lequel l'analyse d√©marre imm√©diatement apr√®s la construction / le r√©assemblage du projet, c'est-√†-dire qu'√† la sortie, vous obtenez √† la fois le projet assembl√© et le fichier de r√©sultats d'analyse.  Comme vous l'avez peut-√™tre remarqu√©, le champ Build Command Line contient le chemin d'acc√®s au fichier de commandes Build.bat, qui √† son tour contient des instructions pour d√©marrer UBT avec les arguments n√©cessaires.  Build.bat d√©marre au tout d√©but de la g√©n√©ration. <br><br>  L'id√©e est de modifier le fichier batch afin qu'il d√©marre d'abord UBT avec les arguments de g√©n√©ration standard, et si la phase de g√©n√©ration est termin√©e avec succ√®s, r√©ex√©cutez le m√™me UBT, mais avec l'indicateur suppl√©mentaire -StaticAnalyzer = PVSStudio.  Pour impl√©menter le sc√©nario ci-dessus, vous pouvez modifier le fichier de commandes Build.bat (et il est pr√©f√©rable de cr√©er une copie avec le nom, par exemple, BuildAndAnalyze.bat) comme suit.  Imm√©diatement apr√®s la commande popd, ins√©rez les instructions suivantes: <br><br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS"</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> )</code> </pre> <br>  Si l'indicateur -StaticAnalyzer = PVSStudio a √©t√© pr√©c√©demment d√©fini dans le champ G√©n√©rer la ligne de commande dans les param√®tres du projet ¬´Propri√©t√©s | Propri√©t√©s de configuration | NMake¬ª, il doit √™tre supprim√©. <br><br>  Le probl√®me avec cette approche est que seuls les fichiers qui ont √©t√© compil√©s pendant la phase de construction seront analys√©s.  Autrement dit, vous ne recevrez pas de fichier de rapport avec une v√©rification compl√®te de votre projet.  De plus, aucune modification apport√©e aux fichiers d'en-t√™te .h inclus ne sera √©galement prise en compte.  Par cons√©quent, nous ne pouvons pas appeler une telle analyse incr√©mentielle, car les modifications dans les fichiers d'en-t√™te n'entra√Æneront pas l'analyse lors d'un nouvel assemblage.  Dans ce cas, vous pouvez reconstruire le projet en obtenant un r√©sultat d'analyse pour l'ensemble du projet.  Cependant, cela peut prendre un certain temps pour terminer l'assembly, vous pouvez donc suivre le sc√©nario suivant: cr√©er, supprimer le fichier cache - ActionHistory.bin, d√©marrer l'assembly avec l'indicateur -StaticAnalyzer = PVSStudio et restaurer le fichier cache.  Le fichier ActionHistory.bin contient les informations n√©cessaires pour effectuer des assemblages incr√©mentiels, ainsi que l'historique de d√©marrage de l'analyseur pour les fichiers analys√©s. <br><br>  √Ä premi√®re vue, ce sc√©nario peut ne pas sembler √™tre le plus simple, nous vous fournirons donc un ensemble complet d'instructions sur la fa√ßon de modifier le fichier Build.bat d'origine.  Il convient de noter que ces modifications ne s'appliquent qu'√† Unreal Engine version 4.21 et sup√©rieure.  Apr√®s la commande setlocal enabledelayedexpansion, d√©clarez les variables suivantes: <br><br><pre> <code class="cpp hljs">SET PROJECT_NAME=%<span class="hljs-number"><span class="hljs-number">1</span></span>% SET PLATFORM=%<span class="hljs-number"><span class="hljs-number">2</span></span>% SET UPROJECT_FILE=%~<span class="hljs-number"><span class="hljs-number">5</span></span> SET ACTIONHISTORY_FOLDER= %UPROJECT_FILE%\..\Intermediate\Build\%PLATFORM%\%PROJECT_NAME% SET ACTION_HISTORY=ActionHistory.bin SET ACTION_HISTORY_BAC=%ACTION_HISTORY%.bac SET ACTIONHISTORY_PATH=<span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY%"</span></span> SET ACTIONHISTORY_BAC_PATH= <span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY_BAC%"</span></span></code> </pre> <br>  Imm√©diatement apr√®s l'instruction popd, ins√©rez ces commandes: <br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS="</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis IF EXIST %ACTIONHISTORY_PATH% ( ECHO Copying %ACTION_HISTORY% to %ACTION_HISTORY_BAC% COPY %ACTIONHISTORY_PATH% %ACTIONHISTORY_BAC_PATH% ECHO Removing %ACTION_HISTORY%: %ACTIONHISTORY_PATH% DEL %ACTIONHISTORY_PATH% ) ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> IF EXIST %ACTIONHISTORY_BAC_PATH% ( ECHO Recovering %ACTION_HISTORY% COPY %ACTIONHISTORY_BAC_PATH% %ACTIONHISTORY_PATH% ECHO Removing %ACTION_HISTORY_BAC%: %ACTIONHISTORY_BAC_PATH% DEL %ACTIONHISTORY_BAC_PATH% ) )</code> </pre> <br>  Notez que les variables PROJECT_NAME, PLATFORM et UPROJECT_FILE n√©cessaires pour d√©terminer correctement le chemin d'acc√®s au fichier cache obtiennent leurs valeurs √† partir des arguments de ligne de commande Build.bat.  Si vous avez un ordre diff√©rent de ces arguments, vous devez modifier en cons√©quence l'initialisation des trois variables d√©crites ci-dessus. <br><br><h2>  Analyse incr√©mentale du projet par modification de l'UBT </h2><br>  PVS-Studio peut fonctionner en mode d'analyse incr√©mentielle.  L'analyse incr√©mentielle est destin√©e √† v√©rifier uniquement les fichiers source qui ont √©t√© modifi√©s depuis la derni√®re g√©n√©ration du projet.  En mode d'analyse incr√©mentielle, PVS-Studio d√©marre automatiquement en arri√®re-plan sur la machine du d√©veloppeur imm√©diatement apr√®s la compilation du code et analyse tous les fichiers affect√©s par les modifications.  Vous pouvez trouver un guide plus d√©taill√© sur l'utilisation de PVS-Studio en mode d'analyse incr√©mentielle dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  Avec l'impl√©mentation du mode d'analyse incr√©mentielle pour les projets UE, tout est encore un peu plus compliqu√© qu'avec le sc√©nario de travail standard.  Dans ce cas, afin de pouvoir effectuer une analyse incr√©mentielle (en tenant compte des changements dans les fichiers .h connect√©s), vous devrez apporter vous-m√™me des modifications au syst√®me d'assemblage UBT.  Pour ce faire, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">acc√©dez</a> au r√©f√©rentiel UE sur github.com et clonez-le sur votre machine.  Pour configurer davantage le r√©f√©rentiel clon√©, vous devez suivre les √©tapes r√©pertori√©es dans la section ¬´Mise en route et ex√©cution¬ª de la sous-section ¬´Windows¬ª.  Vous pouvez trouver la section mentionn√©e sur la page principale du r√©f√©rentiel UE officiel.  Une fois que vous avez configur√© votre r√©f√©rentiel, vous pouvez commencer √† apporter des modifications √† UBT.  Pour ce faire, acc√©dez au chemin suivant dans le r√©f√©rentiel clon√©: \ UnrealEngine \ Engine \ Source \ Programs \ UnrealBuildTool.  Ouvrez la solution UnrealBuildTool.sln et dans la fen√™tre Explorateur de solutions, recherchez le fichier PVSToolChain.cs.  Dans ce fichier, ajoutez les lignes de code suivantes √† la classe PVSApplicationSettings: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Whether need incremental analysis or not /// &lt;/summary&gt; public bool IncrementalAnalysis;</span></span></code> </pre> <br>  Cette ligne de code permet de d√©s√©rialiser l'option IncrementalAnalysis du fichier de param√®tres PVS-Studio.  N'oubliez pas d'activer le mode d'analyse incr√©mentielle PVS-Studio lui-m√™me. Pour ce faire, ouvrez l'√©l√©ment de menu principal Extensions dans VS, le sous-menu PVS-Studio, Analyse apr√®s construction (fichiers modifi√©s uniquement), Activ√©.  Ajoutez maintenant les lignes de code suivantes imm√©diatement apr√®s avoir d√©clar√© la variable BaseFileName: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get pvslog file FileReference OutputFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".pvslog"); FileItem OutputFileItem = FileItem.GetItemByFileReference(OutputFileLocation); if (ApplicationSettings.IncrementalAnalysis &amp;&amp; OutputFileItem.Exists) { // Get object file FileReference ObjectFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".obj"); FileItem ObjectFileItem = FileItem.GetItemByFileReference(ObjectFileLocation); if (ObjectFileItem.Exists &amp;&amp; (ObjectFileItem.LastWriteTimeUtc &lt; OutputFileItem.LastWriteTimeUtc)) { continue; } }</span></span></code> </pre> <br>  Apr√®s cela, supprimez les d√©clarations de variable pr√©c√©dentes OutputFileLocation et OutputFileItem ci-dessous dans le code. <br><br>  Pendant le processus d'assemblage du projet UE, un fichier objet .obj est g√©n√©r√© pour chaque fichier source .cpp.  L'id√©e de cette analyse incr√©mentielle est de v√©rifier uniquement les fichiers source .cpp pour lesquels la date de cr√©ation / modification de leur fichier objet est plus r√©cente que celle du fichier de rapport .pvslog (pour chaque fichier source son propre fichier .pvslog est g√©n√©r√©, puis tout Les fichiers .pvslog seront combin√©s en un seul .pvslog final).  Apr√®s avoir apport√© les modifications ci-dessus, compilez l'UBT et copiez le binaire nouvellement collect√© √† l'emplacement de l'UBT d'origine. <br><br>  Tout est pr√™t, maintenant lorsque vous g√©n√©rez le projet UE, vous recevrez un journal de rapport contenant les r√©sultats de l'analyseur uniquement pour les fichiers source qui ont √©t√© compil√©s.  N'oubliez pas qu'une telle modification UBT n'a de sens que si vous avez modifi√© le fichier Build.bat afin qu'il supprime le fichier cache ActionHistory.bin (une description d√©taill√©e de ce sc√©nario a √©t√© d√©crite ci-dessus).  Pour d√©sactiver le mode d'analyse incr√©mentielle, d√©finissez simplement l'option ¬´Analyse apr√®s g√©n√©ration (fichiers modifi√©s uniquement)¬ª d√©crite ci-dessus sur ¬´D√©sactiv√©e¬ª. <br><br>  Permettez-moi de vous rappeler une fois de plus: si vous d√©finissez l'indicateur -StaticAnalyzer = PVSStudio dans le champ Build Command Line dans les param√®tres du projet 'Properties | Configuration Properties | NMake', vous devez le supprimer dans ce sc√©nario. <br><br><h2>  Ouverture du fichier de rapport de l'analyseur et son chargement automatique dans Visual Studio </h2><br>  Par d√©faut, lors de l'analyse d'un UE de projet, le fichier de rapport n'est pas charg√© dans la fen√™tre PVS-Studio dans VS.  Il est simplement enregistr√© par rapport au dossier du projet dans le chemin suivant: \ YouProject \ Saved \ PVS-Studio \.  Pour ouvrir ce fichier dans VS, vous devez utiliser la commande suivante: 'PVS-Studio | Ouvrir / Enregistrer | Ouvrir le rapport d'analyse' et d√©finir l'option 'Sortie non analys√©e' dans l'option de s√©lection du type de fichier.  Vous pouvez √©galement ouvrir le fichier de rapport dans le programme de surveillance du compilateur C et C ++ √† l'aide de cette commande: 'Fichier | Ouvrir le journal PVS-Studio' et √©galement s√©lectionner le type de fichier 'Sortie non analys√©e'. <br><br>  Il existe une option plus pratique pour ouvrir le journal d'analyse - il est automatiquement charg√© dans VS.  Pour le charger automatiquement dans la fen√™tre PVS-Studio dans VS une fois l'analyse termin√©e, vous devez activer l'option correspondante: 'PVS-Studio | Options | Param√®tres sp√©cifiques de l'analyseur | Enregistrer / charger (rapport de l'analyseur) | AutoloadUnrealEngineLog'. <br><br><h2>  T√©l√©chargez et essayez l'analyseur PVS-Studio </h2><br>  En tant qu'auteur de cet article et en tant que personne travaillant directement sur la mise en ≈ìuvre et le support de la fonctionnalit√© PVS-Studio li√©e √† l'analyse de projets construits sur la base du moteur UE, je suis pr√™t √† aider les lecteurs.  Si vous avez des difficult√©s √† utiliser PVS-Studio avec votre projet UE ou si vous avez des questions auxquelles vous n'avez pas trouv√© de r√©ponse dans cet article, je serai heureux de vous parler.  √âcrivez-nous en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">soutien</a> et des lettres me seront remises concernant l'UE et les questions connexes.  Merci de votre attention. <br><br><h2>  Liens annexes </h2><br><ol><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le contr√¥le tant attendu d'Unreal Engine 4</a> .  (14 avril 2014) </li><li>  Pavel Eremeev, Sviatoslav Razmyslov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment l'√©quipe PVS-Studio a am√©lior√© le code Unreal Engine</a> .  (20 juin 2015) </li><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse statique dans le cadre du processus de d√©veloppement d'Unreal Engine</a> .  (27 juin 2017) </li></ol><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Ilya Gainulin.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466479/">https://habr.com/ru/post/fr466479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466465/index.html">Summ3r 0f H4ck 2019: r√©sultats de recherche</a></li>
<li><a href="../fr466467/index.html">Prise en charge des jetons jwt anonymes dans IdentityServer4 utilisant AnonymousIdentity</a></li>
<li><a href="../fr466473/index.html">Comment nous avons cr√©√© le syst√®me IoT pour g√©rer la consommation d'√©nergie solaire</a></li>
<li><a href="../fr466475/index.html">Comment transformer le trafic en ventes en utilisant les donn√©es des utilisateurs du site</a></li>
<li><a href="../fr466477/index.html">Utilisation de PVS-Studio lors de la v√©rification de projets Unreal Engine sur le syst√®me d'exploitation Windows</a></li>
<li><a href="../fr466485/index.html">Voitures √©lectriques des ann√©es 90. Partie 1. Fr√®res Citro√´n et Peugeot</a></li>
<li><a href="../fr466489/index.html">Des ing√©nieurs cor√©ens sugg√®rent d'utiliser Hololens comme alternative aux cloisons de bureau</a></li>
<li><a href="../fr466491/index.html">Projet d'entra√Ænement √† Godot - Pong (Partie 2) Cr√©ation et mise en place du ballon</a></li>
<li><a href="../fr466493/index.html">Docker: Pour commencer. Attention D√©ployer</a></li>
<li><a href="../fr466495/index.html">Comment ne pas se tromper avec la concurrence dans Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>