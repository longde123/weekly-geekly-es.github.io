<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß° üí∫ üë®‚Äçüëß‚Äçüë¶ Introduction au d√©marrage du noyau Linux et aux processus de d√©marrage üå∑ üë¶üèº üçñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Nous avons donc ouvert le suivant, quatri√®me cons√©cutif, du cours Administrateur Linux , qui occupe en toute confiance sa niche √† c√¥t√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introduction au d√©marrage du noyau Linux et aux processus de d√©marrage</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/424761/">  Bonjour √† tous!  Nous avons donc ouvert le suivant, quatri√®me cons√©cutif, du cours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Administrateur Linux</a> , qui occupe en toute confiance sa niche √† c√¥t√© du cours devopersky.  Plus d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">enseignants</a> , plus d'informations et de stands.  Eh bien, comme toujours, des informations plus int√©ressantes que les enseignants ont recueillies. <br><br>  Allons-y. <br><br>  Vous √™tes-vous d√©j√† demand√© ce qui est n√©cessaire pour que votre syst√®me soit pr√™t √† ex√©cuter des applications? <br><br>  Comprendre les processus de chargement du noyau et de d√©marrage du syst√®me Linux est important pour configurer Linux et r√©soudre les probl√®mes de d√©marrage.  Cet article fournit une vue d'ensemble du processus de d√©marrage du noyau √† l'aide du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chargeur de d√©marrage GRUB2</a> et du d√©marrage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ex√©cut√© par le syst√®me d'initialisation systemd</a> . <br><br>  En fait, deux s√©ries d'√©v√©nements sont n√©cessaires pour mettre un ordinateur Linux en √©tat de marche: d√©marrage du noyau (d√©marrage) et d√©marrage du syst√®me (d√©marrage).  Le processus de d√©marrage du noyau d√©marre lorsque vous allumez l'ordinateur et se termine par l'initialisation et le d√©marrage du syst√®me par le noyau.  Apr√®s cela, le processus de d√©marrage du syst√®me commence, et c'est lui qui met l'ordinateur Linux en √©tat de marche. <br><br><img src="https://habrastorage.org/webt/fn/kk/zz/fnkkzz6scajfvnktxj_5hwxavby.png"><a name="habracut"></a><br><br>  En g√©n√©ral, le processus de chargement du noyau et de d√©marrage du syst√®me Linux est assez simple.  Il comprend les √©tapes suivantes, qui seront d√©crites plus en d√©tail dans les sections ci-dessous: <br><br><ul><li>  BIOS POST; </li><li>  Chargement du noyau (GRUB2); </li><li>  Initialisation du noyau; </li><li>  Ex√©cution de systemd, le parent de tous les processus. </li></ul><br>  Veuillez noter que cet article concerne GRUB2 et systemd, car ils sont le programme de chargement et d'initialisation du noyau pour la plupart des distributions.  D'autres options √©taient pr√©c√©demment utilis√©es, et parfois elles peuvent encore √™tre trouv√©es dans certaines distributions. <br><br>  <b>Processus de d√©marrage du noyau</b> <br><br>  Le processus de d√©marrage du noyau peut √™tre lanc√© de plusieurs mani√®res.  Tout d'abord, si l'alimentation est coup√©e, la mise sous tension de l'ordinateur d√©marre le processus de d√©marrage.  Deuxi√®mement, si un utilisateur local est d√©j√† en cours d'ex√©cution sur l'ordinateur, y compris la racine et l'utilisateur non privil√©gi√©, l'utilisateur peut lancer par programme le processus de d√©marrage du noyau √† l'aide de l'interface graphique ou de la ligne de commande pour red√©marrer.  Le red√©marrage √©teindra d'abord l'ordinateur, puis le red√©marrera. <br><br>  <b>POST DU BIOS</b> <b><br></b> <br>  La premi√®re √©tape du processus de d√©marrage du noyau Linux n'a rien √† voir avec Linux.  Il s'agit de la partie mat√©rielle du processus, la m√™me pour tous les syst√®mes d'exploitation.  Lorsque l'ordinateur est aliment√©, la premi√®re chose qui d√©marre est le POST (Power On Self Test), qui fait partie du BIOS (Basic I / O System, Basic Input / Output System). <br><br>  Quand IBM a lanc√© son premier ordinateur personnel en 1981, le BIOS a √©t√© con√ßu pour initialiser les composants mat√©riels.  POST fait partie du BIOS, dont la t√¢che est d'assurer le bon fonctionnement des √©quipements informatiques.  Si le POST √©choue, l'ordinateur peut ne pas fonctionner correctement et le processus de d√©marrage ne se poursuivra pas. <br><br>  BIOS POST v√©rifie les performances de base du mat√©riel, puis provoque une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interruption du</a> BIOS - INT 13H, qui trouve les secteurs de d√©marrage du noyau sur tous les p√©riph√©riques connect√©s avec la possibilit√© de d√©marrer.  Le premier secteur trouv√©, qui contient un enregistrement de d√©marrage valide, est charg√© dans la RAM, apr√®s quoi le contr√¥le est transf√©r√© au code √† partir du secteur de d√©marrage. <br>  Le secteur de d√©marrage n'est que la premi√®re √©tape.  La plupart des distributions Linux utilisent l'une des trois options de chargeur de d√©marrage: GRUB, GRUB2 et LILO.  GRUB2 est le plus r√©cent et est maintenant utilis√© beaucoup plus souvent que les anciennes versions. <br><br>  <b>GRUB2</b> <br><br>  GRUB2 est l'abr√©viation de ¬´GRand Unified Bootloader, version 2¬ª et est d√©sormais le chargeur de d√©marrage principal pour la plupart des distributions Linux modernes.  GRUB2 est un programme qui rend un ordinateur suffisamment intelligent pour qu'il puisse trouver le noyau du syst√®me d'exploitation et le charger en m√©moire.  √âtant donn√© que parler et √©crire simplement GRUB est plus facile que GRUB2, dans cet article, j'utiliserai probablement le terme GRUB, mais j'implique GRUB2, sauf indication contraire. <br><br>  GRUB est compatible avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la sp√©cification multiboot</a> , ce qui lui permet de charger diff√©rentes versions de Linux et d'autres syst√®mes d'exploitation;  il peut √©galement d√©marrer l'enregistrement de d√©marrage des syst√®mes d'exploitation propri√©taires dans une cha√Æne. <br><br>  GRUB permet √©galement √† l'utilisateur de choisir parmi plusieurs t√©l√©chargements de noyau possibles pour toute distribution Linux fournie.  Cela permet de t√©l√©charger la version pr√©c√©dente du noyau si la mise √† jour ne peut pas d√©marrer correctement ou est incompatible avec une partie importante du logiciel.  GRUB peut √™tre configur√© dans le fichier <code>/boot/grub/grub.conf</code> . <br><br>  GRUB1 est maintenant consid√©r√© comme obsol√®te et dans la plupart des distributions modernes remplac√© par GRUB2, qui est sa version r√©√©crite.  Les distributions bas√©es sur Red Hat ont √©t√© mises √† niveau vers GRUB2 autour de Fedora 15 et CentOS / RHEL 7. GRUB2 a la m√™me fonctionnalit√© de d√©marrage que GRUB1, mais en plus il fournit des environnements bas√©s sur des commandes de type mainframe et pr√©-OS et plus de flexibilit√© au stade du pr√©-d√©marrage.  GRUB2 est configur√© dans <code>/boot/grub2/grub.cfg</code> . <br><br>  La t√¢che principale de tout GRUB est de charger le noyau Linux en m√©moire et de l'ex√©cuter.  Les deux versions de GRUB fonctionnent de mani√®re similaire en trois √©tapes, mais dans cet article, j'utiliserai GRUB2 pour d√©crire le fonctionnement de GRUB.  La configuration de GRUB et GRUB2 et l'utilisation des commandes GRUB2 d√©passent le cadre de cet article. <br><br>  Bien que officiellement GRUB2 n'utilise pas de num√©rotation par √©tapes, pour des raisons de commodit√©, je vais l'utiliser dans cet article. <br><br>  <b>√âtape 1</b> <br><br>  Comme d√©j√† mentionn√© dans la section BIOS POST, √† la fin du POST, le BIOS recherche les enregistrements de d√©marrage sur les disques connect√©s, g√©n√©ralement situ√©s dans le Master Boot Record (MBR), apr√®s quoi il charge le premier enregistrement trouv√© en m√©moire et commence √† l'ex√©cuter.  Le code d'amor√ßage, c'est-√†-dire la premi√®re √©tape de GRUB2, prend tr√®s peu d'espace, car il doit tenir dans le premier secteur de 512 octets du disque dur avec la table de partition.  La quantit√© totale d'espace allou√©e au code d'amor√ßage lui-m√™me dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MBR standard</a> est de 446 octets.  Le fichier de 446 octets pour l'√©tape 1 est appel√© boot-img et ne contient pas de table de partition - il est ajout√© √† l'enregistrement de d√©marrage s√©par√©ment. <br><br>  √âtant donn√© que l'enregistrement de d√©marrage doit √™tre si petit, il n'est pas tr√®s ¬´intelligent¬ª et ne comprend pas la structure du syst√®me de fichiers.  Par cons√©quent, le seul but de l'√©tape 1 est de d√©tecter et de charger l'√©tape 1.5.  Pour ce faire, l'√©tape 1.5 de GRUB doit √™tre situ√©e dans l'espace entre l'enregistrement de d√©marrage lui-m√™me et la premi√®re partition sur le disque.  Apr√®s avoir charg√© l'√©tape 1.5 GRUB dans la RAM, l'√©tape 1 transf√®re le contr√¥le √† l'√©tape 1.5. <br><br>  <b>√âtape 1.5</b> <br><br>  Comme indiqu√© ci-dessus, l'√©tape 1.5 de GRUB doit se situer entre l'enregistrement de d√©marrage et la premi√®re partition sur le disque.  Historiquement, cet espace reste inutilis√© pour des raisons techniques.  La premi√®re partition sur le disque dur commence dans le secteur 63, et en tenant compte du MBR dans le secteur 0, il y a 62 secteurs de 512 octets - 31744 octets - dans lesquels vous pouvez stocker le fichier core.img - √©tape 1.5 GRUB.  Le fichier core.img p√®se 25389 octets, ce qui est suffisamment d'espace pour le stocker entre le MBR et la premi√®re partition de disque. <br><br>  √âtant donn√© que davantage de code peut √™tre utilis√© pour l'√©tape 1.5, il peut suffire de contenir plusieurs pilotes de syst√®me de fichiers courants, tels que EXT standard et d'autres syst√®mes de fichiers Linux, FAT et NTFS.  core.img dans GRUB2 est plus complexe et fonctionnel qu'√† l'√©tape 1.5 de GRUB1.  Cela signifie que l'√©tape 2 de GRUB2 peut r√©sider dans un syst√®me de fichiers EXT standard, mais pas dans un volume logique.  Par cons√©quent, l'emplacement standard des fichiers de l'√©tape 2 est le syst√®me de fichiers <code>/boot</code> , ou plut√¥t <code>/boot/grub2</code> . <br><br>  Notez que le r√©pertoire / boot doit se trouver dans le syst√®me de fichiers pris en charge par GRUB.  Tous les syst√®mes de fichiers n'ont pas cette prise en charge.  La t√¢che de l'√©tape 1.5 consiste √† d√©marrer avec les pilotes de syst√®me de fichiers n√©cessaires pour rechercher les fichiers de l'√©tape 2 dans le syst√®me de fichiers / boot et charger les pilotes n√©cessaires. <br><br>  <b>√âtape 2</b> <br><br>  Tous les fichiers GRUB Stage 2 se trouvent dans le r√©pertoire <code>/boot/grub2</code> et plusieurs sous-r√©pertoires.  GRUB2 n'a pas de fichier image comme dans les √©tapes 1 et 2. Au lieu de cela, il se compose principalement de modules de noyau d'ex√©cution, qui sont charg√©s √† partir du <code>/boot/grub2/i386-pc</code> selon les besoins. <br><br>  La t√¢che de l'√©tape 2 de GRUB2 est de d√©tecter et de charger le noyau Linux dans la RAM et de transf√©rer le contr√¥le du contr√¥le informatique au noyau.  Le noyau et ses fichiers associ√©s se trouvent dans le r√©pertoire <code>/boot</code> .  Les fichiers du noyau sont faciles √† reconna√Ætre, car leurs noms commencent par vmlinuz.  Vous pouvez lister le contenu du r√©pertoire <code>/boot</code> pour voir les noyaux actuellement install√©s sur votre syst√®me. <br><br>  GRUB2, comme GRUB1, prend en charge le chargement de plusieurs noyaux Linux.  Le syst√®me de gestion de paquets Red Hat prend en charge le stockage de plusieurs versions du noyau afin que vous puissiez charger l'ancienne version du noyau en cas de probl√®me avec la plus r√©cente.  Par d√©faut, GRUB fournit un menu pr√©charg√© des noyaux install√©s, y compris l'option de secours, et apr√®s la configuration, l'option de r√©cup√©ration. <br><br>  Stage 2 GRUB2 charge le noyau s√©lectionn√© en m√©moire et transf√®re le contr√¥le du contr√¥le informatique au noyau. <br><br>  <b>Le noyau</b> <br><br>  Tous les c≈ìurs sont dans un format compress√© auto-extractible pour √©conomiser de l'espace.  Les noyaux sont situ√©s dans le r√©pertoire <code>/boot</code> , avec l'image de disque RAM d'origine et une liste de partitions sur les disques durs. <br><br>  Une fois que le noyau s√©lectionn√© est charg√© en m√©moire et commence √† s'ex√©cuter, il doit tout d'abord s'extraire de la version compress√©e du fichier avant de commencer √† faire un travail utile.  Une fois l'extraction effectu√©e, il charge <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">systemd</a> , qui remplace l'ancien programme d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">initialisation SysV</a> , et lui transf√®re le contr√¥le. <br><br>  C'est la fin du processus de d√©marrage du noyau.  √Ä ce stade, le noyau Linux et systemd sont en cours d'ex√©cution, mais ne peuvent effectuer aucune t√¢che utile pour l'utilisateur final, car il n'y a rien d'autre √† faire. <br><br>  <b>Processus de d√©marrage du syst√®me</b> <br><br>  Le processus de d√©marrage du syst√®me suit le processus de d√©marrage du noyau et met l'ordinateur Linux en marche. <br><br>  <b>systemd</b> <br><br>  systemd est le parent de tous les processus charg√©s d'amener l'h√¥te Linux √† un √©tat efficace.  Certaines de ses fonctions, plus √©tendues que celles pr√©sent√©es dans l'ancien programme d'initialisation, devraient g√©rer de nombreux aspects de l'h√¥te Linux en cours d'ex√©cution, notamment le montage du syst√®me de fichiers, le d√©marrage et la gestion des services syst√®me n√©cessaires au bon fonctionnement de l'h√¥te Linux.  Toutes les t√¢ches systemd qui ne sont pas li√©es au processus de d√©marrage du syst√®me d√©passent le cadre de la discussion dans cet article. <br><br>  Tout d'abord, systemd monte les syst√®mes de fichiers tels que d√©finis dans <code>/etc/fstab</code> , y compris les fichiers d'√©change et les partitions.  √Ä ce stade, il peut acc√©der aux fichiers de configuration situ√©s dans <code>/etc</code> , y compris le sien.  Il utilise son propre fichier de configuration <code>/etc/systemd/system/default.target</code> pour d√©terminer la cible pour laquelle charger l'h√¥te.  Le fichier default.target n'est qu'un lien symbolique vers le fichier cible r√©el.  Pour un poste de travail de bureau, il s'agit g√©n√©ralement de graphical.target, √©quivalent au niveau d'ex√©cution 5 dans l'ancien initialiseur SystemV.  Pour le serveur, la valeur par d√©faut est probablement multi-user.target, similaire au niveau d'ex√©cution 3 dans SystemV.  emergency.target est similaire au mode mono-utilisateur. <br><br>  Notez que les cibles et les services sont des unit√©s systemd. <br><br>  Le tableau 1 ci-dessous est une comparaison de toutes les cibles systemd avec les anciens niveaux d'ex√©cution de SystemV.  Les alias cibles Systemd sont fournis par systemd pour une compatibilit√© descendante.  Les alias cibles permettent aux scripts - et √† de nombreux administrateurs syst√®me, dont moi - d'utiliser des commandes SystemV telles que init3 pour modifier les niveaux d'ex√©cution.  Bien s√ªr, les commandes SystemV sont dirig√©es par systemd pour l'interpr√©tation et l'ex√©cution. <br><div class="scrollable-table"><table><tbody><tr><th>  Niveau d'ex√©cution Systemv </th><th>  <nobr>cible systemd</nobr> </th><th>  alias <nobr>cibles systemd</nobr> </th><th>  La description </th></tr><tr><td></td><td>  halt.target </td><td></td><td>  Suspend le syst√®me sans couper l'alimentation </td></tr><tr><td>  0 </td><td>  poweroff.target </td><td>  runlevel0.target </td><td>  Met le syst√®me en pause et coupe l'alimentation </td></tr><tr><td>  S </td><td>  emergency.target </td><td></td><td>  Mode utilisateur unique.  Les services ne fonctionnent pas;  les syst√®mes de fichiers ne sont pas mont√©s.  Il s'agit du niveau de fonctionnement le plus √©l√©mentaire.  Pour l'interaction de l'utilisateur avec le syst√®me, seul le shell d'urgence est lanc√© dans la console principale. </td></tr><tr><td>  1 </td><td>  rescue.target </td><td>  runlevel1.target </td><td>  Le syst√®me de base, y compris le montage du syst√®me de fichiers avec l'ensemble de services le plus basique et le shell de sauvetage dans la console principale. </td></tr><tr><td>  2 </td><td></td><td>  runlevel2.target </td><td>  Mode multi-utilisateur, sans NFS, mais tous les services non GUI sont en cours d'ex√©cution. </td></tr><tr><td>  3 </td><td>  multi-user.target </td><td>  runlevel3.target </td><td>  Tous les services sont en cours d'ex√©cution, mais uniquement via l'interface de ligne de commande (CLI). </td></tr><tr><td>  4 </td><td></td><td>  runlevel4.target </td><td>  Non utilis√©. </td></tr><tr><td>  5 </td><td>  graphical.target </td><td>  runlevel5.target </td><td>  Mode multi-utilisateur avec interface graphique. </td></tr><tr><td>  6 </td><td>  reboot.target </td><td>  runlevel6.target </td><td>  Red√©marrer </td></tr><tr><td></td><td>  default.target </td><td></td><td>  Cette cible a toujours un lien symbolique avec multi-user.target ou graphical.target.  systemd utilise toujours default.target pour d√©marrer le syst√®me.  default.target ne doit jamais √™tre associ√© √† halt.target, poweroff.target ou reboot.target. </td></tr></tbody></table></div><br>  <i>Tableau 1: Comparaison des niveaux de contr√¥le SystemV avec les cibles systemd et certains alias cibles.</i> <br><br>  Chaque cible poss√®de un ensemble de d√©pendances d√©crites dans le fichier de configuration.  systemd ex√©cute les fichiers n√©cessaires.  Ces d√©pendances sont les services requis pour ex√©cuter un h√¥te Linux avec un certain niveau de fonctionnalit√©.  Lorsque toutes les d√©pendances r√©pertori√©es dans les fichiers de configuration cible sont charg√©es et d√©marr√©es, le syst√®me fonctionne √† ce niveau cible. <br><br>  systemd analyse √©galement les r√©pertoires d'initialisation SystemV obsol√®tes pour les fichiers de d√©marrage.  Si tel est le cas, systemd les utilise comme fichiers de configuration pour ex√©cuter les services d√©crits dans les fichiers.  Un service r√©seau obsol√®te est un bon exemple de celui qui utilise toujours les fichiers de d√©marrage SystemV dans Fedora. <br><br>  La figure 1 ci-dessous est directement copi√©e √† partir de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page principale de</a> d√©marrage.  Il montre la s√©quence g√©n√©rale des √©v√©nements lors du d√©marrage de systemd et les exigences de base pour garantir son succ√®s. <br><br>  Les cibles sysinit.target et basic.target peuvent √™tre consid√©r√©es comme des points de contr√¥le lors du d√©marrage du syst√®me.  Bien que l'un des objectifs de systemd soit d'ex√©cuter des services syst√®me en parall√®le, certains services et cibles fonctionnelles doivent √™tre lanc√©s avant d'autres.  Ces points de contr√¥le ne peuvent √™tre franchis tant que tous les services et objectifs dont ils ont besoin ne sont pas termin√©s. <br><br>  Ainsi, sysinit.target est atteint lorsque toutes les unit√©s dont il d√©pend sont termin√©es.  Toutes les unit√©s suivantes doivent √™tre compl√©t√©es: montage de syst√®mes de fichiers, configuration de fichiers d'√©change, d√©marrage d'udev, d√©finition de l'√©tat initial du g√©n√©rateur de nombres al√©atoires, initialisation de services de bas niveau, configuration de services cryptographiques si au moins un syst√®me de fichiers est crypt√©.  Dans sysinit.target, ils peuvent √™tre ex√©cut√©s en parall√®le. <br>  sysinit.target ex√©cute tous les services et unit√©s de bas niveau n√©cessaires pour la fonctionnalit√© minimale du syst√®me, et ceux qui sont n√©cessaires pour acc√©der √† basic.target. <br><br><img src="https://habrastorage.org/webt/gx/k_/yj/gxk_yjpanfeksjnoiyfxob5bqlw.png"><br>  <i>Figure 1. Carte de d√©marrage de Systemd</i> <br><br>  Apr√®s avoir ex√©cut√© sysinit.target, systemd lance basic.target, en commen√ßant par toutes les unit√©s n√©cessaires √† son ex√©cution.  La cible de base fournit des fonctionnalit√©s suppl√©mentaires en lan√ßant les unit√©s n√©cessaires pour la prochaine cible, y compris la d√©finition de chemins vers divers r√©pertoires ex√©cutables, des sockets de communication et des minuteurs. <br><br>  Enfin, vous pouvez commencer √† initialiser les cibles de niveau utilisateur: multi-user.target ou graphical.target.  Il convient de noter que multi-user.target doit √™tre atteint avant l'ex√©cution des d√©pendances de la cible graphique. <br><br>  Les cibles soulign√©es dans la figure 1 sont des cibles de d√©marrage typiques.  Le d√©marrage du syst√®me se termine lorsque l'un d'eux est atteint.  Si multi-user.target est la cible par d√©faut, alors dans la console, vous verrez la connexion en mode texte.  Si graphical.target est sp√©cifi√© par d√©faut, vous verrez une connexion graphique;  L'interface graphique de l'√©cran de connexion d√©pend du gestionnaire d'√©cran que vous utilisez. <br><br>  <b>Les probl√®mes</b> <br><br>  J'ai r√©cemment d√ª changer le noyau de d√©marrage par d√©faut sur un ordinateur Linux qui utilisait GRUB2.  J'ai constat√© que certaines commandes ne fonctionnaient plus correctement ou je les ai utilis√©es de mani√®re incorrecte.  Je ne sais toujours pas quel √©tait le probl√®me, il faudra plus de temps pour le rechercher. <br><br>  La commande grub2-set-default a incorrectement configur√© l'index du noyau par d√©faut dans le fichier <code>/etc/default/grub</code> , donc le noyau alternatif souhait√© ne s'est pas charg√©.  J'ai modifi√© manuellement <code>/etc/default/grub GRUB_DEFAULT=saved</code> en <code>GRUB_DEFAULT=2</code> , o√π 2 est l'index du noyau install√© que je voulais ex√©cuter.  Ensuite, j'ai ex√©cut√© la commande <code>grub2-mkconfig &gt; /boot/grub2/grub.cfg</code> pour cr√©er un nouveau fichier de configuration grub.  Cette astuce a fonctionn√© et un noyau alternatif a √©t√© lanc√©. <br><br>  <b>Conclusions</b> <br><br>  GRUB2 et le syst√®me d'initialisation systemd sont des composants cl√©s pour les phases de d√©marrage du noyau et de d√©marrage du syst√®me de la plupart des distributions Linux modernes.  Malgr√© les contradictions, en particulier autour de systemd, ces deux composants fonctionnent bien ensemble pour charger le noyau et ex√©cuter tous les services syst√®me n√©cessaires pour cr√©er un syst√®me Linux fonctionnel. <br>  Bien que je consid√®re GRUB2 et systemd dans leur ensemble plus complexes que leurs pr√©d√©cesseurs, ils ne sont pas plus difficiles √† ma√Ætriser et √† g√©rer.  Les manuels contiennent de nombreuses informations sur systemd, et sur freedesktop.org la liste de ses pages est pr√©sent√©e dans son int√©gralit√©.  Pour plus d'informations, consultez les liens ci-dessous: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GNU GRUB</a> (Wikipedia) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GNU GRUB Manua</a> l (GNU.org) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Enregistrement de d√©marrage principal</a> (Wikipedia) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sp√©cification Multiboot</a> (Wikipedia) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">systemd</a> (Wikipedia) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus de d√©marrage de systemd</a> (Freedesktop.org) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">index systemd des pages de manuel</a> (Freedesktop.org) </li></ul><br><br>  C‚Äôest tout.  Nous attendons ici les questions et commentaires ou ils peuvent √™tre pos√©s directement dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une le√ßon ouverte</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424761/">https://habr.com/ru/post/fr424761/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424747/index.html">L'endroit o√π vit le son</a></li>
<li><a href="../fr424751/index.html">Fonctionnement du syst√®me biom√©trique unifi√©</a></li>
<li><a href="../fr424753/index.html">Nouveaut√©s de YouTrack 2018.3</a></li>
<li><a href="../fr424755/index.html">L'argent aime le projet de loi: comment les voitures trient les factures</a></li>
<li><a href="../fr424757/index.html">Le condens√© des √©v√©nements pour les professionnels des RH dans le domaine des TI en octobre 2018</a></li>
<li><a href="../fr424763/index.html">Un √©diteur de texte n'est pas votre plus haute math√©matique, vous devez penser ici</a></li>
<li><a href="../fr424765/index.html">Gestion des √©tats dans les applications Flutter</a></li>
<li><a href="../fr424767/index.html">Nous faisons un g√¢teau de Habr. Encore une fois</a></li>
<li><a href="../fr424771/index.html">Exp√©rience personnelle: d'une id√©e et d'une feuille blanche √† une version provisoire d'un site</a></li>
<li><a href="../fr424773/index.html">Biopharma et mod√©lisation num√©rique: exp√©rience et pratique d'Amgen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>