<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍕 🎆 🚀 Die ganze Wahrheit über RTOS. Artikel 27. Systemzeit 🎰 😌 🔠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Konzept der Zeit im Kontext von RTOS wurde in einem der vorherigen Artikel zusammen mit der Idee der in RTOS verfügbaren zeitbezogenen Funktionen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Die ganze Wahrheit über RTOS. Artikel 27. Systemzeit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454272/">  Das Konzept der Zeit im Kontext von RTOS wurde in einem der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Artikel</a> zusammen mit der Idee der in RTOS verfügbaren zeitbezogenen Funktionen vorgestellt. <br><br><img src="https://habrastorage.org/webt/u0/4z/bl/u04zbllomewnuxhei-ydrxmaeew.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Frühere Artikel in der Reihe:</b> <div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 26.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kanäle: Nebendienstleistungen und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 25.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Datenkanäle: Einführung und Basisdienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 24.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Warteschlangen: Nebendienstleistungen und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 23.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Warteschlangen: Einführung und Grundversorgung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 22.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Postfächer: Nebendienstleistungen und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 21.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Postfächer: Einführung und Basisdienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 20.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Semaphoren: Nebendienstleistungen und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 19.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Semaphoren: Einführung und Grundversorgung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 18.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ereignisflag-Gruppen: Hilfsdienste und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 17.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ereignisflag-Gruppen: Einführung und Basisdienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 16.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Signale</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 15.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Speicherpartitionen: Dienste und Datenstrukturen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel # 14.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Speicherbereiche: Einführung und Grundversorgung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel Nr. 13.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabendatenstrukturen und nicht unterstützte API-Aufrufe</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 12.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dienstleistungen für die Arbeit mit Aufgaben</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 11.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben: Konfiguration und Einführung in die API</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 10.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheduler: Erweiterte Funktionen und Kontexterhaltung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 9.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheduler: Implementierung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 8.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nucleus SE: Internes Design und Bereitstellung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 7.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nucleus SE: Einführung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Andere RTOS-Dienste</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabeninteraktion und Synchronisation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben, Kontextwechsel und Interrupts</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgaben und Planung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Struktur und Echtzeitmodus</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RTOS: Einführung.</a> <br></div></div><br><h3>  Timer ankreuzen </h3><br>  Alle zeitbezogenen Funktionen werden von einer Hardware-Uhr gesteuert.  Dies ist ein einfacher Oszillator, der in regelmäßigen Abständen Interrupt-Anforderungen generiert.  Damit Taktnummern für Anwendungsprogramme sinnvoll sind, muss die Frequenz des Generators bekannt sein. <br><br><h3>  Timer-Interrupt-Behandlung </h3><br>  Vom Hardware-Timer erzeugte Interrupts müssen auf bestimmte Weise im Interrupt-Handler (Interrupt Service Routine, ISR) bedient werden, der alle zeitbezogenen RTOS-Funktionen implementiert.  Details des Timer-Interrupt-Handlers in Nucleus SE werden in einem der folgenden Artikel erläutert. <br><br><h3>  Zeitbezogene Funktionen </h3><br>  Nucleus RTOS und Nucleus SE enthalten mehrere zeitbezogene Mechanismen: <br><br><ul><li>  <b>System Tick Clock (Tick Clock)</b> : Ein einfacher Zähler, der mithilfe eines Timer-Interrupt-Handlers inkrementiert wird.  Sowohl Nucleus RTOS als auch Nucleus SE verfügen über einen 32-Bit-Zähler, und Aufgaben verfügen über Mechanismen zum Lesen und Schreiben seines Werts.  In Nucleus SE ist ein Zeitgeber optional. </li><li>  <b>Anwendungszeitgeber</b> : Sowohl Nucleus RTOS als auch Nucleus SE unterstützen Zeitgeberobjekte.  Ihre Verwendung und Implementierung in Nucleus SE wird im nächsten Artikel ausführlicher erläutert. </li><li>  <b>Zeitscheibenplanung</b> : In Nucleus RTOS werden Aufgaben mit derselben Priorität mithilfe des Round-Robin-Algorithmus bedient. Sie können jedoch auch Zeitscheiben verwenden.  In Nucleus SE ist ein Zeitscheibenplaner optional.  Dies wurde in früheren Artikeln ausführlich erörtert (eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">allgemeine Ansicht des TS-Schedulers (Zeitscheibe)</a> und des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TS in Nucleus SE</a> ). </li><li>  <b>Unterbrechen einer Aufgabe (Aufgabenschlaf)</b> : Eine Aufgabe kann sich für einen festgelegten Zeitraum selbst anhalten („einschlafen“).  Dieser Mechanismus wurde bereits zuvor ausführlich beschrieben. </li><li>  <b>Zeitüberschreitungen</b> bei <b>API-Aufrufen</b> : In Nucleus RTOS und Nucleus SE können Sie bei einigen API-Aufrufen eine Aufgabe anhalten, während Sie darauf warten, dass eine Ressource verfügbar ist.  Die Pause kann undefiniert sein, oder im Fall von Nucleus RTOS kann eine optionale Zeitüberschreitungsperiode (Wartezeit) angegeben werden.  Nucleus SE unterstützt keine API-Aufrufzeitlimits. </li></ul><br><h3>  Genauigkeit </h3><br>  Und jetzt lohnt es sich, kurz über die Genauigkeit des System-Timers zu sprechen. <br><br>  Die Genauigkeit der Zeitfunktionen hängt direkt von der Frequenz des Taktgenerators ab.  Wenn beispielsweise alle 10 Millisekunden Impulse eintreffen und die Anwendungsaufgabe eine Verzögerung von 100 Millisekunden benötigt, benötigt sie offensichtlich 10 Impulse.  Es ist jedoch nicht bekannt, wann der vorherige Impuls empfangen wurde: Es könnte erst vor fast 10 Millisekunden geschehen sein.  Daher kann eine Verzögerung von 100 Millisekunden bis zu 110 Millisekunden dauern. <br><br>  Ein offensichtlicher Weg, um dieses Problem zu lösen, besteht darin, die Frequenz des Generators zu erhöhen.  Wenn Impulse in Intervallen von 1 Millisekunde folgen, dauert eine Verzögerung von 100 Millisekunden niemals mehr als einhundertein Millisekunden.  Der Nachteil dieser Lösung besteht darin, dass der Timer-Interrupt-Handler zehnmal mehr Prozessorzeit benötigt, was übermäßig ist.  Der Systemdesigner muss ein Gleichgewicht zwischen der erforderlichen Genauigkeit des Timers und der verfügbaren Prozessorleistung finden. <br><br><h2>  Systemzeiteinstellung </h2><br>  Wie bei den meisten Nucleus SE-Objekten wird die Systemzeiteinstellung größtenteils durch die Direktiven <b>#define</b> in der Datei <b>nuse_config.h</b> gesteuert.  Der Hauptparameter ist <b>NUSE_SYSTEM_TIME_SUPPORT</b> , wodurch der Systemzeitunterstützungsmechanismus aktiviert wird.  Sie müssen die Anzahl der Objekte nicht angeben: Die Systemzeit ist entweder aktiviert oder nicht. <br><br>  Die Auswahl eines Werts ungleich Null ist der Hauptaktivator der Systemzeit.  Dieser Parameter wird beim Definieren von Datenstrukturen verwendet, auf die später in diesem Artikel näher eingegangen wird.  Darüber hinaus aktiviert ein Wert ungleich Null die API-Einstellungen. <br><br><h3>  API-Aktivierung </h3><br>  Jede API-Funktion (Dienstprogrammaufruf) in Nucleus SE verfügt über eine aktivierende Anweisung #define in der Datei nuse_config.h.  Für die Systemzeit sind diese Symbole: <br>  <b>NUSE_CLOCK_SET</b> <br>  <b>NUSE_CLOCK_RETRIEVE</b> <br><br>  Standardmäßig sind sie auf <b>FALSE gesetzt</b> , sodass alle Serviceaufrufe deaktiviert sind und die Aufnahme von Code, der sie implementiert, blockiert wird.  Um die Systemzeit in der Anwendung zu konfigurieren, müssen Sie die erforderlichen API-Serviceaufrufe auswählen und auf <b>TRUE setzen</b> . <br><br>  Das Folgende ist ein Codeausschnitt aus der Standarddatei nuse_config.h. <br><br><pre><code class="plaintext hljs">#define NUSE_SYSTEM_TIME_SUPPORT FALSE /*    */ #define NUSE_CLOCK_SET FALSE /*   */ #define NUSE_CLOCK_RETRIEVE FALSE /*    */</code> </pre> <br>  Wenn Sie versuchen, den Systemzeit-API-Serviceaufruf zu verwenden, während der Systemzeitaktivator deaktiviert ist, tritt ein Kompilierungsfehler auf.  Wenn Ihr Code einen API-Aufruf verwendet, der nicht aktiviert wurde, tritt ein Layoutfehler auf, da der Implementierungscode nicht in der Anwendung enthalten war. <br><br><h2>  System Time Utility-Aufrufe </h2><br>  Nucleus RTOS unterstützt zwei Dienstprogrammaufrufe, die sich auf die Systemzeit beziehen und die folgenden Funktionen bieten: <br><br><ul><li>  Einstellen des Wertes der Systemzeit.  Nucleus SE ist in der Funktion <b>NUSE_Clock_Set ()</b> implementiert. </li><li>  Abrufen des Werts der Systemzeit.  Nucleus SE ist in der Funktion <b>NUSE_Clock_Retrieve ()</b> implementiert. </li></ul><br>  Betrachten Sie die Implementierung jedes dieser Aufrufe genauer. <br><br><h2>  Serviceaufrufe zum Einstellen und Abrufen der Systemzeit </h2><br>  Mit der Systemzeit können Sie nur Vorgänge ausführen, bei denen ein bestimmter Wert festgelegt und der aktuelle Wert abgerufen wird.  Nucleus RTOS und Nucleus SE bieten zwei grundlegende API-Aufrufe zur Implementierung dieser Vorgänge. <br><br>  Die Interpretation des Systemzeitwerts hängt von der Anwendung ab, da es sich im Wesentlichen um einen Zähler der Anzahl von "Taktzyklen" handelt, die seit dem letzten Zurücksetzen des Zählers aufgetreten sind.  Um diese Informationen nutzen zu können, muss die Frequenz des Generators bekannt sein. <br><br><h3>  Zeiteinstellung </h3><br>  Jede Aufgabe kann die Systemzeit durch Aufrufen dieser API-Funktion festlegen. <br><br>  <b><i>Rufen Sie auf, um die Systemzeit in Nucleus RTOS einzustellen</i></b> <br><br>  Prototyp eines Serviceabrufs: <br>  <b>VOID NU_Set_Clock (UNSIGNED new_value);</b> <br><br>  Parameter: <br>  <b>new_value</b> - Wert, der der Systemzeit zugewiesen werden soll <br><br>  Rückgabewert: keine. <br><br>  <b><i>Rufen Sie auf, um die Systemzeit in Nucleus SE einzustellen</i></b> <br>  Dieser API-Aufruf unterstützt die Kernfunktionalität der Nucleus RTOS-API. <br><br>  Prototyp eines Serviceabrufs: <br>  <b>void NUSE_Clock_Set (U32 new_value);</b> <br><br>  Parameter: <br>  <b>new_value</b> - Wert, der der Systemzeit zugewiesen werden soll <br><br>  Rückgabewert: keine <br><br>  <b><i>Implementierung der Zeiteinstellung in Nucleus SE</i></b> <br>  Der Code ist sehr einfach.  Der angegebene Wert wird im kritischen Abschnitt in <b>NUSE_Tick_Clock</b> geschrieben. <br><br><h3>  Systemzeit abrufen </h3><br>  Eine Task kann mithilfe dieser API-Funktion den Systemzeitwert ermitteln. <br><br>  <b><i>Rufen Sie an, um die Systemzeit in Nucleus RTOS abzurufen</i></b> <br><br>  Prototyp eines Serviceabrufs: <br>  <b>UNSIGNED NU_Retrieve_Clock (VOID);</b> <br><br>  Parameter: Keine <br><br>  Rückgabewert: aktueller Wert der Systemzeit <br><br>  <b><i>Aufruf, um die Systemzeit in Nucleus SE abzurufen</i></b> <br>  Prototyp eines Serviceabrufs: <br>  <b>U32 NUSE_Clock_Retrieve (void);</b> <br><br>  Parameter: Keine <br><br>  Rückgabewert: aktueller Wert der Systemzeit <br><br>  <b><i>Implementierung der Zeiterfassung in Nucleus SE</i></b> <br>  Der Code ist sehr einfach.  Die Funktion gibt den im kritischen Abschnitt erhaltenen <b>NUSE_Tick_Clock-</b> Wert zurück. <br><br><h2>  Datenstrukturen </h2><br>  Die Systemzeit verwendet eine Datenstruktur (im RAM), bei der es sich um ein 32-Bit-Wort handelt. <br><br>  Ich empfehle dringend, dass der Anwendungscode keinen direkten Zugriff auf diese Datenstruktur verwendet, sondern über die bereitgestellten API-Funktionen darauf zugreift.  Dies vermeidet Inkompatibilität mit zukünftigen Versionen von Nucleus SE und unerwünschte Nebenwirkungen und vereinfacht die Portierung von Anwendungen auf Nucleus RTOS.  Im Folgenden werden Details zu Datenstrukturen bereitgestellt, um das Verständnis des Serviceabrufcodes und des Debuggens zu vereinfachen. <br><br><h3>  RAM-Daten </h3><br>  Datenstruktur: <br>  <b>NUSE_Tick_Clock</b> - eine Variable vom Typ <b>U32</b> , die den <b>Uhrzähler</b> der <b>Systemzeit</b> speichert. <br><br>  Diese Datenstruktur wird von der Funktion <b>NUSE_Init_Task ()</b> beim Start von Nucleus SE auf Null initialisiert.  Einer der folgenden Artikel enthält eine vollständige Beschreibung der Nucleus SE-Startverfahren. <br><br><h3>  ROM-Daten </h3><br>  Es sind keine Datenstrukturen mit der Systemzeit im ROM verknüpft. <br><br><h3>  Die Speichermenge für die Systemzeit </h3><br>  Wie bei allen anderen Nucleus SE-Objekten ist die für die Systemzeit erforderliche Speichermenge vorhersehbar. <br><br>  Die Speichermenge im ROM beträgt 0. <br><br>  Die Speichermenge im RAM (in Bytes) beträgt immer 4. <br><br><h2>  Nicht realisierte API-Aufrufe </h2><br>  Alle Systemzeit-Nucleus RTOS-API-Serviceaufrufe haben in Nucleus SE ein Äquivalent. <br><br><h3>  Kompatibel mit Nucleus PLUS </h3><br>  Wie bei allen anderen Nucleus SE-Objekten war es mein Ziel sicherzustellen, dass der Anwendungscode so kompatibel wie möglich mit Nucleus RTOS ist.  Die Systemzeit ist keine Ausnahme und wird aus Anwendersicht ähnlich wie in Nucleus RTOS implementiert.  Nucleus RTOS API-Aufrufe können direkt auf Nucleus SE portiert werden. <br><br>  Im folgenden Artikel werden wir Software-Timer betrachten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454272/">https://habr.com/ru/post/de454272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454256/index.html">Was ist los mit unserer IT</a></li>
<li><a href="../de454260/index.html">Bad Code Kindertag</a></li>
<li><a href="../de454262/index.html">Warum jeder Datenwissenschaftler Dask kennen sollte</a></li>
<li><a href="../de454264/index.html">4 sinnvolle Youtube-Kanäle zu technischen Interviews</a></li>
<li><a href="../de454266/index.html">Dell und Alienware auf der Computex 2019: Sprechen Sie über wichtige Innovationen</a></li>
<li><a href="../de454274/index.html">Licht, Kamera ... Wolke: Wie Wolken die Filmindustrie verändern</a></li>
<li><a href="../de454278/index.html">Cyberversicherung auf dem russischen Markt</a></li>
<li><a href="../de454280/index.html">Fernentwicklung in VS Code: Ihr Leben wird niemals das gleiche sein</a></li>
<li><a href="../de454284/index.html">Entschuldigung, ich werde nicht zur Arbeit kommen, weil es Winter ist</a></li>
<li><a href="../de454290/index.html">Prinzip der Einzelverantwortung. Nicht so einfach wie es sich anhört</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>