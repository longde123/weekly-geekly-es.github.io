<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛲️ 🐚 🐏 Allure-Android. Laporan informatif untuk otomatisasi seluler 👠 👨🏿‍⚕️ ℹ️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini diterbitkan atas nama Andrey Ivanov dan Ekaterina Bateeva , neifmetus 
 
 Otomasi aplikasi seluler adalah bidang yang agak muda: ada banya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Allure-Android. Laporan informatif untuk otomatisasi seluler</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/433756/">  <i>Artikel ini diterbitkan atas nama Andrey Ivanov dan Ekaterina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Bateeva</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">neifmetus</a></i> <i><br></i> <br>  Otomasi aplikasi seluler adalah bidang yang agak muda: ada banyak kerangka kerja dan banyak proyek dihadapkan dengan masalah memilih yang paling "cepat, stabil, mudah digunakan".  Sekitar dua tahun lalu, kami juga dihadapkan pada pilihan alat otomatisasi baru untuk menguji aplikasi Android. <br>  Semua alat populer entah bagaimana didasarkan pada UIAutomator dan Espresso, jadi kami memutuskan untuk mengujinya dalam bentuk murni dan membandingkannya dengan Appium yang sama (yang paling populer) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seeTest</a> (digunakan sebelumnya, yang terbaik di antara yang berbayar pada waktu itu). <br><br>  Dari kelebihan Appium, seseorang dapat membedakan API WebDriver yang biasa, kemampuan untuk menggunakan bahasa dan pustaka yang paling populer.  Selain itu, ini banyak digunakan di banyak perusahaan dan memungkinkan Anda untuk menulis tes langsung untuk platform iOS dan Android.  Dan akhirnya, ini adalah solusi kotak gratis - apa yang bisa lebih baik? <br><br>  Jadi kami berpikir, sampai kami menemukan kekurangan berikut: <br><ul><li>  stabilitas rendah Appium Server </li><li>  Anda tidak dapat berinteraksi dengan metode publik untuk Kegiatan (pada 2018, Nikolai Abalov dari Badoo berbicara tentang membuat pintu belakang di Appium dalam artikelnya, Anda dapat membaca di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ) </li><li>  sangat rendah dalam kecepatan tes Espresso </li></ul><br>  Bagi kami, momen-momen ini sangat penting, sehingga diputuskan untuk mengumpulkan seperangkat alat kami sendiri di sekitar Espresso untuk membangun ekosistem untuk menguji aplikasi seluler. <br><br>  Jadi, kerangka kerja dipilih, tetap mencari komponen yang tersisa: <br><ol><li>  <b>Pelari</b> - harus memungkinkan untuk menjalankan tes secara paralel dan mengonfigurasi kumpulan perangkat </li><li>  <b>Reporter</b> - harus memberikan laporan yang dapat dibaca yang dapat digunakan oleh anggota tim mana pun </li></ol><br><a name="habracut"></a><br><h3>  Alat-alatnya </h3><br>  Semuanya baik-baik saja dengan pelari, mencari-cari sedikit di github, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">shazam / garpu</a> dipilih. <br>  Ini memungkinkan Anda untuk dengan mudah mengkonfigurasi kumpulan perangkat, mudah dimodifikasi, menghasilkan laporan html sederhana.  Logcat diterapkan untuk setiap laporan, jika terjadi uji stacktrace dan kerusakan video.  Rekaman video tidak berfungsi dengan benar, semua video berdurasi 1 menit, terkadang beberapa tes direkam pada video. <br><br><img src="https://habrastorage.org/webt/no/8r/bn/no8rbnpyzl3jbwin2vgje6renfs.png" alt="gambar"><br><br>  Laporan garpu jauh dari ideal, pengguna akhir tidak mengerti apa yang sedang terjadi dalam pengujian hanya dengan namanya, tanpa harus membawa test case.  Saya ingin memiliki langkah-langkah dengan lampiran file yang memungkinkan saya untuk menyusun laporan.  Pencarian reporter untuk tes instrumentasi menghasilkan 2 varian sendok dan mentimun.  Kedua opsi tersebut dibuang karena banyak tangkapan layar dalam kasus sendok dan bdd dari mentimun tidak menyelesaikan masalah sepenuhnya ... <br><br>  Allure sepertinya solusi paling optimal untuk masalah ini: <br><ul><li>  bersarang langkah-langkah yang memungkinkan Anda untuk menyusun laporan </li><li>  kemampuan untuk merekam data pengujian khusus (tangkapan layar, video, nomor tugas, parameter pengujian) </li><li>  tampilan laporan yang ringkas </li></ul><br>  Tapi ada satu peringatan, Allure tidak dimulai di Android. <br><br><h3>  Allure-android </h3><br>  Sehubungan dengan hal di atas, diputuskan untuk menulis perpustakaan yang menggabungkan kesederhanaan dan keanggunan Kotlin, keuntungan dari kerangka kerja Allure dan dapat bekerja pada ponsel Android.  Untuk menghubungkan perpustakaan, tambahkan dependensi ke modul tempat tes instrumentasi berada: <br><pre><code class="kotlin hljs">dependencies { androidTestImplementation <span class="hljs-string"><span class="hljs-string">"ru.tinkoff.allure:allure-android:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$allureVersion</span></span></span><span class="hljs-string">@aar"</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">"ru.tinkoff.allure:allure-common:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$allureVersion</span></span></span><span class="hljs-string">"</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">"ru.tinkoff.allure:allure-model:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$allureVersion</span></span></span><span class="hljs-string">"</span></span> }</code> </pre> <br><br>  Setelah mengatur dependensi, kita perlu mendaftarkan <b>AllureRunListener</b> ke kelas yang bertanggung jawab untuk menjalankan tes android. <br><br>  Ada tiga cara untuk melakukan ini: <br><ol><li>  Tambahkan ke <b>build.gradle</b> <pre> <code class="kotlin hljs">testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">"ru.tinkoff.allure.android.AllureAndroidRunner"</span></span></code> </pre> </li><li>  Tambahkan <b>pendengar</b> ke argumen di Runner onCreate (argumen: Bundle) <pre> <code class="kotlin hljs">arguments.putCharSequence(<span class="hljs-string"><span class="hljs-string">"listener"</span></span>, AllureAndroidListener::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">)</span></span></code> </pre> </li><li>  Langsung diwarisi dari AllureAndroidRunner </li></ol><br><br>  Laporan daya pikat didasarkan pada langkah - langkah, aksi atom yang dilakukan selama pengujian.  Penjelasan Allure <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Step</a></b> dan <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Parameter</a></b> framework telah diganti dengan panggilan langsung ke fungsi step (). <br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T : Any?&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(description: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vararg</span></span></span></span><span class="hljs-function"><span class="hljs-params"> params: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Parameter</span></span></span></span><span class="hljs-function"><span class="hljs-params">, block: ()</span></span></span></span> -&gt; T): T</code> </pre> <br>  Fungsi ini tidak hanya menggantikan dua anotasi sekaligus, tetapi juga menerima lambda di mana Anda harus membungkus tes logika.  Sebagai contoh: <br><img src="https://habrastorage.org/webt/i8/ud/lu/i8udluoqbpinz6krznamfhaw0gs.png" alt="gambar"><br><br>  Setelah memulai tes, laporan dalam format json yang disiapkan untuk Allure2 akan muncul di ponsel di folder / sdcard / allure-results.  Setelah mengeluarkan hasilnya, tim <br><pre> <code class="bash hljs">adb pull /sdcard/allure-results</code> </pre> <br>  kami dapat menghasilkan laporan <br><pre> <code class="bash hljs">allure generate</code> </pre> <br><br>  Dari fitur tambahan, kita dapat membedakan: <br><ul><li>  kemampuan untuk menginvestasikan langkah satu sama lain </li><li>  di mana saja, Anda dapat memanggil deviceScreenshot (tag: String) untuk mengambil tangkapan layar yang akan secara otomatis dilampirkan ke laporan pada langkah saat ini </li><li>  FailshotRule () - junit4 Rule, akan mengambil tangkapan layar sesaat sebelum musim gugur </li></ul><br><br>  Ini adalah ikhtisar tentang penggunaan Allure di platform Android.  Solusi allure-android tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> , Anda dapat melihat secara detail dan berpartisipasi dalam pengembangan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id433756/">https://habr.com/ru/post/id433756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id433746/index.html">Malvar yang membaca meme</a></li>
<li><a href="../id433748/index.html">Bagaimana dan mengapa mencuri pohon di git</a></li>
<li><a href="../id433750/index.html">Bagaimana kami menghabiskan Winter School "Digital Embedded Systems" di Krasnoyarsk</a></li>
<li><a href="../id433752/index.html">Crazy Kassander tentang nuansa pendidikan desain game di Rusia</a></li>
<li><a href="../id433754/index.html">Kendur akun dari Krimea</a></li>
<li><a href="../id433758/index.html">Prostesis Bionik: ekspresi diri melalui desain</a></li>
<li><a href="../id433760/index.html">Pemilihan, pemilihan ...</a></li>
<li><a href="../id433762/index.html">Bagaimana Anda memilih produk di toko?</a></li>
<li><a href="../id433764/index.html">Kami membuat alat untuk analisis mendalam tentang peringkat aplikasi di Google Play Store</a></li>
<li><a href="../id433768/index.html">Mengapa Pengembang Android Membenci Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>