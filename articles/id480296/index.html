<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“› ğŸ‚ ğŸ¤¾ Pengembangan reaktif bot Telegram ğŸ‘¨ğŸ¿â€âš–ï¸ ğŸµ ğŸ‘ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat siang, Habr'ovchan. 

 Dalam mencari berbagai informasi tentang mengembangkan bot untuk obrolan Telegram di Internet, saya menemukan bahwa sem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengembangan reaktif bot Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480296/">  Selamat siang, Habr'ovchan. <br><br>  Dalam mencari berbagai informasi tentang mengembangkan bot untuk obrolan Telegram di Internet, saya menemukan bahwa semua tutorial cukup penuh dengan mekanisme yang berbeda untuk berinteraksi dengan perpustakaan <a href="https://github.com/go-telegram-bot-api/telegram-bot-api">telegram-bot-api</a> , tidak ada yang sampai pada kesimpulan bahwa kehidupan kawan-kawan harus selalu ditingkatkan di sisi fasilitasi tenaga kerja (programmer secara alami malas), jadi saya memutuskan untuk menulis tutorial saya sendiri menggunakan <a href="https://github.com/liquiddeath13/reactivetgbot">perpustakaan pembungkus</a> saya sendiri, yang saat ini hanya dapat membaca pesan dan mengirim jawaban kepada mereka, tetapi hal pertama yang pertama. <br><a name="habracut"></a><br><h3>  Mengapa chatbots dibutuhkan? </h3><br><img src="https://habrastorage.org/webt/nu/am/jr/nuamjrjtgfrpljq28_e00wbfnae.png"><br>  Topik pengembangan chatbot di zaman kita untuk berbagai jejaring sosial adalah masalah sensitif, sejak diperkenalkannya chatbot: <br><br><ol><li>  Mengurangi waktu respons kepada pengguna untuk pertanyaan yang ia minati (dan untuk minat Anda, kontak cepat dengannya) </li><li>  Mengurangi beban pada dompet perusahaan N untuk menjaga karyawan memproses aplikasi manual </li></ol><br>  Pengenalan chatbot sama sekali tidak berarti bahwa seseorang tidak diperlukan sama sekali, karena selalu ada situasi tertentu yang membutuhkan partisipasi orang yang bertanggung jawab untuk memecahkan masalah tertentu, tetapi itu menyederhanakan dan mengotomatisasi masalah penyelesaian masalah rumah tangga, memproses aplikasi, serta mengirimkan informasi kepada orang yang bertanggung jawab, mempertahankan statistik dan hal-hal lain yang diinginkan jiwa. <br><br>  Karena pengenalan asisten virtual tidak begitu aktif, dan kami sudah secara bertahap memasuki dekade ke-2 abad ke-21, saya menganggap perlu untuk menurunkan ambang batas untuk memasuki topik ini. <br><br>  Mari kita mulai. <br><br>  <b>Perhatian</b> <br><br>  Sebuah proyek yang menggunakan pustaka wrapper yang diimplementasikan tidak menggunakan webhook, tetapi pooling yang lama, karena ia tidak memiliki tujuan penggelaran ke layanan spesifik seperti heroku (namun, ia memiliki fungsi dasar sehingga proyek ini hidup lebih lama atau lebih lama dan tidak tertidur pada panggilan pertama dari distributor. waktu pengoperasian berbagai layanan pengguna heroku lainnya).  Gagasan utama dari proyek ini adalah untuk menyederhanakan pengembangan dan mengurangi jumlah "gerakan" ketika mengembangkan chatbot dengan fungsionalitas dasar - memproses permintaan pengguna yang masuk. <br><br><h3>  Bagaimana cara kerjanya di perpustakaan ini? </h3><br><img src="https://habrastorage.org/webt/xj/hk/rs/xjhkrsj58pvr2mttfklzeg8_gka.png"><br><br>  Sumber data utama adalah kamus tempat chatbot didasarkan (terkandung dalam file JSON dalam format), tetapi juga menyiratkan pemrosesan pesan pengguna dengan menulis logika program mereka sendiri. <br><br>  Pertama, Anda perlu membuat bot di BotFather (kami akan menganggap lebih lanjut bahwa Anda membuat bot dan menerima token).  Sekarang Anda perlu "mengambil" pustaka untuk diri sendiri dengan mengeksekusi perintah <br>  <code>go get "github.com/liquiddeath13/reactivetgbot"</code> . <br><br>  Selanjutnya, Anda perlu membuat file berformat .go dan memasukkan kode berikut di sana: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( reactivetgbot <span class="hljs-string"><span class="hljs-string">"github.com/liquiddeath13/reactivetgbot"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { BotInstance := reactivetgbot.Init(<span class="hljs-string"><span class="hljs-string">"YOUR_BOT_TOKEN"</span></span>, <span class="hljs-string"><span class="hljs-string">"PATH_TO_JSON_DICTIONARY"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> BotInstance != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> BotInstance.Logic() <span class="hljs-comment"><span class="hljs-comment">//if we need host our application on Heroku and shouldn't think about uptime reactivetgbot.HerokuServiceUP("Telegram ChatBot by liquiddeath13") } }</span></span></code> </pre> <br>  Variabel BotInstance berisi tautan ke instance chatbot dengan token yang ditentukan dan jalur ke kamus yang menyimpan pertanyaan dan jawaban. <br><br>  Contoh kamus: <br><br><pre> <code class="json hljs">[ { <span class="hljs-attr"><span class="hljs-attr">"Question"</span></span> : <span class="hljs-string"><span class="hljs-string">"/about"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Answer"</span></span> : <span class="hljs-string"><span class="hljs-string">"ChatBot created by liquiddeath13 in 2019 year"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"Question"</span></span> : <span class="hljs-string"><span class="hljs-string">"Hello, how can i contact with your company?"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Answer"</span></span> : <span class="hljs-string"><span class="hljs-string">"Hello, you can contact us by provided mail address. Email: coolnickname@hostname.domain"</span></span> } ]</code> </pre> <br>  Selanjutnya, chatbot mulai bekerja dengan API Telegram dan mengambil informasi dari sana tentang peristiwa yang terjadi di obrolan di mana ia berada.  Jika pesan yang dijelaskan dalam kamus di bidang Pertanyaan tiba di alamat bot, maka itu akan membalas pesan dengan jawaban yang dipasangkan di bidang Jawaban (yaitu, pesan "Halo, bagaimana saya bisa menghubungi perusahaan Anda?" dalam contoh ini, bot akan menjawab "Halo, Anda dapat menghubungi kami dengan alamat surat yang disediakan. Email: coolnickname@hostname.domain"). <br><br>  Juga, seperti disebutkan sebelumnya, kawan-kawan tingkat lanjut dapat menentukan perilaku bot ketika menerima pesan dengan menambahkan pawang, misalnya: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> reactivetgbot <span class="hljs-string"><span class="hljs-string">"github.com/liquiddeath13/reactivetgbot"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { BotInstance := reactivetgbot.Init(<span class="hljs-string"><span class="hljs-string">"YOUR_BOT_TOKEN"</span></span>, <span class="hljs-string"><span class="hljs-string">"PATH_TO_JSON_DICTIONARY"</span></span>) AskCounter := <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> BotInstance != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { BotInstance.AppendHandler(<span class="hljs-string"><span class="hljs-string">"how much time people asked you?"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Msg reactivetgbot.TGMessage)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { AskCounter++ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"Hello.\n%d - so many time people asked me"</span></span>, AskCounter) }) <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> BotInstance.Logic() reactivetgbot.HerokuServiceUP(<span class="hljs-string"><span class="hljs-string">"Telegram ChatBot by liquiddeath13"</span></span>) } }</code> </pre> <br>  Contoh ini menjelaskan mekanisme untuk memproses pertanyaan "berapa banyak waktu yang ditanyakan orang kepada Anda?".  Sebagai jawaban, bot akan memberi pengguna nilai yang menunjukkan berapa kali pengguna mengajukan pertanyaan yang ditentukan, setelah menambah penghitung. <br><br><h3>  Penempatan di Heroku (tidak ada iklan) </h3><br>  Chatbots, untuk beberapa alasan, merasa tidak enak pada layanan seperti heroku, karena sedikit fungsionalitas ditulis untuk mencegah layanan dari "tertidur" lebih awal, yaitu meniru aktivitas jaringan (mengakses sumber daya web sekali setiap lima menit) <br>  Untuk menempatkan proyek pada Heroku, kita memerlukan utilitas godep, yang akan "mengemas" dependensi dalam proyek.  Anda dapat "mengambilnya" dengan perintah <code>go get github.com/tools/godep</code> , Anda dapat mengemas dependensi dengan menjalankan perintah <code>godep save</code> di folder proyek. <br><br>  Selanjutnya, kita perlu membuat akun di Heroku dan berkenalan dengan <a href="https://devcenter.heroku.com/articles/getting-started-with-go%3Fsinglepage%3Dtrue">panduan penyebaran</a> resmi.  Jika Anda tidak punya banyak waktu untuk membaca, atau jika Anda ingin "semuanya sekaligus di satu tempat", maka semuanya bermuara pada serangkaian perintah berikut: <br><br><ol><li>  Otorisasi pada sumber daya Heroku menggunakan CLI mereka dengan mengeksekusi perintah <code>heroku login</code> </li><li>  Menjalankan perintah <code>git init</code> di folder proyek </li><li>  Menjalankan perintah <code>git remote add heroku **   git' ,       Heroku**</code> </li><li>  Menjalankan perintah <code>git add .</code>  untuk menambahkan semua file ke repositori lokal </li><li>  Menjalankan perintah <code>git commit -m "    ,           commit'"</code> </li><li>  Menempatkan repositori lokal di repositori heroku menggunakan <code>git push heroku master</code> </li></ol><br>  Setelah tindakan selesai, tidak ada lagi yang perlu dilakukan - Heroku akan merakit proyek dalam mode otomatis, dan bot akan melakukan semua pekerjaan rutin untuk Anda atau bawahan Anda. <br>  Untuk memantau siklus hidup suatu layanan web, Heroku memiliki perintah <code>heroku logs --tail</code> , yang memungkinkan Anda untuk memonitor log tindakan terbaru. <br><br><h3>  Pertimbangan pengembangan lebih lanjut </h3><br>  Direncanakan setidaknya untuk memperkenalkan dukungan untuk penangan yang mengembalikan bukan hanya string, tetapi pesan yang dihasilkan (peningkatan untuk mendukung berbagai lampiran dalam bentuk file). <br><br>  upd: Saya sampai pada kesimpulan bahwa mekanisme emulasi yang diterapkan tidak berfungsi seperti yang diharapkan dan layanan tetap terjaga hanya selama 30 menit, dan kemudian "tertidur" hingga langsung mengetuk (tautan ke proyek selalu ada di kantor proyek di Heroku-like) hosters), meskipun mungkin hanya layak <b>ditulis</b> ulang di <b>webhook</b> .  Tinggalkan keinginan saya sendiri, serta <s>kebencian</s> dan ide untuk perbaikan dengan cara apa pun yang nyaman - Saya akan senang mendengar dari Anda. <br><br><h3>  (Mungkin) tautan yang bermanfaat </h3><br>  <a href="https://liquiddeath13.github.io/reactivetgbot">Halaman Proyek Perpustakaan Wrapper</a> <br>  <a href="https://github.com/go-telegram-bot-api/telegram-bot-api">Halaman proyek perpustakaan API Telegram</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id480296/">https://habr.com/ru/post/id480296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id480282/index.html">Sejarah startup kebugaran Peloton: dari penilaian $ 8 miliar hingga iklan yang tidak berhasil dan perkiraan untuk penurunan 85% pada saham</a></li>
<li><a href="../id480284/index.html">Pengalaman (nano) saya dengan Yandex.Maps API atau mengapa saya perlu instruksi</a></li>
<li><a href="../id480288/index.html">Apakah mungkin untuk mengirim dan menerima informasi tanpa batasan jarak dan kecepatan cahaya?</a></li>
<li><a href="../id480290/index.html">Laptop buatan rumah ZedRipper pada enam belas Z80</a></li>
<li><a href="../id480294/index.html">Visi alat berat berkecepatan tinggi di perangkat penyortiran suku cadang LEGO serbaguna</a></li>
<li><a href="../id480300/index.html">Pada 2011, masalah apakah Nginx milik Igor Sysoev atau Rambler</a></li>
<li><a href="../id480304/index.html">Ketik inferensi dalam jscodeshift dan TypeScript</a></li>
<li><a href="../id480306/index.html">Mengapa mengalahkan pintu yang tertutup?</a></li>
<li><a href="../id480310/index.html">Detektif Habra: rahasia editor berita</a></li>
<li><a href="../id480316/index.html">Cara mengurangi konsumsi modul wifi hingga sepuluh kali atau lebih</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>