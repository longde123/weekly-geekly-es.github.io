<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∞ üßëüèø‚Äçü§ù‚Äçüßëüèø üë∑üèª Nuvem privada para a Internet das Coisas üë∑üèª üèÆ üëÜüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sauda√ß√µes, Habr! 

 N√≥s, a equipe de arquitetos de TI da IBM, que atua na cria√ß√£o e marketing de solu√ß√µes industriais para diversos setores. Em nosso ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nuvem privada para a Internet das Coisas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/426135/"><img src="https://habrastorage.org/webt/eg/uo/mr/eguomrkrciqdlubmnmltrvoy7tg.png"><br><br>  Sauda√ß√µes, Habr! <br><br>  N√≥s, a equipe de arquitetos de TI da IBM, que atua na cria√ß√£o e marketing de solu√ß√µes industriais para diversos setores.  Em nosso tempo livre, pesquisamos novas tecnologias, experimentamos e experimentamos as melhores pr√°ticas. <br><br>  Nos √∫ltimos anos, o tema da Internet das Coisas tem sido muito popular.  Nossos clientes perguntam sobre solu√ß√µes e plataformas de caixas universais que podem ser localizadas localmente em seus Data Center.  Mais importante, espera-se que, com base nessas "caixas", todos os novos servi√ßos e aplicativos sejam desenvolvidos e lan√ßados muito rapidamente, ou melhor, instantaneamente ou "ontem". <br><br>  Perguntamos a n√≥s mesmos: "E se reunirmos algo semelhante em tecnologias abertas e p√∫blicas?" <br><a name="habracut"></a><br>  J√° falamos e mostramos muito sobre o uso de cont√™ineres do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker</a> e suas ferramentas de gerenciamento baseadas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kubernetes</a> .  No entanto, at√© agora n√£o foi poss√≠vel ver como todas essas tecnologias avan√ßadas podem ser usadas em escala industrial para tarefas de neg√≥cios, especificamente na Internet das Coisas.  Ent√£o, vamos preencher essa lacuna.  O conceito de microsservi√ßos, bem como abordagens modernas de desenvolvimento (DevOps), integra√ß√£o e implanta√ß√£o de aplicativos (CI / CD) ser√° considerado uma tarefa um pouco diferente e deixada de lado para mais tarde. <br><br>  Neste artigo, queremos falar sobre a prepara√ß√£o e instala√ß√£o de um dos principais componentes - IBM Cloud Private (na verdade, a montagem industrial do Docker / Kubernetes e um pouco mais), que pode atuar como um n√∫cleo de infraestrutura condicional ao criar uma plataforma local da Internet das Coisas.  Pergunte por que ele? <br><br>  Porque prometemos tecnologias abertas e p√∫blicas (vers√£o gratuita para a comunidade e suporte da comunidade): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hub.docker.com/r/ibmcom/icp-inception</a> <br><br><h2>  Vis√£o geral do IBM Cloud Private </h2><br>  O IBM Cloud Private (ICP) √© uma plataforma de nuvem privada para implementa√ß√£o e opera√ß√µes locais.  O ICP √© um ambiente integrado que permite projetar, desenvolver, implantar e gerenciar aplicativos locais criados com a arquitetura de cont√™ineres.  A entrega do ICP inclui um orquestrador baseado em Kubernetes (K8s), uma loja de imagens local, al√©m de um console de gerenciamento e ferramentas de monitoramento de suporte. <br><br><h3>  O que √© uma nuvem privada ou privada? </h3><br>  Uma nuvem privada √© um modelo de computa√ß√£o em nuvem executado exclusivamente para uma organiza√ß√£o, geralmente em seu territ√≥rio e recursos.  Essa nuvem pode ser gerenciada e mantida por seus pr√≥prios especialistas e funcion√°rios terceirizados.  Uma plataforma semelhante pode ser hospedada atr√°s do firewall da empresa e fora dele.  Uma nuvem privada oferece os benef√≠cios de uma nuvem p√∫blica, incluindo r√°pida implanta√ß√£o e escalabilidade, al√©m de facilidade de uso, gerenciamento e flexibilidade.  Ao mesmo tempo, a vers√£o local fornece maior controle sobre o sistema, maior produtividade, custos precisamente previs√≠veis, maiores requisitos de seguran√ßa e recursos flex√≠veis de gerenciamento, dependendo das necessidades da organiza√ß√£o.  Uma nuvem privada permite que voc√™ a configure diretamente para tarefas comerciais espec√≠ficas e requisitos de seguran√ßa do cliente. <br><br>  Antes de prosseguir com a instala√ß√£o do ICP, definiremos a terminologia: <br><br>  <b>N√≥ mestre</b> <br><ul><li>  Monitora e controla o cluster K8s. </li><li>  kubectl: uma ferramenta de linha de comando para gerenciar um cluster. </li><li>  API REST: interface para interagir com n√≥s de trabalho. </li><li>  etcd: √© um keystore persistente e acess√≠vel, usado como o armazenamento de backup do K8s para todos os dados do cluster. </li><li>  kube-scheduler: esse componente supervisiona os cont√™ineres (pods) rec√©m-criados que n√£o possuem um n√≥ designado e seleciona um n√≥ para execut√°-los. </li><li>  Geralmente, s√£o necess√°rios 3 ou mais n√≥s principais para uma opera√ß√£o est√°vel e para garantir a toler√¢ncia a falhas.  No nosso caso, para economizar recursos, instalaremos todos os componentes ICP necess√°rios em um √∫nico servidor dedicado (N√≥ √önico). </li></ul><br>  <b>N√≥ de trabalho</b> <br><ul><li>  A m√°quina de trabalho nos K8s anteriormente conhecida como Minion.  Esse n√≥ pode ser qualquer um dos hosts que recebe tarefas do n√≥ principal e tamb√©m controla o processo de iniciar cont√™ineres.  Dependendo das configura√ß√µes do cluster, o n√≥ de trabalho pode ser uma m√°quina virtual ou um servidor f√≠sico. </li><li>  Os seguintes componentes podem ser executados em cada n√≥: </li><li>  kubelet: √© o principal servi√ßo do n√≥ de trabalho.  Ele monitora os cont√™ineres atribu√≠dos ao seu n√≥ (apirusver para uma conex√£o segura ou atrav√©s de um arquivo de configura√ß√£o local). </li><li>  kube-proxy: exibe os servi√ßos definidos na API do K8s em cada n√≥, suportando regras de rede nas conex√µes de host e encaminhamento. </li><li>  docker: ambiente de lan√ßamento e gerenciamento de cont√™ineres. </li><li>  supervisord: Este √© um processo leve de monitoramento e sistema de controle que voc√™ pode usar para manter o kubelet e o docker em execu√ß√£o. </li><li>  fluentd: este √© um servi√ßo que ajuda a garantir o registro em n√≠vel de cluster. </li></ul><br>  <b>Contentores</b> <br><ul><li>  Um aplicativo em execu√ß√£o em um ambiente isolado. </li><li>  O conjunto de processos execut√°veis ‚Äã‚Äãe a imagem lan√ßada do programa. </li></ul><br>  <b>Casulos (vagens)</b> <br><ul><li>  Um pod √© um grupo de um ou mais cont√™ineres do Docker, com um armazenamento / rede comum e uma especifica√ß√£o de como executar cont√™ineres em um n√≥ de trabalho. </li><li>  Cada Pod tem seu pr√≥prio IP. </li><li>  O pod compartilha o espa√ßo para nome, a rede e o nome do host do PID. </li></ul><br>  <b>Controlador de replica√ß√£o</b> <br><ul><li>  Fornece acessibilidade e escalabilidade. </li><li>  Respons√°vel por controlar o n√∫mero de Pods implantados. </li><li>  Usa um modelo que descreve o que cada Pod deve conter. </li></ul><br>  <b>Etiquetas</b> <br><ul><li>  Metadados atribu√≠dos aos recursos do K8s, por exemplo: cont√™ineres, servi√ßos. </li><li>  Pares de valores-chave anexados a objetos para identifica√ß√£o. </li><li>  Esses par√¢metros s√£o cr√≠ticos porque s√£o baseados em uma solicita√ß√£o de cluster para recursos com r√≥tulos espec√≠ficos. </li></ul><br>  <b>Servi√ßos</b> <br><ul><li>  Uma cole√ß√£o de cont√™ineres expostos como um terminal. </li><li>  Informa√ß√µes sobre o status do cluster K8s e das configura√ß√µes de rede, que se aplicam a todos os n√≥s em funcionamento. </li><li>  Com a configura√ß√£o correta, os pods criados pelo controlador de replica√ß√£o ser√£o registrados automaticamente como o servi√ßo correspondente. </li></ul><br>  <b>Informa√ß√£o secreta (segredos)</b> <br><ul><li>  Informa√ß√µes confidenciais para serem lidas ou usadas por cont√™ineres. </li><li>  Volumes especiais da unidade de disco s√£o montados automaticamente para que os cont√™ineres possam ler o conte√∫do. </li><li>  Cada entrada tem seu pr√≥prio caminho. </li></ul><br><h3>  Arquitetura </h3><br>  Abaixo est√° uma arquitetura ICP de alto n√≠vel que lista os principais componentes por n√≥s principais, de trabalho e proxy.  Vale ressaltar que, neste artigo, a √™nfase principal √© colocada em uma combina√ß√£o de cont√™ineres do Docker e do ambiente de gerenciamento Kubernetes.  Esses componentes de c√≥digo aberto s√£o fundamentais e fundamentais para a plataforma ICP.  No entanto, para trabalhar totalmente com o ICP, voc√™ tamb√©m precisar√° do conhecimento de Helm, o gerente de gerenciamento de pacotes de software.  O K8s √© usado para implantar e hospedar inst√¢ncias de aplicativos incorporadas aos esquemas do Helm, que, por sua vez, se referem √†s imagens do Docker.  Os esquemas de capacete cont√™m informa√ß√µes sobre os detalhes do seu aplicativo e as imagens do Docker cont√™m todos os pacotes de software necess√°rios para executar o aplicativo. <br><br> <a href=""><img src="https://habrastorage.org/webt/ch/hd/is/chhdisgv9bo9fu4bfdow2g1ydmu.png"></a> <br><br>  Para uma introdu√ß√£o detalhada √† arquitetura e aos componentes da plataforma ICP, voc√™ pode usar o link da documenta√ß√£o no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBM Knowledge Center</a> . <br><br><h2>  Prepara√ß√£o </h2><br>  Para concluir confortavelmente a instala√ß√£o do ICP em 20 a 30 minutos, s√£o necess√°rios os seguintes recursos m√≠nimos de hardware e acesso √† Internet: <br>  ‚Ä¢ Um host (f√≠sico ou virtual) <br>  ‚Ä¢ CPU = 8 n√∫cleos (ou n√∫cleos virtuais) <br>  ‚Ä¢ RAM = 10 GB (de fato, podem ser necess√°rios at√© 14 GB) <br>  ‚Ä¢ Disco = 40 GB (no SSD como sempre mais r√°pido) <br><blockquote>  <i><b>Nota:</b> se voc√™ tiver um pouco mais de tempo livre e um pouco menos de recursos de hardware, em algum momento de 40 a 60 minutos poder√° instalar o ICP em 1 n√∫cleo virtual i5 e 10 GB de RAM.</i> </blockquote><br><h2>  Instala√ß√£o </h2><br><h3>  Fa√ßa o download do Ubuntu </h3><br>  Fa√ßa o download da <a href="">vers√£o de</a> distribui√ß√£o do <a href="">Ubuntu Server 16.04.05</a> .  Execute uma instala√ß√£o padr√£o do sistema operacional em uma m√°quina virtual ou f√≠sica com as caracter√≠sticas acima. <br><br><h3>  Obtendo o endere√ßo IP </h3><br>  Depois de concluir o processo de instala√ß√£o do SO, na linha de comandos, descubra o endere√ßo IP da sua m√°quina virtual usando o seguinte comando: <br><br><pre><code class="bash hljs">ifconfig</code> </pre> <br>  Voc√™ precisa escrever / lembrar o endere√ßo IP Ethernet (inet addr), bem como Bcast e Mask.  Estes par√¢metros ser√£o exibidos ap√≥s a execu√ß√£o do comando correspondente: <br> <a href=""><img src="https://habrastorage.org/webt/ao/tp/gh/aotpghosoq-nglwcwwm-1fmn_pk.png"></a> <br>  <i>Figura 1. Um exemplo do comando ifconfig</i> <br><br><h3>  Conex√£o SSH </h3><br>  Se voc√™ usou a fun√ß√£o ‚ÄúInstala√ß√£o F√°cil‚Äù ao configurar a m√°quina virtual, ap√≥s a instala√ß√£o completa do Ubuntu Server, voc√™ precisar√° instalar o servidor OpenSSH.  Voc√™ pode fazer isso com os seguintes comandos: <br><br><pre> <code class="bash hljs">apt install openssh-server sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> sshd</code> </pre> <br>  Ap√≥s executar os comandos apropriados, voc√™ poder√° se conectar √† m√°quina virtual usando SSH.  Dependendo do sistema operacional, voc√™ pode usar diferentes m√©todos de conex√£o.  No Windows, voc√™ pode usar a popular ferramenta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PuTTY</a> ; no MacOS, o comando ssh no terminal. <br><br> <a href=""><img src="https://habrastorage.org/webt/2w/v8/st/2wv8st2har9fplst87-ouu2xn3a.png"></a> <br>  <i>Figura 2. Exemplo de conex√£o via PuTTY para Windows</i> <br><br>  O pr√≥ximo passo √© definir uma senha para o super usu√°rio (root): <br><br><pre> <code class="bash hljs">sudo -i passwd</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/tk/p5/l_/tkp5l_dnzxuaf5-bdlf5j2nllis.png"></a> <br>  <i>Figura 3. Definindo uma nova senha para o usu√°rio root</i> <br><br><h3>  Atualiza√ß√£o da interface de rede </h3><br>  Depois de configurar a capacidade de conex√£o via SSH e atualizar a senha do superusu√°rio, precisamos configurar a interface de rede para determinar os par√¢metros est√°ticos da rede.  Isso √© feito com o seguinte comando: <br><br><pre> <code class="bash hljs">nano /etc/network/interfaces</code> </pre> <br>  Atualizamos as configura√ß√µes da interface de rede (interface de rede prim√°ria) com base nas informa√ß√µes obtidas durante o comando ifconfig, nosso exemplo √© o seguinte: <br><br><pre> <code class="bash hljs">auto ens33 iface ens33 inet static address 192.168.175.7 netmask 255.255.255.0 network 192.168.175.0 broadcast 192.168.175.255 gateway 192.168.175.2 dns-nameservers 192.168.175.2 8.8.8.8</code> </pre> <br><blockquote>  <i><b>Nota: √â</b> importante especificar corretamente o servidor DNS, pois o acesso √† Internet √© necess√°rio para a instala√ß√£o subsequente dos componentes do ICP.</i> </blockquote><br> <a href=""><img src="https://habrastorage.org/webt/u3/cb/v7/u3cbv77no49a5vnxx5jfvb-rena.png"></a> <br>  <i>Figura 4. Configurando a interface de rede</i> <br><br>  Salve o arquivo atualizado usando as seguintes etapas: Ctrl + X, Sim, Enter. <br><br>  Para simplificar o logon em uma m√°quina virtual com privil√©gios de superusu√°rio (raiz), √© necess√°rio fazer altera√ß√µes na configura√ß√£o do servi√ßo SSH.  Para fazer isso, execute o seguinte comando: <br><br><pre> <code class="bash hljs">nano /etc/ssh/sshd_config</code> </pre> <br>  Em seguida, encontre a linha de permiss√£o de acesso e edite-a de acordo: <br><br><pre> <code class="bash hljs">PermitRootLogin yes</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/4h/mg/9c/4hmg9clbw62w0fb_v7enmmptweo.png"></a> <br>  <i>Figura 5. Atualizando a configura√ß√£o SSH</i> <br><br>  Salve o arquivo como na etapa anterior: Ctrl + X, Sim, Enter. <br><br>  Depois de fazer todas as altera√ß√µes, para aplicar os novos par√¢metros, faz sentido reiniciar completamente a m√°quina virtual ou os servi√ßos correspondentes (rede e ssh), por exemplo, com os seguintes comandos: <br><br><pre> <code class="bash hljs">shutdown -r 0</code> </pre> <br>  ou <br><br><pre> <code class="bash hljs">service &lt;service_name&gt; restart</code> </pre> <br>  Ap√≥s reiniciar a m√°quina, voc√™ deve efetuar login novamente atrav√©s do SSH. <br><br><h3>  Atualiza√ß√£o de componentes </h3><br>  Atualize o Ubuntu Server com o seguinte comando (o comando deve ser executado como root): <br><br><pre> <code class="bash hljs">apt update</code> </pre> <br>  Nota: se ocorrer um erro durante a atualiza√ß√£o: "O reposit√≥rio 'cdrom: // Ubuntu-Server 16.04.5 LTS _Xenial Xerus_ - Release amd64 (20180731) xenial Release' n√£o possui um arquivo de Release.".  Voc√™ deve executar o seguinte comando: <br><br><pre> <code class="bash hljs">sudo nano /etc/apt/sources.list</code> </pre> <br>  E comente a linha: <br><br><pre> <code class="bash hljs">deb cdrom:[Ubuntu-Server 16.04.5 LTS ‚Ä¶</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/x4/l8/0w/x4l80wwrr4ovzqd0a_wj3jqy8ki.png"></a> <br>  <i>Figura 6. Corre√ß√£o de um poss√≠vel erro</i> <br><br>  Em seguida, salve o arquivo, conforme feito anteriormente: Ctrl + X, Sim, Enter <br><br>  Depois de corrigir um poss√≠vel erro, execute o comando update novamente e, como resultado, voc√™ ver√° algo assim: <br><br> <a href=""><img src="https://habrastorage.org/webt/iu/i7/7_/iui77_byceas5t0cujkv-1p9ltu.png"></a> <br>  <i>Figura 7. Atualiza√ß√£o do Ubuntu</i> <br><br><h2>  Instale o IBM Cloud Private </h2><br>  Antes de instalar o ICP, voc√™ precisa editar o arquivo hosts: <br><br><pre> <code class="bash hljs">nano /etc/hosts</code> </pre> <br>  Substitua a string 127.0.1.1 ubuntu pelo seu endere√ßo IP e qualquer nome de host adequado. <br><br>  Verifique se o nome do host e o alias na linha est√£o separados por uma guia ou espa√ßo: <br> <a href=""><img src="https://habrastorage.org/webt/ht/jk/ks/htjkkshqzdczphtd999qhxb_unu.png"></a> <br>  <i>Figura 8. Alterando o arquivo hosts</i> <br><br>  Salve o arquivo: Ctrl + X, Sim, Enter <br><br>  Os 2 comandos a seguir permitem atualizar o sistema e instalar m√≥dulos adicionais. <br><br><pre> <code class="bash hljs">apt update apt-get install apt-transport-https ca-certificates curl software-properties-common python-minimal jq</code> </pre> <br>  Verifique se h√° erros no terminal: <br><br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figura 9. Instalando componentes adicionais</i> <br><br>  Aumente a mem√≥ria virtual m√°xima com o comando: <br><br><pre> <code class="bash hljs">sysctl -w vm.max_map_count=262144</code> </pre><br>  Os K8s n√£o ser√£o iniciados com a troca ativada.  Voc√™ pode desativ√°-lo com o comando: <br><br><pre> <code class="bash hljs">swapoff ‚Äìa</code> </pre> <br><blockquote>  <i><b>Nota: os</b> dois comandos anteriores funcionar√£o na sess√£o atual.</i>  <i>Quando voc√™ reinicia, esses par√¢metros ser√£o perdidos e voc√™ precisar√° registr√°-los novamente.</i> </blockquote><br>  A aplica√ß√£o desses par√¢metros ao carregar o sistema operacional pode ser ativada pelos seguintes comandos: <br><br><pre> <code class="bash hljs">sed -i <span class="hljs-string"><span class="hljs-string">'/ swap / s/^/#/'</span></span> /etc/fstab <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"vm.max_map_count=262144"</span></span> &gt;&gt; /etc/sysctl.conf</code> </pre> <br><h3>  Adicionando uma chave GPG </h3><br>  N√≥s usamos o seguinte comando: <br><br><pre> <code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</code> </pre> <br><h3>  Adicionando um reposit√≥rio para instalar o Docker </h3><br>  Para concluir a instala√ß√£o do reposit√≥rio, voc√™ deve executar os 2 comandos a seguir: <br><br><pre> <code class="bash hljs">add-apt-repository <span class="hljs-string"><span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(lsb_release -cs)</span></span></span><span class="hljs-string"> stable"</span></span> apt-get update</code> </pre> <br><h3>  Instalar o Docker </h3><br>  Use o seguinte comando para instalar o Docker (o Docker vers√£o 17.12.1 √© a vers√£o m√°xima suportada para o IBM Cloud Private 2.1.0.3): <br><br><pre> <code class="bash hljs">apt-get install docker-ce=17.12.1~ce-0~ubuntu</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figura 10. Processo de instala√ß√£o do Docker</i> <br><br>  Voc√™ pode verificar a funcionalidade do Docker com o seguinte comando: <br><br><pre> <code class="bash hljs">docker version</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/w3/8y/si/w38ysiwd6porpbipaez4_nghy9i.png"></a> <br>  <i>Figura 11. Verificando o Docker</i> <br><br><h3>  Fa√ßa o download do IBM Cloud Private </h3><br>  Para baixar a imagem do ICP-ce (Community Edition) do recurso dockerHub, √© necess√°rio usar o kit de ferramentas do Docker.  Voc√™ pode fazer isso com o seguinte comando: <br><br><pre> <code class="bash hljs">docker pull ibmcom/icp-inception:2.1.0.3</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/vq/k4/m3/vqk4m3d4o-sclprferxvwcjprte.png"></a> <br>  <i>Figura 12. Fa√ßa o download do ICP</i> <br><br>  A IBM empacotou todos os componentes essenciais necess√°rios para instala√ß√£o em um pacote (observe que voc√™ pode alterar a vers√£o para uma vers√£o mais nova, se necess√°rio).  O comando pull far√° o upload da imagem no sistema de arquivos local (a imagem ser√° iniciada para instalar o ICP). <br><br>  Crie um diret√≥rio e navegue at√© ele: <br><br><pre> <code class="bash hljs">mkdir /opt/icp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp</code> </pre> <br>  Copie o pacote ICP para este diret√≥rio: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/data ibmcom/icp-inception:2.1.0.3 cp -r cluster /data</code> </pre> <br><blockquote>  <i><b>Nota:</b> este comando do Docker toolkit executa o comando Linux copy (cp) no diret√≥rio especificado (op√ß√£o -v).</i>  <i>O diret√≥rio do cluster ser√° criado em / opt / icp com todos os arquivos necess√°rios.</i> </blockquote><br><h3>  Configurar chaves SSH </h3><br>  Crie novas chaves ssh no diret√≥rio / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ssh-keygen -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string"><span class="hljs-string">""</span></span> cat ~/.ssh/id_rsa.pub | sudo tee -a ~/.ssh/authorized_keys systemctl restart sshd cp ~/.ssh/id_rsa ./cluster/ssh_key</code> </pre> <br>  Verifique se a chave foi criada e localizada na pasta / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ls /opt/icp/cluster</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/5t/-f/th/5t-fthfoh0nvegetpvqgs5qcqvm.png"></a> <br>  <i>Figura 13. O conte√∫do da pasta cluster</i> <br><br><h3>  Configura√ß√£o ICP </h3><br>  Adicione o endere√ßo IP de cada n√≥ no cluster ao arquivo / opt / icp / cluster / hosts (no nosso caso, usamos o mesmo endere√ßo IP para cada componente especificado em / etc / hosts).  Fazemos isso com o seguinte comando: <br><br><pre> <code class="bash hljs">nano /opt/icp/cluster/hosts</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/uv/g4/3n/uvg43n_tjis5f-s9x1oakpsfjwi.png"></a> <br>  <i>Figura 14. O conte√∫do do arquivo hosts</i> <br><br>  Salve o arquivo: Ctrl + X, Sim, Enter <br><br>  Informa√ß√µes detalhadas sobre as op√ß√µes de instala√ß√£o podem ser encontradas no arquivo de configura√ß√£o: <br><br><pre> <code class="bash hljs">more /opt/icp/cluster/config.yaml</code> </pre> <br>  N√£o recomendamos alterar as configura√ß√µes de instala√ß√£o padr√£o. <br><blockquote>  <i><b>Nota: Os</b> 2 arquivos de instala√ß√£o mais importantes s√£o hosts e config.yaml, que descrevem as op√ß√µes de instala√ß√£o do ICP.</i>  <i>Em uma configura√ß√£o de v√°rios trabalhadores, voc√™ deve especificar uma lista de endere√ßos IP na se√ß√£o de trabalhadores.</i>  <i>Ao instalar a vers√£o atual do ICP no modo de n√≥ √∫nico, os endere√ßos IP no arquivo hosts s√£o alterados apenas.</i> </blockquote><br><h3>  Instala√ß√£o do ICP </h3><br>  V√° para o diret√≥rio do cluster e execute a instala√ß√£o: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp/cluster docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 install</code> </pre> <br>  Dependendo dos recursos dispon√≠veis, a instala√ß√£o pode durar de 20 a 60 minutos.  Se ocorrerem erros (mensagens vermelhas), fa√ßa as altera√ß√µes apropriadas nos arquivos de configura√ß√£o.  √Äs vezes, a instala√ß√£o pode ficar um pouco mais lenta devido a tentativas de se reconectar aos componentes que ainda n√£o foram iniciados (por exemplo, ao iniciar o Cloudant ou o IAM). <br><br>  A instala√ß√£o deve ficar assim: <br> <a href=""><img src="https://habrastorage.org/webt/ft/9-/8r/ft9-8re-bg2velkh1hlxqdgoecu.png"></a> <br>  <i>Figura 15. Resultado da instala√ß√£o do ICP</i> <br><br>  Em caso de erros, a desinstala√ß√£o do ICP pode ser necess√°ria: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 uninstall</code> </pre> <br>  Antes de prosseguir para a pr√≥xima etapa, aguarde cerca de 5 minutos para que todos os componentes do ICP sejam iniciados com √™xito. <br><br>  Siga o link fornecido ap√≥s a conclus√£o da instala√ß√£o, entre no console do ICP (admin / admin): <br><br><pre> <code class="bash hljs">https://&lt;ip_address&gt;:8443</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/t8/en/-t/t8en-t-wktktunis-pn4phoz2dw.png"></a> <br>  <i>Figura 16. A p√°gina de login do painel de controle</i> <br><br>  P√°gina de boas-vindas do ICP: <br> <a href=""><img src="https://habrastorage.org/webt/ji/bf/t6/jibft6ehclvq8-npu2slawyoxbo.png"></a> <br>  <i>Figura 17. Interface da Web do painel de controle</i> <br><br>  No canto superior direito, selecione o menu Cat√°logo, uma lista de aplicativos dispon√≠veis √© exibida: <br> <a href=""><img src="https://habrastorage.org/webt/3i/_w/tt/3i_wttbjrkwapn7nvohf-fo4ziy.png"></a> <br>  <i>Figura 18. Cat√°logo de componentes</i> <br><br>  Este diret√≥rio cont√©m uma lista de aplicativos e software, cuja descri√ß√£o voc√™ pode estudar √† vontade, mas at√© agora n√£o se apressa em implement√°-los. <br>  Ainda precisamos aprender a lidar adequadamente com o ICP rec√©m-instalado (n√£o apenas atrav√©s da interface da Web, mas tamb√©m do console na forma da CLI - Command Line Interface), conectar o armazenamento persistente e fazer pequenas configura√ß√µes. <br><br><h2>  Em conclus√£o </h2><br>  Para resumir. <br><br>  Implementamos com sucesso a edi√ß√£o da comunidade IBM Cloud Private (vers√£o 2.1.0.3) em um host em uma m√°quina virtual executando o Ubuntu Server OS 16/04/05.  No momento, verificamos pessoalmente a instala√ß√£o nos hipervisores VMware e Hyper-V, ela definitivamente funciona no XenServer e n√£o deve haver dificuldades para o VirtualBox e o KVM. <br><br>  Quem realmente est√° ansioso para aprofundar o estudo do ICP, ou seja, uma excelente sele√ß√£o do trabalho de laborat√≥rio de nosso colega aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/phthom/IBMCloudPrivate</a> <br><br>  Das pr√≥ximas etapas - ap√≥s uma nova instala√ß√£o, precisamos apenas configurar um pouco o ICP e come√ßar a preench√™-lo com algo √∫til e pr√≥ximo a tarefas pr√°ticas. <br><br>  Se a comunidade Habr apoiar positivamente essa iniciativa, √† medida que nossas pesquisas e experimentos progredirem, preencheremos o n√∫cleo da plataforma com os componentes necess√°rios para coleta de telemetria, armazenamento de dados, processamento, an√°lise, previs√£o, forma√ß√£o de interfaces de programa externas e cria√ß√£o de aplicativos do usu√°rio.  Por conseguinte, desenvolvendo uma s√©rie de tais artigos. <br><br>  √Ä espera de seus coment√°rios e sugest√µes! <br><br>  Al√©m disso, nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pessoal</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AIXportal.ru</a> preparou um maravilhoso videoclipe sobre a instala√ß√£o do IBM Cloud Private em seu canal no Youtube; algu√©m ficar√° mais √† vontade assim: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">youtu.be/eQwOOTzjM24</a> <br><br><h2>  Links e materiais √∫teis </h2><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">P√°gina do produto em russo</a> <br>  ‚Ä¢ Quem quer praticar ingl√™s, o livro - ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ICP for Dummies</a> ‚Äù 2018.  (40 p√°ginas) <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigos t√©cnicos sobre o ICP 2.1.0.3</a> no IBM Knowledge Center <br>  ‚Ä¢ Comunidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ICP</a> aberta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no IBM developerWorks</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Receitas ICP para desenvolvedores</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt426135/">https://habr.com/ru/post/pt426135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt426121/index.html">MC.exe (compilador de mensagens), rc.exe, link.exe para gerar .dll para EventMessageFile</a></li>
<li><a href="../pt426123/index.html">Aprenda o OpenGL. Li√ß√£o 6.1. PBR ou renderiza√ß√£o fisicamente correta. Teoria</a></li>
<li><a href="../pt426125/index.html">Ester√≥ides de carreira. Elevadores</a></li>
<li><a href="../pt426131/index.html">Fa√ßa o download da configura√ß√£o para FPGA via USB ou desmonte o FTDI MPSSE</a></li>
<li><a href="../pt426133/index.html">Apresentando a vers√£o alfa dos snapshots de volume no Kubernetes</a></li>
<li><a href="../pt426137/index.html">Era da Honestidade</a></li>
<li><a href="../pt426141/index.html">Red Hat substitui Docker por Podman</a></li>
<li><a href="../pt426143/index.html">Anima√ß√£o 3D - v√≠deo ou interativa?</a></li>
<li><a href="../pt426145/index.html">Workshop de aceita√ß√£o independente, 23 de outubro de Moscou</a></li>
<li><a href="../pt426149/index.html">Fa√ßa voc√™ mesmo o instalador Python para Android criado a partir do TeamCity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>