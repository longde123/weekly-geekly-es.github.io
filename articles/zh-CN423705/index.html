<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔘 🖕🏻 🌰 Node.js手册，第5部分：npm和npx 😑 🛒 🤞🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今天，在Node.js手册翻译的第五部分中，我们将完成对npm功能的分析，特别是，我们将涉及诸如发现npm软件包的已安装版本，安装旧版本的软件包，更新依赖项，本地和全局卸载软件包等问题。 在这里，我们谈论npx。 

  

 [我们建议您阅读]周期的其他部分  第1部分： 一般信息和入门 
 第2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Node.js手册，第5部分：npm和npx</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423705/"> 今天，在Node.js手册翻译的第五部分中，我们将完成对npm功能的分析，特别是，我们将涉及诸如发现npm软件包的已安装版本，安装旧版本的软件包，更新依赖项，本地和全局卸载软件包等问题。 在这里，我们谈论npx。 <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">[我们建议您阅读]周期的其他部分</b> <div class="spoiler_text"> 第1部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一般信息和入门</a> <br> 第2部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaScript，V8，一些开发技巧</a> <br> 第3部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">托管，REPL，使用控制台，模块</a> <br> 第4部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm，package.json和package-lock.json文件</a> <br> 第5部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm和npx</a> <br> 第6部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">事件循环，调用堆栈，计时器</a> <br> 第7部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">异步编程</a> <br> 第8部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node.js指南，第8部分：HTTP和WebSocket协议</a> <br> 第9部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node.js指南，</a>第9 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分：使用文件系统</a> <br> 第10部分： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node.js指南，第10部分：标准模块，流，数据库，NODE_ENV</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node.js指南的完整PDF</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">找出已安装的npm软件包的版本</font> </h2><br> 为了找出安装在项目文件夹中的所有npm软件包的版本，包括它们的依赖关系，请运行以下命令： <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list</code> </pre> <br> 结果，例如，可能会导致以下结果： <br><br><pre> <code class="hljs mel">&gt; npm list /Users/flavio/dev/node/cowsay └─┬ cowsay@1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├── get-stdin@5<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├─┬ optimist@0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── minimist@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> │ └── wordwrap@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> ├─┬ <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>-width@2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── is-fullwidth-code-point@2<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │ └─┬ <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-ansi@4<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │  └── ansi-regex@3<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> └── <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-eof@1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br> 通过查看项目的<code>package-lock.json</code>您可以找到相同<code>package-lock.json</code>内容，但是上述命令显示的树结构更易于查看。 <br><br> 为了获得全局安装的软件包的类似列表，可以使用以下命令： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list -g</code> </pre> <br> 您只能显示有关本地顶级软件包（即，您自己安装的软件包以及在<code>package.json</code>中列出的软件包）的信息，如下所示： <br><br><pre> <code class="hljs pgsql">npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0</span></span></code> </pre> <br> 结果，例如，如果仅安装了Cowsay软件包，将显示以下内容： <br><br><pre> <code class="hljs pgsql">&gt; npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0 /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br> 要查找特定软件包的版本，请使用以下命令： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list cowsay</code> </pre> <br> 由于其实施，我们大致得到以下结果： <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; npm list cowsay /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br> 此命令还适用于找出所安装软件包的依赖版本。 在这种情况下，依赖程序包的名称将作为传递给它的程序包的名称，命令的输出将如下所示： <br><br><pre> <code class="hljs perl">&gt; npm list minimist /Users/flavio/dev/node/cowsay └─┬ cowsay@1.<span class="hljs-number"><span class="hljs-number">3.1</span></span> └─┬ optimist@0.<span class="hljs-number"><span class="hljs-number">6.1</span></span>   └── minimist@0.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br> 在此结构中，有关依赖性包的条目将突出显示。 <br><br> 如果您想知道npm存储库中可用的软件包的最新版本号是多少，您将需要以下格式的命令： <br><br><pre> <code class="hljs pgsql">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> [package_name] <span class="hljs-keyword"><span class="hljs-keyword">version</span></span></code> </pre> <br> 作为回应，她发布了软件包的版本号： <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">1.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">安装旧版本的npm软件包</font> </h2><br> 解决兼容性问题可能需要安装旧版本的npm软件包。 您可以使用以下结构从npm安装所需的软件包版本： <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt;@&lt;<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>&gt;</code> </pre> <br> 以Cowsay软件包为例，npm <code>install cowsay</code>安装其最新版本（在撰写本文时为1.3.1）。 如果需要安装其版本1.2.0，请使用以下命令： <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cowsay</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">1</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">2</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">0</span></span></code> </pre> <br> 您可以通过安装全局软件包来指定版本： <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-g</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">webpack</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">4</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">16</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">4</span></span></code> </pre> <br> 如果您需要找出npm中可用的软件包版本，可以在以下构造的帮助下进行操作： <br><br><pre> <code class="hljs vhdl">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt; versions</code> </pre> <br> 这是她的工作成果的一个例子： <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay versions [ <span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.4'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.5'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.6'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.7'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.8'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.9'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.1'</span></span> ]</code> </pre> <br><h2>  <font color="#3AC1EF">将项目依赖项更新到最新版本</font> </h2><br> 使用<code>npm install &lt;packagename&gt;</code>类型的命令安装软件包时，将从存储库下载最新版本并将其放置在<code>node_modules</code>文件夹中。 在这种情况下， <code>package-lock.json</code>相应的条目添加到项目文件夹中的<code>package.json</code>和<code>package-lock.json</code>中。 <br><br> 另外，通过安装软件包，npm查找并安装其依赖项。 <br><br> 假设我们通过运行<code>npm install cowsay</code>安装熟悉的Cowsay软件包。 该软件包将安装在项目的<code>node_modules</code>文件夹中，并且以下条目将位于<code>package.json</code>文件中： <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.3.1"</span></span> } }</code> </pre> <br>  <code>package-lock.json</code>也将包含有关此软件包的信息。 这是其中的一部分： <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lockfileVersion"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.3.1"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"resolved"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"integrity"</span></span>: <span class="hljs-string"><span class="hljs-string">"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ=="</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">"get-stdin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.0.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"optimist"</span></span>: <span class="hljs-string"><span class="hljs-string">"~0.6.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"string-width"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.1.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"strip-eof"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.0"</span></span>     }   } } }</code> </pre> <br> 从这两个文件中，您可以发现我们安装了Cowsay版本1.3.1，并且软件包更新规则指定为<code>^1.3.1</code> 。 在本系列文章的第四部分中，我们已经讨论了语义版本控制的规则。 回想一下，该条目意味着npm可以在发布次要版本和修补程序版本时更新软件包。 <br><br> 例如，如果出现新的次要版本的软件包并运行<code>npm update</code>命令，则将更新软件包的已安装版本，并在<code>package-lock.json</code>文件中更新有关已安装软件包的信息，并且<code>package.json</code>文件保持不变。 <br><br> 为了确定是否已发布项目中使用的软件包的新版本，可以使用以下命令： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> outdated</code> </pre> <br> 这是该项目的依赖项已长时间未更新的结果： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a65/820/68f/a6582068f2d230e7f7699324aeefff84.png"></div><br>  <i><font color="#999999">不推荐使用的项目依赖关系分析</font></i> <br><br> 一些可用的软件包更新是其主要发行版，执行<code>npm update</code>命令时不会进行<code>npm update</code> 。 该团队不会升级到主要版本，因为它们（根据定义）可能包含无法通过与以前的主要版本向后兼容来区分的主要更改，npm旨在使开发人员免受可能导致使用此类软件包的问题的困扰。 <br><br> 为了升级到所有使用过的软件包的新主要版本，请全局安装<code>npm-check-updates</code>软件包： <br><br><pre> <code class="hljs powershell">npm install <span class="hljs-literal"><span class="hljs-literal">-g</span></span> npm<span class="hljs-literal"><span class="hljs-literal">-check</span></span><span class="hljs-literal"><span class="hljs-literal">-updates</span></span></code> </pre> <br> 然后运行他提供的实用程序： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ncu</span></span> -u</code> </pre> <br> 该命令将更新<code>package.json</code>文件，并在<code>dependencies</code>和<code>devDependencies</code>更改适用的软件包版本的说明。 运行<code>npm update</code>命令后，这将允许npm将项目中使用的软件包更新到新的主要版本。 <br><br> 如果要为刚刚下载的项目安装最新的软件包版本，而该版本尚未具有<code>node_modules</code>文件夹，请运行<code>npm install</code>命令，而不是<code>npm update</code> 。 <br><br><h2>  <font color="#3AC1EF">本地或全局卸载软件包</font> </h2><br> 要卸载以前在本地<code>install &lt;package-name&gt;</code> （使用<code>install &lt;package-name&gt;</code>命令），请运行如下所示的命令： <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>&gt;</code> </pre> <br> 如果该软件包是全局安装的，则需要使用<code>-g</code> <code>(--global</code> ）标志将其删除。 例如，类似的命令可能如下所示： <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> -g webpack</code> </pre> <br> 执行这样的命令时，当前文件夹无关紧要。 <br><br><h2>  <font color="#3AC1EF">关于在软件包的全局安装和本地安装之间进行选择</font> </h2><br> 什么时候以及为什么最好在全球范围内安装软件包？ 为了回答这个问题，让我们回顾一下软件包的本地安装和全局安装如何不同： <br><br><ul><li> 本地软件包安装在目录中，它们在其中执行<code>npm install &lt;package-name&gt;</code>格式的命令。 此类软件包位于此目录中的<code>node_modules</code>文件夹中。 </li><li> 全局软件包安装在一个特殊的文件夹中（该文件夹取决于系统的特定设置），无论它们在何处执行<code>npm install -g &lt;package-name&gt;</code>格式的命令。 </li></ul><br> 在代码中连接本地和全局程序包是相同的： <br><br><pre> <code class="hljs lisp">require('package-name')</code> </pre> <br> 那么安装软件包的最佳方法是什么？ <br><br> 通常，所有软件包都应在本地安装。 因此，即使您有数十个Node.js项目，也可以确保在必要时使用相同软件包的不同版本。 <br><br> 更新全局软件包会导致一个事实，即应用该软件包的所有项目都将使用其新版本。 很容易理解，就项目支持而言，这可能会导致一场真正的噩梦，因为某些软件包的新发行版可能与其旧版本不兼容。 <br><br> 如果每个项目都有其自己的本地版本的软件包，即使这看起来像是在浪费资源，但这也是一笔很小的费用，可以避免由于以项目代码集中更新的新版本软件包不兼容而造成的负面影响。 <br><br> 当软件包是在许多项目中使用的从命令行调用的某些实用程序时，应在全局安装软件包。 <br><br> 也可以通过运行它们使用npx提供的命令行实用程序在本地安装此类软件包，但是某些软件包在全球范围内仍可以更好地安装。 您可能非常熟悉的此类软件包包括，例如： <br><br><ul><li>  npm </li><li> 创建反应应用 </li><li>  Vue-Cli </li><li> 咕-声 </li><li> 摩卡咖啡 </li><li> 反应本机 </li><li> 盖茨比克利 </li><li> 永远 </li><li>  Nodemon </li></ul><br> 您的系统可能已经全局安装了软件包。 要查找有关此问题，请使用以下命令： <br><br><pre> <code class="hljs powershell">npm list <span class="hljs-literal"><span class="hljs-literal">-g</span></span> -<span class="hljs-literal"><span class="hljs-literal">-depth</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">关于项目依赖</font> </h2><br> 何时应将软件包视为确保其正常运行所必需的常规项目依赖项，以及何时将其视为开发依赖项？ <br><br> 使用<code>npm install &lt;package-name&gt;</code>类的命令<code>npm install &lt;package-name&gt;</code>它将作为常规依赖项安装。 在<code>package.json</code>文件的<code>dependencies</code>部分中记录了此类软件包（在npm 5之前，仅使用<code>--save</code>标志进行了记录，现在无需使用它）。 <br><br> 使用<code>--save-dev</code>标志可让您将软件包安装为开发依赖项。 同时，在<code>devDependencies</code>文件的<code>devDependencies</code>部分中进行了记录。 <br><br> 开发依赖项是在项目开发过程中所需的软件包；在其正常运行期间，不需要它们。 此类软件包包括例如测试工具Webpack，Babel。 <br><br> 当使用<code>npm install</code>命令在其文件夹中部署项目时，该文件夹中有一个包含<code>package.json</code>文件的文件夹，这将导致所有依赖项的安装，因为npm假定执行此类安装是为了处理该项目。 <br><br> 因此，如果需要在生产中部署该软件包，则在部署它时，需要使用npm <code>install --production</code> 。 由于使用了<code>--production</code>标志，因此将不会安装<code>--production</code>依赖项。 <br><br><h2>  <font color="#3AC1EF">Npx实用程序</font> </h2><br> 现在，我们将讨论一个非常强大的团队<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npx</a> ，它出现在npm 5.2中。 它的功能之一是运行npm软件包中包含的可执行文件。 我们已经考虑过使用npx从Cowsay包中运行类似的文件。 现在让我们更详细地讨论这一点。 <br><br><h3>  <font color="#3AC1EF">▍使用npx简化运行本地命令</font> </h3><br>  Node.js开发人员以应该在全球范围内安装的软件包的形式发布了许多可执行文件（实用程序），这提供了对其功能的便捷访问，因为您只需输入相应命令的名称即可从命令行运行它们。 但是，如果需要安装同一软件包的不同版本，则在这样的环境中工作非常不舒服。 <br><br> 使用<code>node_modules</code> <code>npx commandname</code>形式的命令<code>npx commandname</code>在项目文件夹<code>node_modules</code>自动搜索所需的文件。 这样就无需知道此类文件的确切路径。 这也使程序包的全局安装不再必要，从而可以通过使用<code>PATH</code>系统变量从文件系统中的任何位置对其进行访问。 <br><br><h3>  <font color="#3AC1EF">utilities无需安装即可执行实用程序</font> </h3><br>  Npx具有另一个有趣的功能，这是由于无需先安装即可启动实用程序。 这主要是有用的，原因如下： <br><br><ul><li> 无需安装实用程序。 </li><li> 通过使用<code>@version</code>构造指定所需的版本，可以运行相同实用程序的不同版本。 </li></ul><br> 让我们看看如何使用已经知道的<code>cowsay</code>实用程序来使用这种机制。 因此，如果在全球范围内安装了cowsay软件包，则在命令行上执行<code>cowsay "Hello"</code>命令将向控制台输出一个“ talking” cow： <br><br><pre> <code class="hljs tex">_______ &lt; Hello &gt; -------       <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>^__^        <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>(oo)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span></span>______           (__)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">/</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>              ||----w |               || ||</code> </pre> <br> 如果Cowsay软件包未全局安装，则类似的命令将引发错误。 <br><br>  npx实用程序使您无需安装即可执行此类命令。 在我们的示例框架中，它看起来像这样： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npx</span></span> cowsay <span class="hljs-string"><span class="hljs-string">"Hello"</span></span></code> </pre> <br> 这样的命令将起作用，但是尽管总的来说，“会说话的”母牛并没有带来太多好处，但是可以使用相同的方法来执行更多有用的命令。 以下是一些示例： <br><br><ul><li> 有一个用于创建和运行Vue应用程序的命令行工具。 使用npx可以这样称呼： <code>npx vue create my-vue-app</code> 。 </li><li> 您可以使用<code>create-react-app</code>实用程序<code>create-react-app</code> React应用程序。 她通过npx进行的呼叫如下所示： <code>npx create-react-app my-react-app</code> 。 </li></ul><br> 下载并使用适当的npx代码后，它将被删除。 <br><br><h3>  <font color="#3AC1EF">using使用各种版本的Node.js启动JavaScript代码</font> </h3><br> 为了使用不同版本的Node.js运行某些​​代码，您可以使用npx访问npm包<code>node</code> ，以指示其版本。 看起来像这样： <br><br><pre> <code class="hljs perl">npx node@6 -v <span class="hljs-comment"><span class="hljs-comment">#v6.14.3 npx node@8 -v #v8.11.3</span></span></code> </pre> <br> 这样就无需使用nvm或Node.js的其他版本管理器之类的工具。 <br><br><h3>  <font color="#3AC1EF">▍开始在某个地址可用的任意代码片段</font> </h3><br>  Npx不仅允许您运行npm中发布的代码。 特别是，如果您具有指向特定代码段的链接（例如，发布在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub上</a>的要点），则可以这样运行它： <br><br><pre> <code class="hljs objectivec">npx https:<span class="hljs-comment"><span class="hljs-comment">//gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</span></span></code> </pre> <br> 当然，在执行此类代码时，您不应忘记安全性。  Npx给开发人员带来了巨大的机会，但同时也意味着巨大的责任。 <br><br><h3>  <font color="#3AC1EF">▍结果</font> </h3><br> 今天，我们讨论了一些有用的npm机制和npx的用法。 至此，您应该对npm设备以及如何使用此软件包管理器有基本的了解。 如果您想更深入地了解npm，请查看项目的文档<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">页面</a>并进行更多实验。 <br><br> 下次，我们将讨论一些基本的Node.js机制，对这一平台的成功应用程序开发而言，有必要了解它们。 <br><br>  <b>亲爱的读者们！</b> 您使用npx吗？ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN423705/">https://habr.com/ru/post/zh-CN423705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN423695/index.html">如何用银行账户中的一百万美元退休40年</a></li>
<li><a href="../zh-CN423697/index.html">介绍Spring Data JDBC</a></li>
<li><a href="../zh-CN423699/index.html">“数字经济”的价格上涨：必须从预算中拨出2万亿卢布</a></li>
<li><a href="../zh-CN423701/index.html">Node.js指南，第3部分：托管，REPL，控制台操作，模块</a></li>
<li><a href="../zh-CN423703/index.html">Node.js手册，第4部分：npm，package.json和package-lock.json文件</a></li>
<li><a href="../zh-CN423707/index.html">Jaxx的内幕是什么。 开箱即用的熵128位</a></li>
<li><a href="../zh-CN423709/index.html">CSS Grid-用于网站和应用程序布局的瑞士军刀</a></li>
<li><a href="../zh-CN423711/index.html">管理极客：从哪里获取数据？</a></li>
<li><a href="../zh-CN423713/index.html">“俄罗斯制造”-用于开发服务器端Web应用程序的WBASIC编程语言</a></li>
<li><a href="../zh-CN423719/index.html">从Erlang / Elixir到Java，反之亦然。 冒险20分钟</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>