<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฃ ๐ ูู ุงุณุชุทูุน ูุงุฒุ ุถุฑุจ ูู ูุจู ุงูุจุฑูุฌุฉ ุงูููุน ุงูุนุงู ๐จ๐ฟโโ๏ธ ๐ฆ ๐ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ. 


 ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ ุ ูุตููุง " Has ููุท" ุ ุฃูุฌุฒูุง ุงููุดููุงุช ุงูุชู ุญููุง ุ ููุชุจูุง ุจุนุถ ุงูุญุงูุงุช ุงููุญุฏุฏุฉ: 


 instance HasDbConfig AppConfig whe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูู ุงุณุชุทูุน ูุงุฒุ ุถุฑุจ ูู ูุจู ุงูุจุฑูุฌุฉ ุงูููุน ุงูุนุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471052/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ. </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ ุ</a> ูุตููุง " <code>Has</code> ููุท" ุ ุฃูุฌุฒูุง ุงููุดููุงุช ุงูุชู ุญููุง ุ ููุชุจูุง ุจุนุถ ุงูุญุงูุงุช ุงููุญุฏุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HasDbConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> getDbConfig = dbConfig <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">HasWebServerConfig</span></span> <span class="hljs-type"><span class="hljs-type">AppConfig</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> getWebServerConfig = webServerConfig <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">HasCronConfig</span></span> <span class="hljs-type"><span class="hljs-type">AppConfig</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> getCronConfig = cronConfig</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุง ุชุจุฏู ุฌูุฏุฉ.  ูุง ุงูุตุนูุจุงุช ุงูุชู ูููู ุฃู ุชูุดุฃ ููุงุ </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/821/f4f/397/821f4f397a69ccd020b677098f5ecaf7.jpg" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ุฏุนูุง ูููุฑ ูู ุงูุญุงูุงุช ุงูุฃุฎุฑู ุงูุชู ูุฏ ูุญุชุงุฌูุง.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุนุชุจุฑ ุงูุฃููุงุน ุงูููููุณุฉ ุฐุงุช ุงูุชูููู ุจุญุฏ ุฐุงุชูุง ูุฑุดุญุฉ ุฌูุฏุฉ ููุชูููุฐ (ุงูุชุงูู) ููุฐู ุงูุญุฑูู ุ ูุงูุชู ุชูุฏูุง ุจุซูุงุซ ุญุงูุงุช ุฃุฎุฑู ุญูุซ ูุชู ุชูููุฐ ูู ุทุฑููุฉ ุนุจุฑ <code>id</code> ุ ุนูู ุณุจูู ุงููุซุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HasDbConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> getDbConfig = id</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃููุง ุชุชูุญ ููุง ุจุณูููุฉ ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ุงููุฑุฏูุฉ ุฃู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ุงููุณุงุนุฏ ูุณุชููุฉ ุนู <code>AppConfig</code> ุจุฃูููู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ููู ุจุงููุนู ุ ูููู ูุง ูุฒุงู ูุณุชูุฑุงู.  ูู ุงูุณูู ุฃู ูุชุฎูู ุฃู ุจุนุถ ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ุชุชุญูู ูู ุชูุงุนู ุฒูุฌ ูู ุงููุญุฏุงุช ุ ููุง ุฒููุง ูุง ูุฑูุฏ ุงูุงุนุชูุงุฏ ุนูู ุชูููู ุงูุชุทุจูู ุจุฃูููู ุ ูุฐูู ูุญู ุจุญุงุฌุฉ ุงูุขู ุฅูู ูุชุงุจุฉ ุณุช ุญุงูุงุช (ุญุงูุชุงู ููู ููุน) ุ ุณูุชู ุชุฎููุถ ูู ูุงุญุฏุฉ ูููุง ุฅูู <code>fst</code> ุฃู <code>snd</code> .  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฃุฌู <code>DbConfig</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HasDbConfig</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">b</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> getDbConfig = fst <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">HasDbConfig</span></span> (a, <span class="hljs-type"><span class="hljs-type">DbConfig</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> getDbConfig = snd</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฑุนุจ.  ูู ุงููุฃููู ุฃูุง ูุญุชุงุฌ ุฃุจุฏูุง ุฅูู ุงุฎุชุจุงุฑ ุชุดุบูู ุซูุงุซ ูุญุฏุงุช ูู ููุณ ุงูููุช - ูุฅูุง ูุณูุชุนูู ุนููู ูุชุงุจุฉ ุชุณุน ุญุงูุงุช ูููุฉ.  ุนูู ุฃู ุญุงู ุ ุฃูุง ุดุฎุตูุงู ุบูุฑ ูุฑุชุงุญ ุจุงููุนู ุ ูุฃูุฏ ุฃู ุฃูุถู ุนุฏุฉ ุณุงุนุงุช ูู ุฃุชูุชุฉ ูุฐู ุงููุณุฃูุฉ ูู ุจุถุน ุฏูุงุฆู ูู ูุชุงุจุฉ ุฃูุซุฑ ูู ุนุดุฑุฉ ุฃุณุทุฑ ุฅุถุงููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ููุชููุง ุจููููุฉ ุญู ูุฐู ุงููุดููุฉ ุจุดูู ุนุงู ุ ุนูุงูุฉ ุนูู ุฐูู ุ ููุฐู ุฃููุงุน ุชุงุจุนุฉ ุ ูููู ุณููุชูู ูู ุงูุฃูุฑ ููุฃููุง ูุทุฉ Haskell - Welkom. </p><a name="habracut"></a><br><h1 id="obobschaem-has-klass" style=";text-align:right;direction:rtl">  ุชูุฎูุต ุงููุตู </h1><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูุงุญุธ ุฃู ูุฏููุง ูุฆุงุช ูุฎุชููุฉ ูุจูุฆุงุช ูุฎุชููุฉ.  ูุฏ ูุชุฏุงุฎู ูุฐุง ูุน ุตูุน ุญู ุนุงููู ุ ูุฐูู ูุฎุฑุฌ ุงูุจูุฆุฉ ูู ูุนููุฉ ูููุตูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> part record </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> extract :: record -&gt; part</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุง ุงูููู ุฃู ููุงู <code>Has part record</code> ูุนูู ุฃูู ูููู ุงุณุชุฎุฑุงุฌ ุจุนุถ ูููุฉ <code>part</code> ุงูููุน ูู ูููุฉ <code>record</code> ุงูููุน.  ูู ูุฐู ุงูุดุฑูุท ุ ูุตุจุญ <code>HasDbConfig</code> ุงููุฏูู ุงูุฌูุฏ <code>HasDbConfig</code> <code>Has DbConfig</code> ุ ูุจุงููุซู ุจุงููุณุจุฉ ูููุญุงุช ุงูุทุจุงุนุฉ ุงูุฃุฎุฑู ุงูุชู ูุชุจูุงูุง ุณุงุจููุง.  ููุฏ ุจุฏุง ุชุบููุฑูุง ุชูุฑูุจูุง ุจุญุชูุง ุ ูุนูู ุณุจูู ุงููุซุงู ุ ูุชุญูู ููุน ุฅุญุฏู ุงููุธุงุฆู ูู ููุดูุฑูุง ุงูุณุงุจู ุฅูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">doSmthWithDbAndCron</span></span> :: (<span class="hljs-type"><span class="hljs-type">MonadReader</span></span> rm, <span class="hljs-type"><span class="hljs-type">HasDbConfig</span></span> r, <span class="hljs-type"><span class="hljs-type">HasCronConfig</span></span> r) =&gt; ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">doSmthWithDbAndCron</span></span> :: (<span class="hljs-type"><span class="hljs-type">MonadReader</span></span> rm, <span class="hljs-type"><span class="hljs-type">Has</span></span> <span class="hljs-type"><span class="hljs-type">DbConfig</span></span> r, <span class="hljs-type"><span class="hljs-type">Has</span></span> <span class="hljs-type"><span class="hljs-type">CronConfig</span></span> r) =&gt; ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุชุบููุฑ ุงููุญูุฏ ูู ุจุถุน ูุณุงูุงุช ูู ุงูุฃูุงูู ุงูุตุญูุญุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูููุฏ ุงููุซูุฑ ูู ุงุณุชูุชุงุฌ ุงููุชุงุจุฉ: ูุง ูุฒุงู ุจุฅููุงู ุงููุคูุช ุฅุฎุฑุงุฌ ูููุฉ ุงูุฅุฑุฌุงุน ุงููุทููุจุฉ ูู <code>extract</code> ูู ุงูุณูุงู ุงููุญูุท ูู ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ุงูุญุงูุงุช ุงูุชู ุตูุฏูุช ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุจูุง ุฃููุง ูุง ููุชู ุจููุน ุงูุจูุฆุฉ ุงููุญุฏุฏ ุ ูููุฑู ุงูุณุฌูุงุช ุงูุชู ูููููุง ุชูููุฐ ูุฆุฉ <code>Has part record</code> ุงูุฎุงุต <code>part</code> ุงูุซุงุจุช.  ูุฐู ุงููููุฉ ูุฏููุง ูููู ุญุซู ุฌูุฏ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููุน ูู ููุณู: ูุชู ุชูููุฐ <code>Has record record</code> ุจุทุฑููุฉ ุชุงููุฉ ( <code>extract = id</code> ). </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู <code>record</code> ุนุจุงุฑุฉ ุนู ููุชุฌ ูุฃููุงุน <code>rec1</code> ู <code>rec2</code> ุ ูุณูุชู ุชูููุฐ <code>Has part record</code> ุฅุฐุง ูุงู ููุท ุฅุฐุง ูุงู <code>Has part rec1</code> ุฃู <code>Has part rec2</code> . </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู <code>record</code> ูู ูุฌููุน ุงูุฃููุงุน <code>rec1</code> ู <code>rec2</code> ุ ูุณูุชู ุชูููุฐ <code>Has part record</code> ุฅุฐุง ูููุท ุฅุฐุง ูุงู <code>Has part rec1</code> ู <code>Has part rec2</code> .  ุนูู ุงูุฑุบู ูู ุฃู ุงูุงูุชุดุงุฑ ุงูุนููู ููุฐู ุงูุญุงูุฉ ูู ูุฐุง ุงูุณูุงู ููุณ ูุงุถุญูุง ุ ุฅูุง ุฃูู ูุง ูุฒุงู ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุงูุชูุงูู. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุจุฏู ุฃููุง ูููุง ุจุตูุงุบุฉ ูุฎุทุท ูุฎูุงุฑุฒููุฉ ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู <code>Has part record</code> ุชู ุชุทุจูู <code>record</code> <code>part</code> ุนูู <code>part</code> <code>record</code> ุงูุจูุงูุงุช ุชููุงุฆููุง! </p><br><p style=";text-align:right;direction:rtl">  ูุญุณู ุงูุญุธ ุ ูุฅู ูุซู ูุฐุง ุงูุชูููุฑ ุงูุงุณุชูุฑุงุฆู ููุฃููุงุน ููุงุณุจ ุชูุงููุง ุขููุฉ Haskell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Generics</a> .  ุจุงุฎุชุตุงุฑ ูุชุจุณูุท ุ ูุนุฏ Generics ุฃุญุฏ ุฃุณุงููุจ ุงูุจุฑูุฌุฉ ุงููุตููุฉ ุงููุนููุฉ ูู Haskell ุ ูููุชุฌ ุนู ุงูููุงุญุธุฉ ุฃู ูู ููุน ุฅูุง ุนุจุงุฑุฉ ุนู ููุน sum ุฃู ููุน ููุชุฌ ุฃู ููุน ุฃุณุงุณู ูุญูุฏ ุงูุจููุฉ ูุน ุญูู ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃูุชุจ ุจุฑูุงูุฌูุง ุชุนูููููุง <em>ุขุฎุฑ</em> ุนู ุงูุฃุฏููุฉ ุงูุฌููุณุฉ ุ ูุฐุง ุงูุชูู ุฅูู ุงูุฑูุฒ. </p><br><h1 id="pervaya-popytka" style=";text-align:right;direction:rtl">  ุงููุญุงููุฉ ุงูุฃููู </h1><br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุชุฎุฏู ุงูุทุฑููุฉ ุงูููุงุณูููุฉ ููุชุทุจูู <code>Generic</code> ูู <code>Has</code> ุฎูุงู ูุฆุฉ <code>GHas</code> ุงููุณุงุนุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> part grecord </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> gextract :: grecord p -&gt; part</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง <code>grecord</code> ูู ุชูุซูู ุนุงู ูููุน <code>record</code> ุจูุง. </p><br><p style=";text-align:right;direction:rtl">  ุชุชุจุน ุชุทุจููุงุช <code>GHas</code> ุงูุชุฑููุจ ุงูุงุณุชูุฑุงุฆู ุงูุฐู <code>GHas</code> ุฃุนูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> record (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">K1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">record</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> gextract (<span class="hljs-type"><span class="hljs-type">K1</span></span> x) = x <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> part record =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> part (<span class="hljs-type"><span class="hljs-type">M1</span></span> it record) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract (<span class="hljs-type"><span class="hljs-type">M1</span></span> x) = gextract x <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> part l =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> part (l :*: r) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract (l :*: _) = gextract l <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> part r =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> part (l :*: r) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract (_ :*: r) = gextract r</code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>K1</code> ูุชูุงูู ูุน ุงููุถูุฉ ุงูุฃุณุงุณูุฉ. </li><li style=";text-align:right;direction:rtl">  <code>M1</code> - ุงูุจูุงูุงุช ุงููุตููุฉ ุงูุฎุงุตุฉ ุจุงูุฃุฏููุฉ ุงูุชู ูุง ูุญุชุงุฌ ุฅูููุง ูู ูููุชูุง ุ ูุฐูู ูุญู ุจุจุณุงุทุฉ ูุชุฌุงูููุง ููุชุนุฑู ุนูููุง. </li><li style=";text-align:right;direction:rtl">  ุงููุซูู ุงูุฃูู ูููุน ุงูููุชุฌ <code>l :*: r</code> ูุชูุงูู ูุน ุงูุญุงูุฉ ุนูุฏูุง ูููู ููุฌุฒุก "ุงูุฃูุณุฑ" ูู ุงูููุชุฌ ูููุฉ <code>part</code> ุงูููุน ุงูุฐู ูุญุชุงุฌู (ุฑุจูุง ุ ุจุดูู ูุชูุฑุฑ). </li><li style=";text-align:right;direction:rtl">  ูุจุงููุซู ุ ูุฅู ุงููุซูู ุงูุซุงูู ูููุน ุงูููุชุฌ <code>l :*: r</code> ูุชูุงูู ูุน ุงูุญุงูุฉ ุงูุชู ูููู ูููุง ููุฌุฒุก "ุงูุฃููู" ูู ุงูููุชุฌ ูููุฉ <code>part</code> ุงููุชุงุจุฉ ุงูุฐู ูุญุชุงุฌ ุฅููู (ุจุดูู ุทุจูุนู ุ ุฃูุถูุง ุ ุจุดูู ูุชูุฑุฑ). </li></ol><br><p style=";text-align:right;direction:rtl">  ูุญู ูุฏุนู ููุท ุฃููุงุน ุงูููุชุฌุงุช ููุง.  ุงูุทุจุงุนู ุงูุดุฎุตู ูู ุฃู ุงููููุงุช ูุง ุชุณุชุฎุฏู ุบุงูุจูุง ูู ุณูุงูุงุช <code>MonadReader</code> ูุงููุฆุงุช ุงูููุงุซูุฉ ุ ูุฐูู ูููู ุฅููุงููุง ูุชุจุณูุท ุงูุงุนุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงููููุฏ ุฃู ููุงุญุธ ุฃู ูู ูููุง <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x646;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.084ex" height="2.298ex" viewBox="0 -780.1 466.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ู</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ู</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1"> ู </script>  ูููู ุชูุซูู ููุน ุงูููุชุฌ -ary <code>(a1, ..., an)</code> ุนูู ุฃูู ุชูููู <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x646;</mo></mrow><mo>&amp;#x2212;</mo><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x62F;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x648;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x644;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x627;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.137ex" height="2.298ex" viewBox="0 -780.1 3503.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ู</text><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/471052/&amp;usg=ALkJrhgXpnk0CGt7p8bG-1-JQRrf9EVmgg#MJMAIN-2212" x="689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/471052/&amp;usg=ALkJrhgXpnk0CGt7p8bG-1-JQRrf9EVmgg#MJMAIN-31" x="1689" y="0"></use><g transform="translate(2190,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ุฏ</text></g><g transform="translate(2501,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ู</text></g><g transform="translate(2864,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ู</text></g><g transform="translate(3331,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ุง</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ู</mo></mrow><mo>โ</mo><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>ุฏ</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ู</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ู</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ุง</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> ู -1 ุฏููุง</script>  ุฃุฒูุงุฌ <code>(a1, (a2, (a3, (..., an))))</code> ุ ูุฐูู ุงุณูุญูุง ูู ุฃู ุฃุฑุจุท ุฃููุงุน ุงูููุชุฌุงุช ูุน ุฃุฒูุงุฌ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฎูุงู <code>GHas</code> ูุฏููุง ุ ููููู ูุชุงุจุฉ ุชุทุจูู ุงูุชุฑุงุถู ูู <code>Has</code> ุงูุฐู ูุณุชุฎุฏู ุงูุฃุฏููุฉ ุงูุนุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> part record </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> extract :: record -&gt; part <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> extract :: <span class="hljs-type"><span class="hljs-type">Generic</span></span> record =&gt; record -&gt; part extract = gextract . from</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุจู. </p><br><p style=";text-align:right;direction:rtl">  ุฃู ูุงุ </p><br><h1 id="problema" style=";text-align:right;direction:rtl">  ุงููุดููุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุญุงูููุง ุชุฑุฌูุฉ ูุฐุง ุงูุฑูุฒ ุ ูุณูู ูุฑู ุฃูู ูุง taypechaetsya ุญุชู ูู ุฏูู ุฃู ูุญุงููุฉ ูุงุณุชุฎุฏุงู ูุฐุง ุงูุชุทุจูู ุจุดูู ุงูุชุฑุงุถู ุ ูุงูุฅุจูุงุบ ุนู ุจุนุถ ุงูุญุงูุงุช ุงููุชุฏุงุฎูุฉ ููุงู.  ุงูุฃุณูุฃ ูู ุฐูู ุ ูุฐู ุงูุญุงูุงุช ูู ููุณูุง ูู ุจุนุถ ุงูููุงุญู.  ูุจุฏู ุฃู ุงูููุช ูุฏ ุญุงู ููุนุฑูุฉ ููููุฉ ุนูู ุขููุฉ ุญู ุงูุญุงูุงุช ูู ูุงุณูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ูุฏููุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> context =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Foo</span></span></span><span class="hljs-class"> barPattern bazPattern </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  (ุจุงูููุงุณุจุฉ ุ ูุณูู ูุฐุง ุงูุดูุก ุจุนุฏ <code>=&gt;</code> ุฑุฃุณ ุงููุซูู.) </p><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ูู ุงูุทุจูุนู ูุฑุงุกุฉ ูุฐุง ูู </p><br><blockquote style=";text-align:right;direction:rtl">  ุฏุนููุง ูุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ูุซูู ูู <code>Foo bar baz</code> .  <em>ุฅุฐุง ูุงู</em> <code>context</code> ููุชูุนูุง ุ ูููููู ุชุญุฏูุฏ ูุฐุง ุงููุซุงู ุดุฑูุทุฉ ุฃู ูุชูุงูู <code>bar</code> <code>baz</code> ูุน <code>barPattern</code> ู <code>bazPattern</code> . </blockquote><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุฐุง ุชูุณูุฑ ุฎุงุทุฆ ุ ูุงูุนูุณ ุตุญูุญ: </p><br><blockquote style=";text-align:right;direction:rtl">  ุฏุนููุง ูุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ูุซูู ูู <code>Foo bar baz</code> .  <em>ุฅุฐุง ูุงู</em> <code>bar</code> <code>baz</code> ู <code>baz</code> <code>barPattern</code> ูุน <code>barPattern</code> ู <code>bazPattern</code> ุ ูุนูุฏุฆุฐ ูุฎุชุงุฑ ูุฐุง ุงููุซูู ููุถูู <code>context</code> ุฅูู ูุงุฆูุฉ ุงูุซูุงุจุช ุงูุชู ูุฌุจ ุญููุง. </blockquote><p style=";text-align:right;direction:rtl">  ุงูุขู ุฃุตุจุญ ูู ุงููุงุถุญ ูุง ุงููุดููุฉ.  ุฏุนูุง ูููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ุงูุญุงูุงุช ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> part l =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> part (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l</span></span></span><span class="hljs-class"> :*: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> gextract (l :*: _) = gextract l <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> part r =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> part (l :*: r) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract (_ :*: r) = gextract r</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏููู ููุณ ุฑุคุณุงุก ุงููุซุงู ุ ูุฐูู ูุง ุนุฌุจ ุฃููุง ุชุชูุงุทุน!  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุฌุฏ ูููู ุฃูุซุฑ ุชุญุฏูุฏูุง ูู ุงูุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ุชูุฌุฏ ุทุฑููุฉ ูุชุญุณูู ูุฐู ุงูุญุงูุงุช ุจุทุฑููุฉ ูุง ุจุญูุซ ุชุชููู ุนู ุงูุชุฏุงุฎู.  ุญุณููุง ุ ุฅูู ุฌุงูุจ ุฅุถุงูุฉ ุงููุฒูุฏ ูู ูุนููุงุช <code>GHas</code> . </p><br><h1 id="vyrazitelnye-tipy-speshat-na-pomosch" style=";text-align:right;direction:rtl">  ุฃููุงุน ูุนุจุฑุฉ ุงูุงูุฏูุงุน ุฅูู ุงูุฅููุงุฐ! </h1><br><p style=";text-align:right;direction:rtl">  ูููู ุญู ุงููุดููุฉ ูู ุญุณุงุจ "ุงููุณุงุฑ" ูุณุจููุง ุนูู ุงููููุฉ ุงูุชู ุชูููุง ุ ูุงุณุชุฎุฏุงู ูุฐุง ุงููุณุงุฑ ูุชูุฌูู ุงุฎุชูุงุฑ ุงูุญุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃููุง ูุงูููุง ุนูู ุนุฏู ุฏุนู ุฃููุงุน ุงููุจูุบ ุ ูุฅู ุงููุณุงุฑ ุจุงููุนูู ุงูุญุฑูู ูู ุณูุณูุฉ ูู ุงูููุนุทูุงุช ุงููุณุฑู ุฃู ุงููููู ูู ุฃููุงุน ุงูููุชุฌุงุช (ุฃู ุงุฎุชูุงุฑุงุช ุงููููู ุงูุฃูู ุฃู ุงูุซุงูู ูู ุงูุฒูุฌ) ุ ุชูุชูู ุจูุคุดุฑ ูุจูุฑ "ููุง" ุ ุจูุฌุฑุฏ ุงูุนุซูุฑ ุนูู ุงูููุน ุงููุฑุบูุจ .  ููุชุจ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Path</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">L</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Path</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Path</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Here</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Show</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุนูู ุณุจูู ุงููุซุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ุงูุฃููุงุน ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbAddress</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbAddress</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbUsername</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Username</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbPassword</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Password</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">webServerConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cronConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูู ุจุนุถ ุฃูุซูุฉ ุงููุณุงุฑุงุช ูู <code>AppConfig</code> ุ </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูู <code>DbConfig</code> โถ <code>L Here</code> . </li><li style=";text-align:right;direction:rtl">  ุฅูู <code>WebServerConfig</code> โถ <code>R (L Here)</code> . </li><li style=";text-align:right;direction:rtl">  ุฅูู <code>CronConfig</code> โถ <code>R (R Here)</code> . </li><li style=";text-align:right;direction:rtl">  ุฅูู <code>DbAddress</code> โถ <code>L (L Here)</code> . </li></ol></div></div><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ูููู ุฃู ูููู ูุชูุฌุฉ ุงูุจุญุซ ุนู ูููุฉ ูู ุงูููุน ุงููุทููุจุ  ููุงู ุฎูุงุฑุงู ูุงุถุญุงู: ูููููุง ุงูุนุซูุฑ ุนููู ุฃู ุนุฏู ุงูุนุซูุฑ ุนููู.  ูููู ูู ุงููุงูุน ุ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง: ูููููุง ุงูุนุซูุฑ ุนูู ุฃูุซุฑ ูู ูููุฉ ูู ูุฐุง ุงูููุน.  ูู ุงููุงุถุญ ุฃู ุงูุณููู ุงูุฃูุซุฑ ุนููุงููุฉ ูู ูุฐู ุงูุญุงูุฉ ุงููุซูุฑุฉ ููุฌุฏู ุณูููู ุฃูุถูุง ุฑุณุงูุฉ ุฎุทุฃ.  ุฃู ุงุฎุชูุงุฑ ููููุฉ ูุนููุฉ ุณูููู ูู ูุฏุฑ ูุนูู ูู ุงูุนุดูุงุฆูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ุงููุธุฑ ูู ูุซุงู ุฎุฏูุฉ ุงูููุจ ุงูููุงุณูุฉ ูุฏููุง.  ุฅุฐุง ุฃุฑุงุฏ ุดุฎุต ูุง ุงูุญุตูู ุนูู ูููุฉ ูู ุงูููุน <code>(Host, Port)</code> ุ ููู ูุฌุจ ุฃู ูููู ุนููุงู ุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ุนููุงู ุฎุงุฏู ุงูููุจุ  ูู ุงูุฃูุถู ุนุฏู ุงููุฎุงุทุฑุฉ ุจุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุฃู ุญุงู ุ ุฏุนูุง ูุนุจุฑ ุนู ุฐูู ูู ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MaybePath</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Conflict</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Path</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Show</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ููุตู ุจูู <code>NotFound</code> ู <code>Conflict</code> ุ ูุธุฑูุง ูุฃู ุงูุชุนุงูู ูุน ูุฐู ุงูุญุงูุงุช ูุฎุชูู ุงุฎุชูุงููุง ุฌููุฑููุง: ุฅุฐุง ุญุตููุง ุนูู <code>NotFound</code> ูู ุฃุญุฏ ูุฑูุน ููุน ุงูููุชุฌ ูุฏููุง ุ ููู ูููู ูู ุงููุคูู ุงูุนุซูุฑ ุนูู ุงููููุฉ ุงููุทููุจุฉ ูู ุจุนุถ ุงููุฑูุน ุงูุฃุฎุฑู ุ ุจูููุง ูุนูู <code>Conflict</code> ูู ุฃู ูุฑุน ูุงูู ูุดู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุนุชุจุฑ ุญุงูุฉ ุฎุงุตุฉ ูุฃููุงุน ุงูููุชุฌุงุช (ูุงูุชู ุ ููุง ุงุชูููุง ุ ูุนุชุจุฑูุง ุฃุฒูุงุฌ).  ููู ุชุฌุฏ ูููุฉ ุงูููุน ุงููุทููุจ ูููุงุ  ููููู ุฅุฌุฑุงุก ุจุญุซ ูุชูุฑุฑ ูู ูู ูููู ูู ููููุงุช ุฒูุฌ ุ ูุงูุญุตูู ุนูู ุงููุชุงุฆุฌ <code>p1</code> ู <code>p2</code> ุนูู ุงูุชูุงูู ุ ุซู ุฏูุฌูุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃููุง ูุชุญุฏุซ ุนู ุงุฎุชูุงุฑ ูุซููุงุช timeclasses ุงูุชู ุชุญุฏุซ ุฃุซูุงุก ุงูุชุญููู ุงูุจุฑูุฌู ุ ููุญู ูู ุงููุงูุน ูุญุชุงุฌ ุฅูู ุญุณุงุจุงุช compiltime ุ ูุงูุชู ูุชู ุงูุชุนุจูุฑ ุนููุง ูู Haskell ูู ุฎูุงู ุนูููุงุช ุญุณุงุจูุฉ ุนูู ุงูุฃููุงุน (ุญุชู ูู ูุงูุช ุงูุฃููุงุน ููุซูุฉ ูู ุฎูุงู ุงููุตุทูุญุงุช ุงูุชู ุฃุซูุฑุช ูู ุงูููู ุจุงุณุชุฎุฏุงู <code>DataKinds</code> ).  ููููุง ูุฐูู ุ ูุชู ุชูุซูู ูุฐู ุงููุธููุฉ ุนูู ุงูุฃููุงุน ูุนุงุฆูุฉ ูู ุงูููุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">family</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> p1 p2 where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> ('</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> ('</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">L</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> ('</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> ('</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> _ _ = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Conflict</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุงููุธููุฉ ุชูุซู ุนุฏุฉ ุญุงูุงุช: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุฌุญุช ุฅุญุฏู ุนูููุงุช ุงูุจุญุซ ุงููุชูุฑุฑุฉ ุ ูุฃุฏู ุงูุขุฎุฑ ุฅูู <code>NotFound</code> ุ <code>NotFound</code> ุงููุณุงุฑ ูู ุงูุจุญุซ ุงููุงุฌุญ ูููุญู ุงูุฏูุฑ ูู ุงูุงุชุฌุงู ุงูุตุญูุญ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุฅููุงุก ูู ูู ุนูููุงุช ุงูุจุญุซ ุงููุชูุฑุฑุฉ ูุน <code>NotFound</code> ุ ููู ุงููุงุถุญ ุฃู ุงูุจุญุซ ุจุฃูููู ุณููุชูู ูุน <code>NotFound</code> . </li><li style=";text-align:right;direction:rtl">  ูู ุฃู ุญุงูุฉ ุฃุฎุฑู ุ ูุญุตู ุนูู <code>Conflict</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ุณูููู ุงูุขู ุจูุชุงุจุฉ ูุธููุฉ ุนูู ูุณุชูู ุงููุตุงุฆุญ ุชุฃุฎุฐ <code>part</code> ูููู ุงูุนุซูุฑ ุนููู ุ ูุชูุซูููุง ุนุงููุง ููููุน ุงูุฐู ุณูุชู ููู ุงูุนุซูุฑ ุนูู <code>part</code> ุ ูุงูุจุญุซ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">family</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">grecord</span></span></span><span class="hljs-class"> :: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class"> -&gt; *) :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MaybePath</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">K1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">part</span></span></span><span class="hljs-class">) = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Here</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">K1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">other</span></span></span><span class="hljs-class">) = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">M1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">) = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part x </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> part (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l</span></span></span><span class="hljs-class"> :*: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r</span></span></span><span class="hljs-class">) = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Combine</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">part</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l</span></span></span><span class="hljs-class">) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">part</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r</span></span></span><span class="hljs-class">) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> _ _ = '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">NotFound</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃููุง ุญุตููุง ุนูู ุดูุก ูุดุงุจู ุฌุฏูุง ูู ูุนูู ูุญุงููุชูุง ุงูุณุงุจูุฉ ูุน <code>GHas</code> .  ูุฐุง ุฃูุฑ ูุชููุน ุ ูุฃููุง ูููู ุจุงููุนู ุจุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุฎูุงุฑุฒููุฉ ุงูุชู ุญุงูููุง ุงูุชุนุจูุฑ ุนููุง ูู ุฎูุงู ุงูุฅุทุงุฑุงุช ุงูุฒูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <code>GHas</code> ุ ูู ูุง ุชุจูู ุจุงููุณุจุฉ ููุง ูู ุฅุถุงูุฉ ูุนููุฉ ุฅุถุงููุฉ ุฅูู ูุฐู ุงููุฆุฉ ุ ุงููุณุคููุฉ ุนู ุงููุณุงุฑ ุงูููุฌูุฏ ุณุงุจููุง ุ ูุงูุชู ุณุชุนูู ุนูู ุชุญุฏูุฏ ุญุงูุงุช ูุญุฏุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Path</span></span></span><span class="hljs-class">) part grecord </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> gextract :: <span class="hljs-type"><span class="hljs-type">Proxy</span></span> path -&gt; grecord p -&gt; part</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุถููุง ุฃูุถูุง ูุณูุทุฉ ุฅุถุงููุฉ ูู <code>gextract</code> ุจุญูุซ ูููู ูููุชุฑุฌู ุชุญุฏูุฏ ุงููุซูู ุงูุตุญูุญ ูููุณุงุฑ ุงููุญุฏุฏ (ูุงูุฐู ูุฌุจ ุฐูุฑู ูู ุชูููุน ุงููุธููุฉ ููุฐุง). </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูุซููุงุช ุงููุชุงุจุฉ ุณููุฉ ููุบุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Here</span></span></span><span class="hljs-class"> record (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">K1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">record</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> gextract _ (<span class="hljs-type"><span class="hljs-type">K1</span></span> x) = x <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> path part record =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> path part (<span class="hljs-type"><span class="hljs-type">M1</span></span> it record) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract proxy (<span class="hljs-type"><span class="hljs-type">M1</span></span> x) = gextract proxy x <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> path part l =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> ('<span class="hljs-type"><span class="hljs-type">L</span></span> path) part (l :*: r) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract _ (l :*: _) = gextract (<span class="hljs-type"><span class="hljs-type">Proxy</span></span> :: <span class="hljs-type"><span class="hljs-type">Proxy</span></span> path) l <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> <span class="hljs-type"><span class="hljs-type">GHas</span></span> path part r =&gt; <span class="hljs-type"><span class="hljs-type">GHas</span></span> ('<span class="hljs-type"><span class="hljs-type">R</span></span> path) part (l :*: r) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gextract _ (_ :*: r) = gextract (<span class="hljs-type"><span class="hljs-type">Proxy</span></span> :: <span class="hljs-type"><span class="hljs-type">Proxy</span></span> path) r</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูุญู ุจุจุณุงุทุฉ ุงุฎุชูุงุฑ ุงููุซูู ุงููุทููุจ ุนูู ุฃุณุงุณ ุงููุณุงุฑ ูู <code>path</code> ุงูุฐู ูููุง ุจุญุณุงุจู ูู ููุช ุณุงุจู. </p><br><p style=";text-align:right;direction:rtl">  ููู ุงูุขู ููุชุงุจุฉ ุงูุชูููุฐ <code>default</code> ูุฏููุง <code>extract :: record -&gt; part</code> ูุธููุฉ <code>extract :: record -&gt; part</code> ูู ูุฆุฉ <code>Has</code> ุ  ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุดุฑูุท: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููุฐ <code>record</code> ุนุงู ุ ุจุญูุซ ูููู ุชุทุจูู ุงูุขููุฉ ุงูุนุงูุฉ ุ ุญุชู ูุญุตู ุนูู <code>Generic record</code> . </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชุฌุฏ ูุธููุฉ <code>Search</code> <code>part</code> ูู <code>record</code> (ุฃู ุจุงูุฃุญุฑู ูู ุงูุชูุซูู <code>Generic</code> <code>record</code> ุ ูุงูุฐู ูุชู ุงูุชุนุจูุฑ ุนูู <code>Rep record</code> ).  ูู ุงูููุฏ ุ ูุจุฏู ูุฐุง ุฃูุซุฑ ุบุฑุงุจุฉ: <code>Search part (Rep record) ~ 'Found path</code> .  ูุนูู ูุฐุง ุงูุณุฌู ุงูุชูููุฏ ุงูุฐู ูุฌุจ ุฃู ุชุณุงูู ูุชูุฌุฉ <code>Search part (Rep record)</code> <code>'Found path</code> ูุจุนุถ <code>path</code> (ูุงูุฐู ุ ูู ุงููุงูุน ุ ูุซูุฑ ููุงูุชูุงู ุจุงููุณุจุฉ ููุง)". </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู ูุงุฏุฑูู ุนูู ุงุณุชุฎุฏุงู <code>GHas</code> ูุน <code>part</code> ุ ูุงูุชูุซูู ุงูุนุงู <code>record</code> <code>path</code> ูู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ุ ูุงูุชู ุชุชุญูู ุฅูู <code>GHas path part (Rep record)</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ุณููุชูู ูุน ุงูุซูุงุจุชูู ุงูุฃุฎูุฑุชูู ุนุฏุฉ ูุฑุงุช ุ ูุฐูู ูู ุงููููุฏ ุฃู ูุถุนููุง ูู ูุฑุงุฏู ูููุตู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SuccessfulSearch</span></span></span><span class="hljs-class"> part record path = (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Search</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">part</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rep</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">record</span></span></span><span class="hljs-class">) ~ '</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Found</span></span></span><span class="hljs-class"> path, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GHas</span></span></span><span class="hljs-class"> path part (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rep</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">record</span></span></span><span class="hljs-class">))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงููุธุฑ ุฅูู ูุฐุง ูุฑุงุฏู ุ ูุญุตู ุนููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> part record </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> extract :: record -&gt; part <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> extract :: forall path. (<span class="hljs-type"><span class="hljs-type">Generic</span></span> <span class="hljs-title"><span class="hljs-title">record</span></span>, <span class="hljs-type"><span class="hljs-type">SuccessfulSearch</span></span> <span class="hljs-title"><span class="hljs-title">part</span></span> <span class="hljs-title"><span class="hljs-title">record</span></span> <span class="hljs-title"><span class="hljs-title">path</span></span>) =&gt; record -&gt; part extract = gextract (<span class="hljs-type"><span class="hljs-type">Proxy</span></span> :: <span class="hljs-type"><span class="hljs-type">Proxy</span></span> <span class="hljs-title"><span class="hljs-title">path</span></span>) . from</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุดูุก! </p><br><h1 id="ispolzovanie-obobschyonnogo-has" style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุนุงู <code>Has</code> </h1><br><p style=";text-align:right;direction:rtl">  ูููุธุฑ ูู ูู ูุฐุง ูู ุงูุนูู ุ ุณููุชุจ ุจุนุถ ุงูุญุงูุงุช ุงูุนุงูุฉ ููุฏูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SuccessfulSearch</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">) path =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SuccessfulSearch</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a2</span></span></span><span class="hljs-class">) path =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a2</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SuccessfulSearch</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a2</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a3</span></span></span><span class="hljs-class">) path =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> a (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a0</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a2</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a3</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง <code>SuccessfulSearch a (a0, ..., an) path</code> ูู ุงููุณุคูู ุนู ุญูููุฉ ุฃู <code>a</code> ูุญุฏุซ ุจูู <code>a0, ..., an</code> ูุฑุฉ ูุงุญุฏุฉ ุจุงูุถุจุท. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ูุฏููุง ุงูุขู ูุฏููุง ุญุณู ุงูุจุงูุบ ูู ุงูุนูุฑ </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">webServerConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cronConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฑูุฏ ุฅุฎุฑุงุฌ <code>Has DbConfig</code> ู <code>Has WebServerConfig</code> ู <code>Has CronConfig</code> .  ูููู ุชุถููู <code>DeriveAnyClass</code> ู <code>DeriveAnyClass</code> ูุฅุถุงูุฉ ุงูุฅุนูุงู ุงูุตุญูุญ <code>DeriveAnyClass</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">webServerConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cronConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Generic</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ูุญุธูุธูู (ุฃู ููุง ุซุงูุจุฉ ุจูุง ููู ุงูููุงูุฉ) ูุชุฑุชูุจ ุงููุณุงุฆุท ูู <code>Has</code> ุจุญูุซ ูุฃุชู ุงุณู ุงูููุน ุงููุชุฏุงุฎู ุฃููุงู ุ ุญุชู ูุชููู ูู ุงูุงุนุชูุงุฏ ุนูู ุขููุฉ <code>DeriveAnyClass</code> ูุชูููู ุงูุฎุฑุจุดุฉ. </p><br><h2 id="bezopasnost-prevyshe-vsego" style=";text-align:right;direction:rtl">  ุงูุณูุงูุฉ ุชุฃุชู ุฃููุงู </h2><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ูู ูู ููู ูุฏููุง ุฃู ููุนุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">webServerConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Generic</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ุญุตููุง ุนูู ุฎุทุฃ ูู ููุทุฉ ุชุนุฑูู ุงูููุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Spec.hs:35:24: error: โข Couldn't match type ''NotFound' with ''Found path0' arising from the 'deriving' clause of a data type declaration โข When deriving the instance for (Has CronConfig AppConfig) | 35 | } deriving (Generic, Has CronConfig) | ^^^^^^^^^^^^^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุณุช ุฑุณุงูุฉ ุงูุฎุทุฃ ุงููุฏูุฉ ุ ูููู ุญุชู ูู ุฐูู ูุง ูุฒุงู ุจุฅููุงูู ููู ูุง ุงููุดููุฉ: ุงูุชุฑุฏุฏ ุงููุฑุฏู <code>NotFound</code> ุงูุชุฑุฏุฏ ุงููุฑุฏู <code>CronConfig</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ูู ูุงู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุญููู ูู ููุณ ุงูููุนุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppConfig</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">prodDbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">qaDbConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">webServerConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebServerConfig</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cronConfig</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CronConfig</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Generic</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Has</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DbConfig</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ููุง ูู ูุชููุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Spec.hs:37:24: error: โข Couldn't match type ''Conflict' with ''Found path0' arising from the 'deriving' clause of a data type declaration โข When deriving the instance for (Has DbConfig AppConfig) | 37 | } deriving (Generic, Has DbConfig) | ^^^^^^^^^^^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃู ูู ุดูุก ุฌูุฏ ุญููุง. </p><br><h1 id="podytozhivaya" style=";text-align:right;direction:rtl">  ูุชูุฎูุต </h1><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุณูุญุงูู ุตูุงุบุฉ ุงูุทุฑููุฉ ุงูููุชุฑุญุฉ ููุชุฑุฉ ูุฌูุฒุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุฑุถ ุฃู ูุฏููุง ููุนูุง ูู ุฃููุงุน typklass ุ ููุฑูุฏ ุนุฑุถ ูุซููุงุชู ุชููุงุฆููุง ููููุง ูุจุนุถ ุงูููุงุนุฏ ุงูุนูุฏูุฉ.  ุจุนุฏ ุฐูู ุ ูููููุง ุชุฌูุจ ุงูุบููุถ (ูุงูุชุนุจูุฑ ุนููููุง ุนู ูุฐู ุงูููุงุนุฏ ุฅุฐุง ูุงูุช ุบูุฑ ุจุฏูููุฉ ููุง ุชูุณุฌู ูุน ุงูุขููุฉ ุงูููุงุณูุฉ ูุญู ุงูุญุงูุงุช) ุนูู ุงููุญู ุงูุชุงูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุจุชุดููุฑ ุงูููุงุนุฏ ุงูุนูุฏูุฉ ูู ุดูู ููุน ุจูุงูุงุช ุงุณุชูุฑุงุฆู <code>T</code> </li><li style=";text-align:right;direction:rtl">  ุณูููู ุจูุชุงุจุฉ ูุธููุฉ ุนูู ุฃููุงุน (ูู ุดูู ุนุงุฆูุฉ ูู ุงูููุน) ูุญุณุงุจ ุฃููู ูููููุฉ <code>v</code> ูุฐุง ุงูููุน <code>T</code> (ุฃู ุ ูู ุญูุซ Haskell ุ ุงูุชุจ <code>v</code> ุงูููุน <code>T</code> - ุฃูู ุฃููุงุนู ุงูุชุงุจุนุฉ) ุ ูุงูุชู ุชุตู ุงูุชุณูุณู ุงููุญุฏุฏ ููุฎุทูุงุช ุงูุชู ูุฌุจ ุงุชุฎุงุฐูุง. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ูุฐู <code>v</code> ููุณูุทุฉ ุฅุถุงููุฉ ุฅูู ูุณุงุนุฏ <code>Generic</code> ูุชุญุฏูุฏ ุงูุชุณูุณู ุงููุญุฏุฏ ููุญุงูุงุช ุงูุชู ุชุชุทุงุจู ุงูุขู ูุน ููู <code>v</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ุญุณูุง ุ ูุฐุง ูู ุดูุก! </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุธุงุฆู ุงูุชุงููุฉ ุ ุณููุธุฑ ูู ุจุนุถ ุงูุงูุชุฏุงุฏุงุช ุงูุฃูููุฉ (ููุฐูู ุงููููุฏ ุงูุฃูููุฉ) ููุฐุง ุงูููุฌ. </p><br><p style=";text-align:right;direction:rtl">  ูุนู ู ูุนู  ูู ุงููุซูุฑ ููุงูุชูุงู ุชุชุจุน ุชุณูุณู ุชุนูููุงุชูุง. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุฏุฃุช ูุน <code>Env -&gt; Foo</code> . </li><li style=";text-align:right;direction:rtl">  ููุณุช ุนุงูุฉ ุจูุง ููู ุงูููุงูุฉ ุ ุงุฎุชุชู ูู <code>Reader Env</code> monad. </li><li style=";text-align:right;direction:rtl">  ููุณ ุนุงู ุจูุง ููู ุงูููุงูุฉ ุ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุน <code>MonadReader Env m</code> . </li><li style=";text-align:right;direction:rtl">  ููุณุช ุนุงูุฉ ุจูุง ููู ุงูููุงูุฉ ุ <code>MonadReader rm, HasEnv r</code> ูุชุงุจุฉ <code>MonadReader rm, HasEnv r</code> . </li><li style=";text-align:right;direction:rtl">  ููุณ ุจุงููุฏุฑ ุงููุงูู ุ <code>MonadReader rm, Has Env r</code> ููุชุจ <code>MonadReader rm, Has Env r</code> ููุถูู ุงูุฃุฏููุฉ ุงูุนุงูุฉ ุจุญูุซ ูููู ุงููุชุฑุฌู <code>MonadReader rm, Has Env r</code> ูู ุดูุก ููุงู. </li><li style=";text-align:right;direction:rtl">  ุงูุขู ุงููุงุนุฏุฉ. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471052/">https://habr.com/ru/post/ar471052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471042/index.html">ุญู ุงููุดููุงุช ูุน pwnable.kr 25 - otp. ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ููู Linux</a></li>
<li><a href="../ar471044/index.html">Sass MediaScreen - ุชุนุฑูู ุฃุฌูุฒุฉ CSS</a></li>
<li><a href="../ar471046/index.html">ุฃููู ุฃูุงููููุง</a></li>
<li><a href="../ar471048/index.html">ุฑุฏ + Mobx: ูุง ูู ุงููุงุฆุฏุฉุ</a></li>
<li><a href="../ar471050/index.html">ุชูููู ุชูููู ุชูููุฉ ุตูุฏูู D: ููุตุงุช ุฌุฏูุฏุฉ ูููุญ ุฌุฏูุฏุฉ ...</a></li>
<li><a href="../ar471054/index.html">ููุฐ ูุชุฑุฉ ุทูููุฉ ุญูู ูุงูุนูุฉ ุงูุชูุฏูุฏ ุงูููููู ููุนููุงุช ุงููุดูุฑุฉ ููุดุงูู "ูุจูุกุฉ 2027"</a></li>
<li><a href="../ar471062/index.html">ููููุฉ ุชุนููู ุฃููุณ ูุฅุฏุงุฑุฉ ููุฒูู ุงูุฐูู. ุชูุฑูุฑ ูุงูุฏูุณ</a></li>
<li><a href="../ar471066/index.html">ููู ูุจุฏู ุฃุฑุดูู ุงูุฑูุฒ ุงูุจุฑูุฏู ููุงุฐุง ูููููุง ุฃู ููุนู ุญูุงู ุฐูู</a></li>
<li><a href="../ar471070/index.html">ุฃู ูุบุฉ ุงูุฎุงุฏู ูุงุฎุชูุงุฑ ... ููุทูุฑ ุงููุญููู</a></li>
<li><a href="../ar471072/index.html">ูู ุบุฑุงู ูู ุจุฑููุฉุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>