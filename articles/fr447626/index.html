<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêí üôÜüèΩ üíÆ Grand g√©n√©rateur de graphiques de transactions avec des mod√®les d'activit√© criminelle üôãüèæ üßùüèΩ üìµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour. 


 Il y a quelques ann√©es, notre √©quipe (conformit√© dans une banque suisse) a √©t√© confront√©e √† une t√¢che tr√®s int√©ressante: il √©tait n√©cessa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grand g√©n√©rateur de graphiques de transactions avec des mod√®les d'activit√© criminelle</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447626/"><p>  Bonjour. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/bf5/b6a/741/bf5b6a741fe67284b678bcebf503a2b1.jpg" alt="R√©seau"><br><br>  Il y a quelques ann√©es, notre √©quipe (conformit√© dans une banque suisse) a √©t√© confront√©e √† une t√¢che tr√®s int√©ressante: il √©tait n√©cessaire de g√©n√©rer un grand graphique des transactions entre les clients, les entreprises et les distributeurs automatiques de billets, d'ajouter √† ce graphique des sch√©mas similaires au blanchiment d'argent et d'autres sch√©mas d'activit√©s criminelles, et √©galement d'ajouter un minimum informations sur les n≈ìuds de ce graphique - noms, adresses, heure, etc.  Bien s√ªr, toutes les donn√©es devaient √™tre g√©n√©r√©es √† partir de z√©ro, sans utiliser les donn√©es client existantes. <br><p>  Pour r√©soudre ce probl√®me, un g√©n√©rateur a √©t√© √©crit, que je voudrais partager avec vous.  Sous la coupe, vous trouverez une histoire expliquant pourquoi nous en avions besoin, et une description du fonctionnement du g√©n√©rateur.  Pour les impatients - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici le code</a> .  Je serais ravi que quelqu'un profite de notre exp√©rience. </p><a name="habracut"></a><br>
<h2 id="zachem-my-zanyalis-takoy-erundoy">  Pourquoi faisons-nous un tel non-sens? </h2><br><p>  Notre √©quipe a d√©cid√© de participer en tant que sponsors au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hackathon</a> LauzHack </p>  .  L'une des conditions de participation au format sponsor √©tait la fourniture d'une v√©ritable t√¢che commerciale aux participants.  Juste √† ce moment-l√†, nous avions un projet tr√®s int√©ressant li√© √† l'automatisation de la recherche de d√©lits financiers et de blanchiment d'argent parmi les transactions de nos clients, et sans h√©sitation, nous avons d√©cid√© d'offrir la m√™me t√¢che aux participants du hackathon. <br><p>  Pour des raisons √©videntes, nous ne pouvions pas utiliser de donn√©es r√©elles, nous avons donc d√ª les cr√©er.  Pour rendre la t√¢che aussi proche que possible de la r√©alit√©, nous avons examin√© les statistiques des donn√©es r√©elles et essay√©, comme nous le pouvions, de rapprocher les donn√©es g√©n√©r√©es des distributions r√©elles, et nous n'avons pas non plus l√©sin√© sur la quantit√© et la complexit√© des donn√©es - nous n'avions pas besoin d'une solution fonctionnant sur un graphique de 100 n≈ìuds. et 200 connexions, nous recherchions une solution capable de traiter des graphiques de la taille de millions de n≈ìuds et de milliards de connexions, et en tenant compte de toutes les informations disponibles sur les n≈ìuds et les connexions. </p><br><h2 id="chto-u-nas-poluchilos">  Qu'avons-nous obtenu </h2><br><p>  Et nous avons obtenu un g√©n√©rateur assez rapide (ajust√© en fonction de la quantit√© de donn√©es), int√©ressant et configurable!  Comprenons en d√©tail </p><br><h3 id="tipy-dannyh">  Types de donn√©es </h3><br><p>  Nous voulons avoir un graphique des transactions financi√®res, respectivement, les participants possibles √† ce graphique sont: </p><br><ul><li>  Client - vous pouvez dire un compte d'un client abstrait d'une banque.  Il est d√©crit par nom, adresse e-mail, √¢ge, travail, opinions politiques, nationalit√©, √©ducation et adresse de r√©sidence </li><li>  Une entreprise est une entit√© commerciale du syst√®me financier.  Elle est d√©termin√©e par le type d'entreprise, le nom et le pays. </li><li>  ATM - en gros, les points de sortie de l'argent du graphique que nous contr√¥lons.  D√©fini par les coordonn√©es g√©ographiques. </li><li>  Transaction - Le fait de transf√©rer de l'argent d'un n≈ìud du graphique √† un autre.  D√©fini par le n≈ìud de d√©but et de fin, le montant, la devise et l'heure. </li></ul><br><p>  Pour cr√©er ces donn√©es, nous utilisons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mimesis</a> , une excellente biblioth√®que pour cr√©er de fausses donn√©es. </p><br><h3 id="sozdanie-grafa-bazovye-suschnosti">  Cr√©ation d'un graphe: entit√©s de base </h3><br><p>  Vous devez d'abord cr√©er toutes les entit√©s de base - clients, entreprises et distributeurs automatiques de billets.  Le script prend le nombre de clients que vous souhaitez cr√©er et, sur cette base, calcule le nombre d'entreprises et de distributeurs automatiques de billets.  Selon nos donn√©es, le nombre d'entreprises ayant un grand nombre de transactions avec les clients repr√©sente environ 2,5% du nombre de clients, et le nombre de distributeurs automatiques de billets est de 0,05% du nombre de clients.  Ces valeurs sont tr√®s g√©n√©ralis√©es et non configurables (c√¢bl√©es dans le code g√©n√©rateur). </p><br><p>  Toutes les informations sont enregistr√©es dans des fichiers .csv.  L'√©criture dans ces fichiers se produit par lots, k lignes √† la fois.  Cette valeur est configur√©e par des arguments de script.  De plus, trois types de n≈ìuds sont g√©n√©r√©s en parall√®le. </p><br><h3 id="sozdanie-grafa-soedineniya-mezhdu-suschnostyami">  Cr√©ation d'un graphe: connexions entre entit√©s </h3><br><p>  Apr√®s avoir cr√©√© les entit√©s de base, nous commen√ßons √† les connecter ensemble.  √Ä ce stade, nous ne g√©n√©rons pas encore les transactions elles-m√™mes, mais simplement le fait qu'il existe une connexion entre les n≈ìuds.  Cela a √©t√© fait pour acc√©l√©rer le processus de g√©n√©ration du graphe entier et fonctionne approximativement comme suit: si deux n≈ìuds sont connect√©s, alors nous g√©n√©rons un certain nombre de transactions entre eux, dispers√©es dans le temps.  S'ils ne sont pas connect√©s, mais les transactions entre ces n≈ìuds n'existent pas. </p><br><p>  La probabilit√© d'une connexion entre les deux n≈ìuds est configur√©e via des arguments, les valeurs standard sont r√©pertori√©es ci-dessous. </p><br><p>  Types de connexion possibles: </p><br><ul><li>  Client -&gt; Client (p = 0,4%) </li><li>  Client -&gt; Entreprise (p = 1%) </li><li>  Client -&gt; ATM (p = 3%) </li><li>  Entreprise -&gt; Client (p = 0,5%) </li></ul><br><p>  Comme les n≈ìuds, tous les types de connexions sont g√©n√©r√©s en parall√®le et √©crits dans leurs fichiers par lots. </p><br><h3 id="sozdaniya-grafa-tranzakcii">  Cr√©ation de graphiques: transactions </h3><br><p>  Ayant les n≈ìuds du graphique et les connexions entre eux tombant sous la distribution souhait√©e, nous pouvons commencer √† g√©n√©rer des transactions.  Le processus est assez simple en soi, mais sa mise en parall√®le est assez difficile.  Par cons√©quent, √† ce stade, il n'y a que deux flux ind√©pendants - les transactions en provenance du client et les transactions en provenance de l'entreprise. </p><br><p>  Rien de particuli√®rement int√©ressant ne se produit √† ce stade: le script parcourt la liste des connexions et g√©n√®re un nombre al√©atoire de transactions pour chaque connexion.  Il est √©crit de la m√™me mani√®re - dans des fichiers .csv par des packages. </p><br><h3 id="sozdaniya-grafa-patterny">  Count Creations: Patterns </h3><br><p>  Et ici, il y a des points int√©ressants.  Les types de mod√®les de comportement que nous voulions obtenir dans la derni√®re colonne: </p><br><ul><li>  Flux - une grande quantit√© va d'un n≈ìud √† m √† l'autre, chacun de ces m n≈ìuds transf√®re de l'argent au niveau suivant de n n≈ìuds, et ainsi de suite, jusqu'√† ce que le dernier niveau envoie tout l'argent √† un destinataire. </li><li>  Circulaire - la somme d'argent va dans un cercle et retourne √† la source. </li><li>  Temps - une certaine somme d'argent va d'un n≈ìud √† un autre avec une fr√©quence fixe. </li></ul><br><p>  Examinons chacun de ces mod√®les plus en d√©tail: </p><br><h4 id="flow">  D√©bit </h4><br><p> Pour commencer, le nombre de niveaux √† travers lesquels l'argent devra passer est s√©lectionn√©.  Dans notre impl√©mentation, ce nombre al√©atoire entre 2 et 6 n'est pas configurable et est c√¢bl√© dans le code.  Ensuite, deux n≈ìuds du graphique sont s√©lectionn√©s - l'exp√©diteur et le destinataire.  Un montant al√©atoire est √©galement s√©lectionn√©, que l'exp√©diteur enverra au destinataire (selon la formule intelligente <code>50000 * random() + 50000 * random()</code> ). </p><br><p>  Chaque membre de ce r√©seau prend une sorte de frais pour leurs services.  Dans notre impl√©mentation, le prix maximum pour passer de l'argent via le r√©seau sera de 10% du montant transf√©r√© par l'exp√©diteur. </p><br><p>  Les transactions g√©n√©r√©es ont un d√©calage temporel des transactions relatives du niveau de r√©seau pr√©c√©dent - c'est-√†-dire que l'argent arrive d'abord au niveau n-1, et ensuite seulement au niveau n.  Les retards sont choisis au hasard dans les 4 √† 5 jours.  De plus, les transactions g√©n√©r√©es ont des montants pseudo-al√©atoires (limit√©s par le montant initial et tenant compte des frais pour chaque n≈ìud) </p><br><h4 id="circular">  Circulaire </h4><br><p>  Il est g√©n√©r√© selon un principe similaire √† Flow, mais au lieu d'√©metteur et de r√©cepteur diff√©rents et de plusieurs niveaux dans ce mod√®le, l'argent va dans un cercle et retourne au n≈ìud d'origine.  Tous les n≈ìuds interm√©diaires facturent des frais, comme c'est le cas avec Flow, et les transactions ont √©galement un d√©calage temporel. </p><br><h4 id="time">  Le temps </h4><br><p>  Le motif le plus simple.  Un certain montant est envoy√© de l'exp√©diteur au destinataire un nombre al√©atoire de fois (de 5 √† 50, non configurable) avec des d√©calages temporels pseudo-al√©atoires. </p><br><p>  Toutes les nouvelles transactions sont √©crites de la m√™me mani√®re dans des fichiers .csv par lots. </p><br><h2 id="randomizaciya-grafa-i-sbor-vseh-tranzakciy-v-odin-fayl">  Repr√©sentation al√©atoire des graphiques et collecte de toutes les transactions dans un seul fichier </h2><br><p>  A ce stade, nous avons plusieurs fichiers .csv: </p><br><ul><li>  3 fichiers avec n≈ìuds (clients, entreprises et distributeurs automatiques de billets) </li><li>  4 fichiers de transactions: un pour les transactions r√©guli√®res et 3 contenant des mod√®les. </li></ul><br><p>  Un script suppl√©mentaire m√©lange les transactions de mod√®le avec les transactions r√©guli√®res de sorte qu'il n'est pas possible de voir les mod√®les dans un graphique dans l'ordre dans lequel les transactions sont enregistr√©es dans un fichier. </p><br><h2 id="i-chto-so-vsem-etim-delat">  Et que faire de tout √ßa? </h2><br><p>  Au final, nous avons 4 beaux fichiers avec des n≈ìuds de graphe et des transactions entre eux.  Vous pouvez importer dans Neo4J, vous pouvez distribuer via REST, mais tout ce que votre c≈ìur d√©sire, vous pouvez en faire. </p><br><p>  Quant √† nous, nous avons re√ßu un retour tr√®s positif des participants au hackathon, et quelques solutions tr√®s int√©ressantes pour trouver des motifs dans des graphiques massifs. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447626/">https://habr.com/ru/post/fr447626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447612/index.html">Centre de donn√©es spatiales. Traduction de texte du lancement du serveur dans la stratosph√®re</a></li>
<li><a href="../fr447614/index.html">Vous ne pourrez pas r√©soudre ce probl√®me lors de l'entretien</a></li>
<li><a href="../fr447616/index.html">Connecter Aquastorozh √† Smart Home sur Z-Wave</a></li>
<li><a href="../fr447618/index.html">La base de donn√©es du service de streaming Kanopy a divulgu√© jusqu'√† 40 millions d'entr√©es de journal sur les films visionn√©s par les utilisateurs</a></li>
<li><a href="../fr447622/index.html">Comment les changements sur Google Play affecteront l'optimisation ASO</a></li>
<li><a href="../fr447628/index.html">Hack WPA3: DragonBlood</a></li>
<li><a href="../fr447630/index.html">SpaceX: lancement de Falcon Heavy et atterrissage de trois acc√©l√©rateurs, deux d'entre eux en m√™me temps [01: 35MSK, 12 avr. 2019]</a></li>
<li><a href="../fr447632/index.html">Infrastructures cyclables aux Pays-Bas - comment √ßa marche?</a></li>
<li><a href="../fr447634/index.html">La stimulation √† l'√©lectricit√© entra√Æne une am√©lioration significative de la m√©moire des personnes √¢g√©es</a></li>
<li><a href="../fr447636/index.html">Comment √™tre un concepteur de votre vie: conseils de Bill Burnett, Stanford Design Program Manager et Apple Veteran</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>