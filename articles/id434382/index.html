<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘§ğŸ½ â›½ï¸ ğŸ“© Porting Alpine Linux ke RISC-V ğŸ¢ â ğŸ’¹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setelah berbulan-bulan menunggu yang luar biasa, saya baru saja menerima HiFive Unleashed saya, dan itu sangat keren. Bagi mereka yang tidak up to dat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Porting Alpine Linux ke RISC-V</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434382/">  Setelah berbulan-bulan menunggu yang luar biasa, saya baru saja menerima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">HiFive Unleashed</a> saya, dan itu sangat keren.  Bagi mereka yang tidak up to date, HiFive Unleashed adalah single-board <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RISC-V</a> pertama dengan dukungan Linux, yang berorientasi pada konsumen.  Jika belum jelas, RISC-V adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">arsitektur set instruksi</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terbuka</a> , dan HiFive adalah prosesor terbuka yang mengimplementasikannya.  Dan di sini dia ada di meja makan saya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1j/p4/z-/1jp4z-qtmdeqcs-yyiyz5zflzxk.jpeg"></div><br>  Papannya sangat <i>keren</i> .  Dalam beberapa bulan mendatang, saya akan mencoba menyiapkan segala sesuatu yang diperlukan untuk layanan integrasi terus-menerus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">builds.sr.ht</a> , di mana seluruh port Alpine Linux akan diotomatisasi, serta pemasangan sistem operasi lain (termasuk non-Linux) dan program pengguna yang Anda inginkan port ke RISC-V.  Saya cukup yakin bahwa ini akan menjadi proyek pertama pada peralatan RISC-V, terbuka untuk umum. <br><a name="habracut"></a><br>  Ada dua tahap porting sistem operasi ke arsitektur baru: bootstrap (bootstrap) dan ... sebenarnya, porting.  Karena tidak ada istilah yang lebih baik.  Untuk bootstrap, kita memerlukan cross-compiler, kita perlu port libc dan cross-compile elemen dasar.  <i>Bootstrap</i> berakhir ketika sistem mampu melakukan <i>hosting sendiri</i> , yaitu, ia dapat mengkompilasi dirinya sendiri.  Proses "porting" melibatkan kompilasi semua paket yang tersedia untuk sistem operasi Anda.  Prosesnya dapat memakan waktu dan umumnya otomatis. <br><br>  Langkah pertama adalah cross-compiler.  Dukungan RISC-V muncul di binutils 2.28 dan gcc 7.1 beberapa rilis yang lalu, Anda tidak bisa khawatir tentang itu.  Sudah cukup untuk mengumpulkan kedua kompiler dengan parameter <code>--target=riscv64-linux-musl</code> .  Bagian penting lainnya adalah library C standar atau libc.  Tidak seperti kompiler C, langkah ini memerlukan beberapa upaya di pihak saya, karena Alpine Linux didasarkan pada musl libc, dan port-nya untuk RISC-V belum lengkap dan belum termasuk dalam cabang utama. <br><br>  Tetapi ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tambalan</a> untuk mendukung RISC-V, meskipun belum pernah diuji pada skala ini.  Oleh karena itu, saya menemukan beberapa bug yang saya tulis beberapa tambalan ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">3</a> ).  Memiliki distribusi yang berfungsi berdasarkan port RISC-V adalah argumen yang meyakinkan yang mendukung kematangan versi porting, jadi saya senang saya menangkap bug ini.  Sampai saat itu, Anda harus secara manual menambahkan port dan tambalan Anda ke paket musl Alpine Linux. <br><br>  Kompiler C dan implementasi libc membuka pintu untuk porting sejumlah besar perangkat lunak ke platform Anda.  Langkah selanjutnya adalah mengidentifikasi dan mentransfer paket yang diperlukan untuk sistem hosting mandiri.  Di sini, di Alpine ada <a href="">skrip</a> hebat yang menyiapkan cross-compiler dan membangun sistem basis.  Banyak (jika tidak sebagian besar) dari paket ini memerlukan perbaikan, konfigurasi, dan intervensi manual - ini bukan solusi yang sudah jadi, tetapi alat yang sangat berguna.  Paket yang paling penting pada tahap ini adalah alat asli (yaitu, kompiler tidak hanya mengkompilasi, tetapi juga berjalan di bawah RISC-V), pengelola kata sandi itu sendiri dan berbagai hal bermanfaat lainnya, seperti tar, patch, openssl dan sebagainya. <br><br>  Setelah paket yang diperlukan telah dikompilasi dan sistem dapat mengkompilasi dirinya sendiri, proses migrasi yang panjang dimulai.  Di sini, biasanya bijaksana untuk meninggalkan cross-compiler dan memulai rakitan asli jika perangkat kerasnya cukup cepat.  Ini adalah kompromi karena sistem RISC-V sedikit lebih lambat dari mesin boot x86_64 saya, tetapi banyak paket membutuhkan banyak konfigurasi manual dan koreksi untuk kompilasi silang.  Waktu yang dihemat karena kompensasi ini untuk perakitan yang lebih lambat (walaupun sebenarnya saya sangat terkesan dengan kecepatan HiFive Unleashed. Hambatan utama adalah driver mmcblk, tetapi segera setelah file masuk ke cache kernel, semuanya menjadi sangat cepat dan menyenangkan). <br><br>  Ada ribuan paket, jadi langkah selanjutnya bagi saya (dan semua orang yang bekerja pada migrasi) adalah mengotomatiskan proses selanjutnya.  Bagi saya, langkah perantara adalah integrasi dengan layanan builds.sr.ht untuk mengatur pekerjaan saya sendiri dan membuat siklus tersedia untuk orang lain yang tertarik pada RISC-V.  Tidak semua paket akan diangkut secara otomatis - tetapi banyak juga yang akan diangkut!  Setelah Anda port bahasa pemrograman Anda - C, Python, Perl, Ruby (Saya sudah melakukan ini!), Dll - sebagian besar program open source cukup portabel di seluruh arsitektur.  Salah satu tujuan utama saya di sr.ht adalah untuk mendorong distribusi perangkat lunak portabel! <br><br>  Jika ada pembaca yang memiliki perangkat keras RISC-V sendiri atau ingin mencobanya dengan qemu, berikut adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori Alpine Linux untuk RISC-V</a> .  Sesuatu seperti ini akan menginstalnya di / mnt: <br><br><pre> <code class="bash hljs">apk add \ -X https://mirror.sr.ht/alpine/main/ \ --allow-untrusted \ --arch=riscv64 \ --root=/mnt \ alpine-base alpine-sdk vim chrony</code> </pre> <br>  Jalankan <code>/bin/busybox --install</code> dan <code>apk fix</code> pada boot pertama.  Pekerjaan masih berlangsung, jadi mengatur sisanya adalah latihan untuk pembaca sampai saya membersihkan proses dan membuat skrip instalasi yang normal.  Semoga beruntung <br><br><hr><br>  Kesimpulannya: terima kasih banyak telah membantu anggota komunitas #riscv di Freenode, serta pengembang Debian dan Fedora, yang sebagian besar membuka jalan dan merilis tambalan untuk banyak program!  Tapi saya mendapat semua kesenangan bergerak musl, jadi jalannya tidak sepenuhnya bersih :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434382/">https://habr.com/ru/post/id434382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434364/index.html">Dukungan Antrian Hangfire</a></li>
<li><a href="../id434368/index.html">Pembelajaran Mesin untuk Menemukan Kesalahan dalam Kode: Bagaimana Saya Magang di JetBrains Research</a></li>
<li><a href="../id434370/index.html">Penakluk bayangan lain di Phaser, atau penggunaan sepeda</a></li>
<li><a href="../id434374/index.html">Memeriksa RBAC di Kubernetes</a></li>
<li><a href="../id434380/index.html">Dasar-dasar Injeksi Ketergantungan</a></li>
<li><a href="../id434384/index.html">Atas tanggung jawab pemain</a></li>
<li><a href="../id434386/index.html">Douglas Engelbart: "Menambah Kecerdasan Manusia: Kerangka Konseptual"</a></li>
<li><a href="../id434394/index.html">Bugatti Automobiles Berhasil Menguji Caliper Rem Cetak 3D</a></li>
<li><a href="../id434398/index.html">Vanivar Bush: "As We May Think". Bagian 2</a></li>
<li><a href="../id434402/index.html">Solusi Veeam untuk pencadangan dan pemulihan mesin virtual pada platform Nutanix AHV. Bagian 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>