<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆕 💋 👴🏿 Visual Studio Code mengkonsumsi 13% sumber daya CPU karena kedipan kursor 🧘 🤷🏻 🙊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Masalah menyenangkan # 22900 minggu ini telah menarik perhatian khusus dari pengguna Github. 

 Penjelasan terperinci dari masalahnya ada di repositor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Visual Studio Code mengkonsumsi 13% sumber daya CPU karena kedipan kursor</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402601/"><img src="https://habrastorage.org/getpro/geektimes/post_images/3dc/383/0f6/3dc3830f6313207fe36950c4401543da.png"><br><br>  Masalah menyenangkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="># 22900</a> minggu ini telah menarik perhatian khusus dari pengguna Github. <br><br>  Penjelasan terperinci dari masalahnya ada di repositori editor kode Visual Studio Code ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vscode</a> ).  Pengembang sumber terbuka Jo Liss dikenal sebagai pencipta Brokoli dan perpustakaan gratis lainnya.  Pada halaman proyek, ia memperhatikan bahwa Visual Studio Code menggunakan 13% dari sumber daya komputasi prosesor jika jendela dalam fokus.  Karena itu, daya baterai pada laptop menjadi sia-sia.  Apa yang bisa menjadi alasan perilaku program yang aneh? <br><a name="habracut"></a><br>  Joe Liss menyarankan bahwa aktivitas CPU dikaitkan dengan rendering kursor - keadaan kursor berubah dua kali per detik, yaitu setiap 500 ms (2 fps). <br><br>  Untuk mereproduksi masalah, lakukan langkah-langkah berikut: <br><br><ol><li>  Tutup semua jendela dalam Visual Studio Code. </li><li>  Buka jendela baru (File → Jendela Baru). </li><li>  Buka tab baru dengan file kosong (File → Tab Baru).  Kursor berkedip. </li><li>  Di monitor sumber daya, Anda akan melihat konsumsi sumber daya komputasi yang tidak nol (13% pada laptop yang lemah dengan OS X, sekitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5-7%</a> pada GNOME Shell yang kuat dengan Wayland (Ivy Bridge Graphics)). </li><li>  Beralih ke jendela aplikasi lain (Cmd + Tab).  Kursor tidak lagi terlihat. </li><li>  Konsumsi CPU dari Visual Studio Code dikurangi menjadi hampir nol. </li></ol><br>  Seseorang membutuhkannya, berikut adalah garis waktu untuk menulis di Alat Pengembang: <a href="">TimelineRawData-20170321T114212.json.zip</a> (lihat tangkapan layar di atas). <br><br>  Jika Anda memperbesar satu bingkai, Anda dapat melihat bahwa meskipun frekuensi flicker 2 fps, utas utama bekerja pada 60 fps, artinya, ia membuat sesuatu setiap 16 ms. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/4f9/540/768/4f95407680850a6bce4d375e3f93ddb6.png"><br><br>  Jika Anda mendekatkannya lebih jauh, Anda bisa melihat kerja besar konkret yang dibuat kursor pada 60 frame / s.  Ini adalah siklus periodik "Perbarui Lapisan Pohon" / "Cat" / "Lapisan Komposit", yaitu memperbarui pohon lapisan <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b01/b71/cde/b01b71cde2c01ac92c37ee9c1ecae11e.png"><br><br>  Pengembang mencatat bahwa dalam aplikasi macOS Sierra 10.12.3 lainnya, termasuk Chrome dan TextEdit, kursor berkedip tanpa konsumsi CPU yang nyata. <br><br>  Pengguna editor Visual Studio Code dapat mematikan flicker kursor dalam program.  Dalam hal ini, konsumsi CPU dikurangi menjadi 0%.  Loop "Perbarui Lapisan Pohon" / "Cat" / "Lapisan Komposit" masih berfungsi, tetapi hanya setiap 500 ms, bukan setiap 16 ms. <br><br> <code>"editor.cursorBlinking": "solid"</code> <br> <br>  Kesalahan lucu dalam Visual Studio Code ini menyerupai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">masalah indikator rem</a> npm klasik.  Dalam npm 3.5.2, dengan indikator progres menyala, operasi dilakukan sekitar 50% lebih lambat daripada tanpa indikator. <br><br><pre> <code class="hljs sql">$ rm -r node_modules $ npm <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> progress=<span class="hljs-literal"><span class="hljs-literal">false</span></span> $ <span class="hljs-built_in"><span class="hljs-built_in">time</span></span> npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> <span class="hljs-number"><span class="hljs-number">19.91</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">2.66</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">system</span></span> <span class="hljs-number"><span class="hljs-number">71</span></span>% cpu <span class="hljs-number"><span class="hljs-number">31.667</span></span> total $ rm -r node_modules $ npm <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> progress=<span class="hljs-literal"><span class="hljs-literal">true</span></span> $ <span class="hljs-built_in"><span class="hljs-built_in">time</span></span> npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> <span class="hljs-number"><span class="hljs-number">33.26</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">3.19</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">system</span></span> <span class="hljs-number"><span class="hljs-number">74</span></span>% cpu <span class="hljs-number"><span class="hljs-number">48.733</span></span> total</code> </pre> <br><h1>  Apa alasannya </h1><br>  Tentu saja, konsumsi CPU ketika kursor berkedip memiliki alasan yang sangat berbeda dari memperlambat npm dengan indikator kemajuan aktif.  Anda dapat menebak alasan masalah dengan kursor jika Anda melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bug yang hampir sama</a> dengan animasi kerangka tombol CSS di browser Chrome.  Di sana, pengembang menulis bahwa dalam JavaScript, kursor yang berkedip-kedip mengkonsumsi 1,2% sumber daya CPU normal, dan dalam CSS, untuk beberapa alasan, adalah 6 kali lebih banyak, yaitu 7-8%. <br><br>  Tampaknya kode itu benar: <br><br><pre> <code class="hljs css">@<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> monaco-cursor-blink { 50% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } 100% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-selector-class"><span class="hljs-selector-class">.cursor-blink</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: monaco-cursor-blink <span class="hljs-number"><span class="hljs-number">1s</span></span> step-start <span class="hljs-number"><span class="hljs-number">0s</span></span> infinite; }</code> </pre> <br>  Tetapi masalahnya adalah bahwa mesin Chromium memaksa animasi ini hingga 60 fps, memaksanya bekerja setiap 16 ms. <br><br>  Jadi, editor Visual Studio Code jelas menggunakan pendekatan yang paling logis untuk mengimplementasikan fungsi kursor yang berkedip: ini adalah fungsi <code>step</code> dengan animasi keyframe CSS.  Dan bug di Chromium <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini belum sepenuhnya diperbaiki</a> , meskipun telah berlangsung selama lebih dari dua tahun.  Jadi Chrome melakukan siklus rendering penuh setiap 16 ms, sebagaimana seharusnya untuk 60 frame per detik.  Mungkin diskusi saat ini akan menarik perhatian pada bug lama - dan para pengembang akhirnya akan mendapatkannya. <br><br>  Pengembang Visual Studio Code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengakui</a> bahwa fungsi ini awalnya diimplementasikan dalam JavaScript, tetapi sekitar setahun yang lalu mereka beralih ke CSS.  Dalam implementasi saat ini, jika jendela tidak fokus, maka animasi dinonaktifkan dan tidak ada konsumsi sumber daya prosesor yang berlebihan, tetapi sebenarnya ada masalah dengan jendela aktif.  Pengembang percaya bahwa dalam situasi seperti itu masuk akal untuk kembali dari CSS kembali ke JS. <br><br>  Rekan kerja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disarankan</a> untuk mempertimbangkan penerapan kursor sebagai animasi gif.  Anda dapat membuat file seperti itu secara otomatis, tergantung pada skema warna editor.  Benar, mungkin ada kesulitan dengan pembesaran: bagaimanapun, grafik raster akan menjadi buram saat melakukan pembesaran. <br><br>  Tetapi pada akhirnya, pengembang dari Microsoft masih memutuskan untuk kembali ke metode JS yang baik, setInterval untuk mengedipkan kursor - dan konsumsi CPU segera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menurun beberapa kali</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id402601/">https://habr.com/ru/post/id402601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id402587/index.html">Peluncuran bersejarah SpaceX di tengah masalah ekonomi</a></li>
<li><a href="../id402589/index.html">Bagaimana BTS meledak</a></li>
<li><a href="../id402591/index.html">Anatomi pesona</a></li>
<li><a href="../id402593/index.html">Apa yang akan menyebabkan permafrost mencair?</a></li>
<li><a href="../id402599/index.html">Tanya Ethan: Apakah puncak Gravitasi melanggar hukum fisika paling sederhana?</a></li>
<li><a href="../id402603/index.html">Sejarah satu penganalisa spektrum</a></li>
<li><a href="../id402605/index.html">IBM dan Visa akan mengubah perangkat IoT menjadi terminal pembayaran</a></li>
<li><a href="../id402607/index.html">Peralatan fotografi dari fotografer amatir di berbagai tahap evolusinya</a></li>
<li><a href="../id402609/index.html">WhatsApp, Telegram dan kamera depan: cara kerjanya, bagaimana cara kerjanya, dan sedikit lagi tentang korespondensi dengan dukungan</a></li>
<li><a href="../id402611/index.html">Allocacoc PowerHUB: Mobile USB Hub</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>