<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍹 💅🏾 🐇 Überschreiben oder Reduzieren der Stufe 80: Der Pfad vom Switch-Case zu den Klassen 🧕 🍨 👩🏾‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Worum geht es? 


 Schauen wir uns die Metamorphosen von Reduzierern in meinen Redux / NGRX-Anwendungen in den letzten Jahren an. Beginnend mit dem Ei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Überschreiben oder Reduzieren der Stufe 80: Der Pfad vom Switch-Case zu den Klassen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440524/"><p><img src="https://habrastorage.org/webt/ud/sm/oe/udsmoenal1bazibn-vxzwkytz_8.jpeg" alt="Bild"></p><br><h2 id="o-chem-poydet-rech">  Worum geht es? </h2><br><p> Schauen wir uns die Metamorphosen von Reduzierern in meinen Redux / NGRX-Anwendungen in den letzten Jahren an.  Beginnend mit dem Eichen- <code>switch-case</code> , weiter mit der Auswahl aus dem Objekt nach Schlüssel und endend mit Klassen mit Dekoratoren, Blackjack und TypeScript.  Wir werden versuchen, nicht nur die Geschichte dieses Weges zu überprüfen, sondern auch einen kausalen Zusammenhang zu finden. </p><a name="habracut"></a><br><blockquote>  Wenn Sie und ich Fragen zur Entsorgung einer Heizplatte in Redux / NGRX stellen, kann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieser Artikel</a> für Sie interessant sein. <br><br>  Wenn Sie den Ansatz bereits verwenden, um einen Reduzierer aus einem Objekt per Schlüssel auszuwählen, und die Nase voll davon haben, können Sie sofort zu "Klassenbasierte Reduzierer" wechseln. </blockquote><br><h2 id="shokoladnyy-switch-case">  Schokoladenschalterkoffer </h2><br><blockquote>  Normalerweise ist der <code>switch-case</code> Vanille, aber es schien mir, dass dies alle anderen Arten von <code>switch-case</code> ernsthaft diskriminierte. </blockquote><p>  Schauen wir uns also ein typisches Problem der asynchronen Erstellung einer Entität an, beispielsweise eines Jedi. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-comment"><span class="hljs-comment">//   data: [], error: undefined, } const reducerJedi = (state = reducerJediInitialState, action) =&gt; { switch (action.type) { case actionTypeJediCreateInit: return { ...state, loading: true, } case actionTypeJediCreateSuccess: return { loading: false, data: [...state.data, action.payload], error: undefined, } case actionTypeJediCreateError: return { ...state, loading: false, error: action.payload, } default: return state } }</span></span></code> </pre> <br><p>  Ich werde sehr offen sein und zugeben, dass ich in meiner Praxis noch nie einen <code>switch-case</code> habe.  Ich würde gerne glauben, dass ich sogar eine Liste von Gründen dafür habe: </p><br><ul><li>  <code>switch-case</code> zu leicht zu brechen: Sie können vergessen, <code>break</code> einzufügen, Sie können die <code>default</code> vergessen. </li><li>  <code>switch-case</code> zu ausführlich. </li><li>  <code>switch-case</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fast</a> O (n).  Das ist an sich nicht sehr wichtig, weil  Redux bietet an sich keine atemberaubende Leistung, aber diese Tatsache macht meinen inneren Schönheitskenner wütend. </li></ul><br><p>  Die logische Möglichkeit, all dies zu kämmen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bietet die offizielle Redux-Dokumentation</a> - die Auswahl eines Reduzierers aus dem Objekt per Schlüssel. </p><br><h2 id="vybor-redyusera-iz-obekta-po-klyuchu">  Auswahl eines Reduzierers aus einem Objekt per Schlüssel </h2><br><p>  Die Idee ist einfach: Jede Zustandsänderung kann durch eine Funktion von Zustand und Aktion beschrieben werden, und jede solche Funktion hat einen bestimmten Schlüssel ( <code>type</code> in der Aktion), der ihr entspricht.  Weil  <code>type</code> ist eine Zeichenfolge, nichts hindert uns daran, ein Objekt für all diese Funktionen zu finden, bei denen der Schlüssel <code>type</code> und der Wert eine reine Zustandsumwandlungsfunktion (Reduzierer) ist.  In diesem Fall können wir den erforderlichen Reduzierer per Schlüssel (O (1)) auswählen, wenn eine neue Aktion beim Root-Reduzierer eintrifft. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediMap = { [actionTypeJediCreateInit]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }), [actionTypeJediCreateSuccess]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [...state.data, action.payload], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, }), [actionTypeJediCreateError]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.payload, }), } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = reducerJediInitialState, action</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    `type`  const reducer = reducerJediMap[action.type] if (!reducer) { //   ,        return state } //        return reducer(state, action) }</span></span></code> </pre> <br><p>  Das Köstlichste ist, dass die Logik in <code>reducerJedi</code> für jeden <code>reducerJedi</code> bleibt und wir sie wiederverwenden können.  Dafür gibt es sogar eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux-Create-Reducer-Nano-Bibliothek</a> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createReducer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-create-reducer'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJediInitialState = { <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = createReducer(reducerJediInitialState, { [actionTypeJediCreateInit]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }), [actionTypeJediCreateSuccess]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [...state.data, action.payload], <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, }), [actionTypeJediCreateError]: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...state, <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.payload, }), })</code> </pre> <br><p>  Es scheint, dass nichts passiert ist.  Ein Löffel Honig ist zwar nicht ohne ein Fass Teer: </p><br><ul><li>  Für komplexe Reduzierungen müssen wir Kommentare hinterlassen, weil  Diese Methode bietet keinen sofortigen Ausweg, um einige erklärende Metainformationen bereitzustellen. </li><li>  Objekte mit einer Reihe von Reduzierern und Schlüsseln werden nicht gut gelesen. </li><li>  Jeder Reduzierer hat nur einen Schlüssel.  Aber was ist, wenn Sie denselben Reduzierer für mehrere Actionspiele verwenden möchten? </li></ul><br><p>  Ich brach fast in Tränen des Glücks aus, als ich zu klassenbasierten Reduzierern wechselte, und im Folgenden werde ich erklären, warum. </p><br><h2 id="redyusery-na-osnove-klassov">  Klassenbasierte Reduzierstücke </h2><br><p>  Brötchen: </p><br><ul><li>  Klassenmethoden sind unsere Reduzierer, und Methoden haben Namen.  Nur die Meta-Informationen, die zeigen, was dieser Reduzierer tut. </li><li>  Klassenmethoden können dekoriert werden. Dies ist eine einfache deklarative Methode, um Reduzierungen und ihre entsprechenden Aktionen zu verknüpfen (nämlich Aktionen, nicht nur eine Aktion!). </li><li>  Unter der Haube können Sie dieselben Objekte verwenden, um O (1) zu erhalten. </li></ul><br><p>  Am Ende möchte ich so etwas bekommen. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateInit = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-init'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateSuccess = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-success'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> actionTypeJediCreateError = <span class="hljs-string"><span class="hljs-string">'jedi-app/jedi-create-error'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReducerJedi</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     "Class field delcaratrions",    Stage 3. // https://github.com/tc39/proposal-class-fields initialState = { loading: false, data: [], error: undefined, } @Action(actionTypeJediCreateInit) startLoading(state) { return { ...state, loading: true, } } @Action(actionTypeJediCreateSuccess) addNewJedi(state, action) { return { loading: false, data: [...state.data, action.payload], error: undefined, } } @Action(actionTypeJediCreateError) error(state, action) { return { ...state, loading: false, error: action.payload, } } }</span></span></code> </pre> <br><p>  Ich sehe das Ziel, ich sehe keine Hindernisse. </p><br><h3 id="shag-1-dekorator-action">  Schritt 1. Decorator <code>@Action</code> . </h3><br><p>  Wir brauchen, dass wir in diesem Dekorateur eine beliebige Anzahl von Aktionen ausführen können und dass diese ZhKshny als eine Art Metainformation gespeichert werden, auf die später zugegriffen werden kann.  Dazu können wir die wunderbaren Polyfill <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reflect</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Metadaten verwenden</a> , die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reflect patchen</a> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> METADATA_KEY_ACTION = <span class="hljs-string"><span class="hljs-string">'reducer-class-action-metadata'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Action = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...actionTypes</span></span></span><span class="hljs-function">) =&gt;</span></span> (target, propertyKey, descriptor) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">Reflect</span></span>.defineMetadata(METADATA_KEY_ACTION, actionTypes, target, propertyKey) }</code> </pre> <br><h3 id="shag-2-prevraschaem-klass-v-sobstvenno-redyuser">  Schritt 2. Verwandeln Sie die Klasse in einen Reduzierer. </h3><br><blockquote>  Zeichne einen Kreis, zeichne eine Sekunde und jetzt ein bisschen Magie und hol dir eine Eule! </blockquote><p>  Wie wir wissen, ist jeder Reduzierer eine reine Funktion, die den aktuellen Status und die Aktion übernimmt und einen neuen Status zurückgibt.  Eine Klasse ist natürlich eine Funktion, aber nicht genau die, die wir benötigen, und ES6-Klassen können nicht ohne <code>new</code> aufgerufen werden.  Im Allgemeinen müssen wir es irgendwie transformieren. </p><br><p>  Wir brauchen also eine Funktion, die die aktuelle Klasse übernimmt, jede ihrer Methoden durchläuft, Metainformationen mit Aktionstypen sammelt, ein Objekt mit Reduzierungen sammelt und aus diesem Objekt den endgültigen Reduzierer erstellt. </p><br><p>  Beginnen wir mit dem Sammeln von Metainformationen. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getReducerClassMethodsWthActionTypes = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">instance</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       const proto = Object.getPrototypeOf(instance) const methodNames = Object.getOwnPropertyNames(proto).filter( (name) =&gt; name !== 'constructor', ) //             const res = [] methodNames.forEach((methodName) =&gt; { const actionTypes = Reflect.getMetadata( METADATA_KEY_ACTION, instance, methodName, ) //     `this`    const method = instance[methodName].bind(instance) //  ,         actionTypes.forEach((actionType) =&gt; res.push({ actionType, method, }), ) }) return res }</span></span></code> </pre> <br><p>  Jetzt können wir die resultierende Sammlung in ein Objekt konvertieren </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getReducerMap = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">methodsWithActionTypes</span></span></span><span class="hljs-function">) =&gt;</span></span> methodsWithActionTypes.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reducerMap, { method, actionType }</span></span></span><span class="hljs-function">) =&gt;</span></span> { reducerMap[actionType] = method <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reducerMap }, {})</code> </pre> <br><p>  Die endgültige Funktion könnte also so aussehen: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createReducer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-create-reducer'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createClassReducer = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ReducerClass</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerClass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReducerClass() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> methodsWithActionTypes = getReducerClassMethodsWthActionTypes( reducerClass, ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerMap = getReducerMap(methodsWithActionTypes) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = reducerClass.initialState <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducer = createReducer(initialState, reducerMap) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reducer }</code> </pre> <br><p>  Als nächstes können wir es auf unsere <code>ReducerJedi</code> Klasse <code>ReducerJedi</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducerJedi = createClassReducer(ReducerJedi)</code> </pre> <br><h3 id="shag-3-smotrim-chto-poluchilos-v-itoge">  Schritt 3. Wir schauen uns an, was als Ergebnis passiert ist. </h3><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       import { Action, createClassReducer } from 'utils/reducer-class' const actionTypeJediCreateInit = 'jedi-app/jedi-create-init' const actionTypeJediCreateSuccess = 'jedi-app/jedi-create-success' const actionTypeJediCreateError = 'jedi-app/jedi-create-error' class ReducerJedi { //     "Class field delcaratrions",    Stage 3. // https://github.com/tc39/proposal-class-fields initialState = { loading: false, data: [], error: undefined, } @Action(actionTypeJediCreateInit) startLoading(state) { return { ...state, loading: true, } } @Action(actionTypeJediCreateSuccess) addNewJedi(state, action) { return { loading: false, data: [...state.data, action.payload], error: undefined, } } @Action(actionTypeJediCreateError) error(state, action) { return { ...state, loading: false, error: action.payload, } } } export const reducerJedi = createClassReducer(ReducerJedi)</span></span></code> </pre> <br><h2 id="kak-zhit-dalshe">  Wie kann man weiterleben? </h2><br><p>  Etwas, das wir hinter den Kulissen zurückgelassen haben: </p><br><ul><li>  Was ist, wenn der gleiche Aktionstyp mehreren Reduzierern entspricht? </li><li>  Es wäre toll, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">immer</a> out of the box hinzuzufügen. </li><li>  Was ist, wenn wir Klassen verwenden möchten, um unsere Aktionen zu erstellen?  Oder Funktionen (Aktionsersteller)?  Ich möchte, dass der Dekorateur nicht nur Arten von Aktionen akzeptieren kann, sondern auch Aktionsersteller. </li></ul><br><p>  Eine kleine Bibliothek der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reduziererklasse</a> bietet all diese Funktionen mit zusätzlichen Beispielen. </p><br><p>  Es ist erwähnenswert, dass die Idee, Klassen für Reduzierungen zu verwenden, nicht neu ist.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@amcdnl hat</a> einmal eine großartige Bibliothek mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ngrx-Aktionen erstellt</a> , aber es scheint, dass er sie jetzt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bewertet</a> und zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NGXS gewechselt hat</a> .  Außerdem wollte ich eine strengere Eingabe und das Zurücksetzen des Vorschaltgeräts in Form einer spezifischen Angular-Funktionalität.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist eine Liste der Hauptunterschiede zwischen Reducer-Class- und Ngrx-Aktionen.</a> </p><br><blockquote>  Wenn Ihnen die Idee von Klassen für Reduzierungen gefallen hat, möchten Sie möglicherweise auch Klassen für Ihre Aktionen verwenden.  Schauen Sie sich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flux-Action-Klasse an</a> . </blockquote><p>  Ich hoffe, Sie haben keine Zeit umsonst verschwendet, und der Artikel war zumindest ein wenig nützlich für Sie.  Bitte treten und kritisieren.  Wir werden lernen, gemeinsam besser zu codieren. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440524/">https://habr.com/ru/post/de440524/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440514/index.html">Wer wird das Land der Cyborgs bevölkern? Der Entwicklungsstatus der Firma Motorika sprach über den zukünftigen Status von Russky Island</a></li>
<li><a href="../de440516/index.html">„Soziale Linux-Netzwerke“ - wie LiveJournal zum Entdecker von Blogs wurde und diese dann verlor</a></li>
<li><a href="../de440518/index.html">Wir schreiben eine Lernanwendung in Go und Javascript, um die tatsächlichen Aktienrenditen zu bewerten. Teil 1 - Backend</a></li>
<li><a href="../de440520/index.html">So erhalten Sie die Google Developers-Zertifizierung: Mobile Web Specialist</a></li>
<li><a href="../de440522/index.html">Erfahrung in der Implementierung einer virtuellen Telefonanlage. Kommunikation und Software in verschiedenen Körben</a></li>
<li><a href="../de440526/index.html">Die japanische Stadt wendet sich nach massiver Schneeverwehung der digitalen Technologie zu</a></li>
<li><a href="../de440528/index.html">"Zeig mir deine Turnschuhe und ich sage dir, wer du bist": Neuer Podcast zu thematischen Medienprojekten</a></li>
<li><a href="../de440530/index.html">Weitere Funktionen mit Mustern in C # 8.0</a></li>
<li><a href="../de440534/index.html">Übersetzung des politisch korrekten Wortschatzes vom Englischen ins Russische</a></li>
<li><a href="../de440536/index.html">Wie Facebook Project Infer hilft, Fehler in mobilen Anwendungen vor der Bereitstellung zu finden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>