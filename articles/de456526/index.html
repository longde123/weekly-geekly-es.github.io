<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📨 ⚙️ ➕ Wir optimieren Assets für WebGL korrekt 🈳 👩🏾‍🔧 🤟🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es kommt häufig vor, dass Optimierungstechniken, die für normale Desktop- oder mobile Grafiken gut funktionieren, bei WebGL nicht immer den gewünschte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir optimieren Assets für WebGL korrekt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456526/">  Es kommt häufig vor, dass Optimierungstechniken, die für normale Desktop- oder mobile Grafiken gut funktionieren, bei WebGL nicht immer den gewünschten Effekt erzielen.  In diesem Artikel habe ich die Produktivitätsmethoden gesammelt (oder besser gesagt ins Russische übersetzt und im Text unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Präsentation</a> mit Verge3Day skizziert), die für die Erstellung interaktiver Webanwendungen gut geeignet waren. <br><br><img src="https://habrastorage.org/webt/f3/-h/po/f3-hpomrfalqm_dx6bd7wucnbgu.png"><br><a name="habracut"></a><br><h2>  Geometrie / Netze </h2><br>  Die richtige Geometrie ist der Schlüssel zur Leistung jeder 3D-Anwendung.  Um eine gleichmäßige Schattierung und ein schnelles Rendern zu erzielen, sollten Sie das Polygonnetz so gleichmäßig wie möglich halten.  Zu Beginn der Arbeit sollten Sie den Detaillierungsgrad Ihrer Szene bestimmen und sich beim Modellieren daran halten. <br><br><img src="https://habrastorage.org/webt/5p/zq/uj/5pzqujnn_wdjuabotnmqswesfi8.jpeg"><br><br>  Beim Modellieren von Falten ist es besser, Schattierungsgruppen zu verwenden, als mehr Polygone hinzuzufügen. <br><br><img src="https://habrastorage.org/webt/x3/eh/7u/x3eh7ulhzw5kwlfz5ii6yys2jng.jpeg"><br><br>  Versuchen Sie bei der Arbeit mit einem zylindrischen Modell, die Anzahl der Polygone näher an der Mitte zu verringern. <br><br><img src="https://habrastorage.org/webt/an/4e/n8/an4en8ebhrlarhxwvxfco8-vx88.jpeg"><br><br>  Überladen Sie das Modell nicht mit zusätzlichen Teilen, die der Benutzer immer noch nicht sieht.  Wie in der folgenden Abbildung gezeigt, bestimmt die orange hervorgehobene Kante den Detaillierungsgrad für das gesamte Modell, sodass Sie sie als Richtlinie verwenden können. <br><br><img src="https://habrastorage.org/webt/d9/-p/yc/d9-pycf3wujunw3fuuryyotmfsa.jpeg"><br><br><h2>  Normale Karten </h2><br>  Eine übliche Methode zur Optimierung der WebGL-Leistung besteht darin, die Anzahl der Polygone durch Erstellen normaler Karten zu verringern. <br><br><img src="https://habrastorage.org/webt/cm/ll/ym/cmllymx9s4rem9ynwyvywunmqxy.jpeg"><br><br>  Normale Karten können jedoch aufgrund der begrenzten Genauigkeit des 8-Bit-Bildes sichtbare Artefakte erzeugen.  Mögliche Lösungen für dieses Problem sind in der folgenden Abbildung dargestellt, jedoch nur schwer zu implementieren: Die Verwendung des Bildes mit höherer Genauigkeit führt zu einer Vergrößerung der heruntergeladenen Datei, während der zweite Ansatz ziemlich zeitaufwändig ist und kein sauberes Ergebnis garantiert.  Der dritte Ansatz funktioniert manchmal bei rauen Oberflächen.  In diesem Fall empfehlen wir, Ihren Materialien Rauschen hinzuzufügen, um mögliche Artefakte zu reduzieren. <br><br><img src="https://habrastorage.org/webt/cm/1q/rn/cm1qrnqpt1qs13qi0oavun0l2ec.jpeg"><br><br>  Basierend auf unserer Erfahrung kamen wir zu dem Schluss, dass die beste Lösung für glänzende Objekte darin besteht, Geometrie mittlerer Komplexität mit glatten Scheitelpunktgruppen ohne Verwendung einer normalen Karte zu verwenden. <br><br><img src="https://habrastorage.org/webt/nd/bv/uw/ndbvuwvn3ao61dafaphqah7nhs0.jpeg"><br><br>  Schließlich sind hier einige Fälle aufgeführt, in denen Sie eine normale Karte anstelle eines sehr detaillierten Netzes verwenden können: <br><br><ul><li>  Ihr Objekt besteht aus vielen verschiedenen Oberflächen. </li><li>  Sie haben eine raue Oberfläche, die keine sichtbaren Mängel aufweist. </li><li>  Ihre Objekte sind so weit entfernt oder klein, dass der Benutzer keine Artefakte bemerken kann. </li></ul><br><img src="https://habrastorage.org/webt/b9/-b/1y/b9-b1y8tfbf1yfs-vuss6vfuaky.jpeg"><br><br><h2>  Texturierung </h2><br>  Hier ist ein typischer Satz von Texturen, die im modernen PBR-Beleuchtungsmodell (und nicht nur) verwendet werden. <br><br><img src="https://habrastorage.org/webt/hu/ip/07/huip07zd2h1-gjr3pioqzmcnwxw.jpeg"><br><br>  Wie Sie sehen können, sind die meisten von ihnen schwarz und weiß.  Daher können Sie s / w-Texturen in den RGBA-Kanälen eines Bildes kombinieren (insgesamt bis zu 4 Karten pro Bild). <br><br><img src="https://habrastorage.org/webt/bv/hw/cu/bvhwcuec0dapzvsygiox7gpei2a.jpeg"><br><br>  Wenn Sie nur eine s / w-Textur haben, können Sie diese mit jeder vorhandenen RGB-Textur kombinieren, indem Sie sie in einen Alphakanal packen.  Wenn Sie kein Bild zum Kombinieren haben, können Sie Ihr Schwarzweißbild mit 95% Komprimierung und aktivierter Graustufe in das JPEG-Format konvertieren. <br><br><img src="https://habrastorage.org/webt/jz/ws/sy/jzwssyyopq_jswi7ahzny0zwhsa.jpeg"><br><br>  Eine andere Möglichkeit, die Texturgröße zu reduzieren, besteht darin, den UV-Scan zu optimieren.  Je kompakter Ihr Scan ist, desto effizienter wird Ihr Bild den Texturraum nutzen.  Auf diese Weise erhalten Sie leichtere Bilder ohne Qualitätsverlust. <br><br><img src="https://habrastorage.org/webt/yv/_k/dh/yv_kdhifbs63s5xai2om5z37avi.jpeg"><br><br><h2>  Scheitelpunktfarben </h2><br>  Die Verwendung von Scheitelpunktfarben anstelle von Bildern ist eine effektive Methode, um das Laden zu beschleunigen und die Gesamtleistung Ihrer WebGL-Anwendungen zu steigern.  Der einzige Nachteil besteht darin, dass Sie Ihrem Modell einige zusätzliche Kanten hinzufügen müssen, um die Farben derselben Scheitelpunkte zu trennen. <br><br><img src="https://habrastorage.org/webt/4j/6w/_x/4j6w_xkffgfixggeghebye5tl_4.jpeg"><br><br>  Sie können auch Scheitelpunktfarben verwenden, um Rauheit, Metallizität oder Spiegeloberflächen oder andere Parameter zu bestimmen.  Unten sehen Sie ein Beispiel für ein solches Material, bei dem nur die Farben der Eckpunkte verwendet werden. <br><br><img src="https://habrastorage.org/webt/if/di/-s/ifdi-sbv5i300f7zkpjwie8cfd8.jpeg"><br><br><h2>  Anzahl der Shader </h2><br>  Es ist sehr wichtig, dass sich weniger verschiedene Materialien / Shader auf Ihrer Bühne befinden.  Das Kompilieren von Shadern in WebGL führt zu einer langen Auslastung, die sich insbesondere in Windows bemerkbar macht.  Wenn Sie weniger Shader haben, verbringt die Engine beim Rendern weniger Zeit damit, zwischen ihnen zu wechseln, wodurch die Leistung verbessert wird. <br><br>  Wenn Sie ähnliche Materialien haben, die sich nur in Texturen unterscheiden, können Sie nur ein Material verwenden und seine Texturen zur Laufzeit laden / ändern.  Dazu können Sie JavaScript verwenden oder den in einigen WebGL-Frameworks verfügbaren visuellen Logikeditor verwenden.  Dies optimiert nicht nur die Anzahl der Shader, sondern reduziert auch die Anzahl der Bilder, die beim Start der Anwendung geladen werden. <br><br><img src="https://habrastorage.org/webt/dm/3w/vs/dm3wvs45kjv3deg4w0342os2o7e.jpeg"><br><br>  Hier ist ein Beispiel für eine solche Optimierung.  Alle vier Sorten eines Reifens werden durch ein Material dargestellt und durch Ersetzen von Texturen konfiguriert. <br><br><img src="https://habrastorage.org/webt/8l/9d/vg/8l9dvgl_jlessslo7qozr7fnlfe.jpeg"><br><br>  Um die Anzahl der Shader zu verringern, können Sie zwei oder mehr einfache Materialien zu einem komplexeren kombinieren.  Diese Methode ist besonders effektiv, wenn Sie zwischen diesen Materialien wechseln möchten (z. B. eine Konfiguratoranwendung erstellen) und den Übergang von einem Material zum anderen nicht nur wechseln, sondern reibungslos und schön animieren möchten. <br><br><img src="https://habrastorage.org/webt/tg/qj/nk/tgqjnky59qyocifqwtgxtvotsae.jpeg"><br><br><h2>  Anrufe zeichnen </h2><br>  Darüber hinaus gibt es einen weiteren wichtigen Aspekt - die Anzahl der Draw-Anrufe (es handelt sich auch um Draw-Anrufe und Draw-Anrufe).  Dies entspricht in etwa der Anzahl der einzelnen Objekte, wenn jedem Objekt nur ein Material zugeordnet ist, während Objekte mit mehreren Materialien noch mehr Aufrufe erfordern, um sie zu visualisieren. <br><br>  Daher sollten Sie sich bemühen, Gitter nach Möglichkeit zusammenzuführen und weniger einzigartige Materialien zu verwenden, um die Anzahl der Draw Calls zu reduzieren und die Leistung zu verbessern. <br><br><img src="https://habrastorage.org/webt/2s/62/if/2s62ifvsueoudvxkdaa6o4ilwse.jpeg"><br><br>  Wenn Sie ein animiertes Objekt haben, können Sie seine Teile trotzdem verbinden und die Knochen zum Animieren verwenden. Dies ist manchmal sogar noch praktischer, wenn Sie einzelne Objekte animieren. <br><br><img src="https://habrastorage.org/webt/rm/sj/wi/rmsjwiqlei4hbedtbuafmxbrwsk.jpeg"><br><br><h2>  HDR-Beleuchtung </h2><br>  Dies trägt zur deutlichen Verbesserung der Leistung bei, wenn Sie Ihre Szene nur mit einem HDR-Bild ohne Verwendung von Lichtquellen beleuchten.  Eine HDR-Datei kann weniger als 1 MB wiegen. <br><br><img src="https://habrastorage.org/webt/pm/j_/rl/pmj_rli9pkrhkwg4jgh0aggk5mu.jpeg"><br><br><h2>  Schatten </h2><br>  Verwenden Sie dynamische Schatten nur dann, wenn sie dazu beitragen, Ihr Objekt optimal darzustellen.  Das Bild unten zeigt die dynamischen Schatten unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Industrieroboter-</a> Demo.  Da sich das Modell selbst in dieser Anwendung dreht und nicht die Kamera, können die Schatten keinen Teil des Objekts vor dem Benutzer verbergen und die Form des Roboters perfekt betonen.  Andererseits verdecken dieselben Schatten in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scooter-</a> Demo viele Details des Modells. <br><br><img src="https://habrastorage.org/webt/o4/px/ik/o4pxikw8wlgmidid3mlswai50bq.jpeg"><br><br>  Wir schließen daraus: Wenn sich Ihr Objekt in der Anwendung nicht bewegt, können Sie Schatten- und Umgebungsokklusionskarten backen und sie der Ebene unter dem Objekt zuweisen.  Eine solche Lösung ist produktiver und sieht besser aus als bei Verwendung dynamischer Schatten. <br><br><img src="https://habrastorage.org/webt/a4/5d/j1/a45dj1fnhbxpi4u8tnrpmqaptai.jpeg"><br><br>  Das ist alles  Wenn Sie weitere Tipps haben, die die Leistung von WebGL verbessern könnten, schreiben Sie in die Kommentare. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456526/">https://habr.com/ru/post/de456526/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456514/index.html">Methodik als Konstruktor: Montageanleitung</a></li>
<li><a href="../de456516/index.html">Von der Anwendung bis zur Szene. Lebensbericht bei Saint TeamLead Conf 2019</a></li>
<li><a href="../de456518/index.html">Im Namen eines neuen Produkts</a></li>
<li><a href="../de456520/index.html">Wie man nicht alle Polymere verliert, indem man in einem neuen Unternehmen führend wird</a></li>
<li><a href="../de456524/index.html">Wie kann mit der Lean-Priorisierung ein Gleichgewicht im Produktmanagement erreicht werden?</a></li>
<li><a href="../de456528/index.html">Überblick: Was bestimmt das Wachstum oder den Fall des Rubels?</a></li>
<li><a href="../de456532/index.html">Sprachpyramide: Wie man mit Hilfe von Dilts-Levels das Vertrauen des Publikums weckt</a></li>
<li><a href="../de456534/index.html">Füllen Sie Dokumente in Microsoft Word mit Python aus. Teil 1</a></li>
<li><a href="../de456536/index.html">AWS-Kosten, die jeder Programmierer kennen sollte</a></li>
<li><a href="../de456538/index.html">Nginx-Rezepte: Autorisierung durch ESIA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>