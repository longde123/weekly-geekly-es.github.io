<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚¨úÔ∏è ü•™ üîØ Cr√©ation d'un bot pour participer √† la Russian AI Cup 2018 CodeBall üê≤ üõåüèΩ üõ∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C'est devenu une tradition qu'apr√®s les comp√©titions de programmation sportive, le vainqueur ou simplement un joueur publie un article sur Habr√© pour ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation d'un bot pour participer √† la Russian AI Cup 2018 CodeBall</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434838/"><img src="https://habrastorage.org/webt/sg/pq/la/sgpqlaxh9ox5tpwgvj2svnw9vgq.jpeg"><br><br>  C'est devenu une tradition qu'apr√®s les comp√©titions de programmation sportive, le vainqueur ou simplement un joueur publie un article sur Habr√© pour dire √† quel point c'√©tait formidable de participer √† la comp√©tition et comme option de gagner.  Bien s√ªr, beaucoup peut √™tre glan√© de son article pour de futures comp√©titions. <br><br>  Mais je pense qu'il y a peu d'articles sur la participation √† la comp√©tition actuelle au stade des tests b√™ta, il est clair que vous ne pouvez pas publier le code de d√©cision, on ne sait toujours pas √† quel point cette d√©cision est bonne et beaucoup est encore inconnu, car maintenant, en fait, ce n'est que le d√©but du tournoi, mais c'est le charme.  L‚Äôauteur donne au lecteur la chance de prendre un train au d√©part et de profiter d‚Äôun voyage du Nouvel An dans le monde des strat√©gies de jeu. <br><a name="habracut"></a><br>  Tout d'abord, merci d'avoir ouvert l'article, je veux partager un secret tout de suite: ce sera une s√©rie d'articles dans laquelle j'esp√®re aborder les algorithmes g√©n√©tiques et les r√©seaux de neurones.  En attendant, comme d√©j√† √©crit ci-dessus, bienvenue dans un voyage au Russian AI Cup CodeBall. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers la page de d√©marrage rapide du championnat.</a> <br><br>  Au lien ci-dessus, le lecteur pourra trouver les r√®gles du championnat, les r√®gles du jeu lui-m√™me et la partie principale de l'appareil math√©matique n√©cessaire pour cr√©er le bot.  La page de d√©marrage rapide contient √©galement des exemples de robots d√©j√† √©crits pour divers langages de programmation, ce qui facilite consid√©rablement le d√©marrage initial. <br><br>  Commen√ßons par un simple titre de championnat CodeBall. <br><br>  Une belle combinaison des mots code et ballon, presque du football.  Les r√®gles et la logique du jeu sont √©galement similaires au football, mais √† chaque tour, elles deviennent plus compliqu√©es / nous allons donc prendre les conditions initiales des jeux comme base. <br><br>  L'essence du jeu, comme indiqu√© dans une chanson r√©cente: les joueurs doivent marquer, et le gardien de but pour frapper les balles. <br><br>  Terrain de jeu sch√©matique: <br><br><img src="https://habrastorage.org/webt/hv/bg/2t/hvbg2teknndzvxg8kwbyjzaf-m0.jpeg"><br><br>  Veuillez noter que les bots se d√©placent dans le plan du sol de l'ar√®ne XZ, l'axe Y est responsable de la hauteur de l'objet de jeu. <br><br>  √âgalement des objets sch√©matiques du jeu (balle et bots (les organisateurs les appellent robots)) <br><br><img src="https://habrastorage.org/webt/d6/vx/rk/d6vxrkqw2yuka3viojviisk62l8.jpeg"><br><br>  Maintenant, du texte pour soutenir les images.  Le terrain de jeu est un espace clos en trois dimensions, ni le ballon ni les robots ne peuvent le d√©passer.  Dans cet espace, il y a deux zones de la ¬´porte¬ª lorsque frapp√© dans lesquelles le ballon est consid√©r√© comme marqu√© par l'un des joueurs.  Pour que le but soit compt√©, il est n√©cessaire que le ballon soit compl√®tement derri√®re les lignes de but (indiqu√© par une ligne pointill√©e sur la figure). <br><br>  Pour simplifier les calculs de collisions (collisions) d'objets de jeu (ar√®ne, balle, bots), les bots et la balle sont consid√©r√©s comme des sph√®res id√©ales (balles), qui sont d√©crites par les valeurs suivantes: rayon de la sph√®re, coordonn√©e du centre de la sph√®re, masse, vitesse.  L'ar√®ne est √©galement d√©crite par des primitives math√©matiques id√©ales, de sorte que le calcul de collision est supprim√© sans la participation de polygones, ce qui simplifie consid√©rablement la t√¢che.  Si vous faites d√©filer les r√®gles du championnat jusqu'√† la fin, le lecteur trouvera un programme sur le pseudo-code, qui est juste responsable des calculs ci-dessus.  Ce pseudo-code, apr√®s peu d'efforts physiques, est traduit dans le langage de programmation de votre choix et est tout √† fait r√©alisable.  Mais plus √† ce sujet plus tard. <br><br>  Quelques mots sur la physique du monde du jeu.  Pour donner de la cr√©dibilit√© √† ce qui se passe dans l'ar√®ne, la gravit√© est introduite, c'est-√†-dire que les robots et la balle sont constamment affect√©s par la force de gravit√© dirig√©e vers le bas par rapport au sol de l'ar√®ne.  Les autres formes d'interaction physique telles que le frottement ou les vitesses angulaires (rotation) des objets ont √©t√© ignor√©es par les organisateurs au profit de la simplicit√© de la description du monde physique.  Lorsqu'elle frappe les murs de l'ar√®ne, la balle perd une partie de son √©nergie, mais cela ne complique pas beaucoup le monde et il est compr√©hensible de l'ext√©rieur qu'il n'y a aucun moyen de cr√©er une machine √† mouvement perp√©tuel sous la forme d'une balle. <br><br>  Pour rendre le monde encore plus plausible, un sch√©ma de calculs avec Ticks et Mikrotiks a √©t√© appliqu√©.  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">son premier article, l'</a> auteur s'est attard√© sur le concept du temps de jeu en teck.  Dans cette comp√©tition, nous pouvons regarder le moteur physique dans les codes sources, comme il l'a dit, cela nous sera utile √† l'avenir, et constater que pour les joueurs il y a des Tics, et √† l'int√©rieur du moteur tout se passe dans Mikrotik, par d√©faut 100 Mikrotik en une seule fois, ce qui permet de mieux d√©crire les collisions d'objets et √©viter des choses d√©sagr√©ables comme la d√©faillance d'objets en dehors de l'ar√®ne ou la d√©faillance d'objets les uns dans les autres conduisant √† des erreurs dans l'interaction entre eux <br><br><img src="https://habrastorage.org/webt/x-/-3/yw/x--3ywtl_im8cqna5u8kzhaxol4.jpeg"><br><br>  Nous avons en quelque sorte compris le monde (ar√®ne) et le temps de jeu, regardons les objets du jeu: les robots et la balle.  Le ballon que nous avons d√©j√† d√©couvert √† partir des r√®gles de la comp√©tition est une sph√®re.  Pour √™tre bref, un bot est une balle d'un rayon plus petit et d'une masse plus grande, √† laquelle des commandes peuvent √™tre donn√©es: indiquez la vitesse souhait√©e (c'est un vecteur tridimensionnel contenant √† la fois la direction et la longueur ou l'amplitude de la vitesse) et la force du saut si le saut est actuellement conseill√© du point de vue la logique du jeu.  √Ä ce stade de la comp√©tition, une simplification a √©t√© introduite: si le bot est en vol (ne touche pas les murs de l'ar√®ne), il n'a pas la possibilit√© d'ex√©cuter des commandes pour modifier la vitesse. <br><br>  Nous nous tournons vers le plus difficile ou vice versa simple, tout d√©pend de l'exp√©rience du lecteur √† travailler avec des vecteurs tridimensionnels.  Description de l'emplacement des objets du jeu.  Image de support <br><br><img src="https://habrastorage.org/webt/hi/o_/oc/hio_ocfzpjgrcca_8txes-nvuno.jpeg"><br><br>  Passons √† la botanique. <br><br>  A chaque tick du jeu, votre strat√©gie recevra les objets suivants: <br><br>  Balle: <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ball</span></span></span><span class="hljs-class">:</span></span> x: Float <span class="hljs-comment"><span class="hljs-comment">//     y: Float z: Float velocity_x: Float //    velocity_y: Float velocity_z: Float radius: Float //  </span></span></code> </pre> <br>  et une liste de bots, avec des donn√©es pour chaque bot: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robot</span></span></span><span class="hljs-class">:</span></span> id: Int player_id: Int is_teammate: Bool <span class="hljs-comment"><span class="hljs-comment">// true,      x: Float //     y: Float z: Float velocity_x: Float //    velocity_y: Float velocity_z: Float radius: Float //    nitro_amount: Float //     touch: bool // true,      touch_normal_x: Float //        touch_normal_y: Float ( null,   ) touch_normal_z: Float</span></span></code> </pre><br>  vous pouvez voir imm√©diatement qu'il n'est pas pratique de travailler avec ces donn√©es, il est souhaitable d'introduire un vecteur 3D de classe (objet) et un vecteur 2D de classe.  Tout d√©pendra du langage de programmation de votre choix.  Habituellement, ces classes sont d√©j√† √©crites et se trouvent facilement sur Internet pour le langage de programmation souhait√©.  L'auteur √©crit actuellement un bot en c ++, mais va essayer de se limiter au pseudo-code.  Si vous introduisez des classes compl√®tes de vecteurs, les op√©rations d'addition, de soustraction, de multiplication, de normalisation et d'autres op√©rations vectorielles resteront √† l'int√©rieur de la classe, ce qui simplifiera consid√©rablement le travail sur la strat√©gie. <br><br>  Il existe √©galement une classe de joueurs qui indique quels bots de la liste sont les v√¥tres, lesquels sont: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Player</span></span></span><span class="hljs-class">:</span></span> id: Int me: Bool <span class="hljs-comment"><span class="hljs-comment">// true,      strategy_crashed: Bool score: Int //   </span></span></code> </pre> <br>  Apr√®s avoir transmis des donn√©es sur le monde du jeu √† l'entr√©e de votre strat√©gie, le moteur de jeu vous donne le contr√¥le et d√©marre un chronom√®tre pour les calculs, le temps pour les calculs est limit√©, en moyenne, √† environ 20 millisecondes pour toutes les actions √† l'int√©rieur du tick.  On soup√ßonne qu'√† ce stade, cela inclut √©galement le temps de d√©s√©rialiser les donn√©es re√ßues et de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©rialiser les</a> donn√©es envoy√©es par votre strat√©gie au serveur.  Mais comme le nombre de bots est de 4 (vos 2 et 2 adversaires, alors dans le tour final le nombre total de bots passera √† 6) le temps pour ces op√©rations peut √™tre n√©glig√©. <br><br>  Le temps est venu pour les √©quipes. <br><br>  Par exemple, nous voulons donner au bot l'ordre de se d√©placer vers la balle.  Pour trouver le vecteur souhait√© de la direction de la vitesse, il est n√©cessaire de soustraire la position du bot de la position de la balle, nous obtenons le vecteur de la direction de la balle, puis il peut √™tre normalis√© et multipli√© par la vitesse maximale du bot des constantes du monde.  Dans l'image plus <br><br><img src="https://habrastorage.org/webt/_w/tz/hv/_wtzhv47vva6poib76fowhvsarw.jpeg"><br><br>  Le lecteur a probablement remarqu√© sur la diapositive que les calculs peuvent √™tre effectu√©s √† la fois pour les vecteurs 3D et pour les vecteurs 2D.  Si nous prenons en compte le fait que le bot passe plus de temps sur le plan d'√©tage de l'ar√®ne, la simplification des calculs √† deux coordonn√©es n'affectera pas la pr√©cision des calculs d'interception de la balle.  Bien s√ªr, vous ne devez pas oublier la hauteur de la balle, mais compte tenu de la gravit√©, elle tombera t√¥t ou tard dans le bot. <br><br>  Un saut de bot est l'addition de la vitesse verticale (vitesse verticale), la direction du saut du bot co√Øncidera avec la direction de la vitesse actuelle du bot avec l'ajout d'une composante le long de l'axe Y. <br><br>  Si nous ajoutons une logique de mouvement plus complexe aux mots ci-dessus, nous pouvons obtenir le comportement suivant des bots: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3gCegLS58dE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Maintenant, il</a> y a un bac <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√†</a> sable <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site</a> o√π vous pouvez regarder les jeux, mais rien ne ressemble √† si vous √©crivez votre strat√©gie et suivez ses jeux.  Il a √©t√© √©tabli exp√©rimentalement que m√™me la strat√©gie la plus simple compos√©e de plusieurs dizaines de lignes de code peut tr√®s bien jouer. <br><br>  Parmi les formes simples de strat√©gies qui viennent √† l'esprit, la strat√©gie d'allouer un bot pour prot√©ger la porte, le deuxi√®me bot pour faire un attaquant.  La t√¢che principale de l'attaquant est de poursuivre le ballon et, en cas de succ√®s, de frapper vers le but de l'adversaire.  Un bot jouant en tant que gardien de but est g√©n√©ralement limit√© dans ses mouvements sur le terrain et op√®re principalement dans la zone de but.  Toutes ces choses sont facilement d√©crites en utilisant des constructions if-else de votre langue choisie.  Dans tous les cas, mon lecteur devra trouver et cr√©er une strat√©gie √† ce stade.  Selon les termes du concours, vous ne pouvez pas publier le code source de la strat√©gie.  Mais je pense qu'il n'est pas interdit de discuter des approches de conception d'une strat√©gie. <br><br>  Il me semble que les organisateurs du concours ont choisi un sujet int√©ressant pour le tournoi, le seul site est un peu lent, mais j'esp√®re qu'il sera bient√¥t corrig√©. <br><br>  quelques beaux moments de jeu du participant du championnat: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/RxTf2ep17jU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  J'attends des commentaires dans les commentaires concernant l'article, sur quoi m'attarder plus en d√©tail. <br>  Dans le prochain article, je vais essayer de d√©crire les m√©thodes de pr√©diction du comportement de la balle dans le temps pour un jeu de bots plus significatif dans votre strat√©gie. <br><br>  En attendant, f√©licitations pour la prochaine nouvelle ann√©e 2019! <br><br>  √Ä suivre. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434838/">https://habr.com/ru/post/fr434838/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434824/index.html">G√©nie politico-√©lectrique. Mod√©lisation des processus socio-politiques par des circuits √©lectriques</a></li>
<li><a href="../fr434826/index.html">Le champ de lit √† l'heure, ou 5 signes de probl√®mes cach√©s dans l'√©quipe</a></li>
<li><a href="../fr434828/index.html">Devenez un professionnel. Habitudes utiles des concepteurs UX</a></li>
<li><a href="../fr434830/index.html">Composants de Final React</a></li>
<li><a href="../fr434836/index.html">Annotation de Wonderful Version dans JPA</a></li>
<li><a href="../fr434840/index.html">Comment ai-je r√©alis√© "Your Diary" - ou la situation sur le march√© des agendas √©lectroniques</a></li>
<li><a href="../fr434842/index.html">Les fermes urbaines peuvent √™tre extr√™mement efficaces, mais pas pour le moment</a></li>
<li><a href="../fr434844/index.html">R√©cup√©ration des capacit√©s cognitives de 100 patients (traduction d'un article de Dale Bredesen)</a></li>
<li><a href="../fr434848/index.html">Le conseil d'administration de Tesla comprend deux administrateurs ind√©pendants - Larry Ellison et Caitlin Wilson-Thompson</a></li>
<li><a href="../fr434854/index.html">Panneau de commande de bricolage de vaisseau spatial bricolage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>