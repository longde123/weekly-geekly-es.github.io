<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📫 👨‍👩‍👦‍👦 🤞🏾 Wir modifizieren den Bluetooth-Stack, um den Klang von Kopfhörern ohne Codecs AAC, aptX und LDAC zu verbessern 🏔️ 👩‍⚕️ 💅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bevor Sie diesen Artikel lesen, wird empfohlen, den vorherigen Artikel zu lesen: Audio über Bluetooth: so viel wie möglich über Profile, Codecs und Ge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir modifizieren den Bluetooth-Stack, um den Klang von Kopfhörern ohne Codecs AAC, aptX und LDAC zu verbessern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455316/"> <i>Bevor Sie diesen Artikel lesen, wird empfohlen, den vorherigen Artikel zu lesen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Audio über Bluetooth: so viel wie möglich über Profile, Codecs und Geräte</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Englisch</a></i> <br><br>  Einige Benutzer von drahtlosen Kopfhörern stellen bei Verwendung des Standard-SBC-Bluetooth-Codecs, der alle Audiogeräte unterstützt, eine schlechte Audioqualität und einen Mangel an hohen Frequenzen fest.  Eine häufige Empfehlung zur Verbesserung des Klangs ist der Kauf von Geräten und Kopfhörern, die aptX- und LDAC-Codecs unterstützen.  Für diese Codecs sind Lizenzgebühren erforderlich, sodass Geräte mit deren Unterstützung teurer sind. <br><br>  Es stellt sich heraus, dass die geringe Qualität von SBC auf die künstlichen Einschränkungen von Bluetooth-Stacks und Kopfhörereinstellungen zurückzuführen ist. Diese Einschränkung kann bei vorhandenen Geräten durch Softwareänderungen an einem Smartphone oder Computer umgangen werden. <a name="habracut"></a><br><br><h2>  SBC Codec </h2>  Der SBC-Codec verfügt über viele verschiedene Parameter, die während der Verbindungsaufbauphase konsistent sind.  Unter ihnen: <br><br><ul><li>  Anzahl und Art der Kanäle: Joint Stereo, Stereo, Dual Channel, Mono; </li><li>  Anzahl der Frequenzbänder: 4 oder 8; </li><li>  Die Anzahl der Blöcke im Paket: 4, 8, 12, 16; </li><li>  Algorithmus zur Zuweisung von Quantisierungsbits: Loudness, SNR; </li><li>  Maximaler und minimaler Wert des bei der Quantisierung verwendeten Bitpools (Bitpool): normalerweise von 2 bis 53. </li></ul><br><br>  Das Decodiergerät muss eine beliebige Kombination dieser Parameter unterstützen.  Der Encoder implementiert möglicherweise nicht alle. <br>  Bestehende Bluetooth-Stacks stimmen in der Regel mit folgendem Profil überein: Joint Stereo, 8 Bänder, 16 Blöcke, Loudness, Bitpool 2..53.  Dieses Profil codiert 44,1-kHz-Audio mit einer Bitrate von 328 kbit / s. <br>  Der Bitpool-Parameter wirkt sich direkt auf die Bitrate innerhalb eines einzelnen Profils aus: Je höher diese ist, desto höher ist die Bitrate und damit die Qualität. <br>  Der Bitpool-Parameter ist jedoch nicht an ein bestimmtes Profil gebunden.  Andere Parameter wirken sich ebenfalls auf die Bitrate aus: Art der Kanäle, Anzahl der Frequenzbänder, Anzahl der Blöcke.  Sie können die Bitrate indirekt erhöhen, indem Sie nicht standardmäßige Profile aushandeln, ohne den Bitpool zu ändern. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>b</mi><mi>i</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>8</mn><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>f</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><msub><mtext>&amp;#xA0;</mtext><mi>l</mi></msub><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><msub><mtext>&amp;#xA0;</mtext><mi>r</mi></msub><mi>a</mi><mi>t</mi><mi>e</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>u</mi><mi>b</mi><mi>b</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>s</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>s</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="76.802ex" height="2.419ex" viewBox="0 -780.1 33067.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-62" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-69" x="429" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-72" x="1136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="1588" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="2117" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="2479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMAIN-3D" x="3223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-66" x="4529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-72" x="5080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="5531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-63" x="6061" y="0"></use><g transform="translate(6494,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMAIN-38" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-69" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6D" x="1457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="2336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="2802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-66" x="3272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-72" x="3822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="4274" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6D" x="4803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="5682" y="0"></use><g transform="translate(6148,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6C" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="6709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6E" x="7176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-67" x="7776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="8257" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-68" x="8618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="9445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-69" x="9806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6D" x="10152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="11030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="11497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="11966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="12436" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6D" x="12965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-70" x="13844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6C" x="14347" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="14646" y="0"></use><g transform="translate(15112,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-72" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="15781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="16311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="16672" y="0"></use></g><g transform="translate(23633,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-75" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-62" x="1042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-62" x="1471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-61" x="1901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6E" x="2430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-64" x="3031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="3554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-74" x="4274" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-69" x="4635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6D" x="4981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-65" x="5859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="6326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-62" x="6795" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6C" x="7225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6F" x="7523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-63" x="8009" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-6B" x="8442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/455316/&amp;usg=ALkJrhiwu7snVkGto6Yt8ZGFDiHHvOf1gw#MJMATHI-73" x="8964" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>b</mi><mi>i</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>8</mn><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>f</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><msub><mtext>&nbsp;</mtext><mi>l</mi></msub><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><msub><mtext>&nbsp;</mtext><mi>r</mi></msub><mi>a</mi><mi>t</mi><mi>e</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>u</mi><mi>b</mi><mi>b</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>s</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>s</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> bitrate = \ frac {8 \ times frame \ _length \ times sample \ _rate} {subbands \ times blocks} </script></p><br>  <i><font color="#666666">SBC Bitrate Formula</font></i> <br><br><br>  Beispielsweise codiert der Zweikanalmodus Kanäle separat, wobei der gesamte Bitpool für jeden Kanal verwendet wird.  Indem das Gerät gezwungen wird, Dual Channel anstelle von Joint Stereo zu verwenden, erhalten wir eine fast doppelte Bitrate bei demselben maximalen Bitpoolwert: 617 kbps. <br>  Meiner Meinung nach ist die Verwendung eines Bitpool-Werts ohne Profil in der Genehmigungsphase ein Fehler im A2DP-Standard, der zu einer künstlichen Einschränkung der SBC-Qualität führte.  Es wäre klüger, die Bitrate zu vereinbaren, nicht den Bitpool. <br><br>  Diese festen Werte, Bitpool und Bitrate, stammen aus einer Tabelle mit empfohlenen Werten für Audio in hoher Qualität.  Die Empfehlung ist jedoch kein Grund, sich auf diese Werte zu beschränken. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc5/5bf/c7d/cc55bfc7d4e0a7e9ca4aee331f6c9992.png" alt="Bluetooth SBC-Profiltabelle"><br><br>  Die A2DP v1.2-Spezifikation, die von 2007 bis 2015 aktiv war, erfordert, dass alle Decodierungsgeräte ordnungsgemäß mit Bitraten von bis zu 512 kbps arbeiten: <br><br><blockquote>  Der Decoder des SNK muss alle möglichen Bitpoolwerte unterstützen, die nicht zu einer Überschreitung der maximalen Bitrate führen.  Dieses Profil begrenzt die verfügbare maximale Bitrate auf 320 kb / s für Mono und 512 kb / s für Zweikanalmodi. </blockquote><br><br>  In der neuen Version der Spezifikation gibt es keine Bitratenbegrenzung.  Es wird davon ausgegangen, dass moderne Kopfhörer, die nach 2015 veröffentlicht wurden und EDR unterstützen, Bitraten von bis zu 730 kbps unterstützen können. <br><br>  Aus irgendeinem Grund haben die von mir getesteten Linux-Bluetooth-Stacks (PulseAudio), Android, Blackberry und macOS künstliche Einschränkungen hinsichtlich des Maximalwerts des Bitpool-Parameters, was sich direkt auf die maximale Bitrate auswirkt.  Dies ist jedoch nicht das größte Problem. Fast alle Kopfhörer begrenzen den maximalen Bitpoolwert auf 53. <br>  Wie ich bereits sichergestellt habe, funktionieren die meisten Geräte auf einem modifizierten Bluetooth-Stack mit einer Bitrate von 551 kbit / s ohne Unterbrechungen und Knistern einwandfrei.  Eine solche Bitrate wird jedoch unter normalen Bedingungen auf normalen Bluetooth-Stacks niemals ausgehandelt. <br><br><h2>  Ändern des Bluetooth-Stacks </h2>  Jeder Bluetooth-Stack, der mit dem A2DP-Standard kompatibel ist, unterstützt den Dual-Channel-Modus, kann jedoch nicht über die Schnittstelle aktiviert werden. <br><br>  Fügen wir der Schnittstelle einen Schalter hinzu!  Ich habe Patches für Android 8.1 und Android 9 erstellt, die dem Stack die volle Unterstützung für Dual Channel hinzufügen, dem Modusumschaltmenü in den Entwicklertools den Modus hinzufügen und SBC mit Dual Channel-Unterstützung verarbeiten, als wäre es ein zusätzlicher Codec wie aptX, AAC oder LDAC ( Android nennt es HD Audio), indem es den Einstellungen des Bluetooth-Geräts ein Häkchen hinzufügt.  So sieht es aus: <br><br><img src="https://habrastorage.org/webt/xd/k_/nn/xdk_nnwukcz446jxexaes4pdscw.png" alt="Bild"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Patch für Android 9</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Patch für Android 8.1</a> <br><br>  Wenn das Kontrollkästchen aktiviert ist, wird Bluetooth-Audio mit einer Bitrate von <b>551 kbit</b> / s übertragen, wenn die Kopfhörer eine Verbindung mit 3 Mbit / s unterstützen, oder <b>452 kbit</b> / s, wenn die Kopfhörer nur 2 Mbit / s unterstützen. <br><br>  Dieser Patch ist in der folgenden alternativen Firmware enthalten: <br><ul><li>  <b>LineageOS</b> </li><li>  <b>Resurrection Remix</b> </li><li>  <b>crDroid</b> </li></ul><br><br><h2>  Woher kamen 551 und 452 kbit / s? </h2>  Die Bluetooth-Split-Air-Technologie wurde entwickelt, um große Pakete mit fester Größe effizient zu übertragen.  Daten werden über Slots übertragen, die größte Anzahl von Slots, die in einer Übertragung gesendet werden, ist 5. Es gibt auch Übertragungsmodi, die 1 oder 3 Slots verwenden, jedoch nicht 2 oder 4. In 5 Slots können Sie bis zu 679 Bytes mit einer Verbindungsgeschwindigkeit von 2 Mbit / s und übertragen bis zu 1021 Bytes bei einer Geschwindigkeit von 3 Mbit / s und in 3 - 367 bzw. 552 Bytes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b86/6c9/653/b866c9653eeb255db44e7fd94a409a90.png" alt="Bild"><br><br>  Wenn wir weniger Daten als 679 oder 1021 Bytes, aber mehr als 367 oder 552 Bytes übertragen möchten, dauert die Übertragung immer noch 5 Slots, und die Daten werden gleichzeitig übertragen, was die Übertragungseffizienz verringert. <br><br><img src="https://habrastorage.org/webt/u_/9e/at/u_9eati7dqlaegfvhdkpmwxsnxq.png" alt="Bild"><br><br>  SBC im Dual-Channel-Modus für 44100-Hz-Audio mit Bitpool 38-Parametern, 16 Blöcken pro Frame und 8 Frequenzbereichen codiert Audio in Frames mit einer Größe von 164 Byte und einer Bitrate von 452 kbps. <br>  Audio muss in den L2CAP- und AVDTP-Übertragungsprotokollen gekapselt sein, die 16 Byte von der Audio-Nutzlast benötigen. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{align&amp;#xA0;*}&amp;#xA0;Framelength&amp;#xA0;&amp;amp;&amp;#xA0;=&amp;#xA0;4&amp;#xA0;+&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{Teilb&amp;#xE4;nder&amp;#xA0;\&amp;#xA0;mal&amp;#xA0;Kan&amp;#xE4;le}&amp;#xA0;{2}&amp;#xA0;+&amp;#xA0;\\&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{F&amp;#xE4;lle}&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{Bl&amp;#xF6;cke&amp;#xA0;\&amp;#xA0;mal&amp;#xA0;Kan&amp;#xE4;le&amp;#xA0;\&amp;#xA0;mal&amp;#xA0;Bitpool}&amp;#xA0;{8}&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;text&amp;#xA0;{&amp;#xA0;wenn&amp;#xA0;Mono-&amp;#xA0;oder&amp;#xA0;Zweikanalmodus}&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{Teilb&amp;#xE4;nder&amp;#xA0;+&amp;#xA0;Bl&amp;#xF6;cke&amp;#xA0;\&amp;#xA0;mal&amp;#xA0;Bitpool}&amp;#xA0;{8}&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Text&amp;#xA0;{wenn&amp;#xA0;gemeinsamer&amp;#xA0;Stereomodus}&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{Bl&amp;#xF6;cke&amp;#xA0;\&amp;#xA0;mal&amp;#xA0;Bitpool}&amp;#xA0;{8}&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Text&amp;#xA0;{wenn&amp;#xA0;Stereo&amp;#xA0;Modus}&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;Ende&amp;#xA0;{F&amp;#xE4;lle}&amp;#xA0;\&amp;#xA0;Ende&amp;#xA0;{Ausrichtung&amp;#xA0;*}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;begin&nbsp;{align&nbsp;*}&nbsp;Framelength&nbsp;&amp;&nbsp;=&nbsp;4&nbsp;+&nbsp;\&nbsp;frac&nbsp;{Teilbänder&nbsp;\&nbsp;mal&nbsp;Kanäle}&nbsp;{2}&nbsp;+&nbsp;\\&nbsp;&amp;&nbsp;\&nbsp;begin&nbsp;{Fälle}&nbsp;\&nbsp;frac&nbsp;{Blöcke&nbsp;\&nbsp;mal&nbsp;Kanäle&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;text&nbsp;{&nbsp;wenn&nbsp;Mono-&nbsp;oder&nbsp;Zweikanalmodus}&nbsp;\\&nbsp;\&nbsp;frac&nbsp;{Teilbänder&nbsp;+&nbsp;Blöcke&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;Text&nbsp;{wenn&nbsp;gemeinsamer&nbsp;Stereomodus}&nbsp;\\&nbsp;\&nbsp;frac&nbsp;{Blöcke&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;Text&nbsp;{wenn&nbsp;Stereo&nbsp;Modus}&nbsp;\\&nbsp;\&nbsp;Ende&nbsp;{Fälle}&nbsp;\&nbsp;Ende&nbsp;{Ausrichtung&nbsp;*}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{align&nbsp;*}&nbsp;Framelength&nbsp;&amp;&nbsp;=&nbsp;4&nbsp;+&nbsp;\&nbsp;frac&nbsp;{Teilbänder&nbsp;\&nbsp;mal&nbsp;Kanäle}&nbsp;{2}&nbsp;+&nbsp;\\&nbsp;&amp;&nbsp;\&nbsp;begin&nbsp;{Fälle}&nbsp;\&nbsp;frac&nbsp;{Blöcke&nbsp;\&nbsp;mal&nbsp;Kanäle&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;text&nbsp;{&nbsp;wenn&nbsp;Mono-&nbsp;oder&nbsp;Zweikanalmodus}&nbsp;\\&nbsp;\&nbsp;frac&nbsp;{Teilbänder&nbsp;+&nbsp;Blöcke&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;Text&nbsp;{wenn&nbsp;gemeinsamer&nbsp;Stereomodus}&nbsp;\\&nbsp;\&nbsp;frac&nbsp;{Blöcke&nbsp;\&nbsp;mal&nbsp;Bitpool}&nbsp;{8}&nbsp;&amp;&nbsp;\&nbsp;Text&nbsp;{wenn&nbsp;Stereo&nbsp;Modus}&nbsp;\\&nbsp;\&nbsp;Ende&nbsp;{Fälle}&nbsp;\&nbsp;Ende&nbsp;{Ausrichtung&nbsp;*}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> \ begin {align *} Framelength & = 4 + \ frac {Teilbänder \ mal Kanäle} {2} + \\ & \ begin {Fälle} \ frac {Blöcke \ mal Kanäle \ mal Bitpool} {8} & \ text { wenn Mono- oder Zweikanalmodus} \\ \ frac {Teilbänder + Blöcke \ mal Bitpool} {8} & \ Text {wenn gemeinsamer Stereomodus} \\ \ frac {Blöcke \ mal Bitpool} {8} & \ Text {wenn Stereo Modus} \\ \ Ende {Fälle} \ Ende {Ausrichtung *} </script></p><br><br><br><br>  Somit ist es in einer Bluetooth-Übertragung mit 5 Steckplätzen möglich, 4 Audio-Frames aufzunehmen: <br><pre><code class="plaintext hljs">679 (EDR 2 mbit/s DH5) - 4 (L2CAP) - 12 (AVDTP/RTP) - 1 ( SBC) - (164*4) = 6</code> </pre> <br>  Wir fügen 11,7 ms Audiodaten in das Sendepaket ein, das in 3,75 ms übertragen wird, und wir haben 6 nicht verwendete Bytes im Paket. <br>  Wenn Sie den Bitpool leicht erhöhen, können 4 Audio-Frames nicht mehr in einem Paket verpackt werden.  Sie müssen 3 Frames gleichzeitig senden, was die Übertragungseffizienz verringert, die pro Paket übertragene Audiomenge verringert und bei schlechten Funkbedingungen schnell zu stotterndem Audio führt. <br><br>  Auf die gleiche Weise wurde eine Bitrate von 551 kbit / s für eine EDR von 3 Mbit / s ausgewählt: Mit Bitpool 47, 16 Blöcken in einem Frame, 8 Frequenzbereichen beträgt die Frame-Größe 200 Bytes bei einer Bitrate von 551 kbit / s.  5 Bilder oder 14,6 ms Musik passen in ein Paket. <br><br>  Der Algorithmus zum Berechnen aller SBC-Parameter ist ziemlich kompliziert. Wenn Sie manuell zählen, können Sie leicht verwirrt werden. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Deshalb habe</a> ich einen interaktiven Taschenrechner erstellt, der Interessenten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hilft</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">btcodecs.valdikss.org.ru/sbc-bitrate-calculator</a> <br><br><h2>  Warum ist das alles notwendig? </h2>  Entgegen der weit verbreiteten Meinung über die Klangqualität des aptX-Codecs kann es bei einigen Dateien zu schlechteren Ergebnissen kommen als bei SBC mit einer Standardbitrate von 328 kbps. <br><br>  SBC ordnet Quantisierungsbits für Frequenzbänder dynamisch zu und arbeitet von unten nach oben.  Wenn die gesamte Bitrate für die niedrigen und mittleren Frequenzen verwendet wurde, werden die höheren Frequenzen "abgeschnitten" (stattdessen herrscht Stille). <br>  aptX quantisiert Frequenzbänder mit der gleichen Anzahl von Bits kontinuierlich, weshalb es eine konstante Bitrate hat: 352 kbit / s für 44,1 kHz, 384 kbit / s für 48 kHz, und es kann keine Bits auf diese Frequenzen übertragen die meisten brauchen sie.  Im Gegensatz zu SBC „schneidet“ aptX die Frequenzen nicht, sondern fügt ihnen Quantisierungsrauschen hinzu, verringert den Dynamikbereich des Audios und führt manchmal zu charakteristischen Knistern.  SBC hingegen „frisst die Details auf“ - verwirft die ruhigsten Bereiche. <br>  Im Vergleich zum SBC 328k führt aptX im Durchschnitt weniger Verzerrungen bei Musik mit einem breiten Frequenzbereich durch, aber manchmal gewinnt es bei Musik mit einem engen Frequenzbereich und einem breiten Dynamikbereich. <br><br>  Betrachten Sie einen Sonderfall.  Spektrogramm zur Aufnahme des Klaviers: <br> <a href=""><img src="https://habrastorage.org/webt/i9/uh/z1/i9uhz1ewchvoprxywldrtfknlom.jpeg" alt="Bild"></a> <br><br>  Die Hauptenergie liegt in den Frequenzen von 0 bis 4 kHz und dauert bis zu 10 kHz. <br>  Das Spektrogramm der in aptX komprimierten Datei lautet wie folgt: <br> <a href=""><img src="https://habrastorage.org/webt/sx/3i/lw/sx3ilwm6riwrjelw-ofmljdd54m.jpeg" alt="Bild"></a> <br><br>  Und so sieht es aus SBC 328k. <br> <a href=""><img src="https://habrastorage.org/webt/ah/ob/br/ahobbramaxjmsr0htxagkiflomk.jpeg" alt="Bild"></a> <br><br>  Es ist ersichtlich, dass der SBC 328k den Bereich über 16 kHz periodisch vollständig ausschaltete und die gesamte verfügbare Bitrate für Bereiche unter diesem Wert verbrauchte.  AptX führte jedoch mehr Verzerrungen in das vom menschlichen Ohr gehörte Frequenzspektrum ein, was auf dem vom aptX-Spektrogramm subtrahierten Originalspektrogramm zu sehen ist (je heller, desto stärker verzerrt): <br> <a href=""><img src="https://habrastorage.org/webt/_e/vj/gv/_evjgvlrkbymm5ptv5ymkn2orya.jpeg" alt="Bild"></a> <br><br>  Während der SBC 328k das Signal im Bereich von 0 bis 10 kHz weniger durcheinander brachte und den Rest abbrach - <br> <a href=""><img src="https://habrastorage.org/webt/-a/m6/23/-am623wsmq09jfcr80kmkjubp0u.jpeg" alt="Bild"></a> <br><br>  Die 485k SBC-Bitrate reichte aus, um den gesamten Frequenzbereich zu speichern, ohne die Bänder zu trennen. <br> <a href=""><img src="https://habrastorage.org/webt/xx/a0/pa/xxa0patcvltugsfjwxzmh_na_rm.jpeg" alt="Bild"></a> <br><br>  SBC 485k liegt bei dieser Komposition im Bereich von 0-15 kHz deutlich vor aptX und weist einen kleineren, aber immer noch spürbaren Unterschied auf - 15-22 kHz (je dunkler, desto weniger Verzerrung): <br> <a href=""><img src="https://habrastorage.org/webt/yv/mi/7v/yvmi7vfj5-ot3ztrfv-gvx43yxy.jpeg" alt="Bild"></a> <br><br>  <a href="">Archiv von Original-Audio, SBC und aptX</a> . <br><br>  Wenn Sie zum High-Bit-SBC wechseln, erhalten Sie auf jedem Kopfhörer einen Sound, der aptX oft überlegen ist.  Bei Kopfhörern, die eine 3-Mbit / s-EDR-Verbindung unterstützen, erzeugt die Bitrate von 551 Kbit / s einen mit aptX HD vergleichbaren Klang. <br><br><h2>  Kann ich mehr haben? </h2>  Der Patch für Android bietet auch die Option, die Bitrate für EDR-Geräte um 2 Mbit / s weiter zu erhöhen.  Sie können die Bitrate von 452 kbit / s auf 595 kbit / s erhöhen, um die Übertragungsstabilität unter komplexen Funkbedingungen zu verringern. <br>  Setzen Sie einfach die Variable persist.bluetooth.sbc_hd_higher_bitrate auf 1: <br><pre> <code class="plaintext hljs"># setprop persist.bluetooth.sbc_hd_higher_bitrate 1</code> </pre> <br>  Der Patch mit extremer Bitrate wurde bisher nur in LineageOS 15.1 akzeptiert, nicht jedoch in 16.0. <br><br><h2>  Gerätekompatibilität </h2>  SBC Dual Channel wird von fast allen Kopfhörern, Lautsprechern und Autokopfeinheiten unterstützt.  Dies ist nicht überraschend - der Standard schreibt seine Unterstützung für alle Dekodierungsgeräte vor.  Es gibt eine kleine Anzahl von Geräten, auf denen dieser Modus Probleme verursacht, dies sind jedoch einzelne Instanzen. <br>  Weitere Details zu kompatiblen Geräten finden Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">w3bsit3-dns.com</a> oder bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">xda-Entwicklern</a> . <br><br><h2>  Vergleich der Klangunterschiede </h2>  Ich habe einen Webdienst erstellt, der Audio in SBC (sowie aptX und aptX HD) in Echtzeit direkt im Browser codiert.  Mit ihm können Sie den Sound verschiedener SBC-Profile und anderer Codecs vergleichen, ohne Audio über Bluetooth zu übertragen, und zwar über kabelgebundene Kopfhörer, Lautsprecher und Ihre Lieblingsmusik. Außerdem können Sie die Codierungseinstellungen direkt während der Audiowiedergabe ändern. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">btcodecs.valdikss.org.ru/sbc-encoder</a> <br><br><h2>  Wenden Sie sich an Android-Entwickler </h2>  Ich schrieb an viele Entwickler des Google Bluetooth-Stacks mit der Bitte, die Aufnahme von Patches in den Haupt-Android-Zweig - AOSP - in Betracht zu ziehen, erhielt jedoch keine einzige Antwort.  Meine Patches im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gerrit-Patch-System für Android wurden</a> ebenfalls von allen Beteiligten kommentarlos hinterlassen. <br>  Ich würde mich freuen, wenn mir im Zusammenhang mit den Entwicklern von Google und der Implementierung von SBC HD in Android geholfen würde.  Der Gerrit-Patch ist bereits veraltet (dies ist eine der frühen Überarbeitungen) und ich werde ihn aktualisieren, wenn die Entwickler an meinen Änderungen interessiert sind (es ist nicht einfach für mich, ihn zu aktualisieren, ich habe keine Android Q-kompatiblen Geräte). <br><br><h2>  Fazit </h2>  Benutzer von Smartphones mit LineageOS, Resurrection Remix und crDroid-Firmware können sich jetzt mit verbesserter Klangqualität zufrieden geben. Aktivieren Sie einfach die Option in den Einstellungen des Bluetooth-Geräts.  Linux-Benutzer können auch eine erhöhte SBC-Bitrate <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erzielen</a> , indem sie einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Patch von Pali Rohár installieren</a> , der unter anderem die Codecs aptX, aptX HD und FastStream unterstützt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de455316/">https://habr.com/ru/post/de455316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de455302/index.html">Golang API Framework</a></li>
<li><a href="../de455306/index.html">Antworten auf Ihre Fragen, warum Sie einen Verlag benötigen, um ein Buch zu veröffentlichen</a></li>
<li><a href="../de455308/index.html">Vielversprechender Ort</a></li>
<li><a href="../de455310/index.html">Angriffe auf Bypass-Kanäle: Jetzt werden nicht nur PCs, sondern auch Smartphones angegriffen (analytische Überprüfung)</a></li>
<li><a href="../de455312/index.html">Ein-Bit-Volladdierer auf ungewöhnlichen Chips</a></li>
<li><a href="../de455319/index.html">Workflow 3D-Künstler. Wie man nicht in einer Menge Informationen ertrinkt. Teil 1</a></li>
<li><a href="../de455325/index.html">Portieren von Desktop-Apps nach .NET Core</a></li>
<li><a href="../de455329/index.html">Ankündigung der Azure IoT Edge Tools-Erweiterung (Vorschau)</a></li>
<li><a href="../de455331/index.html">Wie Computer erstaunlich gut gelernt haben, Bilder zu erkennen</a></li>
<li><a href="../de455333/index.html">Wer hat Python in das Windows-Update vom 10. Mai 2019 aufgenommen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>