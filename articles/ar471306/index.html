<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๐พ โ๐ผ ๐ฉ๐พโ๐คโ๐จ๐ป ุชุทููุฑ Continent-AP VPN Plugin ููุธุงู Sailfish OS ๐ ๐ ๐ฅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ุฃุนูู ููุจุฑูุฌ ูู ูุณู ุชุทููุฑ ูุงุฎุชุจุงุฑ ุฃุฏูุงุช ุงูุฃูุงู ูููุตุงุช ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุงูุชุงุจุนุฉ ูุดุฑูุฉ Security Code. ููู ูุฑูู ุชุทููุฑ ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุจููู ููุชุจุฉ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทููุฑ Continent-AP VPN Plugin ููุธุงู Sailfish OS</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471306/" style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h3><br>  ุฃุนูู ููุจุฑูุฌ ูู ูุณู ุชุทููุฑ ูุงุฎุชุจุงุฑ ุฃุฏูุงุช ุงูุฃูุงู ูููุตุงุช ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุงูุชุงุจุนุฉ ูุดุฑูุฉ Security Code.  ููู ูุฑูู ุชุทููุฑ ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุจููู ููุชุจุฉ Continent-AP ุนุจุฑ ููุตุฉ ูุญุทุฉ ุงููุดุชุฑููู ุ ูุงูุชู ูุงูุช ุชุนูู ุจุงููุนู ุจูุฌุงุญ ุนูู IOS ู Android.  ูุงูุช ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู Sailfish OS ุบูุฑ ููุซู ุฌูุฏูุง ูุซู Android ุฃู IOS ุ ูููู ุจูุถู ุงููุงุนุจูู ูู Open Mobile Platforms ุงูุฐูู ุดุงุฑููุง ุงููุซุงุฆู. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  VPN api architecture ูู Sailfish OS </h3><br>  ุจุงููุณุจุฉ ูุฌููุน ุงุชุตุงูุงุช ุงูุดุจูุฉ ูู Sailfish OS ุ ุชููู ุฎุฏูุฉ ConnMan ูุณุคููุฉ ุ ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณุญ ุดุจูุงุช Wi-Fi ูุงูุดุจูุงุช ุงูุฎูููุฉ ูุงูุงุชุตุงู ุจูุง ุ </li><li style=";text-align:right;direction:rtl">  ูุดุงุฑูุฉ ุงูุงุชุตุงู (ููุทุฉ ุงุชุตุงู Wi-Fi) ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุฑุฌูุฉ ุ ูุตูุงุช ุงูุฅุฎุฑุงุฌ ุฅูู ูุถุน ุงูุทูุฑุงู. </li><li style=";text-align:right;direction:rtl">  ุฅุฏุงุฑุฉ ุงุชุตุงู VPN. </li></ul><br>  ุณุฃุชุญุฏุซ ุนู ุงูููุทุฉ ุงูุฃุฎูุฑุฉ ุจูุฒูุฏ ูู ุงูุชูุงุตูู.  ูุญุชูู ConnMan ุนูู ุนุฏุฉ ุฃููุงุน ูู ุฅุถุงูุงุช VPN ุงููุญุฏุฏุฉ ูุณุจููุง.  ูุชู ุฏูุฌ ุฃุฏูุงุช QML ูุฅูุดุงุก ุงูุงุชุตุงูุงุช ูุชูููููุง ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ. <br><br><img src="https://habrastorage.org/webt/v7/2d/es/v72desnzu4zeyymbx3wea1sddie.jpeg" alt="ุตูุฑุฉ"><br>  <i>ุงูุชูู.</i>  <i>1 ูุงุฆูุฉ ูุธุงู OS Sailfish OS ูุชูููู ูุฅุฏุงุฑุฉ ุงุชุตุงูุงุช VPN</i> <br><br>  UI ูุนููู VPN ุงูุฎุงุต ุจูุง ุนุจุงุฑุฉ ุนู ุญุฒูุฉ RPM ูุฃุซูุงุก ุงูุชุซุจูุช ูุง ูุชู ุฏูุฌูุง ูู ุฅุทุงุฑ ูุธุงู VPN ูู ูุณู "ุงูุฅุนุฏุงุฏุงุช" ุ ููู ูุจุฏู ุฃูู ุชุทุจูู ูููุตู.  ูู ุงููุญุชูู ุฃู ูููู ููุงู ููุงู ูููุตู ุญูู ุชุทููุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูุจุงูุชุงูู ูุฅู ุงููุตุฉ ุงูุชุงููุฉ ุณุชููู ุญูู ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ConnMan ูู C / C ++. <br><br><img src="https://habrastorage.org/webt/-r/ln/rr/-rlnrrdy51kputzfnk6nj-r-bs0.jpeg" alt="ุตูุฑุฉ"><br>  <i>ุงูุชูู.</i>  <i>2 ุงููุงุฑุฉ- AP ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุนู ุทุฑูู ุงูุจุญุฑ</i> <br><br>  ูุชููู VPN-api Sailfish OS ูู ุงูููููุงุช ุงูุชุงููุฉ ุ ูุณูู ูุนุฑุถ ุนูู ุณุจูู ุงููุซุงู ุนููู VPN ุงูุฎุงุต ุจูุง: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ConnMan ูู ุงูุนูููุฉ ุงูุชู ุชุจุฏุฃ ุนูุฏ ุจุฏุก ุชุดุบูู Sailfish OS. </li><li style=";text-align:right;direction:rtl">  connman-vpnd ูู ุนูููุฉ ุฎููุฉ ุฃุทููุชูุง ุดุฑูุฉ ConnMan ูุชุณุชุฎุฏู ูุฅุฏุงุฑุฉ ุงุชุตุงูุงุช VPN ูููุฏูู ุฎุฏูุงุช ูุฎุชูููู ุ ูุชููุฆุฉ ูุงุฌูุฉ tun ูุชููุฆุฉ ุงูุชููุฆุฉ ููุง ุ ูุชุนููู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ (ุนูุงููู IP ุ ูุงูุทุฑู ุ ูุฎูุงุฏู DNS) ุงููุณุชููุฉ ุนุจุฑ DBus.  ูู ุญุงูุชูุง ุ ูุฒูุฏ ูุณูู ุงููุงุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅู ุงููุงุฑุฉ-proto-plugin.so VPN ูู ููุชุจุฉ ุชุญุชูู ุนูู ุฅุนูุงู ูุงูุฑู ููุชุญููู ูู ููุช ุงูุชุดุบูู ูุงููุธุงุฆู ุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุงุณุชุฏุนุงุก ุฃุณุงููุจ ูุงุฌูุฉ net.connman.vpn.Connection. </li><li style=";text-align:right;direction:rtl">  ุชุทุจูู ุงูุฎูููุฉ (ุงูููู ุงูุซูุงุฆู / usr / sbin / ุงููุงุฑุฉ) ูู ุนููู ูุญุฏุฉ ุงูุชุญูู ููุงุชุตุงู ุจุงููุฑุต ุงููุถุบูุท (Continent Access Server) ุ ุญูุซ ูุชููู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ููู ุ ูููุฑุฑูุง ุฅูู connman-vpnd. </li><li style=";text-align:right;direction:rtl">  ConnMan Task ูู ุนูููุฉ ูุจุฏุก ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ููุฏ ุงูุชุดุบูู ูุฅููุงููุง ููุฑุงูุจุชูุง. </li><li style=";text-align:right;direction:rtl">  DBus-api - ููุซู connman-vpnd ุ ุฃู net.connman.vpn ูุน ุงููุงุฌูุงุช net.connman.vpn.Manager ุ net.connman.vpn.Connection. </li></ol><br><img src="https://habrastorage.org/webt/lk/lt/gg/lkltggz6cpyn9dor5rpcacd-_kq.jpeg" alt="ุตูุฑุฉ"><br>  <i>ุงูุชูู.</i>  <i>3 ุชูุงุนู ุงูููููุงุช ูููุง ุจูููุง ูู "Continent-AP" Sailfish</i> <br><br><h3 style=";text-align:right;direction:rtl">  VPN plugin </h3><br>  ุชูุซู ุฌููุน ุงูููููุงุช ุงูุฅุถุงููุฉ ูุฌูุงุช ุฎุงุฑุฌูุฉ ุบูุฑ ุงููุฏุฑุฌุฉ ูู ุชูุฒูุน ConnMan ุงูููุชุจุฉ ููุฌุจ ูุถุนูุง ูู / usr / lib / connman / plugins-vpn / ุนูุฏ ุงูุชุซุจูุช ูู ุฎูุงู ูุฏูุฑ ุงูุญุฒู. <br><br>  ูููู ุฃู ูููู ููููููู ุงูุฅุถุงูู ููู ุชูููู ุ ูุดูุฑ ููู ุฅูู ุฃู ูุณุชุฎุฏู ูุชุดุบูู ุงูููู ุงูุซูุงุฆู ููู ุ ููุตู ุญูููู.  ูุฌุจ ุฃู ูููู ุงูููู ููุฌูุฏูุง ูู ุงููุธุงู ุนูู ุทูู ุงููุณุงุฑ /etc/connman/vpn-plugin/continent.conf ุ ููุฌุจ ุฃู ูุชุทุงุจู ุงุณูู ูุน ุงุณู ูุฒูุฏ ุงูุฎุฏูุฉ ูุฏููุง ุ ูู ุงูุญุงูุงุช ุงูุฎุงุตุฉ ุจูุง. <br><br>  ูุญุชููุงุช ุงูููู ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">[VPN Binary] User = nemo Group = vpn SupplementaryGroups = inet,net_admin</code> </pre> <br>  ูุชู ุชุณุฌูู ุงููููู ุงูุฅุถุงูู ุงููุงุฑุฉ-proto-plugin.so ูู ConnMan ุจุงุณุชุฎุฏุงู ุงููุงูุฑู CONNMAN_PLUGIN_DEFINE (ุงูุงุณู ูุงููุตู ูุงูุฅุตุฏุงุฑ ู init ูุงูุฎุฑูุฌ) ุ ูู ูุซุงููุง ุ ุณุชุจุฏู ููุงููุฉ ุงููุงูุฑู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">CONNMAN_PLUGIN_DEFINE(continent, <span class="hljs-string"><span class="hljs-string">"continent VPN plugin"</span></span>, CONNMAN_VERSION, CONNMAN_PLUGIN_PRIORITY_DEFAULT, continent_init, continent_exit);</code> </pre><br>  ูุฌุจ ุฃู ุชููู ูุณูุทุฉ ุงูุงุณู (ุงููุงุฑุฉ) ุจุฏูู ุนูุงูุงุช ุงูุชุจุงุณ.  ูุชู ุงุณุชุฏุนุงุก ุงูุฏุงูุชูู ocean_init ู contin_exit ุนูุฏูุง ูุชู ุชุญููู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุชูุฑูุบู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก systemctl restart connman ุฃุซูุงุก ุชุซุจูุช RPM.  ุชุญุชูู ุงูุฏุงูุฉ ุงููุงุฑุฉ_ุงูุงุณุชุฏุนุงุก ุนูู ุฏุงูุงุช vpn_register ู connman_dbus_get_connection. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vpn_register(name, driver, binary_path)</code> </pre> <br>  ุงูุงุณู - ุงุณู ุงููุฒูุฏ ุงูุฐู ูุชู ุชุณุฌููู ุ ูู ุญุงูุชูุง ูู "ุงููุงุฑุฉ" ุ <br>  driver - ุจููุฉ vpn_driver ุงูุชู ุชุญุชูู ุนูู ูุคุดุฑุงุช ุฅูู ูุธุงุฆู ุฑุฏ ุงูุงุชุตุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุงููุตูู ุฅูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูู ุฎูุงู DBus ุ <br>  binary_path - ุงููุณุงุฑ ุฅูู ุงูููู ุงูุซูุงุฆู ุ ูู ุญุงูุชูุง ูู "/ usr / sbin / ุงููุงุฑุฉ". <br><br>  ุชุชูุญ ูู ูุธููุฉ connman_dbus_get_connection ุงูุญุตูู ุนูู ุงุชุตุงู DBus ุงูุซุงุจุช ุ ุงุชุตุงู DBusConnection *. <br><br>  ูุทููุจ ูู ุงููุงุฑู ูุธููุฉ_ุฅูุบุงุก ุชุณุฌูู ุงูููููู ุงูุฅุถุงูู ูู ConnMan ูุฅุบูุงู ุงุชุตุงู DBus. <br><br>  ูุชู ุฅูุดุงุก ูุซูู ููููุฑ VPN ุนูุฏูุง ูุณุชุฏุนู DBus net.connman.vpn.Manager.Create ุ ูุชู ุฅูุดุงุก ููู ุฅุนุฏุงุฏุงุช ุชููุงุฆููุง ูู ูู ุงูุฏููู /var/lib/connman/provider_${Hostasket_{VPN.Domain}.  ูุชู ุญุฐู ุงููููุฑ ุนู ุทุฑูู ุงุณุชุฏุนุงุก net.connman.vpn.Manager.Remove.  ุนูุฏ ุงุณุชุฏุนุงุก ุทุฑููุฉ net.connman.vpn.Connection.Connect ุ ูุชู ุชุญููู ุงูุฅุนุฏุงุฏุงุช ูู ูููุฑ vpn_provider * ุงูุฅูุดุงุก ุงูุฐู ุชู ุฅูุดุงุคู. <br><br>  ุฃูุฏ ุฃูุถูุง ุฃู ุฃุชุญุฏุซ ุนู ุจุนุถ ุงููุธุงุฆู ูู ุจููุฉ vpn_driver ุ ุจุนุถูุง ูุทููุจ ููุชูููุฐ. <br><br>  ุงุชุตุงู - ุฑุฏ ุงูุงุชุตุงู ุ ูุณูู ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก net.connman.vpn.Connection.Connect ูุน ุงูุนููุงู ุงูููุงุจู ูููุงุฆู DBus ุนุจุฑ DBus ุ ุงูุชูููุน: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">continent_connect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( struct vpn_provider *provider, struct connman_task *task, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *if_name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vpn_provider_connect_cb_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dbus_sender, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *user_data)</span></span></span></span></code> </pre><br>  ุงููุณูุทุฉ ุงูุซุงููุฉ ููุฐุง ุฑุฏ ุงูุงุชุตุงู ูู ูููุฉ connman_task * ุ ูุณูู ุชููู ุจุชุดุบูู ุงูููู ุงูุซูุงุฆู ุ ูููู ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุงููุณุงุฆุท ูุจู ุงูุจุฏุก ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงููุถูู ููููุฐ ุงูุฎุงุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--host"</span></span>, value); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--port"</span></span>, value);</code> </pre> <br>  ูููู ุจุชุฎุฒูู ุจุนุถ ุงููุนููุงุช ูู ููู ุงูุชูููู ุงูุฎุงุต ุจูุซูู ูุงุฆู ุงููููุฑ ุ ููุฏ ุชู ูุตูู ุฃุนูุงู ุ ููุญุตู ุนููู ูู ุฎูุงู ุงุณุชุฏุนุงุก ูุธููุฉ vpn_provider_get_string ุ ุนูู ุณุจูู ุงููุซุงู: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * value = vpn_provider_get_string(provider , โHostโ)</code> </pre> <br>  ุญูุซ ุงููุฒูุฏ ูู ูุซูู ูุจููุฉ vpn_provider. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dev-name"</span></span>, if_name).</code> </pre> <br>  ููุถุญ ุงูุณุทุฑ ุฃุนูุงู ุงุณู ุงููุงุฌูุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุชู ูููุฆูุง ConnMan-vpnd ููููุฑ ูุฑุงุกุฉ ููุชุงุจุฉ ุญุฒู IP ูู ูุซูู ูุงุฌูุฉ TUN ุงููุซุงุฑุฉ ูููุซูู ุงูุญุงูู ููููุฑ VPN.  ูู ุนูููุฉ ุงูุฎูููุฉ ุ ูุจูู ููุง ูุชุญ ุงูุฌูุงุฒ ูุงูุญุตูู ุนูู ูุงุตู ููู ูููุฑุงุกุฉ / ุงููุชุงุจุฉ. <br><br>  ููุงุญุธุฉ ูุตูุฑุฉ: ุฃุซูุงุก ุชุทููุฑ ุงูููููู ุงูุฅุถุงูู ุงุชุถุญ ุฃู ูุงุฌูุฉ TUN ูุชู ุฑูุนูุง ููุงุฌูุฉ ุชูุฌูู ุงูุชุฑุงุถูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-busname"</span></span>, dbus_bus_get_unique_name(connection)); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-interface"</span></span>, CONNMAN_TASK_INTERFACE); connman_task_add_argument(task, <span class="hljs-string"><span class="hljs-string">"--dbus-path"</span></span>, connman_task_get_path(task));</code> </pre> <br>  ููุญุตูู ุนูู ุชุนููุจุงุช ุจูู ุชุทุจูู ุงูุฎูููุฉ ูุงููููู ุงูุฅุถุงูู ูู VPN ุ ูุฅููุง ููุฑุฑ ุนููุงู ูุงุนุฏุฉ ุจูุงูุงุช ConnManTask ููุณุงุฑูุง ุฅูู ุงููุซูู ุงูุญุงูู ุ ูููุฐุง ูุญุชุงุฌ ุฅูู ุงูุงุชุตุงู ุจู connman_dbus_get_connection ูู ูุธููุฉ ุงูุชููุฆุฉ. <br><br>  ูุจุฏุฃ ุนูููุฉ ุงูุฎูููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">err = connman_task_run(task, continent_died, data, &amp;data-&gt;stdin_fd, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>);</code> </pre> <br>  contin_died - ุฑุฏ ุงูุงุชุตุงู ูุณูู ุนูุฏ ุฅููุงุก ุนูููุฉ ุงูุฎูููุฉ.  ูู ุฐูู ุ ุงูุชุดููุง ุฑูุฒ ุงูุฎุทุฃ ูุฅููุงุก ุงูุนูููุฉ ุ ููุดุฑ ุงูุฐุงูุฑุฉ ุ ูุญุฐู ุงูุทุฑู ุงููุถุงูุฉ. <br><br>  ุฅุนูุงู - ุฑุฏ ุงูุงุชุตุงู ุ ูุณูู ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก net.connman.Task.notify ูู ุฎูุงู DBus ุ ุญูุซ ูุชููู ุฑุณุงุฆู DBus ูู ุชุทุจูู ุฎูููุฉ ููุฏ ุงูุชุดุบูู.  ุงูุดูุก ุงูุฑุฆูุณู ูู ููู ูุนููุงุช ุงูุดุจูุฉ: ุนููุงู ูุงุฌูุฉ TUN ุ ุฎุงุฏู DNS ูู ุงูุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ ุ ุฅูุฎ.  ูุชู ุญุฒู ูุนููุงุช ุงูุดุจูุฉ ูู DBusMessage ูู ุดูู ูุงููุณ ููุชู ููููุง ุฅูู ูููุฉ ConnMan ุ ุญูุซ ูุชู ุฅุฑุณุงู ูุนููุงุช Dbus ุนูุฏ ุจุฏุก ุชุดุบูู ุชุทุจูู ุงูุฎูููุฉ. <br><br>  ูุซุงู ุนูู ุชููุฆุฉ ูุงุฌูุฉ TUN ูู ูุธููุฉ ุงูุฅุฎุทุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connman_ipaddress</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ipaddress</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connman_ipaddress_alloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AF_INET</span></span></span><span class="hljs-class">);</span></span> connman_ipaddress_set_ipv4(ipaddress, address, netmask, remote_server_ip); connman_ipaddress_set_peer(ipaddress, peer); vpn_provider_set_ipaddress(provider, ipaddress); vpn_provider_set_nameservers(provider, โ<span class="hljs-number"><span class="hljs-number">8.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>โ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VPN_STATE_CONNECT;</code> </pre> <br>  ูููู ุฃูุถูุง ุจุชูุฑูุฑ ููู ูุณูุทุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุง ูุฑุบุจ ูู ุฅุฎุทุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุงูุญุฏุซ ุนู ุทุฑูู ุงููุชุงุจุฉ ุฅูู ุฎุตุงุฆุต ุงูุงุชุตุงู ุงูุญุงูู ุ ูุงูุชู ูููู ุฃู ุชุชุนูููุง ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู net.connman.vpn.Connection.GetProperties ุ ุนูุฏ ุชุบููุฑ ุงูุฎุตุงุฆุต ุ ูุฑุณู ConnMan ุฅุดุงุฑุฉ DBus PropertyChanged ุ ุนูู ุณุจูู ุงููุซุงู: vpn_provider_set_string (ูุฒูุฏ ุ ููุชุงุญ ุ ูููุฉ). <br><br>  ูุทุน ุงูุงุชุตุงู - ุฑุฏ ุงูุงุชุตุงู ุงูุฐู ูุณูู ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก net.connman.vpn.Connection.Disconnect ุนุจุฑ ูุงุนุฏุฉ ุจูุงูุงุช <br>  ุชุญุฏุซ ุนูููุฉ ุงูุชููู ุนู ุทุฑูู ุฅุฑุณุงู ุฅุดุงุฑุฉ SIGTERM ุ ุฅุฐุง ูู ูุญุฏุซ ุงููุทุงุน ูู ุบุถูู 3 ุซูุงูู ุ ูุชู ุฅุฑุณุงู ุฅุดุงุฑุฉ SIGKILL. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุทููุฑ ูุชุตุญูุญ ูููู VPN </h3><br>  ูุชู ุชูููุฐ ุชุฌููุน ุงููููู ุงูุฅุถุงูู Continent-AP VPN ูููููุงุชู ุนูู ุงูุฌูุงุฒ ุงูุธุงูุฑู Sailfish Build Engine OS (Virtual Box) ุ ููู ุฌุฒุก ูู Sailfish SDK.  ูุฅูุดุงุก ุงููููู ุงูุฅุถุงูู ุ ุชุญุชุงุฌ ุฅูู ุงูููุชุจุงุช: connman-devel ู dbus-1 ู glibs-2.0 ุ ูุงูุชู ูููู ุจุชุซุจูุชูุง ูู ุฎูุงู ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ssh: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ssh -p 2222 -i ~/SailfishOS/vmshare/ssh/private_keys/engine/mersdk mersdk@localhost</code> </pre> <br>  ูุณุชุฎุฏู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ sb2 (Scratchbox 2) - ูุฌููุนุฉ ุฃุฏูุงุช ููุชุฌููุน ุงููุชูุงุทุน.  ูููู ุจุชุซุจูุช ุงูุญุฒู ุงููุงุฒูุฉ ูููุตุงุช i486 ู armv7hl: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-i486 -m sdk-install -R zypper -n in cmake patchelf chrpath connman-devel systemd-compat-libs systemd-devel</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-armv7hl -m sdk-install -R zypper -n in cmake patchelf chrpath connman-devel systemd-compat-libs systemd-devel</code> </pre> <br>  ููุงู ุญุงุฌุฉ ุฅูู Systemd-compat-libs ู systemd-devel ููุฅุฎุฑุงุฌ ุฅูู ุณุฌู ุงููุธุงู ุจุงุณุชุฎุฏุงู ุฏุงูุฉ sd_journal_print.  ูููู ุจุชุซุจูุช Cmake ุ ูุธุฑูุง ูุฃู ูุดุฑูุนูุง ูุณุชุฎุฏูู ุ ููุฐุง ูุจุณุท ุงูุชุฌููุน ุฅูู ุญุฏ ูุจูุฑ ูุฃูุธูุฉ ูุฎุชููุฉ. <br><br>  ูุจุฏุฃ ูู ุชุฌููุน ูููู VPN ุงูุฅุถุงูู ูููููุงุชู ูู ุฎูุงู sb2 sdk-build: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sb2 -t SailfishOS-3.0.1.11-armv7hl -m sdk-build cmake . &amp;&amp; make sb2 -t SailfishOS-3.0.1.11-i486 -m sdk-build cmake . &amp;&amp; make</code> </pre> <br><br>  ุจุนุฏ ุฐูู ุ ูุถุน ุงููููุงุช ูุงูููุชุจุงุช ุงูุซูุงุฆูุฉ ุงูุชู ุชู ุฌูุนูุง ูู ูุดุฑูุน ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฎุงุต ุจูุง ุ ูุงูุฐู ูุญุชูู ุนูู ููู SPEC ูุฅูุดุงุก ุญุฒูุฉ RPM ุงูุฎุงุตุฉ ุจุชูุฒูุน Continent-AP Sailfish ุ ูุน ุถุจุท ุงููุณู ูุชุฑููุจ ูููุงุชูุง ูู ูุฌูุฏุงุช ูุธุงู ุงูุฌูุงุฒ ูู ููู SPEC ุ ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">%files %defattr(-,root,root,-) %{_sbindir}/continent %{_libdir}/connman/plugins-vpn/continent-proto-plugin.so</code> </pre> <br>  ุชู ุชุทููุฑ ุงููููู ุงูุฅุถุงูู ุจุดูู ูููุตู ุนู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุนูู ุงููุญุงูู ุ ููู ุฌุฒุก ูู Sailfish SDK ุ ูุณุงุนุฏ gdbus ู journalctl ูุน ุงูุฎูุงุฑ -f ูู ูุถุน ุฅุฎุฑุงุฌ ุงูุณุฌู ุงูุซุงุจุช ูุซูุฑูุง ูุฃุฏูุงุช ุชุตุญูุญ ุงูุฃุฎุทุงุก. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุฅูุดุงุก ูุซูู ููููุฑ ุจุงุณุชุฎุฏุงู gdbus: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">gdbus call --system --dest=net.connman.vpn --object-path / --method net.connman.vpn.Manager.Create "{ 'Type': &lt;'continent'&gt;, โฆ }"</code> </pre><br>  ุฃุฌูุฒุฉ ุงูุงุฎุชุจุงุฑ ูู INOI R7 (ุงููุงุชู) ุ INOI T8 (ุงูููุจููุชุฑ ุงูููุญู) ููุญุงูู ูุนุชูุฏ ุนูู VirtualBox <br><br><h3 style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุฏุฉ: </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนุซูุฑ ุนูู</a> ููุฏ ูุตุฏุฑ ConnMan ุงููุชููู ูุน ุณููุฉ ุงูุฒุนููุฉ ุงูุดุฑุงุนูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ุนุธูู - ูุดุฑูุน ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">sailfishos.org/wiki</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471306/">https://habr.com/ru/post/ar471306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471296/index.html">ุงูุนุฌุงู ุงูุชุตููุน - ุฃุฏุงุฉ ูุชุญููู ุงูููุงุกุฉ</a></li>
<li><a href="../ar471298/index.html">ุจูุจุฑ ูุจูุงู ููุฌุฉ ุงูููู. ููุธูุฉ ุงูุนูู ุงูุฏูููุฉ ุงูุขู ูุบูู ุงูุฃุบุงูู</a></li>
<li><a href="../ar471300/index.html">ุงูุฑุฏ: ุฑูุน ุงูุญุงูุฉ ููุชู ุชุทุจููู</a></li>
<li><a href="../ar471302/index.html">ุงูุชุญูู ูู ุงููุณุชุฎุฏู ูู ุงูุตูู ูุงูุงุฆุชูุงู ุงูุงุฌุชูุงุนู</a></li>
<li><a href="../ar471304/index.html">ุงูุฅูุจุฑุงุทูุฑูุฉ ERP. ูุณููุฉ ุงููุญุงุณุจุฉ: ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู ุ ูุงูุญุณุงุจุงุช ุ ูุงูุชูุงุฒู</a></li>
<li><a href="../ar471310/index.html">ุฑุฃูู ุดุฎุตู ุฌุฏุง ุญูู ุงูุชุนููู ุงููููู ูููุณ ููุท ูู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar471312/index.html">ุงูุชุญุถูุฑ ูุดูุงุฏุฉ ุงูุฑุจูุน ุงูููููุฉ. ุงูุชูููุฏ ุงูุฑุจูุน</a></li>
<li><a href="../ar471318/index.html">ุณุจุชูุจุฑ ุขูุฉ ุงูุชุนูู ูุงูุฐูุงุก ุงูุงุตุทูุงุนู</a></li>
<li><a href="../ar471320/index.html">ุฃุฏูุงุช ููุทูุฑู ุงูุจุฑุงูุฌ: ููุชุจุงุช Open Framework ู ููุชุจุงุช ุงูุชุนูู ุงูุขูู</a></li>
<li><a href="../ar471324/index.html">ูู ุชุญูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงููููุงููุฒุงุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>