<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐จ๐พโ๐พ ๐จ๐ฝโ๐ค ููููุฉ ุฅูุดุงุก ูุนุจุฉ ุฅุฐุง ูู ุชูู ููุงููุง ุฃุจุฏูุง โช โฝ๏ธ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุงูุช ููุงู ูุญุธุงุช ูู ุญูุงุฉ ูู ูุจุฑูุฌ ุนูุฏูุง ุญูู ุจุชุญููู ูุนุจุฉ ูุซูุฑุฉ ููุงูุชูุงู. ูุฏุฑู ุงูุนุฏูุฏ ูู ุงููุจุฑูุฌูู ูุฐู ุงูุฃุญูุงู ุ ูุญุชู ุจูุฌุงุญ ุ ูููู ูุฐุง ูุง ูุชุนูู ุจูู. ูุชุนู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุฅูุดุงุก ูุนุจุฉ ุฅุฐุง ูู ุชูู ููุงููุง ุฃุจุฏูุง</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445278/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/96/hp/x0/96hpx0qpk4w0_hmjm3csu0lj92o.png"></div><br>  ูุงูุช ููุงู ูุญุธุงุช ูู ุญูุงุฉ ูู ูุจุฑูุฌ ุนูุฏูุง ุญูู ุจุชุญููู ูุนุจุฉ ูุซูุฑุฉ ููุงูุชูุงู.  ูุฏุฑู ุงูุนุฏูุฏ ูู ุงููุจุฑูุฌูู ูุฐู ุงูุฃุญูุงู ุ ูุญุชู ุจูุฌุงุญ ุ ูููู ูุฐุง ูุง ูุชุนูู ุจูู.  ูุชุนูู ุงูุฃูุฑ ุจุฃููุฆู ุงูุฐูู ูุญุจูู ููุงุฑุณุฉ ุงูุฃูุนุงุจ ุ ูุงูุฐูู ุญุงูููุง (ุญุชู ุจุฏูู ุงููุนุฑูุฉ ูุงูุฎุจุฑุฉ) ุฅูุดุงุกูุง ูุฑุฉ ูุงุญุฏุฉ ุ ูุณุชูุญุงุฉ ูู ุฃูุซูุฉ ุงูุฃุจุทุงู ุงููุญูุฏูู ุงูุฐูู ุญูููุง ุดูุฑุฉ ุนุงูููุฉ (ูุฃุฑุจุงุญ ุถุฎูุฉ) ุ ููููู ุฃุฏุฑููุง ูู ุฃุนูุงูููู ุฃู ุชูุงูุณ ูุน igrostroya ุงููุนูู ุงูู ูุง ูุณุชุทูุน ุชุญููู. <br><br>  ููุง ... <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ ุตุบูุฑุฉ </h2><br>  ุณูู ุฃุจุฏู ุชุญูุธูุง ุนูู ุงูููุฑ: ูุฏููุง ูู ุนุฏู ูุณุจ ุงููุงู - ููุงู ุงููุซูุฑ ูู ุงูููุงูุงุช ุญูู ูุฐุง ุงูููุถูุน ุญูู ุญุจุฑู.  ูุง ุ ุณูู ูุฌุนู ูุนุจุฉ ุงูุฃุญูุงู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุณุชุทุฑุงุฏ ุบูุงุฆู ุนู ูุนุจุฉ ุงูุฃุญูุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูู ูุฑุฉ ุณูุนุช ูุฐู ุงููููุฉ ูู ูุทูุฑูู ูุฑุฏููู ูุงุณุชูุฏูููุงุช ุตุบูุฑุฉ.  ุฃูููุง ูุธุฑุช ุ ูุฅู ุฌููุน ุงููุงุนุจูู ุงููุจุชุฏุฆูู ูู ุนุฌูุฉ ูู ุฃูุฑูู ููุดู ุฃุญูุงููู ู "ุฑุคูุชูู ุงููุซุงููุฉ" ููุนุงูู ุ ุซู ูุชุงุจุฉ ููุงูุงุช ุทูููุฉ ุนู ุฌููุฏูู ุงูุจุทูููุฉ ุ ูุนูููุฉ ุงูุนูู ุ ูุงูุตุนูุจุงุช ุงููุงููุฉ ุงูุชู ูุง ููุฑ ูููุง ุ ููุดุงูู ูุน ุงููุงุดุฑูู ุ ูุนููููุง "ููุงุจ ุงููุงุนุจูู ุงูุฐูู ูุง ูุดุนุฑูู ุจุงูุงูุชูุงู" ุฃุนุทูุง ุฑุณู ุจูุงูู ูุนููุงุช ูุนุฏููุฉ ูุฃููู ูุฃุฑุบุจูุง ูู ุงูุญุตูู ุนูู ูุนุจุฉ ูุฑุงุตูุฉ ุ ูุฃุฑุจุญูุง ุฃุฑุจุงุญุงู ุจุณุจุจูู ููุง. " <br><br>  ุงููุงุณ ุ ูุง ุชูุฎุฏุน.  ุฃูุช ูุง ุชุตูุน ูุนุจุฉ ุฃุญูุงู ุ ูููู ูุนุจุฉ ุณุชุจูุนูุง ุจุดูู ุฌูุฏ - ูุฐุงู ุฃูุฑุงู ูุฎุชููุงู.  ูุง ููุชู ุงููุงุนุจูู (ูุฎุงุตุฉ ุงููุชุทูุฑุฉ) ุจุญููู ููู ูุฏูุนูุง ููุงุจู ุฐูู.  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุฃุฑุจุงุญ - ุฏุฑุงุณุฉ ุงูุงุชุฌุงูุงุช ุ ููุนุฑูุฉ ูุง ูู ุดุงุฆุน ุงูุขู ุ ูู ุจุนูู ูุฑูุฏ ุ ูุฃุฏุงุก ุฃูุถู ุ ูุบูุฑ ุนุงุฏู ุฃูุซุฑ ูู ุบูุฑูุง ุ ููุฑุงุกุฉ ุงูููุงูุงุช (ููุงู ุงููุซูุฑ) ุ ูุงูุชูุงุตู ูุน ุงููุงุดุฑูู - ุจุดูู ุนุงู ุ ุฃุฏุฑู ุฃุญูุงู ุงููุณุชุฎุฏููู ุงูููุงุฆููู ุ ูููุณ ุฃุญูุงูู. <br><br>  ุฅุฐุง ูู ุชูู ูุฏ ูุฑุจุช ุจุนุฏ ููุง ุฒูุช ุชุฑุบุจ ูู ุชุญููู ูุนุจุฉ ุฃุญูุงูู ุ ูุงุณุชุณูู ุนู ุงูุฃุฑุจุงุญ ููุฏููุง.  ูุง ุชุจูุน ุญููู ุนูู ุงูุฅุทูุงู - ุดุงุฑูู ูุฌุงููุง.  ุงููุญ ุงููุงุณ ุญููู ุ ูุงุญุถุฑูู ุฅููู ุ ูุฅุฐุง ูุงู ุญููู ูุณุชุญู ุดูุฆูุง ุ ูุณุชุญุตู ุนููู ุ ุฅู ูู ููู ุงููุงู ุ ูููู ุงูุญุจ ูุงูุงุนุชุฑุงู.  ูุฐุง ูู ูู ุจุนุถ ุงูุฃุญูุงู ุฃูุซุฑ ูููุฉ ุจูุซูุฑ. <br></div></div><br>  ูุนุชูุฏ ุงููุซูุฑ ูู ุงููุงุณ ุฃู ุงูุฃูุนุงุจ ูุถูุนุฉ ููููุช ูุงูุทุงูุฉ ุ ูุฃู ุงูุฃุดุฎุงุต ุงูุฌุงุฏูู ูุฌุจ ุฃูุง ูุชุญุฏุซูุง ุนู ูุฐุง ุงูููุถูุน ุนูู ุงูุฅุทูุงู.  ููู ุงูุฃุดุฎุงุต ุงููุฌุชูุนูู ููุง ููุณูุง ุฌุงุฏูู ุ ูุฐูู ูุญู ูุชูู ููุท ุฌุฒุฆูุงู - ูุงูุฃูุนุงุจ ุชุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ุฅุฐุง ูุนุจุช ุจูุง.  ููุน ุฐูู ุ ูุฅู ุชุทููุฑ ุงูุฃูุนุงุจ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุณุชุบุฑู ุนุฏุฉ ูุฑุงุช ููุชูุง ุ ูููู ุฃู ูุญูู ุงููุซูุฑ ูู ุงูููุงุฆุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชูุญ ูู ุงูุชุนุฑู ุนูู ุงููุจุงุฏุฆ ูุงูููุงุฑุจุงุช ูุงูุฎูุงุฑุฒููุงุช ุงูุชู ูุง ุชูุฌุฏ ูู ุชุทููุฑ ุชุทุจููุงุช ุบูุฑ ุฃูุนุงุจ.  ุฃู ูู ุจุชุนููู ููุงุฑุงุช ุงูุชูุงู ุงูุฃุฏูุงุช (ุนูู ุณุจูู ุงููุซุงู ุ ูุบุฉ ุงูุจุฑูุฌุฉ) ุ ุงูููุงู ุจุดูุก ุบูุฑ ุนุงุฏู ููุซูุฑ.  ุฃุณุชุทูุน ุฃู ุฃุถูู (ูุฃูุงูู ุงููุซูุฑูู) ุฃู ุชุทููุฑ ุงููุนุจุฉ (ุญุชู ุบูุฑ ุงููุงุฌุญุฉ) ูู ุฏุงุฆููุง ุชุฌุฑุจุฉ ุฎุงุตุฉ ูุง ุชุถุงูู ุ ูุงูุชู ุชุชุฐูุฑูุง ุจุฎูู ูุญุจ ุ ูุงูุชู ุฃุฑูุฏ ุชุฌุฑุจุชูุง ููู ูุทูุฑ ุนูู ุงูุฃูู ูุฑุฉ ูุงุญุฏุฉ ูู ุญูุงุชู. <br><br>  ูู ูุณุชุฎุฏู ูุญุฑูุงุช ุงูุฃูุนุงุจ ุงูุฌุฏูุฏุฉ fangled ูุงูุฃุทุฑ ูุงูููุชุจุงุช - ุณููุธุฑ ูู ุฌููุฑ ุงููุนุจุฉ ููุดุนุฑ ุจูุง ูู ุงูุฏุงุฎู.  ูุชุฎูู ุนู ูููุฌูุงุช ุงูุชุทููุฑ ุงููุฑูุฉ (ูุชู ุชุจุณูุท ุงููููุฉ ุจุณุจุจ ุงูุญุงุฌุฉ ุฅูู ุชูุธูู ุนูู ุดุฎุต ูุงุญุฏ ููุท).  ูู ููุถู ุงูููุช ูุงูุทุงูุฉ ูู ุงูุจุญุซ ุนู ูุตูููู ูููุงููู ูููุญููู ููุชุฎุตุตูู ูู ุงูุตูุช - ุณููุนู ูู ูุง ูู ูุณุนูุง (ูููู ูู ููุณ ุงูููุช ุณููุนู ูู ุดูุก ุจุญููุฉ - ุฅุฐุง ูุงู ูุฏููุง ููุงู ูุฌุฃุฉ ุ ููู ูุจุฐู ุงููุซูุฑ ูู ุงูุฌูุฏ ูุฑุจุท ุงูููุถุฉ ุงูุนุตุฑูุฉ ุงูุฑุณููุงุช ุนูู ุงูุฅุทุงุฑ ุงูููุงุฆู).  ูู ุงูููุงูุฉ ุ ูู ูุฏุฑุณ ุงูุฃุฏูุงุช ูุนูููุง ููุฎุชุงุฑ ุงูุฃุฏุงุฉ ุงูุตุญูุญุฉ - ุณููุนู ุฐูู ุนูู ุงูุฃุฏุงุฉ ุงูุชู ูุนุฑููุง ููุนุฑู ููููุฉ ุงุณุชุฎุฏุงููุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูู Java ุ ุจุญูุซ ูู ููุช ูุงุญู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุฅูู Android (ุฃู ุฅูู ุตุงูุน ุงููููุฉ). <br><br>  <i>"ุขู !!!</i>  <i>ุงูุฑุนุจ!</i>  <i>ูุงุจูุณ!</i>  <i>ููู ููููู ูุถุงุก ุจุนุถ ุงูููุช ุนูู ูุซู ูุฐุง ุงููุฑุงุก!</i>  <i>ุฃุฎุฑุฌ ูู ููุง ุ ุณุฃุฐูุจ ููุฑุงุกุฉ ุดูุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู! "</i> <br><br>  ููุงุฐุง ูุฐุงุ  ูุนูู ุ ุฅุนุงุฏุฉ ุงุฎุชุฑุงุน ุงูุนุฌูุฉุ  ููุงุฐุง ูุง ุชุณุชุฎุฏู ูุญุฑู ุงููุนุจุฉ ุงูุฌุงูุฒุฉุ  ุงูุฌูุงุจ ุจุณูุท: ูุง ูุนุฑู ุดูุฆูุง ุนูู ุ ููููุง ูุฑูุฏ ุงููุนุจุฉ ุงูุขู.  ุชุฎูู ุนูููุฉ ุงููุจุฑูุฌ ุงูุนุงุฏู: "ุฃุฑูุฏ ุฃู ุฃุฌุนู ูุนุจุฉ!  ุณูููู ููุงู ูุญู ูุงููุฌุงุฑุงุช ูุถุฎ ุ <s>ูููููู ุณุฑูุฉ ููุฑููุงู</s> ุ ูุงููุคุงูุฑุฉ ุชูุฌูุฑ ุ ููุฐุง ูู ูุญุฏุซ ูู ุฃู ููุงู ุขุฎุฑ!  ุณุฃุจุฏุฃ ุงููุชุงุจุฉ ุงูุขู! .. ูุนูู ูุงุฐุงุ  ุฏุนููุง ูุฑู ูุง ูู ุดุงุฆุน ูุนูุง ุงูุขู ... ูุนู ุ X ุ Y ู Z. ุฏุนููุง ูุฃุฎุฐ Z ุ ูุงูุขู ููุชุจ ุงูุฌููุน ุนูู ุฐูู ... ".  ููุจุฏุฃ ูู ุฏุฑุงุณุฉ ุงููุญุฑู.  ููู ูุฑูู ุงูููุฑุฉ ุ ูุฃูู ูุง ููุฌุฏ ุจุงููุนู ูุง ูููู ูู ุงูููุช ูุฐูู.  ุฒุนููุฉ.  ุฃู ุ ุญุณูุงู ุ ูุฐุง ูุง ูุณุชุณูู ุ ูููู ุจุฏูู ุชุนูู ุงููุญุฑู ุญููุง ุ ูุชู ุงุณุชุฎุฏุงูู ููุนุจุฉ.  ุญุณููุง ุ ุฅุฐุง ูุงู ูุฏูู ุถููุฑ ุญุชู ูุง ููุธูุฑ ูุฃุญุฏ "ุญุฑูุชู" ุงูุฃููู.  ุนุงุฏุฉ ูุง (ุงูุชูู ุฅูู ุฃู ูุชุฌุฑ ุชุทุจููุงุช ุ ุงูุธุฑ ูููุณู) - ุญุณูุงู ุ ุญุณูุงู ุ ุฃุฑูุฏ ุงูุฃุฑุจุงุญ ุ ููุง ููุฉ ุชุญูู.  ุจูุฌุฑุฏ ุฅูุดุงุก ุงูุฃูุนุงุจ ูุงู ุงููุซูุฑ ูู ุงููุจุฏุนูู ุงููุชุญูุณูู.  ููุฃุณู ุ ูุฐู ุงููุฑุฉ ูุฑุช ุจุดูู ูุง ุฑุฌุนุฉ ููู - ุงูุขู ุงูุดูุก ุงูุฑุฆูุณู ูู ุงููุนุจุฉ ููุณ ุงูุฑูุญ ุ ูููู ูููุฐุฌ ุงูุฃุนูุงู (ุนูู ุงูุฃูู ููุงู ุงูุนุฏูุฏ ูู ุงููุญุงุฏุซุงุช ุญูู ูุฐุง ุงูููุถูุน).  ูุฏููุง ุจุณูุท: ุณูุฌุนู ุงูุฃูุนุงุจ ูุน ุงูุฑูุญ.  ูุฐูู ุ ูุณุชุฎูุต ูู ุงูุฃุฏุงุฉ (ุฃู ุดุฎุต ุณููุนู) ููุฑูุฒ ุนูู ุงููููุฉ. <br><br>  ูุฐูู ุ ุฏุนููุง ูุณุชูุฑ. <br>  ูู ุฃุฎูุถ ูู ุชูุงุตูู ุชุฌุฑุจุชู ุงููุฑูุฑุฉ ุ ููููู ุฃููู ุฅู ุฅุญุฏู ุงููุดููุงุช ุงูุฑุฆูุณูุฉ ูููุจุฑูุฌ ูู ุชุทููุฑ ุงูุฃูุนุงุจ ูู ุงูุฑุณููุงุช.  ูุง ูุนุฑู ุงููุจุฑูุฌูู ุนุงุฏุฉู ููููุฉ ุงูุฑุณู (ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุงุณุชุซูุงุกุงุช) ุ ููุง ูุนุฑู ุงูููุงููู ุนุงุฏุฉู ููููุฉ ุงูุจุฑูุฌุฉ (ุฑุบู ูุฌูุฏ ุงุณุชุซูุงุกุงุช).  ูุจุฏูู ุฑุณููุงุช ุ ูุฌุจ ุฃู ุชุนุชุฑู ุ ูุชู ุชุฌุงูุฒ ูุนุจุฉ ูุงุฏุฑุฉ.  ูุงุฐุง ุชูุนูุ <br><br>  ููุงู ุฎูุงุฑุงุช: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">1. ุงุฑุณู ูู ุดูุก ุจููุณู ูู ูุญุฑุฑ ุฑุณููู ุจุณูุท</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/5b/no/-o/5bno-orbfc3-ov3esi3ld_ezdqs.png"></a> <br>  <i>ููุทุงุช ูุนุจุฉ "Kill Him All" ุ 2003</i> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">2. ุงุฑุณู ูู ุดูุก ุจููุณู ูู ูุงูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/46/dj/u8/46dju8rama3wvfx2fzopin-yfiw.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "Raven" ุ 2001</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/jn/mm/vz/jnmmvzujgfsziasffz8m6sitmi0.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "ุฌุญูู" ุ 2002</i> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">3. ุงุณุฃู ุฃุฎูุง ูุง ูุนุฑู ุฃูุถูุง ููู ูุฑุณู (ููู ูู ูู ุฃูุถู ููููุงู)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/tf/tx/jc/tftxjcy5luf045ehrm5_kdb5fzy.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "ุณุฎูู" ุ 2004</i> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">4. ูู ุจุชูุฒูู ุจุนุถ ุงูุจุฑุงูุฌ ููููุฐุฌุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุงุณุญุจ ุงูุฃุตูู ูู ููุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/k9/nj/o6/k9njo6wryhhmaiagpool44qt5ua.jpeg"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "Fucking 2. Demo" ุ 2006</i> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">5. ูู ุงููุฃุณ ุ ุชูุฒูู ุงูุดุนุฑ ุนูู ุงูุฑุฃุณ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/3p/fw/01/3pfw013bspmxrjyyewsnsgqobma.png"></a> <br> <a href=""><img src="https://habrastorage.org/webt/oa/gx/go/oagxgo1wmfykrll-ji-qwyrsv7e.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "ุณุฎูู" ุ 2004</i> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">6. ุงุฑุณู ูู ุดูุก ุจููุณู ูู pseudographics (ASCII)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/db/ht/s5/dbhts5ryeccznntuaiiwjmx32fo.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "Fifa" ุ 2000</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/q0/u-/vu/q0u-vuxozevapmdwswaygicakgg.png"></a> <br>  <i>ููุทุงุช ูู ูุนุจุฉ "Sumo" ุ 1998</i> <br></div></div><br>  ุฏุนููุง ูุชุญุฏุซ ุนู ูุฐุง ุงูุฃุฎูุฑ (ุฌุฒุฆูุงู ูุฃูู ูุง ูุจุฏู ูุญุจุทุงู ูุซู ุจููุฉ ุงููุงุณ).  ูุนุชูุฏ ุงููุซูุฑ ูู ุงููุงุนุจูู ุนุฏููู ุงูุฎุจุฑุฉ ุฃู ุงูุฃูุนุงุจ ุงูุชู ูุง ุชุญุชูู ุนูู ุฑุณููุงุช ุญุฏูุซุฉ ุฑุงุฆุนุฉ ูุง ูููููุง ูุณุจ ูููุจ ุงููุงุนุจูู - ุญุชู ุงุณู ุงููุนุจุฉ ูุง ูุญูููู ุฅูู ุฃูุนุงุจ.  <i>ูุนุชุฑุถ</i> ูุทูุฑู ูุฐู ุงูุฑูุงุฆุน ูุซู <i>ADOM</i> ู <i>NetHack</i> ู <i>Dwarf Fortress</i> ุนูู ูุซู ูุฐู ุงูุญุฌุฌ.  ุงููุธูุฑ ููุณ ุฏุงุฆููุง ุนุงููุงู ุญุงุณูุงู ุ ูุฅู ุงุณุชุฎุฏุงู <abbr title="ุงูููุฏ ุงูููุงุณู ุงูุฃูุฑููู ูุชุจุงุฏู ุงููุนูููุงุช">ASCII</abbr> ูุนุทู ุจุนุถ ุงููุฒุงูุง ุงููููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุนูููุฉ ุงูุชุทููุฑ ุ ูุฑูุฒ ุงููุจุฑูุฌ ุนูู ุงููุนุจ ุ ููููุงูููุง ุงููุนุจุฉ ุ ููููู ุงููุคุงูุฑุฉ ูุงููุฒูุฏ ุ ุฏูู ุฃู ูุตุฑู ุงูุชุจุงููู ุนู ุงูุฃุดูุงุก ุงูุจุณูุทุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุง ูุณุชุบุฑู ุชุทููุฑ ูููู ุฑุณููู ุงููุซูุฑ ูู ุงูููุช - ูููุฐุฌ ุฌุงูุฒ ููุนูู (ุฃู ุฅุตุฏุงุฑ ูู ุฎูุงู ุงููุนุจ ููููู ูููู ุ ูููู ูู ูุณุชุญู ุงูุฃูุฑ ุงููุชุงุจุนุฉ) ุณูููู ุฌุงูุฒูุง ูุจู ุฐูู ุจูุซูุฑ ุ </li><li style=";text-align:right;direction:rtl">  ูุง ุญุงุฌุฉ ูุชุนูู ุงูุฃุทุฑ ููุญุฑูุงุช ุงูุฑุณููุงุช ุ </li><li style=";text-align:right;direction:rtl">  ูู ุชุตุจุญ ุฑุณููุงุชู ูุฏููุฉ ูู ุงูุณููุงุช ุงูุฎูุณ ุงูุชู ุณุชููู ุจุชุทููุฑูุง ุ </li><li style=";text-align:right;direction:rtl">  ุณูููู ุจููุฏูุฑ ุงูุนูุงู ุงููุชุดุฏุฏูู ุชูููู ููุชุฌู ุญุชู ุนูู ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุงูุชู ูุง ุชุญุชูู ุนูู ุจูุฆุฉ ุฑุณูููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ูู ุดูุก ุจุดูู ุตุญูุญ ุ ูููููู ุชุซุจูุช ุงูุฑุณููุงุช ุงูุฑุงุฆุนุฉ ูุงุญููุง. </li></ul><br>  ุงูููุตูุฏ ููุฏูุฉ ุทูููุฉ ุฃุนูุงู ููุณุงุนุฏุฉ ุงููุจุชุฏุฆ igrodelov ุงูุชุบูุจ ุนูู ุงููุฎุงูู ูุงูุชุญูุฒุงุช ุ ูุงูุชููู ุนู ุงูููู ููุง ุฒุงูุช ุชุญุงูู ุงูููุงู ุจุดูุก ูู ูุฐุง ุงููุจูู.  ูู ุงูุช ุฌุงูุฒ  ุซู ููุจุฏุฃ. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#0474a0">ุงูุฎุทูุฉ ุงูุฃููู</font>  <font color="#0474a0">ููุฑุฉ</font> </h2><br>  ูููุ  ูุง ูุฒุงู ูุฏูู ุฃู ููุฑุฉุ <br><br>  ูู ุจุฅููุงู ุชุดุบูู ุงูููุจููุชุฑ ุ ูุชูุงูู ุงูุทุนุงู ุ ูุงูุณูุฑ ุ ูููุงุฑุณุฉ ุงูุฑูุงุถุฉ.  ุฃู ุงูููู ุ ูู ุฃุณูุฃ ุงูุฃุญูุงู.  ุฅู ุงูุฎุฑูุฌ ุจูุนุจุฉ ูุง ูุนูู ุบุณู ุงูููุงูุฐ - ูุง ุชุฃุชู ุงูุจุตูุฑุฉ ูู ูุฐู ุงูุนูููุฉ.  ุนุงุฏุฉู ูุง ุชูููุฏ ููุฑุฉ ุงููุนุจุฉ ูุฌุฃุฉ ุ ุจุดูู ุบูุฑ ูุชููุน ุ ุนูุฏูุง ูุง ุชููุฑ ูููุง ูุทูููุง.  ุฅุฐุง ุญุฏุซ ุฐูู ูุฌุฃุฉ ุ ูุงุณุชุญูุฐ ุนูู ููู ุฑุตุงุต ุจุดูู ุฃุณุฑุน ูุงูุชุจ ุญุชู ุชูุทูู ุงูููุฑุฉ.  ูุชู ุชูููุฐ ุฃู ุนูููุฉ ุฅุจุฏุงุนูุฉ ุจูุฐู ุงูุทุฑููุฉ. <br><br>  ูููููู ูุณุฎ ุฃูุนุงุจ ุงูุขุฎุฑูู.  ุญุณูุง ุ ูุณุฎุฉ.  ุจุงูุทุจุน ุ ูุง ุชูุฒูู ุฏูุนูุง ุ ูุฃุฎุจุฑ ูู ูู ุฒุงููุฉ ุจูุฏู ุฐูุงุฆู ุ ูููู ุงุณุชุฎุฏู ุชุฌุฑุจุฉ ุงูุขุฎุฑูู ูู ููุชุฌู.  ูู ุจุนุฏ ุฐูู ุณูุจูู ุนูู ูุฌู ุงูุชุญุฏูุฏ ูู ุญููู ููู ุณุคุงู ุซุงููู ุ ูุฃู ุงููุงุนุจูู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูุฏููู ูุฐุง: ููู ูุญุจูู ูู ุดูุก ูู ุงููุนุจุฉ ุ ุจุงุณุชุซูุงุก ุจุนุถ ุงูุฃุดูุงุก ุงููุฒุนุฌุฉ ุฃู ุงูุซูุงุซุฉ ุ ูููู ุฅุฐุง ุชู ุฐูู ุจุทุฑููุฉ ูุฎุชููุฉ ... ููู ูุฏุฑู ุฑุจูุง ุฌูุจ ุญููู ููููุฑุฉ ุงูุฌูุฏุฉ ูุดุฎุต ูุง. <br><br>  ููููุง ุณูุฐูุจ ุจูุฐู ุงูุทุฑููุฉ ุงูุจุณูุทุฉ - ูููุชุฑุถ ุฃู ูุฏููุง ุจุงููุนู ููุฑุฉ ุ ููู ูููุฑ ูููุง ููุชุฑุฉ ุทูููุฉ.  ูุฃูู ูุดุฑูุน ุนุธูู ูุฏููุง ุ ุณูููู ุจุงุณุชูุณุงุฎ ูุนุจุฉ ุฌูุฏุฉ ูู Obsidian - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Pathfinder Adventures</a> . <br><br>  <i>"ูุงุฐุง ุจุญู ุงูุฌุญูู ูุฐุง!</i>  <i>ุฃู ุงูุฌุฏุงููุ "</i> <br><br>  ููุง ูููููู ุ <i>pourquoi ุจุงุณุ</i>  ูุจุฏู ุฃููุง ูุฏ ุชุฎูููุง ุนู ุงูุฃููุงุฑ ุงููุณุจูุฉ ุ ููุฐุง ุจุฏุฃูุง ุจุฌุฑุฃุฉ ูู ุตูู ุงูููุฑุฉ.  ุจุทุจูุนุฉ ุงูุญุงู ุ ูู ูููู ุจุงุณุชูุณุงุฎ ุงููุนุจุฉ ูู ูุนุจุฉ ุฅูู ุฃุฎุฑู ุ ููููุง ุณูุณุชุนูุฑ ุงูุขููุงุช ุงูุฃุณุงุณูุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅู ุชุทุจูู ูุนุจุฉ ุชุนุงูููุฉ ุนูู ููุญุฉ ุจุฏูุฑูุง ูุฏูู ูุฒุงูุงูุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅููุง ุฎุทูุฉ ุจุฎุทูุฉ - ููุฐุง ูุณูุญ ูู ุจุนุฏู ุงูููู ุจุดุฃู ุฃุฌูุฒุฉ ุถุจุท ุงูููุช ูุงูุชุฒุงูู ูุงูุชุญุณูู ู FPS ูุบูุฑูุง ูู ุงูุฃุดูุงุก ุงููุฆูุจุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฅููุง ุชุนุงูููุฉ ุ ุฃู ุฃู ุงููุงุนุจ ุฃู ุงููุงุนุจูู ูุง ูุชูุงูุณูู ุถุฏ ุจุนุถูู ุงูุจุนุถ ุ ูููู ุถุฏ "ุจูุฆุฉ" ูุนููุฉ ุชูุนุจ ููููุง ูููุงุนุฏ ุญุชููุฉ - ููุฐุง ููุบู ุงูุญุงุฌุฉ ุฅูู ุจุฑูุฌุฉ <abbr title="ุงูุฐูุงุก ุงูุงุตุทูุงุนู">AI</abbr> ( <abbr title="ุงูุฐูุงุก ุงูุงุตุทูุงุนู">AI</abbr> ) - ูุงุญุฏุฉ ูู ุฃุตุนุจ ูุฑุงุญู ุชุทููุฑ ุงููุนุจุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฅูู ุฐู ูุนูู - ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ ุนุจุงุฑุฉ ุนู ุฃุดุฎุงุต ุบุฑูุจ ุงูุฃุทูุงุฑ ุจุดูู ุนุงู ุ ููู ููุนุจูุง ุฃู ุดูุก: ููุญูู ูููุงูููุง ูุฏุฑูุณูุง ููุนุจูุง ูุซูุฑูุง ููุงูุชูุงู - ููู ุชุฎุฑุฌ ูู ุตูุฑุฉ ุฌูููุฉ ูุงุญุฏุฉ (ุชุนุทู ุดูุฆูุง ููุฃุตุฏูุงุก ุ ุฃููุณ ูุฐููุ) ุ </li><li style=";text-align:right;direction:rtl">  ูุฐุง ูุน ุงูุญุจูุฉ - ูู ูุชูู ูุซูุฑ ูู ุงูุฑูุงุถููู ุงูุฅููุชุฑููููู ุ ููู ุจุงููุณุจุฉ ูู ุดุฎุตูุง ุ ูุฌุจ ุฃู ุชุฑูู ุงููุนุจุฉ ูุตุฉ ุดููุฉ - ูุซู ูุชุงุจ ุ ููุท ุจุงุณุชุฎุฏุงู ูุณุงุฆููุง ุงููููุฉ ุงูุฎุงุตุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅููุง ูุณููุฉ ุ ููู ููุณุช ููุฌููุน - ูููู ุชุทุจูู ุงูุฃุณุงููุจ ุงูููุตููุฉ ุนูู ุฃู ุญูู ูุงุญู ุ ุจุบุถ ุงููุธุฑ ุนู ุนุฏุฏ ุงูุญููุงุช ูุฏูู. </li></ul><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฃููุฆู ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจุงูููุงุนุฏ ุ ููุฏูุฉ ููุฌุฒุฉ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <b>ุชุนุฏ Pathfinder Adventures</b> ุฅุตุฏุงุฑูุง ุฑููููุง ูู ูุนุจุฉ ุจุทุงูุฉ ุงูููุญุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุนูู ุฃุณุงุณ ูุนุจุฉ ูุนุจ ุงูุฃุฏูุงุฑ ุนูู ูุชููุง (ุฃู ุจุงูุฃุญุฑู ูุธุงู ูุนุจ ุงูุฃุฏูุงุฑ ุจุงููุงูู) Pathfinder.  ูุฎุชุงุฑ ุงููุงุนุจูู (ูู 1 ุฅูู 6) ุดุฎุตูุฉ ูุฃููุณูู ุ ููุฐูุจูู ูุนู ุ ูู ูุบุงูุฑุฉ ุ ููุณูุฉ ุฅูู ุนุฏุฏ ูู ุงูุณููุงุฑูููุงุช.  ูู ุญุฑู ูุฏูู ุชุญุช ุชุตุฑูู ุจุทุงูุงุช ูู ุฃููุงุน ูุฎุชููุฉ (ูุซู: ุงูุฃุณูุญุฉ ุ ูุงูุฏุฑูุน ุ ูุงูุชุนุงููุฐ ุ ูุงูุญููุงุก ุ ูุงูุนูุงุตุฑ ุ ููุง ุฅูู ุฐูู) ุ ุจูุณุงุนุฏุฉ ูู ูู ุณููุงุฑูู ุ ูุฌุจ ุนููู ุงูุนุซูุฑ ุนูู Scoundrel ููุนุงูุจุชู ุจูุญุดูุฉ - ุจุทุงูุฉ ุฎุงุตุฉ ุฐุงุช ุฎุตุงุฆุต ุฎุงุตุฉ. <br><br>  ูููุฑ ูู ุณููุงุฑูู ุนุฏุฏูุง ูู ุงูููุงูุน ุฃู ุงูููุงูุน (ูุนุชูุฏ ุนุฏุฏูุง ุนูู ุนุฏุฏ ุงููุงุนุจูู) ุงูุฐู ูุญุชุงุฌ ุงููุงุนุจูู ุฅูู ุฒูุงุฑุชู ูุงุณุชูุดุงูู.  ูุญุชูู ูู ูููุน ุนูู ูุฌููุนุฉ ูู ุงูุจุทุงูุงุช ุงูุชู ุชุชุฌู ูุฃุณูู ุ ูุงูุชู ุชุณุชูุดููุง ุงูุดุฎุตูุงุช ุจุฏูุฑูุง - ุฃู ุฃููุง ุชูุชุญ ุงูุจุทุงูุฉ ุงูุนููุง ูุชุญุงูู ุงูุชุบูุจ ุนูููุง ููููุง ููููุงุนุฏ ุฐุงุช ุงูุตูุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุจุทุงูุงุช ุบูุฑ ุงููุคุฐูุฉ ุงูุชู ุชููุฃ ุณุทุญ ุงููุงุนุจ ุ ุชุญุชูู ูุฐู ุงูุทูุงุจู ุฃูุถูุง ุนูู ุฃุนุฏุงุก ูุนูุงุฆู ุดุฑูุฑุฉ - ูุฌุจ ูุฒููุชูู ูู ุฃุฌู ุงูุชูุฏู ุฃูุซุฑ.  ุชููู ุจุทุงูุฉ Scoundrel ุฃูุถูุง ูู ุฅุญุฏู ุงูุทูุงุจู ุ ููู ุงููุงุนุจูู ูุง ูุนุฑููู ุฃููุง - ูุฌุจ ุงูุนุซูุฑ ุนูููุง. <br><br>  ููุฒููุฉ ุงูุจุทุงูุงุช (ูููุญุตูู ุนูู ุจุทุงูุงุช ุฌุฏูุฏุฉ) ุ ูุฌุจ ุฃู ุชุฌุชุงุฒ ุงูุดุฎุตูุงุช ุงุฎุชุจุงุฑูุง ูุฃุญุฏ ุฎุตุงุฆุตูุง (ููุงุณู ูู ุขุฑ ุจู ุฌู ุ ุงูููุฉ ุ ุงูุจุฑุงุนุฉ ุ ุงูุญููุฉ ุ ููุง ุฅูู ุฐูู) ุนู ุทุฑูู ุฑูู ูููุช ูุชู ุชุญุฏูุฏ ุญุฌูู ุจูุงุณุทุฉ ูููุฉ ุงูุฎุงุตูุฉ ุงููููุฒุฉ (ูู d4 ุฅูู d12) ุ ุฅุถุงูุฉ ุงููุนุฏูุงุช (ุงููุญุฏุฏุฉ ุงูููุงุนุฏ ููุณุชูู ุชูููุฉ ุงูุดุฎุตูุฉ) ูุงููุนุจ ูุชุนุฒูุฒ ุชุฃุซูุฑ ุงูุจุทุงูุงุช ุงูููุงุณุจุฉ ูู ุงููุฏ.  ุนูุฏ ุงูููุฒ ุ ุชุชู ุฅุฒุงูุฉ ุจุทุงูุฉ ุงูุชูุงุก ุฅูุง ูู ุงููุนุจุฉ (ุฅุฐุง ูุงูุช ุนุฏููุง) ุฃู ุชุบุฐู ูุฏ ุงููุงุนุจ (ุฅุฐุง ูุงูุช ุนูุตุฑูุง) ููุชู ุงูุงูุชูุงู ุฅูู ูุงุนุจ ุขุฎุฑ.  ุนูุฏ ุงูุฎุณุงุฑุฉ ุ ุชุชุถุฑุฑ ุงูุดุฎุตูุฉ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ููุง ูุคุฏู ุจู ุฅูู ุชุฌุงูู ุงูุจุทุงูุงุช ูู ูุฏู.  ูููุงูููู ูุซูุฑ ููุงูุชูุงู ูู ุฃู ุตุญุฉ ุงูุดุฎุตูุฉ ุชุชุญุฏุฏ ุจุนุฏุฏ ุงูุจุทุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุณุทุญ ุงูุณูููุฉ - ุจูุฌุฑุฏ ุฃู ูุญุชุงุฌ ุงููุงุนุจ ุฅูู ุณุญุจ ุจุทุงูุฉ ูู ุนูู ุธูุฑ ุงูุณูููุฉ ุ ููููู ููุณูุง ููุงู ุ ูุชููุช ุดุฎุตูุชู. <br><br>  ุงููุฏู ูู ุ ุจุนุฏ ุฃู ุดู ุทุฑููู ูู ุฎูุงู ุฎุฑุงุฆุท ุงููููุน ุ ููุนุซูุฑ ุนูู Scoundrel ูุฅูุญุงู ุงููุฒููุฉ ุจู ุ ููุฏ ุณุจู ุฃู ุณุฏุช ุทุฑููู ููุชุฑุงุฌุน (ููููู ูุนุฑูุฉ ุงููุฒูุฏ ุญูู ูุฐุง ุงูููุถูุน ูุบูุฑ ุฐูู ุงููุซูุฑ ูู ุฎูุงู ูุฑุงุกุฉ ุงูููุงุนุฏ).  ูุฌุจ ุงูููุงู ุจุฐูู ููุชุฑุฉ ูู ุงูููุช ุ ูุงูุชู ูู ุงูุตุนูุจุฉ ุงูุฑุฆูุณูุฉ ููุนุจุฉ.  ุนุฏุฏ ุงูุญุฑูุงุช ูุญุฏูุฏ ููุบุงูุฉ ููุง ูุตู ุงูุชุนุฏุงุฏ ุงูุจุณูุท ูุฌููุน ุงูุจุทุงูุงุช ุงููุชุงุญุฉ ุฅูู ุงููุฏู.  ูุฐูู ุ ูุฌุจ ุนููู ุชุทุจูู ุงูุญูู ุงููุฎุชููุฉ ูุงูุชูููุงุช ุงูุฐููุฉ. <br><br>  ูุน ุงูุชูุงู ุงูุณููุงุฑูููุงุช ุ ุณูู ุชููู ุงูุดุฎุตูุงุช ูุชุชุทูุฑ ุ ูุชุญุณู ุฎุตุงุฆุตูุง ูุงูุชุณุงุจ ููุงุฑุงุช ุฌุฏูุฏุฉ ูููุฏุฉ.  ุชุนุฏ ุฅุฏุงุฑุฉ ุงููุฌููุนุฉ ุนูุตุฑูุง ููููุง ุฌุฏูุง ูู ุงููุนุจุฉ ุ ูุธุฑูุง ูุฃู ูุชุงุฆุฌ ุงูุณููุงุฑูู (ุฎุงุตุฉ ูู ุงููุฑุงุญู ุงูุฃุฎูุฑุฉ) ุชุนุชูุฏ ุนุงุฏุฉ ุนูู ุงูุจุทุงูุงุช ุงููุญุฏุฏุฉ ุจุดูู ุตุญูุญ (ูุนูู ุงููุซูุฑ ูู ุงูุญุธ ุ ูููู ูุงุฐุง ุชุฑูุฏ ูู ูุนุจุฉ ุชุญุชูู ุนูู ุงูุฒูุฑุ). </div></div><br>  ุจุดูู ุนุงู ุ ุชุนุชุจุฑ ุงููุนุจุฉ ูุซูุฑุฉ ููุงูุชูุงู ูุฌุฏูุฑุฉ ุจุงูุงูุชูุงู ูุชุณุชุญู ุงูุงูุชูุงู ุ ููุง ูู ููู ุจุงููุณุจุฉ ููุง ุ ูุนูุฏ ููุบุงูุฉ (ูุงุญุธ ุฃููู ุฃููู "ุตุนุจ" ูููุณ ุจูุนูู "ุตุนุจ") ูุฌุนููุง ูุซูุฑุฉ ููุงูุชูุงู ูุชูููุฐ ุงุณุชูุณุงุฎูุง. <br><br>  ูู ุญุงูุชูุง ุ ุณูููู ุจุฅุฌุฑุงุก ุชุบููุฑ ููุงูููู ุนุงููู ูุงุญุฏ - ุณูู ูุชุฎูู ุนู ุงูุจุทุงูุงุช.  ุจุฏูุงู ูู ุฐูู ุ ูู ูุฑูุถ ุนูู ุงูุฅุทูุงู ุ ููููุง ุณูุณุชุจุฏู ุงูุจุทุงูุงุช ุจููุนุจุงุช ุ ุจุฃุญุฌุงู ูุฎุชููุฉ ูุฃููุงู ูุฎุชููุฉ (ูู ุงููุงุญูุฉ ุงููููุฉ ุ ููุณ ูู ุงูุตุญูุญ ุชูุงููุง ุงุณุชุฎุฏุงู "ููุนุจุงุชูู" ุ ูุฃู ููุงู ุฃุดูุงููุง ุฃุฎุฑู ุบูุฑ ุงููุณุฏุณ ุงูุตุญูุญ ุ ููู ูู ุบูุฑ ุงููุนุชุงุฏ ุฃู ุฃุณูููุง "ุงูุนุธุงู") ุฅูู ุฃูุฑ ุบูุฑ ุณุงุฑ ุ ูููู ุงุณุชุฎุฏุงู ุงูุฏูุฒู ุงูุฃูุฑููู ูู ุนูุงูุฉ ุนูู ุงูุฐูู ุงูุณูุฆ ุ ูุฐูู ุฏุนููุง ูุชุฑู ุงูุฃูุฑ ููุง ูู).  ุงูุขู ุ ุจุฏูุงู ูู ุงูุทูุงุจู ุ ุณูุญุตู ุงููุงุนุจูู ุนูู ุญูุงุฆุจ.  ูุณูููู ููููุงูุน ุฃูุถูุง ุฃููุงุณ ุ ูููู ูููุง ุงููุงุนุจูู ูู ุนูููุฉ ุงูุจุญุซ ุจุณุญุจ ุงูููุนุจุงุช ุงูุชุนุณููุฉ.  ุณูุญุฏุฏ ููู ุงูููุนุจ ููุนู ุ ูุจุงูุชุงูู ุ ููุงุนุฏ ุงุฌุชูุงุฒ ุงูุงุฎุชุจุงุฑ.  ุณูุชู ุญุฐู ุงูุฎุตุงุฆุต ุงูุดุฎุตูุฉ ููุดุฎุตูุฉ (ุงูููุฉ ุ ุงูุจุฑุงุนุฉ ุ ููุง ุฅูู ุฐูู) ุ ููุชูุฌุฉ ูุฐูู ุ ูููู ุณุชุธูุฑ ุขููุงุช ุฌุฏูุฏุฉ ูุซูุฑุฉ ููุงูุชูุงู (ุงููุฒูุฏ ุญูู ุฃู ูููุง ูุงุญููุง). <br><br>  ูู ุณูููู ูุชุนุฉ ุงููุนุจุ  ููุณ ูุฏู ุฃู ููุฑุฉ ุ ููุง ุฃุญุฏ ูุณุชุทูุน ุฃู ูููู ูุฐุง ุญุชู ูุตุจุญ ุงููููุฐุฌ ุงูุฃููู ููุนูู ุฌุงูุฒูุง.  ููููุง ูุง ูุชูุชุน ุจุงููุนุจุฉ ุ ูููู ุงูุชูููุฉ ุ ุฃููุณ ูุฐููุ  ูุฐูู ุ ูุง ููุจุบู ุฃู ูููู ููุงู ุดู ูู ุงููุฌุงุญ. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#0474a0">ุงูุฎุทูุฉ ุงูุซุงููุฉ</font>  <font color="#0474a0">ุชุตููู</font> </h2><br>  ูุฌูุฏ ููุฑุฉ ููุณุช ุณูู ุซูุซ ุงููุตุฉ.  ุงูุขู ูู ุงูููู ุชุทููุฑ ูุฐู ุงูููุฑุฉ.  ุฃู ุ ูุง ุชูุดู ูู ุงูุญุฏููุฉ ุฃู ุชุฃุฎุฐ ุญูุงููุง ุจุฎุงุฑูุง ุ ูููู ุงุฌูุณ ุนูู ุงูุทุงููุฉ ุ ูุฃุฎุฐ ุงููุฑู ุจุงุณุชุฎุฏุงู ููู (ุฃู ุงูุชุญ ูุญุฑุฑ ุงููุตูุต ุงูููุถู ูุฏูู) ูุงูุชุจ ุจุนูุงูุฉ ูุณุชูุฏ ุชุตููู ุ ูุญุงูู ุจูู ุนูุงูุฉ ูู ุฌุงูุจ ูู ุฌูุงูุจ ูููุงูููุง ุงููุนุจุฉ.  ุณูุณุชุบุฑู ูุฐุง ููุชูุง ูุจูุฑูุง ุ ูุฐูู ูุง ุชุชููุน ุฅููุงู ุงููุชุงุจุฉ ูู ุฌูุณุฉ ูุงุญุฏุฉ.  ููุง ุชุฃูู ุญุชู ูู ุงูุชูููุฑ ูู ุฎูุงู ูู ุดูุก ูู ููุช ูุงุญุฏ - ุฃุซูุงุก ููุงูู ุจุงูุชุทุจูู ุ ุณุชุฑู ุงูุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ูุฌููุนุฉ ูู ุงูุชุบููุฑุงุช ูุงูุชุบููุฑุงุช (ูุฃุญูุงููุง ุฅุนุงุฏุฉ ุตูุงุบุฉ ุดูุก ูุง ุนุงููููุง) ุ ูููู ูุฌุจ ุฃู ูููู ููุงู ุฃุณุงุณ ูุง ูุจู ุจุฏุก ุนูููุฉ ุงูุชุทููุฑ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุงูุจุฏุงูุฉ ุ ุณูุจุฏู ูุณุชูุฏ ุงูุชุตููู ุงูุฎุงุต ุจู ูุซู ูุฐุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/oi/qw/fp/oiqwfpjf6vasnpmy6ucqglbnwy8.jpeg"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/ff/gu/7q/ffgu7qx80qefetycgrmdraoetv8.jpeg"></a> <br></div></div><br>  ูููุท ุจุนุฏ ุงูุชุนุงูู ูุน ุงูููุฌุฉ ุงูุฃููู ูู ุงูุฃููุงุฑ ุงูุนุธููุฉ ุ ูุฅูู ุชุฃุฎุฐ ุฑุฃุณ ุงูุตูุญุฉ ูุชูุฑุฑ ุจููุฉ ุงููุณุชูุฏ ูุชุจุฏุฃ ูู ููุก ุงููุญุชูู ูููุฌูุงู ุจุดูู ููุชุธู (ูุญุต ูู ุซุงููุฉ ุจูุง ุชู ูุชุงุจุชู ุจุงููุนู ูุชุฌูุจ ุงูุชูุฑุงุฑ ุบูุฑ ุงูุถุฑูุฑู ูุฎุงุตุฉ ุงูุชูุงูุถุงุช).  ุชุฏุฑูุฌูุง ุ ุฎุทูุฉ ุจุฎุทูุฉ ุ ุชุญุตู ุนูู ุดูุก ุฐู ูุนูู ูููุฌุฒ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซู ูุฐุง</a> . <br><br>  ุนูุฏ ูุตู ุงูุชุตููู ุ ุงุฎุชุฑ ุงููุบุฉ ุงูุชู ูุณูู ุนููู ุงูุชุนุจูุฑ ุนู ุฃููุงุฑู ุ ุฎุงุตุฉ ุฅุฐุง ููุช ุชุนูู ุจููุฑุฏู.  ุฅุฐุง ุงุญุชุฌุช ูู ุฃู ููุช ูุฅุดุฑุงู ูุทูุฑู ุงูุทุฑู ุงูุซุงูุซ ูู ุงููุดุฑูุน ุ ูุชุฃูุฏ ูู ุฃููู ูููููู ูู ูุฐุง ุงููุฑุงุก ุงูุฎูุงู ุงูุฐู ูุญุฏุซ ูู ุฑุฃุณู. <br><br>  ูููุชุงุจุนุฉ ุ ุฃูุตู ุจุดุฏุฉ ุฃู ุชูุฑุฃ ุงููุณุชูุฏ ุงููุฐููุฑ ุนูู ุงูุฃูู ูุทุฑููุง ุ ูุฃููู ูู ุงููุณุชูุจู ุณุฃุดูุฑ ุฅูู ุงููุตุทูุญุงุช ูุงูููุงููู ุงูููุฏูุฉ ููุงู ุ ุฏูู ุงูุฎูุถ ูู ุงูุชูุงุตูู ุญูู ุชูุณูุฑูุง. <br><br>  <i>"ุงููุคูู ุ ุชูุชู ููุณู ุถุฏ ุงูุฌุฏุงุฑ.</i>  <i>ุนุฏุฏ ูุจูุฑ ุฌุฏูุง ูู ุงูุญุฑูู. "</i> <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#0474a0">ุงูุฎุทูุฉ ุงูุซุงูุซุฉ</font>  <font color="#0474a0">ุชุตููู</font> </h2><br>  ููุฐุง ูู ุ ูู ููุณ ุงูุชุตููู ุ ููุท ุฃูุซุฑ ุชูุตููุง. <br>  ุฃุนูู ุฃู ุงููุซูุฑ ูููู ุญุฑูุตูู ุจุงููุนู ุนูู ูุชุญ IDE ูุจุฏุก ุงูุชุฑููุฒ ุ ููู ุงูุชุญูู ุจุงูุตุจุฑ ุฃูุซุฑ ูู ุฐูู ุจูููู.  ุนูุฏูุง ุชุทุบู ุงูุฃููุงุฑ ุนูู ุฑุคูุณูุง ุ ูุจุฏู ููุง ุฃููุง ูุญุชุงุฌ ููุท ุฅูู ููุณ ููุญุฉ ุงูููุงุชูุญ ูุณุชูุฏูุน ุฃูุฏููุง ุฅูู ูุณุงูุงุช ุนุงููุฉ - ูุจู ุฃู ูุชููุฑ ูุฏู ุงููููุฉ ุงูููุช ููุบูู ุนูู ุงููููุฏ ุ ุนูุฏูุง ุชููู ูุณุฎุฉ ุงูุนูู ูู ุงูุชุทุจูู ุฌุงูุฒุฉ ... ููุฐูุงุจ ุฅูู ุณูุฉ ุงูููููุงุช.  ูู ุฃุฌู ุนุฏู ุฅุนุงุฏุฉ ูุชุงุจุฉ ููุณ ุงูุดูุก ุนุฏุฉ ูุฑุงุช (ูุฎุงุตุฉู ุนุฏู ุงูุชุฃูุฏ ุจุนุฏ ุซูุงุซ ุณุงุนุงุช ูู ุงูุชุทููุฑ ูู ุฃู ุงูุชุตููู ูุง ูุนูู ููุฌุจ ุงูุจุฏุก ูู ุฌุฏูุฏ) ุ ุฃูุชุฑุญ ุนููู ุฃููุงู ุงูุชูููุฑ ูู (ูุชูุซูู) ุงููููู ุงูุฑุฆูุณู ููุชุทุจูู. <br><br>  ูุธุฑูุง ูุฃููุง ุ ููุทูุฑูู ุ ุนูู ุฏุฑุงูุฉ ุฌูุฏุฉ ุจุงูุจุฑูุฌุฉ ุงูููุฌูุฉ ูููุงุฆูุงุช (OOP) ุ ุณูู ูุณุชุฎุฏู ูุจุงุฏุฆูุง ูู ูุดุฑูุนูุง.  ูููู ุจุงููุณุจุฉ ุฅูู OOP ุ ูุง ููุฌุฏ ูุง ูู ุฃูุซุฑ ูู ุงููุชููุน ูู ุงูุจุฏุก ูู ุงูุชุทููุฑ ูุน ูุฌููุนุฉ ูู ุงููุฎุทุทุงุช UML ุงููููุฉ.  (ุฃูุช ูุง ุชุนุฑู ูุง <abbr title="ูุบุฉ ุงูููุฐุฌุฉ ุงูููุญุฏุฉ">ูู UML</abbr> ุ ููุฏ ูุฏุช ุฃูุณู ุฃูุถูุง ุ ููููู ุณุฃุชุฐูุฑู ุจุณุฑูุฑ - ููุท ูุฅุธูุงุฑ ูุง ุฃูุง ูุจุฑูุฌ ูุฌุชูุฏ ุฃูุง ุนููู.) <br><br>  ููุจุฏุฃ ุจุฑุณู ุญุงูุฉ ุงูุงุณุชุฎุฏุงู.  ุณูููู ุจุชุตููุฑ ุงูุทุฑู ุงูุชู ูุชูุงุนู ุจูุง ุงููุณุชุฎุฏู (ุงููุงุนุจ) ูุน ุงููุธุงู ุงููุณุชูุจูู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุณุชุฎุฏุงู ุงูุญุงูุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/rt/ph/st/rtphstumyokd9_gnpgzoewpaux8.png"></a> <br></div></div><br>  <i>"ุงู ... ูุง ูุฐุง ูููุ"</i> <br><br>  ููุท ุฃูุฒุญ ุ ุฃูุฒุญ ููุท ... ูุฑุจูุง ุฃุชููู ุนู ุงููุฒุงุญ - ุฅููุง ูุณุฃูุฉ ุฎุทูุฑุฉ (ุญูู ุ ุจุนุฏ ูู ุดูุก).  ูู ูุฎุทุท ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุ ูู ุงูุถุฑูุฑู ุนุฑุถ ุงูุงุญุชูุงูุงุช ุงูุชู ูููุฑูุง ุงููุธุงู ูููุณุชุฎุฏู.  ูู ุงูุชูุงุตูู.  ูููู ุญุฏุซ ุฐูู ุชุงุฑูุฎูุงู ุฃู ูุฐุง ุงูููุน ูู ุงููุฎุทุทุงุช ูู ุงูุฃุณูุฃ ุจุงููุณุจุฉ ูู - ุงูุตุจุฑ ูุง ูููู ุ ุนูู ูุง ูุจุฏู.  ูููุณ ุนููู ุฃู ุชูุธุฑ ุฅูู ุจูุฐุง ุงูุดูู - ูุณูุง ูู ุงูุฌุงูุนุฉ ูุญูู ุงูุฏุจููู ุ ููููุง ูุณุชูุชุน ุจุนูููุฉ ุงูุนูู.  ูููุฐู ุงูุนูููุฉ ุ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ููุณุช ูููุฉ ููุบุงูุฉ.  ูู ุงูุฃูููุฉ ุจููุงู ุชูุณูู ุงูุชุทุจูู ุจุดูู ุตุญูุญ ุฅูู ูุญุฏุงุช ูุณุชููุฉ ุ ุฃู ุชุทุจูู ุงููุนุจุฉ ุจุทุฑููุฉ ูุง ุชุคุซุฑ ูููุง ููุฒุงุช ุงููุงุฌูุฉ ุงููุฑุฆูุฉ ุนูู ูููุงูููุง ุงููุนุจุฉ ุ ููููู ุจุณูููุฉ ุชุบููุฑ ูููู ุงูุฑุณูู ุฅุฐุง ุฑุบุจุช ูู ุฐูู. <br><br>  ูููู ุชูุตูู ูุฐู ุงูููุทุฉ ูู ูุฎุทุท ุงูููููุงุช ุงูุชุงููุฉ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููููุงุช ุงููุธุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/lm/br/br/lmbrbrdoyppboylxuoopjr--d5u.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุฏุฏูุง ุจุงููุนู ุฃูุธูุฉ ูุฑุนูุฉ ูุญุฏุฏุฉ ุชุดูู ุฌุฒุกูุง ูู ุชุทุจูููุง ุ ูููุง ุณูุธูุฑ ูุงุญููุง ุ ุณูุชู ุชุทููุฑูุง ุฌููุนูุง ุจุดูู ูุณุชูู ุนู ุจุนุถูุง ุงูุจุนุถ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ุ ูู ููุณ ุงููุฑุญูุฉ ุ ุณููุชุดู ุดูู ุฏูุฑุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ (ุฃู ุจุงูุฃุญุฑู ุ ุงูุฌุฒุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงูุฌุฒุก ุงูุฐู ูููุฐ ุงูุฃุญุฑู ูู ุงูุจุฑูุงูุฌ ุงููุตู). </font><font style="vertical-align: inherit;">ููุฐุง ุ ูุนุฏ ูุฎุทุท ุงููุดุงุท ููุงุณุจูุง ููุง:</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชูู ุ ุงุฌูุณ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/o-/f6/ev/o-f6evthl0hpqu0rhwlejbxyhty.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฎูุฑูุง ุ ุณูููู ูู ุงูุฌูุฏ ุฃู ููุฏู ุจุดูู ุนุงู ุชุณูุณู ุชูุงุนู ุงููุณุชุฎุฏู ุงูููุงุฆู ูุน ูุญุฑู ุงููุนุจุฉ ูู ุฎูุงู ูุธุงู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช. </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/hs/jo/_d/hsjo_dinyd5genlr77jrgz0ouys.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู ุทููู ุ ูุจู ุงููุฌุฑ ุจูุซูุฑ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุฌููุณ ููุง ูุฌุจ ุฃู ูููู ุนูู ุงูุทุงููุฉ ุ ุณุชููู ุจุฑุณู ุงููุฎุทุทุงุช ุงูุจูุงููุฉ ุงูุนุดุฑูู ุงูุฃุฎุฑู ุจูุฏูุก - ุตุฏูููู ุ ูู ุงููุณุชูุจู ุณูุณุงุนุฏู ูุฌูุฏูู ุนูู ุงูุจูุงุก ุนูู ุงููุณุงุฑ ุงูุฐู ุชุฎุชุงุฑู ุ ูุฒูุงุฏุฉ ุซูุชู ุจููุณู ุ ูุชุญุฏูุซ ุงูุฏูููุฑ ุงูุฏุงุฎูู ููุบุฑูุฉ ุ ูุชุนููู ุฎูููุงุช ุจุงูุชุฉ ูุน ููุตูุงุช ููููุฉ ุ ูุจุตูุฑุฉ ุจุณูุทุฉ ุฒููุงุฆู ุงููุทูุฑูู ุงูุฐูู ุณููุฑุนูู ูุฑูุจุงู ุฅูู ุฃุจูุงุจ ุงูุงุณุชูุฏูู ุงูุฌุฏูุฏ ุงูุฎุงุต ุจู ุจุฃุนุฏุงุฏ ูุจูุฑุฉ (ูุญู ูุง ููุฏู ุฅูู ุงููุฌุงุญ ุ ุชุฐูุฑุ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูู ูุฐูุฑ ุงููุฎุทุทุงุช ุงูุตููุฉ (ุงููุฆุฉ) ุงูุชู ูุญุจูุง ุฌููุนูุง - ูู ุงููุชููุน ุฃู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชููู</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุจูุงุช </font><font style="vertical-align: inherit;">ูุซูุฑูุง ููู ุชุถูู ุงูุตูุฑุฉ ูู ุซูุงุซ ุดุงุดุงุช ูู ุงููุถูุญ ูู ุงูุจุฏุงูุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุฃูุถู ุชูุณููู ุฅูู ุฃุฌุฒุงุก ููุถุนู ุชุฏุฑูุฌููุง ุ ุฃุซูุงุก ุงูุงูุชูุงู ุฅูู ุชุทููุฑ ุงููุธุงู ุงููุฑุนู ุงูููุงุณุจ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฑุงุจุนุฉ </font><font style="vertical-align: inherit;">ุงุฎุชูุงุฑ ุงูุฃุฏุงุฉ</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ููุง ุชู ุงูุงุชูุงู ุนููู ุจุงููุนู ุ ุณูููู ุจุชุทููุฑ ุชุทุจูู ุนุจุฑ ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ูุนูู ุนูู ูู ูู ุฃุฌูุฒุฉ ุณุทุญ ุงูููุชุจ ุงูุชู ุชุนูู ุนูู ุฃูุธูุฉ ุชุดุบูู ูุฎุชููุฉ ูุนูู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ. ุณูุฎุชุงุฑ Java ููุบุฉ ุจุฑูุฌุฉ ุ ูููุชููู ุฃูุถู ุ ูุฃู ุงูุฃุฎูุฑ ุฃุญุฏุซ ูุฃุนุฐุจ ุ ููู ูุชุญ ูู ุงูููุช ุจุนุฏ ููุณุจุงุญุฉ ูู ููุฌุงุช ุงูุณุฎุท ุงูุชู ุทุบุช ุนูู ุณุงุจูุชูุง (ูู ููุณ ุงูููุช ุณุฃุชุนูู ูุง ุฅุฐุง ูุงู ุดุฎุต ุขุฎุฑ ูุง ููุชูููุง). </font></font><abbr title="Java Virtual Machine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVM</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุง ุชุนูููู ุ ูุชุงุญ ูู ูู ููุงู (ุนูู ุซูุงุซุฉ ูููุงุฑุงุช ุฌูุงุฒ ุ hehe) ุ ุณูุฏุนู ููุงู ูู Windows ู UNIX ุ ูุญุชู ุนูู ุฎุงุฏู ุจุนูุฏ ูููููุง ุงููุนุจ ูู ุฎูุงู ุงุชุตุงู SSH (ุบูุฑ ูุนุฑูู ูุฃู ุดุฎุต ูุญุชุงุฌ ุฅููู ุ ูููู ุณูู ููุฏู ูุฐู ุงููุฑุตุฉ). ุณููููู ุฃูุถูุง ุฅูู Android ุนูุฏูุง ูุตุจุญ ุฃุบููุงุก ูููุธู ููุงููุง ุ ููููุง ุณูุฒูุฏ ุฐูู ูู ููุช ูุงุญู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุชุจุงุช (ูุง ูููููุง ุงููุตูู ุฅูู ุฃู ููุงู ุจุฏูููุง) ุณูุฎุชุงุฑ ููููุง ููุชุทูุจุงุช ุงููุธุงู ุงูุฃุณุงุณู ูุฏููุง. </font><font style="vertical-align: inherit;">ุณูู ูุณุชุฎุฏู Maven ููุธุงู ุงูุจูุงุก. </font><font style="vertical-align: inherit;">ุฃู Gradle. </font><font style="vertical-align: inherit;">ุฃู ูู ููุณ ุ ูุงูู ุ ููุจุฏุฃ ุจูุง. </font><font style="vertical-align: inherit;">ุฃูุตุญู ููุฑูุง ุจุฅุนุฏุงุฏ ูุธุงู ููุชุญูู ูู ุงูุฅุตุฏุงุฑ (ุฃูููุง ุชูุถู) ุ ุจุญูุซ ูุตุจุญ ูู ุงูุฃุณูู ุจุนุฏ ุนุฏุฉ ุณููุงุช ุฃู ุชุชุฐูุฑ ุจูุดุงุนุฑ ุงูุญููู ุฅูู ุฃู ูุฏู ูุงูุช ุฑุงุฆุนุฉ. </font><font style="vertical-align: inherit;">IDE ุฃูุถุง ุงุฎุชูุงุฑ ูุฃูููุฉ ูููุถูุฉ ููุฑูุญุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฃู ุดูุก ุขุฎุฑ. </font><font style="vertical-align: inherit;">ููููู ุงูุจุฏุก ูู ุชุทููุฑ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฎุงูุณุฉ </font><font style="vertical-align: inherit;">ุฅูุดุงุก ูุฅุนุฏุงุฏ ูุดุฑูุน</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุณุชุฎุฏู IDE ุ ูุฅู ุฅูุดุงุก ูุดุฑูุน ุฃูุฑ ุชุงูู. </font><font style="vertical-align: inherit;">ุชุญุชุงุฌ ููุท ุฅูู ุงุฎุชูุงุฑ ุงุณู ุฑูุงู (ุนูู ุณุจูู ุงููุซุงู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dice</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><b><font style="vertical-align: inherit;">ูุชุญูุฉ</font></b><font style="vertical-align: inherit;"> ุงููุณุชูุจู ุงูุฎุงุตุฉ ุจูุง </font><font style="vertical-align: inherit;">ุ ููุง ุชูุณู ุชูููู ุฏุนู Maven ูู ุงูุฅุนุฏุงุฏุงุช ุ </font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุงุจุฉ ุงููุนุฑูุงุช ุงููุงุฒูุฉ </font><font style="vertical-align: inherit;">ูู ุงูููู </font><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ุฃูุถูุง ุฏุนู Kotlin ุ ูุงูุฐู ููุชูุฏ ุงูุชุฑุงุถููุง: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุนุถ ุงูุฅุนุฏุงุฏุงุช ุงูุชู ูู ูุชูุงูููุง ุจุงูุชูุตูู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ูู ุงููุนูููุงุช ุจุดุฃู ุงููุดุงุฑูุน ุงููุฎุชูุทุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">          Java,  Kotlin    <code>src/main/kotlin</code>       <code>src/main/java</code> .   Kotlin ,       ( <code>*.kt</code> )   ,      ( <code>*.java</code> )         Maven: <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/main/kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/main/java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/test/kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/test/java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-compiler-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>3.5.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Replacing default-compile --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Replacing default-testCompile --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-testCompile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>java-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>java-test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>testCompile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>   ,    โ        .      . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ููุดุฆ ุซูุงุซ ุญุฒู ูู ููุช ูุงุญุฏ (ููุงุฐุง ุชุงูู ุดูุกุ): </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุจุงููุณุจุฉ ูููุตูู ุงูุชู ุชุตู ุฃุดูุงุก ูู ุนุงูู ุงููุนุจุฉ ุ </font></font></li><li style=";text-align:right;direction:rtl"> <code>game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูููุตูู ุงูุชู ุชููุฐ ุทุฑููุฉ ุงููุนุจ ุ </font></font></li><li style=";text-align:right;direction:rtl"> <code>ui</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูููุตูู ุงููุณุคููุฉ ุนู ุชูุงุนู ุงููุณุชุฎุฏู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุญุชูู ุงูุฃุฎูุฑ ุนูู ูุงุฌูุงุช ููุท ุ ูุงูุทุฑู ุงูุชู ุณูุณุชุฎุฏููุง ูุฅุฏุฎุงู ุงูุจูุงูุงุช ูุฅุฎุฑุงุฌูุง. ุณูููู ุจุชุฎุฒูู ุชุทุจููุงุช ูุญุฏุฏุฉ ูู ูุดุฑูุน ูููุตู ุ ูููู ุงููุฒูุฏ ุญูู ูุฐุง ูุงุญููุง. ูู ุบุถูู ุฐูู ุ ูู ุฃุฌู ุนุฏู ุงูุฑุด ุฃูุซุฑ ูู ุงููุงุฒู ุ ุณูุถูู ูุฐู ุงููุฆุงุช ููุง ุฌูุจูุง ุฅูู ุฌูุจ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุญุงูู ุงูููุงู ุจุฐูู ุนูู ุงูููุฑ ุชูุงููุง: ููุฑ ูู ุชูุงุตูู ุฃุณูุงุก ุงูุญุฒูุฉ ูุงููุงุฌูุงุช ูุงููุฆุงุช ูุงูุทุฑู ุ ูุตู ุจุฏูุฉ ุชูุงุนู ุงูุฃุดูุงุก ูููุง ุจูููุง - ูู ูุฐุง ุณูู ูุชุบูุฑ ุ ูุฃูุซุฑ ูู ุนุดุฑุฉ ูุฑุงุช. ูุน ุชุทูุฑ ุงููุดุฑูุน ุ ุณุชุจุฏู ุฃุดูุงุก ูุซูุฑุฉ ูุจูุญุฉ ูุถุฎูุฉ ูุบูุฑ ูุนุงูุฉ ุจุงููุณุจุฉ ูู ููุง ุดุงุจู ุฐูู - ูุง ุชุชุฑุฏุฏ ูู ุชุบููุฑูุง ุ ูุฃู ุฅุนุงุฏุฉ ุงูุชุฌููุฒ ูู ุจูุฆุฉ ุชุทููุฑ ูุชูุงููุฉ ุญุฏูุซุฉ ุชุนุฏ ุนูููุฉ ุฑุฎูุตุฉ ููุบุงูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุฃูุถุง ุฅูุดุงุก ูุฆุฉ ูุน ูุธููุฉ</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญู ุนูู ุงุณุชุนุฏุงุฏ ูุฅูุฌุงุฒุงุช ูุจูุฑุฉ. ููููู ุงุณุชุฎุฏุงู IDE ููุณู ูุจุฏุก ุชุดุบููู ุ ูููู ููุง ุณุชุฑู ูุงุญููุง ุ ูุฐู ุงูุทุฑููุฉ ุบูุฑ ููุงุณุจุฉ ูุฃุบุฑุงุถูุง (ูุญุฏุฉ ุงูุชุญูู IDE ุงูููุงุณูุฉ ุบูุฑ ูุงุฏุฑุฉ ุนูู ุนุฑุถ ุงููุชุงุฆุฌ ุงูุฑุณูููุฉ ููุง ููุจุบู) ุ ูุฐูู ุณูููู ุจุชููุฆุฉ ุงูุฅุทูุงู ูู ุงูุฎุงุฑุฌ ุจุงุณุชุฎุฏุงู ุงูุฏููุนุงุช (ุฃู shell ุนูู ุฃูุธูุฉ UNIX) ุงูููู. ูููู ูุจู ุฐูู ุ ุณูููู ุจุนูู ุจุนุถ ุงูุฅุนุฏุงุฏุงุช ุงูุฅุถุงููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุชูุงู ุงูุนูููุฉ ุ </font></font><code>mvn package</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู ุฅุฎุฑุงุฌ ุฃุฑุดูู JAR ูุน ุฌููุน ุงููุฆุงุช ุงููุชุฑุฌูุฉ. ุฃููุงู ุ ุจุดูู ุงูุชุฑุงุถู ุ ูุง ูุดุชูู ูุฐุง ุงูุฃุฑุดูู ุนูู ุงูุชุจุนูุงุช ุงูุถุฑูุฑูุฉ ูููุดุฑูุน ููู ูุนูู (ุญุชู ุงูุขู ููุณ ูุฏููุงูุง ุ ููููุง ุณุชุธูุฑ ุจุงูุชุฃููุฏ ูู ุงููุณุชูุจู). ุซุงููุงู ุ ูู ูุชู ุชุญุฏูุฏ ุงููุณุงุฑ ุฅูู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชุญุชูู ุนูู ุงูุทุฑููุฉ ูู ููู ุจูุงู ุงูุฃุฑุดูู </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐุง ุงุจุฏุฃ ุงููุดุฑูุน ุจุงูุฃูุฑ</font></font><code>java -jar dice-1.0.jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชูุฌุญ ูุนูุง. </font><font style="vertical-align: inherit;">ุฅุตูุงุญ ูุฐุง ุนู ุทุฑูู ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ ุฅูู </font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-assembly-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>single<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span>jar-with-dependencies<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span>my.company.dice.MainKt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจู ุฅูู ุงุณู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ุฅูู ูุธุงุฆู Kotlin ุงูููุฌูุฏุฉ ุฎุงุฑุฌ ุงููุฆุงุช (ูุซู ุงููุธุงุฆู ุ ุนูู ุณุจูู ุงููุซุงู </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุง ุชุฒุงู ูุชู ุฅูุดุงุก ุงููุฆุงุช ุฃุซูุงุก ุงูุชุฑุฌูุฉ (ูุฃู JVM ูุง ุชุนุฑู ุดูุฆูุง ููุง ุชุฑูุฏ ุฃู ุชุนุฑู). </font><font style="vertical-align: inherit;">ุงุณู ูุฐู ุงููุฆุฉ ูู ุงุณู ุงูููู ูุน ุงูุฅุถุงูุฉ </font></font><code>Kt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุฐุง ูู ุ ุฅุฐุง ููุช ุจุชุณููุฉ ุงููุฆุฉ ุงูุฑุฆูุณูุฉ </font></font><code>Main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูุชู ุชุฌููุนูุง ูู ููู </font></font><code>MainKt.class</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูุฃุฎูุฑ ุงูุฐู ูุฌุจ ุฃู ูุดูุฑ ูู ุจูุงู ููู ุงูุฌุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุนูุฏ ุจูุงุก ุงููุดุฑูุน ุ ุณูุญุตู ุนูู ูููู ุฌุฑุฉ: </font></font><code>dice-1.0.jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>dice-1.0-jar-with-dependencies.jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญู ููุชููู ุจุงูุซุงูู. </font><font style="vertical-align: inherit;">ุณููุชุจ ุงููุตู ุฅุทูุงู ูุฐูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dice.bat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููุธุงู ุงูุชุดุบูู Windows)</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">ECHO</span></span> OFF <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span> Compiling <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\Dice\pom.xml" package <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">errorlevel</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Project compilation failed! &amp; <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span> &amp; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :EOF <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span> Running java -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dice.sh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูู UNIX)</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # Compiling mvn -f "path_to_project/Dice/pom.xml" package if [[ "$?" -ne 0 ]] ; then echo 'Project compilation failed!'; exit $rc fi # Running java -jar path_to_project/Dice/target/dice-1.0-jar-with-dependencies.jar</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃูู ูู ุญุงูุฉ ูุดู ุงูุชุญููู ุงูุจุฑูุฌู ุ ุณูุถุทุฑ ุฅูู ููุงุทุนุฉ ุงูุจุฑูุงูุฌ ุงููุตู. </font><font style="vertical-align: inherit;">ูุฅูุง ุ ููู ูุชู ุชุดุบูู ุงูููุซุงุฑุฉ ุงูุฃุฎูุฑุฉ ุ ูููู ุงูููู ุงููุชุจูู ูู ุงูุชุฌููุน ุงููุงุฌุญ ุงูุณุงุจู (ุฃุญูุงููุง ูู ูุฌุฏ ุงููุฑู). </font><font style="vertical-align: inherit;">ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุณุชุฎุฏู ุงููุทูุฑูู ุงูุฃูุฑ </font></font><code>mvn clean package</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฐู ุฌููุน ุงููููุงุช ุงููุชุฑุฌูุฉ ูุณุจููุง ุ ูููู ูู ูุฐู ุงูุญุงูุฉ ุณุชุจุฏุฃ ุนูููุฉ ุงูุชุฑุฌูุฉ ุงููุงููุฉ ุฏุงุฆููุง ูู ุงูุจุฏุงูุฉ (ุญุชู ูู ูู ูุชุบูุฑ ุงูููุฏ ุงููุตุฏุฑู) ุ ุงูุฃูุฑ ุงูุฐู ุณูุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช. </font><font style="vertical-align: inherit;">ููู ูุง ูููููุง ุงูุงูุชุธุงุฑ - ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุนุจุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุ ูุฅู ุงููุดุฑูุน ูุจุฏุฃ ุจุดูู ุฌูุฏ ุ ูููู ุญุชู ุงูุขู ูุง ููุนู ุดูุฆูุง. </font><font style="vertical-align: inherit;">ูุง ุชููู ุ ูุฅููุง ุณูู ุฅุตูุงุญู ูุฑูุจุง.</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุณุงุฏุณุฉ </font><font style="vertical-align: inherit;">ุงูุฃุดูุงุก ุงูุฑุฆูุณูุฉ</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฏุฑูุฌูุง ุ ุณูุจุฏุฃ ูู ููุก ุงูุญุฒูุฉ ูุน </font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฆุงุช ุงููุงุฒูุฉ ููุนุจ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทุท ุงูุทุจูุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/lv/de/4t/lvde4t7282puwgyjgl6qrooazka.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุจุงุช ูู ูู ุดูุก ูุฏููุง ุ ุฅุถุงูุชูุง ุฃููุง. </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชููุฒ </font><font style="vertical-align: inherit;">ูู ููุนุจ (ูุซูู ูุฆุฉ </font><font style="vertical-align: inherit;">) ุจููุน (ุงูููู) ูุงูุญุฌู. ุจุงููุณุจุฉ ูุฃููุงุน ุงูููุนุจ </font></font><code>Die.Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุณูููู ุจุฅุนุฏุงุฏ </font><font style="vertical-align: inherit;">ุชุนุฏุงุฏ ูููุตู ( </font><font style="vertical-align: inherit;">) ุ ููุถุน ุนูุงูุฉ ุนูู ุงูุญุฌู ุจุงุณุชุฎุฏุงู ุนุฏุฏ ุตุญูุญ ูู 4 ุฅูู 12. ูุทุจู ุฃูุถูุง ุทุฑููุฉ </font></font><code>roll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชุฌ ุฑูููุง ุชุนุณูููุง ูููุฒุนูุง ุจุดูู ููุชุธู ูู ุงููุทุงู ุงููุชุงุญ ููููุนุจ (ูู 1 ุฅูู ูููุฉ ุงูุญุฌู ุดุงููุฉ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุจู ุงููุตู ุงููุงุฌูุฉ </font></font><code>Comparable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูููู ููุงุฑูุฉ ุงูููุนุจุงุช ูุน ุจุนุถูุง ุงูุจุนุถ (ูููุฏ ูุงุญููุง ุนูุฏูุง ูุนุฑุถ ุนุฏุฉ ููุนุจุงุช ูู ุตู ูุฑุชุจ). ุณูุชู ูุถุน ููุนุจุงุช ุฃูุจุฑ ูู ููุช ุณุงุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Die</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) : Comparable&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ PHYSICAL, <span class="hljs-comment"><span class="hljs-comment">//Blue SOMATIC, //Green MENTAL, //Purple VERBAL, //Yellow DIVINE, //Cyan WOUND, //Gray ENEMY, //Red VILLAIN, //Orange OBSTACLE, //Brown ALLY //White } fun roll() = (1.. size).random() override fun toString() = "d$size" override fun compareTo(other: Die): Int { return compareValuesBy(this, other, Die::type, { -it.size }) } }</span></span></code> </pre><br>   ,     (  <code>Bag</code> ).  ,    ,   ,      .  .  (sets)     ,      . -,       <code>equals()</code>  <code>hashCode()</code> ,    ,         โ         . -,    ,      - ,  ,   .        ()          (  <code>put()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุฃู ูุจุงุดุฑุฉ ูุจู ุงูุฅุตุฏุงุฑ (ูู ุงูุทุฑููุฉ </font></font><code>draw()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูุทุฑููุฉ </font></font><code>examine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุณุจุฉ ููุญุงูุงุช ุงูุชู ูุชุฎูุต ูููุง ุงููุงุนุจ ุงูุฐู ุณุฆู ูู ุญุงูุฉ ุนุฏู ุงููููู ูู ูุญุชููุงุช ุงูููุณ ูู ุงููููุจ ุนูู ุงูุทุงููุฉ (ุงูุชุจู ุฅูู ุงููุฑุฒ) ุ ูุงูุทุฑููุฉ </font></font><code>clear()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฅุฐุง ูู ุชุนุฏ ุงูููุนุจุงุช ุงูููุชุฒุฉ ุฅูู ุงูููุณ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bag</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dice = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = dice.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vararg</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dice: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { dice.forEach(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dice::addLast) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dice.shuffle() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Die = dice.pollFirst() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = dice.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = dice.sorted().toList() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃููุงุณ ูุน ููุนุจุงุช ุ ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุฃููุงู ูุน ููุนุจุงุช (ูุซููุงุช ุงููุฆุฉ </font></font><code>Pile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">ูู ุงูุฃููู ุ ุชุฎุชูู ุงูุซุงููุฉ ูู ุฃู ูุญุชููุงุชูุง ูุฑุฆูุฉ ููุงุนุจูู ุ ูุจุงูุชุงูู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูู ุจุฅุฒุงูุฉ ููุนุจ ูู ุงููููุฉ ุ ูููู ููุงุนุจ ุชุญุฏูุฏ ูุซูู ูุนูู ูู ุงูุงูุชูุงู. </font><font style="vertical-align: inherit;">ูุญู ูุฏุฑู ูุฐู ุงูููุฑุฉ ูู ุฎูุงู ุงูุทุฑููุฉ </font></font><code>removeDie()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pile</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bag</span></span></span></span>() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = dice.remove(die) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูู ุงูุขู ุฅูู ุดุฎุตูุงุชูุง ุงูุฑุฆูุณูุฉ - ุงูุฃุจุทุงู. ููุฐุง ูู ุ ุงูุดุฎุตูุงุช ุงูุชู ุณูู ูุณูููุง ุงูุขู ุงูุฃุจุทุงู (ููุงู ุณุจุจ ูุฌูู ูุนุฏู ุชุณููุฉ ูุตูู ุจุงุณู </font></font><code>Character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Java). ููุงู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุดุฎุตูุงุช (ููุถุนูุง ูู ูุตูู ุ ุนูู ุงูุฑุบู ูู ุฃูู ูู </font></font><code>class</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุถู ุนุฏู ุงุณุชุฎุฏุงู </font><font style="vertical-align: inherit;">ุงููููุฉ </font><font style="vertical-align: inherit;">) ุ ููู ุจุงููุณุจุฉ ููููุฐุฌ ุงูุนูู ุงูุฃููู ุงูุฎุงุต ุจูุง ุ ุณูู ูุฃุฎุฐ ุญุงูุชูู ููุท: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brawler</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุฃู ุ Fighter ูุน ุงูุชุฑููุฒ ุนูู ุงูููุฉ ูุงูููุฉ) ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hunter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุงููููุจ Ranger / Thief ุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุจุฑุงุนุฉ ูุงูุดุจุญ). ุชุญุฏุฏ ูุฆุฉ ุงูุจุทู ุฎุตุงุฆุตู ูููุงุฑุงุชู ููุฌููุนุฉ ุงูููุนุจุงุช ุงูุฃูููุฉ ุ ูููู ููุง ุณูุธูุฑ ูุงุญููุง ุ ูู ูุชู ุฑุจุท ุงูุฃุจุทุงู ุจุดูู ุตุงุฑู ุจุงูุตููู ุ ูุจุงูุชุงูู ูููู ุชุบููุฑ ุฅุนุฏุงุฏุงุชูู ุงูุดุฎุตูุฉ ุจุณูููุฉ ูู ููุงู ูุงุญุฏ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุถูู ุงูุฎุตุงุฆุต ุงูุถุฑูุฑูุฉ ููุจุทู ููููุง ููุซููุฉ ุงูุชุตููู: ุงูุงุณู ุ ุงูููุน ุงูููุถู ูู ุงูููุนุจ ุ ุญุฏูุฏ ุงูููุนุจ ุ ุงูููุงุฑุงุช ุงูููุชุณุจุฉ ูุบูุฑ ุงููุฏุฑูุณุฉ ุ ุงููุฏ ุ ุงูููุณ ูุงููููุฉ ูุฅุนุงุฏุฉ ุงูุชุนููู. ุฅููุงุก ุงูุงูุชูุงู ูููุฒุงุช ุชูููุฐ ุฎุตุงุฆุต ุงููุฌููุนุฉ. ูู ุงูุนุงูู ุงููุชุญุถุฑ ุจุฃุณุฑู ุ ููุนุชุจุฑ ุชูููุฑ ูุณููุฉ ุงููุตูู ุฅูู ุงูุฎุงุฑุฌ (ุจูุณุงุนุฏุฉ ุฃุฏุงุฉ ุชุฌููุน) ุดูููุง ุณูุฆูุง ูููุฌููุนุงุช ุงููุฎุฒูุฉ ุฏุงุฎู ุงููุงุฆู - ุญูุซ ุณูููู ุงููุจุฑูุฌูู ุนุฏููู ุงูุถููุฑ ูุงุฏุฑูู ุนูู ุชุบููุฑ ูุญุชููุงุช ูุฐู ุงููุฌููุนุงุช ุฏูู ุนูู ุงููุฆุฉ. ุฅุญุฏู ุทุฑู ุงูุชุนุงูู ูุน ุฐูู ูู ุชุทุจูู ุทุฑู ูููุตูุฉ ูุฅุถุงูุฉ ุงูุนูุงุตุฑ ูุฅุฒุงูุชูุง ุ ูุงูุญุตูู ุนูู ุนุฏุฏูุง ูุงููุตูู ุฅูููุง ูู ุฎูุงู ุงูููุฑุณ. ููููู ุชุทุจูู getter ุ ููู ูู ููุณ ุงูููุช ูุง ุชุฑุฌุน ุงููุฌููุนุฉ ููุณูุง ุ ูููู ูุณุฎุชูุง ุงูุซุงุจุชุฉ - ุจุงููุณุจุฉ ูุนุฏุฏ ูููู ูู ุงูุนูุงุตุฑ ุ ููุณ ูู ุงููุฎูู ุฌุฏูุง ุงูููุงู ุจุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hero</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ BRAWLER HUNTER } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> favoredDieType: Die.Type = Die.Type.ALLY <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hand = Hand(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bag: Bag = Bag() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> discardPile: Pile = Pile() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> diceLimits = mutableListOf&lt;DiceLimit&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> skills = mutableListOf&lt;Skill&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = mutableListOf&lt;Skill&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDiceLimit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiceLimit</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = diceLimits.add(limit) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceLimits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;DiceLimit&gt; = Collections.unmodifiableList(diceLimits) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = skills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Skill&gt; = Collections.unmodifiableList(skills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDormantSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = dormantSkills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDormantSkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Skill&gt; = Collections.unmodifiableList(dormantSkills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increaseDiceLimit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { diceLimits.find { it.type == type }?.let { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { it.current &lt; it.maximal -&gt; it.current++ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Already at maximum"</span></span>) } } ?: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Incorrect type specified"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hideDieFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { bag.put(die) hand.removeDie(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">discardDieFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { discardPile.put(die) hand.removeDie(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = skills.any { it.type == type } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">improveSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { dormantSkills .find { it.type == type } ?.let { skills.add(it) dormantSkills.remove(it) } skills .find { it.type == type } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { it.level &lt; it.maxLevel -&gt; it.level += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Skill already maxed out"</span></span>) } } ?: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Skill not found"</span></span>) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุตู ูุฏ ุงูุจุทู (ุงูููุนุจุงุช ุงูุชู ูุฏูู ูู ุงูููุช ุงูุญุงูู) ุจูุงุฆู ูููุตู (ูุฆุฉ </font></font><code>Hand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ูุงู ูุฑุงุฑ ุงูุชุตููู ุจุฅุจูุงุก ุงูููุนุจุงุช ุงููุชุญุงููุฉ ูููุตูุฉ ุนู ุงูุฐุฑุงุน ุงูุฑุฆูุณู ุฃุญุฏ ุฃูุงุฆู ุงููุฑุงุฑุงุช ุงูุชู ุชุชุจุงุฏุฑ ุฅูู ุงูุฐูู. ูู ุงูุจุฏุงูุฉ ุ ุจุฏุง ุงูุฃูุฑ ููุฃูู ููุฒุฉ ุฑุงุฆุนุฉ ุ ููููุง ุฃุญุฏุซุช ูู ููุช ูุงุญู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงููุดุงูู ูุงูุฅุฒุนุงุฌ. ููุน ุฐูู ุ ูุญู ูุง ูุจุญุซ ุนู ุทุฑู ุณููุฉ ุ ูุจุงูุชุงูู ุงูููุงุฆู </font></font><code>dice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>allies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญู ูู ุฎุฏูุงุชูุง ุ ูุน ูู ุงูุทุฑู ุงููุงุฒูุฉ ูุฅุถุงูุฉ ูุชููู ูุญุฐู (ุจุนุถูุง ุจุฐูุงุก ุชุญุฏูุฏ ุฃู ูู ุงููุงุฆูุชูู ููุชุทุจูู). ุนูุฏูุง ุชุฒูู ููุนุจูุง ูู ูุฏู ุ ุณุชูุชูู ุฌููุน ุงูููุนุจุงุช ุงููุงุญูุฉ ุฅูู ุฃุนูู ุงููุงุฆูุฉ ุ ูุชููุฃ ุงููุฑุงุบุงุช - ูู ุงููุณุชูุจู ุณูู ูุณูู ูุฐุง ุงูุจุญุซ ุฅูู ุญุฏ ูุจูุฑ (ูุง ุญุงุฌุฉ ููุชุนุงูู ูุน ุงูููุงูู </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hand</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> capacity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dice = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allies = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = dice.size <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyDieCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = allies.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dieAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until dieCount) -&gt; dice[index] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allyDieAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until allyDieCount) -&gt; allies[index] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { die.type == Die.Type.ALLY -&gt; allies.addLast(die) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.addLast(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { die.type == Die.Type.ALLY -&gt; allies.remove(die) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.remove(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findDieOfType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Die? = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { Die.Type.ALLY -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (allies.isNotEmpty()) allies.first <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.firstOrNull { it.type == type } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Die&gt; = (dice + allies).sorted() }</code> </pre><br><font style="vertical-align: inherit;"></font><code>DiceLimit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏุฏ ูุฌููุนุฉ </font><font style="vertical-align: inherit;">ูุงุฆูุงุช ุงููุตู </font><font style="vertical-align: inherit;">ุญุฏูุฏ ุนุฏุฏ ููุนุจุงุช ูู ููุน ูููู ุฃู ูููู ููุจุทู ูู ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ ุงููุตู. </font><font style="vertical-align: inherit;">ูุง ููุฌุฏ ุดูุก ุฎุงุต ููููู ุ ูุญู ูุญุฏุฏ ูู ุงูุจุฏุงูุฉ ุ ุงูุญุฏ ุงูุฃูุตู ูุงูููู ุงูุญุงููุฉ ููู ููุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceLimit</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initial: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maximal: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> current: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุจุงูููุงุฑุงุช ูููู ุงูุฃูุฑ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. </font><font style="vertical-align: inherit;">ุณูุชุนูู ุชูููุฐ ูู ูููุง ุนูู ุญุฏุฉ (ุญูู ุฐูู ูุงุญููุง) ุ ููููุง ุณููุธุฑ ูู ุงุซููู ููุท: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shoot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุงุญุฏ ููู ูุฆุฉ ุ ุนูู ุงูุชูุงูู). </font><font style="vertical-align: inherit;">ูููู ุชุทููุฑ ุงูููุงุฑุงุช ("ุถุฎ") ูู ุงููุณุชูู ุงูุฃููู ุฅูู ุงููุณุชูู ุงูุฃูุตู ุ ููุง ูุคุซุฑ ุบุงูุจูุง ุนูู ุงููุนุฏูุงุช ุงูุชู ุชุถุงู ุฅูู ููุงุฆู ุงููุฑุฏ. </font><font style="vertical-align: inherit;">ูุนูุณ ูุฐุง ูู ุงูุฎุตุงุฆุต </font></font><code>level</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>maxLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>modifier1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>modifier2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Skill</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Brawler HIT, //Hunter SHOOT, } var level = 1 var maxLevel = 3 var isActive = true var modifier1 = 0 var modifier2 = 0 }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจู ููุทุฑู ุงููุณุงุนุฏุฉ ูููุตู </font></font><code>Hero</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุชุณูุญ ูู ุจุฅุฎูุงุก ุฃู ููุช ูุฑูุฉ ูู ูุฏู ุ ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุจุทู ูุฏูู ููุงุฑุฉ ูุนููุฉ ุ ูุฃูุถูุง ุฒูุงุฏุฉ ูุณุชูู ุงูููุงุฑุฉ ุงููุณุชูุงุฏุฉ ุฃู ุชุนูู ููุงุฑุฉ ุฌุฏูุฏุฉ. ุณุชููู ููุงู ุญุงุฌุฉ ุฅูููุง ุฌููุนูุง ุนุงุฌูุงู ุฃู ุขุฌูุงู ุ ููู ุงูุขู ูู ูุชุทุฑู ุฅูููุง ุจุงูุชูุตูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุถูู ูุง ุชุฎุงููุง ูู ุนุฏุฏ ุงููุตูู ุงูุชู ูุฌุจ ุฃู ููุดุฆูุง. ููุดุฑูุน ูู ูุฐุง ุงูุชุนููุฏ ุ ุนุฏุฉ ูุฆุงุช ูู ุดูุก ุดุงุฆุน. ููุง ุ ููุง ูู ุงูุญุงู ูู ุฃู ุงุญุชูุงู ุฌุฏู - ูุจุฏุฃ ุตุบูุฑุฉ ุ ููุฒูุฏ ุชุฏุฑูุฌูุงู ูู ุงูุณุฑุนุฉ ุ ูู ุดูุฑ ูุฑุนูุจูู ูู ุงููุทุงู. ูุง ุชูุณ ุ ููุญู ูุง ูุฒุงู ุฃุณุชูุฏูู ุตุบูุฑ ูุดุฎุต ูุงุญุฏ - ูุง ููุงุฌู ููุงู ุณุงุญูุฉ. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ููุฏ ูุฑุถูู ุดูุก ูุง. ุณุฃุฐูุจ ูุชุฏุฎูู ุฃู ุดูุก ... "</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูู ูุณุชูุฑ.</font></font><br>     ,      โ     .   ,      . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/bq/7k/iq/bq7kiq7fcsqbhrf61f9g1bh-9e8.png"></a> <br></div></div><br>          :  ( <code>Villain</code> ),  ( <code>Enemy</code> )   ( <code>Obstacle</code> ),     ยซยป ( <code>Threat</code> โ  ยซยป ,      ).       ( <code>Trait</code> ),               . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Threat</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits = mutableListOf&lt;Trait&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTrait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">trait</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Trait</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = traits.add(<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getTraits</span></span></span></span>(): List&lt;Trait&gt; = traits } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obstacle</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes: Die.Type) : Threat() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Villain</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Threat</span></span></span></span>() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enemy</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Threat</span></span></span></span>() <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Trait</span></span></span><span class="hljs-class"> </span></span>{ MODIFIER_PLUS_ONE, <span class="hljs-comment"><span class="hljs-comment">//Add +1 modifier MODIFIER_PLUS_TWO, //Add +2 modifier }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃูู ูุชู </font></font><code>Trait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฑูู </font><font style="vertical-align: inherit;">ูุงุฆูุฉ ูุงุฆูุงุช ุงููุฆุฉ </font><font style="vertical-align: inherit;">ุนูู ุฃููุง ูุงุจูุฉ ููุชุบููุฑ ( </font></font><code>MutableList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูููู ูุชู ุชูุฏูููุง ููุฎุงุฑุฌ ููุงุฌูุฉ ุซุงุจุชุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุณูุนูู ูู Kotlin ุ ุฅูุง ุฃู ูุฐุง ุงูุฃุณููุจ ุบูุฑ ุขูู ุ ุญูุซ ูุง ููุฌุฏ ุดูุก ูููุน ุชุญููู ุงููุงุฆูุฉ ุงููุงุชุฌุฉ ุฅูู ูุงุฌูุฉ ูุงุจูุฉ ููุชุบููุฑ ูุฅุฌุฑุงุก ุชุนุฏููุงุช ูุชููุนุฉ - ูู ุงูุณูู ุงูููุงู ุจุฐูู ุจุดูู ุฎุงุต ุฅุฐุง ููุช ุจุงููุตูู ุฅูู ุงููุฆุฉ ูู ููุฏ Java (ุญูุซ ุชููู ุงููุงุฌูุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุจูุฉ ููุชุบููุฑ). ุงูุทุฑููุฉ ุงูุฃูุซุฑ ุญูุงูุฉ ูุญูุงูุฉ ูุฌููุนุชู ูู ุงูููุงู ุจุดูุก ูู ูุฐุง ุงููุจูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTraits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Trait&gt; = Collections.unmodifiableList(traits)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ูู ูููู ุฏููููู ููุบุงูุฉ ูู ุชูุงูู ุงููุถูุฉ (ููุน ุฐูู ุ ูุชู ุชุญุฐูุฑู). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฎุตุงุฆุต ูููุงูููุง ุงูุฃูุนุงุจ ุ </font></font><code>Obstacle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุชูู </font><font style="vertical-align: inherit;">ุงููุตู ุงูุฏุฑุงุณู </font><font style="vertical-align: inherit;">ุนู ูุธุฑุงุฆู ุจุณุจุจ ูุฌูุฏ ุญููู ุฅุถุงููุฉ ุ ููููุง ูู ูุฑูุฒ ุนูููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฏูุฌ ุจุทุงูุงุช ุงูุชูุฏูุฏ (ูุฅุฐุง ููุช ุชูุฑุฃ ุจุนูุงูุฉ ูุซููุฉ ุงูุชุตููู ุ ุซู ุชุฐูุฑ ุฃู ูุฐู ุจุทุงูุงุช) ูู ุงูุทูุงุจู ุงูุชู ููุซููุง ุงููุตู </font></font><code>Deck</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Deck</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">E: Threat</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cards = LinkedList&lt;E&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = cards.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addToTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(card: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">E</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = cards.addFirst(card) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addToBottom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(card: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">E</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = cards.addLast(card) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">revealTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: E = cards.first <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawFromTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: E = cards.removeFirst() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.shuffle() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.toList() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููุฌุฏ ุดูุก ุบูุฑ ุนุงุฏู ููุง ุ ูููุง ุนุฏุง ุฃู ุงููุฆุฉ ูู ูุนููุงุช ูุชุญุชูู ุนูู ูุงุฆูุฉ ูุฑุชุจุฉ (ุฃู ุจุงูุฃุญุฑู ูุงุฆูุฉ ุงูุชุธุงุฑ ุซูุงุฆูุฉ ุงูุงุชุฌุงู) ุ ูุงูุชู ูููู ุฎูุทูุง ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ. ุณุชููู ููุงู ุญุงุฌุฉ ุฅูู ุทูุงุจู ูู ุงูุฃุนุฏุงุก ูุงูุนูุจุงุช ุจุงููุณุจุฉ ููุง ุญุฑูููุง ูู ุซุงููุฉ ุ ุนูุฏูุง ููุถู ูู ุงููุธุฑ ูู ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... ูุฆุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูู ุญุงูุฉ ูููุง ุชุตู ูุฌุงููุง ูุฑูุฏูุง ูุชุนูู ุนูู ุฃุจุทุงููุง ุฒูุงุฑุชู ูู ุงูุณููุงุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Location</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> closingDifficulty = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bag: Bag <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> villain: Villain? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enemies: Deck&lt;Enemy&gt; <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obstacles: Deck&lt;Obstacle&gt; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = mutableListOf&lt;SpecialRule&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSpecialRule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rule: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SpecialRule</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = specialRules.add(rule) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSpecialRules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = specialRules }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุทูุฉ ููุง ุงุณู ููุตู ูุตุนูุจุฉ ุงูุฅุบูุงู ูุนูุงูุฉ "ูุชุญ / ุฅุบูุงู". ูู ููุงู ูุง ููุง ุ ูุฏ ูููู ุงูุดุฑูุฑ ูุงูููุง (ุฃู ูุฏ ูุง ูููู ูุงูููุง ุ ููุชูุฌุฉ ูุฐูู </font></font><code>villain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ูุฃุฎุฐ </font><font style="vertical-align: inherit;">ุงูุนูุงุฑ </font><font style="vertical-align: inherit;">ูููุฉ </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ูู ูู ููุทูุฉ ุชูุฌุฏ ุญููุจุฉ ุจูุง ููุนุจุงุช ููุฌููุนุฉ ุฃูุฑุงู ุจูุง ุชูุฏูุฏุงุช. ุฃูุถูุง ุ ูุฏ ูููู ููููุทูุฉ ููุฒุงุช ุฃูุนุงุจ ูุฑูุฏุฉ ุฎุงุตุฉ ุจูุง ( </font></font><code>SpecialRule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุงูุชู ุ ูุซู ุฎุตุงุฆุต ุงูุชูุฏูุฏุงุช ุ ุชุถูู ูุฌููุนุฉ ูุชููุนุฉ ุฅูู ุทุฑููุฉ ุงููุนุจ. ููุง ุชุฑูู ุ ูุญู ูุถุน ุงูุฃุณุงุณ ููุธุงุฆู ุงููุณุชูุจู ุ ุญุชู ูู ูู ูุฎุทุท ูุชูููุฐูุง ูู ุงููุณุชูุจู ุงููุฑูุจ (ูุงูุชู ูู ุงููุงูุน ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุฑุญูุฉ ุงูููุฐุฌุฉ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูุจูู ุชูููุฐ ุงูุจุฑุงูุฌ ุงููุตูุฉ (ุงููุฆุฉ </font></font><code>Scenario</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scenario</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> initialTimer = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allySkills = mutableListOf&lt;AllySkill&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = mutableListOf&lt;SpecialRule&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAllySkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AllySkill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allySkills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllySkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;AllySkill&gt; = Collections.unmodifiableList(allySkills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSpecialRule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rule: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SpecialRule</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = specialRules.add(rule) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSpecialRules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;SpecialRule&gt; = Collections.unmodifiableList(specialRules) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชููุฒ ูู ุณููุงุฑูู ุจูุณุชูู ุงููููุช ููููุชู ุงูุฃูููุฉ. ุนูู ุบุฑุงุฑ ูุง ุฑุฃููุง ุณุงุจููุง ุ </font></font><code>specialRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุนููู </font><font style="vertical-align: inherit;">ููุงุนุฏ ุฎุงุตุฉ ( </font><font style="vertical-align: inherit;">) ูููุงุฑุงุช ุงูุญููุงุก (ุณูููุฏูุง). ูุฏ ุชุนุชูุฏ ุฃู ุงูุจุฑูุงูุฌ ุงููุตู ูุฌุจ ุฃู ูุญุชูู ุฃูุถูุง ุนูู ูุงุฆูุฉ ุจุงูููุงูุน (ูุงุฆูุงุช ูุฆุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ููุฐุง ููุทูู ุชูุงููุง ุญุณุจ ููุทู ุงูุฃุดูุงุก. ูููู ููุง ุณูุฑู ูุงุญููุง ุ ูู ูุณุชุฎุฏู ูุซู ูุฐุง ุงูุงุชุตุงู ูู ุฃู ููุงู ููุง ููุฏู ุฃู ููุฒุฉ ุชูููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฐูุฑูู ุจุฃู ุฌููุน ุงููุฆุงุช ุงูุชู ุชู ุงุณุชุนุฑุงุถูุง ูุณุจููุง ููุฌูุฏุฉ ูู ุงูุญุฒูุฉ</font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ููุญู ูุทูู ุ ุชุญุณุจุงู ููุนุฑูุฉ ูุนุจุฉ ููุญููุฉ ุ ูุถุนูุง ุงูุฌููุฏ ุนูู ุณุทุญ ุงูุทุงููุฉ. </font><font style="vertical-align: inherit;">ูุงูุขู ุ ุจุนุฏ ุจุถุน ูุญุธุงุช ูุคููุฉ ุ ูู ุฅุดุงุฑุฉ ูู ุงููุงุฆุฏ ุงูุนุงู ุ ุณูู ููุฏูุน ุฅูู ุงููุนุฑูุฉ ุ ููุฌูุน ุฃูุนุงุจูุง ูุนูุง ููุณุชูุชุน ุจุนูุงูุจ ุงููุนุจ. </font><font style="vertical-align: inherit;">ูููู ูุจู ุฐูู ุ ููููุง ุนู ุงูุชุฑุชูุจ ููุณู. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุญุณูุง ุณูู ..."</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุณุงุจุนุฉ. </font><font style="vertical-align: inherit;">ุงูุฃููุงุท ูุงููููุฏุงุช</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ูุชุฎูู ูุซุงููุฉ ูุงุญุฏุฉ ูุง ูู ุนูููุฉ ุฅูุดุงุก ุฃู ูู ุงููุงุฆูุงุช ุงูุชู ุณุจู ุงููุธุฑ ูููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงููููุน (ุงูุชุถุงุฑูุณ). ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุซูู ูููุฆุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุชููุฆุฉ ุญููููุง ุจุงูููู ุ ูููุฐุง ููู ููุงู ููุฏ ุงุณุชุฎุฏุงูู ูู ุงููุนุจุฉ. ููู ุงูุชุธุฑ: ูุฌุจ ุฃู ูููู ููู ูููุน ุญููุจุฉ ุ ูุงูุชู ูุฌุจ ุฃูุถูุง ุฅูุดุงุคูุง. ูุงูุญูุงุฆุจ ููุง ููุนุจุงุช - ูุฐู ุฃูุถูุง ูุซููุงุช ูููุฆุฉ ุงูููุงุจูุฉ ( </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ูุฐุง ูุง ุฃุชุญุฏุซ ุนู ุงูุฃุนุฏุงุก ูุงูุนูุจุงุช - ูุญุชุงุฌูู ุนููููุง ุฅูู ุฌูุนูุง ุนูู ุงูุทูุงุจู. ูุงูุดุฑูุฑ ูุง ูุญุฏุฏ ุงูุชุถุงุฑูุณ ููุณูุง ุ ูููู ููุงูุญ ุงูุณููุงุฑูู ุชูุน ุฃุนูู ูุณุชูู ูุงุญุฏ. ุญุณูุง ุ ุฃูุช ุชุญุตู ุนูู ูุฐู ุงูููุทุฉ. ูุฏ ุชุจุฏู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ููุง ูุฑุฏ ุฃุนูุงู ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> location = Location().apply { name = <span class="hljs-string"><span class="hljs-string">"Some location"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> isOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span> closingDifficulty = <span class="hljs-number"><span class="hljs-number">4</span></span> bag = Bag().apply { put(Die(Die.Type.PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.ENEMY, <span class="hljs-number"><span class="hljs-number">6</span></span>)) put(Die(Die.Type.OBSTACLE, <span class="hljs-number"><span class="hljs-number">6</span></span>)) put(Die(Die.Type.VILLAIN, <span class="hljs-number"><span class="hljs-number">6</span></span>)) } villain = Villain().apply { name = <span class="hljs-string"><span class="hljs-string">"Some villain"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> addTrait(Trait.MODIFIER_PLUS_ONE) } enemies = Deck&lt;Enemy&gt;().apply { addToTop(Enemy().apply { name = <span class="hljs-string"><span class="hljs-string">"Some enemy"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> }) addToTop(Enemy().apply { name = <span class="hljs-string"><span class="hljs-string">"Other enemy"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> }) shuffle() } obstacles = Deck&lt;Obstacle&gt;().apply { addToTop(Obstacle(<span class="hljs-number"><span class="hljs-number">1</span></span>, Die.Type.PHYSICAL, Die.Type.VERBAL).apply { name = <span class="hljs-string"><span class="hljs-string">"Some obstacle"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some Description"</span></span> }) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุฃูุถูุง ุจูุถู ูุบุฉ Kotlin ูุชุตููููุง </font></font><code>apply{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูู Java ุ ุณูููู ุงูููุฏ ูุจูุฑูุง ุฌุฏูุง. ุนูุงูุฉ ุนูู ุฐูู ุ ุณูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู ุ ููุง ูููุง ุ ูุฅูู ุฌุงูุจูุง ุ ููุงู ุฃูุถูุง ุณููุงุฑูููุงุช ููุบุงูุฑุงุช ูุฃุจุทุงู ุจููุงุฑุงุชูู ูุฎุตุงุฆุตูู - ุจุดูู ุนุงู ุ ููุงู ุดูุก ููุนูู ูุตูู ุงููุนุจุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุตูู ุงููุนุจุฉ ูู ููุชุจ ุฑูุฒูุง ุ ููู ุบูุฑ ุงูููุงุณุจ ุจุงููุณุจุฉ ููุง ุฅุนุงุฏุฉ ุชุฑุฌูุฉ ุงููุดุฑูุน ุจุฃูู ุชุบููุฑ ูู ุนุงูู ุงููุนุจุฉ. </font><font style="vertical-align: inherit;">ููุง ุ ุณูู ูุนุชุฑุถ ุฃู ูุจุฑูุฌ ูุฎุชุต ุนูู ุถุฑูุฑุฉ ูุตู ุฃูุตุงู ุงููุงุฆูุงุช ูู ุฑูุฒ ุงููุตู - ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุจุญูุซ ูุชู ุฅูุดุงุก ูุซููุงุช ูุฐุง ุงูุฃุฎูุฑ ุฏููุงูููููุง ุงุณุชูุงุฏูุง ุฅูู ุงูุฃูู ุญุณุจ ุงูุถุฑูุฑุฉ ุ ุนูู ุบุฑุงุฑ ุงูุทุฑููุฉ ุงูุชู ูุชู ุจูุง ุฅูุดุงุก ุฌุฒุก ูู ูุตูุน ุฑุณู. </font><font style="vertical-align: inherit;">ูููู ุฃูุถูุง ุจุชูููุฐ ูุซู ูุฐู ุงูุฑุณููุงุช ุ ููุทูู ุนูููุง ููุท ููุงูุจ ูููุซููุง ูุญุงูุงุช ููุฆุฉ ุฎุงุตุฉ. </font><font style="vertical-align: inherit;">ุจูุฌูุฏ ูุซู ูุฐู ุงูุฃููุงุท ุ ูููู ุฑูุฒ ุจุฑูุงูุฌ ุฎุงุต (ููุดุฆ) ุจุฅูุดุงุก ุงููุงุฆูุงุช ุงูููุงุฆูุฉ ูู ุงููููุฐุฌ ุงูููุตูู ูุณุจููุง.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุฉ ุฅูุดุงุก ูุงุฆู ูู ูุงูุจ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/lj/cn/hb/ljcnhbcwls0jogmaxfbncrek6gc.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูุฌุจ ุชุนุฑูู ููุงููู ุฌุฏูุฏูู ููู ูุฆุฉ ูู ุงููุงุฆูุงุช: ูุงุฌูุฉ ุงููุงูุจ ููุฆุฉ ุงููููุฏ. </font><font style="vertical-align: inherit;">ููุธุฑูุง ูุชุฑุงูู ูููุฉ ููุงุณุจุฉ ูู ุงููุงุฆูุงุช ุ ูุณูููู ููุงู ุฃูุถูุง ุนุฏุฏ ูู ุงูููุงูุงุช ... ุบูุฑ ูุงุฆู:</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทุท ุงูุทุจูุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ef/hu/4k/efhu4kgepx97_87cnpis8ranl0c.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฌู ุงูุชููุณ ุฃุนูู ุ ูุงูุงุณุชูุงุน ุจุนูุงูุฉ ูุนุฏู ุชุดุชูุช ุงูุชุจุงูู. ุฃููุงู ุ ูุง ููุธูุฑ ุงูุฑุณู ุงูุชุฎุทูุทู ุฌููุน ุงููุงุฆูุงุช ุงูููุฌูุฏุฉ ูู ุนุงูู ุงููุนุจุฉ ุ ูููู ููุท ุงููุงุฆูุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ูุง ููููู ุงูุงุณุชุบูุงุก ุนููุง ูู ุงูุจุฏุงูุฉ. ุซุงููุงู ุ ูู ุฃุฌู ุนุฏู ุฒูุงุฏุฉ ุชุญููู ุงูุฏุงุฆุฑุฉ ุจุชูุงุตูู ุบูุฑ ุถุฑูุฑูุฉ ุ ุชู ุญุฐู ุจุนุถ ุงูุงุชุตุงูุงุช ุงูุชู ุณุจู ุฐูุฑูุง ูู ูุฎุทุทุงุช ุฃุฎุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุดูุก ุจุณูุท - ุชูููุฏ ููุนุจุงุช. "ูููุ - ุฃูุช ุชููู. - ูู ูุญู ูุง ูููู ุงูุจูุงุกุ ูุนู ุ ูุฐุง ูู ุงูููุน ูุงูุญุฌู. " ูุง ุ ุณุฃุฌูุจ ุ ูุง ูููู. ูู ุงููุงูุน ุ ูู ูุซูุฑ ูู ุงูุญุงูุงุช (ุงูุฑุฃ ุงูููุงุนุฏ) ุ ูุฌุจ ุฅูุดุงุก ููุนุจุงุช ุจุดูู ุชุนุณูู ุจูุจูุบ ุชุนุณูู (ุนูู ุณุจูู ุงููุซุงู: "ูู ููุนุจ ุฅูู ุซูุงุซุฉ ููุนุจุงุช ูู ุงูููู ุงูุฃุฒุฑู ุฃู ุงูุฃุฎุถุฑ"). ุนูุงูุฉ ุนูู ุฐูู ุ ููุจุบู ุงุฎุชูุงุฑ ุงูุญุฌู ุญุณุจ ูุณุชูู ุชุนููุฏ ุงูุจุฑูุงูุฌ ุงููุตู. ูุฐูู ุ ููุฏู ูุงุฌูุฉ ุฎุงุตุฉ </font></font><code>DieTypeFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieTypeFilter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ุงูุชุทุจููุงุช ุงููุฎุชููุฉ ููุฐู ุงููุงุฌูุฉ ุจุงูุชุญูู ููุง ุฅุฐุง ูุงู ููุน ุงูููุนุจ ูุชูุงูู ูุน ูุฌููุนุงุช ูุฎุชููุฉ ูู ุงูููุงุนุฏ (ุฃู ุชูู ุงูุชู ุชุชุจุงุฏุฑ ุฅูู ุงูุฐูู ููุท). </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุง ุฅุฐุง ูุงู ุงูููุน ูุชูุงูู ูุน ูููุฉ ูุญุฏุฏุฉ ุจุฏูุฉ ("ุฃุฒุฑู") ุฃู ูุทุงู ูู ุงูููู ("ุฃุฒุฑู ุฃู ุฃุตูุฑ ุฃู ุฃุฎุถุฑ") ุ </font><font style="vertical-align: inherit;">ุฃู ุ ุนูู ุงูุนูุณ ุ ูุชูุงูู ูุน ุฃู ููุน ุขุฎุฑ ุบูุฑ ุงูููุน ุงููุนุทู ("ุฅุฐุง ูู ููู ุฃุจูุถูุง ุนูู ุฃู ุญุงู" - ุฃู ุดูุก ุ ูููุณ ุฐูู ููุท). </font><font style="vertical-align: inherit;">ุญุชู ูู ูู ููู ูุงุถุญูุง ูุณุจููุง ูุง ูู ุงูุชุทุจููุงุช ุงููุญุฏุฏุฉ ุงููุทููุจุฉ ุ ูุง ููู - ูููู ุฅุถุงูุชูุง ูุงุญููุง ุ ูู ูููุตู ุงููุธุงู ุนู ูุฐุง (ุชุนุฏุฏ ุงูุฃุดูุงู ุ ุชุฐูุฑุ).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type == type) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvertedSingleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type != type) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MultipleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvertedMultipleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (type !<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุฃูุถูุง ุชุนููู ุญุฌู ุงูููุนุจ ุจุดูู ุชุนุณูู ุ ูููู ุณูุชู ุชุญุฏูุฏ ุญุฌูู ูุงุญููุง. </font><font style="vertical-align: inherit;">ูู ุบุถูู ุฐูู ุ ุณูููู ุจูุชุงุจุฉ ูููุฏ ููุนุจุงุช ( </font></font><code>DieGenerator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ุนูู ุนูุณ ูููุดุฆ ุงููุตู </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูู ููุจู ููุน ูุญุฌู ุงูููุนุจ ุงูุตุฑูุญ ุ ูููู ุนุงูู ุงูุชุตููุฉ ููุณุชูู ุงูุชุนููุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL1 = intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL2 = intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL3 = intArrayOf(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTIONS = arrayOf( intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>), DISTRIBUTION_LEVEL1, DISTRIBUTION_LEVEL2, DISTRIBUTION_LEVEL3 ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMaxLevel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = DISTRIBUTIONS.size - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Die(generateDieType(filter), generateDieSize(level)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDieType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Die.Type { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> type: Die.Type <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { type = Die.Type.values().random() } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!filter.test(type)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> type } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDieSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = DISTRIBUTIONS[<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (level &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> || level &gt; getMaxLevel()) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> level].random()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Java ุ ุณุชููู ูุฐู ุงูุทุฑู ุซุงุจุชุฉ ุ ููู ุจูุง ุฃููุง ูุชุนุงูู ูุน Kotlin ุ ููุญู ูุง ูุญุชุงุฌ ุฅูู ุงููุตู ุนูู ูุฐุง ุงููุญู ุ ููุฐุง ุตุญูุญ ุฃูุถูุง ุจุงููุณุจุฉ ูููููุฏุงุช ุงูุฃุฎุฑู ุงูุชู ุชูุช ููุงูุดุชูุง ุฃุฏูุงู (ููุน ุฐูู ุ ุนูู ุงููุณุชูู ุงูููุทูู ุ ุณูุธู ูุณุชุฎุฏู ููููู ุงููุฆุฉ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฏ ุทุฑููุชุงู ุฎุงุตุชุงู ุจุดูู ูููุตู ููุน ุงูููุนุจ ูุญุฌูู - ูููู ููู ุดูุก ูุซูุฑ ููุงูุชูุงู ุญูู ูู ููููุง. </font></font><code>generateDieType()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูุฌูู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุฅูู ุญููุฉ ูุง ููุงุฆูุฉ ุจุชูุฑูุฑ ูุฑุดุญ ุฅุฏุฎุงู ุจู</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงููุชุงุจ ูุฏููู ุงุนุชูุงุฏ ููู ุจุฃูู ูููู ูููุฑุก ุงูุฎุฑูุฌ ูู ุงูุชูุงูุถุงุช ุงูููุทููุฉ ูุฑุณู ุงูุซุบุฑุงุช ุฅุฐุง ูุงูุช ุงูุดุฎุตูุงุช ููุณูุง ุชูุฌููู ุฅูู ุงูุฌูููุฑ ุฎูุงู ุงููุตุฉ). </font></font><code>generateDieSize()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุดุฆ </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุญุฌููุง ุนุดูุงุฆููุง ุฒุงุฆููุง ุงุณุชูุงุฏูุง ุฅูู ุงูุชูุฒูุน ุงููุญุฏุฏ ูู ุดูู ุตููู (ูุงุญุฏ ููู ูุณุชูู). ุนูุฏูุง ุฃุซุฑู ูู ุณู ุงูุดูุฎูุฎุฉ ูุฃุดุชุฑู ููุณู ุญุฒูุฉ ูู ููุนุจุงุช ุงููุนุจ ูุชุนุฏุฏุฉ ุงูุฃููุงู ุ ูู ุฃุชููู ูู ูุนุจ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุฏ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฃููู ูุง ุฃุนุฑู ููู ุฃุญุตู ุนูู ุญููุจุฉ ูููู ุจุดูู ุนุดูุงุฆู (ุจุงุณุชุซูุงุก ุฃู ุฃุณุฃู ุฃุญุฏ ุงูุฌูุฑุงู ุ ูุฃูุง ุดุฎุตูุงู ุฃุฏุฑ ุธูุฑู ูู ูุฐุง ุงูููุช). ูุฐู ููุณุช ูุฌููุนุฉ ุฃูุฑุงู ูููู ุชุบููุฑูุง ุฑุฃุณูุง ุนูู ุนูุจ ุ ููู ุชุชุทูุจ ุขููุงุช ูุฃุฌูุฒุฉ ุฎุงุตุฉ. ุฅุฐุง ูุงู ูุฏู ุดุฎุต ูุง ุฃููุงุฑ (ููุงู ูุฏูู ุงูุตุจุฑ ููุฑุงุกุฉ ูุฐุง ุงูููุงู) ุ ููุฑุฌู ูุดุงุฑูุฉ ุงูุชุนูููุงุช.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุง ุฃููุง ูุชุญุฏุซ ุนู ุงูุญูุงุฆุจ ุ ุณูููู ุจุชุทููุฑ ูุงูุจ ููู. </font><font style="vertical-align: inherit;">ุจุฎูุงู ุฒููุงุฆู ุ ุณูููู ูุฐุง ุงููุงูุจ ( </font></font><code>BagTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูุฆุฉ ูุนููุฉ. </font><font style="vertical-align: inherit;">ูุญุชูู ุนูู ููุงูุจ ุฃุฎุฑู - ูุตู ูู ูููุง ุงูููุงุนุฏ (ุฃู </font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุงูุชู ูุถุงู ุจูุง ููุนุจ ูุงุญุฏ ุฃู ุฃูุซุฑ (ุชุฐูุฑ ุงููุชุทูุจุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง ูู ููุช ุณุงุจูุ)</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BagTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Plan</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> minQuantity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxQuantity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> filter: DieTypeFilter) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> plans = mutableListOf&lt;Plan&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addPlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(minQuantity: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, maxQuantity: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { plans.add(Plan(minQuantity, maxQuantity, filter)) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏุฏ ูู ุฎุทุฉ ููุทูุง ูููุน ุงูููุนุจุงุช ุ ููุฐูู ุนุฏุฏ (ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู) ููููุนุจุงุช ุงูุชู ุชูุจู ูุฐุง ุงูููุท. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุงูููุฌ ุ ููููู ุฅูุดุงุก ุฃููุงุณ ููููุง ููููุงุนุฏ ุงูุบุฑูุจุฉ (ูุฃูุง ุฃุจูู ูุฑุฉ ุฃุฎุฑู ุจูุฑุงุฑุฉ ุนูู ุงูุดูุฎูุฎุฉ ุ ูุฃู ุฌุงุฑู ูุฑูุถ ุจุดุฏุฉ ูุณุงุนุฏุชู). </font><font style="vertical-align: inherit;">ุดูุก ูุซู ูุฐุง:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">realizePlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(plan: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">BagTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Plan</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Array&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> count = (plan.minQuantity..plan.maxQuantity).shuffled().last() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>..count).map { generateDie(plan.filter, level) }.toTypedArray() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateBag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">BagTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Bag { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> template.plans.asSequence() .map { realizePlan(it, level) } .fold(Bag()) { b, d -&gt; b.put(*d); b } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชุนุจุช ูุซูู ุชูุงููุง ูู ูู ูุฐู ุงููุธููุฉ ุ ุงุฑุจุท ููุณู - ุณุชุฒุฏุงุฏ ุงูุฃููุฑ ุณูุกูุง. ูููู ุจุนุฏ ุฐูู ุ ุนูู ุนูุณ ุงูุนุฏูุฏ ูู ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ ุบูุฑ ุงููุงุถุญุฉ ุนูู ุงูุฅูุชุฑูุช ุ ูุฏููุง ุงููุฑุตุฉ ูุฏุฑุงุณุฉ ุงุณุชุฎุฏุงู ุงูุฃุณุงููุจ ุงูุฐููุฉ ุงููุฎุชููุฉ ูููุง ูุชุนูู ุจูุฌุงู ููุถูุน ุญูููู ููููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุฏ ุฐุงุชูุง ุ ูู ุชููู ุงูุฃููุงุณ ูููุงุฉ ุนูู ุงูุฃุฑุถ - ุชุญุชุงุฌ ุฅูู ุฅุนุทุงุฆูุง ููุฃุจุทุงู ูุงูููุงูุน. ููุจุฏุฃ ุจุงูุฃุฎูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocationTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bagTemplate: BagTemplate <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> basicClosingDifficulty: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardsCount: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardsCount: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool: Collection&lt;EnemyTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool: Collection&lt;ObstacleTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules: List&lt;SpecialRule&gt; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุบุฉ Kotlin ุ ุจุฏูุงู ูู ุงูุฃุณุงููุจ ุ </font></font><code>get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ุฎุตุงุฆุต ุงููุงุฌูุฉ - ููุฐุง ุฃูุซุฑ ุฅูุฌุงุฒูุง. ูุญู ุจุงููุนู ุนูู ุฏุฑุงูุฉ ูุงูุจ ุงูุญููุจุฉ ุ ูุงููุธุฑ ูู ุงูุฃุณุงููุจ ุงููุชุจููุฉ. ุณูููู ุงูุนูุงุฑ </font></font><code>basicClosingDifficulty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุนููู ุงูุชุนููุฏ ุงูุฃุณุงุณู ูุนูููุฉ ุงูุชุญูู ูุฅุบูุงู ุงูุชุถุงุฑูุณ. ูููุฉ "ุฃุณุงุณู" ููุง ุชุนูู ููุท ุฃู ุงูุชุนููุฏ ุงูููุงุฆู ุณูุนุชูุฏ ุนูู ูุณุชูู ุงูุณููุงุฑูู ูุบูุฑ ูุงุถุญ ูู ูุฐู ุงููุฑุญูุฉ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุฃููุงุท ููุฃุนุฏุงุก ูุงูุนูุจุงุช (ูุงูุฃุดุฑุงุฑ ูู ููุณ ุงูููุช). ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุจูู ูุฌููุนุฉ ูุชููุนุฉ ูู ุงูุฃุนุฏุงุก ูุงูุนูุจุงุช ุงูููุถุญุฉ ูู ุงููุงูุจ ุ ูู ูุชู ุงุณุชุฎุฏุงู ุงููู ุ ูููู ููุท ุนุฏุฏ ูุญุฏูุฏ (ูุฒูุงุฏุฉ ูููุฉ ุฅุนุงุฏุฉ ุงูุชุดุบูู). ูุฑุฌู ููุงุญุธุฉ ุฃู ุงูููุงุนุฏ ุงูุฎุงุตุฉ ( </font></font><code>SpecialRule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููููุทูุฉ ูุชู ุชูููุฐูุง ูู ุฎูุงู ุชุนุฏุงุฏ ุจุณูุท ( </font></font><code>enum class</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุจุงูุชุงูู ูุง ุชุชุทูุจ ูููุฐุฌูุง ูููุตูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnemyTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObstacleTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes: Array&lt;Die.Type&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VillainTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุณูุงุญ ูููููุฏ ุจุฅูุดุงุก ูุงุฆูุงุช ูุฑุฏูุฉ ูุญุณุจ ุ ุจู ุฃูุถูุง ุฅูุดุงุก ุทูุงุจู ูุงููุฉ ูุนูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateVillain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">VillainTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Villain().apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Enemy().apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateObstacle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ObstacleTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Obstacle(template.tier, *template.dieTypes).apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemyDeck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(types: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Collection</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Deck&lt;Enemy&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deck = types .map { generateEnemy(it) } .shuffled() .fold(Deck&lt;Enemy&gt;()) { d, c -&gt; d.addToTop(c); d } limit?.let { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (deck.size &gt; it) deck.drawFromTop() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deck } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateObstacleDeck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(templates: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Collection</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ObstacleTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Deck&lt;Obstacle&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deck = templates .map { generateObstacle(it) } .shuffled() .fold(Deck&lt;Obstacle&gt;()) { d, c -&gt; d.addToTop(c); d } limit?.let { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (deck.size &gt; it) deck.drawFromTop() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deck }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ููุงู ุจุทุงูุงุช ูู ุงููุฌููุนุฉ ุฃูุซุฑ ููุง ูุญุชุงุฌ (ูุนููุฉ </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุณูููู ุจุฅุฒุงูุชูุง ูู ููุงู. </font><font style="vertical-align: inherit;">ูุชููู ูุงุฏุฑูุง ุนูู ุฅูุดุงุก ุฃููุงุณ ูุน ููุนุจุงุช ูุญุฒู ูู ุงูุจุทุงูุงุช ุ ูููููุง ุฃุฎูุฑูุง ุฅูุดุงุก ุงูุชุถุงุฑูุณ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LocationTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Location().apply { name = template.name description = template.description bag = generateBag(template.bagTemplate, level) closingDifficulty = template.basicClosingDifficulty + level * <span class="hljs-number"><span class="hljs-number">2</span></span> enemies = generateEnemyDeck(template.enemyCardPool, template.enemyCardsCount) obstacles = generateObstacleDeck(template.obstacleCardPool, template.obstacleCardsCount) template.specialRules.forEach { addSpecialRule(it) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ุ ุณุชุธูุฑ ุงูุชุถุงุฑูุณ ุงูุชู ูููุง ุจุชุนููููุง ุจุดูู ุตุฑูุญ ูู ุงูููุฏ ูู ุจุฏุงูุฉ ุงููุตู ูุธุฑุฉ ูุฎุชููุฉ ุชูุงููุง: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeLocationTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LocationTemplate { override val name = "Some location" override val description = "Some description" override val bagTemplate = BagTemplate</span></span></span></span>().apply { addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SingleDieTypeFilter(Die.Type.PHYSICAL)) addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SingleDieTypeFilter(Die.Type.SOMATIC)) addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.MENTAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, MultipleDieTypeFilter(Die.Type.ENEMY, Die.Type.OBSTACLE)) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> basicClosingDifficulty = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardsCount = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardsCount = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool = listOf( SomeEnemyTemplate(), OtherEnemyTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool = listOf( SomeObstacleTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = emptyList&lt;SpecialRule&gt;() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeEnemyTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Some enemy" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OtherEnemyTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Other enemy" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeObstacleTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ObstacleTemplate { override val name = "Some obstacle" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes = arrayOf( Die.Type.PHYSICAL, Die.Type.VERBAL ) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> location = generateLocation(SomeLocationTemplate(), <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูุญุฏุซ ุชูููุฏ ุงูุณููุงุฑูู ุจุทุฑููุฉ ููุงุซูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScenarioTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialTimer: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> staticLocations: List&lt;LocationTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dynamicLocationsPool: List&lt;LocationTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> villains: List&lt;VillainTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules: List&lt;SpecialRule&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateDynamicLocationsCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(numberOfHeroes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = numberOfHeroes + <span class="hljs-number"><span class="hljs-number">2</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ููููุงุนุฏ ุ ูุนุชูุฏ ุนุฏุฏ ุงูููุงูุน ุงูุชู ูุชู ุฅูุดุงุคูุง ุฏููุงูููููุง ุนูู ุนุฏุฏ ุงูุฃุจุทุงู. </font><font style="vertical-align: inherit;">ุชุญุฏุฏ ุงููุงุฌูุฉ ูุธููุฉ ุญุณุงุจูุฉ ููุงุณูุฉ ุ ูุงูุชู ุ ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ูููู ุฅุนุงุฏุฉ ุชุนุฑูููุง ูู ุชุทุจููุงุช ูุญุฏุฏุฉ. </font><font style="vertical-align: inherit;">ูููุง ูุชุนูู ุจูุฐุง ุงููุทูุจ ุ ุณููุดุฆ ูููุดุฆ ุงูุณููุงุฑูู ุฃูุถูุง ุชุถุงุฑูุณ ููุฐู ุงูุณููุงุฑูููุงุช - ูู ููุณ ุงูููุงู ุณูุชู ุชูุฒูุน ุงูุฃุดุฑุงุฑ ุจุดูู ุนุดูุงุฆู ุจูู ุงูููุงูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateScenario</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ScenarioTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Scenario().apply { name =template.name description = template.description <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.level = level initialTimer = template.initialTimer template.specialRules.forEach { addSpecialRule(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateLocations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ScenarioTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, numberOfHeroes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;Location&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations = template.staticLocations.map { generateLocation(it, level) } + template.dynamicLocationsPool .map { generateLocation(it, level) } .shuffled() .take(template.calculateDynamicLocationsCount(numberOfHeroes)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> villains = template.villains .map(::generateVillain) .shuffled() locations.forEachIndexed { index, location -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (index &lt; villains.size) { location.villain = villains[index] location.bag.put(generateDie(SingleDieTypeFilter(Die.Type.VILLAIN), level)) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> locations }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุนุชุฑุถ ุงูุนุฏูุฏ ูู ุงููุฑุงุก ุงูููุชููู ุนูู ุถุฑูุฑุฉ ุชุฎุฒูู ุงูููุงูุจ ููุณ ูู ุงูููุฏ ุงููุตุฏุฑู ูููุฆุงุช ุ ูููู ูู ุจุนุถ ุงููููุงุช ุงููุตูุฉ (ุงูุจุฑุงูุฌ ุงููุตูุฉ) ุญุชู ูููู ูุชูู ุงูุจุนูุฏุฉ ุนู ุงูุจุฑูุฌุฉ ุฅูุดุงุคูุง ูุตูุงูุชูุง. </font><font style="vertical-align: inherit;">ุฃูุงูู ุ ุฃุฎูุน ูุจุนุชู ุ ููููู ูุง ุฃูุซุฑ ุฑูุงุฏูุง ุนูู ุฑุฃุณู - ูุฃู ุฃุญุฏููุง ูุง ูุชุนุงุฑุถ ูุน ุงูุขุฎุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุฃุฑุฏุช ุ ููุท ุญุฏุฏ ุชุทุจูููุง ุฎุงุตูุง ูููุงูุจ ุ ูุณูุชู ุชุญููู ููู ุงูุฎุตุงุฆุต ุงูุฎุงุตุฉ ุจู ูู ููู ุฎุงุฑุฌู. </font><font style="vertical-align: inherit;">ูู ุชุบูุฑ ุนูููุฉ ุงูุชูููุฏ ุฐุฑุฉ ูุงุญุฏุฉ ูู ูุฐุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุณููุง ุ ูุจุฏู ุฃููู ูู ููุณูุง ุดูุฆูุง ... ุฃูู ูุนู ุ ุงูุฃุจุทุงู - ูุฌุจ ุฃูุถูุง ุฅูุดุงุกูู ุ ููุง ูุนูู ุฃููู ุจุญุงุฌุฉ ุฃูุถูุง ุฅูู ููุงูุจ ุฎุงุตุฉ ุจูู. </font><font style="vertical-align: inherit;">ุฅููู ุจุนุถ ุ ุนูู ุณุจูู ุงููุซุงู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Hero.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialHandCapacity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> favoredDieType: Die.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialDice: Collection&lt;Die&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills: List&lt;SkillTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills: List&lt;SkillTemplate&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Pair&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;? }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุงูููุฑ ููุงุญุธ ุงุซููู ูู ุงูุดุฐูุฐ. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูุง ูุณุชุฎุฏู ุงูููุงูุจ ูุฅูุดุงุก ุฃููุงุณ ูููุนุจุงุช ูููุง.</font></font> ููุงุฐุงุ       ()       โ      . -, <code>getDiceCount()</code> โ      ??? ,    <code>DiceLimit</code> ,    .         ,     .    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BrawlerHeroTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HeroTemplate { override val type = Hero.Type.BRAWLER override val favoredDieType = PHYSICAL override val initialHandCapacity = 4 override val initialDice = listOf</span></span></span></span>( Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { PHYSICAL -&gt; <span class="hljs-number"><span class="hljs-number">8</span></span> to <span class="hljs-number"><span class="hljs-number">12</span></span> SOMATIC -&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> to <span class="hljs-number"><span class="hljs-number">7</span></span> MENTAL -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">2</span></span> VERBAL -&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> to <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills = listOf( HitSkillTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = listOf&lt;SkillTemplate&gt;() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HunterHeroTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HeroTemplate { override val type = Hero.Type.HUNTER override val favoredDieType = SOMATIC override val initialHandCapacity = 5 override val initialDice = listOf</span></span></span></span>( Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { PHYSICAL -&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> to <span class="hljs-number"><span class="hljs-number">5</span></span> SOMATIC -&gt; <span class="hljs-number"><span class="hljs-number">7</span></span> to <span class="hljs-number"><span class="hljs-number">11</span></span> MENTAL -&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> to <span class="hljs-number"><span class="hljs-number">7</span></span> VERBAL -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills = listOf( ShootSkillTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = listOf&lt;SkillTemplate&gt;() }</code> </pre><br>     ,    . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SkillTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Skill.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxLevel: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> modifier1: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> modifier2: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> isActive <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HitSkillTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SkillTemplate { override val type = Skill.Type.HIT override val maxLevel = 3 override val modifier1 = +1 override val modifier2 = +3 } class ShootSkillTemplate : SkillTemplate { override val type = Skill.Type.SHOOT override val maxLevel = 3 override val modifier1 = +0 override val modifier2 = +2 }</span></span></span></span></code> </pre><br>  ,     ,    ,   .       ,       โ       . ,     ,      .     ,  . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SkillTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, initialLevel: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Skill { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> skill = Skill(template.type) skill.isActive = template.isActive skill.level = initialLevel skill.maxLevel = template.maxLevel skill.modifier1 = template.modifier1 skill.modifier2 = template.modifier2 <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skill } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateHero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">, name: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Hero { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { BRAWLER -&gt; BrawlerHeroTemplate() HUNTER -&gt; HunterHeroTemplate() } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hero = Hero(type) hero.name = name hero.isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> hero.favoredDieType = template.favoredDieType hero.hand.capacity = template.initialHandCapacity template.initialDice.forEach { hero.bag.put(it) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ((t, l) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Die.Type.values().map { it to template.getDiceCount(it) }) { l?.let { hero.addDiceLimit(DiceLimit(t, it.first, it.second, it.first)) } } template.initialSkills .map { generateSkill(it) } .forEach { hero.addSkill(it) } template.dormantSkills .map { generateSkill(it, <span class="hljs-number"><span class="hljs-number">0</span></span>) } .forEach { hero.addDormantSkill(it) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hero }</code> </pre><br>      . -,           . -,      (         ). -, Kotlin      ,      .      . <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"> .  </font> </h2><br> -      โ   .  -,  ยซ ยป.          ,     .     , โฆ      (   ),     . , . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/up/tm/6t/uptm6t8obpw80m3_cr1i6b9q62e.png"></a> <br></div></div><br>  ,         ,    .      ,   (       )      .      (,       ) โ    ?     ,     -  . ,      โ ,    .       ,       ,  .       ,     ,    .     .     โ    ,     ,    (  โ ,   โ    <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุญูุงู). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูุฅู ุฃูู ุดูุก ูุนูู ูู ุชุญุฏูุฏ ุงูุฃุดูุงุก ุงูุชู ูุญุชุงุฌูุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุจุทุงู. ุงูุณููุงุฑูู. ุงููููุน.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฏ ุงุณุชุนุฑุถูุง ุจุงููุนู ุนูููุฉ ุฅูุดุงุฆูุง - ูู ููุฑุฑูุง. ููุงุญุธ ููุท ููุท ุงูุชุถุงุฑูุณ ุงูุฐู ุณูุณุชุฎุฏูู ูู ูุซุงููุง ุงูุตุบูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestLocationTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LocationTemplate { override val name = "Test" override val description = "Some Description" override val basicClosingDifficulty = 0 override val enemyCardsCount = 0 override val obstacleCardsCount = 0 override val bagTemplate = BagTemplate</span></span></span></span>().apply { addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.PHYSICAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.SOMATIC)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.MENTAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.VERBAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.DIVINE)) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool = emptyList&lt;EnemyTemplate&gt;() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool = emptyList&lt;ObstacleTemplate&gt;() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = emptyList&lt;SpecialRule&gt;() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุชุฑูู ุ ูู ุงูุญููุจุฉ ููุณุช ุณูู ููุนุจุงุช "ุฅูุฌุงุจูุฉ" - ุงูุฃุฒุฑู ูุงูุฃุฎุถุฑ ูุงูุฃุฑุฌูุงูู ูุงูุฃุตูุฑ ูุงูุฃุฒุฑู. ูุง ุชูุฌุฏ ุฃุนุฏุงุก ูุงูุนูุจุงุช ูู ุงูููุทูุฉ ุ ูุงูุฃูุบุงุฏ ูุงูุฌุฑูุญ ุบูุฑ ููุฌูุฏุฉ. ูุง ุชูุฌุฏ ููุงุนุฏ ุฎุงุตุฉ ุฃูุถูุง - ุชูููุฐูุง ุซุงููู ุฌุฏูุง. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ ููููุนุจุงุช ุงููุญุชุฌุฒุฉ.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ูููุฉ ุฑุงุฏุน. ูุธุฑูุง ูุฃููุง ูุถุน ุงูููุนุจุงุช ุงูุฒุฑูุงุก ูู ููุณ ุงูุชุถุงุฑูุณ ุ ููููู ุงุณุชุฎุฏุงููุง ูู ุงููุญูุตุงุช ูุจุนุฏ ุงูุงุณุชุฎุฏุงู ุ ูุชูุถุน ูู ูููุฉ ุฎุงุตุฉ. ูุซูู ุงููุฆุฉ ูููุฏ ููุฐุง </font></font><code>Pile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏูุงุช.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฐุง ูู ุ ุงูููู ุงูุนุฏุฏูุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุฅุถุงูุชูุง ุฃู ุทุฑุญูุง ูู ูุชูุฌุฉ ููุฉ ูููุช. ููููู ุชุทุจูู ูุนุฏูู ุนูููู ุฃู ูุนุฏูู ูููุตู ููู ููุนุจ. ุณูุฎุชุงุฑ ุงูุฎูุงุฑ ุงูุซุงูู (ุจุดูู ุฃูุซุฑ ูุถูุญูุง) ุ ูุจุงูุชุงูู ุณูููู ุจุฅูุดุงุก ูุตู ุจุณูุท </font></font><code>DiePair</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiePair</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> die: Die, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> modifier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุน ุงูุดุฎุตูุงุช ูู ุงูููุทูุฉ.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุทุฑููุฉ ุฌูุฏุฉ ุ ูุฌุจ ุชุชุจุน ูุฐู ุงููุญุธุฉ ุจุงุณุชุฎุฏุงู ูููู ุฎุงุต. ุนูู ุณุจูู ุงููุซุงู ุ ุฎุฑุงุฆุท ุงููููุฐุฌ </font></font><code>Map&lt;Location, List&lt;Hero&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุซ ุณุชุญุชูู ูู ููุทูุฉ ุนูู ูุงุฆูุฉ ุจุงูุฃุจุทุงู ุงูููุฌูุฏูู ูููุง ุญุงูููุง (ุจุงูุฅุถุงูุฉ ุฅูู ุทุฑููุฉ ููุนูุณ - ุชุญุฏูุฏ ุงูููุงู ุงูุฐู ููุฌุฏ ุจู ุจุทู ูุนูู). ุฅุฐุง ูุฑุฑุช ุงูุณูุฑ ูู ูุฐุง ุงูุทุฑููุ ูุง ุชูุณ ุฃู ุชุถูู ูุฆุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจููุงุช ุทุฑููุฉ </font></font><code>equals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>hashCode()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฃูู ุฃู ูุง ุชุญุชุงุฌ ุฅูู ุดุฑุญ ููุงุฐุง. ูู ูุถูุน ุงูููุช ูู ูุฐุง ุ ูุฃู ุงูููุทูุฉ ูุงุญุฏุฉ ููุท ูุงูุฃุจุทุงู ูุง ูุชุฑููููุง ูู ุฃู ููุงู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญูู ูู ุฃูุฏู ุงูุจุทู.</font></font></b> <br>         (  ),      ,   ( ),  ,    (,  /,  ),       (,     )        .     ,       ,  ,        .      <code>HandFilter</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandFilter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hand: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hand</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃุฎุฐ ุชุทุจููุงุช ุงููุงุฌูุฉ ูุฏ ุงูุจุทู (ูุงุฆู ูุฆุฉ </font></font><code>Hand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ููุฏุฎู </font><font style="vertical-align: inherit;">ูุฅุฑุฌุงุน </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุง </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุนุชูุงุฏูุง ุนูู ูุชุงุฆุฌ ุงููุญุต. ุจุงููุณุจุฉ ูุดุธุชูุง ูู ุงููุนุจุฉ ุ ูุญุชุงุฌ ุฅูู ุชุทุจูู ูุงุญุฏ: ูู ุญุงูุฉ ููุงุฌูุฉ ููุนุจ ุฃุฒุฑู ุฃู ุฃุฎุถุฑ ุฃู โโุจููุณุฌู ุฃู ุฃุตูุฑ ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ูุฏ ุงูุจุทู ุชุญุชูู ุนูู ููุนุจ ูู ููุณ ุงูููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingleDieHandFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type) : HandFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hand: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hand</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount).mapNotNull { hand.dieAt(it) }.any { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types } || (Die.Type.ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types &amp;&amp; hand.allyDieCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br> ,  . <br><br> <b>/ .</b> <br> ,   ,       , ,        ( ),        . -,   ()   (     ). -,  -   .       <code>HandMask</code> , ,  ,     (  )       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandMask</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> positions = mutableSetOf&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyPositions = mutableSetOf&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> positionCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = positions.size <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyPositionCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = allyPositions.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = positions.add(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removePosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = positions.remove(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allyPositions.add(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allyPositions.remove(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> positions <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> allyPositions <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!removePosition(position)) { addPosition(position) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!removeAllyPosition(position)) { addAllyPosition(position) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { positions.clear() allyPositions.clear() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุณุจู ุฃู ููุช ููู ุฃุนุงูู ูู ููุฑุฉ "ุนุจูุฑูุฉ" ูุชุฎุฒูู ููุนุจุงุช ุจูุถุงุก ูู ูุฏ ูููุตูุฉุ ุจุณุจุจ ูุฐุง ุงูุบุจุงุก ุ ุนููู ุงูุชุนุงูู ูุน ูุฌููุนุชูู ูุชูุฑุงุฑ ูู ุทุฑููุฉ ูู ุงูุทุฑู ุงูููุฏูุฉ. ุฅุฐุง ูุงู ูุฏู ุดุฎุต ูุง ุฃููุงุฑ ุญูู ููููุฉ ุชุจุณูุท ุชูููุฐ ูุฐุง ุงููุทูุจ (ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุฎุฏู ูุฌููุนุฉ ูุงุญุฏุฉ ุ ูููู ุจุงููุณุจุฉ ููููุนุจุงุช ุงูุจูุถุงุก ุ ุชุจุฏุฃ ุงููุคุดุฑุงุช ุจูุฆุฉ - ุฃู ุฃู ุดูุก ุขุฎุฑ ุบุงูุถ ุนูู ุญุฏ ุณูุงุก) - ูุดุงุฑูุชูุง ูู ุงูุชุนูููุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููุงุณุจุฉ ุ ูุฌุจ ุชุทุจูู ูุฆุฉ ููุงุซูุฉ ูุชุญุฏูุฏ ููุนุจุงุช ูู heap ( </font></font><code>PileMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูููู ูุฐู ุงููุธููุฉ ุฎุงุฑุฌ ูุทุงู ูุฐุง ุงููุซุงู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชูุงุฑ ููุนุจุงุช ูู ุงููุฏ.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุง ูููู "ุชุณููุท ุงูุถูุก" ุนูู ุงูููุงูู ุงูููุจููุฉ ุ ูู ุงูููู ุชุบููุฑ ูุฐุง "ุงูุชูููุฒ" ูู ุนูููุฉ ุงุฎุชูุงุฑ ุงูููุนุจุงุช. ุฃู ุฃูู ุฅุฐุง ุทููุจ ูู ุงููุงุนุจ ุฃุฎุฐ ูููุช ูุงุญุฏ ููุท ูู ูุฏู ุ ูุนูุฏ ุงุฎุชูุงุฑ ูุฐุง ุงูููุช ุ ูุฌุจ ุฃู ูุชุนุฐุฑ ุงููุตูู ุฅูู ุฌููุน ุงูููุงุตุจ ุงูุฃุฎุฑู. ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูุถุฑูุฑู ูู ูู ูุฑุญูุฉ ุงูุชุญูู ูู ุชุญููู ุงููุงุนุจ ูููุฏู - ุฃู ููู ูุง ุฅุฐุง ูุงูุช ุงูููุนุจุงุช ุงููุญุฏุฏุฉ ูุงููุฉ ูุชุฌุงูุฒ ูุญุต ูุงุญุฏ ุฃู ุขุฎุฑ. ูุฐู ุงููููุฉ ุงูุตุนุจุฉ ุชุชุทูุจ ูุณุฎุฉ ูุนูุฏุฉ ูู ูุฆุฉ ูุนูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandMaskRule</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hand: Hand) { <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCheckedDice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount).filter(mask::checkPosition).map(hand::dieAt)) .plus((<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.allyDieCount).filter(mask::checkAllyPosition).map(hand::allyDieAt)) .filterNotNull() } }</code> </pre><br>   ,     ,       .     .         ( <code>Hand</code> ),     .        ( <code>HandMask</code> ),     (   ,   ).  <code>checkMask()</code> ,       .  <code>isPositionActive()</code> ,      โ           (  ,   ).  <code>isAllyPositionActive()</code> โ       (, ,  ).     <code>getCheckedDice()</code>       ,    โ         ,       ,       . <br><br>        (, !).            ( ).   ,         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatDieAcquireHandMaskRule</span></span></span></span>(hand: Hand, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> requiredType: Die.Type) : HandMaskRule(hand) { <span class="hljs-comment"><span class="hljs-comment">/** * Define how many dice of specified type are currently checked */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkedDieCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount) .filter(mask::checkPosition) .mapNotNull(hand::dieAt) .count { it.type === requiredType } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (mask.allyPositionCount == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; checkedDieCount(mask) == <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = with(hand.dieAt(position)) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { mask.checkPosition(position) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type === Die.Type.DIVINE -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type === requiredType &amp;&amp; checkedDieCount(mask) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>   .        .     .           (capacity),            ( ).     ,      (   ,  ).         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiscardExtraDiceHandMaskRule</span></span></span></span>(hand: Hand) : HandMaskRule(hand) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> minDiceToDiscard = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hand.dieCount &gt; hand.capacity) min(hand.dieCount - hand.woundCount, hand.dieCount - hand.capacity) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxDiceToDiscard = hand.dieCount - hand.woundCount <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (mask.positionCount <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> minDiceToDiscard..maxDiceToDiscard) &amp;&amp; (mask.allyPositionCount <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..hand.allyDieCount) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { mask.checkPosition(position) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> hand.dieAt(position) == <span class="hljs-literal"><span class="hljs-literal">null</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> hand.dieAt(position)!!.type == Die.Type.WOUND -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> mask.positionCount &lt; maxDiceToDiscard -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = hand.allyDieAt(position) != <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre><br> :   <code>Hand</code>    <code>woundCount</code> ,    .     ,  .  . <br><br> <b> .</b> <br>    .     ,    .     :  ,  ,   .          ,      ,    . ,          .       โ    ,     .        ,   .       ,     โฆ <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุณู ุ ููุฐุช ุจุนูุฏุง. ููุญุงูุงุฉ ูุนุฑูุชูุง ุงูุนุงูุฉ ุ ูููุฐ ูุฆุฉ ุฎุงุตุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieBattleCheck</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> method: Method, opponent: DiePair? = <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Method</span></span></span><span class="hljs-class"> </span></span>{ SUM, AVG_UP, AVG_DOWN, MAX, MIN } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrap</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pair: DiePair, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> roll: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> DiePair.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(roll: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Wrap(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, roll) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> opponent: Wrap? = opponent?.with(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroics = ArrayList&lt;Wrap&gt;() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isRolled = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroPairCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = heroics.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOpponentPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = opponent?.pair <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOpponentResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { isRolled -&gt; opponent?.roll ?: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHeroPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pair: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiePair</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method == Method.SUM &amp;&amp; heroics.size &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { pair.modifier = <span class="hljs-number"><span class="hljs-number">0</span></span> } heroics.add(pair with <span class="hljs-number"><span class="hljs-number">0</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHeroPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">, modifier: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = addHeroPair(DiePair(die, modifier)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearHeroPairs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = heroics.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeroPairAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = heroics[index].pair <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeroResultAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { isRolled -&gt; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until heroics.size) -&gt; heroics[index].roll <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">roll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">roll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(wrap: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Wrap</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { wrap.roll = wrap.pair.die.roll() } isRolled = <span class="hljs-literal"><span class="hljs-literal">true</span></span> opponent?.let { roll(it) } heroics.forEach { roll(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isRolled) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> opponentResult = opponent?.let { it.roll + it.pair.modifier } ?: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> stats = heroics.map { it.roll + it.pair.modifier } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroResult = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (method) { DieBattleCheck.Method.SUM -&gt; stats.sum() DieBattleCheck.Method.AVG_UP -&gt; ceil(stats.average()).toInt() DieBattleCheck.Method.AVG_DOWN -&gt; floor(stats.average()).toInt() DieBattleCheck.Method.MAX -&gt; stats.max() ?: <span class="hljs-number"><span class="hljs-number">0</span></span> DieBattleCheck.Method.MIN -&gt; stats.min() ?: <span class="hljs-number"><span class="hljs-number">0</span></span> } result = heroResult - opponentResult } }</code> </pre><br>      ,      <code>DiePair</code> .  .   , ,              (,       ,       ).       ( <code>Wrap</code> ).      <code>with</code> , -. <br><br>       (   <code>Method</code> )   (    ).        .       ,   ,     (  ). <br><br>  <code>roll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฏุนู ุงูุฃุณููุจ ุงูุฐู ูุญูู ููุณ ุงูุงุณู ููู ููุนุจ ุ ููุญูุธ ุงููุชุงุฆุฌ ุงููุณูุทุฉ ููุญุฏุฏ ุญูููุฉ ุชูููุฐู ุจุนูุงูุฉ </font></font><code>isRolled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฑุฌู ููุงุญุธุฉ ุฃู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ููุฑูู ูุง ูุชู ุญุณุงุจูุง ุนูู ุงูููุฑ - ููุงู ุทุฑููุฉ ุฎุงุตุฉ ูุฐูู </font></font><code>calculateResult()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงููุชูุฌุฉ ูู ูุชุงุจุฉ ุงููููุฉ ุงูููุงุฆูุฉ ููุนูุงุฑ </font></font><code>result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุงุฐุง ูุฐุง ูุทููุจุ ููุญุตูู ุนูู ุชุฃุซูุฑ ูุจูุฑ. </font></font><code>roll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชุดุบูู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุนุฏุฉ ูุฑุงุช ุ ูู ูู ูุฑุฉ ุนูู ูุฌูู ุงูููุนุจุงุช ุณูุชู ุนุฑุถ ููู ูุฎุชููุฉ (ุชูุงููุง ููุง ูู ุงูุญูุงุฉ ุงูุญููููุฉ). ูููุท ุนูุฏูุง ุชูุฏุฃ ุงูููุนุจุงุช ุนูู ุงูุทุงููุฉ ุ ูุชุนูู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุฑูุง</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุชูุฌุฉ ุงูููุงุฆูุฉ (ุงููุฑู ุจูู ููู ููุนุจุงุช ุงูุจุทู ูููุนุจุงุช ุงูุฎุตู). ูุชุฎููู ุงูุชูุชุฑ ุ ุณุฃููู ุฅู ูุชูุฌุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุชุนุชุจุฑ ูุฌุงุญูุง ูู ุงูุงุฎุชุจุงุฑ.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ ูุญุฑู ุงููุนุจุฉ.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุดูุงุก ุงููุชุทูุฑุฉ ูุฑุชุจุฉ ุ ูุงูุขู ุฃุตุจุญุช ุงูุฃููุฑ ุฃูุซุฑ ุจุณุงุทุฉ. ูู ูููู ุงูุชุดุงููุง ุฑุงุฆุนูุง ุฃู ูููู ุฅููุง ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ูู "ุงูุชูุฏู" ุงูุญุงูู ููุญุฑู ุงููุนุจุฉ ุฃู ุงููุฑุญูุฉ ุฃู ุงููุฑุญูุฉ ุงูุชู ููุน ูููุง. ุชุนุฏุงุฏ ุฎุงุต ูููุฏ ููุฐุง ุงูุบุฑุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GamePhase</span></span></span><span class="hljs-class"> </span></span>{ SCENARIO_START, HERO_TURN_START, HERO_TURN_END, LOCATION_BEFORE_EXPLORATION, LOCATION_ENCOUNTER_STAT, LOCATION_ENCOUNTER_DIVINE, LOCATION_AFTER_EXPLORATION, GAME_LOSS }</code> </pre><br>     ,     ,     .         <code>changePhaseX()</code> ,  <code>X</code> โ     .                ,    . <br><br> <b>.</b> <br>     .     -    โ    ,       ?       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatusMessage</span></span></span><span class="hljs-class"> </span></span>{ EMPTY, CHOOSE_DICE_PERFORM_CHECK, END_OF_TURN_DISCARD_EXTRA, END_OF_TURN_DISCARD_OPTIONAL, CHOOSE_ACTION_BEFORE_EXPLORATION, CHOOSE_ACTION_AFTER_EXPLORATION, ENCOUNTER_PHYSICAL, ENCOUNTER_SOMATIC, ENCOUNTER_MENTAL, ENCOUNTER_VERBAL, ENCOUNTER_DIVINE, DIE_ACQUIRE_SUCCESS, DIE_ACQUIRE_FAILURE, GAME_LOSS_OUT_OF_TIME }</code> </pre><br>  ,          .       ,       ( <code>EMPTY</code> โ   ),       . <br><br> <b>.</b> <br>          .       ,        (,  ,   โ    ).     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isEnabled: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ NONE, <span class="hljs-comment"><span class="hljs-comment">//Blank type CONFIRM, //Confirm some action CANCEL, //Cancel action HAND_POSITION, //Some position in hand HAND_ALLY_POSITION, //Some ally position in hand EXPLORE_LOCATION, //Explore current location FINISH_TURN, //Finish current turn ACQUIRE, //Acquire (DIVINE) die FORFEIT, //Remove die from game HIDE, //Put die into bag DISCARD, //Put die to discard pile } }</span></span></code> </pre><br><font style="vertical-align: inherit;"></font><code>Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู </font><font style="vertical-align: inherit;">ุงูุชุนุฏุงุฏ ุงูุฏุงุฎูู </font><font style="vertical-align: inherit;">ููุน ุงูุฅุฌุฑุงุก ุงูุฐู ุชู ุชูููุฐู. ุงูุญูู </font></font><code>isEnabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุฑูุฑู ูุนุฑุถ ุงูุฅุฌุฑุงุกุงุช ูู ุญุงูุฉ ุบูุฑ ูุดุทุฉ. ุฃู ุ ููุฅุจูุงุบ ุนู ุฃู ูุฐุง ุงูุฅุฌุฑุงุก ูุชุงุญ ุนุงุฏุฉ ุ ููู ูู ุงูููุช ุงูุญุงูู ูุง ูููู ุงูููุงู ุจู ูุณุจุจ ูุง (ูุซู ูุฐุง ุงูุนุฑุถ ูููู ุฃูุซุฑ ุฅูุงุฏุฉ ููุง ูุงู ุนููู ุนูุฏูุง ูุง ูุชู ุนุฑุถ ุงูุฅุฌุฑุงุก ุนูู ุงูุฅุทูุงู). </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎุฒู </font><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ </font><font style="vertical-align: inherit;">(ุถุฑูุฑูุฉ ูุจุนุถ ุฃููุงุน ุงูุฅุฌุฑุงุกุงุช) ูููุฉ ุฎุงุตุฉ ุชุตู ุจุจุนุถ ุงูุชูุงุตูู ุงูุฅุถุงููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ููุฑุณ ุงูููุถุน ุงูุฐู ุญุฏุฏู ุงููุณุชุฎุฏู ุฃู ุฑูู ุงูุนูุตุฑ ุงููุญุฏุฏ ูู ุงููุงุฆูุฉ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุณ</font></font><code>Action</code>   ยซยป      - (  ).     (   ?),      ().    ,  , . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionList</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Action</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actions = mutableListOf&lt;Action&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = actions.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.add(action) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">, enabled: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { add(Action(type, enabled)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.forEach { add(it) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.removeIf { it.type == type } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = actions[index] <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = actions.find { it.type == type } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Iterator&lt;Action&gt; = ActionListIterator() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionListIterator</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Iterator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Action</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position = -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = (actions.size &gt; position + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = actions[++position] } <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> EMPTY <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = ActionList() } }</code> </pre><br>             (    ),      ,     (   ยซยป <code>get()</code> โ       ).   <code>Iterator</code>      <s>all sorts of crazy shit</s>    (, ).    EMPTY     . <br><br> <b>.</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ููุงู ูุงุฆูุฉ ุฃุฎุฑู ุชุตู ุงูุฃููุงุน ุงููุฎุชููุฉ ูููุญุชูู ุงููุนุฑูุถ ุญุงูููุง ... ุฃูุช ุชูุธุฑ ุฅูู ูุชุบูุถ ุนูููู. ุนูุฏูุง ุจุฏุฃุช ุฃููุฑ ูู ููููุฉ ูุตู ูุฐู ุงููุฆุฉ ุจุดูู ุฃูุซุฑ ูุถูุญูุง ุ ุตุฏูุช ุฑุฃุณู ุนูู ุงูุทุงููุฉ ุ ูุฃููู ูู ุฃุณุชุทุน ุญููุง ุงูุชุดุงู ุฃู ุดูุก. ููู ููุณู ุ ุขูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span></span>{ HERO_TURN_START, LOCATION_INTERIOR, GAME_LOSS }</code> </pre><br>   ,    .         โฆ    . <br><br> <b>ยซยป  ยซยป.</b> <br>          โ      ().        ,    ,           .      -    . , . <br><br>  , <code>GameRenderer</code> ,      . ,     ,     .    : ยซ-   ยป โ    ,       ,  ,             . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHeroTurnStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawLocationInteriorScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( location: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Location</span></span></span></span><span class="hljs-function"><span class="hljs-params">, heroesAtLocation: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">List</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, timer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, currentHero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">, battleCheck: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieBattleCheck</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, encounteredDie: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiePair</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, pickedDice: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, statusMessage: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGameLoss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> }</code> </pre><br> ,      โ       . <br><br>       โ <code>GameInteractor</code> (,         ,   ...).           :     ,    ,    ,   -  .   ,     (-   ),         ,      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameInteractor</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickDiceFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู ุงูุทุฑููุฉ ุงูุฃุฎูุฑุฉ ุฃูุซุฑ ููููุง. </font><font style="vertical-align: inherit;">ููุง ููุญู ุงูุงุณู ุ ูู ุฏุนูุฉ ุงููุณุชุฎุฏู ูุชุญุฏูุฏ ููุนุจุงุช ูู ูุงุญูุฉ ุ ูุชูููุฑ ูุงุฆู </font></font><code>HandMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฃุฑูุงู ุงูููุงุถุน ุงููุดุทุฉ. </font><font style="vertical-align: inherit;">ุณูุณุชูุฑ ุชูููุฐ ุงูุทุฑููุฉ ุญุชู ูุชู ุชุญุฏูุฏ ุจุนุถูุง - ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชูุฑุฌุน ุงูุทุฑููุฉ ุฅุฌุฑุงุก ูู ุงูููุน </font></font><code>HAND_POSITION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุฃู </font></font><code>HAND_ALLY_POSITION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mda) ูุน ุฑูู ุงูููุถุน ุงููุญุฏุฏ ูู ุงูุญูู </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงููููู ุชุญุฏูุฏ ุฅุฌุฑุงุก ุขุฎุฑ (ุนูู ุณุจูู ุงููุซุงู ุ </font></font><code>CONFIRM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>CANCEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูู ุงููุงุฆู </font></font><code>ActionList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููุฒ ุชุทุจููุงุช ุทุฑู ุงูุฅุฏุฎุงู ุจูู ุงูููุงูู ุงูุชู ูุชู ูููุง </font></font><code>isEnabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู </font><font style="vertical-align: inherit;">ุงูุญูู </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌุงูู ุฅุฏุฎุงู ุงููุณุชุฎุฏู ููุฐู ุงูุฅุฌุฑุงุกุงุช. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฆุฉ ูุญุฑู ุงููุนุจุฉ. </font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุฑุณูุง ูู ูุง ูู ุถุฑูุฑู ููุนูู ุ ููุฏ ุญุงู ุงูููุช ูุงููุญุฑู ูุชูููุฐ. </font><font style="vertical-align: inherit;">ุฅูุดุงุก ูุตู</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุงููุญุชูู ุงูุชุงูู: </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">,     </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer: GameRenderer, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor: GameInteractor, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> scenario: Scenario, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations: List&lt;Location&gt;, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroes: List&lt;Hero&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentHeroIndex = -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentHero: Hero <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentLocation: Location <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deterrentPile = Pile() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> encounteredDie: DiePair? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> battleCheck: DieBattleCheck? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activeHandPositions = HandMask() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pickedHandPositions = HandMask() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phase: GamePhase = GamePhase.SCENARIO_START <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> screen = GameScreen.SCENARIO_INTRO <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusMessage = StatusMessage.EMPTY <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actions: ActionList = ActionList.EMPTY <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (heroes.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Heroes list is empty!"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (locations.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Location list is empty!"</span></span>) heroes.forEach { it.isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } timer = scenario.initialTimer <span class="hljs-comment"><span class="hljs-comment">//Draw initial hand for each hero heroes.forEach(::drawInitialHand) //First hero turn currentHeroIndex = -1 changePhaseHeroTurnStart() processCycle() } private fun drawInitialHand(hero: Hero) { val hand = hero.hand val favoredDie = hero.bag.drawOfType(hero.favoredDieType) hand.addDie(favoredDie!!) refillHeroHand(hero, false) } private fun refillHeroHand(hero: Hero, redrawScreen: Boolean = true) { val hand = hero.hand while (hand.dieCount &lt; hand.capacity &amp;&amp; hero.bag.size &gt; 0) { val die = hero.bag.draw() hand.addDie(die) if (redrawScreen) { Audio.playSound(Sound.DIE_DRAW) drawScreen() Thread.sleep(500) } } } private fun changePhaseHeroTurnEnd() { battleCheck = null encounteredDie = null phase = GamePhase.HERO_TURN_END //Discard extra dice (or optional dice) val hand = currentHero.hand pickedHandPositions.clear() activeHandPositions.clear() val allowCancel = if (hand.dieCount &gt; hand.capacity) { statusMessage = StatusMessage.END_OF_TURN_DISCARD_EXTRA false } else { statusMessage = StatusMessage.END_OF_TURN_DISCARD_OPTIONAL true } val result = pickDiceFromHand(DiscardExtraDiceHandMaskRule(hand), allowCancel) statusMessage = StatusMessage.EMPTY actions = ActionList.EMPTY if (result) { val discardDice = collectPickedDice(hand) val discardAllyDice = collectPickedAllyDice(hand) pickedHandPositions.clear() (discardDice + discardAllyDice).forEach { die -&gt; Audio.playSound(Sound.DIE_DISCARD) currentHero.discardDieFromHand(die) drawScreen() Thread.sleep(500) } } pickedHandPositions.clear() //Replenish hand refillHeroHand(currentHero) changePhaseHeroTurnStart() } private fun changePhaseHeroTurnStart() { phase = GamePhase.HERO_TURN_START screen = GameScreen.HERO_TURN_START //Tick timer timer-- if (timer &lt; 0) { changePhaseGameLost(StatusMessage.GAME_LOSS_OUT_OF_TIME) return } //Pick next hero do { currentHeroIndex = ++currentHeroIndex % heroes.size currentHero = heroes[currentHeroIndex] } while (!currentHero.isAlive) currentLocation = locations[0] //Setup Audio.playMusic(Music.SCENARIO_MUSIC_1) Audio.playSound(Sound.TURN_START) } private fun changePhaseLocationBeforeExploration() { phase = GamePhase.LOCATION_BEFORE_EXPLORATION screen = GameScreen.LOCATION_INTERIOR encounteredDie = null battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.CHOOSE_ACTION_BEFORE_EXPLORATION actions = ActionList() actions.add(Action.Type.EXPLORE_LOCATION, checkLocationCanBeExplored(currentLocation)) actions.add(Action.Type.FINISH_TURN) } private fun changePhaseLocationEncounterStatDie() { Audio.playSound(Sound.ENCOUNTER_STAT) phase = GamePhase.LOCATION_ENCOUNTER_STAT screen = GameScreen.LOCATION_INTERIOR battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = when (encounteredDie!!.die.type) { Die.Type.PHYSICAL -&gt; StatusMessage.ENCOUNTER_PHYSICAL Die.Type.SOMATIC -&gt; StatusMessage.ENCOUNTER_SOMATIC Die.Type.MENTAL -&gt; StatusMessage.ENCOUNTER_MENTAL Die.Type.VERBAL -&gt; StatusMessage.ENCOUNTER_VERBAL else -&gt; throw AssertionError("Should not happen") } val canAttemptCheck = checkHeroCanAttemptStatCheck(currentHero, encounteredDie!!.die.type) actions = ActionList() actions.add(Action.Type.HIDE, canAttemptCheck) actions.add(Action.Type.DISCARD, canAttemptCheck) actions.add(Action.Type.FORFEIT) } private fun changePhaseLocationEncounterDivineDie() { Audio.playSound(Sound.ENCOUNTER_DIVINE) phase = GamePhase.LOCATION_ENCOUNTER_DIVINE screen = GameScreen.LOCATION_INTERIOR battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.ENCOUNTER_DIVINE actions = ActionList() actions.add(Action.Type.ACQUIRE, checkHeroCanAcquireDie(currentHero, Die.Type.DIVINE)) actions.add(Action.Type.FORFEIT) } private fun changePhaseLocationAfterExploration() { phase = GamePhase.LOCATION_AFTER_EXPLORATION screen = GameScreen.LOCATION_INTERIOR encounteredDie = null battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.CHOOSE_ACTION_AFTER_EXPLORATION actions = ActionList() actions.add(Action.Type.FINISH_TURN) } private fun changePhaseGameLost(message: StatusMessage) { Audio.stopMusic() Audio.playSound(Sound.GAME_LOSS) phase = GamePhase.GAME_LOSS screen = GameScreen.GAME_LOSS statusMessage = message } private fun pickDiceFromHand(rule: HandMaskRule, allowCancel: Boolean = true, onEachLoop: (() -&gt; Unit)? = null): Boolean { //Preparations pickedHandPositions.clear() actions = ActionList().add(Action.Type.CONFIRM, false) if (allowCancel) { actions.add(Action.Type.CANCEL) } val hand = rule.hand while (true) { //Recurring action onEachLoop?.invoke() //Define success condition val canProceed = rule.checkMask(pickedHandPositions) actions[Action.Type.CONFIRM]?.isEnabled = canProceed //Prepare active hand commands activeHandPositions.clear() (0 until hand.dieCount) .filter { rule.isPositionActive(pickedHandPositions, it) } .forEach { activeHandPositions.addPosition(it) } (0 until hand.allyDieCount) .filter { rule.isAllyPositionActive(pickedHandPositions, it) } .forEach { activeHandPositions.addAllyPosition(it) } //Draw current phase drawScreen() //Process interaction result val result = interactor.pickDiceFromHand(activeHandPositions, actions) when (result.type) { Action.Type.CONFIRM -&gt; if (canProceed) { activeHandPositions.clear() return true } Action.Type.CANCEL -&gt; if (allowCancel) { activeHandPositions.clear() pickedHandPositions.clear() return false } Action.Type.HAND_POSITION -&gt; { Audio.playSound(Sound.DIE_PICK) pickedHandPositions.switchPosition(result.data) } Action.Type.HAND_ALLY_POSITION -&gt; { Audio.playSound(Sound.DIE_PICK) pickedHandPositions.switchAllyPosition(result.data) } else -&gt; throw AssertionError("Should not happen") } } } private fun collectPickedDice(hand: Hand) = (0 until hand.dieCount) .filter(pickedHandPositions::checkPosition) .mapNotNull(hand::dieAt) private fun collectPickedAllyDice(hand: Hand) = (0 until hand.allyDieCount) .filter(pickedHandPositions::checkAllyPosition) .mapNotNull(hand::allyDieAt) private fun performStatDieAcquireCheck(shouldDiscard: Boolean): Boolean { //Prepare check battleCheck = DieBattleCheck(DieBattleCheck.Method.SUM, encounteredDie) pickedHandPositions.clear() statusMessage = StatusMessage.CHOOSE_DICE_PERFORM_CHECK val hand = currentHero.hand //Try to pick dice from performer's hand if (!pickDiceFromHand(StatDieAcquireHandMaskRule(currentHero.hand, encounteredDie!!.die.type), true) { battleCheck!!.clearHeroPairs() (collectPickedDice(hand) + collectPickedAllyDice(hand)) .map { DiePair(it, if (shouldDiscard) 1 else 0) } .forEach(battleCheck!!::addHeroPair) }) { battleCheck = null pickedHandPositions.clear() return false } //Remove dice from hand collectPickedDice(hand).forEach { hand.removeDie(it) } collectPickedAllyDice(hand).forEach { hand.removeDie(it) } pickedHandPositions.clear() //Perform check Audio.playSound(Sound.BATTLE_CHECK_ROLL) for (i in 0..7) { battleCheck!!.roll() drawScreen() Thread.sleep(100) } battleCheck!!.calculateResult() val result = battleCheck?.result ?: -1 val success = result &gt;= 0 //Process dice which participated in the check (0 until battleCheck!!.heroPairCount) .map(battleCheck!!::getHeroPairAt) .map(DiePair::die) .forEach { d -&gt; if (d.type === Die.Type.DIVINE) { currentHero.hand.removeDie(d) deterrentPile.put(d) } else { if (shouldDiscard) { currentHero.discardDieFromHand(d) } else { currentHero.hideDieFromHand(d) } } } //Show message to user Audio.playSound(if (success) Sound.BATTLE_CHECK_SUCCESS else Sound.BATTLE_CHECK_FAILURE) statusMessage = if (success) StatusMessage.DIE_ACQUIRE_SUCCESS else StatusMessage.DIE_ACQUIRE_FAILURE actions = ActionList.EMPTY drawScreen() interactor.anyInput() //Clean up battleCheck = null //Resolve consequences of the check if (success) { Audio.playSound(Sound.DIE_DRAW) currentHero.hand.addDie(encounteredDie!!.die) } return true } private fun processCycle() { while (true) { drawScreen() when (phase) { GamePhase.HERO_TURN_START -&gt; { interactor.anyInput() changePhaseLocationBeforeExploration() } GamePhase.GAME_LOSS -&gt; { interactor.anyInput() return } GamePhase.LOCATION_BEFORE_EXPLORATION -&gt; when (interactor.pickAction(actions).type) { Action.Type.EXPLORE_LOCATION -&gt; { val die = currentLocation.bag.draw() encounteredDie = DiePair(die, 0) when (die.type) { Die.Type.PHYSICAL, Die.Type.SOMATIC, Die.Type.MENTAL, Die.Type.VERBAL -&gt; changePhaseLocationEncounterStatDie() Die.Type.DIVINE -&gt; changePhaseLocationEncounterDivineDie() else -&gt; TODO("Others") } } Action.Type.FINISH_TURN -&gt; changePhaseHeroTurnEnd() else -&gt; throw AssertionError("Should not happen") } GamePhase.LOCATION_ENCOUNTER_STAT -&gt; { val type = interactor.pickAction(actions).type when (type) { Action.Type.DISCARD, Action.Type.HIDE -&gt; { performStatDieAcquireCheck(type === Action.Type.DISCARD) changePhaseLocationAfterExploration() } Action.Type.FORFEIT -&gt; { Audio.playSound(Sound.DIE_REMOVE) changePhaseLocationAfterExploration() } else -&gt; throw AssertionError("Should not happen") } } GamePhase.LOCATION_ENCOUNTER_DIVINE -&gt; when (interactor.pickAction(actions).type) { Action.Type.ACQUIRE -&gt; { Audio.playSound(Sound.DIE_DRAW) currentHero.hand.addDie(encounteredDie!!.die) changePhaseLocationAfterExploration() } Action.Type.FORFEIT -&gt; { Audio.playSound(Sound.DIE_REMOVE) changePhaseLocationAfterExploration() } else -&gt; throw AssertionError("Should not happen") } GamePhase.LOCATION_AFTER_EXPLORATION -&gt; when (interactor.pickAction(actions).type) { Action.Type.FINISH_TURN -&gt; changePhaseHeroTurnEnd() else -&gt; throw AssertionError("Should not happen") } else -&gt; throw AssertionError("Should not happen") } } } private fun drawScreen() { when (screen) { GameScreen.HERO_TURN_START -&gt; renderer.drawHeroTurnStart(currentHero) GameScreen.LOCATION_INTERIOR -&gt; renderer.drawLocationInteriorScreen(currentLocation, heroes, timer, currentHero, battleCheck, encounteredDie, null, pickedHandPositions, activeHandPositions, statusMessage, actions) GameScreen.GAME_LOSS -&gt; renderer.drawGameLoss(statusMessage) } } private fun checkLocationCanBeExplored(location: Location) = location.isOpen &amp;&amp; location.bag.size &gt; 0 private fun checkHeroCanAttemptStatCheck(hero: Hero, type: Die.Type): Boolean { return hero.isAlive &amp;&amp; SingleDieHandFilter(type).test(hero.hand) } private fun checkHeroCanAcquireDie(hero: Hero, type: Die.Type): Boolean { if (!hero.isAlive) { return false } return when (type) { Die.Type.ALLY -&gt; hero.hand.allyDieCount &lt; MAX_HAND_ALLY_SIZE else -&gt; hero.hand.dieCount &lt; MAX_HAND_SIZE } } }</span></span></code> </pre></div></div><br>  <code>start()</code> โ    .   ,  ,   ,       .        ,      .  <code>drawInitialHand()</code>     (, ,     <code>drawOfType()</code>  <code>Bag</code> ,      ,        ).  <code>refillHeroHand()</code>    (     <code>redrawScreen</code> ):    (        ),     ,          ,     . <br><br>    ,   <code>changePhase</code> , โ    ,               .     <code>actions</code> ,       . <br><br>   <code>pickDiceFromHand()</code>        .      <code>HandMaskRule</code> ,   .        ( <code>allowCancel</code> ),    <code>onEachLoop</code> ,           (   ).            <code>collectPickedDice()</code>  <code>collectPickedAllyDice()</code> . <br><br>     <code>performStatDieAcquireCheck()</code>         .        <code>DieBattleCheck</code> .       <code>pickDiceFromHand()</code> (      ยซยป <code>DieBattleCheck</code> ).     ,    ยซยป โ      (  ),      .         .       (  ),   ( <code>shouldDiscard = true</code> ),      ( <code>shouldDiscard = false</code> ). <br><br>   <code>processCycle()</code>    (  ),     ,     ,      โ    .  <code>drawScreen()</code>     <code>GameRenderer</code> (     <code>screen</code> ),      . <br><br>      : <code>checkLocationCanBeExplored()</code> , <code>checkHeroCanAttemptStatCheck()</code>  <code>checkHeroCanAcquireDie()</code> .      ,       .       <code>Audio</code> ,    .       โ     . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">    ,   ( ,  ):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/j3/hl/so/j3hlsov7ev0lducteyrvthdwkge.png"></a> <br></div></div><br>   ,   (-).   ,   . <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"> .    </font> </h2><br>          โ   .   ,      <code>GameRenderer</code>    ,          ,        .      ,        .         : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 1.   </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ey/kv/ro/eykvrovfqckvawmiylrmb03gx70.png"></a> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 2.      </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/5v/xd/ad/5vxdadvii-aunblqcdkxs4h8jrs.png"></a> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 3.    </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ry/l1/6y/ryl16yvaas4njnnu5mxginmvsm0.png"></a> <br></div></div><br> ,   ,      ,        Java-,     <code>prinltn()</code>    .              . <br><br>      <s>  </s> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> ANSI</a> .      ,      :   /,   ,       . ,         โ     .           โ  ,      .         -  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Jansi</a> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.fusesource.jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.17.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>    .       <code>Ansi</code> (     <code>Ansi.ansi()</code> )    ,     .    <code>StringBuilder</code> ' โ   ,     .     : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>a()</code> โ   ; </li><li style=";text-align:right;direction:rtl"> <code>cursor()</code> โ     ; </li><li style=";text-align:right;direction:rtl"> <code>eraseLine()</code> โ -    ; </li><li style=";text-align:right;direction:rtl"> <code>eraseScreen()</code> โ ; </li><li style=";text-align:right;direction:rtl"> <code>fg(), bg(), fgBright(), bgBright()</code> โ           โ   ,  ; </li><li style=";text-align:right;direction:rtl"> <code>reset()</code> โ     ,  . </li></ul><br>   <code>ConsoleRenderer</code>   ,      .       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleRenderer</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ansi: Ansi <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { AnsiConsole.systemInstall() clearScreen() resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetAnsi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi = Ansi.ansi() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(Ansi.ansi().eraseScreen(Ansi.Erase.ALL).cursor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(ansi.toString()) resetAnsi() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู ุงูุทุฑููุฉ </font></font><code>resetAnsi()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก ูุงุฆู ุฌุฏูุฏ (ูุงุฑุบ) </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุณูุชู ููุคู ุจุงูุฃูุงูุฑ ุงูุถุฑูุฑูุฉ (ุงูููู ุ ุงูุฅุฎุฑุงุฌ ุ ุฅูุฎ). </font><font style="vertical-align: inherit;">ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุชุนุจุฆุฉ ุ ูุชู ุฅุฑุณุงู ุงููุงุฆู ุงูุฐู ุชู ุฅูุดุงุคู ููุทุจุงุนุฉ ุจุงูุทุฑููุฉ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุชู ุชููุฆุฉ ุงููุชุบูุฑ ุจูุงุฆู ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูุง ุดูุก ูุนูุฏ ุญุชู ุงูุขู ุ ุฃููุณ ูุฐููุ </font><font style="vertical-align: inherit;">ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูุจุฏุฃ ูู ููุก ูุฐู ุงููุฆุฉ ุจุทุฑู ุฃุฎุฑู ูููุฏุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุงูุฃุญุฌุงู. </font><font style="vertical-align: inherit;">ูุญุฏุฉ ุงูุชุญูู ุงูููุงุณูุฉ ููุนุธู ุงููุญุทุงุช 80 ร 24 ูู ุงูุญุฌู. </font><font style="vertical-align: inherit;">ููุงุญุธ ูุฐู ุงูุญูููุฉ ูุน ุงุซููู ูู ุงูุซูุงุจุช </font></font><code>CONSOLE_WIDTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>CONSOLE_HEIGHT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ูุชู ุฑุจุทูุง ุจููู ูุญุฏุฏุฉ ูุณูุญุงูู ุฌุนู ุงูุชุตููู ูุทุงุทููุง ูุฏุฑ ุงูุฅููุงู (ูุซู ุนูู ุงูููุจ). </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุชุฑููู ุงูุฅุญุฏุงุซูุงุช ุจูุงุญุฏ ุ ุงูุฅุญุฏุงุซู ุงูุฃูู ุนุจุงุฑุฉ ุนู ุตู ุ ูุงูุซุงูู ุนููุฏ. </font><font style="vertical-align: inherit;">ูุน ุงูุนูู ูู ูุฐุง ุ ููุชุจ ุทุฑููุฉ ูุงุฆุฏุฉ</font></font><code>drawHorizontalLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุนุจุฆุฉ ุงูุณูุณูุฉ ุงููุญุฏุฏุฉ ุจุงูุญุฑู ุงููุญุฏุฏ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHorizontalLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_WIDTH).forEach { ansi.a(filler) } <span class="hljs-comment"><span class="hljs-comment">//for (i in 1..CONSOLE_WIDTH) { ansi.a(filler) } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฉ ุฃุฎุฑู ุ ุฃุฐูุฑู ุจุฃู ุงุณุชุฏุนุงุก ุงูุฃูุงูุฑ </font></font><code>a()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>cursor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุคุฏู ุฅูู ุฃู ุชุฃุซูุฑ ููุฑู ุ ูููู ูุถูู ููุท </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณูุณู ุงูุฃูุงูุฑ ุงููุทุงุจู </font><font style="vertical-align: inherit;">ุฅูู ุงููุงุฆู </font><font style="vertical-align: inherit;">. ููุท ุนูุฏูุง ูุชู ุฅุฑุณุงู ูุฐู ุงูุชุณูุณูุงุช ููุทุจุงุนุฉ ุ ุณูุฑุงูุง ุนูู ุงูุดุงุดุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง </font><font style="vertical-align: inherit;">ููุฌุฏ ูุฑู ุฌููุฑู </font><font style="vertical-align: inherit;">ุจูู ุงุณุชุฎุฏุงู ุงูุฏูุฑุฉ ุงูููุงุณูููุฉ </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูููุฌ ุงููุธููู ูุน </font></font><code>ClosedRange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>forEach{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูู ูุทูุฑ ููุฑุฑ ุจููุณู ูุง ูู ุฃูุซุฑ ููุงุกูุฉ ูู. ููุน ุฐูู ุ ุณุฃุณุชูุฑ ูู ุฎุฏุงุน ุฑุคูุณู ุจุงููุธููุฉ ุ ูุฐูู ุจุจุณุงุทุฉ ูุฃููู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฏ ูุนุดู ูู ุดูุก</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูู ููุณูู </font><s><font style="vertical-align: inherit;">ุฌุฏูุฏูู ููุงูุนูู</font></s><font style="vertical-align: inherit;"> ูุง ูุชู ููููุง ุจุฎุท ุฌุฏูุฏ ูุงูุฑูุฒ ูุจุฏู ุฃูุซุฑ ุฅุญูุงูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูููุฐ ุทุฑููุฉ ูุงุฆุฏุฉ ุฃุฎุฑู </font></font><code>drawBlankLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุนู ููุณ ุงูุดูุก ูุซู</font></font><code>drawHorizontalLine(offsetY, ' ')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุท ูุน ุงูุชูุฏูุฏ. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ูุญุชุงุฌ ุฅูู ุฌุนู ุงูุฎุท ูุงุฑุบูุง ุชูุงููุง ุ ูููู ุงุชุฑู ุฎุทูุง ุฑุฃุณููุง ูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ (ุงูุฅุทุงุฑ ุ ูุนู). </font><font style="vertical-align: inherit;">ุณูุจุฏู ุงูุฑูุฒ ูุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBlankLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) { ansi.a(<span class="hljs-string"><span class="hljs-string">'โ'</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-string"><span class="hljs-string">'โ'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ansi.eraseLine(Ansi.Erase.ALL) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุ ุฃูุช ูู ุชุฑุณู ุฃุจุฏุงู ุฅุทุงุฑุงุช ูู ุงูุตูุฑ ุงููุงุฐุจุฉุ </font><font style="vertical-align: inherit;">ูููู ุฅุฏุฎุงู ุงูุฑููุฒ ูุจุงุดุฑุฉ ูู ุงูููุฏ ุงููุตุฏุฑู. </font><font style="vertical-align: inherit;">ุงุถุบุท ูุน ุงูุงุณุชูุฑุงุฑ ุนูู ุงูููุชุงุญ Alt ูุงูุชุจ ุฑูุฒ ุงูุญุฑู ุนูู ููุญุฉ ุงูููุงุชูุญ ุงูุฑูููุฉ. </font><font style="vertical-align: inherit;">ุซู ุชุฑู. </font><font style="vertical-align: inherit;">ุฑููุฒ ASCII ุงูุชู ูุญุชุงุฌูุง ูู ุฃู ุชุดููุฑ ูู ููุณูุง ุ ุฅููู ูุฌููุนุฉ ุงูุญุฏ ุงูุฃุฏูู ููุฑุฌู:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6u/0y/js/6u0yjs19ntz1fue2wgkichhvnfo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ุ ููุง ูู ุงูุญุงู ูู minecraft ุ ูุฅู ุงูุฅููุงููุงุช ูุญุฏูุฏุฉ ููุท ุจุญุฏูุฏ ุฎูุงูู. </font><font style="vertical-align: inherit;">ูุญุฌู ุงูุดุงุดุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawCenteredCaption</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'โ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until center).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.color(color).a(text).reset() (text.length + center until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'โ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) }</code> </pre><br>    .  <code>Ansi</code>   <code>Color</code>     (, , , , , , , ),       <code>fg()/bg()</code>     <code>fgBright()/bgBright()</code> โ  ,    ,            โ  -  (  ).         - (  -       ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Color</span></span></span><span class="hljs-class"> </span></span>{ BLACK, DARK_BLUE, DARK_GREEN, DARK_CYAN, DARK_RED, DARK_MAGENTA, DARK_YELLOW, LIGHT_GRAY, DARK_GRAY, LIGHT_BLUE, LIGHT_GREEN, LIGHT_CYAN, LIGHT_RED, LIGHT_MAGENTA, LIGHT_YELLOW, WHITE } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Ansi.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">color</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Ansi = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (color) { Color.BLACK -&gt; fgBlack() Color.DARK_BLUE -&gt; fgBlue() Color.DARK_GREEN -&gt; fgGreen() Color.DARK_CYAN -&gt; fgCyan() Color.DARK_RED -&gt; fgRed() Color.DARK_MAGENTA -&gt; fgMagenta() Color.DARK_YELLOW -&gt; fgYellow() Color.LIGHT_GRAY -&gt; fg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; fgBrightBlack() Color.LIGHT_BLUE -&gt; fgBrightBlue() Color.LIGHT_GREEN -&gt; fgBrightGreen() Color.LIGHT_CYAN -&gt; fgBrightCyan() Color.LIGHT_RED -&gt; fgBrightRed() Color.LIGHT_MAGENTA -&gt; fgBrightMagenta() Color.LIGHT_YELLOW -&gt; fgBrightYellow() Color.WHITE -&gt; fgBright(Ansi.Color.WHITE) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Ansi.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">background</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Ansi = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (color) { Color.BLACK -&gt; ansi.bg(Ansi.Color.BLACK) Color.DARK_BLUE -&gt; ansi.bg(Ansi.Color.BLUE) Color.DARK_GREEN -&gt; ansi.bgGreen() Color.DARK_CYAN -&gt; ansi.bg(Ansi.Color.CYAN) Color.DARK_RED -&gt; ansi.bgRed() Color.DARK_MAGENTA -&gt; ansi.bgMagenta() Color.DARK_YELLOW -&gt; ansi.bgYellow() Color.LIGHT_GRAY -&gt; ansi.bg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; ansi.bgBright(Ansi.Color.BLACK) Color.LIGHT_BLUE -&gt; ansi.bgBright(Ansi.Color.BLUE) Color.LIGHT_GREEN -&gt; ansi.bgBrightGreen() Color.LIGHT_CYAN -&gt; ansi.bgBright(Ansi.Color.CYAN) Color.LIGHT_RED -&gt; ansi.bgBrightRed() Color.LIGHT_MAGENTA -&gt; ansi.bgBright(Ansi.Color.MAGENTA) Color.LIGHT_YELLOW -&gt; ansi.bgBrightYellow() Color.WHITE -&gt; ansi.bgBright(Ansi.Color.WHITE) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieColors = mapOf( Die.Type.PHYSICAL to Color.LIGHT_BLUE, Die.Type.SOMATIC to Color.LIGHT_GREEN, Die.Type.MENTAL to Color.LIGHT_MAGENTA, Die.Type.VERBAL to Color.LIGHT_YELLOW, Die.Type.DIVINE to Color.LIGHT_CYAN, Die.Type.WOUND to Color.DARK_GRAY, Die.Type.ENEMY to Color.DARK_RED, Die.Type.VILLAIN to Color.LIGHT_RED, Die.Type.OBSTACLE to Color.DARK_YELLOW, Die.Type.ALLY to Color.WHITE ) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroColors = mapOf( Hero.Type.BRAWLER to Color.LIGHT_BLUE, Hero.Type.HUNTER to Color.LIGHT_GREEN )</code> </pre><br>    16-      .     ,        : <br><br>      ? <br><br> <i>ยซ      ,        โ    .      ...ยป</i> <br><br>       โฆ  .   .   Java         <code>java.util.ResourceBundle</code> ,    <code>.properties</code> .      : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=Choose dice to perform check: end_of_turn_discard_extra=END OF TURN: Discard extra dice: end_of_turn_discard_optional=END OF TURN: Discard any dice, if needed: choose_action_before_exploration=Choose your action: choose_action_after_exploration=Already explored this turn. Choose what to do now: encounter_physical=Encountered PHYSICAL die. Need to pass respective check or lose this die. encounter_somatic=Encountered SOMATIC die. Need to pass respective check or lose this die. encounter_mental=Encountered MENTAL die. Need to pass respective check or lose this die. encounter_verbal=Encountered VERBAL die. Need to pass respective check or lose this die. encounter_divine=Encountered DIVINE die. Can be acquired automatically (no checks needed): die_acquire_success=You have acquired the die! die_acquire_failure=You have failed to acquire the die. game_loss_out_of_time=You ran out of time # Die types physical=PHYSICAL somatic=SOMATIC mental=MENTAL verbal=VERBAL divine=DIVINE ally=ALLY wound=WOUND enemy=ENEMY villain=VILLAIN obstacle=OBSTACLE # Hero types and descriptions brawler=Brawler hunter=Hunter # Various labels avg=avg bag=Bag bag_size=Bag size class=Class closed=Closed discard=Discard empty=Empty encountered=Encountered fail=Fail hand=Hand heros_turn=%s's turn max=max min=min perform_check=Perform check: pile=Pile received_new_die=Received new die result=Result success=Success sum=sum time=Time total=Total # Action names and descriptions action_confirm_key=ENTER action_confirm_name=Confirm action_cancel_key=ESC action_cancel_name=Cancel action_explore_location_key=E action_explore_location_name=xplore action_finish_turn_key=F action_finish_turn_name=inish action_hide_key=H action_hide_name=ide action_discard_key=D action_discard_name=iscard action_acquire_key=A action_acquire_name=cquire action_leave_key=L action_leave_name=eave action_forfeit_key=F action_forfeit_name=orfeit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณุทุฑ ูุญุชูู ุนูู ุฒูุฌ ูููุฉ ุงูููุชุงุญ ุ ููุตููุฉ ุญุฑู </font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููู ูุถุน ุงูููู ูู ุฃู ููุงู - ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃู ุงููุณุงุฑ ุฅูู ุฃู ูููู ุฌุฒุกูุง ูู classpath. </font><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃู ุงููุต ุงูุฎุงุต ุจุงูุฅุฌุฑุงุกุงุช ูุชููู ูู ุฌุฒุฃูู: ูุง ูุชู ุชูููุฒ ุงูุญุฑู ุงูุฃูู ุจุงูููู ุงูุฃุตูุฑ ููุท ุนูุฏ ุนุฑุถู ุนูู ุงูุดุงุดุฉ ุ ูููู ุฃูุถูุง ูุญุฏุฏ ุงูููุชุงุญ ุงูุฐู ูุฌุจ ุงูุถุบุท ุนููู ูุชูููุฐ ูุฐุง ุงูุฅุฌุฑุงุก. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุงูููุงุณุจ ุชุฎุฒูููุง ุจุดูู ูููุตู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ููุญู ูุณุชุฎูุต ูู ุชูุณูู ูุญุฏุฏ (ูู Android ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุชุฎุฒูู ุงูุณูุงุณู ุจุดูู ูุฎุชูู) ููุตู ูุงุฌูุฉ ุชุญููู ุซูุงุจุช ุงูุณูุณูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูู ุงูููุชุงุญ ุฅูู ุงููุฏุฎูุงุช ุ ุงูุฅุฎุฑุงุฌ ูู ุฎุท ูุนูู. </font><font style="vertical-align: inherit;">ุงูุชูููุฐ ูุงุถุญ ููุจุงุดุฑ ูุซู ุงููุงุฌูุฉ ููุณูุง (ุงูุชุฑุถ ุฃู ุงูููู ููุน ุนูู ุทูู ุงููุณุงุฑ </font></font><code>src/main/resources/text/strings.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>() : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle(<span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre><br>       <code>drawStatusMessage()</code>         ( <code>StatusMessage</code> )   <code>drawActionList()</code>      ( <code>ActionList</code> ).     ,    . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  ,     ...     </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleRenderer</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> strings: StringLoader) { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ansi: Ansi <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { AnsiConsole.systemInstall() clearScreen() resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = strings.loadString(key) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetAnsi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi = Ansi.ansi() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(Ansi.ansi().eraseScreen(Ansi.Erase.ALL).cursor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi.cursor(CONSOLE_HEIGHT, CONSOLE_WIDTH) System.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.print(ansi.toString()) resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBigNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetX: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, number: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = with(ansi) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentX = offsetX cursor(offsetY, currentX) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = number.toString() text.forEach { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (it) { <span class="hljs-string"><span class="hljs-string">'0'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'1'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'2'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'3'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'4'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'5'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'6'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'7'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"โโโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'8'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'9'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"โ โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโโ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" โโโ "</span></span>) } } currentX += <span class="hljs-number"><span class="hljs-number">6</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHorizontalLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_WIDTH).forEach { ansi.a(filler) } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBlankLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) { ansi.a(<span class="hljs-string"><span class="hljs-string">'โ'</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-string"><span class="hljs-string">'โ'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ansi.eraseLine(Ansi.Erase.ALL) } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawCenteredCaption</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'โ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until center).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.color(color).a(text).reset() (text.length + center until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'โ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawStatusMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//Setup val messageText = loadString(message.toString().toLowerCase()) var currentX = 1 val rightBorder = CONSOLE_WIDTH - if (drawBorders) 1 else 0 //Left border ansi.cursor(offsetY, 1) if (drawBorders) { ansi.a('โ') currentX++ } ansi.a(' ') currentX++ //Text ansi.a(messageText) currentX += messageText.length //Right border (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('โ') } } protected fun drawActionList(offsetY: Int, actions: ActionList, drawBorders: Boolean = true) { val rightBorder = CONSOLE_WIDTH - if (drawBorders) 1 else 0 var currentX = 1 //Left border ansi.cursor(offsetY, 1) if (drawBorders) { ansi.a('โ') currentX++ } ansi.a(' ') currentX++ //List of actions actions.forEach { action -&gt; val key = loadString("action_${action.toString().toLowerCase()}_key") val name = loadString("action_${action.toString().toLowerCase()}_name") val length = key.length + 2 + name.length if (currentX + length &gt;= rightBorder) { (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('โ') } ansi.cursor(offsetY + 1, 1) currentX = 1 if (drawBorders) { ansi.a('โ') currentX++ } ansi.a(' ') currentX++ } if (action.isEnabled) { ansi.color(Color.LIGHT_YELLOW) } ansi.a('(').a(key).a(')').reset() ansi.a(name) ansi.a(" ") currentX += length + 2 } //Right border (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('โ') } } protected enum class Color { BLACK, DARK_BLUE, DARK_GREEN, DARK_CYAN, DARK_RED, DARK_MAGENTA, DARK_YELLOW, LIGHT_GRAY, DARK_GRAY, LIGHT_BLUE, LIGHT_GREEN, LIGHT_CYAN, LIGHT_RED, LIGHT_MAGENTA, LIGHT_YELLOW, WHITE } protected fun Ansi.color(color: Color?): Ansi = when (color) { Color.BLACK -&gt; fgBlack() Color.DARK_BLUE -&gt; fgBlue() Color.DARK_GREEN -&gt; fgGreen() Color.DARK_CYAN -&gt; fgCyan() Color.DARK_RED -&gt; fgRed() Color.DARK_MAGENTA -&gt; fgMagenta() Color.DARK_YELLOW -&gt; fgYellow() Color.LIGHT_GRAY -&gt; fg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; fgBrightBlack() Color.LIGHT_BLUE -&gt; fgBrightBlue() Color.LIGHT_GREEN -&gt; fgBrightGreen() Color.LIGHT_CYAN -&gt; fgBrightCyan() Color.LIGHT_RED -&gt; fgBrightRed() Color.LIGHT_MAGENTA -&gt; fgBrightMagenta() Color.LIGHT_YELLOW -&gt; fgBrightYellow() Color.WHITE -&gt; fgBright(Ansi.Color.WHITE) else -&gt; this } protected fun Ansi.background(color: Color?): Ansi = when (color) { Color.BLACK -&gt; ansi.bg(Ansi.Color.BLACK) Color.DARK_BLUE -&gt; ansi.bg(Ansi.Color.BLUE) Color.DARK_GREEN -&gt; ansi.bgGreen() Color.DARK_CYAN -&gt; ansi.bg(Ansi.Color.CYAN) Color.DARK_RED -&gt; ansi.bgRed() Color.DARK_MAGENTA -&gt; ansi.bgMagenta() Color.DARK_YELLOW -&gt; ansi.bgYellow() Color.LIGHT_GRAY -&gt; ansi.bg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; ansi.bgBright(Ansi.Color.BLACK) Color.LIGHT_BLUE -&gt; ansi.bgBright(Ansi.Color.BLUE) Color.LIGHT_GREEN -&gt; ansi.bgBrightGreen() Color.LIGHT_CYAN -&gt; ansi.bgBright(Ansi.Color.CYAN) Color.LIGHT_RED -&gt; ansi.bgBrightRed() Color.LIGHT_MAGENTA -&gt; ansi.bgBright(Ansi.Color.MAGENTA) Color.LIGHT_YELLOW -&gt; ansi.bgBrightYellow() Color.WHITE -&gt; ansi.bgBright(Ansi.Color.WHITE) else -&gt; this } protected val dieColors = mapOf( Die.Type.PHYSICAL to Color.LIGHT_BLUE, Die.Type.SOMATIC to Color.LIGHT_GREEN, Die.Type.MENTAL to Color.LIGHT_MAGENTA, Die.Type.VERBAL to Color.LIGHT_YELLOW, Die.Type.DIVINE to Color.LIGHT_CYAN, Die.Type.WOUND to Color.DARK_GRAY, Die.Type.ENEMY to Color.DARK_RED, Die.Type.VILLAIN to Color.LIGHT_RED, Die.Type.OBSTACLE to Color.DARK_YELLOW, Die.Type.ALLY to Color.WHITE ) protected val heroColors = mapOf( Hero.Type.BRAWLER to Color.LIGHT_BLUE, Hero.Type.HUNTER to Color.LIGHT_GREEN ) protected open fun shortcut(index: Int) = "1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ"[index] }</span></span></code> </pre></div></div><br>      ,  ?   ,          <code>GameRenderer</code> . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/tn/00/fj/tn00fjvlnpga4zqm1p-ojveq7nm.png"></a> <br></div></div><br>      ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGameLoss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> centerY = CONSOLE_HEIGHT / <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> until centerY).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = loadString(message.toString().toLowerCase()).toUpperCase() drawCenteredCaption(centerY, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>, LIGHT_RED, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) (centerY + <span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_HEIGHT).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } render() }</code> </pre><br>  ,     ( <code>data</code> ),       ( <code>drawCenteredCaption()</code> ).        . , - ,    โ    <code>clearScreen()</code> ,      ,  ,     . ,   ,     .   :           ,     ,         (  ).            ,    <b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุฉ ุงูุดุงุดุฉ ุจุฃุญุฑู ูุงุฑุบุฉ (ุจุญูุซ ูุง ุชุธู ุงููุทุน ุงูุฃุซุฑูุฉ ูู ุงูุชูุฏูู ุงูุขุฎุฑ ุนูููุง). ููุฐู ุงููููุฉ ููุณุช ุจูุฐู ุงูุจุณุงุทุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุชุงููุฉ ุชุชุจุน ูุฐุง ุงููุจุฏุฃ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHeroTurnStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> centerY = (CONSOLE_HEIGHT - <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> until centerY).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } ansi.color(heroColors[hero.type]) drawHorizontalLine(centerY, <span class="hljs-string"><span class="hljs-string">'โ'</span></span>) drawHorizontalLine(centerY + <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'โ'</span></span>) ansi.reset() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).eraseLine() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).eraseLine() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = String.format(loadString(<span class="hljs-string"><span class="hljs-string">"heros_turn"</span></span>), hero.name.toUpperCase()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> index = text.indexOf(hero.name.toUpperCase()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">2</span></span>, center) ansi.eraseLine(Ansi.Erase.BACKWARD) ansi.a(text.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, index)) ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(text.substring(index + hero.name.length)) ansi.eraseLine(Ansi.Erase.FORWARD) (centerY + <span class="hljs-number"><span class="hljs-number">5</span></span>..CONSOLE_HEIGHT).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } render() }</code> </pre><br>          (  ).  ,      .   ,      - . <br><br>   ,            <code>drawLocationInteriorScreen()</code> .     ,      .  ,                (  ).      : ,       ,         : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">1.      </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/8x/lx/h9/8xlxh9h-ulu0efaigsnnfuo6nsq.png"></a> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">2.     </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/cd/iw/2e/cdiw2e0fxlfdsjeijyxwauzth-m.png"></a> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ุนุฑุถ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/t3/-w/7r/t3-w7rfvplkfeywr9_5accvkada.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ุฅููู ูุตูุญุชู ุงูุนุธููุฉ ูู: ูุง ุชุดู ูู ุงูุดูุฑุฉ ูู ุทุฑููุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูุณู ุงูุชูููุฐ ุฅูู ุนุฏุฉ ุทุฑู (ุญุชู ูู ูุงู ุณูุชู ุงุณุชุฏุนุงุก ูู ูููุง ูุฑุฉ ูุงุญุฏุฉ ููุท). </font><font style="vertical-align: inherit;">ุญุณูุง ุ ูุง ุชูุณู ุนู "ุงููุทุงุท".</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุจุฏุฃ ุงูุชููุฌ ูู ุนูููู ุ ุงูุถ ูุจุถุน ุซูุงู - ููุฐุง ูู ุดุฃูู ุฃู ูุณุงุนุฏ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleGameRenderer</span></span></span></span>(loader: StringLoader) : ConsoleRenderer(loader), GameRenderer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawLocationTopPanel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(location: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Location</span></span></span></span><span class="hljs-function"><span class="hljs-params">, heroesAtLocation: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">List</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, currentHero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">, timer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> closedString = loadString(<span class="hljs-string"><span class="hljs-string">"closed"</span></span>).toLowerCase() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> timeString = loadString(<span class="hljs-string"><span class="hljs-string">"time"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locationName = location.name.toString().toUpperCase() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> separatorX1 = locationName.length + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location.isOpen) { <span class="hljs-number"><span class="hljs-number">6</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location.bag.size &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { closedString.length + <span class="hljs-number"><span class="hljs-number">7</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> separatorX2 = CONSOLE_WIDTH - timeString.length - <span class="hljs-number"><span class="hljs-number">6</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timer &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">//Top border ansi.cursor(1, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2) 'โฌ' else 'โ') } ansi.a('โ') //Center row ansi.cursor(2, 1) ansi.a("โ ") if (location.isOpen) { ansi.color(WHITE).a(locationName).reset() ansi.a(": ").a(location.bag.size) } else { ansi.a(locationName).reset() ansi.color(DARK_GRAY).a(" (").a(closedString).a(')').reset() } ansi.a(" โ") var currentX = separatorX1 + 2 heroesAtLocation.forEach { hero -&gt; ansi.a(' ') ansi.color(heroColors[hero.type]) ansi.a(if (hero === currentHero) 'โป' else '').reset() currentX += 2 } (currentX..separatorX2).forEach { ansi.a(' ') } ansi.a("โ ").a(timeString).a(": ") when { timer &lt;= 5 -&gt; ansi.color(LIGHT_RED) timer &lt;= 15 -&gt; ansi.color(LIGHT_YELLOW) else -&gt; ansi.color(LIGHT_GREEN) } ansi.bold().a(timer).reset().a(" โ") //Bottom border ansi.cursor(3, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2) 'โด' else 'โ') } ansi.a('โค') } private fun drawLocationHeroPanel(offsetY: Int, hero: Hero) { val bagString = loadString("bag").toUpperCase() val discardString = loadString("discard").toUpperCase() val separatorX1 = hero.name.length + 4 val separatorX3 = CONSOLE_WIDTH - discardString.length - 6 - if (hero.discardPile.size &gt;= 10) 1 else 0 val separatorX2 = separatorX3 - bagString.length - 6 - if (hero.bag.size &gt;= 10) 1 else 0 //Top border ansi.cursor(offsetY, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2 || it == separatorX3) 'โฌ' else 'โ') } ansi.a('โค') //Center row ansi.cursor(offsetY + 1, 1) ansi.a("โ ") ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(" โ") val currentX = separatorX1 + 1 (currentX until separatorX2).forEach { ansi.a(' ') } ansi.a("โ ").a(bagString).a(": ") when { hero.bag.size &lt;= hero.hand.capacity -&gt; ansi.color(LIGHT_RED) else -&gt; ansi.color(LIGHT_YELLOW) } ansi.a(hero.bag.size).reset() ansi.a(" โ ").a(discardString).a(": ") ansi.a(hero.discardPile.size) ansi.a(" โ") //Bottom border ansi.cursor(offsetY + 2, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2 || it == separatorX3) 'โด' else 'โ') } ansi.a('โค') } private fun drawDieSize(die: Die, checked: Boolean = false) { when { checked -&gt; ansi.background(dieColors[die.type]).color(BLACK) else -&gt; ansi.color(dieColors[die.type]) } ansi.a(die.toString()).reset() } private fun drawDieFrameSmall(offsetX: Int, offsetY: Int, longDieSize: Boolean) { //Top border ansi.cursor(offsetY, offsetX) ansi.a('โ') (0 until if (longDieSize) 5 else 4).forEach { ansi.a('โ') } ansi.a('โ') //Left border ansi.cursor(offsetY + 1, offsetX) ansi.a("โ ") //Bottom border ansi.cursor(offsetY + 2, offsetX) ansi.a("โ") (0 until if (longDieSize) 5 else 4).forEach { ansi.a('โ') } ansi.a('โ') //Right border ansi.cursor(offsetY + 1, offsetX + if (longDieSize) 6 else 5) ansi.a('โ') } private fun drawDieSmall(offsetX: Int, offsetY: Int, pair: DiePair, rollResult: Int? = null) { ansi.color(dieColors[pair.die.type]) val longDieSize = pair.die.size &gt;= 10 drawDieFrameSmall(offsetX, offsetY, longDieSize) //Roll result or die size ansi.cursor(offsetY + 1, offsetX + 1) if (rollResult != null) { ansi.a(String.format(" %2d %s", rollResult, if (longDieSize) " " else "")) } else { ansi.a(' ').a(pair.die.toString()).a(' ') } //Draw modifier ansi.cursor(offsetY + 3, offsetX) val modString = if (pair.modifier == 0) "" else String.format("%+d", pair.modifier) val frameLength = 4 + if (longDieSize) 3 else 2 var spaces = (frameLength - modString.length) / 2 (0 until spaces).forEach { ansi.a(' ') } ansi.a(modString) spaces = frameLength - spaces - modString.length (0 until spaces).forEach { ansi.a(' ') } ansi.reset() } private fun drawDieFrameBig(offsetX: Int, offsetY: Int, longDieSize: Boolean) { //Top border ansi.cursor(offsetY, offsetX) ansi.a('โ') (0 until if (longDieSize) 3 else 2).forEach { ansi.a("โโโโโโ") } ansi.a("โโ") //Left border (1..5).forEach { ansi.cursor(offsetY + it, offsetX) ansi.a('โ') } //Bottom border ansi.cursor(offsetY + 6, offsetX) ansi.a('โ') (0 until if (longDieSize) 3 else 2).forEach { ansi.a("โโโโโโ") } ansi.a("โโ") //Right border val currentX = offsetX + if (longDieSize) 20 else 14 (1..5).forEach { ansi.cursor(offsetY + it, currentX) ansi.a('โ') } } private fun drawDieSizeBig(offsetX: Int, offsetY: Int, pair: DiePair) { ansi.color(dieColors[pair.die.type]) val longDieSize = pair.die.size &gt;= 10 drawDieFrameBig(offsetX, offsetY, longDieSize) //Die size ansi.cursor(offsetY + 1, offsetX + 1) ansi.a(" โโโโ ") ansi.cursor(offsetY + 2, offsetX + 1) ansi.a(" โ โ ") ansi.cursor(offsetY + 3, offsetX + 1) ansi.a(" โ โ ") ansi.cursor(offsetY + 4, offsetX + 1) ansi.a(" โ โ ") ansi.cursor(offsetY + 5, offsetX + 1) ansi.a(" โโโโ ") drawBigNumber(offsetX + 8, offsetY + 1, pair.die.size) //Draw modifier ansi.cursor(offsetY + 7, offsetX) val modString = if (pair.modifier == 0) "" else String.format("%+d", pair.modifier) val frameLength = 4 + 6 * if (longDieSize) 3 else 2 var spaces = (frameLength - modString.length) / 2 (0 until spaces).forEach { ansi.a(' ') } ansi.a(modString) spaces = frameLength - spaces - modString.length - 1 (0 until spaces).forEach { ansi.a(' ') } ansi.reset() } private fun drawBattleCheck(offsetY: Int, battleCheck: DieBattleCheck) { val performCheck = loadString("perform_check") var currentX = 4 var currentY = offsetY //Top message ansi.cursor(offsetY, 1) ansi.a("โ ").a(performCheck) (performCheck.length + 4 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') //Left border (1..4).forEach { ansi.cursor(offsetY + it, 1) ansi.a("โ ") } //Opponent var opponentWidth = 0 var vsWidth = 0 (battleCheck.getOpponentPair())?.let { //Die if (battleCheck.isRolled) { drawDieSmall(4, offsetY + 1, it, battleCheck.getOpponentResult()) } else { drawDieSmall(4, offsetY + 1, it) } opponentWidth = 4 + if (it.die.size &gt;= 10) 3 else 2 currentX += opponentWidth //VS ansi.cursor(currentY + 1, currentX) ansi.a(" ") ansi.cursor(currentY + 2, currentX) ansi.color(LIGHT_YELLOW).a(" VS ").reset() ansi.cursor(currentY + 3, currentX) ansi.a(" ") ansi.cursor(currentY + 4, currentX) ansi.a(" ") vsWidth = 4 currentX += vsWidth } //Clear below for (row in currentY + 5..currentY + 8) { ansi.cursor(row, 1) ansi.a('โ') (2 until currentX).forEach { ansi.a(' ') } } //Dice for (index in 0 until battleCheck.heroPairCount) { if (index &gt; 0) { ansi.cursor(currentY + 1, currentX) ansi.a(" ") ansi.cursor(currentY + 2, currentX) ansi.a(if (battleCheck.method == DieBattleCheck.Method.SUM) " + " else " / ").reset() ansi.cursor(currentY + 3, currentX) ansi.a(" ") ansi.cursor(currentY + 4, currentX) ansi.a(" ") currentX += 3 } val pair = battleCheck.getHeroPairAt(index) val width = 4 + if (pair.die.size &gt;= 10) 3 else 2 if (currentX + width + 3 &gt; CONSOLE_WIDTH) { //Out of space for (row in currentY + 1..currentY + 4) { ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } currentY += 4 currentX = 4 + vsWidth + opponentWidth } if (battleCheck.isRolled) { drawDieSmall(currentX, currentY + 1, pair, battleCheck.getHeroResultAt(index)) } else { drawDieSmall(currentX, currentY + 1, pair) } currentX += width } //Clear the rest (currentY + 1..currentY + 4).forEach { row -&gt; ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } if (currentY == offsetY) { //Still on the first line currentX = 4 + vsWidth + opponentWidth (currentY + 5..currentY + 8).forEach { row -&gt; ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } } //Draw result (battleCheck.result)?.let { r -&gt; val frameTopY = offsetY + 5 val result = String.format("%+d", r) val message = loadString(if (r &gt;= 0) "success" else "fail").toUpperCase() val color = if (r &gt;= 0) DARK_GREEN else DARK_RED //Frame ansi.color(color) drawHorizontalLine(frameTopY, 'โ') drawHorizontalLine(frameTopY + 3, 'โ') ansi.cursor(frameTopY + 1, 1).a("โโ") ansi.cursor(frameTopY + 1, CONSOLE_WIDTH - 1).a("โโ") ansi.cursor(frameTopY + 2, 1).a("โโ") ansi.cursor(frameTopY + 2, CONSOLE_WIDTH - 1).a("โโ") ansi.reset() //Top message val resultString = loadString("result") var center = (CONSOLE_WIDTH - result.length - resultString.length - 2) / 2 ansi.cursor(frameTopY + 1, 3) (3 until center).forEach { ansi.a(' ') } ansi.a(resultString).a(": ") ansi.color(color).a(result).reset() (center + result.length + resultString.length + 2 until CONSOLE_WIDTH - 1).forEach { ansi.a(' ') } //Bottom message center = (CONSOLE_WIDTH - message.length) / 2 ansi.cursor(frameTopY + 2, 3) (3 until center).forEach { ansi.a(' ') } ansi.color(color).a(message).reset() (center + message.length until CONSOLE_WIDTH - 1).forEach { ansi.a(' ') } } } private fun drawExplorationResult(offsetY: Int, pair: DiePair) { val encountered = loadString("encountered") ansi.cursor(offsetY, 1) ansi.a("โ ").a(encountered).a(':') (encountered.length + 5 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') val dieFrameWidth = 3 + 6 * if (pair.die.size &gt;= 10) 3 else 2 for (row in 1..8) { ansi.cursor(offsetY + row, 1) ansi.a("โ ") ansi.cursor(offsetY + row, dieFrameWidth + 4) (dieFrameWidth + 4 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } drawDieSizeBig(4, offsetY + 1, pair) } private fun drawHand(offsetY: Int, hand: Hand, checkedDice: HandMask, activePositions: HandMask) { val handString = loadString("hand").toUpperCase() val alliesString = loadString("allies").toUpperCase() val capacity = hand.capacity val size = hand.dieCount val slots = max(size, capacity) val alliesSize = hand.allyDieCount var currentY = offsetY var currentX = 1 //Hand title ansi.cursor(currentY, currentX) ansi.a("โ ").a(handString) //Left border currentY += 1 currentX = 1 ansi.cursor(currentY, currentX) ansi.a("โ โ") ansi.cursor(currentY + 1, currentX) ansi.a("โ โ") ansi.cursor(currentY + 2, currentX) ansi.a("โ โ") ansi.cursor(currentY + 3, currentX) ansi.a("โ ") currentX += 3 //Main hand for (i in 0 until min(slots, MAX_HAND_SIZE)) { val die = hand.dieAt(i) val longDieName = die != null &amp;&amp; die.size &gt;= 10 //Top border ansi.cursor(currentY, currentX) if (i &lt; capacity) { ansi.a("โโโโ").a(if (longDieName) "โ" else "") } else { ansi.a("โโโโ").a(if (longDieName) "โ" else "") } ansi.a(if (i &lt; capacity - 1) 'โค' else if (i == capacity - 1) 'โ' else if (i &lt; size - 1) 'โฌ' else 'โ') //Center row ansi.cursor(currentY + 1, currentX) ansi.a(' ') if (die != null) { drawDieSize(die, checkedDice.checkPosition(i)) } else { ansi.a(" ") } ansi.a(' ') ansi.a(if (i &lt; capacity - 1) 'โ' else if (i == capacity - 1) 'โ' else 'โ') //Bottom border ansi.cursor(currentY + 2, currentX) if (i &lt; capacity) { ansi.a("โโโโ").a(if (longDieName) 'โ' else "") } else { ansi.a("โโโโ").a(if (longDieName) 'โ' else "") } ansi.a(if (i &lt; capacity - 1) 'โง' else if (i == capacity - 1) 'โ' else if (i &lt; size - 1) 'โด' else 'โ') //Die number ansi.cursor(currentY + 3, currentX) if (activePositions.checkPosition(i)) { ansi.color(LIGHT_YELLOW) } ansi.a(String.format(" (%s) %s", shortcut(i), if (longDieName) " " else "")) ansi.reset() currentX += 5 + if (longDieName) 1 else 0 } //Ally subhand if (alliesSize &gt; 0) { currentY = offsetY //Ally title ansi.cursor(currentY, handString.length + 5) (handString.length + 5 until currentX).forEach { ansi.a(' ') } ansi.a(" ").a(alliesString) (currentX + alliesString.length + 5 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') //Left border currentY += 1 ansi.cursor(currentY, currentX) ansi.a(" โ") ansi.cursor(currentY + 1, currentX) ansi.a(" โ") ansi.cursor(currentY + 2, currentX) ansi.a(" โ") ansi.cursor(currentY + 3, currentX) ansi.a(" ") currentX += 4 //Ally slots for (i in 0 until min(alliesSize, MAX_HAND_ALLY_SIZE)) { val allyDie = hand.allyDieAt(i)!! val longDieName = allyDie.size &gt;= 10 //Top border ansi.cursor(currentY, currentX) ansi.a("โโโโ").a(if (longDieName) "โ" else "") ansi.a(if (i &lt; alliesSize - 1) 'โฌ' else 'โ') //Center row ansi.cursor(currentY + 1, currentX) ansi.a(' ') drawDieSize(allyDie, checkedDice.checkAllyPosition(i)) ansi.a(" โ") //Bottom border ansi.cursor(currentY + 2, currentX) ansi.a("โโโโ").a(if (longDieName) "โ" else "") ansi.a(if (i &lt; alliesSize - 1) 'โด' else 'โ') //Die number ansi.cursor(currentY + 3, currentX) if (activePositions.checkAllyPosition(i)) { ansi.color(LIGHT_YELLOW) } ansi.a(String.format(" (%s) %s", shortcut(i + 10), if (longDieName) " " else "")).reset() currentX += 5 + if (longDieName) 1 else 0 } } else { ansi.cursor(offsetY, 9) (9 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') ansi.cursor(offsetY + 4, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } //Clear the end of the line (0..3).forEach { row -&gt; ansi.cursor(currentY + row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('โ') } } override fun drawHeroTurnStart(hero: Hero) { val centerY = (CONSOLE_HEIGHT - 5) / 2 (1 until centerY).forEach { drawBlankLine(it, false) } ansi.color(heroColors[hero.type]) drawHorizontalLine(centerY, 'โ') drawHorizontalLine(centerY + 4, 'โ') ansi.reset() ansi.cursor(centerY + 1, 1).eraseLine() ansi.cursor(centerY + 3, 1).eraseLine() ansi.cursor(centerY + 2, 1) val text = String.format(loadString("heros_turn"), hero.name.toUpperCase()) val index = text.indexOf(hero.name.toUpperCase()) val center = (CONSOLE_WIDTH - text.length) / 2 ansi.cursor(centerY + 2, center) ansi.eraseLine(Ansi.Erase.BACKWARD) ansi.a(text.substring(0, index)) ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(text.substring(index + hero.name.length)) ansi.eraseLine(Ansi.Erase.FORWARD) (centerY + 5..CONSOLE_HEIGHT).forEach { drawBlankLine(it, false) } render() } override fun drawLocationInteriorScreen( location: Location, heroesAtLocation: List&lt;Hero&gt;, timer: Int, currentHero: Hero, battleCheck: DieBattleCheck?, encounteredDie: DiePair?, pickedDice: HandMask, activePositions: HandMask, statusMessage: StatusMessage, actions: ActionList) { //Top panel drawLocationTopPanel(location, heroesAtLocation, currentHero, timer) //Encounter info when { battleCheck != null -&gt; drawBattleCheck(4, battleCheck) encounteredDie != null -&gt; drawExplorationResult(4, encounteredDie) else -&gt; (4..12).forEach { drawBlankLine(it) } } //Fill blank space val bottomHalfTop = CONSOLE_HEIGHT - 11 (13 until bottomHalfTop).forEach { drawBlankLine(it) } //Hero-specific info drawLocationHeroPanel(bottomHalfTop, currentHero) drawHand(bottomHalfTop + 3, currentHero.hand, pickedDice, activePositions) //Separator ansi.cursor(bottomHalfTop + 8, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a('โ') } ansi.a('โค') //Status and actions drawStatusMessage(bottomHalfTop + 9, statusMessage) drawActionList(bottomHalfTop + 10, actions) //Bottom border ansi.cursor(CONSOLE_HEIGHT, 1) ansi.a('โ') (2 until CONSOLE_WIDTH).forEach { ansi.a('โ') } ansi.a('โ') //Finalize render() } override fun drawGameLoss(message: StatusMessage) { val centerY = CONSOLE_HEIGHT / 2 (1 until centerY).forEach { drawBlankLine(it, false) } val data = loadString(message.toString().toLowerCase()).toUpperCase() drawCenteredCaption(centerY, data, LIGHT_RED, false) (centerY + 1..CONSOLE_HEIGHT).forEach { drawBlankLine(it, false) } render() } }</span></span></code> </pre></div></div><br>    ,       .    IDE     ANSI,         (      ).  ,   ANSI      Windows โ   ,   10-   cmd.exe      ( ,   ,      ).   PowerShell      (   ).     ,   โ     ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> , </a> ).    . <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"> .  </font> </h2><br>     โ   .         .   ,   ,      ,   .     . <br><br>   ,        <code>GameInteractor</code> .   ,     . -, .              . -,  .  ,    <code>Reader</code> , <code>Scanner</code> , <code>Console</code>      :       ENTER    .   -  <code>KeyListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุ ูููู ูุฑุชุจุท ุจุฅุทุงุฑ ุนูู Swing ุ ูุชุทุจูู ูุญุฏุฉ ุงูุชุญูู ูุฏููุง ูู ุฏูู ูู ูุฐุง ุจูุฑุฌ ุงูุฑุณู.</font></font><br><br>  ูุงุฐุง ุชูุนูุ  , ,            .   ยซ, ยปโฆ  ? ,     ,   ,       .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">jLine</a> ,        ( ). ,    , ,    Windows,   Linux/UNIX (   ).  ,  <i></i>         .   ,   ,     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.14.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  ,    ,  ,  ,    <code>ConsoleReader</code>   <code>readCharacter()</code> .    ,         (   ,    ).  โ  :         ( <code>Action.Type</code> )       . <br><br> <i>ยซ   ,          ?    escape-  , ,   .    ?ยป</i> <br><br>  ,    ,     ยซ ยป: , F-, Home, Insert, PgUp/Dn, End, Delete, num-pad  .    ,  .   <code>ConsoleInteractor</code>     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleInteractor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> reader = ConsoleReader() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mapper = mapOf( CONFIRM to <span class="hljs-number"><span class="hljs-number">13</span></span>.toChar(), CANCEL to <span class="hljs-number"><span class="hljs-number">27</span></span>.toChar(), EXPLORE_LOCATION to <span class="hljs-string"><span class="hljs-string">'e'</span></span>, FINISH_TURN to <span class="hljs-string"><span class="hljs-string">'f'</span></span>, ACQUIRE to <span class="hljs-string"><span class="hljs-string">'a'</span></span>, LEAVE to <span class="hljs-string"><span class="hljs-string">'l'</span></span>, FORFEIT to <span class="hljs-string"><span class="hljs-string">'f'</span></span>, HIDE to <span class="hljs-string"><span class="hljs-string">'h'</span></span>, DISCARD to <span class="hljs-string"><span class="hljs-string">'d'</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = reader.readCharacter().toChar() <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIndexForKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-string"><span class="hljs-string">"1234567890abcdefghijklmnopqrstuvw"</span></span>.indexOf(key) }</code> </pre><br>   <code>mapper</code>   <code>read()</code> .     <code>getIndexForKey()</code> ,   ,           .         <code>GameInteractor</code> . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/hv/oh/h_/hvohh_s5evuqa4kwwwhtvvfbsmw.png"></a> <br></div></div><br> , , : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleGameInteractor</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleInteractor</span></span></span></span>(), GameInteractor { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { read() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key = read() list .filter(Action::isEnabled) .find { mapper[it.type] == key } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickDiceFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> : Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key = read() actions.forEach { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mapper[it.type] == key &amp;&amp; it.isEnabled) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (key) { <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span>..<span class="hljs-string"><span class="hljs-string">'9'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> index = key - <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkPosition(index)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = index) } } <span class="hljs-string"><span class="hljs-string">'0'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkPosition(<span class="hljs-number"><span class="hljs-number">9</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = <span class="hljs-number"><span class="hljs-number">9</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span>..<span class="hljs-string"><span class="hljs-string">'f'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyIndex = key - <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkAllyPosition(allyIndex)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_ALLY_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = allyIndex) } } } } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ุชูููุฐ ุฃุณุงููุจูุง ููุฐูุจ ูููุฐุจ ุชูุงููุง ุญุชู ูุง ูุจุฑุฒ ูุฎุชูู ุงููุฑุงุก ุบูุฑ ุงููุงูู. </font><font style="vertical-align: inherit;">ูู ุฃููุณูู ูุชุญูููู ูู ุฃู ุงูุฅุฌุฑุงุก ุงููุญุฏุฏ ูุดุท ุ ููุชู ุชุถููู ููุถุน ุงููุฏ ุงููุญุฏุฏ ูู ูุฌููุนุฉ ุตุงูุญุฉ. </font><font style="vertical-align: inherit;">ูุฃุชููู ุฌููุนูุง ุฃู ูููู ููุฐุจูู ูููุงุณ ูู ุญูููุง.</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุญุงุฏูุฉ ุนุดุฑุฉ. </font><font style="vertical-align: inherit;">ุงูุฃุตูุงุช ูุงูููุณููู</font></font></font> </h2><br>      -?           (,    ,      ),   ,    .        .       ,       ,      (,     ,    ,     ).         ,      (       ),      ,          ( -)  ,     .   ,     ,     . <br><br>   ,         โ        ,     .    ,              .   ,        .      ,      .       ,    ,    โ     ,   โ       ,        .   ,      :  ,  ,       โ        ,       .    ,   โ            ,         โ     .    ?   ,     .          ,        ( , ,     ). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงููุธุฑูุฉ ุ ุนูู ูุง ูุจุฏู ุ ุญููุง ุ ูุงูุขู ุญุงู ุงูููุช ูููุถู ูุฏูุงู ูู ุงูููุงุฑุณุฉ. ููุจู ุฐูู ุชุญุชุงุฌ ุฅูู ุทุฑุญ ุณุคุงู: ุฃูู ุ ูู ุงููุงูุน ุ ุชุฃุฎุฐ ูููุงุช ุงููุนุจุฉุ ุงูุทุฑููุฉ ุงูุฃุณูู ูุงูุฃูุซุฑ ุฃูุงููุง - ูุชุณุฌูููู ุจููุณู ุจุฌูุฏุฉ ูุจูุญุฉ ุ ุจุงุณุชุฎุฏุงู ูููุฑูููู ูุฏูู ุฃู ุญุชู ุงุณุชุฎุฏุงู ุงููุงุชู. ุงูุฅูุชุฑูุช ูููุก ุจููุงุทุน ุงูููุฏูู ุญูู ููู ูููู ููู ููู ุงูุฃูุงูุงุณ ุฃู ูุณุฑ ุงูุฌููุฏ ุจุงุณุชุฎุฏุงู ุตูุฏูู ุงูุญุฐุงุก ุชุญููู ุชุฃุซูุฑ ุชูุณูุฑ ุงูุนุธุงู ูุงูุนููุฏ ุงูููุฑู ุงูููุฑูุด. ุฅุฐุง ูู ุชูู ุบุฑูุจุงู ุนูู ุฌูุงููุงุช ุงูุณุฑูุงููุฉ ุ ูููููู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงูุตูุช ุฃู ุงููุทุจุฎ ุงูุฎุงุตุฉ ุจู ูุฃุฏุงุฉ ููุณูููุฉ (ููุงู ุฃูุซูุฉ - ูุญุชู ุฃูุซูุฉ ูุงุฌุญุฉ - ุญูุซ ุชู ุฐูู). ุฃู ููููู ุงูุฐูุงุจ ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freesound.org</font></font></a> ,     -    .     :                โ            ,           (  )  . <br><br>  ,  ,    -  classpath.      ,       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ TURN_START, <span class="hljs-comment"><span class="hljs-comment">//Hero starts the turn BATTLE_CHECK_ROLL, //Perform check, type BATTLE_CHECK_SUCCESS, //Check was successful BATTLE_CHECK_FAILURE, //Check failed DIE_DRAW, //Draw die from bag DIE_HIDE, //Remove die to bag DIE_DISCARD, //Remove die to pile DIE_REMOVE, //Remove die entirely DIE_PICK, //Check/uncheck the die TRAVEL, //Move hero to another location ENCOUNTER_STAT, //Hero encounters STAT die ENCOUNTER_DIVINE, //Hero encounters DIVINE die ENCOUNTER_ALLY, //Hero encounters ALLY die ENCOUNTER_WOUND, //Hero encounters WOUND die ENCOUNTER_OBSTACLE, //Hero encounters OBSTACLE die ENCOUNTER_ENEMY, //Hero encounters ENEMY die ENCOUNTER_VILLAIN, //Hero encounters VILLAIN die DEFEAT_OBSTACLE, //Hero defeats OBSTACLE die DEFEAT_ENEMY, //Hero defeats ENEMY die DEFEAT_VILLAIN, //Hero defeats VILLAIN die TAKE_DAMAGE, //Hero takes damage HERO_DEATH, //Hero death CLOSE_LOCATION, //Location closed GAME_VICTORY, //Scenario completed GAME_LOSS, //Scenario failed ERROR, //When something unexpected happens }</span></span></code> </pre><br>           ,       . ,  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundPlayer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> }</code> </pre><br>     <code>GameRenderer</code>  <code>GameInteractor</code> ,          <code>Game</code> .  ,    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MuteSoundPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SoundPlayer { override fun play</span></span></span></span>(sound: Sound) { <span class="hljs-comment"><span class="hljs-comment">//Do nothing } }</span></span></code> </pre><br>      ,     . <br>   ,        ,         .   ,    ,      ( ,      )        ( ,  -           ,            ).    ,       (   ),   ,    ,  - . ,  -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">freemusicarchive.org</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">soundcloud.com</a> (  YouTube)   -  .      ambient โ      ,     .     :       ,      ,      . <br><br>    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Music</span></span></span><span class="hljs-class"> </span></span>{ SCENARIO_MUSIC_1, SCENARIO_MUSIC_2, SCENARIO_MUSIC_3, }</code> </pre><br>         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MusicPlayer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MuteMusicPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MusicPlayer { override fun play</span></span></span></span>(music: Music) { <span class="hljs-comment"><span class="hljs-comment">//Do nothing } override fun stop() { //Do nothing } }</span></span></code> </pre><br>  ,      :    ,    .   ,      (/,  ),       . <br><br>      -        .         ,                    <i></i> (singleton).                      .     : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">    </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ie/jf/86/iejf862lemxbjw9vm5ozkq7ow4k.png"></a> <br></div></div><br>  <code>Audio</code> โ     singleton.      โฆ ,  <i></i> (facade) โ    ,      ( )    . ,       ,    -     .  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> Audio { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> soundPlayer: SoundPlayer = MuteSoundPlayer() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> musicPlayer: MusicPlayer = MuteMusicPlayer() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(soundPlayer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SoundPlayer</span></span></span></span><span class="hljs-function"><span class="hljs-params">, musicPlayer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MusicPlayer</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.soundPlayer = soundPlayer <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer = musicPlayer } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playSound</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.soundPlayer.play(sound) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playMusic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer.play(music) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopMusic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer.stop() }</code> </pre><br>   <code>init()</code> -  -    (   )      ,     .      ,  ,    โ      . <br><br>  ูุฐุง ูู ุดูุก.     .     (,    , <i></i> ),   Java    <code>AudioSystem</code>   <code>Clip</code> . ,   ,      - (     classpath, ?): <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.sound.sampled.AudioSystem <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasicSoundPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SoundPlayer { private fun pathToFile</span></span></span></span>(sound: Sound) = <span class="hljs-string"><span class="hljs-string">"/sound/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${sound.toString().toLowerCase()}</span></span></span><span class="hljs-string">.wav"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> url = javaClass.getResource(pathToFile(sound)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> audioIn = AudioSystem.getAudioInputStream(url) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> clip = AudioSystem.getClip() clip.<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(audioIn) clip.start() } }</code> </pre><br>  <code>open()</code>   <code>IOException</code> (   -     โ        -  ),        <code>try-catch</code> ,         ,          . <br><br> <i>ยซ   ,  ...ยป</i> <br><br>      .   ,      (,   mp3)  Java ,          (  ).       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JLayer</a> .    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.googlecode.soundlibs<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jlayer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasicMusicPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MusicPlayer { private var currentMusic: Music? = null private var thread: PlayerThread? = null private fun pathToFile</span></span></span></span>(music: Music) = <span class="hljs-string"><span class="hljs-string">"/music/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${music.toString().toLowerCase()}</span></span></span><span class="hljs-string">.mp3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentMusic == music) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } currentMusic = music thread?.finish() Thread.yield() thread = PlayerThread(pathToFile(music)) thread?.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { currentMusic = <span class="hljs-literal"><span class="hljs-literal">null</span></span> thread?.finish() } <span class="hljs-comment"><span class="hljs-comment">// Thread responsible for playback private inner class PlayerThread(private val musicPath: String) : Thread() { private lateinit var player: Player private var isLoaded = false private var isFinished = false init { isDaemon = true } override fun run() { loop@ while (!isFinished) { try { player = Player(javaClass.getResource(musicPath).openConnection().apply { useCaches = false }.getInputStream()) isLoaded = true player.play() } catch (ex: Exception) { finish() break@loop } player.close() } } fun finish() { isFinished = true this.interrupt() if (isLoaded) { player.close() } } } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ุชููุฐ ูุฐู ุงูููุชุจุฉ ุงูุชุดุบูู ุจุดูู ูุชุฒุงูู ุ ุญูุซ ุชุญุธุฑ ุงูุจุซ ุงูุฑุฆูุณู ุญุชู ูุชู ุงููุตูู ุฅูู ููุงูุฉ ุงูููู. ูุฐูู ุ ูุฌุจ ุฃู ูููุฐ ุฎูุทูุง ูููุตูุงู ( </font></font><code>PlayerThread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููุฌุนูู "ุงุฎุชูุงุฑููุง" (ุฎูู) ุ ุจุญูุซ ูุง ูุชุฏุฎู ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ูู ุงูุชุทุจูู ูุฅููุงุก ูุจูุฑูุง. ุซุงููุงู ุ </font></font><code>currentMusic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู </font><font style="vertical-align: inherit;">ุชุฎุฒูู ูุนุฑู ููู ุงูููุณููู ููุฏ ุงูุชุดุบูู ุญุงูููุง ( </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ูู ุฑูุฒ ุงููุดุบู </font><font style="vertical-align: inherit;">. ุฅุฐุง ุฌุงุก ุฃูุฑ ุซุงูู ูุฌุฃุฉ ูุชุดุบููู ุ ููู ูุจุฏุฃ ุงูุชุดุบูู ูู ุงูุจุฏุงูุฉ. ุซุงูุซูุง ุ ุนูุฏ ุงููุตูู ุฅูู ููุงูุฉ ููู ุงูููุณููู ุ ุณูุจุฏุฃ ุชุดุบููู ูุฑุฉ ุฃุฎุฑู - ูููุฐุง ุญุชู ูุชู ุฅููุงู ุงูุจุซ ุตุฑุงุญุฉู ุจูุงุณุทุฉ ุงูุฃูุฑ</font></font><code>finish()</code> (     ,     ). -,          ,      โ    ,   ,     ,     ,   - ,    .       . <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"> . </font> </h2><br>    ,       .  ููุงุฐุงุ <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุง ููุฌุฏ ุฑูุณู! .. ูุง ููุฌุฏ ุฑูุณู! .. ุฃุถู ุงููุบุฉ ุงูุฑูุณูุฉ! .. ุทูุฑูุง ููุงุจ!" </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ ุตูุญุฉ ุฃู ูุนุจุฉ ูุตุฉ ูุซูุฑุฉ ููุงูุชูุงู (ุฎุงุตุฉ ุงููุญููู) ุนูู ูููุน ุงููุชุฌุฑ ููุฑุงุกุฉ ุงููุฑุงุฌุนุงุช. </font><font style="vertical-align: inherit;">ูู ุณูุจุฏุฃูู ูู ูุฏุญ ุงูุฑุณููุงุช ุงููุฑุณููุฉ ุจุงููุฏุ </font><font style="vertical-align: inherit;">ุฃู ูุชุนุฌุจ ูู ุงูุตูุช ูู ุงูุบูุงู ุงูุฌููุ </font><font style="vertical-align: inherit;">ุฃู ูุงูุด ูุตุฉ ูุซูุฑุฉ ุชุฏูู ูู ุงููุญุธุฉ ุงูุฃููู ููุง ุชุชุฑููุง ุญุชู ุงูููุงูุฉุ</font></font><br><br>  ูุง.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุงููุงุนุจูู" ุบูุฑ ุงูุฑุงุถูู ุณูู ูุฑุดุฏูู ูุฌููุนุฉ ูู ุงููุญุฏุงุช ููุญุฐููู ุงููุนุจุฉ ุนููููุง. </font><font style="vertical-align: inherit;">ูุจุนุฏ ุฐูู ุณูู ูุญุชุงุฌูู ุฃูุถูุง ุฅูู ุงุณุชุนุงุฏุฉ ุงูุฃููุงู - ููู ูุฐุง ูุณุจุจ ูุงุญุฏ ุจุณูุท. </font><font style="vertical-align: inherit;">ูุนู ุ ููุฏ ูุณูุช ุฃู ุชุชุฑุฌู ุชุญูุฉ ุฅูู ุฌููุน ูุบุงุช ุงูุนุงูู 95. </font><font style="vertical-align: inherit;">ุฃู ุจุงูุฃุญุฑู ุงูุดุฎุต ุงูุฐู ุชุตุฑุฎ ูุงููุงุชู ุจุตูุช ุนุงูู.</font></font> ููุฐุง ูู ุดูุก!  ูู ุชููููู   ,   ,    โ     .           . <br><br>   .     ,    ,   โฆ  ,   ,          ( ).           ,      . <br><br>     . ,         <code>String</code> ?    .    ,        ,    . ,  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestEnemyTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Test enemy" override val description = "Some enemy standing in your way." override val nameLocalizations = mapOf</span></span></span></span>( <span class="hljs-string"><span class="hljs-string">"ru"</span></span> to <span class="hljs-string"><span class="hljs-string">" -"</span></span>, <span class="hljs-string"><span class="hljs-string">"ar"</span></span> to <span class="hljs-string"><span class="hljs-string">"ุจุนุถ ุงูุนุฏู"</span></span>, <span class="hljs-string"><span class="hljs-string">"iw"</span></span> to <span class="hljs-string"><span class="hljs-string">"ืืืื ืืืื"</span></span>, <span class="hljs-string"><span class="hljs-string">"zh"</span></span> to <span class="hljs-string"><span class="hljs-string">"ไธไบๆตไบบ"</span></span>, <span class="hljs-string"><span class="hljs-string">"ua"</span></span> to <span class="hljs-string"><span class="hljs-string">"ั "</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> descriptionLocalizations = mapOf( <span class="hljs-string"><span class="hljs-string">"ru"</span></span> to <span class="hljs-string"><span class="hljs-string">" - ."</span></span>, <span class="hljs-string"><span class="hljs-string">"ar"</span></span> to <span class="hljs-string"><span class="hljs-string">"ูุตู ุงูุนุฏู"</span></span>, <span class="hljs-string"><span class="hljs-string">"iw"</span></span> to <span class="hljs-string"><span class="hljs-string">"ืชืืืืจ ืืืืื"</span></span>, <span class="hljs-string"><span class="hljs-string">"zh"</span></span> to <span class="hljs-string"><span class="hljs-string">"ไธไบๆตไบบ็ๆ่ฟฐ"</span></span>, <span class="hljs-string"><span class="hljs-string">"ua"</span></span> to <span class="hljs-string"><span class="hljs-string">" ั ั   ."</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits = listOf&lt;Trait&gt;() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููููุงูุจ ุ ูุฅู ูุฐุง ุงูููุฌ ููุงุณุจ ุชูุงููุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุชุญุฏูุฏ ุชุฑุฌูุฉ ูุฃู ูุบุฉ ุ ูุฃูุช ูุง ุชุญุชุงุฌ ุฅูู - ููุงู ุฏุงุฆููุง ูููุฉ ุงูุชุฑุงุถูุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูู ุงููุงุฆูุงุช ุงูููุงุฆูุฉ ุ ูุง ุฃุฑูุฏ ุชูุฏูุฏ ุงูุฎุทูุท ุฅูู ุนุฏุฉ ุญููู ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูู ูุชุฑู ูุงุญุฏุฉ ุ ูููู ุงุณุชุจุฏุงู ููุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocalizedString</span></span></span></span>(defaultValue: String, localizations: Map&lt;String, String&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: String = defaultValue <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> values: Map&lt;String, String&gt; = localizations.toMap() <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lang: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = values.getOrDefault(lang, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(other: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> === other -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> other !<span class="hljs-keyword"><span class="hljs-keyword">is</span></span> LocalizedString -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> == other.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.hashCode() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุตุญูุญ ุฑูุฒ ุงููููุฏ ูููุง ูุฐูู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Enemy().apply { name = LocalizedString(template.name, template.nameLocalizations) description = LocalizedString(template.description, template.descriptionLocalizations) template.traits.forEach { addTrait(it) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุทุจูุนุฉ ุงูุญุงู ุ ูุฌุจ ุชุทุจูู ููุณ ุงูููุฌ ุนูู ุงูุฃููุงุน ุงููุชุจููุฉ ูู ุงูููุงูุจ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ุชููู ุงูุชุบููุฑุงุช ุฌุงูุฒุฉ ุ ูููู ุงุณุชุฎุฏุงููุง ุฏูู ุตุนูุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> language = Locale.getDefault().language <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyName = enemy.name[language]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุซุงููุง ุ ูุฏููุง โโูุณุฎุฉ ูุจุณุทุฉ ูู ุงูุชุฑุฌูุฉ ุ ุญูุซ ูุชู ุฃุฎุฐ ุงููุบุฉ ููุท ูู ุงูุงุนุชุจุงุฑ. ุจุดูู ุนุงู ุ </font></font><code>Locale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏุฏ </font><font style="vertical-align: inherit;">ุงููุงุฆูุงุช ุงูุทุจููุฉ </font><font style="vertical-align: inherit;">ุฃูุถูุง ุงูุจูุฏ ูุงูููุทูุฉ. ุฅุฐุง ูุงู ูุฐุง ุฃูุฑูุง ููููุง ูู ุงูุชุทุจูู ุงูุฎุงุต ุจู ุ ูุณูุจุฏู ูู </font></font><code>LocalizedString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุชูููุง ุจุนุถ ุงูุดูุก ุ ููููุง ุณุนุฏุงุก ุจุฐูู ุนูู ุฃู ุญุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุงูููุง ูุน ุงูููุงูุจ ุ ูุจูู ูุชูุทูู ุฎุทูุท ุงูุฎุฏูุฉ ุงููุณุชุฎุฏูุฉ ูู ุชุทุจูููุง. ูุญุณู ุงูุญุธ ุ ูุฅูู </font></font><code>ResourceBundle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุจุงููุนู ุนูู ุฌููุน ุงูุขููุงุช ุงููุงุฒูุฉ. ูู ุงูุถุฑูุฑู ููุท ุฅุนุฏุงุฏ ุงููููุงุช ูุน ุงูุชุฑุฌูุงุช ูุชุบููุฑ ุทุฑููุฉ ุชูุฒูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=    : end_of_turn_discard_extra= :   : end_of_turn_discard_optional= :    : choose_action_before_exploration=,  : choose_action_after_exploration= .   ? encounter_physical=  .   . encounter_somatic=  .   . encounter_mental=  .   . encounter_verbal=  .   . encounter_divine=  .    : die_acquire_success=   ! die_acquire_failure=    . game_loss_out_of_time=    # Die types physical= somatic= mental= verbal= divine= ally= wound= enemy= villain= obstacle= # Hero types and descriptions brawler= hunter= # Various labels avg= bag= bag_size=  class= closed= discard= empty= encountered=  fail= hand= heros_turn= %s max= min= perform_check= : pile= received_new_die=   result= success= sum= time= total= # Action names and descriptions action_confirm_key=ENTER action_confirm_name= action_cancel_key=ESC action_cancel_name= action_explore_location_key=E action_explore_location_name= action_finish_turn_key=F action_finish_turn_name=  action_hide_key=H action_bag_name= action_discard_key=D action_discard_name= action_acquire_key=A action_acquire_name= action_leave_key=L action_leave_name= action_forfeit_key=F action_forfeit_name=</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃููู ููุณุฌู: ุฅู ูุชุงุจุฉ ุงูุนุจุงุฑุงุช ุจุงููุบุฉ ุงูุฑูุณูุฉ ุฃุตุนุจ ุจูุซูุฑ ูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ุฅุฐุง ูุงู ููุงู ุดุฑุท ูุงุณุชุฎุฏุงู ุงูุงุณู ูู ุญุงูุฉ ูุญุฏุฏุฉ ุฃู ููุงูุณุญุงุจ ูู ุงูุฌูุณ (ูุณุชุธู ูุฐู ุงููุชุทูุจุงุช ุถุฑูุฑูุฉ ุจุงูุถุฑูุฑุฉ) ุ ูุณูุชุนูู ุนููู ุงูุชุนุฑู ูุซูุฑูุง ูุจู ุฃู ุชุญุตู ุนูู ูุชูุฌุฉ ุ ุฃููุงู ุ ุชูู ุจุงููุชุทูุจุงุช ุ ูุซุงููุงู ุ ูุง ุชุจุฏู ูุชุฑุฌูุฉ ูููุงููููุฉ ูู ุฅุนุฏุงุฏ cyborg ูุน ุฃุฏูุบุฉ ุงูุฏุฌุงุฌ. ูุงุญุธ ุฃูุถูุง ุฃููุง ูุง ูุบูุฑ ููุงุชูุญ ุงูุฅุฌุฑุงุก - ููุง ูุงู ูู ูุจู ุ ุณูุชู ุงุณุชุฎุฏุงู ููุณ ุงูุฃุญุฑู ูุชูููุฐ ูุฐุง ุงูุฃุฎูุฑ ููุง ูู ุงูุญุงู ูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ (ูุงูุชู ุ ุจุงูููุงุณุจุฉ ุ ูู ุชุนูู ูู ุชุฎุทูุท ููุญุฉ ููุงุชูุญ ุจุฎูุงู ุงูุชูุณูู ุงููุงุชููู ุ ูููู ูุฐุง ููุณ ูู ุดุฃููุง - ุงูุขู ุฏุนูุง ูุชุฑู ุงูุฃูุฑ ููุง ูู).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>(locale: Locale) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle(<span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>, locale) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre>  . <br>    , <code>ResourceBundle</code>           ,     .     โ     ( <code>string.properties</code> ).    โฆ <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">!    !</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> ,  Unicode   <code>.properties</code>     Java 9.       ISO-8859-1 โ <code>ResourceBundle</code>     .  ,     ,           โ     .       Unicode- โ ,  ,   : <code>'\uXXXX'</code> .    ,      ,   Java       <b>native2ascii</b> ,        .         : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0443\u0431\u0438\u043a\u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438: end_of_turn_discard_extra=\u041a\u041e\u041d\u0415\u0426 \u0425\u041e\u0414\u0410: \u0421\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u043b\u0438\u0448\u043d\u0438\u0435 \u043a\u0443\u0431\u0438\u043a\u0438: end_of_turn_discard_optional=\u041a\u041e\u041d\u0415\u0426 \u0425\u041e\u0414\u0410: \u0421\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u043a\u0443\u0431\u0438\u043a\u0438 \u043f\u043e \u0436\u0435\u043b\u0430\u043d\u0438\u044e: choose_action_before_exploration=\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c: choose_action_after_exploration=\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e. \u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435? encounter_physical=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0424\u0418\u0417\u0418\u0427\u0415\u0421\u041a\u0418\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_somatic=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0421\u041e\u041c\u0410\u0422\u0418\u0427\u0415\u0421\u041a\u0418\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_mental=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u041c\u0415\u041d\u0422\u0410\u041b\u042c\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_verbal=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0412\u0415\u0420\u0411\u0410\u041b\u042c\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_divine=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0411\u041e\u0416\u0415\u0421\u0422\u0412\u0415\u041d\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438: die_acquire_success=\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043d\u043e\u0432\u044b\u0439 \u043a\u0443\u0431\u0438\u043a! die_acquire_failure=\u0412\u0430\u043c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0443\u0431\u0438\u043a. game_loss_out_of_time=\u0423 \u0432\u0430\u0441 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u043e\u0441\u044c \u0432\u0440\u0435\u043c\u044f</code> </pre><br>           .     โ  .    โ  .  ,  IDE    ( )  ยซ ยป,       โ            -  (  ),    IDE,    . <br><br>  ,  .  <code>getBundle()</code> ,    ,   ,      <code>ResourceBundle.Control</code> โ -         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>(locale: Locale) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle( <span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>, locale, Utf8ResourceBundleControl()) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre><br> , ,  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Utf8ResourceBundleControl</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ResourceBundle.Control</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Throws(IllegalAccessException::class, InstantiationException::class, IOException::class)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newBundle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(baseName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, locale: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Locale</span></span></span></span><span class="hljs-function"><span class="hljs-params">, format: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, loader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ClassLoader</span></span></span></span><span class="hljs-function"><span class="hljs-params">, reload: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ResourceBundle? { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bundleName = toBundleName(baseName, locale) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (format) { <span class="hljs-string"><span class="hljs-string">"java.class"</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.newBundle(baseName, locale, format, loader, reload) <span class="hljs-string"><span class="hljs-string">"java.properties"</span></span> -&gt; with((<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"://"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bundleName) <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> toResourceName(bundleName, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>)) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { reload -&gt; reload(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, loader) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; loader.getResourceAsStream(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) }?.let { stream -&gt; InputStreamReader(stream, <span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>).use { r -&gt; PropertyResourceBundle(r) } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Unknown format: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$format</span></span></span><span class="hljs-string">"</span></span>) } } <span class="hljs-meta"><span class="hljs-meta">@Throws(IOException::class)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reload</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resourceName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, classLoader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ClassLoader</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: InputStream { classLoader.getResource(resourceName)?.let { url -&gt; url.openConnection().let { connection -&gt; connection.useCaches = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connection.getInputStream() } } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IOException(<span class="hljs-string"><span class="hljs-string">"Unable to load data!"</span></span>) } }</code> </pre><br>    ,   โฆ ,  ( ) โ   (  Kotlin    ).    โ ,       <code>.properties</code>   UTF-8  - . <br></div></div><br>              โ       JRE: <br><br><pre style=";text-align:right;direction:rtl"> <code class="dos hljs">java -Duser.language=ru -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar</code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">      Windows,  </b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,   Windows (cmd.exe)     437 (   DOSLatinUS),     โ      .  , UTF-8 ,        : <br><br><pre style=";text-align:right;direction:rtl"> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">chcp</span></span> <span class="hljs-number"><span class="hljs-number">65001</span></span></code> </pre> <br>    Java  ,    ,       .     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="dos hljs">java -Dfile.encoding=UTF-<span class="hljs-number"><span class="hljs-number">8</span></span> -Duser.language=ru -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar</code> </pre><br>   ,      ,  Unicode- (, Lucida Console) <br></div></div><br>     ,           : ยซ  !ยป <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">- </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ap/92/qd/ap92qdlfulptfgjg_-ms3ejqddm.png"></a> <br></div></div><br>   . <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"> .   </font> </h2><br>  ,  , ,                . -,       ,       . -,     ,           . -,       (       ,      ),     , ,    โ      (   , ?). <br><br>          .   ,  <code>main()</code>   ,    .  ุณูุญุชุงุฌ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุตู ูุงูุชุถุงุฑูุณ ุ </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุจุทุงู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ูุงุฌูุฉ </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ูุงุฌูุงุช </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>StringLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ูุงุฌูุงุช </font></font><code>SoundPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>MusicPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ุงููุฆุฉ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฒุฌุงุฌุฉ ูู ุงูุดูุจุงููุง. </font></font></li></ul><br>  ุฏุนูุง ูุฐูุจ! <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { Audio.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(BasicSoundPlayer(), BasicMusicPlayer()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> loader = PropertiesStringLoader(Locale.getDefault()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer = ConsoleGameRenderer(loader) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor = ConsoleGameInteractor() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = TestScenarioTemplate() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> scenario = generateScenario(template, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations = generateLocations(template, <span class="hljs-number"><span class="hljs-number">1</span></span>, heroes.size) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroes = listOf( generateHero(Hero.Type.BRAWLER, <span class="hljs-string"><span class="hljs-string">"Brawler"</span></span>), generateHero(Hero.Type.HUNTER, <span class="hljs-string"><span class="hljs-string">"Hunter"</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> game = Game(renderer, interactor, scenario, locations, heroes) game.start() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทูู ููุณุชูุชุน ุจุฃูู ูููุฐุฌ ุนูู. </font><font style="vertical-align: inherit;">ูุง ุฃูุช ุฐุง.</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฑุงุจุนุฉ ุนุดุฑุฉ. </font><font style="vertical-align: inherit;">ูุนุจุฉ ุงูุชูุงุฒู</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ... </font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฎุงูุณุฉ ุนุดุฑุฉ. </font><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑุงุช</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ููุฏ ุชู ูุชุงุจุฉ ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุฑูุฒ ุงููููุฐุฌ ุงูุฃููู ููุนูู ุ ุณูููู ูู ุงูุฌูุฏ ุฅุถุงูุฉ ุจุถุนุฉ ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ... </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูููุ </font><font style="vertical-align: inherit;">ุงูุขู ููุทุ </font><font style="vertical-align: inherit;">ูุนู ุ ูุฌุจ ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ูู ุงูุจุฏุงูุฉ ุ ุซู ุงูุฑูุฒ! " </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธ ุงูุนุฏูุฏ ูู ุงููุฑุงุก ุจุญู ุฃู ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ุงููุชุงุจุฉ ูุฌุจ ุฃู ุชุณุจู ุชุทููุฑ ููุฏ ุงูุนูู ( </font></font><abbr title="Test-Driven Development"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD)</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฌูุงุช ุงูููุถุฉ ุงูุฃุฎุฑู). ุณูุชู ุบุถุจ ุงูุขุฎุฑูู: ูุง ููุฌุฏ ุดูุก ูููุงุณ ูุฎุฏุงุน ุฃุฏูุบุชูู ูุน ุงุฎุชุจุงุฑุงุชูู ุ ุญุชู ูู ูุงููุง ุนูู ุงูุฃูู ูุจุฏุฃูู ูู ุชุทููุฑ ุดูุก ูุง ุ ูุฅูุง ูุณูุชู ููุฏ ูู ุงูุฏุงูุน. ุณูู ูููู ุดุฎุตุงู ุขุฎุฑุงู ุจุงูุฒุญู ูู ุงููุฌูุฉ ุงูููุฌูุฏุฉ ูู ุงูููุญ ุงูุฃุณุงุณู ููููููู ุฎุฌูููุง: "ูุง ุฃููู ุณุจุจ ุงูุญุงุฌุฉ ุฅูู ูุฐู ุงูุงุฎุชุจุงุฑุงุช - ูู ุดูุก ูุนูู ูู ุฃุฌูู" ... ุจุนุฏ ุฐูู ุณูุชู ุฏูุนูู ุฅูู ุงููุฌู ุจุงุณุชุฎุฏุงู ุตูุฏูู ูุณุฑุนุฉ ุงูุฏูุน ููุฎูู. ูู ุฃุจุฏุฃ ูู ุฅุทูุงู ููุงุฌูุงุช ุฃูุฏููููุฌูุฉ (ุฅููุง ูููุฆุฉ ุจุงููุนู ุจูุง ุนูู ุงูุฅูุชุฑูุช) ุ ูุจุงูุชุงูู ุฃุชูู ุฌุฒุฆููุง ูุน ุงูุฌููุน. ูุนู ุ ุงูุงุฎุชุจุงุฑุงุช ูููุฏุฉ ูู ุจุนุถ ุงูุฃุญูุงู (ุฎุงุตุฉ ูู ุงูููุฏ ุงูุฐู ูุชุบูุฑ ุฃู ูุฑุชุจุท ุจุงูุญุณุงุจุงุช ุงููุนูุฏุฉ) ุ ูุนู ุ ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุบูุฑ ููุงุณุจ ููู ุงูููุฏ (ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูุบุทู ุงูุชูุงุนูุงุช ูุน ุงููุณุชุฎุฏู ุฃู ุงูุฃูุธูุฉ ุงูุฎุงุฑุฌูุฉ) ุ ูุนู ุ ุฅูู ุฌุงูุจ ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ููุงู ุงูุนุฏูุฏ ูู ุฃููุงุน ุฃุฎุฑู ููู (ุญุณูุง ุ ุชู ุชุณููุฉ ุฎูุณุฉ ุนูู ุงูุฃูู) ุููุนู ุ ูู ูุฑูุฒ ุนูู ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช - ููุงูุชูุง ุชุฏูุฑ ุญูู ุดูุก ุขุฎุฑ.</font></font><br><br>  :   ( )  .    ,       . ,             (  ),      ,         .    ,      <code>Renderer</code> โ     .       ,       . <br><br> , .  .     :    ,      .    ,       . ,  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGetMaxLevel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">"Max level should be 3"</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, DieGeneratorKt.getMaxLevel()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDieGenerationSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ DieTypeFilter filter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.ALLY); List&lt;? extends List&lt;Integer&gt;&gt; allowedSizes = Arrays.asList( <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, Arrays.asList(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>), Arrays.asList(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), Arrays.asList(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) ); IntStream.rangeClosed(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).forEach(level -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size = DieGeneratorKt.generateDie(filter, level).getSize(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect level of die generated: "</span></span> + size, allowedSizes.get(level).contains(size)); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size &lt;= <span class="hljs-number"><span class="hljs-number">12</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>); } }); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDieGenerationType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Die.Type&gt; allowedTypes1 = Arrays.asList(Die.Type.PHYSICAL); List&lt;Die.Type&gt; allowedTypes2 = Arrays.asList(Die.Type.PHYSICAL, Die.Type.SOMATIC, Die.Type.MENTAL, Die.Type.VERBAL); List&lt;Die.Type&gt; allowedTypes3 = Arrays.asList(Die.Type.ALLY, Die.Type.VILLAIN, Die.Type.ENEMY); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { Die.Type type1 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.PHYSICAL), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type1, allowedTypes1.contains(type1)); Die.Type type2 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StatsDieTypeFilter(), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type2, allowedTypes2.contains(type2)); Die.Type type3 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MultipleDieTypeFilter(Die.Type.ALLY, Die.Type.VILLAIN, Die.Type.ENEMY), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type3, allowedTypes3.contains(type3)); } } }</code> </pre><br>  ุฃู ููุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BagGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGenerateBag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ BagTemplate template1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template1.addPlan(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.PHYSICAL)); template1.addPlan(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.SOMATIC)); template1.setFixedDieCount(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); BagTemplate template2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template2.addPlan(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.DIVINE)); template2.setFixedDieCount(<span class="hljs-number"><span class="hljs-number">5</span></span>); BagTemplate template3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template3.addPlan(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.ALLY)); template3.setFixedDieCount(<span class="hljs-number"><span class="hljs-number">50</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { Bag bag1 = BagGeneratorKt.generateBag(template1, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size: "</span></span> + bag1.getSize(), bag1.getSize() &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span> &amp;&amp; bag1.getSize() &lt;= <span class="hljs-number"><span class="hljs-number">15</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect number of SOMATIC dice"</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, bag1.examine().stream().filter(d -&gt; d.getType() == Die.Type.SOMATIC).count()); Bag bag2 = BagGeneratorKt.generateBag(template2, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size"</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, bag2.getSize()); Bag bag3 = BagGeneratorKt.generateBag(template3, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size"</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, bag3.getSize()); List&lt;Die.Type&gt; dieTypes3 = bag3.examine().stream().map(Die::getType).distinct().collect(Collectors.toList()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect die types"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, dieTypes3.size()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect die types"</span></span>, Die.Type.ALLY, dieTypes3.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } } }</code> </pre><br>   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocationGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLocationGeneration</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name, LocationTemplate template)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Template: "</span></span> + template.getName()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect template type"</span></span>, name, template.getName()); IntStream.rangeClosed(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).forEach(level -&gt; { Location location = LocationGeneratorKt.generateLocation(template, level); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect location type"</span></span>, name, location.getName().get(<span class="hljs-string"><span class="hljs-string">""</span></span>)); assertTrue(<span class="hljs-string"><span class="hljs-string">"Location not open by default"</span></span>, location.isOpen()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> closingDifficulty = location.getClosingDifficulty(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Closing difficulty too small"</span></span>, closingDifficulty &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect closing difficulty"</span></span>, closingDifficulty, template.getBasicClosingDifficulty() + level * <span class="hljs-number"><span class="hljs-number">2</span></span>); Bag bag = location.getBag(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Bag is null"</span></span>, bag); assertTrue(<span class="hljs-string"><span class="hljs-string">"Bag is empty"</span></span>, location.getBag().getSize() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); Deck&lt;Enemy&gt; enemies = location.getEnemies(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Enemies are null"</span></span>, enemies); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect enemy threat count"</span></span>, enemies.getSize(), template.getEnemyCardsCount()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bag.drawOfType(Die.Type.ENEMY) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { assertTrue(<span class="hljs-string"><span class="hljs-string">"Enemy cards not specified"</span></span>, enemies.getSize() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); } Deck&lt;Obstacle&gt; obstacles = location.getObstacles(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Obstacles are null"</span></span>, obstacles); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect obstacle threat count"</span></span>, obstacles.getSize(), template.getObstacleCardsCount()); List&lt;SpecialRule&gt; specialRules = location.getSpecialRules(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"SpecialRules are null"</span></span>, specialRules); }); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGenerateLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ testLocationGeneration(<span class="hljs-string"><span class="hljs-string">"Test Location"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestLocationTemplate()); testLocationGeneration(<span class="hljs-string"><span class="hljs-string">"Test Location 2"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestLocationTemplate2()); } }</code> </pre><br> <i>ยซ, , !  ? Java???ยป</i> <br><br>  .          ,      , , . ,                ,       <s>   </s>         (    ,             ,      ).    -     -  ,      :             (    ?). <br><br>  . ,  <code>HandMaskRule</code>   ?   ,   -           ,        (, ยซ    ,   ,  โ ,   ,   โ   ยป โ  ?).     ? โฆ         . , ,      ( ),       , , ,    .   ? ? ?   - ?   .         โ   ,    .     โฆ    ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TripleDieHandMaskRuleTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Hand hand; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ hand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Hand(<span class="hljs-number"><span class="hljs-number">10</span></span>); hand.addDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Die(Die.Type.PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//0 hand.addDie(new Die(Die.Type.PHYSICAL, 4)); //1 hand.addDie(new Die(Die.Type.SOMATIC, 4)); //2 hand.addDie(new Die(Die.Type.SOMATIC, 4)); //3 hand.addDie(new Die(Die.Type.MENTAL, 4)); //4 hand.addDie(new Die(Die.Type.MENTAL, 4)); //5 hand.addDie(new Die(Die.Type.VERBAL, 4)); //6 hand.addDie(new Die(Die.Type.VERBAL, 4)); //7 hand.addDie(new Die(Die.Type.DIVINE, 4)); //8 hand.addDie(new Die(Die.Type.DIVINE, 4)); //9 hand.addDie(new Die(Die.Type.ALLY, 4)); //A (0) hand.addDie(new Die(Die.Type.ALLY, 4)); //B (1) } @Test public void testRule1() { HandMaskRule rule = new TripleDieHandMaskRule( hand, new Die.Type[]{Die.Type.PHYSICAL, Die.Type.SOMATIC}, new Die.Type[]{Die.Type.MENTAL, Die.Type.VERBAL}, new Die.Type[]{Die.Type.PHYSICAL, Die.Type.ALLY} ); HandMask mask = new HandMask(); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertTrue("Should be on", rule.isPositionActive(mask, 5)); assertTrue("Should be on", rule.isPositionActive(mask, 6)); assertTrue("Should be on", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addPosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertTrue("Should be on", rule.isPositionActive(mask, 5)); assertTrue("Should be on", rule.isPositionActive(mask, 6)); assertTrue("Should be on", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addPosition(4); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addAllyPosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertFalse("Ally should be off", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertFalse("Should be off", rule.isPositionActive(mask, 1)); assertFalse("Should be off", rule.isPositionActive(mask, 2)); assertFalse("Should be off", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertTrue("Rule should be met", rule.checkMask(mask)); mask.removePosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertFalse("Ally should be off", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met again", rule.checkMask(mask)); } }</span></span></code> </pre><br>  ,     ,    ( -    ).     (  ,   ),        .              ,     . -,  ,     .     ,  ,  -   .     .   . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TripleDieHandMaskRule</span></span></span></span>( hand: Hand, types1: Array&lt;Die.Type&gt;, types2: Array&lt;Die.Type&gt;, types3: Array&lt;Die.Type&gt;) : HandMaskRule(hand) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types1 = types1.toSet() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types2 = types2.toSet() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types3 = types3.toSet() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.positionCount + mask.allyPositionCount != <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getCheckedDice(mask).asSequence() .filter { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 } .any { d1 -&gt; getCheckedDice(mask) .filter { d2 -&gt; d2 !== d1 } .filter { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 } .any { d2 -&gt; getCheckedDice(mask) .filter { d3 -&gt; d3 !== d1 } .filter { d3 -&gt; d3 !== d2 } .any { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 } } } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.checkPosition(position)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> die = hand.dieAt(position) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (mask.positionCount + mask.allyPositionCount) { <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; with(getCheckedDice(mask).first()) { (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2)) } <span class="hljs-number"><span class="hljs-number">2</span></span>-&gt; with(getCheckedDice(mask)) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) } <span class="hljs-number"><span class="hljs-number">3</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.checkAllyPosition(position)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hand.allyDieAt(position) == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (mask.positionCount + mask.allyPositionCount) { <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; with(getCheckedDice(mask).first()) { (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2)) } <span class="hljs-number"><span class="hljs-number">2</span></span>-&gt; with(getCheckedDice(mask)) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) } <span class="hljs-number"><span class="hljs-number">3</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูุฏูู ุฃููุงุฑ ุญูู ููููุฉ ุชูููุฐ ูุฐู ุงููุธููุฉ ุจุณูููุฉ ุฃูุจุฑ ุ ููุญู ูุฑุญุจ ุจู ููุชุนููู. </font><font style="vertical-align: inherit;">ูุฃูุง ุณุนูุฏ ุจุดูู ูุง ูุตุฏู ูุฃููู ููุช ุฐูููุง ุจูุง ููู ุงูููุงูุฉ ูุจุฏุก ุชูููุฐ ูุฐุง ุงููุตู ุจูุชุงุจุฉ ุงุฎุชุจุงุฑ. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุฃูุง &lt;...&gt; ุฃูุถูุง &lt;...&gt; ุฃูุง ุณุนูุฏ &lt;...&gt; ุณุนูุฏ &lt;...&gt;. </font><font style="vertical-align: inherit;">ุงูุญุตูู ุนูู! </font><font style="vertical-align: inherit;">&lt;...&gt; ูุฑุฉ ุฃุฎุฑู! </font><font style="vertical-align: inherit;">&lt;...&gt; ูู ุงููุฌูุฉ! "</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุณุงุฏุณุฉ ุนุดุฑุฉ. </font><font style="vertical-align: inherit;">ููุทูุฉ</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ูุชููุน ุ ูุง ูููู ููุฃุทูุงู ุงููุงุถุฌูู ุฃู ูููููุง ุชุญุช ูุฃูู ูุงูุฏููู ุทูุงู ุญูุงุชูู - ูุฌุจ ุนูููู ุนุงุฌูุงู ุฃู ุขุฌูุงู ุงุฎุชูุงุฑ ุทุฑูููู ููุชุงุจุนุชู ุจุฌุฑุฃุฉ ูุงูุชุบูุจ ุนูู ุงูุตุนูุจุงุช ูุงูุชุนุทููุงุช. </font><font style="vertical-align: inherit;">ูุฐุง ูุถุฌุช ุงูููููุงุช ุงูุชู ุทูุฑูุงูุง ุฅูู ุฏุฑุฌุฉ ุฃุตุจุญุช ุถููุฉ ุชุญุช ุณูู ูุงุญุฏ. </font><font style="vertical-align: inherit;">ููุฏ ุญุงู ุงูููุช ูุชูุณูููู ุฅูู ุนุฏุฉ ุฃุฌุฒุงุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ููุงุฌู ูููุฉ ุชุงููุฉ ุฅูู ุญุฏ ูุง. </font><font style="vertical-align: inherit;">ูู ุงูุถุฑูุฑู ุชูุณูู ุฌููุน ุงููุฆุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุญุชู ุงูุขู ุฅูู ุซูุงุซ ูุฌููุนุงุช:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ: ุงููุญุฏุฉ ุงูููุทูุฉ ุ ูุญุฑู ุงููุนุจุฉ ุ ูุงุฌูุงุช ุงูููุตู ูุงูุชุทุจููุงุช ุงููุณุชููุฉ ุนู ุงูููุตุฉ ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณุงุณูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงูุจ ุงูุณููุงุฑูููุงุช ูุงูุชุถุงุฑูุณ ูุงูุฃุนุฏุงุก ูุงูุนูุจุงุช - ููููุงุช ูุง ูุณูู ุจู "ุงููุบุงูุฑุฉ" ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุบุงูุฑุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจููุงุช ูุญุฏุฏุฉ ูููุงุฌูุงุช ุงููุญุฏุฏุฉ ูููุตุฉ ูุนููุฉ: ูู ุญุงูุชูุง ุ ุชุทุจูู ูุญุฏุฉ ุงูุชุญูู ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูู ุชุจุฏู ูุชูุฌุฉ ูุฐุง ุงููุตู ูู ุงูููุงูุฉ ุดูุฆูุง ูุซู ุงููุฎุทุท ุงูุชุงูู: </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซู ุงูููุซููู ูู ููุงูุฉ ุงูุนุฑุถ ุ ูุนูุฏ ุฃุจุทุงููุง ุงูููู ุฏุฎูู ุงููุดูุฏ ุจูุงูู ููุชู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ci/t5/gm/cit5gmpnmhdsrzoprl0fagpzpw8.png"></a> <br></div></div><br>       .          . <br><br> <b> Core</b> <br>        .         โ    , . ,  .     ,     .         Maven (  )       . <br><br>  <code>pom.xml</code>   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>junit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>junit-dep<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.8.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- other Kotlin setup --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">mvn -f <span class="hljs-string"><span class="hljs-string">"path_to_project/DiceCore/pom.xml"</span></span> install</code> </pre><br> <b> Cli</b> <br>       โ        .     .        ,    ,      (       ,        โ   ).      (,  .). <br><br>   <code>pom.xml</code>     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-cli<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.fusesource.jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.17.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.14.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.googlecode.soundlibs<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jlayer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- other Kotlin setup --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-assembly-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>single<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span>jar-with-dependencies<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span>my.company.dice.MainKt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>           โ   . <br><br> <b></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุณููุง ุ ุฃุฎูุฑูุง ุ ูู ูุดุฑูุน ูููุตู ุ ูุฎุฑุฌ ุงููุคุงูุฑุฉ. ูุฐุง ูู ุ ูู ุงูุณููุงุฑูููุงุช ูุงูุชุถุงุฑูุณ ูุงูุฃุนุฏุงุก ูุบูุฑูุง ูู ุงูุฃุดูุงุก ุงููุฑูุฏุฉ ูู ุนุงูู ุงููุนุจุฉ ุงูุชู ูููู ูููุธูู ูุณู ุงูุณููุงุฑูู ุจุดุฑูุชู ุชุฎูููุง (ุญุณูุงู ุ ุฃู ุญุชู ุงูุขู ููุท ุฎูุงููุง ุงููุฑุถู ุงูุฎุงุต - ูุญู ูุง ุฒููุง ูุตูู ุงููุนุจุฉ ุงููุญูุฏ ูู ุงูููุทูุฉ). ุชููู ุงูููุฑุฉ ูู ุชุฌููุน ุงููุตูุต ูู ูุฌููุนุงุช (ูุบุงูุฑุงุช) ูุชูุฒูุน ูู ูุฌููุนุฉ ูุซู ูุดุฑูุน ูููุตู (ุนูู ุบุฑุงุฑ ููู ูุชู ุฐูู ูู ุนุงูู ุฃูุนุงุจ ุงูุทุงููุฉ ูุงูููุฏูู). ุฃู ุ ูู ุจุชุฌููุน ูุญููุธุงุช ุงูุฌุฑุฉ ููุถุนูุง ูู ูุฌูุฏ ูููุตู ุจุญูุซ ูููู ูุญุฑู ุงููุนุจุฉ ุจูุณุญ ูุฐุง ุงููุฌูุฏ ููุฑุจุท ุฌููุน ุงููุบุงูุฑุงุช ุงูููุฌูุฏุฉ ููู ุชููุงุฆููุง. ููุน ุฐูู ุ ูุฅู ุงูุชูููุฐ ุงูุชููู ููุฐุง ุงูููุฌ ูุญููู ุจุงููุตุงุนุจ ุงููุงุฆูุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃูู ุชุจุฏุฃุ ุญุณููุง ุ ุฃููุงู ุ ูู ุญูููุฉ ุฃููุง ููุฒุน ุงูููุงูุจ ูู ุดูู ูุฆุงุช ุฌุงูุง ูุญุฏุฏุฉ (ูุนู ุ ุถุฑุจูู ููุจุฎูู - ููุฏ ุชููุนุช ูุฐุง). ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุญููุฆุฐู ูุฌุจ ุฃู ุชููู ูุฐู ุงููุฆุงุช ูู ูุณุงุฑ ุงูุชุทุจูู ุนูุฏ ุจุฏุก ุงูุชุดุบูู. ูุฑุถ ูุฐุง ุงููุทูุจ ููุณ ุจุงูุฃูุฑ ุงูุตุนุจ - ููููู ุชุณุฌูู ูููุงุช ุงูุฌุฑุฉ ุงูุฎุงุตุฉ ุจู ุตุฑุงุญุฉ ูู ูุชุบูุฑ ุงูุจูุฆุฉ ุงูููุงุณุจ (ุจุฏุกูุง ูู Java 6 ุ ููููู ุญุชู ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุญุฑู ุงูุจุฏู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font><font style="vertical-align: inherit;">).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">java -classpath <span class="hljs-string"><span class="hljs-string">"path_to_project/DiceCli/target/adventures/*"</span></span> -jar path_to_project/DiceCli/target/dice-1.0-jar-with-dependencies.jar</code> </pre><br> <i>ยซ,  ?    -jar  -classpath !ยป</i> <br><br>     . Classpath   jar-       <code>META-INF/MANIFEST.MF</code> (    โ <code>Claspath:</code> ).  ,       ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">maven-compiler-plugin</a> ,   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">maven-assembly-plugin</a> ).   wildcards  , ,   โ       jar-.  ,   ,     . <br><br>  ,    .  ,       .    <code>adventures/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฑูู ุฃู ุนุฏุฏ ูู ุงููุบุงูุฑุงุช ุ ููููุง ูุงูุช ูุฑุฆูุฉ ููุญุฑู ุงููุนุจุฉ ุฃุซูุงุก ุงูุชูููุฐ. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุฅู ุงููุธููุฉ ุงููุงุถุญุฉ ุชุจุฏู ุชุชุฌุงูุฒ ุงูุชูุซูู ุงูููุงุณู ูุนุงูู Java. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุณ ููุถุน ุชุฑุญูุจ. </font><font style="vertical-align: inherit;">ูุฌุจ ุงุชุจุงุน ููุฌ ูุฎุชูู ููุดุฑ ุงููุบุงูุฑุฉ ุงููุณุชููุฉ. </font><font style="vertical-align: inherit;">ุฃู ูุงุญุฏุ </font><font style="vertical-align: inherit;">ูุง ุฃุนุฑู ุ ุงูุชุจ ุงูุชุนูููุงุช - ุจุงูุชุฃููุฏ ุดุฎุต ูุง ูุฏูู ุฃููุงุฑ ุฐููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุบุถูู ุฐูู ุ ูุง ุชูุฌุฏ ุฃููุงุฑ ุ ุฅููู ุฎุฏุนุฉ ุตุบูุฑุฉ (ุฃู ูุจูุฑุฉ ุ ููููุง ูุทุฑููุฉ ูุธุฑุชู) ุชุชูุญ ูู ุฅุถุงูุฉ ุงูุชุจุนูุงุช ุฏููุงูููููุง ุฅูู classpath ุฏูู ุญุชู ูุนุฑูุฉ ุฃุณูุงุฆูุง ูุฏูู ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุชุฑุฌูุฉ ุงููุดุฑูุน: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Windows:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">ECHO</span></span> OFF <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\DiceCore\pom.xml" install <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\DiceCli\pom.xml" package <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\TestAdventure\pom.xml" package <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> path_to_project\DiceCli\target\adventures <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> "path_to_project\TestAdventure\target\test-adventure-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.jar" path_to_project\DiceCli\target\adventures\ <span class="hljs-built_in"><span class="hljs-built_in">chcp</span></span> <span class="hljs-number"><span class="hljs-number">65001</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> path_to_project\DiceCli\target\ java -Dfile.encoding=UTF-<span class="hljs-number"><span class="hljs-number">8</span></span> -cp "dice-cli-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar;adventures\*" my.company.dice.MainKt <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนูู ูููููุณ: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh mvn -f "path_to_project/DiceCore/pom.xml" install mvn -f "path_to_project/DiceCli/pom.xml" package mvn -f "path_to_project/TestAdventure/pom.xml" package mkdir path_to_project/DiceCli/target/adventures cp path_to_project/TestAdventure/target/test-adventure-1.0.jar path_to_project/DiceCli/target/adventures/ cd path_to_project/DiceCli/target/ java -cp "dice-cli-1.0-jar-with-dependencies.jar:adventures/*" my.company.dice.MainKt</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุงูุฎุฏุนุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุ </font></font><code>-jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูู ูุดุฑูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cli</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู classpath ููุญุฏุฏ ุจูุถูุญ ุงููุฆุฉ ุงูููุฌูุฏุฉ ููู ูููุทุฉ ุฅุฏุฎุงู </font></font><code>MainKt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฃููุง ูููู ุจุชูุตูู ุฌููุน ุงูุฃุฑุดููุงุช ูู ุงููุฌูุฏ </font></font><code>adventures/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุญุงุฌุฉ ููุฅุดุงุฑุฉ ูุฑุฉ ุฃุฎุฑู ุฅูู ุฃู ูุฏู ูุฐุง ุงููุฑุงุฑ ุงูููุชูู - ุฃูุง ุฃุนุฑู ุฐูู ุ ุดูุฑุงู. </font><font style="vertical-align: inherit;">ูู ุงูุฃูุถู ุฃู ุชูุชุฑุญ ุฃููุงุฑู ูู ุงูุชุนูููุงุช. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุฌุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(เฒฅ๏นเฒฅ)</font></font><br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุณุงุจุนุฉ ุนุดุฑุฉ. </font><font style="vertical-align: inherit;">ูุตุฉ</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ูู ูููุงุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุง ูุฏูุฑ ุญูู ุงูุฌุงูุจ ุงูููู ูุณูุฑ ุงูุนูู ุ ููู ุงูุฃูุนุงุจ ููุณุช ูุฌุฑุฏ ููุฏ ุจุฑูุฌู. ูุฐู ูู ุนูุงูู ูุซูุฑุฉ ูุน ุฃุญุฏุงุซ ูุซูุฑุฉ ูุดุฎุตูุงุช ุญูููุฉ ุ ูุงูุชู ุชุบูุต ูู ุฑุฃุณู ุ ููุจุฐ ุงูุนุงูู ุงูุญูููู. ูู ุนุงูู ูู ูุฐุง ุงููุจูู ุบูุฑ ุนุงุฏู ุจุทุฑููุชู ุงูุฎุงุตุฉ ููุซูุฑุฉ ููุงูุชูุงู ุจุทุฑููุชู ุงูุฎุงุตุฉ ุ ูุงูุชู ูุง ูุฒุงู ุงููุซูุฑ ูููุง ูุชุฐูุฑูุง ุ ุจุนุฏ ุณููุงุช ุนุฏูุฏุฉ. ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชุชุฐูุฑ ุนุงููู ุจูุดุงุนุฑ ุฏุงูุฆุฉ ุฃูุถูุง ุ ูุงุฌุนูู ุบูุฑ ุนุงุฏู ูููุชุน.</font></font><br><br> ,   ,   -,  -         (  ,   ?).     ,     (        ), , -  ,  (   ,        )   (        ).  ,      โ        . <br><br>        โ              . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  </b> <div class="spoiler_text" style=";text-align:right;direction:rtl">         ,    ,      .      ,     :  ( )   ( ),   .       ,     . <br><br>   โ   ,              .     ,                  ,     . <br><br> ,  ,  - . ,    ,  ,           ,     .       . <br></div></div><br> ,  ,  ,      ,       ,   ,  .       ,        . ,          :      ,      ,     ,        โ      :    /,     .      (     )    (,  ). <br><br>         โ   , , ,       ( :  ,  , -,  โฆ    ).      ,      ( )     ,        ,     ,             โฆ   .  ,     ,     ,           .   ,        . <br><br>      ?    โ ,     ,         :       ,   โ  .        -  ,   ,   . <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ุงูุชุงููุ </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูู ุจุฑูุฌุฉ ุฃุฎุฑู ููุจุฏุฃ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตููู ุงููุนุจุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงูุขู ุญุงู ุงูููุช ูุนุฏู ูุชุงุจุฉ ุงูููุฏ ุ ูููู ููุชูููุฑ ูู ุงูุณููุงุฑูููุงุช ูุงูููุงูุน ูุงูุฃุนุฏุงุก - ููุง ุชุนูููู ุ ูุฐู ุงูุฃุดูุงุก ุงูุซูุงูุฉ. ุฅุฐุง ููุช ูุง ุชุฒุงู ุชุนูู ุจููุฑุฏู ุ ูุฃููุฆู - ููุฏ ูุตูุช ุฅูู ุงููุฑุญูุฉ ุงูุชู ุชุชุณุงุฑุน ูููุง ูุนุธู ูุดุงุฑูุน ุงูุฃูุนุงุจ. ูู ุงุณุชูุฏูููุงุช AAA ุงููุจูุฑุฉ ุ ูุนูู ุงูุฃุดุฎุงุต ุงูุฎุงุตูู ููุตูููู ููุชุงุจ ูุตูุต ูุชูููู ุฃููุงููุง ููุฐุง ุงูุบุฑุถ - ููุณ ูุฏููู ููุงู ูุฐูุจูู ุฅููู. ููู ุฃูุงููุง ุงููุซูุฑ ูู ุงูุฎูุงุฑุงุช: ุงูุฐูุงุจ ูู ูุฒูุฉ ุนูู ุงูุฃูุฏุงู ุ ูุชูุงูู ุงูุทุนุงู ุ ูุงูููู ุจุทุฑููุฉ ุบูุฑ ุนุงุฏูุฉ - ูููู ูุง ุงูุฐู ูููู ุงูููุงู ุจู ููุงู ุ ุญุชู ูุจุฏุก ูุดุฑูุน ุฌุฏูุฏ ุ ุจุงุณุชุฎุฏุงู ุงูุฎุจุฑุฉ ูุงููุนุฑูุฉ ุงููุชุฑุงููุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุช ูุง ุชุฒุงู ููุง ูุชุฑูุฏ ุงููุชุงุจุนุฉ ุจุฃู ุซูู ุ ูุงุณุชุนุฏ ููุตุนูุจุงุช. ููุฉ ุงูููุช ุ ุงููุณู ุ ููุฉ ุงูุฅููุงู ุงูุฅุจุฏุงุนู - ุดูุก ุณูุตุฑูู ุจุงุณุชูุฑุงุฑ. ููุณ ูู ุงูุณูู ุงูุชุบูุจ ุนูู ูู ูุฐู ุงูุนูุงุฆู (ูุฑุฉ ุฃุฎุฑู ุ ุชูุช ูุชุงุจุฉ ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุญูู ูุฐุง ุงูููุถูุน) ุ ููู ุฐูู ูููู. ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฃูุตุญู ุฃู ุชุฎุทุท ุจุนูุงูุฉ ููุฒูุฏ ูู ุงูุชุทููุฑ ูููุดุฑูุน. ูุญุณู ุงูุญุธ ุ ูุญู ูุนูู ูู ุฃุฌู ุณุนุงุฏุชูุง ุ ูุงููุงุดุฑูู ูุง ูุฏูุนูููุง ุ ููุง ุฃุญุฏ ูุทูุจ ุงูููุงุก ุจุฃู ููุงุนูุฏ ููุงุฆูุฉ ูุญุฏุฏุฉ - ููุง ูุนูู ุฃู ููุงู ูุฑุตุฉ ูููุตูู ุฅูู ุงูููุทุฉ ุฏูู ุชุณุฑุน ุบูุฑ ุถุฑูุฑู. ุถุน "ุฎุฑูุทุฉ ุทุฑูู" ูููุดุฑูุน ุ ูุญุฏุฏ ุงููุฑุงุญู ุงูุฑุฆูุณูุฉ ู (ุฅุฐุง ูุงู ูุฏูู ุงูุดุฌุงุนุฉ) ุจุดุฑูุท ุชูุฑูุจูุฉ ูุชูููุฐูุง. ุงุญุตู ุนูู ุฏูุชุฑ ููุงุญุธุงุช (ููููู ุฅููุชุฑููููุง) ูุงูุชุจ ุจุงุณุชูุฑุงุฑ ุงูุฃููุงุฑ ุงูุชู ุชุธูุฑ ููู (ุญุชู ุงูุงุณุชููุงุธ ุงูููุงุฌุฆ ูู ููุชุตู ุงูููู).ุญุฏุฏ ุชูุฏูู ุจุงูุฌุฏุงูู (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุซู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุฃู ุบูุฑูุง ูู ุงูุฃุฌูุฒุฉ ุงููุณุงุนุฏุฉ. ุงุจุฏุฃ ุจุงููุซุงุฆู: ุงูุฎุงุฑุฌูุฉ ูุงูุนุงูุฉ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wiki ุ ุนูู ุณุจูู ุงููุซุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ููุฌุชูุน ุงููุนุฌุจูู ุงูุถุฎู ูู ุงููุณุชูุจู ุ ูุงูุฏุงุฎูู ุ ูููุณู (ูู ุฃุดุงุฑู ุงูุฑุงุจุท) - ุตุฏูููู ุ ุจุฏููู ุจุนุฏ ูุฑูุฑ ุดูุฑ ุ ูู ุชุชุฐูุฑ ูุงุฐุง ุจุงูุถุจุท ูููู ูุนูุช. ุจุดูู ุนุงู ุ ุงูุชุจ ุฃูุจุฑ ูุฏุฑ ูููู ูู ุงููุนูููุงุช ุงููุฑุงููุฉ ุญูู ูุนุจุชู ุ ููุท ุชุฐูุฑ ุฃู ุชูุชุจ ุงููุนุจุฉ ููุณูุง. ุงูุชุฑุญุช ุฎูุงุฑุงุช ุฃุณุงุณูุฉ ุ ููููู ูุง ุฃูุฏู ูุตูุญุฉ ูุญุฏุฏุฉ - ููุฑุฑ ูู ูุงุญุฏ ูููุณู ููู ูููู ุฃูุซุฑ ููุงุกูุฉ ูู ูุชูุธูู ุนูููุฉ ุนููู. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูููู ูุง ูุฒุงู ุ ูุง ุชุฑูุฏ ุงูุชุญุฏุซ ุนู ุฑุตูุฏ ุงููุนุจุฉุ"</font></font></i> <br><br>     ,         .     โ       ,           : ยซ   ?ยป.        ,   , : ยซ         ?ยป.       ( , )   .       ,         (challenge) .   ,    ,         ,  - - .     ,   โ     ,        .        ,     โฆ   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุนูู ุขุฎุฑ ุ ูุฌุจ ุฃู ุชููู ุงููุนุจุฉ ูุชูุงุฒูุฉ. ูุฐุง ููุทุจู ุจุดูู ุฎุงุต ุนูู ูุนุจุฉ ุงูููุญ ุ ุญูุซ ูุชู ุฅุถูุงุก ุงูุทุงุจุน ุงูุฑุณูู ุนูู ุงูููุงุนุฏ ุจุดูู ูุงุถุญ.</font></font> ููู ููุนู ุฐููุ   .     -,     ( ,  )         (   ),     โ <s>  </s> <i>playtesting</i> .     .   โ   .      , , ,    .     โ    .  ,  ,     : ยซ  feedback!ยป. , -     ,   ,      โ          ( ,     ?) (-). <br><br>   ,  โฆ   .   (   !) โ  -   .              (,     ,      ).  ,    โ  ,       .       . <br><br>      .    . ! <br><br> <i>ยซ!  ?       ?  ,  ,  ?ยป</i> <br><br><h2 style=";text-align:right;direction:rtl"> <font color="#0474a0">. </font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุตู ุชูุงูู ูุญุฑู ุงููุนุจุฉ ุงูุฎุงุต ุจูุง ูุน ูุธุงู Android ุ ุฏุนูุง ูุชุฑู ุงููุตู ุจููุฑุฏู ููููุฑ ูู ูุตู </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุซู ุ ูููู ุฃุจุณุท ุจูุซูุฑ </font></font><code>MainMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุง ููุญู ุงูุงุณู ุ ูุฅูู ููุฏู ุฅูู ุชุทุจูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ููุชุทุจูู ุ ููู ุงููุงูุน ุ ูู ุงููุฆุฉ ุงูุฃููู ุงูุชู ูุจุฏุฃ ุงููุณุชุฎุฏู ูู ุงูุชูุงุนู ูุนูุง.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุงุฌูุฉ ูุญุฏุฉ ุงูุชุญูู ุ ูุจุฏู ูุฐุง</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/fx/ov/q7/fxovq7xubhonlcjjwziyvhfl_6g.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซู ุงููุตู </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅูู ูุญุฏุฏ ุญููุฉ ูุง ููุงุฆูุฉ ุ ุนูุฏ ูู ุชูุฑุงุฑ ูุชู ุฑุณู ุงูุดุงุดุฉ ููู ููุทูุจ ุงูุฃูุฑ ูู ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ููุท ูุง ููุฌุฏ ููุทู ูุนูุฏ ููุง ููุฐู ุงูุฃูุงูุฑ ุฃุตุบุฑ ุจูุซูุฑ. </font><font style="vertical-align: inherit;">ูุญู ูููุฐ ุฃุณุงุณุง ุดูุก ูุงุญุฏ - "ุงูุฎุฑูุฌ".</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทุท ุงููุดุงุท ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/0_/xq/b5/0_xqb5sblm16brzqyrpibavvxco.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูู ุ ุฃููุณ ูุฐููุ </font></font> ุนู ุฐูู ูุงูููุงู.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑูุฒ ูู ุฃูุถุง ุชุฑุชูุจ ุฃุจุณุท ูู ุญูุซ ุงูุญุฌู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainMenu</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer: MenuRenderer, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor: MenuInteractor ) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actions = ActionList.EMPTY <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Audio.playMusic(Music.MENU_MAIN) actions = ActionList() actions.add(Action.Type.NEW_ADVENTURE) actions.add(Action.Type.CONTINUE_ADVENTURE, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) actions.add(Action.Type.MANUAL, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) actions.add(Action.Type.EXIT) processCycle() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processCycle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { renderer.drawMainMenu(actions) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (interactor.pickAction(actions).type) { Action.Type.NEW_ADVENTURE -&gt; TODO() Action.Type.CONTINUE_ADVENTURE -&gt; TODO() Action.Type.MANUAL -&gt; TODO() Action.Type.EXIT -&gt; { Audio.stopMusic() Audio.playSound(Sound.LEAVE) renderer.clearScreen() Thread.sleep(<span class="hljs-number"><span class="hljs-number">500</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> AssertionError(<span class="hljs-string"><span class="hljs-string">"Should not happen"</span></span>) } } } }</code> </pre><br>        <code>MenuRenderer</code>  <code>MenuInteractor</code> ,    . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuRenderer</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Renderer { fun drawMainMenu</span></span></span></span>(actions: ActionList) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interactor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action }</code> </pre><br>    ,        . ,    ,   <b>Cli</b>   (  <b>Droid</b> ),     <b>Core</b> .  . <br><br>  Android Studio (      ),   ,           Kotlin.      <b>Core</b> ,     Maven-  . <br><br><pre style=";text-align:right;direction:rtl"> <code class="lua hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { applicationId <span class="hljs-string"><span class="hljs-string">"my.company.dice"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">14</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> } } dependencies { implementation <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"</span></span> implementation <span class="hljs-string"><span class="hljs-string">"my.company:dice-core:1.0"</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ููุน ุฐูู ุ ูู ูุฑู ุฃู ุดุฎุต ุชุจุนูุฉ ูุฏููุง - ูุฌุจ ุนููู ุงูุฅุดุงุฑุฉ ุจูุถูุญ ุฅูู ุงูุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ูุณุชูุฏุน ูุญูู (mavenLocal) ุนูุฏ ุจูุงุก ุงููุดุฑูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="lua hljs">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.3.20'</span></span> repositories { google() jcenter() mavenLocal() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.3.0'</span></span> classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></span> } } allprojects { repositories { google() jcenter() mavenLocal() } }</code> </pre><br>  ,        ,   โ  .  ,   ,    : <code>SoundPlayer</code> , <code>MusicPlayer</code> , <code>MenuInteractor</code> ( <code>GameInteractor</code> ), <code>MenuRenderer</code> ( <code>GameRenderer</code> )  <code>StringLoader</code> ,    ,    .    ,          . <br><br>           (, ,    ) Android โ      <code>Canvas</code> .      -   <code>View</code> โ     ยซยป.    ,       ,      ,          .        <code>View</code> โ  ,          ( ,       ). <br><br>      View     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my.company.dice"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@mipmap/ic_launcher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@style/AppTheme"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".ui.MainActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:screenOrientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sensorLandscape"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"orientation|keyboardHidden|screenSize"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>      โ       ,    .  ,      ,     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AppTheme"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android:Theme.Black.NoTitleBar.Fullscreen"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>       ,    <b>Cli</b>    ,     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_new_adventure_key"</span></span></span><span class="hljs-tag">&gt;</span></span>N<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_new_adventure_name"</span></span></span><span class="hljs-tag">&gt;</span></span>ew adventure<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_continue_adventure_key"</span></span></span><span class="hljs-tag">&gt;</span></span>C<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_continue_adventure_name"</span></span></span><span class="hljs-tag">&gt;</span></span>ontinue adventure<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_manual_key"</span></span></span><span class="hljs-tag">&gt;</span></span>M<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_manual_name"</span></span></span><span class="hljs-tag">&gt;</span></span>anual<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_exit_key"</span></span></span><span class="hljs-tag">&gt;</span></span>X<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_exit_name"</span></span></span><span class="hljs-tag">&gt;</span></span>Exit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>           (   ),    <code>/assets/sound/leave.wav</code>  <code>/assets/music/menu_main.mp3</code> . <br><br>    ,     (, ).    ,      ,        . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">   </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/xb/m4/uc/xbm4ucar6ewumegpof3hr53c0a4.png"></a> <br></div></div><br> ,    ,    . <br><br> , ,    โ  <code>DiceSurface</code> โ    <code>View</code> ,         (       <code>SurfaceView</code> โ   <code>GlSurfaceView</code> โ      ,     ,   ,     ,    ).    ,       :     ,       .    . <br><br>     ,  Renderer        .       โ    View,      <code>onDraw()</code>   , ,   , .     <code>drawMainMenu()</code>  <code>MainMenu</code> ?     ? <br><br>        .  <code>DiceSurface</code>     <code>instructions</code> โ  ,  ,         <code>onDraw()</code> . Renderer ,      ,     .   ,    <i></i> (strategy).    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> RenderInstructions = (Canvas, Paint) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instructions: RenderInstructions = { _, _ -&gt; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> paint = Paint().apply { color = Color.YELLOW style = Paint.Style.STROKE isAntiAlias = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateInstructions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instructions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RenderInstructions</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.instructions = instructions <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.postInvalidate() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDraw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(canvas: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Canvas</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onDraw(canvas) canvas.drawColor(Color.BLACK) <span class="hljs-comment"><span class="hljs-comment">//Fill background with black color instructions.invoke(canvas, paint) //Execute current render instructions } } class DroidMenuRenderer(private val surface: DiceSurface): MenuRenderer { override fun clearScreen() { surface.updateInstructions { _, _ -&gt; } } override fun drawMainMenu(actions: ActionList) { surface.updateInstructions { c, p -&gt; val canvasWidth = c.width val canvasHeight = c.height //Draw title text p.textSize = canvasHeight / 3f p.strokeWidth = 0f p.color = Color.parseColor("#ff808000") c.drawText( "DICE", (canvasWidth - p.measureText("DICE")) / 2f, (buttonTop - p.ascent() - p.descent()) / 2f, p ) //Other instructions... } } }</span></span></code> </pre><br>  ,    -    Renderer,         ,       View.      <code>instructions</code> โ           ,  Kotlin     . <br><br>   Interactor.     :       (),   () ,     .       โ     Looper,          ,      .     Interactor -      ,     Activity    View  ,        . <br><br>          <code>BlockingQueue</code> .  <code>DroidMenuInteractor</code>    <code>take()</code> ,        ,       (    <code>Action</code> ). <code>DiceSurface</code> ,   ,      (  <code>onTouchEvent()</code>  <code>View</code> ),         <code>offer()</code> .     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actionQueue: BlockingQueue&lt;Action&gt; = LinkedBlockingQueue&lt;Action&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awaitAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Action = actionQueue.take() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouchEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MotionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.action == MotionEvent.ACTION_UP) { actionQueue.offer(Action(Action.Type.NONE), <span class="hljs-number"><span class="hljs-number">200</span></span>, TimeUnit.MILLISECONDS) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMenuInteractor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface: DiceSurface) : Interactor { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { surface.awaitAction() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type = surface.awaitAction().type list .filter(Action::isEnabled) .find { it.type == type } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } } } }</code> </pre><br>  , Interactor   <code>awaitAction()</code>     - ,   .    ,     .  UI-  ,        ,      ,         (,    ).        /   . <br><br> ,     ,   -.      ,           .    โ Interactor   ,         โ      Renderer.     .  <code>DiceSurface</code>     โ    (  ,   -   ).        <code>Action</code> . Renderer         ,  <code>onTouchEvent()</code>  ,     ,      <code>Action</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveRect</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> action: Action, left: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, top: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, right: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, bottom: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = RectF(left, top, right, bottom) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, y: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, w: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, h: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = rect.contains(x / w, y / h) }</code> </pre><br>  <code>check()</code>       .  ,    Renderer' (    ,   )         .         (    )    0  1     .     ,       โ     .         . <br><br>    <code>DiceSurface</code>  ,    ( <code>addRectangle()</code>  <code>clearRectangles()</code> )     (  Renderer'),   <code>onTouchEvent()</code> ,      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actionQueue: BlockingQueue&lt;Action&gt; = LinkedBlockingQueue&lt;Action&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectangles: MutableSet&lt;ActiveRect&gt; = Collections.newSetFromMap(ConcurrentHashMap&lt;ActiveRect, <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>&gt;()) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instructions: RenderInstructions = { _, _ -&gt; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> paint = Paint().apply { color = Color.YELLOW style = Paint.Style.STROKE isAntiAlias = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateInstructions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instructions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RenderInstructions</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.instructions = instructions <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.postInvalidate() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearRectangles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { rectangles.clear() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addRectangle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">, left: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, top: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, right: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, bottom: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { rectangles.add(ActiveRect(action, left, top, right, bottom)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awaitAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Action = actionQueue.take() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouchEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MotionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.action == MotionEvent.ACTION_UP) { with(rectangles.firstOrNull { it.check(event.x, event.y, width.toFloat(), height.toFloat()) }) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { actionQueue.put(action) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { actionQueue.offer(Action(Action.Type.NONE), <span class="hljs-number"><span class="hljs-number">200</span></span>, TimeUnit.MILLISECONDS) } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDraw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(canvas: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Canvas</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onDraw(canvas) canvas.drawColor(Color.BLACK) instructions(canvas, paint) } }</code> </pre><br>       โ     <code>ConcurrentModificationException</code>  ,          (     ). <br><br>   <code>DroidMenuInteractor</code>   ,   <code>DroidMenuRenderer</code> .         <code>ActionList</code> .     DICE,     .       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMenuRenderer</span></span></span><span class="hljs-class"> </span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface: DiceSurface, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> loader: StringLoader ) : MenuRenderer { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> helper = StringLoadHelper(loader) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { surface.clearRectangles() surface.updateInstructions { _, _ -&gt; } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMainMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//Prepare rectangles surface.clearRectangles() val percentage = 1.0f / actions.size actions.forEachIndexed { i, a -&gt; surface.addRectangle(a, i * percentage, 0.45f, i * percentage + percentage, 1f) } //Prepare instructions surface.updateInstructions { c, p -&gt; val canvasWidth = c.width val canvasHeight = c.height val buttonTop = canvasHeight * 0.45f val buttonWidth = canvasWidth / actions.size val padding = canvasHeight / 144f //Draw title text p.textSize = canvasHeight / 3f p.strokeWidth = 0f p.color = Color.parseColor("#ff808000") p.isFakeBoldText = true c.drawText( "DICE", (canvasWidth - p.measureText("DICE")) / 2f, (buttonTop - p.ascent() - p.descent()) / 2f, p ) p.isFakeBoldText = false //Draw action buttons p.textSize = canvasHeight / 24f actions.forEachIndexed { i, a -&gt; p.color = if (a.isEnabled) Color.YELLOW else Color.LTGRAY p.strokeWidth = canvasHeight / 240f c.drawRect( i * buttonWidth + padding, buttonTop + padding, i * buttonWidth + buttonWidth - padding, canvasHeight - padding, p ) val name = mergeActionData(helper.loadActionData(a)) p.strokeWidth = 0f c.drawText( name, i * buttonWidth + (buttonWidth - p.measureText(name)) / 2f, (canvasHeight + buttonTop - p.ascent() - p.descent()) / 2f, p ) } } } private fun mergeActionData(data: Array&lt;String&gt;) = if (data.size &gt; 1) { if (data[1].first().isLowerCase()) data[0] + data[1] else data[1] } else data.getOrNull(0) ?: "" }</span></span></code> </pre><br>       <code>StringLoader</code>     <code>StringLoadHelper</code> (   ).     <code>ResourceStringLoader</code>       ()  .    ,        โ      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ResourceStringLoader</span></span></span></span>(context: Context) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packageName = context.packageName <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> resources = context.resources <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String = resources.getString(resources.getIdentifier(key, <span class="hljs-string"><span class="hljs-string">"string"</span></span>, packageName)) }</code> </pre><br>      .      <code>MediaPlayer</code> ,       .       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMusicPlayer</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> context: Context): MusicPlayer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentMusic: Music? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> player = MediaPlayer() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentMusic == music) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } currentMusic = music player.setAudioStreamType(AudioManager.STREAM_MUSIC) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> afd = context.assets.openFd(<span class="hljs-string"><span class="hljs-string">"music/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${music.toString().toLowerCase()}</span></span></span><span class="hljs-string">.mp3"</span></span>) player.setDataSource(afd.fileDescriptor, afd.startOffset, afd.length) player.setOnCompletionListener { it.seekTo(<span class="hljs-number"><span class="hljs-number">0</span></span>) it.start() } player.prepare() player.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { currentMusic = <span class="hljs-literal"><span class="hljs-literal">null</span></span> player.release() } }</code> </pre><br>  . -,  <code>prepare()</code>  ,      ( )   .       ,     <code>prepareAsync()</code>  <code>OnPreparedListener</code> . -,         (,        ),     . --โฆ <br><br>   <code>MediaPlayer</code>  ,        (   ),   <code>SoundPool</code> .     ,        ,    .   โ     (  ,  ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidSoundPlayer</span></span></span></span>(context: Context) : SoundPlayer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> soundPool: SoundPool = SoundPool(<span class="hljs-number"><span class="hljs-number">2</span></span>, AudioManager.STREAM_MUSIC, <span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sounds = mutableMapOf&lt;Sound, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rate = <span class="hljs-number"><span class="hljs-number">1f</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lock = ReentrantReadWriteLock() <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { Thread(SoundLoader(context)).start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lock.readLock().tryLock()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { sounds[sound]?.let { s -&gt; soundPool.play(s, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, rate) } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { lock.readLock().unlock() } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundLoader</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> context: Context) : Runnable { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> assets = context.assets lock.writeLock().lock() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Sound.values().forEach { s -&gt; sounds[s] = soundPool.load( assets.openFd(<span class="hljs-string"><span class="hljs-string">"sound/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${s.toString().toLowerCase()}</span></span></span><span class="hljs-string">.wav"</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span> ) } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { lock.writeLock().unlock() } } } }</code> </pre><br>        <code>Sound</code>      .        ,        <code>ReentrantReadWriteLock</code> . <br><br>  -       <code>MainActivity</code> โ    ?  ,  <code>MainMenu</code> (  <code>Game</code> )     . <br><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) Audio.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(DroidSoundPlayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), DroidMusicPlayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface = DiceSurface(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer = DroidMenuRenderer(surface) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor = DroidMenuInteractor(surface, ResourceStringLoader(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) setContentView(surface) Thread { MainMenu(renderer, interactor).start() finish() }.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBackPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { } }</code> </pre><br>  ูุฐุง ุ ูู ุงููุงูุน ุ ูู ูู ุดูุก.          : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">      </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/m0/u7/-7/m0u7-7lcjmuttu9rerrvirhfgyy.png"></a> <br></div></div><br>   ,   ,       ,         . <br><br><h2 style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุฏุฉ </h2><br> ,      .   โ      .  ,          โ <s>  </s>    .   , ,    .        (  ,           ): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> <b>Core</b></a> ; </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> <b>Cli</b></a> ; </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> <b>Droid</b></a> ; </li></ul><br>     -      ,     ,     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">!</a> <br><br>      launcher (       ).   JavaFX         OpenJDK ( โ ),            .       readme.txt ( ?). , , ,    . <br><br>    ,   ,  ,  -  , ,   , lore ,       .  .    ,    ,   .   . <br><br>  ูู ุงูุชูููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar445278/">https://habr.com/ru/post/ar445278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar445268/index.html">ุชูุงุตูู GraphQL: ูุงุฐุง ูููู ูููุงุฐุง</a></li>
<li><a href="../ar445270/index.html">[ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ] ุจุงุด ูููุจุชุฏุฆูู: 21 ุฃูุฑ ูููุฏ</a></li>
<li><a href="../ar445272/index.html">JavaScript ูู ุฃูุถู ูุบุฉ ุจุฑูุฌุฉ ูููุจุชุฏุฆูู. ูู ูู ุฃู ูุงุ</a></li>
<li><a href="../ar445274/index.html">ุนูุฏูุง ูููู "Zoรซ"! == "Zoรซ" ุ ุฃู ููุงุฐุง ุชุญุชุงุฌ ุฅูู ุชุทุจูุน ุณูุงุณู Unicode</a></li>
<li><a href="../ar445276/index.html">ุฏููู UseEffect ุงููุงูู</a></li>
<li><a href="../ar445280/index.html">ุฑุจุญูุฉ ุงูููุงูุน ูุงูุฎุฏูุงุช</a></li>
<li><a href="../ar445284/index.html">ClickHouse ุชุญูููุงุช ุงูููุชุฌ ููููุชุงูุชู</a></li>
<li><a href="../ar445286/index.html">ูุณูุฏ ูููุฏููู ูููุฎ: ููุตุฉ ุงูุชุณุฌูู Hedera Hashgraph ุงูููุฒุนุฉ</a></li>
<li><a href="../ar445288/index.html">ูู ูุง ุชุจุฐูููู ูู ุงููุฑูุถ ุงูุงุณุชููุงููุฉ ูุงูุจูุงูุงุช ุงูุดุฎุตูุฉ "ูู ููุงู ูุงุญุฏ" ...</a></li>
<li><a href="../ar445290/index.html">ููููุฉ ุชูููุฐ ุนูููุงุช ููุญุฏุฉ ูุน ูุฑุงุนุงุฉ ุฌููุน ููุฒุงุช ุงูุดุฑูุฉุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>