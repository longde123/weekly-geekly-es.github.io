<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèîÔ∏è üë© üñêÔ∏è Ma vie avec Boost Graph Library üë©üèø‚Äçü§ù‚Äçüë®üèº ü¶ê üßëüèΩ‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article, dont la premi√®re partie est pr√©sent√©e ici, contient diverses consid√©rations de l'auteur, accumul√©es au cours du long d√©veloppement d'un sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ma vie avec Boost Graph Library</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471652/">  L'article, dont la premi√®re partie est pr√©sent√©e ici, contient diverses consid√©rations de l'auteur, accumul√©es au cours du long d√©veloppement d'un syst√®me sp√©cialis√© de recherche de connexions sociales, bas√© sur la Boost Graph Library (BGL).  Cette section (technique) r√©sume les impressions de l'auteur sur l'utilisation de cette biblioth√®que, soul√®ve des probl√®mes d'instrumentation lors de la cr√©ation d'applications graphiques et aborde certains probl√®mes pratiques de m√©taprogrammation en C ++. <br><a name="habracut"></a><br><h3>  BGL et ce avec quoi il est mang√© </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La biblioth√®que de mod√®les BGL est</a> probablement connue de tout d√©veloppeur ayant rencontr√© des t√¢ches graphiques.  Apparue dans Boost 1.18.1 en 2000, elle a imm√©diatement gagn√© des critiques d'approbation de classiques du genre comme Alexander Stepanov.  Le guide de la biblioth√®que, compil√© par Jeremy Sik, Lai-Kwan Lee et Andrew Lamsdane, a √©t√© publi√© en russe en 2006 par Peter (original - Jeremy G. Siek, Lie-Quan Lee et Andrew Lumsdaine, ¬´The Boost Graph Library¬ª, 2001 , Addison-Wesley).  La biblioth√®que a √©t√© intensivement mise √† jour et d√©velopp√©e presque jusqu'√† la fin de 2013 (Boost 1.55.0).  En particulier, en 2005, l'annonce de sa version distribu√©e (PBGL) est apparue, qui a √©t√© incluse dans Boost √† partir de la version 1.40 en 2009 et reste √† ce jour une sorte de standard de facto pour le calcul graphique sur des clusters haute performance, en tout cas, dans le monde acad√©mique.  Pour autant que l'histoire des commits puisse √™tre jug√©e, jusqu'en 2005, le principal d√©veloppeur de la biblioth√®que √©tait Jeremy Sik, apr√®s 2005 - Douglas Gregor, et en g√©n√©ral √† divers moments, un nombre consid√©rable de personnes diverses ont travaill√© sur la biblioth√®que.  Les publications qui lui sont consacr√©es sont apparues √† plusieurs reprises sur habr.com: tout d'abord, une s√©rie d'articles de Vadim Androsov est √† noter: [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3</a> ].  Ainsi, en principe, une litt√©rature bonne et diversifi√©e est consacr√©e √† la biblioth√®que, mais sa propre documentation, √©galement, d'une mani√®re g√©n√©rale, assez √©tendue, souffre quelque peu du fait que: <br><br><ol><li>  Sa table des mati√®res et ses sections racine, qui pr√©tendent fournir une liste exhaustive des entit√©s cl√©s, n'ont pas chang√© depuis 2001.  Par exemple, l'auteur de ces lignes, qui croyait na√Øvement que: <blockquote>  Le BGL fournit actuellement deux classes de graphiques et un adaptateur de liste de bords: <br><br>  liste_adjacence <br>  adjacency_matrix <br>  edge_list </blockquote>  , apr√®s un certain temps, j'ai √©t√© surpris de trouver la repr√©sentation compress√©e_sparse_row_graph (matrice creuse) impl√©ment√©e en 2005.  Une histoire similaire a eu lieu avec l'algorithme de Bron-Kerbosch.  Ne croyez pas la table des mati√®res, utilisez une recherche directe dans les fichiers d'en-t√™te; <br></li><li>  Il n‚Äôexiste pas de liste unique comment√©e des cat√©gories internes de la biblioth√®que (container_category, parallel_edge_traits, iterator_stability, etc., etc.) n√©cessaires pour impl√©menter vos propres vues.  Des probl√®mes de compr√©hension de ce qui se passe d√©passent, apparemment, tous les utilisateurs de la biblioth√®que qui veulent creuser plus profond√©ment, ce qui conduit √† l'apparition d'un `` type de code de travail '', ce qui prend beaucoup de temps et d'efforts pour l'amener √† un √©tat complet: voir, par exemple, une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discussion typique</a> . </li></ol><br>  Le nombre de cat√©gories et de s√©lecteurs divers, y compris ceux qui pr√™tent √† confusion, est si grand que les auteurs eux-m√™mes s'y trompent parfois.  Par exemple, dans les constructeurs du comprim√©_sparse_row_graph d√©j√† mentionn√©s ci-dessus, dans la version actuelle, il y a une erreur syst√©matique entra√Ænant des plantages lors de la tentative de copie d'une liste d'adjacence non dirig√©e: <br><br><img src="https://habrastorage.org/webt/5r/1e/se/5r1esesty1oui-pwco4b2pkfxei.jpeg"><br><br>  Il peut √™tre not√© ici √† l'occasion que le test complet d'un tel m√©canisme flexible est un probl√®me distinct, car il s'accompagne d'une explosion combinatoire du nombre de substitutions possibles. <br><br>  Il convient de noter avec regret qu'√† l'heure actuelle, les principaux d√©veloppeurs ont apparemment perdu tout int√©r√™t √† poursuivre les travaux sur la biblioth√®que et qu'au cours des six derni√®res ann√©es, elle n'a nullement √©puis√© son potentiel de d√©veloppement et ne s'est m√™me pas compl√®tement lib√©r√©e des incoh√©rences internes et des erreurs directes, en vol libre.  Les plans exprim√©s dans la r√©gion de 2011 pour √©tendre consid√©rablement l'ensemble des m√©thodes et couvrir de nouveaux domaines de la th√©orie des graphes (y compris en ajoutant un support de partitionnement de graphes interne √† la capacit√© de lire le format METIS) sont rest√©s sans suite.  Il semble √©galement que la biblioth√®que pourrait b√©n√©ficier beaucoup (au moins en termes de lisibilit√©) de l'utilisation g√©n√©ralis√©e de nouveaux produits qui sont devenus la norme apr√®s 2011. <br><br>  Ainsi, les probl√®mes li√©s au choix d'une biblioth√®que de r√©f√©rence pour les applications graphiques lors de la recherche √† partir de 2019 ne semblent pas aussi clairs que nous le souhaiterions, et au cours des 5 derni√®res ann√©es, l'incertitude a augment√© plut√¥t que diminu√©. <br><br>  Cette situation provoque une certaine tristesse, car la cr√©ation d'un m√©canisme universel similaire √† BGL, en soi, est une sorte d'exploit intellectuel, √† la fois en termes de puissance de l'approche et de richesse de l'arsenal de m√©thodes universelles mises en ≈ìuvre (une bonne cent et une centaine de threads simples et quelques dizaines distribu√©s) la biblioth√®que, pour autant que l'auteur de ces lignes soit connu, n'a toujours pas d'√©gal. <br><br>  √Ä l'heure actuelle, seule cette biblioth√®que permet, en principe, sans perte de performances, d'imposer des accords stricts sur la pr√©sentation des donn√©es et la perte de contr√¥le sur les m√©canismes internes de la biblioth√®que elle-m√™me, de s√©parer compl√®tement les algorithmes de graphes et les repr√©sentations graphiques, ce qui rend ces derni√®res compl√®tement ind√©pendantes des m√©tadonn√©es associ√©es aux ar√™tes et sommets ( qui, en principe, est √©videmment la mani√®re la plus correcte de faire les choses). <br><br>  Le mot ¬´fondamentalement¬ª est utilis√© ici pour une raison.  En consid√©rant une situation sp√©cifique en utilisant l'exemple de la classe compress√©e_sparse_row_graph de longue dur√©e d√©j√† mentionn√©e ci-dessus, nous pouvons noter, par exemple, les √©carts suivants par rapport aux normes √©lev√©es: <br><br><ol><li>  L'op√©rateur [] pour la liste d'adjacence et la matrice clairsem√©e g√®rent diff√©remment les propri√©t√©s internes et externes des ar√™tes (propri√©t√©s internes et group√©es): la premi√®re ne renvoie que des propri√©t√©s externes (les internes ne sont accessibles qu'avec property_map), la seconde renvoie une propri√©t√© de structure de trame contenant une liste commune de propri√©t√©s. </li><li>  La fonction get pour obtenir l'index de bord √† l'aide de boost :: property_map &lt;compress_sparse_row_graph, boost :: edge_index_t&gt; :: type est tomb√©e dans boost :: detail, et non dans boost, comme dans tous les autres cas. </li></ol><br>  Enfin, dans le mod√®le compress_sparse_row_graph, la sp√©cialisation du graphe non orient√© (boost :: undirectedS) est rest√©e non satisfaite. <br><br>  √Ä cet √©gard, lors de l'utilisation de la propri√©t√© edge_index (num√©ro de s√©rie de bord), des difficult√©s suppl√©mentaires se posent du fait que pour la liste d'adjacence, cette propri√©t√© doit √™tre explicitement d√©finie comme interne et en tant que telle peut √™tre modifi√©e arbitrairement, mais pour un graphique non orient√©, sa valeur ne d√©pend pas de la direction o√π passe la c√¥te.  Pour une matrice clairsem√©e (toujours directionnelle), il s'agit d'une propri√©t√©_map constante int√©gr√©e d'une forme sp√©ciale (calcul√©e comme un index dans un tableau d'ar√™tes).  Par cons√©quent, les valeurs des bords venant en sens inverse (repr√©sentant un graphique non orient√©) ne peuvent pas changer et seront toujours diff√©rentes. <br><br>  Toutes ces divergences conduisent √† l'impossibilit√© de "simplement remplacer la repr√©sentation graphique par une repr√©sentation √©quivalente" lors de l'appel de fonctions algorithmiques, ce qui mine consid√©rablement le principal avantage de la biblioth√®que.  Dans la pratique, dans de tels cas, soit une sp√©cialisation excessive du code est requise, soit son traitement pour exclure des √©l√©ments avec des comportements diff√©rents, ou un tel ajustement des mod√®les de graphique afin qu'ils ¬´se comportent de mani√®re identique¬ª avec diff√©rentes d√©finitions d'attributs, ou, enfin, la suppression de fichiers individuels de la biblioth√®que et la cr√©ation "Version boost personnelle." <br><br>  De plus, les inconv√©nients suivants, moins importants, peuvent √™tre not√©s: <br><br><ul><li>  Les dimensions des descripteurs internes des repr√©sentations graphiques ont un impact significatif sur la consommation de m√©moire n√©cessaire pour stocker le graphique, et affectent parfois les performances des algorithmes. <br><br>  Certaines vues (le m√™me comprim√©_sparse_row_graph) vous permettent de contr√¥ler ces dimensions.  D'autres (adjacency_list) n'ont pas de tels param√®tres et utilisent toujours des entiers 64 bits (g√©n√©ralement redondants), qui ne peuvent pas √™tre remplac√©s sans modifier le code; <br></li><li>  Malgr√© le fait que les auteurs de la biblioth√®que aient pr√©vu tr√®s, tr√®s bien, certaines primitives manifestement n√©cessaires n'√©taient pas incluses dans la biblioth√®que.  Par exemple, il n'y a aucune fonction comme reverse_edge qui effectue une inversion de bord. <br><br>  L'impl√©mentation de telles fonctions d√©pend bien entendu de la repr√©sentation graphique: dans ce cas, elle peut √™tre impl√©ment√©e par un √©change trivial d'√©l√©ments d'une paire, une recherche plus ou moins efficace par conteneur, ou pas du tout.  Il est difficile pour l'utilisateur final de comprendre toute cette vari√©t√© d'options, d'autant plus que, selon l'id√©ologie de la biblioth√®que, les membres internes des descripteurs ne devraient pas l'int√©resser. <br></li><li>  De m√™me, certains scripts, loin d'√™tre sans valeur, sont tomb√©s de la biblioth√®que.  Par exemple, vous pouvez d√©finir des pr√©dicats d'ar√™te qui utilisent filter_graph pour transformer un graphe non orient√© en graphe orient√©, mais il n'y a aucun moyen de porter cette transformation √† l'attention de la biblioth√®que.  Par cons√©quent, les algorithmes r√©guliers pour les graphiques dirig√©s ne se compileront pas avec un tel objet, et les algorithmes pour les graphiques non dirig√©s ne fonctionneront pas correctement avec lui. <br><br>  Quelque part dans le quartier, il y a le sujet de la prise en charge des graphiques techniquement non directionnels qui ont un marqueur de direction de service sur les bords.  Cependant, une attention accrue √† ce point de vue peut √™tre due √† la nature particuli√®re des t√¢ches que l'auteur r√©sout, et l'int√©r√™t g√©n√©ralis√© pour soutenir de tels objets n'est pas √©vident. <br></li><li>  Quant √† la fonction reverse_edge, prise comme exemple ci-dessus, il n'y a pas du tout une option incroyable que la fonction souhait√©e soit pr√©sente quelque part dans les entrailles de la biblioth√®que, mais pour une raison quelconque, elle a re√ßu un nom non √©vident.  Cela conduit au probl√®me suivant, qui √† premi√®re vue n'est pas grave, mais ralentit consid√©rablement le travail avec des biblioth√®ques de mod√®les complexes (pas seulement BGL, bien qu'il soit clairement parmi les leaders selon ce crit√®re): travail avec des syst√®mes √©tendus de fonctions implicitement li√©es sans typage explicite des param√®tres et avec la s√©mantique d'utilisation non √©vidente (souvent la moins transparente que la plus r√©fl√©chie) est physiquement difficile, et les environnements de d√©veloppement existants ne fournissent aucun support pour cela dans le d√©veloppeur: <br><br> <abbr title="Merci, vous avez beaucoup aid√©."><img src="https://habrastorage.org/webt/bn/ad/fq/bnadfqng3f4ryjrc8qkwaxtf78e.png"></abbr> <br><br>  En fait, les assistants automatiques: <br><br><ol><li>  Con√ßu principalement pour la prise en charge de la POO, lorsqu'un ensemble de fonctions est li√© √† l'objet de droite en fonction de son type.  Avec des fonctions globales qui peuvent se trouver √† gauche d'un type (et encore moins d'un ensemble de types), elles sont bien plus utiles m√™me si tous les types sont connus. </li><li>  Ils ne sont m√™me pas capables de travailler avec des mod√®les simples.  La version de l'assistant visuel utilis√©e par l'auteur, ayant devant lui la d√©finition d'une classe mod√®le avec des param√®tres par d√©faut, propose de sp√©cifier une ¬´substitution de test¬ª afin de pouvoir g√©n√©rer un indice pour la classe.  Si vous la rencontrez, il ne se passe absolument rien. </li><li>  De plus, ils sont moins capables de comprendre les qualificatifs de m√©taprogramme, m√™me les plus simples, tels que enable_if. </li><li>  √Ä propos d'un sc√©nario typique: ¬´nous sommes √† l'int√©rieur d'une fonction de mod√®le qui est appel√©e √† partir d'un nombre ind√©fini de longueurs ind√©finies de cha√Ænes d'autres fonctions, y compris celles de mod√®le¬ª, il est impossible de parler sans larmes.  Dans ce cas, vim reste vraiment le meilleur ami du programmeur. </li></ol><br>  Un autre aspect de la m√™me situation peut √™tre illustr√© en utilisant la premi√®re ligne du fragment de code montr√© dans la figure pr√©c√©dente.  Le lecteur est invit√© √† compl√©ter les requ√™tes ¬´boost current time¬ª vs ¬´CRT current time¬ª et √† comparer les r√©sultats.  Oui, boost :: date_time (maintenant partiellement d√©plac√© vers std) permet de faire correctement beaucoup de choses complexes, tandis que CRT vous permet de faire plusieurs op√©rations triviales de mani√®re incorrecte, mais dans les situations courantes du m√©nage, CRT est plus pratique de tous les points de vue et polynomiaux les constructions de la forme posix_time :: second_clock :: local_time (un exemple doux) ont tendance √† se transformer en hi√©roglyphes errant dans le programme.  Priver le d√©veloppeur de l'acc√®s √† la biblioth√®que personnelle de ces hi√©roglyphes et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la vitesse de d√©veloppement ira √† z√©ro</a> . <br><br>  Boost :: string_algo permet de tout faire avec des cha√Ænes, mais, honn√™tement, chaque op√©ration pas tout √† fait banale est accompagn√©e d'une session de relecture de la documentation pour rafra√Æchir la logique g√©n√©rale de la biblioth√®que, les noms des pr√©dicats, ainsi qu'un exercice s√©par√© pour d√©couvrir la compatibilit√© des param√®tres.  Une situation similaire se produit avec les op√©rations de tokenisation dans boost :: regexp, avec une logique interne sans faille de ce dernier. <br><br>  Si une telle situation se produit avec les biblioth√®ques les plus couramment utilis√©es, il n'est pas surprenant que BGL, en tant que biblioth√®que plus sp√©cialis√©e, dans laquelle, par exemple, il existe des fonctions make_property_map_function et make_function_property_map qui ne sont pas li√©es les unes aux autres, ainsi qu'une fonction get sacramentelle qui est recharg√©e dans n'importe quel le nombre d'arguments de tout type pose les m√™mes probl√®mes, mais sous une forme hypertrophi√©e.  Oui, n'importe quelle t√¢che peut √™tre r√©solue par la cha√Æne d'appel get, mais, h√©las, toutes les cha√Ænes get ne r√©solvent pas ce probl√®me. <br><br>  La lecture d'un tel code peut √™tre facile et agr√©able, il peut m√™me ressembler √† un synopsis d'un algorithme formellement √©crit dans un langage naturel, mais lors de l'√©criture, l'impossibilit√© de remplacer des mots par des synonymes, etc. des manifestations de raideur, n'est pas caract√©ristique d'un vrai. <br></li><li>  D'une mani√®re g√©n√©rale, on ne peut pas ne pas r√©p√©ter l'observation banale, mais non moins vraie, que la m√©taprogrammation en C ++ est toujours litt√©ralement bas√©e sur les effets secondaires des outils de langage, dont le but initial √©tait diff√©rent, et m√™me les id√©es les plus simples sur la base de En cons√©quence, le m√©talangage est difficile √† exprimer et √† lire, et la liaison du code de mod√®le au syst√®me archa√Øque de fichiers inclus ne facilite pas la vie du d√©veloppeur et ne r√©duit pas la quantit√© de code trait√©e par le compilateur. <br><br>  (D'un autre c√¥t√©, les mises √† jour r√©guli√®res pour booster et std apportent beaucoup de constructions pas tout √† fait triviales et souvent extr√™mement utiles et des solutions inattendues, qui permettent vraiment d'√©crire du code plus clair et compact √† moindre co√ªt. Cependant, le flux de nouveaux produits est si large, in√©gal et mal structur√© que le plus important ajouts √† la biblioth√®que standard, m√™me √©vidents tels que les options / apply_visitor ou ceux mentionn√©s ci-dessous, si les avantages conceptuels de leur application dans le contexte d'un projet sp√©cifique ne sont pas pertinents  Pour aller de soi, sans l'aide d'un √©v√©nement heureux, ils peuvent perdre le focus pendant longtemps, si vous ne passez pas une partie importante de votre temps de travail √† suivre de mani√®re r√©fl√©chie directement les nouveaux produits, √† √©tudier des exemples non triviaux de leur utilisation et √† tenter mentalement de les appliquer √† un code existant. pour faire face √† ce probl√®me - pour garder pour cinq programmeurs C ++ pratiquants un C ++ - un th√©oricien qui ne s'occupe que des probl√®mes de priorit√© des nouveaux produits, de leur mise en ≈ìuvre  tions du projet et les praticiens de l'√©ducation s√©lective.  Conclusion: <s>ne d√©marrez pas C ++ - projets avec moins de d√©veloppeurs</s> ). <br></li><li>  Enfin, objectivement, le probl√®me le plus grave qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">se produit lors de l'utilisation du code passe-partout BGL</a> .  Supposons que nous utilisons un algorithme de mod√®le qui fait un passage √† travers un graphique et prend une repr√©sentation du graphique G comme argument.  Dans un cas typique, cette repr√©sentation d√©pend des filtres superpos√©s aux sommets et aux ar√™tes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>v</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.524ex" height="2.419ex" viewBox="0 -780.1 1086.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-76" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>v</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> F_v </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>e</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.493ex" height="2.419ex" viewBox="0 -780.1 1073.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-65" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>e</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> F_e </script>  et sch√©ma de poids <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-57" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> W </script>  .  Pour travailler avec des graphiques filtr√©s, BGL propose la classe de mod√®le filter_graph mentionn√©e ci-dessus, la mani√®re d'y attacher le sch√©ma de pond√©ration est √† la discr√©tion de l'utilisateur.  Les foncteurs repr√©sentant <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>v</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.524ex" height="2.419ex" viewBox="0 -780.1 1086.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-76" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>v</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> F_v </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>e</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.493ex" height="2.419ex" viewBox="0 -780.1 1073.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-65" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>e</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> F_e </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhhmaeczpP75zA7GyFnFhG-wcEHriw#MJMATHI-57" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> W </script>  peut inclure au moins les vues suivantes: <br><br><ul><li>  Directement un wrapper pour une fonction repr√©sentant un sch√©ma de pond√©ration et des pr√©dicats repr√©sentant des filtres (lentement, sans perte d'initialisation); </li><li>  Caches sur ces wrappers, mappage des descripteurs de bord / n≈ìud aux index de bord / n≈ìud, adressage du bitmap et du tableau de valeurs (sans pertes d'initialisation, avec une augmentation progressive de la vitesse telle qu'utilis√©e) </li><li>  Mappage direct des descripteurs de n≈ìuds / ar√™tes aux tableaux de valeurs remplies (n√©cessite une initialisation, mais peut √™tre construit sur la base de la repr√©sentation pr√©c√©dente; la vitesse atteint son maximum). </li></ul><br>  Ainsi, si cet algorithme √©tait √©crit dans un style traditionnel, trois s√©lecteurs avec au moins trois branches dans chacun appara√Ætraient dans son corps (et la n√©cessit√© d'ajuster le corps lorsque de nouvelles repr√©sentations apparaissent).  √âtant donn√© que chaque ramification dans le corps de l'algorithme, qui s'ex√©cute un grand nombre de fois lors du passage dans le graphique, entra√Æne une perte de temps notable, le d√©sir d'√©viter ces pertes tout en conservant le code du m√™me style traditionnel peut conduire √† plus de 27 impl√©mentations de l'algorithme pour diverses combinaisons de repr√©sentations. <br><br>  Le style de m√©taprogramme devrait vous sauver de ces probl√®mes, vous permettant de prendre en charge une m√©tafonction d√©crivant l'algorithme qui g√©n√®re implicitement toutes les impl√©mentations n√©cessaires (et aussi, √©ventuellement, certaines, et peut-√™tre une quantit√© consid√©rable, inutile si les structures de code d'ex√©cution ne g√©n√®rent pas de facto certaines combinaisons de types, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qui       </a> ),        . <br><br>   ,  ,          inline-    ,           ‚ÄìO2.           -      (              1:3  1:5,           ‚Äì <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  ,  ,  </a> ). <br><br>           ,    .               . ,    ( )     ,      ¬´¬ª  ¬´¬ª  .   ,       .       :    ¬´¬ª      ¬´¬ª  ,                 ¬´¬ª ,                 ¬´¬ª . <br><br>    ,         :    ,   100%         ,       ,   ¬´¬ª  . ( ,    ,     - ,   ,    , ,      ,  ). <br></li><li>         ,   ,     ,     .     C++   , -,  ,          . <br><br>   ,   ,    : <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type_selector_fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type_a a, type_b b, ...)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = get_type_1_obj(a, b, ...); run_calc(arg, a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = get_type_2_obj(a, b, ...); run_calc(arg, a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... }</code> </pre> <br>  Il peut √™tre r√©√©crit de mani√®re un peu plus compacte en utilisant la variante &lt;...&gt; sous la forme suivante: <br><br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type_selector_fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type_a a, type_b b, ...)</span></span></span><span class="hljs-function"> </span></span>{ variant&lt;type_1, type_2, ...&gt; arg; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { arg = get_type_1_obj(a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ... ... apply_visitor([&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg_){run_calc(arg_, a, b, ...); }, arg); }</code> </pre><br>  L'inconv√©nient de cette forme d'√©criture est la n√©cessit√© d'une √©num√©ration explicite des types type_1, type_2, ... dans la d√©claration de variante.  Ces types peuvent √™tre encombrants, l'enregistrement √† l'aide de declval / result_of_t ne peut pas √™tre moins encombrant. <br><br>  Lorsque vous en utilisez, il n'est pas n√©cessaire de r√©pertorier les types, mais il n'y a aucun moyen d'obtenir un apply_visitor analogique. <br><br>  L'utilisation d'une fonction de mod√®le make_variant, qui vous permet d'√©crire du code du type suivant, se sugg√®re: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = make_variant ( bind(condition_1, a, b, ...), bind(get_type_1_obj, a, b, ...), bind(condition_2, a, b, ...), bind(get_type_2_obj, a, b, ...), ... );</code> </pre><br>  mais le rem√®de n'est pas meilleur que la maladie. <br><br>  En g√©n√©ral, il existe une situation typique pour la m√©taprogrammation en C ++, lorsque pour exprimer une id√©e tr√®s simple, vous devez utiliser tout un arsenal d'outils auxiliaires avec un r√©sultat qui n'est pas tr√®s satisfaisant en termes de lisibilit√© et de facilit√© d'enregistrement.  Essentiellement, je voudrais pouvoir √©crire quelque chose comme ceci: <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//   variant&lt;...&gt;      //  ,   : type_1, type_2 etc. variant&lt;auto...&gt; get_type_obj(typa_a a, type_b b, ...) { if (condition_1(a, b, ...)) { return get_type_1_obj(a, b, ...); } else if (condition_2(a, b, ...)) { return get_type_2_obj(a, b, ...); } else ... }</span></span></code> </pre><br>  ou m√™me: <br><br><pre> <code class="cpp hljs"> select_value_type(arg) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { arg = get_type_1_obj(a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... ... } run_calc(arg, a, b, ‚Ä¶);</code> </pre><br>  Cette derni√®re option, bien qu'elle soit compl√®tement supprim√©e du style C ++, semble la plus pratique, car il peut y avoir plus d'une variable arg pour laquelle le type est s√©lectionn√©, et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il n'y a aucune raison d'anticiper la logique de leur construction</a> . <br></li><li>  Le revers de la m√™me situation est l'utilisation de structures auxiliaires (par exemple, la mise en cache) qui impl√©mentent un script qui m√©rite le nom d'une "variable de mod√®le", mais diff√®re de l'extension standard C ++ 14 du m√™me nom. <br><br>  Le code correspondant peut ressembler √† ceci: <br><br><pre> <code class="cpp hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CacheHolder</span></span></span><span class="hljs-class"> {</span></span> boost::variant&lt; container&lt;T1&gt;, container&lt;T2&gt;, <span class="hljs-comment"><span class="hljs-comment">// ... container&lt;TN&gt;&gt; ct; template&lt;typename T&gt; struct result_type_selector { typedef typename if_c&lt;is_compatible&lt;T, T1&gt;::value, T1, if_c&lt;is_compatible&lt;T, T2&gt;::value, T2, // ... if_c&lt;is_compatible&lt;T, TN&gt;::value, TN, std::decay_t&lt;T&gt;&gt;&gt;&gt;::type type; }; template&lt;typename T&gt; auto get() const -&gt; const container&lt;typename result_type_selector&lt;T&gt;::type&gt;&amp; { return boost::get&lt;container&lt;typename result_type_selector&lt;T&gt;::type&gt;&gt;(ct); } };</span></span></code> </pre><br>  Ici, comme ci-dessus, les longues constructions expriment l'id√©e simple d'acc√©der √† une variable repr√©sentant le cache par un nom sp√©cifique, quelle que soit la dimension de la valeur mise en cache (en passant de mani√®re transparente √† travers le code appelant). <br><br>  Par souci de concision, le code est donn√© pour le cas o√π un seul type peut √™tre actif, mais dans la pratique, la situation est plus courante lorsque plusieurs conteneurs peuvent exister simultan√©ment (il peut √™tre facilement impl√©ment√© dans le m√™me style en utilisant tuple et facultatif). <br><br>  L'impl√©mentation de la fonction get &lt;...&gt; suppose que le code appelant a une id√©e du type de valeur en cache auquel il souhaite acc√©der (par exemple, entier ou virgule flottante). <br><br>  La situation o√π la valeur exacte du type n'est pas importante pour l'appelant n'est pas moins courante.  Dans ce cas, le script select_value_type / apply_visitor du paragraphe pr√©c√©dent est reproduit (ajust√© pour la multiplicit√© possible de valeurs, ce qui implique de visualiser les types dans l'ordre d√©croissant de priorit√©). <br></li><li>  Jusqu'√† pr√©sent, il n'y avait pratiquement aucune mention de PBGL dans ce texte.  Cela s‚Äôexplique par la petite exp√©rience de l‚Äôauteur de travailler avec cette partie de la biblioth√®que (√† propos de laquelle l‚Äôauteur lui-m√™me, avec un certain scepticisme, se r√©f√®re √† tout ce qui est √©crit ci-dessous dans ce paragraphe, et appelle les autres √† faire de m√™me).  En fait, une telle exp√©rience se r√©sume √† plusieurs exp√©riences, sur le m√™me type de probl√®mes de recherche qui ont d√©montr√© sur des donn√©es pratiques la perte d'une version distribu√©e √† une solution locale 3-5 fois en m√©moire et 15-20 fois en performance globale (l'origine de cette figure effrayante est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">expliqu√©e ici</a> et comment√©e en plus dans les paragraphes suivants) .  √âtant donn√© la plus grande complexit√© du travail avec des structures distribu√©es, le choix en faveur de la version locale allait de soi dans une telle situation. <br><br>  Expliquons la m√©canique du fonctionnement PBGL en utilisant un exemple typique de l'algorithme de marche delta.  Dans cette version parall√®le de l'algorithme de Dijkstra, la file d'attente prioritaire est remplac√©e par un tableau de ¬´compartiments¬ª.  Les √©l√©ments qui tombent dans un "bucket" sont trait√©s en parall√®le.  Dans sa forme originale, la stimulation delta est un algorithme typique pour les syst√®mes de m√©moire partag√©e. <br><br>  Dans la version distribu√©e, les √©v√©nements suivants se produisent: dans PBGL, lors du chargement, le graphique est dispers√© entre les processus, et chaque processus a une plage continue de nombres de sommets.  Ainsi, par le nombre global de sommets, il est facile de savoir √† quel processus il appartient.  En cons√©quence, chaque processus √† chaque tour de l'algorithme stocke une partie du "bucket" contenant les sommets appartenant √† ce processus.  Tous les processus s√©lectionnent et traitent simultan√©ment les sommets de leurs parties des "compartiments" un par un, tout en envoyant des messages sur la n√©cessit√© de mettre √† jour les "compartiments" suivants aux processus qui poss√®dent des sommets voisins.  Il est facile de voir que, toutes choses √©gales par ailleurs, une augmentation du nombre de processus entra√Æne une augmentation du nombre de messages qu'ils envoient.  En cons√©quence, le temps d'ex√©cution de l'algorithme peut non seulement ne pas diminuer, mais m√™me augmenter.  En particulier, le lancement de plusieurs processus MPI pour r√©soudre ce probl√®me sur une machine physique avec une certaine probabilit√© ne conduira qu'√† une augmentation de la charge totale du processeur sans gain de temps. <br><br>  Il convient de noter que la stimulation delta est l'algorithme de recherche distribu√© le plus rapide (sur trois pris en charge par la biblioth√®que). <br><br>  Ainsi, si le graphique n'est pas pr√©par√© au pr√©alable, il doit √™tre divis√© en blocs de taille maximale, un bloc par machine physique.  Par pr√©paration pr√©alable, nous entendons ici renum√©roter les sommets du graphe de sorte que les plages continues de nombres utilis√©es par PBGL, si possible, correspondent √† des sous-graphes peu connect√©s.  Des packages tels que METIS, paraMETIS et Zoltan sont utilis√©s √† ces fins.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Il est difficile de travailler avec des graphiques dynamiques dans ce mode.</a> <br><br>  En g√©n√©ral, selon les r√©sultats des exp√©riences d√©crites, l'auteur a eu l'impression que le fonctionnement normal du cluster PBGL n'est possible qu'avec des √©quipements de communication sp√©ciaux, et il est logique d'utiliser des machines avec un nombre minimum de c≈ìurs et des performances de threads maximales comme n≈ìuds d'un tel cluster.  Les auteurs de <a href="">Trinity</a> dans leur article soutiennent que leur stockage distribu√© fonctionne beaucoup plus efficacement - l'auteur a du mal √† commenter cette d√©claration, mais, compte tenu des circonstances ci-dessus, le trouve tout √† fait possible: l'architecture PBGL porte un sceau distinct du temps o√π les machines multic≈ìurs n'ont pas encore re√ßu une large distribution. <br><br>  PBGL partage √©galement les probl√®mes de la version monothread: une certaine synchronisation de code, une documentation et des exemples, aggrav√©s par la plus grande complexit√© du syst√®me et moins d'utilisateurs d√©sireux de partager une exp√©rience utile. <br></li></ul><br><h3>  BGL et autres animaux </h3><br>  Compte tenu d'une liste assez longue de plaintes sp√©cifiques, il ne sera pas inappropri√© de se demander: l'auteur peut-il recommander BGL pour de nouveaux projets en 2019.  La r√©ponse est la suivante: l'auteur pense que les biblioth√®ques de ce style et les applications qui en d√©coulent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">doivent avoir un avenir</a> .  En ce qui concerne le choix d'une biblioth√®que de r√©f√©rence pour un projet particulier, nous devons consid√©rer s√©rieusement l'instrumentation, sans perdre de vue les probl√®mes √©num√©r√©s ci-dessus.  La r√©ponse, √©videmment, d√©pend de nombreuses circonstances, y compris, mais sans s'y limiter, celles √©num√©r√©es dans les paragraphes suivants: <br><br><ul><li>  Qu'il s'agisse de travailler avec des graphiques dans un projet est la base de la fonctionnalit√© ou une t√¢che facultative; </li><li>  Un projet peut-il obtenir un avantage gr√¢ce √† l'utilisation de plusieurs repr√©sentations ou fonctionne-t-il avec des algorithmes dactylographi√©s tout √† fait suffisants? </li><li>  Le type de simultan√©it√© le plus avantageux pour le projet; </li><li>  Nuances organisationnelles: le d√©sir de m√©taprogrammation en C ++ chez les salari√©s (notamment les programmeurs math√©matiques), etc. </li></ul><br>  Probablement, toutes choses √©gales par ailleurs, l'utilisation de BGL peut √™tre justifi√©e soit dans le cas d'une tr√®s petite utilisation ponctuelle (pour extruder ou copier un morceau de code de travail et oublier), soit pour un grand syst√®me pour lequel une flexibilit√© accrue paiera une entr√©e lourde et d'autres co√ªts au fil du temps.  Dans d'autres cas, il est logique d'√©tudier soigneusement d'autres options. <br><br>  Quant aux alternatives possibles, leur liste comprend au moins les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©l√©ments suivants</a> : <br><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  Citron </td></tr><tr><td>  Type de biblioth√®que </td><td>  En-t√™te de mod√®le C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lemon.cs.elte.hu</a> </td></tr><tr><td>  Distribu√© </td><td>  non </td></tr><tr><td>  Multithread </td><td>  non </td></tr><tr><td>  OS </td><td>  tout </td></tr><tr><td>  Derni√®re version </td><td>  2014 <br>  Distribu√© par l'archive </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mentions Stackoverflow</a> </td><td>  ~ 100 (36 dans la section [biblioth√®que de graphiques de citron]) </td></tr><tr><td>  Commentaire </td><td>  Selon certains rapports, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en mode mono-thread d√©passe consid√©rablement la vitesse BGL</a> . <br>  L'attitude des auteurs envers le multithreading <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ressort clairement du dialogue suivant</a> .  Compte tenu de ce qui pr√©c√®de dans la section sur les PBGL, cette position est douteuse. </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  SNAP </td></tr><tr><td>  Type de biblioth√®que </td><td>  C ++ </td></tr><tr><td>  URL </td><td>  <a href="">github.com/snap-stanford/snap.git</a> </td></tr><tr><td>  Distribu√© </td><td>  non </td></tr><tr><td>  Multithread </td><td>  oui (partie des m√©thodes) </td></tr><tr><td>  OS </td><td>  Linux, Mac, Cygwin </td></tr><tr><td>  Derni√®re version </td><td>  2018 <br>  Le r√©f√©rentiel est activement mis √† jour. </td></tr><tr><td>  Mentions Stackoverflow </td><td>  &lt;50 </td></tr><tr><td>  Commentaire </td><td>  L'une des plus grandes biblioth√®ques d'analyse de r√©seau (plus de 10 Mo de code) (Network Ananlysis), qui se d√©veloppe activement depuis de nombreuses ann√©es.  D'une mani√®re √©trange, il est relativement ignor√© par l'attention du public. <br>  Voir la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description de l'id√©ologie du syst√®me</a> .  L'attitude √† l'√©gard de la mise en ≈ìuvre des m√©thodes parall√®les exprim√©e √† la page 12 est proche de l'auteur de cet article.  Dans les conditions de fonctionnement d'un parc de machines moderne typique, c'est le plus naturel.  Le changement de paradigme a eu lieu en 2011 conditionnel, auquel se r√©f√®re la d√©claration LEMON ci-dessus. </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  MTGL </td></tr><tr><td>  Type de biblioth√®que </td><td>  En-t√™te de mod√®le C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">software.sandia.gov/svn/public/mtgl/trunk</a> </td></tr><tr><td>  Distribu√© </td><td>  ? </td></tr><tr><td>  Multithread </td><td>  oui </td></tr><tr><td>  OS </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tout</a> </td></tr><tr><td>  Derni√®re version </td><td>  ? </td></tr><tr><td>  Mentions Stackoverflow </td><td>  3 </td></tr><tr><td>  Commentaire </td><td>  Membre myst√©rieux de la r√©union.  La biblioth√®que s'est d√©velopp√©e activement entre 2005 et 2012.  Des sources ont √©t√© t√©l√©charg√©es en 2017.  Statut peu clair, mention du projet du site Web de Sandia supprim√©e.  Inspir√© id√©ologiquement par le m√™me BGL, mais le code est compl√®tement ind√©pendant.  La quantit√© totale de code source (y compris de nombreux tests et exemples) atteint 17 Mo.  Le code semble bien con√ßu.  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description</a> . </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  igraph </td></tr><tr><td>  Type de biblioth√®que </td><td>  C </td></tr><tr><td>  URL </td><td>  <a href="">github.com/igraph/igraph.git</a> </td></tr><tr><td>  Distribu√© </td><td>  non </td></tr><tr><td>  Multithread </td><td>  non </td></tr><tr><td>  OS </td><td>  tout? </td></tr><tr><td>  Derni√®re version </td><td>  2014 <br>  Le r√©f√©rentiel est activement mis √† jour. <br></td></tr><tr><td>  Mentions Stackoverflow </td><td>  Environ 100 dans les sections [igraph] [c ++] et [igraph] [c], et plus de 500 au total (pour toutes les langues) <br></td></tr><tr><td>  Commentaire </td><td>  Une autre biblioth√®que d'analyse de r√©seau est apparemment tr√®s populaire (principalement chez les pythonistes, etc.).  Description <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  outil graphique </td></tr><tr><td>  Type de biblioth√®que </td><td>  C ++ python lib </td></tr><tr><td>  URL </td><td>  <a href="">git.skewed.de/count0/graph-tool.git</a> </td></tr><tr><td>  Distribu√© </td><td>  non </td></tr><tr><td>  Multithread </td><td>  oui </td></tr><tr><td>  OS </td><td>  A en juger par l'utilisation de autoconf - * nix uniquement, mais une simple adaptation √† d'autres syst√®mes est probable </td></tr><tr><td>  Derni√®re version </td><td>  2019 </td></tr><tr><td>  Mentions Stackoverflow </td><td>  &lt;20 </td></tr><tr><td>  Commentaire </td><td>  Une autre biblioth√®que d'analyse de r√©seau en d√©veloppement actif avec une longue histoire de validations qui utilise directement BGL (dans la version locale corrig√©e). <br>  Voir le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau de comparaison des performances.</a> </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  Le titre </td><td>  LEDA </td></tr><tr><td>  Type de biblioth√®que </td><td>  C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.algorithmic-solutions.com/index.php/products/leda-for-c</a> </td></tr><tr><td>  Distribu√© </td><td>  non </td></tr><tr><td>  Multithread </td><td>  ? </td></tr><tr><td>  OS </td><td>  tout </td></tr><tr><td>  Derni√®re version </td><td>  ? </td></tr><tr><td>  Mentions Stackoverflow </td><td>  ~ 10 </td></tr><tr><td>  Commentaire </td><td>  Licence commerciale.  Une grande biblioth√®que (et, pourrait-on dire, ancienne) pour l'informatique scientifique et technologique, y compris une section graphique.  Apparemment, il s'appuie sur sa propre infrastructure, et non sur stl / boost, et en ce sens est archa√Øque. </td></tr></tbody></table></div><br>  La question de la classification de divers logiciels orient√©s pour travailler avec des graphiques pr√©sente un int√©r√™t g√©n√©ral particulier.  Leur diversit√©, sans parler du nombre, est tr√®s grande.  Sans pr√©tendre terminer la classification (et m√™me la corriger formellement), nous pouvons cependant essayer de mettre en √©vidence les domaines importants suivants dans le d√©veloppement d'applications graphiques: <br><ol><li>  Graphique SGBD (neo4j, etc.). <br><br>  Les syst√®mes de ce type se concentrent sur l'ex√©cution d'op√©rations transactionnelles sur de grands graphiques (disques distribu√©s).  Bien que l'API d'un tel syst√®me puisse √™tre tr√®s d√©velopp√©e, la vitesse d'ex√©cution des algorithmes de graphes eux-m√™mes, pour autant que l'on puisse en juger, n'est pas la premi√®re priorit√©.  Le syst√®me peut m√™me ne pas essayer de charger le graphique entier en m√©moire.  Pour la modification et la travers√©e de graphe, les langages d√©claratifs (SPARQL, Cypher, Gremlin) sont pris en charge.  Une grande importance est attach√©e √† assurer la continuit√© avec les syst√®mes SQL traditionnels. </li><li>  Extensions graphiques des syst√®mes de traitement des m√©gadonn√©es travaillant dans le paradigme carte / r√©duction (GraphX ‚Äã‚Äãdans Spark, Pegasus et Giraph pour Hadoop) et des syst√®mes de cluster ind√©pendants ( <a href="">MS Trinity / MS Graph Engine</a> , GraphLab).  Les premiers √† effectuer des op√©rations sur le graphique impl√©mentent le mod√®le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Pregel</a> (mais pas seulement) et peuvent √™tre configur√©s pour une utilisation incluant des n≈ìuds de calcul parall√®les massifs.  Ceux-ci et d'autres peuvent √™tre utilis√©s, entre autres, comme base pour des projets de logiciels d'entreprise. <br><br>  Bien que l'API de ces syst√®mes puisse √™tre assez d√©velopp√©e (entre autres, GraphX ‚Äã‚Äãprend en charge SPARQL et Cypher), l'objectif principal lorsque vous travaillez avec eux est de r√©soudre les probl√®mes d'infrastructure.  GraphX ‚Äã‚Äãse caract√©rise par l'immuabilit√© des donn√©es et un biais dans le pipeline de toutes les op√©rations.  MS Trinity n'inclut actuellement pas de m√©thodes de haut niveau et ne fournit qu'un ensemble de primitives pour travailler avec des n≈ìuds et des bords.  Les syst√®mes fonctionnant sur Hadoop sont, en principe, peu utiles pour r√©soudre des probl√®mes de graphes arbitraires. <br></li><li>  Biblioth√®ques d'outils r√©ellement universelles qui impl√©mentent des ensembles de m√©thodes plus ou moins larges (BGL / PBGL, LEMON etc.), y compris massivement parall√®les (nvGraph, Gunrock). <br><br>  Sur la base de ceux-ci, des syst√®mes d'application peuvent √™tre cr√©√©s pour adapter les algorithmes graphiques √† des domaines sp√©cifiques. </li><li>  Syst√®mes et biblioth√®ques sp√©cialis√©s notamment dans des probl√®mes complexes d'importance universelle (METIS, paraMETIS, Zoltran: partitionnement de graphes, GraphViz, Gephi: visualisation, GraphBLAS: algorithmes alg√©briques pour travailler avec des graphes, etc.). <br><br>  De nombreuses applications graphiques ind√©pendantes peuvent √™tre affect√©es sous condition √† cette cat√©gorie, dont une analyse d√©taill√©e n√©cessiterait trop de temps.  Ce dernier contient des applications de toutes les vari√©t√©s imaginables: acad√©miques et commerciales, mono-utilisateur et multi-utilisateurs, apparues r√©cemment et existant depuis plus d'une d√©cennie, etc. </li></ol><br>  Une partie obscure mais significative des applications graphiques se concentre sur les t√¢ches d'analyse de r√©seau et, d√©j√†, d'analyse de r√©seau social (d√©tection de communaut√©).  Curieusement, les syst√®mes d'analyse de liens (utilis√©s, en r√®gle g√©n√©rale, par divers "combattants du crime"), qui pr√©sentent certaines similitudes avec le syst√®me que nous d√©veloppons, sont beaucoup moins courants.  Dans tous les cas, sans v√©rification sp√©ciale, il est difficile de d√©terminer la nature des mod√®les de donn√©es utilis√©s par divers syst√®mes et les limitations de performances associ√©es, les volumes pris en charge, les ensembles d'op√©rations, etc. <br><br><h3>  Remarques </h3><br><ol><li><a name="P1"></a>  BGL n'est pas une biblioth√®que purement en-t√™te, mais pour le moment, la seule fonctionnalit√© qui n√©cessite une liaison est (plut√¥t facultative) de travailler avec les fichiers GraphViz DOT.  Par cons√©quent, dans la grande majorit√© des cas, la liaison et la liaison automatique avec la version appropri√©e de libbost-graph pour inclure les en-t√™tes BGL dans la configuration Boost ne sont pas n√©cessaires.  Ainsi, par souci de coh√©rence avec la biblioth√®que libboost-regex utilis√©e par les fonctions BGL non-en-t√™te, il est pratique de simplement brancher l'en-t√™te boost \ regex.hpp √† partir du code de projet, m√™me si ce dernier n'utilise pas d'expressions r√©guli√®res. </li><li><a name="P2"></a>  Un chaos suppl√©mentaire est introduit par la pr√©sence d'entit√©s dont l'√©quivalence apparente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">encourage la chasse aux chats noirs (√©ventuellement absents) dans les pi√®ces sombres</a> . </li><li><a name="P3"></a>  Avant de proc√©der √† sa description (en utilisant un exemple sp√©cifique, o√π il s'est manifest√© particuli√®rement fortement et d√©sagr√©ablement), nous notons que l'auteur est parmi les rares personnes chanceuses travaillant avec un projet charg√© dans un puissant syst√®me d'exploitation Windows et la gamme de compilateurs MSVC sauv√©e par Dieu.  Il est possible que les probl√®mes d√©crits ci-dessous soient des artefacts de cette gamme de compilateurs: une vari√©t√© de circonstances particuli√®res rendent difficile la conduite d'une exp√©rience comparative avec gcc / clang dans l'environnement * nix.  Si c'est le cas, vous ne pouvez que f√©liciter les utilisateurs d'autres compilateurs. </li><li><a name="P4"></a>  Pour adoucir qui, dans certains cas, le constexpr r√©cemment apparu aidera probablement. </li><li><a name="P5"></a>  Dans notre cas, cela a conduit √† une attention particuli√®re √† la fonction d'√©conomie d'√©tat, qui permet un d√©bogage avec commodit√©, amenant d'abord le syst√®me √† l'√©tat initial souhait√© dans un assemblage optimis√©. </li><li><a name="P6"></a>  Dans ma pratique, pour diverses raisons, il √©tait n√©cessaire de convertir les param√®tres d'ex√©cution en arguments de mod√®le, et assez souvent j'ai d√ª recourir √† des m√©thodes tr√®s pr√©cises et tr√®s √©labor√©es (inspir√©es des impl√©mentations d√©sormais obsol√®tes de boost typeof et boost lambda pour C ++ 98, qui ont directement touch√© le traiter la technique de programmation en C ++ comme une solution au r√©bus), parmi lesquels l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©toile brille la s√©lection de l'argument en divisant par deux</a> , mais, en g√©n√©ral, les principaux probl√®mes avec de telles op√©rations ont toujours √©t√© associ√©s √† l'impossibilit√© d'exporter  type s√©lectionn√© en dehors du champ d'application, ce qui a donn√© lieu √† des motifs exotiques. </li><li><a name="P6X1"></a>       (   ‚Äî  80   4      50    200  ,     )     (  )       -   . ,                .    ,  6-8      ‚Äî   ,        . </li><li><a name="P7"></a>        ,        . (  ,       -  ,      .  ,     ,  ,     ,  ,       , ,        ). </li><li><a name="P8"></a>   ,    ,    ‚Äì   ,     ,   ¬´¬ª     (--  ..)     .  (  ,   ),    ,   ¬´¬ª    ,     ‚Äî     (              ).  ,  ,      , -   .  ,    ,   : ¬´¬ª  (   )  ,     ¬´¬ª (   ),         ,     .           .         ,   - ,      ¬´      ¬ª,      .        ,   ¬´  ¬ª     ? ,        ,         ,   :  ‚Äì    , ,       ,    ,          . </li><li><a name="P9"></a>    .         ,     ,             . </li><li><a name="P10"></a>    ¬´LIBNAME C++ graph¬ª  ,           stackoverflow.  ,  BGL   500    [boost-graph]. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471652/">https://habr.com/ru/post/fr471652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471636/index.html">V√©hicule sans pilote: algorithmes d'animation. Rapport Yandex</a></li>
<li><a href="../fr471640/index.html">Un aper√ßu des techniques d'analyse de la blockchain anonyme</a></li>
<li><a href="../fr471642/index.html">Tueur de temps depuis l'enfance</a></li>
<li><a href="../fr471644/index.html">Encore une fois √† propos de phpQuery</a></li>
<li><a href="../fr471650/index.html">Pizza AI: comment nous avons utilis√© deux r√©seaux de neurones r√©currents</a></li>
<li><a href="../fr471654/index.html">Comment nous avons d√©velopp√© un appareil Internet des objets r√©sistant au gel</a></li>
<li><a href="../fr471658/index.html">Escrocs au t√©l√©phone. La premi√®re action dans laquelle on me parle gentiment d'autres escrocs</a></li>
<li><a href="../fr471660/index.html">Conf√©rence de psychologie des joueurs</a></li>
<li><a href="../fr471662/index.html">Web - authentification javascript, obfuscation et code natif. R√©solution de probl√®mes avec r0ot-mi Web - Client. Partie 1</a></li>
<li><a href="../fr471664/index.html">Stage chez ABBYY: une entreprise avec laquelle vous pouvez √™tre ¬´vous¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>