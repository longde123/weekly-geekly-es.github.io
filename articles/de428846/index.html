<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💵 👩🏼‍🤝‍👨🏿 🕳️ Arbeiten mit Strings in der Kompilierungsphase in modernem C ++ 🗣️ 😱 🏗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie in C ++ programmieren, haben Sie sich wahrscheinlich gefragt, warum Sie zwei Zeichenfolgenliterale nicht vergleichen oder ihre Verkettung nic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arbeiten mit Strings in der Kompilierungsphase in modernem C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428846/"><p><img src="https://habrastorage.org/webt/4i/nz/cv/4inzcv5q6x14bvgcv4b4l5fbzdi.jpeg"></p><br><p>  Wenn Sie in C ++ programmieren, haben Sie sich wahrscheinlich gefragt, warum Sie zwei Zeichenfolgenliterale nicht vergleichen oder ihre Verkettung nicht durchführen können: </p><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = <span class="hljs-string"><span class="hljs-string">"hello"</span></span> + <span class="hljs-string"><span class="hljs-string">"world"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   if ("hello" &lt; "world") { // ,    ,   // ... }</span></span></code> </pre> <br><p>  Wie sie jedoch sagen: "Es ist unmöglich, aber wenn Sie wirklich wollen, dann können Sie."  Wir werden Stereotypen unter dem Schnitt und direkt in der Kompilierungsphase brechen. </p><a name="habracut"></a><br><h3 id="zachem-vse-eto-nuzhno">  Warum das alles gebraucht wird </h3><br><p>  In einem der Projekte, an denen ich arbeitete, war es üblich, std :: string als String-Konstanten zu verwenden.  Das Projekt hatte mehrere Module, in denen globale String-Konstanten definiert wurden: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// plugin.h const std::string PLUGIN_PATH = "/usr/local/lib/project/plugins/"; // ...</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// sample_plugin.h const std::string SAMPLE_PLUGIN_LIB = PLUGIN_PATH + "sample.so"; // ...</span></span></code> </pre> <br><p>  Ich denke, Sie haben bereits erraten, was eines Tages passiert ist.  <code>SAMPLE_PLUGIN_PATH</code> hat den Wert <code>"sample.so"</code> , obwohl <code>PLUGIN_PATH</code> den Wert <code>"/usr/local/lib/project/plugins/"</code> hatte.  Wie konnte das passieren?  Alles ist sehr einfach, die Reihenfolge der Initialisierung globaler Objekte ist nicht definiert, zum Zeitpunkt der Initialisierung <code>SAMPLE_PLUGIN_PATH</code> Variable <code>PLUGIN_PATH</code> leer. </p><br><p>  Darüber hinaus weist dieser Ansatz eine Reihe von Nachteilen auf.  Erstens wird die beim Erstellen eines globalen Objekts ausgelöste Ausnahme nicht abgefangen.  Zweitens erfolgt die Initialisierung während der Programmausführung, was wertvolle Prozessorzeit kostet. </p><br><p>  Damals hatte ich die Idee, in der Kompilierungsphase mit Strings zu arbeiten, was schließlich zum Schreiben dieses Artikels führte. </p><br><p>  In diesem Artikel werden Zeilen betrachtet, die in der Kompilierungsphase bearbeitet werden können.  Wir werden solche Zeilen als statisch bezeichnen. </p><br><p>  Alle implementierten Operationen wurden in die Bibliothek aufgenommen, um mit statischen Zeichenfolgen zu arbeiten.  Der Quellcode der Bibliothek ist auf github verfügbar, der Link befindet sich am Ende des Artikels. </p><br><p>  Für die Verwendung der Bibliothek ist mindestens C ++ 14 erforderlich. </p><br><h3 id="opredelenie-staticheskoy-stroki">  Statische Zeichenfolgendefinition </h3><br><p>  Wir definieren eine statische Zeichenfolge als ein Array von Zeichen. Der Einfachheit halber nehmen wir an, dass die Zeichenfolge immer mit einem Nullzeichen endet: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_string = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-number"><span class="hljs-number">6</span></span>&gt; hello = {<span class="hljs-string"><span class="hljs-string">'H'</span></span>, <span class="hljs-string"><span class="hljs-string">'e'</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>, <span class="hljs-string"><span class="hljs-string">'o'</span></span>, <span class="hljs-string"><span class="hljs-string">'\0'</span></span>};</code> </pre> <br><p>  Hier können Sie einen anderen Weg gehen und die Zeichenfolge als Tupel von Zeichen definieren.  Diese Option erschien mir zeitaufwändiger und weniger bequem.  Daher wird hier nicht darauf eingegangen. </p><br><h3 id="sozdanie-staticheskoy-stroki">  Erstellen einer statischen Zeichenfolge </h3><br><p>  Schauen Sie sich die Definition der Hallo-Zeile oben an, es ist einfach schrecklich.  Zuerst müssen wir die Länge des Arrays vorberechnen.  Zweitens müssen Sie daran denken, das Nullzeichen am Ende zu schreiben.  Drittens alle diese Kommas, Klammern und Anführungszeichen.  Hier gibt es definitiv etwas zu tun.  Ich möchte so etwas schreiben: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>);</code> </pre> <br><p>  Hier hilft uns eine der Formen der Variablenvorlage, mit der wir die Vorlagenargumente als Indizes für die aggregierte Initialisierung unserer statischen Zeichenfolge aus einem Zeichenfolgenliteral erweitern können: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// hello == "hello"</span></span></code> </pre> <br><p>  Schon besser, aber Indizes müssen noch von Hand geschrieben werden.  Hier stellen wir auch fest, dass Sie, wenn Sie nicht alle Indizes angeben, eine Teilzeichenfolge eines Zeichenfolgenliteral erhalten können. Wenn Sie sie in umgekehrter Reihenfolge schreiben, ist dies umgekehrt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> hello1 = make_static_string&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// hello1 == "ell" constexpr hello2 = make_static_string&lt;4, 3, 2, 1, 0&gt;("hello"); // hello2 == "olleh"</span></span></code> </pre> <br><p>  Diese Überlegung wird uns in Zukunft sehr nützlich sein. </p><br><p>  Jetzt müssen wir irgendwie eine Folge von Zeilenindizes erzeugen.  Wenden Sie dazu den Vererbungstrick an.  Definieren Sie eine leere Struktur (Sie müssen etwas erben) mit einer Reihe erforderlicher Indizes als Vorlagenparameter: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Wir definieren eine Generatorstruktur, die nacheinander Indizes generiert und den Zähler im ersten Parameter speichert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_sequence</span></span></span><span class="hljs-class"> :</span></span> make_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ...&gt; {};</code> </pre> <br><p>  Wir kümmern uns auch um den Rekursionsendpunkt. Wenn alle Indizes generiert werden (der Zähler ist Null), verwerfen wir den Zähler und der Generator dreht sich in die Reihenfolge, die wir benötigen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_sequence</span></span></span><span class="hljs-class">&lt;0, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Infolgedessen sieht die Funktion zum Erstellen einer statischen Zeichenfolge folgendermaßen aus: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size], index_sequence&lt;Indexes ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Wir werden eine ähnliche Funktion für eine statische Zeichenfolge schreiben, die für uns weiter nützlich sein wird: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Indexes) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size&gt;&amp; str, index_sequence&lt;Indexes ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str[Indexes] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Außerdem schreiben wir für jede Funktion, die das String-Literal <code>foo(const char (&amp; str)[Size])</code> , eine ähnliche Funktion, die den statischen String <code>foo(const static_string&lt;Size&gt;&amp; str)</code> .  Der Kürze halber werde ich dies jedoch nicht erwähnen. </p><br><p>  Da uns die Länge des String-Literal bekannt ist, können wir automatisch eine Folge von Indizes generieren. Wir schreiben einen Wrapper für die obige Funktion: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size&gt; make_static_string(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> (&amp; str)[Size]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><p>  Mit dieser Funktion können wir genau das tun, was wir zu Beginn des Kapitels wollten. </p><br><p>  Wenn keine Argumente vorhanden sind, geben wir eine leere statische Zeichenfolge zurück, die nur aus einem Nullzeichen besteht: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Wir müssen auch eine Zeichenfolge aus einem Tupel von Zeichen erstellen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Chars) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; make_static_string(char_sequence&lt;Chars ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {Chars ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; }</code> </pre> <br><p>  Übrigens basiert alles, was später in diesem Artikel beschrieben wird, auf den in diesem Kapitel beschriebenen Techniken.  Wenn etwas unverständlich bleibt, ist es daher besser, das Kapitel erneut zu lesen. </p><br><h3 id="vyvod-staticheskoy-stroki-v-potok">  Geben Sie eine statische Zeichenfolge in einen Stream aus </h3><br><p>  Hier ist alles einfach.  Da unsere Zeichenfolge mit einem Nullzeichen endet, reicht es aus, die Array-Daten an den Stream auszugeben: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ostream&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;&lt;(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ostream&amp; os, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size&gt;&amp; str) { os &lt;&lt; str.data(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> os; }</code> </pre> <br><h3 id="preobrazovanie-staticheskoy-stroki-v-stdstring">  Konvertieren Sie eine statische Zeichenfolge in eine std :: Zeichenfolge </h3><br><p>  Auch hier nichts Kompliziertes.  Wir initialisieren den String mit Array-Daten: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(str.data()); }</code> </pre> <br><h3 id="sravnenie-staticheskih-strok">  Vergleich statischer Zeichenfolgen </h3><br><p>  Wir werden die Zeilen Zeichen für Zeichen vergleichen, bis wir die Unterschiede finden oder bis wir das Ende mindestens einer der Zeilen erreichen.  Da constexpr for noch nicht erfunden wurde, verwenden wir die Rekursion und den ternären Operator: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_compare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size1&gt;&amp; str1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size2&gt;&amp; str2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size1 &amp;&amp; index &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">0</span></span> : index &gt;= Size1 ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : index &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index] &gt; str2[index] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index] &lt; str2[index] ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : static_string_compare(str1, str2, index + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><p>  In Zukunft werden wir eine erweiterte Version des Komparators benötigen, wir werden einen individuellen Index für jede ihrer Zeilen einführen und wir werden auch die Anzahl der verglichenen Zeichen begrenzen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_compare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size1&gt;&amp; str1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size2&gt;&amp; str2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cur_length, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_length)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cur_length &gt; max_length || (index1 &gt;= Size1 &amp;&amp; index2 &gt;= Size2) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : index1 &gt;= Size1 ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : index2 &gt;= Size2 ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index1] &gt; str2[index2] ? <span class="hljs-number"><span class="hljs-number">1</span></span> : str1[index1] &lt; str2[index2] ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : static_string_compare(str1, index1 + <span class="hljs-number"><span class="hljs-number">1</span></span>, str2, index2 + <span class="hljs-number"><span class="hljs-number">1</span></span>, cur_length + <span class="hljs-number"><span class="hljs-number">1</span></span>, max_length); }</code> </pre> <br><p>  Mit dieser Version des Komparators können wir nicht nur den gesamten String, sondern auch einzelne Teilzeichenfolgen vergleichen. </p><br><h3 id="konkatenaciya-staticheskih-strok">  Verkettung statischer Strings </h3><br><p>  Für die Verkettung verwenden wir dieselbe Variablenvorlage wie im Kapitel zum Erstellen einer statischen Zeichenfolge.  Initialisieren Sie das Array zuerst mit den Zeichen der ersten Zeile (ohne das Nullzeichen), dann mit der zweiten und fügen Sie schließlich das Nullzeichen am Ende hinzu: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size1 + Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; static_string_concat_2( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, index_sequence&lt;Indexes1 ...&gt;, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2, index_sequence&lt;Indexes2 ...&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {str1[Indexes1] ..., str2[Indexes2] ..., <span class="hljs-string"><span class="hljs-string">'\0'</span></span>}; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> static_string&lt;Size1 + Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; static_string_concat_2( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_concat_2(str1, make_index_sequence&lt;Size1 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}, str2, make_index_sequence&lt;Size2 - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><p>  Wir implementieren auch eine Variablenvorlage zum Verketten einer beliebigen Anzahl von Zeichenfolgen oder Zeichenfolgenliteralen: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Arg, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Arg&amp;&amp; arg, Args&amp;&amp; ... args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_concat_2(make_static_string(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Arg&gt;(arg)), static_string_concat(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args) ...)); }</code> </pre> <br><h3 id="operacii-poiska-v-staticheskoy-stroke">  Suchvorgänge für statische Zeichenfolgen </h3><br><p>  Betrachten Sie die Operation zum Suchen eines Zeichens und einer Teilzeichenfolge in einer statischen Zeichenfolge. </p><br><h4 id="poisk-simvola-v-staticheskoy-stroke">  Suchen Sie nach einem Zeichen in einer statischen Zeichenfolge </h4><br><p>  Die Zeichensuche ist nicht besonders schwierig. Überprüfen Sie die Zeichen rekursiv auf alle Indizes und geben Sie im Falle einer Übereinstimmung den ersten Index zurück.  Wir geben auch die Möglichkeit, die Anfangsposition der Suche und die Sequenznummer der Übereinstimmung festzulegen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || from &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? static_string_npos : str[from] != ch ? static_string_find(str, ch, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, ch, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><p>  Die Konstante <code>static_string_npos</code> zeigt an, dass die Suche nicht erfolgreich war.  Wir definieren es wie folgt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> static_string_npos = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;::max();</code> </pre> <br><p>  Ebenso implementieren wir eine Suche in die entgegengesetzte Richtung: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || from &gt; Size - <span class="hljs-number"><span class="hljs-number">2</span></span> ? static_string_npos : str[from] != ch ? static_string_rfind(str, ch, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, ch, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><h4 id="opredelenie-vhozhdeniya-simvola-v-staticheskuyu-stroku">  Bestimmen des Auftretens eines Zeichens in einer statischen Zeichenfolge </h4><br><p>  Um das Auftreten eines Charakters zu bestimmen, suchen Sie einfach danach: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(str, ch) != static_string_npos; }</code> </pre> <br><h4 id="podschet-kolichestva-vhozhdeniy-simvola-v-staticheskuyu-stroku">  Zählen Sie die Anzahl der Vorkommen eines Zeichens in einer statischen Zeichenfolge </h4><br><p>  Das Zählen der Anzahl der Vorkommen ist trivial implementiert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (str[index] == ch ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>) + static_string_count(str, ch, index + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><h4 id="poisk-podstroki-v-staticheskoy-stroke">  Suchen Sie nach einer Teilzeichenfolge in einer statischen Zeichenfolge </h4><br><p>  Da davon ausgegangen wird, dass die statischen Zeilen relativ klein sind, werden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Knut-Morris-Pratt-Algorithmus</a> hier nicht implementieren, sondern den einfachsten quadratischen Algorithmus implementieren: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; SubSize || from &gt; Size - SubSize ? static_string_npos : static_string_compare(str, from, substr, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, substr, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_find(str, substr, from + <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><p>  Ebenso implementieren wir eine Suche in die entgegengesetzte Richtung: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; SubSize || from &gt; Size - SubSize ? static_string_npos : static_string_compare(str, from, substr, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, substr, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth) : nth &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? static_string_rfind(str, substr, from - <span class="hljs-number"><span class="hljs-number">1</span></span>, nth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : from; }</code> </pre> <br><h4 id="opredelenie-vhozhdeniya-podstroki-v-staticheskuyu-stroku">  Bestimmen des Auftretens eines Teilstrings in einer statischen Zeichenfolge </h4><br><p>  Versuchen Sie einfach, nach dem Auftreten eines Teilstrings zu suchen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(str, substr) != static_string_npos; }</code> </pre> <br><h4 id="opredelenie-nachinaetsyakonchaetsya-li-staticheskaya-stroka-sna-zadannoy-podstroki">  Bestimmen, ob eine statische Zeichenfolge mit / auf einem bestimmten Teilstring beginnt / endet </h4><br><p>  Mit dem zuvor beschriebenen Komparator können wir feststellen, ob die statische Zeichenfolge mit der angegebenen Teilzeichenfolge beginnt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; prefix)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubSize &gt; Size ? <span class="hljs-literal"><span class="hljs-literal">false</span></span> : static_string_compare(str, <span class="hljs-number"><span class="hljs-number">0</span></span>, prefix, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Ähnliches gilt für das Beenden einer statischen Linie: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; suffix)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SubSize &gt; Size ? <span class="hljs-literal"><span class="hljs-literal">false</span></span> : static_string_compare(str, Size - SubSize, suffix, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SubSize - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><h3 id="rabota-s-podstrokami-staticheskoy-stroki">  Arbeiten mit statischen String-Teilzeichenfolgen </h3><br><p>  Hier betrachten wir die Operationen, die den Teilzeichenfolgen einer statischen Zeichenfolge zugeordnet sind. </p><br><h4 id="poluchenie-podstroki-prefiksa-i-suffiksa-staticheskoy-stroki">  Teilzeichenfolge, Präfix und Suffix einer statischen Zeichenfolge abrufen </h4><br><p>  Wie bereits erwähnt, müssen Sie zum Erhalten eines Teilstrings eine Folge von Indizes mit den angegebenen Start- und Endindizes generieren: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_subsequence</span></span></span><span class="hljs-class"> :</span></span> make_index_subsequence&lt;Begin, End - <span class="hljs-number"><span class="hljs-number">1</span></span>, End - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Pos, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_index_subsequence</span></span></span><span class="hljs-class">&lt;Pos, Pos, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Wir implementieren das Erhalten eines Teilstrings, indem wir den Anfang und das Ende eines Teilstrings mit <code>static_assert</code> : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_substring</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(Begin &lt;= End, <span class="hljs-string"><span class="hljs-string">"Begin is greater than End (Begin &gt; End)"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(End &lt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"End is greater than string length (End &gt; Size - 1)"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_index_subsequence&lt;Begin, End&gt;{}); }</code> </pre> <br><p>  Das Präfix ist eine Teilzeichenfolge, deren Anfang mit dem Anfang der ursprünglichen statischen Linie übereinstimmt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>, End&gt;(str); }</code> </pre> <br><p>  In ähnlicher Weise stimmt für das Suffix nur das Ende überein: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_suffix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;Begin, Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;(str); }</code> </pre> <br><h4 id="razdelenie-staticheskoy-stroki-na-dve-chasti-po-zadannomu-indeksu">  Aufteilen einer statischen Zeichenfolge in zwei Teile an einem bestimmten Index </h4><br><p>  Um eine statische Zeichenfolge an einem bestimmten Index zu teilen, reicht es aus, das Präfix und das Suffix zurückzugeben: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Index, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_split</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_pair(static_string_prefix&lt;Index&gt;(str), static_string_suffix&lt;Index + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;(str)); }</code> </pre> <br><h4 id="reversirovanie-staticheskoy-stroki">  Umkehrung der statischen Zeichenfolge </h4><br><p>  Um eine statische Zeichenfolge umzukehren, schreiben wir einen Indexgenerator, der Indizes in umgekehrter Reihenfolge generiert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_reverse_index_sequence</span></span></span><span class="hljs-class"> :</span></span> make_reverse_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>, Indexes ..., Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ... Indexes&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_reverse_index_sequence</span></span></span><span class="hljs-class">&lt;0, Indexes ...&gt; :</span></span> index_sequence&lt;Indexes ...&gt; {};</code> </pre> <br><p>  Jetzt implementieren wir eine Funktion, die die statische Zeichenfolge umkehrt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(str, make_reverse_index_sequence&lt;Size - <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;{}); }</code> </pre> <br><h3 id="vychislenie-hesha-staticheskoy-stroki">  Statische String-Hash-Berechnung </h3><br><p>  Wir werden den Hash mit der folgenden Formel berechnen: </p><br><p>  H (s) = (s <sub>0</sub> + 1) ≤ 33 <sup>0</sup> + (s <sub>1</sub> + 1) ≤ 33 <sup>1</sup> + ... + (s <sub>n - 1</sub> + 1) ≤ 33 <sup>n - 1</sup> + 5381 ≤ 33 <sup>n</sup> mod 2 <sup>64</sup> </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_hash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">5381U</span></span>LL : static_string_hash(str, index + <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">33U</span></span>LL + str[index] + <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br><h3 id="preobrazovanie-chisla-v-staticheskuyu-stroku-i-obratno">  Konvertieren Sie eine Zahl in eine statische Zeichenfolge und umgekehrt </h3><br><p>  In diesem Kapitel betrachten wir die Konvertierung einer statischen Zeichenfolge in eine Ganzzahl sowie die Umkehrung.  Der Einfachheit halber nehmen wir an, dass Zahlen durch Typen mit <code>long long</code> und <code>unsigned long long</code> werden. Dies sind Typen mit großer Kapazität, dh sie sind für die meisten Fälle geeignet. </p><br><h4 id="preobrazovanie-chisla-v-staticheskuyu-stroku">  Konvertieren Sie eine Zahl in eine statische Zeichenfolge </h4><br><p>  Um eine Zahl in eine statische Zeichenfolge umzuwandeln, müssen wir alle Ziffern der Zahl abrufen, sie in die entsprechenden Zeichen konvertieren und aus diesen Zeichen eine Zeichenfolge erstellen. </p><br><p>  Um alle Ziffern einer Zahl zu erhalten, verwenden wir einen Generator ähnlich dem Indexsequenzgenerator.  Definieren Sie eine Zeichenfolge: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">char_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Wir implementieren einen Ziffernzeichengenerator, der die aktuelle Nummer im ersten Parameter und die Zahlen im Folgenden speichert. Die nächste Ziffer wird am Anfang der Sequenz hinzugefügt und die Nummer wird durch zehn geteilt: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class"> :</span></span> make_unsigned_int_char_sequence&lt;Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + Value % <span class="hljs-number"><span class="hljs-number">10</span></span>, Chars ...&gt; {};</code> </pre> <br><p>  Wenn die aktuelle Zahl 0 ist, verwerfen wir sie und geben eine Folge von Ziffern zurück. Es gibt nichts mehr zu konvertieren: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class">&lt;0, Chars ...&gt; :</span></span> char_sequence&lt;Chars ...&gt; {};</code> </pre> <br><p>  Sie sollten auch den Fall berücksichtigen, in dem die Anfangszahl Null ist. In diesem Fall müssen Sie ein Nullzeichen zurückgeben. Andernfalls wird Null in eine leere Zeichenfolge und dann in eine leere Zeichenfolge konvertiert: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_unsigned_int_char_sequence</span></span></span><span class="hljs-class">&lt;0&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'0'</span></span>&gt; {};</code> </pre> <br><p>  Der implementierte Generator eignet sich hervorragend für positive Zahlen, ist jedoch nicht für negative Zahlen geeignet.  Wir definieren einen neuen Generator, indem wir am Anfang einen weiteren Vorlagenparameter hinzufügen - das Vorzeichen der konvertierten Zahl: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Negative, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class"> {</span></span>};</code> </pre> <br><p>  Wir werden die Nummer wie oben gezeigt verarbeiten, aber das Zeichen berücksichtigen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;true, Value, Chars ...&gt; :</span></span> make_signed_int_char_sequence&lt;<span class="hljs-literal"><span class="hljs-literal">true</span></span>, Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + -(Value % <span class="hljs-number"><span class="hljs-number">10</span></span>), Chars ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, Value, Chars ...&gt; :</span></span> make_signed_int_char_sequence&lt;<span class="hljs-literal"><span class="hljs-literal">false</span></span>, Value / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span> + Value % <span class="hljs-number"><span class="hljs-number">10</span></span>, Chars ...&gt; {};</code> </pre> <br><p>  Es gibt hier einen subtilen Punkt, achten Sie auf <code>-(Value % 10)</code> .  Hier können <code>-Value % 10</code> nicht <code>-Value % 10</code> , da der Bereich der negativen Zahlen eine Zahl größer ist als der Bereich der positiven Zahlen und der Mindestzahlmodul aus dem Satz gültiger Werte herausfällt. </p><br><p>  Wir verwerfen die Zahl nach der Verarbeitung. Wenn sie negativ ist, fügen Sie das Minuszeichen hinzu: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;true, 0, Chars ...&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'-'</span></span>, Chars ...&gt; {}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ... Chars&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, 0, Chars ...&gt; :</span></span> char_sequence&lt;Chars ...&gt; {};</code> </pre> <br><p>  Separat kümmern wir uns um die Konvertierung von Null: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">make_signed_int_char_sequence</span></span></span><span class="hljs-class">&lt;false, 0&gt; :</span></span> char_sequence&lt;<span class="hljs-string"><span class="hljs-string">'0'</span></span>&gt; {};</code> </pre> <br><p>  Schließlich implementieren wir die Konvertierungsfunktionen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uint_to_static_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(make_unsigned_int_char_sequence&lt;Value&gt;{}); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Value&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int_to_static_string</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> make_static_string(make_signed_int_char_sequence&lt;(Value &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>), Value&gt;{}); }</code> </pre> <br><h4 id="preobrazovanie-staticheskoy-stroki-v-chislo">  Konvertieren Sie eine statische Zeichenfolge in eine Zahl </h4><br><p>  Um eine statische Zeichenfolge in eine Zahl umzuwandeln, müssen Sie die Zeichen in Zahlen umwandeln und diese dann hinzufügen, nachdem Sie zuvor zehn mit der entsprechenden Potenz multipliziert haben.  Wir führen alle Aktionen rekursiv aus. Für eine leere Zeichenfolge geben wir Null zurück: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_uint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10U</span></span>LL * static_string_to_uint(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_uint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_to_uint(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>); }</code> </pre> <br><p>  Beachten Sie beim Konvertieren von vorzeichenbehafteten Zahlen, dass negative Zahlen mit einem Minuszeichen beginnen: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> first)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index &lt; first || index &gt;= Size - <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : first == <span class="hljs-number"><span class="hljs-number">0</span></span> ? (str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10L</span></span>L * static_string_to_int(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>, first) : -(str[index] - <span class="hljs-string"><span class="hljs-string">'0'</span></span>) + <span class="hljs-number"><span class="hljs-number">10L</span></span>L * static_string_to_int(str, index - <span class="hljs-number"><span class="hljs-number">1</span></span>, first); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static_string_to_int</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;Size&gt;&amp; str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : str[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'-'</span></span> ? static_string_to_int(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) : static_string_to_int(str, Size - <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre> <br><h3 id="voprosy-udobstva-ispolzovaniya-biblioteki">  Überlegungen zur Benutzerfreundlichkeit der Bibliothek </h3><br><p>  Zu diesem Zeitpunkt ist es bereits möglich, die Bibliothek vollständig zu nutzen, einige Punkte sind jedoch unpraktisch.  In diesem Kapitel erfahren Sie, wie Sie die Verwendung der Bibliothek komfortabler gestalten können. </p><br><h4 id="obekt-staticheskoy-stroki">  Statisches String-Objekt </h4><br><p>  Packen Sie den String und die implementierten Methoden in ein Objekt.  Dies ermöglicht die Verwendung kürzerer Methodennamen sowie die Implementierung von Vergleichsoperatoren: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">static_string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">length</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">begin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rbegin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size - <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;::max(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">empty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Size &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_reverse(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">substring</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_substring&lt;Begin, End&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> End&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_prefix&lt;End&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Begin&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">suffix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_suffix&lt;Begin&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_find(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - SubSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rfind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize], </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> from = Size - SubSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_rfind(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr, from, nth); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; substr)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; substr)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_contains(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, substr); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; prefix)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_starts_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, prefix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">starts_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; prefix)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_starts_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, prefix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> static_string&lt;SubSize&gt;&amp; suffix)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_ends_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, suffix); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SubSize&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ends_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (&amp; suffix)[SubSize])</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_ends_with(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, suffix); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_count(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ch); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Index&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">split</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_split&lt;Index&gt;(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_hash(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>[](<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> index) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data[index]; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">str</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> to_string(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt; data; };</code> </pre> <br><h4 id="operatory-sravneniya">   </h4><br><p>        .    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size1, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size2&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size1&gt;&amp; str1, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> static_string&lt;Size2&gt;&amp; str2) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> static_string_compare(str1, str2) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>     &gt; &lt;= &gt;= == !=,         .      - . </p><br><h4 id="makrosy-raboty-s-chislami">     </h4><br><p>            : </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ITOSS(x) int_to_static_string</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;(x)&gt;() #define UTOSS(x) uint_to_static_string&lt;(x)&gt;() #define SSTOI(x) static_string_to_int((x)) #define SSTOU(x) static_string_to_uint((x))</span></span></span></span></code> </pre> <br><h3 id="primery-ispolzovaniya-biblioteki">    </h3><br><p>       . </p><br><p>      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello = make_static_string(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> world = make_static_string(<span class="hljs-string"><span class="hljs-string">"World"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> greeting = hello + <span class="hljs-string"><span class="hljs-string">", "</span></span> + world + <span class="hljs-string"><span class="hljs-string">"!"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// greeting == "Hello, World!"</span></span></code> </pre> <br><p>   ,    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> apples = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oranges = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"I have "</span></span>, ITOSS(apples), <span class="hljs-string"><span class="hljs-string">" apples and "</span></span>, ITOSS(oranges), <span class="hljs-string"><span class="hljs-string">", so I have "</span></span>, ITOSS(apples + oranges), <span class="hljs-string"><span class="hljs-string">" fruits"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// message = "I have 5 apples and 7 oranges, so I have 12 fruits"</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> width = <span class="hljs-number"><span class="hljs-number">123456789U</span></span>LL; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> height = <span class="hljs-number"><span class="hljs-number">987654321U</span></span>LL; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"A rectangle with width "</span></span>, UTOSS(width), <span class="hljs-string"><span class="hljs-string">" and height "</span></span>, UTOSS(height), <span class="hljs-string"><span class="hljs-string">" has area "</span></span>, UTOSS(width * height)); <span class="hljs-comment"><span class="hljs-comment">// message = "A rectangle with width 123456789 and height 987654321 has area 121932631112635269"</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> revenue = <span class="hljs-number"><span class="hljs-number">1'000'000L</span></span>L; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> costs = <span class="hljs-number"><span class="hljs-number">1'200'000L</span></span>L; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> profit = revenue - costs; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> message = static_string_concat(<span class="hljs-string"><span class="hljs-string">"The first quarter has ended with net "</span></span>, (profit &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-string"><span class="hljs-string">"profit"</span></span> : <span class="hljs-string"><span class="hljs-string">"loss "</span></span>), <span class="hljs-string"><span class="hljs-string">" of $"</span></span>, ITOSS(profit &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? -profit : profit)); <span class="hljs-comment"><span class="hljs-comment">// message == "The first quarter has ended with net loss of $200000"</span></span></code> </pre> <br><p>  URL: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> url = make_static_string(<span class="hljs-string"><span class="hljs-string">"http://www.server.com:8080"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = url.find(<span class="hljs-string"><span class="hljs-string">"://"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol = url.prefix&lt;p&gt;(); <span class="hljs-comment"><span class="hljs-comment">// protocol == "http" constexpr auto sockaddr = url.suffix&lt;p + 3&gt;(); constexpr auto hp = sockaddr.split&lt;sockaddr.find(':')&gt;(); constexpr auto host = hp.first; // host == "www.server.com" constexpr int port = SSTOI(hp.second); // port == 8080</span></span></code> </pre> <br><p>      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = make_static_string(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = str.begin(); i != str.end(); ++i) <span class="hljs-comment"><span class="hljs-comment">//  std::cout &lt;&lt; str[i]; std::cout &lt;&lt; std::endl; // Hello for (size_t i = str.rbegin(); i != str.rend(); --i) //  std::cout &lt;&lt; str[i]; std::cout &lt;&lt; std::endl; // olleH</span></span></code> </pre> <br><h3 id="ssylki">  Referenzen </h3><br><p> ,   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> </p><br><p>   ,    . </p><br><h3 id="update">  Update </h3><br><p>    _ss       : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Char, Char ... Chars&gt; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> basic_static_string&lt;Char, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> ... (Chars) + <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span><span class="hljs-string"><span class="hljs-string">""</span></span> _ss() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {Chars ..., <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Char&gt;(<span class="hljs-string"><span class="hljs-string">'\0'</span></span>)}; };</code> </pre> <br><p>  make_static_string()    ,    : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hello_world = <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>_ss + <span class="hljs-string"><span class="hljs-string">" World"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"Hello"</span></span> &lt; <span class="hljs-string"><span class="hljs-string">"World"</span></span>_ss) { ... } <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> hash = <span class="hljs-string"><span class="hljs-string">"VeryLongString"</span></span>_ss.hash();</code> </pre> <br><p>    Char  char: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Char, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">basic_static_string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... std::array&lt;const Char, Size&gt; data; };</span></span></code> </pre> <br><p>    char  whar_t,     ,    concat,      : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_string_t</span></span> = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Size&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_wstring_t</span></span> = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span>, Size&gt;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_string = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>&gt;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> static_wstring = basic_static_string&lt;<span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>&gt;;</code> </pre> <br><p>      "" : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> wide_string = <span class="hljs-string"><span class="hljs-string">L"WideString"</span></span>_ss; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> apples = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oranges = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fruits = apples + oranges; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str3 = static_wstring::concat(<span class="hljs-string"><span class="hljs-string">L"I have "</span></span>, ITOSW(apples), <span class="hljs-string"><span class="hljs-string">L" apples and "</span></span>, ITOSW(oranges), <span class="hljs-string"><span class="hljs-string">L" oranges, so I have "</span></span>, ITOSW(fruits), <span class="hljs-string"><span class="hljs-string">L" fruits"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(str3 == <span class="hljs-string"><span class="hljs-string">L"I have 5 apples and 7 oranges, so I have 12 fruits"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::wcout &lt;&lt; str3 &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre> <br><p>   size(),  size()  length()       ,       sizeof(): </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> ss1 = <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>_ss; <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(ss1.length() == <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(ss1.size() == <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(ss1) == <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre> <br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> <br>     . </p><br><h3 id="update-2"> Update 2 </h3><br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">AndreySu</a>       ,      : </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; using namespace std; template&lt;typename Char, Char ... Chars&gt; struct static_string{}; template&lt;typename Char, Char ... Chars1, Char ... Chars2&gt; constexpr static_string&lt;Char, Chars1 ..., Chars2 ... &gt; operator+( const static_string&lt;Char, Chars1 ... &gt;&amp; str1, const static_string&lt;Char, Chars2 ... &gt;&amp; str2) { return static_string&lt;Char, Chars1 ..., Chars2 ...&gt;{}; } template&lt;typename Char, Char ch, Char ... Chars&gt; std::basic_ostream&lt;Char&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;Char&gt;&amp; bos, const static_string&lt;Char, ch, Chars ...&gt;&amp; str) { bos &lt;&lt; ch &lt;&lt; static_string&lt;Char, Chars ... &gt;{}; return bos; } template&lt;typename Char&gt; std::basic_ostream&lt;Char&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;Char&gt;&amp; bos, const static_string&lt;Char&gt;&amp; str) { return bos; } template&lt;typename Char, Char ... Chars&gt; constexpr static_string&lt;Char, Chars ... &gt; operator"" _ss() { return static_string&lt;Char, Chars ... &gt;{}; }; int main() { constexpr auto str1 = "abc"_ss; constexpr auto str2 = "def"_ss; constexpr auto str = str1 + str2 + str1; std::cout &lt;&lt; str &lt;&lt; std::endl; return 0; }</span></span></span></span></code> </pre> <br><p>        ,  ,  -       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de428846/">https://habr.com/ru/post/de428846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de428834/index.html">Die Hälfte der in Norwegen verkauften Autos - Elektroautos</a></li>
<li><a href="../de428836/index.html">KI trainiert, um Blutvergiftungen zu behandeln und Frakturen zu diagnostizieren</a></li>
<li><a href="../de428840/index.html">Verlassen - gehen? Nachtgespräch über Entlassungen</a></li>
<li><a href="../de428842/index.html">Digitale Veranstaltungen in Moskau vom 6. bis 11. November</a></li>
<li><a href="../de428844/index.html">Zählerstand zu Hause</a></li>
<li><a href="../de428848/index.html">Hinweise des IoT-Anbieters: Wie erstelle ich an einem Tag ein LoRa-Netzwerk in einer Stadt ohne Netzwerk?</a></li>
<li><a href="../de428850/index.html">Entwicklungsmanagement in einem großen Projekt</a></li>
<li><a href="../de428852/index.html">Offene Sendung der Haupthalle HighLoad ++ 2018</a></li>
<li><a href="../de428854/index.html">So schalten Sie das Licht in einem kleinen Rechenzentrum aus: eine kostengünstige Möglichkeit, Notfälle einzusetzen</a></li>
<li><a href="../de428856/index.html">Ein wunderbarer Trick, um Open Source-Projektbetreuer zu einem Tag zu machen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>