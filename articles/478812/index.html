<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ©Ô∏è üë®üèø üòπ Desarrolle hexapod desde cero (parte 6): transici√≥n a la impresi√≥n 3D üßó üöØ üë©üèº‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! El desarrollo del hexapod est√° en curso y es hora de mostrar los cambios fundamentales en el dise√±o y los planes para el firmware. Hubo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrolle hexapod desde cero (parte 6): transici√≥n a la impresi√≥n 3D</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478812/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/pz/zb/plpzzbg1zxhcgfisx9j2c2bb1p0.png"></div><br>  Hola a todos!  El desarrollo del hexapod est√° en curso y es hora de mostrar los cambios fundamentales en el dise√±o y los planes para el firmware.  Hubo una gran pausa en el lanzamiento de nuevos art√≠culos como resultado del largo dise√±o de la nueva electr√≥nica y la vivienda.  En principio, este ser√° el art√≠culo, como siempre muchas fotos. <br><br>  <b>Etapas de desarrollo:</b> <br>  <a href="https://habr.com/ru/post/424867/">Parte 1 - Dise√±o</a> <br>  <a href="https://habr.com/ru/post/424905/">Parte 2 - montaje</a> <br>  <a href="https://habr.com/ru/post/436748/">Parte 3 - Cinem√°tica</a> <br>  <a href="https://habr.com/ru/post/444070/">Parte 4 - trayectorias y secuencias matem√°ticas</a> <br>  <a href="https://habr.com/ru/post/448058/">Parte 5 - Electr√≥nica</a> <br>  <a href="https://habr.com/ru/post/478812/"><b>Parte 6: transici√≥n a la impresi√≥n 3D</b></a> <br><a name="habracut"></a><br><h3>  Algunos puntos generales </h3><br>  Le di un nuevo nombre al proyecto, ya que nada pr√°ctico en la actualidad habla de ello.  De hecho, SKYNET es una red celestial, bueno, o algo as√≠ (cielo - cielo, red - red).  En este caso, no hay red, y m√°s a√∫n el cielo. <br><br>  El nuevo nombre es <b>AIWM (m√°quina de caminar de inteligencia artificial)</b> , una m√°quina de caminar con inteligencia artificial.  A expensas de la inteligencia, es muy temprano aqu√≠, pero de repente puedo vivir hasta este punto :) <br><br>  Hice una breve demostraci√≥n con una descripci√≥n de las caracter√≠sticas actuales (la vista previa de un nuevo dise√±o comienza desde el segundo minuto). <br><iframe width="560" height="315" src="https://www.youtube.com/embed/xboa1LVdZsw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3>  Cambios funcionales </h3><br>  Durante el redise√±o, surgieron muchas ideas y complejidades.  Se eliminaron varias partes innecesarias y se agreg√≥ una nueva funcionalidad.  Aqu√≠ hay una lista de los cambios que se planean implementar: <br><br><ol><li>  Arquitectura multiprocesador.  Actualmente se planean 3 MCU: controlador de visi√≥n artificial (Broadcom BCM2835), controlador de potencia (STM32F030), controlador principal (STM32F373); <br><ul><li>  El controlador de visi√≥n artificial es un m√≥dulo Raspberry Pi Zero listo para usar y se dedicar√° a la recolecci√≥n, procesamiento y reconocimiento de objetos de la c√°mara.  Todo el hardware necesario para esto est√° conectado a √©l.  La comunicaci√≥n se lleva a cabo utilizando el protocolo ModBus en modo esclavo; </li><li>  El controlador de potencia es un potente DC-DC (hasta 250 W) con la capacidad de ajustar el voltaje de salida sobre la marcha a trav√©s de la comunicaci√≥n.  Alimenta toda la electr√≥nica del hexapod y es su coraz√≥n.  Quiz√°s en el futuro sea posible cambiar a la fuente de alimentaci√≥n directa de unidades de 7.4V, pero tales unidades son bastante caras incluso en Ali.  La comunicaci√≥n se lleva a cabo utilizando el protocolo ModBus en modo esclavo; </li><li>  El controlador principal es el enlace en esta arquitectura.  Se dedica al procesamiento de movimiento y proporciona una interfaz para la comunicaci√≥n con el mundo exterior.  La comunicaci√≥n se lleva a cabo de acuerdo con el protocolo ModBus en el modo esclavo (mundo externo) y el maestro (comunicaci√≥n entre procesos); </li></ul></li><li>  Soporte de transmisi√≥n de video o transferencia de imagen WIFI para control fuera de la l√≠nea de visi√≥n si hay suficientes recursos gratuitos de Raspberry Pi Zero; </li><li>  Se decidi√≥ transferir el control a Bluetooth (se usar√° el puente BLE-UART HM-10 listo para usar), ya que WIFI ya est√° te√≥ricamente ocupado para transmitir video al panel de control.  Adem√°s, quiero poder actualizar el firmware o la configuraci√≥n sobre la marcha desde un servidor remoto, y si usa WIFI para la comunicaci√≥n, ya no estar√° en l√≠nea; </li><li>  Gesti√≥n de LED RGB en el frente para iluminar en la oscuridad y mostrar simult√°neamente el estado de FW; </li><li>  Los sensores t√°ctiles est√°n integrados en la estructura de las piernas, lo que permitir√° un algoritmo de movimiento m√°s inteligente; </li></ol><br><h3>  Controlador principal o tablero de control </h3><br>  Estaba cansado de la placa de emparedado actual, y se decidi√≥ dise√±ar una nueva placa de control, teniendo en cuenta las innovaciones en el dise√±o.  En el proceso de dise√±o, se arroj√≥ la pantalla (no realmente, para qu√©, se la necesita all√≠) y un medidor de rango ultras√≥nico (luego guano).  En el camino, decid√≠ mudarme a STM32F373 para finalmente deshacerme de Arduino, y la presencia de FPU en este procesador, realmente invita a instalarlo. <br><br>  Despu√©s de una semana de trazar el circuito y rastrear, apareci√≥ un prototipo electr√≥nico del tablero.  En total, se necesitaron 20 horas para dise√±ar. Para reducir la cantidad de posibles fuentes de errores, se planea una transici√≥n gradual a la nueva electr√≥nica.  En este caso, el primer plan de control se lanzar√° junto con la antigua placa de alimentaci√≥n. <br><br>  Para la compatibilidad del software Android actual, se proporciona una huella debajo del puente WIFI-UART, que ahora se usa en el prototipo.  Las capturas de pantalla de la placa se muestran a continuaci√≥n (WIFI-UART se ha eliminado en la vista 3D, porque Altium por alguna raz√≥n muestra su modelo en un solo color).  De hecho, no importa qu√© usar para la comunicaci√≥n; lo principal es que la salida de la interfaz tiene UART. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jq/zm/va/jqzmvahrjuse69kdkxkkcjolaay.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xs/kr/wj/xskrwjznuktifi27u5k3m0rtzqk.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/g_/ow/my/g_owmy9obfc9l7vaos-dwns_z7m.png"></div><br>  Los siguientes conectores se proporcionan en la placa: <br>  - La fuente de alimentaci√≥n principal es 12V + contactos desde el conector de equilibrio para la posibilidad de monitorear el voltaje de cada celda; en base a esto, tambi√©n puede determinar el tipo de bater√≠a conectada (n√∫mero de celdas); <br>  - Un conector para transmitir se√±ales a la placa de alimentaci√≥n para servos; <br>  - Conectores para controlador de visi√≥n artificial y controlador de potencia; <br>  - Conector para controlar los LED RGB frontales; <br>  - Conectores para sensores t√°ctiles en las extremidades; <br>  - Un conector para conectar un emisor piezoel√©ctrico.  Se supone que el tweeter ya tiene un circuito de control, y solo cambiamos la potencia. <br><br>  Todo es bastante simple y pasar a STM deber√≠a ser indoloro.  He dise√±ado con √©xito el c√≥digo y es suficiente para reemplazar los controladores que funcionan con registros perif√©ricos. <br><br><h3>  Controlador de potencia </h3><br>  A medida que aument√≥ mi experiencia en electr√≥nica, a trav√©s de un mont√≥n de prueba y error, finalmente pude comprender DC-DC.  De hecho, no hay nada complicado all√≠, lo principal es saber c√≥mo funciona la bobina y por qu√© realmente se necesita all√≠. <br><br>  Para controlar una carga potente, que en este caso es de 18 unidades con un consumo promedio de 12-15 A, se requiere algo m√°s eficiente que la simple CC-CC.  Como regla general, el cuello de botella en ellos es el diodo, que a altas corrientes comienza a calentar la habitaci√≥n.  El voltaje de suministro de los variadores es de 6V con un voltaje de entrada de hasta 12V, en este caso el diodo funcionar√° ~ 50% del ciclo (una estimaci√≥n aproximada sin tener en cuenta la ca√≠da de voltaje y otras alegr√≠as).  En consecuencia, incluso cuando se utiliza un diodo Schottky, la potencia asignada ser√° lo suficientemente grande como para comenzar a pensar en la disipaci√≥n de calor. <br><br>  Los DC-DC s√≠ncronos vienen al rescate, en el que se usa un transistor de efecto de campo en lugar de un diodo.  Con buenos transistores, la resistencia del canal es lo suficientemente baja como para conducir grandes corrientes sin una generaci√≥n de calor significativa.  Las principales diferencias entre DC-DC as√≠ncrono y s√≠ncrono se muestran a continuaci√≥n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8v/hb/0m/8vhb0mhjztzkgi_cpya8h4ofhni.png"></div><br>  En general, despu√©s de leer un mont√≥n de informaci√≥n, finalmente decid√≠ los requisitos: <br><br><ul><li>  La capacidad de conducir corrientes de hasta 20A en modo nominal; </li><li>  Transici√≥n al modo de emergencia en violaci√≥n del modo de funcionamiento normal: sobrecalentamiento o saturaci√≥n de la bobina, sobrecalentamiento de los interruptores de alimentaci√≥n, bajo voltaje de entrada, cortocircuito, voltaje de salida inadecuado y otras alegr√≠as; </li><li>  Capacidad para comunicarse con DC-DC para obtener valores medidos: voltajes de entrada y salida, consumo de corriente, temperaturas de bobina e interruptores de potencia; </li><li>  Eficiencia adecuada; </li></ul><br>  Decid√≠ dise√±ar DC-DC usando el microcontrolador STM32F030, cuesta un centavo y tiene todos los perif√©ricos que necesito para resolver mis problemas.  La √∫nica desventaja de usar este MK es un ajuste de voltaje bastante crudo con un paso de 25mV a una frecuencia de 100kHz.  Para obtener una mayor precisi√≥n, debe usar MK con temporizadores de alta resoluci√≥n a bordo o reducir la frecuencia de conmutaci√≥n de los transistores.  Para mis requisitos, este paso de regulaci√≥n de voltaje es suficiente. <br><br>  Por el momento, el primer prototipo fue dise√±ado y ensamblado, lo que mostr√≥ la eficiencia del circuito.  La eficiencia para mediciones aproximadas es del 87% a una corriente de 11 A en la configuraci√≥n de depuraci√≥n de la placa utilizando resistencias protectoras de corrientes pasantes (necesarias para establecer el tiempo muerto entre los transistores de conmutaci√≥n). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/md/dw/b7/mddwb7pqsxqj3gug7o9twgktpem.png"></div><br>  M√°s detalles sobre DC-DC ser√°n un poco m√°s tarde, cuando lo recuerde.  Hay muchos puntos interesantes, el olor de los controladores de obturador fritos y MK :) Por cierto, los transistores resultaron ser tan potentes que, como resultado de la falla, la corriente quemada quem√≥ la placa de circuito y al mismo tiempo los transistores permanecieron intactos. <br><br><h3>  Un poco sobre el nuevo edificio. </h3><br>  La electr√≥nica es muy interesante, pero tampoco necesitas olvidarte de la mec√°nica.  Finalmente, el hex√°podo ha adquirido una caja cerrada adecuada, desde donde los cables y piezas de placas de circuito impreso no sobresaldr√°n.  Aqui esta <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/bm/_a/qkbm_a4nw9tsyqnvkffqnaef3g4.png"></div><br>  Durante el dise√±o, trat√© de evitar cambiar el tama√±o de los elementos de las extremidades y el propio cuerpo, ya que la versi√≥n anterior se mostr√≥ bien en t√©rminos de velocidad y carga en las unidades.  En general, solo la idea de la ubicaci√≥n de las patas y los tama√±os permaneci√≥ del edificio anterior, el resto fue redise√±ado. <br><br>  La parte m√°s dif√≠cil del dise√±o fue el desarrollo del dise√±o del casco.  Al principio, quer√≠a abandonar este negocio varias veces debido a la discrepancia entre fantas√≠a y realidad, pero d√≠a a d√≠a comenzaron a aparecer elementos decorativos y este sentimiento desapareci√≥.  Despu√©s de todo, el escultor tampoco moli√≥ de inmediato su creaci√≥n, y este momento solo necesita ser experimentado. <br><br>  La caja es un conjunto de piezas para su posterior ensamblaje con pernos de ‚Äúperno‚Äù M3 (en algunos lugares puede usar sujetadores de pl√°stico, por ejemplo, para las cubiertas superior e inferior) para reducir el peso.  En este caso, los pernos se atornillan directamente en el pl√°stico en los orificios para esto con roscas precortadas. <br><br>  La base se ensambla a partir de tres partes diferentes usando ranuras, seguidas de atornillado.  No existe una idea de dise√±o al dividirlo en partes, son solo las capacidades f√≠sicas de la impresora (220x220) y realmente no quiero expandirlo, as√≠ que tengo que descubrir c√≥mo salir de esta situaci√≥n.  Esto tiene su propia ventaja: en caso de cualquier da√±o, es suficiente reimprimir solo la parte da√±ada, lo que ahorrar√° pl√°stico y tiempo de reparaci√≥n (cualquier cosa puede pasar durante las pruebas). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wp/wp/fb/wpwpfb7hc8obeq6voecpq2sidxm.png"></div><br>  Despu√©s de conectar todas las piezas juntas, instalar las unidades y los componentes electr√≥nicos, todo esto se cierra con cubiertas de 6 mm, que se sujetan con pernos de la misma manera.  Se instala un panel de control en la cubierta central, que luego se cierra con un panel decorativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/5w/fb/wq5wfb4u3z3wshzpaabp7lx7y50.png"></div><br>  La fuerza del cuerpo se basa en caer desde 0,5 m de altura hasta una superficie s√≥lida sin violar la integridad.  Por cierto, la versi√≥n de madera contrachapada del casco no sobrevivi√≥ a las duras condiciones de carga en el avi√≥n, mientras que el casco estaba lleno de una gran protuberancia y, como resultado, la pierna se rompi√≥. <br><br>  Las unidades de control de las extremidades se movieron a FEMUR, lo que deber√≠a reducir ligeramente la carga al reducir el peso de TIBIA como resultado de la transferencia del sujetador y el desplazamiento del servomotor m√°s cerca del comienzo de la palanca.  Y ser√° mejor en dise√±o si TIBIA y COXA est√°n instalados en la parte FEMUR, y no viceversa como antes. <br><br><div class="spoiler">  <b class="spoiler_title">COXA, FEMUR y TIBIA?</b>  <b class="spoiler_title">- ¬øQu√© es eso?</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vn/er/iv/vneriv60k1dpousumyrgiodpggi.png"><br></div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tx/ao/jj/txaojjxoip3y68bzfxh6thdgkd0.png"></div><br>  Seg√∫n los c√°lculos preliminares, la impresi√≥n de la carcasa requerir√° 670 g de pl√°stico y 51 horas de impresi√≥n continua con una capa de 0.2 mm y un grosor de boquilla de 0.4 mm.  En general, por dinero resulta un poco m√°s barato que la madera contrachapada, pero el dise√±o es incluso in√∫til para comparar y vale la pena. <br><br><h3>  PS </h3><br>  Estar√© encantado de cualquier sugerencia sobre el caso.  Al momento de escribir esto, el caso ya estaba impreso, pero todav√≠a hay tiempo para hacer cambios en los detalles restantes.  Soy el √∫nico desarrollador de todo este proyecto y, a veces, hay per√≠odos en los que no se me ocurren est√∫pidamente nuevos pensamientos, ahora este per√≠odo comienza :) <br><br><div class="spoiler">  <b class="spoiler_title">Un par de fotos del proceso de impresi√≥n.</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3e/sb/id/3esbidpw5dgjclju5rxolbsrhgo.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/2u/py/ix2upydfyhpidtitprfcllbgfdw.jpeg"></div><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/478812/">https://habr.com/ru/post/478812/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../478796/index.html">Pregrado en los EE. UU .: Camino no convencional a las mejores escuelas secundarias</a></li>
<li><a href="../478798/index.html">Grafeno, que a√∫n no pod√≠a</a></li>
<li><a href="../478802/index.html">React-admin y django rest framework</a></li>
<li><a href="../478804/index.html">Antig√ºedades: cuanto peor, mejor o caracter√≠sticas de Sound Blaster Pro 2</a></li>
<li><a href="../478806/index.html">Agregue autom√°ticamente fuentes JSON a REFL.ME para generar mensajes y alertas</a></li>
<li><a href="../478814/index.html">C√≥mo el marketing agiliza la carga de sus tel√©fonos inteligentes</a></li>
<li><a href="../478816/index.html">Probar aplicaciones de Android usando selenoid. Buscar ubicaci√≥n en una aplicaci√≥n m√≥vil con Appium</a></li>
<li><a href="../478820/index.html">Vivaldi para Android: una beta es buena y la segunda es mejor</a></li>
<li><a href="../478822/index.html">Robotizaci√≥n AI con plataforma de datos IRIS de InterSystems</a></li>
<li><a href="../478824/index.html">Unidad, ECS, actores: c√≥mo aumentar FPS en tu juego diez veces, cuando no hay nada que optimizar [con ediciones]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>