<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî† üåÄ üë®‚Äçüë®‚Äçüëß‚Äçüëß Apartment Automation mit HomePod, Raspberry Pi und Node.js. üö∂ üë©‚Äçüë©‚Äçüë¶ üì™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√úbersetzt f√ºr Sie einen Artikel von Chris Hawkins , in dem er dar√ºber spricht, seine Wohnung in ein intelligentes Zuhause zu verwandeln. Der HomePod v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apartment Automation mit HomePod, Raspberry Pi und Node.js.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/438292/"><img src="https://habrastorage.org/getpro/habr/post_images/d2e/ca2/e6b/d2eca2e6b091c489b5cf53ba0f26d8d1.png"><br><br>  √úbersetzt f√ºr Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel von Chris Hawkins</a> , in dem er dar√ºber spricht, seine Wohnung in ein intelligentes Zuhause zu verwandeln.  Der HomePod von Apple wird als Basis verwendet, aber nat√ºrlich k√∂nnen auch andere Systeme verwendet werden. <br><br>  Zu Hause l√§uft ein Apple HomePod, mit dessen Hilfe bestimmte Systeme im Haus (z. B. intelligente Lampen) mithilfe einer einfachen Anfrage an Siri gesteuert werden k√∂nnen.  Das System funktioniert sowohl von zu Hause als auch von au√üen (ein intelligenter Assistent ist am Telefon). <br><a name="habracut"></a><br><blockquote>  <b>Skillbox empfiehlt: einen</b> zweij√§hrigen praktischen Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Ich bin ein PRO Web Developer".</a> <br><br>  <b>Wir erinnern Sie daran:</b> <i>F√ºr alle Leser von ‚ÄûHabr‚Äú - ein Rabatt von 10.000 Rubel bei der Anmeldung f√ºr einen Skillbox-Kurs mit dem Promo-Code ‚ÄûHabr‚Äú.</i> </blockquote><br>  Anfangs war ich skeptisch, das Haus mit Sprachbefehlen zu verwalten, da nicht alles von Assistenten (nicht nur Siri) richtig erkannt wird.  Aber dann wurde es zur Gewohnheit.  Da Hue-Lampen keinen physischen Schalter haben und Sie in der Anwendung mehrere Aktionen ausf√ºhren m√ºssen, um die Beleuchtung zu steuern, habe ich Siri zur Arbeit gezogen. <br><br>  Dann wollte ich meinen Sprachassistenten verwenden, um andere Systeme im Haus zu steuern, zum Beispiel einen Fernseher oder eine Konsole.  Im Fall von TV habe ich beispielsweise Simple IP Control entdeckt - eine Methode zur Steuerung meines Sony Bravia durch Senden von Befehlen √ºber TCP. <br><br><h3>  Passen Sie Siri an </h3><br>  In der zweiten H√§lfte des Jahres 2018 startete Apple die Shortcuts-App f√ºr alle iOS-Benutzer.  Sie k√∂nnen die Arbeit mit dem Telefon (oder Smart Home) automatisieren, ohne Code schreiben zu m√ºssen. <br><br>  Die Anwendung verf√ºgt √ºber viele integrierte Befehle.  Was ihm fehlt, ist die F√§higkeit, TCP-Befehle zu verwenden, obwohl es einen Mechanismus f√ºr die Arbeit mit URLs gibt. <br><br>  Au√üerdem k√∂nnen Sie Ihre eigenen Module in Objective-C oder Swift schreiben.  Ich habe mich dagegen entschieden, weil ich in Zukunft meinen HomePod auf einen anderen Assistenten umstellen kann.  Stattdessen wollte ich eine Webanwendung schreiben, die auf Siri-Befehle reagieren kann. <br><br><h3>  Sony Bravia TV-Steuerung </h3><br>  Ausger√ºstet mit einem Handbuch mit Befehlen f√ºr meinen Fernseher schrieb ich eine Anwendung auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow noopener">Node.js Express (Github)</a> , in der ich lernte, wie man auf einige der g√§ngigen Befehle reagiert.  Ich begann mit Einschalten und Lautst√§rke. <br><br>  Der Befehl setPowerStatus erledigt alles, was wir brauchen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/427/63b/7d6/42763b7d67ee17f32245e550936332b5.png"><br><br>  Der Header besteht aus den Zeichen * und s, die statisch sind und f√ºr alle Befehle verwendet werden.  Dann werden die dritten Bytes f√ºr den Befehl verwendet.  Es gibt vier Bedeutungen, die diese Position halten k√∂nnen.  C f√ºr Befehl (Senden eines Befehls im Fernsehen), E f√ºr Anfrage (√úberpr√ºfen des aktuellen Werts eines bestimmten Parameters, z. B. Lautst√§rke), A - Antwort (als Antwort auf Befehle und Anfragen gesendet) und N f√ºr Benachrichtigen (Ereignisbenachrichtigung, z. B. Ausschalten der Lautst√§rke) ) <br><br>  Um mein Ziel zu erreichen, musste ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow noopener">die JSON-RPC-</a> Dokumentation von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow noopener">Sony</a> studieren.  Wie sich herausstellte, erm√∂glichte die Art von JSON-RPC √ºber HTTP, die Aufgabe zu vereinfachen und die Codemenge zu reduzieren. <br><br>  Die Arbeit mit der JSON-RPC-API war einfach.  Nehmen Sie zum Beispiel den Dienst (System), den Befehl (getPowerStatus) sowie die Parameter (wahr oder falsch) und bilden Sie eine HTTP-Anfrage, die wir dann an TV senden. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> body = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify({ <span class="hljs-attr"><span class="hljs-attr">method</span></span>: command, <span class="hljs-attr"><span class="hljs-attr">id</span></span>: ++<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id, <span class="hljs-attr"><span class="hljs-attr">params</span></span>: params, <span class="hljs-attr"><span class="hljs-attr">version</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { fetch(<span class="hljs-string"><span class="hljs-string">'http://'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ip + <span class="hljs-string"><span class="hljs-string">':'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.port + <span class="hljs-string"><span class="hljs-string">'/sony/'</span></span> + service, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: { <span class="hljs-string"><span class="hljs-string">'X-Auth-PSK'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.psk }, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: body, }).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json(); }).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error &amp;&amp; (!response.result || response.result.length === <span class="hljs-number"><span class="hljs-number">0</span></span>)) { reject({ <span class="hljs-attr"><span class="hljs-attr">code</span></span>: response.error[<span class="hljs-number"><span class="hljs-number">0</span></span>] }); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { resolve(response.result[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } }).catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> { reject(error); }); });</code> </pre> <br>  Standardm√§√üig wird die Authentifizierung mit dem im Header der HTTP-Anforderung gesendeten Vorschl√ºssel durchgef√ºhrt.  Es gibt jedoch eine sicherere und bequemere M√∂glichkeit, dies mit accessControl zu tun.  In diesem Fall k√∂nnen wir einen Befehl an das Fernsehger√§t senden und den Code sicher mit der grundlegenden HTTP-Authentifizierung austauschen.  Nachdem die Authentifizierung einmal durchgef√ºhrt wurde, wird die weitere Authentifizierung mithilfe eines Cookies durchgef√ºhrt. <br><br>  Mein Fernseher ist jedoch durch eine auf dem Router konfigurierte Firewall gesch√ºtzt, sodass ich den vorinstallierten Schl√ºssel verwendet habe. <br><br><h3>  Schalten Sie Xbox One ein </h3><br>  Xbox erforderte nat√ºrlich ein anderes Setup.  Microsoft scheint beschlossen zu haben, die REST-API nicht zu verwenden, daher wurde die Arbeit mit UDP-Paketen durchgef√ºhrt. <br><br>  Gl√ºcklicherweise verf√ºgt Node.js √ºber ein dgram-Modul, das sofort mit allen Funktionen von USP funktioniert.  Das habe ich am Ende bekommen. <br><br><pre> <code class="javascript hljs">turnOn() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> socket = dgram.createSocket(<span class="hljs-string"><span class="hljs-string">'udp4'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> powerPayload = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Buffer(<span class="hljs-string"><span class="hljs-string">'\x00'</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.liveId.length) + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.liveId.toUpperCase() + <span class="hljs-string"><span class="hljs-string">'\x00'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> powerHeader = Buffer.concat([<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Buffer(<span class="hljs-string"><span class="hljs-string">'dd0200'</span></span>, <span class="hljs-string"><span class="hljs-string">'hex'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Buffer(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(powerPayload.length)), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Buffer(<span class="hljs-string"><span class="hljs-string">'\x00\x00'</span></span>)]); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> powerPacket = Buffer.concat([powerHeader, powerPayload]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._sendPacket(socket, powerPacket); } _sendPacket(socket, buffer) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { socket.send(buffer, <span class="hljs-number"><span class="hljs-number">0</span></span>, buffer.length, Constants.xboxPort, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ip, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ socket.close(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reject(err); } resolve(); }); }); }</code> </pre> <br>  F√ºr die Konfiguration habe ich die Liste der ID-Ger√§te verwendet, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier zu finden ist</a> .  Wenn Sie nur den Code aus meinem Repository √ºbernehmen m√∂chten, m√ºssen Sie die ID in der Datei config.json ersetzen. <br><br><h3>  Konfigurieren Sie Verkn√ºpfungen f√ºr Siri </h3><br>  Damit Siri die gerade erstellten Befehle ausf√ºhren kann, ben√∂tigt sie einen Assistenten.  Ich habe es aus Raspberry Pi erstellt, da die "Himbeere" in jeder Hinsicht geeignet ist.  Daf√ºr habe ich mir ein Pi 3 Model B + gekauft, das Wi-Fi unterst√ºtzt. <br><br>  Raspbian muss eine GUI konfigurieren.  Ich stellte eine Verbindung zu Wi-Fi her, schaltete dann das Display aus und arbeitete weiter an SSH.  Um sicherzustellen, dass die Webanwendung st√§ndig aktiv ist, habe ich den Dienstaktivierungssocket in systemd so konfiguriert, dass das System ihn automatisch neu starten kann, wenn der Node.js-Prozess abst√ºrzt. <br><br>  Tats√§chlich waren Verkn√ºpfungen f√ºr Siri die einfachste Arbeitsstufe.  Dies ist eine intuitive Anwendung mit Unterst√ºtzung f√ºr native Sprachbefehle.  Standardm√§√üig wusste es bereits, wie man mit dem HomePod arbeitet, es war nicht notwendig, etwas zus√§tzlich zu konfigurieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/038/839/241/038839241ae1916a5a00f1d07824765e.png"><br><br><h3>  Alles zusammenf√ºgen </h3><br>  Da mein Fernseher auf Android l√§uft, unterst√ºtzt er Apps wie Netflix und YouTube.  Vor diesem Hintergrund habe ich Befehle zum Starten dieser Dienste erstellt.  Au√üerdem habe ich Befehle zur Steuerung der Lautst√§rke, des TV-Modus, der Pause und der Wiedergabe von Inhalten hinzugef√ºgt. <br><br>  <a href="">Hier sind Beispiele f√ºr</a> alles, was ich erstellt habe.  Ich habe auch versucht, das Projekt modular zu gestalten, sodass das Hinzuf√ºgen anderer SmartTV-Modelle kein Problem darstellt. <br><br>  Hier ist ein Beispielmodul, das eine Xbox und einen Fernseher enth√§lt und den ersten HDMI-Anschluss aktiviert. <br><br><pre> <code class="javascript hljs">router.post(<span class="hljs-string"><span class="hljs-string">'/turnOnXboxAndTV'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([ xbox.turnOn(), tv.turnOn() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(resolve, <span class="hljs-number"><span class="hljs-number">2000</span></span>))) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> tv.setInput(config.scripts.xboxInput)), ]).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { res.sendStatus(<span class="hljs-number"><span class="hljs-number">200</span></span>); }).catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { res.status(<span class="hljs-number"><span class="hljs-number">500</span></span>).send(error); }); });</code> </pre> <br>  Und so funktioniert das alles in der Praxis. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://player.vimeo.com/video/313111465" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Leider ist die Funktionalit√§t von Siri nicht sehr gut.  Dieselbe Alexa von Amazon verf√ºgt √ºber ein viel umfangreicheres Funktionsspektrum und eine sehr leistungsf√§hige API.  Ich denke, basierend auf Alexa k√∂nnen Sie viel ernstere Projekte erstellen. <br><br><blockquote>  <b>Skillbox empfiehlt:</b> <br><br><ul><li>  Praktikum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Mobile Developer PRO"</a> . </li><li>  Online-Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Beruf Frontend-Entwickler</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"</a> </li><li>  Praktischer Jahreskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"PHP-Entwickler von 0 bis PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438292/">https://habr.com/ru/post/de438292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438278/index.html">Kindern das Programmieren beibringen</a></li>
<li><a href="../de438280/index.html">Objekte in Django "l√∂schen"</a></li>
<li><a href="../de438286/index.html">Arbeiten mit Zeitzonen in JavaScript</a></li>
<li><a href="../de438288/index.html">Furchtloser Schutz. Speichersicherheit in Rust</a></li>
<li><a href="../de438290/index.html">Post-mortem mit GGJ-2019: wie man Unebenheiten bekommt, aber trotzdem das Spiel macht</a></li>
<li><a href="../de438294/index.html">Zuckende Streamer in einem PUBG-Match finden</a></li>
<li><a href="../de438296/index.html">OpenSceneGraph: Plugin-System</a></li>
<li><a href="../de438298/index.html">Warum unterrichten, wenn das Entwickeln rentabler ist? Gespr√§ch mit GeekBrains</a></li>
<li><a href="../de438302/index.html">Die erstaunliche Kreativit√§t der digitalen Evolution</a></li>
<li><a href="../de438304/index.html">Vergabe von Unterauftr√§gen? Cool du schl√§gst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>