<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏻 🔎 🧑🏽‍🤝‍🧑🏻 上一次比赛分配的SwiftUI电报图表（2019年3月）：一切都很简单 🖐🏽 🏇🏻 👩‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我将首先观察到，本文中讨论的应用程序如果要使用Live Previews需要Xcode 11和MacOS Catalina，如果要使用模拟器则需要Mojave 。 应用程序代码在Github上 。 

 Apple今年在WWDC 2019上宣布了SwiftUI ，这是一种在所有Apple设备上构建用...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>上一次比赛分配的SwiftUI电报图表（2019年3月）：一切都很简单</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468897/"><img src="https://habrastorage.org/webt/pt/1z/21/pt1z21temtcp4omtiecaoojqrqa.png"><br><br> 我将首先观察到，本文中讨论的应用程序如果要使用<code>Live Previews</code>需要<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Xcode 11</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MacOS Catalina，</a>如果要使用模拟器则需要<code>Mojave</code> 。 应用程序代码在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Github上</a> 。 <br><br>  <code>Apple</code>今年在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WWDC 2019上</a>宣布了<code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SwiftUI</a></code> ，这是一种在所有<code>Apple</code>设备上构建用户界面（UI）的新声明方式。 这几乎与通常的<code><font color="#0000FF">UIKit</font></code>完全不同，而且我-和许多其他开发人员一样-确实希望看到这个新工具的实际应用。 <br><br> 本文介绍了使用<code><font color="#0000FF">SwiftUI</font></code>解决问题的经验，该问题的<code><font color="#0000FF">UIKit</font></code>的代码无比复杂，在我看来无法以可读的方式阅读。 <br><a name="habracut"></a><br> 该任务与上一次针对<code>Android</code> ， <code>iOS</code>和<code>JS</code>开发人员的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Telegram</a>竞赛有关，该竞赛于2019年3月10日至3月24日举行。 在这场比赛中，提出了一个简单的任务，即根据时间基于<code>JSON</code>数据以图形方式显示Internet上某种资源的使用强度。 作为<code>iOS</code>开发人员，您应该使用<code>Swift</code>将从头编写的代码提交给竞争对手，而无需使用任何无关的专业库进行绘图。 <br><br> 此任务需要具备使用iOS图形和动画功能的技能： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">核心图形</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">核心动画</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">金属</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenGL ES</a> 。 其中一些工具是底层的，非面向对象的编程工具。 本质上，在<code>iOS</code>中，没有乍看之下可用于解决图形任务的模板。 因此，每个参赛者都根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Metal</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CALayers</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenGL</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CADisplayLink</a>发明了自己的动画器（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Render</a> ）。 这产生了大量的代码，无法借用和开发任何东西，因为这些都是纯粹的“受版权保护”的作品，只有作者才能真正开发。 但是，事实并非如此。 <br><br> 在6月初的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WWDC 2019上</a> ， <code><font color="#0000FF">SwifUI</font></code>出现了-由<code>Apple</code>开发，用<code>Swift</code>编写的新<code>framework</code> ，旨在用代码声明性地描述用户界面（ <code>UI</code> ）。 您可以确定哪些<code><font color="#0000FF">subviews</font></code>显示在<code><font color="#0000FF">View</font></code> ，哪些数据会导致这些<code><font color="#0000FF">subviews</font></code>发生变化，需要对它们应用哪些修饰符，以将它们放置在正确的位置，并具有正确的大小和样式。  <code><font color="#0000FF">SwiftUI</font></code>一个同样重要的元素是对用户可修改数据流的控制，这反过来又更新了<code>UI</code> 。 <br><br> 在本文中，我想展示如何快速轻松地解决<code><font color="#0000FF">SwiftUI</font></code>上的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Telegram</a>竞赛的任务。 另外，这是一个非常令人兴奋的过程。 <br><br><h1> 工作任务 </h1><br> 竞争性应用程序应该使用<code>Telegram</code>提供的数据在屏幕上同时显示5个“图表集”。 对于一组“图表”， <code>UI</code>如下： <br><br><img src="https://habrastorage.org/webt/6j/me/ai/6jmeai2ecva9nvxoc8rbdki9qbu.png"><br><br> 上部有一个“图表区域”，沿法线Y轴具有相同的比例尺，并带有标记和水平网格线。 在它下面是一条蠕动的线，其中沿X轴的时间戳为日期。 <br><br> 甚至更低的是所谓的“迷你地图”（如<code>Xcode 11</code> ），即透明的“窗口”，它定义了我们“图表”时间段的那部分，在上方的“图表区域”中有更详细的介绍。 该“迷你地图”不仅可以沿<code>X</code>轴移动，而且其宽度可以更改，这会影响“图表区域”中的时间比例。 <br><br> 借助涂有“图表”颜色并带有其名称的<code>checkboxs</code> ，您可以拒绝在“图表区域”中显示与该颜色相对应的“图形”。 <br><br> 有很多这样的“图形集”，例如，在我们的测试示例中，有5个，它们都应该位于一个屏幕上。 <br><br> 在使用<code><font color="#0000FF">SwiftUI</font></code>设计的<code>UI</code> <code><font color="#0000FF">SwiftUI</font></code>无需按钮就可以在<code><font color="#0000FF">Dark</font></code>模式和<code><font color="#0000FF">SwiftUI</font></code>模式之间进行切换，这已经内置在<code><font color="#0000FF">SwiftUI</font></code> 。 此外， <code><font color="#0000FF">SwiftUI</font></code>更多的组合“图表集”（即上面显示的屏幕集）的选项，而不是简单地向下滚动表格，我们将介绍其中一些非常有趣的选项。 <br><br> 但是首先，让我们专注于显示一个“ <code><font color="#0000FF">SwiftUI</font></code>集”，为此<code><font color="#0000FF">SwiftUI</font></code>将<code><font color="#0000FF">ChartView</font></code>创建一个<code><font color="#0000FF">ChartView</font></code> ： <br><br><img src="https://habrastorage.org/webt/c9/fs/jt/c9fsjthmivuphsmdbvajccjfg18.png"><br><br>  <code><font color="#0000FF">SwiftUI</font></code>允许您以<code><font color="#0000FF">SwiftUI</font></code>形式创建和测试复杂的<code>UI</code> ，然后将这些块组装成拼图非常容易。 我们将这样做。 我们的<code><font color="#0000FF">ChartView</font></code>很好地分成了以下小块： <br><br><ul><li>  <code><font color="#0000FF">GraphsForChart</font></code>这些是图本身，是为一个特定的“ <code><font color="#0000FF">GraphsForChart</font></code> ”构建的。 用户使用“迷你地图” <code><font color="#0000FF">RangeView</font></code>控制的时间范围显示“图表”，将在下面显示。 </li><li>  <code><font color="#0000FF">YTickerView</font></code>是具有高程和相应水平网格的<code>Y</code>轴。 </li><li>  <code><font color="#0000FF">IndicatorView</font></code>是一个水平用户驱动的指标，它允许您查看<code>X</code>轴上时间轴上相应指标位置的“图表”值和时间。 </li><li>  <code><font color="#0000FF">TickerView</font></code> “蠕变线”将<code>X</code>轴上的时间戳显示为日期， </li><li>  <code><font color="#0000FF">RangeView</font></code>用户可以使用手势自定义的临时“窗口”，用于设置“图表”的时间间隔， </li><li>  <code><font color="#0000FF">CheckMarksView</font></code>包含以“图表”颜色着色的“按钮”，并允许您控制<code><font color="#0000FF">ChartView</font></code>上“ <code><font color="#0000FF">ChartView</font></code> ”的存在。 </li></ul><br> 用户可以通过三种方式与<code><font color="#0000FF">ChartView</font></code>进行交互： <br><br>  1.使用<code><font color="#0000FF">DragGesture</font></code>手势控制“迷你地图”-它可以左右移动临时“窗口”并减小/增加其大小： <br><br><img src="https://habrastorage.org/webt/ic/yc/4b/icyc4bxgrxyq0wiu1sxuqg5ft10.png"><br><br>  2.在水平方向上移动指示器，在固定的时间点显示“图表”的值： <br><br><img src="https://habrastorage.org/webt/hp/kc/tt/hpkctt_b-gbljvhetcylfxkdtxa.png"><br><br>  3.使用以“图表”颜色上色并位于<code><font color="#0000FF">ChartView</font></code>底部的按钮隐藏/显示某些“图表”： <br><br><img src="https://habrastorage.org/webt/jm/dm/2x/jmdm2xiezy_vznyu8rwpkkmnjou.png"><br><br> 我们可以以不同的方式组合各种“图表集”（我们在测试数据中有5个），例如，使用“ <code><font color="#0000FF">List</font></code>列表将它们全部同时放置在一个屏幕上（例如可上下滚动的表格）： <br><br><img src="https://habrastorage.org/webt/-y/ah/do/-yahdowfzpcqeee7ewn0phjkn7y.png"><br><br> 或使用<code><font color="#0000FF">ScrollView</font></code>和具有3D效果的<code><font color="#0000FF">HStack</font></code>水平堆栈： <br><br><img src="https://habrastorage.org/webt/sz/-c/1s/sz-c1s8eycfzb1krumjgr7oxteg.png"><br><br>  ...或以<code><font color="#0000FF">ZStack</font></code>形式叠加在一起<code><font color="#0000FF">ZStack</font></code> “卡片”，其顺序可以更改：可以将带有“一组图表”的上层“卡片”下拉到足以看到下一张卡片的位置，如果继续将其向下拖动，则可以将其“拉下”转到“ <code><font color="#0000FF">ZStack</font></code>的最后一个位置，下一张”卡“”继续“： <br><br><img src="https://habrastorage.org/webt/0e/pz/mh/0epzmhcuuqif2_um7uew4r0z_l8.png"><br><br> 在这些复杂的<code>UI</code> ，一个“滚动表”，一个具有<code>3D</code>效果的水平堆栈，一个彼此叠置的<code><font color="#0000FF">ZStack</font></code> “卡片”-所有用户交互方式都可以正常工作：沿着时间轴移动并更改<code>mini - map</code> ，指示器和隐藏按钮的“比例” “图表”。 <br><br> 此外，我们将详细考虑使用<code><font color="#0000FF">SwiftUI</font></code>进行此<code>UI</code>的设计-从简单元素到更复杂的元素。 但是首先，让我们了解一下我们拥有的数据结构。 <br><br> 因此，解决问题的方法分为以下几个阶段： <br><br><ul><li> 从<code>JSON</code>文件下载数据并以方便的“内部”格式显示 </li><li> 为一个“图表集”创建<code>UI</code> </li><li> 结合各种“图表集” </li></ul><br><h2> 下载资料 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Telegram</a>提供了包含几个“图表集”的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JSON</a>数据供我们使用。  <code><font color="#0000FF">chart</font></code>每个单独的“ <code><font color="#0000FF">chart</font></code>集”都包含<code><font color="#0000FF">chart.columns</font></code>多个“图表”（或“线”）。 每个“图形”（“线”）在位置<code><font color="#0000FF">0</font></code>处都有一个标记- <code><font color="#0000FF">"x"</font></code> ， <code><font color="#0000FF">"y0"</font></code> ， <code><font color="#0000FF">"y1"</font></code> ， <code><font color="#0000FF">"y2"</font></code> ， <code><font color="#0000FF">"y3"</font></code> ，然后是X轴上的任一时间值（“ x”） ，或<code>Y</code>轴上“ Graphics”（“线”）（ <code><font color="#0000FF">"y0"</font></code> ， <code><font color="#0000FF">"y1"</font></code> ， <code><font color="#0000FF">"y2"</font></code> ， <code><font color="#0000FF">"y3"</font></code> ）的值： <br><br><img src="https://habrastorage.org/webt/_j/qt/ex/_jqtex2-hskpvedg3imtrlzl20w.png"><br><br>  “图表集”中所有“行”的存在是可选的。  “ column” x的值是UNIX时间戳（以毫秒为单位）。 <br><br> 此外，为<code><font color="#0000FF">chart</font></code>每个“ <code><font color="#0000FF">chart</font></code>集”提供了以6个十六进制数字（例如，“＃AAAAAA”）和<code><font color="#0000FF">chart.names</font></code>格式的<code><font color="#0000FF">chart.colors</font></code>颜色。 <br><br> 为了构建位于<code>JSON</code>文件中的数据模型，我使用了出色的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">quicktype</a>服务。 在此站点上，您从<code>JSON</code>文件中插入了一段文本，并指定了编程语言（ <code>Swift</code> ），结构名称（ <code><font color="#0000FF">Chart</font></code> ），该语言将在“解析”此<code>JSON</code>数据之后形成。 <br><br> 屏幕的中央部分会生成一个代码，然后将其复制到名为<code>Chart.swift</code>的单独文件中，并将其复制到应用程序中。 我们将在此处放置JSON格式的数据模型。 使用数据加载器（从<code>JSON</code>文件到从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SwiftUI</a> <code>Generic</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">演示中</a>借用的模型），我得到了一个<code><font color="#0000FF">columns: [ChartElement]</font></code>数组<code><font color="#0000FF">columns: [ChartElement]</font></code> ，它是<code>Telegram</code>格式的“ <code><font color="#0000FF">columns: [ChartElement]</font></code>集”的集合。 <br><br> 包含异构元素数组的<code><font color="#0000FF">ChartElement</font></code>数据<code><font color="#0000FF">ChartElement</font></code>不太适合与图表进行密集的交互式工作，此外，时间戳以<code>UNIX</code>格式（以毫秒为单位）表示（例如<code><font color="#0000FF">1542412800000, 1542499200000, 1542585600000, 1542672000000</font></code> ），并且颜色以6进制格式表示数字（例如<code><font color="#0000FF">"#AAAAAA"</font></code> ）。 <br><br> 因此，在我们的应用程序内部，我们将使用相同的数据，但是使用不同的“内部”和相当简单的格式<code><font color="#0000FF">[LinesSet]</font></code> 。  <code><font color="#0000FF">[LinesSet]</font></code>数组是<code><font color="#0000FF">LinesSet</font></code> “ <code><font color="#0000FF">LinesSet</font></code> Sets”的集合，其中每个包含格式为<code><font color="#0000FF">"Feb 12, 2019"</font></code> <code><font color="#0000FF">xTime</font></code> <code><font color="#0000FF">"Feb 12, 2019"</font></code> （ <code>X</code>轴）的<code><font color="#0000FF">xTime</font></code>时间戳和几条“图表” <code><font color="#0000FF">lines</font></code> （ <code>Y</code>轴）： <br><br><img src="https://habrastorage.org/webt/rs/b_/up/rsb_updm-bojah79bsz23bdu6k0.png"><br><br> 显示每个折线图（折线）的数据 <br><br><ul><li> 整数<code><font color="#0000FF">points: [Int]</font></code> ， </li><li> 名为“图形”的<code><font color="#0000FF">title: String</font></code> ， </li><li> 类型“图形” <code><font color="#0000FF">type: String?</font></code>  ， </li><li>  <code><font color="#0000FF">color : UIColor</font></code> <code>Swift</code> <code><font color="#0000FF">UIColor</font></code>格式， </li><li> 点数<code><font color="#0000FF">countY: Int</font></code> 。 </li></ul><br> 另外，根据<code><font color="#0000FF">isHidden: Bool</font></code>的值，可以隐藏或显示任何“ Graph”。  <code><font color="#0000FF">upperBound</font></code>调整时间范围的<code><font color="#0000FF">lowerBound</font></code>和<code><font color="#0000FF">upperBound</font></code>的取值范围为<code><font color="#0000FF">0</font></code>到<code><font color="#0000FF">1</font></code> ，不仅显示“迷你地图”时间窗口的大小（ <code><font color="#0000FF">upperBound</font></code> - <code><font color="#0000FF">lowerBound</font></code> ），而且还显示其在时间轴<code>X</code>上的位置： <br><br><img src="https://habrastorage.org/webt/hp/s5/_v/hps5_vebuvf83hxiethp57hiho0.png"><br><br>  <code>JSON</code>数据结构<code><font color="#0000FF">[ChartElement]</font></code>以及“内部” <code><font color="#0000FF">LinesSet</font></code>和<code><font color="#0000FF">Line</font></code> <code><font color="#0000FF">LinesSet</font></code>的数据结构位于<b>Chart.swift</b>文件中。 用于加载<code>JSON</code>数据并将其转换为内部结构的代码位于<b>Data.swift</b>文件中。 有关这些转换的详细信息可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>找到。 <br><br> 结果，我们以内部格式接收了有关“图表集”的数据，这些数据是<code><font color="#0000FF">chartsData</font></code>数组。 <br><br><img src="https://habrastorage.org/webt/7i/y0/bk/7iy0bk7mifanhlnph6euwk7lg8o.png"><br><br> 这是我们的数据<code></code> ，但要在<code><font color="#0000FF">SwiftUI</font></code>工作，必须确保用户对<code><font color="#0000FF">chartsData</font></code>数组所做的任何更改（更改临时“窗口”，隐藏/显示“图表”）都导致<code><font color="#0000FF">Views</font></code>自动更新。 <br><br> 我们将创建<code><font color="#0000FF">@EnvironmentObject</font></code> 。 这将使我们能够在需要的地方使用数据<code></code> ，此外，如果数据发生更改，则自动更新<code><font color="#0000FF">Views</font></code> 。 这类似于<code><font color="#0000FF">Singleton</font></code>或全局数据。 <br><br>  <code><font color="#0000FF">@EnvironmentObject</font></code>要求我们创建一些<code><font color="#0000FF">final class UserData</font></code> ， <code><font color="#0000FF">final class UserData</font></code>位于<b>UserData.swift</b>文件中，存储<code><font color="#0000FF">chartsData</font></code>数据并实现<code><font color="#0000FF">ObservableObject</font></code>协议： <br><br><img src="https://habrastorage.org/webt/hr/3i/ng/hr3ingagv3dfwfjlgasjtsiy6ye.png"><br><br>  <code><font color="#0000FF">@Published</font></code> “包装器”的存在将使您能够发布“新闻”，表明<code><font color="#0000FF">UserData</font></code>类的<code><font color="#0000FF">charts</font></code>的这些属性已更改，因此<code><font color="#0000FF">SwiftUI</font></code>中任何“订阅此新闻”的<code><font color="#0000FF">SwiftUI</font></code>都将能够自动选择新数据并进行更新。 <br><br> 回忆一下，在<code><font color="#0000FF">charts</font></code>属性中，任何“ <code><font color="#0000FF">isHidden</font></code> ”的<code><font color="#0000FF">isHidden</font></code>值都可以更改（它们允许您隐藏或显示这些“图表”），以及每个“图表集”的下下限和上限上限时间限制。 <br><br> 我们希望在整个应用程序中使用<code><font color="#0000FF">UserData</font></code>类的<code><font color="#0000FF">charts</font></code>属性，并且不必借助<code><font color="#0000FF">@EnvironmentObject</font></code>手动将其与<code>UI</code>同步。 <br><br> 为此，在启动应用程序时，我们必须创建<code><font color="#0000FF">UserData ()</font></code>类的实例，以便随后我们可以在应用程序中的任何位置访问它。 我们将在<code><font color="#0000FF">scene (_ : , willConnectTo: , options: )</font></code>方法内的<code>SceneDelegate.swift</code>文件中执行此操作。 这是我们创建和启动<code><font color="#0000FF">ContentView</font></code>地方，在这里我们必须将<code><font color="#0000FF">ContentView</font></code>传递<code><font color="#0000FF">ContentView</font></code>我们<code><font color="#0000FF">@EnvironmentObject</font></code>任何<code><font color="#0000FF">@EnvironmentObject</font></code> ，以便<code><font color="#0000FF">SwiftUI</font></code>可以使它们可用于任何其他<code><font color="#0000FF">View</font></code> ： <br><br><img src="https://habrastorage.org/webt/jv/20/ui/jv20uihyiuv6xnkm13zt7o0him8.png"><br><br> 现在，在任何<code><font color="#0000FF">View</font></code>要访问<code><font color="#0000FF">UserData</font></code>类的<code><font color="#0000FF">@Published</font></code>数据，我们都需要使用<code><font color="#0000FF">@EnvironmentObject</font></code>包装器创建<code><font color="#0000FF">var</font></code>变量。 例如，在<code><font color="#0000FF">RangeView</font></code>设置时间范围时<code><font color="#0000FF">RangeView</font></code>我们使用<code><font color="#0000FF">UserData</font></code> TYPE创建<code><font color="#0000FF">var userData</font></code>变量： <br><br><img src="https://habrastorage.org/webt/sx/lr/vy/sxlrvyrfvqphxtkqxhblnsyf5as.png"><br><br> 因此，一旦我们在应用程序的“环境”中实现了某些<code><font color="#0000FF">@EnvironmentObject</font></code> ，我们就可以立即在最高级别或更低级别的10级别开始使用它-没关系。 但是更重要的是，每当<code><font color="#0000FF">View</font></code>更改“环境”时，具有此<code><font color="#0000FF">@EnvironmentObject</font></code>所有<code><font color="#0000FF">Views</font></code>都会自动<code><font color="#0000FF">@EnvironmentObject</font></code> ，从而确保与数据的同步。 <br><br> 让我们继续设计用户界面（ <code>UI</code> ）。 <br><br><h2> 一个“图形集”的用户界面（UI） </h2><br>  <code><font color="#0000FF">SwiftUI</font></code>提供了一种用于从许多小<code><font color="#0000FF">Views</font></code>创建<code><font color="#0000FF">SwiftUI</font></code>的复合技术，并且我们已经看到我们的应用程序非常适合该技术，因为它分为小块：“ <code><font color="#0000FF">ChartView</font></code>图表” <code><font color="#0000FF">GraphsForChart</font></code> ，“ <code><font color="#0000FF">GraphsForChart</font></code>图表”， <code>Y</code>轴<code><font color="#0000FF">YTickerView</font></code> ，由用户驱动的“图表” <code><font color="#0000FF">IndicatorView</font></code>指标值，在<code>X</code>轴上带有<code><font color="#0000FF">TickerView</font></code> “ <code><font color="#0000FF">TickerView</font></code> ” <code><font color="#0000FF">TickerView</font></code> ，用户控制的“时间窗口” <code><font color="#0000FF">RangeView</font></code> ，隐藏/显示“ Charts” <code><font color="#0000FF">CheckMarksView</font></code> 。 我们不仅可以相互独立地创建所有这些<code><font color="#0000FF">Views</font></code> ，还可以使用<code><font color="#0000FF">Previews</font></code> （ <code><font color="#0000FF">Previews</font></code> （初步的“实时”视图）对测试数据立即在<code>Xcode 11</code>进行测试。 您会惊讶于从其他更基本的<code><font color="#0000FF">Views</font></code>创建代码的代码如此简单。 <br><br><h3>  <code><font color="#0000FF">GraphView</font></code> “图形”（“线”） </h3><br> 我们将开始使用的第一个<code><font color="#0000FF">View</font></code>实际上是“图形”本身（或“线”）。 我们将其称为<code><font color="#0000FF">GraphView</font></code> ： <br><br><img src="https://habrastorage.org/webt/el/qv/gl/elqvglloxidiuisuqfa6ue_ppgm.png"><br><br> 像往常一样，创建<code><font color="#0000FF">GraphView</font></code>首先使用菜单<code>File</code> → <code>New</code> → <code>File</code>在<code>Xcode 11</code>创建一个新文件： <br><br><img src="https://habrastorage.org/webt/e5/cj/36/e5cj36vuvyrgldcpsvoe-h49t8y.png"><br><br> 然后我们选择所需的文件类型-这是<code>SwiftUI</code>文件： <br><br><img src="https://habrastorage.org/webt/oj/qv/uz/ojqvuznrwfj2eak_rdxchb1zebo.png"><br><br>  ...为我们的<code><font color="#0000FF">View</font></code>命名为“ GraphView”并指出其位置： <br><br><img src="https://habrastorage.org/webt/ul/k_/hh/ulk_hhp_irtcrjs3kau_gl1jtbo.png"><br><br> 单击<code>"Create"</code>按钮，并在屏幕中间获取带有<code><font color="#0000FF">Text ( "Hello World!")</font></code>的标准<code><font color="#0000FF">View</font></code> <code><font color="#0000FF">Text ( "Hello World!")</font></code> 。 <br><br><img src="https://habrastorage.org/webt/lt/-g/dm/lt-gdm28u35e_j0fcqntlfkzzk4.png"><br><br> 我们的任务是将<code><font color="#0000FF">Text ("Hello World!")</font></code>替换为“ Graph”，但首先，让我们看一下创建“ Graph”所需要的初始数据： <br><br><ul><li> 我们有<code><font color="#0000FF">line.points</font></code> “ Graphics” <code><font color="#0000FF">line: Line</font></code> ， </li><li> 时间范围<code><font color="#0000FF">rangeTime</font></code> ，它是一个索引<code><font color="#0000FF">Range</font></code> X轴上<code><font color="#0000FF">Range</font></code>时间戳记<code><font color="#0000FF">Range</font></code> <code><font color="#0000FF">xTime</font></code> ， </li><li> 值<code><font color="#0000FF">rangeY: Range</font></code> Y <code><font color="#0000FF">rangeY: Range</font></code> “图形” <code><font color="#0000FF">rangeY: Range</font></code> ， </li><li>  “图形”描边线的粗细<code><font color="#0000FF">lineWidth</font></code> 。 </li></ul><br> 将这些属性添加到<code><font color="#0000FF">GraphView</font></code>结构中： <br><br><img src="https://habrastorage.org/webt/u1/ox/yk/u1oxyk-mytozrngercig59livp4.png"><br><br> 如果我们要用于“图形” <code><font color="#0000FF">Previews</font></code> （预览）（仅适用于<code>MacOS Catalyna</code> ，则必须使用索引范围<code><font color="#0000FF">rangeTime</font></code>和“图形”本身的<code><font color="#0000FF">line</font></code>数据启动<code><font color="#0000FF">GraphView</font></code> ： <br><br><img src="https://habrastorage.org/webt/ke/pm/ff/kepmffuuv1oqjczavsmk4ylehsm.png"><br><br> 我们已经具有从<code>chart.json</code> <code>JSON</code>文件获得的<code><font color="#0000FF">chartsData</font></code>测试数据，并将其用于<code><font color="#0000FF">Previews</font></code> 。 <br><br> 在我们的示例中，这将是该数据集中的<code><font color="#0000FF">chartsData[0]</font></code>的第一个“ <code><font color="#0000FF">chartsData[0]</font></code>集” <code><font color="#0000FF">chartsData[0]</font></code>和第一个“图表”，我们将提供<code><font color="#0000FF">GraphView</font></code>作为<code><font color="#0000FF">line</font></code>参数。 <br><br> 我们将使用索引<code><font color="#0000FF">0..&lt;(chartsData[0].xTime.count - 1)</font></code>的整个范围作为时间间隔<code><font color="#0000FF">rangeTime</font></code> 。 <br>  <code><font color="#0000FF">rangeY</font></code>和<code><font color="#0000FF">lineWidth</font></code>可以在外部设置，也可以不设置，因为它们已经具有初始值： <code><font color="#0000FF">rangeY</font></code>为<code><font color="#0000FF">nil</font></code> ， <code><font color="#0000FF">lineWidth</font></code>为<code><font color="#0000FF">1</font></code> 。 <br><br> 我们故意将TYPE <code><font color="#0000FF">rangeY</font></code> <code>Optional</code>属性TYPE，因为如果未在外部设置<code><font color="#0000FF">rangeY = nil</font></code> ，而<code><font color="#0000FF">rangeY = nil</font></code> ，那么我们直接从<code><font color="#0000FF">line.points</font></code>数据中计算“ Graphics”的最小<code><font color="#0000FF">minY</font></code>和最大<code><font color="#0000FF">maxY</font></code>值： <br><br><img src="https://habrastorage.org/webt/hm/8s/td/hm8stdxllwz2cjz-mx1mribdmz0.png"><br><br> 该代码可以编译，但是我们在屏幕上仍然有一个标准的<code><font color="#0000FF">View</font></code> ，在屏幕中间有文本<code><font color="#0000FF">Text ("Hello World!")</font></code> ： <br><br><img src="https://habrastorage.org/webt/a7/gb/cb/a7gbcbzmh8o2vqwvxjaymj_-efq.png"><br><br> 因为在<code><font color="#0000FF">body</font></code>我们必须用<code><font color="#0000FF">Path</font></code>替换文本<code><font color="#0000FF">Text ("Hello World!")</font></code> ，这将使用<code><font color="#0000FF">addLines(_:)</font></code>命令构建“ Graph：points： <code><font color="#0000FF">line.points</font></code> ”（几乎与<code><font color="#0000FF">Core Graphics</font></code>类似） <br><br><img src="https://habrastorage.org/webt/d8/kk/so/d8kksod7xystc05pnet590ffnqi.png"><br><img src="https://habrastorage.org/webt/u4/g_/oo/u4g_oozbtounjhimpueunibqimw.png"><br><br> 我们将<code><font color="#0000FF">Path</font></code>粗细为<code><font color="#0000FF">lineWidth</font></code> <code><font color="#0000FF">Path</font></code>线对<code><font color="#0000FF">stroke (...)</font></code>进行描边，描边的颜色将与默认颜色（即黑色）相对应： <br><br><img src="https://habrastorage.org/webt/go/hb/ha/gohbhaazgmzagwgb39hbwxv1r7m.png"><br><br> 我们可以用特定的“线条” <code><font color="#0000FF">line.color</font></code> “颜色”中指定的颜色替换描边的黑色： <br><br><img src="https://habrastorage.org/webt/jp/ru/e-/jprue-t_4pthzn2jov-uqunbvim.png"><br><br> 为了将“图形”放置在任何大小的矩形中，我们使用<code><font color="#0000FF">GeometryReader</font></code>容器。 在<code>Apple</code>文档中<code>Apple</code> <code><font color="#0000FF">GeometryReader</font></code>是一个“容器” <code><font color="#0000FF">View</font></code> ，根据其自身<code><font color="#0000FF">size</font></code> ，坐标空间定义其内容。 本质上， <code><font color="#0000FF">GeometryReader</font></code>是另一个<code><font color="#0000FF">View</font></code> ！ 因为<code><font color="#0000FF">SwiftUI</font></code>几乎所有<code><font color="#0000FF">SwiftUI</font></code>都是<code><font color="#0000FF">View</font></code> ！ 与其他<code><font color="#0000FF">Views</font></code>不同， <code><font color="#0000FF">GeometryReader</font></code>允许您访问一些其他有用的信息，您可以在设计自定义<code><font color="#0000FF">View</font></code>时使用这些信息。 <br><br> 我们使用<code><font color="#0000FF">GeometryReader</font></code>和<code><font color="#0000FF">Path</font></code>容器来创建适用于任何大小的<code><font color="#0000FF">GraphView</font></code> 。 如果仔细看一下代码，我们将在<code><font color="#0000FF">GeometryReader</font></code>的闭包中看到<code><font color="#0000FF">GeometryReader</font></code>名为<code><font color="#0000FF">geometry</font></code> <code><font color="#0000FF">GeometryReader</font></code>变量： <br><br><img src="https://habrastorage.org/webt/_s/0d/3y/_s0d3ycqsymzwtqhqril4ycawru.png"><br><br> 此变量具有<code><font color="#0000FF">GeometryProxy</font></code> TYPE，它又是具有许多“意外”的<code><font color="#0000FF">struct</font></code>结构： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> size: <span class="hljs-type"><span class="hljs-type">CGSize</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> safeAreaInsets: <span class="hljs-type"><span class="hljs-type">EdgeInsets</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> coordinateSpace: CoordinateSpace)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">CGRect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">subscript</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;(anchor: <span class="hljs-type"><span class="hljs-type">Anchor</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;) -&gt; <span class="hljs-type"><span class="hljs-type">T</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">T</span></span> : <span class="hljs-type"><span class="hljs-type">Equatable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> }</code> </pre><br> 从<code><font color="#0000FF">GeometryProxy</font></code>定义中，我们看到有两个计算变量<code><font color="#0000FF">var size</font></code>和<code><font color="#0000FF">var safeAreaInsets</font></code> ，一个函数<code><font color="#0000FF">frame( in:)</font></code>和一个<code><font color="#0000FF">subscript getter</font></code> 。 我们只需要<code><font color="#0000FF">size</font></code>变量来确定“ Graphics”绘图区域的<code><font color="#0000FF">geometry.size.width</font></code>的宽度和<code><font color="#0000FF">geometry.size.width</font></code>的高度。 <br><br> 另外，我们使用<code><font color="#0000FF">animation (.linear(duration: 0.6))</font></code>修改器<code><font color="#0000FF">animation (.linear(duration: 0.6))</font></code>启用“图形”动画。 <br><br><img src="https://habrastorage.org/webt/fi/kc/4u/fikc4uzehzfzkwvqza6zm_curwy.png"><br><br>  <code><font color="#0000FF">GraphView_Previews</font></code>允许我们非常简单地测试任何“集合”中的任何“图表”。 以下是索引为4的“图表集”中的“图表”： <code><font color="#0000FF">chartsData[4]</font></code>和该集合中的索引为0“ Graphics”： <code><font color="#0000FF">chartsData[4].lines[0]</font></code> ： <br><br><img src="https://habrastorage.org/webt/gk/nv/74/gknv74w88p7hv46koyptkkkqn-k.png"><br><br> 我们使用<code><font color="#0000FF">frame (height: 400)</font></code> <code><font color="#0000FF">height</font></code> “图形”的<code><font color="#0000FF">height</font></code>设置为<code><font color="#0000FF">frame (height: 400)</font></code> ，宽度保持与屏幕的宽度相同。 如果我们不使用<code><font color="#0000FF">frame (height: 400)</font></code> ，那么“ Graph”将占据整个屏幕。<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们不指定值的范围</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code><font color="#0000FF">GraphView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用值</font></font><code><font color="#0000FF">nil</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是默认设置，在这种情况下，“计划”取其最小值和最大值的时间间隔</font></font><code><font color="#0000FF">rangeTime</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/ga/nm/c6/ganmc6t8wiap8exed4yxqwkgyqo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管我们已经应用到我们的</font></font><code><font color="#0000FF">Path</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改</font></font><code><font color="#0000FF">animation (.linear(duration: 0.6))</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，当你改变的范围内，不会出现动画，例如，</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值“图形。” “图表”将简单地从范围的一个值“跳转”到另一个值</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而无需任何动画。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原因很简单：我们教过</font></font><code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何在特定范围内绘制“图形” </font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但我们没有教过</font></font><code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在起点和终点之间的</font><font style="vertical-align: inherit;">中间值的范围内多次再现“图形” </font><font style="vertical-align: inherit;">，为此</font></font><code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符合协议</font></font><code><font color="#0000FF">Animatable</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幸运的是，如果您</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个“数字”，即</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现了一个协议</font></font><code><font color="#0000FF">Shape</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该</font><font style="vertical-align: inherit;">协议</font><font style="vertical-align: inherit;">已经实现</font></font><code><font color="#0000FF">Animatable</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这意味着存在一个</font></font><code><font color="#0000FF">animatableData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以控制动画过程</font><font style="vertical-align: inherit;">的计算属性</font><font style="vertical-align: inherit;">，但默认情况下将其设置为</font></font><code><font color="#0000FF">EmptyAnimatableData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即不发生动画。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了解决动画问题，我们首先需要将“ Graph” </font></font><code><font color="#0000FF">GraphView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为</font></font><code><font color="#0000FF">Shape</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这很简单，我们只需要实现</font></font><code><font color="#0000FF">func path (in rect:CGRect) -&gt; Path</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经拥有</font><font style="vertical-align: inherit;">的功能</font><font style="vertical-align: inherit;">，并在计算属性的帮助下指示</font></font><code><font color="#0000FF">animatableData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们要制作动画的数据：</font></font><br><br><img src="https://habrastorage.org/webt/ie/xm/gt/iexmgtfxveueipqyopubpbb_3uc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，动画控件的主题是该主题的高级主题。</font></font><code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在文章</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“高级SwiftUI动画-第1部分：路径”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解更多信息</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们可以在</font><font style="vertical-align: inherit;">带有动画</font><font style="vertical-align: inherit;">的更简单的</font><font style="vertical-align: inherit;">“图形”中</font><font style="vertical-align: inherit;">使用</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的“ </font><font style="vertical-align: inherit;">图形”：</font><font style="vertical-align: inherit;">您会发现我们不需要</font><font style="vertical-align: inherit;">新的“图形” </font><font style="vertical-align: inherit;">，因为有了协议，</font><font style="vertical-align: inherit;">我们的“图形” </font><font style="vertical-align: inherit;">将能够适应父级的任何大小</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">自然，</font><font style="vertical-align: inherit;">我们得到的结果与情况相同</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">在以下组合中，我们将使用</font><font style="vertical-align: inherit;">相同的“图形”来显示值。</font></font><code><font color="#0000FF">Graph</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">GraphViewNew</font></code><font style="vertical-align: inherit;"></font><br><br><img src="https://habrastorage.org/webt/yq/qk/ca/yqqkcah_txfmxn3zsaiixwbmjak.png"><br><br><font style="vertical-align: inherit;"></font><code><font color="#0000FF">GeometryReader</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">GraphViewNew</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">Shape</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">Graph</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"></font><code><font color="#0000FF">GraphView</font></code><font style="vertical-align: inherit;"></font><br><br><img src="https://habrastorage.org/webt/bo/dn/tb/bodntbqfjjkcnwqyzvhzkljand0.png"><br><br><font style="vertical-align: inherit;"></font><code><font color="#0000FF">GraphViewNew</font></code><font style="vertical-align: inherit;"></font><br><br><h3> <code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -一组“图表”（“线”） </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此的目的</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-从“组图形”显示所有“图表”（“线”）</font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在预定的时间范围内</font></font><code><font color="#0000FF">rangeTime</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有共同的轴线</font></font><code>Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该“线”的宽度是等于</font></font><code><font color="#0000FF">lineWidth</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/yp/nj/eu/ypnjeuqfnjxvrzwe-mfe8ui7slo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code><font color="#0000FF">GraphView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code><font color="#0000FF">GraphViewNew</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将创建</font></font><code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个新文件</font></font><code>GraphsForChart.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并定义输入数据“图表集”：</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“图表集”本身</font></font><code><font color="#0000FF">chart: LineSet</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（上的值</font></font><code> Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“图表”时间戳的索引</font><font style="vertical-align: inherit;">范围</font></font><code><font color="#0000FF">rangeTime: Range</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 图线笔划粗细 </font></font><code><font color="#0000FF">lineWidth</font></code> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的范围</font></font><code><font color="#0000FF">rangeY: Range</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为“一组曲线图的”（ </font></font><code> Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">作为单独的范围的联合计算不隐藏（</font></font><code><font color="#0000FF">isHidden = false</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）“图”，收录于“集”：</font></font><br><br><img src="https://habrastorage.org/webt/xb/jd/mj/xbjdmjbwiyguhmplj1znuy794fq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于这一点，我们使用的功能</font></font><code><font color="#0000FF">rangeOfRanges</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/w-/uh/hr/w-uhhrzrrdp8wjznihwiduyatni.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它没有隐藏，“图表”（ </font></font><code><font color="#0000FF">isHidden = false</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font><font style="vertical-align: inherit;">我们将展示在</font></font><code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用设计</font></font><code><font color="#0000FF">ForEach</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使每个“图形”都有可能出现在屏幕上，并使用“移动”修饰符离开屏幕</font></font><code><font color="#0000FF">transition(.move(edge: .top))</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/el/pe/n5/elpen5p3hgqi9n3izkbwpssfeo4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于有了此修饰符，隐藏和返回“图形”的过程</font></font><code><font color="#0000FF">ChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在屏幕上进行动画处理，并使用户清楚缩放比例的原因</font></font><code> Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code><font color="#0000FF">drawingGroup()</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着使用</font></font><code>Metal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于绘制图形形状。</font><font style="vertical-align: inherit;">在我们的测试数据和模拟器上，您不会感觉到使用</font></font><code>Metal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">绘制速度的差异</font></font><code> Metal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是如果您在任何图形上重现许多相当庞大的图形</font></font><code>iPhone</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则您会注意到这种差异。</font><font style="vertical-align: inherit;">有关更详细的介绍，请在使用时</font></font><code><font color="#0000FF">drawingGroup()</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看文章</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“高级SwiftUI动画-第1部分：路径”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或观看视频会议237 WWDC 2019（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用SwiftUI构建自定义视图</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像</font><font style="vertical-align: inherit;">使用预览</font><font style="vertical-align: inherit;">进行</font></font><code><font color="#0000FF">GraphViewNew</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试一样</font></font><code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以设置任何“图表集”，例如，使用索引</font></font><code><font color="#0000FF">0</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/3f/0s/v_/3f0sv_wpwemxkrdtsjdn2utz_ca.png"><br><br><h3> <code><font color="#0000FF">IndicatorView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -水平移动的指示器“图形”。 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该指标使您可以获取时间上相应点的“图表”和时间的确切值</font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/vi/xt/sq/vixtsqqwrjuu3dj55vzmhxyibhy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该指标是为特定的“图表集”创建的</font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括沿着</font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有MARK </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">垂直LINE </font><font style="vertical-align: inherit;">沿</font><font style="vertical-align: inherit;">“圆圈”的形式移动，以代替“图表”值。在此垂直线的顶部附加了一个小的“ POSTER”，其中包含“图表”和时间的数值。</font></font><br><br><img src="https://habrastorage.org/webt/nu/0q/7n/nu0q7nmjrtoqgcaaaasp2b3ukks.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示器由用户使用手势滑动</font></font><code><font color="#0000FF">DragGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/v4/4w/zg/v44wzgzsujx-w7f9iymlfuijlia.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用所谓的“增量”手势执行。而不是到起点的连续距离</font></font><code><font color="#0000FF">value.translation.width</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将</font></font><code><font color="#0000FF">onChanged</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不断收到到上次</font><font style="vertical-align: inherit;">在处理程序中</font><font style="vertical-align: inherit;">执行手势的位置的距离：</font></font><code><font color="#0000FF">value.translation.width - self.prevTranslation</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这将为我们提供指标的平稳移动。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了在</font><font style="vertical-align: inherit;">给定的“图表集” </font></font><code><font color="#0000FF">IndicatorView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的帮助下</font><font style="vertical-align: inherit;">测试指标</font></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以吸引现成</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的“图表”结构</font></font><code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/ce/cb/oy/cecboyk2-z74i_zdenfvkl36kya.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以为</font></font><code><font color="#0000FF">rangeTime</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指标</font></font><code><font color="#0000FF">IndicatorView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和“图表” </font><font style="vertical-align: inherit;">设置任意但相互协调的时间范围</font></font><code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这将使我们确保指示“图表”值的“圆圈”在正确的位置。</font></font><br><br><h3> <code><font color="#0000FF">TickerView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有标记。</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到目前为止，我们的“图表”已被取消个性化，因为它们没有</font></font><code> X  Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适当的比例和标记。让我们</font><font style="vertical-align: inherit;">在上面</font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加上时间戳</font></font><code><font color="#0000FF">TickerMarkView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。萨米标记</font></font><code><font color="#0000FF">TickerMarkView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是非常简单的</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直堆叠</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中布置</font></font><code><font color="#0000FF">Path</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code><font color="#0000FF">Text</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/qj/5f/ms/qj5fmst7za8mibfd16lv43fq_wa.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该组上为一定的“组图形”时间轴标记的</font></font><code><font color="#0000FF">chart : LineSet</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形成</font></font><code><font color="#0000FF">TickerView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按照用户选择的时间范围</font></font><code><font color="#0000FF">rangeTime</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和标记的近似量</font></font><code><font color="#0000FF">estimatedMarksNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它必须是在视用户的字段：</font></font><br><br><img src="https://habrastorage.org/webt/6n/cq/pd/6ncqpdiagf-023ftarlzz_qaqgo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于布置我们使用</font></font><code><font color="#0000FF">ScrollView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水平堆栈的</font><font style="vertical-align: inherit;">“运行”时间戳</font></font><code><font color="#0000FF">HStack</font></code> ,         <code><font color="#0000FF">rangeTime</font></code> . <br><br>  <code><font color="#0000FF">TickerView</font></code>    <code><font color="#0000FF">step</font></code> ,      <code><font color="#0000FF">TimeMarkView</font></code> ,      <code><font color="#0000FF">rangeTime</font></code>    <code><font color="#0000FF">widthRange</font></code> … <br><br><img src="https://habrastorage.org/webt/dv/0a/um/dv0aum4_9qfirikrlgzpquc4tio.png"><br><br> …      c  <code><font color="#0000FF">step</font></code>   <code><font color="#0000FF">chart.xTime</font></code>    <code><font color="#0000FF">indexes</font></code> . <br><br>  <code> X</code> —   —   <code><font color="#0000FF">overlay</font></code> … <br><br><img src="https://habrastorage.org/webt/_z/_z/bh/_z_zbh7qxng8xsqeor_mje-4bb8.png"><br><br> …    <code><font color="#0000FF">HStack</font></code> ,    <code><font color="#0000FF">TimeMarkView</font></code> ,      <code><font color="#0000FF">offset</font></code> : <br><br><img src="https://habrastorage.org/webt/lx/ha/ha/lxhahaxobvg1e0novqhdqcv6ju8.png"><br><br>  ,      <code> X</code> - <code><font color="#0000FF">colorXAxis</font></code> ,   — <code><font color="#0000FF">colorXMark</font></code> : <br><br><img src="https://habrastorage.org/webt/fp/e5/lc/fpe5lcp-_a4e_okpgb3hmbpopto.png"><br><br><h3> <code><font color="#0000FF">YTickerView</font></code> — <code> Y</code>    . </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幅画</font></font><code> Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有数字标记</font></font><code><font color="#0000FF">YMarkView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。标记本身</font></font><code><font color="#0000FF">YMarkView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是非常简单的</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直堆叠</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在布置</font></font><code><font color="#0000FF">Path</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（水平线）和</font></font><code><font color="#0000FF">Text</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与多个：</font></font><br><br><img src="https://habrastorage.org/webt/sl/1l/u-/sl1lu-qb3vu0prdm20x1mml8uxs.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于该组标记</font></font><code> Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为一定的“组图形” </font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形成</font></font><code><font color="#0000FF">YTickerView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。值</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的范围是通过使用函数将此“图表集”中包含的所有“图表”的值范围的并集计算得出的</font></font><code><font color="#0000FF">rangeOfRanges</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在Y轴标记的近似数由参数设定</font></font><code><font color="#0000FF">estimatedMarksNumber</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/2i/0t/s6/2i0ts6fkosuamlcuekwltqp8ars.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code><font color="#0000FF">YTickerView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们监控值的“图形”的变化范围</font></font><code><font color="#0000FF">rangeY</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。实际上，Y轴-垂直线-我们</font></font><code><font color="#0000FF">overlay</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在标记上</font><font style="vertical-align: inherit;">加上</font><font style="vertical-align: inherit;">了...</font></font><br><br><img src="https://habrastorage.org/webt/fp/ux/vd/fpuxvd0yeuhcliigesjup79ep0g.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另外，我们可以设置Y轴本身的颜色</font></font><code><font color="#0000FF">colorYAxis</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和-标记</font></font><code><font color="#0000FF">colorYMark</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/p3/j9/fx/p3j9fx2xe0y0rowdofhru1drlr8.png"><br><br><h3> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -使用“迷你地图”设置时间范围。 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的用户界面的大多数移动部分是设定的时间范围（</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），以显示“图形设置”：</font></font><br><br><img src="https://habrastorage.org/webt/-h/6u/8k/-h6u8kncvpv4pkxwcabhf_qlwh0.png"><br><br> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-一种</font></font><code>mini - map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在其他“图形组”的更详细的审议分配一定的时间段</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与前面的一样</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，的初始数据为</font></font><code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/ze/lh/hm/zelhhm0q-nuriuyeamidrtmr7zq.png"><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“图表集”本身</font></font><code><font color="#0000FF">chart: LineSet</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（值</font></font><code>Y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高度</font></font><code><font color="#0000FF">height</font></code> <code>"mini-map"</code> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宽度</font></font><code><font color="#0000FF">widthRange</font></code> <code>"mini-map"</code> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩进</font></font><code><font color="#0000FF">indent</font></code> <code>"mini-map"</code> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与上述其他方法不同</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们必须用手势更改</font></font><code><font color="#0000FF">DragGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围（</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）并立即查看其更改，因此</font><font style="vertical-align: inherit;">我们将使用</font><font style="vertical-align: inherit;">的用户定义的时间范围（</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）存储在变量变量中</font></font><code><font color="#0000FF">@EnvironmentObject var userData: UserData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/cr/mf/r8/crmfr8u455ij8zkeyk_c6wvgimw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对变量的任何更改</font></font><code><font color="#0000FF">var userData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都将导致重画所有</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖他的东西。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中的主要字符</font></font><code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是透明的“窗口”，其位置和大小由用户使用手势控制</font></font><code><font color="#0000FF">DragGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.如果在透明的“窗口”中使用手势，则“窗口”的位置会随之变化</font></font><code> X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且其大小不会改变：</font></font><br><br><img src="https://habrastorage.org/webt/gi/kr/en/gikrenmvik9d-vwnxkxgyjukchk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.如果在左侧较暗的部分中使用手势，则仅“窗口”的左边界会改变</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而允许我们减小或增加透明“窗口”的宽度：</font></font><br><br><img src="https://habrastorage.org/webt/sa/bb/ud/sabbudvk8c4npw3rqwnn3dnje70.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.如果在右侧较暗的部分中使用手势，则仅“窗口”的右侧边界会改变</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许增加或减少透明的“窗口”的宽度：</font></font><br><br><img src="https://habrastorage.org/webt/hb/hd/94/hbhd94uyj3kvkgjskq4ymtlpb1a.png"><br><br> <code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由3个主要元件是很简单的：两个矩形</font></font><code><font color="#0000FF">Rectangle ()</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和图象</font></font><code><font color="#0000FF">Image</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其边界由特性所决定</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code><font color="#0000FF">@EnvironmentObject var userData: UserData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与由姿势被控制的</font></font><code><font color="#0000FF">DragGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/lv/8f/ko/lv8fkojv9ebiz9glwpqziatyshk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们“叠加”在这种结构中（</font></font><code><font color="#0000FF">overlay</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是已经熟悉我们</font></font><code><font color="#0000FF">GraphsForChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定的“一套图形”的“图形” </font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/v4/qj/ll/v4qjllex5cv8elmq9j6zelnimkg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将使我们能够监视有多少“图表”进入“窗口”。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在透明的“窗口”的任何变化（这完全是移动或边界的变化）的属性变化的结果</font></font><code><font color="#0000FF">lowerBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code><font color="#0000FF">upperBound</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在用户数据中的函数</font></font><code><font color="#0000FF">onChanged</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号处理</font></font><code><font color="#0000FF">DragGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在两个箱子</font></font><code><font color="#0000FF">Rectangle ()</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和画面</font></font><code><font color="#0000FF">Image</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...... </font></font><br><br><img src="https://habrastorage.org/webt/9g/uv/em/9guvemkjpr39ihj_w5xmdew90ua.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是，正如我们已经知道，会自动导致重绘其他</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在这种情况下， “图表”，带有标记的X轴，带有标记和指示符的Y轴c </font></font><code><font color="#0000FF">hartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><br><br><img src="https://habrastorage.org/webt/jx/qq/nt/jxqqntjuvpdwbo52uezrhdkklyu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的变量包含</font></font><code><font color="#0000FF">@EnvironmentObject userData: UserData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，对于预览</font></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们必须使用设置其初始值</font></font><code><font color="#0000FF">.environmentObject (UserData())</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/xo/vo/ms/xovomsbphswg4cqogfb79rahfn0.png"><br><br><h3> <code><font color="#0000FF">CheckMarksView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -“隐藏”并显示“图表”。 </font></font></h3><br> <code><font color="#0000FF">CheckMarksView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它是一个水平堆栈</font></font><code><font color="#0000FF">HStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中一行</font></font><code>checkBoxes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于切换</font></font><code><font color="#0000FF">isHidden</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“图形集”中每个“图形” </font><font style="vertical-align: inherit;">的属性</font></font><code><font color="#0000FF">chart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/zt/qj/te/ztqjtefsylug2bfraz89cnwojok.png"><br><br> <code><font color="#0000FF">CheckBox</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的项目中，可以使用常规按钮</font></font><code><font color="#0000FF">Button</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用模拟按钮来实现</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">必须模仿</font></font><br><br><img src="https://habrastorage.org/webt/fz/e5/ef/fze5efrmahu4b1tmifksllqooou.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该按钮</font></font><code><font color="#0000FF">Button</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为将这些按钮中的几个放置</font></font><code><font color="#0000FF">List</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在层次结构中较高的位置时，它们“拒绝”正常工作。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">自从Beta 1到当前版本以来</font></a><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">这是一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长期存在的错误</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一直存在于</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xcode 11中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。该应用程序的当前版本使用模拟按钮</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模拟按钮</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和真实按钮</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用相同的东西</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为“外观”- </font></font><code><font color="#0000FF">CheckBoxView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。其中</font></font><code><font color="#0000FF">HStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code><font color="#0000FF">Tex</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code><font color="#0000FF">Image</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/eo/2l/i-/eo2li-qvqfxmlyjh9c0yu7hxf4o.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，初始化参数</font></font><code><font color="#0000FF">CheckBoxView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个</font></font><code><font color="#0000FF">@Binding</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font></font><code><font color="#0000FF">var line: Line</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。该物业</font></font><code><font color="#0000FF">isHidden</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该变量决定了“亮相” </font></font><code><font color="#0000FF">CheckBoView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/gc/sz/4m/gcsz4moq72xv3eoxhof9hb7in8e.png"><br><img src="https://habrastorage.org/webt/bx/dx/sc/bxdxscnfmsadskh9ye1osfpryge.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当使用</font></font><code><font color="#0000FF">CheckBoView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你需要使用该商标</font></font><code><font color="#0000FF">$</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code><font color="#0000FF">line</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化：</font></font><br><br><img src="https://habrastorage.org/webt/-i/_c/e9/-i_ce9sihdp9op0fhgb2xbswye4.png"><br><img src="https://habrastorage.org/webt/yj/kh/pj/yjkhpjuoecgzysng-x4wwy3lcv4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的属性</font></font><code><font color="#0000FF">isHidden</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font></font><code><font color="#0000FF">line</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换为</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code><font color="#0000FF">onTapGesture</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/vt/im/xz/vtimxzby-vaotjdld3hsrzqek1c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...但</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-与通常</font></font><code><font color="#0000FF">action</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的按钮</font></font><code><font color="#0000FF">Button</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/cf/ni/zs/cfnizshn609usurlzrnxeb6iwpq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，初始化参数</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还</font></font><code><font color="#0000FF">@Binding</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个变量</font></font><code><font color="#0000FF">var line: Line</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，它们的使用应适用</font></font><code><font color="#0000FF">$</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code><font color="#0000FF">CheckMarksView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换变量</font></font><code><font color="#0000FF">userData.charts[self.chartIndex].lines[self.lineIndex(line: line)].isHidden</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它存储在一个变量全局变量</font></font><code><font color="#0000FF">@EnvironmentObject var userData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/gi/fu/pz/gifupzgtguur-qvdwdcftcciepw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们一直保持未使用的项目目前</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的情况下，如果你突然</font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将纠正这个错误。</font><font style="vertical-align: inherit;">另外，您可以尝试使用</font></font><code><font color="#0000FF">CheckButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code><font color="#0000FF">CheckMarksView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来</font></font><code><font color="#0000FF">SimulatedButton</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保</font><font style="vertical-align: inherit;">在</font></font><code><font color="#0000FF">ChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code><font color="#0000FF">List</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font><font style="vertical-align: inherit;">组成多个“图表集”的情况下它不起作用</font></font><code><font color="#0000FF">ListChartsView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们</font></font><code><font color="#0000FF">View</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的变量包含一个变量</font></font><code><font color="#0000FF">@EnvironmentObject var userData: UserData</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，为了进行预览</font></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们必须使用以下命令设置其初始值</font></font><code><font color="#0000FF">.environmentObject(UserData())</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/cd/e7/l6/cde7l6me6nfz3kwrbhehbf_3fxq.png"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种组合</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></h3><br> <code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-主要是将各种小游戏组合</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成大型游戏，将大游戏组合</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成非常大的游戏，等等</font></font><code>Lego</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">由于</font></font><code><font color="#0000FF">SwiftUI</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有各种各样的方法，例如组合</font></font><code><font color="#0000FF">Views</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的垂直堆叠</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水平叠层</font></font><code><font color="#0000FF">HStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">堆栈的“深度” </font></font><code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组</font></font><code><font color="#0000FF">Group</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li> <code><font color="#0000FF">ScrollView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ， </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表</font></font><code><font color="#0000FF">List</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形成</font></font><code><font color="#0000FF">Form</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 书签容器 </font></font><code><font color="#0000FF">TabView</font></code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 等 </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们从最简单的组合开始，该组合</font></font><code><font color="#0000FF">GraphsViewForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供“无面的”“图表集” </font></font><code><font color="#0000FF">GraphsForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AXIS Y和使用“深度”堆栈的指示器沿X轴移动</font></font><code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/0c/fo/s9/0cfos9igmhy1bbpcnpzsywefxgw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在</font></font><code><font color="#0000FF">Previews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新</font></font><code><font color="#0000FF">GraphsViewForChart</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容器中</font><font style="vertical-align: inherit;">添加了一个</font><font style="vertical-align: inherit;">新</font><font style="vertical-align: inherit;">容器</font></font><code><font color="#0000FF">NavigationView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以便</font></font><code>Dark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用修饰符</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">模式下</font><font style="vertical-align: inherit;">显示它</font></font><code><font color="#0000FF">.collorScheme(.dark)</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们继续进行组合，并使用AXIS Y和以“运行线”形式显示的指示器AXIS X附加到上面获得的“图表集”，以及控件：“迷你地图”时间范围</font></font><code><font color="#0000FF">RangeView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code><font color="#0000FF">CheckMarksView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“图表”显示</font><font style="vertical-align: inherit;">开关</font><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果，我们得到了上述内容</font></font><code><font color="#0000FF">ChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它显示了“一组图表”，并允许您在时间轴上控制其显示：</font></font><br><br><img src="https://habrastorage.org/webt/ip/wf/8x/ipwf8xxpgdjlwlfy_fp9lv3fjwo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，我们使用垂直堆栈执行组合</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/p7/mr/hv/p7mrhv7fh-t742zlhhnhdwmajo4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，我们将考虑3个选项，用于组合已接收的ChartView“图表集”：</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“可滚动表格” </font></font><code><font color="#0000FF">List</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"></font><code><font color="#0000FF">HStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有3D效果的</font><font style="vertical-align: inherit;">水平堆叠</font><font style="vertical-align: inherit;">，</font></font></li><li> <code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 叠加的“卡片” </font></font></li></ol><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“可滚动表”</font></font><code><font color="#0000FF">ListChartsView</font></code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用列表进行组织</font></font><code><font color="#0000FF">List</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/bu/e8/tk/bue8tkzjntcqfhh7akcjnvbiu0q.png"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有3D效果</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code><font color="#0000FF">ScrollView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水平堆栈</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">水平堆栈</font></font><code><font color="#0000FF">HStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和以下形式的列表进行组织</font></font><code><font color="#0000FF">ForEach</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/t8/s9/iq/t8s9iq9wiyorwncxj6fprdqbqke.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此视图中，所有用户交互方式都可以正常工作：沿着时间轴移动并更改“比例” </font></font><code>mini- map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，指示符和隐藏按钮“图表”。</font></font><br><br><h3> <code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 叠加的“卡片”。 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们</font></font><code><font color="#0000FF">CardView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为“地图” </font><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">-这是带有AXIS X和Y的“图表集”，但是没有控件：没有“迷你地图”和没有用于控制图表外观/隐藏的按钮。</font></font><code><font color="#0000FF">CardView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code><font color="#0000FF">ChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“卡片” </font><font style="vertical-align: inherit;">非常相似</font><font style="vertical-align: inherit;">，但由于我们要将“卡片”彼此叠加，因此我们需要它们不透明。为此，我们</font></font><code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“背景”中</font><font style="vertical-align: inherit;">使用了其他</font><font style="vertical-align: inherit;">颜色</font></font><code><font color="#0000FF">cardBackgroundColor</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。此外，我们会做的“地图”与圆边的盒子：</font></font><br><br><img src="https://habrastorage.org/webt/8g/ls/az/8glsazeq3d35dtypveiszcxjnr4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的“地图”由堆栈组织的叠加</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code><font color="#0000FF">ZStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在窗体列表</font></font><code><font color="#0000FF">ForEach</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><img src="https://habrastorage.org/webt/hs/3a/dt/hs3adtpjp09ohrd2awxu35unyq4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，我们将对彼此不只是一个“卡”和“3D-macshtabiruemye”卡</font></font><code><font color="#0000FF">CardViewScalable</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的大小随索引的增加而减小</font></font><code><font color="#0000FF">indexChat</font></code>      . <br><br>  «3D-c »      ( <code>sequenced</code> )  <code><font color="#0000FF">LongPressGesture</font></code>  <code><font color="#0000FF">DragGesture</font></code> ,       «»  <code><font color="#0000FF">indexChat == 0</font></code> : <br><br><img src="https://habrastorage.org/webt/gg/4y/tt/gg4yttrlrk6xsojogyonvwqart0.png"><br><br>   ( <code><font color="#0000FF">LongPress</font></code> )   «»  « »,    ( <code><font color="#0000FF">Drag</font></code> )    ,     ,      ,   «»     <code><font color="#0000FF">ZStack</font></code> ,   «»  «»: <br><br><img src="https://habrastorage.org/webt/28/en/vp/28envpte6i3ap7_0nqlym55rgwa.png"><br><br>     «»    <code><font color="#0000FF">TapGesture</font></code> ,       <code><font color="#0000FF">LongPressGesture</font></code>  <code><font color="#0000FF">DragGesture</font></code> : <br><br><img src="https://habrastorage.org/webt/ly/er/lu/lyerlubus5wzjahe-vthnnfb9mu.png"><br><br> <code><font color="#0000FF">Tap</font></code>     « » <code><font color="#0000FF">ChartView</font></code>    <code><font color="#0000FF">RangeView</font></code>  <code><font color="#0000FF">CheckMarksView</font></code> : <br><br><img src="https://habrastorage.org/webt/-r/zr/uh/-rzruhqnyn6lum_lufx7nqcwh70.png"><br><br><h4><font style="vertical-align: inherit;"></font><code><font color="#0000FF">TabView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个屏幕上组合组成“图表集”的所有3个变体的</font><font style="vertical-align: inherit;">应用程序</font></font><code><font color="#0000FF">ChartView</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></h4><br><br><img src="https://habrastorage.org/webt/sf/fs/6f/sffs6fnm075_ebzabtu1wp9qkiu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们有3个带有图像</font></font><code><font color="#0000FF">Image</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和文本的</font><font style="vertical-align: inherit;">书签，</font><font style="vertical-align: inherit;">它们的联合展示不需要</font></font><code><font color="#0000FF">Text</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直堆叠</font></font><code><font color="#0000FF">VStack</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们对应于我们的3种组合“图表集”的方法</font></font><code><font color="#0000FF">ChartViews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“可滚动表格” </font></font><code><font color="#0000FF">ListChartViews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有3D效果的水平堆栈</font></font><code><font color="#0000FF">HStackChartViews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZStack叠加了“卡片” </font></font><code><font color="#0000FF">OverlayCardsViews</font></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户交互的所有元素：沿着时间轴移动，并通过帮助</font></font><code>mini - map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，指示器和按钮</font><font style="vertical-align: inherit;">更改“比例” </font><font style="vertical-align: inherit;">以隐藏“图表”。</font><font style="vertical-align: inherit;">在所有3种情况下都能正常工作。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><br><h3>     <code><font color="#0000FF">SwiftUI</font></code> ... </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您应该熟悉视频教程，书籍和博客：</font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mang To</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们构建该应用程序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些SwiftUI应用程序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">说明</font></a><font style="vertical-align: inherit;">，这</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一本免费的书“以示例为单位的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”和一本视频</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">www.hackingwithswift.com/quick-start/swiftui</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">付费的书但其中一半可以免费下载</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.bigmountainstudio.com/swiftui-views-book-SwiftUI的</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 100天课程</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.hackingwithswift.com/articles/201/start-the-100-days-swiftui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从现在开始结束2019年12月31日，</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-在SwiftUI令人印象深刻的东西上进行</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swiftui-lab.com</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">马吉德博客</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-上pointFree.co</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.pointfree.co</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于在SwiftUI中使用Reducers的文章</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">的</font></a><font style="vertical-align: inherit;"> “马拉松”（超级有趣）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个很棒的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MovieSwiftUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font><font style="vertical-align: inherit;">，它借鉴了一些想法。</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468897/">https://habr.com/ru/post/zh-CN468897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468879/index.html">在计算机存储的曙光中</a></li>
<li><a href="../zh-CN468883/index.html">Natalia Kozlovskaya：“谁在乎谁绘制OpenStreetMap：男人还是女人？”</a></li>
<li><a href="../zh-CN468885/index.html">不学模式，学概念</a></li>
<li><a href="../zh-CN468889/index.html">脚本回调函数</a></li>
<li><a href="../zh-CN468891/index.html">上古物品：考虑第386台计算机的主板</a></li>
<li><a href="../zh-CN468899/index.html">开始什么项目有意义，现在该行业需要IT做什么？</a></li>
<li><a href="../zh-CN468901/index.html">React Native-应用程序和批评</a></li>
<li><a href="../zh-CN468903/index.html">未来属于适应性教育平台。 流向 采访Asger Palm</a></li>
<li><a href="../zh-CN468905/index.html">迈向无障碍</a></li>
<li><a href="../zh-CN468907/index.html">Yandex解调</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>