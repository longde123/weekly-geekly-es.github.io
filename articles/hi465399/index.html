<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯШР ЁЯСйЁЯП╛тАНЁЯФм ЁЯФЗ CEPH рд╡рд┐рддрд░рд┐рдд рднрдВрдбрд╛рд░рдг рдФрд░ Kubernetes рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ ЁЯЧбя╕П ЁЯХб ЁЯЫНя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рднрд╛рдЧ 1 рд╣рдо рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВред рднрд╛рдЧ 1 рдирдВрдЧреЗ рдзрд╛рддреБ (рдбреЗрдмрд┐рдпрди) рдкрд░ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╣рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ 
 рд╣реЗрд▓реЛ, рд╣реЗрдмрд░ рдХреЗ рдкреНрд░рд┐рдп...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CEPH рд╡рд┐рддрд░рд┐рдд рднрдВрдбрд╛рд░рдг рдФрд░ Kubernetes рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465399/"><p><img src="https://habrastorage.org/webt/w-/ha/t9/w-hat9zskv2ab6vdpumzdxllw8w.png"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 1 рд╣рдо рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 1 рдирдВрдЧреЗ рдзрд╛рддреБ (рдбреЗрдмрд┐рдпрди) рдкрд░ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╣рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛</a> </p><br><h2>  рд╣реЗрд▓реЛ, рд╣реЗрдмрд░ рдХреЗ рдкреНрд░рд┐рдп рдкрд╛рдардХреЛрдВ! </h2><br><p>  рдкрд┐рдЫрд▓реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЛрд╕реНрдЯ рдореЗрдВ,</a> рдореИрдВрдиреЗ рдмрд╛рдд рдХреА рдХрд┐ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдлреЗрд▓рдУрд╡рд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреИрд╕реЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рдПред  рд▓реЗрдХрд┐рди рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рд╕реНрдЯреЗрдЯрд▓реЗрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рддреИрдирд╛рдд рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд░рд╛рдЬреНрдп рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдпрд╛ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╣рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдФрд░ рдЪреВрд▓реНрд╣рд╛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдкрд░ рдЗрд╕реЗ рдЦреЛрдирд╛ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рд╣реИред <br>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЗрди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЬрдм рд╣рдо рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╛рдЙрдб рд╕рдорд╛рдзрд╛рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рд╕рдорд╕реНрдпрд╛рдПрдВ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИрдВред  рд╣рдореЗрдВ Google, рдЕрдореЗрдЬрд╝реЕрди рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╡реЙрд▓реНрдпреВрдо рдСрд░реНрдбрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдд, рдкреНрд░рд╛рдкреНрдд рд╡реЙрд▓реНрдпреВрдо рдХреЛ рдлрд▓реА рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред <br>  рдЬрдм рд╣рдо рдирдВрдЧреЗ рдзрд╛рддреБ рд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВ, рддреЛ рдЪреАрдЬреЗрдВ рдереЛрдбрд╝реА рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реЛрддреА рд╣реИрдВред  рдЖрдЬ рдореИрдВ ceph рдХреЗ рдЙрдкрдпреЛрдЧ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдПрдХ рд╕рдорд╛рдзрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд╢рди рдореЗрдВ рдореИрдВ рдмрддрд╛рдКрдВрдЧрд╛: </p><br><ul><li>  рдХреИрд╕реЗ ceph рд╡рд┐рддрд░рд┐рдд рднрдВрдбрд╛рд░рдг рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </li><li>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рд╕реЗрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ <a name="habracut"></a></li></ul><br><h2>  рдкрд░рд┐рдЪрдп </h2><br><p>  рд╢реБрд░реБрдЖрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдпрд╣ рдмрддрд╛рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рдпрд╣ рд▓реЗрдЦ рдХрд┐рд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЙрди рдкрд╛рдардХреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдорд╛рдЗрдХреНрд░реЛрд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрд░реЗ рдкрд╣рд▓реЗ рдкреНрд░рдХрд╛рд╢рди рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдерд╛ред  рджреВрд╕рд░реЗ, рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЕрдкрдиреЗ рджрдо рдкрд░ рдПрдХ рд╕рд┐рдл рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд╢рди рдореЗрдВ, рдореИрдВ рдХрд┐рд╕реА рднреА рдЬрд░реВрд░рддреЛрдВ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╕реНрдЯрд░ рдпреЛрдЬрдирд╛ рдХреЗ рд╡рд┐рд╖рдп рдкрд░ рдирд╣реАрдВ рд▓рд┐рдЦреВрдВрдЧрд╛, рдореИрдВ рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рдиреНрдп рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдФрд░ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ред  рдореИрдВ "рдЯреНрдпреВрдирд┐рдВрдЧ" рдФрд░ рдЧрд╣рд░реА рдЯреНрдпреВрдирд┐рдВрдЧ рдореЗрдВ рддрд▓реНрд▓реАрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдХрдИ рдкреНрд░рдХрд╛рд╢рди рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╣рдмрд░ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рд▓реЗрдЦ рдПрдХ рдЕрдзрд┐рдХ рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рдкреНрд░рдХреГрддрд┐ рдХрд╛ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рд╛рде рд╣реА рдпрд╣ рдЖрдкрдХреЛ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕рдорд╛рдзрд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдЖрдк рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛ рд╕рдХреЗрдВред </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдЬрдмрд╛рдиреЛрдВ, рдореЗрдЬрдмрд╛рди рд╕рдВрд╕рд╛рдзрдиреЛрдВ, рдУрдПрд╕ рдФрд░ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреА рд╕реВрдЪреА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрдлрд╣ рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрд░рдЪрдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрдлрд╝-рддреИрдирд╛рддреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реАрдл рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрдлрд╝ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЙрдирд┐рдЯрд░ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдЖрд░рдВрднреАрдХрд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OSD рдЬреЛрдбрд╝рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрдлрд╝ рдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рдбреЗрдЯрд╛ рдкреВрд▓ рдмрдирд╛рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдЧреБрдкреНрдд рдмрдирд╛рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реАрдПрдлрдПрдЪ рдЖрд░рдмреАрдбреА рдкреНрд░рд╛рд╡рдзрд╛рдирдХ рддреИрдирд╛рдд рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрдВрдбрд╛рд░рдг рд╡рд░реНрдЧ рдмрдирд╛рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ + рд╕реЗрдлрд╝ рд▓рд┐рдЧрд╛рдореЗрдВрдЯ рдЯреЗрд╕реНрдЯ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦ рдХреА рддреИрдпрд╛рд░реА рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА</a> </li></ol><br><a name="vm"></a><br><h2>  рд╣реЛрд╕реНрдЯ рд╕реВрдЪреА рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ </h2><br><div class="scrollable-table"><table><tbody><tr><th>  <b>рдирд╛рдо</b> </th><th>  <b>рдЖрдИрдкреА тАЛтАЛрдПрдбреНрд░реЗрд╕</b> </th><th>  <b>рдЯрд┐рдкреНрдкрдгреА</b> </th></tr><tr><td>  ceph01 рдкрд░реАрдХреНрд╖рдг </td><td>  10.73.88.52 </td><td>  Ceph-node01 </td></tr><tr><td>  ceph02 рдкрд░реАрдХреНрд╖рдг </td><td>  10.73.88.53 </td><td>  Ceph-node02 </td></tr><tr><td>  ceph03 рдкрд░реАрдХреНрд╖рдг </td><td>  10.73.88.54 </td><td>  Ceph-node03 </td></tr></tbody></table></div><br><p>  рдПрдХ рд▓реЗрдЦ рд▓рд┐рдЦрддреЗ рд╕рдордп, рдореИрдВ рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ </p><br><p><img src="https://habrastorage.org/webt/kd/-z/bd/kd-zbdwb_76g1vvvgmtojoirseo.png"></p><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рдбреЗрдмрд┐рдпрди 9.5 рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рд╣реИред  рдпреЗ рдкрд░реАрдХреНрд╖рдг рдорд╢реАрди рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рджреЛ рдбрд┐рд╕реНрдХ рд╣реИрдВ, рдкрд╣рд▓рд╛ рдУрдПрд╕ рдХреЗ рд▓рд┐рдП, рджреВрд╕рд░рд╛ рдУрдПрд╕рдбреА рд╕реАрдл рдХреЗ рд▓рд┐рдПред </p><br><p>  рдореИрдВ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕рд┐рдл-рдпреВрдЯрд┐рд▓рд┐рдЯреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рддреИрдирд╛рдд рдХрд░реВрдВрдЧрд╛ред  рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рдореЛрдб рдореЗрдВ рдПрдХ ceph рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рднреА рдЪрд░рдгреЛрдВ рдХреЛ рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдпрд╣ рдмрддрд╛рдирд╛ рд╣реИ рдХрд┐ рдЖрдк рдХрд┐рддрдиреА рдЬрд▓реНрджреА ceph рдХреЛ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ kubernetes рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br>  рд╕реАрдлрд╝рдПрдЪ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд▓рдЬреНрдЬрд╛рдЬрдирдХ рд╣реИ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд░реИрдоред  рдЕрдЪреНрдЫреА рдЧрддрд┐ рдХреЗ рд▓рд┐рдП, ssd рдбреНрд░рд╛рдЗрд╡ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЙрдЪрд┐рдд рд╣реИред </p><br><p>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ ceph рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ред</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><br></a> </p><br><a name="ceph"></a><br><h2>  рд╕реЗрдлрд╣ рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрд░рдЪрдирд╛ </h2><br><p>  <strong>рд╕реЛрдо</strong> <br>  <em>рдПрдХ рдореЙрдирд┐рдЯрд░ рдПрдХ рдбреЗрдорди рд╣реИ рдЬреЛ рд╕рдордиреНрд╡рдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред</em>  <em>рдЬреИрд╕реЗ рд╣реА рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рдореЙрдирд┐рдЯрд░ рд╣реЛрддрд╛ рд╣реИ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╕рд┐рдл рдХреНрд▓рд╕реНрдЯрд░ рд╣реЛрддрд╛ рд╣реИред</em>  <em>рдореЙрдирд┐рдЯрд░ рдЕрдиреНрдп рдореЙрдирд┐рдЯрд░ рдХреЗ рд╕рд╛рде рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдбреЛрдВ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдФрд░ рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред</em>  <em>рдЧреНрд░рд╛рд╣рдХ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореЙрдирд┐рдЯрд░ рдХреА рдУрд░ рдореБрдбрд╝рддреЗ рд╣реИрдВ рдХрд┐ рдХреМрди рд╕реЗ рдУрдПрд╕рдбреА рдХреЛ рдбреЗрдЯрд╛ рд▓рд┐рдЦрдирд╛ / рдкрдврд╝рдирд╛ рд╣реИред</em>  <em>рдЬрдм рдЖрдк рдПрдХ рдирдпрд╛ рд╕рдВрдЧреНрд░рд╣рдг рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдк рдПрдХ рдореЙрдирд┐рдЯрд░ (рдпрд╛ рдХрдИ) рдмрдирд╛рддреЗ рд╣реИрдВред</em>  <em>рдХреНрд▓рд╕реНрдЯрд░ рдПрдХ рдореЙрдирд┐рдЯрд░ рдкрд░ рд░рд╣ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХрд▓ рдореЙрдирд┐рдЯрд░ рдХреЗ рдЧрд┐рд░рдиреЗ рд╕реЗ рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЧрд┐рд░рдиреЗ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП 3 рдпрд╛ 5 рдореЙрдирд┐рдЯрд░ рдмрдирд╛рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред</em>  <em>рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╡рд┐рднрд╛рдЬрд┐рдд рдорд╕реНрддрд┐рд╖реНрдХ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдирдореЗрдВ рд╕реЗ рд╕рдВрдЦреНрдпрд╛ рд╡рд┐рд╖рдо рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред</em>  <em>рдореЙрдирд┐рдЯрд░ рдПрдХ рдХреЛрд░рдо рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдзреЗ рд╕реЗ рдЕрдзрд┐рдХ рдореЙрдирд┐рдЯрд░ рдЧрд┐рд░ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдХреНрд▓рд╕реНрдЯрд░ рдбреЗрдЯрд╛ рдЕрд╕рдВрдЧрддрддрд╛ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд╡рд░реБрджреНрдз рд╣реЛ рдЬрд╛рдПрдЧрд╛ред</em> <br>  <strong>рдПрдордЬреАрдЖрд░</strong> <br>  <em>рд╕реАрдПрдлрдПрдЪ рдкреНрд░рдмрдВрдзрдХ рдбреЗрдореЙрди рдЕрддрд┐рд░рд┐рдХреНрдд рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореЙрдирд┐рдЯрд░ рдбреЗрдореЙрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</em> <em><br></em>  <em>рд╕рдВрд╕реНрдХрд░рдг 12.x рдХреЗ рдмрд╛рдж рд╕реЗ, рд╕рд╛рдорд╛рдиреНрдп рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рд╕реЗрдл-рдореЙрд░реНрдЧ рдбреЗрдореЙрди рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рдЧрдпрд╛ рд╣реИред</em> <em><br></em>  <em>рдЕрдЧрд░ рдореЙрд░ рдбреЗрдореЙрди рдирд╣реАрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рджреЗрдЦреЗрдВрдЧреЗред</em> <br>  <strong>рдУрдПрд╕рдбреА (рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ рдбрд┐рд╡рд╛рдЗрд╕)</strong> <br>  <em>рдУрдПрд╕рдбреА рдПрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдпреВрдирд┐рдЯ рд╣реИ рдЬреЛ рдбреЗрдЯрд╛ рдХреЛ рд╕реНрд╡рдпрдВ рд╕реНрдЯреЛрд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЕрдиреНрдп рдУрдПрд╕рдбреА рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИред</em>  <em>рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдбрд┐рд╕реНрдХ рд╣реИред</em>  <em>рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдкреНрд░рддреНрдпреЗрдХ рдУрдПрд╕рдбреА рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдУрдПрд╕рдбреА рдбреЗрдореЙрди рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреА рдорд╢реАрди рдкрд░ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдпрд╣ рдбрд┐рд╕реНрдХ рд╕реНрдерд╛рдкрд┐рдд рд╣реИред</em> </p><br><p>  рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдорд╢реАрди рдкрд░ рддреАрдиреЛрдВ рдбреЗрдореЙрди рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред  рддрджрдиреБрд╕рд╛рд░, рдореЙрдирд┐рдЯрд░ рдФрд░ рдореИрдиреЗрдЬрд░ рдбреЗрдореЛрдВрд╕ рдХреЛ рд╣рдорд╛рд░реА рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреА рдПрдХ рдбреНрд░рд╛рдЗрд╡ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛ рдФрд░ рдУрдПрд╕рдбреА рдбреЗрдореЙрди рдХреЗ рд░реВрдк рдореЗрдВред </p><br><a name="before"></a><br><h2>  рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h2><br><p>  Ceph рдкреНрд░рд▓реЗрдЦрди рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/wz/9i/gu/wz9igu71hiezyom4zvtbxp6ye30.png"></p><br><p>  рдореИрдВ ceph01-рдкрд░реАрдХреНрд╖рдг рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдкрд╣рд▓реЗ рдиреЛрдб рд╕реЗ рдХрд╛рдо рдХрд░реВрдВрдЧрд╛, рдпрд╣ рдПрдбрдорд┐рди рдиреЛрдб рд╣реЛрдЧрд╛, рдЗрд╕рдореЗрдВ ceph-рддреИрдирд╛рдд рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╛рдЗрд▓реЗрдВ рднреА рд╣реЛрдВрдЧреАред  рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП ceph рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд▓рд┐рдП, рд╕рднреА рдиреЛрдб рдиреЛрдб рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдиреЛрдб рдХреЗ рд╕рд╛рде ssh рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рдЫреЛрдЯреЗ рдирд╛рдореЛрдВ рдореЗрдВ рд▓рд┐рдЦреВрдВрдЧрд╛ </p><br><pre><code class="plaintext hljs">10.73.88.52 ceph01-test 10.73.88.53 ceph02-test 10.73.88.54 ceph03-tset</code> </pre> <br><p>  рдФрд░ рдЕрдиреНрдп рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреА рдЪрд╛рдмрд┐рдпрд╛рдБ рдХреЙрдкреА рдХрд░реЗрдВред  рд╕рднреА рдЖрдЬреНрдЮрд╛рдУрдВ рдХреЛ рдореИрдВ рдореВрд▓ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реВрдВрдЧрд╛ред </p><br><pre> <code class="plaintext hljs">ssh-copy-id ceph02-test ssh-copy-id ceph03-test</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрдЯрдЕрдк рдкреНрд░рд▓реЗрдЦрди</a> </p><br><anchor>  Ceph рддреИрдирд╛рддреА </anchor><br><h2>  рд╕реЗрдлрд╝-рддреИрдирд╛рддреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h2><br><p>  рдкрд╣рд▓рд╛ рдХрджрдо ceph01-test рдорд╢реАрди рдкрд░ ceph-рддреИрдирд╛рдд рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реИ </p><br><pre> <code class="plaintext hljs">wget -q -O- 'https://download.ceph.com/keys/release.asc' | apt-key add -</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рд╡рд╣ рд░рд┐рд▓реАрдЬрд╝ рдЪреБрдирдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕реЗ рдЖрдк рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдореБрд╢реНрдХрд┐рд▓реЗрдВ рд╣реИрдВ, рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдбреЗрдмрд┐рдпрди рдУрдПрд╕ рдХреЗ рд▓рд┐рдП ceph рдХреЗрд╡рд▓ рдЪрдордХрджрд╛рд░ рдкреИрдХреЗрдЬ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред <br>  рдпрджрд┐ рдЖрдк рд╣рд╛рд▓ рд╣реА рдореЗрдВ рд░рд┐рд▓реАрдЬрд╝ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рджрд░реНрдкрдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://mirror.croit.io/debian-mimic/dists/</a> </p><br><p>  рд╕рднреА рддреАрди рдиреЛрдбреНрд╕ рдкрд░ рдирдХрд▓ рдХреЗ рд╕рд╛рде рдПрдХ рднрдВрдбрд╛рд░ рдЬреЛрдбрд╝реЗрдВ </p><br><pre> <code class="plaintext hljs">apt install curl apt-transport-https -y curl https://mirror.croit.io/keys/release.gpg &gt; /usr/share/keyrings/croit-signing-key.gpg echo 'deb [signed-by=/usr/share/keyrings/croit-signing-key.gpg] https://mirror.croit.io/debian-mimic/ stretch main' &gt; /etc/apt/sources.list.d/croit-ceph.list apt update apt install ceph-deploy</code> </pre> <br><p>  рдпрджрд┐ рдЪрдордХрджрд╛рд░ рдЖрдкрдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рддреЛ рдЖрдк рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </p><br><pre> <code class="plaintext hljs">echo deb https://download.ceph.com/debian-luminous/ $(lsb_release -sc) main | tee /etc/apt/sources.list.d/ceph.list apt-transport-https apt update apt install ceph-deploy</code> </pre> <br><p>  рд╣рдо рддреАрдиреЛрдВ рдиреЛрдбреНрд╕ рдкрд░ NTP рднреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдЪреВрдБрдХрд┐ рдпрд╣ рд╕рд┐рдлрд╛рд░рд┐рд╢ ceph рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рд╣реИ</b> <div class="spoiler_text"><p>  рд╣рдо рдШрдбрд╝реА рдХреЗ рдмрд╣рд╛рд╡ рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдореБрджреНрджреЛрдВ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реАрдПрдлрдПрдЪ рдиреЛрдбреНрд╕ (рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕реЗрдл рдореЙрдирд┐рдЯрд░ рдиреЛрдбреНрд╕) рдкрд░ рдПрдирдЯреАрдкреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВред <br></p></div></div><br><pre> <code class="plaintext hljs">apt install ntp</code> </pre> <br><p>  рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк NTP рд╕реЗрд╡рд╛ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддреЗ рд╣реИрдВред  рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╕рд┐рдл рдиреЛрдб рдЙрд╕реА NTP рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </p><br><a name="ceph-install"></a><br><h2>  рд╕реАрдл рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛ </h2><br><p>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдПрдБ ceph- рддреИрдирд╛рддреА </p><br><pre> <code class="plaintext hljs">mkdir my-cluster cd my-cluster</code> </pre> <br><p>  рдЖрдЗрдП рдПрдХ рдирдпрд╛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдмрдирд╛рддреЗ рд╣реИрдВ, рдмрдирд╛рддреЗ рд╕рдордп рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рддреАрди рдореЙрдирд┐рдЯрд░ рд╣реЛрдВрдЧреЗ </p><br><pre> <code class="plaintext hljs">ceph-deploy new ceph01-test ceph02-test ceph03-test</code> </pre> <br><a name="ceph-network"></a><br><h2>  рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк </h2><br><p>  рдЕрдм рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ, рдпрд╣ ceph рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред  рд╕рд┐рдл рджреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ <br><img src="https://habrastorage.org/webt/jz/dp/wz/jzdpwzxrzpdqr7k9v4u53hmc05s.png"></p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдЖрд░реЗрдЦ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╕реНрддрд░ рд╣реИ, рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╣ рдиреЗрдЯрд╡рд░реНрдХ рд╣реИ рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рджреЛрд╣рд░рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  рдЗрди рджреЛрдиреЛрдВ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛ рдмреЗрд╣рдж рд╡рд╛рдВрдЫрдиреАрдп рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрдкреАрдб рдХреНрд▓рд╕реНрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрдо рд╕реЗ рдХрдо 10 Gb рд╡рд╛рдВрдЫрдиреАрдп рд╣реИред <br>  рдмреЗрд╢рдХ, рдЖрдк рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕рдм рдХреБрдЫ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдпрд╣ рдЗрд╕ рддрдереНрдп рд╕реЗ рднрд░рд╛ рд╣реИ рдХрд┐ рдЬреИрд╕реЗ рд╣реА рдУрдПрд╕рдбреА рдХреЗ рдмреАрдЪ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреА рдорд╛рддреНрд░рд╛ рдмрдврд╝ рдЬрд╛рддреА рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рдирдП рдУрдПрд╕рдбреА (рдбрд┐рд╕реНрдХ) рдЧрд┐рд░ рдЬрд╛рддреЗ рд╣реИрдВ рдпрд╛ рдЬреЛрдбрд╝ рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдиреЗрдЯрд╡рд░реНрдХ рд▓реЛрдб рдмрд╣реБрдд рдмрдврд╝ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреА рдЧрддрд┐ рдФрд░ рд╕реНрдерд┐рд░рддрд╛ ceph рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдмрд╣реБрдд рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧреАред <br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдореЗрд░реЗ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдиреЗрдЯрд╡рд░реНрдХ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдореИрдВ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЧрдореЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛ред <br>  рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкрд┐рдЫрд▓реА рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдерд╛ред </p><br><pre> <code class="plaintext hljs">/my-cluster# cat ceph.conf [global] fsid = 2e0d92b0-e803-475e-9060-0871b63b6e7f mon_initial_members = ceph01-test, ceph02-test, ceph03-test mon_host = 10.73.88.52,10.73.88.53,10.73.88.54 auth_cluster_required = cephx auth_service_required = cephx auth_client_required = cephx</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, cef рддреИрдирд╛рдд рдиреЗ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдирд╣реАрдВ рдмрдирд╛рдИ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ = {public-network / netmask} рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╡реИрд╢реНрд╡рд┐рдХ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЬреЛрдбрд╝ рджреВрдВрдЧрд╛ред  рдореЗрд░рд╛ рдиреЗрдЯрд╡рд░реНрдХ резреж. myрей.реж.реж/резрем рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореЗрд░реЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж рдРрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛ </p><br><pre> <code class="plaintext hljs">[global] fsid = 2e0d92b0-e803-475e-9060-0871b63b6e7f mon_initial_members = ceph01-test, ceph02-test, ceph03-test mon_host = 10.73.88.52,10.73.88.53,10.73.88.54 public network = 10.73.0.0/16 auth_cluster_required = cephx auth_service_required = cephx auth_client_required = cephx</code> </pre> <br><p>  рдпрджрд┐ рдЖрдк рдХреНрд▓рд╕реНрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕реЗ рдЕрд▓рдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдкреИрд░рд╛рдореАрдЯрд░ рдХреНрд▓рд╕реНрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЬреЛрдбрд╝реЗрдВ = {рдХреНрд▓рд╕реНрдЯрд░-рдиреЗрдЯрд╡рд░реНрдХ / рдиреЗрдЯрдорд╛рд╕реНрдХ} <br>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмрд╛рд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдВ</a> рдЕрдзрд┐рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред</a> </p><br><a name="ceph-pack"></a><br><h2>  рд╕реЗрдлрд╝ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h2><br><p>  Ceph- рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдЙрди рд╕рднреА ceph рд╕рдВрдХреБрд▓ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рдирдХреА рд╣рдореЗрдВ рдЕрдкрдиреЗ рддреАрди рдиреЛрдбреНрд╕ рдкрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, ceph01-test рдкрд░, рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ <br>  рдпрджрд┐ рд╕рдВрд╕реНрдХрд░рдг рдХреА рдирдХрд▓ рдХреА рдЬрд╛рддреА рд╣реИ </p><br><pre> <code class="plaintext hljs">ceph-deploy install --release mimic ceph01-test ceph02-test ceph03-test</code> </pre> <br><p>  рдпрджрд┐ рд╕рдВрд╕реНрдХрд░рдг рдЪрдордХрджрд╛рд░ рд╣реИ рддреЛ </p><br><pre> <code class="plaintext hljs">ceph-deploy install --release luminous ceph01-test ceph02-test ceph03-test</code> </pre> <br><p>  рдФрд░ рд╕рдм рдХреБрдЫ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред </p><br><a name="ceph-mon"></a><br><h2>  рдореЙрдирд┐рдЯрд░ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдЖрд░рдВрднреАрдХрд░рдг </h2><br><p>  рд╕рднреА рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдореЙрдирд┐рдЯрд░ рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗред <br>  C ceph01-test рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░рддреЗ рд╣реИрдВ </p><br><pre> <code class="plaintext hljs">ceph-deploy mon create-initial</code> </pre> <br><p>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдореЙрдирд┐рдЯрд░ рдмрдирд╛рдП рдЬрд╛рдПрдВрдЧреЗ, рдбреЗрдореЙрди рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ, рдФрд░ рд╕реЗрдл-рддреИрдирд╛рддреА рдХреЛрд░рдо рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдЧрд╛ред <br>  рдЕрдм рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдкрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рддрд┐рддрд░ рдмрд┐рддрд░ рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs">ceph-deploy admin ceph01-test ceph02-test ceph03-test</code> </pre> <br><p>  рдФрд░ рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ, рдпрджрд┐ рдЖрдкрдиреЗ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╕реНрдерд┐рддрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП <br>  HEALTH_OK </p><br><pre> <code class="plaintext hljs">~/my-cluster# ceph status cluster: id: 2e0d92b0-e803-475e-9060-0871b63b6e7f health: HEALTH_OK services: mon: 3 daemons, quorum ceph01-test,ceph02-test,ceph03-test mgr: no daemons active osd: 0 osds: 0 up, 0 in data: pools: 0 pools, 0 pgs objects: 0 objects, 0 B usage: 0 B used, 0 B / 0 B avail pgs:</code> </pre> <br><p>  Mgr рдмрдирд╛рдПрдБ </p><br><pre> <code class="plaintext hljs">ceph-deploy mgr create ceph01-test ceph02-test ceph03-test</code> </pre> <br><p>  рдФрд░ рд╕реНрдЯреЗрдЯрд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рдЬрд╛рдВрдЪреЗрдВ </p><br><pre> <code class="plaintext hljs">ceph -s</code> </pre> <br><p>  рдПрдХ рдкрдВрдХреНрддрд┐ рджрд┐рдЦрд╛рдИ рджреЗрдиреА рдЪрд╛рд╣рд┐рдП </p><br><pre> <code class="plaintext hljs">mgr: ceph01-test(active), standbys: ceph02-test, ceph03-test</code> </pre> <br><p>  рд╣рдо рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕рднреА рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд▓рд┐рдЦрддреЗ рд╣реИрдВ </p><br><pre> <code class="plaintext hljs">ceph-deploy admin ceph01-test ceph02-test ceph03-test</code> </pre> <br><a name="ceph-osd"></a><br><h2>  OSD рдЬреЛрдбрд╝рдирд╛ </h2><br><p>  рдлрд┐рд▓рд╣рд╛рд▓ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рдХреНрд▓рд╕реНрдЯрд░ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдЕрднреА рддрдХ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ (рд╕реЗрдлрд╝ рд╢рдмреНрджрд╛рд╡рд▓реА рдореЗрдВ рдУрдПрд╕рдбреА) рдирд╣реАрдВ рд╣реИред </p><br><p>  OSD рдХреЛ рдирд┐рдореНрди рдХрдорд╛рдВрдб (рд╕рд╛рдорд╛рдиреНрдп рджреГрд╢реНрдп) рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </p><br><pre> <code class="plaintext hljs">ceph-deploy osd create --data {device} {ceph-node}</code> </pre> <br><p>  рдореЗрд░реЗ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ, osd рдХреЗ рддрд╣рдд рдбрд┐рд╕реНрдХ / dev / sdb рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХрдорд╛рдВрдб рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реЛрдВрдЧреА </p><br><pre> <code class="plaintext hljs">ceph-deploy osd create --data /dev/sdb ceph01-test ceph-deploy osd create --data /dev/sdb ceph02-test ceph-deploy osd create --data /dev/sdb ceph03-test</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд╕рднреА рдУрдПрд╕рдбреА рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">ceph -s</code> </pre> <br><p>  рдирд┐рд╖реНрдХрд░реНрд╖ </p><br><pre> <code class="plaintext hljs"> cluster: id: 2e0d92b0-e803-475e-9060-0871b63b6e7f health: HEALTH_OK services: mon: 3 daemons, quorum ceph01-test,ceph02-test,ceph03-test mgr: ceph01-test(active) osd: 3 osds: 3 up, 3 in</code> </pre> <br><p>  рдЖрдк рдУрдПрд╕рдбреА рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЙрдкрдпреЛрдЧреА рдХрдорд╛рдВрдб рднреА рдЖрдЬрд╝рдорд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">ceph osd df ID CLASS WEIGHT REWEIGHT SIZE USE AVAIL %USE VAR PGS 0 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 1 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 2 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 TOTAL 15 GiB 3.0 GiB 12 GiB 20.05</code> </pre> <br><p>  рдФрд░ </p><br><pre> <code class="plaintext hljs">ceph osd tree ID CLASS WEIGHT TYPE NAME STATUS REWEIGHT PRI-AFF -1 0.01469 root default -3 0.00490 host ceph01-test 0 hdd 0.00490 osd.0 up 1.00000 1.00000 -5 0.00490 host ceph02-test 1 hdd 0.00490 osd.1 up 1.00000 1.00000 -7 0.00490 host ceph03-test 2 hdd 0.00490 osd.2 up 1.00000 1.00000</code> </pre><br><p>  рдпрджрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ, рддреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕реАрдл рдХреНрд▓рд╕реНрдЯрд░ рд╣реИред  рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдореИрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рд╕реАрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </p><br><a name="kubernetes"></a><br><h1>  рд╕реЗрдлрд╝ рдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ </h1><br><p>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдореИрдВ рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░ рдкрд╛рдКрдВрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдПрдХ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдореЗрдВ рдлрд┐рдЯ рд╣реЛрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реВрдВрдЧрд╛ред <br>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдбреЗрдЯрд╛ рдХреЗ рдбреЗрдЯрд╛ рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд▓рд╛рд╕реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд▓рд╛рд╕ рдХрд╛ рдЕрдкрдирд╛ рдПрдХ рдкреНрд░рд╛рд╡рдзрд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЖрдк рдЗрд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП "рдбреНрд░рд╛рдЗрд╡рд░" рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рди рд╕рдХрддреЗ рд╣реИрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ</a> рд╕реВрдЪреА рдореЗрдВ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓реА рдкреВрд░реА рд╕реВрдЪреА рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИред <br>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рдкрд╛рд╕ рднреА рдЖрд░рдмреАрдбреА рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдХреНрдпреВрдм-рдХрдВрдЯреНрд░реЛрд▓рд░-рдореИрдиреЗрдЬрд░ рдЫрд╡рд┐ рдореЗрдВ рдХреЛрдИ рдЖрд░рдмреАрдбреА рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдПрдХ рдЕрд▓рдЧ рдЫрд╡рд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br>  рдпрд╣ рднреА рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ rbd рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдП рдЧрдП рд╡реЙрд▓реНрдпреВрдо (рдкреАрд╡реАрд╕реА) рдХреЗрд╡рд▓ ReadWriteOnce (RWO) рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЖрдк рдмрдирд╛рдП рдЧрдП рд╡реЙрд▓реНрдпреВрдо рдХреЛ рдХреЗрд╡рд▓ рдПрдХ рдЪреВрд▓реНрд╣рд╛ рдкрд░ рдорд╛рдЙрдВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕реЗрдл рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП: <br>  рдПрдХ рд╕рд┐рдл рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ: </p><br><ul><li>  ceph рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдбреЗрдЯрд╛ рдкреВрд▓ рдмрдирд╛рдПрдБ </li><li>  рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдмрдирд╛рдПрдБ рдФрд░ рдбреЗрдЯрд╛ рдкреВрд▓ рдореЗрдВ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА </li><li>  Ceph рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рд░рд╣рд╕реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </li></ul><br><p>  рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕реЗрдл рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП: <br>  рдПрдХ рд╕рд┐рдл рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ: </p><br><ul><li>  ceph рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдбреЗрдЯрд╛ рдкреВрд▓ рдмрдирд╛рдПрдБ </li><li>  рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдмрдирд╛рдПрдБ рдФрд░ рдбреЗрдЯрд╛ рдкреВрд▓ рдореЗрдВ рдкрд╣реБрдБрдЪ рдХреБрдВрдЬреА </li><li>  Ceph рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рд░рд╣рд╕реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </li></ul><br><p>  рдХреБрдмреЗрд░рдиреЗрдЯ рд╕рдореВрд╣ рдореЗрдВ: </p><br><ul><li>  ceph admin secret рдФрд░ ceph рдХреНрд▓рд╛рдЗрдВрдЯ рдХреБрдВрдЬреА рдмрдирд╛рдПрдВ </li><li>  ceph rbd рдЙрдкрдпреЛрдХреНрддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдпрд╛ rbd рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓реА рдЫрд╡рд┐ рдореЗрдВ kube-рдирд┐рдпрдВрддреНрд░рдХ-рдкреНрд░рдмрдВрдзрдХ рдЫрд╡рд┐ рдмрджрд▓реЗрдВ </li><li>  ceph рдХреНрд▓рд╛рдЗрдВрдЯ рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдЧреБрдкреНрдд рдмрдирд╛рдПрдВ </li><li>  рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ </li><li>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдиреЛрдЯреЛрдВ рдкрд░ рд╕реЗрдл-рдХреЙрдорди рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </li></ul><br><a name="ceph-pool"></a><br><h2>  рдПрдХ рдбреЗрдЯрд╛ рдкреВрд▓ рдмрдирд╛рдирд╛ </h2><br><p>  Ceph рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ, kubernetes рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд▓ рдмрдирд╛рдПрдВ </p><br><pre> <code class="plaintext hljs">ceph osd pool create kube 8 8</code> </pre> <br><p>  рдпрд╣рд╛рдБ рдореИрдВ рдПрдХ рдЫреЛрдЯреА рд╕реА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░реВрдБрдЧрд╛, рд╕рдВрдЦреНрдпрд╛ 8 8 рдЕрдВрдд рдореЗрдВ pg рдФрд░ pgs рдХреА рд╕рдВрдЦреНрдпрд╛рдПрдБ рд╣реИрдВред  рдпреЗ рдорд╛рди рдЖрдкрдХреЗ ceph рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЖрдХрд╛рд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реИрдВред  рд╡рд┐рд╢реЗрд╖ рдХреИрд▓рдХреБрд▓реЗрдЯрд░ рд╣реИрдВ рдЬреЛ рдкреАрдЬреА рдФрд░ рдкреАрдЬреАрдПрд╕ рдХреА рдорд╛рддреНрд░рд╛ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реАрдл</a> рд╕реЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ <br>  рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдЗрд╕реЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдЕрдЧрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдпрд╣ рд░рд╛рд╢рд┐ рдмрдврд╝рд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ (рдЗрд╕реЗ рдХреЗрд╡рд▓ рдиреЙрдЯрд┐рд▓рд╕ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред </p><br><a name="ceph-key"></a><br><h2>  рдбреЗрдЯрд╛ рдкреВрд▓ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдирд╛ </h2><br><p>  рдирдП рдкреВрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдПрдВ </p><br><pre> <code class="plaintext hljs">ceph auth add client.kube mon 'allow r' osd 'allow rwx pool=kube'</code> </pre> <br><p>  рд╣рдо рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреБрдВрдЬреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗ, рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╣рдореЗрдВ рдПрдХ рдЧреБрдкреНрдд рдХреБрдмреЗрд░рдиреЗрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА </p><br><pre> <code class="plaintext hljs">ceph auth get-key client.kube AQDd5aldka5KJRAAkpWTQYUMQi+5dfGDqSyxkg==</code> </pre> <br><h2>  рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреБрдВрдЬреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ </h2><br><p>  рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреБрдВрдЬреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">ceph auth get client.admin 2&gt;&amp;1 |grep "key = " |awk '{print $3'} AQAv+Itdx4DwKBAAKVhWRS3+eEPqV3Xrnlg9KA==</code> </pre> <br><p>  <strong>Ceph рдХреНрд▓рд╕реНрдЯрд░ рдкрд░, рд╕рднреА рдХрд╛рдо рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЕрдм рд╣рдореЗрдВ рдПрдХ рдорд╢реАрди рдкрд░ рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреА рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ</strong> <br>  рдореИрдВ рдкрд╣рд▓реЗ рдкреНрд░рдХрд╛рд╢рди рдореЗрдВ рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рддреИрдирд╛рдд рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдорд╛рд╕реНрдЯрд░-рдЯреЗрд╕реНрдЯ (10.73.71.25) рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реВрдВрдЧрд╛ред </p><br><a name="kubernetes-secrets"></a><br><h2>  рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдЧреБрдкреНрдд рдмрдирд╛рдирд╛ </h2><br><p>  рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЧрдП рдХреНрд▓рд╛рдЗрдВрдЯ рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ (рдЗрд╕реЗ рдЕрдкрдиреЗ рдЯреЛрдХрди рд╕реЗ рдмрджрд▓рдирд╛ рди рднреВрд▓реЗрдВ) </p><br><pre> <code class="plaintext hljs">echo AQDd5aldka5KJRAAkpWTQYUMQi+5dfGDqSyxkg== &gt; /tmp/key.client</code> </pre> <br><p>  рдФрд░ рдПрдХ рд░рд╣рд╕реНрдп рдмрдирд╛рдПрдВ рдЬрд┐рд╕реЗ рд╣рдо рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ </p><br><pre> <code class="plaintext hljs">kubectl create secret generic ceph-secret --from-file=/tmp/key.client --namespace=kube-system --type=kubernetes.io/rbd</code> </pre> <br><h2>  рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЧреБрдкреНрдд рдмрдирд╛рдПрдБ </h2><br><p>  рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ (рдЗрд╕реЗ рдЕрдкрдиреЗ рдЯреЛрдХрди рд╕реЗ рдмрджрд▓рдирд╛ рди рднреВрд▓реЗрдВ) </p><br><pre> <code class="plaintext hljs">echo AQAv+Itdx4DwKBAAKVhWRS3+eEPqV3Xrnlg9KA== &gt; /tmp/key.admin</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж рдПрдХ рдПрдбрдорд┐рди рд╕реАрдХреНрд░реЗрдЯ рдмрдирд╛рдПрдВ </p><br><pre> <code class="plaintext hljs">kubectl create secret generic ceph-admin-secret --from-file=/tmp/key.admin --namespace=kube-system --type=kubernetes.io/rbd</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд░рд╣рд╕реНрдп рдмрдирд╛рдП рдЧрдП рд╣реИрдВ </p><br><pre> <code class="plaintext hljs">kubectl get secret -n kube-system | grep ceph ceph-admin-secret kubernetes.io/rbd 1 8m31s ceph-secret kubernetes.io/rbd 1 7m32s</code> </pre> <br><a name="kubernetes-provisioner"></a><br><h2>  рд╡рд┐рдзрд┐ рдкрд╣рд▓реЗ ceph rbd рдкреНрд░реЛрд╡рд┐рдЬрд╝рдирд░ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ </h2><br><p>  рд╣рдо рдХреБрддреБрд░реНрдиреЗрдЯреНрд╕-рдЗрдирдХреНрдпреВрдмреЗрдЯрд░ / рдПрдХреНрд╕рде-рд╕реНрдЯреЛрд░реЗрдЬ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдЬреАрдердм рд╕реЗ рдХреНрд▓реЛрди рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рдореЗрдВ рд╡рд╣ рд╕рдмрдХреБрдЫ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╕реАрдлрд╣ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рд╛рде рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">git clone https://github.com/kubernetes-incubator/external-storage.git cd external-storage/ceph/rbd/deploy/ NAMESPACE=kube-system sed -r -i "s/namespace: [^ ]+/namespace: $NAMESPACE/g" ./rbac/clusterrolebinding.yaml ./rbac/rolebinding.yaml</code> </pre> <br><pre> <code class="plaintext hljs">kubectl -n $NAMESPACE apply -f ./rbac</code> </pre> <br><p>  рдирд┐рд╖реНрдХрд░реНрд╖ </p><br><pre> <code class="plaintext hljs">clusterrole.rbac.authorization.k8s.io/rbd-provisioner created clusterrolebinding.rbac.authorization.k8s.io/rbd-provisioner created deployment.extensions/rbd-provisioner created role.rbac.authorization.k8s.io/rbd-provisioner created rolebinding.rbac.authorization.k8s.io/rbd-provisioner created serviceaccount/rbd-provisioner created</code> </pre> <br><h2>  рд╡рд┐рдзрд┐ рджреЛ: рдХреНрдпреВрдм-рдирд┐рдпрдВрддреНрд░рдХ-рдкреНрд░рдмрдВрдзрдХ рдЫрд╡рд┐ рдХреЛ рдмрджрд▓реЗрдВ </h2><br><p>  рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдХреНрдпреВрдм-рдирд┐рдпрдВрддреНрд░рдХ-рдкреНрд░рдмрдВрдзрдХ рдЫрд╡рд┐ рдореЗрдВ рдХреЛрдИ рдЖрд░рдмреАрдбреА рд╕рдорд░реНрдерди рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдирд┐рдпрдВрддреНрд░рдХ-рдкреНрд░рдмрдВрдзрдХ рдЫрд╡рд┐ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред <br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдХреБрдмреЗрд░рдиреЗрдЯ рд╡рд┐рдЬрд╛рд░реНрдб рдкрд░, рдЖрдкрдХреЛ рдХреНрдпреВрдм-рдХрдВрдЯреНрд░реЛрд▓рд░-рдореИрдиреЗрдЬрд░.рдЗрдорд╛рдЗрд▓ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдФрд░ gcr.io/google_containers/hyperkube:v1.1.1.2 рдХреЗ рд╕рд╛рде рдЫрд╡рд┐ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЫрд╡рд┐ рдХреЗ рдЙрд╕ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ рдЬреЛ рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЖрдкрдХреЗ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><pre> <code class="plaintext hljs">vim /etc/kubernetes/manifests/kube-controller-manager.yaml</code> </pre> <br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдХреНрдпреВрдм-рдХрдВрдЯреНрд░реЛрд▓рд░-рдореИрдиреЗрдЬрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдирд╛ рд╣реЛрдЧрд╛ </p><br><pre> <code class="plaintext hljs">ubectl get pods -A | grep manager kube-system kube-controller-manager-master01-test 1/1 Running 0 5m54s kube-system kube-controller-manager-master02-test 1/1 Running 0 5m54s kube-system kube-controller-manager-master03-test 1/1 Running 9111 103d</code> </pre> <br><p>  рдлрд▓реА рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реБрдЖ, рддреЛ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдЯрд╛рдиреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред </p><br><pre> <code class="plaintext hljs">kubectl delete pod -n kube-system kube-controller-manager-master01-test kubectl delete pod -n kube-system kube-controller-manager-master02-test kubectl delete pod -n kube-system kube-controller-manager-master03-test</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ </p><br><pre> <code class="plaintext hljs">kubectl describe pod -n kube-system kube-controller-manager-master02-test | grep Image: Image: gcr.io/google_containers/hyperkube:v1.15.2</code> </pre> <br><p>  - </p><br><a name="storage-class"></a><br><h2>  рднрдВрдбрд╛рд░рдг рд╡рд░реНрдЧ рдмрдирд╛рдирд╛ </h2><br><p>  <strong>рд╡рд┐рдзрд┐ рдПрдХ - рдпрджрд┐ рдЖрдкрдиреЗ рдкреНрд░рд╛рд╡рдзрд╛рди ceph.com/rbd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ</strong> <br>  рд╣рдорд╛рд░реЗ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдПрдХ рдпрдорд▓ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдиреАрдЪреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХреА рдЧрдИ рд╕рднреА рдлрд╛рдЗрд▓реЗрдВ ceph рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдВ рдореЗрд░реЗ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ </p><br><pre> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./storage-class.yaml kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: ceph-rbd provisioner: ceph.com/rbd parameters: monitors: 10.73.88.52:6789, 10.73.88.53:6789, 10.73.88.54:6789 pool: kube adminId: admin adminSecretNamespace: kube-system adminSecretName: ceph-admin-secret userId: kube userSecretNamespace: kube-system userSecretName: ceph-secret imageFormat: "2" imageFeatures: layering EOF</code> </pre> <br><p>  рдФрд░ рдЙрд╕реЗ рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдореНрдмреЗрдб рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">kubectl apply -f storage-class.yaml</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ </p><br><pre> <code class="plaintext hljs">kubectl get sc NAME PROVISIONER AGE ceph-rbd ceph.com/rbd 7s</code> </pre> <br><p>  <strong>рд╡рд┐рдзрд┐ рджреЛ - рдпрджрд┐ рдЖрдкрдиреЗ рдкреНрд░рд╛рд╡рдзрд╛рди kubernetes.io/rbd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ</strong> <br>  рд╕реНрдЯреЛрд░реЗрдЬ-рдХреНрд▓рд╛рд╕ рдмрдирд╛рдПрдВ </p><br><pre> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./storage-class-hyperkube.yaml kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: ceph-rbd provisioner: kubernetes.io/rbd allowVolumeExpansion: true parameters: monitors: 10.73.88.52:6789, 10.73.88.53:6789, 10.73.88.54:6789 pool: kube adminId: admin adminSecretNamespace: kube-system adminSecretName: ceph-admin-secret userId: kube userSecretNamespace: kube-system userSecretName: ceph-secret imageFormat: "2" imageFeatures: layering EOF</code> </pre> <br><p>  рдФрд░ рдЙрд╕реЗ рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдореНрдмреЗрдб рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">kubectl apply -f storage-class-hyperkube.yaml storageclass.storage.k8s.io/ceph-rbd created</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ </p><br><pre> <code class="plaintext hljs">kubectl get sc NAME PROVISIONER AGE ceph-rbd kubernetes.io/rbd 107s</code> </pre> <br><a name="test"></a><br><h2>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ + рд╕реЗрдлрд╝ рд▓рд┐рдЧрд╛рдореЗрдВрдЯ рдЯреЗрд╕реНрдЯ </h2><br><p>  Ceph + kubernetes рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ EVERY рд╡рд░реНрдХрдХреЛрдб рдкрд░ ceph-common рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="plaintext hljs">apt install curl apt-transport-https -y curl https://mirror.croit.io/keys/release.gpg &gt; /usr/share/keyrings/croit-signing-key.gpg echo 'deb [signed-by=/usr/share/keyrings/croit-signing-key.gpg] https://mirror.croit.io/debian-mimic/ stretch main' &gt; /etc/apt/sources.list.d/croit-ceph.list apt update apt install ceph-common</code> </pre> <br><p>  рдПрдХ yaml рдлрд╝рд╛рдЗрд▓ PersistentVolumeClaim рдмрдирд╛рдПрдБ </p><br><pre> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./claim.yaml kind: PersistentVolumeClaim apiVersion: v1 metadata: name: claim1 spec: accessModes: - ReadWriteOnce storageClassName: ceph-rbd resources: requests: storage: 1Gi EOF</code> </pre> <br><p>  рдЙрд╕реЗ рдорд╛рд░ рдбрд╛рд▓реЛ </p><br><pre> <code class="plaintext hljs">kubectl apply -f claim.yaml</code> </pre> <br><p>  рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ PersistentVolumeClaim рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">bectl get pvc NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE claim1 Bound pvc-d1e47825-289c-4201-acb8-033e62a3fe81 1Gi RWO ceph-rbd 44m</code> </pre> <br><p>  рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ PersistentVolume рднреА рдмрдирд╛рдпрд╛ред </p><br><pre> <code class="plaintext hljs">kubectl get pv NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE pvc-d1e47825-289c-4201-acb8-033e62a3fe81 1Gi RWO Delete Bound default/claim1 ceph-rbd 37m</code> </pre> <br><p>  рдЪрд▓реЛ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдкреЙрдб рдмрдирд╛рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдирд┐рд░реНрдорд┐рдд рдкреАрд╡реАрд╕реА рдХреЛ / mnt рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд░рддреЗ рд╣реИрдВред  "Hello World!" рдкрд╛рда рдХреЗ рд╕рд╛рде рдЗрд╕ рдлрд╝рд╛рдЗрд▓ /mnt/test.txt рдХреЛ рдЪрд▓рд╛рдПрдВред </p><br><pre> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./create-file-pod.yaml kind: Pod apiVersion: v1 metadata: name: create-file-pod spec: containers: - name: test-pod image: gcr.io/google_containers/busybox:1.24 command: - "/bin/sh" args: - "-c" - "echo Hello world! &gt; /mnt/test.txt &amp;&amp; exit 0 || exit 1" volumeMounts: - name: pvc mountPath: "/mnt" restartPolicy: "Never" volumes: - name: pvc persistentVolumeClaim: claimName: claim1 EOF</code> </pre> <br><p>  рд╣рдо рдЙрд╕реЗ рдорд╛рд░ рджреЗрдВрдЧреЗ рдФрд░ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдЙрд╕рдиреЗ рдЕрдкрдирд╛ рдХрд╛рд░реНрдп рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ </p><br><pre> <code class="plaintext hljs">kubectl apply -f create-file-pod.yaml kubectl get pods -w</code> </pre> <br><p>  рдЪрд▓реЛ рд╕реНрдерд┐рддрд┐ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">create-file-pod 0/1 Completed 0 16s</code> </pre> <br><p>  рдЪрд▓реЛ рдПрдХ рдФрд░ рдмрдирд╛рддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реА рдорд╛рддреНрд░рд╛ рдХреЛ рдЙрд╕рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА / mnt / рдкрд░реАрдХреНрд╖рдг рдореЗрдВ, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдкрд╣рд▓реА рдорд╛рддреНрд░рд╛ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдЬрдЧрд╣ рдореЗрдВ рд╣реИ </p><br><pre> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./test-pod.yaml kind: Pod apiVersion: v1 metadata: name: test-pod spec: containers: - name: test-pod image: gcr.io/google_containers/busybox:1.24 command: - "/bin/sh" args: - "-c" - "sleep 600" volumeMounts: - name: pvc mountPath: "/mnt/test" restartPolicy: "Never" volumes: - name: pvc persistentVolumeClaim: claimName: claim1 EOF</code> </pre> <br><p>  рд░рди рдХреБрдмреЗрдХреЗрд▓ рдкреЛ -w рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ рдкреЙрдб рдЪрд▓рдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ <br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЪрд▓реЛ рдЙрд╕ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рд╡реЙрд▓реНрдпреВрдо рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ рдФрд░ рд╣рдорд╛рд░реА рдлрд╝рд╛рдЗрд▓ / mnt / рдкрд░реАрдХреНрд╖рдг рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╣реИ </p><br><pre> <code class="plaintext hljs">kubectl exec test-pod -ti sh cat /mnt/test/test.txt Helo world!</code> </pre> <br><p>  рдЕрдВрдд рддрдХ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред  рдкреЛрд╕реНрдЯрд┐рдВрдЧ рдореЗрдВ рджреЗрд░реА рдХреЗ рд▓рд┐рдП рдХреНрд╖рдорд╛ рдХрд░реЗрдВред <br>  рдореИрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрджреЗрд╢ рдпрд╛ рд╕рд╛рдорд╛рдЬрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╕рднреА рд╕рд╡рд╛рд▓реЛрдВ рдХреЗ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реВрдВ рдЬреЛ рдореЗрд░реЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкрд░ рдЗрдВрдЧрд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВред <br>  рдЕрдЧрд▓реЗ рдЫреЛрдЯреЗ рдкреНрд░рдХрд╛рд╢рди рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдмрдирд╛рдП рдЧрдП рд╕реАрдл рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрд╕ 3 рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рдХреИрд╕реЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рдФрд░ рдлрд┐рд░ рдкрд╣рд▓реЗ рдкреНрд░рдХрд╛рд╢рди рд╕реЗ рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ред </p><br><a name="book"></a><br><p>  рдкреНрд░рдХрд╛рд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░рдпреБрдХреНрдд рд╕рд╛рдордЧреНрд░реА </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕рд┐рдл рджрд╕реНрддрд╛рд╡реЗрдЬрд╝</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЗрд╢ рд╣реИ рддрд╕реНрд╡реАрд░реЛрдВ рдореЗрдВ рд╕реЗрдл рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Kubernetes рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕-рдЗрдирдХреНрдпреВрдмреЗрдЯрд░ / рдмрд╛рд╣рд░реА-рднрдВрдбрд╛рд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирдореВрдирд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде kubernetes-ceph-percona рднрдВрдбрд╛рд░</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi465399/">https://habr.com/ru/post/hi465399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi465379/index.html">рд╣реЛрдо-рдирд┐рд░реНрдорд┐рдд рд╡рд╛рдпрд░рд▓реЗрд╕ рд╕реНрдЯреИрдВрдб-рдЕрд▓реЛрди рдЗрдВрд╕реБрд▓рд┐рди рдкрдВрдк рдирд┐рдпрдВрддреНрд░рдг</a></li>
<li><a href="../hi465391/index.html">рд░реВрд╕реА рд╕реНрдХрд╛рд▓рд╛ рдЖрдВрджреЛрд▓рди рдХреЗ рдирдХреНрд╢реЗрдХрджрдо рдкрд░ред рднрд╛рдЧ 1</a></li>
<li><a href="../hi465393/index.html">MySensors рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдмреИрдЯрд░реА рдкрд╛рд╡рд░</a></li>
<li><a href="../hi465395/index.html">рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЗрдВрдЬреЗрдХреНрд╢рди рдФрд░ рд╕рд░реНрд╡рд┐рд╕ рд▓реЛрдХреЗрдЯрд░ рдХреЗ рдмреАрдЪ рдореБрдЦреНрдп рдЕрдВрддрд░ рдХреНрдпрд╛ рд╣реИ?</a></li>
<li><a href="../hi465397/index.html">рдирд╛рдЗрдЯреНрд░реЛ рдЕрдиреБрд╡рд╛рджрдХ рдХреИрд╕реЗ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛, рдЬреЛ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдФрд░ рддрдХрдиреАрдХреА рд╕рд╣рд╛рдпрддрд╛ рдореЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рдорджрдж рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi465401/index.html">рдХрд┐рд╕реА рднреА рдЖрдИрдЯреА рдЯреАрдо рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП 5 рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдБ</a></li>
<li><a href="../hi465403/index.html">рдЖрдХреНрдЯрдВрдЧ! рд░рд╛рдбрд╛рд░ рдФрд░ рд░рдбрд╛рд░ рдбрд┐рдЯреЗрдХреНрдЯрд░реЛрдВ рдкрд░ рд╕рдбрд╝рдХ рдкрд░ рдирдП рдХреИрдорд░реЗ рдпрд╛ рдЕрдк-рдЯреВ-рдбреЗрдЯ рдЬрд╛рдирдХрд╛рд░реА</a></li>
<li><a href="../hi465407/index.html">1. рдПрдХреНрд╕рдЯреНрд░реАрдо рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рд▓реЗрдпрд░ рд╕реНрд╡рд┐рдЪ рдХрд╛ рдЕрд╡рд▓реЛрдХрди</a></li>
<li><a href="../hi465409/index.html">Vue.js рд╡реЗрдм рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрднреНрдпрд╛рд╕</a></li>
<li><a href="../hi465415/index.html">рд╣рдо рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рднрд╛рд╖рд╛ рдореЗрдВ DevOps рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>