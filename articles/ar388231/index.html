<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚠️ 🧚 🥐 بروتوكول MQTT ومشروع العميل المفتوح MQTT على دلفي 👩🏽‍🏫 👩🏾‍🤝‍👨🏼 👩🏽‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يستخدم بروتوكول MQTT للمراسلة على إنترنت الأشياء. بادئ ذي بدء ، إنه مثير للاهتمام لأنه مدعوم من أكبر مزودي الخدمات السحابية ، مثل IBM و Microsoft و Am...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>بروتوكول MQTT ومشروع العميل المفتوح MQTT على دلفي</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388231/"><img align="left" src="https://habrastorage.org/files/335/d26/6d4/335d266d4c4943fcb2b3dd3c3aec0cef.png"><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يستخدم</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
بروتوكول </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">MQTT</font></a><font style="vertical-align: inherit;"> للمراسلة على إنترنت الأشياء. </font><font style="vertical-align: inherit;">بادئ ذي بدء ، إنه مثير للاهتمام لأنه مدعوم من أكبر مزودي الخدمات السحابية ، مثل IBM و Microsoft و Amazon. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكنك الحصول على حساب في هذه الخدمات مجانًا ، وإعداد خدمة لاستقبال رسائل MQTT هناك ومشاهدة حياة أجهزتك من خلال هذه الخدمات ، على سبيل المثال ، في منزل ذكي. </font><font style="vertical-align: inherit;">أيضًا ، من خلال هذه الخدمات ، يمكن للأجهزة التواصل مع بعضها البعض. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم تضمين عرض توضيحي لاتصال العميل بخدمة MQTT من سحابة IBM Bluemix.</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وصف قصير.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MQTT بدائية للغاية: مع رأس قصير ، بدون تحكم في السلامة ، لا تفرض أي قيود على الهيكل أو التشفير أو مخطط البيانات. </font><font style="vertical-align: inherit;">الشرط الوحيد للبيانات في كل رزمة هو أنه يجب أن يكون مصحوبًا بمعرف لقناة المعلومات. </font><font style="vertical-align: inherit;">يسمى هذا المعرف في المواصفات اسم الموضوع أو موضوع أبسط. </font><font style="vertical-align: inherit;">يتم إرسال البيانات إلى الحزم عبر TCP. </font><font style="vertical-align: inherit;">يمكن أن تكون كمية البيانات في حزمة من بايت واحد إلى 268،435،455 بايت. </font><font style="vertical-align: inherit;">مرن جدا! </font><font style="vertical-align: inherit;">على الرغم من أن الخدمات السحابية العامة تفرض قيودًا أكثر صرامة ، تصل إلى عدة كيلوبايت.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يتطلب بروتوكول MQTT وسيط بيانات. </font><font style="vertical-align: inherit;">هذه هي الفكرة المركزية للتكنولوجيا. </font><font style="vertical-align: inherit;">ترسل جميع الأجهزة البيانات فقط إلى الوسيط وتستقبل البيانات منه فقط. </font><font style="vertical-align: inherit;">الوسيط هو برنامج يعمل كخادم TCP مع قاعدة بيانات ديناميكية.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تحتوي قاعدة بيانات الوسيط على وجه الخصوص على جدول يحتوي على جميع الحزم المستلمة مع الفهرسة حسب مواضيع هذه الحزم. </font><font style="vertical-align: inherit;">عند استلام الحزمة ، يرسلها الوسيط إلى جميع الأجهزة على الشبكة وفقًا لاشتراكهم. </font><font style="vertical-align: inherit;">لكي يستقبل الجهاز شيئًا من الوسيط ، يجب عليه الاشتراك في الموضوع. </font><font style="vertical-align: inherit;">تنشأ الموضوعات ديناميكيًا عند الاشتراك أو عند وصول حزمة مع هذا الموضوع. </font><font style="vertical-align: inherit;">يمكنك أيضًا إلغاء الاشتراك في الموضوع. </font><font style="vertical-align: inherit;">وبالتالي ، تعد المواضيع آلية مناسبة لتنظيم العلاقات من أنواع مختلفة: واحد لكثير ، كثير لواحد ، والعديد للكثير. </font><font style="vertical-align: inherit;">إذا كانت الحزمة لا تحتوي على مشترك ، يتم التخلص منها. </font><font style="vertical-align: inherit;">إذا لم يكن المشترك متصلاً ، فسيتم حذف الحزمة على الفور في قاعدة بيانات الوسيط ، أو أنها تنتظر المشترك للاتصال لبعض الوقت المحدد في التكوين. </font><font style="vertical-align: inherit;">يتم تحديد السلوك بواسطة سمة QoS للحزمة.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ما هو المهم هنا أيضا.</font></font></h1> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• الأجهزة هي أول من يقيم اتصالاً مع وسيط. على سبيل المثال قد تكون الأجهزة موجودة خلف مترجمين لعناوين الشبكة (NAT) وقد لا تحتوي على عناوين IP ثابتة وهذا لن يتداخل مع الاتصال. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• يمكن استخدام SSL لتشفير حركة المرور. ولكن يمكنك العمل بدون SSL حتى مع خدمات IBM ، مما يجعل التصحيح أسهل. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• في الحالات الصعبة للغاية ، يسمح لك وسطاء MQTT بالاتصال بهم من خلال بروتوكول WebSocket على المنفذ 80. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• يمكن أيضًا تغيير منفذ بروتوكول MQTT القياسي بشكل تعسفي. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• يمكن وضع كل من العميل / العملاء مع واجهة مستخدم رسومية ووسيط على نفس جهاز الكمبيوتر. على سبيل المثال يمكن أن يكون الحل محليًا تمامًا وقابل للتوسع العالمي بنقرة واحدة.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• يمكن للوسطاء المختلفين التواصل مع بعضهم البعض من خلال الاشتراك في الرسائل من بعضهم البعض. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• مفهوم المواضيع يتناسب بشكل جيد مع تقنية قاعدة بيانات NoSQL. </font><font style="vertical-align: inherit;">لنفس الغرض ، تشجع الخدمات السحابية المستخدمين على استخدام ترميز بيانات JSON.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مشاريع مفتوحة</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
اختيار وسطاء MQTT كبير للغاية. ولكن الغريب أنه لا يوجد عمليا أي عملاء مناسبين مع واجهة مستخدم نافذة تحت Windows. ومثل هذا العميل لإتقان بروتوكول MQTT ضروري ببساطة لأن هناك العديد من الفروق العملية الدقيقة لعمل الوسطاء بما يتجاوز المواصفات وكلهم بحاجة إلى الدراسة والاختبار بطريقة ما. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تقرر تنفيذ عميل MQTT على دلفي. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن لـ Google for Delphi تقديم مكون TMQTTClient فقط. لكن هذا عنصر قديم ولا يعمل. من الصعب للغاية دمج معظم العملاء الآخرين المكتوبين بلغة Java و Erlang و Haskell و Javscript في دلفي. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وجدت المشروع المناسب الوحيد - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مكتوب بلغة C-i خالصة. </font><font style="vertical-align: inherit;">يجمع لأنظمة التشغيل المختلفة. </font><font style="vertical-align: inherit;">لديها مخطوطات توليد المشروع لبرنامج Visual Studio. </font><font style="vertical-align: inherit;">عند الخروج تحت Windows ، نحصل على ملفات dll مع تنفيذ وظائف العميل والوسيط. </font><font style="vertical-align: inherit;">استخدام C مشجع من حيث السرعة. </font><font style="vertical-align: inherit;">والمكتبات الديناميكية المكتوبة بلغة C تتصل بسهولة ببرامج دلفي. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تعتبر دلفي نفسها ، ممثلة بـ Embarcadero RAD Studio XE8 ، أداة قوية جدًا لإنشاء واجهات مستخدم مرنة ومريحة لنظام Windows ، خاصة إذا كانت مجهزة بـ DevExpress ، TeeChart ، RxLib ، FireDAC ، إلخ.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الأدوات اللازمة</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
سنحتاج إلى بيئة تطوير </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS Visual Studio 2015</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ستقوم بتجميع مشروع </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">البعوض</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وجميع المشاريع الداعمة التي يعتمد عليها </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">البعوض</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . بدلاً من ذلك ، </font><font style="vertical-align: inherit;">يمكن تجميع </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لنظام </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التشغيل Windows</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> باستخدام حزمة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cygwin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، ولكن بدا Visual Studio أكثر ملاءمة. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لإنشاء ملفات مشروع Visual Studio ، تحتاج إلى تنزيل الأداة المساعدة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cmake وتثبيتها</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . المصدر </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake.org</font></font></a></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
وبالطبع تحتاج إلى </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAD Studio XE8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . بالإضافة إلى ذلك ، في RAD Studio ، يجب تثبيت </font><font style="vertical-align: inherit;">إصدار </font><font style="vertical-align: inherit;">حزمة مكون </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevExpress VCL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لا يقل عن </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.2.2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">على الرغم من أن هذا ليس له أهمية أساسية ، يمكن إعادة تصميم واجهة المستخدم بسهولة لمكونات RAD Studio القياسية.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إجراء تثبيت البرنامج</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يعتمد Mosquitto على العديد من مشاريع الجهات الخارجية ، وهي: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL v 1.0.2e</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . المصدر - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://slproweb.com/download/Win32OpenSSL-1_0_2e.exe</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
• </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pthreads v 2.9.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . المصدر - </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ftp://sourceware.org/pub/pthreads-win32/pthreads-w32-2-9-1-release.zip</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
• </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libwebsockets v 1.4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . المصدر - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/warmcat/libwebsockets</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
قم بتنزيل هذه المشاريع. </font><font style="vertical-align: inherit;">لا </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نقوم</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بتجميع </font><b><font style="vertical-align: inherit;">OpenSSL</font></b><font style="vertical-align: inherit;"> ، ولكننا نأخذ الملفين الضروريين على الفور من هناك: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libeay32.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssleay32.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> من دليل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . غالبًا ما يحدث أنها مثبتة بالفعل على الكمبيوتر من مشاريع أخرى. يجب التحقق من ذلك. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pthreads</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نحن لا نقوم أيضًا </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بالترجمة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، لكننا نأخذ ملف </font><b><font style="vertical-align: inherit;">pthreadVC2.dll</font></b><font style="vertical-align: inherit;"> المترجمة بالفعل </font><font style="vertical-align: inherit;">من دليل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dll \ x86</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">يأتي </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libwebsockets</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بدون ملفات مجمعة مسبقًا وبدون مشروع لبرنامج Visual Studio ، ولكنه يحتوي على ملف تكوين </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . في هذه الحالة ، باستخدام الأداة المساعدة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cmake</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، </font><b><font style="vertical-align: inherit;">نقوم</font></b><font style="vertical-align: inherit;"> بإنشاء ملف مشروع Visual Studio في دليل منفصل (دليل libwebsockets_VS_proj). ثم فتح ملف المشروع الذي تم إنشاؤه في Visual Studio نقوم بتجميعه. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نحصل على</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ملف </font><b><font style="vertical-align: inherit;">websockets.dll الذي</font></b><font style="vertical-align: inherit;"> نحتاج </font><b><font style="vertical-align: inherit;">إليه</font></b><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعد كل الخطوات السابقة ، يمكنك تجميع مشروع </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">البعوض</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. هنا ، تحتاج أولاً إلى إنشاء ملف مشروع Visual Studio (دليل Mosquitto_VS_proj) من ملف التكوين </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المرفق </font><font style="vertical-align: inherit;">. لا يعمل المشروع الذي تم إنشاؤه تمامًا ، سيكون عليك تغيير المسارات إلى بعض ملفات الرأس والمكتبات الخارجية ، وتضمين بعض وحدات الماكرو في المشروع ، وتعديل النصوص المصدر قليلاً. نتيجة لذلك ، نحصل على ملف </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من أجل البساطة ، يتم تضمين جميع الملفات وبنية الدليل مع المشاريع المذكورة في ملف الأرشيف المرفق بالمقال. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إلى جانب مكتبة العميل ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يعطينا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تجميع مشروع </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">Mosquitto</font></a><font style="vertical-align: inherit;"> الملف القابل للتنفيذ من وسيط </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">mosquitto.exe</font></b><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وبالتالي ، نحصل على الفور على كل من العميل ووسيط MQTT ، أي </font><font style="vertical-align: inherit;">كل ما تحتاجه تقريبًا لتنظيم إنترنت فعال للأشياء.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنشاء مشروع عميل MQTT في دلفي</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لدمج مكتبة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.dll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في دلفي ، </font><font style="vertical-align: inherit;">تحتاج إلى إنشاء وحدة إعلانات تعريفات وظيفة مكتبة على </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Object Pascal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">للقيام بذلك، وقد تم إجراء تحويل ملف </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mosquitto.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ملف </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MOSQUITTO.PAS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مشروع العميل بسيط للغاية ، ويتكون من 4 ملفات مصدر فقط. </font><font style="vertical-align: inherit;">يوضح العميل الاتصال والفصل ، وتشكيل وصية ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Will</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ، وإرسال البيانات مع حزمة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUBLISH إلى</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الوسيط ، وتلقي البيانات مع حزمة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUBLISH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> من الوسيط ، والاشتراك وإلغاء الاشتراك.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يحفظ البرنامج جميع سمات الاتصال ، المشار إليها بمصطلح الملف الشخصي في جدول ملف التعريف المخزن على القرص. </font><font style="vertical-align: inherit;">يتم أيضًا حفظ سجلات حزم </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">النشر</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المستلمة والمرسلة على القرص بشكل منفصل </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">طريقة استخدام العميل</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
قم بتشغيل الملف </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMQTTC.exe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من أجل أن يكون هناك شخص لإيصال فريق وسيط اختبار المدى </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run_mosquitto.cmd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في دليل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto_1_4_5_bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . للراحة ، يتم تكوين الوسيط للاتصال بدون </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> والتحقق من كلمة المرور. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
املأ الحقول كما في لقطة الشاشة. </font></font><br>
<br>
<img width="1000" src="https://habrastorage.org/files/6df/303/805/6df303805cb246feb6acc16236e0277a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كلمة المرور واسم المستخدم اختياريان. في المستكشف ، انقر فوق زر الالتزام لحفظ البيانات في الجدول. ثم انقر فوق زر </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الاتصال</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعد الاتصال ، تصبح أوامر النشر والاشتراك متاحة. أوامر </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> العميل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يولد تلقائيا.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لكي يحصل العميل على شيء ما ، يجب عليك مرة أخرى تشغيل برنامج </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMQTTC.exe بمعرف</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> عميل مختلف </font><b><font style="vertical-align: inherit;">واشتراك</font></b><font style="vertical-align: inherit;"> عميل واحد لتلقي البيانات من آخر.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اتصل بـ IBM Bluemix</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أول شيء تفعله هو الحصول على حساب في </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
بعد استلام الحساب ، ننتقل إلى لوحة التحكم الخاصة بنا على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . هنا يجب عليك التبديل فورًا إلى منطقة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جنوب الولايات المتحدة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . للقيام بذلك ، انقر فوق رمز الحساب في الزاوية العلوية اليمنى وقم بتغيير القيمة في حقل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المنطقة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . هناك ثلاث مناطق في المجموع ، ولكن </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جنوب الولايات المتحدة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يمنحك الفرصة لتجربة معظم الخدمات. بعد ذلك ، قم بإنشاء </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مساحة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . يجب أن تبدو الشاشة مثل crinshot أدناه. هنا ، يتم إنشاء منظمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEMSYS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Space </font></font></b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEMSYS SPACE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img width="800" src="https://habrastorage.org/files/e8e/a9d/daf/e8ea9ddaf89c47b299f6766b5012948c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
انقر الآن على </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CATALOG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في القائمة العلوية. ننزل إلى الأسفل ونختار</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مؤسسة إنترنت الأشياء</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img width="800" src="https://habrastorage.org/files/b34/edd/4d1/b34edd4d15b848cb9a70d5b53a218538.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لا نغير الحقول المقترحة افتراضيًا </font><b><font style="vertical-align: inherit;">وننقر</font></b><font style="vertical-align: inherit;"> على </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنشاء </font></font></b><br>
<img width="800" src="https://habrastorage.org/files/615/b4f/d12/615b4fd125b44adebeba93ec77725d8e.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مؤسسة إنترنت الأشياء</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - وهي خدمة تتضمن وسيط </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وواجهة المستخدم الخاصة به. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعد الإنشاء في النافذة التي تظهر ، انقر فوق الزر المسمى </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch dashboard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img width="800" src="https://habrastorage.org/files/b9e/00f/6e1/b9e00f6e1f7d4381ab7d95220998f722.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذه هي لوحة تحكم إنترنت الأشياء. الآن نحن بحاجة إلى إنشاء أجهزة. انقر فوق </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إضافة جهاز</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . في مربعات الحوار التي تظهر ، قم بإنشاء نوع الجهاز ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنشاء نوع الجهاز</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). أعطه الاسم Type1 ، لا تملأ الحقول المتبقية من أجل البساطة. انقر فوق التالي -&gt; التالي -&gt; إنشاء -&gt; التالي. قم بتسمية الجهاز Device1. التالي التالي -&gt; التالي -&gt; التالي -&gt; إضافة. نتيجة لذلك ، نحصل على النافذة التالية:</font></font><br>
<img width="800" src="https://habrastorage.org/files/ce8/dcc/0b2/ce8dcc0b2a7f41d39f1545be3a0ee014.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كل شيء هنا لدينا كل المتطلبات لربط جهاز الاول ل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> سيط </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
سنختبر ما إذا كان عميلنا يمكنه الاتصال به. أدخل التفاصيل في نافذة العميل. </font></font><br>
<img width="1000" src="https://habrastorage.org/files/23e/469/94b/23e46994b94b4621b8aeb93a17fd5c5e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كما ترى ، اتصل العميل بنجاح بـ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . هنا يجب الانتباه إلى اسم المضيف. يبدأ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بمعرف المؤسسة الذي</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تم الحصول عليه عند إنشاء مؤسسة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنترنت الأشياء</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . حقل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معرف المستخدم</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مركب أيضًا ويتم ترميزه على النحو التالي: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organization ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;: &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device Type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;: &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;. </font><font style="vertical-align: inherit;">يحتوي </font><font style="vertical-align: inherit;">حقل </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اسم المستخدم</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> على سلسلة ثابتة</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استخدام رمز المصادقة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">لا يمكن أن تحتوي </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مواضيع الرسائل لشركة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluemix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> broker </font><font style="vertical-align: inherit;">، على عكس وسيط </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mosquitto ،</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> على بيانات عشوائية. </font><font style="vertical-align: inherit;">يتم ترميزها وفقًا لقواعد معينة. </font><font style="vertical-align: inherit;">يجب دراسة هذه القواعد في توثيق مؤسسة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنترنت الأشياء</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">تُظهر لقطة الشاشة أحد الموضوعات الصالحة المحتملة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مستودع المشروع: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Indemsys/Delphi_MQTT_mosquitto</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar388231/">https://habr.com/ru/post/ar388231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar388221/index.html">سيجيت: ستبقى Winchesters معنا لمدة 20 عامًا أخرى</a></li>
<li><a href="../ar388223/index.html">مذكرات روبوت غير آدمي ، الفصول 1-2 ، المحاولة الثانية</a></li>
<li><a href="../ar388225/index.html">ما هو علم البلورات التطوري ولماذا المستقبل وراءه. فقط معقدة</a></li>
<li><a href="../ar388227/index.html">البحث المعلوماتي: متجر إلكتروني للعام الجديد عبر الإنترنت</a></li>
<li><a href="../ar388229/index.html">استخدام iRidium للتحكم في أنظمة الأتمتة القائمة على بروتوكول Z-Wave</a></li>
<li><a href="../ar388233/index.html">السفر عبر روسيا الإلكترونية الدقيقة (الجزء الأكاديمي)</a></li>
<li><a href="../ar388235/index.html">اقترحت فولكس واجن تدابير تصحيحية لمحركات الديزل التي اعتمدها المسؤولون الأوروبيون</a></li>
<li><a href="../ar388237/index.html">أقامت شرطة المملكة المتحدة "عصابة كاريوكي" مؤلفة من ثلاثة من عشاق الكاريوكي المسنين</a></li>
<li><a href="../ar388241/index.html">لماذا تقوم الشركات بإجراء الاكتتابات العامة: إيجابيات وسلبيات</a></li>
<li><a href="../ar388243/index.html">المراقبة المنزلية والمشاهدة عن بعد عبر الإنترنت</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>