<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍⚕️ 💨 👨🏿‍🌾 使用故障转移NPS在Cisco交换机上配置802.1X（带有AD的Windows RADIUS） 👨🏽‍🏫 ☔️ 👩🏾‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="让我们在实践中检查Windows Active Directory + NPS（2个用于容错的服务器）+ 802.1x标准对用户（域计算机）和设备的访问控制和身份验证的使用。 您可以通过以下链接来了解Wikipedia中的标准理论： 

 由于我的“实验室”资源有限，因此NPS和域控制器的角色是兼容...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用故障转移NPS在Cisco交换机上配置802.1X（带有AD的Windows RADIUS）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443942/"><img src="https://habrastorage.org/getpro/habr/post_images/fab/761/19d/fab76119df15e93b40fdfdeb0b91156e.png" alt="图片"><br> 让我们在实践中检查Windows Active Directory + NPS（2个用于容错的服务器）+ 802.1x标准对用户（域计算机）和设备的访问控制和身份验证的使用。 您可以通过以下链接来了解Wikipedia中的标准理论： <br><br> 由于我的“实验室”资源有限，因此NPS和域控制器的角色是兼容的，但是我建议您共享此类关键服务。 <br><br> 我不知道同步Windows NPS配置（策略）的标准方法，因此我们将使用任务计划程序（作者是我的前同事）启动的PowerShell脚本。 要对域计算机和不知道如何使用<b>802.1x的设备</b> （电话，打印机等）进行身份验证，将配置组策略并创建安全组。 <br><br> 在本文的结尾，我将讨论使用802.1x的一些复杂问题-如何使用非托管交换机，动态ACL等。我将分享有关捕获到的“故障”的信息... <br><a name="habracut"></a><br> 让我们首先在Windows Server 2012R2上安装和配置故障转移NPS（2016年的一切都相同）：通过服务器管理器-&gt;添加角色和功能向导，仅选择网络策略服务器。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/b51/17f/c55b5117f0ebab8d5b10c808617418c5.png" alt="图片"><br><br> 或使用PowerShell： <br><br><pre><code class="actionscript hljs">Install-WindowsFeature NPAS -IncludeManagementTools</code> </pre> <br><blockquote> 简要说明一下-由于对于<b>受保护EAP（PEAP），</b>您肯定需要确认服务器真实性的证书（具有适当的使用权），该<b>证书</b>将在客户端计算机上被信任，因此您很可能需要安装<b>证书颁发机构</b>角色。 但是，假设您已经安装了<b>CA</b> ... </blockquote> 我们将在第二台服务器上执行相同的操作。 在两个服务器上为C：\ Scripts脚本创建一个文件夹，在第二个服务器上创建一个网络文件夹<b>\\ SRV2 \ NPS-config $</b> <br><br> 在第一台服务器上，创建具有以下内容的PowerShell脚本<i>C：\ Scripts \ Export-NPS-config.ps1</i> ： <br><br><pre> <code class="actionscript hljs">Export-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"\\SRV2\NPS-config$\NPS.xml"</span></span></code> </pre> <br> 之后，在Task Sheduler中配置任务：“ <i>Export-NpsConfiguration</i> ” <br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Export-NPS-config.ps1"</span></span></code> </pre> <br>  <i>为所有用户执行-以最高权限运行</i> <i><br></i>  <i>每天-每10分钟重复一次任务。</i>  <i>8小时内</i> <br><br> 在备用NPS上，配置导入（策略）： <br> 创建一个PowerShell脚本： <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Import-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"c:\NPS-config\NPS.xml"</span></span> &gt;&gt; C:\Scripts\Import-NPS-config.ps1</code> </pre> <br> 以及每10分钟执行一次的任务： <br><br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Import-NPS-config.ps1"</span></span></code> </pre> <br>  <i>为所有用户执行-以最高权限运行</i> <i><br></i>  <i>每天-每10分钟重复一次任务。</i>  <i>8小时内</i> <br><br> 现在，为进行验证，在其中一台服务器（！）上的NPS中将几个交换机添加到RADIUS客户端（IP和共享密钥），两个连接请求策略： <b>WIRED-Connect</b> （条件：“ NAS端口类型-以太网”）和<b>WiFi -Enterprise</b> （条件：“ NAS端口类型为IEEE 802.11”）以及<b><i>访问网络网络设备</i></b> （网络管理员）网络策略： <br><br><pre> <code class="xml hljs">:  Windows - domain\sg-network-admins :    -    (PAP, SPAP) :  RADIUS:  - Service-Type - Login    - Cisco-AV-Pair - Cisco - shell:priv-lvl=15</code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">从开关的侧面进行以下设置：</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">aaa new-model aaa local authentication attempts max-fail 5 ! ! aaa group server radius NPS server-private 192.168.38.151 auth-port 1812 acct-port 1813 key %shared_secret% server-private 192.168.10.151 auth-port 1812 acct-port 1813 key %shared_secret% ! aaa authentication login default group NPS local aaa authentication dot1x default group NPS aaa authorization console aaa authorization exec default group NPS local if-authenticated aaa authorization network default group NPS ! aaa session-id common ! identity profile default ! dot1x system-auth-control ! ! line vty 0 4 exec-timeout 5 0 transport input ssh escape-character 99 line vty 5 15 exec-timeout 5 0 logging synchronous transport input ssh escape-character 99</code> </pre> <br></div></div><br> 配置完成后，在10分钟后，所有客户端\策略\设置都应出现在备份NPS上，我们将能够使用ActiveDirectory帐户登录到交换机，该帐户是domain \ sg-network-admins组（我们预先创建）的成员。 <br><br> 让我们继续设置Active Directory-创建一个组和密码策略，创建必要的组。 <br><br> 组策略<i><b>计算机-8021x设置</b></i> ： <br><br><pre> <b><code class="plaintext hljs">Computer Configuration (Enabled) Policies Windows Settings Security Settings System Services Wired AutoConfig (Startup Mode: Automatic) Wired Network (802.3) Policies</code></b> </pre> <br><div class="spoiler">  <b class="spoiler_title">NPS-802-1x</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Name NPS-802-1x Description 802.1x Global Settings SETTING VALUE Use Windows wired LAN network services for clients Enabled Shared user credentials for network authentication Enabled Network Profile Security Settings Enable use of IEEE 802.1X authentication for network access Enabled Enforce use of IEEE 802.1X authentication for network access Disabled IEEE 802.1X Settings Computer Authentication Computer only Maximum Authentication Failures 10 Maximum EAPOL-Start Messages Sent Held Period (seconds) Start Period (seconds) Authentication Period (seconds) Network Authentication Method Properties Authentication method Protected EAP (PEAP) Validate server certificate Enabled Connect to these servers Do not prompt user to authorize new servers or trusted certification authorities Disabled Enable fast reconnect Enabled Disconnect if server does not present cryptobinding TLV Disabled Enforce network access protection Disabled Authentication Method Configuration Authentication method Secured password (EAP-MSCHAP v2) Automatically use my Windows logon name and password(and domain if any) Enabled</code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/88f/cd4/c48/88fcd4c486e62979b592d5a633270e59.png" alt="NPS-802-1x_AD政策"><br><br> 创建一个安全组<b><i>sg-computers-8021x-vl100</i></b> ，在其中将要分发的计算机添加到vlan 100并为该组先前创建的组策略配置过滤： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/5d5/11c/79b5d511c9c2551781cfa4b8b4113552.png" alt="802.1x身份验证GPO过滤"><br><br> 您可以通过打开“网络和共享中心（网络和Internet设置）-更改适配器设置（配置适配器设置）-适配器属性”来验证该策略是否已成功实施，在此处可以看到“身份验证”标签： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/2c9/6bf/d6f2c96bff36ee31b6549391c63f398a.png" alt="以太网适配器的网络访问身份验证"><br><br> 当您确信该策略已成功应用后，可以继续在NPS上配置网络策略并访问交换机端口。 <br><br> 创建网络策略<b><i>neag-computers-8021x-vl100</i></b> ： <br><br><pre> <code class="xml hljs">Conditions: Windows Groups - sg-computers-8021x-vl100 NAS Port Type - Ethernet Constraints: Authentication Methods - Microsoft: Protected EAP (PEAP) - Unencrypted authentication (PAP, SPAP) NAS Port Type - Ethernet Settings: Standard: Framed-MTU 1344 TunnelMediumType 802 (includes all 802 media plus Ethernet canonical format) TunnelPrivateGroupId 100 TunnelType Virtual LANs (VLAN)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1f9/8b9/4e3/1f98b94e3a813be72c498a4c92b71454.png" alt="802.1x身份验证网络策略"><br><br> 交换机端口的典型设置（我注意到身份验证类型为“多域”-数据和语音，并且还可以通过mac地址进行身份验证。对于“过渡时间”，使用以下参数是有意义的： <br><br><pre> <code class="actionscript hljs">authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br> 输入的ID不是“隔离区”，而是用户计算机在成功登录后应该获得的ID，直到我们确保一切正常为止。 可以在其他情况下使用相同的参数，例如，当非管理型交换机插入该端口并且您希望所有连接到该端口且未经身份验证的设备都落入某个VLAN（“隔离区”）时，可以使用相同的参数。 <br><br><div class="spoiler">  <b class="spoiler_title">802.1x主机模式多域中的交换机端口设置</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> shu des PC-IPhone_802<span class="hljs-number"><span class="hljs-number">.1</span></span>x switchport mode access switchport nonegotiate switchport voice vlan <span class="hljs-number"><span class="hljs-number">55</span></span> switchport port-security maximum <span class="hljs-number"><span class="hljs-number">2</span></span> authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication host-mode multi-domain authentication port-control auto authentication violation restrict mab dot1x pae authenticator dot1x timeout quiet-period <span class="hljs-number"><span class="hljs-number">15</span></span> dot1x timeout tx-period <span class="hljs-number"><span class="hljs-number">3</span></span> storm-control broadcast level pps <span class="hljs-number"><span class="hljs-number">100</span></span> storm-control multicast level pps <span class="hljs-number"><span class="hljs-number">110</span></span> no vtp lldp receive lldp transmit spanning-tree portfast no shu exit</code> </pre> <br></div></div><br> 您可以使用以下命令验证计算机/电话是否已成功验证： <br><br><pre> <code class="actionscript hljs">sh authentication sessions int Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span> det</code> </pre> <br> 现在，在Active Directory中为电话创建一个组（例如<i>sg-fgpp-mab</i> ），然后向其中添加一个测试设备（在我的情况下，这是<b><i>Grandstream GXP2160</i></b> ，其质量地址为<b>000b.82ba.a7b1</b> ，并且对应的帐户<b>域\ 000b82baa7b1</b> ） 。 <br><br> 对于创建的组，我们将使用以下“ <b><i>Password-Settings-for-MAB”</i></b>参数降低密码策略要求（通过Active Directory管理中心-&gt;域-&gt;系统-&gt;密码设置容器使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">细粒度密码策略</a> ）： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/998/705/0cf998705b059c03465acd6057356d91.jpg" alt="MAB设备的精细密码策略（FGPP）"><br><br> 从而允许我们使用设备的地址作为密码。 之后，我们可以为802.1x方法mab身份验证创建网络策略，我们将其称为neag-devices-8021x-voice。 参数如下： <br><br><ul><li>  NAS端口类型-以太网 </li><li>  Windows组-sg-fgpp-mab </li><li>  EAP类型：未加密身份验证（PAP，SPAP） </li><li>  RADIUS属性-供应商特定：Cisco-Cisco-AV-Pair-属性值：device-traffic-class = voice </li></ul><br> 成功认证后（不要忘记配置交换机端口），请参阅以下端口信息： <br><br><div class="spoiler">  <b class="spoiler_title">sh身份验证se int Gi1 / 0/34</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">---------------------------------------- Interface: GigabitEthernet1/0/34 MAC Address: 000b.82ba.a7b1 IP Address: 172.29.31.89 User-Name: 000b82baa7b1 Status: Authz Success Domain: VOICE Oper host mode: multi-domain Oper control dir: both Authorized By: Authentication Server Session timeout: N/A Idle timeout: N/A Common Session ID: 0000000000000EB2000B8C5E Acct Session ID: 0x00000134 Handle: 0xCE000EB3 Runnable methods list: Method State dot1x Failed over mab Authc Success</code> </pre> <br></div></div><br> 现在，按照承诺，考虑几个不太明显的情况。 例如，我们需要通过非托管交换机（交换机）连接用户的计算机\设备。 在这种情况下，其端口设置将如下所示： <br><br><div class="spoiler">  <b class="spoiler_title">802.1x主机模式多认证模式下的交换机端口设置</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GigabitEthernet1</span></span></span><span class="hljs-class">/0/1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">description</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SW</span></span></span><span class="hljs-class"> – 802.1</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> – 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mac</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">access</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonegotiate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">voice</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 55 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">security</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">maximum</span></span></span><span class="hljs-class"> 8 !  -  - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">response</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">host</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multi</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auth</span></span></span><span class="hljs-class"> ! –   </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">violation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">restrict</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mab</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pae</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authenticator</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">quiet</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tx</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">broadcast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multicast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 110 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vtp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">spanning</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tree</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">portfast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span></span></code> </pre> <br></div></div><br>  PS注意到一个非常奇怪的故障-如果设备是通过这样的开关连接的，然后被卡在受管理的开关中，则直到我们重新启动（！）开关后，它才起作用，直到我找到解决该问题的其他方法为止。 <br><br> 与DHCP有关的另一点（如果使用ip dhcp snooping）-没有此类选项： <br><br><pre> <code class="actionscript hljs">ip dhcp snooping vlan <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span> no ip dhcp snooping information option</code> </pre> <br> 由于某些原因，无法正确接收IP地址...尽管这可能是我们DHCP服务器的功能 <br><br> 而且，即使配置了按批量地址进行身份验证，Mac OS和Linux（本地支持802.1x）也尝试与用户进行身份验证。 <br><br> 在本文的下一部分中，我们将考虑对无线使用802.1x（取决于用户帐户所在的组，尽管它们将连接到相同的SSID，但我们会将其“拖放”到相应的网络（vlan）中）。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN443942/">https://habr.com/ru/post/zh-CN443942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN443926/index.html">汽车“双体船”</a></li>
<li><a href="../zh-CN443928/index.html">如何由他人负担出租车的费用-以一项服务为例的漏洞</a></li>
<li><a href="../zh-CN443934/index.html">CJDNS已死，Yggdrasil万岁</a></li>
<li><a href="../zh-CN443938/index.html">NetXMS作为懒惰的监视系统...与Zabbix的比较</a></li>
<li><a href="../zh-CN443940/index.html">如何不翻译电影标题</a></li>
<li><a href="../zh-CN443946/index.html">情况：虚拟GPU的性能并不比铁解决方案差</a></li>
<li><a href="../zh-CN443948/index.html">竞赛“我是英特尔工作室专家”，为开发人员提供超级奖品</a></li>
<li><a href="../zh-CN443950/index.html">信任，建议，建议-寻找真实的软件评论</a></li>
<li><a href="../zh-CN443952/index.html">主权互联网-为了我们的钱</a></li>
<li><a href="../zh-CN443954/index.html">技术奇异性：以进步假设为幌子的世界末日神话</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>