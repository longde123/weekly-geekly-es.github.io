<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèΩ‚Äçü§ù‚Äçüßëüèº ü§¨ üßõüèª Administre la contrase√±a del administrador local usando LAPS üïã üíÜüèø ü§∞üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uno de los problemas m√°s comunes que enfrentan casi todos los administradores de sistemas es administrar las contrase√±as de los administradores locale...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Administre la contrase√±a del administrador local usando LAPS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440624/">  Uno de los problemas m√°s comunes que enfrentan casi todos los administradores de sistemas es administrar las contrase√±as de los administradores locales. <br><br>  Hay varias opciones para resolver este problema: <br><br><ol><li>  Use una sola contrase√±a en todas las computadoras.  La contrase√±a se puede establecer durante la implementaci√≥n usando MDT o SCCM, o usando las preferencias de pol√≠tica de grupo despu√©s de la implementaci√≥n.  Por lo general, con este enfoque, la contrase√±a nunca cambia, lo que significa que se filtrar√° tarde o temprano (cuando el administrador es despedido o el usuario puede espiar la contrase√±a), mientras que la contrase√±a comprometida da acceso a todas las PC de la organizaci√≥n. </li><li>  Configuraci√≥n √∫nica de una contrase√±a √∫nica en cada PC.  Por lo general, ocurre con una implementaci√≥n.  Hay muchas opciones: desde la generaci√≥n manual de una contrase√±a aleatoria y guardarla en un sistema de contabilidad de contrase√±a (Keepass, OnePassword, Excel), que termina con la generaci√≥n autom√°tica de contrase√±a de acuerdo con un algoritmo conocido por los administradores, donde la entrada es el nombre de la PC.  Conociendo el algoritmo, el administrador puede calcular la contrase√±a en el acto e iniciar sesi√≥n en cualquier PC.  Las desventajas son aproximadamente las mismas que en la opci√≥n 1: un administrador despedido conserva la capacidad de iniciar sesi√≥n en cualquier PC, pero cuando un usuario compromete una contrase√±a, obtiene acceso a una sola PC y no a todas a la vez. </li><li>  Usando un sistema que generar√° autom√°ticamente contrase√±as aleatorias para cada PC y las cambiar√° de acuerdo con el horario establecido.  Aqu√≠ se excluyen las desventajas de las opciones anteriores: la contrase√±a comprometida se cambiar√° de acuerdo con el cronograma, y ‚Äã‚Äãel administrador despedido despu√©s de un tiempo no podr√° iniciar sesi√≥n en la PC incluso si roba la base de datos de contrase√±a v√°lida en el momento del rechazo. </li></ol><br>  Uno de estos sistemas es LAPS, cuya instalaci√≥n y configuraci√≥n discutiremos en este art√≠culo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/f92/b94/f4af92b940176f2a946994d61332cdb1.png" alt="Diagrama breve de la arquitectura LAPS"></div><a name="habracut"></a><br><h2>  Vueltas </h2><br>  LAPS significa Local Administrator Password Solution y es el sucesor de la soluci√≥n AdmPwd, que fue adquirida por Microsoft y renombrada LAPS.  LAPS es gratuito y no requiere costos de infraestructura adicionales, ya que utiliza Active Directory como base de datos.  El soporte est√° disponible a trav√©s de los Servicios de Soporte Premier de Microsoft <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina oficial del producto</a> <br><br>  El autor del AdmPwd original ha desarrollado un nuevo producto, AdmPwd.E, pero la versi√≥n gratuita est√° limitada a 20 PC, por lo que no es adecuado para todos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El sitio oficial</a> . <br><br>  LAPS viene con una extensa documentaci√≥n (solo en ingl√©s) y generalmente deja la impresi√≥n de una soluci√≥n extremadamente reflexiva y confiable. <br><br><h3>  Arquitectura </h3><br>  El sistema consta de los siguientes componentes: <br><br><ol><li>  Agente: extensi√≥n de directiva de grupo instalada en todas las PC administradas a trav√©s de MSI.  Es responsable de generar la contrase√±a y guardarla en el objeto AD correspondiente. </li><li>  M√≥dulo de PowerShell.  Se usa para configurar LAPS. </li><li>  Directorio Activo  Almacena la contrase√±a del administrador local. </li></ol><br>  Se llama al agente cada vez que se actualiza la Pol√≠tica de grupo y realiza las siguientes tareas: <br><br><ul><li>  Comprueba si la contrase√±a del administrador local ha caducado </li><li>  Genera una nueva contrase√±a si la actual ha expirado o si es necesario reemplazarla antes de la fecha de vencimiento </li><li>  Cambia la contrase√±a del administrador local. </li><li>  Guarda la contrase√±a en el atributo correspondiente del objeto AD </li><li>  Almacena la fecha de caducidad de la contrase√±a en el atributo correspondiente del objeto AD </li></ul><br>  La contrase√±a puede ser le√≠da por los administradores y tambi√©n marcada como que requiere reemplazo la pr√≥xima vez que se actualice la pol√≠tica. <br><br>  El diagrama de operaci√≥n completo de LAPS se muestra en la siguiente imagen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c4/982/d16/8c4982d16a9ec5d5e02fcf77d9936179.jpg" alt="diagrama completo de la arquitectura LAPS"><br><br><h3>  Instalar y configurar LAPS </h3><br>  Primero, instale los controles LAPS en la computadora desde la cual configuraremos. <br><br>  Inicie el paquete msi e instale todas las herramientas de Managemnt, que incluyen la interfaz de usuario LAPS, el m√≥dulo PowerShell y las plantillas de directivas de grupo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3h/xe/hb/3hxehbs0ugtewip6nhrzdsauui8.png"></div><br>  Si ha configurado un repositorio centralizado para plantillas de pol√≠ticas de grupo, transfiera inmediatamente los archivos "Admpwd.admx" y "En-us \ AdmPwd.adml" de "% SystemRoot% \ PolicyDefinitions" a "\\ contoso.com \ SYSVOL \ contoso.com \ policy \ PolicyDefinitions ". <br><br>  El siguiente paso es agregar nuevos atributos al esquema AD.  Para hacer esto, abra la consola de PowerShell en nombre de una cuenta con derechos de "Administrador de esquema" y primero importe el m√≥dulo con el comando "Importar m√≥dulo AdmPwd.PS", y luego actualice el esquema con el comando "Actualizar-AdmPwdADSchema". <br><br><img src="https://habrastorage.org/webt/o1/jq/ar/o1jqarozuzovluwbl1afjvpmxxk.png"><br><br><img src="https://habrastorage.org/webt/1p/kw/ue/1pkwuexmoemu262t84jccwt2kgi.png"><br><br>  Luego debe asegurarse de que solo los administradores tengan acceso a los atributos reci√©n creados.  Esto es necesario porque las contrase√±as se almacenan en AD de forma transparente, y el acceso a ellas est√° regulado por AD ACL.  Para hacer esto, use el comando "Find-AdmPwdExtendedrights -identity &lt;OU, donde se encuentran las cuentas de PC&gt; |  Format-Table ". <br><br><img src="https://habrastorage.org/webt/jg/nd/lp/jgndlpqpplenoeybovcokqnlmns.png"><br><br>  Este comando devuelve una lista de cuentas / grupos que tendr√°n acceso a las contrase√±as almacenadas en AD.  Si encuentra cuentas / grupos "redundantes", utilice la utilidad ADSIEdit para configurar correctamente los derechos de acceso.  Aseg√∫rese de que el permiso "Todos los derechos extendidos" no est√© marcado para grupos que no deber√≠an tener acceso a las contrase√±as. <br><br><img src="https://habrastorage.org/webt/nz/nz/f0/nznzf01echadpfwh6xwtsnwxmtq.png"><br><br>  Si desea dar acceso a las contrase√±as para grupos o cuentas adicionales, use el comando "Set-AdmPwdReadPasswordPermission -OrgUnit &lt;OU, donde se encuentran las cuentas de PC&gt; -AllowedPrincipals &lt;Usuarios o grupos&gt;". <br><br>  El siguiente comando emite los derechos de acceso para forzar el cambio de una contrase√±a no vencida durante la pr√≥xima actualizaci√≥n de la pol√≠tica de grupo: "Set-AdmPwdResetPasswordPermission -Identity &lt;OU, donde se encuentran las cuentas de PC&gt; -AllowedPrincipals &lt;Usuarios o grupos&gt;" <br><br><img src="https://habrastorage.org/webt/z4/z4/ob/z4z4obvffqv601nqauhhmtviwye.png"><br><br><img src="https://habrastorage.org/webt/xg/1r/1g/xg1r1gpc6uecgpncjve3igs0d04.png"><br><br>  Luego debe otorgar derechos a las propias computadoras para modificar estos atributos.  Para hacer esto, use el comando "Set-AdmPwdComputerSelfPermission -OrgUnit &lt;OU, donde se encuentran las cuentas de PC&gt;" <br><br><img src="https://habrastorage.org/webt/34/vj/i-/34vji-f5vqbnin0i7kt-4jtnxiw.png"><br><br>  El siguiente paso es configurar la Pol√≠tica de grupo.  Podemos controlar la complejidad y las fechas de vencimiento de las contrase√±as cuyo nombre de cuenta cambiar√°, as√≠ como activar y desactivar LAPS. <br><br><img src="https://habrastorage.org/webt/hv/1h/c9/hv1hc9jgfi9bo4g3nj9ouzzidzc.png"><br><br><img src="https://habrastorage.org/webt/_z/mi/ph/_zmiph9xzqdhcye1dn2muhzby0w.png"><br><br><img src="https://habrastorage.org/webt/ri/vl/_l/rivl_lgs0z7g6prfzdypjaqgdbq.png"><br><br>  El nombre de la cuenta debe indicarse solo si es una cuenta especialmente creada.  Si se trata de una cuenta cient√≠fica integrada, este par√°metro debe dejarse en "No configurado" (incluso si se cambia el nombre de la cuenta), ya que la SID conocida encontrar√° la cuenta integrada. <br><br><img src="https://habrastorage.org/webt/cu/af/gp/cuafgputvgt_gtfg7qtcpyft8lg.png"><br><br>  El siguiente paso es instalar la extensi√≥n de directiva de grupo en la PC.  Esto se puede asignar a pol√≠ticas de grupo, a SCCM u otra herramienta de implementaci√≥n de aplicaciones.  Cabe se√±alar que, de manera predeterminada, el paquete msi instala solo la parte del cliente, por lo que la implementaci√≥n no requiere pasar par√°metros adicionales al instalador.  Solo es necesario reiniciar la PC cuando se implementa a trav√©s de pol√≠ticas de grupo. <br><br>  La forma m√°s f√°cil de ver su contrase√±a es usar la interfaz de usuario LAPS.  Ingrese el nombre de la computadora en el campo apropiado y haga clic en "Buscar".  Si hicimos todo correctamente, ver√° la contrase√±a en el campo correspondiente. <br><br><img src="https://habrastorage.org/webt/ca/hr/ef/cahrefdlckyabd-iitzwsnuocb8.png"><br><br><h3>  Conclusi√≥n </h3><br>  Este art√≠culo cubri√≥ los pasos b√°sicos para implementar LAPS.  Hay m√°s informaci√≥n disponible en la documentaci√≥n que vino con el producto.  LAPS tambi√©n tiene un medio para registrar sus acciones, que no se discuti√≥ en este art√≠culo, pero se describe en la documentaci√≥n. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440624/">https://habr.com/ru/post/440624/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440614/index.html">Cuestiones de seguridad vial, ordenadas por puntos.</a></li>
<li><a href="../440616/index.html">La NASA compra dos asientos m√°s en Soyuz, prueba el RS-25 y no abandona la estaci√≥n cercana a la Tierra</a></li>
<li><a href="../440618/index.html">Julia y optimizaci√≥n</a></li>
<li><a href="../440620/index.html">Dotfile Madness</a></li>
<li><a href="../440622/index.html">¬øC√≥mo lanzamos un nuevo sitio bancario? Parte 1</a></li>
<li><a href="../440626/index.html">C√≥mo comenz√≥ todo: discos √≥pticos y su historia</a></li>
<li><a href="../440630/index.html">Revisi√≥n de la impresora 3D Stratasys en Formnext 2018</a></li>
<li><a href="../440632/index.html">Acelerar la aceleraci√≥n o conocer SIMD, Parte 2 - AVX</a></li>
<li><a href="../440634/index.html">Ba√±o corporativo</a></li>
<li><a href="../440636/index.html">Android Things se reenfocar√° en altavoces y pantallas inteligentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>