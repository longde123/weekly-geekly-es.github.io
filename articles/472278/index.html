<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë®üèø ü§ûüèæ üèÄ Mi git commit favorito üõÄüèø üë©‚Äçüç≥ üíß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : Esta publicaci√≥n de un programador brit√°nico, que se ha convertido en un verdadero √©xito en Internet de habla inglesa, hace referencia a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mi git commit favorito</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/472278/">  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Esta publicaci√≥n de un programador brit√°nico, que se ha convertido en un verdadero √©xito en Internet de habla inglesa, hace referencia a un compromiso de Git hace 6 a√±os.</i>  <i>Fue grabado en uno de los repositorios abiertos del Servicio Digital del gobierno, un servicio dedicado al desarrollo de servicios digitales en el Reino Unido y que apoya el proyecto GOV.UK.</i>  <i>El commit en s√≠ mismo es interesante no tanto con los cambios en el c√≥digo, sino con la descripci√≥n que los acompa√±a ...</i> <br><br><img src="https://habrastorage.org/webt/iw/ez/ls/iwezlskublg1rm-81mn2fcdwmx4.png"><br>  <i>Imagen de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">xkcd # 1296</a></i> <br><br>  Me encanta cometer descripciones en Git.  Cuando se usan correctamente, se les puede llamar una de las herramientas m√°s poderosas para documentar la evoluci√≥n de la base de c√≥digo durante su existencia.  Quiero ilustrar mi punto de vista con el ejemplo de mi descripci√≥n favorita. <a name="habracut"></a><br><br>  Este compromiso se remonta a cuando trabajaba en Government Digital Service.  Su autor es un desarrollador llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dan Carley</a> , y tiene un t√≠tulo bastante poco notable: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Convirti√≥ la plantilla a US-ASCII para corregir el error</a> ". <br><br><blockquote>  ‚ÄúHe implementado varias pruebas en la rama de caracter√≠sticas para que coincida con el contenido de` / etc / nginx / router_routes.conf`.  Funcionaron bien si se ejecutan con los comandos `bundle exec rake spec` o` bundle exec rspec modules / router / spec`.  Pero cuando se ejecuta `bundle exec rake`, cada bloque deber√≠a fallar: <br><br><pre><code class="plaintext hljs">ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br>  Al final, descubr√≠ que despu√©s de la excepci√≥n a la expresi√≥n `.with_content (//)`, todos los errores desaparecen.  Que no hay caracteres extra√±os en el archivo de especificaci√≥n.  Y tambi√©n que se puede jugar llamando a Puppet en el mismo int√©rprete: <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br>  Esta plantilla parece ser el √∫nico archivo en nuestra base de c√≥digo codificado con 'utf-8'.  Todos los dem√°s archivos en 'us-ascii': <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br>  Un intento de transcodificarlo en US-ASCII fall√≥ debido a un solo car√°cter que parece un espacio: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br>  Despu√©s de reemplazarlo (manualmente) el archivo nuevamente se convirti√≥ en 'US-ASCII': <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br>  ¬°Ahora las pruebas funcionan!  Toda la hora de mi vida no puede ser devuelta ... " </blockquote><br><div class="spoiler">  <b class="spoiler_title">En el original</b> <div class="spoiler_text"><h2>  Convierta la plantilla a US-ASCII para corregir el error </h2><br><blockquote>  Introduje algunas pruebas en una rama de caracter√≠sticas para que coincida con el contenido de <br>  `/ etc / nginx / router_routes.conf`.  Funcionaron bien cuando se ejecutan con `bundle exec <br>  rake spec` o `bundle exec rspec modules / router / spec`.  Pero cuando corres como <br>  `bundle exec rake` cada bloque deber√≠a fallar con: <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br>  Eventualmente descubr√≠ que eliminar los matizadores `.with_content (//)` hizo que <br>  los errores desaparecen  Que no hab√≠a ning√∫n personaje extra√±o en el archivo de especificaciones.  Y <br>  que podr√≠a reproducirse requiriendo Puppet en el mismo int√©rprete con: <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br>  Esa plantilla en particular parece ser el √∫nico archivo en nuestra base de c√≥digo con un <br>  codificaci√≥n identificada de 'utf-8'.  Todos los dem√°s son `us-ascii`: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br>  Intentar convertir ese archivo de nuevo a US-ASCII identific√≥ al infractor <br>  personaje como algo que parec√≠a un espacio en blanco: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br>  Despu√©s de reemplazarlo (a mano) el archivo se identifica como `us-ascii` nuevamente: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br>  ¬°Ahora las pruebas funcionan!  Una hora de mi vida no volver√© ... </blockquote></div></div><br><img src="https://habrastorage.org/webt/qt/4_/7e/qt4_7esruvjc41if3v41fpgg_kk.png"><br><br>  Una peque√±a digresi√≥n: uno de los beneficios del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desarrollo de c√≥digo abierto que se</a> practica en GDS es que puede compartir ejemplos como este fuera de la organizaci√≥n que los cre√≥.  No s√© qui√©n propuso este concepto por primera vez a GDS; cuando me un√≠ a la organizaci√≥n, ya se usaba ampliamente, pero estoy infinitamente agradecido con esta persona. <br><br><h2>  ¬øPor qu√© me gusta este commit? </h2><br>  Incontables veces lo he citado como un ejemplo de lo que son capaces las descripciones de compromiso.  Es algo divertido por la proporci√≥n de cambios en el c√≥digo y el tama√±o de la descripci√≥n, pero no me gusta en absoluto. <br><br>  En otra empresa, con otro desarrollador, todo el mensaje del compromiso podr√≠a reducirse a frases como "reemplaz√≥ el espacio", "arregl√≥ el error" o (seg√∫n la cultura del equipo) a ataques contra el inventor de espacios inextricables.  En cambio, Dan se tom√≥ el tiempo para crear una descripci√≥n detallada √∫til para otros.  Me gustar√≠a hacer hincapi√© en las razones por las que considero que este compromiso es un muy buen ejemplo. <br><br><h3>  Revela la raz√≥n de los cambios. </h3><br>  Las mejores descripciones de commits no solo informan sobre <b>lo que</b> ha cambiado, sino que tambi√©n explican <b>por qu√©</b> .  En nuestro caso: <br><br><blockquote>  He implementado varias pruebas en la rama de caracter√≠sticas para que coincida con el contenido de `/ etc / nginx / router_routes.conf`.  Funcionaron bien si se ejecutan con los comandos `bundle exec rake spec` o` bundle exec rspec modules / router / spec`.  Pero cuando se ejecuta `bundle exec rake`, cada bloque deber√≠a fallar: <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> </blockquote><br>  Sin ese nivel de detalle, podr√≠amos suponer que la confirmaci√≥n corrigi√≥ el error de an√°lisis en una herramienta en particular.  Gracias a la descripci√≥n de la confirmaci√≥n, sabemos qu√© tipo de herramienta era. <br><br>  Este tipo de informaci√≥n puede resultar realmente valiosa, y es demasiado f√°cil de perder, ya que las personas tienden a olvidar las complejidades de su trabajo, mudarse a otros equipos y, en √∫ltima instancia, abandonar la empresa. <br><br><h3>  Bueno para buscar </h3><br>  Uno de los elementos clave de esta descripci√≥n es el error en s√≠ mismo, con el que comenzaron las b√∫squedas adicionales: <br><br><blockquote>  ArgumentError: <br>  secuencia de bytes no v√°lida en US-ASCII </blockquote><br>  Cualquiera que encuentre este error puede buscar la base del c√≥digo, ya sea ejecutando <code>git log --grep "invalid byte sequence"</code> , o usando la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">b√∫squeda de confirmaciones de GitHub</a> .  De hecho, a juzgar por los resultados de la b√∫squeda, muchos ya lo han hecho y descubrieron qui√©n y cu√°ndo se enfrent√≥ a este problema y c√≥mo se resolvi√≥ finalmente. <br><br><h3>  Proporciona una imagen completa. </h3><br>  El mensaje de confirmaci√≥n detalla c√≥mo se ve√≠a el problema, c√≥mo se investig√≥ y se resolvi√≥.  Por ejemplo: <br><br><blockquote>  Al final, descubr√≠ que despu√©s de la excepci√≥n a la expresi√≥n `.with_content (//)`, todos los errores desaparecen.  Que no hay caracteres extra√±os en el archivo de especificaci√≥n.  Y tambi√©n que se puede jugar llamando a Puppet en el mismo int√©rprete. </blockquote><br>  Esta es una de las √°reas en las que los mensajes en las confirmaciones son realmente capaces de mostrarse, porque describen el cambio en s√≠, y no alg√∫n archivo, funci√≥n o l√≠nea de c√≥digo.  Esto los convierte en un gran lugar para almacenar este tipo de informaci√≥n adicional de aventura de base de c√≥digo. <br><br><h3>  Hace a todos un poco m√°s inteligentes </h3><br>  Dan hizo una cosa aqu√≠, que realmente aprecio: trajo todos los equipos que realic√© en cada etapa.  Esta es una forma excelente y asequible de compartir conocimientos en un equipo.  Al leer su descripci√≥n de la confirmaci√≥n, puede aprender mucho sobre las herramientas de Unix: <br><br><ul><li>  puede pasar el argumento <code>-exec</code> para <code>find</code> ejecutar un comando con cada archivo encontrado; </li><li>  agregar <code>\+</code> al final del comando hace algo muy interesante (pasa varios nombres de <code>file</code> comando de <code>file</code> y no ejecuta el comando una vez para cada archivo); </li><li>  <code>file --mime</code> permite averiguar el tipo MIME del archivo; </li><li>  Hay una utilidad <code>iconv</code> . </li></ul><br>  Una persona que ve una descripci√≥n puede aprender sobre todas estas cosas.  Cualquiera que tropiece con este compromiso m√°s tarde tambi√©n aprender√° sobre estas cosas.  Si multiplica este enfoque de los compromisos durante un tiempo prolongado y una cantidad suficiente de ellos, puede convertirse en un poderoso incentivo para el equipo. <br><br><h3>  Desarrolla empat√≠a y confianza. </h3><br><blockquote>  ¬°Ahora las pruebas funcionan!  Toda la hora de mi vida no puede ser devuelta ... </blockquote><br>  El √∫ltimo p√°rrafo agrega un m√≠nimo de humanidad.  Al leer estas palabras, es dif√≠cil no sentir la decepci√≥n de Dan, que tuvo que pasar una hora entera buscando un error oculto y la satisfacci√≥n de corregirlo. <br><br>  Ahora imagine un mensaje similar adjunto a un truco o fragmento temporal del c√≥digo prototipo que entr√≥ en producci√≥n y "ech√≥ ra√≠ces" (como suele ser el caso con dichos fragmentos).  Esta descripci√≥n de la confirmaci√≥n recuerda a todos que detr√°s de cada cambio hay una persona que toma la mejor decisi√≥n posible, dada la informaci√≥n disponible en ese momento. <br><br><h2>  Los buenos compromisos importan </h2><br>  Admito que este es un ejemplo extremo, y no espero que todos los commits (especialmente de tal alcance) cuenten con el mismo nivel de detalle.  Sin embargo, sigo pensando que este es un gran ejemplo para explicar la raz√≥n del cambio, ayudar a otros a aprender cosas nuevas y contribuir al modelo mental colectivo asociado con la base del c√≥digo. <br><br>  Si desea saber un poco m√°s sobre las ventajas de una buena descripci√≥n de los commits y algunas herramientas que facilitan la estructuraci√≥n de las ediciones, le puedo recomendar los siguientes materiales: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contar historias a trav√©s de tus compromisos</a> " por Joel Chippindale; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una rama en el tiempo</a> " de Tekin S√ºleyman. </li></ul><br><h2>  PD del traductor </h2><br>  Lea tambi√©n en nuestro blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Git sucede!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6 errores t√≠picos de Git y c√≥mo solucionarlos</a> "; </li><li>  "Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">truco maravilloso para hacer un mantenedor de proyectos de c√≥digo abierto al d√≠a</a> "; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© tienen en com√∫n los grandes proyectos exitosos de c√≥digo abierto?</a>  ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472278/">https://habr.com/ru/post/472278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472264/index.html">Arqueolog√≠a digital y realidad virtual o c√≥mo intent√© hacerme amigo de BIM y VR</a></li>
<li><a href="../472268/index.html">Mejora de los controles de Microsoft Edge en Chromium</a></li>
<li><a href="../472270/index.html">"No tienes acceso a la oraci√≥n actual": cuentas de alta tecnolog√≠a del Vaticano fueron pirateadas en 15 minutos</a></li>
<li><a href="../472272/index.html">Un nuevo juego con un ambiente antiguo en Three.js. Parte 2</a></li>
<li><a href="../472274/index.html">SSH remoto: consejos y hacks</a></li>
<li><a href="../472280/index.html">La tarea de determinar la presencia de una palma en un esc√°ner de venas</a></li>
<li><a href="../472288/index.html">9 extensiones de navegador √∫tiles para desarrolladores (lista para 2020)</a></li>
<li><a href="../472290/index.html">Estructuras vs. Clases</a></li>
<li><a href="../472292/index.html">Bloqueo de contenido: el escenario mundial</a></li>
<li><a href="../472294/index.html">Crea juegos y videos en YouTube. Mi experimento de interacci√≥n y los ingresos de este</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>