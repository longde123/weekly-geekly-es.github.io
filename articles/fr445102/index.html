<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîñ üßïüèø üëµüèª Animation Flash dans Unity3D √† partir de z√©ro. Premi√®re partie, lyrique üôÉ üë∏üèª ü§æ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette s√©rie d'articles, je vais vous expliquer comment et pourquoi nous avons d√©cid√© de cr√©er notre propre solution pour l'importation d'animatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Animation Flash dans Unity3D √† partir de z√©ro. Premi√®re partie, lyrique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445102/"><p>  Dans cette s√©rie d'articles, je vais vous expliquer comment et pourquoi nous avons d√©cid√© de cr√©er notre propre solution pour l'importation d'animation Flash vers Unity, ainsi que les techniques d'optimisation et le fonctionnement interne du plug-in.  J'ai √©galement beaucoup d'autres choses fascinantes √† raconter: les composants internes du format SWF, les fonctionnalit√©s sp√©ciales de l'extension de l'√©diteur Unity et les questions g√©n√©rales d'animation.  Vous trouverez tout cela √† l'int√©rieur! </p><br><img src="https://habrastorage.org/webt/q3/4s/r_/q34sr_45c9c6d5lygnzixa7jhwy.png"><br><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br><p> Lorsque vous commencez √† travailler sur un projet, vous devez toujours faire face au probl√®me du choix des technologies pour la plupart de ses composants.  L'un de ces composants est, bien s√ªr, le syst√®me d'animation.  Maintenant, il y a quelques variables dont d√©pendra votre choix.  La premi√®re question que vous devez vous poser est de savoir avec quels outils vos animateurs sont habitu√©s (peuvent travailler) et lesquels sont plus faciles √† trouver.  Bien s√ªr, choisir un produit extr√™mement sp√©cifique n'a pas beaucoup de sens.  Dans ce cas, si vos employ√©s partent pour une raison quelconque (ou se font renverser par un bus), il sera presque impossible de les remplacer.  Donc, en gros, votre projet, en tout ou en partie, sera arr√™t√© pour une dur√©e ind√©termin√©e, ce qui peut √™tre tr√®s co√ªteux, notamment pour un produit commercial.  La deuxi√®me variable est plus technique, et elle consiste √† int√©grer les outils dans votre moteur.  Existe-t-il des solutions tierces et quelle est leur qualit√©?  Avez-vous la possibilit√© et la capacit√© de cr√©er votre propre solution?  Bien s√ªr, l'efficacit√© et la commodit√© de tout ce qui pr√©c√®de est √©galement cruciale.  Et la troisi√®me variable est la capacit√© des outils.  Ainsi, si vous avez vraiment, vraiment besoin d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une cin√©matique inverse</a> , il serait tr√®s √©trange de votre part de pr√©f√©rer l'animation non squelettique. </p><br><h2>  Types d'animation 2D </h2><br><p>  Maintenant, regardons les techniques d'animation les plus populaires dans les jeux.  Je ne consid√©rerai que l'animation 2D, car l'animation 3D est un sujet pour une conversation compl√®tement diff√©rente, avec ses propres approches et outils.  N'h√©sitez pas √† sauter cette section si vous connaissez bien cette question (croyez-moi, il n'y aura pas de r√©v√©lations ni de r√©v√©lateurs).  De m√™me, si vous n'√™tes ici que pour voir les fonctionnalit√©s de l'animation Flash, vous les trouverez dans l'article ci-dessous. </p><br><h3>  Animation image par image </h3><br><p>  Lancement de notre mini-revue, le type d'animation le plus simple et le plus ancien: l'animation image par image.  Dans cette animation, chaque image est repr√©sent√©e par une image individuelle, et en changeant ces images tr√®s rapidement, nous obtenons l'illusion du mouvement. </p><br><p>  <strong>Avantages:</strong> </p><br><p>  Impl√©mentation √©l√©mentaire, g√©n√©ralement disponible pour tout moteur.  Quelle que soit la complexit√© et le style d'animation, vous pouvez m√™me ins√©rer l'ensemble des images du film (en th√©orie, bien s√ªr).  Tous les outils: presque tout peut vous fournir une s√©quence d'images que vous pouvez, si vous en avez besoin, rassembler en un seul atlas de texture. </p><br><p>  <strong>Inconv√©nients:</strong> </p><br><p>  Le principal inconv√©nient est, bien s√ªr, la quantit√© de m√©moire requise par tout cela.  Certes, vous pouvez utiliser toutes sortes d'astuces, telles que la d√©coupe de cadres en blocs, puis la r√©utilisation des blocs r√©p√©titifs, le chargement en arri√®re-plan des cadres du disque et la suppression de ceux d√©j√† affich√©s, etc.  Mais rappelez-vous que toutes ces astuces ont aussi leurs propres inconv√©nients.  Par exemple, la d√©coupe en blocs ne peut √™tre utilis√©e que dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pixel art</a> , le chargement en arri√®re-plan exerce une pression suppl√©mentaire sur le disque, prend beaucoup d'espace sur ce disque, augmentant ainsi la taille du jeu lui-m√™me, ainsi que la quantit√© de donn√©es requises pour qu'un utilisateur puisse le lancer ou le mettre √† jour. </p><br><p>  <strong>Conclusion:</strong> </p><br><p>  Fonctionne uniquement pour les petites et quelques images d'animation, parfait pour le pixel art et les jeux de style r√©tro comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NES</a> . </p><br><h3>  Animation vid√©o </h3><br><p>  Fondamentalement, l'animation vid√©o est une apoth√©ose de la folie image par image.  Et oui, il est toujours appliqu√© et parfois m√™me √† juste titre.  Nous avons impl√©ment√© quelque chose comme √ßa dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les</a> jeux d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">objets cach√©s</a> pour une animation volumineuse et complexe, ainsi que pour des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cin√©matiques</a> avec une touche de r√©alisme.  Ajoutez √† cela des codecs comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">theora</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vp8</a> , et vous pourrez cr√©er votre propre animation vid√©o (m√™me avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la composition alpha</a> ). </p><br><p>  Ce qui est bien avec ce genre d'animation, c'est bien s√ªr que vous pouvez cr√©er presque n'importe quoi, des sc√®nes g√©r√©es par la sc√®ne avec de vrais acteurs aux batailles en 3D.  Une mauvaise chose est une grande charge sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CPU</a> lorsque vous d√©codez et, bien s√ªr, la qualit√© d'image.  Le compromis entre qualit√© et efficacit√© ne peut √™tre atteint que dans un nombre limit√© de cas sp√©cifiques, comme dans les jeux d'objets cach√©s mentionn√©s ci-dessus. <br><br>  Donc, de toute fa√ßon, l'animation vid√©o n'est pas pour tout le monde et n'est pas toujours applicable, presque jamais, pour √™tre pr√©cis.  Fondamentalement, ce type d'animation fonctionne tr√®s bien uniquement pour les cin√©matiques rendues.  Si vous parvenez √† faire une bonne mise en ≈ìuvre d'une telle animation, ce ne sera certainement pas un morceau de g√¢teau.  Il y a des tonnes de nuances et d'astuces √† garder √† l'esprit, tant en ce qui concerne la qualit√© de l'image de sortie que la charge du processeur.  En raison de cette sp√©cificit√©, il existe tr√®s peu d'impl√©mentations pr√™tes √† l'emploi, qui ne sont pas assez bonnes ou qui co√ªtent cher (bonjour, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bink_Video</a> ), donc la plupart des gens pr√©f√®rent √©crire les leurs. </p><br><h3>  Animation squelettique </h3><br><p>  Passons donc √† des types d'animation 2D plus populaires et plus modernes.  Les animations squelettiques gagnent de plus en plus les c≈ìurs et les esprits des d√©veloppeurs 2D, devenant la norme d'animation de jeu.  Ce qui est dr√¥le, c'est qu'ils sont devenus si populaires en 2D relativement r√©cemment, contrairement √† la 3D, o√π ils remontent tr√®s loin, lorsque nos anc√™tres cr√©aient <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Half-Life</a> .  L'essence de l'animation squelettique, vous seriez surpris, est un squelette cr√©√© par un animateur.  Fondamentalement, un squelette est un ensemble d'os connect√©s les uns aux autres et formant une structure arborescente.  Les os sont li√©s en morceaux, repr√©sent√©s par des images individuelles.  Cette construction commence √† bouger lorsque les os sont d√©plac√©s ou tourn√©s les uns par rapport aux autres.  Les d√©placements et les rotations des os du squelette respectent la chronologie g√©n√©rale de l'animation. </p><br><p>  Les avantages sont √©vidents: nous n'avons pas √† stocker chaque image d'animation en tant qu'image distincte, uniquement les pi√®ces (par exemple, les jambes et les bras du personnage), qui seront d√©plac√©es par les os.  Il existe des impl√©mentations vraiment cool de ce type d'animation avec des temps d'ex√©cution pour diff√©rentes plates-formes et moteurs, qui sont abordables ou m√™me gratuits: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spine</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spriter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Anima2D</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DragonBones</a> et autres.  En utilisant le squelette et ses fonctionnalit√©s, vous pouvez obtenir un niveau de fluidit√© incroyable de votre animation en interpolant les positions des os.  Vous pouvez √©galement alterner les transitions entre les sc√®nes et m√™me m√©langer deux types de sc√®nes diff√©rents: prise de vue en cours d'ex√©cution, prise de vue en rampant, etc.  Je ne vais pas √©num√©rer toutes les possibilit√©s d'animation squelettique, alors gardez √† l'esprit qu'il y en a vraiment beaucoup et qu'elles sont vraiment cool.  Et je pr√©f√®re vous donner un lien vers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la colonne vert√©brale</a> o√π vous pouvez les examiner attentivement, avec des photos et des descriptions </p><br><p>  On dirait que nous avons eu notre soldat universel, mais pas tout de suite.  Il a √©galement ses propres inconv√©nients.  Et je dois dire tout de suite que pour de nombreux projets et animations, ces inconv√©nients peuvent m√™me ne pas exister.  Donc, si l'animation squelettique fonctionne pour vous - c'est tout simplement g√©nial, utilisez-la, car elle a l'air vraiment fine et moderne. </p><br><p>  Revenons maintenant aux inconv√©nients.  L'animation squelettique n√©cessite une √©tape suppl√©mentaire - le gr√©ement.  Il s'agit de cr√©er un squelette et de relier des os et des pi√®ces.  Si votre objet n'a qu'une seule animation, pas quelques-unes, comme par exemple le personnage du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu de plateforme</a> , alors cette √©tape ne vous sert √† rien.  Vous devez √©galement vous rappeler que toutes les sc√®nes ne peuvent pas √™tre facilement anim√©es avec des os.  En fait, il existe de nombreux exemples o√π il est pr√©f√©rable de s'en passer, √† la fois en termes de cr√©ation et de performances de fin de jeu.  Je voudrais √©galement souligner que la disponibilit√© d'experts sur le march√© est un facteur important.  Bien s√ªr, avec la popularit√© croissante de l'animation squelettique, leur nombre augmente √©galement, mais il ne sera probablement pas facile pour vous de les int√©grer dans votre √©quipe.  La vari√©t√© des outils fait √©galement sa part.  Chacun a ses propres pr√©f√©rences, mais il faut √™tre flexible et pr√™t √† apprendre, ce qui cr√©e des difficult√©s suppl√©mentaires pour recruter et former vos employ√©s. </p><br><h3>  Animation de la chronologie </h3><br><p>  J'ai gard√© ce type d'animation pour la fin non pas parce qu'il est meilleur que tous les autres, mais parce qu'il est principalement repr√©sent√© par une animation Flash dont nous allons parler dans la partie technique de cet article.  Maintenant, Flash n'est pas le seul repr√©sentant de ce type d'animation, mais c'est certainement le principal, donc √† partir de maintenant, je vais tout d√©crire par rapport √† lui.  Les sc√®nes d'animation de la chronologie sont constitu√©es de pi√®ces anim√©es en diff√©rents calques sur la chronologie.  Fondamentalement, c'est presque la m√™me chose que ce que nous avons vu dans l'animation squelettique, mais sans squelettes.  En utilisant les images cl√©s de la chronologie, nous pouvons d√©placer, faire pivoter, remplacer et ajouter de nouvelles pi√®ces dans ces images et, bien s√ªr, interpoler les transitions, les mises √† l'√©chelle et les rotations entre elles.  Cela signifie que dans ce cas, nous d√©pla√ßons non pas les os auxquels les pi√®ces sont attach√©es, mais les pi√®ces elles-m√™mes.  Bien s√ªr, cela nous prive de nombreuses possibilit√©s d'animation squelettique, mais comme je l'ai d√©j√† dit, tout le monde n'en a pas besoin.  De plus, nous b√©n√©ficions d'autres avantages, tels que: </p><br><ul><li>  possibilit√© d'ajouter et d'ins√©rer de nouvelles pi√®ces au milieu d'une sc√®ne; </li><li>  pas de gr√©ement, pas d'os parfois inutiles; </li><li>  Adobe Flash (actuellement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Adobe Animate</a> ) l'outil d'animation le plus ancien et test√© au fil des ans;  un grand nombre d'animateurs, d'une mani√®re ou d'une autre, peuvent travailler avec lui; </li><li>  possibilit√© d'utiliser d'anciennes sc√®nes lors du transfert de vos projets Flash vers Unity, y compris les sc√®nes que vous avez cr√©√©es dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des graphiques vectoriels</a> , pas seulement dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">raster</a> . </li></ul><br><p>  Vous pouvez vous demander, Flash n'est-il pas mort?  En tant que navigateur, oui, mais en tant qu'outil d'animation, il est toujours dans le jeu.  Et je vais vous en dire plus, il n'y a aucune alternative √† Flash maintenant ou pr√©vue.  Y a-t-il des inconv√©nients?  Bien s√ªr.  Et le principal inconv√©nient est que ... ce n'est pas une animation squelettique, ha-ha.  Donc, nous perdons la possibilit√© de m√©langer nos sc√®nes les unes avec les autres, la cin√©matique inverse et quelques autres fonctionnalit√©s que vous ne pouvez utiliser que lorsque vous travaillez avec des squelettes.  Mais nous avons des chronologies les unes dans les autres, ainsi que des masques raster et vectoriels!  Et les animateurs adorent les masques!  Ici, il faut noter que Spine a √©galement r√©cemment ajout√© l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">option d'√©cr√™tage</a> , mais jusqu'√† pr√©sent, ils sont uniquement g√©om√©triques et s√©v√®rement limit√©s par rapport aux masques Flash. </p><br><h3>  Types d'animation: R√©sum√© </h3><br><p>  Bien s√ªr, je n'ai pas r√©pertori√© tous les types d'animation, mais seulement les principaux.  Par exemple, j'ai laiss√© derri√®re moi ce qu'on appelle l'animation proc√©durale, lorsque les objets ou les pi√®ces sont uniquement pilot√©s par du code, mais il n'est gu√®re possible de comparer celui-ci √† d'autres, et je ne voulais pas rendre l'article trop long √† lire.  Je suppose que maintenant, il vaut mieux que nous examinions de plus pr√®s quelque chose de plus sp√©cialis√© dans l'animation pour compl√©ter l'image. <br><br>  Donc, pour r√©sumer.  Comme toujours et ailleurs, il n'y a pas de soldat universel ici.  Vous devez choisir votre solution en fonction de votre projet, de vos t√¢ches et des personnes.  Apr√®s tout, qui a dit que vous n'aviez √† utiliser qu'un seul type d'animation √† la fois?  Il y a beaucoup de projets o√π nous pouvons voir tous les types d'animation utilis√©s, et tout le monde est content.  Animation vid√©o pour les cin√©matiques, squelette pour les personnages, chronologie pour les d√©cors, proc√©dure pour le vol des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®mes de particules</a> des √©metteurs et image unique pour les particules elles-m√™mes.  Nous tirons simplement le meilleur de chaque type. </p><br><h2>  Dilemme et d√©cision d'√©crire notre propre solution </h2><br><p>  Quoi qu'il en soit, pour des raisons objectives, nous avons d√©cid√© que pour notre projet, nous avions besoin d'une animation Flash.  Puis la question s'est pos√©e, de leur int√©gration dans le moteur.  Apr√®s avoir essay√© plusieurs options de plug-in, nous avons opt√© pour celle que nous consid√©rions la meilleure pour ses capacit√©s.  Bien qu'il soit vivant et bien soutenu, il avait √©galement une licence d'entreprise totalement inabordable, mais qui peut vraiment mettre un prix sur un bon produit?  Maintenant, je ne vous donnerai intentionnellement aucun nom, donc ne faites pas ressembler √† de la publicit√© ou de l'anti-publicit√©. <br><br>  Nous avons pass√© pr√®s d'un an de d√©veloppement avec ce plug-in, p√©riode pendant laquelle il est devenu clair pourquoi nous ne pouvons pas continuer √† l'utiliser.  C'est en particulier la qualit√© de son int√©gration √† Unity.  Cela a entra√Æn√© des bogues assez graves qui ont √©t√© vaincus par les d√©veloppeurs pas facilement, pas rapidement et non sans combat.  Les performances sur les appareils cibles √©taient √©galement terribles, et pour nous, cela signifie toujours le niveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iPad 2</a> .  C'est arriv√© parce que nous avons essay√© de faire une int√©gration √† un moteur particulier, en ignorant ses sp√©cificit√©s et ses nids de poule.  Nous √©tions plus que satisfaits de la fonctionnalit√©, mais les d√©veloppeurs ont refus√© d'ouvrir le code source pour nous, m√™me sur une base individuelle.  C'est ainsi que nous avons d√©cid√© d'√©crire notre propre solution. <br><br>  J'ai eu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une</a> exp√©rience assez r√©ussie dans l'√©criture d'extensions pour Unity et une petite exp√©rience dans la conversion de sc√®nes d'animation Flash √† mes propres formats.  Cela fait un certain temps depuis le dernier, pour √™tre juste, mais quelque chose dont je me souviens encore.  Dans le m√™me temps, j'ai pris la d√©cision d'√©crire tout cela comme un projet pour animaux de compagnie, donc je ne d√©pendrais pas du projet principal ou de l'entreprise o√π je travaille.  Et, avouons-le, c'est agr√©able d'avoir une telle production par vous-m√™me.  Quoi qu'il en soit, arm√© d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cification de format SWF de</a> 250 pages, je me suis lanc√© dans la bataille. </p><br><h2>  Options d'exportation </h2><br><p>  Pour commencer, discutons des options que nous avons pour exporter l'animation √† partir de l'√©diteur Flash.  Il y en a quelques-uns, chacun ayant ses propres avantages et inconv√©nients.  Nous allons passer en revue les principaux. </p><br><h3>  Format .XFL </h3><br><p>  Dans l'√©diteur d'animation Flash, vous pouvez enregistrer le fichier source dans un format .XFL non compress√© au lieu du fichier .FLA ferm√© par d√©faut.  Maintenant, ce format est assez facile √† utiliser, mais il n'a pas de documentation.  Fondamentalement, il se compose de quelques sous-r√©pertoires et d'un tas de fichiers .XML d√©crivant tous les √©tats des clips stock√©s √† l'int√©rieur.  Le format de description est √©galement tr√®s simple et compr√©hensible, comme vous pouvez le voir dans l'exemple ci-dessous: </p><br><p>  <strong>static_clip.xml</strong> </p><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f28-00000051"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950184"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9728"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMBitmapInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bitmap.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Lien source</i></a> <br><blockquote><p>  Ce que nous avons obtenu ici est ce clip, <code>static_clip</code> avec un calque, <code>Layer_1</code> et une image stockant une image raster appel√©e <code>bitmap.png</code> . </p></blockquote><br><p>  <strong>movie_clip.xml</strong> </p><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f30-00000053"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950713"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DX</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"128.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DY</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"127.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Lien source</i></a> <blockquote><p>  Ici vous pouvez voir la description du clip <code>movie_clip</code> , qui se compose de deux images cl√©s avec les index 0 et 4, respectivement.  Dans ces images, notre clip <code>static_clip</code> est stock√© par les coordonn√©es <code>(-50;-50)</code> et <code>(100;100)</code> .  Ici, il y a une interpolation de mouvement entre les images (une animation proc√©durale, dans notre cas, ce n'est qu'un d√©calage, sans mise √† l'√©chelle ni rotation).  Ainsi, la position du clip statique entre les images cl√©s peut √™tre calcul√©e en utilisant une interpolation lin√©aire des coordonn√©es que nous prenons √† partir de ces images. </p></blockquote><p>  Bien s√ªr, dans le cas d'une v√©ritable animation, tout sera, euh ... un peu plus compliqu√© et volumineux, mais tout peut √™tre compris, m√™me sans documentation.  Et il pourrait vous sembler que c'est √ßa.  Et en fait, je suis au courant de plusieurs projets et entreprises qui ont suivi cette voie et qui ont connu un certain succ√®s, mais non sans limitations et difficult√©s.  Et ces difficult√©s sont la vraie bosse du .XFL, qui sont: </p><br><ol><li>  Les interpolations peuvent √™tre tr√®s diff√©rentes, √† la fois simples - avec interpolation lin√©aire et plus complexes - avec des fonctions et des graphiques personnalis√©s de cette interpolation;  le morphing des graphiques vectoriels sur les pr√©adolescents n'est effectu√© que selon leurs propres r√®gles, compr√©hensibles uniquement pour les gars de Macromedia et d'Adobe; </li><li>  Les graphiques vectoriels, comme toutes les animations, √† l'exception des graphiques raster, sont d√©crits dans un fichier texte. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Par exemple</a> .  Cela signifie que vous devez √©crire votre propre rasterizer, ce qui, en raison de la nature et de la complexit√© du format vectoriel dans Flash, ne peut pas √™tre fait; </li><li>  Les r√®gles de lecture des animations, y compris celles imbriqu√©es, doivent √™tre cr√©√©es √† partir de z√©ro.  Il n'y a pas de documentation pour cela, et des r√©ponses √† des questions telles que quand et quelle image doit √™tre affich√©e, quand l'interpolation et quand la laisser sans interpolation, vous devrez le d√©couvrir par vous-m√™me, tout en essayant de couvrir tous les cas possibles pendant les tests, ce qui, croyez-moi, est un exercice tr√®s simple pour une solution g√©n√©rale et non priv√©e. </li></ol><br><p>  Ce ne sont pas tous des inconv√©nients de cette approche, mais je pense que cela suffit pour que vous compreniez que cela ne fonctionnerait pour une solution g√©n√©rale qu'avec de fortes limites.  Il y a longtemps, j'ai emprunt√© cette voie en travaillant sur l'un de mes projets.  Il y avait des cin√©matiques Flash avec des interpolations classiques (sans r√®gles d'interpolation personnalis√©es et des fonctions d'interpolation sp√©ciales), des graphiques raster jut et aucune autre opportunit√© avanc√©e fournie par l'√©diteur Flash.  J'ai trouv√© cette solution propri√©taire assez rapidement et efficace, mais elle n√©cessitait toujours de s√©rieuses limitations sur les animateurs, afin qu'ils n'utilisent rien que vous puissiez appeler compliqu√©.  L'approche a le droit d'exister et il y a quelques biblioth√®ques bas√©es sur elle, avec des degr√©s variables de minable, mais, comme je l'ai dit, elle fonctionne avec beaucoup de limitations. </p><br><h3>  Scripts .JSFL </h3><br><p>  Une autre option presque fonctionnelle pour obtenir des informations sur nos animations, les scripts .JSFL vous permettent d'√©tendre votre √©diteur Flash, d'interagir avec son environnement, de modifier votre animation et, bien s√ªr, d'obtenir toutes les informations n√©cessaires sur les chronologies, les calques, les clips et les images √† l'int√©rieur .  Il est √©galement utilis√© par les animateurs pour automatiser divers processus, mais c'est en fait une histoire compl√®tement diff√©rente.  Dans l'ensemble, l'approche pr√©sente tous les inconv√©nients de la pr√©c√©dente, donc je ne vais pas y aller profond√©ment.  Permettez-moi de dire que cela vous permet d'exporter vos sc√®nes d'animation, par exemple, image par image, mais nous savons que ce n'est pas ce qu'un vrai Jedi ferait (mais, bien s√ªr, cela pourrait √™tre fait dans certains projets).  Nous reviendrons sur ces scripts plus tard, lorsque nous discuterons de l'approche que j'ai choisie: pour la pixellisation des graphiques vectoriels et l'optimisation des sc√®nes export√©es. </p><br><h3>  Application AIR </h3><br><p>  Cette approche fonctionne vraiment et peut √™tre utilis√©e comme il se doit.  Pourtant, je ne l'ai pas choisi, mais je vais vous parler de cette option, juste pour m√©moire.  L'essence de cette approche est que nous cr√©ons une application AIR sur Flash lui-m√™me ou, pour les puristes, par exemple, sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Haxe</a> .  Cette application va extraire toutes les informations des sc√®nes d'animation que vous avez d√©j√† compil√©es au format SWF.  Dans l'application, nous lisons la sc√®ne image par image, obtenons toutes les informations sur les images et l'enregistrons au format le plus appropri√© pour notre ex√©cution.  En utilisant cette m√©thode, nous abordons tous les probl√®mes que j'ai mentionn√©s ci-dessus: </p><br><ul><li>  nous n'avons pas besoin de pixelliser nos graphiques vectoriels, car cela sera fait par le runtime Flash.  La seule chose qui nous reste √† faire est d'obtenir ces informations et de sauvegarder la sortie raster de nos morceaux vectoriels; </li><li>  nous n'avons pas √† inventer de r√®gles de lecture et √† g√©rer l'interpolation d'interpolation personnalis√©e, le lecteur Flash int√©gr√© √† l'application AIR sait exactement comment cela doit √™tre fait et fait essentiellement le travail pour nous; </li></ul><br><p>  En bonus, nous avons la possibilit√© d'utiliser des scripts de cadre (tous les <code>play()</code> , <code>stop()</code> et autres <code>gotoAndPlay()</code> , certains animateurs les aiment vraiment).  Comme inconv√©nient, nous perdons une occasion d'exporter les sc√®nes en boucle dans Flash lui-m√™me.  Mais ce n'est pas si mal, vraiment, car nous pouvons les boucler dans notre runtime, et les animateurs pourraient tout pr√©parer pour cela. </p><br><p>  Il convient de noter maintenant que je suis s√ªr que tout sera plus ou moins difficile que je ne le d√©cris, car personnellement je n'y suis pas all√©, donc je ne peux pas vraiment vous dire tous les d√©tails.  Je souhaite la bienvenue √† ceux qui sont all√©s dans ce sens pour partager leur exp√©rience, je serai heureux de lire sur vos succ√®s et vos √©checs! </p><br><h3>  Votre propre lecteur flash </h3><br><p>  C'est probablement l'option la plus juste, la plus √©vidente et la plus simple de toutes, mais c'est aussi la plus difficile.  Apr√®s tout, c'est ce que fait un vrai lecteur Flash, celui que la plupart d'entre nous a install√© dans le navigateur pr√©f√©r√© en tant qu'add-on.  Maintenant, les repr√©sentants populaires de ce genre sont: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gameswf</a> et, n√© du premier, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">scaleform</a> .  Tous les deux sont morts aujourd'hui.  Ce qui est fascinant √† leur sujet, c'est qu'ils √©taient principalement utilis√©s pour les impl√©mentations <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GUI</a> dans divers projets, y compris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AAA</a> .  Mais notre int√©r√™t est dans les internes, pas dans les applications des biblioth√®ques mortes. </p><br><p>  Tout lecteur Flash d√©cent a au moins deux choses importantes cach√©es √† l'int√©rieur: </p><br><ul><li>  Analyseur de format SWF; </li><li>  rasterizer de graphiques vectoriels; </li><li>  machine virtuelle pour lancer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ActionScript</a> du code; </li><li>  biblioth√®que standard pour un code personnalis√©; </li></ul><br><p>  Je sais que tu penses.  Chacun de ces points ci-dessus crie que m√™me si quelque chose comme cela est possible √† impl√©menter, vous devrez changer de √©quipe pour cette t√¢che et passer quelques ann√©es sur le d√©veloppement de la version de base.  M√™me la mise en ≈ìuvre d'une petite partie juste pour jouer quelque chose, vous prendra un certain temps, et vous pouvez √™tre s√ªr que les ajouts suppl√©mentaires sous la forme de nombreuses parties non document√©es de ce pipeline doubleront cette longue p√©riode. </p><br><p>  Oui, Internet est plein de tentatives pour impl√©menter chacune de ces parties, variant en degr√©s de minable et de bug.  Mais vous ne pouvez m√™me pas prendre ces d√©veloppements comme base pour vos propres trucs car vous ne devriez passer des ann√©es que pour la chasse aux bogues.  Vous devrez √©galement ajouter tous les tests unitaires non √©crits avant de vous rendre compte que vous ne pourrez jamais impl√©menter compl√®tement chaque petite chose.  Les gars qui ont essay√© d'ajouter les capacit√©s n√©cessaires √† gameswf comprendront de quoi je parle.  Un bon lecteur Flash devrait √©galement pixelliser les graphiques vectoriels non √† l'avance, mais pendant l'ex√©cution, ce qui aura un impact sur les performances que tous les projets ne peuvent pas atteindre.  Soit dit en passant, je veux dire bonjour aux survivants qui ont essay√© d'utiliser Scaleform sur des appareils mobiles.  Quoi qu'il en soit, c'est la voie la plus solennelle et la plus d√©sesp√©r√©e, et ce n'est certainement pas notre choix. </p><br><h3>  Combiner les approches </h3><br><p>  Donc, nous sommes enfin pass√©s √† mon option.  Apr√®s avoir √©tudi√© toutes les mani√®res possibles, j'ai trouv√© cette combinaison int√©ressante.  Il est relativement facile √† mettre en ≈ìuvre, g√©rable par une seule personne et offre en m√™me temps suffisamment de fonctionnalit√©s pour couvrir tous les besoins de presque toutes les productions d'animation de chronologie 2D. </p><br><p>  Tout d'abord, nous allons utiliser la sc√®ne d'animation compil√©e en SWF, pour ne pas inventer diverses options de lecture et ne deviner presque jamais comment fonctionne le lecteur Flash √† l'int√©rieur, car nous ne pouvons pas couvrir tous les cas, mais nous sommes toujours √† la recherche de la solution g√©n√©rale.  De plus, Flash Editor se d√©barrasse de toutes les interpolations que nous avons utilis√©es dans notre animation, nous donnant seulement les positions nues des pi√®ces dans le SWF compil√©. </p><br><p>  Deuxi√®mement, nous interdisons l'utilisation de scripts dans l'animation.  Oui, cette exigence est certainement tr√®s difficile et triste, mais je n'ai pas toute une √©quipe de programmeurs pour impl√©menter une machine virtuelle d√©cente et une biblioth√®que standard qu'ils devraient √©crire presque les yeux band√©s.  Ici, bien s√ªr, vous pouvez voir un inconv√©nient de mon approche par rapport √† la m√©thode d'application AIR.  Dans le second, nous pourrions utiliser certains scripts pour la lecture d'animation interne.  En m√™me temps, cela ne nous emp√™che pas de cr√©er de bonnes sc√®nes d'animation.  Pour transf√©rer des informations personnalis√©es de la sc√®ne dans le jeu, vous pouvez utiliser ce que l'on appelle des <code>frame labels</code> , que vous d√©couvrirez dans le code.  Vous pouvez √©galement √©pingler des √©v√©nements utilisateur sur les trames particuli√®res √† l'aide des fonctions de rappel du runtime. </p><br><p>  Ensuite, nous nous d√©barrassons de l'√©criture de notre propre rasterizer de graphiques vectoriels, car nous ne pouvons pas l'√©crire pour le cas g√©n√©ral et pour couvrir toutes les options et possibilit√©s de vecteur dans Flash.  Au lieu de cela, nous allons pixelliser nos graphiques avant (!) Compilation en utilisant un script JSFL.  Pendant ce temps, en utilisant ce m√™me script, nous allons optimiser nos graphiques vectoriels en fusionnant les clips statiques dans une image, et zoomer les images raster r√©sultantes vers l'int√©rieur ou vers l'arri√®re pour notre propre priorit√©: qualit√© et / ou performance.  Ici aussi, il convient de prendre en compte les options de qualit√© / r√©solution de l'art pour les appareils avec diff√©rentes densit√©s de pixels d'√©cran (par exemple, l'art HD et SD). </p><br><h2>  Conclusion de la partie lyrique </h2><br><p>  Ceci conclut la premi√®re partie de mon article.  Dans le second, nous allons discuter des d√©tails d'impl√©mentation technique, des fragments de code, des images (!), De l'optimisation, des astuces et des ajustements.  Bient√¥t, ne le manquez pas! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445102/">https://habr.com/ru/post/fr445102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445090/index.html">YouTube restera-t-il tel que nous le connaissons?</a></li>
<li><a href="../fr445092/index.html">Probl√®me de lien profond HATEOAS</a></li>
<li><a href="../fr445094/index.html">Acc√®s centralis√© aux signatures num√©riques et autres cl√©s de protection √©lectronique √† l'aide du mat√©riel USB sur IP</a></li>
<li><a href="../fr445098/index.html">DynamicData: modification des collections, du mod√®le de conception MVVM et des extensions r√©actives</a></li>
<li><a href="../fr445100/index.html">Anycubic: Photon S, 4Max Pro et grand renommage</a></li>
<li><a href="../fr445104/index.html">Une br√®ve histoire de la marque audio Klipsch</a></li>
<li><a href="../fr445106/index.html">Table ronde: la technologie additive comme alternative √† la fabrication traditionnelle</a></li>
<li><a href="../fr445108/index.html">Pas un seul Falcon - des projets ESA et ULA r√©utilisables fondamentalement diff√©rents</a></li>
<li><a href="../fr445110/index.html">Un ordinateur avec un lecteur de terminal de style Fallout</a></li>
<li><a href="../fr445112/index.html">D√©m√™ler un enchev√™trement de vuln√©rabilit√©s sur les sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>