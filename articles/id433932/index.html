<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ­ ğŸ—³ï¸ ğŸœ Kami menembak di kaki, memproses data input ğŸ¤±ğŸ½ ğŸ’†ğŸ½ ğŸ‘²ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tautan dalam artikel hari ini berbeda dari biasanya. Ini bukan satu proyek di mana kode sumber dianalisis, tetapi serangkaian tanggapan dari aturan di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami menembak di kaki, memproses data input</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/433932/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/jh/iw/l-/jhiwl-y02cm4bhppsrj9flbpqsi.png"></div><br>  Tautan dalam artikel hari ini berbeda dari biasanya.  Ini bukan satu proyek di mana kode sumber dianalisis, tetapi serangkaian tanggapan dari aturan diagnostik yang sama di beberapa proyek yang berbeda.  Apa yang menarik di sini?  Faktanya adalah bahwa beberapa fragmen kode dianggap mengandung kesalahan yang dapat direproduksi saat bekerja dengan aplikasi, sementara yang lain mengandung kerentanan bersama (CVE).  Selain itu, di akhir artikel kita akan membahas sedikit tentang topik cacat keamanan. <br><a name="habracut"></a><br><h2>  Kata Pengantar Singkat </h2><br>  Semua kesalahan yang akan dipertimbangkan hari ini di artikel memiliki pola yang sama: <br><br><ul><li>  program menerima data dari aliran <i>stdin</i> ; </li><li>  pemeriksaan dilakukan untuk keberhasilan membaca data; </li><li>  jika data berhasil dibaca, karakter carry dihapus dari baris. </li></ul><br>  Namun, semua fragmen yang akan dianggap mengandung kesalahan dan rentan terhadap input yang dicurangi.  Karena data diterima dari pengguna, yang mungkin melanggar logika eksekusi aplikasi, ada godaan besar untuk mencoba memecahkan sesuatu.  Yang saya lakukan. <br><br>  Semua masalah di bawah ini ditemukan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">analisa statis PVS-Studio</a> , yang mencari kesalahan dalam kode tidak hanya untuk C, C ++, tetapi juga untuk C #, Java. <br><br>  Tentu saja, menemukan masalah dengan penganalisa statis itu baik, tetapi menemukan dan mereproduksi adalah tingkat kesenangan yang sama sekali berbeda.  :) <br><br><h2>  Freeswitch </h2><br>  Fragmen kode mencurigakan pertama ditemukan dalam kode modul <i>fs_cli.exe</i> , yang merupakan bagian dari kit distribusi FreeSWITCH: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">basic_gets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *cnt)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = getchar(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fgets(command_buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(command_buf) - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>) != command_buf) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } command_buf[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(command_buf)<span class="hljs-number"><span class="hljs-number">-1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* remove endline */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } .... }</code> </pre> <br>  <b>Peringatan PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CWE-20</a> Data tercemar yang tidak dicentang digunakan dalam indeks: 'strlen (command_buf)'. <br><br>  Penganalisa memperingatkan panggilan yang mencurigakan oleh indeks ke array <i>command_buf</i> .  Itu dianggap mencurigakan karena alasan bahwa data eksternal yang tidak diverifikasi digunakan sebagai indeks.  Eksternal - karena mereka diperoleh melalui fungsi <i>fgets</i> dari aliran <i>stdin</i> .  Tidak diverifikasi - karena tidak ada verifikasi yang dilakukan sebelum digunakan.  Ungkapan ekspresi <i>(command_buf, ....)! = Command_buf</i> tidak masuk hitungan, karena dengan cara ini kami hanya memeriksa fakta menerima data, tetapi tidak isinya. <br><br>  Masalah dengan kode ini adalah bahwa, dalam kondisi tertentu, '\ 0' akan ditulis di luar array, yang akan menyebabkan perilaku tidak terdefinisi.  Untuk melakukan ini, cukup masukkan string dengan panjang nol (string dengan panjang nol dari sudut pandang bahasa C, yaitu, di mana karakter pertama adalah '\ 0'). <br><br>  Mari kita perkirakan apa yang terjadi jika Anda meneruskan string nol-panjang ke input: <br><br><ul><li>  <i>fgets (command_buf, ....)</i> -&gt; <i>command_buf</i> ; </li><li>  <i>fgets (....)! = command_buf</i> -&gt; <i>false</i> ( <i>maka</i> cabang <i>pernyataan if</i> diabaikan); </li><li>  <i>strlen (command_buf)</i> -&gt; <i>0</i> ; </li><li>  <i>command_buf [strlen (command_buf) - 1]</i> -&gt; <i>command_buf [-1]</i> . </li></ul><br>  Ups! <br><br>  Yang menarik di sini adalah bahwa peringatan analis ini dapat "dirasakan dengan tangan Anda."  Untuk mengulangi masalah, Anda perlu: <br><br><ul><li>  membawa program ke fungsi ini; </li><li>  fine-tune input sehingga panggilan <i>getchar ()</i> mengembalikan nilai negatif; </li><li>  <i>Lewat untuk</i> fungsi <i>fiksi</i> garis dengan terminal nol di awal, yang seharusnya berhasil dibaca. </li></ul><br>  Mengaduk-aduk sedikit di sumber, saya membuat urutan khusus untuk mereproduksi masalah: <br><br><ul><li>  Jalankan <i>fs_cli.exe</i> dalam mode batch ( <i>fs_cli.exe -b</i> ).  Saya perhatikan bahwa untuk melakukan langkah lebih lanjut, koneksi <i>fs_cli.exe</i> ke server harus berhasil.  Untuk melakukan ini, cukup, misalnya, untuk menjalankan <i>FreeSwitchConsole.exe secara lokal</i> sebagai administrator. </li><li>  Kami melakukan input sehingga panggilan <i>getchar ()</i> mengembalikan nilai negatif. </li><li>  Masukkan baris dengan nol terminal di awal (misalnya, '\ 0Oooops'). </li><li>  .... </li><li>  KEUNTUNGAN! </li></ul><br>  Berikut ini adalah pemutaran video masalahnya: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jSYJirPIK8E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Ncftp </h2><br>  Masalah serupa ditemukan di proyek NcFTP, tetapi sudah bertemu di dua tempat.  Karena kode terlihat mirip, pertimbangkan hanya satu tempat bermasalah: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NcFTPConfirmResumeDownloadProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fgets(newname, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(newname) - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) newname[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; newname[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(newname) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; .... }</code> </pre> <br>  <b>Peringatan PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CWE-20</a> Data tercemar yang tidak dicentang digunakan dalam indeks: 'strlen (nama baru)'. <br><br>  Di sini, tidak seperti contoh dari FreeSWITCH, kode ini ditulis lebih buruk dan lebih rentan terhadap masalah.  Misalnya, penulisan '\ 0' terjadi terlepas dari apakah bacaan itu berhasil menggunakan <i>widget</i> atau tidak.  Artinya, ada lebih banyak lagi kemungkinan untuk cara mematahkan logika eksekusi normal.  Mari kita pergi dengan cara yang terbukti - melalui garis nol panjang. <br><br>  Masalah yang direproduksi sedikit lebih rumit daripada dengan FreeSWITCH.  Urutan langkah-langkah dijelaskan di bawah ini: <br><br><ul><li>  mulai dan sambungkan ke server tempat Anda dapat mengunduh file.  Sebagai contoh, saya menggunakan <i>speedtest.tele2.net</i> (pada akhirnya, perintah peluncuran aplikasi terlihat seperti ini: <i>ncftp.exe <a href="">speedtest.tele2.net</a></i> ); </li><li>  mengunduh file dari server.  Secara lokal, file dengan nama yang sama tetapi dengan properti yang berbeda harus sudah ada.  Anda dapat, misalnya, mengunduh file dari server, mengubahnya, dan mencoba menjalankan perintah unduhan lagi (misalnya, <i>dapatkan 512KB.zip</i> ); </li><li>  jawab pertanyaan tentang memilih tindakan dengan garis yang dimulai dengan karakter 'N' (misalnya, <i>Sekarang mari bersenang-senang</i> ); </li><li>  masukkan '\ 0' (atau sesuatu yang lebih menarik); </li><li>  .... </li><li>  KEUNTUNGAN! </li></ul><br>  Reproduksi masalah juga direkam di video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8DBQjvPQ7tk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Openldap </h2><br>  Dalam proyek OpenLDAP (lebih tepatnya, di salah satu utilitas yang menyertainya) mereka menginjak menyapu yang sama seperti di FreeSWITCH.  Upaya untuk menghapus karakter pemisah baris hanya terjadi jika baris berhasil dibaca, tetapi juga tidak ada perlindungan terhadap garis panjang nol. <br><br>  Cuplikan kode: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buf[ <span class="hljs-number"><span class="hljs-number">4096</span></span> ]; FILE *fp = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { fp = <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( fp == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((rc == <span class="hljs-number"><span class="hljs-number">0</span></span> || contoper) &amp;&amp; fgets(buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf), fp) != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { buf[ <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>( buf ) - <span class="hljs-number"><span class="hljs-number">1</span></span> ] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* remove trailing newline */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *buf != <span class="hljs-string"><span class="hljs-string">'\0'</span></span> ) { rc = dodelete( ld, buf ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( rc != <span class="hljs-number"><span class="hljs-number">0</span></span> ) retval = rc; } } } .... }</code> </pre> <br>  <b>Peringatan PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CWE-20</a> Data tercemar yang tidak dicentang digunakan dalam indeks: 'strlen (buf)'. <br><br>  Kami membuang kelebihan sehingga esensi masalah menjadi lebih jelas: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (.... &amp;&amp; fgets(buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf), fp) != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { buf[ <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>( buf ) - <span class="hljs-number"><span class="hljs-number">1</span></span> ] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; .... }</code> </pre> <br>  Kode ini lebih baik dari NcFTP, tetapi masih rentan.  Jika ada permintaan, masukkan string dengan panjang nol ke input: <br><br><ul><li>  <i>fgets (buf, ....)</i> -&gt; <i>buf</i> ; </li><li>  <i>fgets (....)! = NULL</i> -&gt; <i>true</i> (isi dari <i>while while</i> mulai dijalankan); </li><li>  <i>strlen (buf) - 1</i> -&gt; <i>0 - 1</i> -&gt; <i>-1</i> ; </li><li>  <i>buf [-1] = '\ 0'</i> . </li></ul><br><h2>  libidn </h2><br>  Terlepas dari kenyataan bahwa kesalahan yang dibahas di atas cukup menarik (mereka direproduksi secara stabil, dan mereka dapat "disentuh" â€‹â€‹(kecuali saya tidak bisa menyentuh masalah OpenLDAP)), mereka tidak dapat disebut kerentanan, jika hanya karena alasan bahwa masalah tidak diberikan pengidentifikasi CVE. <br><br>  Namun, beberapa kerentanan nyata memiliki pola masalah yang sama.  Kedua cuplikan kode di bawah ini berlaku untuk proyek libidn. <br><br>  Cuplikan kode: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fgets (readbuf, BUFSIZ, <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (feof (<span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; error (EXIT_FAILURE, errno, _(<span class="hljs-string"><span class="hljs-string">"input error"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (readbuf[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (readbuf) - <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) readbuf[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (readbuf) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; .... }</code> </pre> <br>  <b>Peringatan PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CWE-20</a> Data tercemar yang tidak dicentang digunakan dalam indeks: 'strlen (readbuf)'. <br><br>  Situasinya mirip, kecuali bahwa, tidak seperti contoh sebelumnya, di mana rekaman dilakukan pada indeks <i>-1</i> , pembacaan terjadi di sini.  Namun, ini masih merupakan perilaku yang tidak terdefinisi.  Kesalahan ini telah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ditetapkan</a> pengidentifikasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CVE-</a> nya sendiri ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CVE-2015-8948</a> ). <br><br>  Setelah mendeteksi masalah, kode ini diubah sebagai berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getline (&amp;line, &amp;linelen, <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>) == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (feof (<span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; error (EXIT_FAILURE, errno, _(<span class="hljs-string"><span class="hljs-string">"input error"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (line[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (line) - <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) line[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (line) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; .... }</code> </pre> <br>  Agak kaget?  Itu terjadi.  Kerentanan baru, pengidentifikasi CVE yang sesuai: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CVE-2016-6262</a> . <br><br>  <b>Peringatan PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CWE-20</a> Data tercemar yang tidak dicentang digunakan dalam indeks: 'strlen (line)'. <br><br>  Pada upaya lain, masalahnya diperbaiki dengan menambahkan tanda centang untuk panjang string masukan: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (line) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (line[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (line) - <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) line[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span> (line) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>;</code> </pre> <br>  Mari kita lihat tanggalnya.  Komit 'penutupan' CVE-2015-8948 - 08/10/2015.  Penutupan komitmen CVE-2016-62-62 - 14/01/2016.  Artinya, perbedaan antara koreksi di atas adalah <i>5 bulan</i> !  Di sini Anda ingat tentang keunggulan analisis statis seperti mendeteksi kesalahan pada tahap awal penulisan kode ... <br><br><h2>  Analisis dan Keamanan Statis </h2><br>  Tidak akan ada contoh kode lebih lanjut, sebaliknya, statistik dan alasan.  Pada bagian ini, pendapat penulis mungkin tidak sesuai dengan pendapat pembaca lebih dari sebelumnya dalam artikel ini. <br><br>  <b>Catatan</b>  Saya sarankan Anda membaca artikel lain tentang topik serupa - " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana PVS-Studio dapat membantu dalam menemukan kerentanan?</a> ".  Ada beberapa contoh kerentanan yang menarik yang terlihat seperti kesalahan sederhana.  Selain itu, dalam artikel itu saya berbicara sedikit tentang terminologi dan mengapa analisis statis harus dimiliki jika Anda khawatir tentang topik keamanan. <br><br>  Mari kita lihat statistik jumlah kerentanan yang ditemukan selama 10 tahun terakhir untuk menilai situasi.  Saya mengambil data dari situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CVE Details</a> . <br><br><p><img src="https://habrastorage.org/webt/lu/au/2i/luau2ik1aoqytidzblkeqjy8vhs.png" alt="Gambar 2"></p><br><br>  Situasi yang menarik tampak.  Hingga 2014, jumlah CVE yang tercatat tidak melebihi tanda 6.000 unit, dan mulai dari - tidak turun di bawah.  Tapi yang paling menarik di sini, tentu saja, adalah statistik untuk 2017 - pemimpin absolut (14.714 unit).  Adapun saat ini - 2018 - tahun, itu belum berakhir, tetapi sudah memecahkan rekor - 15.310 unit. <br><br>  Apakah ini berarti bahwa semua perangkat lunak baru penuh dengan lubang seperti saringan?  Saya tidak berpikir, dan inilah alasannya: <br><br><ul><li>  Meningkatnya minat pada topik kerentanan.  Tentunya, bahkan jika Anda tidak terlalu dekat dengan topik keamanan, Anda telah berulang kali menemukan artikel, catatan, laporan, dan video tentang topik keamanan.  Dengan kata lain, semacam "hype" telah dibuat.  Apakah itu buruk?  Mungkin tidak.  Pada akhirnya, semuanya bermuara pada kenyataan bahwa pengembang lebih memperhatikan keamanan aplikasi, yang bagus. </li><li>  Peningkatan jumlah aplikasi yang dikembangkan.  Semakin banyak kode - semakin besar kemungkinan terjadi kerentanan yang akan mengisi kembali statistik. </li><li>  Alat pencarian kerentanan yang ditingkatkan dan jaminan kualitas kode.  Lebih banyak permintaan -&gt; lebih banyak pasokan.  Analisis, fuzzer dan alat-alat lain menjadi lebih maju, yang berperan di tangan mereka yang ingin mencari kerentanan (terlepas dari sisi mana barikade mereka berada). </li></ul><br>  Jadi, tren yang muncul tidak bisa disebut negatif secara eksklusif - penerbit lebih mementingkan keamanan informasi, alat untuk menemukan masalah sedang diperbaiki, dan semua ini pasti positif. <br><br>  Apakah ini berarti Anda bisa santai dan tidak "mandi"?  Saya kira tidak.  Jika Anda khawatir tentang topik keamanan aplikasi Anda, Anda harus mengambil langkah keamanan sebanyak mungkin.  Ini benar terutama jika kode sumber ada dalam domain publik, karena: <br><br><ul><li>  lebih rentan untuk menanamkan kerentanan eksternal; </li><li>  lebih rentan untuk "menyelidiki" oleh "tuan-tuan" yang tertarik pada lubang di aplikasi Anda untuk tujuan mengeksploitasi mereka.  Meskipun simpatisan baik dalam hal ini akan dapat membantu Anda lebih banyak. </li></ul><br>  Saya tidak ingin mengatakan bahwa Anda tidak perlu menerjemahkan proyek Anda di bawah sumber terbuka.  Ingatlah selalu kontrol kualitas / keamanan yang sesuai. <br><br>  Apakah analisis statis merupakan ukuran tambahan?  Ya  Analisis statis melakukan pekerjaan yang baik untuk mendeteksi potensi kerentanan yang dapat menjadi nyata di masa depan. <br><br>  Menurut saya (saya akui saya salah) bahwa banyak orang menganggap kerentanan sebagai fenomena tingkat tinggi.  Ya dan tidak  Masalah kode yang tampak seperti kesalahan pemrograman sederhana juga bisa menjadi kerentanan serius.  Sekali lagi, beberapa contoh kerentanan tersebut disediakan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel yang disebutkan sebelumnya</a> .  Jangan meremehkan kesalahan 'sederhana'. <br><br><h2>  Kesimpulan </h2><br>  Jangan lupa bahwa data input dapat memiliki panjang nol, dan ini juga perlu diperhitungkan. <br><br>  Kesimpulan tentang apakah semua hype dengan kerentanan hanyalah hype, atau jika masalahnya ada, lakukan sendiri. <br><br>  Untuk bagian saya, kecuali saya mengusulkan untuk mencoba proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PVS-Studio Anda</a> , jika Anda belum melakukannya. <br><br>  Semua yang terbaik! <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Sergey Vasiliev.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tembak kaki Anda saat memegang data input</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id433932/">https://habr.com/ru/post/id433932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id433918/index.html">Mengapa web begitu rumit?</a></li>
<li><a href="../id433920/index.html">Raksasa polisilikon Cina meningkatkan kapasitas</a></li>
<li><a href="../id433922/index.html">Kubernetes Intensive: Mendukung Pekerjaan</a></li>
<li><a href="../id433926/index.html">Kerangka kerja Javascript: tren 2019</a></li>
<li><a href="../id433930/index.html">Pisahkan profil untuk freelancer dan pelanggan</a></li>
<li><a href="../id433934/index.html">SAFe atau Scaled Agile Framework</a></li>
<li><a href="../id433936/index.html">Mencari hadiah teknologi tinggi untuk anak? Pikirkan taman bermain, bukan playpen</a></li>
<li><a href="../id433938/index.html">Bagaimana Yandex dan Google merangkum tahun ini</a></li>
<li><a href="../id433940/index.html">Berapa Ulasan di AppStore</a></li>
<li><a href="../id433944/index.html">Pengecualian yang menghancurkan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>