<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚öïÔ∏è üë©üèø‚Äçü§ù‚Äçüë©üèº „Ä∞Ô∏è Aventuras del operador de la tuber√≠a en babel @ 7 üîò üè∏ üïã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La versi√≥n babel@7.0.0-beta52 tiene un nuevo indicador de configuraci√≥n requerido para el @babel/plugin-proposal-pipeline-operator , que rompe la comp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aventuras del operador de la tuber√≠a en babel @ 7</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/418125/"><img src="https://habrastorage.org/webt/tt/8e/8a/tt8e8alhcx3dtck1h8mebjlihsg.png"><br><p> La versi√≥n <a href="">babel@7.0.0-beta52 tiene</a> un nuevo indicador de <a href="">configuraci√≥n</a> requerido para el <code>@babel/plugin-proposal-pipeline-operator</code> , que rompe la compatibilidad con versiones anteriores del complemento.  En este art√≠culo, aprender√° qu√© es el operador de <code>pipeline</code> y por qu√© necesita configuraci√≥n. </p><a name="habracut"></a><br><p>  UPD: las tuber√≠as inteligentes aparecieron en babel@7.2.0: <a href="https://babeljs.io/blog/2018/12/03/7.2.0#smart-pipeline-operator-parsing-8289-">https://babeljs.io/blog/2018/12/03/7.2.0#smart-pipeline-operator-parsing-8289-https-githubcom-babel-babel- pull-8289</a> </p><br><h2 id="tekuschiy-status">  Estado actual </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gilbert Garza</a> , quien originalmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">propuso</a> el operador de <code>pipeline</code> , se propuso obtener una sintaxis simple para "cadenas ordenadas de llamadas de funci√≥n en un estilo funcional legible".  El operador de canalizaci√≥n se origina en lenguajes como F #, Hack, Elm, Elixir y otros, y cuando lo agrega a JavaScript, surgen dos cuestiones pol√©micas: </p><br><ul><li>  ¬øD√≥nde y c√≥mo usar marcadores de posici√≥n? </li><li>  ¬øC√≥mo debe <code>async / await</code> en una tuber√≠a? </li></ul><br><h3 id="pleysholdery">  Marcadores de posici√≥n </h3><br><p>  La primera pregunta fue planteada por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kevin Smith</a> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este boleto</a> , donde sugiri√≥ usar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estilo de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tuber√≠a</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">del lenguaje Hack</a> .  En Hack, se requieren marcadores de posici√≥n para cualquier lado derecho de la tuber√≠a, por ejemplo: </p><br><pre> <code class="plaintext hljs">namespace Hack\UserDocumentation\Operators\Pipe\Examples\MapFilterCountPiped; function piped_example(array&lt;int&gt; $arr): int { return $arr |&gt; \array_map($x ==&gt; $x * $x, $$) |&gt; \array_filter($$, $x ==&gt; $x % 2 == 0) |&gt; \count($$); } var_dump(piped_example(range(1, 10)));</code> </pre> <br><p>  Tomamos como base que el marcador de posici√≥n se puede usar en cualquier expresi√≥n y contiene el valor del √∫ltimo paso de canalizaci√≥n.  Este enfoque nos brinda flexibilidad y una amplia oportunidad para escribir expresiones. </p><br><p>  La otra cara de la moneda es la complejidad del lenguaje debido a la adici√≥n de una nueva ficha.  Hasta ahora, hemos elegido un hash ( <code>#</code> ), y aunque la discusi√≥n a√∫n est√° abierta, cualquier token potencialmente tendr√° intersecciones con otros usos.  Por ejemplo, el hash tambi√©n es utilizado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">campos privados de la clase</a> , al igual que cualquier otra variante de token. </p><br><h3 id="async--await">  As√≠ncrono / espera </h3><br><p>  La primera versi√≥n de la declaraci√≥n de <code>pipeline</code> conten√≠a esta sintaxis para <code>await</code> : </p><br><pre> <code class="plaintext hljs">x |&gt; await f</code> </pre> <br><p>  qu√© se puede implementar en: </p><br><pre> <code class="plaintext hljs">await f(x)</code> </pre> <br><p>  Desafortunadamente, los usuarios pueden esperar tal implementaci√≥n: </p><br><pre> <code class="plaintext hljs">(await f)(x)</code> </pre> <br><p>  Si bien la idea misma de agregar <code>async</code> a la <code>pipeline</code> derrumb√≥, los miembros del comit√© se manifestaron en contra de un operador de <code>pipeline</code> que no admite <code>async / await</code> .  S√≠, hay opciones sobre c√≥mo trabajar con funciones que devuelven Promise sin una sintaxis expl√≠cita, pero todas estas opciones son demasiado engorrosas o requieren funciones auxiliares. </p><br><h2 id="predlagaemye-resheniya">  Soluciones Sugeridas </h2><br><p>  Como resultado de las discusiones, se formaron dos propuestas (adem√°s de la opci√≥n m√≠nima): usar F # -piplines y Smart-pipelines.  Veamos estas sugerencias. </p><br><h3 id="minimalnyy-variant-operatorahttpsgithubcomtc39proposal-pipeline-operator">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opci√≥n de operador m√≠nimo</a> </h3><br><p>  Esta oferta se aplica solo a la funcionalidad b√°sica.  En la versi√≥n m√≠nima, se elimina el soporte para la asincron√≠a y no hay marcadores de posici√≥n.  Esta opci√≥n corresponde al comportamiento del complemento de babel de versiones anteriores, antes de la aparici√≥n de la configuraci√≥n, y corresponde a la especificaci√≥n actual para el operador de la <code>pipeline</code> en el repositorio.  Se usa m√°s como un proyecto de investigaci√≥n para identificar las ventajas y desventajas de otras propuestas, y es poco probable que sea aceptado sin los cambios fundamentales que se encuentran en las propuestas alternativas. </p><br><h3 id="f-payplaynyhttpsgithubcomvaltech-nycproposal-fsharp-pipelines">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">F # tuber√≠as</a> </h3><br><p>  Los marcadores de posici√≥n para tuber√≠as F # no son necesarios en absoluto.  En la versi√≥n b√°sica, las funciones de flecha cubren la necesidad de marcadores de posici√≥n, que requieren menos garabatos, y se basan en la sintaxis ES2015 familiar para todos. </p><br><p>  En este momento (de acuerdo con la especificaci√≥n de las l√≠neas F #), las funciones de flecha deben estar entre par√©ntesis: </p><br><pre> <code class="plaintext hljs">let person = { score: 25 }; let newScore = person.score |&gt; double |&gt; (_ =&gt; add(7, _)) |&gt; (_ =&gt; boundScore(0, 100, _));</code> </pre> <br><p>  Se est√°n realizando encuestas para determinar si es factible utilizar funciones de flecha sin par√©ntesis, que aqu√≠ parecen sint√°cticamente redundantes. </p><br><p>  En cuanto a la asincron√≠a, <code>await</code> funciona como una funci√≥n unaria en las tuber√≠as de F #: </p><br><pre> <code class="plaintext hljs">promise |&gt; await</code> </pre> <br><p>  Lo que se desarrolla en: </p><br><pre> <code class="plaintext hljs">await promise</code> </pre> <br><p>  y, por lo tanto, <code>await</code> se puede usar en medio de una larga cadena de llamadas asincr√≥nicas: </p><br><pre> <code class="plaintext hljs">promise |&gt; await |&gt; (x =&gt; doubleSay(x, ', ')) |&gt; capitalize |&gt; (x =&gt; x + '!') |&gt; (x =&gt; new User.Message(x)) |&gt; (x =&gt; stream.write(x)) |&gt; await |&gt; console.log;</code> </pre> <br><p>  Tal procesamiento de <code>await</code> especial puede potencialmente abrir la posibilidad de utilizar de manera similar otros operadores unarios (por ejemplo, <code>typeof</code> ), pero la especificaci√≥n original de tuber√≠as F # no los contiene. </p><br><h3 id="smart-payplaynyhttpsgithubcomjs-choiproposal-smart-pipelines">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tuber√≠as inteligentes</a> </h3><br><p>  Las tuber√≠as de Smar llevan la idea de los marcadores de posici√≥n a su conclusi√≥n l√≥gica, permitiendo tanto el uso parcial como las expresiones arbitrarias en las tuber√≠as.  La cadena larga anterior se puede escribir as√≠: </p><br><pre> <code class="plaintext hljs">promise |&gt; await # |&gt; doubleSay(#, ', ') |&gt; # || throw new TypeError() |&gt; capitalize |&gt; # + '!' |&gt; new User.Message(#) |&gt; await stream.write(#) |&gt; console.log;</code> </pre> <br><p>  Las reglas para usar marcadores de posici√≥n en tuber√≠as inteligentes son bastante simples.  Si se pasa un solo identificador al paso de canalizaci√≥n, entonces no se requiere un token adicional (marcador de posici√≥n), esto se denomina <a href="">"estilo simple"</a> : </p><br><pre> <code class="plaintext hljs">x |&gt; a; x |&gt; fb;</code> </pre> <br><p>  A diferencia de Hack, las funciones unarias no requieren un token de marcador de posici√≥n. </p><br><p>  Para otras expresiones, se requiere un marcador de posici√≥n (llamado "token de tema l√©xico"), y se considera que una tuber√≠a funciona dentro del "estilo de tema" - <a href="">"estilo de tema"</a> .  La ausencia de un token de marcador de posici√≥n en este caso causa un error de SyntaxError temprano: </p><br><pre> <code class="plaintext hljs">10 |&gt; # + 1; promise |&gt; await #;</code> </pre> <br><p>  Si hay operadores, corchetes (incluso para llamar a un m√©todo), comillas o cualquier otra cosa, excepto un identificador y un punto, se requiere el token de marcador de posici√≥n.  Esto ayudar√° a evitar recibir un disparo en el pie y eliminar la incertidumbre. </p><br><p>  Las canalizaciones inteligentes resuelven el problema de admitir la asincron√≠a de una manera m√°s general, lo que nos permite utilizar todas las expresiones posibles en las canalizaciones, no solo en <code>await</code> , sino tambi√©n en <code>typeof</code> , <code>yield</code> y cualquier otro operador. </p><br><h2 id="na-scenu-vyhodit-babel">  Babel entra en escena </h2><br><p>  Tan pronto como se concretaron las tres propuestas, llegamos a la conclusi√≥n de que tales debates no conducir√≠an a la resoluci√≥n de profundas contradicciones entre las propuestas.  Decidimos que la mejor manera es recopilar comentarios de los desarrolladores utilizando oraciones en c√≥digo real.  Dado el papel de Babel en la comunidad de desarrolladores, decidimos agregar las tres opciones al complemento del operador de <code>pipeline</code> . </p><br><p>  Dado que el an√°lisis de las tres oraciones es leve, pero diferente, su apoyo primero debe agregarse a <code>@babel/parser</code> (que es <code>babylon</code> ), y el analizador debe saber qu√© propuesta debe ser compatible ahora.  Por lo tanto, el complemento de operador de <code>pipeline</code> requiere la opci√≥n <code>"proposal"</code> , tanto para configurar Babilonia para el an√°lisis como para la transformaci√≥n posterior. </p><br><p>  Trabajamos en esto en l√≠nea porque necesitamos hacer todos los cambios rompiendo la compatibilidad con versiones anteriores antes de que babel @ 7 deje de ser beta.  Al final, nos gustar√≠a establecer una de las opciones de canalizaci√≥n predeterminadas para el complemento para eliminar la necesidad de una opci√≥n de configuraci√≥n. </p><br><p>  Dadas estas limitaciones, decidimos agregar una opci√≥n a la configuraci√≥n del complemento y hacerla obligatoria, obligando a los usuarios a decidir cu√°l de las ofertas desean usar en su proyecto.  Tan pronto como se elija una propuesta espec√≠fica como el comportamiento can√≥nico del operador, marcamos la opci√≥n <code>"proposal"</code> como obsoleta, y la opci√≥n can√≥nica funcionar√° de manera predeterminada.  El soporte para ofertas canceladas funcionar√° hasta la pr√≥xima versi√≥n principal. </p><br><h2 id="prinyat-uchastie">  Tomar parte </h2><br><p>  Si desea participar en la discusi√≥n de la propuesta, todas las discusiones son p√∫blicas y puede encontrarlas en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio de la propuesta del operador de la tuber√≠a</a> .  Una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">presentaci√≥n de la reuni√≥n TC39</a> tambi√©n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√° a</a> su servicio.  Al final, puedes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seguir a James DiGioia</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JS Choi</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Daniel Ehrenberg</a> en Twitter. </p><br><p>  Pero lo m√°s importante, tan pronto como se complete el trabajo en la <code>pipeline</code> , ¬°pru√©belo en sus proyectos!  Tambi√©n estamos trabajando para agregar nuevas funciones a las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">respuestas</a> , para que pueda verificar su c√≥digo de forma interactiva.  Necesitamos comentarios, y usarlo en c√≥digo real realmente ayudar√° a ensamblarlo.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Publica</a> tweets en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@babeljs</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418125/">https://habr.com/ru/post/es418125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418115/index.html">Friki puesto en el camino</a></li>
<li><a href="../es418117/index.html">Introducci√≥n al marco de Micronaut</a></li>
<li><a href="../es418119/index.html">Falla √©pica del mes: rsync como un "vector" en los datos de extracci√≥n</a></li>
<li><a href="../es418121/index.html">Piu-bah-vzhuh: un sat√©lite de detecci√≥n de rayos tambi√©n advierte meteoritos</a></li>
<li><a href="../es418123/index.html">Memoria at√≥mica: alfabeto de 8 bits y melod√≠a de 192 bits de Mario</a></li>
<li><a href="../es418127/index.html">La verdad y la falsedad de los sistemas de reconocimiento facial.</a></li>
<li><a href="../es418131/index.html">Programaci√≥n Cross-Cloud con Go Cloud</a></li>
<li><a href="../es418133/index.html">En defensa de la OLP. 7 argumentos insostenibles de sus oponentes</a></li>
<li><a href="../es418135/index.html">C√≥mo organizar su propio repositorio de m√≥dulos Node.js con blackjack y versiones</a></li>
<li><a href="../es418137/index.html">Sed de sangre: entrevista con el fundador de DonorSearch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>