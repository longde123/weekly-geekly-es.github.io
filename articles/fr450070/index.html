<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëº üëßüèº ü¶ä 60 millions de champs et 27 cultures. Comment nous avons fait une carte de tous les domaines de l'Europe et des USA ü§™ üçô üßñüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a quelques mois, nous avons lanc√© la premi√®re carte interactive gratuite au monde , avec laquelle vous pouvez voir des informations sur n'importe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>60 millions de champs et 27 cultures. Comment nous avons fait une carte de tous les domaines de l'Europe et des USA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450070/"><img src="https://habrastorage.org/webt/dq/bf/0b/dqbf0bvkm5hrtuknni-rm60ot9g.jpeg"><br><br>  Il y a quelques mois, nous avons lanc√© la premi√®re <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">carte interactive gratuite au monde</a> , avec laquelle vous pouvez voir des informations sur n'importe quel domaine aux √âtats-Unis et en Europe.  Des dizaines de publications ont √©crit sur la carte, et sur Product Hunt, elle a recueilli un millier et demi de likes sans pr√©c√©dent pour un produit du secteur agricole (et est finalement devenu le produit AI &amp; Machine Learning de l'ann√©e 2018).  Nous avons d√©velopp√© la carte pendant deux mois - c'est comme √ßa. <br><a name="habracut"></a><br>  La carte interactive est bas√©e sur des algorithmes d'apprentissage automatique et des images satellites.  Il contient des informations sur 60 millions de champs et 27 cultures dans 44 pays d'Europe et des √âtats-Unis.  Donn√©es - pendant trois ans.  Nous avons reconnu tous les domaines √† l'aide de ML √† partir d'images satellites.  √Ä l'aide de la carte, vous pouvez √† la fois suivre les tendances au niveau des pays et des r√©gions et observer le d√©veloppement d'un domaine sp√©cifique.  Par exemple, vous pouvez savoir combien de terres ont √©t√© occup√©es par le ma√Øs aux √âtats-Unis en 2016 (49,1 millions d'hectares) ou quelle r√©gion de Belgique a le plus de champs de bl√© (Wallonie). <br><br><img src="https://habrastorage.org/webt/ot/an/yq/otanyq1ez-dmw0m4xvkpckq5rn4.png"><br>  <i>L'Europe au zoom minimum</i> <br><br>  En utilisant la carte, vous pouvez √©galement trouver des informations sur un champ distinct: sa taille, sa culture, son calendrier de d√©veloppement et un indicateur de terrain complet.  Il est calcul√© par l'indice NDVI, les indicateurs climatiques et la productivit√© relative des champs.  √Ä tout moment, vous pouvez voir comment les betteraves se d√©veloppent dans votre champ ou quelle zone le voisin a allou√© pour les l√©gumineuses l'ann√©e derni√®re.  Entre autres, c'est beau.  Nous avons cr√©√© le bouton ¬´Champs magnifiques al√©atoires¬ª: il vous d√©place vers plus de 35 endroits √† travers le monde, dont chacun ressemble √† une ≈ìuvre d'art abstrait. <br><br>  L'id√©e de cr√©er une telle carte est apparue en juillet de l'ann√©e derni√®re.  Il nous manquait un outil qui nous permettrait de d√©montrer clairement toutes nos capacit√©s technologiques.  En ao√ªt, toute l'√©quipe a commenc√© √† se d√©velopper √©troitement. <br><br><h2>  Donn√©es: collecter, traiter, compresser </h2><br>  Lors de l'√©laboration de la carte, nous avons utilis√© des images du satellite Sentinel-2 du programme Copernicus de l'Union europ√©enne.  Au total, environ 250 t√©raoctets d'informations ont √©t√© trait√©s pour l'Europe et les √âtats-Unis.  √Ä la premi√®re √©tape, nous avons fait le pr√©traitement des images: nous avons nettoy√© les nuages, les ombres, la neige et effectu√© la compression des donn√©es.  Puis, sur les 50 t√©raoctets r√©sultants, ils ont lanc√© le processus de recherche des limites de champ et de classification des cultures sur nos mod√®les d'apprentissage automatique.  √Ä la sortie, nous avons re√ßu environ 250 gigaoctets de cartes vectorielles contenant des g√©om√©tries de champ et des cultures. <br><br>  Pour traiter les donn√©es et calculer les statistiques, nous avons utilis√© les bases de donn√©es PostgreSQL et PostGIS.  Apr√®s avoir export√© les donn√©es vectorielles originales, nous avons obtenu une base de donn√©es dans laquelle il y avait environ 180 millions d'enregistrements de g√©om√©trie de champ, ainsi que plus d'un milliard d'enregistrements d'informations d'attributs suppl√©mentaires sur les champs eux-m√™mes sur trois ans.  Sur cette quantit√© de donn√©es, nous avons calcul√© des statistiques, des √©valuations, d√©termin√© la popularit√© de diff√©rentes cultures dans les r√©gions du monde - tout ce qui est affich√© sur la carte dans la colonne de gauche et des conseils interactifs. <br><br><img src="https://habrastorage.org/webt/h3/hx/ea/h3hxeagfxn1qbfp_qh9pj5f3csm.jpeg"><br>  <i>Domaines de la Croatie</i> <br><br>  Nous voulions calculer et afficher rapidement des indicateurs agronomiques pour le champ, ainsi que visualiser un graphique du d√©veloppement des plantes au cours de la saison.  Pour ce faire, nous avons utilis√© notre propre approche de mise en cache et de compression des donn√©es satellite.  Cela nous a permis de r√©duire la taille de l'entrep√¥t de donn√©es de 100 √† 200 fois et de r√©duire la vitesse d'obtention des informations sur le terrain √† 1 seconde. <br><br>  √âgalement dans cette version de la carte, nous avons ajout√© un indicateur complet de score de terrain, qui vous permet d'√©valuer rapidement la note de terrain.  Le Field Score est la premi√®re √©tape vers la pr√©vision du rendement, sur laquelle notre √©quipe travaille actuellement.  La carte a √©t√© r√©alis√©e en peu de temps, j'ai donc d√ª inventer de nombreuses solutions originales en d√©placement.  Mais nous appliquons tous les nouveaux d√©veloppements dans le travail sur notre produit principal. <br><br><h2>  Carte: choisissez le format et pr√©parez les donn√©es </h2><br>  Afin de visualiser les donn√©es, nous avons utilis√© Mapbox.  Il existe deux approches pour cr√©er une carte, nous avons essay√© les deux.  La premi√®re consiste √† cr√©er une carte raster.  Dans ce cas, nous divisons la carte en carr√©s, que nous rendons en images et stockons sur le serveur.  Le navigateur t√©l√©charge plusieurs images et les d√©place lorsque l'utilisateur se d√©place sur la carte.  Cette approche vous permet d'afficher tous les champs, vous n'avez rien √† filtrer.  C'est beau, le moins est que la carte est statique, plus les images bitmap p√®sent beaucoup. <br><br>  La deuxi√®me approche consiste √† cr√©er une carte vectorielle.  Le navigateur charge les donn√©es vectorielles et les anime c√¥t√© client.  C'est ainsi que fonctionnent les cartes Google et Yandex modernes.  Les donn√©es p√®sent moins que les images et vous permettent de modifier la conception de n'importe quel √©l√©ment.  Cette carte peut √™tre r√©alis√©e par le service Mapbox, en particulier, leur biblioth√®que Mapbox GL est un outil open source pour afficher des cartes sur le web.  Mapbox propose entre autres un service de stockage de cartes payant.  Vous pouvez t√©l√©charger manuellement vos donn√©es sur leurs serveurs et Mapbox distribuera rapidement les informations, garantissant un fonctionnement pr√©cis de la carte.  Ceci est une partie essentielle du travail, et gr√¢ce au fait que Mapbox se charge de lui-m√™me, la t√¢che de l‚Äô√©quipe a √©t√© grandement simplifi√©e. <br><br><img src="https://habrastorage.org/webt/u_/wo/fv/u_wofvjmemc-piwnprp5pwtmrra.png"><br>  <i>√âmilie-Romagne, Italie</i> <br><br>  Lorsque vous travaillez avec des donn√©es vectorielles, il existe une limitation conditionnelle: plus vous souhaitez afficher d'informations sur la carte, plus tout fonctionnera lentement.  Pour r√©soudre ce probl√®me, nous avons utilis√© un utilitaire de Mapbox appel√© Tippecanoe.  Sur la base des algorithmes que nous avons s√©lectionn√©s, il a d√©termin√© quels champs de zoom seraient visibles et lesquels ne l'√©taient pas, et a supprim√© les objets vectoriels invisibles de la couche.  Au total, Tippecanoe poss√®de plus de 20 algorithmes de filtrage, nous avons tout essay√© et s√©lectionn√© quelques-uns de base.  Nous avons pr√©par√© les donn√©es ainsi pr√©par√©es en utilisant la technologie mbtiles de Mapbox jusqu'√† 50 gigaoctets, puis les avons t√©l√©charg√©es sur les serveurs de l'entreprise. <br><br>  L'utilisation du framework Next JS, qui effectue le rendu c√¥t√© serveur de la page, a permis d'acc√©l√©rer encore plus la carte.  La plupart des applications dans le monde moderne sont enti√®rement rendues c√¥t√© client: lorsqu'une fen√™tre est ouverte, le navigateur affiche une page hmtl vide et un script qui charge toutes les informations.  Le framework Next JS restitue tout sur le serveur, ce qui acc√©l√®re le chargement de l'application pour le client. <br><br><h2>  Carte: configurez le visuel et cr√©ez un ¬´bouton magique¬ª la veille de la sortie </h2><br>  Mapbox a √©t√© une agr√©able d√©couverte pour notre designer.  Le service a simplifi√© sa t√¢che car il a pu visualiser les donn√©es sans impliquer un d√©veloppeur frontal.  De l'ext√©rieur, il peut sembler qu'il est facile de coloriser les champs dans l'interface termin√©e, mais il existe de nombreuses nuances.  Nous avons 27 cultures et choisir des couleurs pour elles n'a pas √©t√© facile.  Pour les cultures populaires, des couleurs contrast√©es sont n√©cessaires, pour des couleurs moins populaires et moins contrast√©es, et elles devraient toutes √™tre clairement visibles √† diff√©rents niveaux de zoom.  La carte a beaucoup d'imbrication et d'indices interactifs, donc la chose la plus difficile a √©t√© de penser la logique des transitions √† diff√©rents niveaux. <br><br>  La veille de la sortie, nous avons r√©alis√© que bien qu'il soit int√©ressant de regarder la carte et les chiffres, je ne veux pas partager √ßa sur les r√©seaux sociaux.  Par cons√©quent, nous avons d√©cid√© d'ajouter le bouton "Champs magnifiques al√©atoires", qui jette les utilisateurs entre diff√©rents endroits de la plan√®te.  Dans tout le bureau, nous avons cherch√© de beaux endroits, en une heure, nous avons tir√© un bouton et nous avons tout invent√©.  Le matin, nous l'avons test√© et commenc√©.  Il semble que c'est cette fonction qui nous a donn√© tant de couverture.  Sinon, personne n'aurait fait attention au fait que les champs sont similaires aux peintures abstraites.  Ne sous-estimez pas le pouvoir des d√©cisions de derni√®re minute. <br><br><img src="https://habrastorage.org/webt/5d/xb/rn/5dxbrnwzr6i-iezjv2qxfz9ef3i.jpeg"><br>  <i>Champs de France</i> <br><br>  Nous avons ajout√© une autre fonction √† la carte apr√®s le lancement.  Nous savions que parfois nous ne reconnaissons pas exactement les champs et les cultures sur la carte, et les commentaires des utilisateurs nous permettent d'am√©liorer nos algorithmes.  Apr√®s la publication, les agriculteurs ont commenc√© √† envoyer des messages sur les inexactitudes dans la reconnaissance des cultures: ¬´J'ai du tournesol qui pousse sur le terrain et vous avez du ma√Øs.  Pour r√©soudre ce probl√®me, nous avons ajout√© un bouton √† la carte de champ qui nous envoie des notifications d'erreur.  Les informations que nous utilisons sont utilis√©es pour am√©liorer la pr√©cision de nos mod√®les de reconnaissance des cultures. <br><br><h2>  En fin de compte </h2><br>  Au cours de son d√©veloppement, le concept de la carte est devenu beaucoup plus compliqu√©.  Si au d√©part nous avions pr√©vu de faire une simple visualisation des champs et des cultures √† travers le monde, alors le produit final s'est av√©r√© √™tre beaucoup plus complexe.  Mais la carte en valait la peine.  Apr√®s la publication, des centaines d'investisseurs, de fondations et de chercheurs scientifiques nous ont √©crit.  Nous utiliserons une partie des solutions technologiques, par exemple, le framework Next JS et l'utilitaire Tippecanoe, pour travailler sur notre plate-forme Web gratuite d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">agriculture de</a> pr√©cision <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OneSoil</a> . <br><br>  Nous avons √©t√© les premiers √† cartographier tous les domaines des √âtats-Unis et de l'Europe en trois ans.  Les donn√©es que nous avons re√ßues sont uniques.  D√©j√†, nous en savons plus sur les domaines que n'importe quelle entreprise ou √âtat.  Et les statistiques que nous obtenons en utilisant des algorithmes d'apprentissage automatique sont souvent plus pr√©cises que celles qui ont √©t√© collect√©es manuellement.  Nous avons fait le premier pas vers la reconnaissance automatique des champs du monde entier - tel est notre plan pour un avenir proche. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr450070/">https://habr.com/ru/post/fr450070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr450060/index.html">Comment j'ai d√©couvert que mon visa n'√©tait pas pr√™t, un message dans Slack</a></li>
<li><a href="../fr450062/index.html">R√©tablir la circulation c√©r√©brale quelques heures apr√®s la mort</a></li>
<li><a href="../fr450064/index.html">Microsoft Build 2019 - diffusion en direct en russe</a></li>
<li><a href="../fr450066/index.html">Test: Comment respectez-vous les exigences relatives au traitement des donn√©es personnelles?</a></li>
<li><a href="../fr450068/index.html">Comment la technologie manipule votre esprit: l'apparence d'un illusionniste et expert en √©thique du design Google</a></li>
<li><a href="../fr450072/index.html">Choisir un t√©l√©viseur pour vous, votre bien-aim√©, du point de vue de la science, pas de la publicit√©</a></li>
<li><a href="../fr450074/index.html">Progr√®s dans les essais de phase 1 sur les vaccins contre le cancer colorectal</a></li>
<li><a href="../fr450076/index.html">Nous affinons la description des fonctions du syst√®me √† l'aide du diagramme de s√©quence</a></li>
<li><a href="../fr450078/index.html">Un client de Hertz poursuit l'int√©grateur Accenture et r√©clame 32 millions de dollars pour une mise √† niveau d√©fectueuse du site</a></li>
<li><a href="../fr450080/index.html">Microbes indig√®nes et digestion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>