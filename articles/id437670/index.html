<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ» ğŸ‘¨ğŸ»â€ğŸ¤ ğŸ›€ğŸ¿ Pembaruan Backend MSVC di Visual Studio 2019 Pratinjau 2: Optimasi Baru, OpenMP, dan peningkatan Throughput Build ğŸ˜– ğŸ”˜ âš›ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam Visual Studio 2019 Pratinjau 2 kami terus meningkatkan backend C ++ dengan fitur-fitur baru, optimasi baru dan lebih baik, membangun peningkatan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pembaruan Backend MSVC di Visual Studio 2019 Pratinjau 2: Optimasi Baru, OpenMP, dan peningkatan Throughput Build</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/437670/"><img width="140" align="left" src="https://habrastorage.org/webt/gq/ke/xi/gqkexi_dekwffzpjqtx04zp7ee8.png"><br><p>  Dalam Visual Studio 2019 Pratinjau 2 kami terus meningkatkan backend C ++ dengan fitur-fitur baru, optimasi baru dan lebih baik, membangun peningkatan throughput, dan kualitas perubahan kehidupan. </p><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Asli di blog</a> <br><br><h3>  Fitur baru </h3><br><ul><li>  Menambahkan saklar baris perintah inlining baru: -Ob3.  -Ob3 adalah versi yang lebih agresif dari -Ob2.  -O2 (mengoptimalkan biner untuk kecepatan) masih menyiratkan -Ob2 secara default, tetapi ini mungkin berubah di masa depan.  Jika Anda menemukan kompiler dalam-inlining, pertimbangkan untuk meneruskan -O2 -Ob3. </li><li>  Menambahkan dukungan dasar untuk vektorisasi OpenMP SIMD yang merupakan fitur OpenMP yang paling banyak digunakan dalam pustaka pembelajaran mesin (ML).  Studi kasus kami adalah perpustakaan Intel MKL-DNN, yang digunakan sebagai blok bangunan untuk pustaka ML open source terkenal lainnya termasuk Tensor Flow.  Ini dapat dihidupkan dengan saklar CL baru -openmp: eksperimental.  Ini memungkinkan loop beranotasi dengan "#pragma omp simd" berpotensi menjadi vektor.  Vektorisasi tidak dijamin, dan loop beranotasi tetapi tidak di-vektorisasi akan mendapatkan peringatan yang dilaporkan.  Tidak ada klausa SIMD yang didukung, mereka hanya akan diabaikan dengan peringatan yang dilaporkan. </li><li>  Menambahkan penangan pengecualian C ++ baru __CxxFrameHandler4 yang mengurangi pengecualian penanganan overhead metadata sebesar 66%.  Ini memberikan peningkatan ukuran biner total hingga 15% pada binari yang menggunakan sejumlah besar penanganan pengecualian C ++.  Saat ini default tidak aktif, cobalah dengan meneruskan "/ d2FH4" saat dikompilasi dengan cl.exe.  Perhatikan bahwa / d2FH4 dinyatakan tidak berdokumen dan tidak didukung dalam jangka panjang.  Ini saat ini tidak didukung pada aplikasi UWP karena runtime UWP belum memiliki fitur ini. </li><li>  Untuk mendukung vektorisasi tangan dari loop yang berisi panggilan ke fungsi perpustakaan matematika dan operasi tertentu lainnya seperti divisi integer, MSVC sekarang mendukung fungsi intrinsik Perpustakaan Vector Vector Pendek (SVML) yang menghitung setara vektor.  Dukungan untuk vektor 128-bit, 256-bit dan 512-bit tersedia untuk sebagian besar fungsi, dengan pengecualian yang tercantum di bawah ini.  Perhatikan bahwa fungsi-fungsi ini tidak mengatur errno.  Lihat Panduan Intrinsik Intel untuk definisi fungsi yang didukung. <br>  Pengecualian termasuk: <br><ul><li>  Divisi dan sisanya gabungan integer vektor hanya tersedia untuk elemen 32-bit dan panjang vektor 128-bit dan 256-bit.  Gunakan fungsi pembagian dan sisa yang terpisah untuk ukuran elemen dan panjang vektor lainnya. </li><li>  SVML square-root hanya tersedia dalam panjang vektor 128-bit dan 256-bit.  Anda dapat menggunakan fungsi <em>_mm512_sqrt_pd</em> atau <em>_mm512_sqrt_ps</em> untuk vektor 512-bit. </li><li>  Hanya versi vektor 512-bit fungsi <em>rint</em> dan <em>terdekat</em> tidak tersedia.  Dalam banyak kasus, Anda dapat menggunakan fungsi bundar sebagai gantinya, mis. Gunakan <em>_mm256_round_ps (x, _MM_FROUND_CUR_DIRECTION)</em> sebagai versi vektor 256-bit dari <em>rintisan</em> , atau <em>_mm256_round_ps (x, _MM_FROUND_TO_NEAREST_INT)</em> untuk <em>dekatnya</em> . </li><li>  Hanya timbal balik 512-bit disediakan.  Anda dapat menghitung yang setara menggunakan fungsi set1 dan div, mis. 256-bit reciprocal dapat dikomputasi sebagai <em>_mm256_div_ps (_mm256_set1_ps (1.0f), (x))</em> . </li><li>  Ada fungsi SVML untuk akar kuadrat kompleks presisi tunggal, logaritma, dan eksponensial hanya dalam panjang vektor 128-bit dan 256-bit. </li></ul></li></ul><br><h3>  Optimalisasi Baru dan Peningkatan </h3><br><ul><li>  Memset yang tidak terkontrol dan memblokir inisialisasi sekarang akan menggunakan instruksi SSE2 (atau instruksi AVX jika diizinkan).  Ambang ukuran untuk apa yang akan dibuka gulungannya telah meningkat (kompilasi untuk ukuran dengan SSE2: buka gulungan bergerak dari 31 ke 63 byte, kompilasi untuk kecepatan dengan SSE2: ambang bergerak dari 79 menjadi 159 byte). </li><li>  Dioptimalkan kode-gen untuk memset kecil, terutama ditargetkan untuk fungsi yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dilindungi secara keseluruhan</a> . </li><li>  Perbaikan pada eliminasi berlebihan toko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SSA Optimizer</a> : analisis pelarian yang lebih baik dan penanganan loop </li><li>  Kompiler mengenali memmove () sebagai fungsi intrinsik dan mengoptimalkannya.  Ini meningkatkan pembuatan kode untuk operasi yang dibangun di memmove () termasuk std :: copy () dan kode perpustakaan tingkat lebih tinggi lainnya seperti std :: vector dan std :: string struction </li><li>  Pengoptimal melakukan pekerjaan yang lebih baik untuk mengoptimalkan operasi memmove (), memcpy (), dan memcmp () yang pendek dan tetap. </li><li>  Dioptimalkan optimasi duplikasi switch untuk kinerja switch yang lebih baik di dalam hot loop.  Kami menduplikasi saklar melompat untuk membantu meningkatkan akurasi prediksi cabang dan akibatnya, menjalankan kinerja waktu. </li><li>  Menambahkan penyederhanaan konstanta lipat dan aritmatika untuk ekspresi menggunakan SIMD (vektor) intrinsik, untuk bentuk float dan integer.  Sebagian besar optimasi ekspresi biasa sekarang menangani SSE2 dan AVX2 intrinsik, baik dari kode pengguna atau hasil dari vektorisasi otomatis. </li><li> Beberapa pola skalar multiply-add (FMA) baru diidentifikasi dengan / arch: AVX2 / fp: fast.  Ini termasuk ekspresi umum berikut: <code>(x + 1.0) * y; (x â€“ 1.0) * y; (1.0 â€“ x) * y; (-1.0 â€“ x) * y</code> <code>(x + 1.0) * y; (x â€“ 1.0) * y; (1.0 â€“ x) * y; (-1.0 â€“ x) * y</code> </li><li>  Urutan kode yang menginisialisasi elemen nilai demi elemen __m128 SIMD (vektor) diidentifikasi dan diganti oleh intrinsik <em>_mm_set_ps</em> .  Ini memungkinkan optimalisasi SIMD baru untuk mempertimbangkan nilai sebagai bagian dari ekspresi, berguna terutama jika nilai hanya memiliki elemen konstan.  Pembaruan di masa depan akan mendukung lebih banyak tipe nilai. </li><li>  Eliminasi sub-ekspresi umum (CSE) lebih efektif di hadapan variabel yang dapat dimodifikasi secara tidak langsung karena mereka memiliki alamat mereka diambil. </li><li>  Salinan struct / class yang tidak berguna sedang dihapus dalam beberapa kasus lagi, termasuk salinan ke parameter output dan fungsi mengembalikan suatu objek.  Optimasi ini sangat efektif dalam program C ++ yang melewatkan objek berdasarkan nilai. </li><li>  Menambahkan analisis yang lebih kuat untuk mengekstraksi informasi tentang variabel dari aliran kontrol (jika / else / beralih pernyataan), digunakan untuk menghapus cabang yang dapat terbukti selalu benar atau salah dan untuk meningkatkan estimasi rentang variabel.  Kode menggunakan gsl :: span melihat peningkatan, beberapa pemeriksaan rentang yang tidak perlu dihapus sekarang. </li><li>  Optimalisasi devirtualisasi sekarang akan memiliki peluang tambahan, seperti ketika kelas didefinisikan dalam ruang nama anonim. </li></ul><br><h3>  Membangun Peningkatan Throughput </h3><br><ul><li>  Memfilter informasi debug selama kompilasi berdasarkan simbol dan tipe yang dirujuk untuk mengurangi ukuran bagian debug dan meningkatkan throughput tautan.  Memperbarui dari 15.9 hingga 16.0 dapat mengurangi ukuran input ke linker hingga 40%. </li><li>  Tautkan peningkatan waktu dalam penggabungan dan pembuatan tipe PDB. </li><li>  Memperbarui ke 16.0 dari 15.9 dapat meningkatkan waktu tautan hingga kecepatan 2X.  Misalnya, menautkan Chrome menghasilkan peningkatan waktu tautan 1,75X saat menggunakan / DEBUG: penuh, dan peningkatan waktu tautan 1,4X saat menggunakan / DEBUG: tautan cepat. </li></ul><br><h3>  Peningkatan Kualitas Hidup </h3><br><ul><li>  Kompiler menampilkan nama file dan jalur menggunakan casing yang disediakan pengguna di mana sebelumnya kompiler menampilkan nama file dan jalur yang lebih rendah. </li><li>  Linker baru sekarang akan melaporkan simbol yang mungkin cocok untuk simbol yang belum terselesaikan, seperti: </li></ul><br><pre> <code class="cpp hljs">main.obj : error LNK2019: unresolved external symbol _foo referenced in function _main Hint on symbols that are defined <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> could potentially match: <span class="hljs-string"><span class="hljs-string">"int __cdecl foo(int)"</span></span> (?foo@@YAHH@Z) <span class="hljs-string"><span class="hljs-string">"bool __cdecl foo(double)"</span></span> (?foo@@YA_NN@Z) @foo@<span class="hljs-number"><span class="hljs-number">0</span></span> foo@@<span class="hljs-number"><span class="hljs-number">4</span></span> main.exe : fatal error LNK1120: <span class="hljs-number"><span class="hljs-number">1</span></span> unresolved externals</code> </pre> <ul><li>  Saat membuat pustaka statis, tidak lagi diperlukan untuk meneruskan flag / LTCG ke LIB.exe. </li><li>  Menambahkan opsi tautan / LINKREPROTARGET: [binary_name] untuk hanya menghasilkan repro tautan untuk biner yang ditentukan.  Ini memungkinkan% LINK_REPRO% atau / LINKREPRO: [direktori_name] diatur dalam bangunan besar dengan banyak tautan, dan penghubung hanya akan menghasilkan repro untuk biner yang ditentukan dalam / linkreprotarget. </li></ul><br><p>  Kami ingin Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengunduh Visual Studio 2019</a> dan mencobanya.  Seperti biasa, kami menyambut umpan balik Anda.  Kami dapat dihubungi melalui komentar di bawah ini atau melalui email ( <a href="">visualcpp@microsoft.com</a> ).  Jika Anda mengalami masalah dengan Visual Studio atau MSVC, atau memiliki saran untuk kami, beri tahu kami melalui <strong>Bantuan&gt; Kirim Umpan Balik&gt; Laporkan Masalah / Berikan Saran</strong> dalam produk, atau melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komunitas Pengembang</a> .  Anda juga dapat menemukan kami di Twitter ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@VisualC</a> ) dan Facebook (msftvisualcpp). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id437670/">https://habr.com/ru/post/id437670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id437656/index.html">Elephant in a china shop: Printer 3D dengan bidang cetak besar</a></li>
<li><a href="../id437658/index.html">Panduan: Thymeleaf + Spring. Bagian 3</a></li>
<li><a href="../id437660/index.html">Pembaruan Profil Seumur Hidup di Visual Studio 2019 Pratinjau 2</a></li>
<li><a href="../id437664/index.html">Pemulihan senyawa</a></li>
<li><a href="../id437666/index.html">Mengumumkan Pratinjau F # 4.6</a></li>
<li><a href="../id437672/index.html">cyberd: Menghitung pengetahuan dari web3</a></li>
<li><a href="../id437674/index.html">Metode pengenalan objek 3D untuk kendaraan tak berawak. Laporan Yandex</a></li>
<li><a href="../id437676/index.html">Universitas dan Akselerator Perusahaan sebagai Pengungkit untuk Meluncurkan Startup B2B di AS</a></li>
<li><a href="../id437680/index.html">Koleksi DIY saya di Youtube</a></li>
<li><a href="../id437682/index.html">Menulis alat templating Kubernet lain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>