<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😫 ❓ 👧🏾 Plus que des couches concentriques 😏 👴🏿 👨🏽‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article fait partie de la Chronique de l'architecture logicielle , une série d'articles sur l'architecture logicielle. J'y écris ce que j'ai appri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plus que des couches concentriques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428431/"><img src="https://habrastorage.org/webt/lm/yh/jm/lmyhjmjqhejzhfwqvxvozhtjt3g.jpeg"><br><br>  <i>Cet article fait partie de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la Chronique de l'architecture logicielle</a> , une série d'articles sur l'architecture logicielle.</i>  <i>J'y écris ce que j'ai appris sur l'architecture logicielle, ce que j'en pense et comment j'utilise les connaissances.</i>  <i>Le contenu de cet article peut avoir plus de sens si vous lisez les articles précédents de la série.</i> <br><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article précédent de la</a> série, j'ai publié une carte conceptuelle qui montre les relations entre les types de code. <br><br>  Mais il m'a toujours semblé que tout ne s'y reflète pas très bien, je ne savais tout simplement pas comment faire mieux.  Il s'agit d'un tronc commun. <br><br>  En outre, quelques réflexions supplémentaires ont surgi que je vais décrire dans ce court article. <br><a name="habracut"></a><br>  Dans l'infographie du dernier article de cette série, au centre même du diagramme, nous voyons le tronc commun.  Il semble être situé à l'intérieur de la couche de domaine et au-dessus des sections coniques, qui sont des contextes limités. <br><br> <a href=""><img src="https://habrastorage.org/webt/mm/07/bx/mm07bx1u2dxlgab0prkzllunvf8.png"></a> <br><br>  Malgré son emplacement, je ne voulais pas dire que le noyau commun dépend du reste du code ou que le noyau commun est une autre couche à l'intérieur du niveau de domaine. <br><br><h1>  Qu'est-ce qu'un tronc commun?! </h1><br>  Le noyau commun, tel que défini par Eric Evans, le <i>père de</i> DDD, est le code que l'équipe de développement décide de répartir entre plusieurs contextes limités: <br><br><blockquote>  [...] un sous-ensemble du modèle de domaine que les deux équipes ont convenu d'utiliser ensemble.  Bien entendu, avec ce sous-ensemble du modèle, le noyau commun comprend un sous-ensemble du code ou de l'architecture de base de données associée à cette partie du modèle.  Ce matériel clairement général a un statut spécial et ne doit pas être modifié sans consulter une autre équipe. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Common Kernel»</a> , DDD Wiki de Ward Cunningham </blockquote><br>  Ainsi, il peut s'agir de tout type de code: code au niveau du domaine, code au niveau de l'application, bibliothèques ... peu importe. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/edc/a8f/2f5/edca8f2f5a6b1ff83123709b2b412e81.jpg"><br><br>  Cependant, dans le contexte de notre carte conceptuelle, je le présente comme un sous-ensemble, comme un type de code spécifique.  Dans ma carte conceptuelle, le noyau commun contient du code pour les niveaux de domaine et d'application, qui est partagé dans des contextes limités afin que la communication entre des contextes restreints soit possible. <br><br>  Par exemple, cela signifie que les événements sont déclenchés dans un ou plusieurs contextes restreints et écoutés dans d'autres contextes restreints.  Avec ces événements, nous devons partager tous les types de données utilisés par ces événements, par exemple: identificateurs d'entité, objets de valeur, énumérations, etc. Les objets complexes tels que les entités ne doivent pas être utilisés directement par les événements, car ils peuvent être difficiles sérialiser / désérialiser vers / depuis la file d'attente, donc le code générique ne doit pas être largement distribué. <br><br>  Bien sûr, si nous avons un système multilingue de microservices, le noyau commun doit être descriptif, en JSON, XML, YAML, etc., afin que tous les microservices puissent le comprendre. <br><br>  Par conséquent, ce noyau commun est complètement séparé du reste de la base de code, des composants.  C'est formidable, car alors les composants, bien que connectés au noyau commun, sont séparés les uns des autres.  Le code générique est explicitement identifié et facilement récupéré dans une bibliothèque distincte. <br><br>  Il est également très pratique si nous décidons d'extraire l'un des contextes limités dans un microservice, séparé du monolithe.  Nous savons avec certitude ce qui est commun et pouvons simplement extraire le noyau commun dans la bibliothèque, qui sera installée à la fois dans le monolithe et dans le microservice. <br><br>  Donc, pour résumer, dans ma carte conceptuelle, le cœur de l'application dépend d'un noyau commun qui contient du code du domaine et des niveaux d'application partagés entre des contextes limités. <br><br><h1>  Quand la langue ne suffit pas ... </h1><br>  Donc, nous avons le code d'application avec toutes les couches concentriques, et le noyau d'application dépend du noyau commun, qui est sous tout ce code. <br><br>  Nous pouvons également dire que tout ce code dépend du ou des langages de programmation utilisés, mais c'est un fait tellement évident que nous avons tendance à l'ignorer complètement. <br><br>  Cependant, la question se pose: "Et si les constructions de langage ne suffisent pas?!"  Eh bien, évidemment, nous créons nous-mêmes ces constructions de langage et compensons ainsi les défauts de la langue.  Mais j'ai des questions de suivi importantes: «Comment et où justifier l'existence de ce code?  Comment indiquer clairement quand et comment l'utiliser? » <br><br>  Ce que j'ai vu et fait moi-même était un paquet appelé Utils ou Commons, où se trouve ce code.  Mais au final, on finit par y jeter tout le code, qu'on ne sait pas où mettre!  Toutes sortes de codes à des fins différentes et faciles à utiliser (enveloppés dans un adaptateur utilisé directement ...) y sont finalement déversés.  Le paquet n'a pas de sens conceptuel, pas de cohérence, pas de cohérence, pas de clarté, beaucoup d'ambiguïtés. <br><br>  Je veux abandonner les packages Utils and Commons! <br><br>  Tous les packages doivent avoir une cohésion conceptuelle!  Il devrait être clair quand et comment utiliser le paquet!  Aucune ambiguïté! <br><br>  Par exemple, si une application interagit avec l'interface de ligne de commande d'une manière spéciale, au lieu de placer 'Acme / Util / SpecialCli' dans l'espace de noms, vous pouvez la placer dans 'Acme / App / Infrastructure / Cli / SpecialCli'.  Cela signifie que ce package est associé à la CLI, il fait partie de l'infrastructure de l'application Acme App.  L'affiliation à l'infrastructure de l'application indique également qu'il existe un port dans le noyau de l'application auquel ce package correspond. <br><br>  Alternativement, si nous voyons ce paquet comme quelque chose qui manque au langage lui-même, nous pouvons le mettre dans l'espace de noms approprié, par exemple, 'Acme / PhpExtension / SpecialCli'.  Cela montre que ce package doit être considéré comme faisant partie du langage lui-même, et donc son code doit être utilisé directement dans la base de code comme toute construction de langage.  Bien sûr, si une autre entreprise dépend de ce package, il peut être raisonnable pour elle de ne pas en dépendre directement, mais il est plus sûr de créer un port / adaptateur afin de pouvoir l'échanger contre autre chose.  Mais si nous possédons le package, nous pouvons le considérer comme faisant partie du langage, car le risque de devoir le remplacer par une autre alternative n'est pas si grand.  Le compromis est toujours la chose. <br><br>  Un autre exemple de ce qui peut être considéré comme faisant partie du langage est les UUID uniques en PHP.  Il est tout à fait possible de les imaginer en dehors du langage, car à chaque fois qu'il y a une nouvelle version et c'est un cauchemar avec support de code, mais c'est un concept très général, un concept large et suffisamment cohérent pour faire partie du langage. <br><br>  Alors pourquoi ne pas créer une implémentation UUID et l'utiliser comme une partie de PHP lui-même, comment utiliser un objet DateTime?!  Pendant que nous contrôlons la mise en œuvre, je ne vois aucun défaut. <br><br>  Qu'en est-il du langage de requête de doctrine (DQL)?  (Doctrine est le port Hibernate en PHP) peut-on regarder DQL comme s'il s'agissait de SQL, Elasticsearch QL ou Mongo QL? <br><br><h1>  Conclusion </h1><br>  Donc, au niveau macro, je vois quatre types de code de base et je pense qu'il est important de les montrer clairement dans l'organisation de la base de code, afin de ne pas se retrouver avec beaucoup de saleté. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c4/861/97e/4c486197ead0a3876b911e49627b8776.png"><br><br>  Pour moi, la vérité indéniable est que l' <b>architecture existe toujours, la seule question est de savoir si on la contrôle ou pas?!</b> <br><br>  Organisons donc <b>clairement le code en fonction de l'architecture</b> , en tout ou en partie, sur une carte conceptuelle - la mienne ou une autre.  L'essentiel est d'organiser le code afin que le projet rende compte explicitement de son architecture à travers la structure et l'organisation du code. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428431/">https://habr.com/ru/post/fr428431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428417/index.html">Apprentissage automatique dans MatLab / Octave: exemples d'algorithmes pris en charge par les formules</a></li>
<li><a href="../fr428419/index.html">Faites glisser et faites glisser dans RecyclerView. Partie 2: glisser-déposer des contrôleurs, des grilles et des animations personnalisées</a></li>
<li><a href="../fr428421/index.html">Système flexible pour tester et collecter des métriques de programme en utilisant la suite de tests LLVM comme exemple</a></li>
<li><a href="../fr428423/index.html">Comment un accord de 34 milliards de dollars entre IBM et Red Hat va changer le marché informatique: experts et analystes</a></li>
<li><a href="../fr428429/index.html">GOST R 34.10 signature électronique de documents PDF dans la suite bureautique LibreOffice</a></li>
<li><a href="../fr428433/index.html">Avocats testeurs privés</a></li>
<li><a href="../fr428435/index.html">Que lire en PHP en russe?</a></li>
<li><a href="../fr428437/index.html">Portefeuille Apple Qu'est-ce que c'est et comment y intégrer votre carte</a></li>
<li><a href="../fr428439/index.html">Sans ensemble</a></li>
<li><a href="../fr428441/index.html">Achat GitHub terminé. Que se passera-t-il ensuite?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>