<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïπÔ∏è üêß ‚õ±Ô∏è Erstellen Sie Ihre Komponente mit Mikrovorlagen üéπ üë¢ üêÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. 
 Jeder, der √ºber das Angular-Framework schrieb, stie√ü irgendwie auf die Angular-Material- Bibliothek (oder arbeitete sogar damit). Die...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie Ihre Komponente mit Mikrovorlagen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454804/">  Hallo an alle. <br>  Jeder, der √ºber das Angular-Framework schrieb, stie√ü irgendwie auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Angular-Material-</a> Bibliothek (oder arbeitete sogar damit).  Dies ist eine sehr gut geschriebene Komponentenbibliothek mit flexiblem Design, die durch die M√∂glichkeit implementiert wird, verschiedene Themen f√ºr Ihre Anwendung mit einer gro√üen Anzahl von Komponenten f√ºr alle Gelegenheiten zu erstellen. <br><br>  In meiner t√§glichen Arbeit kann kein einziges Projekt darauf verzichten. <br><br>  Neben all den Vorteilen der Flexibilit√§t dieser Bibliothek ist es auch m√∂glich, auf die Erfahrung der Entwickler beim Schreiben ihrer eigenen Komponenten zur√ºckzugreifen. Dies ist f√ºr mich das beste Handbuch f√ºr die Best-Practice-Entwicklung in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Angular</a> . <br><br>  In diesem Artikel m√∂chte ich Ihnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mitteilen,</a> wie Sie den Ansatz mit einer komplexen Vorlage implementieren k√∂nnen, die im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MatTableModule-</a> Modul implementiert ist. <br><a name="habracut"></a><br>  Als Beispiel m√∂chte ich zeigen, wie eine <i>Liste von Karten mit der M√∂glichkeit zum Hinzuf√ºgen von Paginierung und Filtern erstellt</i> wird. Als Grundlage verwenden wir das Modellmodell der MatTable-Komponente. <br><br>  Vorlage ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-table</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataSource</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dataSource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mat-elevation-z8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matColumnDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-header-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matHeaderCellDef</span></span></span><span class="hljs-tag">&gt;</span></span> No. <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matCellDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element"</span></span></span><span class="hljs-tag">&gt;</span></span> {{element.position}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matColumnDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-header-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matHeaderCellDef</span></span></span><span class="hljs-tag">&gt;</span></span> Name <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matCellDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element"</span></span></span><span class="hljs-tag">&gt;</span></span> {{element.name}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matColumnDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"weight"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-header-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matHeaderCellDef</span></span></span><span class="hljs-tag">&gt;</span></span> Weight <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matCellDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element"</span></span></span><span class="hljs-tag">&gt;</span></span> {{element.weight}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matColumnDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"symbol"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-header-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matHeaderCellDef</span></span></span><span class="hljs-tag">&gt;</span></span> Symbol <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-cell</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matCellDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element"</span></span></span><span class="hljs-tag">&gt;</span></span> {{element.symbol}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-header-row</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matHeaderRowDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"displayedColumns"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mat-row</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">matRowDef</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let row; columns: displayedColumns;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Nach dem Studium der Vorlage wird deutlich, dass wir in den <b>ng-container-</b> Tags das Markup f√ºr eine bestimmte Spalte der Tabelle angeben, aber wie funktioniert es im Inneren?  Diese Frage stellte ich, als ich dieses Design sah, teilweise aufgrund der Tatsache, dass ich nicht mit dynamischen Komponenten arbeitete.  Und so fangen wir an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">(Quellcode)</a> . <br><br><h2>  Struktur </h2><br>  Eine Reihe von Entit√§ten, die wir erstellen m√ºssen.  Dieses Blockdiagramm veranschaulicht ihre Wechselwirkung. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/69b/791/021/69b79102165ba6e5f7bef7f2fa7ba93a.svg" alt="Bild"><br><br><h2>  Erster Schritt </h2><br>  Wir ben√∂tigen einen Service, um unsere Mikrovorlagen zu registrieren. <br><br><pre> <code class="javascript hljs">@Injectable() <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegisterPropertyDef</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        Map //    -  ,     //          //         private store = new Map&lt;ComponentInstance, Map&lt;string, TemplateRef&lt;T&gt;&gt;&gt;(); setTemplateById(cmp: ComponentInstance, id: string, template: TemplateRef&lt;any&gt;): void { const state = this.store.get(cmp) || new Map(); state.set(id, template); this.store.set(cmp, state); } getTemplate(cmp: ComponentInstance, id: string): TemplateRef&lt;T&gt; { return this.store.get(cmp).get(id); } }</span></span></code> </pre><br><h2>  Zweiter Schritt </h2><br>  Erstellen Sie eine Direktive zum Registrieren von Vorlagen: <br><br><pre> <code class="javascript hljs">@Directive({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'[providePropertyDefValue]'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProvidePropertyDefValueDirective</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ @Input() providePropertyDefValueId: string; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( private container: ViewContainerRef, private template: TemplateRef&lt;any&gt;, //       private registerPropertyDefService: RegisterPropertyDefService&lt;any&gt;, //    @Optional() private parent: Alias&lt;T[]&gt; //             ) {} ngOnInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.container.clear(); <span class="hljs-comment"><span class="hljs-comment">//    ,    this.registerPropertyDefService.setTemplateById( this.parent as ComponentInstance, this.providePropertyDefValueId, this.template ); } }</span></span></code> </pre><br><h2>  Schritt drei </h2><br>  Erstellen Sie eine Komponente: <br><br><pre> <code class="javascript hljs">@Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'lib-card-list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;mat-card *ngFor="let source of sources"&gt; &lt;ul&gt; &lt;li *ngFor="let key of displayedColumns"&gt; &lt;span&gt;{{ findColumnByKey(key)?.label }}&lt;/span&gt; &lt;span&gt; &lt;ng-container [ngTemplateOutlet]="findColumnByKey(key)?.template || default" [ngTemplateOutletContext]="{ $implicit: source }" &gt;&lt;/ng-container&gt; &lt;/span&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/mat-card&gt; &lt;ng-template #default&gt;&lt;/ng-template&gt; `</span></span>, <span class="hljs-attr"><span class="hljs-attr">styles</span></span>: [ <span class="hljs-string"><span class="hljs-string">'mat-card { margin: 10px; }'</span></span> ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CardListComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AfterViewInit</span></span></span><span class="hljs-class"> </span></span>{ @Input() defaultColumns: DefaultColumn[]; @Input() source$: Observable&lt;T[]&gt;; displayedColumns = []; sources: T[] = []; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private readonly registerPropertyDefService: RegisterPropertyDefService&lt;T&gt;, private readonly parent: Alias&lt;T[]&gt;) { } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source$.subscribe(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data: T[]</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sources = data); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.displayedColumns = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.defaultColumns.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.id); } findColumnByKey(key: string): DefaultColumn { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.defaultColumns.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column</span></span></span><span class="hljs-function"> =&gt;</span></span> column.id === key); } ngAfterViewInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.defaultColumns = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.defaultColumns.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(column, { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.registerPropertyDefService.getTemplate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parent <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ComponentInstance, column.id) }) ); } }</code> </pre><br>  Eine kleine Erkl√§rung: Die Hauptaufgabe der Komponente besteht darin, die Definition der Datenstruktur in der <i>ngAfterViewInit-</i> Methode zu erweitern.  Hier aktualisieren wir nach dem Initialisieren der Vorlagen die <i>defaultColumns-</i> Modelle <i>mit</i> Vorlagen. <br><br>  Im Markup k√∂nnen Sie auf die folgenden Zeilen achten: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"findColumnByKey(key)?.template || default"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutletContext</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ $implicit: source }"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Hier wird eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Funktion</a> verwendet, um den Bereich (wie in AngularJS) an das Markup zu √ºbergeben.  Dies macht es bequem, eine Variable in unseren Mikrovorlagen √ºber das <i>let-my-var-</i> Konstrukt zu deklarieren, in dem die Daten liegen werden. <br><br><h2>  Verwenden Sie </h2><br><pre> <code class="xml hljs">// app.component.html <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lib-card-list</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultColumns</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"defaultColumns"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span><span class="hljs-tag">$]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources$"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lib-card-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libProvidePropertyDefValue</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element; id: 'id'"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ element.id }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libProvidePropertyDefValue</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element; id: 'title'"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ element.title }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Initialisierung unserer neuen Komponente und √úbergabe von Parametern an diese. <br><br>  Vorlagendefinition √ºber <i>ng-container</i> und unsere <i>libProvidePropertyDefValue-</i> Direktive. <br><br>  Das Wichtigste hier ist <blockquote>  "Element lassen;  id: 'id' ¬ª </blockquote><br>  Dabei ist <u>Element</u> der Bereich der Vorlage, der dem Objekt mit den Daten aus der Liste entspricht. <br>  <u>id</u> ist die Kennung der Mikrovorlage. <br><br>  Jetzt m√∂chte ich zur Anweisung <b>deployPropertyDefValue</b> und zur Methode <i>ngOnInit zur√ºckkehren</i> <br><br><pre> <code class="javascript hljs"> ngOnInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.container.clear(); ... }</code> </pre><br>  Sie k√∂nnen Mikrovorlagen wie im Beispiel gezeigt platzieren und sie in der Direktive ‚Äûbereinigen‚Äú oder ihre Definition vollst√§ndig in die <i>lib-card-list-</i> Komponente √ºbertragen. Daher sieht das Markup folgenderma√üen aus: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lib-card-list</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultColumns</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"defaultColumns"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span><span class="hljs-tag">$]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources$"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libProvidePropertyDefValue</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element; id: 'id'"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ element.id }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libProvidePropertyDefValue</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let element; id: 'title'"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ element.title }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lib-card-list</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Objektiv - der zweite Anwendungsfall ist produktiver. <br><br><pre> <code class="javascript hljs">@Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-root'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./app.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./app.component.css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">provide</span></span>: Alias, <span class="hljs-attr"><span class="hljs-attr">useExisting</span></span>: forwardRef(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> AppComponent) }] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Alias</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class">&gt; </span></span>{ title = <span class="hljs-string"><span class="hljs-string">'card-list-example'</span></span>; defaultColumns: DefaultColumn[] = [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'ID'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Title'</span></span> } ]; sources$ = <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>([ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'World'</span></span> } ]); }</code> </pre><br>  Hier ist alles ziemlich elementar, das einzige, was zu beachten ist, ist: <br><blockquote>  Anbieter: [{bereitstellen: Alias, useExisting: forwardRef (() =&gt; AppComponent)}] </blockquote>  Dieses Design ist erforderlich, um die Vorlage und die Komponente, die sie verwendet, zu verkn√ºpfen. <br><br>  In unserem Service erh√§lt der Konstruktor eine Instanz der AppComponent-Komponente vom Injektor. <br><br><h2>  Optional </h2><br>  In diesem Beispiel haben wir uns angesehen, wie Sie eine Komponente f√ºr die wiederholte Verwendung in Ihren Projekten erstellen, f√ºr die Sie verschiedene Vorlagen mit Daten √ºbertragen k√∂nnen. Diese Vorlagen k√∂nnen definitiv alles sein. <br><br><h3>  Wie kann man sich verbessern? </h3><br>  Sie k√∂nnen Paginierung aus Winkelmaterial und Filterung hinzuf√ºgen. <br><br><pre> <code class="xml hljs">// card-list.component.html <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mat-paginator</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageSize</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">showFirstLastButton</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mat-paginator</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// card-list.component.ts @ViewChild(MatPaginator) paginator: MatPaginator; this.paginator.initialized.subscribe(() =&gt; { //     }); this.paginator.page.subscribe((pageEvent: PageEvent) =&gt; { //       })</span></span></code> </pre><br>  Das Filtern kann √ºber ein Mat-Form-Feld implementiert werden und √§hnlich wie beim Wechseln der Seiten w√§hrend der Paginierung Daten aktualisiert werden. <br><br>  Das ist alles.  Ich empfehle dringend, regelm√§√üig den Quellcode der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Winkel-</a> / Materialbibliothek zu √ºberpr√ºfen. Meiner Meinung nach ist dies eine gute Gelegenheit, Ihr Wissen bei der Erstellung flexibler und produktiver Komponenten zu erweitern.  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454804/">https://habr.com/ru/post/de454804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454778/index.html">Das Buch "Maschinelles Lernen: Algorithmen f√ºr Unternehmen"</a></li>
<li><a href="../de454780/index.html">Was wir √ºber Microservices wissen</a></li>
<li><a href="../de454788/index.html">Waffe eines vorsichtigen Anlegers: Wir betrachten den beizulegenden Zeitwert von Investmentanleihen</a></li>
<li><a href="../de454790/index.html">Java Native Image: Usability-Pr√ºfung</a></li>
<li><a href="../de454792/index.html">Vergleich von Austauschsortierungsalgorithmen</a></li>
<li><a href="../de454806/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 9. Die physische Welt der Schalter. Teil 1</a></li>
<li><a href="../de454808/index.html">√úber Raumfahrzeuge und Weltraum. So erstellen Sie eine Funktion, indem Sie das gesamte Produkt auf dem Weg √§ndern</a></li>
<li><a href="../de454810/index.html">Frische Luft auf dem Mars: Biegen Sie ein CO2-Molek√ºl und holen Sie sich Sauerstoff</a></li>
<li><a href="../de454816/index.html">Konfigurieren des PHP-Fpm + Nginx-Bundles unter WSL</a></li>
<li><a href="../de454818/index.html">Rekko Challenge - wie man den 2. Platz im Wettbewerb um die Schaffung von Empfehlungssystemen belegt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>