<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¶ üë®‚Äçüöí üíÜüèª Impl√©mentation du mouvement des particules libres sur ReactJS üî´ üë©üèª‚ÄçüöÄ ü§Ωüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations! Je veux vous montrer une des fa√ßons de r√©aliser la libre circulation des particules dans la plage sp√©cifi√©e. J'utiliserai ReactJS pour te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Impl√©mentation du mouvement des particules libres sur ReactJS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440874/">  Salutations!  Je veux vous montrer une des fa√ßons de r√©aliser la libre circulation des particules dans la plage sp√©cifi√©e.  J'utiliserai ReactJS pour terminer cette t√¢che.  Mais l'algorithme lui-m√™me sera toujours g√©n√©ral, et vous pouvez l'utiliser n'importe o√π. <br><br><img src="https://habrastorage.org/webt/zd/pv/v-/zdpvv-bnd2890swktobga8c1fyi.png" alt="image"><br><a name="habracut"></a><br>  √Ä la fin de l'article, nous cr√©erons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une telle chose</a> avec vous. <br><br><h2>  Mauvaise fa√ßon </h2><br>  La premi√®re chose qui vient √† l'esprit pour r√©soudre ce probl√®me est simplement de randomiser X et Y. Voyons ce qui se passe. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/vital-pavlenko/embed/preview/WPLJrz" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Ici, nous randomisons simplement le d√©calage chaque seconde dans la plage de -50 √† 50 en X et en Y: <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">100</span></span> - <span class="hljs-number"><span class="hljs-number">50</span></span></code> </pre> <br>  Et la transition est fluide en utilisant la propri√©t√© de transition css: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">transform</span></span> 1<span class="hljs-selector-tag"><span class="hljs-selector-tag">s</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">linear</span></span>;</code> </pre> <br>  Comme vous pouvez le voir, le r√©sultat n'est pas tout √† fait ce que nous voulions.  Bien s√ªr, vous pouvez le configurer pour que le d√©calage soit ajout√© √† une position existante, alors ce sera plus comme la v√©rit√©.  Mais encore, nous devons aller un peu diff√©remment. <br><br><h2>  Bon chemin </h2><br>  La m√©thode pr√©c√©dente semble si tordue pour plusieurs raisons: <br><br><ol><li>  En r√©alit√©, une particule ne peut pas changer sa direction si brusquement. </li><li>  Les particules pour chaque p√©riode doivent passer une certaine distance </li></ol><br>  Et cela sugg√®re que vous devez randomiser exactement la direction dans laquelle la particule se d√©placera, et dans une certaine plage de degr√©s, afin qu'il n'y ait pas de virages serr√©s.  Nous allons donc r√©soudre le premier probl√®me. <br><br>  Et pour r√©soudre le deuxi√®me probl√®me, nous indiquerons √† l'avance l'√©tape par laquelle la particule doit √™tre d√©cal√©e dans l'intervalle de temps. <br><br>  Maintenant, vous devez vous rappeler le cours de base de la trigonom√©trie.  On conna√Æt la longueur <code>l</code> et l'angle <code>deg</code> .  Besoin de trouver <code>X</code> et <code>Y</code> <br><br><img src="https://habrastorage.org/webt/pm/1r/f3/pm1rf3lr2pugqoys9m-ualevk78.png" alt="image"><br><br><blockquote>  <i><b>le p√©ch√©</b> est le rapport du c√¥t√© oppos√© √† l'hypot√©nuse.</i> <br>  <i><b>cos</b> est le rapport du c√¥t√© √† l'hypot√©nuse.</i> <br></blockquote><br>  Nous obtenons les formules suivantes pour le calcul: <br><br><pre> <code class="javascript hljs">x = cos(deg) * l y = sin(deg) * l</code> </pre><br>  Mais il y a une chose.  En javaScript, <code>Math.sin</code> prend un angle en radians (une <i>valeur de -1 √† 1</i> ).  Par cons√©quent, avant de lancer un coin, vous devez d'abord le convertir en radians. <br><br><pre> <code class="javascript hljs">deg() = deg() * Pi / <span class="hljs-number"><span class="hljs-number">180</span></span></code> </pre> <br>  Nous √©crivons une fonction qui recevra un angle √† l'entr√©e et la distance sur laquelle la particule doit √™tre d√©cal√©e.  Et la fonction <code>{ x, y }</code> avec nos valeurs pour le d√©calage renverra la fonction. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getShift</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">deg, step</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: +(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(deg * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">180</span></span>) * step).toFixed(), <span class="hljs-attr"><span class="hljs-attr">y</span></span>: +(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(deg * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">180</span></span>) * step).toFixed(), }; };</code> </pre><br>  Nous testerons la sortie de notre fonction.  Supposons que nous d√©pla√ßons la particule de 10 <code>10px</code> chaque fois.  Voyons ce que <code>getShift</code> renvoie pour diff√©rents angles. <br><br><img src="https://habrastorage.org/webt/vo/uf/pp/voufppqrdsvi9nacugdsrfa-y4a.png" alt="image"><br><br><pre> <code class="javascript hljs">getShift(<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">// {x: 9, y: 5} getShift(90, 10); // {x: 0, y: 10} getShift(135, 10); // {x: -7, y: 7} getShift(210, 10); // {x: -9, y: -5} getShift(-30, 10); // {x: 9, y: -5}</span></span></code> </pre><br>  Eh bien, il semble que tu sois d'accord? <br><br>  Essayez maintenant de corriger notre premi√®re application √©crite. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/vital-pavlenko/embed/preview/Odroqw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  D√©j√† pas mal!  Reste √† r√©aliser le cadre au-del√† duquel la particule ne pourra pas s'envoler.  Depuis maintenant, tr√®s probablement apr√®s un certain temps, le cercle bleu s'envolera de l'√©cran. <br><br>  Afin de cr√©er le cadre, vous devrez ajouter une nouvelle constante.  Et ajoutez √©galement une condition.  C'est l√† que la boucle while fonctionne pour nous.  S'il y a une restriction sur le chemin, alors nous tournerons le coin jusqu'au virage du cadre. <br><br>  Pour plus de clart√©, ajoutez un carr√© jaune, au-del√† duquel le cercle ne pourra pas voler.  Voici ce qui s'est pass√©: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/vital-pavlenko/embed/preview/xMmJNo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Notre algorithme est compl√®tement pr√™t √† l'emploi.  L'√©tape suivante consiste √† impl√©menter cet algorithme sur ReactJS en utilisant ses capacit√©s. <br><br><h3>  Portage de l'algorithme sur ReactJS </h3><br>  Lors du portage de notre application vers ReactJS, nous nous fixerons les t√¢ches suivantes: <br><br><ol><li>  Cr√©ez un <code>MovingPart</code> wrapper <code>MovingPart</code> dans lequel vous pouvez lancer n'importe quoi. </li><li>  En l'√©tat, nous allons stocker les valeurs de X et Y, car seules elles sont n√©cessaires pour redessiner le composant. </li><li>  √Ä l'ext√©rieur, un composant sera jet√© dans un intervalle, une limite au-del√† de laquelle il est impossible de passer, et une √©tape par laquelle l'√©l√©ment sera d√©plac√© dans un intervalle de temps. </li><li>  <code>MovingPart</code> un peu de joliesse avec plusieurs composants de <code>MovingPart</code> , afin d'imaginer approximativement o√π il peut √™tre appliqu√© dans la vie r√©elle </li></ol><br>  Par cons√©quent, nous obtenons l'exemple suivant: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/vital-pavlenko/embed/preview/wNRMvp" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Nous prendrons les donn√©es initiales du tableau de <code>data</code> . <br><br>  Apr√®s cela, nous d√©crivons le composant <code>MovingPart</code> : <br><br><ul><li>  <b>L'intervalle (intervalle), la distance (distance) et le d√©calage en une seule √©tape (√©tape)</b> nous sortons des accessoires; </li><li>  <b>La rotation maximale pendant le mouvement (maxRotate) et l'angle de d√©calage actuel (deg) sont</b> d√©termin√©s √† l'int√©rieur de l'√©l√©ment; </li><li>  <b>Les valeurs de x et y sont</b> prises √† l'√©tat du composant; </li><li>  <b>La m√©thode getShift est</b> d√©finie comme la m√©thode interne du composant. </li></ul><br>  Apr√®s cela, en utilisant la boucle de <code>map</code> , rendez tous les √©l√©ments, en les enveloppant avec notre composant <code>MovingPart</code> cr√©√©. <br><br>  Merci de votre attention!  C'√©tait mon premier article sur Habr√©, j'esp√®re qu'il vous sera utile.  Essayez-le, exp√©rimentez. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440874/">https://habr.com/ru/post/fr440874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440862/index.html">Mod√®les CI / CD et anti-mod√®les. Partie 1</a></li>
<li><a href="../fr440864/index.html">L'histoire tragique des rencontres poppler</a></li>
<li><a href="../fr440866/index.html">Les t√©l√©phones publics en Russie veulent compl√©ter le minist√®re des situations d'urgence</a></li>
<li><a href="../fr440870/index.html">Comment j'ai patch√© l'univers</a></li>
<li><a href="../fr440872/index.html">PostGIS et JPA</a></li>
<li><a href="../fr440878/index.html">Web Analytics pour les entreprises</a></li>
<li><a href="../fr440880/index.html">Top 10 des capteurs IoT en 2019</a></li>
<li><a href="../fr440882/index.html">√âchapper √† Crypto Pro. √âdition GOST 34.10-2012</a></li>
<li><a href="../fr440884/index.html">Le traitement des erreurs irr√©cup√©rables dans Swift</a></li>
<li><a href="../fr440886/index.html">Suppression logicielle dans l'API REST</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>