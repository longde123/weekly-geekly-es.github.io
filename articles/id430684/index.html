<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖐🏿 🚴🏻 👨‍👩‍👧‍👧 Memindai Kontrak Ethereum Langsung untuk Kesalahan Tidak Terkirim-Kirim. Bagian 2 ⛑️ 👩🏻‍✈️ 🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kelanjutan artikel "Memindai Kontrak Langsung Ethereum untuk Kesalahan Tidak Terkirim-Kirim". Bagian 1 " . 


 Hampir setahun yang lalu (ketika Ethere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Memindai Kontrak Ethereum Langsung untuk Kesalahan Tidak Terkirim-Kirim. Bagian 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430684/"><h3></h3><p>  Kelanjutan artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Memindai Kontrak Langsung Ethereum untuk Kesalahan Tidak Terkirim-Kirim".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1 "</a> . </p><br><p>  Hampir setahun yang lalu (ketika Ethereum dalam rilis "perbatasan"), kontrak lotere EtherPot populer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[9]</a> juga menderita kesalahan yang sama.  Versi BTCRelay sebelumnya juga menunjukkan kesalahan ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[7]</a> .  Meskipun bahaya terdeteksi dalam audit keamanan sebelumnya, koreksi yang salah pertama kali diterapkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[8]</a> . </p><a name="habracut"></a><br><h3>  Deteksi kesalahan yang tidak dicentang-kirim pada blockhain langsung </h3><br><p> Seberapa umum kesalahan ini?  Apakah mereka mendengarkan peringatan?  Apakah praktik terbaik diterapkan?  Kami menjawab pertanyaan-pertanyaan ini secara empiris dengan menganalisis data dari blok-rantai Ethereum, serta repositori kode Soliditas yang ditemukan di etherscrape.com.  Untuk melakukan ini, kami sedang mengembangkan alat analisis program sederhana yang memeriksa kontrak rantai-blok dan menggunakan heuristik untuk memeriksa apakah salah satu metode perlindungan yang paling efektif digunakan.  Listing 2 menunjukkan teknik keamanan pertama, seperti yang direkomendasikan dalam dokumentasi Ethereum, yang harus memeriksa nilai balik dari <strong>mengirim</strong> dan melempar pengecualian.  Untuk mendeteksi penggunaan metode ini, kami menggunakan perkiraan kasar: kami hanya melihat apakah nilai balik <strong>pengiriman</strong> diabaikan atau tidak. <br><br>  Listing 4 mengilustrasikan teknik keamanan kedua yang direkomendasikan dalam manual UMD, yang secara langsung memeriksa apakah <strong>callstack penuh</strong> dengan mengirim pesan pengujian.  Untuk menemukan teknik ini, kami kembali menggunakan perkiraan kasar: kami hanya memeriksa untuk melihat apakah pesan sedang dikirim selain perintah <strong>kirim</strong> . <br><br>  Jika tidak ada indikator heuristik ini hadir, kami menyimpulkan bahwa tidak ada satu pun rekomendasi praktik terbaik yang diikuti.  Kami menerapkan heuristik ini menggunakan pencocokan pola sederhana dengan bytecode EVM yang dikompilasi.  Rincian lebih lanjut tentang bagaimana kami melakukan ini dapat ditemukan di Lampiran <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[12]</a> . </p><br><h3>  Berapa banyak kontrak yang rentan? </h3><br><p>  Mari kita mulai dengan memeriksa heuristik dalam repositori Etherscrape dari kode sumber Solidity.  Pada 20 Maret 2016, relay Etherscrape berisi 361 program kontrak Soliditas, 56 di antaranya berisi pernyataan kirim.  Dari program kontrak ini, kami mengasumsikan bahwa sebagian besar (setidaknya 36 dari 56) tidak menggunakan metode pemrograman defensif. <br><br>  Sekalipun kontrak tidak menggunakan teknologi perlindungan apa pun, kontrak mungkin atau mungkin tidak memiliki kerentanan nyata.  Kami secara manual memeriksa kontrak Soliditas untuk mengonfirmasi kerentanan.  Untuk tujuan kami, kami menganggap kontrak rentan jika keadaannya dapat berubah meskipun perintah <strong>kirim</strong> tidak berfungsi (jadi kami akan melihat kode rentan di Listing 5).  Kami mengkonfirmasi bahwa sebagian besar kerentanan ada, 32 dari 36 kontrak ini. <br></p><br><p>  Demikian juga, heuristik kami tidak menjamin aplikasi pemrograman defensif yang benar.  Ambil contoh, WeiFund, crowdfunding open-source DApp yang terdesentralisasi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=http://hackingdistributed.com/2016/06/16/scanning-live-ethereum-contracts-for-bugs/-%2520">Kontrak ini</a> memiliki dua fungsi: <strong>pengembalian uang ()</strong> dan <strong>pembayaran ()</strong> , yang menipu heuristik kami.  Berikut ini adalah kutipan dari <strong>pengembalian dana</strong> . <br></p><br><p></p><pre><code class="plaintext hljs">function refund(uint _campaignID, uint contributionID) public { ... receiver.send(donation.amountContributed); donation.refunded = true; ... if(c.config != address(0)) WeiFundConfig(c.config).refund(_campaignID, donation.contributor, donation.amountContributed); }</code> </pre> <br><p>  Dalam kode ini, pesan dikirim ke WeiFundConfig (c.config) untuk meminta metode pengembalian dana, tetapi hanya dalam kondisi tertentu.  Jika c.config adalah nilai nol, maka kontrak tersebut benar-benar rentan terhadap serangan callstack.  Saat memeriksa *, tidak ada program Solidity yang lulus pengujian heuristik kami yang benar-benar menerapkan praktik pengujian callstack terbaik yang direkomendasikan secara langsung.  * <br><br>  Kemudian kita mengalihkan perhatian kita ke kontrak yang dirancang pada Ethereum block-chain yang masih hidup.  Kami melihat gambar tanggal 20 Maret 2016 (waktu: 1184243).  Cuplikan ini berisi total 13645 rantai blok, yang tampaknya dihasilkan oleh kompiler Soliditas, di mana hanya 1.618 (11,8%) termasuk perintah <strong>kirim</strong> . <br><br>  Dari jumlah tersebut, sebagian besar tampaknya tidak menggunakan teknik pemrograman defensif. <br></p><br><p>  Bagaimana dengan masalah balapan rekursif di TheDAO?  Kontrak pintar yang paling menarik saat ini, TheDAO <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[11]</a> , menderita kesalahan yang benar-benar terpisah, yaitu tidak aman untuk digunakan kembali <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[13]</a> .  Ini adalah jenis pemrograman lain yang tidak terhubung (terhubung, tetapi berbeda), yang juga diharapkan dalam pemeriksaan keamanan sebelumnya <a href="">[6]</a> , tetapi, seperti sebelumnya, ada kemungkinan banyak kontrak tidak aman saat ini.  Pekerjaan di masa depan adalah membuat alat yang juga bisa mendeteksi kesalahan seperti itu. <br></p><br><h3>  Di mana semuanya salah? </h3><br><p>  Kami tidak berharap pemrograman pada kontrak pintar menjadi sangat sederhana, setidaknya untuk saat ini.  Namun, mengejutkan bahwa bentuk kesalahan khusus ini begitu luas, terlepas dari kenyataan bahwa itu telah dideskripsikan sejak lama selama pengembangan ekosistem Ethereum. <br><br>  Laporan 2015 <a href="">[6]</a> membuat rekomendasi ini kepada pengembang Ethereum: " <br><br>  Saat ini, contoh pemrograman yang disajikan dalam dokumentasi tidak cukup untuk menyebarkan praktik terbaik untuk menulis kontrak aman dan menyelesaikan masalah mekanisme gas.  Tutorial pengantar C ++ sering dilewati <br>  memeriksa kesalahan untuk keterbacaan, yang menyebabkan banyak kesalahan keamanan.  Contoh Ethereum harus mengajarkan kebiasaan terbaik.  Rekomendasi: Berikan lebih banyak lagi contoh pemrograman kontrak keamanan yang cermat. " <br><br>  Kami hanya tahu satu jawaban resmi untuk pertanyaan ini, yaitu menambahkan peringatan ke dokumentasi Solidity resmi yang disebutkan sebelumnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[3],</a> diulangi di bawah ini: "Ada beberapa bahaya saat menggunakan <strong>kirim</strong> : Transmisi gagal jika kedalaman tumpukan panggilan adalah 1024 (ini selalu dapat dipanggil oleh penelepon), dan juga gagal jika penerima kehabisan bensin, sehingga untuk memastikan siaran yang aman, selalu periksa nilai balik <strong>pengiriman</strong> atau bahkan lebih baik: gunakan pola  di mana penerima menarik uang. " </p><br><p>  Kami percaya bahwa pengamatan ini tidak cukup untuk mendokumentasikan masalah.  Ini hanya menawarkan mitigasi yang tidak lengkap dan hanya menjelaskan satu versi dari bahaya, berpotensi menyesatkan pembaca tentang tingkatannya. </p><br><ul><li><p>  Perbarui: <br>  Ketidakcukupan dokumentasi Soliditas juga diilustrasikan secara rinci oleh Peter Wesenes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">[16]</a> </p><br></li></ul><p>  Selain itu, peringatan itu tampaknya sering diabaikan.  Oleh karena itu, kami percaya bahwa tindakan pencegahan tambahan diperlukan. </p><br><br><h3>  Bagaimana Etherscrape dapat membantu? </h3><br><p>  Kami percaya bahwa menggunakan alat analisis statis, bahkan yang kasar, seperti yang dijelaskan dalam posting ini, dapat membantu meningkatkan kualitas kontrak pintar. Di Etherscrape, kami mengintegrasikan alat analisis seperti ini ke dalam layanan web publik kami, dan kami menambahkan tautan ke halaman alat kapan dia akan siap.  Ini akan membuatnya lebih mudah untuk melihat kode kontrak pintar dengan menyoroti tempat-tempat di mana kesalahan dapat terjadi.  Kami berasumsi bahwa pengguna kontrak pintar semacam itu (misalnya, calon investor di TheDAO atau penawarannya) dapat dengan mudah menggunakan alat seperti cek kewarasan sebelum menyetor uang mereka.  Bahkan investor non-teknis dapat meminta pertanggungjawaban pengembang untuk menjelaskan bagaimana mereka bereaksi terhadap masalah yang dicatat dalam kode. <br><br>  Etherscrape juga membantu dengan menganalisis blok-publik dan mengendalikan prevalensi kesalahan ini, yang dapat membantu dalam memutuskan, misalnya, berapa banyak uang yang harus dialokasikan untuk penelitian dan pengembangan alat analisis statis.  Selain itu, kompiler seperti <strong>solc</strong> dapat mengintegrasikan analisis tersebut, memberikan peringatan kepada programmer ketika kesalahan tampaknya terjadi. <br></p><br><h3>  Bacaan yang Disarankan </h3><br><ul><li>  [1] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Langkah-demi-Langkah Menuju Membuat Kontrak Cerdas yang Aman</a> <br></li><li>  [2] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panduan Programmer UMD untuk Ethereum dan Serpent (Bagian 5.14)</a> <br></li><li>  [3] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumen Soliderum Resmi Ethereum</a> <br></li><li>  [4] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Raja Eter: Investigasi Pasca-Mortem</a> <br></li><li>  [5] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Swende tentang Keamanan Kontrak</a> <br></li><li>  [6] <a href="">Audit Otoritas Paling Sedikit Ethereum</a> <br></li><li>  [7] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Audit Relai BTC 1</a> <br></li><li>  [8] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Audit Relai BTC 2</a> <br></li><li>  [9] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Laporan Bug Keamanan EtherPot</a> <br></li><li>  [10] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kontrak Reentrant</a> <br></li><li>  [11] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DAO (Organisasi Otonomi Terdesentralisasi)</a> <br></li><li>  [12] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lampiran A: Detail tentang bagaimana kami menganalisis blockchain</a> <br></li><li>  [13] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panggilan untuk Moratorium Sementara tentang DAO</a> <br></li><li>  [14] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lampiran B: Kontrak Soliditas Rentan</a> <br></li><li>  [15] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lampiran C: Kontrak Blockchain Rentan</a> <br></li><li>  [16] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ethereum Duka</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dompet: Kirim dengan Lempar Berbahaya</a> <br></li></ul><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id430684/">https://habr.com/ru/post/id430684/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id430674/index.html">Logika membangun jadwal kerja universal</a></li>
<li><a href="../id430676/index.html">Barang antik: shshshsh, sssssss, VOIP, BBS dan teman-teman modem lainnya</a></li>
<li><a href="../id430678/index.html">Uji sepuluh dimmer dengan lampu LED</a></li>
<li><a href="../id430680/index.html">Menulis prosesor dan lingkungan yang sederhana untuknya</a></li>
<li><a href="../id430682/index.html">Tiga tahun proyek mikrosatelit bulan: tahap-tahap pertumbuhan</a></li>
<li><a href="../id430686/index.html">Tinjauan: Mesin pemotong waterjet pertama WAZER</a></li>
<li><a href="../id430688/index.html">Transfer data melalui animasi QR ke Gomobile dan GopherJS</a></li>
<li><a href="../id430690/index.html">Pengecualian deterministik dan penanganan kesalahan dalam “C ++ of the future”</a></li>
<li><a href="../id430692/index.html">Rekayasa Sosial dengan Perangkat Lunak Universal Windows Platform (APPX)</a></li>
<li><a href="../id430694/index.html">Panduan singkat untuk mempelajari C ++: apa, kapan dan apa yang harus dibuat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>