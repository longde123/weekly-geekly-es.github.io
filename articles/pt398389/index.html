<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçØ üëµüèΩ üë¶üèº Gato piada KiQ ou como fizemos um brinquedo falante para adultos üëßüèø üë®‚Äç‚úàÔ∏è üë®üèª‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No mundo, h√° uma quantidade incr√≠vel de brinquedos falantes para crian√ßas, e isso s√≥ d√° a impress√£o de que os adultos ficam entediados. Nossa equipe d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gato piada KiQ ou como fizemos um brinquedo falante para adultos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398389/"><img src="https://ksr-ugc.imgix.net/assets/013/958/564/d6c061618e04b2f7d81d1d88c07c543d_original.jpg?w=680&amp;fit=max&amp;v=1475469443&amp;auto=format&amp;q=92&amp;s=94a8eb1e4d730d541ec407637a1490ee" alt="Brinquedo kiq"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No mundo, h√° uma quantidade incr√≠vel de brinquedos falantes para crian√ßas, e isso s√≥ d√° a impress√£o de que os adultos ficam entediados. </font><font style="vertical-align: inherit;">Nossa equipe decidiu corrigir esta situa√ß√£o.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O come√ßo da hist√≥ria</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo come√ßou com o fato de que a mente inquiridora do meu amigo e colega </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netsnail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> veio a brilhante id√©ia: piadas porque n√£o s√≥ as crian√ßas, mas os adultos n√£o amuse tem√°ticos? O benef√≠cio do ferro acess√≠vel e comprovado agora nunca √© uma raridade, e pode n√£o apenas piscar com as luzes, mas tamb√©m </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cantar m√∫sicas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A esse respeito, ele me ligou e se ofereceu para </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repetir a fa√ßanha √©pica para</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> garantir que o ESP8266 reproduz m√∫sica MP3 na rede para que seja bom e </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se o hamster est√° rasgando em peda√ßos,</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> h√° desempenho realmente suficiente, o que eu fiz em um r√°pido feriado de Ano Novo em 2016:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pW-BoVe46O8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O ESP8266 reproduz um r√°dio da Internet no v√≠deo, emitindo som usando o PWM de 5 bits via I2S hack. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, tocar r√°dio MP3 da Internet consumiu quase todo o recurso ESP8266 e soou "mais ou menos", enquanto a imagina√ß√£o j√° nos atra√≠a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algo mais do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que apenas uma coluna de r√°dio MP3. </font><font style="vertical-align: inherit;">Com esses impulsos criativos, fomos √† nossa equipe e ao amado chef </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vladimir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de um pouco de reflex√£o, uma imagem mais detalhada e at√© uma </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadeia l√≥gica</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do que n√£o apenas queremos, mas podemos fazer:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para substituir o MP3 por algo menos exigente em recursos e mais livre, paramos no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn portou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com sucesso e rapidez para o ESP8266.</font></font><br>
<br>
</li>
<li>           SD , ..    ,    ESP8266     ‚Äî    .<br>
<br>
</li>
<li> ¬´ ¬ª  - ,     random .     ,        .         Apple Notification Center Service (ANCS),     iPod, iPhone  iPad.<br>
<br>
</li>
<li>     Bluetooth Low Energy (BLE),            .<br>
<br>
</li>
<li>                .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pawn language</a>.<br>
<br>
</li>
<li>       ,           ‚Äî          ¬´¬ª  ¬´¬ª (),   -        .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, eu queria criar um prot√≥tipo muito simples, mas totalmente funcional, em uma placa tudo em um, ent√£o decidimos experimentar o </font><font style="vertical-align: inherit;">MediaTek </font><font style="vertical-align: inherit;">no </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkIt ONE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . E a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netsnail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conseguiu quase imediatamente. Havia uma conex√£o com o telefone e, a partir do cart√£o SD, o MP3 tocava perfeitamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece - aqui est√° a felicidade e uma plataforma pronta! Mas ent√£o nos deparamos com a </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dura realidade das</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> limita√ß√µes de seu SDK fechado e a euforia passou. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Percebemos que a plataforma pronta em uma placa, satisfazendo todos os nossos desejos, n√£o estava na natureza, o que significa que tivemos que cri√°-la do zero.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, tivemos que escolher (fevereiro de 2016) o chip BLE mais adequado, que precisava ser conectado ao ESP8266. </font><font style="vertical-align: inherit;">Como uma conex√£o entre o ESP8266 e o ‚Äã‚Äãchip BLE (ainda n√£o sab√≠amos que tipo de chip seria), decidimos usar o TWI padr√£o (I2C). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas com o BLE, a escolha n√£o foi muito boa:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI CC2541</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - De alguma forma, n√£o gostei imediatamente devido √† arquitetura do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e 8 Kb de RAM pareciam uma vida f√°cil e sem promessas, considerando o n√∫mero de servi√ßos e caracter√≠sticas de BLE que precis√°vamos no brinquedo.</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BCM20732</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - parecia muito promissor, mas na verdade o SDK acabou sendo muito grosseiro, e o "chaveiro" Broadcom WICED Smart BLE √© t√£o buggy que eu n√£o escrevo nada aqui para n√£o jurar. </font><font style="vertical-align: inherit;">Deixe-me saber se a situa√ß√£o melhorou agora.</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nRF52832</a> ‚Äî  ,   .      BLE  ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">rekod</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>, SDK  ,    <i></i> .  BLE ANCS          iPhone    UART.           SEGGER J-Link,       .<br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nRF51822</a> ‚Äî      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>,     SEGGER  nRF52832.      ‚Äî     nRF52832     nRF51822  !</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, o primeiro ferro parecia </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uma aranha tar√¢ntula,</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> algo assim: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic1.jpg" alt="aranha de ferro"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
foi muito triste detectar falhas devido √† queda de cabos duplos, especialmente no m√≥dulo nRF51822, onde os pinos eram um pouco menores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos BLE no aplicativo nRF51822 e iOS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, eu e o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com este iron spider come√ßamos a implementar servi√ßos e recursos BLE no nRF51822, dividindo tudo em cerca de metade:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßo do Centro de Notifica√ß√£o da Apple ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANCS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - para receber notifica√ß√µes de eventos de um smartphone.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßo de hor√°rio atual da Apple (CTS) - quando conectado, o brinquedo leva tempo do telefone.</font></font></li>
<li>HandShake Service (HSS) ‚Äî  , ,   ¬´¬ª        .   ,     lientID      pair     Bluetooth,    ,      .      ,    .</li>
<li>Battery As Service (BAS) ‚Äî       .</li>
<li>Content Service (CONTS) ‚Äî       ,   (     ).</li>
<li>Settings Service (SETTS) ‚Äî       ,      (, )  ..</li>
</ul><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O MaximKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao mesmo tempo estava fazendo um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicativo para iOS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://ksr-ugc.imgix.net/assets/013/983/125/8dfbfd651b320b4818fa9ed65ebf67fc_original.jpg?w=680&amp;fit=max&amp;v=1475618060&amp;auto=format&amp;q=92&amp;s=952c7ac032d25e8b72ec4425cad5891d" alt="imagem"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A imagem √† direita mostra a tela principal do aplicativo. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o aguentou nosso sofrimento por causa da queda de fios e fez o </font><font style="vertical-align: inherit;">primeiro prot√≥tipo normal </font><font style="vertical-align: inherit;">em casa com um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ferro a laser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic2.jpg" alt="primeiro prot√≥tipo mais ou menos"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o √© vis√≠vel na foto, mas j√° existe um slot para cart√£o microSD. </font><font style="vertical-align: inherit;">No pequeno xale quadrado abaixo - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALC5627</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o som j√° era muito melhor do que o PWM de 5 bits via I2S. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">O AXP209 foi</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
escolhido para </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">gerenciamento de</font></a><font style="vertical-align: inherit;"> energia</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Permite carregar e usar a bateria ao mesmo tempo, al√©m de monitorar sua condi√ß√£o. </font><font style="vertical-align: inherit;">O chip √© muito comum, mas tem muitas especificidades tanto na programa√ß√£o quanto nos componentes externos necess√°rios, os chamados </font><font style="vertical-align: inherit;">"Arn√™s".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°gica no ESP8266</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em paralelo, a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> portou o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FatFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para o ESP8266, criou um gerenciador de inicializa√ß√£o para o ESP8266 e o ‚Äã‚ÄãnRF51822, para que n√£o fosse poss√≠vel atualizar o firmware por cabo, mas para isso, colocando os arquivos de firmware em um cart√£o microSD. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pessoalmente, parece-me que os alien√≠genas o ajudaram, j√° que ele fez tudo isso em cerca de um m√™s. Mas ele n√£o admite estar em contato com uma mente alien√≠gena. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o o segundo prot√≥tipo mais normal: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic3.jpg" alt="primeiro prot√≥tipo mais ou menos"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mas o prot√≥tipo mais normal n√£o subiu mais em um brinquedo macio. E mesmo que ele entrasse, com um movimento agudo de um brinquedo em um usu√°rio em potencial, um "estranho" subiria, o que, obviamente, era inaceit√°vel para o MVP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por isso, decidiu-se solicitar uma taxa aos profissionais e foi o que aconteceu como resultado:</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic4.jpg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse design j√° se encaixa perfeitamente no gato, embora pare√ßa algo desumano: </font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic5.jpg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ao mesmo tempo, confirmou-se o receio de que os eventos do telefone pudessem ocorrer com bastante frequ√™ncia e, como resultado, o usu√°rio ficaria irritado em vez de divertido. Foi necess√°ria uma l√≥gica de filtragem flex√≠vel, que pode ser facilmente alterada a qualquer momento sem piscar. Nesse sentido, tendo estudado o material e percebido que n√£o h√° scripts r√°pidos e compactos para o ESP8266 (Lua e microPython s√£o int√©rpretes), decidi portar a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linguagem Pawn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que rapidamente (apenas 18 vezes mais lenta que a nativa) executa um bytecode compacto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, as fontes de pe√£o s√£o muito semelhantes ao C, por isso √© um prazer modificar os scripts - basta compil√°-los no bytecode AMX e copi√°-los para um cart√£o SD.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aparelhos de trapa√ßa. </font><font style="vertical-align: inherit;">Finja ser iOS no Android</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o "de repente", todos nos lembramos que os telefones Android no mundo n√£o s√£o t√£o pequenos, mas ainda mais do que os telefones com iOS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, tive que acelerar para verificar se podemos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enganar os gadgets e fingir ser iOS no Android</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que eles vejam o servi√ßo ANCS indistingu√≠vel da Apple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, tudo deu certo e depois de uma semana os gadgets (e nosso gato n√£o √© exce√ß√£o) acreditavam sinceramente que eu tinha um iPhone com servi√ßo ANCS, conectando-me ao meu Nexus 5 e at√© ao antigo Samsung Galaxy com Android 4.4.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go cloud</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ningu√©m gosta de ouvir uma piada v√°rias vezes (fato), e tamb√©m existem prefer√™ncias e restri√ß√µes culturais, foi decidido para cada usu√°rio criar uma lista de reprodu√ß√£o exclusiva. Para fazer isso, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ocorreu com o servidor na nuvem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas como decidir quem vai gostar? √â isso mesmo - deixe o usu√°rio decidir! Para fazer isso, fiz uma detec√ß√£o b√°sica de gestos no aceler√¥metro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIS3DH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da STMicroelectronics. Gostei da piada - inclinei o gato como se fosse "sim", n√£o gostei da piada - me inclinei para o lado, como se "n√£o". </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E ele acrescentou um "mios√≥tis" para o telefone - se a conex√£o BLE for perdida e o aceler√¥metro detectar movimento, o gato estar√° sendo transportado para algum lugar e o telefone ser√° esquecido.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o usu√°rio "polikal" e, assim, designar suas prefer√™ncias - as informa√ß√µes v√£o para um servidor no qual os "genomas" das listas de reprodu√ß√£o s√£o comparados e novos conjuntos de piadas s√£o gerados para o usu√°rio. </font><font style="vertical-align: inherit;">Mas este √© um t√≥pico para um artigo separado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, o entretenimento acabou sendo uma excelente plataforma que pode:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunique-se com o telefone via BLE e receba notifica√ß√µes de eventos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunique-se via Wi-Fi e fa√ßa o download de atualiza√ß√µes de conte√∫do e firmware;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salvar e ler arquivos no FAT32 no microSD;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fa√ßa piadas repletas de codec speex;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Determinar as prefer√™ncias do usu√°rio usando um aceler√¥metro (detec√ß√£o de gestos)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">criar listas de reprodu√ß√£o para cada usu√°rio com base em suas prefer√™ncias de humor;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que √© digno de nota: ‚Äúal√ßas muito inteligentes‚Äù podem muito bem ser conectadas aos pinos correspondentes (at√© os orif√≠cios dos conectores na placa s√£o deixados) e ‚Äúsensatez o gato‚Äù como bem entenderem. </font><font style="vertical-align: inherit;">Isso torna a plataforma multifuncional atraente para os geeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com esta plataforma, iniciamos o kickstarter, chamando o brinquedo acabado de KiQ. </font><font style="vertical-align: inherit;">No primeiro dia, 40% foram coletados e agora 57%. </font><font style="vertical-align: inherit;">Mas esta √© uma hist√≥ria completamente diferente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado a todos que leram at√© esta linha. </font><font style="vertical-align: inherit;">√Ä espera de perguntas interessantes de voc√™.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt398389/">https://habr.com/ru/post/pt398389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt398377/index.html">O que √© informa√ß√£o em termos de f√≠sica?</a></li>
<li><a href="../pt398379/index.html">Seu t√°xi n√£o tripulado chega</a></li>
<li><a href="../pt398381/index.html">Prot√≥tipo do rob√¥ de lapso de tempo do Arduino</a></li>
<li><a href="../pt398385/index.html">Ilus√µes do c√©rebro. A primeira alucina√ß√£o universal do mundo</a></li>
<li><a href="../pt398387/index.html">Ataque de carro: batalha feroz</a></li>
<li><a href="../pt398391/index.html">"Cinza, golpe, legal ...", ou a l√≥gica do controle do clima em uma casa inteligente</a></li>
<li><a href="../pt398393/index.html">A Nikon D5500a refrigerada tira fotos espantosas do espa√ßo</a></li>
<li><a href="../pt398395/index.html">Uau: nobel em vez de ondas gravitacionais foi dado para a topologia</a></li>
<li><a href="../pt398397/index.html">Fontes de raios X ultrabright foram encontradas em duas gal√°xias antigas. Um novo fen√¥meno natural?</a></li>
<li><a href="../pt398399/index.html">Digest√£o autom√°tica: tecnologias do presente e do futuro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>