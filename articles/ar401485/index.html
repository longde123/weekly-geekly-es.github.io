<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚠️ 👨🏾‍🏭 🧙 اختبار أداء خادم السحابة باستخدام قلعة القزم 🤦 👨‍👨‍👦 🚌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dwarf Fortress هي لعبة أسطورية تحاكي عالم الخيال بالتفصيل ، ويمكن للاعب (في أحد الأوضاع) بناء وإدارة تسوية (حصن) من التماثيل (الأقزام). لقد كتب ما يكف...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>اختبار أداء خادم السحابة باستخدام قلعة القزم</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401485/" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Dwarf Fortress</a> هي لعبة أسطورية تحاكي عالم الخيال بالتفصيل ، ويمكن للاعب (في أحد الأوضاع) بناء وإدارة تسوية (حصن) من التماثيل (الأقزام).  لقد كتب ما يكفي عن اللعبة ، لذلك لن أخوض في التفاصيل.  من المهم أنه نظرًا للحجم الكبير لعالم اللعبة والتفاصيل العالية للمحاكاة ، فإن اللعبة تتطلب الكثير من الموارد - كل من المعالج والذاكرة / ذاكرة التخزين المؤقت.  تدعم اللعبة جميع أنظمة التشغيل الرئيسية الثلاثة. <br><br>  هناك مشروع DFHack للعبة ، والذي يشارك في الهندسة العكسية لهياكل بيانات اللعبة ويسمح لك بإنشاء الإضافات والنصوص البرمجية في C ++ أو Lua أو Ruby. <br><br>  أنا مؤلف التطبيق ورمز الخادم المصاحب الذي ينفذ بالكامل واجهة مستخدم اللعبة على أجهزة iOS.  أي أن المستخدم يضع اللعبة الأصلية والمكون الإضافي والتطبيق ويمكنه اللعب عن بعد من جهاز محمول بكل وسائل الراحة. <br><br>  يمكن تثبيت الخادم في المنزل واستئجاره من أحد مزودي الخدمات السحابية.  وقد ولدت فكرة هذه الدراسة - أولاً ، لمعرفة أي الخدمات السحابية الأنسب ويمكن التوصية بها للمستخدمين في المقام الأول ، وثانياً ، مقارنة أداء الخادم باستخدام شيء مختلف عن خوادم الويب والمرافق الخاصة . <br><a name="habracut"></a><br>  للاختبار ، تم استخدام إصدار Dwarf Fortress / DFHack 0.43.03-r1.  لدي صورة عامة لـ Docker ، بما في ذلك اللعبة نفسها والحد الأدنى من إصدار DFHack (بالإضافة إلى رمز الخادم نفسه للعبة البعيدة ، ولكن في هذه الحالة لا يتم استخدامه).  تمت كتابة برنامج نصي في Lua لإجراء الاختبارات وإرسال النتائج إلى خادم الويب.  أيضًا للأتمتة ، تم استخدام البرنامج النصي التالي ، المحدد في بيانات المستخدم عند تكوين الخوادم.  أي أنك تحتاج فقط إلى إنشاء خادم ، وانتظر حتى تصل النتائج وحذفها. <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash fallocate -l 4G /swp ; chmod 600 /swp ; mkswap /swp ; swapon /swp ; echo '/swp none swap sw 0 0' &gt;&gt;/etc/fstab apt-get update apt-get install -fy docker.io apt install unzip wget https://github.com/mifki/dfremote-cloud-benchmark/raw/master/benchmark.lua wget http://mifki.com/a/t/gloveloved.zip unzip gloveloved.zip -d save/ docker run --name=df -dt -v $PWD/save:/df_linux/data/save -v $PWD/benchmark.lua:/df_linux/hack/scripts/benchmark.lua mifki/dfremote sleep 5 docker exec df /df_linux/dfhack-run benchmark server_name</span></span></code> </pre> <br>  تم اختبار الموفرين التاليين: Digital Ocean و Amazon Lightsail و Amazon EC2 و Vultr و Linode و Google Compute Engine و Macbook Pro Late 2013 2Ghz Core i7. <br><br>  إذا كانت الخدمة السحابية تدعم إنشاء خادم باستخدام Docker بنقرة واحدة ، فعندئذٍ تم استخدام هذه الميزة ، إذا لم تكن كذلك ، فقد تم تحديد إصدار Ubuntu 16.04.  وبالتالي ، لم يستخدم Vultr سوى Ubuntu ، ولكن CentOS 7. بالنسبة للخوادم التي تحتوي على أكثر من 2 غيغابايت من الذاكرة ، لم يتم استخدام ملف المبادلة.  بالنسبة لمحرك Google Compute Engine الصغير والصغير ، تم تحديد محرك أقراص SSD. <br><br>  تم اختيار أرخص خيارات الخادم ، أولاً ، لأنها أكثر إثارة للاهتمام لأولئك الذين سيستخدمونها للعبة ، وثانيًا ، لأن Dwarf Fortress لا يزال يستخدم نواة معالج واحدة فقط للمحاكاة و (في الإصدار المحدد) تطبيق 32 بت. <br><br><h3 style=";text-align:right;direction:rtl">  الاختبارات </h3><br>  تتكون طريقة اللعب في Dwarf Fortress من جزأين - جيل العالم والقصة الأولية ، حيث يمكنك تحديد حجم العالم وطول القصة (ومعلمات أخرى) ، وعملية اللعبة نفسها.  باستمرار ، بدون إعادة تشغيل اللعبة ، تم إجراء الاختبارات التالية: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  توليد عالم بحجم صغير جدا مع تاريخ طويل جدا. </li><li style=";text-align:right;direction:rtl">  توليد عالم كبير الحجم مع تاريخ قصير. </li><li style=";text-align:right;direction:rtl">  اللعب.  استخدام واحدة من "المجموعة" (عندما يلعب العديد من الأشخاص بدورهم) - إنقاذ القفازات (Anethadefíni ، 254).  الاختيار ليس مهمًا جدًا ، طالما أن هناك حصنًا كبيرًا بما فيه الكفاية ، ولا يحدث أي شيء من شأنه إيقاف اللعبة تلقائيًا أثناء الاختبار ، والذي استمر لمدة 20 يومًا داخل اللعبة. </li></ol><br>  الاختبار الأخير هو الأهم ، أولاً ، لأنه اللعبة نفسها ، التي يحدث لها كل شيء ، وثانياً ، أنها أقل تأثراً بالصدفة من جيل العالم (حيث الحضارات والمستوطنات والمناظر الطبيعية والأحداث و إلى آخره). <br><br><h3 style=";text-align:right;direction:rtl">  النتائج </h3><br>  هذا هو الجدول الزمني.  وقت التنفيذ بالثواني ، على التوالي ، الأقل هو الأفضل.  الأسعار الشهرية بالدولار الأمريكي. <br><br><img src="https://habrastorage.org/files/d87/d72/2de/d87d722deebd43f48670376da89c58f7.png" alt="الصورة"><br><br>  يظهر انتشار غير طبيعي في نتائج الاختبار الأول على الفور ، ولا أعرف بالضبط ما يرتبط به.  أعتقد ، جزئيًا مع التخزين المؤقت ، جزئيًا مع الأداء الضعيف للخادم الذي تم إنشاؤه حديثًا لسبب ما.  لذلك ، يتم فرز النتائج حسب الاختبار الأخير ، وهو ، كما لوحظ ، هو الأكثر أهمية.  يرتبط الاختبار الثاني بشكل عام بنتائج الاختبار الثالث. <br><br>  بصرف النظر عن المركز الأول المتوقع على الخادم EC2 c4.large ، وهو نوع محسن من الأداء من C4 ، تبين أن Amazon Lightsail هو الأسرع ، والذي يعتبر السعر مفاجأة سارة للغاية ، بالنظر إلى السعر.  ويتبعه نفس النتيجة تقريبًا من خادم Google أحادي المعالج والكمبيوتر المحمول.  علاوة على ذلك ، تبين أن Vultr ، Linode ، التي لم تكن معروفة سابقًا ، والتي كنت أتوقع المزيد منها ، جيدة.  جائزة الجمهور تذهب إلى Digital Ocean - أبطأ ، ولكنها الأسهل والأسرع في الاستخدام.  تعد خوادم EC2 m3.medium باهظة الثمن بطيئة بشكل مدهش ، وأرخص خوادم GCE سيئة حقًا حتى مع SSDs ، لم أحصل على نتيجة اختبار الخادم الصغير الحجم. <br><br>  بشكل منفصل ، يجب أن يقال عن حالات EC2 من النوع T2.  ميزتهم هي أنه مع خادم بسيط يتلقى أرصدة المعالج (حتى حد معين) ، والتي يتم إنفاقها تحت الحمل.  إنفاق القروض ، يعمل الخادم بكامل طاقته ، عندما تنفد - ينخفض ​​الأداء إلى 20٪.  من ناحية ، فهو مناسب تمامًا لأغراضنا - فالأشخاص ، خاصة من جهاز محمول ، لا يلعبون بشكل مستمر طوال اليوم ، بالإضافة إلى توقف المحاكاة في اللعبة عندما يقوم شخص ما بعمل ما في القائمة ، وما إلى ذلك ، لذلك يعد هذا خيارًا جيدًا للحصول على أداء عالي مقابل القليل من المال.  من ناحية أخرى ، هذا أداء "مزيف" ، لذلك لم أقم بتضمين أمثلة من هذا النوع في الاختبار حتى لا أخلط بين أي شخص.  من الخبرة ، طالما كانت هناك قروض ، فهي سريعة جدًا ، عندما تنفد - بطيئة جدًا. <br><br>  هذا كل شيء. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar401485/">https://habr.com/ru/post/ar401485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar401475/index.html">تفسير عالم متعدد ومتعدد الأكوان - هل يمكن أن تتحول إلى فكرة واحدة ونفس؟</a></li>
<li><a href="../ar401477/index.html">يقيس باحثو آي بي إم الموصلية الحرارية من خلال اتصال أحادي</a></li>
<li><a href="../ar401479/index.html">شاغر</a></li>
<li><a href="../ar401481/index.html">10 تقنيات يجب أن تكون في هاتف ذكي حديث</a></li>
<li><a href="../ar401483/index.html">عناصر حماية الأوراق النقدية. تحقيق خاص</a></li>
<li><a href="../ar401487/index.html">سيبقى الجيل الثامن من Intel Core في عملية التصنيع 14 نانومتر</a></li>
<li><a href="../ar401489/index.html">تعمل فورد على تطوير نظامها المستقل للتحكم في المركبات</a></li>
<li><a href="../ar401491/index.html">قام المهندسون اليابانيون بابتكار ملقّ رباعي</a></li>
<li><a href="../ar401493/index.html">ألقى علماء الرياضيات الضوء على فرضية الحد الأدنى</a></li>
<li><a href="../ar401495/index.html">تاريخ التكنولوجيا القابلة للزراعة. السمع</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>