<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚽 😣 👨‍👨‍👧‍👧 Ziehen Sie Ihre iOS-Apps per Drag & Drop 👩🏼‍🎨 🍆 🧚🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Drag & Drop Mechanismus unter iOS 11 und iOS 12 ist eine Möglichkeit, Daten sowohl innerhalb einer einzelnen Anwendung als auch zwischen verschied...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ziehen Sie Ihre iOS-Apps per Drag & Drop</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425817/"><img src="https://habrastorage.org/webt/gb/xu/dt/gbxudtvrfs8biaj5tlzkpjjjwe4.png"><br><br>  Der <code>Drag &amp; Drop</code> Mechanismus unter <code>iOS 11</code> und <code>iOS 12</code> ist eine Möglichkeit, Daten sowohl innerhalb einer einzelnen Anwendung als auch zwischen verschiedenen Anwendungen grafisch asynchron zu kopieren oder zu verschieben.  Obwohl diese Technologie etwa 30 Jahre alt ist, hat sie sich unter <code>iOS</code> buchstäblich zu einem „Durchbruch“ entwickelt, da Sie mit <code>multitouch</code> beim Ziehen auf <code>iOS</code> frei mit dem Rest des Systems interagieren und Daten zum Zurücksetzen aus verschiedenen Anwendungen sammeln können. <br><a name="habracut"></a><br>  <code>iOS</code> können mehrere Elemente gleichzeitig erfasst werden.  Darüber hinaus müssen sie für die Auswahl nicht bequem zugänglich sein: Sie können das erste Objekt nehmen, dann zu einer anderen Anwendung gehen und etwas anderes greifen - alle Objekte werden auf einem „Stapel“ unter Ihrem Finger gesammelt.  Rufen Sie dann das Universal Dock auf dem Bildschirm auf, öffnen Sie dort eine beliebige Anwendung und erfassen Sie das dritte Objekt. Wechseln Sie dann mit den ausgeführten Anwendungen zum Bildschirm und speichern Sie sie, ohne die Objekte freizugeben, in einem der geöffneten Programme.  Eine solche Handlungsfreiheit ist auf dem <code>iPad</code> , auf dem <code>iPhone</code> ist die <code>Drag &amp; Drop</code> Abdeckung in <code>iOS</code> auf das Framework einer Anwendung beschränkt. <br><br>  Die beliebtesten Anwendungen ( <code>Safary</code> , <code>Chrome</code> , <code>IbisPaint X</code> , <code>Mail</code> , <code>Photos</code> , <code>Files</code> usw.) verfügen bereits über einen <code>Drag &amp; Drop</code> Mechanismus.  Darüber hinaus stellte <code>Apple</code> den Entwicklern eine sehr einfache und intuitive <code>API</code> zum Einbetten des <code>Drag &amp; Drop</code> Mechanismus in Ihre Anwendung zur Verfügung.  Der <code>Drag &amp; Drop</code> Mechanismus funktioniert genau wie Gesten in <b><font color="#0000FF">UIView</font></b> und verwendet das Konzept der <b><font color="#0000FF">Interaktionen</font></b> , ähnlich wie Gesten. Sie können sich den <code>Drag &amp; Drop</code> Mechanismus also einfach als eine wirklich leistungsstarke Geste vorstellen. <br><br>  Es ist ebenso wie Gesten sehr einfach in Ihre Anwendung zu integrieren.  Insbesondere, wenn Ihre Anwendung die <b><font color="#0000FF">UITableView-</font></b> Tabelle oder die <b><font color="#0000FF">UICollectionView-</font></b> Auflistung verwendet, da für sie <code>API Drag &amp; Drop</code> verbessert und auf eine höhere Abstraktionsebene angehoben wird, da die <code>Collection View</code> Auflistung selbst Ihnen beim <b><font color="#0000FF">indexPath</font></b> des Auflistungselements hilft, das Sie ziehen und <b><font color="#0000FF">ablegen</font></b> möchten <code>Drag</code> .  Sie weiß, wo sich Ihr Finger befindet, und interpretiert ihn als den <b><font color="#0000FF">Indexpfad</font></b> des Sammlungselements, das Sie gerade ziehen. Ziehen Sie ihn als den <b><font color="#0000FF">Indexpfad</font></b> des Sammlungselements, in dem Sie etwas <b><font color="#0000FF">ablegen</font></b> .  Die <code>Collection View</code> Auflistung liefert Ihnen also <b><font color="#0000FF">indexPath</font></b> , ansonsten ist es absolut dieselbe <code>API Drag &amp; Drop</code> wie für eine normale <b><font color="#0000FF">UIView</font></b> . <br><br>  Der <code>Drag &amp; Drop</code> Prozess unter <code>iOS</code> besteht aus 4 verschiedenen Phasen: <br><br><h2>  Heben Sie an </h2><br>  <b>Heben</b> (Heben) - Dies ist der Fall, wenn der Benutzer eine <b><font color="#FF00FF">lange</font></b> Druckgeste ausführt, die das Element angibt, das "Drag &amp; Drop" sein soll.  In diesem Moment wird eine sehr leichte sogenannte " <code>lift preview</code> " des angezeigten Elements gebildet, und dann beginnt der Benutzer, seine Finger zu ziehen. <br><br><img src="https://habrastorage.org/webt/t6/sw/tw/t6swtwdee7kasyvqq_od3ipzlxy.png" width="600" height="450"><br><br><h2>  Ziehen (Drag &amp; Drop) </h2><br>  <b>Ziehen</b> (Drag &amp; Drop) - Dies ist, wenn der Benutzer das Objekt auf der Oberfläche des Bildschirms verschiebt.  Während dieser Phase kann die " <code>lift preview</code> " für dieses Objekt geändert werden (ein grünes "+" Pluszeichen oder ein anderes Zeichen wird angezeigt) ... <br><br><img src="https://habrastorage.org/webt/07/yo/4x/07yo4x4yua4zelwculog6eng9aw.png" width="600" height="450"><br><br>  ... eine gewisse Interaktion mit dem System ist ebenfalls zulässig: Sie können auf ein anderes Objekt klicken und es der aktuellen Drag &amp; Drop-Sitzung hinzufügen: <br><br><img src="https://habrastorage.org/webt/yb/bx/wi/ybbxwiqe6-226ipfjmkzmpymkva.png" width="600" height="450"><br><br><h2>  Drop </h2><br>  <b>Ein Tropfen</b> tritt auf, wenn der Benutzer einen Finger hebt.  In diesem Moment können zwei Dinge passieren: Entweder wird das <code>Drag</code> Objekt zerstört oder das <code>Drop</code> Objekt wird am Ziel „fallen gelassen“. <br><br><img src="https://habrastorage.org/webt/iv/b1/4z/ivb14zogie89jntnkfsxmuubvd0.png" width="600" height="450"><br><br><h2>  Datenübertragung </h2><br>  Wenn der Drag-and-Drop-Vorgang nicht abgebrochen wurde und das Zurücksetzen des <b>Drop-</b> Vorgangs stattgefunden hat, erfolgt die <b>Datenübertragung</b> (Datenübertragung), bei der der Drop-Point Daten von der Quelle anfordert, und die asynchrone Datenübertragung erfolgt. <br><br>  In diesem Tutorial zeigen wir Ihnen, wie Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den</a> <code>Drag &amp; Drop</code> Mechanismus mithilfe der Demo-Anwendung "Bildergalerie" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus Stanfords Hausaufgabenkurs CS193P</a> einfach in Ihre <code>iOS</code> App <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">integrieren können</a> . <br>  Wir werden der <code>Collection View</code> Möglichkeit geben, uns AUSSERHALB mit Bildern zu füllen und INSIDE-Elemente mithilfe des <code>Drag &amp; Drop</code> Mechanismus neu zu organisieren.  Darüber hinaus wird dieser Mechanismus verwendet, um unnötige Elemente der <code>Collection View</code> in einen "Papierkorb" zu <b><font color="#0000FF">werfen</font></b> , der eine normale <b><font color="#0000FF">UIView darstellt</font></b> und durch eine Schaltfläche im Navigationsbereich dargestellt wird.  Wir können in unserer Galerie gesammelte Bilder auch mithilfe des <code>Drag &amp; Drop</code> Mechanismus für andere Anwendungen <code>Drag &amp; Drop</code> , z. B. <code>Notes</code> oder <code>Notes</code> oder <code>Mail</code> oder eine Fotobibliothek ( <code>Photo</code> ). <br><br>  Bevor ich mich jedoch auf die Implementierung des <code>Drag &amp; Drop</code> Mechanismus in der Demo-Anwendung „Image Gallery“ konzentriere, werde ich kurz auf die Hauptkomponenten eingehen. <br><br><h1>  Funktionen der Demo-Anwendung "Image Gallery" </h1><br>  Die Benutzeroberfläche der Image Gallery-Anwendung ist sehr einfach.  Dies ist ein „Bildschirmausschnitt“ des in den <code>Navigation Controller</code> eingefügten <code>Image Gallery Collection View Controller</code> für die <code>Image Gallery Collection View Controller</code> : <br><br><img src="https://habrastorage.org/webt/rz/gl/o6/rzglo69owhktzl8vcstcosf5rdi.png"><br><br>  Der zentrale Teil der Anwendung ist sicherlich der <code>Image Gallery Collection View Controller</code> , der von der <b><font color="#0000FF">ImageGalleryCollectionViewController-</font></b> Klasse mit dem Image Gallery-Modell als Variable <b><font color="#0000FF">var imageGallery = ImageGallery () unterstützt wird</font></b> : <br><br><img src="https://habrastorage.org/webt/na/f2/1r/naf21rpv6pxjnht1bk02mowhgoi.png"><br><br>  Das Modell wird durch eine <b><font color="#0000FF">struct ImageGallery-</font></b> Struktur dargestellt, die ein Array von <b><font color="#0000FF">Bildbildern</font></b> enthält, wobei jedes Bild durch eine <b><font color="#0000FF">struct ImageModel-</font></b> Struktur beschrieben wird, die die <code>URL</code> Bildspeicherort- <b><font color="#0000FF">URL</font></b> (wir werden das Bild selbst nicht speichern) und ihr Seitenverhältnis enthält: <br><br><img src="https://habrastorage.org/webt/bp/0b/6_/bp0b6_kh3bgocgc4zlnjrocmk2q.png"><br><br>  Unser <b><font color="#0000FF">ImageGalleryCollectionViewController</font></b> implementiert das <b><font color="#0000FF">DataSource-</font></b> Protokoll: <br><br><img src="https://habrastorage.org/webt/ka/vr/gj/kavrgjqaraoqv4sva-aqhffwvhu.png"><br><br>  Die benutzerdefinierte Zelle in der <b><font color="#0000FF">Zellsammlung</font></b> enthält ein <b><font color="#0000FF">imageView-</font></b> Bild <b><font color="#0000FF">: UIImageView!</font></b>  und <b><font color="#0000FF">Spinner-</font></b> Aktivitätsindikator <b><font color="#0000FF">: UIActivityIndicatorView!</font></b>  und wird von der benutzerdefinierten <code>subclass</code> <b><font color="#0000FF">ImageCollectionViewCell der UICollectionViewCell-</font></b> Klasse unterstützt: <br><br><img src="https://habrastorage.org/webt/cu/hs/1l/cuhs1ljdvbara4u2_ndq3y_sfxw.png"><br><br>  <code>Public API</code> der <b><font color="#0000FF">ImageCollectionViewCell-</font></b> Klasse ist die <b><font color="#0000FF">imageURL-</font></b> Bild- <b><font color="#0000FF">URL</font></b> .  Sobald wir es installieren, wird unsere <code>UI</code> aktualisiert, <b><font color="#0000FF">dh</font></b> die Daten für das Image werden in dieser <b><font color="#0000FF">imageURL</font></b> asynchron <b><font color="#0000FF">ausgewählt</font></b> und in der Zelle angezeigt.  Während Daten aus dem Netzwerk abgerufen werden, funktioniert die <b><font color="#0000FF">Spinner-</font></b> Aktivitätsanzeige und zeigt an, dass wir gerade Daten abrufen. <br><br>  Ich verwende die globale Warteschlange <b><font color="#0000FF">(qos: .userInitiated)</font></b> mit dem Argument <b><font color="#0000FF">qos</font></b> Quality of Service, um Daten unter einer bestimmten <code>URL</code> <b><font color="#0000FF">abzurufen</font></b> , die auf <b><font color="#0000FF">.userInitiated festgelegt ist,</font></b> da ich die Daten auf Anfrage des Benutzers auswähle: <br><br><img src="https://habrastorage.org/webt/0q/aq/2-/0qaq2-uakbn1zou8ilh7pcvysxy.png"><br><br>  Jedes Mal, wenn Sie Ihre eigenen Variablen innerhalb eines Abschlusses verwenden, in unserem Fall <b><font color="#0000FF">imageView</font></b> und <b><font color="#0000FF">imageURL</font></b> , zwingt Sie der Compiler, sich <b><font color="#0000FF">selbst</font></b> vor sie zu stellen <b><font color="#0000FF">.</font></b>  so dass Sie sich fragen: "Gibt es eine" Speicher-zyklische Verbindung "?"  Wir haben hier keinen expliziten „ <code>memory cycle</code> “, weil das <b><font color="#0000FF">Selbst</font></b> selbst keinen Zeiger auf diesen Abschluss hat. <br><br>  Beim Multithreading sollten Sie jedoch berücksichtigen, dass die <b><font color="#0000FF">Zellen</font></b> in der <code>Collection View</code> dank der Methode <b><font color="#0000FF">dequeueReusableCell</font></b> wiederverwendbar sind.  Jedes Mal, wenn eine Zelle (neu oder wiederverwendet) auf dem Bildschirm angezeigt wird, wird das Bild asynchron aus dem Netzwerk heruntergeladen (zu diesem Zeitpunkt dreht sich der „ <b><font color="#0000FF">Spinner</font></b> “ der <b><font color="#0000FF">Spinner-</font></b> Aktivitätsanzeige). <br><br>  Sobald der Download abgeschlossen ist und das Bild empfangen wurde, wird die <code>UI</code> dieser Sammelzelle aktualisiert.  Wir warten jedoch nicht auf das Laden des Bildes, sondern scrollen weiter durch die Sammlung, und die von uns markierte Sammlungszelle verlässt den Bildschirm, ohne unsere <code>UI</code> zu aktualisieren.  Unten sollte jedoch ein neues Bild angezeigt werden, und dieselbe Zelle, die den Bildschirm verlassen hat, wird wiederverwendet, jedoch für ein anderes Bild, das die <code>UI</code> schnell laden und aktualisieren kann.  Zu diesem Zeitpunkt kehrt das zuvor in dieser Zelle gestartete Laden des Bildes zurück und der Bildschirm wird aktualisiert, was zu einem falschen Ergebnis führt.  Dies liegt daran, dass wir verschiedene Dinge ausführen, die mit dem Netzwerk in verschiedenen Threads funktionieren.  Sie kommen zu unterschiedlichen Zeiten zurück. <br><br>  Wie können wir die Situation beheben? <br>  Im Rahmen des von uns verwendeten <b><font color="#0000FF">GCD-</font></b> Mechanismus können wir den Download des Bildes der Zelle, die den Bildschirm verlassen hat, nicht abbrechen. Wenn unsere <b><font color="#0000FF">imageData-</font></b> Daten aus dem Netzwerk <b><font color="#0000FF">eingehen</font></b> , können wir jedoch die <code>URL</code> <b><font color="#0000FF">URL</font></b> überprüfen, die das Laden dieser Daten verursacht hat, und sie mit der <code>URL</code> vergleichen, die der Benutzer haben möchte diese Zelle im Moment, d. <b><font color="#0000FF">h</font></b> . <b><font color="#0000FF">imageURL</font></b> .  Wenn sie nicht übereinstimmen, aktualisieren wir die <code>UI</code> Zelle nicht und warten auf die benötigten Bilddaten: <br><br><img src="https://habrastorage.org/webt/01/xl/-v/01xl-vqsde3rlqyus1f7tksacja.png"><br><br>  Diese scheinbar absurde Codezeile <b><font color="#0000FF">url == self.imageURL</font></b> sorgt dafür, dass in einer Umgebung mit mehreren Threads, die eine nicht standardmäßige Vorstellungskraft erfordert, alles korrekt funktioniert.  Tatsache ist, dass einige Dinge in der Multithread-Programmierung in einer anderen Reihenfolge ablaufen, als der Code geschrieben wurde. <br><br>  Wenn die Bilddaten nicht ausgewählt werden konnten, wird ein Bild mit einer Fehlermeldung in Form der Zeichenfolge "Fehler" und einem Emoji mit "Stirnrunzeln" generiert.  Nur der leere Bereich in unserer <code>Collection View</code> kann den Benutzer ein wenig verwirren: <br><br><img src="https://habrastorage.org/webt/7m/zh/dt/7mzhdt1eo0tedkkrolp6osiidhu.png"><br><br>  Wir möchten nicht, dass das Bild mit der Fehlermeldung das <b><font color="#0000FF">Seitenverhältnis</font></b> dieses <b><font color="#0000FF">Fehlerbilds</font></b> wiederholt, da in diesem Fall der Text zusammen mit dem Emoji gestreckt oder komprimiert wird.  Wir möchten, dass es neutral ist - quadratisch, das heißt, es hat ein Seitenverhältnis nahe 1,0. <br><br><img src="https://habrastorage.org/webt/7b/rj/ve/7brjvesx81juxpsgnkevsnvge_u.png"><br><br>  Wir müssen unseren <code>Controller</code> über diesen Wunsch informieren, damit er das Seitenverhältnis von Seitenverhältnis für den entsprechenden <b><font color="#0000FF">Indexpfad</font></b> in seinem <b><font color="#0000FF">imageGallery-</font></b> Modell <b><font color="#0000FF">korrigiert</font></b> .  Dies ist eine interessante Aufgabe, es gibt viele Möglichkeiten, sie zu lösen, und wir werden die einfachste auswählen - mit <b><font color="#0000FF">optionalem</font></b> Verschluss <b><font color="#0000FF">var closeAspectRatio: (() -&gt; Void)?</font></b>  .  Es kann gleich <b><font color="#0000FF">Null sein</font></b> und muss nicht installiert werden, wenn dies nicht erforderlich ist: <br><br><img src="https://habrastorage.org/webt/8v/5q/wy/8v5qwyzl2_-dju1qfotj7i9nem4.png"><br><br>  Beim Aufruf der Closure <b><font color="#0000FF">changeAspectRatio? ()</font></b> Bei fehlerhaftem Datenabruf verwende ich die <b><font color="#0000FF">optionale</font></b> Kette.  Jetzt kann jeder, der an einer Art von Einstellungen interessiert ist, wenn er ein fehlerhaftes Bild empfängt, diesen Abschluss auf etwas Bestimmtes setzen.  Und genau das tun wir in unserem <code>Controller</code> in der <b><font color="#0000FF">cellForItemAt-</font></b> Methode: <br><br><img src="https://habrastorage.org/webt/uv/ee/mi/uveemimakh506que35eaasanjbi.png"><br><br>  Details finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Um Bilder mit dem richtigen <b><font color="#0000FF">Aspektverhältnis anzuzeigen</font></b> , wird die <b><font color="#0000FF">sizeForItemAt-</font></b> Methode des <b><font color="#0000FF">UICollectionViewDelegateFlowLayout-</font></b> Delegaten <b><font color="#0000FF">verwendet</font></b> : <br><br><img src="https://habrastorage.org/webt/ys/v7/nz/ysv7nzh7rus7hnowtqyocbevwai.png"><br><br>  Zusätzlich zur <code>Collection View</code> haben wir auf unserer <code>UI</code> im Navigationsbereich eine <b><font color="#0000FF">Leistenschaltfläche</font></b> mit einem benutzerdefinierten <b><font color="#0000FF">GarbageView-</font></b> Bild platziert, das einen "Papierkorb" als <b><font color="#0000FF">Unteransicht enthält</font></b> : <br><br><img src="https://habrastorage.org/webt/1h/eo/uu/1heouudwoicj6qyjrckscada9ug.png"><br><br>  In dieser Abbildung werden die Hintergrundfarben für <b><font color="#0000FF">GarbageView</font></b> selbst und die <b><font color="#0000FF">UIButton-</font></b> Schaltfläche mit dem Bild der "Mülltonne" (tatsächlich gibt es einen transparenten Hintergrund) speziell geändert, sodass Sie sehen, dass der Benutzer, der die Bilder der Galerie in die "Mülltonne" "entleert". viel mehr Handlungsspielraum beim „Ablegen“ von <b>Drop</b> als nur das Mülleimersymbol. <br>  Die <b><font color="#0000FF">GarbageView-</font></b> Klasse <b><font color="#0000FF">verfügt über</font></b> zwei Initialisierer und beide verwenden die <b><font color="#0000FF">setup ()</font></b> -Methode: <br><br><img src="https://habrastorage.org/webt/xj/_t/es/xj_tesvqnjlk9yxbxnrvrvc_6w8.png"><br><br>  In der <b><font color="#0000FF">setup ()</font></b> -Methode füge ich außerdem <b><font color="#0000FF">myButton</font></b> als <b>Unteransicht</b> mit dem Bild der "Mülltonne" hinzu, das aus dem Standard- <code>Bar Button</code> : <br><br><img src="https://habrastorage.org/webt/if/s5/3c/ifs53cvfeaggqwtrlshju1g5qwc.png"><br><br>  Ich habe einen transparenten Hintergrund für <b><font color="#0000FF">GarbageView festgelegt</font></b> : <br><br><img src="https://habrastorage.org/webt/g_/9y/af/g_9yafe1tu_pz4vx6_wan3tarv0.png"><br><br>  Die Größe der Mülltonne und ihre Position werden in der <b><font color="#0000FF">layoutSubviews ()</font></b> -Methode der <b><font color="#0000FF">UIView-</font></b> Klasse abhängig von den <b><font color="#0000FF">Grenzen der</font></b> angegebenen <b><font color="#0000FF">UIView bestimmt</font></b> : <br><br><img src="https://habrastorage.org/webt/zf/ll/jb/zflljbnvhfenkfx0o2ge8iy2q2k.png"><br><br>  Dies ist die erste Version der Demo-Anwendung "Image Gallery". Sie befindet sich auf <b><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a></code></b> im Ordner " <u><code>ImageGallery_beginning</code></u> ".  Wenn Sie diese Version der Anwendung "Bildergalerie" ausführen, sehen Sie das Ergebnis der Anwendung, die an Testdaten arbeitet, die wir anschließend löschen und die "Bildergalerie" ausschließlich AUSSEN ausfüllen: <br><br><img src="https://habrastorage.org/webt/w9/jn/y4/w9jny4yxwtmeemq8cqkqhbirvoy.png"><br><br>  Der Plan zur Implementierung des <code>Drag &amp; Drop</code> Mechanismus in unserer Anwendung lautet wie folgt: <br><br><ol><li>  Zunächst werden wir unserer <code>Collection View</code> Möglichkeit geben, Drag- <b><font color="#0000FF">from-UIImage-</font></b> Bilder sowohl extern als auch lokal zu ziehen. </li><li>  Dann werden wir unserer Sammlung von <code>Collection View</code> beibringen, "gezogenes" <code>Drag</code> extern oder lokal von <b><font color="#0000FF">UIImage</font></b> zu akzeptieren. </li><li>  Wir werden auch unsere <b><font color="#0000FF">GarbageView</font></b> mit der Mülltonne-Schaltfläche lehren, <b><font color="#0000FF">UIImage-</font></b> Bilder zu akzeptieren, die aus der lokalen <code>Collection View</code> und sie aus der <code>Collection View</code> entfernen </li></ol><br><br>  Wenn Sie am Ende dieses Tutorials alle erforderlichen Codeänderungen vornehmen, erhalten Sie die endgültige Version der Demoanwendung „Image Gallery“, in der der <code>Drag &amp; Drop</code> Mechanismus implementiert wurde.  Es befindet sich auf <b><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github</a></code></b> im Ordner <u><code>ImageGallery_finished</code></u> . <br><br>  Die Leistung des <code>Drag &amp; Drop</code> Mechanismus in Ihrer <code>Collection View</code> von zwei neuen Delegierten bereitgestellt. <br>  Die Methoden des <u>ersten Delegaten, <b><font color="#0000FF">dragDelegate</font></b> , sind so</u> konfiguriert, dass die Drag &amp; Drop- <code>Drags</code> initialisiert und angepasst werden. <br>  Die Methoden des zweiten Delegaten, <b><font color="#0000FF">dropDelegate</font></b> , vervollständigen das Ziehen und Ablegen von <code>Drags</code> und bieten im Grunde genommen Datenübertragungs- und benutzerdefinierte Animationseinstellungen, wenn <code>Drop</code> zurückgesetzt wird, sowie andere ähnliche Dinge. <br><br>  Es ist wichtig zu beachten, dass beide Protokolle völlig unabhängig sind.  Sie können das eine oder andere Protokoll verwenden, wenn Sie nur <code>Drag</code> oder nur Drop <code>Drop</code> müssen. Sie können jedoch beide Protokolle gleichzeitig verwenden und <code>Drag</code> &amp; Drop gleichzeitig <code>Drag</code> &amp; <code>Drop</code> , wodurch zusätzliche Funktionen eröffnet werden <code>Drag &amp; Drop</code> Mechanismus zum Neuordnen von Elementen in Ihrer <code>Collection View</code> . <br><br><h1>  Drag &amp; Drop <code>Drag</code> Elemente aus der <code>Collection View</code> </h1><br>  Das Implementieren des <code>Drag</code> Protokolls ist sehr einfach. Das erste, was Sie immer tun sollten, ist, sich <b><font color="#0000FF">selbst</font></b> als <b><font color="#0000FF">DragDelegate-</font></b> Delegat <b><font color="#0000FF">festzulegen</font></b> : <br><br><img src="https://habrastorage.org/webt/mt/jw/dq/mtjwdqjahnvyzwjd0hz9cra47mg.png"><br><br>  Und ganz oben in der <b><font color="#0000FF">ImageGalleryCollectionViewController-</font></b> Klasse <b><font color="#0000FF">sollten</font></b> Sie <b><font color="#0000FF">natürlich</font></b> "Ja" sagen. Wir implementieren das <b><font color="#0000FF">UICollectionViewDragDelegate-</font></b> Protokoll: <br><br><img src="https://habrastorage.org/webt/ie/ue/xv/ieuexvbtxfan-uouzv4cvxpjw20.png"><br><br>  Sobald wir dies tun, beginnt der Compiler sich zu beschweren, wir klicken auf den roten Kreis und werden gefragt: "Möchten Sie die erforderlichen Methoden des <b><font color="#0000FF">UICollectionViewDragDelegate-</font></b> Protokolls <b><font color="#0000FF">hinzufügen</font></b> ?" <br>  Ich antworte: "Natürlich will ich!"  und klicken Sie auf die Schaltfläche <code>Fix</code> : <br><br><img src="https://habrastorage.org/webt/6d/24/it/6d24itltj_buh2uwe3fbgkh8my8.png"><br><br>  Die einzige erforderliche Methode des <b><font color="#0000FF">UICollectionViewDragDelegate-</font></b> Protokolls ist die <b><font color="#0000FF">itemsForBeginning-</font></b> Methode, die dem <code>Drag</code> System <b><font color="#0000FF">mitteilt</font></b> , dass wir sie ziehen und <b><font color="#0000FF">ablegen</font></b> .  Die Methode <b><font color="#0000FF">itemsForBeginning wird</font></b> aufgerufen, wenn der Benutzer beginnt, eine Zelle in der Auflistungszelle zu "ziehen" (zu ziehen). <br><br>  Beachten Sie, dass bei dieser Methode die <code>Collection View</code> Auflistung <b><font color="#0000FF">indexPath</font></b> hinzugefügt <b><font color="#0000FF">hat</font></b> .  Dies sagt uns, welches Element der Sammlung, welchen <b><font color="#0000FF">Indexpfad</font></b> wir ziehen und <b><font color="#0000FF">ablegen</font></b> werden.  Dies ist für uns sehr praktisch, da die Anwendung für die Verwendung der Argumente <b><font color="#0000FF">session</font></b> und <b><font color="#0000FF">indexPath verantwortlich ist</font></b> , um <b><font color="#0000FF">herauszufinden</font></b> , wie mit diesem Drag &amp; Drop von <code>Drag</code> <b><font color="#0000FF">umgegangen werden soll</font></b> . <br><br>  Wenn das Array <b><font color="#0000FF">[UIDragItems] der</font></b> " <b><font color="#0000FF">ziehbaren</font></b> " Elemente zurückgegeben wird, wird das "Ziehen" des <b><font color="#0000FF">Ziehens</font></b> initialisiert. Wenn das leere Array <b><font color="#0000FF">[]</font></b> zurückgegeben wird, wird das "Ziehen" des <code>Drag</code> ignoriert. <br><br>  Ich werde eine kleine <b><font color="#0000FF">private</font></b> <b><font color="#0000FF">DragItems-Funktion (at: indexPath)</font></b> mit dem Argument <b><font color="#0000FF">indexPath erstellen</font></b> .  Es gibt das Array <b><font color="#0000FF">[UIDragItem] zurück, das</font></b> wir <b><font color="#0000FF">benötigen</font></b> . <br><br><img src="https://habrastorage.org/webt/_y/iv/86/_yiv869sqaamn_ytg22fg89iez0.png"><br><br>  Wie sieht ein Drag &amp; Drop- <b><font color="#0000FF">UIDragItem aus</font></b> ? <br>  Er hat nur eine sehr wichtige Sache namens <b><font color="#0000FF">itemProvider</font></b> .  <b><font color="#0000FF">itemProvider</font></b> ist nur etwas, das Daten bereitstellen kann, die gezogen werden. <br><br>  Und Sie haben das Recht zu fragen: "Was ist mit dem" Ziehen und Ablegen "eines <b><font color="#0000FF">UIDragItem-</font></b> Elements, das einfach keine Daten enthält?"  Das Element, das Sie ziehen möchten, enthält möglicherweise keine Daten, da das Erstellen dieser Daten ein kostspieliger Vorgang ist.  Dies kann ein Bild sein oder etwas, das das Herunterladen von Daten aus dem Internet erfordert.  Das Tolle ist, dass der <code>Drag &amp; Drop</code> Vorgang vollständig asynchron ist.  Wenn Sie mit dem Ziehen und Ablegen beginnen, ist <code>Drag</code> wirklich ein sehr leichtes Objekt ( <code>lift preview</code> ). Sie ziehen es überall hin und während dieses "Ziehens" passiert nichts.  Sobald Sie Ihr Objekt jedoch „ <b><font color="#0000FF">ablegen“</font></b> , muss es als <b><font color="#0000FF">itemProvider</font></b> Ihr "gezogenes" und "geworfenes" Objekt wirklich mit realen Daten versorgen, selbst wenn dies eine gewisse Zeit in <b><font color="#0000FF">Anspruch</font></b> nimmt. <br><br>  Glücklicherweise gibt es viele integrierte <b><font color="#0000FF">itemProvider</font></b> .  Hierbei handelt es sich um Klassen, die bereits in <code>iOS</code> und <b><font color="#0000FF">itemPoviders sind</font></b> , z. B. <code>NSString</code> , mit dem Sie Text ohne Schriftarten ziehen und <code>NSString</code> können.  Dies ist natürlich ein <b><font color="#0000FF">UIImage-</font></b> Bild.  Sie können <b><font color="#0000FF">UIImages-</font></b> Bilder <b><font color="#0000FF">überall</font></b> auswählen und ziehen und <b><font color="#0000FF">ablegen</font></b> .  Die <b><font color="#0000FF">NSURL-</font></b> Klasse, die absolut wunderbar ist.  Sie können zur <code>Web</code> gehen, die <code>URL</code> auswählen und sie an einer beliebigen Stelle ablegen.  Dies kann ein Link zu einem Artikel oder eine <code>URL</code> für ein Bild sein, wie es in unserer Demo sein wird.  Dies sind die Farbklassen von <b><font color="#0000FF">UIColor</font></b> , <b><font color="#0000FF">MKMapItem-</font></b> Kartenelement, <b><font color="#0000FF">CNContact-</font></b> Kontakt aus dem Adressbuch. Sie können viele Dinge auswählen und ziehen.  Alle von ihnen sind <b><font color="#0000FF">itemProvider</font></b> . <br><br>  Wir werden das <b><font color="#0000FF">UIImage-</font></b> Bild per Drag &amp; Drop <b><font color="#0000FF">verschieben</font></b> .  Es befindet sich in der <b><font color="#0000FF">Zellenzelle</font></b> der <code>Collection View</code> mit <b><font color="#0000FF">indexPath</font></b> , wodurch ich die <b><font color="#0000FF">Zellenzelle</font></b> auswählen, die <code>Outlet</code> <b><font color="#0000FF">Bildansicht</font></b> daraus <b><font color="#0000FF">abrufen</font></b> und das <b><font color="#0000FF">Bildbild abrufen</font></b> <b><font color="#0000FF">kann</font></b> . <br><br>  Lassen Sie uns diese Idee mit ein paar Codezeilen ausdrücken. <br>  Zuerst <b><font color="#0000FF">fordere</font></b> ich meine <code>Collection View</code> zu einer <b><font color="#0000FF">Zelle</font></b> für das Element an, das diesem <b><font color="#0000FF">Indexpfad entspricht</font></b> . <br><br><img src="https://habrastorage.org/webt/ho/zi/gp/hozigp41-y0-3cfa525umwojyu4.png"><br><br>  Die <b><font color="#0000FF">cellForItem (at: IndexPath) -Methode</font></b> für die <code>Collection View</code> funktioniert nur für sichtbare Zellen, aber in unserem Fall funktioniert sie natürlich, da ich das <code>Drag</code> Sammlungselement auf den Bildschirm <b><font color="#0000FF">ziehe und ablege</font></b> und es sichtbar ist. <br><br>  Also habe ich eine "ziehbare" Zellzelle. <br>  Als nächstes benutze ich den <b><font color="#0000FF">als</font></b> Operator <b><font color="#0000FF">?</font></b>  zu dieser Zelle, so dass es einen TYP meiner benutzerdefinierten <code>subclass</code> .  Und wenn dies funktioniert, erhalte ich eine <code>Outlet</code> <b><font color="#0000FF">ImageView</font></b> , aus der ich das Image- <b><font color="#0000FF">Image</font></b> entnehme.  Ich habe gerade das <b><font color="#0000FF">Bild</font></b> für diesen <b><font color="#0000FF">indexPath</font></b> "aufgenommen". <br><br>  <b><font color="#0000FF">Nachdem</font></b> ich nun ein <b><font color="#0000FF">Bildbild</font></b> habe, muss ich nur noch eines dieser <b><font color="#0000FF">UIDragItems erstellen,</font></b> indem <b><font color="#0000FF">ich</font></b> das resultierende <b><font color="#0000FF">Bild</font></b> als <b><font color="#0000FF">itemProvider verwende</font></b> , <b><font color="#0000FF">dh</font></b> das, was uns die Daten liefert. <br>  Ich kann <b><font color="#0000FF">dragItem</font></b> mit dem <b><font color="#0000FF">UIDragItem-</font></b> Konstruktor erstellen, der <b><font color="#0000FF">itemProvider</font></b> als Argument verwendet: <br><br><img src="https://habrastorage.org/webt/to/zb/gt/tozbgtxocfrgoaqofvn9jgf9yeo.png"><br><br>  Anschließend erstellen wir einen <b><font color="#0000FF">itemProvider</font></b> für das Bild <b><font color="#0000FF">,</font></b> auch mit dem <b><font color="#0000FF">NSItemProvider-</font></b> Konstruktor.  Es gibt mehrere Konstruktoren für <b><font color="#0000FF">NSItemProvider</font></b> , aber unter ihnen gibt es einen wirklich wunderbaren - <b><font color="#0000FF">NSItemProvider (Objekt: NSItemProviderWriting)</font></b> : <br><br><img src="https://habrastorage.org/webt/ey/21/cq/ey21cq0iq5riml7pfrye4gcnmi8.png"><br><br>  Sie geben das Objektobjekt einfach <b><font color="#0000FF">an</font></b> diesen <b><font color="#0000FF">NSItemProvider-</font></b> Konstruktor weiter, und er weiß, wie <b><font color="#0000FF">itemProvider</font></b> daraus erstellt wird.  Als solches <b><font color="#0000FF">Objekt</font></b> gebe ich dem Bild das Bild <b><font color="#0000FF">,</font></b> das ich von der <b><font color="#0000FF">Zellenzelle</font></b> erhalten <b><font color="#0000FF">habe,</font></b> und erhalte <b><font color="#0000FF">itemProvider</font></b> für <b><font color="#0000FF">UIImage</font></b> . <br>  Und das ist alles.  Wir haben <b><font color="#0000FF">dragItem</font></b> erstellt und sollten es als Array mit einem Element zurückgeben. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber bevor ich wieder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ich werde noch eine Sache tun, nämlich die Variable gesetzt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gleich das resultierende Bild </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/sh/h0/cz/shh0czt4sxjd7ienvsl2slz8yju.png"><br><br>  Was bedeutet das? <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lokal </font><font style="vertical-align: inherit;">"Drag &amp; Drop" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ausführen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><b><font color="#0000FF"><font style="vertical-align: inherit;">dh</font></font></b><font style="vertical-align: inherit;"> innerhalb Ihrer Anwendung, müssen Sie nicht den gesamten mit </font><b><font color="#0000FF"><font style="vertical-align: inherit;">itemProvider verknüpften</font></font></b><font style="vertical-align: inherit;"> Code </font><font style="vertical-align: inherit;">durch asynchrones Abrufen von Daten durchgehen. Sie müssen dies nicht tun, Sie müssen nur </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nehmen </font><font style="vertical-align: inherit;">und es verwenden. Dies ist eine Art „Kurzschluss“ mit lokalem „Drag &amp; Drop“ </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Code, den wir geschrieben haben, funktioniert beim „Ziehen“ </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">außerhalb unserer Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in andere Anwendungen. Wenn wir jedoch </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lokal </font><font style="vertical-align: inherit;">„ziehen“ </font><font style="vertical-align: inherit;">, können wir </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject verwenden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Als nächstes </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gebe</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich ein Array von einem </font><b><font color="#0000FF"><font style="vertical-align: inherit;">dragItem-</font></font></b><font style="vertical-align: inherit;"> Element zurück </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übrigens, wenn ich aus irgendeinem Grund nicht bekommen konnte </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für diese Zelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kehre ich leeres Array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das bedeutet , </font><font style="vertical-align: inherit;">dass die „drag“ </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abgebrochen. </font></font><br><br><img src="https://habrastorage.org/webt/4b/uk/o3/4buko3fve2swk7wr7d_oy5sflma.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neben lokalen Objekt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , können Sie den lokalen Kontext erinnern </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für unsere </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Sitzung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In unserem Fall wird es eine Sammlung von seiner </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kollektion</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und es ist nützlich , </font><font style="vertical-align: inherit;">um uns danach: </font></font><br><br><img src="https://habrastorage.org/webt/o_/gi/tk/o_gitkbwnnbcevnxwcwm6obckwk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit „Drag and Drop“ </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können Sie weitere Elemente hinzufügen , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diesen „drag and drop“, nur die Geste tun </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tippt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf sie. Als Ergebnis können Sie ziehen</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viele Gegenstände gleichzeitig. Und dies ist einfach mit einer anderen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delegatmethode</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu implementieren </font><font style="vertical-align: inherit;">, </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UICollectionViewDragDelegate</font></font></b><font style="vertical-align: inherit;"> , die der Methode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForeginning</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , einer Methode mit dem Namen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForAddingTo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sehr ähnlich ist </font><font style="vertical-align: inherit;">. Die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForAddingTo-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">sieht genauso aus wie die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForeginning-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">und gibt genau das Gleiche zurück, da sie uns auch einen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indexpfad darüber</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt, </font><font style="vertical-align: inherit;">was der Benutzer während des Drag </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; </font><font style="vertical-align: inherit;">Drop-Vorgangs „ </font><b><font color="#0000FF"><font style="vertical-align: inherit;">aufgezeichnet</font></font></b><font style="vertical-align: inherit;"> “ hat </font><font style="vertical-align: inherit;">, und ich muss nur das </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus der Zelle abrufen die der Benutzer "abgeklebt" und zurückgegeben. </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Gibt</font></font></b></font><br><br><img src="https://habrastorage.org/webt/u-/hc/9d/u-hc9dnk3001qhkra-et6oycphi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein leeres Array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von der </font><b><font color="#0000FF"><font style="vertical-align: inherit;">itemsForAddingTo-</font></font></b><font style="vertical-align: inherit;"> Methode zurück</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bewirkt, dass die </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tippgeste</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf </font><font style="vertical-align: inherit;">die übliche Weise interpretiert wird, dh als Auswahl dieser </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und das ist alles, was wir zum Ziehen und Ablegen benötigen </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir starten die Anwendung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich wähle das Bild "Venedig" aus, halte es eine Weile und beginne </font></font><br><br><img src="https://habrastorage.org/webt/p7/ne/9z/p7ne9zdwnirsf2uxjogvflrqwao.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mich zu </font><font style="vertical-align: inherit;">bewegen ... </font><font style="vertical-align: inherit;">... und wir können dieses Bild wirklich in die Anwendung ziehen </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da Sie das grüne Pluszeichen "+" in der oberen linken Ecke des "ziehbaren" Bildes sehen. Ich kann eine </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tap-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geste </font><font style="vertical-align: inherit;">auf ein anderes Artika-Bild aus der Sammlung </font><font style="vertical-align: inherit;">ausführen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/cg/sj/om/cgsjomxtwxyzqxg-wxvqxz4huqi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und jetzt können wir zwei Bilder in die Anwendung </font><font style="vertical-align: inherit;">einfügen </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/bk/xk/ud/bkxkud6ggdorw2d1yayjmatnsf4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da der </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mechanismus bereits </font><font style="vertical-align: inherit;">in die Anwendung integriert ist</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dann funktioniert alles gut und es ist cool. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das "Ziehen" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und "Ablegen" des </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Galeriebilds in andere Anwendungen </font><font style="vertical-align: inherit;">funktioniert für mich </font><font style="vertical-align: inherit;">. Ich musste in meiner Anwendung nicht viel tun, außer das </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[UIDragItem] zu liefern</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies ist eines der vielen großartigen Merkmale des Mechanismus </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- es ist sehr einfach, ihn in beide Richtungen arbeiten zu lassen.</font></font><br><br><h1><font style="vertical-align: inherit;"></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilder auf Sammlung </font><font style="vertical-align: inherit;">zurücksetzen</font></font><code>Collection View</code> </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt müssen wir einen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil für meine Sammlung </font><font style="vertical-align: inherit;">erstellen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, damit wir </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alle "gezogenen" Bilder IN dieser Sammlung </font><font style="vertical-align: inherit;">"ausgeben" </font><font style="vertical-align: inherit;">können. Ein "ziehbares" Bild kann von AUSSEN oder direkt IN dieser Sammlung "kommen". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um dies zu </font><font style="vertical-align: inherit;">tun, werden </font><font style="vertical-align: inherit;">wir das gleiche tun getan zu delegieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , also machen wir selbst, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die selbst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delegieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in dem Verfahren von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem viewDidLoad</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/5q/wv/mf/5qwvmfjuyh74sfxzwcw7_0gikec.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auch hier müssen wir an die Spitze unserer Klasse klettern </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Protokoll - </font><font style="vertical-align: inherit;">Implementierung überprüfen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/wc/ww/7p/wcww7pgfia3xxwe63teews1e9de.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobald wir unser neues Protokoll hinzugefügt hatten, begann der Compiler erneut zu "beschweren", dass wir dieses Protokoll nicht implementiert haben. Wir klicken auf die Schaltfläche </font></font><code>Fix</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die erforderlichen Methoden dieses Protokolls erscheinen vor uns. In diesem Fall werden wir darüber informiert, dass wir die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode implementieren </font><b><font color="#0000FF"><font style="vertical-align: inherit;">müssen</font></font></b><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/ll/9t/k4/ll9tk4goht7nfa-gnifnq8iaoto.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir müssen dies tun, sonst wird kein „Reset“ durchgeführt </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tatsächlich werde ich die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">zuletzt </font><font style="vertical-align: inherit;">implementieren </font><font style="vertical-align: inherit;">, da es einige andere sehr empfohlene </font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methoden gibt, die Sie für das </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil </font><font style="vertical-align: inherit;">implementieren müssen </font><font style="vertical-align: inherit;">. Dies ist </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropSessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/jd/ce/ve/jdcevehobhr1k7wwvc1iaem-w80.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir diese beiden Methoden implementieren, können wir ein wenig Greenbacks erhalten Plus - </font><font style="vertical-align: inherit;">Zeichen „+“ , </font><font style="vertical-align: inherit;">wenn wir Sie Bilder von außen auf unserer Sammlung ziehen </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und darüber hinaus werden wir nicht versuchen , </font><font style="vertical-align: inherit;">zu entleeren , </font><font style="vertical-align: inherit;">was wir nicht verstehen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie </font><font style="vertical-align: inherit;">uns implementieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir müssen Ihre Version des Verfahrens </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die für die Sammlung bestimmt ist </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">., aber diese Methode </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sieht genau die gleiche Art und Weise wie ein ähnliches Verfahren zu dem herkömmlichen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einem UIView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , gibt es keine </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir Rückkehr gerade brauchen. </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und dass die </font><font style="vertical-align: inherit;">Mittel dass ich das "Zurücksetzen" von Objekten dieses Cl akzeptiere PAS in meiner Sammlung </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><img src="https://habrastorage.org/webt/0j/tz/ze/0jtzzen649jj7z58-3tiq_ehrvs.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies reicht jedoch nicht aus, um das </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AUSSERHALB </font><font style="vertical-align: inherit;">in meine Sammlung </font><font style="vertical-align: inherit;">zu "kopieren" </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn das „Reset“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das Bild innerhalb der Sammlung nimmt </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird der Benutzer seine eigenen Elemente reorganisieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gegenstände</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durch den Mechanismus </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann nur ein Bild </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einer UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Implementierung des Verfahrens </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie in der oben beschriebenen Weise aussehen wird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn das "Dumping" des </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildes jedoch AUSSEN erfolgt, sollten wir nur das "Ziehen und Ablegen" behandeln </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, das das </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bild </font><font style="vertical-align: inherit;">zusammen mit </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem Bild ist, da wir die </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIImage-</font></font></b><font style="vertical-align: inherit;"> Bilder nicht </font><b><font color="#0000FF"><font style="vertical-align: inherit;">direkt</font></font></b><font style="vertical-align: inherit;"> speichern </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Modell. In diesem Fall werde ich zurückkehren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wahr</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in dem Verfahren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nur dann , </font><font style="vertical-align: inherit;">wenn beide Bedingungen ein paar durchgeführt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.canLoadObjects (ofClass: NSURL.self) &amp;&amp; session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/yj/dt/qn/yjdtqnmmxq0olgilbz1ifa5mdt8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ich noch habe , </font><font style="vertical-align: inherit;">um festzustellen , </font><font style="vertical-align: inherit;">ob ich mit zu </font><font style="vertical-align: inherit;">tun habe „Reset“ AUSSEN ODER INNEN. Ich werde es tun , </font><font style="vertical-align: inherit;">mit Hilfe von berechneten Konstanten </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isself</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , für die die Berechnung kann ich diese Art der Sache in Verwendung </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Sitzung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Sitzung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sowohl die lokale </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Diese lokale </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung hat wiederum einen lokalen Kontext </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie sich erinnern, setzen wir diesen lokalen Kontext in der Methode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForVeginning</font></font></font></b> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Delegierten</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UICollectionViewDragDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/o_/gi/tk/o_gitkbwnnbcevnxwcwm6obckwk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde die lokalen Kontext erforschen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf Gleichheit in meiner Sammlung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Collection</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Richtig</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , TYPE von</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> localContext</font></font></b><font style="vertical-align: inherit;"> ist</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Any</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und ich muss ein Casting von TYPE</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Any</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit dem Operator</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as durchführen. UICollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/kc/zk/nt/kczknt6xiau08k5d06xu40akoyu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der lokale Kontext</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (session.localDragSession .localContext als UICollectionView ??)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ist meine Sammlung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Collection</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die erweiterte Variable</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> isSelf</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wahr</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und es gibt ein lokales "Zurücksetzen" IN meiner Sammlung. Wenn diese Gleichheit verletzt wird, handelt es sich um ein "Zurücksetzen" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AUSSEN. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode gibt an </font><font style="vertical-align: inherit;">, dass wir diese Art von Drag &amp; Drop nur für </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsere Sammlung verarbeiten können </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ansonsten macht es keinen Sinn, von "Dumping" zu sprechen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir auf „Reset“ fortsetzen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ist es noch bis zu dem Moment , </font><font style="vertical-align: inherit;">dass der Benutzer die </font><font style="vertical-align: inherit;">Finger vom Bildschirm heben wird , </font><font style="vertical-align: inherit;">und es wird ein echter „Reset“ sein </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, müssen wir berichten , </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unter Verwendung des Verfahrens </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropSessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Delegierten </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über unser Angebot </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zurückgesetzt zu implementieren </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei dieser Methode müssen wir einen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satz zurückgeben, der </font><font style="vertical-align: inherit;">für das </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Operationsargument die </font></font></b><b><font color="#0000FF"><font style="vertical-align: inherit;">Werte </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.copy</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.move</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.cancel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.forbidden enthalten kann</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Und dies sind alle Möglichkeiten, die wir im Normalfall haben, wenn wir uns mit einem regulären </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIView befassen</font></font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Sammlung </font><font style="vertical-align: inherit;">geht jedoch noch weiter und bietet an, das spezielle Angebot </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UICollectionViewDropProposal zurückzugeben</font></font></b><font style="vertical-align: inherit;"> , eine </font><font style="vertical-align: inherit;">Klasse von </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIDropProposal,</font></font></b><font style="vertical-align: inherit;"> mit der Sie zusätzlich zur </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Operationsoperation</font></font></b><font style="vertical-align: inherit;"> einen zusätzlichen </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Intent-</font></font></b><font style="vertical-align: inherit;"> Parameter </font><font style="vertical-align: inherit;">für die Sammlung </font><font style="vertical-align: inherit;">angeben können </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Parameter</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>Collection View</code><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><code>subclass</code><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><code>Collection View</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Absicht</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird der Sammlung</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> mitgeteilt</font></font></b><font style="vertical-align: inherit;"> ,</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob das "verworfene" Element in einer vorhandenen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zelle platziert werden soll</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder ob eine neue</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hinzugefügt werden soll</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> .</font></font></b><font style="vertical-align: inherit;"> Sehen Sie den Unterschied? Im Fall der Sammlung</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verkünden wir unsere Absicht,</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine Absicht</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Fall möchten wir immer eine neue Zelle hinzufügen, damit Sie sehen, wie</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hoch</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unser</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> Intent-</font></font></b><font style="vertical-align: inherit;"> Parameter ist</font><font style="vertical-align: inherit;">.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir wählen den zweiten Konstruktor für</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UICollectionViewDropProposal aus</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/ab/vh/-p/abvh-pb04qje37u4jjgveja3lgu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Fall möchten wir immer eine neue Zelle hinzufügen, und der</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Intent-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parameter</font><font style="vertical-align: inherit;">nimmt</font><font style="vertical-align: inherit;">im Gegensatz dazu</font><font style="vertical-align: inherit;">den Wert</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .insertAtDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> an</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.insertIntoDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/yg/t0/xi/ygt0xirvwaucl9zvuvuxvvil2cu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe wieder die berechnete Konstante</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> isSelf verwendet</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und wenn es sich um eine</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selbstreorganisation handelt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bewege ich</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .move</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , andernfalls</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> kopiere</font></font></b><font style="vertical-align: inherit;"> ich</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .copy</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In beiden Fällen verwenden wir</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .insertAtDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d</font><font style="vertical-align: inherit;">.</font><font style="vertical-align: inherit;">H. Das Einfügen neuer</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zellen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bisher habe ich die</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode noch nicht implementiert</font><font style="vertical-align: inherit;">, aber schauen wir uns an, was eine Sammlung bereits</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit dieser kleinen Information</font><font style="vertical-align: inherit;">tun kann</font><font style="vertical-align: inherit;">, die wir ihr zur Verfügung gestellt haben.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich ziehe das Bild aus</font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Suchmaschine</font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über diesem Bild wird ein grünes „+“ angezeigt, das darauf hinweist, dass unsere Bildergalerie nicht nur bereit ist, dieses Bild zu akzeptieren und zu kopieren </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern auch einen Platz in der Sammlung </font><font style="vertical-align: inherit;">bietet </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ia/gy/gv/iagygvechjnwsm-tfvduwi0pc1o.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich kann auf ein weiteres Bildpaar in </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font><font style="vertical-align: inherit;">klicken </font><font style="vertical-align: inherit;">Es werden bereits 3 "gezogene" Bilder angezeigt: </font></font><br><br><img src="https://habrastorage.org/webt/kd/ca/7s/kdca7sflzfrbbsbtmnk8_zbueqm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn ich jedoch meinen Finger hebe und </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese Bilder </font><font style="vertical-align: inherit;">"fallen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lasse</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">, werden sie nicht in unserer Galerie platziert, sondern kehren einfach zu ihren vorherigen </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Positionen zurück</font></font></b><font style="vertical-align: inherit;"> , da wir die </font><b><font color="#0000FF"><font style="vertical-align: inherit;">performDrop-</font></font></b><font style="vertical-align: inherit;"> Methode noch nicht implementiert </font><b><font color="#0000FF"><font style="vertical-align: inherit;">haben</font></font></b><font style="vertical-align: inherit;"> . </font></font><br><br><img src="https://habrastorage.org/webt/5v/e4/me/5ve4me_unk6t-azl6fhatljzgxs.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie konnten sehen, dass die Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bereits weiß, was ich tun möchte. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist eine absolut wunderbare Sache für den Mechanismus.</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie hat dafür sehr mächtige Funktionen. Wir haben sie kaum berührt, indem wir 4 Codezeilen geschrieben haben, und sie ist in der Wahrnehmung von "Zurücksetzen" bereits ziemlich weit gegangen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Kehren</font></font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir zum Code zurück und implementieren die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">. </font></font><br><br><img src="https://habrastorage.org/webt/i0/cc/es/i0ccescpyvub0pclhjyzcbdcu7o.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei dieser Methode kommen wir mit 4 Codezeilen nicht aus, da die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">etwas komplizierter, aber nicht zu viel ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn ein „Reset“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann ist </font><font style="vertical-align: inherit;">die Methode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> müssen wir unser Modell aktualisieren, die eine Galerie von Bildern </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Combo Bild </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildern</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und wir müssen unsere visuelle Sammlung aktualisieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collection</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben zwei verschiedene "Reset" -Szenarien </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aus meiner collectionView- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein "Zurücksetzen" erfolgt </font><font style="vertical-align: inherit;">, muss ich das </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlungselement an einer neuen Stelle </font><font style="vertical-align: inherit;">"zurücksetzen" </font><font style="vertical-align: inherit;">und von der alten Stelle entfernen, da ich in diesem Fall </font><font style="vertical-align: inherit;">dieses Sammlungselement </font><font style="vertical-align: inherit;">verschiebe ( </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.move</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Dies ist eine triviale Aufgabe. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird ein „Reset“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durchgeführt wird aus einer anderen Anwendung heraus, dann müssen wir die Eigenschaft verwenden </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ItemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> «gezogen» Element </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um Daten abzurufen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der collectionView- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einen „Reset“ durchführen </font><font style="vertical-align: inherit;">, stellt uns die Sammlung einen Koordinator- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator zur Verfügung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In </font><font style="vertical-align: inherit;">erster Linie haben wir berichtet , </font><font style="vertical-align: inherit;">den Koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dh </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> „-destination“, „Reset“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dass dort , </font><font style="vertical-align: inherit;">wo wir werden ein </font><font style="vertical-align: inherit;">„Reset“ . </font></font><br><br><img src="https://habrastorage.org/webt/mp/mt/wk/mpmtwkebx7beyw5ge72gt19xt7k.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kann gleich </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Null</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so dass Sie die „rücksetzbar“ Bild in diesem Teil der Sammlung kann ziehen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die zwischen einigen bestehenden Zellen kein Fleck </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zellen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so dass es gut sein kann </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In diesem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fall</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erstelle ich einen </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Indexpfad</font></font></b><font style="vertical-align: inherit;"> mit dem Element </font><b><font color="#0000FF"><font style="vertical-align: inherit;">0th </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Abschnitt </font><b><font color="#0000FF"><font style="vertical-align: inherit;">0th </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/qd/ei/me/qdeimejhoj1v0pkgml2xtog1jke.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich könnte jeden anderen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indexpfad auswählen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber </font><font style="vertical-align: inherit;">ich werde </font><font style="vertical-align: inherit;">diesen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indexpfad</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> standardmäßig verwenden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt wissen wir, wo wir den „Reset“ durchführen werden </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wir müssen gehen durch alle „blow-off“ Artikel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordinator.items</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vom Koordinator zur </font><font style="vertical-align: inherit;">Verfügung gestellt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jedes </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus dieser Liste hat einen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropItem-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYP </font><font style="vertical-align: inherit;">und kann uns sehr interessante Informationen liefern. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum Beispiel, wenn ich bekommen kann </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , werde ich genau wissen , </font><font style="vertical-align: inherit;">was es ist „Drag and Drop“ </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von selbst erledigt ist, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Selbst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Quelle des </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Ziehens</font></font></b></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist das Sammlungselement mit </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gleich </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><font style="vertical-align: inherit;">In diesem Fall </font><b><font color="#0000FF"><font style="vertical-align: inherit;">muss</font></font></b></font><br><br><img src="https://habrastorage.org/webt/y2/3d/2u/y23d2u0pmf1pnasfw2khu9htji4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich nicht einmal auf </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schauen </font><font style="vertical-align: inherit;">, um herauszufinden, dass dieses "Ziehen und Ablegen" IN der Sammlung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView durchgeführt wurde</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> Wow! <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt kenne ich die Quelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das Ziel " </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und die Aufgabe wird trivial. Alles , was </font><font style="vertical-align: inherit;">ich tun muß , </font><font style="vertical-align: inherit;">ist das Modell zu aktualisieren , </font><font style="vertical-align: inherit;">so dass die Quelle und der „Zielpunkt“ umgekehrt wird </font><font style="vertical-align: inherit;">, und aktualisieren Sie </font><font style="vertical-align: inherit;">dann die Sammlung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collection</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das das Element aus der Sammlung müssen entfernen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und fügen Sie </font><font style="vertical-align: inherit;">ihn in der Sammlung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser lokaler Fall ist der einfachste, da in diesem Fall der Mechanismus </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht nur in derselben Anwendung, sondern in derselben collectionView- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funktioniert </font><font style="vertical-align: inherit;">und ich alle erforderlichen Informationen über den Koordinatorkoordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abrufen kann</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Lassen Sie es uns in diesem einfachsten lokalen Fall implementieren: </font></font><br><br><img src="https://habrastorage.org/webt/1m/uu/4r/1muu4rnsxmehwuyybyspei14bvo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Fall benötige ich nicht einmal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das ich zuvor beim </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen von </font></font></font></b><font style="vertical-align: inherit;"><b><font color="#0000FF"><font style="vertical-align: inherit;">dragItem</font></font></b><font style="vertical-align: inherit;"> "versteckt" </font><b><font color="#0000FF"><font style="vertical-align: inherit;">habe</font></font></b><font style="vertical-align: inherit;"> und das ich jetzt aus dem "gezogenen" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elementauflistung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Formular </font><b><font color="#0000FF"><font style="vertical-align: inherit;">item.localObject ausleihen kann</font></font></b><font style="vertical-align: inherit;"> . Wir werden es brauchen, wenn wir </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilder in den "Papierkorb" werfen, der sich in derselben Anwendung befindet, aber nicht dieselbe collectionView- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung ist</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jetzt nur ich brauche zwei </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexPathes</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Quelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und „Zielpunkt“ </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bekomme zuerst Informationen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageInfo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über das Bild an der alten Stelle aus dem Modell, entfernen Sie es von dort. Und fügen</font><font style="vertical-align: inherit;">anschließend in ein Array von</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildern</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> meiner Modelle</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Informationen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Imageinfo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein Bild mit einem neuen Index</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> destinationIndexPath.item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . So habe ich mein Modell aktualisiert:</font></font><br><br><img src="https://habrastorage.org/webt/pk/bk/ny/pkbknyitrog4kq40dcs7sfpxk0g.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt muss ich die collectionView-</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> selbst aktualisieren</font><font style="vertical-align: inherit;">. Es ist sehr wichtig zu verstehen, dass ich nicht alle Daten in meiner collectionView-</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reloadData () während</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des Drag &amp; Drop-Prozesses</font><font style="vertical-align: inherit;">überladen möchte</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da dadurch die gesamte "Welt" unserer Bildergalerie neu installiert wird, was sehr schlecht ist. TUN SIE ES NICHT. Stattdessen werde ich aufräumen und Elemente einfügen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einzeln:</font></font><br><br><img src="https://habrastorage.org/webt/1-/xa/jg/1-xajgm6ru3uwhqh53w4tf7tblu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe das Sammlungselement</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sourceIndexPath gelöscht</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und ein neues Sammlungselement mit</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eingefügt</font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es sieht so aus, als ob dieser Code großartig funktioniert, aber in Wirklichkeit kann dieser Code Ihre Anwendung zum Absturz bringen. Der Grund dafür ist, dass Sie zahlreiche Änderungen an Ihrer collectionView-</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vornehmen.</font><font style="vertical-align: inherit;">In diesem Fall muss jeder Schritt zum Ändern der Sammlung normal mit dem Modell synchronisiert werden, was in unserem Fall nicht beobachtet wird, da beide Vorgänge gleichzeitig ausgeführt werden: Löschen und Einfügen. Daher die Sammlung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird sich irgendwann in einem NICHT synchronisierten Zustand mit dem Modell befinden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber es gibt eine wirklich coole Möglichkeit, dies zu </font><b><font color="#0000FF"><font style="vertical-align: inherit;">umgehen</font></font></b><font style="vertical-align: inherit;"> : Die collectionView- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auflistung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verfügt über eine Methode namens </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performBatchUpdates</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einem Abschluss ( </font></font><code>closure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Innerhalb dieses Abschlusses kann ich eine beliebige Anzahl dieser </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deleteItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und alles, was ich möchte, platzieren: </font></font><br><br><img src="https://habrastorage.org/webt/6b/w_/6n/6bw_6nemnuzuv8xowkmmpt4yumw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt werden </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deleteItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als eine einzige Operation ausgeführt, und es wird nie an einer Synchronisierung Ihres Modells mit der Collection </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView </font></font></font></b><font style="vertical-align: inherit;"><b><font color="#0000FF"><font style="vertical-align: inherit;">mangeln</font></font></b><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und schließlich müssen wir den </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bitten, das </font><font style="vertical-align: inherit;">„Zurücksetzen“ selbst </font><b><font color="#0000FF"><font style="vertical-align: inherit;">zu</font></font></b><font style="vertical-align: inherit;"> implementieren und zu animieren </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/7k/qr/1u/7kqr1uatpcgzp8vim6hsf1-o_lo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobald Sie Ihren Finger vom Bildschirm heben, bewegt sich das Bild, alles geschieht gleichzeitig: „Zurücksetzen“, das Bild verschwindet an einem Ort und Aussehen an einem anderen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versuchen wir, das Testbild „Venedig“ in unserer Bildergalerie an das Ende der ersten Zeile zu verschieben ... </font></font><br><br><img src="https://habrastorage.org/webt/gy/k4/ci/gyk4ci8msjogcvzo4hb8iqt2atq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und es zurückzusetzen: </font></font><br><br><img src="https://habrastorage.org/webt/kb/a0/mv/kba0mvrjzqyf_wf1y8b0j5h27oy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wir wollten, wurde es am Ende der ersten Zeile platziert.</font></font><br>  Hurra!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles arbeitet! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt werden wir uns NICHT mit dem lokalen Fall befassen, dh wenn das "Zurücksetzen" -Element AUSSERHALB kommt, dh aus einer anderen Anwendung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um dies zu tun in dem Code schreiben wir </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sonst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Bezug auf die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn wir nicht über </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verfügen </font><font style="vertical-align: inherit;">, bedeutet dies, dass das "zurücksetzbare" Element von AUSSEN stammt und wir die Datenübertragung mit dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemProver des </font></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zurücksetzbaren item.dragItem.itemProvider-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Elements verwenden müssen </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/wh/-9/gd/wh-9gdfe_e52v_9-wc-mf6o-7co.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie </font><b><font color="#0000FF"><font style="vertical-align: inherit;">AUSSEN</font></font></b><font style="vertical-align: inherit;"> "ziehen </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font><b><font color="#0000FF"><font style="vertical-align: inherit;">ablegen</font></font></b><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">und </font><font style="vertical-align: inherit;">" </font><font style="vertical-align: inherit;">ablegen" ”</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werden diese Informationen dann sofort verfügbar? Nein, Sie wählen ASYNCHRON Daten aus dem "gezogenen" Objekt aus. Aber was ist, wenn die Probe 10 Sekunden dauert? Was wird die Sammlung zu diesem Zeitpunkt tun </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Darüber hinaus kommen die Daten möglicherweise nicht in der Reihenfolge an, in der wir sie angefordert haben. Dies zu handhaben ist nicht einfach und </font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schlug für </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesen Fall eine völlig neue Technologie für die Verwendung von Ersatzstoffen vor </font></font><code>Placeholders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie platzieren einen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platzhalter </font><font style="vertical-align: inherit;">in Ihrer Sammlung </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und die Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verwaltet alles für Sie. Wenn die Daten endgültig ausgewählt sind, müssen Sie den Platzhalter </font><b><font color="#0000FF"><font style="vertical-align: inherit;">lediglich</font></font></b><font style="vertical-align: inherit;"> auffordern, </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seinen </font><b><font color="#0000FF"><font style="vertical-align: inherit;">placeholderContext-</font></font></b><font style="vertical-align: inherit;"> Kontext aufzurufen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und sagen Sie ihm, dass Sie die Informationen erhalten haben. Aktualisieren Sie dann Ihr Modell und Ihren Kontext </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tauscht die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AUTOMATISCH </font><font style="vertical-align: inherit;">mit dem Platzhalter </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gegen eine Ihrer </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zellen aus</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , was dem Datentyp entspricht, den Sie erhalten haben. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle diese Maßnahmen , die </font><font style="vertical-align: inherit;">wir produzieren , </font><font style="vertical-align: inherit;">durch einen Platzhalter Kontext zu </font><font style="vertical-align: inherit;">schaffen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die einen Platzhalter steuert </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und dass Sie von Koordinator erhalten </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , „Reset“ zu </font><font style="vertical-align: inherit;">fragen </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> an einen Platzhalter </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde den Initialisierer für den </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platzhalterkontext placeholderContext verwenden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das "wirft" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in einen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropPlaceholder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/xh/lo/gk/xhlogk8aee_nhrukgwbtq0m8nae.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Objekt, das ich "werfen" werde, </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wobei </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Element einer </font><font style="vertical-align: inherit;">Schleife ist, da wir </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viele </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator.items</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werfen können </font><font style="vertical-align: inherit;">. Wir "werfen" sie eins nach dem anderen. Also, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - das ist , </font><font style="vertical-align: inherit;">was wir „ziehen“ sind </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und „werfen“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Das nächste Argument für diese Funktion ist der Platzhalter, und ich werde ihn mit dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropPlaceholder-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialisierer erstellen </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/hg/yu/jk/hgyujkpqodrfosah0opsrwwc-t0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dazu muss ich wissen, wo ich den Platzhalter einfügen werde</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d.h. </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sowie die Kennung der wiederverwendeten Zelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reuseIdentifier</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Argument entspricht </font><font style="vertical-align: inherit;">offensichtlich dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Platzieren des "gezogenen" Objekts und wird ganz am Anfang der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDropWith-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode berechnet </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schauen wir uns nun die Zellen- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID von reuseIdentifier an</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . SIE müssen entscheiden, welcher </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelltyp</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ihr Locator ist </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Im Brennpunkt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht „vorgerüstete“ Zelle - </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> an einen Platzhalter</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dass Sie eine Entscheidung über die Zelle nehmen müssen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Daher wird die Kennung der wiederverwendeten Zelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reuseIdentifiercell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Ihnen </font><b><font color="#0000FF"><font style="vertical-align: inherit;">angefordert,</font></font></b></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> damit sie als PROTOTYP verwendet werden kann. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde es "DropPlaceholderCell" nennen, aber im Grunde könnte ich es wie auch immer nennen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist nur ein String </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die ich auf meinem verwenden werde </font></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese Sache zu schaffen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gehen Sie zurück zu unserer </font></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und erstellen Sie eine </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zellzelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für den Platzhalter </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dazu müssen wir nur eine Sammlung auswählen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und untersuchen. Im allerersten Feld </font></font><code>Items</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wechsle ich </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu</font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dadurch entsteht für uns sofort eine zweite Zelle, die eine exakte Kopie der ersten ist. </font></font><br><br><img src="https://habrastorage.org/webt/df/go/ke/dfgokefx6miugtxs8ee0_jl1zsk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir wählen unsere neue Zelle aus </font></font><code>ImageCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, setzen den Bezeichner " </font></font><code>DropPlaceholderCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", löschen alle </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemente </font><font style="vertical-align: inherit;">von dort </font><font style="vertical-align: inherit;">, einschließlich </font></font><code>Image View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da dieser PROTOTYP verwendet wird, wenn das Bild noch nicht angekommen ist. Wir fügen dort einen neuen Aktivitätsindikator aus der Objektpalette hinzu </font></font><code>Activity Indicator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der sich dreht und die Benutzer darüber informiert, dass ich einige "Zurücksetzen" -Daten erwarte. Ändern Sie </font><font style="vertical-align: inherit;">auch die Hintergrundfarbe </font></font><code>Background</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu verstehen , </font><font style="vertical-align: inherit;">dass , </font><font style="vertical-align: inherit;">wenn „Reset“ von außen Bild funktioniert genau diese Zelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Prototypen: </font></font><br><br><img src="https://habrastorage.org/webt/ur/gi/72/urgi728r6j2a1d2z0tf_4k-er1a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neben der Art der neuen Zelle sollte nicht </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageCollectionVewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, weil es keine Bilder darin geben wird. Ich werde diese Zelle zu einer normalen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIollectionCiewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYPE- </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Zelle machen</font></font></b><font style="vertical-align: inherit;"> , da wir keine </font></font><code>Outlets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für die Steuerung </font><font style="vertical-align: inherit;">benötigen </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/sg/d8/ya/sgd8ya2342bd0lgk9fl172j-8pi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie den Aktivitätsindikator </font></font><code>Activity Indicator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so, dass er von Anfang an animiert wird und ich nichts in den Code schreiben müsste, um ihn zu starten. Klicken Sie dazu auf die Option </font></font><code>Animating</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/qm/de/hq/qmdehqmwsuzn_dt8fkbjdoclkss.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und das ist alles. Also haben wir alle Einstellungen für diese Zelle vorgenommen </font></font><code>DropPlaceholderCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und kehren zu unserem Code zurück. Jetzt haben wir einen großartigen Locator </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bereit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles, was wir tun müssen, ist, die Daten abzurufen. Wenn die Daten empfangen werden, teilen wir dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einfach diesen Kontext mit </font><font style="vertical-align: inherit;">und er tauscht den Platzhalter aus</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und unsere "native" Zelle mit Daten, und wir werden Änderungen am Modell vornehmen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde EIN Objekt "laden", das mein </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element sein wird,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ich die Methode loadObject (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Singular) verwende. Ich verwende den Code </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem.itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anbieter </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ItemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , welche Datenelemente liefert </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asynchron. Es ist klar, dass wenn </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iitemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verbunden ist </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">wir das </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iitem-Objekt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "reset" </font><font style="vertical-align: inherit;">außerhalb dieser Anwendung erhalten. Das Folgende ist die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methode loadObject (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Singular): </font></font><br><br><img src="https://habrastorage.org/webt/bv/pl/fj/bvplfjtt-wlffytoqky4jxcbxco.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser bestimmte Abschluss wird NICHT ausgeführt</font></font><code>main queue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Und leider mussten wir Schalter </font></font><code>main queue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DispatchQueue.main.async {}</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um „fangen“ das Seitenverhältnis des Bildes auf eine lokale Variable </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectratio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben wirklich zwei lokale Variablen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AspectRatio eingeführt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br><br><img src="https://habrastorage.org/webt/vc/k3/vg/vck3vgqg7grejo8tj2ojbdnfdny.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und wir werden sie beim Laden des Image- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und der URL- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "abfangen" </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/jc/ui/yk/jcuiyk3c1zcz4wmkeafkpmkdvqq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn beide lokalen Variablen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AspectRatio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Null sind</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , werden wir den </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platzhalter-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kontext- </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Platzhalter-</font></font></b><font style="vertical-align: inherit;"> Kontext </font><font style="vertical-align: inherit;">mit der Methode </font><b><font color="#0000FF"><font style="vertical-align: inherit;">commitInsertion</font></font></b><font style="vertical-align: inherit;"> fragen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie uns die Möglichkeit, unser </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modell zu ändern </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/z6/hm/8w/z6hm8w4jnyrwxgx2g8v9sfnfiuq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Ausdruck haben wir </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dies ist der </font><font style="vertical-align: inherit;">einzufügende </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und wir ändern unser </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modell </font><font style="vertical-align: inherit;">. Das ist alles, was wir tun müssen, und diese Methode ersetzt AUTOMATISCH einen Platzhalter </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durch eine </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indem sie die normale </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cellForItemAt-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><b><font color="#0000FF"><font style="vertical-align: inherit;">aufruft</font></font></b><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie, dass </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sich stark von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath unterscheiden kann</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> Warum?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da die Datenerfassung natürlich 10 Sekunden dauern kann, ist dies unwahrscheinlich, kann jedoch 10 Sekunden dauern. In dieser Zeit </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann </font><font style="vertical-align: inherit;">in der Sammlung </font><font style="vertical-align: inherit;">viel passieren. Können neue Zellen hinzufügen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zellen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geschieht alles schnell genug. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie IMMER </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und NUR </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um Ihr Modell zu aktualisieren. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie aktualisieren wir unser Modell? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir fügen in das Array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery.images</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Struktur </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagemodel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bestehend aus dem Seitenverhältnis </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectratio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Bild - </font><font style="vertical-align: inherit;">URL </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der uns die entsprechenden zurück </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nach Anbietern</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dadurch wird unser </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modell aktualisiert </font><font style="vertical-align: inherit;">, und die Methode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commitInsertion</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erledigt den Rest für uns. Sie müssen nichts mehr tun, keine Einfügungen, keine Löschungen, nichts davon. Und da wir uns in einer Schließung befinden, müssen wir uns natürlich </font><b><font color="#0000FF"><font style="vertical-align: inherit;">selbst</font></font></b><font style="vertical-align: inherit;"> hinzufügen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></font></b>  . <br><br><img src="https://habrastorage.org/webt/rm/ff/nx/rmffnxnhy_1k1ukzub6ni468z6g.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir aus irgendeinem Grunde nicht in der </font><font style="vertical-align: inherit;">Lage sind das Seitenverhältnis zu erhalten </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectratio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus den entsprechenden </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durch Anbieter</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , könnte ein Fehler empfangen wurde </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehler</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anstelle </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von Anbietern</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , müssen wir wissen lassen, sie aus </font><font style="vertical-align: inherit;">dem Zusammenhang </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , müssen Sie diese Platzhalter zerstören </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, weil wir alle gleich sind, können wir nicht Andere Daten abrufen: </font></font><br><br><img src="https://habrastorage.org/webt/gw/tm/jj/gwtmjjywumpq4o7czavwnrcweay.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Sache, die Sie beachten sollten, ist, </font></font><code>URLs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dass sie von Orten wie diesem stammen </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In Wirklichkeit benötigen sie kleinere Transformationen, um „sauber“ zu werden.</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für das Bild. Wie dieses Problem gelöst wird, können Sie dieser Demoanwendung in einer Datei </font></font><code>Utilities.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github entnehmen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher verwenden </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">beim Empfang eines </font><font style="vertical-align: inherit;">Bildes die Eigenschaft </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/v5/cq/dc/v5cqdcxzqnwybov4eiklwlkt2o8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und das ist alles, was Sie tun müssen, um AUSSERHALB etwas in der Sammlung zu akzeptieren </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie es uns in Aktion sehen. Wir starten gleichzeitig in einem Multitasking-Modus unsere Demo-Anwendung </font></font><code>ImageGallery</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit einer Suchmaschine </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suchen wir nach Bildern zum Thema "Dawn" (Sonnenaufgang). In </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bereits gebaut</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Mechanismus, damit wir eines dieser Bilder auswählen, lange halten, ein wenig verschieben und in unsere Bildergalerie ziehen können. </font></font><br><br><img src="https://habrastorage.org/webt/au/t9/wk/aut9wky03l29lkgj9g7l1ulifmc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Vorhandensein eines grünen Pluszeichens "+" zeigt an, dass unsere Anwendung bereit ist, ein Bild eines Drittanbieters zu akzeptieren und es an dem vom Benutzer angegebenen Ort in Ihre Sammlung zu kopieren. Nachdem wir es „zurückgesetzt“ haben, dauert es einige Zeit, bis das Bild </font><font style="vertical-align: inherit;">heruntergeladen ist. Zu </font><font style="vertical-align: inherit;">diesem Zeitpunkt funktioniert es </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ge/e-/n0/gee-n08qnm7zc5ofbgr3e4o8df8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Abschluss des Downloads wird das Bild „Zurücksetzen“ an der richtigen Stelle platziert und </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verschwindet: </font></font><br><br><img src="https://habrastorage.org/webt/m8/rb/nq/m8rbnqvi2x0s3as4w_fzpjpltae.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir können die Bilder weiterhin „zurücksetzen“ und in unserem Bild ablegen Sammlungen von noch mehr Bildern: </font></font><br><br><img src="https://habrastorage.org/webt/x8/np/bq/x8npbqpkm9af1_ybkxhw13kjhug.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach dem "Zurücksetzen" </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/b2/lq/hb/b2lqhbg6smc2mvvvjp0copbvfmu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infolgedessen wird unsere Bildergalerie mit neuen Bildern gefüllt:</font></font><br><br><img src="https://habrastorage.org/webt/lf/jl/mq/lfjlmqca5iqv26l0woi-htqldcq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun , </font><font style="vertical-align: inherit;">da klar ist , </font><font style="vertical-align: inherit;">dass wir Fotos machen können von außen, wir brauchen nicht das Testbild, und wir werden entfernen: </font></font><br><br><img src="https://habrastorage.org/webt/bv/0t/az/bv0tazx3cjushm1rkcfalu-m1au.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDidLoad</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird sehr einfach: es ist , dass </font><font style="vertical-align: inherit;">wir unser tun </font></font><code>Controller</code> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delegieren und fügen Erkenner Geste </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die die Anzahl der Bilder pro Zeile reguliert: </font></font><br><br><img src="https://habrastorage.org/webt/ei/fo/1b/eifo1bz0szfk12tuqfseh5fser8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Natürlich können wir einen Cache für </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bilder hinzufügen </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/f4/oi/ql/f4oiql_gjnka7racbmkrts7mbja.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir füllen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beim "Zurücksetzen" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/xy/hc/bt/xyhcbtodifjiqgd5norskny9cge.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und beim Abrufen aus dem "Netzwerk" in der benutzerdefinierten </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageCollectionViewCell-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/nk/sl/2s/nksl2sw3dujz-_z7fmp55zixfzi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">verwenden den </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cache </font><font style="vertical-align: inherit;">beim Abspielen einer Zelle</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unserer Bildergalerie in der benutzerdefinierten Klasse</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageCollectionViewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/-5/ar/zo/-5arzoeghtoj_ckv-ezxhpu403c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt beginnen wir mit einer leeren Sammlung ...</font></font><br><br><img src="https://habrastorage.org/webt/rl/bq/vn/rlbqvnpsww27j5xbryp9vlgng1a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und legen dann ein neues Bild in unserer Sammlung ab ...</font></font><br><br><img src="https://habrastorage.org/webt/9j/7o/es/9j7oesf_b-rk-dj-s9ysujlkte0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... das Bild wird hochgeladen und</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funktioniert ...</font></font><br><br><img src="https://habrastorage.org/webt/tg/s7/6t/tgs76tffgkarqkpzhamq97ebvio.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und das Bild erscheint an der richtigen Stelle:</font></font><br><br><img src="https://habrastorage.org/webt/ps/uy/z8/psuyz8apr4zpulpgpl5z-hsegfy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir füllen unsere Sammlung weiterhin AUSSEN:</font></font><br><br><img src="https://habrastorage.org/webt/it/ve/_y/itve_yuqqnffh8zyzlpmj_vvske.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommt Das Laden von Bildern</font></font><code>Placeholders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funktioniert ...</font></font><br><br><img src="https://habrastorage.org/webt/li/rx/wd/lirxwd74znfsvgrtjkpg3gfvl8u.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und die Bilder erscheinen an der richtigen Stelle:</font></font><br><br><img src="https://habrastorage.org/webt/uq/j0/as/uqj0asiyqcpqosl8x-3akydb3x0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir können also viel mit unserer Bildergalerie tun: Füllen Sie sie AUSSEN, organisieren Sie Elemente INNEN neu, teilen Sie Bilder mit anderen Anwendungen Niyami.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir müssen ihr nur beibringen, wie man unnötige Bilder durch „Zurücksetzen“ beseitigt</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im "Mülleimer" in der Navigationsleiste rechts. </font><font style="vertical-align: inherit;">Wie im Abschnitt „Funktionen der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demoanwendung für</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildergalerien“ beschrieben, wird der „Papierkorb“ durch die </font><b><font color="#0000FF"><font style="vertical-align: inherit;">GabageView-</font></font></b><font style="vertical-align: inherit;"> Klasse dargestellt </font><font style="vertical-align: inherit;">, die von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erbt, </font><font style="vertical-align: inherit;">und wir müssen ihm beibringen, Bilder aus unserer Sammlung zu akzeptieren </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setzen Sie die </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilder der Galerie in den Papierkorb zurück.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sofort vom Ort - zum Steinbruch. Ich will hinzufügen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GabageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> „Interaktion“ </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaktion</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und es wird </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteraction</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da ich versuche zu „reset“ ein </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paar Dinge. Alle müssen wir sicherstellen , </font><font style="vertical-align: inherit;">dass </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteraction</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dieser Delegat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Delegierten</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und ich werde selbst ernennen, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die sich </font><font style="vertical-align: inherit;">selbst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dieser Delegat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Delegierte</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/mm/tq/xn/mmtqxnmypbysaik9fjd3r2amrlg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Natürlich unsere Klasse </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GabageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bestätigen , </font><font style="vertical-align: inherit;">dass wir ein Protokoll implementieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteractionDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/nv/xy/vw/nvxyvwya12ggtiznb1byxq5vorm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles , was </font><font style="vertical-align: inherit;">wir tun müssen, um damit es funktioniert </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Dies dient zur Implementierung der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uns</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bereits bekannten </font><b><font color="#0000FF"><font style="vertical-align: inherit;">canHandle-</font></font></b><font style="vertical-align: inherit;"> Methoden </font><font style="vertical-align: inherit;">.</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/jg/m9/ol/jgm9olzkrnv_fmu0mwesx91dvsq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Gegensatz zu ähnlichen Methoden für die Sammlung</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verfügen wir jedoch nicht über zusätzliche Informationen in Form eines</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indexpfads</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der Deponie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns diese Methoden implementieren.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Innerhalb der Methode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nur die „Drag and Drop“ verarbeitet werden</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die das Bild repräsentieren</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Daher werde ich</font><font style="vertical-align: inherit;">nur</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> true zurückgeben,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wenn</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/if/z7/yo/ifz7yoibzsugla3mj7kat1cylt8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> canHandle-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode</font><font style="vertical-align: inherit;">sagen Sie im Wesentlichen nur, wenn das "ziehbare" Objekt kein</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> UIImage-</font></font></b><font style="vertical-align: inherit;"> Bild ist</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dann macht es keinen Sinn, das "Zurücksetzen" fortzusetzen und nachfolgende Methoden aufzurufen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn das "ziehbare" Objekt ein </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Image ist </font><font style="vertical-align: inherit;">, führen wir die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sessionDidUpdate-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode aus </font><font style="vertical-align: inherit;">. Bei dieser Methode müssen wir </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lediglich</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unser </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIDropProposal-</font></font></b><font style="vertical-align: inherit;"> Angebot zum </font><font style="vertical-align: inherit;">Zurücksetzen zurückgeben </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Und ich bin bereit, nur das "gezogene" LOKALE Objekt des </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage-Typs</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des Bildes zu akzeptieren </font><font style="vertical-align: inherit;">, das </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">überall in meiner </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "abgelegt" </font><font style="vertical-align: inherit;">werden </font><b><font color="#0000FF"><font style="vertical-align: inherit;">kann</font></font></b><font style="vertical-align: inherit;"> . Mein </font></font><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interagiert nicht mit Bildern, die </font><font color="#0000FF"><font style="vertical-align: inherit;">AUSSEN ausgegeben</font></font><font style="vertical-align: inherit;"> werden. Ich analysiere also mit der Variablen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob es ein lokales "Zurücksetzen" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt und ich den "Zurücksetzen" -Satz in Form des </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konstruktors </font><font style="vertical-align: inherit;">mit dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operationsargument </font></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zurücknehme</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">das den Wert </font><b><font color="#0000FF"><font style="vertical-align: inherit;">.copy annimmt</font></font></b><font style="vertical-align: inherit;"> , da </font><b><font color="#0000FF"><font style="vertical-align: inherit;">IMMER LOKALES</font></font></b><font style="vertical-align: inherit;"> "Ziehen und Ablegen" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in meiner Anwendung aus der Sammlung stammt </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn "Drag </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; </font><font style="vertical-align: inherit;">Drop" </font><font style="vertical-align: inherit;">und "Zurücksetzen" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AUSSEN auftreten, gebe ich den Satz "Zurücksetzen" in Form des </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konstruktors </font><font style="vertical-align: inherit;">mit dem </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operationsargument zurück</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">das den Wert </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.fobbiden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> annimmt, </font><b><font color="#0000FF"><font style="vertical-align: inherit;">dh</font></font></b><font style="vertical-align: inherit;"> "verboten", und wir erhalten ein Verbotszeichen "Zurücksetzen" anstelle des grünen Pluszeichens . </font></font><br><br><img src="https://habrastorage.org/webt/ii/vd/wy/iivdwy9av6cxwzjkeay9kf87lby.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopieren eines </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIImage-</font></font></b><font style="vertical-align: inherit;"> Bildes</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir simulieren eine Verringerung der Skalierung auf fast 0, und wenn das "Zurücksetzen" erfolgt, entfernen wir dieses Bild aus der Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Illusion zu erzeugen, dass Bilder für den Benutzer in der "Mülltonne" </font><font style="vertical-align: inherit;">"abgeladen </font><font style="vertical-align: inherit;">und verschwunden" werden, verwenden wir die für uns neue </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VorschauForDropping-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">mit der wir </font><font style="vertical-align: inherit;">das "Dumping" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an einen anderen Ort </font><font style="vertical-align: inherit;">umleiten </font><font style="vertical-align: inherit;">und gleichzeitig das "abgelegte" Objekt während der Animation transformieren können: </font></font><br><br><img src="https://habrastorage.org/webt/e7/ej/zb/e7ejzbhlfzjxrkxsjupt9hiewz4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bei dieser Methode erhalten </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">mithilfe des </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDragPreviewTarget-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialisierers </font><font style="vertical-align: inherit;">eine neue </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorschau</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für das zu </font><b><font color="#0000FF"><font style="vertical-align: inherit;">löschende </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zielobjekt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und leiten es mithilfe der </font><b><font color="#0000FF"><font style="vertical-align: inherit;">retargetedPreview-</font></font></b><font style="vertical-align: inherit;"> Methode um</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an einen neuen Ort, an die „Mülltonne“, deren Skalierung auf fast Null </font><b><font color="#0000FF"><font style="vertical-align: inherit;">reduziert ist</font></font></b><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/bu/zp/av/buzpavo-rn6n2eoeztccvman6r0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Benutzer einen Finger nach oben hebt, erfolgt ein „Zurücksetzen“ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und ich (wie </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) erhalte eine </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nachricht </font><font style="vertical-align: inherit;">. In der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nachricht führen </font><font style="vertical-align: inherit;">wir den eigentlichen „Reset“ durch </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ehrlich gesagt </font><font style="vertical-align: inherit;">interessiert uns </font><font style="vertical-align: inherit;">das </font><font style="vertical-align: inherit;">Bild, das </font><font style="vertical-align: inherit;">auf </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> selbst </font><b><font color="#0000FF"><font style="vertical-align: inherit;">abgelegt wurde</font></font></b><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nicht mehr, da wir es praktisch unsichtbar machen werden. Höchstwahrscheinlich </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signalisiert </font><font style="vertical-align: inherit;">die Tatsache, dass der „Reset“ abgeschlossen </font><font style="vertical-align: inherit;">ist, dass wir dieses Bild aus der Sammlung entfernen </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Um dies zu erreichen, müssen wir die Sammlung selbst </font><font style="vertical-align: inherit;">und den </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlungsindexpfad </font></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kennen</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verworfenes Bild darin. Woher können wir sie bekommen? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da der Prozess </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einer einzigen Anwendung kommt, ist es uns zur </font><font style="vertical-align: inherit;">Verfügung alle lokalen: lokale </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unsere </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Sitzung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der lokale Kontext </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die unsere Sammlung ist </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und lokale Objekt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die wir selbst zurückgesetzt Bild ist tun </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von „Galerie“ oder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aus diesem Grunde </font><font style="vertical-align: inherit;">können wir in der Methode bekommen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und deren </font><font style="vertical-align: inherit;">Verwendung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Modell</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unsere</font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, können wir eine Reihe von Bildern erhalten</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bilder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYPE [ImageModel]:</font></font><br><br><img src="https://habrastorage.org/webt/3t/tj/kr/3ttjkr1cuyqxh4v3islcmsofjhy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Hilfe der lokalen</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unserer</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitzung</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Session</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> konnten wir alle die „ziehen“ bekommen auf</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GarbageView</font></font></font></b> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Elemente</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Elemente</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und es kann eine Menge sein, wie wir wissen, und Alle von ihnen sind Bilder unserer</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView-Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Erstellen</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elementen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unserer Sammlung</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haben wir für jeden „drag“ vorgesehen</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lokales Objekt</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der das Bild ist</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bild</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber es ist</font><font style="vertical-align: inherit;">wir nicht bei</font><font style="vertical-align: inherit;">internen Reorganisation Sammlung in handlichen kommen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Collection</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber die „Reset“ Bildergalerie „Abfalleimer“ wir in den lokalen Einrichtung dringend brauchen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> „drag“ Objekt</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nach dieser</font><font style="vertical-align: inherit;">Zeit Wir haben keinen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der so großzügig Informationen darüber austauscht, was in der collectionView-</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geschieht</font><font style="vertical-align: inherit;">. Deshalb wollen wir das lokale Objekt</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Index war</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der Bild</font><font style="vertical-align: inherit;">Array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Bilder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unserer Modelle</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nehmen Sie die notwendigen Änderungen der Methode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItems (bei indexPath: IndexPath)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/le/iy/hz/leiyhzxv04brlhk6nlhpakw4bek.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt können wir alle „pretaskivaemogo“ Element nehmen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Element</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die der Index</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der Bild</font><font style="vertical-align: inherit;">Array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Bilder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unserer Modelle</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und an die Array</font><font style="vertical-align: inherit;">Indizes senden</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indizes</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPahes</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delete Bilder:</font></font><br><br><img src="https://habrastorage.org/webt/ci/cf/uo/cicfuo7gxvbmh7ddvjj2maorfog.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Indexarray Wissen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indizes</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPahes</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delete Bilder in den Verfahren</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performBatchUpdates</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir alle gelöschten Bilder von Models entfernen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und aus der Sammlung der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sammlung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/2t/49/i4/2t49i4wwgqlz-vqqpalim8m4h4u.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Führen Sie </font><font style="vertical-align: inherit;">die Anwendung, füllen Sie </font><font style="vertical-align: inherit;">die Galerie mit neuen Bildern: </font></font><br><br><img src="https://habrastorage.org/webt/vj/kb/v5/vjkbv5nwenjhacglkmksbto5jh0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Paar von Bildern auswählen , </font><font style="vertical-align: inherit;">die wir von unserer Galerie entfernen möchten ... </font></font><br><br><img src="https://habrastorage.org/webt/cm/-e/t1/cm-et1fd2cp7pext2src2vddkmm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... „werfen“ , um </font><font style="vertical-align: inherit;">sie auf das Symbol mit der „Mülltonne“ ... </font></font><br><br><img src="https://habrastorage.org/webt/yw/l3/ue/ywl3ue6tusekuyqvpjv3n4pn1xy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie reduziert fast auf 0 ... </font></font><br><br><img src="https://habrastorage.org/webt/14/6r/nd/146rndccir7ou4z5zitpj9gv4ek.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und verschwinden aus der Sammlung </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, versteckt im "Mülleimer":</font></font><br><br><img src="https://habrastorage.org/webt/1x/b_/zw/1xb_zw27xn-2yp7lb7tvlpgm_fc.png"><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Speichern von Bildern zwischen den Starts. </font></font></h1><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Bildergalerie zwischen den Läufen zu speichern, verwenden wir </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nachdem </font><font style="vertical-align: inherit;">wir </font><font style="vertical-align: inherit;">unser Modell in ein </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format konvertiert haben. Um dies zu </font><font style="vertical-align: inherit;">tun, wird fügen wir unseren </font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variable </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var defailts</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br><br><img src="https://habrastorage.org/webt/wy/cg/vy/wycgvy5krdrmfiugzp9dgykaphe.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... und im Modell </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilddatenbank</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageModel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodierbare</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/j2/vv/w6/j2vvw62tiuud6eidtx1n9ipeq0w.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Arrays von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Array</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der URL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doppel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> setzen bereits das Protokoll </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodierbare</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so dass wir an die </font><font style="vertical-align: inherit;">Arbeit Codierung nicht zu bekommen , </font><font style="vertical-align: inherit;">sonst haben , </font><font style="vertical-align: inherit;">etwas zu tun und Dekodieren in ImageGallery- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie bekommen wir die </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie dazu eine berechnete Variable </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die das Ergebnis eines Versuchs zurückgibt, sich </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selbst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONEncoder.encode ()</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in das folgende </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format </font><font style="vertical-align: inherit;">zu </font><font style="vertical-align: inherit;">konvertieren: </font></font><br><br><img src="https://habrastorage.org/webt/f6/o3/hz/f6o3hzee-7hryaxadmzf--0jeym.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und das ist alles. Entweder werden </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Ergebnis der Konvertierung von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in format zurückgegeben </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, oder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nil,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wenn diese Konvertierung fehlschlägt, obwohl letzteres niemals geschieht, da dieser TYP zu 100% </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codierbar ist</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optionale</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Variable </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird </font><font style="vertical-align: inherit;">nur aus Symmetriegründen verwendet.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt haben wir eine Art und Weise Modelle zu konvertieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilddatenbank</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Format </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hat die json-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Variable </font><font style="vertical-align: inherit;">TYPE- </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten?</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> was in </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults gespeichert werden kann</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stellen Sie sich nun vor, wir haben es irgendwie geschafft, die </font><b><font color="#0000FF"><font style="vertical-align: inherit;">JSON-</font></font></b></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Daten </font><b><font color="#0000FF"><font style="vertical-align: inherit;">abzurufen</font></font></b><font style="vertical-align: inherit;"> , und ich möchte daraus unser Modell, eine Instanz der </font><b><font color="#0000FF"><font style="vertical-align: inherit;">ImageGallery-</font></font></b><font style="vertical-align: inherit;"> Struktur, neu </font><b><font color="#0000FF"><font style="vertical-align: inherit;">erstellen</font></font></b><font style="vertical-align: inherit;"> . Für diese sehr leicht zu schreiben initializer </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Bildergalerie</font></font></b><font style="vertical-align: inherit;"> sind die Eingabeargumente </font><font style="vertical-align: inherit;">die Daten </font><b><font color="#0000FF"><font style="vertical-align: inherit;">der json</font></font></b><font style="vertical-align: inherit;"> . Dieser Initialisierer ist ein "fallender" Initialisierer (</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><code>JSON</code><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font><code>failable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Wenn es nicht initialisiert wird, es „fällt“ und kehrt </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/g7/0n/l4/g70nl4mxpadtrajaq7y-ec4f6bw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bin nur eine neuer Wert bekomme </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newValue</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von den Decodern </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONDecoder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und versuche , </font><font style="vertical-align: inherit;">die Daten zu dekodieren </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die zu meinen initializer übertragen werden, und dann ordnet sie </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das Selbst</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn ich das geschafft habe, bekomme ich eine neue Instanz von </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber wenn mein Versuch fehlschlägt, </font><b><font color="#0000FF"><font style="vertical-align: inherit;">gebe</font></font></b><font style="vertical-align: inherit;"> ich </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null zurück</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da meine Initialisierung "fehlgeschlagen" ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich muss sagen, dass wir hier viel mehr Gründe haben, um zu „scheitern“ ( </font></font><code>fail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), weil es durchaus möglich ist, dass die </font><b><font color="#0000FF"><font style="vertical-align: inherit;">json-</font></font></b></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Daten</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann verwöhnt oder leer sein, all dies kann zum "Fall" ( </font></font><code>fail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) des Initialisierers führen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt können wir die READ implementieren </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten und Wiederherstellungsmodell </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Methode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewWillAppear</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unsere </font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/gw/n2/u-/gwn2u-zkggggk2vuwfi-czhycdq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... sowie ein Eintrag im Beobachter </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didSet {}</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eigenschaften </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildergalerie</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/-g/bc/yz/-gbcyzh4t5innabrtcbxdmdh3wq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie </font><font style="vertical-align: inherit;">uns die Anwendung ausführen und füllen unsere Galerie von Bildern: </font></font><br><br><img src="https://habrastorage.org/webt/le/t5/wr/let5wryw9nwf-ahnij7f_wltztc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir die Anwendung zu </font><font style="vertical-align: inherit;">schließen und wieder öffnen, können wir unsere bisherigen Galerie sehen In </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gespeicherte </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Bilder</font></font></b><font style="vertical-align: inherit;"> .</font></font><br><br><h1>  Fazit </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Artikel zeigt am Beispiel einer sehr einfachen Demo-Anwendung „Image Gallery“, wie einfach es ist, Technologie </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in eine </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendung </font><font style="vertical-align: inherit;">zu integrieren </font><font style="vertical-align: inherit;">. Dies ermöglichte es, die Bildergalerie vollständig zu bearbeiten, neue Bilder aus anderen Anwendungen dort zu „werfen“, vorhandene zu verschieben und unnötige zu löschen. Und auch, um in der Galerie gesammelte Bilder an andere Anwendungen zu verteilen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Natürlich möchten wir viele solcher thematischen malerischen Bildersammlungen erstellen und direkt auf dem iPad oder iCloud Drive speichern. Dies kann erfolgen, wenn jede solche Galerie als permanent gespeichertes </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIDocument</font></font></b><font style="vertical-align: inherit;"> interpretiert wird</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine solche Interpretation ermöglicht es uns, zur nächsten Abstraktionsebene aufzusteigen und eine Anwendung zu erstellen, die mit Dokumenten arbeitet. </font><font style="vertical-align: inherit;">In einer solchen Anwendung werden Ihre Dokumente von der </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DocumentBrowserViewController-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Komponente angezeigt, die </font><font style="vertical-align: inherit;">der Anwendung sehr ähnlich ist </font></font><code>Files</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Auf diese Weise können Sie </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDocument-</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bilder vom Typ „Bildergalerie“ sowohl auf Ihrem </font><font style="vertical-align: inherit;">als auch </font><font style="vertical-align: inherit;">auf Ihrem </font><b><font color="#0000FF"><font style="vertical-align: inherit;">Bildschirm</font></font></b><font style="vertical-align: inherit;"> erstellen </font></font><code>iPad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>iCloud Drive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das gewünschte Dokument zum Anzeigen und Bearbeiten auswählen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist jedoch das Thema des nächsten Artikels. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Der Code der Demo-Anwendung vor </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und nach </font><font style="vertical-align: inherit;">der Implementierung des Mechanismus </font><font style="vertical-align: inherit;">befindet sich auf </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425817/">https://habr.com/ru/post/de425817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425807/index.html">Komplexität von Systemen und Methoden des „Kampfes“ damit</a></li>
<li><a href="../de425809/index.html">Dabei Programmiersprachen lernen: Softwareentwickler über komplexe Projekte</a></li>
<li><a href="../de425811/index.html">Ein weiteres Problem mit der Anzeige des MacBook Pro</a></li>
<li><a href="../de425813/index.html">CICD: Nahtlose Bereitstellung auf verteilten Clustersystemen ohne Ausfallzeiten</a></li>
<li><a href="../de425815/index.html">Wer kein SEO braucht, wie man einen Optimierer auswählt und seine Arbeit testet</a></li>
<li><a href="../de425819/index.html">GitLab 11.3 mit Maven-Repository und sicheren Umgebungen veröffentlicht</a></li>
<li><a href="../de425821/index.html">So werden Sie 2018 React-Entwickler</a></li>
<li><a href="../de425823/index.html">IPO-Statistik 2018: 45 Milliarden US-Dollar gesammelt, Dropbox weniger Geld gesammelt als Pharmaunternehmen und Immobilienverkäufer</a></li>
<li><a href="../de425827/index.html">Google+ Lektion: Projekte müssen sicherstellen, dass die Grenzen zwischen den Interessen der Nutzer im wirklichen Leben online respektiert werden</a></li>
<li><a href="../de425829/index.html">Wie wir mit Roskomnadzor gekämpft haben und was daraus wurde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>