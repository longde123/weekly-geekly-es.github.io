<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèæ üè™ üíä Cr√©ez des niveaux 2D isom√©triques avec le syst√®me Tilemap ‚óºÔ∏è ‚ôäÔ∏è ü§æüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity 2018.3 a introduit la prise en charge des cartes de tuiles isom√©triques, tr√®s similaires aux cartes de tuiles hexagonales, qui a √©t√© ajout√©e dan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ez des niveaux 2D isom√©triques avec le syst√®me Tilemap</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469497/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abe/6f3/004/abe6f3004d910b9ff91386b4bde99205.png" alt="image"></div><br>  Unity 2018.3 a introduit la prise en charge des cartes de tuiles isom√©triques, tr√®s similaires aux cartes de tuiles hexagonales, qui a √©t√© ajout√©e dans la version 2018.2.  Les nouvelles fonctionnalit√©s de Tilemap vous permettent de cr√©er rapidement et efficacement des environnements 2D bas√©s sur les grilles isom√©triques et hexagonales qui ont √©t√© utilis√©es dans de nombreux jeux classiques, y compris les premi√®res parties de Diablo et Fallout, Civilization, Age of Empires et bien d'autres. <br><br>  Les deux syst√®mes sont bas√©s sur le syst√®me Tilemap d√©j√† existant, qui est apparu dans Unity 2017.2, et aujourd'hui, il est tout aussi facile de travailler avec eux!  De plus, ils ont une int√©gration native avec Editor.  Dans les futures versions d'Unity, ils peuvent √™tre port√©s vers le gestionnaire de packages. <br><br>  Si vous √™tes int√©ress√© √† exp√©rimenter ces syst√®mes, nous avons cr√©√© un projet de kit de d√©marrage isom√©trique pr√©-pr√©par√© avec un personnage anim√© et plusieurs ensembles de tuiles d'environnement.  Vous pouvez le t√©l√©charger <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">ici</a> . <a name="habracut"></a><br><br><h2>  Param√®tres du projet pour le plan de carte isom√©trique </h2><br>  Avant de commencer avec Tilemap, il est important de configurer correctement le projet.  Le plan isom√©trique Tilmap fonctionne avec les sprites bidimensionnels et utilise le bon tri du rendu pour cr√©er l'illusion d'une carte isom√©trique avec une vue de dessus.  Nous devons d'abord √©loigner les carreaux du spectateur et les rapprocher d'eux. <br><br>  Vous pouvez utiliser la fonction Unity appel√©e Tri personnalis√© des axes pour ajuster l'ordre de rendu des objets 2D √† l'√©cran.  Ce param√®tre peut √™tre d√©fini pour la cam√©ra (actuellement, cette m√©thode est standard pour les pipelines de rendu scriptables, y compris LWRP et HDRP), ou globalement, au niveau du projet. <br><br>  Pour d√©finir un tri d'axe personnalis√© au niveau du projet, acc√©dez √† <i>Edition&gt; Param√®tres du projet&gt; Graphiques</i> .  Dans la section Param√®tres de la cam√©ra, vous verrez le menu d√©roulant Mode de tri par transparence, ainsi que les options de valeur X, YZ pour l'axe de tri par transparence. <br><br>  Par d√©faut, Transparency Sort Axis d√©finit les axes XYZ sur (0, 0, 1).  Cependant, toutes nos tuiles 2D sont en fait sur le m√™me plan Z. Par cons√©quent, pour d√©terminer quelles tuiles sont devant ou derri√®re, vous devez utiliser non pas la profondeur, mais la hauteur.  Les tuiles situ√©es plus haut sur l'√©cran seront tri√©es par les plus basses.  Pour trier les tuiles par hauteur, modifiez la valeur du mode de tri par transparence sur Personnalis√© et d√©finissez Axe de tri par transparence sur (0, 1, 0). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77f/fb4/5f7/77ffb45f77020bf6af96f3542964561a.png"></div><br>  Pour en savoir plus sur son fonctionnement, vous pouvez lire la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">page</a> correspondante sur le tri 2D dans la documentation Unity. <br><br>  Dans certains cas, vous devrez peut-√™tre √©galement modifier la valeur de l'axe de tri de la transparence sur Z. Nous en parlerons plus loin ci-dessous. <br><br><h2>  Types de carte de tuile </h2><br>  Le syst√®me Tilemap se compose de plusieurs composants en interaction.  Les deux premiers sont les objets de jeu Grid et Tilemap.  Pour cr√©er une grille, cliquez avec le bouton droit n'importe o√π dans la hi√©rarchie, acc√©dez √† l'objet 2D et s√©lectionnez le type de tilmap que vous souhaitez utiliser.  Par d√©faut, chaque nouvelle grille est cr√©√©e avec un objet de jeu Tilemap enfant du type correspondant.  Les types de Tilemap suivants existent actuellement: <br><br>  <i>Tilemap</i> - cr√©e une grille rectangulaire et un Tilemap.  Un exemple de l'utilisation de ce Tilemap peut √™tre vu dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">kit de jeu 2D du</a> moteur Unity. <br><br>  <i>Tilemap Hexagonal Point Top Tilemap</i> - cr√©e une grille et un tilemap √† partir d'hexagones, dans lesquels l'un des sommets de chaque hexagone est dirig√© vers le haut. <br><br>  <i>Le Tilemap Hexagonal Flat Top</i> est un autre type de grille d'hexagones, dans laquelle au sommet de l'hexagone il y a une face parall√®le au bord sup√©rieur de l'√©cran. <br><br>  Les deux derniers types, <i>Isom√©trique</i> et <i>Isom√©trique Z comme Y</i> , cr√©ent deux impl√©mentations diff√©rentes de la grille isom√©trique.  La diff√©rence entre eux appara√Æt lors de la simulation de diff√©rents niveaux de hauteurs de carreaux, par exemple, lorsqu'il existe une plate-forme haute au niveau isom√©trique. <br><br>  Si vous souhaitez cr√©er des objets de jeu Tilemap s√©par√©s pour chaque niveau de hauteur de tuile, il est pr√©f√©rable d'utiliser le type de <i>carte Tilemap isom√©trique</i> habituel.  Il simplifie le processus de cr√©ation de formes de collision automatique, mais offre moins de flexibilit√© lors du travail avec des √©l√©vations entre les tuiles, car toutes les tuiles sur la m√™me couche doivent √™tre sur le m√™me ¬´plan¬ª. <br><br>  Dans le cas de <i>Z isom√©trique en tant que mappage Y, la</i> valeur de la position Z de chaque tuile fonctionne en conjonction avec le param√®tre Tri de l'axe de transparence, ce qui donne l'impression que les tuiles sont empil√©es les unes sur les autres.  Lorsque vous dessinez sur un Z comme Y Tilemap, nous modifions dynamiquement le param√®tre de pinceau Z pour basculer entre diff√©rentes hauteurs.  Pour rendre <i>Z comme Y Tilemap correctement</i> , une valeur Z suppl√©mentaire est requise dans l'axe de tri de la transparence avec le mode personnalis√©. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9a/5cb/677/b9a5cb6779c1984cb82aa805663e73af.gif"></div><br>  <i>Remarque: les √©l√©ments illustr√©s dans les captures d'√©cran ont √©t√© extraits de la tuile Temple du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><i>Kit de d√©marrage isom√©trique</i></a> .</i>  <i>Ils sont enti√®rement gratuits, vous pouvez donc les utiliser pour cr√©er vos propres environnements!</i> <br><br>  Consid√©rez la grille comme un ¬´chevalet¬ª sur lequel r√©sident tous les objets du jeu Tilemap.  Et ceux-ci, √† leur tour, sont essentiellement une toile sur laquelle nous allons dessiner des tuiles.  Pour commencer √† dessiner sur Tilemap, nous avons √©galement besoin d'un pinceau et d'une palette.  Toutes les ressources de tuile se trouvent sur la palette de tuiles, √† partir de laquelle elles peuvent √™tre s√©lectionn√©es √† l'aide de l'outil pinceau et commencer √† dessiner. <br><br>  Pour cr√©er une palette de tuiles, choisissez Fen√™tre&gt; 2D&gt; Palette de tuiles.  Dans le menu d√©roulant sup√©rieur gauche, s√©lectionnez ¬´Cr√©er une nouvelle palette¬ª.  Assurez-vous que le type de maillage appropri√© est s√©lectionn√©.  Dans l'exemple, j'utiliserai le Tilmap isom√©trique habituel, ainsi que les ressources du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">Kit de d√©marrage isom√©trique</a> .  Nous sp√©cifierons Manuel comme taille de cellule de la palette (taille de cellule) afin de pouvoir redimensionner les tuiles isom√©triques.  Dans ce cas, je sais que les tailles de mes carreaux correspondent √† une grille avec une taille de cellule de 1 par X et 0,5 par Y;  cependant, ils d√©pendent de la r√©solution s√©lectionn√©e lors de l'importation des valeurs de pixels par unit√© et de la taille des actifs - en fait, de l'angle isom√©trique de rotation des carreaux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/797/673/805/79767380522e8028ecb0760888589d12.png"></div><br><h2>  Remarque sur l'importation d'actifs </h2><br>  Vous ne savez peut-√™tre pas quelles options d'importation et quelle taille de carte de tuile conviennent le mieux √† vos actifs.  Il y a une r√®gle g√©n√©rale que vous pouvez suivre: vous devez d'abord regarder la r√©solution des tuiles.  En r√®gle g√©n√©rale, les blocs de tuiles isom√©triques sont plus grands en hauteur qu'en largeur;  Les tuiles ¬´plates¬ª (qui ressemblent plus √† un avion qu'√† un cube) sont plus larges que hautes.  Cependant, la largeur entre eux sera toujours la m√™me.  Par cons√©quent, si vous souhaitez que les tuiles occupent exactement une unit√© de mesure Unity, d√©finissez les <i>pixels par unit√©</i> dans les param√®tres d'importation de tuiles sur une valeur √©gale √† leur largeur en pixels.  Dans certains cas, cette valeur devra √™tre modifi√©e, g√©n√©ralement dans le sens d'une diminution (ou d'une augmentation de la r√©solution des actifs);  cela peut √™tre utile si vous souhaitez recr√©er un effet dans lequel certaines tuiles semblent occuper plus d'une cellule de grille et chevaucher des tuiles adjacentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/140/aba/539140abad90bb2fe03e911eed9c8675.gif"></div><br>  Pour d√©terminer la valeur de grille correcte par Y pour les tuiles, prenez la hauteur de la base (ou sommet) d'une tuile et divisez-la par la largeur.  Cela vous donnera une valeur de Y par rapport √† X, √©tant donn√© que X est 1. Voyons quelques exemples: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/86a/5b8/234/86a5b823465588ce10010011b3ae2b85.png"></div><br>  Dans les actifs de pixel art que nous utilisons pour ce projet, toutes les tuiles de base ont une hauteur de 32 pixels et une largeur de 64 pixels.  Par cons√©quent, la taille de la grille en Y sera √©gale √† 0,5.  Le deuxi√®me bloc de l'image provient du package d'actifs Golden Skull Studios;  Vous pouvez le voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">ici</a> .  L'exemple de vignette a √©t√© r√©duit, mais les √©l√©ments d'origine ont une largeur de 128 pixels.  La base de la tuile est d'environ 66 pixels, ce qui donne une taille de grille Y de 66/128, soit environ 0,515 unit√©s. <br><br><h2>  Le processus de base de travailler avec Tilemap </h2><br>  Apr√®s avoir d√©cid√© de la bonne taille de la grille, ajoutez quelques tuiles √† notre palette.  Saisissez simplement l'un des sprites de tuiles et faites-le glisser dans la fen√™tre Palette de tuiles.  Cela cr√©era le Tile Asset.  Il contient des informations sur la tuile elle-m√™me, par exemple, les sprites qu'elle utilise, la teinte et le type du collisionneur g√©n√©r√©.  Si vous avez besoin de voir des informations d√©taill√©es sur la tuile de palette, s√©lectionnez l'outil S√©lectionner (S) en haut de la fen√™tre de la palette de tuiles et cliquez sur cette tuile.  Notez que l'inspecteur peut voir √† quel √©l√©ment Tile il fait r√©f√©rence. <br><br>  Pour dessiner une nouvelle tuile par Tilemap, s√©lectionnez l'outil Pinceau (B) et cliquez sur la tuile dans la palette.  Apr√®s cela, vous pouvez dessiner avec la tuile s√©lectionn√©e dans la fen√™tre de la sc√®ne.  Il existe d'autres outils de dessin tels que Gomme (D), Remplissage de bo√Æte (U), Remplissage d'inondation (G) et S√©lecteur de carreaux (I). <br><br>  Parfois, vous devez changer l'emplacement des tuiles sur la palette elle-m√™me.  Juste en dessous de la barre d'outils, il y a un bouton Modifier.  Si vous cliquez dessus, le mode d'√©dition de palette s'active, dans lequel les outils affectent la palette de tuiles elle-m√™me.  N'oubliez pas de quitter ce mode apr√®s avoir effectu√© les modifications n√©cessaires. <br><br><h3>  Modes de rendu Tilemap </h3><br>  Dans certains cas, les tuiles de diff√©rents types peuvent ne pas √™tre tri√©es correctement, bien qu'elles soient sur le m√™me Tilmap, comme dans cet exemple: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ea/a2e/878/6eaa2e878effb4b905e7bb3e27a1bbe1.png"></div><br>  Ceci est d√©termin√© par le param√®tre Mode du composant Tilemap Renderer.  Par d√©faut, le mode est Chunk. <br><br>  <i>Le</i> mode bloc est efficace pour r√©duire la consommation des actifs Tilemap.  Au lieu de rendre chaque tuile individuellement, il les rend en un seul passage comme un grand bloc.  Cependant, ce mode pr√©sente deux inconv√©nients principaux.  Tout d'abord, il ne prend pas en charge le tri dynamique avec d'autres objets 2D dans la sc√®ne.  Cela signifie que si le Tilemap est en mode Chunk, il ne pourra pas trier dynamiquement devant ou derri√®re d'autres objets, par exemple, des caract√®res - seul l'un ou l'autre sera visible √† la fois, et cela d√©pend du param√®tre Order in Layer.  Cependant, il est toujours extr√™mement efficace pour optimiser le jeu et peut √™tre utilis√© pour rendre par lots de grandes zones de terrain. <br><br>  Cependant, cela ne nous √©vite pas le probl√®me du tri incorrect des diff√©rentes tuiles.  Pour le rendu par lots de carreaux provenant de deux ou plusieurs sprites diff√©rents (par exemple, des textures), les sprites doivent √™tre combin√©s en un seul atout Sprite Atlas. <br><br>  Pour cr√©er Sprite Atlas, s√©lectionnez <i>Actifs&gt; Cr√©er&gt; Sprite Atlas</i> .  Sprite Atlas a une liste d' <i>objets √† emballer</i> .  Faites simplement glisser et d√©posez toutes les tuiles qui doivent √™tre rendues par lots et sp√©cifiez les param√®tres d'importation appropri√©s, correspondant g√©n√©ralement aux param√®tres des sprites individuels. <br><br>  Apr√®s cela, les tuiles seront tri√©es correctement;  mais ils ne seront visibles qu'en mode Play ou pendant l'ex√©cution du jeu. <br><br>  Par cons√©quent, pendant le processus d'√©dition, il est pr√©f√©rable de s√©lectionner le mode <i>individuel</i> pour Tilemap Renderer.  Dans ce mode, chaque sprite sera tri√© s√©par√©ment;  cela signifie qu'ils s'afficheront correctement m√™me en dehors du mode de lecture, ce qui est tr√®s utile lors de l'√©dition d'un niveau.  Une fois la cr√©ation de la structure de niveaux termin√©e, vous pouvez √† tout moment basculer de nouveau le mode Tilemap Renderer sur Chunk. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/689/b8f/0e9/689b8f0e92a40d0f0093bb5f762999fa.png"></div><br>  Le mode de rendu individuel est √©galement utile lorsque vous devez ajouter des objets tels que des arbres, des objets et des parcelles de terrain plus √©lev√©es qui doivent √™tre tri√©s dynamiquement avec des caract√®res ou entre eux.  Dans cet article, nous activerons le mode individuel pour tous les Tilemap. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/268/978/3ef/2689783eff96afb9bc21905444f7f060.png"></div><br><h2>  Utilisation de Tilemap multiple </h2><br>  Parfois, il est n√©cessaire d'utiliser plusieurs Tilemap sur une m√™me grille.  Dans le cas de Tilemap isom√©trique et hexagonal, il est utile de pouvoir ajouter au niveau de l'√©l√©ment align√© sur la grille ou des tuiles qui semblent plus √©lev√©es que la premi√®re couche. <br><br>  Pour connecter un autre Tilemap √† la grille, cliquez avec le bouton droit sur l'objet de jeu Grille et cr√©ez un nouveau Tilemap du type appropri√©. <br><br>  Pour commencer √† dessiner sur le nouveau Tilemap, revenez √† la fen√™tre Palette de tuiles et modifiez le Tilemap actif sous la barre d'outils principale. <br><br><h2>  Ajout de zones sur√©lev√©es </h2><br>  Il existe deux fa√ßons principales d'ajouter des zones sur√©lev√©es aux niveaux.  Le choix du bon d√©pend g√©n√©ralement du type de Tilmap que vous s√©lectionnez.  Nous examinerons chacun des cas. <br><br>  De plus, nous avons pr√©par√© une courte vid√©o sur ce sujet, qui montre ces approches en utilisant l'isom√©trique Tilmap habituel ainsi qu'en ajoutant des zones de collision aux tuiles.  Regardez la vid√©o si vous voulez comprendre bri√®vement ces deux fa√ßons: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2DsKCJsEzSA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Utilisation d'un Tilemap isom√©trique r√©gulier </h3><br>  Pour un Tilmap isom√©trique normal, vous pouvez simplement cr√©er un nouveau Tilemap avec la m√™me grille et attribuer une valeur plus √©lev√©e √† Order in Layer.  Vous pouvez ensuite modifier le param√®tre Tile Anchor afin que le nouveau calque soit ancr√© √† un point sup√©rieur de la m√™me grille. <br><br>  Mon Tilemap de niveau inf√©rieur pour X et Y a Ancrage de tuile r√©gl√© sur (0, 0).  Je veux que la nouvelle couche soit dessin√©e une unit√© plus haut, donc je changerai le point d'ancrage du nouveau Tilemap en (1, 1).  Je vais √©galement d√©finir l'ordre dans la couche sur 1 - un de plus que le niveau de base. <br><br>  Vous pouvez maintenant changer le Tilemap actif √† un deuxi√®me niveau de hauteur et commencer √† dessiner. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c38/091/eb0/c38091eb0600f78c47de390d339ae8c3.gif"></div><br><br><h3>  Utilisation de Z comme tilmap isom√©trique Y </h3><br>  Il peut parfois √™tre utile de simuler diff√©rentes hauteurs avec un seul Tilemap.  Dans ce cas, vous pouvez utiliser Z as Y Tilometric Tilemap and Grid. <br><br>  Dans le cas de Z comme Y Tilemap, la valeur Z de chaque tuile a un effet suppl√©mentaire sur l'ordre dans lequel les tuiles sont rendues.  Nous pouvons changer la valeur des tuiles Z lors de leur dessin en utilisant le param√®tre Position Z du pinceau en bas de la palette de tuiles (ainsi qu'en utilisant les touches de raccourci "+" et "-"): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a28/1ab/3f8/a281ab3f8dd22f84b274ddbb3bf40a81.png"></div><br>  Cependant, pour que la valeur Z influence correctement et que les tuiles soient tri√©es correctement, vous devez revenir √† la valeur Tri personnalis√© de l'axe et ajouter l'influence Z. Le nombre utilis√© ici est directement li√© √† la fa√ßon dont Unity convertit les positions des cellules de la grille isom√©trique en valeurs dans l'espace universel. <br><br>  Par exemple, une grille avec des dimensions selon XYZ de (1, 0,5, 1) - standard pour l'isom√©trie - aura une valeur de tri le long de l'axe Z √©gale √† -0,26.  Si vous √™tes int√©ress√© par la fa√ßon dont ce nombre est calcul√©, ou si vous utilisez une grille avec une taille de cellule diff√©rente, continuez √† lire pour savoir comment trouver la valeur Z correcte pour votre cas. <br><br>  En d√©finissant la valeur correcte pour le tri d'axe personnalis√©, vous pouvez commencer √† dessiner des tuiles avec diff√©rentes valeurs Z. Vous pouvez √©galement configurer les incr√©ments avec lesquels la valeur Z d√©place les tuiles sur√©lev√©es vers le haut ou vers le bas, en modifiant la taille Z de la grille, qui est 1 par d√©faut. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4cf/1ce/9c2/4cf1ce9c2e97c429620b3e096349a9b0.gif"></div><br><h3>  Calcul de la valeur Z </h3><br>  Il existe une formule g√©n√©rale qui peut √™tre utilis√©e pour d√©terminer la valeur Z du tri des axes.  Tout d'abord, prenez la taille Y de la grille.  Si vous n'avez pas encore d√©cid√© de la taille de Y, consultez la note sur l'importation d'actifs ci-dessus.  Multipliez cette valeur par -0,5 et soustrayez 0,01. <br><br>  Selon cette formule, une grille de taille (1, 0,5, 1) nous donnera une valeur de tri par Z de -0,26.  Avec cette valeur de tri, les tuiles de n'importe quelle grille (1, 0,5, 1) seront tri√©es correctement. <br><br>  Si vous souhaitez en savoir plus sur cette valeur et sur les calculs, √©tudiez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">documentation</a> .  Il explique en d√©tail le travail des rendus 2D et ce qui se passe lorsque les cellules isom√©triques sont converties en valeurs spatiales universelles. <br><br><h2>  Ajout de collisions </h2><br>  Maintenant que nous avons plac√© certaines tuiles sur les autres, √† l'aide de collisions, nous pouvons contr√¥ler les zones que le joueur peut atteindre et les transitions entre elles. <br><br>  Il existe de nombreuses fa√ßons d'ajouter des collisions, mais dans notre cas, il est n√©cessaire que le joueur monte et descende le long de la pente, il n'est donc pas si √©vident quels objets devraient avoir des collisionneurs.  Nous pouvons d√©finir les conflits manuellement √† l'aide du Tilemap facultatif. <br><br>  Dans ce projet, nous avons cr√©√© plusieurs sprites correspondant √† diff√©rentes formes qui d√©finiront les zones de collisions.  Nous pouvons dessiner ces formes sur le troisi√®me Tilemap dans des endroits o√π le joueur ne peut pas passer.  Par exemple, nous voulons qu'un joueur ne puisse grimper sur un rocher que le long d'une pente, et non pas grimper directement dessus. <br><br>  Nous pouvons √©galement ajouter un mat√©riau unique √† Tilemap Renderer pour donner aux carreaux une nuance diff√©rente et les distinguer du reste du niveau. <br><br>  En pla√ßant des tuiles de collision, vous pouvez ajouter le composant Tilemap Collider aux collisions de Tilemap.  Dans ce cas, pour chaque tuile individuelle, des collisionneurs sont automatiquement cr√©√©s, d√©termin√©s par la forme du sprite. <br><br>  Pour optimiser les performances, vous pouvez √©galement ajouter le composant Composite Collider 2D et cocher la case Utilis√© par composite pour Tilemap Collider.  Cela combinera tous les collisionneurs individuels en une seule grande forme. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0a/37d/0d7/a0a37d0d790cdd5bcea7687004cf5d18.gif"></div><br><h2>  Ajout d'√©l√©ments </h2><br>  Ajouter des √©l√©ments √† un niveau est assez simple.  Vous pouvez soit placer manuellement des images-objets √† n'importe quel point de la sc√®ne, soit attacher des √©l√©ments √† la grille Tilemap, en les transformant en tuiles distinctes.  Choisissez la solution qui vous convient le mieux. <br><br>  Dans ce projet, nous avons plac√© manuellement plusieurs arbres au niveau.  Les arbres et le personnage ont le m√™me ordre dans la couche, ce qui vous permet de trier dynamiquement le personnage devant et derri√®re les arbres. <br><br>  √Ä l'aide du collisionneur, vous pouvez sp√©cifier le point auquel le joueur peut s'approcher de l'arbre.  Cela peut √©galement se faire de plusieurs mani√®res. <br><br>  Le premier est montr√© dans la vid√©o - il suffit d'attacher un collisionneur enfant √† l'objet et de changer sa forme selon les besoins. <br><br>  La deuxi√®me fa√ßon consiste √† d√©finir la <i>forme physique personnalis√©e</i> de l'objet dans l'√©diteur de sprites.  Pour ouvrir l'√©diteur de sprites, s√©lectionnez l'objet sprite et recherchez le bouton Editeur de sprites dans l'inspecteur.  Dans le menu d√©roulant sup√©rieur gauche, basculez vers l'√©diteur de forme physique personnalis√©.  Ici, vous pouvez cr√©er des formes polygonales qui d√©finissent les bordures du collisionneur.  Apr√®s avoir d√©fini la forme physique, vous pouvez attacher le composant Polygon Collider √† l'objet, et il correspondra √† cette forme. <br><br>  Si vous utilisez des objets comme tuiles dans Tilemap, vous pouvez √©galement utiliser le collisionneur Grille.  Choisissez l'√©l√©ment de mosa√Øque qui correspond √† l'√©l√©ment de l'√©l√©ment (si vous ne vous souvenez pas o√π le trouver, consultez la section ¬´Processus de base de Tilmap¬ª).  Vous verrez le menu Type de collisionneur.  Par d√©faut, une image-objet est d√©finie comme type, c'est-√†-dire que le collisionneur g√©n√©r√© automatiquement utilisera la forme physique, dont nous avons parl√© ci-dessus.  Si le type est d√©fini sur grille.  alors il correspondra toujours exactement √† la forme de la cellule de maillage √† laquelle l'√©l√©ment est attach√©.  Ce n'est peut-√™tre pas le moyen le plus pr√©cis d'impl√©menter des collisionneurs, mais pour certains types de jeux, cela peut √™tre utile. <br><br>  Pour utiliser des collisionneurs pour ces tuiles, s√©lectionnez le Tilemap avec des objets et ajoutez le composant Tilemap Collider. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e3/98e/cc5/3e398ecc5b71b09f5179ce93956f1b9a.gif"></div><br><h2>  Utilisation des vignettes de r√®gles </h2><br>  Les tuiles de r√®gle sont extr√™mement utiles pour automatiser le processus de dessin avec des tuiles.  La tuile de r√®gle fonctionne comme une tuile ordinaire, mais dispose d'une liste suppl√©mentaire d'options de tuile.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En utilisant ces param√®tres (r√®gles), une tuile peut choisir automatiquement l'image-objet √† dessiner en fonction des tuiles voisines. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tuiles de r√®gle sont utiles lorsque vous ne souhaitez pas s√©lectionner manuellement des tuiles avec des tours diff√©rents, par exemple, lors de la cr√©ation d'un rocher ou d'une plate-forme. Ils peuvent √©galement √™tre utilis√©s pour randomiser entre diff√©rentes variations d'une m√™me tuile, pour √©viter de r√©p√©ter des motifs, et m√™me pour cr√©er des tuiles anim√©es. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tuiles de r√®gles isom√©triques et hexagonales sont disponibles √† partir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du r√©f√©rentiel 2D Extras</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unity sur GitHub. Il poss√®de √©galement de nombreux autres actifs Tilemap utiles qui m√©ritent d'√™tre explor√©s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons ajout√© le </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">kit de d√©marrage isom√©trique</font></a><font style="vertical-align: inherit;"> au projet.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuiles de r√®gle pour chaque jeu de tuiles. </font><font style="vertical-align: inherit;">Voici quelques exemples de tuiles de projet que vous pouvez exp√©rimenter:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/186/ac1/31d/186ac131d5b332dd0e7091a71569ff48.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24a/eaf/d22/24aeafd227b8c539c6a4b077406d94b3.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/966/48d/15d/96648d15de848c73803c614a1173cbd6.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a9/f3b/d11/4a9f3bd113e3763a58d63924542ba360.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/80f/087/1a6/80f0871a6b4c0df7b40ecac46bba4ba1.png"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Travaux ult√©rieurs </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant que vous avez d√©couvert le p√©riph√©rique des cartes de tuiles isom√©triques dans Unity, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√©l√©chargez le projet de kit de d√©marrage isom√©trique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et essayez de travailler avec vous-m√™me! </font><font style="vertical-align: inherit;">Si vous √™tes programmeur, vous avez la possibilit√© d'interagir avec Tilemap via des scripts, vous pouvez l'utiliser. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, en regardant cette vid√©o, vous pouvez apprendre √† impl√©menter un contr√¥leur de caract√®res simple compatible avec Isometric Tilemap:</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tywt9tOubEY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les graphiques de ce projet ont √©t√© cr√©√©s pour Unity par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@castpixel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">ses autres ≈ìuvres peuvent √™tre vues </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si vous souhaitez en savoir plus sur la cr√©ation de jeux 2D sur Unity, vous devriez apprendre quelques excellents cours </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le site Web Learn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si vous recherchez des ressources suppl√©mentaires pour exp√©rimenter avec des cartes de tuiles, consultez le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magasin d'actifs Unity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La premi√®re fois que vous cr√©ez des niveaux avec Tilemap? </font><font style="vertical-align: inherit;">Apprenez √† cr√©er des mondes bidimensionnels dans ce </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didacticiel pour d√©butant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unity Learn.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr469497/">https://habr.com/ru/post/fr469497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr469479/index.html">D'o√π vient la probabilit√© quantique</a></li>
<li><a href="../fr469487/index.html">Configurer top dans GNU / Linux</a></li>
<li><a href="../fr469491/index.html">Interaction avec le serveur Asterisk √† partir d'une application Java</a></li>
<li><a href="../fr469493/index.html">Rendez C ++ g√©nial √† nouveau! .. dans Tula</a></li>
<li><a href="../fr469495/index.html">Nouvelles approches pour construire ACS en utilisant les technologies WEB</a></li>
<li><a href="../fr469499/index.html">Comment nous avons conquis Parallels avec Apple</a></li>
<li><a href="../fr469503/index.html">Cybers√©curit√©: nous prot√©geons les donn√©es des abonn√©s contre les fuites en 2019</a></li>
<li><a href="../fr469505/index.html">3 fa√ßons pratiques d'amener les entreprises sur les march√©s √©trangers: approches et techniques de vraies entreprises</a></li>
<li><a href="../fr469507/index.html">Troisi√®me vuln√©rabilit√© du client Steam Windows, mais pas 0day</a></li>
<li><a href="../fr469509/index.html">Sch√©mas angulaires, ou comment j'ai √©crit mon mod√®le pour cli angulaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>