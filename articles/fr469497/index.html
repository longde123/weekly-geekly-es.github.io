<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏾 🏪 💊 Créez des niveaux 2D isométriques avec le système Tilemap ◼️ ♊️ 🤾🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity 2018.3 a introduit la prise en charge des cartes de tuiles isométriques, très similaires aux cartes de tuiles hexagonales, qui a été ajoutée dan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Créez des niveaux 2D isométriques avec le système Tilemap</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469497/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abe/6f3/004/abe6f3004d910b9ff91386b4bde99205.png" alt="image"></div><br>  Unity 2018.3 a introduit la prise en charge des cartes de tuiles isométriques, très similaires aux cartes de tuiles hexagonales, qui a été ajoutée dans la version 2018.2.  Les nouvelles fonctionnalités de Tilemap vous permettent de créer rapidement et efficacement des environnements 2D basés sur les grilles isométriques et hexagonales qui ont été utilisées dans de nombreux jeux classiques, y compris les premières parties de Diablo et Fallout, Civilization, Age of Empires et bien d'autres. <br><br>  Les deux systèmes sont basés sur le système Tilemap déjà existant, qui est apparu dans Unity 2017.2, et aujourd'hui, il est tout aussi facile de travailler avec eux!  De plus, ils ont une intégration native avec Editor.  Dans les futures versions d'Unity, ils peuvent être portés vers le gestionnaire de packages. <br><br>  Si vous êtes intéressé à expérimenter ces systèmes, nous avons créé un projet de kit de démarrage isométrique pré-préparé avec un personnage animé et plusieurs ensembles de tuiles d'environnement.  Vous pouvez le télécharger <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">ici</a> . <a name="habracut"></a><br><br><h2>  Paramètres du projet pour le plan de carte isométrique </h2><br>  Avant de commencer avec Tilemap, il est important de configurer correctement le projet.  Le plan isométrique Tilmap fonctionne avec les sprites bidimensionnels et utilise le bon tri du rendu pour créer l'illusion d'une carte isométrique avec une vue de dessus.  Nous devons d'abord éloigner les carreaux du spectateur et les rapprocher d'eux. <br><br>  Vous pouvez utiliser la fonction Unity appelée Tri personnalisé des axes pour ajuster l'ordre de rendu des objets 2D à l'écran.  Ce paramètre peut être défini pour la caméra (actuellement, cette méthode est standard pour les pipelines de rendu scriptables, y compris LWRP et HDRP), ou globalement, au niveau du projet. <br><br>  Pour définir un tri d'axe personnalisé au niveau du projet, accédez à <i>Edition&gt; Paramètres du projet&gt; Graphiques</i> .  Dans la section Paramètres de la caméra, vous verrez le menu déroulant Mode de tri par transparence, ainsi que les options de valeur X, YZ pour l'axe de tri par transparence. <br><br>  Par défaut, Transparency Sort Axis définit les axes XYZ sur (0, 0, 1).  Cependant, toutes nos tuiles 2D sont en fait sur le même plan Z. Par conséquent, pour déterminer quelles tuiles sont devant ou derrière, vous devez utiliser non pas la profondeur, mais la hauteur.  Les tuiles situées plus haut sur l'écran seront triées par les plus basses.  Pour trier les tuiles par hauteur, modifiez la valeur du mode de tri par transparence sur Personnalisé et définissez Axe de tri par transparence sur (0, 1, 0). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77f/fb4/5f7/77ffb45f77020bf6af96f3542964561a.png"></div><br>  Pour en savoir plus sur son fonctionnement, vous pouvez lire la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">page</a> correspondante sur le tri 2D dans la documentation Unity. <br><br>  Dans certains cas, vous devrez peut-être également modifier la valeur de l'axe de tri de la transparence sur Z. Nous en parlerons plus loin ci-dessous. <br><br><h2>  Types de carte de tuile </h2><br>  Le système Tilemap se compose de plusieurs composants en interaction.  Les deux premiers sont les objets de jeu Grid et Tilemap.  Pour créer une grille, cliquez avec le bouton droit n'importe où dans la hiérarchie, accédez à l'objet 2D et sélectionnez le type de tilmap que vous souhaitez utiliser.  Par défaut, chaque nouvelle grille est créée avec un objet de jeu Tilemap enfant du type correspondant.  Les types de Tilemap suivants existent actuellement: <br><br>  <i>Tilemap</i> - crée une grille rectangulaire et un Tilemap.  Un exemple de l'utilisation de ce Tilemap peut être vu dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">kit de jeu 2D du</a> moteur Unity. <br><br>  <i>Tilemap Hexagonal Point Top Tilemap</i> - crée une grille et un tilemap à partir d'hexagones, dans lesquels l'un des sommets de chaque hexagone est dirigé vers le haut. <br><br>  <i>Le Tilemap Hexagonal Flat Top</i> est un autre type de grille d'hexagones, dans laquelle au sommet de l'hexagone il y a une face parallèle au bord supérieur de l'écran. <br><br>  Les deux derniers types, <i>Isométrique</i> et <i>Isométrique Z comme Y</i> , créent deux implémentations différentes de la grille isométrique.  La différence entre eux apparaît lors de la simulation de différents niveaux de hauteurs de carreaux, par exemple, lorsqu'il existe une plate-forme haute au niveau isométrique. <br><br>  Si vous souhaitez créer des objets de jeu Tilemap séparés pour chaque niveau de hauteur de tuile, il est préférable d'utiliser le type de <i>carte Tilemap isométrique</i> habituel.  Il simplifie le processus de création de formes de collision automatique, mais offre moins de flexibilité lors du travail avec des élévations entre les tuiles, car toutes les tuiles sur la même couche doivent être sur le même «plan». <br><br>  Dans le cas de <i>Z isométrique en tant que mappage Y, la</i> valeur de la position Z de chaque tuile fonctionne en conjonction avec le paramètre Tri de l'axe de transparence, ce qui donne l'impression que les tuiles sont empilées les unes sur les autres.  Lorsque vous dessinez sur un Z comme Y Tilemap, nous modifions dynamiquement le paramètre de pinceau Z pour basculer entre différentes hauteurs.  Pour rendre <i>Z comme Y Tilemap correctement</i> , une valeur Z supplémentaire est requise dans l'axe de tri de la transparence avec le mode personnalisé. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9a/5cb/677/b9a5cb6779c1984cb82aa805663e73af.gif"></div><br>  <i>Remarque: les éléments illustrés dans les captures d'écran ont été extraits de la tuile Temple du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><i>Kit de démarrage isométrique</i></a> .</i>  <i>Ils sont entièrement gratuits, vous pouvez donc les utiliser pour créer vos propres environnements!</i> <br><br>  Considérez la grille comme un «chevalet» sur lequel résident tous les objets du jeu Tilemap.  Et ceux-ci, à leur tour, sont essentiellement une toile sur laquelle nous allons dessiner des tuiles.  Pour commencer à dessiner sur Tilemap, nous avons également besoin d'un pinceau et d'une palette.  Toutes les ressources de tuile se trouvent sur la palette de tuiles, à partir de laquelle elles peuvent être sélectionnées à l'aide de l'outil pinceau et commencer à dessiner. <br><br>  Pour créer une palette de tuiles, choisissez Fenêtre&gt; 2D&gt; Palette de tuiles.  Dans le menu déroulant supérieur gauche, sélectionnez «Créer une nouvelle palette».  Assurez-vous que le type de maillage approprié est sélectionné.  Dans l'exemple, j'utiliserai le Tilmap isométrique habituel, ainsi que les ressources du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">Kit de démarrage isométrique</a> .  Nous spécifierons Manuel comme taille de cellule de la palette (taille de cellule) afin de pouvoir redimensionner les tuiles isométriques.  Dans ce cas, je sais que les tailles de mes carreaux correspondent à une grille avec une taille de cellule de 1 par X et 0,5 par Y;  cependant, ils dépendent de la résolution sélectionnée lors de l'importation des valeurs de pixels par unité et de la taille des actifs - en fait, de l'angle isométrique de rotation des carreaux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/797/673/805/79767380522e8028ecb0760888589d12.png"></div><br><h2>  Remarque sur l'importation d'actifs </h2><br>  Vous ne savez peut-être pas quelles options d'importation et quelle taille de carte de tuile conviennent le mieux à vos actifs.  Il y a une règle générale que vous pouvez suivre: vous devez d'abord regarder la résolution des tuiles.  En règle générale, les blocs de tuiles isométriques sont plus grands en hauteur qu'en largeur;  Les tuiles «plates» (qui ressemblent plus à un avion qu'à un cube) sont plus larges que hautes.  Cependant, la largeur entre eux sera toujours la même.  Par conséquent, si vous souhaitez que les tuiles occupent exactement une unité de mesure Unity, définissez les <i>pixels par unité</i> dans les paramètres d'importation de tuiles sur une valeur égale à leur largeur en pixels.  Dans certains cas, cette valeur devra être modifiée, généralement dans le sens d'une diminution (ou d'une augmentation de la résolution des actifs);  cela peut être utile si vous souhaitez recréer un effet dans lequel certaines tuiles semblent occuper plus d'une cellule de grille et chevaucher des tuiles adjacentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/140/aba/539140abad90bb2fe03e911eed9c8675.gif"></div><br>  Pour déterminer la valeur de grille correcte par Y pour les tuiles, prenez la hauteur de la base (ou sommet) d'une tuile et divisez-la par la largeur.  Cela vous donnera une valeur de Y par rapport à X, étant donné que X est 1. Voyons quelques exemples: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/86a/5b8/234/86a5b823465588ce10010011b3ae2b85.png"></div><br>  Dans les actifs de pixel art que nous utilisons pour ce projet, toutes les tuiles de base ont une hauteur de 32 pixels et une largeur de 64 pixels.  Par conséquent, la taille de la grille en Y sera égale à 0,5.  Le deuxième bloc de l'image provient du package d'actifs Golden Skull Studios;  Vous pouvez le voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">ici</a> .  L'exemple de vignette a été réduit, mais les éléments d'origine ont une largeur de 128 pixels.  La base de la tuile est d'environ 66 pixels, ce qui donne une taille de grille Y de 66/128, soit environ 0,515 unités. <br><br><h2>  Le processus de base de travailler avec Tilemap </h2><br>  Après avoir décidé de la bonne taille de la grille, ajoutez quelques tuiles à notre palette.  Saisissez simplement l'un des sprites de tuiles et faites-le glisser dans la fenêtre Palette de tuiles.  Cela créera le Tile Asset.  Il contient des informations sur la tuile elle-même, par exemple, les sprites qu'elle utilise, la teinte et le type du collisionneur généré.  Si vous avez besoin de voir des informations détaillées sur la tuile de palette, sélectionnez l'outil Sélectionner (S) en haut de la fenêtre de la palette de tuiles et cliquez sur cette tuile.  Notez que l'inspecteur peut voir à quel élément Tile il fait référence. <br><br>  Pour dessiner une nouvelle tuile par Tilemap, sélectionnez l'outil Pinceau (B) et cliquez sur la tuile dans la palette.  Après cela, vous pouvez dessiner avec la tuile sélectionnée dans la fenêtre de la scène.  Il existe d'autres outils de dessin tels que Gomme (D), Remplissage de boîte (U), Remplissage d'inondation (G) et Sélecteur de carreaux (I). <br><br>  Parfois, vous devez changer l'emplacement des tuiles sur la palette elle-même.  Juste en dessous de la barre d'outils, il y a un bouton Modifier.  Si vous cliquez dessus, le mode d'édition de palette s'active, dans lequel les outils affectent la palette de tuiles elle-même.  N'oubliez pas de quitter ce mode après avoir effectué les modifications nécessaires. <br><br><h3>  Modes de rendu Tilemap </h3><br>  Dans certains cas, les tuiles de différents types peuvent ne pas être triées correctement, bien qu'elles soient sur le même Tilmap, comme dans cet exemple: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ea/a2e/878/6eaa2e878effb4b905e7bb3e27a1bbe1.png"></div><br>  Ceci est déterminé par le paramètre Mode du composant Tilemap Renderer.  Par défaut, le mode est Chunk. <br><br>  <i>Le</i> mode bloc est efficace pour réduire la consommation des actifs Tilemap.  Au lieu de rendre chaque tuile individuellement, il les rend en un seul passage comme un grand bloc.  Cependant, ce mode présente deux inconvénients principaux.  Tout d'abord, il ne prend pas en charge le tri dynamique avec d'autres objets 2D dans la scène.  Cela signifie que si le Tilemap est en mode Chunk, il ne pourra pas trier dynamiquement devant ou derrière d'autres objets, par exemple, des caractères - seul l'un ou l'autre sera visible à la fois, et cela dépend du paramètre Order in Layer.  Cependant, il est toujours extrêmement efficace pour optimiser le jeu et peut être utilisé pour rendre par lots de grandes zones de terrain. <br><br>  Cependant, cela ne nous évite pas le problème du tri incorrect des différentes tuiles.  Pour le rendu par lots de carreaux provenant de deux ou plusieurs sprites différents (par exemple, des textures), les sprites doivent être combinés en un seul atout Sprite Atlas. <br><br>  Pour créer Sprite Atlas, sélectionnez <i>Actifs&gt; Créer&gt; Sprite Atlas</i> .  Sprite Atlas a une liste d' <i>objets à emballer</i> .  Faites simplement glisser et déposez toutes les tuiles qui doivent être rendues par lots et spécifiez les paramètres d'importation appropriés, correspondant généralement aux paramètres des sprites individuels. <br><br>  Après cela, les tuiles seront triées correctement;  mais ils ne seront visibles qu'en mode Play ou pendant l'exécution du jeu. <br><br>  Par conséquent, pendant le processus d'édition, il est préférable de sélectionner le mode <i>individuel</i> pour Tilemap Renderer.  Dans ce mode, chaque sprite sera trié séparément;  cela signifie qu'ils s'afficheront correctement même en dehors du mode de lecture, ce qui est très utile lors de l'édition d'un niveau.  Une fois la création de la structure de niveaux terminée, vous pouvez à tout moment basculer de nouveau le mode Tilemap Renderer sur Chunk. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/689/b8f/0e9/689b8f0e92a40d0f0093bb5f762999fa.png"></div><br>  Le mode de rendu individuel est également utile lorsque vous devez ajouter des objets tels que des arbres, des objets et des parcelles de terrain plus élevées qui doivent être triés dynamiquement avec des caractères ou entre eux.  Dans cet article, nous activerons le mode individuel pour tous les Tilemap. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/268/978/3ef/2689783eff96afb9bc21905444f7f060.png"></div><br><h2>  Utilisation de Tilemap multiple </h2><br>  Parfois, il est nécessaire d'utiliser plusieurs Tilemap sur une même grille.  Dans le cas de Tilemap isométrique et hexagonal, il est utile de pouvoir ajouter au niveau de l'élément aligné sur la grille ou des tuiles qui semblent plus élevées que la première couche. <br><br>  Pour connecter un autre Tilemap à la grille, cliquez avec le bouton droit sur l'objet de jeu Grille et créez un nouveau Tilemap du type approprié. <br><br>  Pour commencer à dessiner sur le nouveau Tilemap, revenez à la fenêtre Palette de tuiles et modifiez le Tilemap actif sous la barre d'outils principale. <br><br><h2>  Ajout de zones surélevées </h2><br>  Il existe deux façons principales d'ajouter des zones surélevées aux niveaux.  Le choix du bon dépend généralement du type de Tilmap que vous sélectionnez.  Nous examinerons chacun des cas. <br><br>  De plus, nous avons préparé une courte vidéo sur ce sujet, qui montre ces approches en utilisant l'isométrique Tilmap habituel ainsi qu'en ajoutant des zones de collision aux tuiles.  Regardez la vidéo si vous voulez comprendre brièvement ces deux façons: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2DsKCJsEzSA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Utilisation d'un Tilemap isométrique régulier </h3><br>  Pour un Tilmap isométrique normal, vous pouvez simplement créer un nouveau Tilemap avec la même grille et attribuer une valeur plus élevée à Order in Layer.  Vous pouvez ensuite modifier le paramètre Tile Anchor afin que le nouveau calque soit ancré à un point supérieur de la même grille. <br><br>  Mon Tilemap de niveau inférieur pour X et Y a Ancrage de tuile réglé sur (0, 0).  Je veux que la nouvelle couche soit dessinée une unité plus haut, donc je changerai le point d'ancrage du nouveau Tilemap en (1, 1).  Je vais également définir l'ordre dans la couche sur 1 - un de plus que le niveau de base. <br><br>  Vous pouvez maintenant changer le Tilemap actif à un deuxième niveau de hauteur et commencer à dessiner. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c38/091/eb0/c38091eb0600f78c47de390d339ae8c3.gif"></div><br><br><h3>  Utilisation de Z comme tilmap isométrique Y </h3><br>  Il peut parfois être utile de simuler différentes hauteurs avec un seul Tilemap.  Dans ce cas, vous pouvez utiliser Z as Y Tilometric Tilemap and Grid. <br><br>  Dans le cas de Z comme Y Tilemap, la valeur Z de chaque tuile a un effet supplémentaire sur l'ordre dans lequel les tuiles sont rendues.  Nous pouvons changer la valeur des tuiles Z lors de leur dessin en utilisant le paramètre Position Z du pinceau en bas de la palette de tuiles (ainsi qu'en utilisant les touches de raccourci "+" et "-"): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a28/1ab/3f8/a281ab3f8dd22f84b274ddbb3bf40a81.png"></div><br>  Cependant, pour que la valeur Z influence correctement et que les tuiles soient triées correctement, vous devez revenir à la valeur Tri personnalisé de l'axe et ajouter l'influence Z. Le nombre utilisé ici est directement lié à la façon dont Unity convertit les positions des cellules de la grille isométrique en valeurs dans l'espace universel. <br><br>  Par exemple, une grille avec des dimensions selon XYZ de (1, 0,5, 1) - standard pour l'isométrie - aura une valeur de tri le long de l'axe Z égale à -0,26.  Si vous êtes intéressé par la façon dont ce nombre est calculé, ou si vous utilisez une grille avec une taille de cellule différente, continuez à lire pour savoir comment trouver la valeur Z correcte pour votre cas. <br><br>  En définissant la valeur correcte pour le tri d'axe personnalisé, vous pouvez commencer à dessiner des tuiles avec différentes valeurs Z. Vous pouvez également configurer les incréments avec lesquels la valeur Z déplace les tuiles surélevées vers le haut ou vers le bas, en modifiant la taille Z de la grille, qui est 1 par défaut. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4cf/1ce/9c2/4cf1ce9c2e97c429620b3e096349a9b0.gif"></div><br><h3>  Calcul de la valeur Z </h3><br>  Il existe une formule générale qui peut être utilisée pour déterminer la valeur Z du tri des axes.  Tout d'abord, prenez la taille Y de la grille.  Si vous n'avez pas encore décidé de la taille de Y, consultez la note sur l'importation d'actifs ci-dessus.  Multipliez cette valeur par -0,5 et soustrayez 0,01. <br><br>  Selon cette formule, une grille de taille (1, 0,5, 1) nous donnera une valeur de tri par Z de -0,26.  Avec cette valeur de tri, les tuiles de n'importe quelle grille (1, 0,5, 1) seront triées correctement. <br><br>  Si vous souhaitez en savoir plus sur cette valeur et sur les calculs, étudiez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer">documentation</a> .  Il explique en détail le travail des rendus 2D et ce qui se passe lorsque les cellules isométriques sont converties en valeurs spatiales universelles. <br><br><h2>  Ajout de collisions </h2><br>  Maintenant que nous avons placé certaines tuiles sur les autres, à l'aide de collisions, nous pouvons contrôler les zones que le joueur peut atteindre et les transitions entre elles. <br><br>  Il existe de nombreuses façons d'ajouter des collisions, mais dans notre cas, il est nécessaire que le joueur monte et descende le long de la pente, il n'est donc pas si évident quels objets devraient avoir des collisionneurs.  Nous pouvons définir les conflits manuellement à l'aide du Tilemap facultatif. <br><br>  Dans ce projet, nous avons créé plusieurs sprites correspondant à différentes formes qui définiront les zones de collisions.  Nous pouvons dessiner ces formes sur le troisième Tilemap dans des endroits où le joueur ne peut pas passer.  Par exemple, nous voulons qu'un joueur ne puisse grimper sur un rocher que le long d'une pente, et non pas grimper directement dessus. <br><br>  Nous pouvons également ajouter un matériau unique à Tilemap Renderer pour donner aux carreaux une nuance différente et les distinguer du reste du niveau. <br><br>  En plaçant des tuiles de collision, vous pouvez ajouter le composant Tilemap Collider aux collisions de Tilemap.  Dans ce cas, pour chaque tuile individuelle, des collisionneurs sont automatiquement créés, déterminés par la forme du sprite. <br><br>  Pour optimiser les performances, vous pouvez également ajouter le composant Composite Collider 2D et cocher la case Utilisé par composite pour Tilemap Collider.  Cela combinera tous les collisionneurs individuels en une seule grande forme. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0a/37d/0d7/a0a37d0d790cdd5bcea7687004cf5d18.gif"></div><br><h2>  Ajout d'éléments </h2><br>  Ajouter des éléments à un niveau est assez simple.  Vous pouvez soit placer manuellement des images-objets à n'importe quel point de la scène, soit attacher des éléments à la grille Tilemap, en les transformant en tuiles distinctes.  Choisissez la solution qui vous convient le mieux. <br><br>  Dans ce projet, nous avons placé manuellement plusieurs arbres au niveau.  Les arbres et le personnage ont le même ordre dans la couche, ce qui vous permet de trier dynamiquement le personnage devant et derrière les arbres. <br><br>  À l'aide du collisionneur, vous pouvez spécifier le point auquel le joueur peut s'approcher de l'arbre.  Cela peut également se faire de plusieurs manières. <br><br>  Le premier est montré dans la vidéo - il suffit d'attacher un collisionneur enfant à l'objet et de changer sa forme selon les besoins. <br><br>  La deuxième façon consiste à définir la <i>forme physique personnalisée</i> de l'objet dans l'éditeur de sprites.  Pour ouvrir l'éditeur de sprites, sélectionnez l'objet sprite et recherchez le bouton Editeur de sprites dans l'inspecteur.  Dans le menu déroulant supérieur gauche, basculez vers l'éditeur de forme physique personnalisé.  Ici, vous pouvez créer des formes polygonales qui définissent les bordures du collisionneur.  Après avoir défini la forme physique, vous pouvez attacher le composant Polygon Collider à l'objet, et il correspondra à cette forme. <br><br>  Si vous utilisez des objets comme tuiles dans Tilemap, vous pouvez également utiliser le collisionneur Grille.  Choisissez l'élément de mosaïque qui correspond à l'élément de l'élément (si vous ne vous souvenez pas où le trouver, consultez la section «Processus de base de Tilmap»).  Vous verrez le menu Type de collisionneur.  Par défaut, une image-objet est définie comme type, c'est-à-dire que le collisionneur généré automatiquement utilisera la forme physique, dont nous avons parlé ci-dessus.  Si le type est défini sur grille.  alors il correspondra toujours exactement à la forme de la cellule de maillage à laquelle l'élément est attaché.  Ce n'est peut-être pas le moyen le plus précis d'implémenter des collisionneurs, mais pour certains types de jeux, cela peut être utile. <br><br>  Pour utiliser des collisionneurs pour ces tuiles, sélectionnez le Tilemap avec des objets et ajoutez le composant Tilemap Collider. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e3/98e/cc5/3e398ecc5b71b09f5179ce93956f1b9a.gif"></div><br><h2>  Utilisation des vignettes de règles </h2><br>  Les tuiles de règle sont extrêmement utiles pour automatiser le processus de dessin avec des tuiles.  La tuile de règle fonctionne comme une tuile ordinaire, mais dispose d'une liste supplémentaire d'options de tuile.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En utilisant ces paramètres (règles), une tuile peut choisir automatiquement l'image-objet à dessiner en fonction des tuiles voisines. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tuiles de règle sont utiles lorsque vous ne souhaitez pas sélectionner manuellement des tuiles avec des tours différents, par exemple, lors de la création d'un rocher ou d'une plate-forme. Ils peuvent également être utilisés pour randomiser entre différentes variations d'une même tuile, pour éviter de répéter des motifs, et même pour créer des tuiles animées. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tuiles de règles isométriques et hexagonales sont disponibles à partir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du référentiel 2D Extras</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unity sur GitHub. Il possède également de nombreux autres actifs Tilemap utiles qui méritent d'être explorés. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons ajouté le </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">kit de démarrage isométrique</font></a><font style="vertical-align: inherit;"> au projet.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuiles de règle pour chaque jeu de tuiles. </font><font style="vertical-align: inherit;">Voici quelques exemples de tuiles de projet que vous pouvez expérimenter:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/186/ac1/31d/186ac131d5b332dd0e7091a71569ff48.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24a/eaf/d22/24aeafd227b8c539c6a4b077406d94b3.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/966/48d/15d/96648d15de848c73803c614a1173cbd6.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a9/f3b/d11/4a9f3bd113e3763a58d63924542ba360.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/80f/087/1a6/80f0871a6b4c0df7b40ecac46bba4ba1.png"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Travaux ultérieurs </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant que vous avez découvert le périphérique des cartes de tuiles isométriques dans Unity, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">téléchargez le projet de kit de démarrage isométrique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et essayez de travailler avec vous-même! </font><font style="vertical-align: inherit;">Si vous êtes programmeur, vous avez la possibilité d'interagir avec Tilemap via des scripts, vous pouvez l'utiliser. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, en regardant cette vidéo, vous pouvez apprendre à implémenter un contrôleur de caractères simple compatible avec Isometric Tilemap:</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tywt9tOubEY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les graphiques de ce projet ont été créés pour Unity par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@castpixel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">ses autres œuvres peuvent être vues </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si vous souhaitez en savoir plus sur la création de jeux 2D sur Unity, vous devriez apprendre quelques excellents cours </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le site Web Learn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si vous recherchez des ressources supplémentaires pour expérimenter avec des cartes de tuiles, consultez le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magasin d'actifs Unity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La première fois que vous créez des niveaux avec Tilemap? </font><font style="vertical-align: inherit;">Apprenez à créer des mondes bidimensionnels dans ce </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didacticiel pour débutant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unity Learn.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr469497/">https://habr.com/ru/post/fr469497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr469479/index.html">D'où vient la probabilité quantique</a></li>
<li><a href="../fr469487/index.html">Configurer top dans GNU / Linux</a></li>
<li><a href="../fr469491/index.html">Interaction avec le serveur Asterisk à partir d'une application Java</a></li>
<li><a href="../fr469493/index.html">Rendez C ++ génial à nouveau! .. dans Tula</a></li>
<li><a href="../fr469495/index.html">Nouvelles approches pour construire ACS en utilisant les technologies WEB</a></li>
<li><a href="../fr469499/index.html">Comment nous avons conquis Parallels avec Apple</a></li>
<li><a href="../fr469503/index.html">Cybersécurité: nous protégeons les données des abonnés contre les fuites en 2019</a></li>
<li><a href="../fr469505/index.html">3 façons pratiques d'amener les entreprises sur les marchés étrangers: approches et techniques de vraies entreprises</a></li>
<li><a href="../fr469507/index.html">Troisième vulnérabilité du client Steam Windows, mais pas 0day</a></li>
<li><a href="../fr469509/index.html">Schémas angulaires, ou comment j'ai écrit mon modèle pour cli angulaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>