<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖨️ 😄 💤 Instrucciones de TelegramBot para crear funcionalidades básicas para el bot. (Parte 1) 👨🏾‍🎨 🧜🏽 👩🏻‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, le sugerí que usara mi bot de telegramas. 

 Telegram Bot - Asistente de planificación de eventos 

 Habiendo recibido muchas pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Instrucciones de TelegramBot para crear funcionalidades básicas para el bot. (Parte 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476306/"> No hace mucho tiempo, le sugerí que usara mi bot de telegramas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Telegram Bot - Asistente de planificación de eventos</a> <br><br>  Habiendo recibido muchas preguntas en PM, me di cuenta de que la cuestión de crear bots para Telegram es bastante popular. <br><br>  Me pidieron el código fuente del bot, me pidieron que compartiera ejemplos específicos de la implementación de varias características del bot, me pidieron que sugiriera algún tipo de funcionalidad para trabajar con el bot y los mensajes. <br><br>  Decidí escribir una serie de artículos en los que quiero mostrar las cosas básicas que necesitará para escribir su bot. <br>  Java, Maven, TelegramAPI, Lombok y Log4j te esperan. <br>  A quién le importa, por favor, debajo del gato ... <br><a name="habracut"></a><br>  Y voy directamente de la carta de triunfo :) <br><br>  Lo solicitado en el artículo anterior. <br><br>  Puede encontrar los códigos fuente para el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">aquí</a> . <br><br>  En la rama " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">maestra</a> " habrá la versión final del bot, que escribiremos junto con usted, en el proceso de aparición de nuevos artículos. <br><br>  La fuente completa de este artículo estará en la rama " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Part1-Base</a> ". <br><br>  En esta parte, crearemos con usted una plantilla básica que podrá: <br><br><ol><li>  registrarse bot en los servidores de Telegram </li><li>  recibir mensajes escritos al bot </li><li>  responder al comando / start </li></ol><br><h3>  Crear un proyecto maven estándar </h3><br>  ( <i>Echaré de menos los manuales sobre cómo trabajar con el entorno de desarrollo y las cosas básicas de la programación Java. Todas estas cosas son bastante fáciles de google. Y si no funciona, escriba preguntas</i> ). <br><br>  <b>Veamos qué dependencias necesitaremos en este proyecto.</b> <br><br>  En primer lugar, este es <b>Lombok</b> .  ¿Qué es esto y por qué? Puede leer, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> . <br><br>  Y asegúrese de agregar un registrador.  Uso <b>log4j</b> y, un poco más, le mostraré lo útil que puede usarse al depurar esta aplicación y una comprensión más profunda del funcionamiento de TelegramAPI. <br><br><pre><code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.projectlombok<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>lombok<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.18.10<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>log4j<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>log4j<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.2.17<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Y porque  escribimos un bot para Telegram, luego la biblioteca misma de Telegram: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.telegram<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>telegrambots<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>3.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  La estructura del archivo pom se puede encontrar <a href="" rel="nofollow">aquí.</a> <br>  La estructura del archivo pom.xml se puede ver <a href="" rel="nofollow">aquí</a> . <br><br>  A continuación, agregamos la clase base <a href="" rel="nofollow">Bot.java</a> , que implementará toda nuestra interacción con los servicios de Telegram.  Trabajaremos con LongPolling, como  Este método no requiere certificados de cifrado y puede iniciarse desde cualquier máquina que tenga Java a bordo. <br><br>  Para hacer esto, heredamos de la clase <b>TelegramLongPollingBot</b> e implementamos los métodos básicos: <br><br>  <b>public void onUpdateReceived (Actualizar actualización)</b> <b><br></b>  <b>public String getBotUsername ()</b> <b><br></b>  <b>public String getBotToken ()</b> <br><br>  Y de nosotros mismos necesitaremos agregar un procedimiento que conecte nuestro bot a TelegramAPI: <br><br>  <b>public void botConnect ()</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.AllArgsConstructor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.Getter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.NoArgsConstructor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.Setter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.TelegramBotsApi; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.objects.Update; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.bots.TelegramLongPollingBot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.exceptions.TelegramApiRequestException; <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bot</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TelegramLongPollingBot</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(Bot.class); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> RECONNECT_PAUSE =<span class="hljs-number"><span class="hljs-number">10000</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> String userName; <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> String token; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUpdateReceived</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> 11/18/2019     log.debug("new Update recieve"); } @Override public String getBotUsername() { return userName; } @Override public String getBotToken() { return token; } public void botConnect() { TelegramBotsApi telegramBotsApi = new TelegramBotsApi(); try { telegramBotsApi.registerBot(this); log.info("TelegramAPI started. Look for messages"); } catch (TelegramApiRequestException e) { log.error("Cant Connect. Pause " + RECONNECT_PAUSE / 1000 + "sec and try again. Error: " + e.getMessage()); try { Thread.sleep(RECONNECT_PAUSE); } catch (InterruptedException e1) { e1.printStackTrace(); return; } botConnect(); } } }</span></span></code> </pre><br>  En principio, todo.  Este código puede conectarse a los servidores de Telegram y al recibir los mensajes dirigidos a él, registrará la información en el archivo de registro que recibió la Actualización. <br><br>  Creemos una clase que ejecute nuestra aplicación. <br><br>  Esto lo hará la clase App.java.  Enlace al archivo: <a href="" rel="nofollow">aquí</a> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.telegrambot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.bot.Bot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.ApiContextInitializer; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(App.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ ApiContextInitializer.init(); Bot test_habr_bot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bot(<span class="hljs-string"><span class="hljs-string">"test_habr_bot"</span></span>, <span class="hljs-string"><span class="hljs-string">"1012522162:AAHLvPVqKF48LdqnsvS3l5YrJfvFey6dBa0"</span></span>); test_habr_bot.botConnect(); } }</code> </pre> <br>  Como puede ver, para que el bot funcione, solo necesitamos el "nombre del bot" y el "token", que pasaremos en el constructor de nuestra clase de Bot. <br><br>  Puedes obtener el nombre y la ficha del bot del padre de todos los bots :) escribiéndole en un telegrama. <br>  Su apodo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">@BotFather</a> <br>  La comunicación con él es muy simple y concisa. <br><br>  En comando <br><blockquote>  / newbot </blockquote><br>  Como resultado, debería obtener este diálogo: <br><br><img src="https://habrastorage.org/webt/93/bo/fc/93bofc9fylsdmyu0polllzad-x4.png"><br><br>  También escriben aquí que es más preciso, no muestre esta información a nadie, de lo contrario, otra persona podrá controlar su bot :) <br><br>  Dirás que no soy muy preciso ... Tal vez, pero el padre de los robots nos permite cambiar los tokens y recuperar los que están en acceso público.  Por lo tanto, cuando intente conectarse con mis datos, recibirá el siguiente mensaje: <br><br><pre> <code class="plaintext hljs">2019-12-04 13:44:25,252[DEBUG][main ][ com.example.telegrambot.bot.Bot] - Bot token: 1012522162:AAF5D49N4NreEJfCk0aOsC-UnmIu_GLkoyc 2019-12-04 13:44:26,613[ERROR][main ][ com.example.telegrambot.bot.Bot] - Cant Connect. Pause 10sec and try again. Error: Error removing old webhook</code> </pre><br>  Entonces con mis datos no puedes conectarte.  Registra el tuyo.  Especifique nuevos datos en la clase <a href="" rel="nofollow">App.java</a> <br><br>  Ahora, al ejecutar el método principal en la clase App, dejamos que nuestro bot se conecte y esperemos nuevos mensajes.  Nos escribirá sobre sus acciones e intentos en la consola. <br><br><h3>  Log4j </h3><br>  Recuerde, anteriormente hablé sobre la utilidad de la biblioteca log4j.  Y aquí, para los curiosos, se abre un klondike de datos útiles. <br><br>  El archivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">log4j.properties</a> ya contiene configuraciones básicas para el registro y niveles de registro específicos para clases de terceros y para aquellos que trabajan en nuestro bot. <br><br><pre> <code class="plaintext hljs">log4j.rootLogger= error, file log4j.logger.com.example.telegrambot.App = debug, stdout log4j.logger.com.example.telegrambot.bot.Bot = debug, stdout</code> </pre> <br>  El nivel básico de registro se indica como Error. <br><br>  Para las clases Bot y App, se indica la salida del registro en el nivel de depuración. <br><br>  <i>¿Cuáles son estos niveles y en qué se diferencian? Puede encontrarlos fácilmente en Google.</i> <br><br>  Si desea ver cómo y en qué orden la biblioteca de Telegram realiza todas sus acciones, cambie el modo de registro general a un nivel inferior: información o depuración. <br><br>  Y cuando inicie la aplicación, verá en la consola cuántas cosas interesantes suceden en el proceso de conexión y funcionamiento.  ¿Cuántas veces se encuesta sus funciones con el nombre del bot y el token? <br><br>  Los niveles de registro cambian con esta línea: <br>  Para obtener los registros de acuerdo con el nivel de información, póngalo así: <br><br><pre> <code class="plaintext hljs">log4j.rootLogger= info, file</code> </pre> <br>  Para el nivel de depuración, así: <br><br><pre> <code class="plaintext hljs">log4j.rootLogger= debug, file</code> </pre> <br><h3>  Y en conclusión </h3><br>  Ahora tenemos un bot: se conecta, nos muestra hermosos registros e informa que llegan mensajes. <br><br>  Pero arriba, te prometí que el bot responderá al comando de inicio.  Cambiemos un poco el procedimiento responsable de procesar los mensajes recibidos. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUpdateReceived</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ log.debug(<span class="hljs-string"><span class="hljs-string">"Receive new Update. updateID: "</span></span> + update.getUpdateId()); Long chatId = update.getMessage().getChatId(); String inputText = update.getMessage().getText(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inputText.startsWith(<span class="hljs-string"><span class="hljs-string">"/start"</span></span>)) { SendMessage message = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessage(); message.setChatId(chatId); message.setText(<span class="hljs-string"><span class="hljs-string">"Hello. This is start message"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { execute(message); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (TelegramApiException e) { e.printStackTrace(); } } }</code> </pre> <br>  Como puede ver en el código, el bot hace lo siguiente: <br><br><ul><li>  Recibe una actualización y captura su número de identificación en el registro. </li><li>  Recupera la ID de chat y el texto del mensaje del mensaje transmitido </li><li>  Comprueba si este texto es un comando "/ start" </li><li>  Y en caso de una comparación exitosa, crea un mensaje en respuesta y lo envía al chat, con la identificación recibida anteriormente </li></ul><br>  Espero que lo encuentres útil e interesante. <br><br>  En el futuro te mostraré cómo se implementa en mis bots: <br><br><ul><li>  uso de varios equipos </li><li>  vincular estos comandos a los controladores </li><li>  multihilo: recibe y envía mensajes de forma independiente </li><li>  formato de mensaje </li><li>  trabajar con botones y devoluciones de llamada </li><li>  edición de publicaciones antiguas </li></ul><br>  Sobre esta base, en acceso público, 2 de mis bots ahora funcionan para mí. <br><br>  Una cosa que sabes es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">un asistente de planificación de eventos</a> . <br><br>  Y el segundo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">fanático de las películas</a> .  Le encantan las películas y sabe mucho sobre ellas.  Y aún más, le gusta compartir sus conocimientos contigo.  Dirige su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">canal en un telegrama</a> , en el que decide qué películas le gustan y se las ofrece.  Él sabe cómo crear selecciones individuales por género y crear una suscripción a recomendaciones personalizadas.  Él sabe cómo encontrar obras maestras de las que nunca has oído hablar y ni siquiera sabía cómo se pueden encontrar esas películas. <br><br>  Por ejemplo, ¿crees que hay películas con una combinación de géneros tan "salvaje" como: documental, terror, comedia. <br><br>  Pero el bot al mando <br><br><pre> <code class="plaintext hljs">     2010-</code> </pre> <br>  Él dirá que desde 2010 hasta el momento presente tales películas han sido rodadas hasta 6 piezas :) <br><br>  Cómo trabajar con comandos similares, cómo analizar cadenas y secuencias de comandos que discutiremos con usted en las siguientes publicaciones. <br><br>  Gracias por su atencion  La programación es divertida :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476306/">https://habr.com/ru/post/476306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476294/index.html">Red de juegos distribuidos como alternativa a GFN: cómo y por qué puede despegar, donde ya funciona en la Federación Rusa</a></li>
<li><a href="../476296/index.html">21 de noviembre, Product Engineering MeetUp: ¿Quién es un ingeniero de producto?</a></li>
<li><a href="../476298/index.html">Repase las espinas para bicicletas, primera parte: aprenda los conceptos básicos de la personalización del depurador de Visual Studio usando complementos</a></li>
<li><a href="../476300/index.html">La revista Tram es una estrella de la vanguardia de los niños rusos que brilla intensamente y se desvaneció rápidamente</a></li>
<li><a href="../476304/index.html">Autenticación de hardware del dispositivo Linux en sistemas de nivel superior</a></li>
<li><a href="../476308/index.html">Las 5 mejores prácticas de desarrollo de software a seguir en 2020</a></li>
<li><a href="../476310/index.html">CRM de rostro humano</a></li>
<li><a href="../476312/index.html">React o Angular o Vue.js: ¿qué elegir?</a></li>
<li><a href="../476316/index.html">Vue Storefront: Rellene datos en ES</a></li>
<li><a href="../476318/index.html">Atacamos completamente al Joker 2019: ¿cómo fue la mayor conferencia de Java en Rusia?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>