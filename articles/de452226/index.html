<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèæ üç∫ üßÄ Der Titel wird anders sein üî´ üìï üò¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie ein Produkt f√ºr den Massenmarkt entwickeln, verwenden es h√∂chstwahrscheinlich Menschen mit Sehbehinderung. Wenn Sie benutzerfreundliche Benut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Der Titel wird anders sein</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/452226/">  Wenn Sie ein Produkt f√ºr den Massenmarkt entwickeln, verwenden es h√∂chstwahrscheinlich Menschen mit Sehbehinderung.  Wenn Sie benutzerfreundliche Benutzeroberfl√§chen erstellen m√∂chten, m√ºssen Sie dies bequem f√ºr alle Kunden tun, auch f√ºr Personen mit Sehbehinderung.  Ich denke, wir vergessen es oft.  Und es ist Zeit, das Problem zu beheben. <br><br><img src="https://habrastorage.org/webt/vl/d_/dg/vld_dgvbru6qn4h7vwhdjzhh2r0.png"><br><a name="habracut"></a><br>  Ich habe bei einer Suche im App Store die Abfrage ‚ÄûPizza Delivery‚Äú eingegeben, die ersten 24 Anwendungen heruntergeladen und √ºberpr√ºft, welche davon eine Schnittstelle f√ºr Menschen mit Sehbehinderung bietet. <br><br><img src="https://habrastorage.org/webt/gc/g_/r-/gcg_r-5lktwzdhejhfqkcxlwkfm.png"><br><br>  <b>2 von 24</b> .  Und einer der beiden hat es anscheinend aus Versehen getan: Mit zunehmender Schriftgr√∂√üe ‚Äûschwebt‚Äú die gesamte Benutzeroberfl√§che und die Verwendung wird nur noch schwieriger.  Es ist traurig. <br><br>  Jeden Monat nutzen 550.000 Menschen die Dodo Pizza iOS-App.  Selbst wenn 1% unserer Benutzer eine vergr√∂√üerte Schrift haben, sind es 5500 Personen, die sich mit unserer Anwendung nicht wohl f√ºhlen.  Wir werden es korrigieren. <br><br><h2>  Unterst√ºtzung f√ºr dynamische Typen hinzuf√ºgen </h2><br><ol><li>  Wir verwenden dynamische Systemtextstile anstelle von statischen. </li><li> Aktivieren Sie optional das Kontrollk√§stchen Schrift automatisch anpassen auf Beschriftungen in Storyboards.  Oder wenn die Beschriftung in der Schaltfl√§che oder durch den Code erstellt wird, klopfen wir auf den Parameter <code>adjustsFontForContentSizeCategory</code> . </li><li>  Wir bringen der Benutzeroberfl√§che bei, sich auf verschiedene Schriftgr√∂√üen auszudehnen: <br>  - Wir verwenden die automatische Berechnung der Zellgr√∂√üen, wo wir k√∂nnen. <br>  - Wo wir nicht k√∂nnen - erhalten wir die aktuellen Einstellungen f√ºr die Schriftgr√∂√üe und reagieren auf √Ñnderungen in der <code>traitCollectionDidChange</code> Methode. </li><li>  Wir bekommen eine Schnittstelle, die nicht zu benutzen ist. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/webt/vg/sj/qa/vgsjqakh4zfv-lcere3iv0rptk0.png"></a> <br><br><h2>  Wir √§ndern die Schnittstelle, damit sie verwendet werden kann </h2><br>  Wir rollen zur√ºck und √ºberlegen, wie wir alles gut machen k√∂nnen. <br><br><h3>  Verwenden Sie den Platz im Men√º ordnungsgem√§√ü </h3><br>  Jetzt gibt es viel leeren Raum unter dem Pizzabild.  Versuchen wir, ein Bild √ºber den Namen zu setzen: Auf diese Weise wird es gr√∂√üer und der leere Raum verschwindet.  Dazu <code>UIStackView</code> wir den Bild- und <code>UIStackView</code> mit allem anderen in <code>UIStackView</code> und <code>UIStackView</code> dann bei Bedarf die Richtung der <code>UIStackView</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/dt/s_/vg/dts_vgharid2k9v5r9yvqxu1cto.png"></a> <br><br>  Wir haben keine Trennzeichen zwischen den Men√ºelementen, weshalb bei gro√üen Abmessungen die Zellen ‚Äûzusammenkleben‚Äú und der Pizza-Preis zu nahe am Bild der n√§chsten Pizza liegt.  Versuchen wir, ein Trennzeichen hinzuzuf√ºgen. <br><br> <a href=""><img src="https://habrastorage.org/webt/tl/8t/yf/tl8tyfcp3bir8nju3ziwcxcbozi.png"></a> <br><br>  Nicht das.  Erstens sieht es so lala aus.  Zweitens wird es f√ºr Menschen mit Sehbehinderung schwer zu sehen sein.  Auch wenn von grau nach schwarz neu gestrichen. <br><br>  Wir entfernen es zur√ºck und versuchen nur, das Internet zwischen den Zellen zu vergr√∂√üern. <br><br> <a href=""><img src="https://habrastorage.org/webt/7b/kq/m8/7bkqm8wzzu5dayijekqfmik_0qw.png"></a> <br><br>  Nun dann. <br><br>  Zwischensumme: Verwenden Sie mehr Platz, die Augen springen weniger von Zeile zu Zeile, das Lesen ist einfacher geworden. <br><br><h3>  Wir verbessern das Dehnen und Entfernen </h3><br>  Jetzt k√∂nnen Sie die Breite der Schaltfl√§che zum Hinzuf√ºgen zum Warenkorb erh√∂hen, andernfalls schwebte sie nach links und befindet sich nicht unter Ihrem Finger, obwohl rechts viel Platz frei ist.  Sie k√∂nnen es nat√ºrlich einfach nach rechts verschieben, aber dann ist es f√ºr Linksh√§nder unpraktisch, und im Allgemeinen sollten wir besser gestikulieren als unkomprimiert.  Und wir werden den Strich dicker machen, und jetzt stimmt er nicht mit der Schriftart √ºberein. <br><br> <a href=""><img src="https://habrastorage.org/webt/ew/en/c8/ewenc8ziqn0o7ffnkvvzbo5a7o4.png"></a> <br><br>  Ich schaue mir das alles an und verstehe, dass das Pizza-Foto nat√ºrlich sehr gro√ü ist.  Versuchen wir es zu verstecken, vielleicht ohne Bilder, die Sie leben k√∂nnen. <br><br> <a href=""><img src="https://habrastorage.org/webt/pp/pk/1q/pppk1qwmxxbayqrk5kula3oxfgg.png"></a> <br><br>  Im Allgemeinen hat ein Men√º ohne Fotos nicht viele Informationen verloren, aber jetzt st√∂rt fast immer ein Men√ºpunkt den Bildschirm eines iPhone 6S.  Aber es ist weniger attraktiv geworden, Drool flie√üt beim Scrollen nicht.  So.  Lassen wir es vorerst so, √ºberlegen Sie es sich gut und geben Sie das Bild vielleicht sp√§ter zur√ºck. <br><br><h3>  Vergessen Sie nicht, "live" zu √ºberpr√ºfen </h3><br>  Jetzt Kategorien.  Im Allgemeinen stellte sich heraus, dass es bereits beim ersten Ansatz ertr√§glich war.  Schalten Sie einen neuen ein. <br><br> <a href=""><img src="https://habrastorage.org/webt/dj/5z/mi/dj5zmie3v-yr8jceovq9t5xmkhc.png"></a> <br><br>  Ich habe versucht, durch das Men√º zu bl√§ttern und zwischen den Kategorien zu wechseln.  Trotzdem stellte sich heraus, dass alles in Aktion auseinander f√§llt.  Beim Scrollen durch das Men√º wechseln die Kategorien automatisch und ziehen bei so gro√üen Pins zu viel Aufmerksamkeit auf sich. <br><br>  Ersetzen wir die <code>UICollectionView</code> durch eine Schaltfl√§che, die das <code>UIActionSheet</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/re/c4/fr/rec4frqesfjg5_43ftutrekxw1u.png"></a> <br><br>  Voooot.  Jetzt k√∂nnen Sie im oberen Bereich die Stadt, die Lagerbest√§nde, die Adresse und den Aktionscode anzeigen. <br><br><h3>  Vergessen Sie nicht sehr lange Schlangen </h3><br>  Lassen Sie uns zuerst eine Auswahl der Stadt treffen.  Die Schriftart in der Schaltfl√§che ist nicht kompliziert, aber es ist interessant, den "Dreiecken" beizubringen, mit der Schriftart zu wachsen.  In unserem Fall wurde das Dreieck zu einem Symbol in der Schaltfl√§che gemacht, das √ºber <code>CGAffineTransform</code> nach rechts <code>CGAffineTransform</code> .  Eine andere M√∂glichkeit besteht darin, <code>NSAttributedString</code> aus dem Text und dem Dreiecksymbol zu sammeln und dann alles der Schaltfl√§che <code>NSAttributedString</code> .  Um das Symbol zu normalisieren, k√∂nnen Sie ein Vektorbild verwenden, das sich unbedingt in Assets mit dem H√§kchen "Vektordaten beibehalten" befinden muss. <br><br> <a href=""><img src="https://habrastorage.org/webt/r5/7k/fz/r57kfzbng-bwybworqlvbzunagk.png"></a> <br><blockquote>  Das Symbol des Dreiecks ist schwarz und wird durch den Code wei√ü gestrichen.  Und aus irgendeinem Grund treten bei der Standardtextgr√∂√üe Artefakte in Form von schwarzen Randtafeln auf.  Es ist lustig  Nicht sehr.  Er wurde geheilt, indem er ein Symbol anbrachte, das urspr√ºnglich wei√ü war. </blockquote><br>  Jetzt strecken wir die Dodo-Rubel, alles ist einfach: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/bh/7s/ctbh7styq51y9xt7c3reqc9wdg4.png"></a> <br><br>  Und jetzt ist die Frage: Was wird passieren, wenn der Name der Stadt lang wird und wir viele Dodo-Rubel haben?  Theoretisch m√ºssen Sie den Namen der Stadt k√ºrzen.  Erinnern Sie sich, was ich √ºber die zweite Option zum Hinzuf√ºgen eines solchen Symbols zu einer Schaltfl√§che √ºber <code>NSAttributedString</code> ?  Ich habe es versucht und jetzt gibt es ein Problem, dass beim Reduzieren des Titels das Dreieckssymbol verschwindet, da es jetzt Teil des Titels ist.  Stosh.  Wir m√ºssen die Logik des Verschiebens des Symbols durch Transformationen zur√ºckgeben. <br><blockquote>  Wenn Sie eine bequeme M√∂glichkeit kennen, das Symbol in der Schaltfl√§che nach rechts zu verschieben und zusammen mit der Schriftart in der Kopfzeile zu skalieren, verwerfen Sie es bitte in den Kommentaren. </blockquote><br><h3>  Cram in </h3><br>  Endlich Aktien.  Hier muss man sich setzen und nachdenken.  Der Titel kann lang sein und passt auch jetzt manchmal nicht in eine Zeile.  Bei einer gro√üen Gr√∂√üe wird er √ºberhaupt nicht gut passen.  Wenn Sie das obere orangefarbene Gummi herstellen und zulassen, dass der Titel der Aktion in einer gro√üen Gr√∂√üe mehrere Zeilen einnimmt, nimmt der obere Block selbst auf gro√üen iPhones die H√§lfte des Bildschirms ein, und Sie m√ºssen sich nicht an 4S erinnern.  Dies ist nicht der Fall.  Sie k√∂nnen mit einem Layout innerhalb des Aktionsfelds spielen: Machen Sie das Bild quadratisch und nehmen Sie die freie Stelle als √úberschrift.  Die Bilder f√ºr Best√§nde sind jedoch an ein bestimmtes Format angepasst und werden in einem anderen Format nicht korrekt angezeigt.  Das ist unm√∂glich. <br><br>  Kompliziert <br><br>  Also, aber Sie k√∂nnen die Bilder wieder komplett entfernen und den ganzen Platz mit einer √úberschrift einnehmen. <br><br> <a href=""><img src="https://habrastorage.org/webt/pa/uu/q7/pauuq7hzrctfjqof3wt_7fh4x4g.png"></a> <br><br>  Ja, das ist es.  H√§nde jucken, um den Hintergrund unter dem Titel der Aktion einzuf√§rben, dies beeintr√§chtigt jedoch die Lesbarkeit.  Und wir versuchen es zu verbessern.  Wir malen also nichts und gehen zu den verbleibenden zwei Schaltfl√§chen √ºber die Adresse und die Aktionscodes √ºber. <br><br><h3>  Wir arbeiten mit strengen Einschr√§nkungen </h3><br>  Die √úberschriften in diesen Schaltfl√§chen sind nicht reduzierbar.  Wenn sie jedoch nicht verkleinert werden, kriechen die Tasten aufeinander zu.  Und ja, Sie k√∂nnen diese Schaltfl√§chen nicht ausblenden. <br><br>  Als ich den Vorrat √ºberarbeitete, wollte ich die H√∂he des oberen orangefarbenen Feldes nicht erh√∂hen.  Es scheint zu m√ºssen.  Es ist gut, dass sie es zu diesem Zeitpunkt nicht erh√∂ht haben, sonst w√ºrde es jetzt Aduha geben.  Im Allgemeinen werde ich f√ºr jede Schaltfl√§che eine Zeile ausw√§hlen. <br><br> <a href=""><img src="https://habrastorage.org/webt/zj/nz/qg/zjnzqgtax6ep4jfk8y1_ogs3pgi.png"></a> <br><br>  Ufff, das war's.  Was die ausgeschalteten Fotos im Men√º betrifft, bin ich mir immer noch nicht sicher.  Alternativ k√∂nnen Sie nur die H√§lfte der Pizzabilder anstelle eines ganzen Kreises anzeigen, aber wir haben gerade die H√§lfte der Pizza auf der Speisekarte, sodass dies nicht funktioniert und wir die Benutzer verwirren k√∂nnen. <br><br>  Vergleichen wir den ersten Ansatz mit dem Endergebnis: <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/eh/m7/tuehm7kleeeivqqaoep4nljpsly.png"></a> <br><br>  Vergleichen Sie nun das Vorher und Nachher mit einer Simulation von Sehst√∂rungen: <br><br> <a href=""><img src="https://habrastorage.org/webt/y9/rw/re/y9rwrenclvvgw5yzf6ifgz5fu_0.png"></a> <br><br>  Haben Sie keine Angst, die Schnittstelle und die Steuerelemente zu √§ndern.  Es ist nichts Falsches daran, wenn jemand eine andere Schaltfl√§che oder beispielsweise einen Schieberegler sieht.  Und es ist nicht t√∂dlich, wenn jemand etwas nicht sieht oder wenn der Titel anders ist. <br><blockquote>  Und wir haben den <code>UITabBarController</code> nicht ber√ºhrt, da bei einer gro√üen Textgr√∂√üe das Symbol und der Titel der Registerkarte <code>UITabBarController</code> , wenn iOS die √Ñnderung der Lautst√§rke anzeigt. </blockquote><br><h2>  Wir zeigen, wie alles im Inneren funktioniert </h2><br>  Jede logische UI-Komponente in der Dodo Pizza iOS-Anwendung ist einem separaten <code>UIViewController</code> .  Jeder dieser Controller verf√ºgt √ºber eine <code>UIView</code> , die einer separaten Datei zugeordnet ist.  Mehr dazu lesen Sie in unseren Artikeln: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Controller, sei ruhig!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir nehmen den Code in UIView heraus</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zwiebelkontrolleur.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir zerlegen Bildschirme in Teile</a> <br><br>  Das Entfernen logischer UI-Komponenten in einen separaten <code>UIViewController</code> das √Ñndern von Schnittstellen in verschiedene Zust√§nde erheblich vereinfacht.  Wir empfehlen, dass Sie diesen Ansatz ausprobieren, auch wenn Sie keine Unterst√ºtzung f√ºr Dynamic Type hinzuf√ºgen m√∂chten. Es ist einfacher, den Status von Bildschirmen zu steuern: Reagieren Sie auf √Ñnderungen an Berechtigungen, Rechten, Rollen usw. <br><br>  Also.  Wir f√ºgen eine zus√§tzliche Ebene zwischen einer solchen UI-Komponente und ihrem √ºbergeordneten Container hinzu.  Wir haben es <code>StateViewController</code> . <br><br><img src="https://habrastorage.org/webt/zt/2t/3q/zt2t3qd01qrlnmjiem-ihzgjb5u.png"><br>  Der Controller mit dem Men√º integriert den Status-Controller und bettet bereits den <code>collection</code> oder Tastencontroller ein. <br><br>  Dieser <code>StateViewController</code> zeigt diese oder jene UI-Komponente je nach Situation an. <br><br>  Dazu muss <code>StateViewController</code> kennen und gegebenenfalls wechseln. <br><br>  In diesem Beispiel <code>StateViewController</code> der <code>StateViewController</code> die Auswahl der Kategorien im Men√º von Sammlung zu Schaltfl√§che und umgekehrt um.  Und im Fall einer ‚Äûnormalen‚Äú Anzeige und im Fall einer Anzeige f√ºr sehbehinderte Personen sollte der Selektor in der Lage sein, die gleichen Dinge zu tun: <br><br><ul><li>  Liste der Kategorien anzeigen. </li><li>  Markieren Sie die ausgew√§hlte Kategorie. </li><li>  Kategorieliste aktualisieren. </li><li>  Berichten Sie, dass die Kategorie "ausgestiegen" ist. </li></ul><br>  F√ºhlen Sie diesen wunderbaren Geruch von frischen kleinen St√§mmen?  Und nein, dies ist ein Team von Pizza mit mobiler API.  5 Minuten Pause. <br><br>  <i>2 Scheiben sp√§ter</i> <br>  "... Nun, wir verpacken unsere Komponenten so, um Kategorien in den Protokollen auszuw√§hlen, UND SIE SIND SOFORT!" <br><blockquote>  Tipp: Starten Sie den Eingabehilfen-Inspektor, um auf einfache Weise zu √ºberpr√ºfen, wie die Benutzeroberfl√§che auf √Ñnderungen in den Einstellungen f√ºr dynamische Kacheln reagiert.  Klicken Sie dazu im ge√∂ffneten Xcode auf Xcode ‚Üí Entwicklertool √∂ffnen ‚Üí Eingabehilfeninspektor, w√§hlen Sie den Simulator im Ger√§t aus und wechseln Sie zur letzten Registerkarte </blockquote><br><blockquote>  Ein weiterer Hinweis: Nehmen Sie die Dynamo-Taip-Steuerung auf dem iPhone (nicht auf dem Simulator) in das Control Center, um die Textgr√∂√üe einfach und schnell zu √§ndern.  Gehen Sie dazu auf einem iPhone zu Einstellungen ‚Üí Control Center ‚Üí Steuerelemente anpassen und f√ºgen Sie die Textgr√∂√üe hinzu. </blockquote><br>  Wir haben den √ºblichen Kategorieselektor <code>CategoriesCollectionViewController</code> und f√ºr Sehbehinderte <code>CategoriesButtonViewController</code> .  Ihr gemeinsames Protokoll hei√üt <code>CategoriesPickerProtocol</code> .  Der allgemeine Statuscontroller ist <code>CategoriesStateViewController</code> . <br><br>  Wir beschreiben die m√∂glichen Zust√§nde in unserem <code>CategoriesStateViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> collection, button }</code> </pre> <br>  Wir bringen ihm bei, den gew√ºnschten Controller f√ºr jeden Zustand anzuzeigen: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state: <span class="hljs-type"><span class="hljs-type">State</span></span> = .collection { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state != oldValue { updateViewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateController(with: viewController) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> state { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .collection: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesCollectionViewController</span></span>.instantiateFromStoryboard() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .button: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesButtonViewController</span></span>.instantiateFromStoryboard() } }</code> </pre> <br>  <code>instantiateFromStoryboard()</code> - Eine Methode von einer selbstgeschriebenen Erweiterung zu einem View-Controller. Erstellt eine Controller-Instanz aus Storyboards, wenn sie denselben Namen haben.  Der Code befindet sich im Quellcode am Ende des Artikels. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traitCollectionDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> previousTraitCollection: UITraitCollection?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.traitCollectionDidChange(previousTraitCollection) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateStateToCurrentContentSize() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateStateToCurrentContentSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contentSize = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.traitCollection.preferredContentSizeCategory <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateState(to: contentSize) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to contentSize: UIContentSizeCategory)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.state = contentSize.isAccessibilityCategory ? .button : .collection }</code> </pre> <br>  Wir beschreiben das <code>CategoriesPickerProtocol</code> Protokoll und f√ºgen gleichzeitig zwei weitere Protokolle hinzu: f√ºr den Delegaten und f√ºr die Datenmenge. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPickerProtocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> datasource: <span class="hljs-type"><span class="hljs-type">CategoriesDatasource?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delegate: <span class="hljs-type"><span class="hljs-type">CategoriesDelegate?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateCategories</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedCategory: <span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDatasource</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> categories: [<span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(of category: Product.ProductCategory)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productCategoriesView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> categoriesPicker: CategoriesPickerProtocol, didSelect category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> }</code> </pre> <br>  Es macht keinen Sinn, die Implementierung zu zeigen. Es ist nur so, dass jeder Piker die Kategorien anzeigt und √Ñnderungen nach oben meldet. <br><br>  Ein detailliertes Beispiel f√ºr die Verwendung von State Controllern f√ºr Dynamic Taype finden Sie in meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repo auf GitHub</a> . <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir expandieren √ºbrigens</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de452226/">https://habr.com/ru/post/de452226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de452210/index.html">Bot f√ºr VK auf Python mit MySQL in einer Stunde, Teil 2</a></li>
<li><a href="../de452212/index.html">So ziehen Sie mit Ihrem Startup in die USA: 3 echte Visumoptionen, deren Funktionen und Statistiken</a></li>
<li><a href="../de452214/index.html">Praktika sind Kanonenfutter, um L√∂cher zu stopfen, nicht ‚Äûunbezahlbare Erfahrung und Karrierechancen‚Äú</a></li>
<li><a href="../de452222/index.html">Luftfahrt-Telefont√ºrme, der n√§chste Schritt 5G</a></li>
<li><a href="../de452224/index.html">Die Kurzanleitung f√ºr einen Webentwickler</a></li>
<li><a href="../de452228/index.html">Anna Boyarkina, Miro (ehemals RealtimeBoard): √ºber Produktdenken, Teamkultur, zuk√ºnftige F√§higkeiten</a></li>
<li><a href="../de452230/index.html">Wir untersuchen die Tunneldiode am Beispiel von 3I306M</a></li>
<li><a href="../de452232/index.html">ObjectRepository - .NET In-Memory-Repository-Muster f√ºr Ihre Heimprojekte</a></li>
<li><a href="../de452234/index.html">Thermometer & Hygrometer auf ATMEGA 328P-MU - Erh√∂hung des Arduino-Entwicklungsniveaus</a></li>
<li><a href="../de452236/index.html">Harmonie der Skripte in der Android-Anwendung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>