<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèΩ üßëüèø üíÜüèª Otimize o desempenho do jogo com as op√ß√µes de importa√ß√£o de som do Unity ‚¨ÖÔ∏è üêÜ üßóüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os desenvolvedores geralmente n√£o entendem completamente as op√ß√µes para importar som para o Unity e, no momento em que escrevi, n√£o consegui encontrar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Otimize o desempenho do jogo com as op√ß√µes de importa√ß√£o de som do Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437474/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/nf/wp/jz/nfwpjzsg4tjyajvouaedog8yl6i.png" alt="imagem"></div><br>  Os desenvolvedores geralmente n√£o entendem completamente as op√ß√µes para importar som para o Unity e, no momento em que escrevi, n√£o consegui encontrar um √∫nico guia detalhado para o uso deles.  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o do Unity</a> descreve bem o que as op√ß√µes de importa√ß√£o de som fazem, mas eu gostaria de analisar essas descri√ß√µes para um p√∫blico mais amplo, al√©m de explicar em mais detalhes como aplicar esses par√¢metros para tirar o m√°ximo proveito do jogo. <br><br>  Este documento est√° dividido em cinco partes: <br><br><ol><li>  Como o som afeta o desempenho </li><li>  Lidamos com op√ß√µes de importa√ß√£o </li><li>  Minhas configura√ß√µes recomendadas para PC e consoles </li><li>  Minhas configura√ß√µes recomendadas para plataformas m√≥veis </li><li>  Cuidados e notas </li></ol><br>  A otimiza√ß√£o das op√ß√µes de importa√ß√£o de som do Unity √© um dos m√©todos mais f√°ceis de otimiza√ß√£o.  No caso de um projeto pequeno, pode levar menos de uma hora para obter melhorias significativas no tempo de inicializa√ß√£o, RAM e outros aspectos de desempenho.  Espero que este guia seja √∫til para voc√™.  As informa√ß√µes s√£o relevantes para a vers√£o 2018 do Unity.3 <br><a name="habracut"></a><br><h1>  1. Como o som afeta o desempenho </h1><br>  Os dados do som s√£o volumosos.  Em muitos jogos, os dados de √°udio ocupam a maior parte do espa√ßo em disco (disco / cartucho / disco √≥ptico onde os dados do jogo s√£o armazenados) e RAM (mem√≥ria operacional do sistema).  Mas n√£o √© s√≥ isso, eles tamb√©m carregam seriamente a CPU, especialmente se voc√™ usa os efeitos do DSP (processamento de som em tempo real) e tamb√©m aumentam bastante o tempo de carregamento. <br><br>  Nessas tr√™s √°reas (espa√ßo em disco ocupado pela RAM, uso da CPU), a otimiza√ß√£o √© um cabo de guerra de tr√™s vias semelhante ao problema do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"bom, barato, r√°pido"</a> .  Se algum aspecto do jogo causar mais danos, voc√™ pode manter a efic√°cia de um aspecto sacrificando outro.  Por exemplo, se o som n√£o compactado ocupa muita RAM, voc√™ pode armazen√°-lo na forma compactada do Vorbis - isso economiza espa√ßo na RAM, mas com o custo da carga da CPU, porque o acesso ao arquivo compactado exige mais poder de processamento para decodific√°-lo.  Abaixo est√° um gr√°fico com v√°rios par√¢metros e seus efeitos nessas tr√™s √°reas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fea/1a6/1dd/fea1a61dde7f1430e49e43a6fbe92187.png"></div><br>  Vale a pena considerar que este diagrama n√£o nos diz nada sobre a largura de banda dos dados lidos no disco / RAM. <br><br>  Na realidade, existem mais algumas nuances, mas o diagrama deve fornecer uma id√©ia geral de como esses problemas est√£o interconectados.  Para entender como usar esses par√¢metros (e lidar com problemas como tempo de carregamento muito longo), √© necess√°rio considerar cada uma das op√ß√µes de importa√ß√£o de som em detalhes. <br><br><h1>  2. Compreendendo as op√ß√µes de importa√ß√£o </h1><br>  Quando voc√™ seleciona AudioClip no editor do Unity, o seguinte painel aparece na janela do inspetor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4t/_i/w2/4t_iw2bel1lw6zbecao9qkv1ady.png"></div><br>  Abaixo est√° uma lista de op√ß√µes de som de cima para baixo com uma descri√ß√£o do que elas fazem: <br><br><h3>  For√ßar a mono </h3><br><ul><li>  Sim: se o AudioClip for gravado em est√©reo (ou com um n√∫mero diferente de canais), esse par√¢metro combinar√° todos os canais em um canal mono. </li><li>  N√£o: o n√∫mero de canais n√£o muda. </li></ul><br>  No meu trabalho como designer de som, nunca reduzo o sinal de √°udio para mono, porque crio sons para uma finalidade espec√≠fica.  Por√©m, se voc√™ usar sons padr√£o de a√ß√µes e desejar ativar essa op√ß√£o, verifique se o arquivo mono n√£o soa plano e estranho devido √† intera√ß√£o interfacial dos canais esquerdo e direito.  Voc√™ pode visualizar o som processado clicando no bot√£o Reproduzir no canto inferior direito da janela do inspetor - se ouvir distor√ß√£o de fase, poder√° tentar separar o som em um editor de √°udio de terceiros e exportar individualmente os canais esquerdo e direito como som mono. <br><br><h3>  Normalizar (dispon√≠vel apenas quando For√ßar para Mono est√° ativado) </h3><br><ul><li>  Sim: ajusta o ganho do AudioClip para que o som monof√¥nico tenha o mesmo volume que o arquivo est√©reo original. </li><li>  N√£o: n√£o ajusta o ganho. </li></ul><br>  Se voc√™ usa Force to Mono, geralmente vale a pena ativar a normaliza√ß√£o.  Um arquivo est√©reo alto quando misturado ao mono pode se tornar ainda mais alto, exceder a amplitude m√°xima e levar a uma distor√ß√£o digital aguda, o que √© indesej√°vel. <br><br><h3>  Carregar dados de √°udio em segundo plano / pr√©-carregar </h3><br>  Esses par√¢metros t√™m um efeito direto um sobre o outro, ent√£o eu os combinei. <br><table><thead><tr><th width="60" align="center">  <sup>Carregar em segundo plano</sup> </th><th width="60" align="center">  <sup>Pr√©-carregar dados de √°udio</sup> </th><th align="center">  <sup>Resultado</sup> </th></tr></thead><tbody><tr><td>  <sup>Ativado</sup> </td><td>  <sup>Ativado</sup> </td><td>  <sup>Quando uma cena √© carregada, os clipes de som com esse par√¢metro come√ßam a carregar, mas n√£o interrompem o fluxo principal.</sup>  <sup>Se, no momento em que a cena estiver totalmente carregada, nem todas estiverem carregadas, o download continuar√° em segundo plano quando a cena j√° estiver em execu√ß√£o.</sup>  <sup>Se o som n√£o estiver carregado, mas j√° estiver em execu√ß√£o, ele se comportar√° da mesma forma que quando o Disabled Preload (veja a linha abaixo).</sup> </td></tr><tr><td>  <sup>Ativado</sup> </td><td>  <sup>Desativado</sup> </td><td>  <sup>Quando um som √© iniciado pela primeira vez, ele √© carregado em segundo plano e reproduzido quando estiver pronto.</sup>  <sup>Se o arquivo for grande, pode haver um atraso percept√≠vel entre iniciar e reproduzir, mas nas reprodu√ß√µes subsequentes do arquivo tudo ficar√° bem.</sup> </td></tr><tr><td>  <sup>Desativado</sup> </td><td>  <sup>Ativado</sup> </td><td>  <sup>O som √© carregado enquanto a cena est√° sendo carregada.</sup>  <sup>A cena n√£o ser√° iniciada at√© que todos os sons com este par√¢metro ativado sejam carregados na mem√≥ria.</sup> </td></tr><tr><td>  <sup>Desativado</sup> </td><td>  <sup>Desativado</sup> </td><td>  <sup>Quando o som √© iniciado pela primeira vez, ele usa o fluxo principal para carregar-se na mem√≥ria - se o arquivo for grande, isso pode causar uma lentid√£o nos quadros, mas nas reprodu√ß√µes subsequentes tudo ficar√° bem.</sup> <sup><br><br></sup>  <sup>Eu recomendo usar essa configura√ß√£o apenas para arquivos muito pequenos, mas, mesmo nesse caso, vale a pena medir seu efeito no desempenho no criador de perfil e pensar se um grande n√∫mero desses sons pode ser iniciado simultaneamente, aumentando a carga no desempenho.</sup> </td></tr></tbody></table><br><h3>  Ambisonic </h3><br><ul><li>  Marque esta caixa se o som estiver codificado em Ambisonic.  Os sons ambis√¥nicos s√£o √∫teis para VR, AR, v√≠deo panor√¢mico etc., mas esse par√¢metro n√£o est√° relacionado ao nosso manual. </li></ul><br><h3>  Op√ß√µes espec√≠ficas da plataforma </h3><br><ul><li>  Essas guias permitem definir par√¢metros padr√£o e par√¢metros espec√≠ficos da plataforma para as configura√ß√µes listadas abaixo.  Algumas plataformas possuem formatos de compacta√ß√£o que n√£o est√£o dispon√≠veis em outras, outras podem ter outros equipamentos que requerem otimiza√ß√£o diferente.  Para compacta√ß√£o espec√≠fica da plataforma, consulte as notas abaixo. </li><li>  Sempre verifique os par√¢metros espec√≠ficos da plataforma, mesmo se voc√™ quiser usar par√¢metros comuns - √†s vezes, o Unity pode definir automaticamente par√¢metros espec√≠ficos da plataforma.  Por exemplo, as compila√ß√µes para iOS podem ter como padr√£o "especificar taxa de amostragem: 22kHz", o que pode levar ao alias (um defeito de som resultante de uma redu√ß√£o de amostragem incorreta). </li></ul><br><h3>  Tipo de carga </h3><br><ul><li>  Descompactar ao carregar: o som √© armazenado no disco no formato de compacta√ß√£o especificado, mas √© descompactado e carregado na RAM descompactada no formato PCM.  Isso consome muita RAM e aumenta um pouco o tempo de inicializa√ß√£o, mas √© muito barato do ponto de vista do processador e o acesso √© muito r√°pido. </li><li>  Compactado na mem√≥ria: no disco e na RAM, o som √© armazenado no formato de compacta√ß√£o especificado.  O local e o tempo de carregamento ocupado na RAM s√£o reduzidos, mas a carga do processador aumenta durante a reprodu√ß√£o do som, pois deve ser descompactado a cada reprodu√ß√£o. </li><li>  Streaming: O streaming de √°udio √© reproduzido diretamente do disco, ignorando completamente a RAM.  Isso ocupa parte da largura de banda do disco e dos recursos da CPU, mas em PCs e consoles n√£o afeta significativamente o desempenho, desde que n√£o mais que dois sons sejam transmitidos simultaneamente.  Em plataformas m√≥veis (especialmente em dispositivos baratos e antigos), o streaming simult√¢neo de v√°rios arquivos est√©reo carrega muito o processador (consulte a se√ß√£o ‚ÄúCuidados‚Äù abaixo). </li></ul><br><h3>  Formato de compress√£o </h3><br><ul><li>  PCM: dados de √°udio brutos, totalmente descompactados e ocupam muito espa√ßo no disco e na RAM, mas praticamente n√£o precisam de nenhum custo para reproduzi-los, porque a descompacta√ß√£o n√£o √© necess√°ria. </li><li>  ADPCM: um formato de compacta√ß√£o muito antigo com uma taxa de compacta√ß√£o de 3,5: 1.  A compacta√ß√£o / descompacta√ß√£o √© bastante barata em compara√ß√£o com o Vorbis ou outros formatos de compacta√ß√£o, mas introduz artefatos de ru√≠do digital no som; portanto, voc√™ deve us√°-lo apenas em "sons ruidosos", nos quais n√£o ser√° percept√≠vel.  Se voc√™ n√£o tiver certeza se o ADPCM √© adequado para qualquer som espec√≠fico, ative a pr√©-audi√ß√£o de som nos formatos PCM e ADPCM - se voc√™ perceber alguma diferen√ßa, recomendo escolher o PCM. </li><li>  Vorbis: Um formato compactado compat√≠vel com as plataformas mais populares.  Ele pode fornecer taxas de compress√£o suficientemente altas, mantendo uma qualidade de som decente, mas √© muito caro comprimir e descomprimir rapidamente. </li></ul><br>  Listei aqui apenas os formatos padr√£o de editor. Para obter mais informa√ß√µes sobre tipos e compacta√ß√£o espec√≠ficos da plataforma, consulte a se√ß√£o "Coment√°rios" abaixo. <br><br>  Aqui est√° uma breve compara√ß√£o da carga do processador para diferentes formatos no meu PC no editor do Unity: <br><br><table><thead><tr><th>  Formato de compress√£o </th><th>  Uso da CPU com 1 voto </th><th>  Uso da CPU com 6 votos </th></tr></thead><tbody><tr><td>  PCM </td><td>  ~ 0,05% </td><td>  ~ 0,3% </td></tr><tr><td>  ADPCM (compactado na mem√≥ria) </td><td>  ~ 0,2% </td><td>  ~ 1,0% </td></tr><tr><td>  Vorbis (compactado na mem√≥ria) </td><td>  ~ 0,5% </td><td>  ~ 3,2% </td></tr></tbody></table><br><h3>  Qualidade (n√£o aplic√°vel ao PCM / ADPCM) </h3><br><ul><li>  70-100%: quase indistingu√≠vel do PCM em qualidade total para todos, exceto os audi√≥filos com equipamento de √°udio caro </li><li>  1-69%: variando o n√≠vel de qualidade, valores mais baixos criam artefatos repulsivos fortes de ru√≠do, reduzem a din√¢mica e tornam o som plano e sem vida.  Voc√™ pode clicar no bot√£o de visualiza√ß√£o no painel do inspetor para ver qu√£o notavelmente cai a qualidade de cada som espec√≠fico. </li></ul><br>  Esses par√¢metros de qualidade significam que o som ser√° reproduzido a uma velocidade de 100%, portanto, eliminam algumas das altas frequ√™ncias que geralmente est√£o fora da faixa aud√≠vel.  Mas, ao tocar em velocidade reduzida, eles mudam para o alcance aud√≠vel.  Se voc√™ planeja reproduzir o som com um tom / velocidade baixos, √© melhor escolher a codifica√ß√£o no PCM. <br><br>  Quanto menor a qualidade, mais fortes os arquivos s√£o compactados: <br><br><table><thead><tr><th>  Qualidade Vorbis </th><th>  % do tamanho original </th><th>  Taxa de compress√£o </th></tr></thead><tbody><tr><td>  100 </td><td>  ~ 20% </td><td>  ~ 5: 1 </td></tr><tr><td>  75 </td><td>  ~ 10% </td><td>  ~ 10: 1 </td></tr><tr><td>  50. </td><td>  ~ 7% </td><td>  ~ 14: 1 </td></tr><tr><td>  25 </td><td>  ~ 4% </td><td>  ~ 25: 1 </td></tr><tr><td>  1 </td><td>  ~ 2% </td><td>  ~ 50: 1 </td></tr></tbody></table><br><h3>  Configura√ß√£o da taxa de amostragem </h3><br><ul><li>  Preservar: Usa a taxa de amostragem na qual o som √© gravado. </li><li>  Otimizar: o Unity analisa o som e encontra sua frequ√™ncia m√°xima e, em seguida, usa o teorema de Nyquist para determinar a menor frequ√™ncia de amostragem que pode ser aplicada sem perder essas frequ√™ncias.  Por exemplo, se a frequ√™ncia sonora m√°xima for 10 kHz, a frequ√™ncia de amostragem poder√° ser reduzida sem perda de conte√∫do sonoro para 20 kHz.  Este par√¢metro pode ser usado apenas para PCM / ADPCM. </li><li>  Substituir: se desejar, voc√™ pode definir manualmente uma nova taxa de amostragem para o AudioClip.  Em geral, eu n√£o recomendo fazer isso se voc√™ n√£o entender o que isso levar√°. </li></ul><br><br><h1>  3. Configura√ß√µes recomendadas para PC e consoles </h1><br><table><thead><tr><th>  <sup>Tipo de som</sup> </th><th>  <sup>Carregar em segundo plano</sup> <sup><br></sup> </th><th>  <sup>Tipo de carga</sup> </th><th>  <sup>Pr√©-carregar dados de √°udio</sup> </th><th>  <sup>Formato de compress√£o</sup> </th><th width="20">  <sup>Qualidade</sup> </th><th width="60">  <sup>Configura√ß√£o da taxa de amostragem</sup> </th><th width="180">  <sup>Observa√ß√µes</sup> </th></tr></thead><tbody><tr><td>  <sup>Di√°logos</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Vorbis</sup> </td><td>  <sup>70</sup> </td><td>  <sup>Preservar</sup> </td><td></td></tr><tr><td>  <sup>Loops longos de sons do ambiente</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Transmiss√£o</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Vorbis</sup> </td><td>  <sup>70</sup> </td><td>  <sup>Preservar</sup> </td><td></td></tr><tr><td>  <sup>Sons surround √∫nicos</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Descomprimir na carga</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Vorbis</sup> </td><td>  <sup>70</sup> </td><td>  <sup>Preservar</sup> </td><td></td></tr><tr><td>  <sup>Efeitos de ru√≠do</sup> </td><td>  <sup>N</sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>PCM</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Otimizar</sup> </td><td>  <sup>Se o tom desses sons j√° caiu, a frequ√™ncia de amostragem deve ser mantida.</sup> <sup><br></sup> </td></tr><tr><td>  <sup>Passos</sup> </td><td>  <sup>N</sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>PCM</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Otimizar</sup> </td><td></td></tr><tr><td>  <sup>M√∫sica (m√∫sicas longas)</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Transmiss√£o</sup> </td><td>  <sup>n / a</sup> </td><td>  <sup>Vorbis</sup> </td><td>  <sup>85</sup> </td><td>  <sup>Preservar</sup> </td><td>  <sup>A transmiss√£o pode n√£o ser apropriada se v√°rias faixas de m√∫sica estiverem sendo reproduzidas simultaneamente</sup> </td></tr><tr><td>  <sup>M√∫sica (trechos curtos)</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> </td><td>  <sup>Y</sup> </td><td>  <sup>Vorbis</sup> </td><td>  <sup>85</sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Vozes sem di√°logo</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis</sup> <sup><br></sup> </td><td>  <sup>70</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Efeitos especiais (SFX, curto)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>PCM</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Otimizar</sup> <sup><br></sup> </td><td>  <sup>Se o tom desses sons j√° caiu, a frequ√™ncia de amostragem deve ser mantida.</sup> <sup><br></sup> </td></tr><tr><td>  <sup>Efeitos especiais (longos)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis</sup> <sup><br></sup> </td><td>  <sup>70</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Sons da interface do usu√°rio (longo)</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis</sup> <sup><br></sup> </td><td>  <sup>70</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Sons da interface do usu√°rio (curto)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>PCM</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Otimizar</sup> <sup><br></sup> </td><td></td></tr></tbody></table><br>  Essas recomenda√ß√µes s√£o adequadas para jogos em que existem at√© 10 mil clipes de som.  Para a maioria dos sons, recomendo Descompactar ao carregar, ou seja, na RAM eles ser√£o armazenados como dados de √°udio descompactados.  Se o tamanho total dos arquivos de som descompactados for maior que as limita√ß√µes impostas √† RAM, para os arquivos mais longos, voc√™ poder√° selecionar o par√¢metro Compressed in Memory.  Mas lembre-se de que, a cada lan√ßamento desse som, a carga da CPU aumentar√° um pouco.  <em>Uma vers√£o em PDF dessas tabelas pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a></em> . <br><br><h1>  4. Configura√ß√µes recomendadas para plataformas m√≥veis </h1><br><table><thead><tr><th>  <sup>Tipo de som</sup> <sup><br></sup> </th><th>  <sup>Carregar em segundo plano</sup> <sup><br></sup> </th><th>  <sup>Tipo de carga</sup> <sup><br></sup> </th><th>  <sup>Pr√©-carregar dados de √°udio</sup> <sup><br></sup> </th><th>  <sup>Formato de compress√£o</sup> <sup><br></sup> </th><th width="20">  <sup>Qualidade</sup> <sup><br></sup> </th><th width="60">  <sup>Configura√ß√£o da taxa de amostragem</sup> <sup><br></sup> </th><th width="180">  <sup>Observa√ß√µes</sup> <sup><br></sup> </th></tr></thead><tbody><tr><td>  <sup>Di√°logos</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>50.</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Loops longos de sons do ambiente</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis</sup> <sup><br></sup> </td><td>  <sup>35</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td>  <sup>Para sons sem ru√≠do, use qualidade superior.</sup> <sup><br></sup> </td></tr><tr><td>  <sup>Sons surround √∫nicos</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>50.</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Efeitos de ru√≠do</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>PCM / ADPCM *</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Passos</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td><p>  <sup>PCM / ADPCM *</sup> </p> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Otimizar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>M√∫sica (m√∫sicas longas)</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Transmiss√£o</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Vorbis</sup> <sup><br></sup> </td><td>  <sup>70</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td>  <sup>Veja os avisos de streaming abaixo.</sup> </td></tr><tr><td>  <sup>M√∫sica (trechos curtos)</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>70</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Vozes sem di√°logo</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>50.</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Efeitos especiais (SFX, curto)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td><p>  <sup>PCM / ADPCM *</sup> </p> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Otimizar</sup> <sup><br></sup> </td><td>  <sup>Se o tom desses sons j√° caiu, a frequ√™ncia de amostragem deve ser mantida.</sup> <sup><br></sup> </td></tr><tr><td>  <sup>Efeitos especiais (longos)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>50.</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Sons da interface do usu√°rio (longo)</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Descomprimir na carga</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>Vorbis / MP3</sup> <sup><br></sup> </td><td>  <sup>50.</sup> <sup><br></sup> </td><td>  <sup>Preservar</sup> <sup><br></sup> </td><td></td></tr><tr><td>  <sup>Sons da interface do usu√°rio (curto)</sup> <sup><br></sup> </td><td>  <sup>N</sup> <sup><br></sup> </td><td>  <sup>Comprimido na mem√≥ria</sup> <sup><br></sup> </td><td>  <sup>Y</sup> <sup><br></sup> </td><td>  <sup>PCM / ADPCM *</sup> <sup><br></sup> </td><td>  <sup>n / a</sup> <sup><br></sup> </td><td>  <sup>Otimizar</sup> <sup><br></sup> </td><td></td></tr></tbody></table><br>  * Se voc√™ n√£o sabe o que escolher, PCM ou ADPCM, consulte a descri√ß√£o do formato <em>ADPCM</em> na se√ß√£o <em>"Compreendendo os par√¢metros"</em> acima.  Se ainda n√£o for necess√°rio economizar espa√ßo em disco, recomendo inclinar-se para o PCM. <br><br>  Essas diretrizes funcionar√£o bem na maioria dos jogos para celular;  pelo menos eles podem ser usados ‚Äã‚Äãcomo ponto de partida.  Se voc√™ acha que esses par√¢metros podem n√£o ser adequados para o seu jogo, leia as descri√ß√µes completas dos par√¢metros acima.  <em>Uma vers√£o em PDF dessas tabelas pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .</em> <br><br><h1>  5. Cuidados e observa√ß√µes </h1><br><h3>  Advert√™ncias </h3><br><ul><li>  O streaming simult√¢neo (streaming) de v√°rios arquivos de √°udio representa uma carga bastante pequena nos processadores em PCs e consoles, mas pode criar um problema s√©rio em plataformas m√≥veis (especialmente em dispositivos antigos ou baratos).  Abaixo est√° um gr√°fico das minhas medidas no criador de perfil do Unity.  Ele avalia o impacto da transmiss√£o de v√°rios arquivos de √°udio em v√°rios telefones Samsung Galaxy e no meu PC.  O primeiro gr√°fico mostra 1-12 fontes de √°udio reproduzidas simultaneamente, o segundo - 1-3 fontes em uma escala ampliada. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nf/wp/jz/nfwpjzsg4tjyajvouaedog8yl6i.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jl/xe/ec/jlxeec8gpczolwfcksa_y7wulo0.png"></div><br><ul><li>  Se o som estiver definido como Descompactar ao carregar, o uso da compacta√ß√£o Vorbis reduzir√° seu tamanho em dez vezes no disco, mas n√£o na RAM, onde os dados brutos do PCM ainda ser√£o armazenados.  Se voc√™ definir o par√¢metro Compressed in Memory, poder√° economizar RAM, mas ao custo do tempo da CPU, que descompacta o som em tempo real. </li><li>  Cada tipo de dado, com exce√ß√£o do Streaming, carrega o som na RAM e o deixa l√° at√© a cena ser descarregada.  Se o jogo inteiro for jogado em um grande palco, os sons poder√£o preencher toda a RAM dispon√≠vel.  Pior, a exclus√£o manual de clipes de som da RAM √© extremamente ineficiente e pode levar a uma queda na taxa de quadros, o que pode acontecer se voc√™ atribuir essa tarefa ao coletor de lixo.  Se voc√™ possui muitos dados de √°udio, pode ser necess√°rio executar uma otimiza√ß√£o para reduzir a RAM usada em outras √°reas usando o Unity AssetBundles.  O par√¢metro Preload Audio Data tamb√©m n√£o pode alterar isso, porque determina apenas quando os dados s√£o carregados na RAM e n√£o o que acontece com eles posteriormente. </li><li>  Se a plataforma de destino suportar o formato MP3, observe que o loop autom√°tico n√£o √© realizado, portanto, n√£o recomendo o uso da compacta√ß√£o MP3 para loops atmosf√©ricos e musicais.  Devido √† natureza da codifica√ß√£o MP3, uma parte sem som √© frequentemente adicionada ao final do arquivo para que o n√∫mero total de amostras seja dividido igualmente em "quadros" de 1.152 amostras.  Existem maneiras de criar loops de MP3 sem costura, mas este √© um t√≥pico para outro guia. </li><li>  Quando voc√™ desativa o Pr√©-carregamento de dados de √°udio e ativa o Carregamento em segundo plano, os arquivos grandes n√£o s√£o reproduzidos imediatamente, mas a carga do processador n√£o aumenta.  Isso ocorre porque leva tempo para fazer o download, mas o thread principal nesse caso n√£o est√° ocioso. </li><li>  Ao desativar o Pr√©-carregamento de dados de √°udio e o Carregamento em segundo plano, arquivos grandes na primeira chamada ocupam o fluxo principal.  No entanto, isso n√£o √© um problema ao usar o FMOD, que executa a decodifica√ß√£o em um fluxo separado. </li></ul><br><h3>  Observa√ß√µes </h3><br>  <strong>Formatos de compress√£o:</strong> <br><br><ul><li>  Ao importar arquivos para o Unity, eles sempre devem estar em um formato n√£o compactado, por exemplo, em WAVE (.wav) ou AIFF (.aiff).  Muitos formatos compactados s√£o formatos <strong>com perdas</strong> , ou seja, quando s√£o codificados, as informa√ß√µes s√£o perdidas.  Se voc√™ importar um arquivo compactado, como MP3 ou Vorbis, para o Unity, primeiro o Unity o <em>decodificar√°</em> em um formato n√£o compactado e o <em>codificar√° novamente</em> no formato de sua escolha, mesmo que este seja o mesmo formato a partir do qual voc√™ iniciou.  Isso pode adicionar novos artefatos de compacta√ß√£o, o que geralmente √© indesej√°vel. </li><li>  A documenta√ß√£o do middleware AudioKinetic Wwise tem um excelente artigo sobre v√°rios formatos de compacta√ß√£o de som, seus pr√≥s e contras e plataformas suportadas. </li><li>  Se voc√™ usa o FMOD, ter√° acesso ao formato FADPCM, que √© muito melhor que o antigo formato ADPCM.  No entanto, ele n√£o est√° embutido no Unity. </li><li>  Voc√™ pode usar, por exemplo, MP3 em vez de Vorbis no seu iPhone, porque ele possui um decodificador de MP3 de hardware que permite ao processador n√£o descompactar arquivos MP3 armazenados na RAM ou no disco.  Mas tenha cuidado - isso pode n√£o ser adequado para sons em loop (consulte a se√ß√£o <em>"Cuidados"</em> acima);  Al√©m disso, ele pode decodificar apenas um MP3 por vez.  Se voc√™ precisar descompactar v√°rios MP3s ao mesmo tempo, esta opera√ß√£o ser√° realizada programaticamente, como no caso do Vorbis.  Isso n√£o deve apresentar problemas s√©rios, mas √© importante notar que a decodifica√ß√£o MP3 carrega o processador um pouco mais do que a decodifica√ß√£o Vorbis. </li><li>  Se a plataforma de destino for Playstation 4, o formato ATRAC9 fornece uma taxa de compacta√ß√£o bastante alta com menos carga de CPU que Vorbis ou MP3. </li><li>  Para o Xbox One, o formato XMA da Microsoft √© um bom substituto para o Vorbis ou MP3.      Microsoft     8:1  15:1. </li></ul><br> <strong>:</strong> <br><br><ul><li>            PCM (    )    Compressed in Memory.    Decompress on Load  ,    ,     Streaming. </li><li>   ,  FMOD  Wwise      ,    Unity  (    -         ). </li><li>       ¬´ ¬ª (Foley),    ,      ,    . ,       .   ,        ,          . </li><li>          (Sample Rate), Unity        .  ,        100%,       Optimise Sample Rate,  /        ,       .     ,   ,        . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437474/">https://habr.com/ru/post/pt437474/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437464/index.html">Pre√ßo TypeScript</a></li>
<li><a href="../pt437466/index.html">Byte-machine para o forte (e n√£o apenas) no nativo americano (parte 4)</a></li>
<li><a href="../pt437468/index.html">Retropie Dreamcast</a></li>
<li><a href="../pt437470/index.html">Algumas palavras simples sobre defesa antim√≠sseis</a></li>
<li><a href="../pt437472/index.html">Transi√ß√£o do escrit√≥rio para udalenka: compartilhando experi√™ncias e hacks</a></li>
<li><a href="../pt437476/index.html">Ok Yandex! Onde est√£o nossas metas de alcance?</a></li>
<li><a href="../pt437478/index.html">Que devemos construir uma estrada. Parte 1</a></li>
<li><a href="../pt437480/index.html">4 romances visuais para aprender ingl√™s</a></li>
<li><a href="../pt437482/index.html">Pergunte a Ethan: se a luz se contrai e se expande com o espa√ßo, como podemos detectar ondas gravitacionais?</a></li>
<li><a href="../pt437484/index.html">Como realizei seis entrevistas com sucesso no Vale do Sil√≠cio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>