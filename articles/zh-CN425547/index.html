<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤°ğŸ¼ ğŸš§ ğŸ‘©ğŸ¾â€ğŸ“ Qtï¼šåŸºäºçŸ¢é‡å›¾å½¢ç»˜åˆ¶ ğŸ¤¦ğŸ¾ ğŸ•´ğŸ¿ ğŸ­</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qtä¸ºç¨‹åºå‘˜æä¾›äº†éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯å°éƒ¨ä»¶çš„é›†åˆæ˜¯æœ‰é™çš„ã€‚ å¦‚æœæ²¡æœ‰åˆé€‚çš„é€‰æ‹©ï¼Œåˆ™å¿…é¡»è‡ªå·±ç»˜åˆ¶ä¸€äº›ä¸œè¥¿ã€‚ æœ€ç®€å•çš„æ–¹æ³•-ä½¿ç”¨ç°æˆçš„å›¾ç‰‡-å­˜åœ¨ä¸¥é‡çš„ç¼ºé™·ï¼šéœ€è¦å°†å›¾åƒå­˜å‚¨åœ¨æ–‡ä»¶æˆ–èµ„æºä¸­ï¼Œå¯ä¼¸ç¼©æ€§é—®é¢˜ä»¥åŠå›¾åƒæ ¼å¼çš„å¯ç§»æ¤æ€§ã€‚ ä¸‹é¢æè¿°äº†çŸ¢é‡å›¾å½¢åŸç†çš„ä½¿ç”¨ï¼Œè€Œä¸ä½¿ç”¨å®é™…çš„çŸ¢é‡å›¾åƒã€‚ 
 å‰è¨€ 


 ä¸€åˆ‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qtï¼šåŸºäºçŸ¢é‡å›¾å½¢ç»˜åˆ¶</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425547/"><p><img src="https://habrastorage.org/webt/kp/7v/oi/kp7voi6ve63y4yxzdtthd-dxs80.png" align="right">  Qtä¸ºç¨‹åºå‘˜æä¾›äº†éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯å°éƒ¨ä»¶çš„é›†åˆæ˜¯æœ‰é™çš„ã€‚ å¦‚æœæ²¡æœ‰åˆé€‚çš„é€‰æ‹©ï¼Œåˆ™å¿…é¡»è‡ªå·±ç»˜åˆ¶ä¸€äº›ä¸œè¥¿ã€‚ æœ€ç®€å•çš„æ–¹æ³•-ä½¿ç”¨ç°æˆçš„å›¾ç‰‡-å­˜åœ¨ä¸¥é‡çš„ç¼ºé™·ï¼šéœ€è¦å°†å›¾åƒå­˜å‚¨åœ¨æ–‡ä»¶æˆ–èµ„æºä¸­ï¼Œå¯ä¼¸ç¼©æ€§é—®é¢˜ä»¥åŠå›¾åƒæ ¼å¼çš„å¯ç§»æ¤æ€§ã€‚ ä¸‹é¢æè¿°äº†çŸ¢é‡å›¾å½¢åŸç†çš„ä½¿ç”¨ï¼Œè€Œä¸ä½¿ç”¨å®é™…çš„çŸ¢é‡å›¾åƒã€‚ </p><a name="habracut"></a><br><h2 id="preambula"> å‰è¨€ </h2><br><p> ä¸€åˆ‡å§‹äºè¿™æ ·çš„äº‹å®ï¼Œå³ä¸€æ¬¡éœ€è¦æŒ‡ç¤ºä¸€ä½ç¬¦å·ã€‚ æŸäº›åº”ç”¨ç¨‹åºåœ¨æŸäº›ç«¯å£ä¸Šæ¥æ”¶åˆ°ä¸€äº›æ•°æ®ï¼Œå¿…é¡»æ‹†å¼€åŒ…è£…å¹¶å°†å…¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ åŒæ—¶ä»¥æŸç§æ–¹å¼æ¨¡ä»¿ç†Ÿæ‚‰çš„ä»ªè¡¨æ¿ä¼šå¾ˆå¥½ã€‚ ä¸ºäº†æ˜¾ç¤ºæ•°å­—æ•°æ®ï¼ŒQtæä¾›äº†â€œå¼€ç®±å³ç”¨â€çš„QLCDNumberç±»ï¼Œç±»ä¼¼äºç†Ÿæ‚‰çš„ä¸ƒæ®µæŒ‡ç¤ºå™¨ï¼Œä½†æ˜¯åœ¨å•ä¸ªç¯ä¸­çœ‹ä¸åˆ°æŸäº›ä¸œè¥¿ã€‚ </p><br><p> ä¸ºæ­¤ç›®çš„ä½¿ç”¨æ ‡å¿—ï¼ˆå®ƒä»¬æ˜¯å¤é€‰æ¡†ï¼‰å’Œå¼€å…³ï¼ˆå®ƒä»¬æ˜¯å•é€‰æŒ‰é’®ï¼‰æ˜¯ä¸å¥½çš„ï¼Œä¸‹é¢åˆ—å‡ºäº†åŸå› ï¼š </p><br><ul><li> è¿™åœ¨è¯­ä¹‰ä¸Šæ˜¯é”™è¯¯çš„ã€‚ æŒ‰é’®-å®ƒä»¬æ˜¯æŒ‰é’®ï¼Œç”¨äºç”¨æˆ·è¾“å…¥ï¼Œè€Œä¸æ˜¯å‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚ </li><li> è¿™æ„å‘³ç€ç¬¬äºŒç‚¹ï¼šç”¨æˆ·åŠªåŠ›åœ¨è¿™äº›æŒ‰é’®ä¸Šè¿›è¡Œæˆ³æˆ³ã€‚ å¦‚æœåŒæ—¶ä¿¡æ¯æ›´æ–°ä¸æ˜¯ç‰¹åˆ«å¿«ï¼Œåˆ™æŒ‡ç¤ºå°†éšè—ï¼Œå¹¶ä¸”ç”¨æˆ·å°†æ¶ä½œå‰§åœ°æŠ¥å‘Šç¨‹åºæ•…éšœã€‚ </li><li> å¦‚æœé”å®šæŒ‰é’®ä»¥æŒ‰ä¸‹ï¼ˆsetEnabledï¼ˆfalseï¼‰ï¼‰ï¼Œåˆ™è¯¥æŒ‰é’®å°†å˜ä¸ºéš¾çœ‹çš„ç°è‰²ã€‚ æˆ‘è®°å¾—åœ¨ç‰ˆæœ¬6çš„Delphiä¸­ï¼Œè€³æœµæœ‰äº›å‡å†’ï¼šæ‚¨å¯ä»¥åœ¨é¢æ¿ä¸Šæ”¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œå¹¶ç¦ç”¨é¢æ¿çš„å¯ç”¨æ€§ï¼Œè€Œä¸æ˜¯è¯¥æ ‡å¿—ï¼Œç„¶åè¯¥æ ‡å¿—æ—¢ä¸æ˜¯ç°è‰²ä¹Ÿä¸æ˜¯æ´»åŠ¨çš„ã€‚ è¿™ä¸ªæŠ€å·§åœ¨è¿™é‡Œä¸èµ·ä½œç”¨ã€‚ </li><li> è¿™äº›æŒ‰é’®å…·æœ‰è¾“å…¥ç„¦ç‚¹ã€‚ å› æ­¤ï¼Œå¦‚æœçª—å£ä¸­æœ‰è¾“å…¥å…ƒç´ ï¼Œå¹¶ä¸”ç”¨æˆ·ä½¿ç”¨Tabé”®æ²¿ç€å®ƒä»¬èµ°åŠ¨ï¼Œåˆ™ä»–å°†ä¸å¾—ä¸æ²¿ç€è¾“å‡ºå…ƒç´ èµ°åŠ¨ï¼Œè¿™æ˜¯ä¸ä¾¿ä¸”ä¸‘é™‹çš„ã€‚ </li><li> æœ€åï¼Œè¿™äº›æŒ‰é’®çœ‹ä¸Šå»çœ‹ä¸Šå»å¹¶ä¸ç¾è§‚ï¼Œå°¤å…¶æ˜¯åœ¨ä¸ƒæ®µå¼æŒ‰é’®æ—è¾¹ã€‚ </li></ul><br><p> ç»“è®ºï¼šæ‚¨éœ€è¦è‡ªå·±ç”»ä¸€ä¸ªç¯æ³¡ã€‚ </p><br><h2 id="muki-vybora"> é€‰æ‹©çš„é¢ç²‰ </h2><br><p> é¦–å…ˆï¼Œæˆ‘å¯»æ‰¾ç°æˆçš„è§£å†³æ–¹æ¡ˆã€‚ åœ¨é‚£æ®µæ—¶é—´é‡Œï¼Œå½“æˆ‘ä½¿ç”¨Delphiæ—¶ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å¤§é‡çš„æˆå“é›¶ä»¶ï¼Œè¿™äº›é›¶ä»¶æ—¢æ¥è‡ªä¸¥è‚ƒçš„å…¬å¸ï¼Œä¹Ÿæ¥è‡ªä¸šä½™åˆ¶é€ å•†ã€‚  Qtå¯¹æ­¤æœ‰å¾ˆå¤šéº»çƒ¦ã€‚  QWTæœ‰ä¸€äº›è¦ç´ ï¼Œä½†å¹¶éå¦‚æ­¤ã€‚ æˆ‘æ ¹æœ¬æ²¡æœ‰çœ‹åˆ°ä¸šä½™çˆ±å¥½ã€‚ ä¹Ÿè®¸ï¼Œå¦‚æœæ‚¨åœ¨Githubä¸Šæ­£ç¡®æŒ–æ˜ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘è‡ªå·±å¯èƒ½ä¼šåšå¾—æ›´å¿«ã€‚ </p><br><p> è‡ªåˆ¶çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä½¿ç”¨ä¸¤ä¸ªå›¾åƒæ–‡ä»¶ï¼Œåˆ†åˆ«æ‰“å¼€å’Œå…³é—­ç¯å…‰å›¾åƒã€‚ ä¸å¥½ï¼š </p><br><ul><li> æœ‰å¿…è¦æ‰¾åˆ°ç²¾ç¾çš„å›¾ç‰‡ï¼ˆæˆ–ç»˜ç”»ï¼Œä½†æˆ‘ä¸æ˜¯ç”»å®¶ï¼‰ï¼› </li><li> åŸåˆ™ä¸Šçš„é—®é¢˜æ˜¯ï¼šæ‰“ç»“ä¸å¥½ï¼Œç”šè‡³æ˜¯å›¾ç‰‡ï¼Œç”šè‡³èººåœ¨ä½ çš„è„šä¸‹ï¼› </li><li> å®ƒä»¬å¿…é¡»å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚ æ–‡ä»¶éå¸¸ç³Ÿç³•ï¼šæ„å¤–åˆ é™¤-è€Œä¸”æ²¡æœ‰æŒ‰é’®ã€‚ èµ„æºæ¯”è¾ƒå¥½ï¼Œä½†æ˜¯æˆ‘ä¹Ÿè§‰å¾—ä¸å¯ä»¥ã€‚ </li><li> æ²¡æœ‰å¯æ‰©å±•æ€§ï¼› </li><li> å¯å®šåˆ¶æ€§ï¼ˆä¾‹å¦‚é¢œè‰²ï¼‰åªèƒ½é€šè¿‡æ·»åŠ æ–‡ä»¶æ¥å®ç°ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œèµ„æºå¯†é›†ä¸”åƒµåŒ–ã€‚ </li></ul><br><p> ä»ç¬¬ä¸€ä»¶äº‹å¼€å§‹çš„ç¬¬äºŒä»¶äº‹æ˜¯ä½¿ç”¨çŸ¢é‡å›¾åƒè€Œä¸æ˜¯å›¾ç‰‡ã€‚ è€Œä¸”ï¼ŒQtå¯ä»¥æ¸²æŸ“SVGã€‚ åœ¨è¿™é‡Œæœç´¢å›¾ç‰‡æœ¬èº«å·²ç»æœ‰ç‚¹å®¹æ˜“äº†ï¼šç½‘ç»œä¸­çš„çŸ¢é‡å›¾å½¢è¯¾ç¨‹å¾ˆå¤šï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æ›´å¤šæˆ–æ›´å°‘çš„é€‚åˆè‡ªå·±çš„ä¸œè¥¿å¹¶ä½¿å…¶é€‚åº”æ‚¨çš„éœ€æ±‚ã€‚ ä½†æ˜¯é—®é¢˜ä»ç„¶åœ¨äºå­˜å‚¨å’Œè‡ªå®šä¹‰ï¼Œå¹¶ä¸”æ¸²æŸ“ä¸æ˜¯å…è´¹çš„èµ„æºã€‚ ä¾¿å£«ï¼Œå½“ç„¶ï¼Œä½†ä»ç„¶... </p><br><p> ç¬¬ä¸‰ä¸ªæ˜¯ç¬¬äºŒä¸ªï¼šæ‚¨å¯ä»¥ä½¿ç”¨çŸ¢é‡å›¾å½¢åŸç†ç»˜åˆ¶è‡ªç»˜å›¾åƒï¼ æ–‡æœ¬æ ¼å¼çš„çŸ¢é‡å›¾åƒæ–‡ä»¶æŒ‡ç¤ºç»˜åˆ¶å†…å®¹ä»¥åŠç»˜åˆ¶æ–¹å¼ã€‚ æˆ‘å¯ä»¥ä½¿ç”¨çŸ¢é‡æ•™ç¨‹æŒ‡å®šç›¸åŒçš„ä»£ç ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒQPainterå¯¹è±¡å…·æœ‰å¿…è¦çš„å·¥å…·ï¼šé’¢ç¬”ï¼Œç”»ç¬”ï¼Œæ¸å˜å’Œç»˜åˆ¶å›¾å…ƒï¼Œç”šè‡³è¿˜æœ‰çº¹ç†å¡«å……ã€‚ æ˜¯çš„ï¼Œå·¥å…·è¿œéæ‰€æœ‰ï¼šæ²¡æœ‰é®ç½©ï¼Œæ··åˆæ¨¡å¼ï¼Œä½†ç»å¯¹ä¸éœ€è¦ç…§ç‰‡å†™å®ã€‚ </p><br><p> æˆ‘åœ¨ç½‘ä¸Šå¯»æ‰¾äº†ä¸€äº›ä¾‹å­ã€‚ ä»–ä¸Šäº†ç¬¬ä¸€è¯¾ï¼šâ€œæˆ‘ä»¬å¾ˆå®¹æ˜“ç»˜åˆ¶â€ç½‘ç«™ä¸Šçš„â€œæˆ‘ä»¬åœ¨Inkscapeå›¾å½¢ç¼–è¾‘å™¨ä¸­ç»˜åˆ¶äº†ä¸€ä¸ªæŒ‰é’®â€ã€‚ æœ¬è¯¾ä¸­çš„æŒ‰é’®æ¯”æŒ‰é’®æ›´åƒä¸€ä¸ªç¯æ³¡ï¼Œéå¸¸é€‚åˆæˆ‘ã€‚ æˆ‘æ­£åœ¨è‰ç¨¿ï¼šQtä¸­çš„ä¸€ä¸ªé¡¹ç›®ï¼Œè€Œä¸æ˜¯Inkscapeã€‚ </p><br><h2 id="proba-pera"> ç¾½æ¯›æµ‹è¯• </h2><br><p> æˆ‘æ­£åœ¨åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚ æˆ‘é€‰æ‹©é¡¹ç›®rgbledçš„åç§°ï¼ˆå› ä¸ºæˆ‘æƒ³åšä¸€ä¸ªRGB LEDä¹‹ç±»çš„ä¸œè¥¿ï¼‰åŠå…¶è·¯å¾„ã€‚ æˆ‘é€‰æ‹©åŸºç±»QWidgetå’Œåç§°RgbLedï¼Œä½†æˆ‘æ‹’ç»åˆ›å»ºè¡¨å•æ–‡ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯åŠ¨åçš„é¡¹ç›®å°†åˆ›å»ºä¸€ä¸ªç©ºçª—å£ï¼Œä½†ä»ç„¶æ²¡æœ‰å…´è¶£ã€‚ </p><br><h3 id="podgotovka-k-risovaniyu"> å›¾çº¸å‡†å¤‡ </h3><br><p> æœ‰ä¸€ä¸ªç©ºç™½ã€‚ ç°åœ¨ï¼Œæ‚¨éœ€è¦è·å–ç±»çš„ç§æœ‰æˆå‘˜ï¼Œè¿™å°†ç¡®å®šå›¾ç‰‡çš„å‡ ä½•å½¢çŠ¶ã€‚ çŸ¢é‡å›¾å½¢çš„ä¸€ä¸ªåŸºæœ¬ä¼˜ç‚¹æ˜¯å®ƒçš„å¯ä¼¸ç¼©æ€§ï¼Œå› æ­¤åº”è¯¥æœ‰æœ€å°æ•°é‡çš„å¸¸æ•°ï¼Œå¹¶ä¸”å®ƒä»¬åªèƒ½è®¾ç½®æ¯”ä¾‹ã€‚ å°ºå¯¸å°†åœ¨resizeEventï¼ˆï¼‰äº‹ä»¶ä¸­é‡æ–°è®¡ç®—ï¼Œéœ€è¦é‡æ–°å®šä¹‰ã€‚ </p><br><p> åœ¨æ‰€ä½¿ç”¨çš„å›¾å½¢æ•™ç¨‹ä¸­ï¼Œå°ºå¯¸éšå³ä»¥åƒç´ ä¸ºå•ä½æŒ‡å®šã€‚ æˆ‘éœ€è¦äº‹å…ˆç¡®å®šæˆ‘å°†ä½¿ç”¨ä»€ä¹ˆä»¥åŠå¦‚ä½•é‡æ–°è®¡æ•°ã€‚ </p><br><p> ç»˜åˆ¶çš„å›¾ç‰‡åŒ…å«ä»¥ä¸‹å…ƒç´ ï¼š </p><br><ul><li> å¤–åœˆï¼ˆå‘å¤–å€¾æ–œï¼Œéƒ¨åˆ†å‡¸è¾¹ï¼‰ </li><li> å†…åœˆï¼ˆå‘å†…å€¾æ–œï¼‰ </li><li>  LEDç¯ç½©ï¼Œâ€œç»ç’ƒâ€ </li><li> ç»ç’ƒè¾¹ç¼˜ä¸Šçš„é˜´å½± </li><li> æœ€é«˜äº®ç‚¹ </li><li> åº•éƒ¨è€€æ–‘ </li></ul><br><p> åŒå¿ƒåœ†ï¼Œå³é™¤çœ©å…‰ä»¥å¤–çš„æ‰€æœ‰ä¸œè¥¿ï¼Œéƒ½ç”±ä¸­å¿ƒçš„ä½ç½®å’ŒåŠå¾„ç¡®å®šã€‚ çœ©å…‰ç”±ä¸­å¿ƒï¼Œå®½åº¦å’Œé«˜åº¦å†³å®šï¼ŒXçœ©å…‰ä¸­å¿ƒçš„ä½ç½®ä¸æ•´ä¸ªå›¾ç‰‡Xä¸­å¿ƒçš„ä½ç½®ä¸€è‡´ã€‚ </p><br><p> è¦è®¡ç®—å‡ ä½•å…ƒç´ ï¼Œæ‚¨éœ€è¦ç¡®å®šå“ªä¸ªæ›´å¤§-å®½åº¦æˆ–é«˜åº¦ï¼Œå› ä¸ºç¯æ³¡æ˜¯åœ†å½¢çš„ï¼Œå¹¶ä¸”å¿…é¡»é€‚åˆè¾¹é•¿ç­‰äºä¸¤ä¸ªç»´åº¦ä¸­è¾ƒå°è€…çš„æ­£æ–¹å½¢ã€‚ å› æ­¤ï¼Œæˆ‘å°†ç›¸åº”çš„ç§æœ‰æˆå‘˜æ·»åŠ åˆ°å¤´æ–‡ä»¶ä¸­ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minDim; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> half; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerX; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> centerY; QRect drawingRect; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> outerBorderWidth; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> innerBorderWidth; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> outerBorderRadius; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> innerBorderRadius; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> topReflexY; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bottomReflexY; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> topReflexWidth; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> topReflexHeight; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bottomReflexWidth; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bottomReflexHeight;</code> </pre> </div></div><br><p> ç„¶åï¼Œæˆ‘é‡æ–°å®šä¹‰äº†è°ƒæ•´çª—å£å°éƒ¨ä»¶å¤§å°æ—¶è°ƒç”¨çš„å—ä¿æŠ¤å‡½æ•°ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: void resizeEvent(QResizeEvent *event); void RgbLed::resizeEvent(QResizeEvent *event) { QWidget::resizeEvent(event); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;height = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;size().height(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;width = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;size().width(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;minDim = (height &gt; width) ? width : height; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;half = minDim / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;centerX = width / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;centerY = height / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;outerBorderWidth = minDim / <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;innerBorderWidth = minDim / <span class="hljs-number"><span class="hljs-number">14</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;outerBorderRadius = half - outerBorderWidth; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;innerBorderRadius = half - (outerBorderWidth + innerBorderWidth); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;topReflexY = centerY - (half - outerBorderWidth - innerBorderWidth) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;bottomReflexY = centerY + (half - outerBorderWidth - innerBorderWidth) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;topReflexHeight = half / <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;topReflexWidth = half / <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;bottomReflexHeight = half / <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;bottomReflexWidth = half / <span class="hljs-number"><span class="hljs-number">3</span></span>; drawingRect.setTop((height - minDim) / <span class="hljs-number"><span class="hljs-number">2</span></span>); drawingRect.setLeft((width - minDim) / <span class="hljs-number"><span class="hljs-number">2</span></span>); drawingRect.setHeight(minDim); drawingRect.setWidth(minDim); }</code> </pre> </div></div><br><p> åœ¨æ­¤ï¼Œè®¡ç®—å‡ºç¯æ³¡æ‰€åœ¨çš„æ­£æ–¹å½¢çš„ä¸€é¢ï¼Œè¯¥æ­£æ–¹å½¢çš„ä¸­å¿ƒï¼Œè¾¹ç¼˜çš„åŠå¾„å æ®æœ€å¤§å¯èƒ½é¢ç§¯ï¼Œè¾¹ç¼˜çš„å®½åº¦ï¼Œè¾¹ç¼˜çš„å¤–éƒ¨åº”ä¸ºç›´å¾„çš„1/10å’Œå†…éƒ¨çš„1.14ã€‚ ç„¶åè®¡ç®—ä½äºä¸Šï¼Œä¸‹åŠå¾„ä¸­é—´çš„çœ©å…‰çš„ä½ç½®ï¼Œç”¨çœ¼ç›é€‰æ‹©å®½åº¦å’Œé«˜åº¦ã€‚ </p><br><p> å¦å¤–ï¼Œåœ¨å—ä¿æŠ¤çš„å­—æ®µä¸­ï¼Œæˆ‘å°†ç«‹å³æ·»åŠ ä¸€ç»„è¦ä½¿ç”¨çš„é¢œè‰²ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> ledColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> lightColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> shadowColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> ringShadowDarkColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> ringShadowMedColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> ringShadowLightColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> topReflexUpColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> topReflexDownColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> bottomReflexCenterColor; <span class="hljs-attribute"><span class="hljs-attribute">QColor</span></span> bottomReflexSideColor;</code> </pre> </div></div><br><p> é¡¾åæ€ä¹‰ï¼Œè¿™äº›æ˜¯ç¯æ³¡çš„é¢œè‰²ï¼Œé˜´å½±çš„äº®éƒ¨åˆ†ï¼Œé˜´å½±çš„æš—éƒ¨åˆ†ï¼Œç¯æ³¡å‘¨å›´çš„ç¯å½¢é˜´å½±çš„ä¸‰ç§é¢œè‰²ä»¥åŠçœ©å…‰æ¸å˜çš„é¢œè‰²ã€‚ </p><br><p> é¢œè‰²åº”è¯¥è¢«åˆå§‹åŒ–ï¼Œä»¥ä¾¿æˆ‘è¡¥å……è®¾è®¡å¸ˆçš„ä½œå“ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs php">RgbLed::RgbLed(QWidget *<span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>) : QWidget(<span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>), ledColor(Qt::green), lightColor(QColor(<span class="hljs-number"><span class="hljs-number">0xE0</span></span>, <span class="hljs-number"><span class="hljs-number">0xE0</span></span>, <span class="hljs-number"><span class="hljs-number">0xE0</span></span>)), shadowColor(QColor(<span class="hljs-number"><span class="hljs-number">0x70</span></span>, <span class="hljs-number"><span class="hljs-number">0x70</span></span>, <span class="hljs-number"><span class="hljs-number">0x70</span></span>)), ringShadowDarkColor(QColor(<span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>)), ringShadowMedColor(QColor(<span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0x50</span></span>, <span class="hljs-number"><span class="hljs-number">0x20</span></span>)), ringShadowLightColor(QColor(<span class="hljs-number"><span class="hljs-number">0xEE</span></span>, <span class="hljs-number"><span class="hljs-number">0xEE</span></span>, <span class="hljs-number"><span class="hljs-number">0xEE</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>)), topReflexUpColor(QColor(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xA0</span></span>)), topReflexDownColor(QColor(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>)), bottomReflexCenterColor(QColor(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>)), bottomReflexSideColor(QColor(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0x70</span></span>)) { }</code> </pre> </div></div><br><p> åŒæ ·ï¼Œä¸è¦å¿˜è®°åœ¨å¤´æ–‡ä»¶ä¸­æ’å…¥ç»˜å›¾æ—¶å°†éœ€è¦çš„ç±»çš„åŒ…å«ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QPainter&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QPen&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QBrush&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QColor&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QGradient&gt;</span></span></span></span></code> </pre> </div></div><br><p> è¯¥ä»£ç å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œä½†æ˜¯çª—å£å°éƒ¨ä»¶çª—å£ä¸­æ²¡æœ‰ä»»ä½•æ›´æ”¹ã€‚ æ˜¯æ—¶å€™å¼€å§‹ç»˜å›¾äº†ã€‚ </p><br><h3 id="risovanie"> ç”»å›¾ </h3><br><p> æˆ‘è¿›å…¥ä¸€ä¸ªå°é—­çš„åŠŸèƒ½ </p><br><pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawLed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QColor &amp;color</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p> å¹¶é‡æ–°å®šä¹‰å—ä¿æŠ¤çš„åŠŸèƒ½ </p><br><pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paintEvent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">QPaintEvent *</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p> é‡ç»˜äº‹ä»¶å°†å¯¼è‡´å®é™…ç»˜åˆ¶ï¼Œâ€œç»ç’ƒâ€çš„é¢œè‰²ä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¯¥ç»˜åˆ¶ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> RgbLed::paintEvent(QPaintEvent *event) { QWidget::paintEvent(event); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;drawLed(ledColor); }</code> </pre> </div></div><br><p> åˆ°ç›®å‰ä¸ºæ­¢ã€‚ ç„¶åæˆ‘ä»¬å¼€å§‹é€æ­¥å¡«å†™ç»˜å›¾åŠŸèƒ½ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> RgbLed::drawLed(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QColor &amp;color) { <span class="hljs-function"><span class="hljs-function">QPainter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; QPen pen; pen.setStyle(Qt::NoPen); p.setPen(pen); }</code> </pre> </div></div><br><p> é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªè‰ºæœ¯å®¶å¯¹è±¡ï¼Œå°†å…¶ç”¨äºç»˜å›¾ã€‚ ç„¶ååˆ›å»ºäº†éœ€è¦çš„é“…ç¬”ï¼Œå› æ­¤æ²¡æœ‰é“…ç¬”ï¼šåœ¨æ­¤å›¾åƒä¸­ï¼Œä¸ä»…ä¸éœ€è¦è½®å»“ç¬”ç”»ï¼Œè€Œä¸”æ ¹æœ¬ä¸éœ€è¦ã€‚ </p><br><p> ç„¶åï¼ŒæŒ‰ç…§çŸ¢é‡å›¾å½¢ä¸Šçš„è¯¾ç¨‹å¤§è‡´ç»˜åˆ¶ç¬¬ä¸€ä¸ªåœ†ï¼šä¸€ä¸ªå¤§çš„åœ†ï¼Œä¸Šé¢å¡«å……äº†å¾„å‘æ¸å˜ã€‚ æ¸å˜åœ¨é¡¶éƒ¨ï¼ˆè€Œä¸æ˜¯åœ¨è¾¹ç¼˜ï¼‰å¤„æœ‰ä¸€ä¸ªæµ…é”šç‚¹ï¼Œåœ¨åº•éƒ¨ï¼ˆä½†ä¸æ˜¯åœ¨è¾¹ç¼˜ï¼‰å¤„æœ‰ä¸€ä¸ªæš—é”šç‚¹ã€‚ æ ¹æ®æ¸å˜åˆ›å»ºç”»ç¬”ï¼Œç”¨æ­¤ç”»ç¬”ç”»å®¶ç»˜åˆ¶ä¸€ä¸ªåœ†ï¼ˆå³ï¼Œåˆ»åœ¨æ­£æ–¹å½¢ä¸Šçš„æ¤­åœ†ï¼‰ã€‚ åŸæ¥æ˜¯è¿™æ ·çš„ä»£ç  </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs lisp"> QRadialGradient outerRingGradient(<span class="hljs-name"><span class="hljs-name">QPoint</span></span>(<span class="hljs-name"><span class="hljs-name">centerX</span></span>, centerY - outerBorderRadius - (<span class="hljs-name"><span class="hljs-name">outerBorderWidth</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>)), minDim - (<span class="hljs-name"><span class="hljs-name">outerBorderWidth</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>))<span class="hljs-comment"><span class="hljs-comment">; outerRingGradient.setColorAt(0, lightColor); outerRingGradient.setColorAt(1, shadowColor); QBrush outerRingBrush(outerRingGradient); p.setBrush(outerRingBrush); p.drawEllipse(this-&gt;drawingRect); qDebug() &lt;&lt; "draw";</span></span></code> </pre> </div></div><br><p> ç¯å¢ƒå¼ºè°ƒäº†drawLedå‡½æ•°çš„colorå‚æ•°ï¼Œå› ä¸ºæœªä½¿ç”¨å®ƒã€‚ è®©ä»–å®½å®¹ï¼Œè¿˜ä¸éœ€è¦ä»–ï¼Œä½†æ˜¯ä»–å¾ˆå¿«å°±ä¼šéœ€è¦å®ƒã€‚ å¯åŠ¨çš„é¡¹ç›®å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/tr/d5/w4/trd5w4j8fbipcfgzjzhgydbxln8.png"></p></div></div><br><p> æ·»åŠ å¦ä¸€æ‰¹ä»£ç ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs lisp"> QRadialGradient innerRingGradient(<span class="hljs-name"><span class="hljs-name">QPoint</span></span>(<span class="hljs-name"><span class="hljs-name">centerX</span></span>, centerY + innerBorderRadius + (<span class="hljs-name"><span class="hljs-name">innerBorderWidth</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>)), minDim - (<span class="hljs-name"><span class="hljs-name">innerBorderWidth</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>))<span class="hljs-comment"><span class="hljs-comment">; innerRingGradient.setColorAt(0, lightColor); innerRingGradient.setColorAt(1, shadowColor); QBrush innerRingBrush(innerRingGradient); p.setBrush(innerRingBrush); p.drawEllipse(QPoint(centerX, centerY), outerBorderRadius, outerBorderRadius);</span></span></code> </pre> </div></div><br><p> å‡ ä¹ç›¸åŒçš„åœ†åœˆï¼Œä½†å°ºå¯¸è¾ƒå°ä¸”å€’ç½®ã€‚ æˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹å›¾ç‰‡ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/sl/qa/-p/slqa-p1yxoytsvbaw86hsqniexw.png"></p></div></div><br><p> æœ€åï¼Œæ‚¨éœ€è¦ç»ç’ƒçš„é¢œè‰²ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">QColor</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dark</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">color</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.darker</span></span>(120)); <span class="hljs-selector-tag"><span class="hljs-selector-tag">QRadialGradient</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">glassGradient</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">QPoint</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">centerX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">centerY</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">glassGradient</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setColorAt</span></span>(0, <span class="hljs-selector-tag"><span class="hljs-selector-tag">color</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">glassGradient</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setColorAt</span></span>(1, <span class="hljs-selector-tag"><span class="hljs-selector-tag">dark</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">QBrush</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">glassBrush</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">glassGradient</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setBrush</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">glassBrush</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.drawEllipse</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">QPoint</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">centerX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">centerY</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>);</code> </pre> </div></div><br><p> åœ¨è¿™é‡Œï¼Œä½¿ç”¨é€å°„è‰²çš„è¾ƒæš—åŠŸèƒ½ï¼Œå¯ä»¥è·å¾—ç›¸åŒçš„é¢œè‰²ï¼Œä½†è¾ƒæš—ï¼Œä»¥ç»„ç»‡æ¸å˜ã€‚ è‚‰çœ¼é€‰æ‹©çš„ç³»æ•°120ã€‚ ç»“æœå¦‚ä¸‹ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/hs/wq/dl/hswqdl5hkf_fxabxawraf8alsgq.png"></p></div></div><br><p> åœ¨ç»ç’ƒå‘¨å›´æ·»åŠ ç¯å½¢é˜´å½±ã€‚ è¿™æ˜¯åœ¨å…³äºçŸ¢é‡å›¾å½¢çš„è¯¾ç¨‹ä¸­å®Œæˆçš„ï¼Œè¿™åº”è¯¥å¢åŠ ä½“ç§¯å’ŒçœŸå®æ„Ÿï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">QRadialGradient</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowGradient</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">QPoint</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">centerX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">centerY</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowGradient</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setColorAt</span></span>(0, <span class="hljs-selector-tag"><span class="hljs-selector-tag">ringShadowLightColor</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowGradient</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setColorAt</span></span>(0<span class="hljs-selector-class"><span class="hljs-selector-class">.85</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">ringShadowMedColor</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowGradient</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setColorAt</span></span>(1, <span class="hljs-selector-tag"><span class="hljs-selector-tag">ringShadowDarkColor</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">QBrush</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowBrush</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowGradient</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setBrush</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">shadowBrush</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.drawEllipse</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">QPoint</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">centerX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">centerY</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">innerBorderRadius</span></span>);</code> </pre> </div></div><br><p> æœ‰ä¸€ä¸ªä¸‰æ­¥æ¸å˜ï¼Œå› æ­¤é˜´å½±çš„è¾¹ç¼˜å˜ç²—ï¼Œå‘ä¸­å¿ƒå˜æµ…ã€‚ åŸæ¥æ˜¯è¿™æ ·çš„ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ga/0n/wj/ga0nwjnp8vjh6yupym3d_yyo5lc.png"></p></div></div><br><p> ä¸€æ¬¡æ·»åŠ é«˜å…‰ã€‚ ä¸ä¸‹éƒ¨ï¼ˆå’Œæ‰€æœ‰å…¶ä»–å…ƒç´ ï¼‰ä¸åŒï¼Œä¸Šéƒ¨é«˜å…‰æ˜¯çº¿æ€§æ¸å˜ã€‚ æˆ‘çš„ç”»å®¶å¾ˆä¸€èˆ¬ï¼Œæˆ‘è°¨ä»£è¡¨æœ¬è¯¾çš„ä½œè€…ã€‚ ä¹Ÿè®¸æœ‰äº›é“ç†ï¼Œæˆ‘ä¸ä¼šå°è¯•ä¸åŒç±»å‹çš„æ¸å˜ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs lisp"> QLinearGradient topTeflexGradient(<span class="hljs-name"><span class="hljs-name">QPoint</span></span>(<span class="hljs-name"><span class="hljs-name">centerX</span></span>, (<span class="hljs-name"><span class="hljs-name">innerBorderWidth</span></span> + outerBorderWidth)), QPoint(<span class="hljs-name"><span class="hljs-name">centerX</span></span>, centerY))<span class="hljs-comment"><span class="hljs-comment">; topTeflexGradient.setColorAt(0, topReflexUpColor); topTeflexGradient.setColorAt(1, topReflexDownColor); QBrush topReflexbrush(topTeflexGradient); p.setBrush(topReflexbrush); p.drawEllipse(QPoint(centerX, topReflexY), topReflexWidth, topReflexHeight); QRadialGradient bottomReflexGradient(QPoint(centerX, bottomReflexY + (bottomReflexHeight / 2)), bottomReflexWidth); bottomReflexGradient.setColorAt(0, bottomReflexSideColor); bottomReflexGradient.setColorAt(1, bottomReflexCenterColor); QBrush bottomReflexBrush(bottomReflexGradient); p.setBrush(bottomReflexBrush); p.drawEllipse(QPoint(centerX, bottomReflexY), bottomReflexWidth, bottomReflexHeight);</span></span></code> </pre> </div></div><br><p> å®é™…ä¸Šï¼Œå°±åƒKDPVä¸€æ ·ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç°æˆçš„ç¯æ³¡ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/99/xx/bm/99xxbmwsmy1r6fo-dht2pif7wdg.png"></p></div></div><br><p> ç»ç’ƒçš„çœ©å…‰å’Œå‡¸èµ·çš„å¯è§æ€§å—é¢œè‰²ï¼ˆæˆ–å¤šæ·±ï¼‰çš„å½±å“ã€‚ æ ¹æ®é»‘æš—æƒ…å†µï¼Œåœ¨æš—åŠŸèƒ½ä¸­å¢åŠ çœ©å…‰çš„äº®åº¦å’Œè°ƒå…‰ç³»æ•°çš„è°ƒæ•´å¯èƒ½å¾ˆæœ‰æ„ä¹‰ï¼Œä½†è¿™æ˜¯å®Œç¾ä¸»ä¹‰ã€‚ </p><br><p> ä¸‹é¢æ˜¯åœ¨ç¨‹åºçª—å£ä¸­ä½¿ç”¨çš„ç¤ºä¾‹ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ç”»å›¾</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/xy/tt/ix/xyttix1vqiabybl7-no-9d2dgk8.png"></p></div></div><br><h3 id="balovstvo"> å‘µæŠ¤ </h3><br><p> ä¸ºäº†å¨±ä¹ï¼Œæ‚¨å¯ä»¥ç©èŠ±ã€‚ ä¾‹å¦‚ï¼Œè¦†ç›–å—ä¿æŠ¤çš„é¼ æ ‡å•å‡»äº‹ä»¶ </p><br><pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mousePressEvent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">QMouseEvent *</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p> è¿™æ ·ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs axapta"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> RgbLed::mousePressEvent(QMouseEvent *event) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event-&gt;button() == Qt::LeftButton) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: ledColor = Qt::red; <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>++; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: ledColor = Qt::green; <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>++; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: ledColor = Qt::blue; <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>++; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: ledColor = Qt::gray; <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>++; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: ledColor = QColor(<span class="hljs-number"><span class="hljs-number">220</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;repaint(); } QWidget::mousePressEvent(event); }</code> </pre> </div></div><br><p> ä¸è¦å¿˜è®°å°†é¼ æ ‡äº‹ä»¶æ·»åŠ åˆ°æ ‡é¢˜ä¸­ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QMouseEvent&gt;</span></span></span></span></code> </pre> <br><p> ç°åœ¨ï¼Œåœ¨ç»„ä»¶ä¸Šå•å‡»é¼ æ ‡å°†åˆ‡æ¢ç¯æ³¡çš„é¢œè‰²ï¼šçº¢è‰²ï¼Œç»¿è‰²ï¼Œè“è‰²ï¼Œç°è‰²ä»¥åŠç¯æ³¡å‘å‡ºçš„ä¸€äº›éšæœºå…‰ã€‚ </p><br><h2 id="epilog"> ç»“è¯­ </h2><br><p> è‡³äºç»˜å›¾ï¼Œä»…æ­¤è€Œå·²ã€‚ å¹¶ä¸”å°éƒ¨ä»¶åº”æ·»åŠ åŠŸèƒ½ã€‚ åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ äº†ä¸€ä¸ªå¸ƒå°”å­—æ®µâ€œä½¿ç”¨çŠ¶æ€â€ï¼Œå¦ä¸€ä¸ªå¸ƒå°”å­—æ®µå®šä¹‰äº†çŠ¶æ€â€œå¼€â€æˆ–â€œå…³â€ä»¥åŠè¿™äº›çŠ¶æ€çš„é»˜è®¤é¢œè‰²ï¼Œä»¥åŠæ‰€æœ‰è¿™äº›çš„å¼€æ”¾å¼å¸æ°”å‰‚å’Œå¸æ°”å‰‚ã€‚ paintEventï¼ˆï¼‰å‡½æ•°é€‰æ‹©ä¼ é€’ç»™drawLedï¼ˆï¼‰çš„é¢œè‰²ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ï¼Œæ‚¨å¯ä»¥æ ¹æ®äº‹ä»¶å…³é—­çŠ¶æ€çš„ä½¿ç”¨å¹¶å°†ç¯æ³¡è®¾ç½®ä¸ºä»»ä½•é¢œè‰²ï¼Œæˆ–è€…æ ¹æ®äº‹ä»¶æ‰“å¼€çŠ¶æ€å¹¶æ‰“å¼€æˆ–å…³é—­ç¯æ³¡ã€‚è¿ä½“ ä¸å¿…é¡»è¿›è¡Œç›‘æ§çš„ä¿¡å·æ˜¯å®ƒã€‚ </p><br><p> ä½¿ç”¨mousePressEventæ¼”ç¤ºäº†ä¸ä»…å¯ä»¥ä½¿å°éƒ¨ä»¶æˆä¸ºæŒ‡ç¤ºå™¨ï¼Œè€Œä¸”è¿˜å¯ä»¥ä½¿å…¶æˆä¸ºæŒ‰é’®ï¼Œä»è€Œä½¿å…¶å¯ä»¥è¢«æŒ‰ä¸‹ï¼Œé‡Šæ”¾ï¼Œå¼¯æ›²ï¼Œæ‰­æ›²ï¼Œç€è‰²ä»¥åŠä»»ä½•æ‚¨æƒ³è¦çš„æŒ‡å‘ï¼Œå•å‡»å’Œé‡Šæ”¾äº‹ä»¶ã€‚ </p><br><p> ä½†è¿™å·²ä¸å†æ˜¯æ ¹æœ¬ã€‚ ç›®çš„æ˜¯æ˜¾ç¤ºåœ¨ç»˜åˆ¶è‡ªå·±çš„çª—å£å°éƒ¨ä»¶æ—¶å¯ä»¥åœ¨ä½•å¤„æ‰®æ¼”è§’è‰²æ¨¡å‹ï¼Œä»¥åŠå¦‚ä½•åœ¨èµ„æºæˆ–æ–‡ä»¶ä¸­æ— éœ€ä½¿ç”¨å…‰æ …æˆ–çŸ¢é‡å›¾åƒçš„æƒ…å†µä¸‹è½»æ¾å®ç°æ­¤ç»˜åˆ¶ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN425547/">https://habr.com/ru/post/zh-CN425547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN425531/index.html">æ¶²åˆ¶åŠ¨å†·å´ã€‚ ç³»ç»Ÿå¼€å‘é€‰é¡¹</a></li>
<li><a href="../zh-CN425533/index.html">å¦‚ä½•åœ¨äº‘ä¸­å·¥ä½œï¼šä»æ£€æŸ¥æ•°æ®ä¸­å¿ƒçš„å¯é æ€§åˆ°ç®¡ç†è™šæ‹ŸåŸºç¡€æ¶æ„</a></li>
<li><a href="../zh-CN425537/index.html">å¦‚ä½•å°†Javaï¼ŒJså’Œå›¾å½¢ä¸è‰ºæœ¯ç»“åˆèµ·æ¥ï¼Œæˆ–å¦‚ä½•åˆ›å»ºäº¤äº’å¼å‰§é™¢çš„æ•…äº‹</a></li>
<li><a href="../zh-CN425541/index.html">å¦‚ä½•å¿«é€Ÿä¸”æ²¡æœ‰ä¸å¿…è¦çš„èŠ¯ç‰‡æ¥è§„é¿HTU21ä¼ æ„Ÿå™¨çš„åœ°å€ä¸å˜æ€§</a></li>
<li><a href="../zh-CN425545/index.html">æ‚¨åº”è¯¥è€ƒè™‘å‡ ä¸ªå°æ—¶çš„ç»ƒä¹ ã€‚</a></li>
<li><a href="../zh-CN425549/index.html">åœ¨å¯¹ä¸­å›½é—´è°èŠ¯ç‰‡éƒ¨ç½²è¿›è¡Œè°ƒæŸ¥åï¼ŒSupermicroè‚¡ç¥¨æš´è·Œ</a></li>
<li><a href="../zh-CN425551/index.html">è°åº”è¯¥ä»å‡ºå”®AIåˆ›ä½œçš„è‰ºæœ¯å“ä¸­è·å¾—æ”¶ç›Šï¼Ÿ</a></li>
<li><a href="../zh-CN425553/index.html">åŸºç£å±±ä¼¯çˆµèƒ½å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæœ‰å…³ç½‘ç»œå®‰å…¨çš„ä¿¡æ¯</a></li>
<li><a href="../zh-CN425555/index.html">Charles Nutteråœ¨jug.msk.ruä¸Šæ¢è®¨äº†JVMä¸­çš„åŠ¨æ€è¯­è¨€</a></li>
<li><a href="../zh-CN425557/index.html">éº»çœç†å·¥å­¦é™¢çš„è¯¾ç¨‹â€œè®¡ç®—æœºç³»ç»Ÿå®‰å…¨â€ã€‚ ç¬¬10è¯¾ï¼šç¬¦å·æ‰§è¡Œï¼Œç¬¬1éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>