<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¨ üé∂ üéß Curso MIT "Seguran√ßa de sistemas de computadores". Aula 12: Seguran√ßa de Rede, Parte 3 üëÉüèª üë®üèø‚Äçüç≥ üé∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Aula 12: Seguran√ßa de Rede, Parte 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427093/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: ‚ÄúSeguran√ßa de aplicativos da Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: ‚ÄúExecu√ß√£o Simb√≥lica‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: ‚ÄúLinguagem de Programa√ß√£o Ur / Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 12: Seguran√ßa de rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Aluno:</b> existe algum tipo de assinatura para dom√≠nios de n√≠vel superior inexistentes? <br><br>  <b>Professor:</b> Eu acho que sim.  Um dom√≠nio de ponto √© apenas outro dom√≠nio e implementa o mesmo mecanismo.  Atualmente, os dom√≠nios "ponto" e "ponto.com" usam a SEC DNS, e existem todos esses registros que dizem, por exemplo, que .in √© o nome de dom√≠nio que existe e o nome "ponto" tamb√©m existe, e n√£o h√° mais nada entre eles.  Portanto, nos dom√≠nios de n√≠vel superior, todas essas coisas est√£o presentes. <br><br><img src="https://habrastorage.org/webt/2u/gs/44/2ugs448d0swpqq4xpdcq7qrzo5e.jpeg"><br><br>  <b>Aluno:</b> al√©m do perigo de ataques de DoS, por que nos preocupamos tanto com a repeti√ß√£o de nomes de dom√≠nio no mit.edu? <br><br>  <b>Professor:</b> n√£o sei ao certo.  De qualquer forma, o AFS possui um arquivo de texto que lista todos esses nomes de dom√≠nio do MIT.  Mas acho que, em geral, algumas empresas se sentem um pouco estranhas nesse sentido, porque geralmente t√™m nomes internos que est√£o no DNS e que n√£o podem ser dados a pessoas de fora.  Penso que, de fato, esta √© uma √°rea confusa que nunca foi formalizada e que n√£o explica exatamente o que garante que os usu√°rios do DNS ofere√ßam.  Geralmente, as pessoas assumem que, se existir um nome confidencial, no caso do DNS, ele n√£o ser√° divulgado. <br><br>  Penso que este √© outro local em que este sistema n√£o possui uma especifica√ß√£o clara em termos do que deve ou n√£o fornecer. <br><br>  <b>Aluno: √©</b> poss√≠vel definir o per√≠odo de validade de uma assinatura destacando-a de alguma forma? <br><br>  <b>Professor:</b> essas coisas t√™m uma data de validade, por exemplo, voc√™ pode assinar que esse conjunto de nomes √© v√°lido por uma semana e, em seguida, os clientes, se tiverem um rel√≥gio sincronizado, podem rejeitar as mensagens antigas assinadas. <br><br>  Portanto, podemos assumir que discutimos ataques adivinhando os n√∫meros de sequ√™ncia TCP SYN.  Outra quest√£o interessante sobre o TCP √© o ataque DDoS, que explora o fato de o servidor estar em algum estado.  Se voc√™ observar esse handshake, que foi desenhado anteriormente no quadro, ver√° que, quando o cliente estabelece uma conex√£o com o servidor, o servidor deve lembrar o n√∫mero de s√©rie do cliente SNc.  Portanto, o servidor deve suportar alguma estrutura de dados em um bloco separado, o que mostra que esse n√∫mero de sequ√™ncia √© usado para esta conex√£o. <br><br><img src="https://habrastorage.org/webt/lf/_t/al/lf_tald10iu_psgepzhjfretcr0.jpeg"><br><br>  Este √© um tipo de tabela em que o n√∫mero de sequ√™ncia SN √© armazenado e que a conex√£o cliente-servidor possui o n√∫mero de sequ√™ncia SNc.  O motivo pelo qual o servidor deve manter essa tabela √© porque ele precisa descobrir qual o n√∫mero de sequ√™ncia SNc correto deve levar posteriormente, por exemplo, SNc + 1.  Al√©m disso, o servidor tamb√©m precisa armazenar n√∫meros de SNs, que s√£o muito mais importantes, pois mostram ao servidor que a conex√£o √© estabelecida com o "cara certo". <br><br>  O problema √© que esta tabela n√£o possui uma borda real.  Dessa forma, voc√™ pode obter pacotes de alguma m√°quina sem saber quem os est√° enviando.  Voc√™ acaba de obter um pacote que se parece com C-&gt; S com um endere√ßo de origem que afirma ser C. Para potencialmente aceitar essa conex√£o desse endere√ßo IP, voc√™ deve criar uma entrada na tabela.  Al√©m disso, esses registros existem por um longo tempo, porque, talvez, algu√©m estabele√ßa uma conex√£o com voc√™ a partir de um local muito distante e, ao mesmo tempo, muitos pacotes sejam perdidos.  Na pior das hip√≥teses, pode levar, por exemplo, um minuto at√© que algu√©m termine esse handshake TCP.  Portanto, voc√™ deve manter esse estado na pilha TCP por um tempo relativamente longo e n√£o h√° como adivinhar se ser√° v√°lido ou n√£o. <br><br>  Portanto, o ataque de DoS mais comum contra a maioria das pilhas TCP criadas pelas pessoas √© a transmiss√£o simples de um grande n√∫mero de pacotes.  Se eu sou um invasor, basta enviar um grande n√∫mero de pacotes SYN para um servidor espec√≠fico e causar o estouro dessa tabela. <br><br>  O problema √© que, na melhor das hip√≥teses, um invasor simplesmente usa o mesmo endere√ßo IP de origem.  Nesse caso, voc√™ pode simplesmente dizer que cada cliente tem permiss√£o apenas para duas entradas, ou algo assim.  E ent√£o o invasor pode usar no m√°ximo 2 duas entradas na tabela. <br><br>  O problema, √© claro, √© que um invasor pode falsificar endere√ßos IP de clientes e fazer com que pare√ßam aleat√≥rios.  Ent√£o, ser√° muito dif√≠cil para o servidor distinguir quem est√° tentando estabelecer uma conex√£o com ele - um invasor ou algum cliente que o servidor nunca ouviu falar antes. <br><br>  Portanto, se voc√™ procurar algum site que aceite conex√µes de qualquer lugar do mundo, isso ser√° um grande problema.  Como voc√™ nega o acesso a todos ou deve poder armazenar o estado para a maioria das tentativas de conex√£o falsas. <br><br>  Portanto, esse √© um problema para o TCP e a maioria dos protocolos que permitem um tipo de inicia√ß√£o de conex√£o, no qual o servidor deve salvar o estado.  Mas h√° algumas corre√ß√µes implementadas no TCP sobre as quais falaremos em um segundo, e elas tentar√£o lidar com esse problema, chamado SYN Flooding in TCP. <br><br><img src="https://habrastorage.org/webt/ds/iv/2l/dsiv2l98atlrnyqwfzc3pg2-jma.jpeg"><br><br>  Em geral, esse √© um problema que voc√™ deve conhecer e tentar evitar em qualquer protocolo que esteja desenvolvendo.  Voc√™ deve especificar que o servidor n√£o deve salvar o estado at√© poder autenticar e identificar o cliente.  Porque somente ap√≥s a autentica√ß√£o do cliente √© poss√≠vel tomar uma decis√£o se √© permitido conectar-se, por exemplo, apenas uma vez; nesse caso, o servidor n√£o precisa salvar o estado para esta conex√£o. <br><br>  O problema √© que voc√™ garante a preserva√ß√£o do estado antes mesmo de saber quem est√° se conectando a voc√™.  Vamos ver como podemos combater o ataque de inunda√ß√£o do SYN Flooding, que √© o servidor que est√° acumulando muito estado. <br><br>  Voc√™ pode alterar o TCP novamente, por exemplo, corrigi-lo facilmente com criptografia ou outra coisa ou alterar o que √© respons√°vel por salvar algum estado.  Mas o fato √© que precisamos usar o TCP como ele √©.  Poder√≠amos resolver esse problema sem modificar o protocolo TCP existente? <br><br>  Este √© novamente um exerc√≠cio para tentar descobrir exatamente quais truques poder√≠amos executar, ou melhor, quais suposi√ß√µes poder√≠amos deixar em paz e ainda assim aderir ao formato de cabe√ßalho TCP existente ao trabalhar com eles. <br><br>  E o truque √© encontrar uma maneira inteligente de criar um servidor sem estado, para que ele n√£o precise armazenar esta tabela na mem√≥ria.  Isso pode ser feito escolhendo SNs com cuidado, ou seja, em vez da f√≥rmula que consideramos anteriormente e onde tivemos que adicionar essa fun√ß√£o, escolheremos os n√∫meros de s√©rie de uma maneira completamente diferente.  Vou lhe dar a f√≥rmula exata, e depois falaremos sobre por que √© realmente interessante e quais s√£o as boas propriedades. <br><br>  Se o servidor detectar que est√° sofrendo um ataque desse tipo, entrar√° no modo em que seleciona SNs usando a f√≥rmula com a mesma fun√ß√£o F que consideramos anteriormente. <br><br><img src="https://habrastorage.org/webt/ai/u5/2u/aiu52uoadhfflnvhgntwy_bedju.jpeg"><br><br>  Esta fun√ß√£o possui o endere√ßo IP de origem, o endere√ßo IP de destino, da mesma forma que antes - porta de origem, porta de destino, carimbo de data e hora e chave.  E vamos combinar essa fun√ß√£o com um carimbo de data / hora, em vez de "granula√ß√£o grossa", com alguns minutos de tamanho.  H√° uma separa√ß√£o entre essas duas partes do cabe√ßalho - a fun√ß√£o e o registro de data e hora, que n√£o precisam de muitos bits.  Esqueci como exatamente esse protocolo funciona em um computador real, mas voc√™ pode imaginar que o carimbo de data / hora leva 8 bits e o restante da f√≥rmula do n√∫mero de sequ√™ncia √© de 24 bits. <br><br>  Ent√£o, por que esse √© um bom plano?  O que est√° acontecendo aqui?  Por que essa f√≥rmula estranha √© necess√°ria?  Voc√™ deve se lembrar do que tentamos obter dos n√∫meros de s√©rie.  Duas coisas acontecem aqui. <br><br>  O primeiro √© a prote√ß√£o contra pacotes duplicados.  Permaneceu na placa um circuito com esse n√∫mero de s√©rie √† moda antiga, ao qual adicionamos uma fun√ß√£o para impedir a duplica√ß√£o de pacotes de conex√µes anteriores. <br><br><img src="https://habrastorage.org/webt/sw/06/2g/sw062gymfw2nxnff7rciprvtjsy.jpeg"><br><br>  Acontece que as pessoas n√£o conseguiram encontrar uma maneira melhor de se proteger de ataques como o SYN Flooding, exceto usar esse plano de a√ß√£o, que funciona bem em algumas situa√ß√µes.  Era um plano, mas outro era uma fun√ß√£o de data e hora em que abandonamos esse componente do estilo antigo.  Em vez disso, focaremos em garantir que, se algu√©m nos fornecer esse n√∫mero de sequ√™ncia ACK (SNs) em resposta ao pacote, essa pessoa ser√° o cliente "certo". <br><br>  Voc√™ se lembra que, para evitar ataques de falsifica√ß√£o de IP, meio que confiamos nesse valor (SNs).  Afinal, se o servidor enviar esse valor de SNs para o cliente na segunda etapa, esperamos que somente esse cliente possa nos enviar o valor corrigido de SNs na terceira etapa, concluindo a conex√£o. <br><br>  √â por isso que voc√™ teve que armazenar esse n√∫mero de s√©rie em uma tabela, porque, caso contr√°rio, como voc√™ saberia se essa √© uma resposta real ou falsa?  A raz√£o para usar esta fun√ß√£o F √© que agora n√£o podemos salvar esta tabela na mem√≥ria. <br><br>  Em vez disso, quando a tentativa de conex√£o √© mostrada, mostrada na primeira etapa, na segunda etapa calculamos os SNs usando essa f√≥rmula e simplesmente os enviamos de volta ao cliente que deseja entrar em contato conosco, e esquecemos essa conex√£o. <br><br><img src="https://habrastorage.org/webt/u7/uh/ml/u7uhml0zefpx1udtmt4j5xnaqxw.jpeg"><br><br>  Ent√£o, quando o terceiro pacote chegar e seu valor (SNs) corresponder ao que esperamos ver, significa que algu√©m recebeu nossa resposta na segunda etapa e finalmente a enviou para n√≥s.  Finalmente, ap√≥s esta terceira etapa, podemos colocar o registro real dessa conex√£o TCP na mem√≥ria.  Essa √© uma maneira de adiar a persist√™ncia do servidor at√© que o cliente envie o valor exato do n√∫mero de s√©rie.  A constru√ß√£o dessa constru√ß√£o possibilita verificar se o cliente enviou ao servidor exatamente a resposta que se espera dele e n√£o algum valor arbitr√°rio. <br><br>  <b>Aluno:</b> o SNc dura apenas um tempo limitado? <br><br>  <b>Professor:</b> sim, o servidor n√£o armazena o valor SNc permanentemente, e isso n√£o √© muito bom.  Eu n√£o mostrei isso no diagrama, mas aqui no final da terceira linha h√° um campo que mostra que esse pacote n√£o possui dados, mas inclui o n√∫mero de sequ√™ncia SNc apenas porque possui esse campo. <br><br><img src="https://habrastorage.org/webt/bv/5t/xz/bv5txzbklzepqcnw7bmu9n9ykki.jpeg"><br><br>  Assim, o servidor pode restaurar o valor do SNc, porque o cliente o incluir√° neste pacote de qualquer maneira.  Anteriormente, isso n√£o importava, mas agora √© como se fosse relevante.  N√£o vamos verificar nada aqui, mas a exist√™ncia de tal campo √© em si uma coisa boa.  No entanto, tem algumas conseq√º√™ncias tristes.  Por exemplo, se voc√™ usar algumas coisas complicadas que podem ser abusadas aqui.  Mas isso n√£o √© t√£o ruim quanto sobrecarregar a mem√≥ria do servidor com solicita√ß√µes do cliente. <br><br>  Porque a √∫nica coisa que nos preocupa √© liberar o armazenamento dessa tabela e a confian√ßa de que as conex√µes s√£o estabelecidas com clientes genu√≠nos.  E se esse cliente estabelecer um milh√£o de conex√µes comigo, pararei de aceitar solicita√ß√µes dele, √© bastante simples.  O problema √© que √© dif√≠cil distinguir endere√ßos falsos de endere√ßos de clientes genu√≠nos. <br><br>  <b>Aluno:</b> preciso manter um registro de data e hora? <br><br>  <b>Professor:</b> sim, h√° uma coisa inteligente!  Quando obtemos o valor dos SNs na terceira etapa, precisamos descobrir como calcular os dados de entrada para esta fun√ß√£o F, a fim de verificar se esse valor est√° correto.  Portanto, pegamos o carimbo de data / hora localizado no final da embalagem e o usamos para calcular dentro da fun√ß√£o.  Tudo o resto podemos restaurar.  Sabemos quem acabou de nos enviar o terceiro passo e pacote, temos todos esses campos e nossa chave, que, novamente, ainda √© secreta, e o carimbo de data e hora dos √∫ltimos 8 bits da sequ√™ncia.  Nesse caso, pode acontecer que excluamos carimbos de data / hora muito antigos, simplesmente banindo conex√µes antigas. <br><br>  <b>Aluno:</b> Eu acredito que voc√™ usa isso quando √© atacado, apenas porque perde 8 bits de seguran√ßa ou por algum outro motivo? <br><br>  <b>Professor:</b> sim, isso n√£o √© muito bom, tem muitas propriedades ruins.  De certa forma, estamos realmente perdendo 8 bits de seguran√ßa.  Porque agora a parte indiscut√≠vel √© de apenas 24 bits em vez de 32. <br><br>  Outro problema √© o que acontece se voc√™ perder determinados pacotes?  No TCP, geralmente √© aceito que, se o terceiro pacote for perdido, o cliente poder√° estar esperando por nada.  Ou, desculpe-me, talvez o protocolo que executamos sobre essa conex√£o TCP seja um protocolo que pressup√µe que o servidor inicialmente pretenda dizer algo, ent√£o eu me conecto e apenas ou√ßo a resposta.  E no SMTP, por exemplo, o servidor deve me enviar algo como uma sauda√ß√£o por meio do protocolo.  Suponha que eu me conecte ao servidor SMTP, envie o terceiro pacote, acho que fiz tudo e apenas aguarde o servidor me responder, por exemplo: <br><br>  "Ol√°, este √© um servidor SMTP, por favor me envie seu email!" <br><br>  Portanto, este terceiro pacote pode ser perdido.  No TCP real, o servidor lembra que, na segunda etapa, respondeu ao cliente, mas nunca recebeu um terceiro pacote de resposta.  Portanto, o servidor enviar√° ao cliente novamente um segundo pacote para reiniciar o terceiro pacote.  Obviamente, se o servidor n√£o armazenar nenhum estado, ele n√£o far√° ideia do que enviar.  Isso torna o estabelecimento de uma conex√£o um tanto problem√°tico, porque ambos os lados esperam um passo rec√≠proco um do outro.  O servidor nem sabe que o cliente est√° aguardando uma resposta e o cliente est√° aguardando a resposta do servidor, embora n√£o atenda porque n√£o armazena o estado.  Portanto, esse √© outro motivo pelo qual voc√™ n√£o usa o modo produtivo do servidor constantemente. <br><br>  <b>Aluno:</b> voc√™ tamb√©m pode ter perda de dados se estabelecer duas conex√µes de curta dura√ß√£o a partir de um host imediatamente ap√≥s o outro. <br><br>  <b>Professor:</b> sim, claro.  Outra coisa √© que nos recusamos a usar esse estilo antigo de n√∫mero de sequ√™ncia ISN, o que aumentou a independ√™ncia dessas m√∫ltiplas conex√µes em um curto espa√ßo de tempo.  Eu acho que h√° uma s√©rie de compromissos aqui, acabamos de falar sobre tr√™s deles, ent√£o h√° mais algumas raz√µes para preocupa√ß√£o. <br><br>  Se pud√©ssemos desenvolver um protocolo a partir do zero, buscando o melhor, poder√≠amos apenas ter um bom volume de 64 bits separado para a fun√ß√£o F e um volume de 64 bits para o registro de data e hora, e poder√≠amos us√°-lo constantemente, sem desistir todas essas coisas legais. <br><br>  <b>Aluno:</b> os SNs no segundo e terceiro passo devem ser os mesmos? <br><br>  <b>Professor: √©</b> claro, porque, caso contr√°rio, o servidor n√£o poder√° concluir que este cliente recebeu nosso pacote.  Se o servidor n√£o verificar se esses SNs t√™m o mesmo significado de antes, isso pode ser ainda pior - porque eu poderia falsificar uma conex√£o de um endere√ßo IP arbitr√°rio na primeira etapa e obter essa resposta na segunda etapa.  Ou eu nem receberia essa resposta porque ela √© direcionada para um endere√ßo IP diferente.  Na terceira etapa, eu estabele√ßo uma conex√£o a partir de outro endere√ßo IP.  Nesse caso, o servidor suportaria a conex√£o estabelecida, espere que eu envie dados e assim por diante. <br><br><img src="https://habrastorage.org/webt/4l/ta/ju/4ltajum6836awmvn0sgd43vygee.jpeg"><br><br>  <b>Aluno:</b> mas o timestamp ser√° diferente, certo?  Como o servidor pode recontar isso usando um novo carimbo de data e hora se ele n√£o armazena o estado? <br><br>  <b>Professor:</b> como eu disse, esses registros de data e hora s√£o bastante "granulares" e s√£o classificados em minutos.  Se voc√™ se conectar no mesmo minuto, tudo estar√° em ordem, se voc√™ se conectar na borda do minuto - isso √© muito ruim. <br><br>  Outro problema com este circuito √© que ele √© imperfeito de v√°rias maneiras.  Mas a maioria dos sistemas em funcionamento, incluindo Linux, tem maneiras de detectar muitas entradas nesta tabela.  E quando a amea√ßa de seu transbordamento ocorre, o sistema muda para outro esquema. <br><br>  <b>Aluno:</b> se um invasor controla um grande n√∫mero de endere√ßos IP e faz o que voc√™ disse, mesmo se voc√™ alternar ... <br><br>  <b>Professor:</b> sim, voc√™ realmente pode fazer pouco.  A raz√£o pela qual esse esquema nos importou tanto foi porque quer√≠amos filtrar ou de alguma forma distinguir entre os agressores e os "mocinhos".  Se um invasor tiver mais endere√ßos IP e apenas controlar mais m√°quinas do que os mocinhos, ele poder√° se conectar ao nosso servidor, solicitar v√°rias p√°ginas da web ou manter contato. <br><br>  E ent√£o ser√° muito dif√≠cil para o servidor determinar se as solicita√ß√µes s√£o recebidas de clientes leg√≠timos ou se √© apenas um invasor que liga os recursos do servidor.  Ent√£o voc√™ est√° absolutamente certo.  Esse esquema s√≥ funciona se o invasor tiver um pequeno n√∫mero de endere√ßos IP e desejar obter um efeito. <br><br>  E isso √© motivo de preocupa√ß√£o, porque hoje alguns invasores controlam um grande n√∫mero de computadores invadidos por usu√°rios comuns.  Isso lhes permite criar DoS com uma frota de m√°quinas localizadas em todo o mundo, e √© muito dif√≠cil se defender. <br><br>  Quero mencionar mais uma coisa interessante - a nega√ß√£o do servi√ßo DoS √© ruim por si s√≥, mas ainda pior quando os pr√≥prios protocolos contribuem para esse ataque.  O invasor sabe disso e ataca principalmente sistemas com protocolos como o DNS.  O protocolo DNS inclui um cliente enviando uma solicita√ß√£o ao servidor e o servidor envia uma resposta de volta ao cliente.  E, em muitos casos, o tamanho da resposta em bytes √© muito maior que o volume da solicita√ß√£o. <br><br><img src="https://habrastorage.org/webt/sy/gv/mq/sygvmq26-ayo8twvl0f6lkxnkja.jpeg"><br><br>  Voc√™ perguntou sobre o servidor mit.edu.  ,        ,     mit.edu ‚Äî   ,    mit.edu,  ,    DNS SEC,   . <br><br>      100 ,   ‚Äî  1000 . ,    ¬´¬ª -            .        ,        DNS-    .      100   - DNS-,  ,      ,       1000    . <br><br>     ,        .      ,       TCP SYN Flooding, DNS-      ,       .           , ,     ¬´ ¬ª. <br><br>        DNS.             .       ,           DNS-.        ,        .       . <br><br> <b>:</b>        DNS-     ‚Ä¶ <br><br> <b>:</b> ,     DNS-  ,    - . <br><br> <b>:</b>         ,      ? <br><br> <b>:</b>  ,       DNS-,    .     DNS-,     .      10    DNS-,      ,      ,  , ,      .    . ,  ,      DNS-,        . <br><br>     ,    DNS    ,     ,     ,           .       ,          . <br><br>  ,   ,       ,       ‚Äì    ,   ,   ,   .    ,       ,   .       . <br><br>     DNS-         ,        .      ,           ,          . <br><br>        ,   : ¬´,      ,   ¬ª!  ,  ,  DNS-            . <br><br>   ,         .   -  -,        .    DoS    ,                   .          ,    ,       ,  ,       . <br><br><img src="https://habrastorage.org/webt/ub/2r/rc/ub2rrcc5_hvwg939goz50wj08ve.jpeg"><br><br>    ,     ,   .     ,            ,      ,  . <br><br>      ,        ,      .        . <br><br> ,      DHCP,         .    , ,   IP-.  , , MIT  DHCP,   ,   , ,   IP-,    ,  DNS-,    ,         . <br><br>    ,    DHCP          DHCP-,         ,    DHCP-.           ,      ,     . ,          DHCP      IP-, : ¬´,     DNS-  ¬ª!        DNS     . <br><br>   ,      .     ,  BGP,        IP-,       .    ,   ,   BGP, : ¬´,         IP-!¬ª,       : ‚Äû, ,     ‚Äú. <br><br><img src="https://habrastorage.org/webt/z2/tv/1u/z2tv1u_2r9qcpdqgfpgtf22xxgq.jpeg"><br><br> ,     ,     ,    IP-     .      IP-  ,  ,  IP-   .       IP-  ,      .      ,     .    ,   ,   ,     IP-.                ,     ,    . <br><br>       DNS SEC.  ,  ,     DNS,      ,       .    ,     ,  , ,        DNS SEC. <br><br> ,  ,       ,       .         :              ,      ,      ,  ,   ,      DoS ‚Äî .             . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, voc√™ deve tentar evitar coisas como ataques SYN Flooding e ataques RST que permitem desconectar um usu√°rio de rede arbitr√°rio. </font><font style="vertical-align: inherit;">S√£o coisas realmente prejudiciais em um n√≠vel baixo e dif√≠ceis de corrigir em um n√≠vel alto. </font><font style="vertical-align: inherit;">Por√©m, mais ou menos, garante a integridade e a confidencialidade dos dados usando criptografia. </font><font style="vertical-align: inherit;">Falaremos sobre como fazer isso na pr√≥xima palestra sobre Cerberus.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A vers√£o completa do curso est√° dispon√≠vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD de 1Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427093/">https://habr.com/ru/post/pt427093/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427077/index.html">Laplace Blur - √â poss√≠vel blub Laplace em vez de Gauss, quantas vezes √© mais r√°pido e vale a pena a perda da precis√£o de 1/32</a></li>
<li><a href="../pt427079/index.html">NetApp Insight 2018</a></li>
<li><a href="../pt427081/index.html">Crit√©rios da mente humana, do ponto de vista de um programador</a></li>
<li><a href="../pt427087/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Palestra 12: Seguran√ßa de Rede, Parte 2</a></li>
<li><a href="../pt427091/index.html">Verifica√ß√£o num√©rica da hip√≥tese abc (sim, essa)</a></li>
<li><a href="../pt427095/index.html">Antim√¥nio - CAD de um mundo paralelo</a></li>
<li><a href="../pt427097/index.html">O aplicativo m√≥vel ajuda a detectar depress√£o e outros problemas psicol√≥gicos nos est√°gios iniciais.</a></li>
<li><a href="../pt427101/index.html">O Google planeja cobrar dos fabricantes de dispositivos m√≥veis at√© US $ 40 por cada dispositivo vendido</a></li>
<li><a href="../pt427105/index.html">Aprenda a aprender: a educa√ß√£o continuada √© a chave para a competitividade na era da economia digital</a></li>
<li><a href="../pt427107/index.html">Parsim X12 "no joelho"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>