<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯНЖ ЁЯОЕЁЯП┐ ЁЯС╝ЁЯП╝ рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред рднрд╛рдЧ 4: рдзреНрд╡рдирд┐, рдПрдиреАрдореЗрд╢рди, рд╣рдлрдореИрди, рдЬреАрдереВрдм ЁЯСйЁЯП╗тАНЁЯЪТ тПпя╕П ЁЯЪд</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрддреЗ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╣реА рд╕рдордЭ рдЪреБрдХреЗ рд╣реИрдВ, рдпрд╣ рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдФрд░ рдиреНрдпреВрд░реЛрдореЗрдВрдЯ рдХреЗ рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреЗ рдореЗрд░реЗ рдЗрддрд┐рд╣рд╛рд╕ рдХрд╛ рдПрдХ рд╕рд┐рд▓рд╕рд┐рд▓рд╛ рд╣реИред 

 рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред рднрд╛рдЧ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред рднрд╛рдЧ 4: рдзреНрд╡рдирд┐, рдПрдиреАрдореЗрд╢рди, рд╣рдлрдореИрди, рдЬреАрдереВрдм</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417639/"><p>  рдирдорд╕реНрддреЗ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╣реА рд╕рдордЭ рдЪреБрдХреЗ рд╣реИрдВ, рдпрд╣ рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдФрд░ рдиреНрдпреВрд░реЛрдореЗрдВрдЯ рдХреЗ рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреЗ рдореЗрд░реЗ рдЗрддрд┐рд╣рд╛рд╕ рдХрд╛ рдПрдХ рд╕рд┐рд▓рд╕рд┐рд▓рд╛ рд╣реИред </p><br><img src="https://habrastorage.org/webt/-g/ru/d_/-grud_xhetuzh4znt4rbkeakxyi.png"><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 1: рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 2: рд░реЗрдВрдбрд░ рдлрд╝реЙрдиреНрдЯ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 3: рд╕рдорд╛рдкреНрдд рдкреНрд░рддрд┐рдкрд╛рджрди, рдЦреЗрд▓ рдмрдирд╛</a> </blockquote><p>  рдЖрдЬ, рджреЛ рдЕрдЪреНрдЫреА рдЦрдмрд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рдЕрдм рдФрд░ рдЕрдХреЗрд▓рд╛ рдирд╣реАрдВ рд╣реВрдВ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">viiri</a> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдкрд╣рд▓реЗ рд╣реА рд╢рд╛рдорд┐рд▓ рд╣реЛ рдЪреБрдХрд╛ рд╣реИ рдФрд░ рдкрд╣рд▓реЗ рд╣реА рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдпреЛрдЧрджрд╛рди рджреЗ рдЪреБрдХрд╛ рд╣реИ; </li><li>  рджреВрд╕рд░реА рдмрд╛рдд, рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>рдЧреАрдердм</em></a> рдкрд░ рдПрдХ рдЦреБрд▓рд╛ рднрдВрдбрд╛рд░ рд╣реИред </li></ul><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЪреАрдЬреЗрдВ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЪрд▓ рд░рд╣реА рд╣реИрдВ, рдФрд░ рд╢рд╛рдпрдж рдЬрд▓реНрдж рд╣реА рд╣рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ рдЦреЗрд▓рдиреЗ рдпреЛрдЧреНрдп рдирд┐рд░реНрдорд╛рдг рдорд┐рд▓реЗрдЧрд╛ред  рдФрд░ рдХрдЯреМрддреА рдХреЗ рддрд╣рдд, рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдЖрдЗрдП рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВ рдХрд┐ рдлрд┐рд▓рд╣рд╛рд▓ рдХреНрдпрд╛ рдФрд░ <em>рдХреИрд╕реЗ</em> рд╣рд╛рд╕рд┐рд▓ <em>рдХрд┐рдпрд╛</em> рдЧрдпрд╛ рд╣реИред </p><a name="habracut"></a><br><hr><br><p>  рд╡рд╣ рдзреНрд╡рдирд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рд▓рдЧрд╛ред  рдХрд╛рд╢, рдЦреЗрд▓ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмреАрдЪ рдСрдбрд┐рдпреЛ рдХреЗ рд╕рдорд╛рди рдХреБрдЫ рднреА рдирд╣реАрдВ рдерд╛, рдФрд░ рдЬрдм рд╕реЗ рдореБрдЭреЗ рдкрддрд╛ рдирд╣реАрдВ рдерд╛ рдХрд┐ рд╕рдВрдЧреАрдд <em>рдПрдордПрд╕-рдбреЙрд╕</em> рдореЗрдВ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдмреЗрд╣рдж рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рдерд╛ рдХрд┐ рдХрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ <em>рд╕рд╛рдЙрдВрдбрдмреНрд▓реИрд╕реНрдЯрд░</em> рдПрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж, рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдореИрдВ рдХреБрдЫ рдкрд░рд┐рдЪрд┐рдд рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рджреЗрдЦрдиреЗ рдХреА рдЙрдореНрдореАрдж рдореЗрдВ рдЕрд╕рдВрддреБрд╖реНрдЯ рдХреЛрдб рдХреЛ рд╕реНрдХреНрд░реЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдпрд╛ рд╣реВрдВред  рдФрд░ рдЬреЛ рдХреЛрдИ рдЪрд╛рд╣рддрд╛ рд╣реИ, рд╡рд╣ рдЖрдо рддреМрд░ рдкрд░ рдкрд╛рддрд╛ рд╣реИ, рднрд▓реЗ рд╣реА рд╡рд╣ рдХреНрдпрд╛ рджреЗрдЦ рд░рд╣рд╛ рдерд╛ ( <em>рдЗрдбрд╛</em> рджреНрд╡рд╛рд░рд╛ рдЯрд┐рдкреНрдкрдгреА рдХреА рдЧрдИ): </p><br><pre><code class="hljs vhdl">sub_20416: ... mov ax, [si+<span class="hljs-number"><span class="hljs-number">8</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ; <span class="hljs-number"><span class="hljs-number">8253</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov bx, [si+<span class="hljs-number"><span class="hljs-number">0</span></span>Ah] <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> bl, <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ; PC/XT PPI <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> B bits: ; <span class="hljs-number"><span class="hljs-number">0</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> gate тХРтХжтХРтЦ║ <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>H=spkr <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ; <span class="hljs-number"><span class="hljs-number">1</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> data тХРтХЭ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>fcH=spkr OFF ; <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>=read high switches ; <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable RAM parity checking ; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable I/O channel check ; <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=hold keyboard clock low ; <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable kbrd <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">0</span></span>FCh <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, bl <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ; PC/XT PPI <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> B bits: ; <span class="hljs-number"><span class="hljs-number">0</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> gate тХРтХжтХРтЦ║ <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>H=spkr <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ; <span class="hljs-number"><span class="hljs-number">1</span></span>: Tmr <span class="hljs-number"><span class="hljs-number">2</span></span> data тХРтХЭ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>fcH=spkr OFF ; <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>=read high switches ; <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable RAM parity checking ; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable I/O channel check ; <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=hold keyboard clock low ; <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>=enable kbrd</code> </pre> <br><p>  рдЗрд╕ <em>рдЯрд╛рдЗрдорд░ erреирелрей-рел рдХреЗ</em> рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж <em>,</em> рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд▓реЗрдЦ</a> рдкрд░ рдЖрдпрд╛ рдЬреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реА рдХреБрдВрдЬреА рдмрди рдЧрдпрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рдерд╛ред  рдиреАрдЪреЗ рдореИрдВ рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣реИред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рд╕рд╕реНрддреА рд╕рд╛рдЙрдВрдб рдХрд╛рд░реНрдб рдХреЗ рдЖрдЧрдорди рд╕реЗ рдкрд╣рд▓реЗ, <em>рдЖрдИрдмреАрдПрдо-рдкреАрд╕реА</em> рдХреЗ рдпреБрдЧ рдореЗрдВ, рд╕рдмрд╕реЗ рдЖрдо рдзреНрд╡рдирд┐ рдкреБрдирд░реБрддреНрдкрд╛рджрди рдЙрдкрдХрд░рдг рддрдерд╛рдХрдерд┐рдд <em>рдкреАрд╕реА рд╕реНрдкреАрдХрд░ рдерд╛</em> , рдЬрд┐рд╕реЗ "рдмреАрдкрд░" рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рдерд╛ред  рдпрд╣ рдбрд┐рд╡рд╛рдЗрд╕ рдорджрд░рдмреЛрд░реНрдб рд╕реЗ рдЬреБрдбрд╝реЗ рдПрдХ рдирд┐рдпрдорд┐рдд рд╕реНрдкреАрдХрд░ рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реИ, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЪрд╛рд░-рдкрд┐рди рдХрдиреЗрдХреНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред  рдмреАрдкрд░, рд╡рд┐рдЪрд╛рд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рджреЛ-рд╕реНрддрд░реАрдп рдЖрдпрддрд╛рдХрд╛рд░ рдирд╛рдбрд╝реА (рджреЛ рд╡реЛрд▓реНрдЯреЗрдЬ рд╕реНрддрд░, рдЖрдорддреМрд░ рдкрд░ 0V рдФрд░ + 5V рдХреЗ рдЕрдиреБрд░реВрдк) рдХреЛ рдкреБрди: рдкреЗрд╢ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ <em>рдкреАрдкреАрдЖрдИ (рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдмрд▓ рдкреЗрд░рд┐рдлреЗрд░рд┐рдпрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕)</em> рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ 61 рд╡реЗрдВ рдмрдВрджрд░рдЧрд╛рд╣ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдкреЛрд░реНрдЯ рдкрд░ рднреЗрдЬреЗ рдЧрдП рдорд╛рди рдХреЗ рдкрд╣рд▓реЗ рджреЛ рдмрд┐рдЯреНрд╕ "рд╕реНрдкреАрдХрд░" рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИрдВ ( <code>in al, 61h</code> рдФрд░ <code>out 61h, al</code> <code>in al, 61h</code> рд▓рд╛рдЗрдиреЛрдВ рдкрд░ рдЯрд┐рдкреНрдкрдгреА рджреЗрдЦреЗрдВ)ред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдХрд╣рд╛ (рдереЛрдбрд╝реЗ рдЕрд▓рдЧ рд╢рдмреНрджреЛрдВ рдореЗрдВ), рд╣рдорд╛рд░реЗ рд╕реНрдкреАрдХрд░ рджреЛ рдЕрд╡рд╕реНрдерд╛рдУрдВ рдореЗрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ - <em>"рдЗрди"</em> рдФрд░ <em>"рдЖрдЙрдЯ"</em> ( <em>"рдХрдо" - "рд╣рд╛рдИ"</em> , <em>"рдСрдл" - "рдСрди"</em> , <em>"рдСрдл" - "рдСрди"</em> ) рдЖрдк рдЪрд╛рд╣реЗрдВ рдХреЗ рд░реВрдк рдореЗрдВ)ред  <em>рдПрдХ</em> рдЖрд╡реЗрдЧ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЛ рд╡рд┐рдкрд░реАрдд рдореЗрдВ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдФрд░, рдХреБрдЫ рд╕рдордп рдмрд╛рдж, рд╡рд╛рдкрд╕ред  рдпрд╣ рдкреЛрд░реНрдЯ 61 рдХреЗ рдкрд╣рд▓реЗ рдмрд┐рдЯ (рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рдЧрд┐рдирддреА) рдореЗрдВ рд╣реЗрд░рдлреЗрд░ рдХрд░рдХреЗ рд╕реАрдзреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕ рддрд░рд╣: </p><br><pre> <code class="hljs vhdl">PULSE: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b ;    ... <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000010</span></span>b ;     ... ; ,        <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;    <span class="hljs-number"><span class="hljs-number">61</span></span>-  mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span> ;   DELAY: <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> DELAY ;    <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b ;     <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;    <span class="hljs-number"><span class="hljs-number">61</span></span>- </code> </pre> <br><p>  рдЗрд╕ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрдЧрд╛: </p><br><pre> <code class="hljs delphi"> loop DELAY +<span class="hljs-number"><span class="hljs-number">5</span></span>V +----------------------+ ! ! <span class="hljs-number"><span class="hljs-number">0</span></span>V ---+ +-------------------------- <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000010</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al</code> </pre> <br><p>  рд╡рд┐рд▓рдВрдм рдХреЗ рд╕рд╛рде <em>PULSE</em> рдХреЛ рджреЛрд╣рд░рд╛рддреЗ рд╣реБрдП, рд╣рдореЗрдВ рдПрдХ рдЖрдпрддрд╛рдХрд╛рд░ рд╕рдВрдХреЗрдд рдорд┐рд▓рддрд╛ рд╣реИ: </p><br><pre> <code class="hljs erlang-repl"> mov dx, <span class="hljs-number"><span class="hljs-number">100</span></span> ;  <span class="hljs-number"><span class="hljs-number">100</span></span>  PULSE: ... mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span> WAIT: loop WAIT dec dx jnz PULSE PULSE +<span class="hljs-number"><span class="hljs-number">5</span></span>V +---------+ +---------+ +---------+ ! ! ! ! ! ! <span class="hljs-number"><span class="hljs-number">0</span></span>V ---+ +---------+ +---------+ +--- loop WAIT</code> </pre><br><p>  рдпрджрд┐ рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣рдордиреЗ рд╢рд╛рдпрдж рд╣реА рдХреБрдЫ рд╕реБрдирд╛ рд╣реЛрдЧрд╛, рддреЛ рджреВрд╕рд░реЗ рдореЗрдВ рд╣рдореЗрдВ рдЙрд╕ рдорд╢реАрди рдХреА рдЧрддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЖрд╡реГрддреНрддрд┐ рдХрд╛ рд╕реНрд╡рд░ рдорд┐рд▓реЗрдЧрд╛, рдЬрд┐рд╕ рдкрд░ рдпрд╣ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдорд╣рд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред  рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реНрдкреАрдХрд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХрд╛ рд╣реИред </p><br><p>  рдпрд╣рд╛рдВ рдЧреЗрдо рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдмрд▓ рдереНрд░реА-рдЪреИрдирд▓ рдЯрд╛рдЗрдорд░ - <em>рдЗрдВрдЯреЗрд▓ 8253 рдЖрддрд╛ рд╣реИ</em> , рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рджреВрд╕рд░рд╛ рдЪреИрдирд▓ (рд╢реВрдиреНрдп рд╕реЗ рд╢реБрд░реВ) рдмреАрдкрд░ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред  рдпрд╣ рдЯрд╛рдЗрдорд░ <em>рдЗрдВрдЯреЗрд▓ 8254</em> рдШрдбрд╝реА рд╕реЗ рдПрдХ рд╕рдВрдХреЗрдд рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, 1193180 рджрд╛рд▓реЛрдВ рдХреЛ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб (~ 1.193 рдореЗрдЧрд╛рд╣рд░реНрдЯреНрдЬ) рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рджрд╛рд▓реЛрдВ рдХреЗ рдмрд╛рдж рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╡рдХреНрддрд╛ рдХреЛ рдПрдХ рд╡рд░реНрдЧ рдкрд▓реНрд╕ рднреЗрдЬ рд░рд╣рд╛ рд╣реИред  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, <em>8253</em> рд╕рдорд╛рдпреЛрдЬреНрдп рдЖрд╡реГрддреНрддрд┐ рдХреЗ рдЖрдпрддрд╛рдХрд╛рд░ рд╕рдВрдХреЗрдд рдХреЗ рдЬрдирд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд╕реЗ рд╕реНрдкреАрдХрд░ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдзреНрд╡рдирд┐ рдкреНрд░рднрд╛рд╡реЛрдВ рдХреЛ рд╕рдВрд╢реНрд▓реЗрд╖рд┐рдд рдХрд░рдирд╛ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдпрд╣рд╛рдБ рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП: </p><br><ol><li>  рдЖрдпрддрд╛рдХрд╛рд░ рд╕рд┐рдЧреНрдирд▓ рдЬрдирд░реЗрд╢рди рдореЛрдб рдореЗрдВ рдЯрд╛рдЗрдорд░ рдХрд╛ рджреВрд╕рд░рд╛ рдЪреИрдирд▓ рд╕реЗрдЯ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕рд┐рдВрдЧрд▓-рдмрд╛рдЗрдЯ рдорд╛рди рдХреЛ рдкреЛрд░реНрдЯ 43 ( <em>8253 рдореЛрдб / рдХрдорд╛рдВрдб рд░рдЬрд┐рд╕реНрдЯрд░</em> ) рдкрд░ рд▓рд┐рдЦреЗрдВред  рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ <code>10110110B</code> (рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> ): </li></ol><br><pre> <code class="markdown hljs">Bits Usage 6 and 7 Select channel : 1 0 = Channel 2 4 and 5 Access mode : 1 1 = Access mode: lobyte/hibyte 1 to 3 Operating mode : 0 1 1 = Mode 3 (square wave generator) 0 BCD/Binary mode: 0 = 16-bit binary</code> </pre> <br><ol><li><p>  рджреВрд╕рд░реЗ рдЪреИрдирд▓ рдкрд░ рд╡рд╛рдВрдЫрд┐рдд рдЖрд╡реГрддреНрддрд┐ рд╕реЗрдЯ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╛рдЗрдЯ-рдмрд╛рдп-рдмрд┐рдЯ, рд╕рдмрд╕реЗ рдХрдо рдЙрдореНрд░ рд╕реЗ, рд╣рдо 42 рд╡реЗрдВ рдкреЛрд░реНрдЯ ( <em>8253 рдЪреИрдирд▓ 2 рдбреЗрдЯрд╛ рдкреЛрд░реНрдЯ</em> ) рдХреЛ <code>1193180 / freq</code> рдмрд░рд╛рдмрд░ рдореВрд▓реНрдп рдкрд░ <code>1193180 / freq</code> , рдЬрд╣рд╛рдВ <code>1193180 / freq</code> рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдЖрд╡реГрддреНрддрд┐ рдореВрд▓реНрдп рд╣реИред </p><br></li><li><p>  рд╕реНрдкреАрдХрд░ рдХреЛ рдЯрд╛рдЗрдорд░ рд╕реЗ рджрд╛рд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ 61 ( <em>PPI</em> ) рдореЗрдВ рдорд╛рди рдХреЗ рдкрд╣рд▓реЗ рджреЛ рдмрд┐рдЯ рд╕реЗрдЯ рдХрд░реЗрдВред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рд╢реВрдиреНрдп рдмрд┐рдЯ 1 рдкрд░ рд╕реЗрдЯ рд╣реИ, рддреЛ рдкрд╣рд▓реЗ "рд╕реНрд╡рд┐рдЪ" рдХреЗ рд░реВрдк рдореЗрдВ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреА рдЬрд╛рддреА рд╣реИ: </p><br></li></ol><br><pre> <code class="markdown hljs">Bit 0 Effect ----------------------------------------------------------------- 0 The state of the speaker will follow bit 1 of port 61h 1 The speaker will be connected to PIT channel 2, bit 1 is used as switch ie 0 = not connected, 1 = connected.</code> </pre> <br><p>  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдирд┐рдореНрди рдЪрд┐рддреНрд░ рд╣реИ: </p><br><pre> <code class="hljs vhdl"> mov al, <span class="hljs-number"><span class="hljs-number">10110110</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">43</span></span>h, al ;   mov ax, <span class="hljs-number"><span class="hljs-number">02E9</span></span>Bh ; <span class="hljs-number"><span class="hljs-number">1193180</span></span> / <span class="hljs-number"><span class="hljs-number">100</span></span> = ~<span class="hljs-number"><span class="hljs-number">0</span></span>x2E9B <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ;      mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>h, al ;      <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h ;    <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> al, <span class="hljs-number"><span class="hljs-number">00000011</span></span>b ;      <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;   ... ;       ~<span class="hljs-number"><span class="hljs-number">100</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> al, <span class="hljs-number"><span class="hljs-number">61</span></span>h <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al, <span class="hljs-number"><span class="hljs-number">11111100</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span>h, al ;  </code> </pre> <br><p>  рдФрд░ рдпрд╣ рд╡рд╣реА рдХреЛрдб рд╣реИ рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЙрджреНрдзреГрдд рдХрд┐рдпрд╛ рдерд╛ (рдЖрд░рдВрднреАрдХрд░рдг рдХреЛ рдЫреЛрдбрд╝рдХрд░, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЗрд╕реЗ рдХрд┐рд╕реА рдЕрдиреНрдп рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкрд╛рдпрд╛): <code>si + 8</code> рдкрд░ рдПрдХ рдЖрд╡реГрддреНрддрд┐ рд╡рд┐рднрдХреНрдд рд╣реИ рдЬрд┐рд╕реЗ рдкреЛрд░реНрдЯ 42 рдореЗрдВ рднреЗрдЬрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ <code>si + 0Ah</code> - рдкреЛрд░реНрдЯ 61 рдореЗрдВ рд╕реНрдкреАрдХрд░ рдХреА рд╕реНрдерд┐рддрд┐ ( <em>"рдСрди" - "рдСрдл"</em> ) рджрд░реНрдЬ рдХреА рдЧрдИред </p><br><p>  рдкреНрд▓реЗрдмреИрдХ рддрдВрддреНрд░ рд╕рд░рд▓ рдФрд░ рд╕реАрдзрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рдЖрдкрдХреЛ рд╕рдордп рдХреЗ рд╕рд╛рде рдирд┐рдкрдЯрдирд╛ рдерд╛ред  рдкрд╛рд╕ рдХреЗ рдХреЛрдб рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рдЙрд╕реА рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЬрд┐рд╕рдореЗрдВ рдЯрд╛рдЗрдорд░ рдЖрд░рдВрднреАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ ( <code>sub_2037A</code> , рдлрд┐рд░ <code>init_8253</code> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдард╡реЗрдВ рд╡реНрдпрд╡рдзрд╛рди</a> рд╣реИрдВрдбрд▓рд░ рдХреЛ <code>sub_20416</code> рдлрд╝рдВрдХреНрд╢рди (рдЗрд╕рдХреЗ рдмрд╛рдж - <code>play_sample</code> ) рд╕реЗ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдЬрд▓реНрдж рд╣реА рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рдпрд╣ рд░реБрдХрд╛рд╡рдЯ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рд▓рдЧрднрдЧ 18.2 рдмрд╛рд░ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рд╕рдордп рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдХрд░рддреА рд╣реИред  рдЗрд╕ рд░реБрдХрд╛рд╡рдЯ рдХреЗ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдмрджрд▓рдирд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЕрднреНрдпрд╛рд╕ рд╣реИ рдпрджрд┐ рдЖрдкрдХреЛ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб 18 рдмрд╛рд░ рдХреБрдЫ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореВрд▓ рд╣реИрдВрдбрд▓рд░ рдХреЛ рд╣реБрдХ рдХреЗ рдЕрдВрджрд░ рднреА рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рд╕рд┐рд╕реНрдЯрдо рд╕рдордп рдмрдВрдж рд╣реЛ рдЬрд╛рдПрдЧрд╛)ред  рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдЕрдЧрд▓реА рдЖрд╡реГрддреНрддрд┐ рдЬрдирд░реЗрдЯрд░ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ <code>(1 / 18.2) * 1000 ~ 55</code> рдХрд╛ рд╢реБрд▓реНрдХ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпреЛрдЬрдирд╛ рдпрд╣ рдереА: </p><br><ul><li>  <code>play_sample</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдПрдХ рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ <code>play_sample</code> , рдЙрд╕ рдкрдВрдХреНрддрд┐ рдкрд░ рдЬрд╣рд╛рдВ рдЕрдЧрд▓рд╛ рдЖрд╡реГрддреНрддрд┐ рд╡рд┐рднрдХреНрдд рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ; </li><li>  рд╕реВрддреНрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЖрд╡реГрддреНрддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВ <code>freq = 1193180 / divisor</code> ; </li><li>  рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреЗ рдСрдбрд┐рдпреЛ рдПрдбрд┐рдЯрд░ рдореЗрдВ рд╡рд░реНрдЧ рдлрд╝реНрд░реАрдХ рдлрд╝реНрд░реАрдХреНрд╡реЗрдВрд╕реА рд╕рд┐рдЧреНрдирд▓ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ (рдореИрдВрдиреЗ <em>рдПрдбреЛрдм рдСрдбрд┐рд╢рди рдХрд╛</em> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛); </li><li>  рдХрдо рд╕реЗ рдХрдо 3 рд╕реЗрдХрдВрдб рдЬрдорд╛ рд╣реЛрдиреЗ рддрдХ рдкрд╣рд▓реЗ рддреАрди рдЪрд░рдгреЛрдВ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВред </li></ul><br><p>  рдЗрд╕рд▓рд┐рдП рдореБрдЭреЗ рдореБрдЦреНрдп рдореЗрдиреВ рд╕реЗ рдорд╛рдзреБрд░реНрдп рдХреА рд╢реБрд░реБрдЖрдд рдорд┐рд▓реА, рд▓реЗрдХрд┐рди рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдХреБрдЫ рд╕рдордп 10 рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдЦреЗрд▓ рд░рд╣рд╛ рдерд╛ред  рдлрд┐рд░ рдореИрдВрдиреЗ "рдирдореВрдирд╛" рдХреА рдЕрд╡рдзрд┐ рдХреЛ 55 рдПрдордПрд╕ рд╕реЗ рдШрдЯрд╛рдХрд░ 5 рдПрдордПрд╕ рдХрд░ рджрд┐рдпрд╛ - рдпрд╣ рдмрд╣реБрдд рдмреЗрд╣рддрд░ рд╣реЛ рдЧрдпрд╛, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИред  рдЬрдм рддрдХ рдореБрдЭреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣ рд▓реЗрдЦ рдирд╣реАрдВ</a> рдорд┐рд▓рд╛, рд╕рдордп рдореБрджреНрджрд╛ рдЦреБрд▓рд╛ рд░рд╣рд╛ред  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдЖрдард╡рд╛рдВ рдЕрд╡рд░реЛрдз рдЙрд╕реА <em>8253</em> рдХреЛ рдЦрд┐рд▓рд╛рдХрд░ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рд╢реВрдиреНрдп рдЪреИрдирд▓ рдЗрдВрдЯрд░рдкреНрдЯ рдХрдВрдЯреНрд░реЛрд▓рд░ ( <em>рдкреАрдЖрдИрд╕реА</em> ) рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИред  рдЬрдм рдорд╢реАрди рдмреВрдЯ рдХрд░рддреА рд╣реИ, рддреЛ <em>BIOS</em> ~ 18.2 рд╣рд░реНрдЯреНрдЬ рдХреА рдЖрд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рджрд╛рд▓реЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреИрдирд▓ рд╢реВрдиреНрдп рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ (рдЕрд░реНрдерд╛рдд, рдПрдХ рдмрд╛рдзрд╛ рд╣рд░ ~ 54.9 рдПрдордПрд╕ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ)ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╢реВрдиреНрдп рдЪреИрдирд▓ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдпрд╣ рдПрдХ рдЙрдЪреНрдЪ рдЖрд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рджрд╛рд▓реЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП, рджреВрд╕рд░реЗ рдЪреИрдирд▓ рдХреЗ рд╕рд╛рде рд╕рд╛рджреГрд╢реНрдп рджреНрд╡рд╛рд░рд╛, рдЖрдкрдХреЛ <code>1193180 / freq</code> рдмрд░рд╛рдмрд░ рдореВрд▓реНрдп рдХреЛ 40 рд╡реЗрдВ рдкреЛрд░реНрдЯ рдкрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ Hertz рдореЗрдВ <code>freq</code> рдЖрд╡рд╢реНрдпрдХ рдЖрд╡реГрддреНрддрд┐ рдорд╛рди рд╣реИред  рдпрд╣ <code>init_8253</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ, рдмрд╕ рд╢реБрд░реВ рдореЗрдВ рдореИрдВрдиреЗ рдЗрд╕ рдкрд░ рдзреНрдпрд╛рди рдирд╣реАрдВ рджрд┐рдпрд╛: </p><br><pre> <code class="hljs objectivec">init_8253: ... mov al, <span class="hljs-number"><span class="hljs-number">0</span></span>B6h ; <span class="hljs-number"><span class="hljs-number">10110110</span></span>b <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">43</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov ax, <span class="hljs-number"><span class="hljs-number">13</span></span>B1h <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>). mov al, ah <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span>h, al ; Timer <span class="hljs-number"><span class="hljs-number">8253</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span> (AT: <span class="hljs-number"><span class="hljs-number">8254.2</span></span>).</code> </pre> <br><p>  рдореВрд▓реНрдп <code>13B1h</code> рдЕрдиреБрд╡рд╛рдж рдЖрд╡реГрддреНрддрд┐ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <code>1193180 / 13B1h ~ 236.7</code> , рдлрд┐рд░ рд╣рдореЗрдВ рд▓рдЧрднрдЧ <code>(1 / 236.7) * 1000 ~ 4.2</code> рдкреНрд░рддрд┐ "рдирдореВрдирд╛" рдорд┐рд▓рддрд╛ рд╣реИред  рдкрд╣реЗрд▓реА рд╡рд┐рдХрд╕рд┐рдд рд╣реБрдИ рд╣реИред </p><br><p>  рдлрд┐рд░ рдЧреЗрдо рдХреЛ рд╕рд╛рдЙрдВрдбрдЯреНрд░реИрдХ рдирд┐рдХрд╛рд▓рдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдХреА рдмрд╛рдд рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдПрдХ рдмрд╛рдд рд╣реИ, 42 рд╡реЗрдВ рдмрдВрджрд░рдЧрд╛рд╣ рдореЗрдВ рджрд░реНрдЬ рдЖрд╡реГрддреНрддрд┐ рдбрд┐рд╡рд╛рдЗрдбрд░ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╡реЗ рдХреБрдЫ рдореБрд╢реНрдХрд┐рд▓ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо, рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдФрд░ рдХрд╛рд░реНрдп рдХреНрд╖реЗрддреНрд░ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╕реАрдзреЗ рдЧреЗрдо рдХреА рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓ (рд╕рд╛рддрд╡реЗрдВ рдЦрдВрдб рдореЗрдВ, <em>рдЗрдбрд╛ рдХреЗ</em> рдЕрдиреБрд╕рд╛рд░) рдореЗрдВ рдЭреВрда рдмреЛрд▓рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдореЗрдВ, рдЯреНрд░реИрдХ рдХреЗ рдЕрдВрдд рдХрд╛ рдХреЛрдИ рд╕рдВрдХреЗрдд рдирд╣реАрдВ рд╣реИ, рдЬрдм рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдХреБрдЫ рдирд╣реАрдВ рд╣реИ, рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдЕрд╕реАрдо рд░реВрдк рд╕реЗ рд╕реНрдкреАрдХрд░ рдХреА рдПрдХ рд╢реВрдиреНрдп рд╕реНрдерд┐рддрд┐ рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдореИрдВ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рд╣реБрдЖ рдФрд░ рдЬреИрд╕рд╛ рдХрд┐ рдбрд┐рдХрдореНрдкреНрд░реЗрд╕рди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╣рд▓рд╛ рднрд╛рдЧ</a> ) рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореИрдВрдиреЗ рд╕рд┐рд░реНрдл 64-рдмрд┐рдЯ рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЛ рдкреНрд▓реЗрдмреИрдХ рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдХ рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдФрд░ рдЕрдЧрд▓реА рдЖрд╡реГрддреНрддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо (рдФрд░ рдореИрдВрдиреЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд╛рддрд╡рд╛рдВ рдЦрдВрдб рд▓рд┐рдпрд╛) рдореЗрдВ рдЪрд┐рддреНрд░рд┐рдд рдХрд┐рдпрд╛ рд╣реИред </p><br><p>  рдФрд░ рдЗрд╕рдиреЗ рдХрд╛рдо рдХрд┐рдпрд╛ред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рдЪрдпрдирд┐рдд рдЯреНрд░реИрдХ ( <em>рдкреАрд╕реАрдПрдо, 44100 рд╣рд░реНрдЯреНрдЬ, 8 рдмрд┐рдЯ, рдореЛрдиреЛ</em> ; рдХреЗ рд▓рд┐рдП рд╕рд╛рдЙрдВрдбрдЯреНрд░реИрдХ рдкреАрдврд╝реА рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛; <em>рдбреЛрд╕рдмреЙрдХреНрд╕</em> рдореЗрдВ рд╕реНрдкреАрдХрд░ рдПрдореБрд▓реЗрдЯрд░ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЬрдирд░реЗрдЯрд░ рдХреА рддрд░рд╣ рдХреБрдЫ рдХрд┐рдпрд╛)ред  рдореИрдВрдиреЗ рдореМрди рдХреЗ рдПрдХ рд╕рд░рд▓ рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рд╕рд╛рде рдЕрдВрдд рдХреЗ рд╕рдВрдХреЗрдд рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд┐рдпрд╛: рдПрдХ рджреВрд╕рд░реЗ рдХреЛ рдЧрд┐рдирд╛ - рд╣рдо рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЛ рдкреВрд░рд╛ рдХрд░рддреЗ рд╣реИрдВред  <em>WAV</em> рд╣реЗрдбрд░ рдореЗрдВ рдкрд░рд┐рдгрд╛рдореА рдЯреНрд░реИрдХ рдХреЛ рд▓рдкреЗрдЯрдиреЗ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рдмрд╛рдж, рдореБрдЭреЗ рдореБрдЦреНрдп рдореЗрдиреВ рд╕реЗ рдмрд┐рд▓реНрдХреБрд▓ рдЯреНрд░реИрдХ рдорд┐рд▓рд╛ред  рдФрд░ 13 рдФрд░ рдЯреНрд░реИрдХ рдЬреЛ рдЖрдк рдиреАрдЪреЗ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВ <em>[рдпрд╛ рд╕рдВрд╕рд╛рдзрди рджрд░реНрд╢рдХ рдореЗрдВ, рдЬрд┐рд╕рдореЗрдВ рдЕрдм рдПрдХ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдЦрд┐рд▓рд╛рдбрд╝реА рдФрд░ рдХрд┐рд╕реА рднреА рдЯреНрд░реИрдХ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред WAV]</em> : </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <em>[рдореБрджреНрджреЗ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рдЕрдзрд┐рдХ рдЙрдиреНрдирдд "рдмреАрдкрд░" рддрдХрдиреАрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦрд╛, рдЬреИрд╕реЗ рдХрд┐ рдЦрд░рд╛рдм-рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реЗ рдкреАрд╕реАрдПрдо рдзреНрд╡рдирд┐ рдкреНрд░рдЬрдирди рдХреЗ рд▓рд┐рдП рдкрд▓реНрд╕-рдЪреМрдбрд╝рд╛рдИ рдореЙрдбреБрд▓рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред</em>  <em>рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ, рдореИрдВ рдЙрди рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдкреНрд░рджрд╛рди рдХрд░реВрдБрдЧрд╛ рдЬрд┐рдирд╕реЗ рдЖрдк рдФрд░ рдЕрдзрд┐рдХ рд╕реАрдЦ рд╕рдХрддреЗ рд╣реИрдВред]</em> </p><br><hr><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреВрд╕рд░реЗ рднрд╛рдЧ рдореЗрдВ</a> , рдЬрдм рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╕рд╛рдзрди рд╕реНрд╡рд░реВрдкреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдореИрдВрдиреЗ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛ рдХрд┐ <em>.ANH</em> рдлрд╝рд╛рдЗрд▓реЛрдВ <em>рдореЗрдВ</em> рд╕реНрдерд╛рди рдкреГрд╖реНрдарднреВрдорд┐ рдХреЗ рд▓рд┐рдП рдПрдирд┐рдореЗрд╢рди рд╣реИрдВ (рдЕрд░реНрдерд╛рдд, <em>.PIC</em> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП)ред  <em>[рдРрд╕рд╛ рд╣реИред]</em> рдзреНрд╡рдирд┐ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рдЗрд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рдЗрд╕ рдзрд╛рд░рдгрд╛ рдкрд░ рдХрд┐ рдПрдиреАрдореЗрд╢рди рдХреЛ рд╕реАрдзреЗ рдореЗрдореЛрд░реА рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдкреГрд╖реНрдарднреВрдорд┐ рдЫрд╡рд┐ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ ( <em>рд╡реАрдбрд┐рдпреЛ рдореЗрдореЛрд░реА</em> рдореЗрдВ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ <em>рд╕реНрдкреНрд░рд╛рдЗрдЯ рдЪреЗрди рдореЗрдВ</em> ), рдореИрдВрдиреЗ рдПрдиреАрдореЗрд╢рди рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреНрд░рдорд╢рдГ рдЗрд╕ рдореЗрдореЛрд░реА рдХреЛ рдбрдВрдк рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ (рджреЗрдЦреЛ рдЬрд╣рд╛рдВ рдХрд░реНрд╕рд░ рд╢реАрд░реНрд╖ рдкрд░ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ) рдкрддреНрд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ 'S'): </p><br><p><img src="https://habrastorage.org/webt/zp/9a/qn/zp9aqnvcvi-gn3pp0t1puzvhpti.gif" width="32%" height="32%"><img src="https://habrastorage.org/webt/jz/9l/ig/jz9ligummo9j_xwwatid-s0vcri.png" width="32%" height="32%"><img src="https://habrastorage.org/webt/sz/pd/uy/szpduyzc7lgsqum_np9sbvrq4qo.png" width="32%" height="32%"></p><br><pre> <code class="markdown hljs">3DE6:0E26 03 B4 44 B3 ... ;   3DE6:0E26 03 BC CC B3 ... ;  </code> </pre> <br><p>  рдмрд┐рд▓реНрдХреБрд▓ рд╡рд╣реА рдЬреЛ рдореИрдВрдиреЗ рдЙрдореНрдореАрдж рдХреА рдереА - рдЧрд╣рд░реЗ рд▓рд╛рд▓ рд░рдВрдЧ (0x4) рдХреЛ рдмрджрд▓рдХрд░ рдЪрдордХрджрд╛рд░ рд▓рд╛рд▓ (0xC) рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ред  рдЕрдм рдЖрдк рдкрддреЗ рдкрд░ рдорд╛рди рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>3DE6:0E28</code> рдФрд░, рдпрджрд┐ рдЖрдк рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рд╣реИрдВ, рддреЛ рдПрдХ рд░рд┐рд╡рд░реНрд╕ рдЯреНрд░реЗрд╕ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░реЗрдВред  <em>[рдореИрдВ рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рдерд╛ред]</em> рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯ рдиреЗ рдореБрдЭреЗ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рд▓реЗ рдЬрд╛рдпрд╛, рдЬреЛ рд╕реАрдзреЗ рджрд┐рдП рдЧрдП рдкрддреЗ рдкрд░ рдореВрд▓реНрдп рдмрджрд▓рддрд╛ рд╣реИ: <code>xor es:[bx], al</code> ред  рдкрд░рд┐рд╡реЗрд╢ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдореБрдЦреНрдп рд╕реНрддрд░ рдХреЗ рд▓реВрдк рд╕реЗ рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдХреЙрд▓ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдмрдирд╛рдИ: <code>sub_1231E (xor es:[bx], al) &lt;- sub_12222 &lt;- sub_105F6 &lt;- sub_1038F ( )</code> ред </p><br><p>  рдореИрдВ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдКрдВрдЧрд╛ рдХрд┐ рдореИрдВрдиреЗ рдПрдиреАрдореЗрд╢рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХреИрд╕реЗ рдЙрд▓рдЯ рджрд┐рдпрд╛ред  рдпрд╣ рдПрдХ рдХрд╛рдлреА рдирд┐рдпрдорд┐рдд рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд╛рд░реНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИ рдпрджрд┐ рд╕реАрдорд╛рдУрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЪрд┐рддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдкреНрд░рд╛рдкреНрдд рдмреИрдХрдЯреНрд░реИрдХ рдпреЗ рд╕реАрдорд╛рдПрдВ рд╣реИрдВ)ред  рд▓реЗрдХрд┐рди рдореИрдВ рдорджрдж рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд▓реЗрдХрд┐рди рдЕрдВрдд рдореЗрдВ рдХреНрдпрд╛ рд╣реБрдЖ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддрд╛ рд╣реВрдВред </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ <em>.ANH</em> рдкреНрд░рд╛рд░реВрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рдХрдВрдЯреЗрдирд░реЛрдВ рдХрд╛ рдПрдХ рд╕рдореВрд╣ рд╣реИ, рдФрд░ <em>.ANH</em> рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрд╣рд▓рд╛ рд╢рдмреНрдж рдЕрдВрджрд░ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> anh_entries; <span class="hljs-comment"><span class="hljs-comment">/* first entry hdr */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>;</code> </pre> <br><p>  рдХрдВрдЯреЗрдирд░ рд╕реНрд╡рдпрдВ рдкреГрд╖реНрдарднреВрдорд┐ рддрддреНрд╡ рдХрд╛ рдПрдХ рдЕрд▓рдЧ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдПрдиреАрдореЗрд╢рди рд╣реИред  рдЖрдк рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╛рдЗрдЯ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЗрд╕рдХреА рдмрд╛рдЗрдЯ рдХрд╛ рдЖрдХрд╛рд░ рдФрд░ рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдлрд╝реНрд░реЗрдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдЬреЛ рдЗрд╕рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИред  рд╣реЗрдбрд░ рдХреЗ рдЖрдЧреЗ рдЕрдЧрд▓реЗ рдлреНрд░реЗрдо рдХреА рдЕрд╡рдзрд┐ (рджреЗрд░реА) рдФрд░ рдкрд╣рд▓реЗ рдлреНрд░реЗрдо рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рдлреНрд░реЗрдо рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рдХреЗ рдСрдлрд╕реЗрдЯ рдХреЗ рдорд╛рди рд╣реИрдВред  рдРрд╕реЗ рдЬреЛрдбрд╝реЗ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдлреНрд░реЗрдо рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_entry_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> entry_size; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> total_frames; <span class="hljs-comment"><span class="hljs-comment">/* anh_frame_data_t first_frame_data */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* another frames data */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* anh_frame_hdr first_frame_hdr */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* another frames */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_frame_data_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_sleep; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_offset; } <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>*)anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span> *entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)(anh + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; anh-&gt;anh_entries; u++) { <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p = (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)entry; <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *first_frame_data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)(p + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_bytes = p + (entry-&gt;total_frames * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; entry-&gt;total_frames; k++) { <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *frame_data = first_frame_data + k; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *frame_bytes = first_frame_bytes + frame_data-&gt;frame_offset; ... } <span class="hljs-comment"><span class="hljs-comment">/* plus 2 bytes of padding */</span></span> p += (entry-&gt;entry_size + <span class="hljs-number"><span class="hljs-number">2</span></span>); entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)p; }</code> </pre><br><p>  рдПрдХ рдЕрд▓рдЧ рдлреНрд░реЗрдо рдПрдХ рдЪрд╛рд░-рдмрд╛рдЗрдЯ рд╣реЗрдбрд░ рд╕реЗ рдмрдирд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЗрд╕рдХреА рд░реИрдЦрд┐рдХ рдЖрдпрд╛рдо рдФрд░ рдкреГрд╖реНрдарднреВрдорд┐ рдЫрд╡рд┐ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рд╡рд┐рд╕реНрдерд╛рдкрди рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рджреНрд╡рд╛рд░рд╛ рдПрдиреНрдХреЛрдб рдХрд┐рдП рдЧрдП рдлреНрд░реЗрдо рдкрд┐рдХреНрд╕рд▓ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <em>рд░рди рд▓рдВрдмрд╛рдИ</em> рд╕реЗ рдореЗрд░реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">anh_frame_hdr</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> bg_x_offt; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> bg_y_offt; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_width; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_height; <span class="hljs-comment"><span class="hljs-comment">/* rle encoded frame bytes */</span></span> };</code> </pre> <br><p>  рдкреГрд╖реНрдарднреВрдорд┐ рдкрд░ рдлреНрд░реЗрдо рдХрд╛ "рдУрд╡рд░рд▓реЗ" рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *level_bg; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> frame_pix[<span class="hljs-number"><span class="hljs-number">8192</span></span>]; anh_frame_hdr *hdr = (anh_frame_hdr*)frame_bytes; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> frame_len = hdr-&gt;frame_width * hdr-&gt;frame_height; decode_rle(frame + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(anh_frame_hdr), frame_len, frame_pix); <span class="hljs-comment"><span class="hljs-comment">/* 0xFB4E - some magic value, have no idea what is it */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bg_offt = (hdr-&gt;bg_y_offt * <span class="hljs-number"><span class="hljs-number">152</span></span>) + hdr-&gt;bg_x_offt + <span class="hljs-number"><span class="hljs-number">0xFB4E</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bg_skip = <span class="hljs-number"><span class="hljs-number">152</span></span> - hdr-&gt;frame_width; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p1 = frame_pix, *p2 = level_bg; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> i = hdr-&gt;frame_height; i != <span class="hljs-number"><span class="hljs-number">0</span></span>; i--) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> j = hdr-&gt;frame_width; j != <span class="hljs-number"><span class="hljs-number">0</span></span>; j--) { *p2++ ^= *p1++; } p2 += bg_skip; }</code> </pre> <br><p>  рдпрд╣ <em>.ANH рдкреНрд░рд╛рд░реВрдк рд╣реИ</em> , рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рд╕рдВрд░рдЪрдирд╛ рд╣реИ рдЬреЛ рдЗрд╕реЗ рд╕рднреА рдХрд╛рдо рдХрд░рддреА рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bg_animation_control_table_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> total_frames; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_data; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *first_frame_bytes; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sleep; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> curr_frame; } <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span>;</code> </pre> <br><p>  рдЦреЗрд▓ рдореЗрдВ рд╣реА, рдЗрд╕ рддрд░рд╣ рдХреА рдХрдо рд╕реЗ рдХрдо рдЪрд╛рд░ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЛ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЕрдЧрд▓реА <em>.ANH</em> рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЕрдВрджрд░ рдХреЗ рдПрдирд┐рдореЗрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ рднреА рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рд╕рд░рдгреА рдХреЗ рддрддреНрд╡реЛрдВ рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реЗ рдЖрд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *anh; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> g_anim_amount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span> g_anim_ctl[<span class="hljs-number"><span class="hljs-number">4</span></span>]; ... <span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>*)anh; <span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span> *entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)(anh + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_hdr_t</span></span>)); g_anim_amount = hdr-&gt;anh_entries; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; g_anim_amount; u++) { <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *p = (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)entry; g_anim_ctl[u].total_frames = entry-&gt;total_frames; g_anim_ctl[u].first_frame_data = p + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>); g_anim_ctl[u].first_frame_bytes = g_anim_ctl[u].first_frame_data + (entry-&gt;total_frames * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>)); g_anim_ctl[u].sleep = *(<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span>*)(g_animation_control[u].first_frame_data); g_anim_ctl[u].curr_frame = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* plus 2 bytes of padding */</span></span> p += (entry-&gt;entry_size + <span class="hljs-number"><span class="hljs-number">2</span></span>); entry = (<span class="hljs-keyword"><span class="hljs-keyword">anh_entry_hdr_t</span></span>*)p; }</code> </pre><br><p>  рдЕрдВрдд рдореЗрдВ, рдПрдирд┐рдореЗрд╢рди рд▓рд╛рдЧреВ рдХрд░реЗрдВ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> u = <span class="hljs-number"><span class="hljs-number">0</span></span>; u &lt; g_anim_amount; u++) { <span class="hljs-keyword"><span class="hljs-keyword">bg_animation_control_table_t</span></span> *anim = &amp;g_anim_ctl[u]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (anim-&gt;sleep-- == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span> *data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)anim-&gt;first_frame_data + anim-&gt;curr_frame; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++anim-&gt;curr_frame == anim-&gt;total_frames) { anim-&gt;curr_frame = <span class="hljs-number"><span class="hljs-number">0</span></span>; data = (<span class="hljs-keyword"><span class="hljs-keyword">anh_frame_data_t</span></span>*)anim-&gt;first_frame_data; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { data++; } anim-&gt;sleep = data-&gt;frame_sleep; } }</code> </pre> <br><p>  рдФрд░ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ <em>[рдЖрдк рд╕рдВрд╕рд╛рдзрди рджрд░реНрд╢рдХ рдореЗрдВ рдЕрдзрд┐рдХ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ]</em> : </p><br><div class="spoiler">  <b class="spoiler_title">R2.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/p7/lv/fn/p7lvfn5ytpjm5nsoctsumdncuaa.gif"></div></div><br><div class="spoiler">  <b class="spoiler_title">R6.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j6/nb/xp/j6nbxpj29jlrikbmjl8f62s4xmc.gif"></div></div><br><p>  рдЕрднреА рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде рдХреБрдЫ рдореБрджреНрджреЗ рд╣реИрдВред  рдкрд╣рд▓рд╛ рдпрд╣ рд╣реИ рдХрд┐ рдореЗрд░реЗ рдХреЛрдб рдореЗрдВ рдореИрдВ рд╕рднреА рдЙрдкрд▓рдмреНрдз рдПрдирд┐рдореЗрд╢рди рдЦреЗрд▓рддрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╡реИрд╢реНрд╡рд┐рдХ рдЭрдВрдбреЗ рдХреЗ рд▓рд┐рдП рдореВрд▓ рдЪреЗрдХ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдЕрдЧрд▓реЗ рдПрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░рдирд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдФрд░ рджреВрд╕рд░рд╛, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдХреБрдЫ рдПрдирд┐рдореЗрд╢рди рд╕реНрдХреНрд░реАрди рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдЬреЛ рдореВрд▓ рд░реВрдк рд╕реЗ рд╡рд╣рд╛рдВ рдирд╣реАрдВ рд╣реИрдВред  рдФрд░ рдЪреВрдВрдХрд┐ рдлреНрд░реЗрдо "рдЭрдЧрдбрд╝реЗ" рдкреГрд╖реНрдарднреВрдорд┐ рдкрд░ рд╣реИ, рддреЛ рдПрдХ рдЪрдХреНрд░реАрдп рд╕реНрдХреНрд░реЙрд▓ рдХреЗ рд╕рд╛рде, рд╣рд░ рджреВрд╕рд░реЗ рд╕рд░реНрдХрд▓ рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрд╕ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдХреИрд╕реЗ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">R53.ANH.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/d3/5l/iu/d35liujvu6ash9gcdrecvoq9kuc.gif"></div></div><br><p>  рд▓реЗрдХрд┐рди рдЕрднреА рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдЫреЛрдбрд╝ рджреЗрдВ рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рд╣реИред </p><br><hr><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╣рд▓реЗ рднрд╛рдЧ</a> рд╕реЗ рдЕрдЬреНрдЮрд╛рдд рд╡рд┐рдШрдЯрди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдпрд╛рдж рд╣реИ?  рд╡рд┐рдХрд╛рд╕ рд╕реЗ рдмрдореБрд╢реНрдХрд┐рд▓ рдЬреБрдбрд╝рд╛ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рд╡рд┐рд░реА рдиреЗ</a> рди рдХреЗрд╡рд▓ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдХрд┐ рдпрд╣ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╣реИ, рдмрд▓реНрдХрд┐ рдбрд┐рдХреЛрдбрд░ рдХрд╛ рдЕрдкрдирд╛ рд╕рдВрд╕реНрдХрд░рдг рднреА рд▓рд┐рдЦрд╛ рд╣реИ, рдХреЛрдб рдмреЗрд╕ рдореЗрдВ рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЗ рднрдпрд╛рдирдХ рддреАрди-рд▓рд╛рдЗрди рдЯреБрдХрдбрд╝реЗ рдХреА рдЬрдЧрд╣ред  рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ, рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рд╡рд┐рд░реА</a> рд╕реЗ рдХрд╛рдо рдкрд░ рдПрдХ рд▓рдШреБ рдирд┐рдмрдВрдз рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ред  рдЬреЛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рджреВрдВ, рдХреБрдЫ рд╢рдмреНрджреЛрдВ рдХреЛ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рдВрдкреАрдбрд╝рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <em>рдиреНрдпреВрд░реЛрдореИрдВрд╕рд░</em> рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>рдиреЗ рд╣рдлрд╝рдореИрди рдХреЛрдб рдХрд╛</em></a> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред  рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>рдЙрдкрд╕рд░реНрдЧ рдХреЛрдб</em></a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬрд╛рдирдХрд╛рд░реА рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдХреЗ рдкрд╣рд▓реЗ рдкреНрд░рднрд╛рд╡реА рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред  рдХреЛрдбрд┐рдВрдЧ рд╕рд┐рджреНрдзрд╛рдВрдд рдореЗрдВ, рдПрдХ рдЪрд░-рд▓рдВрдмрд╛рдИ рд╢рдмреНрдж рд╡рд╛рд▓реЗ рдХреЛрдб рдФрд░ рдЬрд┐рди рдореЗрдВ рдХреЛрдИ рдХреЛрдбрд╡рд░реНрдб рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рджреВрд╕рд░реЗ рдХрд╛ <em>рдЙрдкрд╕рд░реНрдЧ</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рдпрджрд┐ рд╢рдмреНрдж <em>"a"</em> рдЙрдкрд╕рд░реНрдЧ рдХреЛрдб рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ, рддреЛ <em>"ab"</em> рд╢рдмреНрдж рдХреЛрдб рдореЗрдВ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИред  рдпрд╣ рдЧреБрдг рдЖрдкрдХреЛ рдРрд╕реЗ рдХреЛрдб рджреНрд╡рд╛рд░рд╛ рдПрдиреНрдХреЛрдб рдХрд┐рдП рдЧрдП рд╕рдВрджреЗрд╢ рдХреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рддреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><p>  рд╣рдлрд╝рдореИрди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐, рд╕рдВрджреЗрд╢ рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╡рд░реНрдгрдорд╛рд▓рд╛ рдХреЗ рдкрд╛рддреНрд░реЛрдВ рдХреА рдШрдЯрдирд╛ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЛ рдЬрд╛рдирддреЗ рд╣реБрдП, рд╣рдо рдЪрд░ рд▓рдВрдмрд╛рдИ рдХреЗ рдХреЛрдб рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдмрд┐рдЯреНрд╕ рдХреА рдПрдХ рдкреВрд░реНрдгрд╛рдВрдХ рд╕рдВрдЦреНрдпрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред  рдШрдЯрдирд╛ рдХреА рдЙрдЪреНрдЪ рд╕рдВрднрд╛рд╡рдирд╛ рд╡рд╛рд▓реЗ рдкреНрд░рддреАрдХреЛрдВ рдХреЛ рдЫреЛрдЯреЗ рдХреЛрдб рд╕реМрдВрдкреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдХрдо рд╕рдВрднрд╛рд╡рдирд╛ рд╡рд╛рд▓реЗ рдкреНрд░рддреАрдХреЛрдВ рдХреЛ, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╡рд╛рд▓реЗред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЗрд╖реНрдЯрддрдо рдХреЛрдб рдЯреНрд░реА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░, рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╕рдВрджреЗрд╢ рдкреНрд░рддреАрдХ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рдореИрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкреНрд░рд╛рдкреНрдд рдХреЛрдб рдХреА рдЙрдкрд╕рд░реНрдЧ рд╕рдВрдкрддреНрддрд┐ рдЖрдкрдХреЛ рд╕рдВрдкреАрдбрд╝рд┐рдд рд╕рдВрджреЗрд╢ рдХреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">Huffman.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fa/is/hb/faishbcvf0flxiao-mfmnx3llvu.gif"></div></div><br><p>  рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдореЗрдВ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рджреЛрд╖ рд╣реИ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ)ред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рд╕рдВрдкреАрдбрд╝рд┐рдд рд╕рдВрджреЗрд╢ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдбрд┐рдХреЛрдбрд░ рдХреЛ рдПрдирдХреЛрдбрд░ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╡рд░реНрдгреЛрдВ рдХреА рдШрдЯрдирд╛ рдХреА рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдХреА рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ, рдПрдиреНрдХреЛрдбреЗрдб рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде, рдпрд╛ рддреЛ рдкреНрд░рд╛рдпрд┐рдХрддрд╛ рддрд╛рд▓рд┐рдХрд╛ рдпрд╛ рдХреЛрдб рдЯреНрд░реА рд╕реНрд╡рдпрдВ (рдЧреЗрдо рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╡рд┐рдХрд▓реНрдк) рдкреНрд░реЗрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЕрддрд┐рд░рд┐рдХреНрдд рдбреЗрдЯрд╛ рдХрд╛ рдЖрдХрд╛рд░ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдмрдбрд╝рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╕рдВрдкреАрдбрд╝рди рдХреНрд╖рдорддрд╛ рдХреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЖрдк рдЗрд╕ рд╕реЗ рдХреИрд╕реЗ рдирд┐рдкрдЯ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдФрд░ рд╕рд╛рде рд╣реА рд╕рд╛рде рдЖрдкрдХреЗ рдбрд┐рдХреЛрдбрд░ рдФрд░ рдЧреЗрдо рдореЗрдВ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдмрддрд╛рддрд╛ рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">viiri</a> : </p><br><blockquote>  рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╣реИ рдХрд┐ рдкреВрд░рд╛ рдЦреЗрд▓ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд╕реЗрдВрдмрд▓рд░ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рдХреЛрдб рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдк рд╕рдорд╛рдзрд╛рди, рдЪрд╛рд▓ рдФрд░ рдЕрдиреБрдХреВрд▓рди рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br><br>  рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ред  <code>sub_1ff94</code> ( <code>build_code_table</code> ) рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд╕рдВрдкреАрдбрд╝рд┐рдд рд╣рдлрд╝рдореИрди рдкреЗрдбрд╝ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдПрдХ рд╕реНрдерд┐рд░ рд╣рдлрд╝рдореИрди (рдХрднреА-рдХрднреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрддрд┐рд╢реАрд▓</a> , рдФрд░ рдпрд╣ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЙрд╕ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ) рдХреЛ рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░, рдПрдХ рдХреЛрдб рдЯреНрд░реА рдХреЛ рдкреНрд░реЗрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЪрд░рд┐рддреНрд░ рдХреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рд╣рдлрд╝рдореИрди рдХреЛрдб рдХреА рдореИрдкрд┐рдВрдЧ рд╣реИред  рдпрд╣ рдкреЗрдбрд╝ рдХрд╛рдлреА рдмрдбрд╝рд╛ рд╣реИ рдФрд░ рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рддрд░рд╣ рдХреБрд╢рд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ред  рд╕рдмрд╕реЗ рд╕рд╣реА рддрд░реАрдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреИрдиреЛрдирд┐рдХрд▓ рдХреЛрдб</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">MOAR</a> ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред  рдЙрдирдХреЗ рдЧреБрдгреЛрдВ рдХреЗ рдХрд╛рд░рдг, рдкреЗрдбрд╝ рдХреЛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╣реБрдд рд╣реА рджрд┐рд▓рдЪрд╕реНрдк рдФрд░ рдкреНрд░рднрд╛рд╡реА рддрд░реАрдХрд╛ рд╣реИ ( <em>рдкреАрдХреЗрдЬрд┐рдк</em> рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░ рдХреЗ <em>рдЕрдкрд╕реНрдлреАрддрд┐</em> рд╕рдВрдкреАрдбрд╝рди рд╡рд┐рдзрд┐ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред  рд▓реЗрдХрд┐рди рдЧреЗрдо рдореЗрдВ рдХреИрдиреЛрдирд┐рдХрд▓ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реАрдзрд╛ рдЯреНрд░реА рдЯреНрд░реИрд╡рд░реНрд╕рд▓</a> рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЯреЗрдХреНрд╕ рдмрд┐рдЯ 0 рдХреЗ рд▓рд┐рдП рдЖрдЙрдЯрдкреБрдЯ рд╕реНрдЯреНрд░реАрдо рдХреЛ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐ рдиреЛрдб рдПрдХ рдкрддреНрддреА рдирд╣реАрдВ рд╣реИ, рдпрд╛ рдмрд┐рдЯ 1 рдпрджрд┐ рдиреЛрдб рдПрдХ рдкрддреНрддреА рд╣реИ, рдФрд░ рдлрд┐рд░ рдЕрдЧрд▓реЗ 8 рдмрд┐рдЯреНрд╕ рд╡рд░реНрдг рдХреЛрдб рд╣реИрдВ рд╕рд╛рдЗрдЯред  рдЬрдм рдбрд┐рдХреЛрдбрд┐рдВрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ рд╕рдорд╛рди рдЯреНрд░реА рдЯреНрд░реИрд╡рд░реНрд╕рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдо рдЧреЗрдо рдореЗрдВ рджреЗрдЦрддреЗ рд╣реИрдВред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдФрд░ рдХреБрдЫ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рд╣реИред </blockquote><br><div class="spoiler">  <b class="spoiler_title">build_code_table</b> <div class="spoiler_text"><pre> <code class="hljs sql">build_code_table proc near <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> getbit ;     jb short loc_1FFA9 ;   ... shl dx, 1 inc bx <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> build_code_table ;  build_code_table    or dl, 1 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> build_code_table ;  build_code_table    shr dx, 1 dec bx ret loc_1FFA9: <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> sub_1FFC2 ;      (8 ) ... ;     ret sub_1FF94 endp sub_1FFC2 proc near sub di, di mov ch, 8 loc_1FFC6: <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> getbit rcl di, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">dec</span></span> ch jnz <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> loc_1FFC6 retn sub_1FFC2 endp</code> </pre> </div></div><br><blockquote>  <code>getbit</code> ( <code>sub_1ffd0</code> ) рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░реАрдо рд╕реЗ рдереЛрдбрд╝рд╛ рд╕рд╛ рдкрдврд╝рддрд╛ рд╣реИред  рдЙрд╕рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реЗ рд╣рдореЗрдВ рдпрд╣ рдирд┐рд╖реНрдХрд░реНрд╖ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИ рдХрд┐ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдмрд┐рдЯреНрд╕ рдХреЛ 16-рдмрд┐рдЯ <code>ax</code> рд░рдЬрд┐рд╕реНрдЯрд░ рд╕реЗ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдорд╛рди рдореЗрдореЛрд░реА рд╕реЗ <code>lodsw</code> рдЗрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдЯреНрд░реАрдо рд╕реЗ рджреЛ рдмрд╛рдЗрдЯреНрд╕ рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ <em>рдЗрдВрдЯреЗрд▓ рдкреНрд░реЛрд╕реЗрд╕рд░</em> рдореЗрдВ <em>рдереЛрдбрд╝рд╛-рд╕рд╛ рдПрдВрдбрд┐рдпрди</em> рдмрд╛рдЗрдЯ рдСрд░реНрдбрд░ рд╣реИ, <code>xchg</code> рдЖрдзреЗ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рдкреБрдирд░реНрд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдзрд╛рд░рд╛ рдореЗрдВ рдмрд┐рдЯреНрд╕ рдХрд╛ рдХреНрд░рдо рдХреБрдЫ рдЕрддрд╛рд░реНрдХрд┐рдХ рд╣реИ - рдкрд╣рд▓рд╛ рдХрдо рд╕реЗ рдХрдо рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯ рд╣реИред   ,   <code>shl</code>      ,        <code>jb</code> . </blockquote><br><div class="spoiler"> <b class="spoiler_title">getbit</b> <div class="spoiler_text"><pre> <code class="hljs delphi">getbit proc <span class="hljs-keyword"><span class="hljs-keyword">near</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> cl, cl jz short loc_1FFD9 dec cl <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn loc_1FFD9: cmp si, <span class="hljs-number"><span class="hljs-number">27</span></span>B6h jz short loc_1FFE7 ;   lodsw xchg al, ah mov cl, <span class="hljs-number"><span class="hljs-number">0</span></span>Fh <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn loc_1FFE7: call sub_202FC ;      lodsw xchg al, ah mov cl, <span class="hljs-number"><span class="hljs-number">0</span></span>Fh <span class="hljs-keyword"><span class="hljs-keyword">shl</span></span> ax, <span class="hljs-number"><span class="hljs-number">1</span></span> retn getbit endp</code> </pre> </div></div><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">viiri</a>  ,    : </p><br><div class="spoiler"> <b class="spoiler_title">huffman_decompress</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">node_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> value; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">node_t</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">, *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class">;</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *g_src = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getbits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numbits)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> uint32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getl_le</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*       4-    */</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> node_t* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_tree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span> *node = (<span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>*)<span class="hljs-built_in"><span class="hljs-built_in">calloc</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getbits(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { node-&gt;right = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; node-&gt;left = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; node-&gt;value = getbits(<span class="hljs-number"><span class="hljs-number">8</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { node-&gt;right = build_tree(); node-&gt;left = build_tree(); node-&gt;value = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">huffman_decompress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *src, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dst)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length, i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">node_t</span></span> *root, *node; g_src = src; length = getl_le(); node = root = build_tree(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i &lt; length) { node = getbits(<span class="hljs-number"><span class="hljs-number">1</span></span>) ? node-&gt;left : node-&gt;right; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!node-&gt;left) { dst[i++] = node-&gt;value; node = root; } } ... }</code> </pre></div></div><br><p>       : </p><br><blockquote>    <code>build_code_table</code>    .     ,         ,                .     ,                 .     ,           ,    ,       тАФ   (    <code>huffman_decompress</code> ). <br><br>     ? !       !  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> ,   .       ( <em> </em> ):          . ,         3- ,         <em>N</em>  ,  <em>(3 тАФ N)</em>     . </blockquote><p>       <code>ABCD</code> : <code>A - 0b, B - 10b, C - 110b, D - 111b</code> .       (  ),      ,     : </p><br><table><thead><tr><th>  </th><th>  </th><th>  </th></tr></thead><tbody><tr><td> <strong>0</strong> 00b </td><td> 1 </td><td> A </td></tr><tr><td> <strong>10</strong> 0b </td><td>  2 </td><td> B </td></tr><tr><td> <strong>110</strong> b </td><td> 3 </td><td>  рд╕реА </td></tr><tr><td> <strong>111</strong> b </td><td> 3 </td><td> D </td></tr></tbody></table><br><p>       ,               .  , , ,      <code>010b</code> тАФ     .       .  ,   'A'   <code>0b</code> ,     <em> </em>  ,    .     : </p><br><table><thead><tr><th>  </th><th>  </th><th>  </th><th>  </th></tr></thead><tbody><tr><td>  0 </td><td> <strong>0</strong> 00b </td><td> 1 </td><td> A </td></tr><tr><td> 1 </td><td> <strong>0</strong> 01b </td><td> 1 </td><td> A </td></tr><tr><td>  2 </td><td> <strong>0</strong> 10b </td><td> 1 </td><td> A </td></tr><tr><td> 3 </td><td> <strong>0</strong> 11b </td><td> 1 </td><td> A </td></tr><tr><td> 4 </td><td> <strong>10</strong> 0b </td><td>  2 </td><td> B </td></tr><tr><td> 5 </td><td> <strong>10</strong> 1b </td><td>  2 </td><td> B </td></tr><tr><td>  6 </td><td> <strong>110</strong> b </td><td> 3 </td><td>  рд╕реА </td></tr><tr><td>  7 </td><td> <strong>111</strong> b </td><td> 3 </td><td> D </td></tr></tbody></table><br><p> ,    <code>011010111b</code> : </p><br><ul><li>     : <code>011b</code> ; </li><li>  ,   <code>011b (3)</code> ,   <code>A</code> ,     ; </li><li>   <code>011b</code>    1, ,                 : <code>110b</code> ; </li><li>  ,   <code>110b (6)</code> ,   <code></code> ,     ; </li><li>   ,     . </li></ul><br><p>  ┬л┬╗     8- .      256 .          8 .   ,    ,  : </p><br><blockquote>           :      тАФ  ,          .   ,    .   4 тАФ   32- . </blockquote><p>     ,   .  . </p><br><hr><br><p>       ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>github</em></a> .     ,       ,     ,   -   <em>[ ,    README.md]</em> . </p><br><p>  ,    ,     2015- : </p><br><ul><li> <em>LibNeuroRoutines (, MASM)</em> тАФ ,       ,    .    ( <code>neuro_routines.h</code> )           ,   .     , : <br><ul><li>   ( <code>huffman_decompression.c</code> , <code>decompression.c</code> ); </li><li>    ( <code>cp437.c</code> ); </li><li>     ( <code>dialog.c</code> ); </li><li>    ( <code>audio.c</code> ). </li></ul></li><li> <em>NeuromancerWin64 ()</em> тАФ     .                .     ,       <em>┬л┬╗</em> ,    ,       .       <em>CSFML</em> ( <em>SFML</em>   <em>C</em> ). </li><li> <em>ResourceBrowser (C++)</em> тАФ  .    <em>MFC</em> -,         <em>.DAT</em> -.    : <br><ul><li>     <em>BMP (8bpp)</em>  ( <em>IMH</em> , <em>PIC</em> ); </li><li>   ( <em>ANH</em> ); </li><li>     <em>WAV (PCM, 44100Hz, 8bps, mono)</em>  ( <em>SOUND</em> ). </li></ul></li></ul><br><p>    <em>LibNeuroRoutines</em>   .    <em>LibNeuroRoutines</em>  <em>CSFML</em> ( <em>ResourceBrowser</em>   <em>SFML</em>   ). </p><br><p>       64- <em>Windows</em>     .   ,   <em>LibNeuroRoutines</em>  64- <em>MASM (Microsoft Macro Assembler)</em> .   тАФ    ,      64- . ,      <em>NASM</em>  <em>FASM</em> ,    ,             .      <em>VS 2015</em> тАФ <em>MASM</em>   . </p><br><p>      ,   .         <em>C</em> .     ,           (  ,   <em>MFC</em> ). </p><br><p>   ,       .   - ,      . </p><br><hr><br><p>           .  ? ,  .            ,   .    - ,      . ,    ,     ,     .  (). </p><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Make sound from the speaker using assembly</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Programming the PC Speaker</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PC Speaker</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Programmable Interval Timer</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Making C Sing</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Beyond Beep-Boop: Mastering the PC Speaker</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi417639/">https://habr.com/ru/post/hi417639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi417621/index.html">рдЬрдм рд╣рдордиреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдХреНрд░реИрдХ рдХрд┐рдпрд╛ рддреЛ рдХреНрдпрд╛ рд╣реБрдЖ?</a></li>
<li><a href="../hi417627/index.html">рд╣рд╛рдЗрдкрд░ рд╕реАрдЖрд░рдПрдо рдпрд╛ рдорд┐рдиреА рдИрдЖрд░рдкреА? рдХрд╛рд░реЛрдмрд╛рд░ рдЧрдбрд╝рдмрдбрд╝ рд╣реЛ рдЧрдпрд╛</a></li>
<li><a href="../hi417629/index.html">рдбреЗрд▓реНрдлреА рдФрд░ рд╕реА ++ рдмрд┐рд▓реНрдбрд░ рдХрдореНрдпреБрдирд┐рдЯреА рдПрдбрд┐рд╢рди</a></li>
<li><a href="../hi417631/index.html">рд╕реАрдПрд╕рдПрд╕ рдЧреНрд░рд┐рдб рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓</a></li>
<li><a href="../hi417637/index.html">рд╡реЗрдм рд╕рд╛рдЗрдЯ / рд▓реИрдВрдбрд┐рдВрдЧ (рдЕрдиреБрднрд╡) рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдкрд╛рджрдХ рдХрд╛ рд╡рд┐рдХрд╛рд╕</a></li>
<li><a href="../hi417641/index.html">10 рдЧреНрд░реАрд╖реНрдордХрд╛рд▓реАрди рдорд╢реАрди рд╕реАрдЦрдиреЗ рдХреЗ рдкрд╛рдареНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi417643/index.html">рдХреНрд▓реЛрдХ рдФрд░ рд░реВрдЯрдХрд┐рдЯреНрд╕ рдХреЗ рд╢реВрд░рд╡реАрд░: рд╣реИрдХрд░реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рджреЗрдЦрдирд╛ рд╣реИред рдЯреАрд╡реА рд╢реЛ</a></li>
<li><a href="../hi417645/index.html">рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛: рдЯреНрд░реЗрдбрд┐рдВрдЧ (рдЕрдВрддрд░рд┐рдо рдкрд░рд┐рдгрд╛рдо рдФрд░ рдШреЛрд╖рдгрд╛рдПрдВ)</a></li>
<li><a href="../hi417647/index.html">рдмреЗрд▓рд╛рд░реВрд╕ рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдкрд░ рдПрдХ рдмрд┐рд▓ - рдЗрд╕рдХрд╛ "рдЕрдВрджрд░" рдХреНрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi417649/index.html">OpenAI рдиреЗ Dota 2 рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг AI рд╕реАрдорд╛рдПрдВ рдкрд╛рд░ рдХрд░ рд▓реА рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>