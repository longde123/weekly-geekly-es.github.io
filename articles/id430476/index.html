<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏼 🥪 🚞 NCBI Genome Workbench: Endangered Research 🍵 💆🏻 ☪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Teknologi komputer modern, solusi teknis dan perangkat lunak - semua ini sangat memudahkan dan mempercepat implementasi berbagai penelitian ilmiah. Se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NCBI Genome Workbench: Endangered Research</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/430476/"><img src="https://habrastorage.org/getpro/habr/post_images/9ce/9dc/792/9ce9dc792e9661eba72b3692521754be.png" align="left">  Teknologi komputer modern, solusi teknis dan perangkat lunak - semua ini sangat memudahkan dan mempercepat implementasi berbagai penelitian ilmiah.  Seringkali, simulasi komputer adalah satu-satunya cara untuk menguji banyak teori.  Perangkat lunak ilmiah memiliki karakteristiknya sendiri.  Sebagai contoh, perangkat lunak seperti itu sering mengalami pengujian yang sangat teliti, tetapi tidak terdokumentasi dengan baik.  Namun, perangkat lunak ditulis oleh orang-orang, dan orang membuat kesalahan.  Kesalahan dalam program ilmiah dapat menimbulkan keraguan pada keseluruhan penelitian.  Artikel ini akan mencantumkan lusinan masalah yang ditemukan dalam kode paket perangkat lunak NCBI Genome Workbench. <br><a name="habracut"></a><br><h2>  Pendahuluan </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NCBI Genome Workbench</a> menawarkan kepada para peneliti berbagai alat untuk mempelajari dan menganalisis data genetik.  Pengguna dapat meneliti dan membandingkan data dari beberapa sumber, termasuk database NCBI (Pusat Nasional untuk Informasi Bioteknologi) atau data pribadi mereka sendiri. <br><br>  Seperti disebutkan sebelumnya, perangkat lunak ilmiah biasanya tercakup dengan baik oleh unit test.  Saat memeriksa proyek ini, 85 direktori dengan file uji dikeluarkan dari analisis.  Ini sekitar seribu file.  Mungkin ini disebabkan oleh persyaratan untuk menguji berbagai algoritma kompleks yang ditemukan untuk berbagai penelitian.  Tetapi kualitas sisa kode (bukan yang diuji) tidak pada tingkat setinggi yang kita inginkan.  Namun, seperti dalam setiap proyek di mana mereka belum mengurus memperkenalkan alat analisis kode statis :). <br><br>  Data untuk tinjauan kode (atau bahkan penelitian) disediakan oleh penganalisa kode statis untuk C / C ++ / C # / Java - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PVS-Studio</a> . <br><br><h2>  Hanya dua angka yang merusak proyek Anda </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dad/9f3/20b/dad9f320b84473428205cc1227a20fe6.png"></div><br><br>  Berdasarkan database kesalahan kami, yang saat ini berjumlah lebih dari 12 ribu contoh yang dipilih, kami memperhatikan dan menjelaskan pola spesifik untuk penulisan kode yang mengarah pada banyak kesalahan.  Sebagai contoh, kami melakukan studi berikut: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Efek dari baris terakhir</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fungsi paling berbahaya di dunia C / C ++</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ekspresi logis dalam C / C ++.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Betapa salahnya para profesional</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Jahat hidup dalam fungsi perbandingan</a> . </li></ol><br>  Proyek ini menandai awal dari deskripsi pola baru.  Kita berbicara tentang angka <b>1</b> dan <b>2</b> dalam nama variabel, misalnya, <i>file1</i> dan <i>file2</i> , dll.  Sangat mudah untuk membingungkan dua variabel tersebut.  Ini adalah kasus kesalahan ketik khusus dalam kode, tetapi satu kesalahan seperti itu menghasilkan keinginan untuk bekerja dengan variabel-variabel dengan nama yang sama, yang hanya berbeda dengan angka 1 dan 2 pada akhir nama. <br><br>  Ke depan sedikit, saya akan mengatakan bahwa semua studi yang tercantum di atas dikonfirmasi dalam kode proyek ini: D. <br><br>  Pertimbangkan contoh pertama dari proyek Genome Workbench: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V501</a> Ada sub-ekspresi identik '(! Loc1.IsInt () &amp;&amp;! Loc1.IsWhole ())' di sebelah kiri dan di sebelah kanan '||'  operator.  nw_aligner.cpp 480 <br><br><pre><code class="cpp hljs">CRef&lt;CSeq_align&gt; CNWAligner::Run(CScope &amp;scope, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CSeq_loc &amp;loc1, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CSeq_loc &amp;loc2, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> trim_end_gaps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!loc1.IsInt() &amp;&amp; !loc1.IsWhole()) || (!loc1.IsInt() &amp;&amp; !loc1.IsWhole())) { NCBI_THROW(CException, eUnknown, <span class="hljs-string"><span class="hljs-string">"Only whole and interval locations supported"</span></span>); } .... }</code> </pre> <br>  Kami melihat dua variabel bernama <i>loc1</i> dan <i>loc2</i> .  Dan juga kesalahan dalam kode: variabel <i>loc2</i> tidak digunakan, karena alih-alih itu <i>loc1</i> digunakan sekali lagi. <br><br>  Contoh lain: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V560</a> Bagian dari ekspresi kondisional selalu salah: s1.IsSet ().  valid_biosource.cpp 3073 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s_PCRPrimerSetLess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> CPCRPrimerSet&amp; s1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> CPCRPrimerSet&amp; s2)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!s1.IsSet() &amp;&amp; s1.IsSet()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s1.IsSet() &amp;&amp; !s2.IsSet()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!s1.IsSet() &amp;&amp; !s2.IsSet()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s1.Get().size() &lt; s2.Get().size()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s1.Get().size() &gt; s2.Get().size()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ..... }</code> </pre> <br>  Baris pertama dari kode mencampur variabel <i>s1</i> dan <i>s2</i> .  Berdasarkan namanya, ini adalah fungsi perbandingan.  Tetapi kesalahan seperti itu bisa terjadi di mana saja, karena dengan memberi nama variabel <i>Nomor 1</i> dan <i>Nomor 2</i> , programmer hampir pasti akan membuat kesalahan di masa depan.  Dan semakin banyak menggunakan nama-nama tersebut dalam suatu fungsi, semakin tinggi kemungkinan kesalahan. <br><br><h2>  Kesalahan ketik dan salin-tempel lainnya </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d5/d9f/f6b/6d5d9ff6bf8083922701b25273fa50b2.png"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V501</a> Ada sub-ekspresi identik ke kiri dan ke kanan Operator '! =': Bd.bit_.bits [i]! = Bd.bit_.bits [i] bm.h 296 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compare_state</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> iterator_base&amp; ib)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;block_type_ == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bd.bit_.ptr != ib_db.bit_.ptr) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bd.bit_.idx != ib_db.bit_.idx) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bd.bit_.cnt != ib_db.bit_.cnt) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bd.bit_.pos != ib_db.bit_.pos) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bd.bit_.cnt; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bd.bit_.bits[i] != bd.bit_.bits[i]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } .... }</code> </pre> <br>  Saya percaya bahwa setelah semua pemeriksaan, ukuran array <i>bit</i> dari objek <i>bd.bit_</i> dan <i>ib_db.bit_</i> sama.  Oleh karena itu, penulis kode menulis satu siklus untuk perbandingan elemen array <i>bit</i> , tetapi membuat kesalahan ketik atas nama salah satu objek yang dibandingkan.  Akibatnya, objek yang dibandingkan dapat secara keliru dianggap sama dalam beberapa situasi. <br><br>  Contoh ini layak untuk artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Jahat hidup dalam fungsi perbandingan</a> " <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V501</a> Ada sub-ekspresi identik 'CFieldHandler :: QualifierNamesAreEquivalent (bidang, kFieldTypeSeqId)' ke kiri dan ke kanan '||'  operator.  field_handler.cpp 152 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CFieldHandlerFactory::s_IsSequenceIDField(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; field) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( CFieldHandler::QualifierNamesAreEquivalent(field, kFieldTypeSeqId) || CFieldHandler::QualifierNamesAreEquivalent(field, kFieldTypeSeqId)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  Kemungkinan besar, salah satu dari cek itu berlebihan.  Saya tidak menemukan variabel kode yang mirip dengan <i>kFieldTypeSeqId</i> .  Namun demikian, panggilan fungsi tambahan dimungkinkan karena operator "||", yang menurunkan kinerja. <br><br>  Beberapa lagi dari jenis tempat yang sama dengan peringatan penganalisa, membutuhkan verifikasi: <br><br><ul><li>  V501 Ada sub-ekspresi identik 'uf-&gt; GetData (). IsBool ()' di sebelah kiri dan di sebelah kanan operator '&amp;&amp;'.  variasi_utils.cpp 1711 </li><li>  V501 Ada sub-ekspresi identik 'uf-&gt; GetData (). IsBool ()' di sebelah kiri dan di sebelah kanan operator '&amp;&amp;'.  variasi_utils.cpp 1735 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V766</a> Item dengan kunci yang sama 'kArgRemote' telah ditambahkan.  blast_args.cpp 3262 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CBlastAppArgs::x_IssueWarningsForIgnoredOptions(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CArgs&amp; args) { <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; can_override; .... can_override.insert(kArgOutputFormat); can_override.insert(kArgNumDescriptions); can_override.insert(kArgNumAlignments); can_override.insert(kArgMaxTargetSequences); can_override.insert(kArgRemote); <span class="hljs-comment"><span class="hljs-comment">// &lt;= can_override.insert(kArgNumThreads); can_override.insert(kArgInputSearchStrategy); can_override.insert(kArgRemote); // &lt;= can_override.insert("remote_verbose"); can_override.insert("verbose"); .... }</span></span></code> </pre> <br>  Alat analisis mendeteksi penambahan 2 nilai identik ke wadah yang <i>ditetapkan</i> .  Ingat bahwa wadah ini hanya menyimpan nilai unik, jadi duplikat tidak ditambahkan ke dalamnya. <br><br>  Kode seperti di atas sering ditulis menggunakan metode salin-tempel.  Mungkin saja ada nilai tambahan, atau mungkin penulis lupa untuk mengganti nama salah satu variabel ketika ia menyalin.  Saat Anda menghapus panggilan tambahan untuk <i>disisipkan,</i> kode sedikit dioptimalkan, yang, bagaimanapun, tidak signifikan.  Lebih penting lagi, kesalahan serius dapat disembunyikan di sini karena elemen yang hilang di set. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V523</a> Pernyataan 'maka' setara dengan fragmen kode berikutnya.  vcf_reader.cpp 1105 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CVcfReader::xAssignFeatureLocationSet(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data.m_SetType == CVcfData::ST_ALL_DEL) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data.m_strRef.size() == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//deletion of a single base pFeat-&gt;SetLocation().SetPnt().SetPoint(data.m_iPos-1); pFeat-&gt;SetLocation().SetPnt().SetId(*pId); } else { pFeat-&gt;SetLocation().SetInt().SetFrom(data.m_iPos-1); //-1 for 0-based, //another -1 for inclusive end-point ( ie [], not [) ) pFeat-&gt;SetLocation().SetInt().SetTo( data.m_iPos -1 + data.m_strRef.length() - 1); pFeat-&gt;SetLocation().SetInt().SetId(*pId); } return true; } //default: For MNV's we will use the single starting point //NB: For references of size &gt;=2, this location will not //match the reference allele. Future Variation-ref //normalization code will address these issues, //and obviate the need for this code altogether. if (data.m_strRef.size() == 1) { //deletion of a single base pFeat-&gt;SetLocation().SetPnt().SetPoint(data.m_iPos-1); pFeat-&gt;SetLocation().SetPnt().SetId(*pId); } else { pFeat-&gt;SetLocation().SetInt().SetFrom(data.m_iPos-1); pFeat-&gt;SetLocation().SetInt().SetTo( data.m_iPos -1 + data.m_strRef.length() - 1); pFeat-&gt;SetLocation().SetInt().SetId(*pId); } return true; }</span></span></code> </pre> <br>  Fungsi ini berisi fragmen kode besar dan benar-benar identik.  Namun, mereka berisi berbagai komentar yang menyertainya.  Kode tidak ditulis secara optimal, membingungkan, dan mungkin mengandung kesalahan. <br><br>  Seluruh daftar tempat mencurigakan dengan pernyataan if-else terlihat seperti ini: <br><br><ul><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  blk.c 2142 </li><li>  V523 Pernyataan 'maka' setara dengan fragmen kode berikutnya.  odbc.c 379 </li><li>  V523 Pernyataan 'maka' setara dengan fragmen kode berikutnya.  odbc.c 1414 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  seqdbvol.cpp 1922 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  seqdb_demo.cpp 466 </li><li>  V523 Pernyataan 'maka' setara dengan fragmen kode berikutnya.  blast_engine.c 1917 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  blast_filter.c 420 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  blast_parameters.c 636 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  unordered_spliter.cpp 684 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  bme.cpp 333 </li><li>  V523 Pernyataan 'lalu' sama dengan pernyataan 'lain'.  gme.cpp 484 </li></ul><br><h2>  / * dengan keamanan paling baik menjadi bertele-tele * / </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/914/df5/670/914df5670813e7eb410e446f60a0ed5e.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V597</a> Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'passwd_buf'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 366 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Crypt a given password using schema required for NTLMv1 authentication * @param passwd clear text domain password * @param challenge challenge data given by server * @param flags NTLM flags from server side * @param answer buffer where to store crypted password */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tds_answer_challenge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_PW_SZ 14 .... </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (ntlm_v == 1) { .... </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* with security is best be pedantic */</span></span></span><span class="hljs-meta"> memset(hash, 0, sizeof(hash)); memset(passwd_buf, 0, sizeof(passwd_buf)); memset(ntlm2_challenge, 0, sizeof(ntlm2_challenge)); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { .... } }</span></span></code> </pre> <br>  Seperti yang mungkin sudah Anda tebak, komentar lucu tentang keamanan dari kode digunakan pada judul bagian. <br><br>  Singkatnya, fungsi <i>memset</i> akan dihapus oleh kompiler, karena buffer flush tidak lagi digunakan.  Dan data seperti <i>hash</i> atau <i>passwd_buf</i> tidak akan benar-benar nol.  Untuk informasi lebih lanjut tentang mekanisme kompiler yang tidak jelas ini, lihat artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aman Membersihkan Data Pribadi</a> ". <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V597</a> Kompilator dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'jawab'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 561 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> TDSRET </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tds7_send_auth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">/* for security reason clear structure */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;answer, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(TDSANSWER)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tds_flush_packet(tds); }</code> </pre> <br>  Itu bukan satu-satunya contoh dengan komentar tentang "keamanan".  Dilihat dari komentar, dapat diasumsikan bahwa keamanan sangat penting untuk proyek.  Oleh karena itu, saya melampirkan seluruh daftar masalah yang tidak kecil: <br><br><ul><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk menyiram objek 'heap'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  ncbi_heapmgr.c 1300 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'konteks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 167 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 339 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'md5_ctx'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 353 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'hash'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 365 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 406 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ntlm_v2_response'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  login.c 795 </li><li>  V597 Kompilator dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'jawab'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  login.c 801 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'paket'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  numeric.c 256 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'paket'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  numeric.c 110 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'pwd'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  getpassarg.c 50 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'konteks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 188 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'buf'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 243 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'ntlm_v2_hash'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 309 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'md5_ctx'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 354 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'passwd_buf'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 380 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 393 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'hash'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 394 </li><li>  V597 Kompiler dapat menghapus pemanggilan fungsi 'memset', yang digunakan untuk membersihkan buffer 'ntlm2_challenge'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  tantangan.c 395 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ks'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 419 </li><li>  V597 Kompiler dapat menghapus panggilan fungsi 'memset', yang digunakan untuk menyiram objek 'ntlm_v2_response'.  Fungsi memset_s () harus digunakan untuk menghapus data pribadi.  challenge.c 556 </li></ul><br><h2>  Siklus yang mencurigakan </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ac/c77/124/8acc77124e5a13a1d25926c95d9eb2cf.png"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V534</a> Kemungkinan variabel yang salah sedang dibandingkan di dalam operator 'untuk'.  Pertimbangkan untuk meninjau 'i'.  taxFormat.cpp 569 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CTaxFormat::x_LoadTaxTree(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; alignTaxids.size(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tax_id = alignTaxids[i]; .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; taxInfo.seqInfoList.size(); j++) { SSeqInfo* seqInfo = taxInfo.seqInfoList[j]; seqInfo-&gt;taxid = newTaxid; } .... } .... }</code> </pre> <br>  Saya pikir, dalam kondisi loop dalam, variabel <i>saya</i> mendapatkannya secara acak.  Sebagai gantinya, variabel <i>j</i> harus digunakan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V535</a> Variabel 'i' digunakan untuk loop ini dan untuk loop luar.  Periksa baris: 302, 309. sls_alp.cpp 309 <br><br><pre> <code class="cpp hljs">alp::~alp() { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(d_alp_states) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;=d_nalp;i++) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { if(i&lt;=d_alp_states-&gt;d_dim) { if(d_alp_states-&gt;d_elem[i]) { for(i=0;i&lt;=d_nalp;i++) // &lt;= { .... .... }</span></span></code> </pre> <br>  Dua siklus identik bersarang, di mana penghitung global juga diatur ulang, terlihat sangat mencurigakan.  Pengembang harus memeriksa apa yang terjadi di sini. <br><br><h2>  Array pengindeksan tidak normal </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a8/136/5b2/4a81365b2534c606f6d12df389841299.png"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V520</a> Operator koma ',' dalam ekspresi indeks larik '[- ​​i2, - k]'.  nw_spliced_aligner16.cpp 564 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CSplicedAligner16::x_DoBackTrace ( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Uint2* backtrace_matrix, CNWAligner::SAlignInOut* data, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i_global_max, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j_global_max) { .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(intron_length &lt; m_IntronMinSize || (Key &amp; donor) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { Key = backtrace_matrix[--i2, --k]; ++intron_length; data-&gt;m_transcript.push_back(eTS_Intron); } .... }</code> </pre> <br>  Saya harus mengatakan segera bahwa sepertinya tidak ada kesalahan (untuk saat ini, lol).  Pertimbangkan baris berikut: <br><br><pre> <code class="cpp hljs">Key = backtrace_matrix[--i2, --k];</code> </pre> <br>  Kata 'matrix' dan pengindeksan ganda dapat menunjukkan bahwa array adalah dua dimensi, tetapi tidak.  Ini adalah pointer reguler ke array bilangan bulat.  Tetapi diagnostik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V520</a> tidak muncul begitu saja.  Pemrogram benar-benar bingung tentang cara mengindeks array dua dimensi. <br><br>  Dalam hal ini, penulis hanya memutuskan untuk menghemat satu baris kode, meskipun ia dapat menulis seperti ini: <br><br><pre> <code class="cpp hljs">--i2; Key = backtrace_matrix[--k];</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V661</a> Ekspresi mencurigakan 'A [B == C]'.  Mungkin berarti 'A [B] == C'.  ncbi_service_connector.c 180 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> EHTTP_HeaderParse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s_ParseHeader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* header, ....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">sscanf</span></span>(header, <span class="hljs-string"><span class="hljs-string">"%u.%u.%u.%u%n"</span></span>, &amp;i1, &amp;i2, &amp;i3, &amp;i4, &amp;n) &lt; <span class="hljs-number"><span class="hljs-number">4</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">sscanf</span></span>(header + n, <span class="hljs-string"><span class="hljs-string">"%hu%x%n"</span></span>, &amp;uuu-&gt;port, &amp;tkt, &amp;m) &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || (header[m += n] &amp;&amp; !(header[m] == <span class="hljs-string"><span class="hljs-string">'$'</span></span>) &amp;&amp; !<span class="hljs-built_in"><span class="hljs-built_in">isspace</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>)((header + m) [header[m] == <span class="hljs-string"><span class="hljs-string">'$'</span></span>])))) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span><span class="hljs-comment"><span class="hljs-comment">/*failed - unreadable connection info*/</span></span>; } .... }</code> </pre> <br>  Contoh lain dari kode di mana saya menghabiskan waktu lama mencoba memahami apa yang sedang terjadi: D.  Fungsi <i>isspace ()</i> memeriksa karakter dengan indeks <i>m</i> , tetapi jika karakter ini adalah '$', maka karakter dengan indeks <i>m + 1</i> diteruskan ke fungsi.  Apalagi perbandingan dengan '$' sudah lebih dulu.  Mungkin tidak ada kesalahan di sini, tetapi kode pasti dapat ditulis ulang lebih jelas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V557</a> Array overrun dimungkinkan.  Indeks 'baris' menunjuk di luar batas array.  aln_reader.cpp 412 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CAlnReader::x_IsGap(TNumrow row, TSeqPos pos, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; residue) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_MiddleSections.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { x_CalculateMiddleSections(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (row &gt; m_MiddleSections.size()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pos &lt; m_MiddleSections[row].first) { .... } .... }</code> </pre> <br>  Di sini ada kesalahan serius.  Pemeriksaan indeks <i>baris yang</i> benar harus seperti ini: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (row &gt;= m_MiddleSections.size()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br>  Jika tidak, dimungkinkan untuk mengakses data di luar vektor <i>MiddleSections</i> . <br><br>  Banyak tempat seperti itu: <br><br><ul><li>  V557 Array overrun dimungkinkan.  Indeks 'i' menunjuk di luar batas array.  resource_pool.hpp 388 </li><li>  V557 Array overrun dimungkinkan.  Indeks 'baris' menunjuk di luar batas array.  aln_reader.cpp 418 </li><li>  V557 Array overrun dimungkinkan.  Indeks 'fmt_idx' menunjuk di luar batas array.  seq_writer.cpp 384 </li><li>  V557 Array overrun dimungkinkan.  Indeks 'fmt_idx' menunjuk di luar batas array.  blastdb_formatter.cpp 183 </li><li>  V557 Array overrun dimungkinkan.  Indeks 'num' menunjuk di luar batas array.  newcleanupp.cpp 13035 </li></ul><br><h2>  Cara mendapatkan ketidakpercayaan fungsi </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/147/029/c18/147029c18e4ccacc04f11f688084034f.png"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V570</a> Variabel 'm_onClickFunction' ditugaskan untuk dirinya sendiri.  alngraphic.hpp 103 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetOnClickFunctionName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> onClickFunction)</span></span></span><span class="hljs-function"> </span></span>{ m_onClickFunction = m_onClickFunction; }</code> </pre> <br>  Bahkan tidak ada yang bisa dikomentari.  Anda hanya dapat bersimpati dengan orang yang mengklik sesuatu, mengklik, tetapi tidak ada yang berubah. <br><br>  Dua kasus penugasan variabel untuk saya sendiri akan menghasilkan daftar: <br><br><ul><li>  V570 Variabel 'iter-&gt; level' ditugaskan untuk dirinya sendiri.  align_format_util.cpp 189 </li><li>  V570 Variabel 'd_elements_values ​​[ind]' ditugaskan untuk dirinya sendiri.  sls_alp_data.cpp 1416 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V763</a> Parameter 'w1' selalu ditulis ulang di badan fungsi sebelum digunakan.  bmfunc.h 5363 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Bit COUNT functor template&lt;typename W&gt; struct bit_COUNT { W operator()(W w1, W w2) { w1 = 0; BM_INCWORD_BITCOUNT(w1, w2); return w1; } };</span></span></code> </pre> <br>  Sebuah fungsi di mana argumen menjadi usang segera setelah memasuki fungsi dapat menyesatkan para pengembang yang menggunakannya.  Kode harus diperiksa ulang. <br><br><h2>  Kesalahan Desain Kelas </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/033/e75/06c/033e7506c36604696731f73024f57c78.png"></div><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V688</a> Argumen fungsi 'm_qsrc' memiliki nama yang sama dengan salah satu anggota kelas, yang dapat mengakibatkan kebingungan.  compart_matching.cpp 873 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CElementaryMatching</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CObject { .... ISequenceSource * m_qsrc; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x_CreateIndex</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ISequenceSource *m_qsrc, EIndexMode index_more, ....)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x_CreateRemapData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ISequenceSource *m_qsrc, EIndexMode mode)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x_LoadRemapData</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ISequenceSource *m_qsrc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; sdb)</span></span></span></span>; .... };</code> </pre> <br>  Segera 3 fungsi kelas berisi argumen yang namanya bertepatan dengan bidang kelas.  Ini dapat menyebabkan kesalahan dalam badan fungsi: programmer mungkin berpikir bahwa ia bekerja dengan anggota kelas, sebenarnya mengubah nilai variabel lokal. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V614</a> Variabel tidak diinisialisasi 'm_BitSet' digunakan.  SnpBitAttributes.hpp 187 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// SNP bit attribute container. class CSnpBitAttributes { public: .... private: /// Internal storage for bits. Uint8 m_BitSet; }; inline CSnpBitAttributes::CSnpBitAttributes(Uint8 bits) : m_BitSet(bits) { } inline CSnpBitAttributes::CSnpBitAttributes(const vector&lt;char&gt;&amp; octet_string) { auto count = sizeof(m_BitSet); auto byte = octet_string.end(); do m_BitSet = (m_BitSet &lt;&lt; 8) | *--byte; while (--count &gt; 0); }</span></span></code> </pre> <br>  Salah satu konstruktor dengan <i>sembrono</i> bekerja dengan variabel <i>m_BitSet</i> .  Faktanya adalah bahwa variabel tersebut tidak diinisialisasi.  Nilai "sampah" digunakan pada iterasi pertama loop, setelah inisialisasi terjadi.  Ini adalah kesalahan yang sangat serius, yang mengarah ke perilaku program yang tidak ditentukan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V603</a> Objek telah dibuat tetapi tidak sedang digunakan.  Jika Anda ingin memanggil konstruktor, 'this-&gt; SIntervalComparisonResult :: SIntervalComparisonResult (....)' harus digunakan.  compare_feats.hpp 100 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//This struct keeps the result of comparison of two exons struct SIntervalComparisonResult : CObject { public: SIntervalComparisonResult(unsigned pos1, unsigned pos2, FCompareLocs result, int pos_comparison = 0) : m_exon_ordinal1(pos1), m_exon_ordinal2(pos2), m_result(result), m_position_comparison(pos_comparison) {} SIntervalComparisonResult() { SIntervalComparisonResult(0, 0, fCmp_Unknown, 0); } .... };</span></span></code> </pre> <br>  Dulu sekali saya tidak menemui kesalahan seperti itu saat memeriksa proyek.  Namun masalahnya masih relevan.  Kesalahannya adalah bahwa memanggil konstruktor parameter dengan cara ini membuat dan menghapus objek sementara.  Dan bidang kelas tetap tidak diinisialisasi.  Konstruktor lain harus dipanggil melalui daftar inisialisasi (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mendelegasikan konstruktor</a> ). <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fungsi V591</a> Non-void harus mengembalikan nilai.  bio_tree.hpp 266 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Recursive assignment CBioNode&amp; operator=(const CBioNode&amp; tree) { TParent::operator=(tree); TBioTree* pt = (TBioTree*)tree.GetParentTree(); SetParentTree(pt); }</span></span></code> </pre> <br>  Penganalisa menganggap bahwa garis hilang dalam pernyataan kelebihan beban: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V670</a> Anggota kelas yang tidak diinisialisasi 'm_OutBlobIdOrData' digunakan untuk menginisialisasi anggota 'm_StdOut'.  Ingat bahwa anggota diinisialisasi dalam urutan deklarasi mereka di dalam kelas.  remote_app.hpp 215 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NCBI_XCONNECT_EXPORT</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CRemoteAppResult</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: CRemoteAppResult(CNetCacheAPI::TInstance netcache_api, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> max_inline_size = kMaxBlobInlineSize) : m_NetCacheAPI(netcache_api), m_RetCode(<span class="hljs-number"><span class="hljs-number">-1</span></span>), m_StdOut(netcache_api, m_OutBlobIdOrData, m_OutBlobSize), m_OutBlobSize(<span class="hljs-number"><span class="hljs-number">0</span></span>), m_StdErr(netcache_api, m_ErrBlobIdOrData, m_ErrBlobSize), m_ErrBlobSize(<span class="hljs-number"><span class="hljs-number">0</span></span>), m_StorageType(eBlobStorage), m_MaxInlineSize(max_inline_size) { } .... };</code> </pre> <br>  3 peringatan penganalisa segera dikeluarkan untuk fragmen kode ini.  Bidang kelas diinisialisasi bukan dalam urutan yang tercantum dalam daftar inisialisasi, tetapi dengan cara mereka dinyatakan dalam kelas.  Penyebab klasik kesalahan ini adalah bahwa tidak semua programmer ingat atau tahu tentang aturan ini.  Di sini dan di daftar inisialisasi hanya urutan yang salah.  Orang mendapat perasaan bahwa daftar bidang dimasukkan dalam urutan acak. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V746 Mengiris</a> objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  cobalt.cpp 247 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CMultiAligner::SetQueries(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt; CRef&lt;objects::CBioseq&gt; &gt;&amp; queries) { .... <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { seq_loc-&gt;SetId(*it-&gt;GetSeqId()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (objects::CObjMgrException e) { NCBI_THROW(CMultiAlignerException, eInvalidInput, (<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>)<span class="hljs-string"><span class="hljs-string">"Missing seq-id in bioseq. "</span></span> + e.GetMsg()); } m_tQueries.push_back(seq_loc); .... }</code> </pre> <br>  Menangkap pengecualian berdasarkan nilai dapat menyebabkan hilangnya beberapa informasi tentang pengecualian karena pembuatan objek baru.  Jauh lebih baik dan lebih aman untuk menangkap pengecualian dengan referensi. <br><br>  Tempat serupa: <br><br><ul><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  agp_validate_reader.cpp 562 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  aln_build_app.cpp 320 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  aln_test_app.cpp 458 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  cobalt.cpp 691 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  cobalt.cpp 719 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  cobalt.cpp 728 </li><li>  V746 Mengiris objek.  Pengecualian harus ditangkap dengan referensi bukan oleh nilai.  cobalt.cpp 732 </li></ul><br><h2>  Tentang kode yang tidak terjangkau dan masalah eksekusi kode lainnya </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d1/8f5/263/1d18f52633776adc7ca32f92446c4b9f.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V779</a> Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  merge_tree_core.cpp 627 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CMergeTree::x_FindBefores_Up_Iter(....) { .... FirstFrame-&gt;Curr = StartCurr; FirstFrame-&gt;Returned = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; FirstFrame-&gt;VisitCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; FrameStack.push_back(FirstFrame); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!FrameStack.empty()) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Rel == CEquivRange::eAfter) { Frame-&gt;Returned = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; FrameStack.pop_back(); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Rel == CEquivRange::eBefore) { .... <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Frame-&gt;VisitCount == <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } } Frame-&gt;Returned = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= FrameStack.pop_back(); continue; } // end stack loop FirstFrame-&gt;ChildFrames.clear(); return FirstFrame-&gt;Returned; }</span></span></code> </pre> <br>  Kode pernyataan kondisional ditulis sehingga benar-benar semua cabang kode diakhiri dengan pernyataan <i>continue</i> .  Hal ini menyebabkan beberapa baris pembentukan kode yang tidak terjangkau dalam <i>loop while</i> .  Garis-garis ini terlihat sangat mencurigakan.  Kemungkinan besar, masalah ini muncul setelah refactoring kode, dan sekarang membutuhkan tinjauan kode yang cermat. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V519 Variabel</a> 'interval_width' diberi nilai dua kali berturut-turut.  Mungkin ini sebuah kesalahan.  Periksa baris: 454, 456. aln_writer.cpp 456 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CAlnWriter::AddGaps(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(exon_chunk-&gt;Which()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CSpliced_exon_chunk::e_Match: interval_width = exon_chunk-&gt;GetMatch(); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CSpliced_exon_chunk::e_Mismatch: interval_width = exon_chunk-&gt;GetMismatch(); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CSpliced_exon_chunk::e_Diag: interval_width = exon_chunk-&gt;GetDiag(); genomic_string.append(....); product_string.append(....); genomic_pos += interval_width; product_pos += interval_width/res_width; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; .... } .... }</code> </pre> <br>  Variabel <i>interval_width</i> ditimpa beberapa kali, karena  tidak ada pernyataan <i>istirahat</i> di cabang <i>kasus</i> .  Meski klasik, tapi kesalahannya sangat buruk. <br><br>  Beberapa tempat mencurigakan: <br><br><ul><li>  V779 Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  dbapi_driver_utils.cpp 351 </li><li>  V779 Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  net.c 780 </li><li>  V779 Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  bcp.c 1495 </li><li>  V779 Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  remote_blast.cpp 1470 </li><li>  V779 Kode tidak terjangkau terdeteksi.  Mungkin saja ada kesalahan.  remote_blast.cpp 1522 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V571</a> Cek berulang.  Kondisi 'if (m_QueryOpts-&gt; filtering_options)' sudah diverifikasi di baris 703. blast_options_local_priv.hpp 713 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CBlastOptionsLocal::SetFilterString(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* f) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_QueryOpts-&gt;filtering_options) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { SBlastFilterOptions* old_opts = m_QueryOpts-&gt;filtering_options; m_QueryOpts-&gt;filtering_options = NULL; SBlastFilterOptionsMerge(&amp;(m_QueryOpts-&gt;filtering_options), old_opts, new_opts); old_opts = SBlastFilterOptionsFree(old_opts); new_opts = SBlastFilterOptionsFree(new_opts); } else { if (m_QueryOpts-&gt;filtering_options) // &lt;= m_QueryOpts-&gt;filtering_options = SBlastFilterOptionsFree(m_QueryOpts-&gt;filtering_options); m_QueryOpts-&gt;filtering_options = new_opts; new_opts = NULL; } .... }</span></span></code> </pre> <br>  Jelas, cabang <i>lain</i> membutuhkan penulisan ulang.  Saya punya beberapa ide yang ingin saya lakukan dengan pointer <i>m_QueryOpts-&gt; filtering_options</i> , tetapi kodenya entah bagaimana masih membingungkan.  Saya memohon kepada penulis kode. <br><br>  Nah, masalahnya tidak datang sendiri: <br><br><ul><li>  V571 Cek berulang.  Kondisi 'if (sleeptime)' sudah diverifikasi di baris 205. request_control.cpp 208 </li><li>  V571 Cek berulang.  Kondisi 'jika (assignValue.empty ())' sudah diverifikasi di baris 712. classstr.cpp 718 </li></ul><br><h2>  Kesalahan Baca Data </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/761/548/f6b/761548f6b44470fe7b64db8ce0b0eb11.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V739</a> EOF tidak boleh dibandingkan dengan nilai tipe 'char'.  'Linestring [0]' harus dari tipe 'int'.  alnread.c 3509 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> EBool </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s_AfrpInitLineData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* linestring = readfunc (pfile); .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">while</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (linestring != </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">NULL</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;&amp; linestring [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">] != EOF) { s_TrimSpace (&amp;linestring); .... } .... }</span></span></span></span></code> </pre> <br>  Karakter yang Anda rencanakan untuk dibandingkan dengan EOF tidak boleh disimpan dalam variabel <i>char</i> .  Jika tidak, ada risiko bahwa karakter dengan nilai 0xFF (255) akan berubah menjadi -1 dan akan ditafsirkan dengan cara yang sama dengan akhir file (EOF).  Juga (untuk berjaga-jaga) ada baiknya memeriksa implementasi fungsi <i>readfunc</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V663</a> Infinite loop dimungkinkan.  Kondisi 'cin.eof ()' tidak cukup untuk memutuskan dari loop.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertimbangkan untuk menambahkan pemanggilan fungsi 'cin.fail ()' ke ekspresi kondisional. </font><font style="vertical-align: inherit;">ncbicgi.cpp 1564</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::istream CNcbiIstream; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CCgiRequest::Serialize(CNcbiOstream&amp; os) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... CNcbiIstream* istrm = GetInputStream(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (istrm) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buf[<span class="hljs-number"><span class="hljs-number">1024</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!istrm-&gt;eof()) { istrm-&gt;read(buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf)); os.write(buf, istrm-&gt;gcount()); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penganalisa mendeteksi kesalahan potensial karena loop infinite dapat terjadi. </font><font style="vertical-align: inherit;">Jika kegagalan terjadi saat membaca data, memanggil fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eof ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan selalu kembali </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salah</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Untuk menyelesaikan loop dalam kasus ini, diperlukan pemeriksaan tambahan dari nilai yang dikembalikan oleh fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gagal ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kesalahan lain-lain </font></font></h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/132/51d/701/13251d701a22cae67c852d1bed7d33a5.png"></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V502</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mungkin </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">operator</font></a><font style="vertical-align: inherit;"> '?:' Bekerja dengan cara yang berbeda dari yang diharapkan. </font><font style="vertical-align: inherit;">Operator '?:' Memiliki prioritas lebih rendah daripada operator '&amp;&amp;'. </font><font style="vertical-align: inherit;">ncbi_connutil.c 1135</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x_ClientAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* client_host, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/*bool*/</span></span></span></span><span class="hljs-function"><span class="hljs-params"> local_host)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((client_host == c &amp;&amp; x_IsSufficientAddress(client_host)) || !(ip = *c &amp;&amp; !local_host ? SOCK_gethostbyname(c) : SOCK_GetLocalHostAddress(eDefault)) || SOCK_ntoa(ip, addr, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(addr)) != <span class="hljs-number"><span class="hljs-number">0</span></span> || !(s = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*) <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(client_host) + <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(addr) + <span class="hljs-number"><span class="hljs-number">3</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> client_host<span class="hljs-comment"><span class="hljs-comment">/*least we can do :-/*/</span></span>; } .... }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perhatikan ungkapan: </font></font><br><br><pre> <code class="cpp hljs">!local_host ? SOCK_gethostbyname(c) : SOCK_GetLocalHostAddress(eDefault)</code> </pre> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Itu tidak dihitung seperti yang diharapkan oleh programmer, karena seluruh ekspresi seperti ini: </font></font><br><br><pre> <code class="cpp hljs">ip = *c &amp;&amp; !local_host ? SOCK_gethostbyname(c) : SOCK_GetLocalHostAddress(...)</code> </pre> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prioritas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operator </font><font style="vertical-align: inherit;">lebih tinggi daripada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Karena alasan ini, kode tidak dieksekusi sebagaimana dimaksud. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V561</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mungkin lebih baik untuk memberikan nilai pada variabel 'seq' daripada mendeklarasikannya lagi. </font><font style="vertical-align: inherit;">Deklarasi sebelumnya: validator.cpp, baris 490. validator.cpp 492</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CValidator::IsSeqLocCorrectlyOrdered(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CSeq_loc&amp; loc, CScope&amp; scope) { CBioseq_Handle seq; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { CBioseq_Handle seq = scope.GetBioseqHandle(loc); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (CObjMgrException&amp; ) { <span class="hljs-comment"><span class="hljs-comment">// no way to tell return true; } catch (const exception&amp; ) { // no way to tell return true; } if (seq &amp;&amp; seq.GetInst_Topology() == CSeq_inst::eTopology_circular) { // no way to check if topology is circular return true; } return CheckConsecutiveIntervals(loc, scope, x_IsCorrectlyOrdered); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena programmer mendeklarasikan variabel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seq</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru </font><font style="vertical-align: inherit;">di dalam bagian try / catch, variabel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seq</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lainnya </font><font style="vertical-align: inherit;">tetap tidak diinisialisasi dan digunakan di bawah ini dalam kode. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V562</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aneh membandingkan nilai tipe bool dengan nilai 0: (((status) &amp; 0x7f) == 0)! = 0. ncbi_process.cpp 111</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CProcess::CExitInfo::IsExited(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { EXIT_INFO_CHECK; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (state != eExitInfo_Terminated) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(NCBI_OS_UNIX) return WIFEXITED(status) != 0; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined(NCBI_OS_MSWIN) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// The process always terminates with exit code return true; #endif }</span></span></span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tidak ada yang sakit, tapi WIFEXITED ternyata menjadi pembukaan makro dengan cara ini: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (((status) &amp; <span class="hljs-number"><span class="hljs-number">0x7f</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ternyata fungsi mengembalikan nilai yang berlawanan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kode tersebut, ada fungsi lain seperti itu, yang mengeluarkan peringatan:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V562 Aneh membandingkan nilai tipe bool dengan nilai 0. ncbi_process.cpp 126 </font></font></li></ul><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 Pointer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'dst_len' digunakan sebelum diverifikasi terhadap nullptr. </font><font style="vertical-align: inherit;">Periksa baris: 309, 315. zlib.cpp 309</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CZipCompression::CompressBuffer( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* src_buf, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> src_len, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* dst_buf, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> dst_size, <span class="hljs-comment"><span class="hljs-comment">/* out */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>* dst_len) { *dst_len = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Check parameters if (!src_len &amp;&amp; !F_ISSET(fAllowEmptyData)) { src_buf = NULL; } if (!src_buf || !dst_buf || !dst_len) { SetError(Z_STREAM_ERROR, "bad argument"); ERR_COMPRESS(48, FormatErrorMessage("CZipCompression::CompressBuffer")); return false; } .... }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pointer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dst_len ditereferensi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada awal fungsi, sementara lebih lanjut pada kode diperiksa untuk kesetaraan ke nol. </font><font style="vertical-align: inherit;">Kesalahan telah dibuat dalam kode yang mengarah ke perilaku tidak terdefinisi jika pointer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dst_len</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullptr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pertimbangkan untuk memeriksa </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">ekspresi</font></a><font style="vertical-align: inherit;"> 'ch! =' \ 0 '&amp;&amp; ch ==' ''. </font><font style="vertical-align: inherit;">Ekspresi berlebihan atau mengandung kesalahan cetak. </font><font style="vertical-align: inherit;">cleanup_utils.cpp 580</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Asn2gnbkCompressSpaces</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; val)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ch != <span class="hljs-string"><span class="hljs-string">'\0'</span></span> &amp;&amp; ch == <span class="hljs-string"><span class="hljs-string">' '</span></span>) { ptr++; ch = *ptr; } .... }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kondisi untuk menghentikan loop hanya bergantung pada apakah karakter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ch adalah</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> spasi atau tidak. </font><font style="vertical-align: inherit;">Ekspresi dapat disederhanakan sebagai berikut:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ch == <span class="hljs-string"><span class="hljs-string">' '</span></span>) { .... }</code> </pre> <br><h2>  Kesimpulan </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penggunaan program komputer dalam penelitian ilmiah membantu dan akan membantu membuat penemuan. </font><font style="vertical-align: inherit;">Mari kita berharap bahwa yang sangat penting tidak akan terlewatkan karena kesalahan ketik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya mengundang pengembang proyek NCBI Genome Workbench untuk menghubungi kami, dan kami akan memberikan laporan lengkap yang dikeluarkan oleh penganalisa PVS-Studio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semoga penelitian kode kecil ini membantu memperbaiki banyak bug dan umumnya meningkatkan keandalan proyek. </font><font style="vertical-align: inherit;">Coba jalankan PVS-Studio pada kode proyek Anda, jika Anda belum melakukannya. </font><font style="vertical-align: inherit;">Anda mungkin menyukainya :).</font></font><br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Svyatoslav Razmyslov. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NCBI Genome Workbench: Riset Ilmiah di Bawah Ancaman</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id430476/">https://habr.com/ru/post/id430476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id430466/index.html">Piala Mini AI # 3: Menulis Bot Top</a></li>
<li><a href="../id430468/index.html">Meningkatkan kesadaran warga</a></li>
<li><a href="../id430470/index.html">Mengapa mempertahankan konteks pada akun klien - jujur ​​dan menguntungkan</a></li>
<li><a href="../id430472/index.html">Jaringan DECT DIY mulus</a></li>
<li><a href="../id430474/index.html">CephFS vs GlusterFS</a></li>
<li><a href="../id430478/index.html">Trading bot untuk pasar cryptocurrency. Di mana untuk memulai?</a></li>
<li><a href="../id430480/index.html">Ketika kami menulis aplikasi di NASA Space Apps Challenge hackathon</a></li>
<li><a href="../id430482/index.html">Tema pelat baja dalam budaya Timur dan Barat</a></li>
<li><a href="../id430484/index.html">Skenario Implementasi NGFW yang tipikal</a></li>
<li><a href="../id430486/index.html">Bagaimana freelancer tinggal: dari pengembang ke copywriter teknis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>