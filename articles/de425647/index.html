<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🎨 🧔🏽 🌷 UI-Test: Überprüfen des Systems mit unterschiedlichen Auflösungen 🖕🏼 📃 ✅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Testen langer Webformulare in verschiedenen Browsern und in Auflösungen ist nicht nur äußerst notwendig, sondern auch zum dritten oder vierten Mal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UI-Test: Überprüfen des Systems mit unterschiedlichen Auflösungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/425647/">  Das Testen langer Webformulare in verschiedenen Browsern und in Auflösungen ist nicht nur äußerst notwendig, sondern auch zum dritten oder vierten Mal - ein äußerst langweiliger und konzentrationsintensiver Prozess.  Dies ist also genau der Bereich, der selbst nach Automatisierung verlangt.  Das haben wir getan. <br><br>  In diesem Artikel über Habr berichten wir über unsere Erfahrungen beim Testen von Großbildschirmen mit Winkelmesser-, Zalenium- und Selen-Gitterwerkzeugen.  Wie wir diese Tools schrittweise für automatische UI-Tests eingeführt haben und welche Schwierigkeiten wir hatten. <br><br><img src="https://habrastorage.org/webt/t0/ik/pi/t0ikpibqtt5stc-vmd8mm5ap7p0.jpeg"><br><a name="habracut"></a><br>  Wir erstellen und pflegen ein System mit 7.000 aktiven Benutzern.  Am häufigsten verwenden sie diese Browser: <br><br><img src="https://habrastorage.org/webt/du/8h/qg/du8hqgm1ywysjlq_jnwovnu636m.png"><br><br>  Und die folgenden Bildschirmauflösungen: <br><br><img src="https://habrastorage.org/webt/yh/qo/65/yhqo65fklkp6alt-rooirdebj0c.png"><br><br>  Jedes Mal nach der Veröffentlichung einer neuen Version müssen Sie die Leistung dieser Browser und Berechtigungen überprüfen. <br><br>  Betrachten Sie einen einfachen Fall, um besser zu verstehen, wie UI-Tests in unserem Fall normalerweise funktionieren: Testen der Funktionalität einer Kennwortwiederherstellungsanwendung.  Dementsprechend gibt es zwei Seiten.  Zum einen müssen Sie einen Benutzernamen oder eine E-Mail-Adresse angeben, in der ein Brief mit einem Link zu einer Kennwortänderung enthalten ist.  Nach dem Senden der Anwendung geht der Benutzer auf die Seite mit der Bestätigung, dass alles gut gelaufen ist. <br><br><img src="https://habrastorage.org/webt/ji/p2/1o/jip21ov8vewbempmrtgogko3lx4.png"><br>  <i>Passwortwiederherstellungsformular</i> <br><br><img src="https://habrastorage.org/webt/1d/ce/-e/1dce-e0_bdinsyr_hlwidjceo6k.png"><br>  <i>Die Seite, auf die die Weiterleitung nach erfolgreicher Einreichung des Antrags erfolgt</i> <br><br>  Das Testen dieses Mechanismus in vereinfachter Form sieht folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/io/yh/zn/ioyhzno2ibl6ijdwxszbszy0qrk.png"><br><br>  Das gleiche Skript wie Code: <br><br><pre><code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boolean</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> browser.get(browser.baseUrl); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> element(by.name(<span class="hljs-string"><span class="hljs-string">'EmailOrLogin'</span></span>)).sendKeys(userLogin); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> element(by.buttonText(<span class="hljs-string"><span class="hljs-string">''</span></span>)).click(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> screenshot = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> browser.takeScreenshot(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> canonicalScreenshotPath = <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">   &gt;</span></span></span><span class="xml">; await compareScreenshot(screenshot, canonicalScreenshotPath); });</span></span></code> </pre> <br>  Wie Sie sehen können, sieht der Testcode recht einfach aus und wiederholt buchstäblich das, was im Blockdiagramm gezeigt wurde. <br><br>  Jetzt zeigen wir, welche Tools sich als nützlich erwiesen haben, um dieses Schema bei verschiedenen Bildschirmauflösungen zu implementieren, und auf welche Schwierigkeiten wir gestoßen sind. <br><br><h2>  Ausgewählte Toolbox </h2><br><h3>  Begonnen mit Chrom </h3><br>  Für die Testautomatisierung haben wir Protractor gewählt, ein e2e-Framework zum Testen von Angular-Anwendungen.  Unsere Anwendung ist nur auf Angular.  Mit Protractor haben wir zwei Arten von Tests durchgeführt: <br><br><ol><li>  Zur allgemeinen Funktionalität: Ein Antragsformular wird geöffnet, mit Daten ausgefüllt und ein Antrag gesendet. Anschließend überprüfen wir, ob eine Umleitung zur Registrierung aller Anträge erfolgt ist. </li><li>  Screenshot-Tests: Mit dem Winkelmesser können Sie jederzeit einen Screenshot erstellen.  Mit einer separaten Blue-Harvest-Bibliothek haben wir zwei Screenshots verglichen: eine Referenz und eine echte.  Wenn sie nicht übereinstimmen, wird sofort ein Screenshot erstellt, auf dem alle Unterschiede sichtbar sind, genau wie in Git. </li></ol><br>  Wenn Sie beispielsweise das oben beschriebene Beispiel weiter analysieren. <br><br><img src="https://habrastorage.org/webt/-k/op/c_/-kopc_riwo8xa6qsajn_ld-ynrk.png"><br>  <i>Screenshot mit ungültiger Linkmeldung</i> <br><br><img src="https://habrastorage.org/webt/gb/lp/uh/gblpuhvntxizhca6g1i0dk5ciqs.png"><br>  <i>Die Unterschiede (Text und Layout der Schaltfläche) in den Referenz- und aktuellen Screenshots sind lila hervorgehoben</i> <br><br>  Wenn die Seite sich dynamisch ändernde Daten enthält (z. B. Datum oder Bestellnummer), müssen Sie diese maskieren. Diese Funktionen befinden sich in der Blue-Harvest-Bibliothek.  Andernfalls führt ein Vergleich der Screenshots zu einem negativen Ergebnis. <br><br><h3>  Fügen Sie FF und verschiedene Berechtigungen hinzu </h3><br>  Im Laufe der Zeit sind unsere Anforderungen an das vorhandene UI-Testsystem gestiegen: <br><br><ul><li>  Führen Sie Tests nicht nur in Chrome, sondern auch in FF durch. </li><li>  Screenshot-Tests nicht mit einer, sondern mit den beliebtesten Auflösungen durchführen. </li><li>  Führen Sie Tests parallel durch. </li></ul><br>  Lassen Sie uns also unsere Tests in Chrome und FF parallel ausführen. <br><br>  Ersetzen Sie dazu in der Protractor'a-Funktionskonfiguration Folgendes: <br><br><pre> <code class="hljs powershell">multiCapabilities: [ { <span class="hljs-type"><span class="hljs-type">shardTestFiles</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, <span class="hljs-type"><span class="hljs-type">maxInstances</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">browserName</span></span>: <span class="hljs-string"><span class="hljs-string">'chrome'</span></span> }, { <span class="hljs-type"><span class="hljs-type">shardTestFiles</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, <span class="hljs-type"><span class="hljs-type">maxInstances</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">browserName</span></span>: <span class="hljs-string"><span class="hljs-string">'firefox'</span></span> } ]</code> </pre> <br>  Hier ist alles offensichtlich, wofür jede Einstellung verantwortlich ist.  Verdient nur Aufmerksamkeit <br> <code>shardTestFiles: true</code> <br> <code>/** * If this is set to be true, specs will be shared by file (ie all files to be run by this set of capabilities will run in parallel). * Default is false. */</code> <br> <br>  Mit diesem Flag können alle Spezifikationen in allen Browsern, die in multiCapabilities angegeben sind, parallel gestartet werden. <br><br>  Der Parameter specs ist unter den Wortspezifikationen verborgen, die bestimmen, anhand welcher Vorlage nach Dateien mit Tests gesucht werden soll. <br><br><pre> <code class="javascript hljs">exports.config = { ... specs: [<span class="hljs-string"><span class="hljs-string">'./e2e/**/*.spec.ts'</span></span>], ... }</code> </pre> <br>  Die Theorie, alle Tests in mehrere Spezifikationsdateien aufzuteilen, sieht ziemlich logisch aus.  Parallelität funktioniert auf ihnen (erstellen Sie beispielsweise eine Spezifikationsdatei für jede Funktion der Anwendung). <br><br>  Darüber hinaus gibt es in Protractor'e die Möglichkeit, Suiten hervorzuheben. <br><br><pre> <code class="javascript hljs">exports.config = { ... suites: { <span class="hljs-attr"><span class="hljs-attr">suite01</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite01.*.spec.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">suite02</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite02.spec.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">suite03</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite03.spec.ts'</span></span> }, ... }</code> </pre> <br>  Wie Sie in diesem Teil der Konfiguration sehen können, werden beim Starten einer Suite Tests nur von einer Spezifikationsdatei ausgeführt.  Dies ist wahrscheinlich nützlich, wenn Sie Tests nur für einen Teil der Anwendung ausführen möchten. <br><br>  Beim Testen der Anwendung mit verschiedenen Auflösungen haben wir den folgenden Weg eingeschlagen.  Als experimentelle Berechtigung wurde eine der beliebtesten ausgewählt: 1920 x 1080, 1366 x 768, 1440 x 10900, 768 x 1024.  Wenn Sie jeden Test ausführen, wurden zunächst alle erforderlichen Aktionen ausgeführt, und anschließend werden eine Reihe von Screenshot-Überprüfungen durchgeführt. <br><br><img src="https://habrastorage.org/webt/ht/fe/w4/htfew43t0zeewg0cg-odih_s_yq.png"><br><br><h3>  Wir verbinden IE und Screenshots in voller Größe </h3><br>  Die Screenshot-Tests, die wir leider erhalten haben, haben nur auf der Grundlage des anfangs sichtbaren Teils der Seite funktioniert.  Und wenn auf der Seite ein Bildlauf vorhanden war, blieb alles unten für das Layout unerforscht. <br><br>  Darüber hinaus müssen wir auch den IE unterstützen, für den unsere Tests noch nicht entwickelt wurden.  Wir suchten nach einer geeigneten Möglichkeit, Tests im Internet Explorer durchzuführen und Screenshots in voller Größe zu erstellen. <br><br><img src="https://habrastorage.org/webt/v7/ul/le/v7ulle2bbjnxzfyqc5vv_ps7due.png"><br><br>  Wir haben uns für zwei Lösungen entschieden: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zalenium</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selenium-Grid</a> .  Wir lassen die Beschreibung weg, welche von ihnen sich von was rühmt, und erzählen, was sie in beiden Lösungen gefunden / nicht gefunden haben. <br><br>  <b>Zalenium</b> : Diese Lösung wird in einem Docker-Container ausgeführt, und N andere Container steigen nach dem <b>Hauptcontainer</b> auf, um Browser zu starten.  Ermöglicht die Angabe von screenWidth und screenHeight während des <code>docker run</code> und das Abrufen der Bildschirmgröße, z. B. 1920 x 6000.  Es gibt keine Unterstützung für IE. <br><br><img src="https://habrastorage.org/webt/kz/wr/de/kzwrdeodk_9rbejq0srhhk5d3zq.png"><br>  <i>Zwei Browser mit einer Bildschirmgröße von 1920x6000</i> <br><br>  <b>Selen-Gitter:</b> Tests im IE begannen sehr einfach. <br>  Von den Minuspunkten: Es gibt keine Möglichkeit, die Größe des Browserfensters beliebiger Größe festzulegen. <br><br>  <b>Gesamt: Zalenium + Selen-Gitter</b> <br>  Wir haben uns für eine Reihe von Zalenium + Selen-Gittern entschieden: Durch Zalenium wurde beschlossen, Tests in Chrome und FF durchzuführen, und durch Selenium-Gitter, um die Mindestleistung der Anwendung im IE zu überprüfen. <br><br><h2>  Was war interessant dabei zu treffen </h2><br>  <b>1. Verwenden von formControlName als Element-Locator</b> <br><br>  Mit der Suche in formControlName können Sie einfach nach den erforderlichen Feldern im Formular suchen und diese mit Testdaten füllen.  Der Locator von formControlName ist nicht integriert, kann aber einfach hinzugefügt werden: <br><br><pre> <code class="javascript hljs">exports.config = { ... onPrepare() { <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ts-node'</span></span>).register({ <span class="hljs-attr"><span class="hljs-attr">project</span></span>: <span class="hljs-string"><span class="hljs-string">'e2e/tsconfig.e2e.json'</span></span> }); jasmine.getEnv().addReporter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> specReporter({ <span class="hljs-attr"><span class="hljs-attr">spec</span></span>: { <span class="hljs-attr"><span class="hljs-attr">displayStacktrace</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } })); addFormControlNameLocator(protractor); } ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFormControlNameLocator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">protractor</span></span></span><span class="hljs-function">) </span></span>{ protractor.by.addLocator(<span class="hljs-string"><span class="hljs-string">'formControlName'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value, optParentElement</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> using = optParentElement || <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> using.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'[formControlName="'</span></span> + value + <span class="hljs-string"><span class="hljs-string">'"]'</span></span>); }); }</code> </pre> <br>  <b>2. Der Unterschied in der Arbeit des global und lokal installierten Webdriver-Managers in Protractor</b> <br><br>  Bei der Installation von Protractor im System (in der offiziellen Dokumentation wird empfohlen, Protractor global zu installieren) erhalten wir zusätzlich zum Testframework selbst den installierten Webdriver-Manager, der Treiber für Browser bereitstellt, um Tests auszuführen, bei denen eines der Probleme aufgetreten ist. <br><br>  Nachdem Sie den Projektordner aufgerufen und das Webdriver-Manager-Update ausgeführt haben, werden Treiber für Chrome, FF, IE heruntergeladen.  Danach haben sie beim Starten der Tests den Fehler festgestellt: <br><br> <code>No update-config.json found. Run 'webdriver-manager update' to download binaries.</code> <br> <br>  Wir haben festgestellt, dass der Fehler verschwindet, wenn wir das Webdriver-Manager-Update in ein npm-Skript packen: <br><br><pre> <code class="hljs powershell">{ ... scripts:{ “webdriver<span class="hljs-literal"><span class="hljs-literal">-update</span></span>”: “webdriver<span class="hljs-literal"><span class="hljs-literal">-manager</span></span> update” } ... }</code> </pre> <br>  <code>npm run webdriver-update</code> , werden sowohl die <code>npm run webdriver-update</code> als auch die oben erwähnte Datei update-config.json in den Projektordner verschoben. <br><br>  <b>3. Führen Sie Zalenium durch Docker-Compose aus</b> <br><br>  Die Zalenium-Dokumentation enthält Beispiele für den <code>docker run</code> und die Docker-Compose-Datei.  Alles hebt fast wie durch Zauberei ab.  Das einzige Problem, auf das wir gestoßen sind, ist beim Starten der Docker-Compose-Datei aufgetreten <br>  <code>/var/run/docker.sock is not a valid windows path</code> .  Die Lösung ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  <b>4. Sichtbarkeit der Elemente durch den Winkelmesser</b> <br><br>  Im Verlauf unserer Experimente standen wir in einem Moment vor der Aufgabe, ein Menü auf der Seite zu durchstechen, d. H.  Gehen Sie zu jeder Seite des Menüs und machen Sie einen Screenshot. <br><br><img src="https://habrastorage.org/webt/6u/sy/ol/6usyoljearsoj0ok6kgburgd_7e.png"><br><br>  Nach der Verarbeitung des ersten Elements der Liste begannen die Tests zu fallen, was den Fehler auslöste, dass auf einige Koordinaten nichts zu klicken war.  Wie sich herausstellte, verschwanden sie, unabhängig davon, dass alle Elemente der Liste ursprünglich ausgewählt wurden, nachdem sie für unsere Augen wirklich unsichtbar geworden waren, in den Augen des Winkelmessers. <br><br>  Wir haben das Problem gelöst, indem wir eine ausreichende Bildschirmbreite eingestellt haben, damit das Menü wieder angezeigt wird, bevor Sie auf das nächste Element klicken. <br><br>  <b>5. Auflösungsänderung im IE (Selenium-Gitter)</b> <br><br>  Wie Sie sich erinnern, haben wir in Chrome und FF die Änderung der Bildschirmauflösung optimiert.  Als es dazu im IE kam, haben wir einfach den Fehler abgefangen: <code>Failed: java.io.IOException: Server returned HTTP response code: 405 for URL: http://localhost:21800/session/8d14426d-6483-4bbf-90b3-2a3ed46ebe9b/window/size</code> . <br><br>  Nach einem langen Debugging konnte festgestellt werden, dass der Fehler genau in dem Moment <code>browser.driver.manage().window().setSize(x, y)</code> , in dem der Code ausgeführt werden soll: <code>browser.driver.manage().window().setSize(x, y)</code> .  Wenn Sie versuchen, <code>browser.driver.manage().window().setPosition(x, y)</code> auszuführen, und denselben Fehler abfangen, ändert sich nur die Größe in die Position.  Dies führt uns zu der Tatsache, dass es unmöglich ist, die Bildschirmauflösung zu steuern, wenn Tests im IE ausgeführt werden.  Die Lösung des Problems sind Krücken, mit denen Sie Ihren Code überlagern müssen, um die Auflösung \ Position nicht zu ändern, wenn der IE ausgeführt wird. <br><br>  <b>6. Zalenium und WebSocket</b> <br><br>  Nachdem alle Unebenheiten vor Ort gesammelt worden waren, wurde beschlossen, Zalenium in die Unternehmensinfrastruktur aufzunehmen.  Der Container wird geöffnet, DNS wird registriert, jetzt kann jeder Tests in Zalenium ausführen, indem er einfach den Pfad dazu in seiner Winkelmesser-Konfiguration angibt.  Schönheit, nicht wahr?  Aber da war es. <br><br>  In diesem Fall wurde bereits alles auf dem Linux-Computer bereitgestellt, Nginx wurde als Server verwendet.  Der Container mit Zalenium stieg ohne Probleme an, gefolgt von weiteren N Containern zum Starten von Browsern, aber ... konnte keine Verbindung zu ihnen herstellen.  Es war leicht festzustellen, dass der übergeordnete Container versuchte, über das WebSocket-Protokoll mit den Containern der Browser zu kommunizieren, und Nginx konnte dies standardmäßig nicht tun.  Die Behandlung ist sehr einfach. <br><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> some_url; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Upgrade <span class="hljs-variable"><span class="hljs-variable">$http_upgrade</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection “upgrade”; }</code> </pre> <br>  <b>9. Start des Selen-Grids</b> <br><br>  Um Selen-Grid zu betreiben, benötigen wir: <br><br><ul><li>  <a href="">Selen-Server</a> , </li><li>  IE-Treiber, der über das Webdriver-Manager-Update --ie32 leicht zu bekommen ist. </li></ul><br>  Serverstart: <br><br> <code>java -jar selenium-server-standalone.jar -role hub -hubConfig selenium-server-config.json</code> <br> <br><pre> <code class="hljs pgsql">selenium-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-config.json { "host": "127.0.0.1", "maxSessions": <span class="hljs-number"><span class="hljs-number">5</span></span>, "port": <span class="hljs-number"><span class="hljs-number">4445</span></span>, "cleanupCycle": <span class="hljs-number"><span class="hljs-number">5000</span></span>, "timeout": <span class="hljs-number"><span class="hljs-number">300000</span></span>, "newSessionWaitTimeout": <span class="hljs-number"><span class="hljs-number">-1</span></span>, "servlets": [], "prioritizer": <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "capabilityMatcher": "org.openqa.grid.internal.utils.DefaultCapabilityMatcher", "throwOnCapabilityNotPresent": <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, "nodePolling": <span class="hljs-number"><span class="hljs-number">180000</span></span>, "platform": "WINDOWS" }</code> </pre> <br>  Starten des IE-Treibers: <br><br> <code>java -Dwebdriver.ie.driver=&lt;  &gt; -jar selenium-server-standalone.jar -role node -nodeConfig .\\ie-driver-config.json</code> <br> <br><pre> <code class="hljs powershell">ie<span class="hljs-literal"><span class="hljs-literal">-driver</span></span><span class="hljs-literal"><span class="hljs-literal">-config</span></span>.json { <span class="hljs-string"><span class="hljs-string">"capabilities"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"browserName"</span></span>: <span class="hljs-string"><span class="hljs-string">"internet explorer"</span></span>, <span class="hljs-string"><span class="hljs-string">"maxInstances"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"WINDOWS"</span></span>, <span class="hljs-string"><span class="hljs-string">"webdriver.ie.driver"</span></span>: <span class="hljs-string"><span class="hljs-string">"C:/Program Files (x86)/Internet Explorer/iexplore.exe"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"cleanUpCycle"</span></span>: <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-string"><span class="hljs-string">"timeout"</span></span>: <span class="hljs-number"><span class="hljs-number">30000</span></span>, <span class="hljs-string"><span class="hljs-string">"port"</span></span>: <span class="hljs-literal"><span class="hljs-literal">-1</span></span>, <span class="hljs-string"><span class="hljs-string">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-string"><span class="hljs-string">"hub"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4445/grid/register/"</span></span>, <span class="hljs-string"><span class="hljs-string">"register"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"maxSessions"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }</code> </pre> <br>  Achten Sie beim Starten des Servers und in der Hub-URL des Treibers auf die Verwendung derselben Ports.  Als seleniumAddress in der Winkelmesserkonfiguration verwenden wir <code>http://127.0.0.1:4445/wd/hub</code> . <br><br><h2>  Schlussfolgerungen </h2><br>  Wir haben unsere Aufgabe gelöst und können jedes Mal nach der Veröffentlichung einer neuen Version die Leistung dieser Browser und Auflösungen überprüfen. <br><br><h3>  So integrieren Sie Tests in einen Workflow </h3><br>  Es ist wichtig zu verstehen, dass es nicht ausreicht, nur die gesamte Infrastruktur zu erhöhen, um Tests auszuführen und zu schreiben.  Sie müssen darüber nachdenken, wie Sie sie in Ihrem täglichen Leben verwenden werden. <br><br>  Wir haben keine UI-Tests in CI implementiert, weil  Sie werden lange genug ausgeführt, damit sie bei jedem Build auf ihre Ausführung warten können. <br><br>  Um die lokale Version der Anwendung zu testen oder in einer der Testumgebungen (intern oder vom Kunden) installiert zu haben, reicht es aus, baseUrl in der Protractor'a-Konfiguration zu ändern.  Daher können Tests sowohl vom Entwickler als auch vom Tester ausgeführt werden. <br>  Entwickler - Wenn Tests für die lokale Version der Anwendung ausgeführt werden müssen, während eine neue Funktion entwickelt wird.  QS-Spezialist - zum Beispiel als Rauchtest nach dem Einsatz bei Prod oder als Kontrolle auf der Oberseite nach einem Refactoring-Haufen. <br><br>  <b>Abschließend möchten wir betonen:</b> <br><br><ul><li>  Denken Sie daran, dass Sie durch UI-Tests keine detaillierten manuellen Tests durchführen müssen.  Automatisierung hilft nur, Bereiche abzudecken. </li><li>  Verwenden Sie die Automatisierung mit Bedacht, vor allem für Rauchtests.  Alles und jedes abzudecken macht keinen Sinn - es ist teuer und schwierig, auf dem Laufenden zu bleiben </li><li>  Schreiben Sie einfach.  Wenn Ihre UI-Tests kompliziert aussehen, machen Sie etwas falsch.  Einfach schlagen und wie angegeben verwenden (siehe Punkt 2) </li></ul><br>  Wir glauben, dass die Automatisierung von UI-Tests gut ist, wenn sie einfach durchgeführt werden kann.  Teilen Sie uns daher Ihre Beobachtungen und erfolgreichen Tools in den Kommentaren mit. <br><br><h2>  Nützliche Links von uns: </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Winkelmesser: Eine neue Hoffnung - Michael Giambalvo, Craig Nishina</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zalenium gegen Selenoid</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Winkelmesser Testfall in Selengürtel in Docker</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425647/">https://habr.com/ru/post/de425647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425635/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 333 (1. - 7. Oktober 2018)</a></li>
<li><a href="../de425637/index.html">SSH-Verbindungsaufbau-Algorithmus</a></li>
<li><a href="../de425641/index.html">Die Bewohner der kanadischen Stadt haben einen "Uber-Service" mit Bussen entwickelt, nicht mit Autos</a></li>
<li><a href="../de425643/index.html">Digitale Ereignisse in Moskau vom 8. bis 14. Oktober</a></li>
<li><a href="../de425645/index.html">SpaceX und SAOCOM - 1A Neue Mission. Fertig</a></li>
<li><a href="../de425649/index.html">BDSM, Gore und das Drupal Developer Pursuit</a></li>
<li><a href="../de425653/index.html">Aufbau einer Microservice-Architektur auf Golang und gRPC, Teil 1</a></li>
<li><a href="../de425657/index.html">Die Unvermeidlichkeit der Bestrafung, die Wirksamkeit plötzlicher Kontrollen</a></li>
<li><a href="../de425659/index.html">Interaktives Design muss nicht kompliziert sein.</a></li>
<li><a href="../de425661/index.html">22 Tipps für einen Angular-Entwickler. Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>