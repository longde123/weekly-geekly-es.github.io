<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛸️ 👨‍👧‍👧 👨🏼‍💻 Berkibar dalam contoh. Tautan Dalam di Aplikasi Flutter 💠 👩🏽‍🤝‍👨🏼 🍝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kerangka kerja multi-platform baru Google, Flutter, terus mendapatkan penggemar. Semakin banyak orang tertarik pada teknologi ini dan mencobanya di pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Berkibar dalam contoh. Tautan Dalam di Aplikasi Flutter</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/epam_systems/blog/461239/">  Kerangka kerja multi-platform baru Google, Flutter, terus mendapatkan penggemar.  Semakin banyak orang tertarik pada teknologi ini dan mencobanya di proyek kesayangan dan komersial.  Semakin banyak artikel dan contoh muncul di RuNet, tetapi beberapa waktu lalu saya perhatikan bahwa, tidak seperti Medium, ulasan artikel yang ditujukan untuk teknologi secara keseluruhan dan kelebihan atau hal baru yang disajikan dalam versi terbaru mendominasi Habré.  Ada beberapa teks tentang kasus-kasus tertentu.  Karena itu, saya memutuskan bahwa perlu untuk memperbaiki situasi saat ini.  Saya akan mulai bukan dengan case yang paling umum, tetapi cukup sering digunakan - Deep Links. <br><img src="https://habrastorage.org/getpro/habr/post_images/28d/92d/505/28d92d5054ae40ababa4463ca68e7632.png" alt="gambar"><br><a name="habracut"></a><br>  Baru-baru ini, saya mendapat tugas meluncurkan aplikasi Flutter menggunakan tautan dalam.  Saya harus menggeledah dokumentasi dan percobaan untuk mendapatkan ide yang memadai tentang bagaimana bekerja dengan mereka di Flutter.  Dalam artikel ini, saya telah mengumpulkan hasilnya, sehingga mereka yang dihadapkan dengan tugas yang sama, lebih mudah untuk dipahami. <br><br>  Deep Links adalah URL yang memberi pengguna kemampuan untuk menavigasi ke konten tertentu dalam aplikasi seluler di iOS atau Android.  Ini berarti bahwa kita harus melacak bagaimana aplikasi dibuka: dengan cara standar atau menggunakan tautan, dan di samping itu, aplikasi mungkin sudah terbuka ketika transisi selesai.  Jadi, kita perlu melacak klik-tayang dan di latar belakang aplikasi yang sedang berjalan.  Mari kita lihat cara terbaik untuk melakukan ini di Flutter. <br><br><h3>  Hal pertama adalah konfigurasi </h3><br>  Untuk menggunakan Deep Links dalam pengembangan asli, Anda perlu menyiapkan konfigurasi yang sesuai dalam proyek.  Untuk aplikasi Flutter, ini dilakukan dengan cara yang persis sama dengan yang asli. <br><br><h4>  iOS </h4><br>  Ada dua cara untuk membuat tautan seperti itu di ekosistem Apple: "Skema URL khusus" dan "Tautan Universal". <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Skema URL khusus</a> - memungkinkan Anda menggunakan skema khusus, terlepas dari host mana yang ditentukan.  Pendekatan ini adalah yang paling sederhana, tetapi ada nuansa: Anda harus yakin bahwa skema itu unik, dan, selain itu, tautannya tidak akan berfungsi tanpa aplikasi yang diinstal.  Jika Anda menggunakan skema URL Khusus, Anda dapat menggunakan tautan seperti: <code>your_scheme://any_host</code> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan Universal</a> adalah pendekatan yang sedikit lebih kompleks.  Mereka memungkinkan Anda untuk bekerja hanya dengan skema https dan dengan host tertentu, tetapi Anda harus mengkonfirmasi hak untuk menggunakan host ini, di mana Anda perlu menempatkan file di server - asosiasi aplikasi-situs-apel.  Tautan Universal memberi Anda kesempatan untuk menjalankan aplikasi di URL: <code>https://your_host</code> , dan jika tidak ada aplikasi yang terinstal akan menawarkan untuk menginstalnya dari toko atau membuka tautan di browser. <br></li></ul><br>  Misalnya, saya menggunakan pendekatan skema URL Khusus, karena lebih sederhana.  Tambahkan bagian berikut ke file Info.plist: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundleURLTypes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundleTypeRole<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Editor<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundleURLName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>deeplink.flutter.dev<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundleURLSchemes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>poc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h4>  Android </h4><br>  Ekosistem Android juga memiliki dua cara menghubungkan dengan properti yang kira-kira sama: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan Dalam</a> - (seperti halnya skema URL Khusus di iOS) memungkinkan Anda untuk menggunakan skema khusus apa pun host yang ditentukan. <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan Aplikasi</a> - memungkinkan Anda untuk bekerja hanya dengan skema https dan dengan host tertentu (seperti Universal Links di iOS), dan Anda juga perlu mengonfirmasi hak untuk menggunakan host ini dengan menempatkan file JSON pada server Digital Asset Links. <br></li></ul><br>  Untuk android, saya juga memutuskan untuk tidak menyulitkannya dan menggunakan Deep Links.  Tambahkan ini ke AndroidManifest.xml: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.VIEW"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.DEFAULT"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.BROWSABLE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:scheme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:host</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"deeplink.flutter.dev"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Dengan demikian, kami mengkonfigurasi aplikasi untuk kedua platform untuk skema <code>poc</code> dan akan dapat memproses URL <code>poc://deeplink.flutter.dev</code> di dalamnya <code>poc://deeplink.flutter.dev</code> <br><br><h3>  Saluran Platform Memasak </h3><br>  Jadi, konfigurasi asli untuk setiap platform sudah siap.  Namun selain konfigurasi, Anda perlu menyiapkan Platform Channels, berkat bagian asli yang akan berinteraksi dengan Flutter.  Dan lagi, Anda perlu menyiapkan implementasi untuk Android dan iOS. <br>  Mari kita mulai dengan Android.  Anda tidak perlu melakukan apa-apa - cukup proses Intent yang masuk dalam metode onCreate, buat MethodChannel dan berikan URI padanya jika aplikasi berjalan melalui Deep Link. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CHANNEL = <span class="hljs-string"><span class="hljs-string">"poc.deeplink.flutter.dev/channel"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); GeneratedPluginRegistrant.registerWith(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); Intent intent = getIntent(); Uri data = intent.getData(); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MethodChannel(getFlutterView(), CHANNEL).setMethodCallHandler( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MethodChannel.MethodCallHandler() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMethodCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodCall call, MethodChannel.Result result)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (call.method.equals(<span class="hljs-string"><span class="hljs-string">"initialLink"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (startString != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { result.success(startString); } } } }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { startString = data.toString(); } }</code> </pre> <br>  Di iOS, semuanya akan sedikit berbeda, meskipun secara umum hal yang sama: melewatkan URI ke aplikasi melalui MethodChannel.  Saya memutuskan untuk mengimplementasikannya di Swift, karena dengan Objecttive-C hal-hal tidak baik untuk saya)).  Selanjutnya adalah AppDelegate.swift yang dimodifikasi <br><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@UIApplicationMain</span></span> <span class="hljs-meta"><span class="hljs-meta">@objc</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlutterAppDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> methodChannel: <span class="hljs-type"><span class="hljs-type">FlutterMethodChannel?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">]? )</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> controller = window.rootViewController <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">FlutterViewController</span></span> methodChannel = <span class="hljs-type"><span class="hljs-type">FlutterMethodChannel</span></span>(name: <span class="hljs-string"><span class="hljs-string">"poc.deeplink.flutter.dev/channel"</span></span>, binaryMessenger: controller) methodChannel?.setMethodCallHandler({ (call: <span class="hljs-type"><span class="hljs-type">FlutterMethodCall</span></span>, result: <span class="hljs-type"><span class="hljs-type">FlutterResult</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> call.method == <span class="hljs-string"><span class="hljs-string">"initialLink"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { result(<span class="hljs-type"><span class="hljs-type">FlutterMethodNotImplemented</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } }) <span class="hljs-type"><span class="hljs-type">GeneratedPluginRegistrant</span></span>.register(with: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.application(application, didFinishLaunchingWithOptions: launchOptions) }</code> </pre><br>  Jadi kami akan menangani peluncuran aplikasi melalui Deep Link.  Tetapi bagaimana jika tautannya diikuti ketika aplikasi sudah berjalan?  Penting untuk memperhitungkan momen ini. <br><br>  Di Android, untuk ini kami akan mengganti metode onNewIntent dan akan memproses setiap maksud yang masuk.  Jika ini adalah klik tautan, kami akan melemparkan acara ke dalam EventChannel yang dibuat untuk ini melalui BroadcastReceiver yang dibuat khusus. <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String EVENTS = <span class="hljs-string"><span class="hljs-string">"poc.deeplink.flutter.dev/events"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BroadcastReceiver linksReceiver; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); GeneratedPluginRegistrant.registerWith(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventChannel(getFlutterView(), EVENTS).setStreamHandler( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventChannel.StreamHandler() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onListen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object args, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EventChannel.EventSink events)</span></span></span><span class="hljs-function"> </span></span>{ linksReceiver = createChangeReceiver(events); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object args)</span></span></span><span class="hljs-function"> </span></span>{ linksReceiver = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } ); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNewIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onNewIntent(intent); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(intent.getAction() == android.content.Intent.ACTION_VIEW &amp;&amp; linksReceiver != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { linksReceiver.onReceive(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getApplicationContext(), intent); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BroadcastReceiver </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createChangeReceiver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EventChannel.EventSink events)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BroadcastReceiver() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment"> assuming intent.getAction() is Intent.ACTION_VIEW String dataString = intent.getDataString(); if (dataString == null) { events.error("UNAVAILABLE", "Link unavailable", null); } else { events.success(dataString); } ; } }; } }</span></span></code> </pre> <br>  Mari kita lakukan hal yang sama di bagian iOS.  Di Swift, kita perlu membuat FlutterStreamHandler dan memproses tautan apa pun yang kita terima saat aplikasi di latar belakang.  Sudah waktunya untuk mengubah AppDelegate.segera sedikit lagi <br><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@UIApplicationMain</span></span> <span class="hljs-meta"><span class="hljs-meta">@objc</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlutterAppDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eventChannel: <span class="hljs-type"><span class="hljs-type">FlutterEventChannel?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> linkStreamHandler = <span class="hljs-type"><span class="hljs-type">LinkStreamHandler</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">]? )</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> controller = window.rootViewController <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">FlutterViewController</span></span> eventChannel = <span class="hljs-type"><span class="hljs-type">FlutterEventChannel</span></span>(name: <span class="hljs-string"><span class="hljs-string">"poc.deeplink.flutter.dev/events"</span></span>, binaryMessenger: controller) <span class="hljs-type"><span class="hljs-type">GeneratedPluginRegistrant</span></span>.register(with: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) eventChannel?.setStreamHandler(linkStreamHandler) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.application(application, didFinishLaunchingWithOptions: launchOptions) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> app: UIApplication, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">open</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url: URL, options: [UIApplicationOpenURLOptionsKey : </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">] = [:])</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { eventChannel?.setStreamHandler(linkStreamHandler) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> linkStreamHandler.handleLink(url.absoluteString) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LinkStreamHandler</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlutterStreamHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eventSink: <span class="hljs-type"><span class="hljs-type">FlutterEventSink?</span></span> <span class="hljs-comment"><span class="hljs-comment">// links will be added to this queue until the sink is ready to process them var queuedLinks = [String]() func onListen(withArguments arguments: Any?, eventSink events: @escaping FlutterEventSink) -&gt; FlutterError? { self.eventSink = events queuedLinks.forEach({ events($0) }) queuedLinks.removeAll() return nil } func onCancel(withArguments arguments: Any?) -&gt; FlutterError? { self.eventSink = nil return nil } func handleLink(_ link: String) -&gt; Bool { guard let eventSink = eventSink else { queuedLinks.append(link) return false } eventSink(link) return true } }</span></span></code> </pre> <br>  Ketika kami menggabungkan kedua bagian: bagian untuk meluncurkan aplikasi dan bagian untuk aplikasi di latar belakang - kami akan mengontrol semua klik pengguna pada Deep Links. <br><br><h3>  Memproses Tautan Dalam dalam Bergetar </h3><br>  Bagian platform siap untuk ini, sekarang saatnya untuk beralih ke bagian Flutter.  Seperti yang mungkin Anda ketahui, Anda dapat membuat aplikasi pada flutter menggunakan pendekatan arsitektur yang berbeda.  Banyak artikel telah ditulis tentang topik ini ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">misalnya, yang ini</a> ), tetapi secara pribadi saya merasa bahwa BLoC murni adalah pendekatan yang paling cocok.  Karenanya, saya akan menyiapkan BLoC terpisah yang akan menangani tautan ini.  Akibatnya, kami mendapatkan kode yang sama sekali tidak terikat dengan UI dan dapat menangani tautan penerima di mana pun nyaman. <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeepLinkBloc</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bloc</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Event Channel creation static const stream = const EventChannel('poc.deeplink.flutter.dev/events'); //Method channel creation static const platform = const MethodChannel('poc.deeplink.flutter.dev/channel'); StreamController&lt;String&gt; _stateController = StreamController(); Stream&lt;String&gt; get state =&gt; _stateController.stream; Sink&lt;String&gt; get stateSink =&gt; _stateController.sink; //Adding the listener into contructor DeepLinkBloc() { //Checking application start by deep link startUri().then(_onRedirected); //Checking broadcast stream, if deep link was clicked in opened appication stream.receiveBroadcastStream().listen((d) =&gt; _onRedirected(d)); } _onRedirected(String uri) { // Here can be any uri analysis, checking tokens etc, if it's necessary // Throw deep link URI into the BloC's stream stateSink.add(uri); } @override void dispose() { _stateController.close(); } Future&lt;String&gt; startUri() async { try { return platform.invokeMethod('initialLink'); } on PlatformException catch (e) { return "Failed to Invoke: '${e.message}'."; } } }</span></span></code> </pre> <br>  Khusus untuk mereka yang tidak memiliki pengalaman sebelumnya dengan BLoC dan StreamBuilders, saya akan menyiapkan contoh widget yang akan bekerja dengan BLoC ini.  Widget didasarkan pada StreamBuilder, yang membangun kembali UI tergantung pada peristiwa yang diterima dari aliran. <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PocWidget</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ DeepLinkBloc _bloc = Provider.of&lt;DeepLinkBloc&gt;(context); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamBuilder&lt;String&gt;( stream: _bloc.state, builder: (context, snapshot) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!snapshot.hasData) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Container( child: Center( child: Text(<span class="hljs-string"><span class="hljs-string">'No deep link was used '</span></span>))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Container( child: Center( child: Padding( padding: EdgeInsets.all(<span class="hljs-number"><span class="hljs-number">20.0</span></span>), child: Text(<span class="hljs-string"><span class="hljs-string">'Redirected: ${snapshot.data}'</span></span>)))); } }, ); } }</code> </pre> <br>  Tadam!  Itu saja.  Sekarang semuanya berfungsi! <br><br>  Untuk menguji, jalankan aplikasi dengan tiga cara berbeda.  Secara manual dan melalui Deep Links, pertama dengan <code>poc://deeplink.flutter.dev</code> URI <code>poc://deeplink.flutter.dev</code> , dan kemudian dengan <code>poc://deeplink.flutter.dev/parameter</code> .  Berikut screenshot dari apa yang terjadi: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/429/1a8/c10/4291a8c100fbc77a0e6cba5910ae9fca.png" alt="gambar"><br><br>  Ada cara lain untuk bekerja dengan Deep Links.  Misalnya, Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Firebase Dynamic Links</a> untuk ini.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel yang bagus</a> tentang cara menggunakannya dengan Flutter.  Ada juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pustaka 'uni-link' yang sudah jadi</a> untuk menghubungkan Deep Links - Anda dapat menggunakannya.  Dan jika Anda tidak ingin bergantung pada pustaka pihak ketiga, Anda selalu bisa menerapkannya sendiri.  Saya harap artikel saya akan membantu Anda dengan ini! <br><br><h3>  Kode sumber </h3><br>  Kode sumber untuk contoh di atas dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dilihat di sini</a> . <br><br><h3>  Beberapa informasi bermanfaat </h3><br>  Jika Anda membaca artikel hingga saat ini, kemungkinan besar Anda tertarik dengan pengembangan Flutter).  Saya ingin berbicara tentang beberapa sumber yang mungkin berguna bagi Anda.  Belum lama ini, sepasang podcast berbahasa Rusia dibuat yang terkait langsung dengan pengembangan Flutter.  Saya sarankan berlangganan kepada mereka: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Flutter Dev Podcast</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saluran telegram</a> ), tempat kami membahas masalah pembakaran pengembangan Flutter, dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mobile People Talks</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saluran telegram</a> ), tempat kami membahas masalah pengembangan seluler pada prinsipnya, dari berbagai sudut pandang.  Talks Mobile People Memimpin adalah iOS, Android, ReactNative, dan Flutter. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3e/9ec/3f1/c3e9ec3f1258cdf6656a156db6841ca3.png" alt="gambar"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461239/">https://habr.com/ru/post/id461239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461223/index.html">IaaS digest: kinerja tinggi, penyimpanan data, dan teknologi baru untuk pusat data</a></li>
<li><a href="../id461225/index.html">Cara menuju Kutub Utara dari pangkalan yang melayang di Barneo</a></li>
<li><a href="../id461227/index.html">Embarcadero RAD Studio 10.3.2 keluar atau apa yang mati ... meninggal</a></li>
<li><a href="../id461229/index.html">Helsinki Cara menemukan pekerjaan di industri game Finlandia, mulai bekerja tanpa izin dan tidak melanggar hukum Rusia</a></li>
<li><a href="../id461231/index.html">Dan apa perbedaan yang dipilih Collation?</a></li>
<li><a href="../id461241/index.html">Wolfram Mathematica dalam Geofisika</a></li>
<li><a href="../id461243/index.html">Jangan pergi ke Afrika untuk berjalan-jalan: apa situasinya dengan sensor internet di Benua Hitam</a></li>
<li><a href="../id461247/index.html">50 Sumber Terbaik tentang Manajemen Produk untuk Membaca, Mendengarkan, dan Menonton</a></li>
<li><a href="../id461249/index.html">Menulis Aplikasi Android untuk Penggemar Film - Bagian 2 (Desain)</a></li>
<li><a href="../id461251/index.html">Pilihan slide yang berguna dari Julia Evans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>