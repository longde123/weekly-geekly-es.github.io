<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍶 🤹🏽 ♠️ Windows Server 2008 R2 - Sang Raja Mati, Hidup Sang Raja ↔️ 👃🏾 👩‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! 14/01/2020 semakin dekat dan tanggal ini menandai akhir dukungan yang diperluas untuk Windows Server 2008 R2, dan jika Anda masih mengguna...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Windows Server 2008 R2 - Sang Raja Mati, Hidup Sang Raja</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459068/"><img src="https://habrastorage.org/webt/8y/mw/mb/8ymwmb8srnrvkgraayebcfvtg1s.png"><br><br>  Halo, Habr!  14/01/2020 semakin dekat dan tanggal ini menandai akhir dukungan yang diperluas untuk Windows Server 2008 R2, dan jika Anda masih menggunakan Windows Server 2008 R2, Anda harus mempertimbangkan bermigrasi ke platform yang lebih baru. <br><br>  Di bawah potongan adalah perbandingan kecil dari sumber daya yang dikonsumsi dari platform Windows Server lama dan baru - peran RDSH.  Pertama-tama, saya tertarik pada kesempatan untuk terus menggunakan server HP G6 / G7 yang sudah tersedia yang menjalankan VMware Vsphere 5.5. <br><br>  Informasi tentang Siklus Hidup Server Windows tersedia di tautan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Siklus Hidup Produk Pencarian</a> ini. <br><a name="habracut"></a><br><h4>  Saya akan memiliki dua bangku tes: </h4><br><ol><li>  HP DL120 G7, 1 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CPU Intel Xeon E3-1240</a> </li><li>  HP ML350 G6, 2 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CPU Intel Xeon E5620</a> </li></ol><br>  Server akan berjalan di bawah VMware ESXi 5.5, gambar VMware-ESXi-5.5.0-Update1-1746018-HP-5.75.4-Dec2014.  Saya juga mencoba menggunakan gambar VMware-ESXi-5.5.0-Update3-3116895-HP-550.9.4.26-Nov2015, tetapi ini tidak mempengaruhi hasil. <br><br>  Tetapi gambar VMware-ESXi-5.5.0-Update2-2403361-HP-550.9.2.40.2-Sep2015 memberikan hasil yang menyimpang, untuk beberapa alasan statistik yang ditampilkan server dua kali berbeda dari yang asli.  Dengan gambar ini, maksimum yang ditampilkan server adalah 50 persen dari beban prosesor, tampaknya semacam bug.  Pada awalnya, saya senang ketika saya mendapatkan hasil pertama, tetapi kemudian saya menyadari bahwa ada sesuatu yang salah ... <br><br>  Juga harus disebutkan bahwa dukungan untuk VMware Vsphere 5.5 juga tidak abadi, dan platform tidak lagi relevan, dan Anda harus mempertimbangkan untuk memperbarui.  Informasi tentang Siklus Hidup VMware tersedia dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Matriks Produk Siklus Hidup VMware</a> ini. <br><br><img src="https://habrastorage.org/webt/3b/eq/_i/3beq_ihj_p9wxkw4zvg-tbbdwd4.png"><br><br>  Dan jangan lupa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panduan Kompatibilitas VMware</a> .  Jika kita berbicara tentang server HP DL120 G7, server ini tidak pernah ada dalam matriks kompatibilitas, tetapi ESXi 5.5 U3 secara resmi diizinkan untuk diinstal pada server HP ML350 G6. <br><br><h4>  OS tamu </h4><br>  Informasi tentang kompatibilitas ESXi dengan OS tamu juga tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Panduan Kompatibilitas VMware</a> . <br><br>  ESXi 5.5 U3 memungkinkan Anda untuk menginstal Windows Server 2016 sebagai OS tamu, dan bahkan versi 5.5 akan cukup untuk ini.  Tetapi untuk menginstal Windows Server 2019 Anda perlu ESXi versi 6+, tetapi ini tidak menghentikan saya untuk menguji rencana saya. <br><br>  Saya akan memiliki VM pengujian berikut: WS2008R2SP1, WS2012R2, WS2016 dan WS2019. <br><br>  Agen Alat VMware 5.5.0-10.2.5.8068406 diinstal pada semua VM.  Semua pembaruan dari Microsoft untuk Mei 2019 dan bahkan beberapa untuk Juni 2019 diinstal, setelah itu layanan pembaruan dinonaktifkan. <br><br>  Untuk pengujian saya, saya melakukan penyetelan minimum, saya ingin semuanya bekerja dengan parameter paling standar.  Untuk ini, saya akan menggunakan kebijakan grup lokal, sedikit lagi tentang ini saya akan menulis di akhir. <br><br><ol><li>  dinonaktifkan "komposisi desktop" </li><li>  diperbolehkan mengalihkan audio dan video </li><li>  Diaktifkan RemoteFX untuk Klien WS2008R2SP1 dan WS2008R2SP1 </li><li>  penonaktifan font dinonaktifkan </li><li>  membatasi kedalaman bit palet warna hingga 32 </li><li>  membatasi jumlah monitor hingga nilai 1 </li></ol><br><blockquote>  Agar RemoteFX codec mulai bekerja pada WS2008R2SP1, peran RDSH harus diinstal, untuk versi yang lebih baru, ini dapat dihilangkan.  Mungkin RemoteFX digunakan pada WS2008R2SP1 tanpa menginstal RDSH, tetapi tidak ada peristiwa dalam log tentang aktivasi codec ini. </blockquote><br><h4>  Tes 1 </h4><br>  Sebagai ujian, saya akan menggunakan video di YouTube dengan resolusi 720p, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apa yang baru di Layanan Desktop Jarak Jauh pada Windows Server 2019 - BRK2242</a> . <br><br>  Di setiap server, saya akan membuka satu sesi rdp dan video uji di Chrome (versi 75.0.3770.80 (64bit)). <br><br>  Dalam pengujian ini, thin client HP t510 yang menjalankan HP ThinOS 4.4 OS dan paket Freerdp-1.1hp10d-all-4.4-x86-SQ akan digunakan sebagai klien.  Unit ini terhubung ke monitor dengan resolusi Full HD, dan profil thin client telah diatur ulang ke pabrik. <br><br>  Saya memotret grafik dari host, semua tes pertama akan dilakukan pada server HP DL120G7. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ys/py/oa/yspyoaqc-lg1stpfaswzdveqrhq.png"></div><br>  <b>Mengomentari hasil tes pertama:</b> <br><br>  Dalam tes ini, ws2008 mengkonsumsi sumber daya prosesor tiga kali lebih sedikit, tetapi pada saat yang sama lalu lintas tiga kali lebih banyak daripada peserta lain dalam pengujian. <br><br>  Dengan lalu lintas saat ini, 66 sesi dapat ditempatkan dalam satu gigabit, tetapi beralih ke versi baru dari server mungkin akan mengurangi tiga kali lipat jumlah pengguna yang dapat bekerja dengan konsumsi prosesor ini. <br><br>  Secara visual, gambar dalam presentasi ini dapat diterima pada semua versi Windows Server.  Tentu saja, jika Anda menjalankan sesuatu yang lebih dinamis, maka versi server yang lebih baru menunjukkan gambar yang jauh lebih baik.  Saya kira ini karena jumlah frame, lebih banyak frame = pemutaran lancar = lebih banyak beban CPU. <br><br><h4>  Tes 2 </h4><br>  Skrip untuk pengujian kedua tetap tidak berubah, dengan pengecualian menggunakan Firefox (versi 67.0.2 (64bit)) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/3g/0p/gw3g0phogvrhasadejts3wle3uw.png"></div><br>  <b>Mengomentari hasil tes kedua:</b> <br><br>  Firefox yang dipasangkan dengan ws2019 menunjukkan hasil yang baik, mengonsumsi prosesor lebih banyak dan lalu lintas yang jauh lebih sedikit daripada ws2008. <br><br><h4>  Tes 3 </h4><br>  Chrome akan digunakan dalam tes ini, tetapi klien akan menjadi laptop dengan Windows 10 1903, laptop terhubung ke monitor dengan resolusi FullHD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i8/ns/fc/i8nsfcbu2s3gwaa90locpi6zmfw.png"></div><br>  <b>Mengomentari hasil tes ketiga:</b> <br><br>  Dalam kasus ws2008, lebih sedikit lalu lintas yang dikonsumsi, perubahan lain tidak signifikan ... <br><br>  Saya juga memperhatikan bahwa Chrome, ketika ditampilkan dengan latar belakang video, progress bar mengkonsumsi 1000 MHz lebih banyak, tetapi di Firefox saya tidak melihat efek seperti itu, dan menggambar progress bar tidak mempengaruhi jumlah sumber daya yang dikonsumsi. <br><br><h4>  Tes 4 </h4><br>  Laptop dengan Windows 10 dipasangkan dengan Firefox <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/8m/wl/zo8mwlxg1yf3z2m9cmlwflhixwi.png"></div><br>  <b>Mengomentari hasil tes keempat:</b> <br><br>  Dalam kombinasi server-klien-browser ini, ws2019 + Firefox mengonsumsi lebih sedikit sumber daya dibandingkan dengan Chrome, tetapi mulai mengonsumsi lebih banyak prosesor secara signifikan jika dibandingkan dengan hasil Uji 2. <br><br>  Dalam kasus ws2012 dan ws2016, hasil dari semua tes yang dilakukan jauh lebih merata, tidak ada variasi seperti ws2019. <br><br><h4>  Tes 5 </h4><br>  Tes ini terdiri dari memulai jumlah maksimum sesi rdp dan meluncurkan presentasi di setiap sesi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Remote Desktop Connection Manager</a> akan membantu saya dalam hal ini, RDCM akan diluncurkan pada laptop dengan Windows 10. <br><br>  Resolusi sesi harus dikurangi menjadi 1440 * 900.  Saya hanya akan memberikan tabel ringkasan sebagai hasilnya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hx/vq/vs/hxvqvslz4p1skrmddvv9pfmite0.png"></div><br>  <b>Mengomentari hasil tes kelima:</b> <br><br>  Tanpa diduga, server 2019 menunjukkan hasil yang lebih buruk daripada ws2012 dan ws2016.  Server 2008 dapat membuka 8 sesi sementara server 2012/2016 dapat membuka 4 sesi, dan sesi ke 5 meningkatkan beban hingga 100%.  Server 2019 mampu bekerja dengan maksimal 4 sesi. <br><br>  Firefox bukan browser prioritas bagi saya, dan karena itu saya hanya menjalankannya di ws2019 untuk memverifikasi angka yang diterima. <br><br><h4>  Tes 6 </h4><br>  Dalam pengujian ini, server HP ML350G6 dengan dua prosesor E5620 ikut bermain, saya hanya akan menguji server 2008 dan 2019.  Tesnya sama, memulai jumlah sesi maksimum, hanya Chrome yang akan digunakan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p2/dz/qq/p2dzqqt6bunqeznn6cuyjnobox0.png"></div><br>  <b>Mengomentari hasil tes keenam:</b> <br><br>  Untuk menjalankan 10 sesi pada server 2008, dibutuhkan 60 persen sumber daya prosesor, dan untuk memulai hanya 5 sesi pada server 2019, lebih dari 90 persen diperlukan. <br><br><h4>  Bagian terakhir - Tuning </h4><br>  Saya mengembalikan semua VM uji ke server HP DL120G7 dan menggunakan laptop dengan Windows 10 dan layar aslinya dengan resolusi 1366 * 768 sebagai klien. <br><br>  Sayangnya, saya tidak akan menyebut upaya untuk mengurangi konsumsi prosesor berhasil, tetapi tidak mungkin untuk mengatakan bahwa tidak ada hasil juga.  Berikut adalah daftar semua pengaturan kebijakan grup lokal yang tersedia yang dapat Anda gunakan untuk menyetel: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/di/lb/fzdilbns_mntqxophz-c3gzoaws.png"></div><br>  Di Windows Server 2008R2, opsi "Optimalkan pengalaman visual saat menggunakan RemoteFX" memungkinkan Anda untuk mengontrol kualitas gambar dan jumlah bingkai, dan ini memberikan hasil yang nyata.  Mengurangi jumlah frame mengurangi beban pada prosesor dan jaringan.  Untuk Windows Server 2019, opsi ini tidak berfungsi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k-/db/rk/k-dbrks-k4ac01ipqkfmiffviwy.png"></div><br>  Kualitas gambar di Windows Server 2019 dapat dikontrol oleh parameter "Konfigurasikan kualitas gambar untuk RemoteFX Adaptive Graphics", tetapi tidak ada yang mengubah jumlah bingkai, atau saya tidak menemukan parameter seperti itu. <br><br>  Saya mencoba berbagai kombinasi parameter, tetapi saya bisa mendapatkan perubahan nyata dalam hasilnya hanya dalam beberapa kasus.  Dan hal yang paling menarik adalah Anda dapat melihat perubahan dalam lalu lintas, tetapi pada saat yang sama, beban pada prosesor sedikit berubah. <br><br>  - Prioritas H.264 / AVC 444 meningkatkan beban pada prosesor, tetapi pada saat yang sama, lalu lintas turun dari 2x menjadi 1 megabit. <br><blockquote>  Pengaturan kebijakan ini memprioritaskan mode grafis H.264 / AVC 444 untuk skenario vGPU non-RemoteFX.  Saat Anda menggunakan pengaturan ini pada server RDP, server akan menggunakan H.264 / AVC 444 sebagai codec dalam koneksi RDP 10 di mana klien dan server dapat menggunakan H.264 / AVC 444. </blockquote><br>  - Menonaktifkan kompresi RDP tidak mengurangi beban pada prosesor, tetapi pada saat yang sama lalu lintas meningkat dari 2x menjadi 7 megabit. <br><br>  - Mengaktifkan parameter Losles untuk kualitas gambar menyebabkan konsumsi lalu lintas yang tidak memadai, tanpa mengubah beban pada prosesor.  Untuk skenario apa opsi ini ditambahkan kepada saya tidak jelas. <br><blockquote>  Jika Anda mengaktifkan pengaturan kebijakan ini dan mengatur kualitas ke Lossless, RemoteFX Adaptive Graphics menggunakan pengkodean lossless.  Dalam mode ini, integritas warna data grafik tidak terpengaruh.  Namun, pengaturan ini menghasilkan peningkatan konsumsi bandwidth jaringan yang signifikan.  Kami menyarankan Anda mengatur ini untuk kasus yang sangat spesifik. </blockquote><br><br><img src="https://habrastorage.org/webt/xq/zm/nr/xqzmnrlocn2gyxeyc930sdxg5zy.png"><br><br><h4>  Ringkasan </h4><br>  Jika sebelumnya, untuk pengoperasian 10 pengguna aktif, 8 server nuklir sudah cukup dan masih ada ruang kosong, sekarang server seperti itu hanya cukup untuk 5 pengguna. <br><br>  Saya pikir sudah saatnya bersiap-siap untuk mengganti server generasi HP G6 dan G7.  Sangat disayangkan untuk berpisah dengan server yang memiliki&gt; 100 GB RAM diinstal, saya berasumsi bahwa mereka akan melayani lebih lanjut. <br><br>  Saya tidak mengecualikan bahwa prosesor lama tidak memiliki instruksi perangkat keras, jadi saya berencana untuk mendapatkan server modern untuk pengujian dalam waktu dekat.  Tapi sejujurnya, perkiraan saya pesimistis, saya pikir mungkin untuk mendapatkan hasil yang diinginkan hanya dengan kekuatan kasar, peningkatan jumlah inti prosesor, dan ini akan memerlukan peningkatan jumlah lisensi dan biaya yang diperlukan. <br><br>  <b>Akhirnya</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459068/">https://habr.com/ru/post/id459068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459050/index.html">Modul pengetikan Vuex yang kuat</a></li>
<li><a href="../id459052/index.html">Cara membandingkan: "mobil luar biasa" dan "gubuk jelek", dalam survei pemasaran dan dalam data besar</a></li>
<li><a href="../id459054/index.html">Heatmap of klik - bagaimana perilaku pengguna di situs</a></li>
<li><a href="../id459062/index.html">Intisari materi menarik untuk pengembang seluler # 305 (pada 1 - 7 Juli)</a></li>
<li><a href="../id459066/index.html">Database menulis dan membaca balancing</a></li>
<li><a href="../id459070/index.html">Menciptakan Tower Defense in Unity: Towers and Shooting Enemies</a></li>
<li><a href="../id459074/index.html">Petty little joy # 7: three untuk harga satu konsol animasi, algoritma dan debugging</a></li>
<li><a href="../id459078/index.html">CERN beralih ke perangkat lunak sumber terbuka - mengapa?</a></li>
<li><a href="../id459080/index.html">Fitur HttpUrlConnection dari java.net</a></li>
<li><a href="../id459082/index.html">Siapa eidetik, bagaimana ingatan salah bekerja, dan tiga mitos populer tentang ingatan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>