<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙈 👉 🔖 Visión por computadora como alternativa a los pases de oficina 😏 🧒🏾 🍪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy les contaré cómo creamos un sistema de control de acceso en la oficina basado en el servicio de reconocimiento facial Vision . Primero, un poco de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Visión por computadora como alternativa a los pases de oficina</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br><br>  Hoy les contaré cómo creamos un sistema de control de acceso en la oficina basado en el servicio de reconocimiento facial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vision</a> .  Primero, un poco de historia.  Como en cualquier servicio de correo electrónico, hemos creado un sistema antispam.  Dichos sistemas ahora se hacen sobre la base del aprendizaje automático, tenemos un poderoso equipo a cargo de ello.  Y donde hay aprendizaje automático, hay visión por computadora.  Por lo tanto, el servicio Vision surgió de forma bastante natural y natural. <br><br>  Paralelamente a esto, hace unos años, lanzamos Cloud, un almacenamiento de archivos confiable con distribución geográfica a centros de datos, que puede ser utilizado tanto por particulares como por empresas.  Con el tiempo, obtuvimos una "Nube para empresas", que no solo almacena archivos, sino que también le permite ordenar máquinas virtuales.  Poco a poco, se convirtió en MCS - Mail.ru Cloud Solutions, donde Vision se adapta orgánicamente como uno de los servicios. <br><a name="habracut"></a><br><h1>  Nube </h1><br>  Nuestras redes neuronales son capaces de reconocer no solo rostros, sino también varios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">objetos, objetos y escenas</a> , incluidas las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vistas</a> .  Ahora pueden reconocer alrededor de 10 mil categorías, y la visión artificial a veces funciona mejor que la humana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br><br>  Esta es mi hija en 2012, en 2015 y 2018.  Si no la conocía personalmente, probablemente no entendí de inmediato que se trata de la misma persona.  Y la red neuronal pudo coincidir y comprender. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br><br>  Aquí la niña se volvió y entrecerró los ojos, y el niño en general con una gorra con una sombra en la mitad de la cara.  Pero al mismo tiempo, la red neuronal los reconoció con precisión, incluso a pesar de condiciones tan difíciles.  Naturalmente, la tecnología que se está desarrollando dentro de la empresa no pudo evitar encontrar soporte en los servicios internos. <br><br><h1>  Nuestra intranet </h1><br>  Nuestra intranet se llama sys.  Este es un tipo de red social (tenemos pocos de ellos).  En él, los empleados cargan fotos de varios eventos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br><br>  Cuando se presentan varios cientos de fotos del evento, es bastante difícil encontrarse allí.  Por lo tanto, tenemos visión artificial conectada a estos álbumes, que justo en la intranet, en un solo lugar, muestra las fotografías en las que estoy representado.  Aquí el sistema me vio en una de las fiestas corporativas de verano. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br><br>  La red neuronal me reconoció incluso en el crepúsculo de perfil, y hay muchas más personas en la foto. <br><br><h1>  Bastidores de conferencia </h1><br>  Más tarde hicimos bastidores de conferencias.  Escribí un software para iPad, que está instalado dentro del rack, pero en general soy un desarrollador de iOS y no tengo nada que ver con la visión por computadora, solo ayudo de una manera amigable. <br><br><img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br><br>  ¿Cuál es la esencia de este estante?  A lo largo del evento, una reunión, conferencia, fiesta corporativa o al menos un cumpleaños, un fotógrafo lo fotografía.  De vez en cuando, deja caer las imágenes acumuladas en la nube.  Puede ir al mostrador en cualquier momento, tomar una foto y hacer clic en el botón "Encuéntrame".  Y el estante mostrará inmediatamente todas las fotos en las que fue capturado, o dirá que no se ha encontrado nada hasta ahora, si el sistema aún no ha logrado indexar las imágenes y le solicita que ingrese un correo electrónico.  Y después del evento, recibirá un enlace por correo a la carpeta en la nube con todas las fotos en las que se encuentre.  Esta es una de las aplicaciones del servicio Vision. <br><br><h1>  Sistema de acceso </h1><br>  Naturalmente, quería usar esas capacidades de reconocimiento facial no solo para buscar mi fisonomía en imágenes corporativas, sino también para algo más práctico.  Por ejemplo, para un sistema de rendimiento automático.  Aplicar un pase en cada entrada de su piso no es muy conveniente: a menudo se olvida el pase, y para las niñas con ropa ligera en verano no hay lugar para arreglar el pase. <br><br>  Por lo tanto, decidimos experimentar.  Tenemos todas las condiciones para esto: no necesitamos pedir permiso a nadie, un departamento administrativo muy receptivo, que dice con un suspiro: "Está bien.  Adjunta tus cámaras.  Solo que no en la puerta.  Las puertas se relacionan con la seguridad contra incendios ".  Somos: "Bueno, entonces.  Vamos a adjuntar a un lado ".  También tenemos pacientes pacientes, nos han sufrido. <br><br><h1>  Arquitectura </h1><br>  A primera vista, la arquitectura del sistema de acceso parece muy simple: la cámara toma fotos, la envía a Vision y Vision abre la puerta.  Pero cuando comenzamos a pintar con colegas cómo hacer esto realmente, obtuvimos ese esquema: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br><br>  El bloque de la derecha lo llamamos "cámara": este es el módulo que cuelga de la puerta.  Consta de tres partes.  La Raspberry Pi recibe video de una cámara USB, codifica con FFmpeg y envía.  Probamos varias cámaras IP de un rango de precios razonable, y todos tuvieron un retraso notable de aproximadamente 0.5 s.  Y dado que tenemos retrasos en otras etapas, cuando una persona se acerca, mira a la cámara y por unos segundos no pasa nada, ya quiere hacer un pase.  Por lo tanto, redujimos los retrasos siempre que fue posible, y la Raspberry Pi con una cámara USB resultó ser más rápida que muchas cámaras IP comerciales.  También conectado a la Raspberry hay un pequeño Arduino con un LED multicolor y un chirrido.  El LED predeterminado es rojo.  Cuando una persona aparece y es reconocida, el verde se ilumina. <br><br>  Entonces, la Raspberry Pi transmite la transmisión de video, que a través de Ethernet por cable ingresa al servidor.  Tenemos una sala de servidores en cada piso, en la que hay interruptores, cables de conexión a los escritorios de los empleados y un sistema de control de acceso a tiempo completo, un sistema de control y gestión de acceso. <br><br>  Ponemos otro Raspberry Pi en la sala del servidor, que recibe la transmisión de video en tiempo real y la ejecuta a través de OpenCV.  ¿Por qué necesitamos OpenCV?  Necesitamos determinar si hay una cara en la imagen.  Una red neuronal que define a una persona en una fotografía funciona un poco más, y es demasiado costoso alimentarla constantemente.  Por lo tanto, a través de OpenCV, determinamos la presencia de una cara y, si aparece, la enviamos a Vision.  El servicio responde que no encontró a este empleado o envía el identificador de empleado en la base de datos de Recursos Humanos.  Con este identificador de empleado, vamos a la intranet asociada con el ACS y nos devuelve el identificador de pase.  Además, lanzamos este identificador de paso en Arduino, que lo pasa al ACS.  Para un sistema de control de acceso, esto es equivalente a que una persona solicite un pase.  Es decir, no cambiamos el ACS de ninguna manera; todavía registra la entrada y salida de los empleados. <br><br>  ¿Cómo integramos nuestro sistema con ACS?  En nuestra oficina, se utilizan dispositivos Bolid C2000-2. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br><br>  Este es un sistema de control de acceso doméstico.  Lo más probable es que pueda conectarse a estos dispositivos a través de la interfaz 485, pero nos conectamos a través del protocolo Wiegand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br><br>  Conectamos el Arduino, que actúa como un proxy, al lector de pases instalado cerca de la puerta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br><br>  La foto muestra la conexión de alimentación y dos líneas de datos del lector de pases.  La almohadilla se usa para una conexión más conveniente. <br><br>  Arduino recibe el número de pase, ya sea del lector o de la Raspberry Pi a través de USB, y se lo entrega al ACS.  El ACS ni siquiera sabe de dónde es el número de pase. <br><br><h1>  Wiegand </h1><br>  Este es un protocolo estándar para sistemas de control de acceso, es compatible con la mayoría de los lectores.  El protocolo es muy simple: dos líneas de datos, una línea de ceros y una línea de unidades.  Tan pronto como conecta la línea cero al suelo, el lector comprende que se transmite cero, lo mismo con las unidades.  Es decir, el protocolo no tiene tiempos estandarizados, y el número de omisión es fácil de leer a través de una interrupción en el Arduino, es fácil representarlo como una secuencia de datos.  Y como la grabación requiere algún tipo de sincronización, me concentré en estos valores: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br><br>  Ya hay una biblioteca preparada para Arduino.  Puede leer diferentes formatos de Wiegand, pero sus capacidades se limitan a esto.  Y todavía tenía que transmitir.  Por lo tanto, escribí mi biblioteca, que funciona solo con el formato Wiegand-26.  26 es el número de bits: 3 bytes del número de omisión y 2 bits de paridad.  Además, en toda la documentación y artículos está escrito que, muy probablemente, su controlador moderno ignorará los bits de paridad, por lo que soy flojo y no los cuento, pero siempre envío cero.  ACS percibe esto normalmente. <br><br>  Tuvimos otro problema: si alguien apareció por primera vez frente a la cámara y luego, sin esperar la operación, aplicó un pase, se produjo una situación de carrera: al mismo tiempo, el número de pase vino del lector y del reconocimiento.  ACS no pudo hacer frente a esto y no permitió que la gente entrara.  Por lo tanto, tuve que agregar un buffer de anillo con 4 códigos a la biblioteca.  No importa de dónde provienen los códigos, se colocan en el búfer y luego con un tiempo de espera de 0.5 s se transmiten al ACS.  Desde entonces, sus colegas han dejado de quejarse de que no están permitidos. <br><br><h1>  Banco de pruebas </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br><br>  El primer prototipo fue ensamblado a partir de algo horrible.  Raspberry Pi colgaba en una caja en un estante ridículo, y una cámara estaba pegada encima de una cinta de doble cara.  Arduino cuelga de las reglas laterales.  En general, todo lo que amamos es muy DIY. <br><br>  Por supuesto, en esta forma era imposible irse, era necesario organizarlo maravillosamente.  Hablamos con varios contratistas, nos prometieron ordenar muestras en China, pero luego pasaron todos los plazos acordados y nadie nos ofreció nada. <br><br>  Los productos personalizados tienen un problema: todas las soluciones son altamente especializadas, se fabricarán específicamente para nosotros.  Primero, nos volvemos dependientes del proveedor.  En segundo lugar, resulta un diseño de circuito único con una pequeña circulación, lo que significa que el costo de una pieza será alto.  En tercer lugar, el tiempo de producción es lo suficientemente largo y, si falla una copia, no podremos comprar rápidamente un reemplazo en la tienda, tendremos que esperar a que se realice la próxima impresión, y si lo hacemos de inmediato, las copias restantes se desempolvarán en el almacén. <br><br>  Después de que todos los socios potenciales nos decepcionaron, fui a un colega de Vision y le dije: "Volodia, déjame imprimir una funda en tu impresora 3D para que se vea hermosa".  Suspiró y dijo: "Vamos.  ¿Qué hacer? <br><br><h1>  Camera V 1 </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br><br>  En Fusion, dibujé un monstruo de Frankenstein.  En la esquina se suponía que era una Raspberry Pi con una entrada para un cable Ethernet.  Entrada lateral para poder.  El "segundo piso" era una cámara.  El resultado fue una estructura grande, e incluso lo imprimí con una capa delgada para no gastar mucho plástico.  Se veía terrible, y colgarlo era aún más vergonzoso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br><br>  Además, un colega me envió una referencia, dicen, nos gustaría.  Le respondí que no podía hacer esto, pero decidí diseñar otro edificio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br><br>  El nuevo estuche tenía 11 cm de diámetro, más pequeño que el CD.  La colocación del relleno también es de dos capas.  Después de imprimir la primera versión, me di cuenta de que no tiene sentido colocar la cámara USB por completo en su estuche original.  Lo desarme con cuidado, y resultó que tiene 4 agujeros de aterrizaje en el panel frontal.  Combiné este panel con una cámara en un ensamblaje común con un tweeter y un LED. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br><br>  Primero, intentamos generar un chirrido en la Raspberry Pi a través de gpio.  Resultó extremadamente mal.  Por lo tanto, decidimos tomar esta función por separado de la Raspberry Pi conectando un pequeño arduino (en realidad Iskra mini), al que se soldaron el chirrido y el LED, a través de TTL directamente al bloque. <br><br>  Así es como se veía en la batalla: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br>  Colgamos el dispositivo en el piso.  De esta forma, vivió lo suficiente.  Chillando, brillando maravillosamente, abriendo la puerta, sin embargo, no siempre.  Los colegas, sin embargo, se quejaron de que el LED es demasiado brillante.  Tuve que debilitarlo 4 veces. <br><br><h1>  Camera V 2 </h1><br>  Luego hicieron esta opción: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br><br>  Se inspiró en el diseño del hub Xiaomi, con un anillo luminoso alrededor del perímetro.  Se ve muy hermosa  El logotipo de Vision está hecho de partes individuales impresas en plásticos de diferentes colores.  Aquí está el modelo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br><br>  Esta vez puse el chirriador en la pared posterior, monté el LED en un anillo transparente alrededor del perímetro, impreso desde un PLA transparente.  La decoración se derrumbó casi de inmediato, porque originalmente simplemente se insertó por fricción, y tuve que ponerla en pegamento. <br><br><h1>  Problemas de cámara </h1><br>  Tuvimos la idea de replicar esta decisión en todo el edificio.  Pero hay un problema: casi todos los pisos tienen dos puertas, y cada una debe tener dos cámaras, solo 96 cámaras para solo una de nuestras torres, y ahora la segunda se está desarrollando activamente.  Es posible imprimir tantos casos, pero ya parece complicado.  Además, tenemos bastantes componentes en el dispositivo, lo que significa muchos puntos de falla.  Si escalamos la solución a todo el edificio, mantendremos constantemente estas cámaras.  Una vez más, la complejidad del reemplazo rápido, porque cada cámara es un dispositivo de pieza.  Y debe imprimir muchos de ellos, con un margen, o, si sucedió algo, ejecutar inmediatamente, imprimir y recoger uno nuevo.  Nos dimos cuenta de que las soluciones de bricolaje son geniales, pero necesitas algo más conveniente en la replicación.  Y surgió la idea de transferir todo al iPad. <br><br><h3>  IPad </h3><br>  El iPad tiene varias ventajas.  El primero es la pantalla.  Los colegas se quejaron de la falta de retroalimentación, son adecuados y no entienden si el reconocimiento ha comenzado o no, esperarlos o no esperar. <br><br>  En segundo lugar, iOS tiene una función de reconocimiento facial incorporada.  La función que realizó OpenCV se pasó al iPad.  Se muestra un marco en la pantalla, y la persona debe llegar tan lejos que la cara encaje en este marco.  Después de eso, el sistema comienza a reconocerlo automáticamente, no necesita presionar nada. <br><br>  En tercer lugar, el iPad es un producto masivo.  Si falla, establecemos otro.  Aunque la tableta en sí cuesta unos 20 mil rublos, sigue siendo más barata que las cámaras personalizadas que los socios nos ofrecieron.  Además, más rápido y más confiable. <br><br><h1>  Nueva arquitectura </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br><br>  iPad se hizo cargo de la mayoría de las funciones.  En la Raspberry Pi, que se encuentra en la sala de servidores, en realidad solo hay un host HTTP que acepta una solicitud GET con una ID de paso.  Inmediatamente representa el código en Arduino, y ella representa en ACS. <br><br>  En la primera versión, Raspberry Pi estaba muy cargado, porque OpenCV estaba trabajando constantemente en él.  Ya no era posible conectarle una segunda cámara; no habría suficiente potencia informática.  Ya pensamos en poner una computadora honesta allí, que analizaría 4 hilos de dos puertas.  Pero no llegó a eso.  Ahora la búsqueda de caras en la imagen se realiza de forma independiente en cada iPad.  En la cruz, hay dos Arduino, uno para cada puerta.  Ambas placas funcionan con pases de entrada y salida.  ¿Por qué es importante trabajar con pases de entrada y salida?  En primer lugar, cuando se reconoce la cara y se abre la puerta, se enciende una luz verde en el lector de tarjetas, y los colegas entienden que puede salir.  En segundo lugar, ACS registra entradas y salidas.  Emulando la entrada y la salida por separado, no rompemos el esquema de operación ACS. <br><br>  Naturalmente, los diseñadores se unieron y nos dibujaron una interfaz hermosa.  Así es como se ve ahora en uno de los pisos de nuestra oficina: <br><br><img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br><br><h1>  Trabajar con visión </h1><br>  A pesar de que MCS es un producto comercial, los aficionados también pueden usarlo.  El servicio ofrece a todos 5 mil transacciones gratuitas por mes, es decir 166 por día.  Por lo tanto, puede solicitar sus necesidades domésticas, si encaja en el límite, por supuesto.  ¿Cómo se puede hacer esto? <br><br><pre><code class="python hljs">python examples/python/smarty.py \ -u <span class="hljs-string"><span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize ?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce 99c01a80a4558d8ed93b313737363830"</span></span> \ -p friends1.jpg \ --meta <span class="hljs-string"><span class="hljs-string">'{"space":"1", "create_new":true}'</span></span> \ -v</code> </pre> <br>  Tome una foto y envíela a Vision junto con nuestro token de acceso.  Indicamos que estamos trabajando con el primer espacio y establecemos <code>create_new</code> , luego el sistema creará un nuevo identificador para cada persona desconocida.  Esto es lo que obtenemos en respuesta: <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"objects"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"file_0"</span></span>, <span class="hljs-string"><span class="hljs-string">"persons"</span></span>:[ {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person1"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">102</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>,<span class="hljs-number"><span class="hljs-number">134</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99999</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5025</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person2"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">393</span></span>,<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">461</span></span>,<span class="hljs-number"><span class="hljs-number">166</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99987</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.548</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person3"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">458</span></span>,<span class="hljs-number"><span class="hljs-number">48</span></span>,<span class="hljs-number"><span class="hljs-number">535</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99976</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4766</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person4"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">273</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span>,<span class="hljs-number"><span class="hljs-number">352</span></span>,<span class="hljs-number"><span class="hljs-number">147</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99963</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.504</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person5"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">525</span></span>,<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99954</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4849</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person6"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">194</span></span>,<span class="hljs-number"><span class="hljs-number">76</span></span>,<span class="hljs-number"><span class="hljs-number">258</span></span>,<span class="hljs-number"><span class="hljs-number">167</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.9984</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5725</span></span>} ] } ], <span class="hljs-string"><span class="hljs-string">"aliases_changed"</span></span>:false }, <span class="hljs-string"><span class="hljs-string">"htmlencoded"</span></span>:false, <span class="hljs-string"><span class="hljs-string">"last_modified"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Formateé un poco a JSON.  La respuesta contiene el identificador de la persona, las coordenadas de la cara en la foto y dos parámetros: qué tan bien se reconoce la cara y cuánto coincide esta persona con el estándar.  Puede enviar una solicitud POST con una imagen en su lenguaje de programación, obtener JSON y analizar la respuesta. <br><br>  Si tiene una cruz grande y necesita determinar solo una docena de personas, puede configurarlas manualmente.  Luego, el sistema proporcionará identificadores para personas conocidas e indefinidas para personas desconocidas.  Las personas también se pueden eliminar selectivamente, por ejemplo, si un empleado renuncia. <br><br><h1>  Ideas </h1><br>  ¿En qué proyectos puedes usar el reconocimiento facial?  Si desea implementar un sistema de ancho de banda, debe preocuparse por la suplantación de identidad.  Por ejemplo, agregar una cámara infrarroja para determinar si es una fotografía o una persona viva.  O poniendo dos cámaras para determinar la profundidad del objeto, esto se puede hacer usando OpenCV. <br><br>  Puede organizar el reconocimiento de personas en la entrada.  Si estos son sus vecinos, entonces todo está en orden, y si alguien es un extraño, puede enviarse una alerta.  Tenemos tal problema en nuestra casa, los extraños vienen periódicamente y dejan mucha basura después de ellos en el rellano. <br><br>  Si crea un "espejo inteligente", puede equiparlo con el reconocimiento de los miembros de la familia, para que todos puedan mostrar lo que es interesante para él.  Digamos, el espejo me mostrará el horario de las reuniones de hoy, y con mi hija me saludará alegremente y se ofrecerá a lavarme los dientes, y no rápidamente, como siempre, sino dos minutos. <br><br>  Otra idea es el reconocimiento de una placa por una puerta automática en el país.  Para no salir ni presionar el llavero, puede colocar una cámara que eliminará su número y la puerta se abrirá automáticamente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473828/">https://habr.com/ru/post/473828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473816/index.html">Características de JavaScript moderno que quizás no conozcas</a></li>
<li><a href="../473818/index.html">Aplicación en TSD y comunicación con 1C: Enterprise 8.3 a través del servicio HTTP. Parte 4 (OnKeyUp. Escáner SC con emulación de teclado)</a></li>
<li><a href="../473822/index.html">Oferta de trabajo en 1 día: cómo entrevistamos y retroalimentamos el mismo día</a></li>
<li><a href="../473824/index.html">Cómo construir una tecnología comercial para la planificación de ventas en un solo sistema</a></li>
<li><a href="../473826/index.html">Autenticación OTP en el servidor web Apache</a></li>
<li><a href="../473832/index.html">ShIoTiny: actualizaciones y notificaciones</a></li>
<li><a href="../473834/index.html">Monitoreo de Blackbox en redes Clos. Informe Yandex</a></li>
<li><a href="../473838/index.html">DJI Mavic Mini: el quadrocopter plegable más ligero</a></li>
<li><a href="../473840/index.html">Transmita video desde un dispositivo Android a través de UDP a la aplicación JAVA</a></li>
<li><a href="../473842/index.html">Resumen de noticias de octubre sobre aprendizaje automático e inteligencia artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>