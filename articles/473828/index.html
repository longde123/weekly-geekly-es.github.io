<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뗻 游녤 游댔 Visi칩n por computadora como alternativa a los pases de oficina 游땚 游뉧릞 游꼵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy les contar칠 c칩mo creamos un sistema de control de acceso en la oficina basado en el servicio de reconocimiento facial Vision . Primero, un poco de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Visi칩n por computadora como alternativa a los pases de oficina</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br><br>  Hoy les contar칠 c칩mo creamos un sistema de control de acceso en la oficina basado en el servicio de reconocimiento facial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vision</a> .  Primero, un poco de historia.  Como en cualquier servicio de correo electr칩nico, hemos creado un sistema antispam.  Dichos sistemas ahora se hacen sobre la base del aprendizaje autom치tico, tenemos un poderoso equipo a cargo de ello.  Y donde hay aprendizaje autom치tico, hay visi칩n por computadora.  Por lo tanto, el servicio Vision surgi칩 de forma bastante natural y natural. <br><br>  Paralelamente a esto, hace unos a침os, lanzamos Cloud, un almacenamiento de archivos confiable con distribuci칩n geogr치fica a centros de datos, que puede ser utilizado tanto por particulares como por empresas.  Con el tiempo, obtuvimos una "Nube para empresas", que no solo almacena archivos, sino que tambi칠n le permite ordenar m치quinas virtuales.  Poco a poco, se convirti칩 en MCS - Mail.ru Cloud Solutions, donde Vision se adapta org치nicamente como uno de los servicios. <br><a name="habracut"></a><br><h1>  Nube </h1><br>  Nuestras redes neuronales son capaces de reconocer no solo rostros, sino tambi칠n varios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">objetos, objetos y escenas</a> , incluidas las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vistas</a> .  Ahora pueden reconocer alrededor de 10 mil categor칤as, y la visi칩n artificial a veces funciona mejor que la humana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br><br>  Esta es mi hija en 2012, en 2015 y 2018.  Si no la conoc칤a personalmente, probablemente no entend칤 de inmediato que se trata de la misma persona.  Y la red neuronal pudo coincidir y comprender. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br><br>  Aqu칤 la ni침a se volvi칩 y entrecerr칩 los ojos, y el ni침o en general con una gorra con una sombra en la mitad de la cara.  Pero al mismo tiempo, la red neuronal los reconoci칩 con precisi칩n, incluso a pesar de condiciones tan dif칤ciles.  Naturalmente, la tecnolog칤a que se est치 desarrollando dentro de la empresa no pudo evitar encontrar soporte en los servicios internos. <br><br><h1>  Nuestra intranet </h1><br>  Nuestra intranet se llama sys.  Este es un tipo de red social (tenemos pocos de ellos).  En 칠l, los empleados cargan fotos de varios eventos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br><br>  Cuando se presentan varios cientos de fotos del evento, es bastante dif칤cil encontrarse all칤.  Por lo tanto, tenemos visi칩n artificial conectada a estos 치lbumes, que justo en la intranet, en un solo lugar, muestra las fotograf칤as en las que estoy representado.  Aqu칤 el sistema me vio en una de las fiestas corporativas de verano. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br><br>  La red neuronal me reconoci칩 incluso en el crep칰sculo de perfil, y hay muchas m치s personas en la foto. <br><br><h1>  Bastidores de conferencia </h1><br>  M치s tarde hicimos bastidores de conferencias.  Escrib칤 un software para iPad, que est치 instalado dentro del rack, pero en general soy un desarrollador de iOS y no tengo nada que ver con la visi칩n por computadora, solo ayudo de una manera amigable. <br><br><img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br><br>  쮺u치l es la esencia de este estante?  A lo largo del evento, una reuni칩n, conferencia, fiesta corporativa o al menos un cumplea침os, un fot칩grafo lo fotograf칤a.  De vez en cuando, deja caer las im치genes acumuladas en la nube.  Puede ir al mostrador en cualquier momento, tomar una foto y hacer clic en el bot칩n "Encu칠ntrame".  Y el estante mostrar치 inmediatamente todas las fotos en las que fue capturado, o dir치 que no se ha encontrado nada hasta ahora, si el sistema a칰n no ha logrado indexar las im치genes y le solicita que ingrese un correo electr칩nico.  Y despu칠s del evento, recibir치 un enlace por correo a la carpeta en la nube con todas las fotos en las que se encuentre.  Esta es una de las aplicaciones del servicio Vision. <br><br><h1>  Sistema de acceso </h1><br>  Naturalmente, quer칤a usar esas capacidades de reconocimiento facial no solo para buscar mi fisonom칤a en im치genes corporativas, sino tambi칠n para algo m치s pr치ctico.  Por ejemplo, para un sistema de rendimiento autom치tico.  Aplicar un pase en cada entrada de su piso no es muy conveniente: a menudo se olvida el pase, y para las ni침as con ropa ligera en verano no hay lugar para arreglar el pase. <br><br>  Por lo tanto, decidimos experimentar.  Tenemos todas las condiciones para esto: no necesitamos pedir permiso a nadie, un departamento administrativo muy receptivo, que dice con un suspiro: "Est치 bien.  Adjunta tus c치maras.  Solo que no en la puerta.  Las puertas se relacionan con la seguridad contra incendios ".  Somos: "Bueno, entonces.  Vamos a adjuntar a un lado ".  Tambi칠n tenemos pacientes pacientes, nos han sufrido. <br><br><h1>  Arquitectura </h1><br>  A primera vista, la arquitectura del sistema de acceso parece muy simple: la c치mara toma fotos, la env칤a a Vision y Vision abre la puerta.  Pero cuando comenzamos a pintar con colegas c칩mo hacer esto realmente, obtuvimos ese esquema: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br><br>  El bloque de la derecha lo llamamos "c치mara": este es el m칩dulo que cuelga de la puerta.  Consta de tres partes.  La Raspberry Pi recibe video de una c치mara USB, codifica con FFmpeg y env칤a.  Probamos varias c치maras IP de un rango de precios razonable, y todos tuvieron un retraso notable de aproximadamente 0.5 s.  Y dado que tenemos retrasos en otras etapas, cuando una persona se acerca, mira a la c치mara y por unos segundos no pasa nada, ya quiere hacer un pase.  Por lo tanto, redujimos los retrasos siempre que fue posible, y la Raspberry Pi con una c치mara USB result칩 ser m치s r치pida que muchas c치maras IP comerciales.  Tambi칠n conectado a la Raspberry hay un peque침o Arduino con un LED multicolor y un chirrido.  El LED predeterminado es rojo.  Cuando una persona aparece y es reconocida, el verde se ilumina. <br><br>  Entonces, la Raspberry Pi transmite la transmisi칩n de video, que a trav칠s de Ethernet por cable ingresa al servidor.  Tenemos una sala de servidores en cada piso, en la que hay interruptores, cables de conexi칩n a los escritorios de los empleados y un sistema de control de acceso a tiempo completo, un sistema de control y gesti칩n de acceso. <br><br>  Ponemos otro Raspberry Pi en la sala del servidor, que recibe la transmisi칩n de video en tiempo real y la ejecuta a trav칠s de OpenCV.  쯇or qu칠 necesitamos OpenCV?  Necesitamos determinar si hay una cara en la imagen.  Una red neuronal que define a una persona en una fotograf칤a funciona un poco m치s, y es demasiado costoso alimentarla constantemente.  Por lo tanto, a trav칠s de OpenCV, determinamos la presencia de una cara y, si aparece, la enviamos a Vision.  El servicio responde que no encontr칩 a este empleado o env칤a el identificador de empleado en la base de datos de Recursos Humanos.  Con este identificador de empleado, vamos a la intranet asociada con el ACS y nos devuelve el identificador de pase.  Adem치s, lanzamos este identificador de paso en Arduino, que lo pasa al ACS.  Para un sistema de control de acceso, esto es equivalente a que una persona solicite un pase.  Es decir, no cambiamos el ACS de ninguna manera; todav칤a registra la entrada y salida de los empleados. <br><br>  쮺칩mo integramos nuestro sistema con ACS?  En nuestra oficina, se utilizan dispositivos Bolid C2000-2. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br><br>  Este es un sistema de control de acceso dom칠stico.  Lo m치s probable es que pueda conectarse a estos dispositivos a trav칠s de la interfaz 485, pero nos conectamos a trav칠s del protocolo Wiegand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br><br>  Conectamos el Arduino, que act칰a como un proxy, al lector de pases instalado cerca de la puerta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br><br>  La foto muestra la conexi칩n de alimentaci칩n y dos l칤neas de datos del lector de pases.  La almohadilla se usa para una conexi칩n m치s conveniente. <br><br>  Arduino recibe el n칰mero de pase, ya sea del lector o de la Raspberry Pi a trav칠s de USB, y se lo entrega al ACS.  El ACS ni siquiera sabe de d칩nde es el n칰mero de pase. <br><br><h1>  Wiegand </h1><br>  Este es un protocolo est치ndar para sistemas de control de acceso, es compatible con la mayor칤a de los lectores.  El protocolo es muy simple: dos l칤neas de datos, una l칤nea de ceros y una l칤nea de unidades.  Tan pronto como conecta la l칤nea cero al suelo, el lector comprende que se transmite cero, lo mismo con las unidades.  Es decir, el protocolo no tiene tiempos estandarizados, y el n칰mero de omisi칩n es f치cil de leer a trav칠s de una interrupci칩n en el Arduino, es f치cil representarlo como una secuencia de datos.  Y como la grabaci칩n requiere alg칰n tipo de sincronizaci칩n, me concentr칠 en estos valores: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br><br>  Ya hay una biblioteca preparada para Arduino.  Puede leer diferentes formatos de Wiegand, pero sus capacidades se limitan a esto.  Y todav칤a ten칤a que transmitir.  Por lo tanto, escrib칤 mi biblioteca, que funciona solo con el formato Wiegand-26.  26 es el n칰mero de bits: 3 bytes del n칰mero de omisi칩n y 2 bits de paridad.  Adem치s, en toda la documentaci칩n y art칤culos est치 escrito que, muy probablemente, su controlador moderno ignorar치 los bits de paridad, por lo que soy flojo y no los cuento, pero siempre env칤o cero.  ACS percibe esto normalmente. <br><br>  Tuvimos otro problema: si alguien apareci칩 por primera vez frente a la c치mara y luego, sin esperar la operaci칩n, aplic칩 un pase, se produjo una situaci칩n de carrera: al mismo tiempo, el n칰mero de pase vino del lector y del reconocimiento.  ACS no pudo hacer frente a esto y no permiti칩 que la gente entrara.  Por lo tanto, tuve que agregar un buffer de anillo con 4 c칩digos a la biblioteca.  No importa de d칩nde provienen los c칩digos, se colocan en el b칰fer y luego con un tiempo de espera de 0.5 s se transmiten al ACS.  Desde entonces, sus colegas han dejado de quejarse de que no est치n permitidos. <br><br><h1>  Banco de pruebas </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br><br>  El primer prototipo fue ensamblado a partir de algo horrible.  Raspberry Pi colgaba en una caja en un estante rid칤culo, y una c치mara estaba pegada encima de una cinta de doble cara.  Arduino cuelga de las reglas laterales.  En general, todo lo que amamos es muy DIY. <br><br>  Por supuesto, en esta forma era imposible irse, era necesario organizarlo maravillosamente.  Hablamos con varios contratistas, nos prometieron ordenar muestras en China, pero luego pasaron todos los plazos acordados y nadie nos ofreci칩 nada. <br><br>  Los productos personalizados tienen un problema: todas las soluciones son altamente especializadas, se fabricar치n espec칤ficamente para nosotros.  Primero, nos volvemos dependientes del proveedor.  En segundo lugar, resulta un dise침o de circuito 칰nico con una peque침a circulaci칩n, lo que significa que el costo de una pieza ser치 alto.  En tercer lugar, el tiempo de producci칩n es lo suficientemente largo y, si falla una copia, no podremos comprar r치pidamente un reemplazo en la tienda, tendremos que esperar a que se realice la pr칩xima impresi칩n, y si lo hacemos de inmediato, las copias restantes se desempolvar치n en el almac칠n. <br><br>  Despu칠s de que todos los socios potenciales nos decepcionaron, fui a un colega de Vision y le dije: "Volodia, d칠jame imprimir una funda en tu impresora 3D para que se vea hermosa".  Suspir칩 y dijo: "Vamos.  쯈u칠 hacer? <br><br><h1>  Camera V 1 </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br><br>  En Fusion, dibuj칠 un monstruo de Frankenstein.  En la esquina se supon칤a que era una Raspberry Pi con una entrada para un cable Ethernet.  Entrada lateral para poder.  El "segundo piso" era una c치mara.  El resultado fue una estructura grande, e incluso lo imprim칤 con una capa delgada para no gastar mucho pl치stico.  Se ve칤a terrible, y colgarlo era a칰n m치s vergonzoso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br><br>  Adem치s, un colega me envi칩 una referencia, dicen, nos gustar칤a.  Le respond칤 que no pod칤a hacer esto, pero decid칤 dise침ar otro edificio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br><br>  El nuevo estuche ten칤a 11 cm de di치metro, m치s peque침o que el CD.  La colocaci칩n del relleno tambi칠n es de dos capas.  Despu칠s de imprimir la primera versi칩n, me di cuenta de que no tiene sentido colocar la c치mara USB por completo en su estuche original.  Lo desarme con cuidado, y result칩 que tiene 4 agujeros de aterrizaje en el panel frontal.  Combin칠 este panel con una c치mara en un ensamblaje com칰n con un tweeter y un LED. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br><br>  Primero, intentamos generar un chirrido en la Raspberry Pi a trav칠s de gpio.  Result칩 extremadamente mal.  Por lo tanto, decidimos tomar esta funci칩n por separado de la Raspberry Pi conectando un peque침o arduino (en realidad Iskra mini), al que se soldaron el chirrido y el LED, a trav칠s de TTL directamente al bloque. <br><br>  As칤 es como se ve칤a en la batalla: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br>  Colgamos el dispositivo en el piso.  De esta forma, vivi칩 lo suficiente.  Chillando, brillando maravillosamente, abriendo la puerta, sin embargo, no siempre.  Los colegas, sin embargo, se quejaron de que el LED es demasiado brillante.  Tuve que debilitarlo 4 veces. <br><br><h1>  Camera V 2 </h1><br>  Luego hicieron esta opci칩n: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br><br>  Se inspir칩 en el dise침o del hub Xiaomi, con un anillo luminoso alrededor del per칤metro.  Se ve muy hermosa  El logotipo de Vision est치 hecho de partes individuales impresas en pl치sticos de diferentes colores.  Aqu칤 est치 el modelo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br><br>  Esta vez puse el chirriador en la pared posterior, mont칠 el LED en un anillo transparente alrededor del per칤metro, impreso desde un PLA transparente.  La decoraci칩n se derrumb칩 casi de inmediato, porque originalmente simplemente se insert칩 por fricci칩n, y tuve que ponerla en pegamento. <br><br><h1>  Problemas de c치mara </h1><br>  Tuvimos la idea de replicar esta decisi칩n en todo el edificio.  Pero hay un problema: casi todos los pisos tienen dos puertas, y cada una debe tener dos c치maras, solo 96 c치maras para solo una de nuestras torres, y ahora la segunda se est치 desarrollando activamente.  Es posible imprimir tantos casos, pero ya parece complicado.  Adem치s, tenemos bastantes componentes en el dispositivo, lo que significa muchos puntos de falla.  Si escalamos la soluci칩n a todo el edificio, mantendremos constantemente estas c치maras.  Una vez m치s, la complejidad del reemplazo r치pido, porque cada c치mara es un dispositivo de pieza.  Y debe imprimir muchos de ellos, con un margen, o, si sucedi칩 algo, ejecutar inmediatamente, imprimir y recoger uno nuevo.  Nos dimos cuenta de que las soluciones de bricolaje son geniales, pero necesitas algo m치s conveniente en la replicaci칩n.  Y surgi칩 la idea de transferir todo al iPad. <br><br><h3>  IPad </h3><br>  El iPad tiene varias ventajas.  El primero es la pantalla.  Los colegas se quejaron de la falta de retroalimentaci칩n, son adecuados y no entienden si el reconocimiento ha comenzado o no, esperarlos o no esperar. <br><br>  En segundo lugar, iOS tiene una funci칩n de reconocimiento facial incorporada.  La funci칩n que realiz칩 OpenCV se pas칩 al iPad.  Se muestra un marco en la pantalla, y la persona debe llegar tan lejos que la cara encaje en este marco.  Despu칠s de eso, el sistema comienza a reconocerlo autom치ticamente, no necesita presionar nada. <br><br>  En tercer lugar, el iPad es un producto masivo.  Si falla, establecemos otro.  Aunque la tableta en s칤 cuesta unos 20 mil rublos, sigue siendo m치s barata que las c치maras personalizadas que los socios nos ofrecieron.  Adem치s, m치s r치pido y m치s confiable. <br><br><h1>  Nueva arquitectura </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br><br>  iPad se hizo cargo de la mayor칤a de las funciones.  En la Raspberry Pi, que se encuentra en la sala de servidores, en realidad solo hay un host HTTP que acepta una solicitud GET con una ID de paso.  Inmediatamente representa el c칩digo en Arduino, y ella representa en ACS. <br><br>  En la primera versi칩n, Raspberry Pi estaba muy cargado, porque OpenCV estaba trabajando constantemente en 칠l.  Ya no era posible conectarle una segunda c치mara; no habr칤a suficiente potencia inform치tica.  Ya pensamos en poner una computadora honesta all칤, que analizar칤a 4 hilos de dos puertas.  Pero no lleg칩 a eso.  Ahora la b칰squeda de caras en la imagen se realiza de forma independiente en cada iPad.  En la cruz, hay dos Arduino, uno para cada puerta.  Ambas placas funcionan con pases de entrada y salida.  쯇or qu칠 es importante trabajar con pases de entrada y salida?  En primer lugar, cuando se reconoce la cara y se abre la puerta, se enciende una luz verde en el lector de tarjetas, y los colegas entienden que puede salir.  En segundo lugar, ACS registra entradas y salidas.  Emulando la entrada y la salida por separado, no rompemos el esquema de operaci칩n ACS. <br><br>  Naturalmente, los dise침adores se unieron y nos dibujaron una interfaz hermosa.  As칤 es como se ve ahora en uno de los pisos de nuestra oficina: <br><br><img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br><br><h1>  Trabajar con visi칩n </h1><br>  A pesar de que MCS es un producto comercial, los aficionados tambi칠n pueden usarlo.  El servicio ofrece a todos 5 mil transacciones gratuitas por mes, es decir 166 por d칤a.  Por lo tanto, puede solicitar sus necesidades dom칠sticas, si encaja en el l칤mite, por supuesto.  쮺칩mo se puede hacer esto? <br><br><pre><code class="python hljs">python examples/python/smarty.py \ -u <span class="hljs-string"><span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize ?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce 99c01a80a4558d8ed93b313737363830"</span></span> \ -p friends1.jpg \ --meta <span class="hljs-string"><span class="hljs-string">'{"space":"1", "create_new":true}'</span></span> \ -v</code> </pre> <br>  Tome una foto y env칤ela a Vision junto con nuestro token de acceso.  Indicamos que estamos trabajando con el primer espacio y establecemos <code>create_new</code> , luego el sistema crear치 un nuevo identificador para cada persona desconocida.  Esto es lo que obtenemos en respuesta: <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"objects"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"file_0"</span></span>, <span class="hljs-string"><span class="hljs-string">"persons"</span></span>:[ {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person1"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">102</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>,<span class="hljs-number"><span class="hljs-number">134</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99999</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5025</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person2"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">393</span></span>,<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">461</span></span>,<span class="hljs-number"><span class="hljs-number">166</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99987</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.548</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person3"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">458</span></span>,<span class="hljs-number"><span class="hljs-number">48</span></span>,<span class="hljs-number"><span class="hljs-number">535</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99976</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4766</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person4"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">273</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span>,<span class="hljs-number"><span class="hljs-number">352</span></span>,<span class="hljs-number"><span class="hljs-number">147</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99963</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.504</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person5"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">525</span></span>,<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99954</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4849</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person6"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">194</span></span>,<span class="hljs-number"><span class="hljs-number">76</span></span>,<span class="hljs-number"><span class="hljs-number">258</span></span>,<span class="hljs-number"><span class="hljs-number">167</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.9984</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5725</span></span>} ] } ], <span class="hljs-string"><span class="hljs-string">"aliases_changed"</span></span>:false }, <span class="hljs-string"><span class="hljs-string">"htmlencoded"</span></span>:false, <span class="hljs-string"><span class="hljs-string">"last_modified"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Formate칠 un poco a JSON.  La respuesta contiene el identificador de la persona, las coordenadas de la cara en la foto y dos par치metros: qu칠 tan bien se reconoce la cara y cu치nto coincide esta persona con el est치ndar.  Puede enviar una solicitud POST con una imagen en su lenguaje de programaci칩n, obtener JSON y analizar la respuesta. <br><br>  Si tiene una cruz grande y necesita determinar solo una docena de personas, puede configurarlas manualmente.  Luego, el sistema proporcionar치 identificadores para personas conocidas e indefinidas para personas desconocidas.  Las personas tambi칠n se pueden eliminar selectivamente, por ejemplo, si un empleado renuncia. <br><br><h1>  Ideas </h1><br>  쮼n qu칠 proyectos puedes usar el reconocimiento facial?  Si desea implementar un sistema de ancho de banda, debe preocuparse por la suplantaci칩n de identidad.  Por ejemplo, agregar una c치mara infrarroja para determinar si es una fotograf칤a o una persona viva.  O poniendo dos c치maras para determinar la profundidad del objeto, esto se puede hacer usando OpenCV. <br><br>  Puede organizar el reconocimiento de personas en la entrada.  Si estos son sus vecinos, entonces todo est치 en orden, y si alguien es un extra침o, puede enviarse una alerta.  Tenemos tal problema en nuestra casa, los extra침os vienen peri칩dicamente y dejan mucha basura despu칠s de ellos en el rellano. <br><br>  Si crea un "espejo inteligente", puede equiparlo con el reconocimiento de los miembros de la familia, para que todos puedan mostrar lo que es interesante para 칠l.  Digamos, el espejo me mostrar치 el horario de las reuniones de hoy, y con mi hija me saludar치 alegremente y se ofrecer치 a lavarme los dientes, y no r치pidamente, como siempre, sino dos minutos. <br><br>  Otra idea es el reconocimiento de una placa por una puerta autom치tica en el pa칤s.  Para no salir ni presionar el llavero, puede colocar una c치mara que eliminar치 su n칰mero y la puerta se abrir치 autom치ticamente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473828/">https://habr.com/ru/post/473828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473816/index.html">Caracter칤sticas de JavaScript moderno que quiz치s no conozcas</a></li>
<li><a href="../473818/index.html">Aplicaci칩n en TSD y comunicaci칩n con 1C: Enterprise 8.3 a trav칠s del servicio HTTP. Parte 4 (OnKeyUp. Esc치ner SC con emulaci칩n de teclado)</a></li>
<li><a href="../473822/index.html">Oferta de trabajo en 1 d칤a: c칩mo entrevistamos y retroalimentamos el mismo d칤a</a></li>
<li><a href="../473824/index.html">C칩mo construir una tecnolog칤a comercial para la planificaci칩n de ventas en un solo sistema</a></li>
<li><a href="../473826/index.html">Autenticaci칩n OTP en el servidor web Apache</a></li>
<li><a href="../473832/index.html">ShIoTiny: actualizaciones y notificaciones</a></li>
<li><a href="../473834/index.html">Monitoreo de Blackbox en redes Clos. Informe Yandex</a></li>
<li><a href="../473838/index.html">DJI Mavic Mini: el quadrocopter plegable m치s ligero</a></li>
<li><a href="../473840/index.html">Transmita video desde un dispositivo Android a trav칠s de UDP a la aplicaci칩n JAVA</a></li>
<li><a href="../473842/index.html">Resumen de noticias de octubre sobre aprendizaje autom치tico e inteligencia artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>