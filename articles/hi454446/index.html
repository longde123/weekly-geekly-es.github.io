<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>уА░я╕П ЁЯдШЁЯП╜ ЁЯеб C # 8 рдореЗрдВ рдирдпрд╛ рдХреНрдпрд╛ рд╣реИ? ЁЯел ЁЯеР ЁЯзСЁЯП┐тАНЁЯдЭтАНЁЯзСЁЯП╛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="G8 рдиреЗ рдЕрднреА рддрдХ RTM рдЬрд╛рд░реА рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рдореИрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдкреЛрд╕реНрдЯ рд▓рд┐рдЦ рд░рд╣рд╛ рд╣реВрдВред рдХреНрдпреЛрдВ? рдЦреИрд░, рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдЬрд┐рд╕реЗ рдЪреЗрддрд╛рд╡рдиреА рджреА рдЧрдИ рд╣реИ рд╡рд╣ рд╕рд╢...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C # 8 рдореЗрдВ рдирдпрд╛ рдХреНрдпрд╛ рд╣реИ?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454446/"><p>  G8 рдиреЗ рдЕрднреА рддрдХ RTM рдЬрд╛рд░реА рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рдореИрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдкреЛрд╕реНрдЯ рд▓рд┐рдЦ рд░рд╣рд╛ рд╣реВрдВред  рдХреНрдпреЛрдВ?  рдЦреИрд░, рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдЬрд┐рд╕реЗ рдЪреЗрддрд╛рд╡рдиреА рджреА рдЧрдИ рд╣реИ рд╡рд╣ рд╕рд╢рд╕реНрддреНрд░ рд╣реИред  рддреЛ рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рдпрд╣ рдЙрд╕ рд╕рдордп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реЛрдЧрд╛ рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ рд╕рднреА рд╕реЗрдЯрдЕрдк рд╣реИ, рддреЛ рдареАрдХ рд╣реИ, рдареАрдХ рд╣реИред </p><br><a name="habracut"></a><br><h3>  рдЕрд╢рдХреНрдд рд╕рдВрджрд░реНрдн рдкреНрд░рдХрд╛рд░ </h3><br><p>  ,     ,      ┬л┬╗     .     тАФ   ,      <nobr><code>NULL</code></nobr>    <nobr><code>nullptr</code></nobr>   ++.   тАФ  zero-terminated strings,      (n).      <nobr><code>null</code></nobr>.</p><br>
<p>C#       ,  :</p><br>
<pre><code class="cs">public class Person
{
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public string MiddleName { get; set; }
  public Person(string first, string last, string middle) =&gt;
    (FirstName, LastName, MiddleName) = (first, last, middle);
  public string FullName =&gt;
    $"{FirstName} {MiddleName[0]} {LastName}";
}
</code></pre><br>
<p>     .        , ,            .     C#  <nobr><code>null</code></nobr>.        (<nobr><code>$</code></nobr>    <nobr><code>string.Format()</code></nobr>),    .        <nobr><code>null</code></nobr>-,    NRE (NullReferenceException).</p><br>
<p>    , ..    <nobr><code>null</code></nobr>,   100500          .     <nobr><code>Optional</code></nobr>  , ,     .</p><br>
<p>        -   ,    .      (NuGet  <nobr><code>JetBrains.Annotations</code></nobr>)         :</p><br>
<pre><code class="cs">public class Person
{
  public string FirstName { get; set; }
  public string LastName { get; set; }
  [CanBeNull] public string MiddleName { get; set; }
  public Person(string first, string last, [CanBeNull] string middle) =&gt;
    (FirstName, LastName, MiddleName) = (first, last, middle);
  public string FullName =&gt;
    $"{FirstName} {MiddleName[0]} {LastName}";
}
</code></pre><br>
<p>         NRE   <nobr><code>MiddleName[0]</code></nobr>.</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c0/fdb/077/8c0fdb077c01c3d76e3837e101530a61.png"></div><br>
<br>
<p> MicrosoftтАж    ,      .   ,     VS     .    .     .</p><br>
<p>,      .    ,    .   ,  C#8    :</p><br>
<pre><code class="cs">#nullable enable
</code></pre><br>
<p>          . ,   - <br>
</p><br>
<pre><code class="cs">var p = new Person("Dmitri", "Nesteruk", null);
</code></pre><br>
   warning:<br>
<br>
<pre><code class="cs">1&gt;NullableReferenceTypes.cs(26,48,26,52): warning CS8625: Cannot convert null literal to non-nullable reference or unconstrained type parameter.
</code></pre><br>
<p>-,  ,    ( treat warnings as errors   ).</p><br>
<p>  ,   ?     - -  C#,   <nobr><code>MiddleName</code></nobr>    <nobr><code>null</code></nobr>     <nobr><code>[0]</code></nobr>   .</p><br>
<p>       :</p><br>
<pre><code class="cs">public string? MiddleName;
</code></pre><br>
<p>,  ? -    <nobr><code>string?</code></nobr>  <nobr><code>Nullable&lt;T&gt;</code></nobr>,      , <nobr><code>T : struct</code></nobr>,     - .   тАФ     , ..        <nobr><code>string</code></nobr>.</p><br>
<p>           .       - ,  :</p><br>
<pre><code class="cs">public string FullName =&gt;  $"{FirstName} {MiddleName?[0]} {LastName}";
</code></pre><br>
<p>   :     IL?      тАФ !       :      nullable      nullable   <nobr><code>[Nullable]</code></nobr>.     :        .</p><br>
<h4>  </h4><br>
<p>  C#8   -    -.  ,        nullable-</p><br>
<pre><code class="cs">string? s = GetString();
</code></pre><br>
<p>          warning.     :</p><br>
<pre><code class="cs">if (s != null){  char c = s[0];}
</code></pre><br>
<p>   !  ,            .         .</p><br>
<h4>  </h4><br>
<p>      null.  тАФ      ┬л┬╗,         ,          null-   .</p><br>
<p>  тАФ           .   :</p><br>
<ul>
<li><p><nobr><code>(null as Person).FullName</code></nobr>    warning</p></li>
<li><p><nobr><code>(null as Person)!.FullName</code></nobr> warning   , ..      </p></li>
<li><p><nobr><code>(null as Person)!!!!!!!!!!!!!.FullName</code></nobr>        </p></li>
<li><p><nobr><code>(null as Person)!?.FullName</code></nobr>            <nobr><code>null</code></nobr>;    , <nobr><code>?!</code></nobr>,  </p></li>
</ul><br>
<h4>  </h4><br>
<p>,       -      BCL       .     </p><br>
<pre><code class="cs">Type t = Type.GetType("abracadabra");Console.WriteLine(t.Name);
</code></pre><br>
<p>    . -   <nobr><code>Type.GetType()</code></nobr>  <nobr><code>null</code></nobr>     ,   BCL     <nobr><code>nullable</code></nobr> ,   .</p><br>
<p> ,    ┬л┬╗    </p><br>
<pre><code class="cs">Type t = Type.GetType("abracadabra");
Type? u = t;
Console.WriteLine(u.Name);
</code></pre><br>
<p>      . ,    <nobr><code>t != null</code></nobr>,  <nobr><code>u</code></nobr>      <nobr><code>null</code></nobr>,    .</p><br>
<h4></h4><br>
<p>Nullable reference types тАФ   ,    .    .    , ,    -    nullability    ,   ,  .</p><br>
<h3>  </h3><br>
<p>     :   ,     ,  ,      . ,  X~N(0,1),   E[X┬▓]  V[X┬▓]?</p><br>
<p>   ,          ,       ┬л ┬╗.</p><br>
<p>,        : <nobr><code>Index</code></nobr>  <nobr><code>Range</code></nobr>.</p><br>
<h4>Index</h4><br>
<p>   ,       <nobr><code>int</code></nobr>   <nobr><code>uint</code></nobr>?  :             ( ).      ,    C#  <nobr><code>x[-1]</code></nobr>   .</p><br>
<p>           .     ..     -1    ,         ,  .</p><br>
<p> C#       . ,   .  ,      <nobr><code>Index</code></nobr>      ,     :</p><br>
<pre><code class="cs">Index i0 = 2; // implicit conversion
</code></pre><br>
<p> ,   ,           .</p><br>
<p>   <nobr><code>Index</code></nobr>    (      тАФ   ):</p><br>
<ul>
<li><p><nobr><code>Value</code></nobr>,      </p></li>
<li><p><nobr><code>IsFromEnd</code></nobr> тАФ  , ,     <em></em>     </p></li>
</ul><br>
<p>     :</p><br>
<pre><code class="cs">Index i1 = new Index(0, false);
</code></pre><br>
<p> ,   ,     .     (  ,   )    :</p><br>
<pre><code class="cs">var i2 = ^0; // Index(0, true)
</code></pre><br>
<p>!     ,   <nobr><code>^</code></nobr>     (     , LaTeX,  ),           ┬л ┬╗.</p><br>
<p> ,     ,     (<nobr><code>operator this[]</code></nobr>)   <nobr><code>Index</code></nobr>,     </p><br>
<pre><code class="cs">var items = new[] { 1, 2, 3, 4, 5 };
items[^2] = 33; // 1, 2, 33, 4, 5
</code></pre><br>
<h4>Range</h4><br>
<p>    тАФ   <nobr><code>Range</code></nobr>,     ,      ,    1.      :</p><br>
<pre><code class="cs">X..Y
</code></pre><br>
<p>  ┬л   X   Y┬╗.  ,       <nobr><code>Y</code></nobr>   тАФ <em> </em>    <nobr><code>Y</code></nobr>.    .</p><br>
<p>,   :</p><br>
<ul>
<li><p><nobr><code>var a = i1..i2; // Range(i1, i2)</code></nobr> тАФ       </p></li>
<li><p><nobr><code>var b = i1..; // Range(i1, new Index(0, true));</code></nobr> тАФ   <nobr><code>i1</code></nobr>    </p></li>
<li><p><nobr><code>var c = ..i2; // Range(new Index(0, false), i2)</code></nobr> тАФ         <nobr><code>i2</code></nobr></p></li>
<li><p><nobr><code>var e = ..;</code></nobr> тАФ   ,        </p></li>
<li><p><nobr><code>Range.ToEnd(2);</code></nobr> тАФ      тАФ   ,     ;    ,     dotPeek, ilSpy   </p></li>
</ul><br>
<h4>   ?</h4><br>
<p>,    ++      (undefined behavior?).   ,   <nobr><code>Range</code></nobr>  C#   .    : <strong>       ┬л ┬╗</strong>.</p><br>
<p>  <nobr><code>x = {1, 2, 3}</code></nobr>.   <nobr><code>x[0..2]</code></nobr>   <nobr><code>{1, 2}</code></nobr>,     <nobr><code>x[..2]</code></nobr>   <nobr><code>x[..]</code></nobr>,   <nobr><code>{1, 2, 3}</code></nobr>.</p><br>
<p>    ..  <nobr><code>x[2]</code></nobr>  <nobr><code>x[^1]</code></nobr> тАФ   ,       <nobr><code>Range</code></nobr>- !</p><br>
<h4>  </h4><br>
<p>-,  <nobr><code>X..Y</code></nobr>     <nobr><code>X &lt;= Y</code></nobr> (   ?).        ( 7..3),     <nobr><code>ArgumentOutOfRangeException</code></nobr>.  <em></em>  ..           ,         .</p><br>
<p>-, ┬л┬╗    ,     <nobr><code>1..2..100</code></nobr>     .    .       MATLAB.</p><br>
<p><nobr><code>Range</code></nobr>       :</p><br>
<ul>
<li><p> ,    ,    </p></li>
<li><p>    <nobr><code>Substring()</code></nobr>.   C#      .</p></li>
<li><p>    <nobr><code>AsSpan()</code></nobr>   <nobr><code>Range</code></nobr>.</p></li>
<li><p> <nobr><code>Span</code></nobr>    <nobr><code>Range</code></nobr> тАФ <nobr><code>Span.Slice()</code></nobr>,  -.</p></li>
</ul><br>
<p>,      <nobr><code>Index/Range</code></nobr>        <nobr><code>operator this[]</code></nobr>.    ,       ┬л ┬╗  . ,      (singly linked list),   - ┬л ┬╗ тАФ  .</p><br>
<h4></h4><br>
<p>   ,             <nobr><code>struct</code></nobr>-. -     , ┬л┬╗      ,       .</p><br>
<p> ,      :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/283/851/1e5/2838511e5010e3966e830e753d0696be.png"></div><br>
<br>
<h3>Default Interface Members</h3><br>
<p>          ,        .   ,     тАФ ?</p><br>
<p>   .      <nobr><code>Enumerable.Count()</code></nobr> тАФ      <nobr><code>while (x.MoveNext())</code></nobr>      ,    .     <nobr><code>Count()</code></nobr>  :</p><br>
<pre><code class="cs">if (x is IList&lt;T&gt; list)
  return list.Count;
</code></pre><br>
<p>?    <nobr><code>IReadOnlyList&lt;T&gt;</code></nobr>,     ?   ┬л ┬╗?!?</p><br>
<p>,      ,    open-closed principle     SOLID, ..         тАФ   .</p><br>
<p>   ? ,   ,  , -     <nobr><code>Count()</code></nobr>,   <nobr><code>IReadOnlyList&lt;T&gt;</code></nobr>,   ,    .     !     - <nobr><code>IReadOnlyList&lt;T&gt;.Count()</code></nobr>    <nobr><code>IEnumerable&lt;T&gt;.Count()</code></nobr>? ,  !   .</p><br>
<p>       .    , - -,        .</p><br>
<h4> </h4><br>
<p>        :</p><br>
<pre><code class="cs">public interface IHuman
{
  string Name { get; set; }
    
  public void SayHello() 
  {
    Console.WriteLine($"Hello, I am {Name}");
  }
}

public class Human : IHuman
{
  public string Name { get;set; }
}
</code></pre><br>
<p>  ,     ,     :</p><br>
<pre><code class="cs">Human human = new Human() { Name = "John" };
human.SayHello(); // will not compile
</code></pre><br>
<p> ?  ,  .     тАФ   ,   ,        ,        .</p><br>
<p>,  ? ,       ,    <strong> </strong>,     .        <nobr><code>Human</code></nobr>  <em></em> <nobr><code>SayHello()</code></nobr>? ,  .</p><br>
<p>    :       ,          :</p><br>
<pre><code class="cs">IHuman human = new Human() { Name = "John" };
human.SayHello();
((IHuman)new Human { тАж }).SayHello();
</code></pre><br>
<h4> </h4><br>
<p>,    ,     :       <nobr><code>Foo()</code></nobr> (  ),            <nobr><code>Foo()</code></nobr>,     :</p><br>
<pre><code class="cs">public interface IHuman
{
  string Name { get; set; }
  
  void SayHello() 
  {
    Console.WriteLine($"Hello, I am {Name}");
  }
}
public interface IFriendlyHuman : IHuman
{
  void SayHello()
  {
    Console.WriteLine(      $"Greeting, my name is {Name}");
  }
}
((IHuman)new Human()).SayHello();
// Hello, I am John
((IFriendlyHuman)new Human()).SayHello();
// Greeting, my name is John
</code></pre><br>
<p>,     <nobr><code>IFriendlyHuman.SayHello()</code></nobr>    override- <nobr><code>IHuman.SayHello()</code></nobr>,    !       <nobr><code>SayHello()</code></nobr>   ?     :</p><br>
<pre><code class="cs">public interface IFriendlyHuman : IHuman
{
  void IHuman.SayHello()
  //   тЖСтЖСтЖСтЖСтЖСтЖС
  {
    Console.WriteLine(      $"Greeting, my name is {Name}");
  }
}
</code></pre><br>
<p>     <nobr><code>SayHello()</code></nobr>   ,   <nobr><code>IHuman</code></nobr>  <nobr><code>IFriendlyHuman</code></nobr>      ,      :</p><br>
<pre><code class="cs">((IHuman)new Human()).SayHello();
Greeting, my name is John
((IFriendlyHuman)new Human()).SayHello();
Greeting, my name is John
</code></pre><br>
<h4>Diamond Inheritance</h4><br>
<p>,        ┬л override-┬╗   -    ,      :</p><br>
<pre><code class="cs">interface ITalk { void Greet(); }
interface IAmBritish : ITalk
{
  void ITalk.Greet() =&gt; WriteLine("Good day!");
}
interface IAmAmerican : ITalk
{
  void ITalk.Greet() =&gt; WriteLine("Howdy!");
}
class DualNational : IAmBritish, IAmAmerican {}
// Error CS8705 Interface member 'ITalk.Greet()' does not have a most specific implementation. Neither 'IAmBritish.ITalk.Greet()', nor 'IAmAmerican.ITalk.Greet()' are most specific.
</code></pre><br>
<p>   ,      ┬л ┬╗ ( ,    )    ,   ,       -  - <nobr><code>IAmAmerican.Greet()</code></nobr> тАФ        ,   -,   ?</p><br>
<h4></h4><br>
<p>   .       ,   ,  ,              API.    тАФ       -.     -?</p><br>
<h3>Pattern Matching</h3><br>
<p>     F#      .  тАФ  F#     ,         ,   # ,       .</p><br>
<p>   ,  F# <nobr><code>match</code></nobr>  # <nobr><code>switch</code></nobr>.  C#8     .</p><br>
<h4>Property Matching</h4><br>
<p>      ,    :</p><br>
<pre><code class="cs">struct PhoneNumber{
  public int Code, Number;
}
var phoneNumber = new PhoneNumber();
var origin = phoneNumber switch {
  { Number: 112 } =&gt; "Emergency",
  { Code: 44 } =&gt; "UK"
};
</code></pre><br>
<p>     <nobr><code>phoneNumber</code></nobr>,      .      switch statement  switch <em>expression</em>,       - .</p><br>
<p>   ,   тАФ ,      .     :       default-init ( ,  <nobr><code>default(T)</code></nobr>         )    .   ,      ,   :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9d/506/4c1/d9d5064c140536ff7f868a453ac27237.png"></div><br>
<br>
<p>          :</p><br>
<p> </p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/d2f/273/21ad2f273af8e46689b97b998cbdf616.png"></div><br>
<br>
<h4></h4><br>
<p>         ,     ,    :</p><br>
<pre><code class="cs">var origin = phoneNumber switch {
  { Number: 112 } =&gt; "Emergency",
  { Code: 44 } =&gt; "UK",
  { } =&gt; "Indeterminate",
  _ =&gt; "Missing"
};
</code></pre><br>
<p>  ?  ,    2 : <nobr><code>_</code></nobr> (),     ,  <nobr><code>{}</code></nobr>       <nobr><code>null</code></nobr>.</p><br>
<p>     ,        .     ?</p><br>
<pre><code class="cs">var origin = phoneNumber switch {
  { Number: 112 } =&gt; "Emergency",
  { Code: 44 } =&gt; "UK",
  { } =&gt; "Unknown"
};
</code></pre><br>
<p>     ?  <nobr><code>phoneNumber</code></nobr>  <nobr><code>struct</code></nobr> тАФ   ,     <nobr><code>class</code></nobr>.    -    ,     <nobr><code>null</code></nobr>, тАж   nullable reference types!</p><br>
<p>  ,                .</p><br>
<h4> </h4><br>
<p>-       ,   .  nullable reference types тАФ  ,     nullable <em> </em>,   recursive patterns тАФ     .</p><br>
<p> F#,     ,        .  C# ,     ,     ,     C# тАФ  .</p><br>
<p> , ┬л ┬╗  C#              -,    :</p><br>
<pre><code class="cs">var personsOrigin = person switch {
  { Name: "Dmitri" } =&gt; "Russia",
  { PhoneNumber: { Code: 46 } } =&gt; "Sweden",
  { Name: var name } =&gt; $"No idea where {name} lives"
};
</code></pre><br>
<p>      .  тАФ  ,      <nobr><code>person.PhoneNumber</code></nobr>     <nobr><code>Code</code></nobr>   <nobr><code>46</code></nobr>.  тАФ                   .     ,         ┬л┬╗.</p><br>
<h4></h4><br>
<p>    :          <nobr><code>switch</code></nobr>-.  :</p><br>
<pre><code class="cs">var error = person switch {
  null =&gt; "Object missing",
  { PhoneNumber: null } =&gt; "Phone number missing entirely",
  { PhoneNumber: { Number: 0 } } =&gt; "Actual number missing",
  { PhoneNumber: { Code: var code } } when code &lt; 0 =&gt; "WTF?",
  { } =&gt; null // no error
};
if (error != null)
  throw new ArgumentException(error);
</code></pre><br>
<p> ,      :    ,    <nobr><code>when</code></nobr>          ,    .</p><br>
<h4>    </h4><br>
<p>-  ┬л┬╗         .     ,      :</p><br>
<pre><code class="cs">IEnumerable&lt;int&gt; GetMainOfficeNumbers()
{
  foreach (var pn in numbers)
  {
    if (pn is ExtendedPhoneNumber { Office: "main" })
      yield return pn.Number;
  }
}
</code></pre><br>
<p>         ,   ,           .  .</p><br>
<h4></h4><br>
<p>      тАФ    ,  ,    .       <nobr><code>Deconstruct()</code></nobr>       <nobr><code>out</code></nobr>-.</p><br>
<p> ,       -   :</p><br>
<pre><code class="cs">var type = shape switch
{
  Rectangle((0, 0), 0, 0) =&gt; "Point at origin",
  Circle((0, 0), _) =&gt; "Circle at origin",
  Rectangle(_, var w, var h) when w == h =&gt; "Square",
  Rectangle((var x, var y), var w, var h) =&gt;
    $"A {w}├Ч{h} rectangle at ({x},{y})",
  _ =&gt; "something else"
};
</code></pre><br>
<p>         ,    :   -,      ,     .       ┬л┬╗ тАФ     ,     .  (<nobr><code>_</code></nobr>)     ,    .</p><br>
<h4></h4><br>
<p>   ,    .        .</p><br>
<h3></h3><br>
<p>,     ? ,    , -.   .         .      ,   VS 2019 <strong>Preview</strong> (-, preview    RTM), .NET Core 3 (        .NET Framework),   dotPeek     ,     .</p><br>
<p>   .  () .&nbsp;тЦа</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi454446/">https://habr.com/ru/post/hi454446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi454434/index.html">рдкреАрдбреАрдП (рдкреЙрдХреЗрдЯ рдЯреНрд░реИрд╡рд▓ рдХрдВрдкреНрдпреВрдЯрд░): рд╕рд░реНрдХрд┐рдЯрд░реА рдЬреАрдкреАрдПрд╕ рд▓реЙрдЧрд░</a></li>
<li><a href="../hi454436/index.html">рдкреЗрдЯреАрдПрдо рдкреЗрдЯреА рдЬреЙрдп # 1: loguru</a></li>
<li><a href="../hi454440/index.html">рдкреЗрдЯреАрдПрдо рд▓рд┐рдЯрд┐рд▓ рдлрди # 2: рд╕реНрдЯрд╛рд░рд▓реЗрдЯ</a></li>
<li><a href="../hi454442/index.html">рдЕрдкрдиреЗ рд╡реНрдпрд╡рд╕рд╛рдп рдХреЗ рд▓рд┐рдП рдкреНрд░реЙрдХреНрд╕реА рдиреЗрдЯрд╡рд░реНрдХ рдХреИрд╕реЗ рдЪреБрдиреЗрдВ: 3 рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╕реБрдЭрд╛рд╡</a></li>
<li><a href="../hi454444/index.html">рд╣рдо Habr рдХреА рд▓реЛрдбрд┐рдВрдЧ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдХрд░рддреЗ рд╣реИрдВ рдпрд╛ рдкреЗрдЬ рдкрд░ 189 рдЕрдиреБрд░реЛрдз рдХреИрд╕реЗ рдкреНрд░рднрд╛рд╡ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi454450/index.html">рдХреИрд╕реЗ рдПрдбреАрд╕рди рдиреЗ рд╡рд╛рдпрд░рд▓реЗрд╕ рдХрд╛ рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдХрд┐рдпрд╛ рдФрд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╕рдордЭрд╛</a></li>
<li><a href="../hi454452/index.html">рд╣рдо рдХреБрдЫ рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдЫрд╡рд┐ рдкрд░ рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi454458/index.html">рдореЗрдЯрд╛рдореЙрд░реНрдлрд┐рдХ рдкрд░реАрдХреНрд╖рдг: рдХреНрдпреЛрдВ рд▓рдЧрднрдЧ рдХреЛрдИ рднреА рдЗрд╕ рд╣реЛрдирд╣рд╛рд░ рддрдХрдиреАрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ</a></li>
<li><a href="../hi454460/index.html">рдореЛрдмрд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХрд╛ рдкрд╛рдЪрди # 300 рдбреЗрд╡рд▓рдкрд░ (27 рдордИ - 2 рдЬреВрди)</a></li>
<li><a href="../hi454462/index.html">рдлреЛрдЯреЛ рдкреЗрдкрд░ рдХреЗ рдмрд┐рдирд╛ рдлреЛрдЯреЛрдЧреНрд░рд╛рдо</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>