<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😧 🤾🏼 👩🏻‍⚕️ ShIoTiny: node, tautan, dan acara atau fitur program menggambar 👨🏽‍⚕️ 🎺 👨🏾‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Poin-poin penting atau tentang artikel ini 
 Topik artikel ini adalah pemrograman visual ShIoTiny PLC untuk rumah pintar yang dijelaskan di sini: ShIo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: node, tautan, dan acara atau fitur program menggambar</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463285/"><img src="https://habrastorage.org/webt/s3/ym/wy/s3ymwykg-no-z12-gk5znf02hrs.jpeg"><br><br><h4>  Poin-poin penting atau tentang artikel ini </h4><br>  Topik artikel ini adalah pemrograman visual <b>ShIoTiny</b> PLC untuk rumah pintar yang dijelaskan di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ShIoTiny: otomatisasi kecil, internet, atau "enam bulan sebelum liburan"</a> . <br><br>  Konsep-konsep seperti <b>node</b> , <b>komunikasi</b> , <b>acara</b> , serta fitur pemuatan dan pelaksanaan program visual pada <b>ESP8266</b> , yang merupakan dasar <b>ShIoTiny</b> PLC, <b>ditinjau secara singkat</b> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Situs</b> Proyek <b>ShIoTiny</b></a> <br><br><a name="habracut"></a><br><h4>  Pendahuluan atau beberapa pertanyaan organisasi </h4><br>  Dalam artikel sebelumnya tentang perkembangan saya, saya memberikan tinjauan singkat tentang kemampuan pengontrol <b>ShIoTiny</b> . <br><br>  Anehnya, publik menunjukkan minat yang cukup kuat dan mengajukan banyak pertanyaan kepada saya.  Beberapa kawan bahkan segera menawari saya untuk membeli controller.  Tidak, saya tidak menentang menghasilkan sedikit uang, tetapi hati nurani saya tidak mengizinkan saya untuk menjual sesuatu yang masih sangat kasar dalam hal perangkat lunak. <br><br>  Oleh karena itu, saya diposting di binari firmware GitHub dan diagram perangkat: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">firmware + instruksi terpendek + sirkuit + contoh</a> . <br><br>  Sekarang semua orang bisa mem-flash ESP-07 dan bermain dengan firmware sendiri.  Jika ada yang benar-benar menginginkan papan seperti di foto, maka saya memiliki beberapa dari mereka.  Menulis ke <b>shiotiny@yandex.ru</b> .  Tapi, seperti kata Ketimun yang tak terlupakan, "Aku tidak bertanggung jawab atas apa pun!" <br><br>  Jadi, mari kita langsung ke titik: apa itu " <b>simpul</b> " (simpul) dan " <b>peristiwa</b> "?  Bagaimana program dijalankan? <br><br>  Seperti biasa - mari mulai dengan urutan: dengan mengunduh program. <br><br><h4>  Bagaimana cara memuat program </h4><br>  Untuk mulai dengan, apa yang terjadi ketika kita mengklik tombol <b>Unggah</b> di editor <b>ElDraw</b> dan skema program kami, yang terdiri dari kotak yang indah, terbang ke perangkat. <br><br>  Pertama, berdasarkan diagram yang dibuat oleh kami, uraiannya dalam bentuk teks dibuat. <br>  Kedua, diperiksa apakah semua input node terhubung ke output.  Seharusnya tidak ada input "menggantung".  Jika input semacam itu terdeteksi, sirkuit di ShIoTiny tidak akan dimuat, dan editor akan menampilkan peringatan. <br><br>  Jika semuanya berjalan dengan baik, editor mengirimkan deskripsi teks dari rangkaian ke satu simpul di ShIoTiny.  Tentu saja, skema yang ada dari ShIoTiny sebelumnya dihapus.  Deskripsi teks yang dihasilkan disimpan dalam memori FLASH. <br><br>  By the way, jika Anda ingin menghapus rangkaian dari perangkat, maka cukup memuat sirkuit kosong (yang tidak mengandung elemen simpul) ke dalamnya. <br><br>  Segera setelah seluruh rangkaian program dimuat ke ShIoTiny PLC, ia mulai "berjalan".  Apa artinya ini? <br><br>  Perhatikan bahwa proses memuat sirkuit dari memori FLASH saat daya dihidupkan dan ketika sirkuit diterima dari editor identik. <br><br>  Pertama adalah penciptaan objek simpul berdasarkan deskripsi mereka. <br>  Kemudian susunan koneksi antar node dibuat.  Yaitu, tautan output ke input dan input ke output dihasilkan. <br><br>  Dan hanya setelah semua ini, siklus pelaksanaan program utama diluncurkan. <br><br>  Saya menulis untuk waktu yang lama, tetapi seluruh proses - dari "memuat" sirkuit dari memori FLASH ke awal loop utama - membutuhkan waktu sepersekian detik untuk rangkaian 60-80 node. <br><br>  Bagaimana cara kerja loop utama?  Sangat sederhana.  Pertama, dia menunggu <b>peristiwa terjadi</b> di simpul mana pun, lalu dia memproses kejadian ini.  Dan tanpa akhir.  Ya, atau sampai mereka mengunggah skema baru ke ShIoTiny. <br><br>  Sudah beberapa kali saya menyebutkan hal-hal seperti <b>acara</b> , <b>node</b> dan <b>koneksi</b> .  Tapi apa itu dari sudut pandang perangkat lunak?  Kami akan membicarakan ini hari ini. <br><br><h4>  Node, Koneksi, dan Acara </h4><br>  Lihat saja contoh program rangkaian untuk <b>ShIoTiny</b> untuk memahami bahwa rangkaian hanya terdiri dari dua entitas - simpul (atau elemen) dan hubungan di antara mereka. <br><br>  <b>Node</b> , <b>node,</b> atau <b>elemen rangkaian</b> adalah representasi virtual dari beberapa <b>tindakan</b> pada data.  Ini mungkin operasi aritmatika, operasi logis, atau operasi apa pun yang terjadi pada kita.  Yang utama adalah bahwa node memiliki input dan output. <br><br>  <b>Input</b> adalah tempat simpul menerima data.  Gambar input adalah titik yang selalu berada di sisi kiri node. <br><br>  <b>Output</b> adalah tempat di mana hasil dari operasi node diekstraksi.  Gambar output adalah titik yang selalu berada di sisi kanan node. <br><br>  Beberapa node tidak memiliki input.  Node tersebut menghasilkan hasil dalam diri mereka sendiri.  Misalnya, node konstan atau node sensor: mereka tidak memerlukan data dari node lain untuk melaporkan hasilnya. <br><br>  Sebaliknya, node lain tidak memiliki jalan keluar.  Ini adalah node yang menampilkan, misalnya, aktuator (relay atau beberapa perangkat serupa lainnya).  Mereka menerima data, tetapi tidak menghasilkan hasil perhitungan yang tersedia untuk node lain. <br><br>  Selain itu, ada juga simpul komentar yang unik.  Dia tidak melakukan apa-apa, tidak memiliki input maupun output.  Tujuannya adalah untuk menjadi penjelasan dalam diagram. <br><br>  Apa itu " <b>acara</b> "?  <b>Suatu kejadian</b> adalah terjadinya data baru dalam suatu node.  Misalnya, acara meliputi: mengubah status input (simpul <b>Input</b> ), menerima data dari perangkat lain (node <b>MQTT</b> dan <b>UDP</b> ), berakhirnya jangka waktu tertentu (node <b>Timer</b> dan <b>Delay</b> ), dan sebagainya. <br><br>  Untuk apa acara?  Ya, untuk menentukan di simpul mana data baru muncul dan status simpul mana yang perlu diubah sehubungan dengan penerimaan data baru.  Acara, seolah-olah, "melewati" sepanjang rantai node sampai telah melewati semua node yang keadaannya harus diperiksa dan diubah. <br><br>  Semua node dapat dibagi menjadi dua kategori. <br>  Node yang dapat menghasilkan peristiwa disebut " <b>node aktif</b> ". <br>  Node yang tidak dapat menghasilkan peristiwa disebut " <b>node pasif</b> ". <br><br>  Ketika sebuah node menghasilkan suatu peristiwa (yaitu, data baru muncul pada outputnya), keadaan seluruh rantai node yang terhubung ke output dari node generator peristiwa berubah dalam kasus umum. <br><br>  Untuk memperjelasnya, perhatikan contoh pada gambar. <br><br><img src="https://habrastorage.org/webt/mi/vd/kz/mivdkz3cx_wvzdhnd4fflb9t1xu.png"><br><br>  Node aktif di sini adalah Input1, Input2 dan Input3.  Node yang tersisa bersifat pasif.  Pertimbangkan apa yang terjadi ketika input ini atau itu ditutup.  Untuk kenyamanan, hasilnya ditabulasi. <br><br><img src="https://habrastorage.org/webt/er/eh/wn/erehwn5_nqschmn03cnblvlbdbk.jpeg"><br><br>  Seperti yang Anda lihat, ketika suatu peristiwa terjadi, rantai dibangun dari simpul sumber acara ke simpul akhir.  Keadaan simpul-simpul yang tidak termasuk dalam rantai tidak berubah. <br><br>  Muncul pertanyaan yang sah, tetapi apa yang akan terjadi jika dua atau bahkan beberapa peristiwa terjadi secara bersamaan? <br><br>  Sebagai seorang pencinta karya Gleb Anfilov, saya tergoda untuk mengirim seorang penanya yang penasaran ke bukunya "Flight from Surprise".  Ini adalah "teori relativitas untuk yang terkecil", di mana dikatakan dengan baik apa yang "bersamaan" dan bagaimana hidup dengannya. <br><br>  Tetapi murni hampir semuanya jauh lebih sederhana: ketika dua atau bahkan beberapa peristiwa terjadi, semua rantai dari masing-masing sumber peristiwa secara berurutan dibangun dan diproses secara bergantian dan tidak ada mukjizat. <br><br>  Pertanyaan selanjutnya yang cukup sah dari pembaca yang ingin tahu adalah apa yang akan terjadi jika node terhubung dalam sebuah cincin?  Atau, seperti yang biasa dikatakan di antara orang-orang pintar Anda ini, untuk memberikan umpan balik.  Yaitu, hubungkan output dari salah satu node dengan input dari node sebelumnya sehingga status output dari node ini mempengaruhi keadaan inputnya.  Editor <b>ElDraw</b> tidak akan memungkinkan Anda untuk langsung menghubungkan output node ke inputnya sendiri.  Namun secara tidak langsung, seperti pada gambar di bawah ini - ini bisa dilakukan. <br><br>  Jadi apa yang akan terjadi dalam kasus ini?  Jawabannya akan sangat "pasti": tergantung pada node mana.  Perhatikan contoh pada gambar. <br><br><img src="https://habrastorage.org/webt/ta/rr/wd/tarrwdvrk01cizkl5xg9x4ilfym.png"><br><br>  Ketika kontak input input1 terbuka di input atas node A - 0. Pada output dari node A, juga 0. Pada output dari node B - 1. Dan akhirnya, pada input yang lebih rendah dari node A - 1. Semuanya jelas.  Dan kepada siapa tidak jelas - lihat di bawah untuk deskripsi tentang bagaimana node "DAN" dan "TIDAK" bekerja. <br><br>  Sekarang tutup kontak input Input1, yaitu, kami akan menyediakan satu ke input atas simpul A.  Mereka yang akrab dengan elektronik tahu bahwa sebenarnya kita mendapatkan rangkaian generator logika klasik.  Dan secara teori, skema seperti itu seharusnya tanpa henti menghasilkan pada output elemen A dan B urutan 1-0-1-0-1-0 ....  dan 0-1-0-1-0-1-1 ....  Bagaimanapun, suatu peristiwa harus secara konstan mengubah keadaan simpul A dan B, berjalan dalam lingkaran 2-3-2-3- ...! <br><br>  Tetapi ini tidak benar-benar terjadi.  Sirkuit akan jatuh ke keadaan acak - atau relai akan tetap hidup atau mati, atau mungkin berdengung sedikit dan beberapa kali berturut-turut.  Itu semua tergantung pada cuaca di kutub selatan Mars.  Dan itulah mengapa ini terjadi. <br><br>  Suatu kejadian dari simpul Input1 mengubah keadaan simpul A, lalu simpul B, dan seterusnya dalam lingkaran beberapa kali.  Program menentukan "perulangan" dari acara tersebut dan secara paksa mengakhiri karnaval ini.  Setelah ini, perubahan status dari node A dan B diblokir sampai peristiwa baru terjadi.  Saat di mana program memutuskan - "berhenti berputar dalam lingkaran!"  - dalam kasus umum, itu tergantung pada banyak faktor dan dapat dianggap acak. <br><blockquote>  Berhati-hatilah saat menghubungkan node dalam sebuah cincin - efeknya tidak selalu jelas!  Bayangkan apa dan mengapa Anda lakukan! </blockquote>  Tetapi apakah mungkin untuk membangun generator di atas simpul yang dapat diakses oleh kita?  Ya kamu bisa!  Tetapi ini membutuhkan simpul yang dengan sendirinya tahu cara menghasilkan peristiwa.  Dan ada simpul seperti itu - ini adalah "garis delay."  Mari kita lihat bagaimana generator bekerja dengan periode 6 detik pada gambar di bawah ini. <br><br><img src="https://habrastorage.org/webt/xy/ng/xc/xyngxczc6i7ryhc2ssrygfdtcwy.png"><br><br>  Elemen kunci dari generator adalah simpul A, garis penundaan.  Jika Anda mengubah status input dari garis penundaan dari 0 ke 1, maka 1 pada output tidak segera muncul, tetapi hanya setelah waktu yang ditentukan.  Dalam kasus kami, ini adalah 3 detik.  Demikian pula, jika Anda mengubah status input dari garis penundaan dari 1 ke 0, maka 0 akan muncul pada output setelah 3 detik yang sama.  Waktu tunda diatur dalam sepersepuluh detik.  Artinya, nilainya 30 dan berarti - 3 detik. <br><br>  Fitur dari garis penundaan adalah bahwa ia menghasilkan suatu peristiwa setelah waktu tunda berlalu. <br><br>  Misalkan pada awalnya output dari garis penundaan adalah 0. Setelah melewati simpul B, inverter, 0 ini berubah menjadi 1 dan pergi ke input dari garis penundaan.  Tidak ada yang terjadi segera.  Pada output dari garis penundaan, seperti sebelumnya, 0 akan tetap, tetapi kemudian hitung mundur waktu tunda dihidupkan.  Dibutuhkan 3 detik.  Dan kemudian garis penundaan menghasilkan suatu peristiwa.  Pada output, ia memiliki 1. Unit ini, setelah melewati simpul B, inverter, berubah menjadi 0 dan masuk ke input dari garis penundaan.  3 detik berlalu ... dan prosesnya berulang.  Yaitu, setiap 3 detik status keluaran dari garis penundaan berubah dari 0 ke 1 dan kemudian dari 1 menjadi 0. Relai berbunyi klik.  Generator bekerja.  Periode pulsa adalah 6 detik (3 detik pada output nol dan 3 detik - satu). <br><br>  Tetapi, di sirkuit nyata, Anda biasanya tidak perlu menggunakan contoh ini.  Ada node pengatur waktu khusus yang sempurna dan tanpa bantuan luar menghasilkan urutan pulsa dengan periode tertentu.  Durasi "nol" dan "unit" dalam pulsa ini sama dengan setengah periode. <br><blockquote>  Untuk mengatur tindakan berkala, gunakan penghitung waktu. </blockquote>  Saya perhatikan bahwa sinyal digital seperti itu, di mana durasi "nol" dan "unit" sama, disebut "berliku-liku". <br><br>  Saya harap saya sedikit mengklarifikasi pertanyaan tentang bagaimana peristiwa didistribusikan antara node dan apa yang tidak boleh dilakukan? <br><br><h4>  Kesimpulan dan referensi </h4><br>  Artikel ini ternyata pendek, tetapi artikel ini adalah jawaban untuk pertanyaan yang diajukan pada node dan acara. <br><br>  Seiring perkembangan firmware dan contoh-contoh baru, saya akan menulis tentang cara memprogram artikel-artikel kecil <b>ShIoTiny</b> , asalkan akan menarik bagi orang-orang. <br><br>  Seperti sebelumnya, skema, firmware, contoh, deskripsi node dan yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lainnya ada di sini</a> . <br><br>  Pertanyaan, keinginan, kritik - ini di sini: <b>shiotiny@yandex.ru</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463285/">https://habr.com/ru/post/id463285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463273/index.html">Frontend Weekly Digest (5 - 11 Agustus 2019)</a></li>
<li><a href="../id463275/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 375 (5 - 11 Agustus 2019)</a></li>
<li><a href="../id463277/index.html">Penugasan untuk pengembangan diri: Formulir HTML dengan daftar string acak dan seleksi oleh mereka</a></li>
<li><a href="../id463279/index.html">PHP Digest No. 162 (1 - 12 Agustus 2019)</a></li>
<li><a href="../id463281/index.html">Mengapa ada beberapa aplikasi inovatif di Google Play atau mengapa terkadang pemrograman itu ajaib</a></li>
<li><a href="../id463289/index.html">Matematika Terpisah untuk WMS: Clustering Stock Lot</a></li>
<li><a href="../id463291/index.html">Dadu atau Tulang</a></li>
<li><a href="../id463293/index.html">Pengumpul Sampah. Kursus lengkap + transfer dari BOTR</a></li>
<li><a href="../id463295/index.html">C ++ dan CMake - Brothers Forever, Bagian II</a></li>
<li><a href="../id463297/index.html">Kesetiaan dengan selera Anda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>