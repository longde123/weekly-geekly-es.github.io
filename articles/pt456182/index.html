<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∫ üï† üë© √Åudio por Bluetooth: informa√ß√µes mais detalhadas sobre perfis, codecs e dispositivos ü§üüèæ üêõ üå†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo tamb√©m est√° dispon√≠vel em russo / Este artigo tamb√©m est√° dispon√≠vel em russo 

 O mercado de massa de smartphones sem a tomada de √°udio d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Åudio por Bluetooth: informa√ß√µes mais detalhadas sobre perfis, codecs e dispositivos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456182/"><img src="https://imgs.xkcd.com/comics/standards.png" alt="Quadrinhos XKCD. Como os padr√µes proliferam. SITUA√á√ÉO: existem 14 padr√µes concorrentes. Geek: 14 ?! Rid√≠culo! Precisamos desenvolver um padr√£o universal que cubra os casos de uso de todos. Namorada do nerd: sim! LOGO: Situa√ß√£o: existem 15 padr√µes concorrentes."><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Este artigo tamb√©m est√° dispon√≠vel em russo / Este artigo tamb√©m est√° dispon√≠vel em russo</a> <br><br>  O mercado de massa de smartphones sem a tomada de √°udio de 3,5 mm mudou a ind√∫stria dos fones de ouvido; os fones de ouvido sem fio Bluetooth se tornaram a principal maneira de ouvir m√∫sica e se comunicar no modo de fone de ouvido para muitos usu√°rios. <br>  Os fabricantes de dispositivos Bluetooth raramente divulgam especifica√ß√µes detalhadas do produto, e os artigos de √°udio Bluetooth na Internet s√£o contradit√≥rios e √†s vezes incorretos.  Eles n√£o informam sobre todos os recursos e geralmente publicam as mesmas informa√ß√µes falsas. <br>  Vamos tentar entender o protocolo, os recursos das pilhas Bluetooth, fones de ouvido e alto-falantes, codecs Bluetooth para m√∫sica e fala, descobrir o que afeta a qualidade do √°udio transmitido e o atraso, aprender a capturar e decodificar informa√ß√µes sobre codecs suportados e outros recursos do dispositivo. <br><br>  <b>TL; DR</b> : <br><br><ul><li>  O codec SBC est√° OK </li><li>  Os fones de ouvido t√™m seu pr√≥prio equalizador por codec e configura√ß√£o de p√≥s-processamento </li><li>  O aptX n√£o √© t√£o bom quanto os an√∫ncios dizem </li><li>  LDAC √© uma falha de marketing </li><li>  A qualidade do √°udio da voz ainda √© baixa </li><li>  Os navegadores s√£o capazes de executar codificadores de √°udio compilados no WebAssembly a partir do C usando o emscripten, e eles nem ficam para tr√°s. </li></ul><br><a name="habracut"></a><br><br><br><br><h1>  M√∫sica via Bluetooth </h1>  Os componentes funcionais do Bluetooth s√£o definidos por perfis - recursos documentados formalizados nas especifica√ß√µes.  A m√∫sica Bluetooth √© transmitida usando um perfil de transmiss√£o A2DP de √°udio de alta qualidade.  O padr√£o A2DP foi adotado em 2003 e n√£o mudou drasticamente desde ent√£o. <br>  O perfil padroniza um codec obrigat√≥rio - SBC, um codec de baixa complexidade computacional criado especificamente para Bluetooth e 3 codecs adicionais.  Tamb√©m √© poss√≠vel usar codecs espec√≠ficos de fornecedor de sua pr√≥pria implementa√ß√£o, n√£o inclu√≠dos no A2DP. <br><br>  Em junho de 2019, vivemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nos quadrinhos XKCD</a> com 14 codecs A2DP: <br><br><ul><li>  <b>SBC</b> ‚Üê inclu√≠do no A2DP, suportado por todos os dispositivos </li><li>  <b>MPEG-1/2 Layer 1/2/3</b> ‚Üê inclu√≠do no A2DP: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MP3</a> amplamente conhecido, comum na TV digital <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MP2</a> e obsoleto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MP1</a> </li><li>  <b>MPEG-2/4 AAC</b> ‚Üê inclu√≠do no A2DP </li><li>  ‚Üê <b>ATRAC</b> ‚Üê codec antigo da Sony, inclu√≠do no A2DP </li><li>  ‚Üê Novo codec da Sony </li><li>  codec <b>aptX</b> ‚Üê de 1988 </li><li>  <b>aptX HD</b> ‚Üê o mesmo que o aptX, mas com um perfil de codifica√ß√£o diferente </li><li>  <b>aptX Low Latency</b> ‚Üê <s>codec totalmente diferente, sem implementa√ß√£o de software</s> aptX com buffer menor </li><li>  <b>aptX Adaptive</b> ‚Üê outro codec da Qualcomm </li><li>  <b>FastStream</b> ‚Üê pseudo-codec, modifica√ß√£o bidirecional do SBC </li><li>  ‚Üê <b>HWA LHDC</b> ‚Üê Novo codec da Huawei </li><li>  <b>Samsung HD</b> ‚Üê suportado por 2 dispositivos </li><li>  <b>Samsung Scalable</b> ‚Üê suportado por 2 dispositivos </li><li>  <b>Samsung UHQ-BT</b> ‚Üê suportado por 3 dispositivos </li></ul><br><br>  Voc√™ pode se perguntar por que precisamos de um codec em primeiro lugar, se o Bluetooth possui <abbr title="Taxa de dados aprimorada">EDR</abbr> , que permite transferir dados a 2 ou 3 Mb / s, enquanto o PCM de dois canais sem compress√£o de 16 canais requer apenas 1,4 Mb / s? <br><br><h1>  Transfer√™ncia de dados Bluetooth </h1>  Existem dois tipos de transfer√™ncia de dados no Bluetooth: Conex√£o Ass√≠ncrona Menos (ACL) para transfer√™ncia ass√≠ncrona sem estabelecer uma conex√£o, e Conex√£o S√≠ncrona Orientada (SCO), para transfer√™ncia s√≠ncrona com o estabelecimento da conex√£o. <br>  A transmiss√£o de dados usa o esquema de divis√£o de tempo e altera o canal de frequ√™ncia para cada pacote de dados transmitidos (Frequency-Hop / Time-Division-Duplex, FH / TDD).  O tempo √© dividido em intervalos de 625 microssegundos, chamados slots.  Um dos dispositivos transmite em n√∫meros pares de slots, o outro - em n√∫meros √≠mpares.  Um pacote transmitido pode ocupar 1, 3 ou 5 slots, dependendo do tamanho dos dados e do modo de transmiss√£o.  Se o pacote for grande o suficiente e mais de um modo de transmiss√£o de slot for usado, os dados ser√£o executados em slots pares e √≠mpares at√© o final da transmiss√£o.  Em um segundo, voc√™ pode receber e enviar at√© 1600 pacotes se cada um deles ocupar um slot e os dois dispositivos transmitirem e receberem dados continuamente. <br><br>  As taxas de transfer√™ncia de 2 ou 3 Mbps para EDR encontradas nos an√∫ncios e no site da Bluetooth s√£o a taxa m√°xima de transfer√™ncia de dados de canal de todos os dados no total (incluindo os cabe√ßalhos t√©cnicos de todos os protocolos para os dados a serem encapsulados) em duas dire√ß√µes simultaneamente.  A taxa real de transfer√™ncia de dados variar√° bastante. <br><br>  O m√©todo ass√≠ncrono √© usado para streaming de m√∫sica, quase sempre usando pacotes do tipo 2-DH5 e 3-DH5, que transportam a quantidade m√°xima de dados nos modos EDR de 2 Mb / se 3 Mb / s respectivamente e ocupam 5 slots de divis√£o de tempo. <br><br>  Representa√ß√£o esquem√°tica da transmiss√£o usando 5 slots por um dispositivo e 1 slot por outro (DH5 / DH1): <br><img src="https://habrastorage.org/webt/ym/iz/rj/ymizrjjo_3mwd8eo_p--wooe5om.png" alt="5 slots de transmiss√£o, cada um dos quais transmitido por 625 microssegundos e um slot de recebimento, tamb√©m 625 microssegundos. 3,75 milissegundos no total."><br><br>  Devido ao princ√≠pio de compartilhamento de tempo, temos que aguardar um intervalo de tempo de 625 microssegundos ap√≥s a transmiss√£o de um pacote se o segundo dispositivo n√£o nos transmitir nada ou transmitir um pacote pequeno e mais tempo se o segundo dispositivo executar a transmiss√£o em pacotes grandes.  Se mais de um dispositivo estiver conectado ao telefone (por exemplo, fones de ouvido, rel√≥gio inteligente e uma pulseira de fitness), o tempo de transmiss√£o ser√° compartilhado entre todos. <br><br>  O fluxo de √°udio A2DP requer encapsulamento em protocolos de transporte especiais L2CAP e AVDTP, que deduzem 16 bytes da quantidade m√°xima poss√≠vel de carga √∫til de √°udio no pacote. <br><div class="scrollable-table"><table><tbody><tr><th>  Tipo de pacote </th><th>  Valor do slot </th><th>  Bytes m√°ximos por pacote </th><th>  Bytes m√°ximos de carga √∫til A2DP </th><th>  Taxa de bits m√°xima da carga √∫til A2DP </th></tr><tr><td>  2-dh3 </td><td>  3 </td><td>  367 </td><td>  351 </td><td>  936 Kb / s </td></tr><tr><td>  3-dh3 </td><td>  3 </td><td>  552 </td><td>  536 </td><td>  1429 kb / s </td></tr><tr><td>  2-DH5 </td><td>  5 </td><td>  679 </td><td>  663 </td><td>  1414 kb / s </td></tr><tr><td>  3-dh5 </td><td>  5 </td><td>  1021 </td><td>  1005 </td><td>  2143 kb / s </td></tr></tbody></table></div>  1414 e 1429 kbps n√£o s√£o suficientes para transmitir √°udio n√£o compactado em condi√ß√µes reais, com uma banda barulhenta de 2,4 GHz e dados de servi√ßo ocasionais.  O EDR 3 Mbps exige a pot√™ncia de transmiss√£o e a rela√ß√£o sinal / ru√≠do, portanto, mesmo no modo 3-DH5, nenhuma transmiss√£o PCM confort√°vel √© poss√≠vel, pois sempre haver√° interrup√ß√µes de curto prazo e tudo funcionar√° mais ou menos confi√°vel apenas a uma dist√¢ncia de alguns metros. <br>  Na pr√°tica, mesmo o fluxo de √°udio de 990 kb / s (LDAC 990 kb / s) n√£o √© trivial para transmitir de forma confi√°vel. <br><br>  Vamos voltar aos codecs. <br><br><h2>  Sbc </h2>  Este codec √© obrigat√≥rio para todos os dispositivos que suportam o padr√£o A2DP.  O melhor e o pior codec ao mesmo tempo. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Taxa de amostragem </th><th>  Profundidade de bits </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  16, 32, 44,1, 48 kHz </td><td>  16 bit </td><td>  10-1500 kb / s </td><td>  Todos os dispositivos </td><td>  Todos os dispositivos </td></tr></tbody></table></div><br><br>  O SBC √© um codec simples e computacionalmente r√°pido, com um modelo psicoac√∫stico primitivo (com mascaramento auditivo simples) usando modula√ß√£o por c√≥digo de pulso adapt√°vel (APCM). <br>  A especifica√ß√£o A2DP recomenda o uso de dois perfis: qualidade m√©dia e alta qualidade. <br><img src="https://hsto.org/webt/4b/ry/lo/4brylotdopfu9mh3whbmrmmmy0k.png" alt="Tabela com perfis de qualidade m√©dia e alta qualidade. Os valores especificados s√£o bitpool, comprimento do quadro e taxa de bits. Para est√©reo conjunto de 44,1 kHz. Qualidade m√©dia: bitpool = 35, comprimento do quadro = 83, taxa de bits = 229. Alta qualidade: bitpool = 53, comprimento do quadro = 119, taxa de bits = 328."><br><br>  O codec possui muitas configura√ß√µes que permitem controlar o atraso algor√≠tmico, o n√∫mero de amostras no algoritmo de aloca√ß√£o de blocos e bits, mas quase sempre os par√¢metros usados ‚Äã‚Äãna especifica√ß√£o s√£o usados ‚Äã‚Äãem todos os lugares: <abbr title="O m√©todo de codifica√ß√£o do est√©reo como parte comum do sinal e a diferen√ßa entre os canais economizam espa√ßo">Stereo comum</abbr> , 8 bandas de frequ√™ncia, 16 blocos no √°udio frame, m√©todo de aloca√ß√£o de bits <abbr title="Mascaramento silencioso do som se houver sons altos, levando em considera√ß√£o a natureza n√£o linear da audi√ß√£o humana">Loudness</abbr> . <br>  O SBC pode ajustar o par√¢metro de pool de bits dinamicamente, o que afeta diretamente a taxa de bits.  Se o r√°dio estiver entupido, os pacotes forem perdidos ou os dispositivos estiverem distantes, a fonte de √°udio poder√° reduzir o pool de bits para evitar interrup√ß√µes no √°udio at√© que a conex√£o esteja est√°vel novamente. <br><br>  Os fabricantes da maioria dos fones de ouvido definem o valor m√°ximo do par√¢metro bitpool como 53, o que limita a taxa de bits a 328 kilobits por segundo ao usar o perfil recomendado. <br>  Mesmo que o fabricante do fone de ouvido tenha definido o valor m√°ximo de bitpool acima de 53 (o que √© verdade, por exemplo, para Beats Solo¬≥, JBL Everest Elite 750NC, Apple AirPods e tamb√©m para alguns receptores e unidades de cabe√ßa de carro), a maioria dos sistemas operacionais n√£o permitir√° o uso. taxas de bits mais altas devido a limites internos nas pilhas Bluetooth. <br>  Al√©m disso, alguns fabricantes definem um valor m√°ximo baixo de bitpool para alguns dispositivos.  Por exemplo, no Bluedio T √© igual a 39, no Samsung Gear IconX √© 37, o que fornece uma qualidade de som ruim. <br><br>  As limita√ß√µes artificiais foram introduzidas nas pilhas Bluetooth, provavelmente devido √† quantidade insuficiente de testes de certifica√ß√£o e √† incompatibilidade de alguns dispositivos com grandes valores de Bitpool ou perfis at√≠picos, mesmo que eles se reportem a apoi√°-los.  Era mais f√°cil para os desenvolvedores restringir as op√ß√µes a valores conhecidos de um perfil recomendado, em vez de criar um banco de dados de dispositivos incompat√≠veis.  Embora agora eles fa√ßam isso para outras fun√ß√µes que funcionam incorretamente. <br><br>  O SBC aloca dinamicamente bits de quantiza√ß√£o para bandas de frequ√™ncia, atuando de baixo para cima, com diferentes pesos.  Se toda a taxa de bits foi usada para frequ√™ncias baixas e m√©dias, as frequ√™ncias superiores ser√£o cortadas (substitu√≠das pelo sil√™ncio). <br><br>  Exemplo de SBC 328 kbps.  O √°udio original est√° na parte superior, o √°udio codificado em SBC est√° na parte inferior.  As faixas s√£o trocadas para compara√ß√£o.  O fluxo de √°udio no arquivo de v√≠deo √© compactado usando o codec FLAC sem perdas.  O uso do FLAC no cont√™iner mp4 n√£o √© oficialmente padronizado, por isso o √°udio pode n√£o ser reproduzido no seu navegador (deve funcionar nas vers√µes mais recentes do Chrome e Firefox da √°rea de trabalho).  Se voc√™ n√£o tiver som, poder√° fazer o download do arquivo e abri-lo em qualquer player de v√≠deo. <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://files.catbox.moe/8yrssu.mp4" type="video/mp4"></video></div></div></div>  <i><font color="#666666">ZZ Top - Homem Vestido Afiado</font></i> <br><br>  O momento da comuta√ß√£o √© vis√≠vel no espectrograma: o SBC corta periodicamente sons baixos acima de 17,5 kHz e n√£o aloca bits para uma banda acima de 20 kHz.  O espectrograma √© clic√°vel (1,7 MB). <br> <a href=""><img src="https://habrastorage.org/webt/-n/0l/rq/-n0lrqlg47cvwkdux2tn2swevsw.jpeg" alt="imagem"></a> <br><br>  N√£o consigo ouvir a diferen√ßa entre o original e o SBC nesta faixa. <br><br>  Vamos pegar algo mais novo e simular a qualidade de √°udio dos fones de ouvido Samsung Gear IconX com Bitpool 37 (o topo √© o fluxo original, o fundo √© SBC 239 kbps, o FLAC √© usado para √°udio). <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://files.catbox.moe/r561g5.mp4" type="video/mp4"></video></div></div></div>  <i><font color="#666666">Auto-indulg√™ncia irracional - Testemunha</font></i> <br><br>  Ou√ßo crepitar, um efeito est√©reo menor e um desagrad√°vel "barulho" de vocais em altas frequ√™ncias. <br><br>  Resumindo, o SBC √© um codec muito flex√≠vel: pode ser configurado para baixa lat√™ncia, oferece excelente qualidade de √°udio em altas taxas de bits (452+ kb / s) e √© bastante bom para a maioria das pessoas em alta qualidade padr√£o (328 kb / s) .  No entanto, existem algumas raz√µes pelas quais o codec √© famoso por sua baixa qualidade de som: o padr√£o A2DP n√£o define perfis fixos (apenas fornece recomenda√ß√µes), os desenvolvedores de pilhas Bluetooth definem limites artificiais no Bitpool, os par√¢metros do √°udio transmitido n√£o s√£o exibidos na interface do usu√°rio, os fabricantes de fones de ouvido s√£o livres para definir suas configura√ß√µes e nunca especificar o valor do Bitpool nas caracter√≠sticas t√©cnicas do produto. <br>  O par√¢metro bitpool afeta diretamente a taxa de bits somente em um perfil.  O mesmo valor de bitpool de 53 pode produzir a taxa de bits de 328 kbps com o perfil de alta qualidade recomendado e 1212 kbps no modo <abbr title="Modo de codifica√ß√£o de canal, no qual todo o bitpool √© usado para cada canal separadamente, dobrando efetivamente a taxa de bits">Dual Channel</abbr> e 4 bandas de frequ√™ncia, e √© por isso que os autores do SO tamb√©m definem limites na taxa de bits al√©m do bitpool.  Suponho que a situa√ß√£o surgiu devido √† falha no padr√£o A2DP: era necess√°rio negociar a taxa de bits, n√£o o bitpool. <br><br>  Tabela de recursos do SBC suportados em diferentes sistemas operacionais: <br><div class="scrollable-table"><table><tbody><tr><th>  OS </th><th>  Taxa de amostragem </th><th>  Limite m√°ximo de bitpool </th><th>  Limite m√°ximo de taxa de bits </th><th>  Taxa de bits t√≠pica </th><th>  Suporte din√¢mico a bitpool </th></tr><tr><td>  <b>Windows 10</b> </td><td>  44,1 kHz </td><td>  53 </td><td>  512 kb / s </td><td>  328 kb / s </td><td>  ‚úì * </td></tr><tr><td>  <b>Linux (BlueZ + PulseAudio)</b> </td><td>  16, 32, 44,1, 48 kHz </td><td>  64 (para conex√µes de entrada), 53 (para conex√µes de sa√≠da) </td><td>  Sem limite </td><td>  328 kb / s </td><td>  ‚úì * </td></tr><tr><td>  <b>macOS High Sierra</b> </td><td>  44,1 kHz </td><td>  64, 53 por padr√£o *** </td><td>  Desconhecido </td><td>  328 kb / s </td><td>  ‚úó </td></tr><tr><td>  <b>Android 4.4-9</b> </td><td>  44,1 / 48 kHz ** </td><td>  53 </td><td>  328 kb / s </td><td>  328 kb / s </td><td>  ‚úó </td></tr><tr><td>  <b>Android 4.1-4.3.1</b> </td><td>  44,1, 48 kHz ** </td><td>  53 </td><td>  229 kb / s </td><td>  229 kb / s </td><td>  ‚úó </td></tr><tr><td>  <b>Blackberry OS 10</b> </td><td>  48 kHz </td><td>  53 </td><td>  Sem limite </td><td>  328 kb / s </td><td>  ‚úó </td></tr></tbody></table></div>  <i><font color="#666666"><b>* O</b> Bitpool diminui, mas n√£o aumenta automaticamente em caso de condi√ß√µes de transmiss√£o vari√°veis.</font></i>  <i><font color="#666666">Para restaurar o pool de bits, √© necess√°rio interromper a reprodu√ß√£o, aguardar alguns segundos e reiniciar o √°udio.</font></i> <i><font color="#666666"><br></font></i>  <i><font color="#666666"><b>**</b> O valor padr√£o depende das configura√ß√µes da pilha especificadas ao compilar o firmware.</font></i>  <i><font color="#666666">No Android 8 / 8.1, a frequ√™ncia √© de 44,1 kHz ou 48 kHz, dependendo das configura√ß√µes durante a compila√ß√£o, outras vers√µes suportam 44,1 kHz e 48 kHz simultaneamente.</font></i> <i><font color="#666666"><br></font></i>  <i><font color="#666666"><b>***</b> O valor do Bitpool pode ser ajustado usando o software Bluetooth Explorer.</font></i> <br><br><h2>  aptX e aptX HD </h2>  O aptX √© um codec simples e computacionalmente r√°pido, sem psicoac√∫stica, que usa modula√ß√£o por c√≥digo de pulso diferencial adaptativo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADPCM</a> ).  Apareceu por volta de 1988 (a data de dep√≥sito da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">patente</a> √© fevereiro de 1988).  Antes do Bluetooth, era usado principalmente para equipamentos de √°udio sem fio profissionais.  Atualmente de propriedade da Qualcomm, exige taxas de licenciamento e licen√ßa.  Em 2014: pagamento √∫nico de $ 6.000 e 1 $ 1 por dispositivo, para lotes de at√© 10.000 dispositivos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> , p√°gina 16). <br><br>  O codec possui apenas um par√¢metro - taxa de amostragem.  Embora tamb√©m haja op√ß√£o de configura√ß√£o de n√∫mero / modo de canal, todos os dispositivos que conhe√ßo suportam apenas est√©reo (mais de 70 modelos). <br><br><div class="scrollable-table"><table><tbody><tr><th>  Codec </th><th>  Taxa de amostragem </th><th>  Profundidade de bits </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  <b>aptX</b> </td><td>  16, 32, 44,1, 48 kHz </td><td>  16 bit </td><td>  128/256/352/384 kb / s (dependendo da taxa de amostragem) </td><td>  Windows 10 (desktop e m√≥vel), macOS, Android 4.4 + / 7 *, Blackberry OS 10 </td><td>  Grande variedade de dispositivos (em hardware) </td></tr></tbody></table></div>  <i><font color="#666666"><b>*</b> Vers√µes at√© 7 requerem modifica√ß√£o da pilha Bluetooth.</font></i>  <i><font color="#666666">O codec √© suportado apenas se o fabricante do dispositivo Android tiver licenciado o uso de codec da Qualcomm (se o SO tiver bibliotecas de codifica√ß√£o inclu√≠das).</font></i> <br><br>  O aptX divide o √°udio em 4 bandas de frequ√™ncia e os quantifica com o mesmo n√∫mero de bits continuamente: 8 bits para 0-5,5 kHz, 4 bits para 5,5-11 kHz, 2 bits para 11-16,5 kHz, 2 bits para 16,5-22 kHz ( valores para a taxa de amostragem de 44,1 kHz). <br><br>  Exemplo de √°udio do aptX (√°udio superior - original, inferior - √°udio codificado pelo aptX, espectrogramas apenas dos canais esquerdos, som em FLAC): <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://files.catbox.moe/06eohy.mp4" type="video/mp4"></video></div></div></div><br>  As frequ√™ncias superiores s√£o um pouco mais vermelhas, mas a diferen√ßa n√£o √© aud√≠vel. <br><br>  Devido √† distribui√ß√£o fixa de bits de quantiza√ß√£o, o codec n√£o pode "transferir os bits" para as frequ√™ncias que mais precisam deles.  Diferentemente do SBC, o aptX n√£o "cortar√°" as frequ√™ncias, mas adicionar√° ru√≠do de quantiza√ß√£o a elas, reduzindo a faixa din√¢mica do √°udio. <br><br>  N√£o devemos assumir que o uso, por exemplo, de 2 bits para uma banda reduza a faixa din√¢mica para 12 dB: o ADPCM permite que at√© 96 dB de faixa din√¢mica sejam utilizados, mesmo com 2 bits de quantiza√ß√£o, mas apenas com um certo tipo de sinal . <br>  O ADPCM armazena a diferen√ßa entre o valor atual e o pr√≥ximo na representa√ß√£o num√©rica, em vez de usar o valor absoluto, como no PCM.  Isso reduz os requisitos para o n√∫mero de bits necess√°rios para armazenar as mesmas informa√ß√µes (sem perda) ou quase as mesmas (com erro de arredondamento relativamente pequeno).  Para reduzir erros de arredondamento, s√£o aplicadas tabelas de fatores. <br>  Ao criar o codec, os autores calcularam os coeficientes ADPCM em um conjunto de arquivos de √°udio de m√∫sica.  Quanto mais pr√≥ximo o sinal de √°udio do conjunto de m√∫sicas em que as tabelas foram constru√≠das, menos erros de quantiza√ß√£o (ru√≠do) s√£o gerados pelo aptX. <br><br>  Por esse motivo, os testes sint√©ticos sempre produzem resultados piores que a m√∫sica.  Fiz um exemplo sint√©tico especial no qual o aptX apresenta um desempenho ruim - uma onda senoidal de 12,4 kHz (sinal original superior, inferior - aptX. Som no FLAC. Estupro na orelha, diminua o volume!): <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://files.catbox.moe/kterhd.mp4" type="video/mp4"></video></div></div></div><br>  Gr√°fico de espectro: <br><img src="https://habrastorage.org/webt/i1/p9/gr/i1p9grptgcwou7hf7f21yydddxa.png" alt="Gr√°fico de espectro, n√≠vel m√°ximo de ru√≠do - -55 dB"><br><br>  O barulho √© claramente aud√≠vel. <br><br>  No entanto, se voc√™ gerar uma onda senoidal com uma amplitude menor para que fique mais silenciosa, o ru√≠do tamb√©m se tornar√° mais silencioso, o que indica uma ampla faixa din√¢mica: <br><img src="https://habrastorage.org/webt/qe/ti/km/qetikmcmqkiusrwtxdftmlvn_ii.png" alt="Gr√°fico de espectro, n√≠vel m√°ximo de ru√≠do - -75 dB"><br><br>  Para ouvir a diferen√ßa entre uma faixa de m√∫sica original e uma compactada, voc√™ pode inverter um dos sinais e adicionar faixas aos respectivos canais.  Essa abordagem √© incorreta em geral e n√£o daria resultados adequados com codecs mais complexos, mas para o uso de codecs da classe ADPCM desse m√©todo √© razo√°vel. <br>  <a href="">A diferen√ßa entre o √°udio original e o codificado por aptX</a> <br>  A diferen√ßa da raiz quadrada m√©dia dos sinais est√° no n√≠vel de -37,4 dB, o que n√£o √© muito para essa m√∫sica compactada. <br><br><h3>  aptX HD </h3>  O aptX HD n√£o √© um codec independente - √© um perfil de codifica√ß√£o aprimorado do aptX.  As altera√ß√µes afetam o n√∫mero de bits alocados para a codifica√ß√£o de bandas de frequ√™ncia: 10 bits para 0-5,5 kHz, 6 bits para 5,5-11 kHz, 4 bits para 11-16,5 kHz, 4 bits para 16,5-22 kHz (valores para 44,1 kHz) . <br><br><div class="scrollable-table"><table><tbody><tr><th>  Codec </th><th>  Taxa de amostragem </th><th>  Profundidade de bits </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  <b>aptX HD</b> </td><td>  16, 32, 44,1, 48 kHz </td><td>  24 bit </td><td>  192/384/529/576 kb / s (dependendo da taxa de amostragem) </td><td>  Android 8 + * </td><td>  Alguns dispositivos de √°udio (no hardware) </td></tr></tbody></table></div>  <i><font color="#666666"><b>*</b> Vers√µes at√© 7 requerem modifica√ß√£o da pilha Bluetooth.</font></i>  <i><font color="#666666">O codec √© suportado apenas se o fabricante do dispositivo Android tiver licenciado o uso de codec da Qualcomm (se o SO tiver bibliotecas de codifica√ß√£o inclu√≠das).</font></i> <br><br>  Esse codec √© menos comum que o aptX: parece exigir licenciamento separado da Qualcomm e taxas de licenciamento separadas. <br><br>  Vamos repetir o exemplo com uma onda senoidal de 12,4 kHz: <br><img src="https://habrastorage.org/webt/zj/be/u6/zjbeu69hd_pqm-valjq895lcoei.png" alt="Gr√°fico de espectro, n√≠vel m√°ximo de ru√≠do - -72 dB"><br><br>  Muito melhor do que com o aptX, mas ainda barulhento. <br><br><br><h2>  Lat√™ncia baixa do aptX </h2>  A vers√£o de baixa lat√™ncia do aptX n√£o √© um codec independente.  Difere apenas nas configura√ß√µes de lat√™ncia e buffers aplicados no lado da unidade de √°udio.  Al√©m disso, esse √© um aptX comum. <br>  Foi projetado para transmiss√£o de √°udio interativa com baixa lat√™ncia (filmes, jogos), onde o atraso do som n√£o pode ser ajustado programaticamente.  H√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">implementa√ß√£o de software de driver Dell dispon√≠vel para chips Intel Bluetooth</a> .  Tamb√©m √© suportado por transmissores, receptores, fones de ouvido e alto-falantes, mas n√£o por smartphones. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Taxa de amostragem </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  44,1 kHz </td><td>  352 kb / s </td><td>  Windows com driver Dell e alguns transmissores (em hardware) </td><td>  Alguns dispositivos de √°udio (no hardware) </td></tr></tbody></table></div><br><br><h2>  Aac </h2>  AAC, ou Advanced Audio Coding, √© um codec computacionalmente sofisticado com um modelo psicoac√∫stico complexo.  √â amplamente utilizado para √°udio na Internet, o segundo codec mais popular depois do MP3.  Requer taxas de licenciamento e licen√ßa: pagamento √∫nico de US $ 15.000 (ou US $ 1000 para empresas com menos de 15 funcion√°rios) + US $ 0,98 para os primeiros 500.000 dispositivos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> ). <br>  O codec √© padronizado dentro das especifica√ß√µes MPEG-2 e MPEG-4 e, apesar de frequentes descren√ßas, n√£o pertence √† Apple. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Taxa de amostragem </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  8 - 96 kHz </td><td>  8 - 576 kb / s (para est√©reo), 256 - 320 kb / s (t√≠pico para Bluetooth) </td><td>  macOS, Android 7+ *, iOS </td><td>  Grande variedade de dispositivos (em hardware) </td></tr></tbody></table></div>  <i><font color="#666666"><b>*</b> apenas em dispositivos cujos fabricantes pagaram royalties</font></i> <br><br>  O iOS e o macOS cont√™m o melhor codificador Apple AAC dispon√≠vel at√© o momento, produzindo a mais alta qualidade de √°udio poss√≠vel.  O Android usa o segundo melhor codificador Fraunhofer FDK AAC, mas tamb√©m pode usar v√°rios codificadores de hardware incorporados na plataforma (SoC) com uma qualidade de codifica√ß√£o desconhecida.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">De acordo com testes recentes publicados no site SoundGuys</a> , a qualidade da codifica√ß√£o AAC em diferentes telefones Android varia muito: <br> <a href=""><img src="https://www.soundguys.com/wp-content/uploads/2018/10/aac-enhanced-view-fr-1200x788.jpg" alt="Gr√°fico do espectro de codifica√ß√£o AAC de v√°rios dispositivos m√≥veis. O Huawei P20 Pro tem um decl√≠nio acentuado na regi√£o de 14 kHz, no LG V30 - na regi√£o de 16 kHz, no Samsung Note 8 - 17 kHz, no Apple iPhone 7 - 19 kHz."></a> <br><br>  A maioria dos dispositivos de √°udio sem fio tem uma taxa de bits m√°xima de 320 kbps para o AAC, alguns suportam apenas 256 kbps.  Outras taxas de bits s√£o extremamente raras. <br>  O AAC oferece excelente qualidade nas taxas de bits de 320 e 256 kb / s, mas √© propenso a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">perda de gera√ß√£o</a> em conte√∫do j√° compactado, no entanto, √© dif√≠cil ouvir diferen√ßas entre o original e o AAC de 256 kb / s no iOS, mesmo com v√°rias codifica√ß√µes consecutivas.  Para MP3 320 kbps codificados em AAC 256 kbps, a perda pode ser negligenciada. <br>  Assim como em qualquer outro codec Bluetooth, qualquer m√∫sica √© decodificada e depois codificada com um codec.  Ao ouvir m√∫sica no formato AAC, ele √© decodificado pelo sistema operacional e depois codificado no AAC novamente, para transmiss√£o via Bluetooth.  Isso √© necess√°rio para misturar v√°rios fluxos de √°udio, como m√∫sicas e notifica√ß√µes de novas mensagens.  iOS n√£o √© excep√ß√£o.  Voc√™ pode encontrar muitas instru√ß√µes de que o iOS n√£o transcodifica m√∫sicas no formato AAC para transmiss√£o via Bluetooth, o que est√° incorreto. <br><br>  O AAC tem muitas extens√µes para o m√©todo de codifica√ß√£o padr√£o.  Um deles - Scalable to Lossless (SLS) - √© padronizado para Bluetooth e permite transferir √°udio sem perdas.  Infelizmente, nenhum suporte SLS foi encontrado em dispositivos existentes.  Uma extens√£o para reduzir o atraso da transmiss√£o AAC-LD (Atraso baixo) n√£o √© padronizada para Bluetooth. <br><br><br><h2>  MP1 / 2/3 </h2>  Os codecs MPEG-1/2 Parte 3 consistem em MP3 bem conhecido e amplamente usado, o MP2 menos comum (usado principalmente em TV e r√°dio digital) e o MP1 completamente desconhecido. <br><br>  Os codecs MP1 e MP2 antigos n√£o s√£o compat√≠veis, n√£o encontrei nenhum fone de ouvido ou pilha Bluetooth que os codificasse ou decodificasse. <br>  A decodifica√ß√£o de MP3 √© suportada por alguns fones de ouvido, mas a codifica√ß√£o n√£o √© suportada em nenhuma pilha moderna de sistema operacional.  Parece que a pilha BlueSoleil de terceiros para Windows pode codificar MP3 se voc√™ editar manualmente o arquivo de configura√ß√£o, mas na minha instala√ß√£o ele leva ao BSoD no Windows 10. O resultado: voc√™ n√£o pode realmente usar um codec para √°udio Bluetooth. <br>  Anteriormente, em 2006-2008, antes que o padr√£o A2DP fosse amplamente usado em dispositivos, as pessoas ouviam m√∫sica MP3 no fone de ouvido Nokia BH-501 por meio do programa MSI BluePlayer, dispon√≠vel no Symbian e no Windows Mobile.  Naquela √©poca, a arquitetura do sistema operacional dos smartphones permitia o acesso a muitas fun√ß√µes de baixo n√≠vel; era poss√≠vel instalar a pilha Bluetooth de terceiros no Windows Mobile. <br><br>  A patente mais recente do codec MP3 expirou. O uso do codec n√£o exige taxas de licen√ßa desde 23 de abril de 2017. <br><br><blockquote>  Se a patente mais antiga mencionada nas refer√™ncias mencionadas for tomada como medida, a tecnologia MP3 se tornar√° livre de patentes nos Estados Unidos em 16 de abril de 2017, quando a patente US 6.009.399, mantida e administrada pela Technicolor, expirou. </blockquote>  <i><font color="#666666">Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.iis.fraunhofer.de/en/ff/amm/prod/audiocodec/audiocodecs/mp3.html</a></font></i> <br><br><div class="scrollable-table"><table><tbody><tr><th>  Taxa de amostragem </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  16 - 48 kHz </td><td>  8 - 320 kb / s </td><td>  N√£o suportado em nenhum lugar </td><td>  Alguns dispositivos de √°udio (no hardware) </td></tr></tbody></table></div><br><br><h2>  LDAC </h2>  Codec "Hi-Res" novo e promovido ativamente da Sony que suporta taxas de amostragem de at√© 96 kHz e profundidade de 24 bits, com uma taxa de bits de at√© 990 kbps.  √â anunciado como um codec audi√≥filo, como um substituto para os codecs Bluetooth existentes.  Possui uma fun√ß√£o de taxa de bits adapt√°vel que sintoniza a taxa de bits dependendo das condi√ß√µes de transmiss√£o do r√°dio. <br><br>  O codificador LDAC ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">libldac</a> ) est√° inclu√≠do na distribui√ß√£o padr√£o do Android, a codifica√ß√£o √© suportada em qualquer smartphone Android a partir da vers√£o 8. do sistema operacional. Os decodificadores de software n√£o est√£o dispon√≠veis gratuitamente e a especifica√ß√£o do codec n√£o est√° dispon√≠vel para o p√∫blico em geral, no entanto, √† primeira vista no codificador, os internos s√£o semelhantes ao codec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ATRAC9</a> da Sony usado no PlayStation 4 e Vita: ambos trabalham no dom√≠nio da frequ√™ncia, usam uma transformada discreta de co-seno modificada (MDCT) e compress√£o Huffman. <br>  O LDAC divide o √°udio em 12 ou 16 bandas de frequ√™ncia: 12 s√£o usados ‚Äã‚Äãpara 44,1 e 48 kHz, 16 para 88,2 e 96 kHz. <br><br>  O LDAC √© suportado quase exclusivamente apenas pelos fones de ouvido da Sony.  √Äs vezes, a decodifica√ß√£o LDAC √© encontrada em fones de ouvido e DACs de outros fabricantes, mas muito raramente. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Taxa de amostragem </th><th>  Taxa de bits </th><th>  Suporte de codifica√ß√£o </th><th>  Suporte de decodifica√ß√£o </th></tr><tr><td>  44,1 - 96 kHz </td><td>  303/606/909 kb / s (para 44,1 e 88,2 kHz), 330/660/990 kb / s (para 48 e 96 kHz) </td><td>  Android 8 ou superior </td><td>  Alguns fones de ouvido da Sony e dispositivos selecionados de outros fabricantes (em hardware) </td></tr></tbody></table></div><br><br>  O marketing do codec LDAC Hi-Res prejudica suas propriedades t√©cnicas: n√£o √© aconselh√°vel gastar a taxa de bits para codificar e transmitir frequ√™ncias que n√£o s√£o aud√≠veis para o ouvido humano e uma profundidade de bits mais alta quando ainda n√£o √© poss√≠vel comprimir sem perdas √°udio com qualidade de CD.  Felizmente, o codec possui dois modos de opera√ß√£o: transmiss√£o de √°udio por CD e transmiss√£o de √°udio em alta resolu√ß√£o.  No primeiro caso, apenas 44,1 kHz / 16 bits s√£o transmitidos pelo ar. <br><br>  Como o decodificador de software LDAC n√£o est√° dispon√≠vel gratuitamente, n√£o √© poss√≠vel testar o codec sem dispositivos adicionais que decodifiquem o LDAC.  De acordo com os resultados do teste LDAC no DAC com seu suporte, que os engenheiros do SoundGuys.com conectaram via sa√≠da digital e gravaram o som de sa√≠da dos sinais de teste, o LDAC 660 e 990 kbit / s no modo de qualidade de CD fornece um sinal rela√ß√£o ru√≠do / ru√≠do um pouco melhor que a do aptX HD.  Este √© um bom resultado. <br><br> <a href=""><img src="https://www.soundguys.com/wp-content/uploads/2018/10/LDAC-990-CD-Noise-Floor.jpg" alt="Perfil de ru√≠do LDAC CD 990 kbit / s"></a> <br>  <i><font color="#666666">Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.soundguys.com/ldac-ultimate-bluetooth-guide-20026</a></font></i> <br><br>  O LDAC tamb√©m suporta taxa de bits din√¢mica fora dos perfis estabelecidos - de 138 kbps a 990 kbps, mas at√© onde eu sei, o Android usa apenas perfis padronizados de 303/606/909 e 330/660/990 kbps. <br><br><h2>  Outros codecs </h2>  Outros codecs A2DP n√£o s√£o amplamente utilizados.  Seu suporte est√° quase completamente ausente ou est√° dispon√≠vel apenas em alguns modelos de fones de ouvido e smartphones. <br>  O codec ATRAC padronizado A2DP nunca foi usado como codec Bluetooth, nem mesmo pela Sony.  Os codecs Samsung HD, Samsung Scalable e Samsung UHQ-BT t√™m suporte muito limitado dos dispositivos de transmiss√£o e recep√ß√£o.  O HWA LHDC √© muito novo e suporta apenas tr√™s (?) Dispositivos. <br><br><br><h1>  Suporte de codec para dispositivos de √°udio </h1>  Nem todos os fabricantes publicam informa√ß√µes precisas sobre codecs suportados em determinados fones de ouvido, alto-falantes, receptores ou transmissores sem fio.  √Äs vezes acontece que determinado codec √© suportado apenas para transmiss√£o, mas n√£o para recep√ß√£o (relevante para transmissores-receptores combinados), embora o fabricante simplesmente declare "suporte", sem anota√ß√µes (presumo que seja o culpado o licenciamento separado de codificadores e decodificadores) .  Nos dispositivos mais baratos, voc√™ nunca encontra o suporte declarado para o aptX. <br><br>  Infelizmente, os codecs suportados n√£o s√£o exibidos em nenhum lugar na maioria das interfaces do sistema operacional.  As informa√ß√µes sobre o codec usado atualmente est√£o presentes apenas no Android, come√ßando na vers√£o 8 e no macOS.  No entanto, mesmo nesses sistemas operacionais, apenas os codecs suportados pelo telefone / computador e fones de ouvido ser√£o exibidos. <br><br>  Como descobrir quais codecs o dispositivo suporta?  Captura e an√°lise de despejo de tr√°fego com op√ß√µes de negocia√ß√£o A2DP! <br>  Isso pode ser feito no Linux, macOS e Android.  No Linux, voc√™ pode usar o Wireshark ou o hcidump, no macOS, o Bluetooth Explorer pode ser usado e, no Android, o recurso Bluetooth HCI dump save dispon√≠vel nas ferramentas do desenvolvedor.  Voc√™ receber√° um despejo no formato btsnoop, que pode ser aberto no analisador Wireshark. <br>  <b>NOTA</b> : voc√™ precisar√° conectar-se do smartphone / computador aos fones de ouvido para capturar o dump correto, e n√£o vice-versa (n√£o importa o qu√£o bobo pare√ßa)!  Os fones de ouvido tamb√©m podem estabelecer uma conex√£o com o smartphone ou PC; nesse caso, solicitar√£o uma lista de codecs do telefone e n√£o divulgar√£o seu pr√≥prio conjunto de codecs.  Para garantir que voc√™ capture um dump correto, primeiro pare o dispositivo e, enquanto grava o dump, emparelhe o telefone com os fones de ouvido. <br><br>  Use o seguinte filtro de exibi√ß√£o para ocultar tr√°fego irrelevante: <br><pre><code class="plaintext hljs">btavdtp.signal_id</code> </pre> <br><br>  Como resultado, voc√™ deve ver algo semelhante: <br> <a href=""><img src="https://habrastorage.org/webt/fv/ku/xs/fvkuxsqcdwtxznupploqmldv9qm.png" alt="Wireshark com um dump carregado e um filtro para exibir o comando A2DP GetCapabilities"></a> <br><br>  Ao clicar no comando GetCapabilities, voc√™ pode obter informa√ß√µes detalhadas do codec. <br> <a href=""><img src="https://habrastorage.org/webt/7s/9a/xa/7s9axaeztya_dr2irptfi68ejxs.png" alt="Caracter√≠sticas de um dos itens selecionados. O ID do codec est√° vis√≠vel."></a> <br><br>  O Wireshark n√£o conhece todos os identificadores de codec; portanto, alguns codecs precisar√£o ser descriptografados manualmente, dependendo da tabela de identificadores abaixo: <br><pre> <code class="plaintext hljs">Mandatory: 0x00 - SBC Optional: 0x01 - MPEG-1,2 (aka MP3) 0x02 - MPEG-2,4 (aka AAC) 0x04 - ATRAC Vendor specific: 0xFF 0x004F 0x01 - aptX 0xFF 0x00D7 0x24 - aptX HD 0xFF 0x000A 0x02 - aptX Low Latency 0xFF 0x00D7 0x02 - aptX Low Latency 0xFF 0x000A 0x01 - FastStream 0xFF 0x012D 0xAA - LDAC 0xFF 0x0075 0x0102 - Samsung HD 0xFF 0x0075 0x0103 - Samsung Scalable Codec 0xFF 0x053A 0x484C - Savitech LHDC 0xFF 0x000A 0x0104 - The CSR True Wireless Stereo v3 Codec ID for AAC 0xFF 0x000A 0x0105 - The CSR True Wireless Stereo v3 Codec ID for MP3 0xFF 0x000A 0x0106 - The CSR True Wireless Stereo v3 Codec ID for aptX</code> </pre> <br>  Voc√™ pode descobrir se o seu dispositivo suporta EDR 3 Mbps usando o seguinte filtro: <br><pre> <code class="plaintext hljs">bthci_evt.code==0x0b</code> </pre> <br><img src="https://habrastorage.org/webt/jj/qy/ph/jjqyphb07cjqmqgrqirhqmueula.png" alt="imagem"><br><br>  Para n√£o analisar os despejos manualmente, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criei</a> um servi√ßo que analisar√° tudo automaticamente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">btcodecs.valdikss.org.ru</a> <br><br>  O software Windows <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bluetooth Tweaker</a> simples, mas √∫til, mostra codecs suportados e atualmente usados, al√©m de outras funcionalidades. <br>  Os usu√°rios do Linux tamb√©m podem usar o utilit√°rio avinfo do pacote BlueZ. <br><br><br><h1>  Compara√ß√£o de codec.  Qual codec √© melhor? </h1>  Cada codec tem suas vantagens e desvantagens. <br>  O aptX e o aptX HD usam perfis codificados que n√£o podem ser alterados sem modificar o codificador e o decodificador.  Nem o smartphone nem o fabricante do fone de ouvido podem alterar a taxa de bits ou os fatores de codifica√ß√£o do aptX.  A Qualcomm, propriet√°ria do codec, distribui o codificador de refer√™ncia como uma biblioteca para os licenciados.  Esses fatos s√£o o forte do aptX - voc√™ sabe com anteced√™ncia que qualidade de som obter√°, mas nada. <br><br>  A SBC, pelo contr√°rio, possui muitos par√¢metros ajust√°veis, taxa de bits din√¢mica (o codificador pode reduzir o par√¢metro bitpool se o r√°dio estiver congestionado) e n√£o possui perfis codificados, mas apenas a "qualidade m√©dia" e a "alta qualidade" recomendadas. que foram adicionados √† especifica√ß√£o A2DP em 2003. ‚ÄúAlta qualidade‚Äù n√£o √© mais t√£o alto para os padr√µes modernos, e a maioria das pilhas Bluetooth n√£o permite o uso de par√¢metros melhores do que no perfil ‚Äúalta qualidade‚Äù, embora n√£o haja t√©cnicos limita√ß√µes para isso. <br>  O Bluetooth SIG n√£o fornece o codificador de refer√™ncia SBC na forma de uma biblioteca e os fabricantes os implementam eles mesmos. <br>  Essas s√£o as fraquezas da SBC - nunca √© claro antecipadamente qual a qualidade do som que se espera de um dispositivo espec√≠fico.  O SBC pode produzir qualidade de som baixa e muito alta, mas o √∫ltimo √© inating√≠vel sem desativar ou contornar as limita√ß√µes artificiais das pilhas Bluetooth. <br><br>  A situa√ß√£o com o AAC √© amb√≠gua: por um lado, teoricamente, o codec deve produzir uma qualidade indistingu√≠vel do original, mas a pr√°tica, a julgar pelos testes do laborat√≥rio SoundGuys em diferentes dispositivos Android, n√£o √© confirmada.  Provavelmente, a falha est√° nos codificadores de √°udio de hardware de baixa qualidade incorporados em v√°rios chipsets de telefone.  Faz sentido usar o AAC apenas em dispositivos Apple;  com o Android, √© melhor ficar com o aptX / HD e LDAC. <br><br>  Dispositivos que oferecem suporte a codecs alternativos geralmente s√£o de qualidade superior, simplesmente porque n√£o faz sentido pagar royalties por dispositivos muito baratos e de baixa qualidade para usar esses codecs.  De acordo com meus testes, a SBC parece muito boa em hardware de alta qualidade. <br><br>  Eu criei um servi√ßo da web que codifica √°udio para SBC, aptX e aptX HD em tempo real, diretamente no seu navegador.  Voc√™ pode us√°-lo para testar esses codecs de √°udio sem realmente transmitir √°udio via Bluetooth, em qualquer fone de ouvido, alto-falante e sua m√∫sica favorita, al√©m de alterar os par√¢metros de codifica√ß√£o diretamente durante a reprodu√ß√£o de √°udio: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">btcodecs.valdikss.org.ru/sbc-encoder</a> <br>  O servi√ßo usa bibliotecas de codifica√ß√£o SBC do projeto BlueZ e libopenaptx do ffmpeg, que s√£o compiladas no WebAssembly e JavaScript do C via emscripten, para execu√ß√£o em um navegador.  Quem poderia sonhar com esse futuro! <br><br>  Aqui est√° o que parece: <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://files.catbox.moe/9e9q8f.mp4" type="video/mp4"></video></div></div></div><br>  Observe como o n√≠vel de ru√≠do muda ap√≥s 20 kHz para diferentes codecs.  Nenhuma frequ√™ncia acima de 20 kHz est√° presente no arquivo MP3 original. <br><br>  Tente alternar codecs e veja se voc√™ consegue ouvir a diferen√ßa entre o SBC 53 Joint Stereo original (o perfil padr√£o e o mais comum) e o aptX / aptX HD. <br><br><br><h2>  Mas eu posso ouvir a diferen√ßa entre codecs <i>em fones de ouvido</i> ! </h2>  As pessoas que n√£o ouvem a diferen√ßa entre codecs enquanto testam por meio de um servi√ßo da Web afirmam ouvir quando ouvem m√∫sica com fones de ouvido Bluetooth.  Infelizmente, isso n√£o √© uma piada ou um efeito placebo: a diferen√ßa √© realmente aud√≠vel, mas n√£o √© causada pela diferen√ßa <i>nos codecs</i> . <br><br>  A grande maioria dos chipsets de √°udio Bluetooth usados ‚Äã‚Äãno recebimento de dispositivos sem fio est√° equipada com um processador de sinal digital (DSP) que implementa um equalizador, <abbr title="Compressor + Expansor = Compander. Usado para melhorar a rela√ß√£o sinal / ru√≠do.">compander</abbr> , extensor est√©reo e outras coisas projetadas para melhorar (ou alterar) o som.  Os fabricantes de hardware Bluetooth podem configurar o DSP <i>para cada codec separadamente</i> e, ao alternar entre codecs, o ouvinte sentir√° que pode ouvir a diferen√ßa no desempenho dos codecs quando, na realidade, estiver ouvindo diferentes configura√ß√µes do DSP. <br><br> <a href=""><img src="https://habrastorage.org/webt/0j/75/rv/0j75rvrbutguojyxx9yu0s-uang.png" alt="Na foto: DECODER - Equalizador param√©trico - melhoria est√©reo - compander - p√≥s masteriza√ß√£o - ganho de sa√≠da"></a> <br>  <i><font color="#666666">Pipeline de processamento de √°udio Kalimba DSP nos SoCs da CSR / Qualcomm</font></i> <br><br><img src="https://habrastorage.org/webt/1h/_n/dd/1h_nddksnmupgey54su2xzblmgm.png" alt="Na figura: as caixas de sele√ß√£o ativam diferentes fun√ß√µes DSP separadamente para cada codec."><br>  <i><font color="#666666">Ativa√ß√£o de v√°rias fun√ß√µes DSP para cada codec e sa√≠da separadamente</font></i> <br><br>  Alguns dispositivos de segmento premium est√£o equipados com software que permite ajustar os par√¢metros DSP, mas a maioria dos fones de ouvido mais baratos n√£o possui esse recurso, e os usu√°rios n√£o podem desativar o p√≥s-processamento de som usando ferramentas padr√£o. <br><br><br><h2>  Recursos funcionais dos dispositivos </h2>  A vers√£o atual do padr√£o A2DP possui uma fun√ß√£o <b>absoluta de controle de volume</b> , permitindo controlar o ganho de sa√≠da com comandos especiais usando o protocolo AVRCP, em vez de reduzir programaticamente o volume do pr√≥prio fluxo de √°udio.  Se voc√™ alterar o volume dos fones de ouvido e a altera√ß√£o n√£o estiver sincronizada com o volume do telefone, isso significa que seus fones de ouvido ou telefone n√£o suportam esta fun√ß√£o.  Nesse caso, faz sentido ouvir sempre a m√∫sica no volume m√°ximo do telefone, ajustando o volume real com os bot√µes do fone de ouvido - a rela√ß√£o sinal / ru√≠do ser√° melhor e a qualidade do √°udio <i>dever√° ser</i> mais alta. <br>  Na realidade, existem situa√ß√µes tristes.  Pelo RealForce OverDrive, os fones de ouvido D1 usam um compander forte para SBC e um aumento no volume leva a um aumento no n√≠vel de sons baixos, e o volume dos sons altos n√£o muda (ocorre a compress√£o do sinal).  Por esse motivo, √© necess√°rio definir o volume no computador para cerca da metade; nesse caso, praticamente n√£o h√° efeito de compacta√ß√£o. <br>  De acordo com minhas observa√ß√µes, todos os fones de ouvido com codecs adicionais suportam a fun√ß√£o de controle de volume absoluto, que √© provavelmente um dos requisitos para a certifica√ß√£o de codecs. <br><br>  Alguns fones de ouvido suportam a <b>conex√£o de dois dispositivos ao mesmo tempo</b> .  Isso permite, por exemplo, ouvir m√∫sica de um computador e receber chamadas de um telefone.  No entanto, voc√™ deve estar ciente de que codecs alternativos est√£o desabilitados nesse modo e apenas o SBC √© usado. <br><br>  O recurso <b>Relat√≥rio de atraso do AVDTP 1.3</b> permite que os fones de ouvido relatem um atraso a um dispositivo de envio que realmente reproduz o som.  Isso ajuda a ajustar a sincroniza√ß√£o do √°udio com o v√≠deo enquanto assiste aos arquivos de v√≠deo: se ocorrer um congestionamento de r√°dio, o √°udio n√£o ficar√° atr√°s do v√≠deo, mas, pelo contr√°rio, o v√≠deo ser√° mais lento pelo player de v√≠deo at√© que o √°udio e o v√≠deo sejam sincronizado novamente. <br>  O recurso √© suportado por muitos fones de ouvido, Android 9+ e Linux com PulseAudio 12.0+.  N√£o estou ciente do suporte em outro sistema operacional. <br><br><br><h1>  Comunica√ß√£o duplex por Bluetooth.  Transmiss√£o de voz. </h1>  Conex√£o S√≠ncrona Orientada (SCO) e sua vers√£o aprimorada Conex√£o S√≠ncrona Avan√ßada Orientada (eSCO) s√£o os modos usados ‚Äã‚Äãpara a transmiss√£o de voz Bluetooth.  O modo permite transmitir som e voz estritamente em ordem, com uma velocidade sim√©trica de envio e recebimento, sem aguardar a confirma√ß√£o da transmiss√£o e reenvio de pacotes.  Isso reduz o atraso geral na transmiss√£o de √°udio pelo canal de r√°dio, mas imp√µe s√©rias restri√ß√µes √† quantidade de dados transmitidos por unidade de tempo e afeta adversamente a qualidade do √°udio. <br>  Quando esse modo √© usado, a voz do microfone e o √°udio s√£o transmitidos para os fones de ouvido com a mesma qualidade. <br>  A transfer√™ncia dos dados em si √© padronizada pelo perfil HSP, que tamb√©m descreve fun√ß√µes adicionais, como opera√ß√£o dos bot√µes de controle de volume, a retirada do fone e a desconex√£o. <br>  Infelizmente, a partir de 2019, a qualidade da transmiss√£o de voz via Bluetooth ainda √© baixa e n√£o est√° claro por que o Bluetooth SIG n√£o est√° fazendo nada a respeito. <br><br><h5>  CVSD </h5>  O codec b√°sico de transfer√™ncia de fala <abbr title="Modula√ß√£o delta de declive continuamente vari√°vel">CVSD</abbr> foi padronizado em 2002 e √© suportado por todos os dispositivos Bluetooth bidirecionais.  Ele fornece transmiss√£o de √°udio com uma frequ√™ncia de amostragem de 8 kHz, que corresponde √† qualidade da telefonia convencional com fio. <br><br>  <a href="">Um exemplo de grava√ß√£o neste codec</a> . <br><br><h5>  mSBC </h5>  O codec mSBC adicional foi padronizado em 2009 e, em 2010, havia chips que j√° o usavam para transmiss√£o de voz.  O mSBC √© amplamente suportado por v√°rios dispositivos. <br>  Este n√£o √© um codec independente, mas o SBC usual do padr√£o A2DP, com um perfil de codifica√ß√£o fixo: 16 kHz, mono, bitpool 26. <br><br>  <a href="">Um exemplo de grava√ß√£o neste codec</a> . <br><br>  N√£o √© brilhante, mas muito melhor que o CVSD, embora ainda seja desagrad√°vel us√°-lo para se comunicar via Internet, especialmente quando voc√™ usa fones de ouvido para se comunicar no jogo - o som do jogo tamb√©m ser√° transmitido a uma frequ√™ncia de amostragem de 16 kHz . <br><br><h6>  Faststream </h6>  A RSC decidiu desenvolver ainda mais a id√©ia de reutilizar a SBC.  Para contornar as limita√ß√µes do protocolo SCO e usar taxas de bits mais altas, o CSR seguiu o outro caminho - eles adicionaram suporte para √°udio SBC bidirecional ao padr√£o A2DP de transmiss√£o de √°udio unidirecional e o chamaram de "FastStream". <br><br>  O FastStream transmite som est√©reo de 44,1 ou 48 kHz para os alto-falantes com uma taxa de bits de 212 kbps.  16 kHz com uma taxa de bits de 72 kbps (um pouco melhor que a do mSBC) √© usado para transmitir √°udio de um microfone.  Tais par√¢metros s√£o muito mais adequados para a comunica√ß√£o em jogos online - o som do jogo e os companheiros de equipe ser√£o de alta qualidade. <br><br>  <a href="">Um exemplo de grava√ß√£o neste codec</a> (+ <a href="">√°udio do microfone, o mesmo que no mSBC</a> ). <br><br>  A empresa apresentou um hack interessante, mas devido ao fato de que ela contradiz o padr√£o A2DP, apenas alguns dos transmissores da empresa o suportam (que funcionam como uma placa de √°udio USB e n√£o como um dispositivo Bluetooth), mas n√£o receberam suporte na pilha Bluetooth.  O n√∫mero de fones de ouvido com suporte ao FastStream n√£o √© t√£o pequeno. <br><br>  No momento, o suporte ao FastStream est√° dispon√≠vel apenas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">na forma de um patch para Linux PulseAudio</a> da Pali Roh√°r, que n√£o est√° inclu√≠do na ramifica√ß√£o do programa principal. <br><br><h5>  Lat√™ncia baixa do aptX </h5>  Para a surpresa, o aptX Low Latency tamb√©m suporta √°udio bidirecional, implementando o mesmo princ√≠pio do FastStream. <br>  N√£o h√° como usar esse recurso do codec em nenhum lugar - n√£o h√° suporte para decodifica√ß√£o de baixa lat√™ncia em qualquer sistema operacional e em qualquer pilha Bluetooth que eu conhe√ßa. <br><br><br><h1>  Bluetooth 5, cl√°ssico e baixa energia </h1>  H√° muita confus√£o em torno das especifica√ß√µes e vers√µes do Bluetooth devido √† presen√ßa de dois padr√µes incompat√≠veis sob uma marca, ambos amplamente utilizados para prop√≥sitos diferentes. <br><br>  Existem dois protocolos Bluetooth diferentes e incompat√≠veis: Bluetooth Classic e Bluetooth Low Energy (LE, tamb√©m conhecido como Bluetooth Smart).  H√° tamb√©m um terceiro protocolo, o Bluetooth High Speed, mas n√£o √© comum e n√£o √© usado em eletrodom√©sticos. <br><br>  A partir do Bluetooth 4.0, as altera√ß√µes nas especifica√ß√µes se concentraram principalmente no Bluetooth Low Energy, enquanto a vers√£o Classic recebeu apenas pequenas melhorias. <br><br>  Lista de altera√ß√µes entre o Bluetooth 4.2 e o Bluetooth 5: <br><blockquote>  9 ALTERA√á√ïES DA v4.2 PARA 5.0 <br><br>  9.1 NOVOS RECURSOS <br><br>  V√°rios novos recursos foram introduzidos no Bluetooth Core Specification 5.0 Release.  As principais √°reas de melhoria s√£o: <br>  ‚Ä¢ M√°scara de disponibilidade de slot (SAM) <br>  ‚Ä¢ 2 ms / s PHY para LE <br>  ‚Ä¢ Longo alcance LE <br>  ‚Ä¢ Publicidade n√£o conect√°vel de ciclo de servi√ßo alto <br>  ‚Ä¢ Extens√µes de publicidade LE <br>  ‚Ä¢ Algoritmo de sele√ß√£o de canal LE # 2 <br>  9.1.1 Recursos adicionados no CSA5 - Integrado na v5.0 <br>  ‚Ä¢ Maior pot√™ncia de sa√≠da </blockquote>  <i><font color="#666666">Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.bluetooth.org/docman/handlers/DownloadDoc.ashx?doc_id=421043</a> (p√°gina 291)</font></i> <br><br>  Somente uma altera√ß√£o afetou a vers√£o Classic dentro da especifica√ß√£o do Bluetooth 5: suporte para a tecnologia Slot Availability Mask (SAM), projetada para melhorar o compartilhamento de radiofrequ√™ncia.  Todas as outras altera√ß√µes afetam apenas o Bluetooth LE (o mesmo se aplica √† maior pot√™ncia de sa√≠da). <br><br>  <b>Todos</b> os dispositivos de √°udio usam apenas o Bluetooth Classic.  Fones de ouvido e alto-falantes n√£o podem ser conectados via Bluetooth Low Energy.  N√£o h√° um padr√£o para transmitir √°udio usando LE.  O padr√£o A2DP, usado para transmitir √°udio de alta qualidade, funciona apenas atrav√©s do Bluetooth Classic, e n√£o h√° equivalente no LE. <br><br>  Resumindo: a compra de dispositivos de √°udio com Bluetooth 5 somente por causa da nova vers√£o do protocolo n√£o faz sentido.  O Bluetooth 4.0 / 4.1 / 4.2 no contexto da transmiss√£o de √°udio funcionar√° da mesma maneira. <br>  Se o an√∫ncio do novo fone de ouvido mencionar um raio dobrado e reduzir o consumo de energia gra√ßas ao Bluetooth 5, voc√™ deve saber que eles n√£o entendem a si mesmos ou o enganam.  N√£o √© de admirar que at√© os fabricantes de chips Bluetooth confundam a diferen√ßa nos dois padr√µes, e alguns chips Bluetooth 5 suportam a quinta vers√£o apenas para LE e usam o 4.2 para Classic. <br><br><h1>  Lat√™ncia de transmiss√£o de √°udio </h1>  A quantidade de lat√™ncia (atraso) no √°udio depende de muitos fatores: o tamanho do buffer na biblioteca de √°udio, na pilha Bluetooth e no pr√≥prio dispositivo de reprodu√ß√£o, o atraso algor√≠tmico do codec. <br><br>  O atraso de codecs simples, como SBC, aptX e aptX HD, √© bastante pequeno, cerca de 3-6 ms, o que pode ser negligenciado, mas codecs complexos, como AAC e LDAC, podem causar um atraso percept√≠vel.  O atraso algor√≠tmico AAC para 44,1 kHz √© 60 ms.  LDAC - cerca de 30 ms (por uma an√°lise aproximada do c√≥digo fonte. Posso estar errado, mas n√£o muito.) <br><br>  O atraso total √© altamente dependente do dispositivo de reprodu√ß√£o, seu chipset e buffer.  Durante os testes, obtive uma propaga√ß√£o de 150 a 250 ms em diferentes dispositivos (com o codec SBC).  Se assumirmos que os dispositivos com suporte para codecs adicionais aptX, AAC e LDAC usam componentes de melhor qualidade e um pequeno tamanho de buffer, obtemos os seguintes valores t√≠picos de lat√™ncia: <br><br>  SBC: 150-250 ms <br>  aptX: 130-180 ms <br>  AAC: 190-240 ms <br>  LDAC: 160-210 ms <br><br>  Deixe-me lembr√°-lo: o aptX Low Latency n√£o √© suportado em sistemas operacionais, e √© por isso que um atraso menor pode ser obtido apenas com um pacote de transmissor + receptor ou transmissor + fone de ouvido / alto-falante, e todos os dispositivos devem suportar esse codec. <br><br><br><h1>  Os problemas com certifica√ß√µes, logotipos e dispositivos </h1>  Como distinguir um dispositivo de √°udio de alta qualidade de artesanato barato?  Pela apar√™ncia, em primeiro lugar! <br><br>  Auscultadores, alto-falantes e receptores chineses baratos t√™m: <br><ol><li>  Nenhuma palavra "Bluetooth" na caixa e no dispositivo, geralmente substitu√≠da por "Sem fio" e "BT" </li><li>  Nenhum logotipo Bluetooth <img src="https://habrastorage.org/webt/qt/oi/0w/qtoi0wu5qzqnx7xzmgmqjdoijjk.png" alt="Logotipo Bluetooth" height="32" width="32">  na caixa ou dispositivo </li><li>  Nenhum LED azul piscando </li></ol><br>  A aus√™ncia desses elementos indica que o dispositivo n√£o foi certificado, o que significa que √© potencialmente problem√°tico ou de baixa qualidade.  Por exemplo, os fones de ouvido Bluedio n√£o s√£o certificados por Bluetooth e n√£o est√£o totalmente de acordo com a especifica√ß√£o A2DP.  Eles n√£o teriam passado no processo de certifica√ß√£o. <br><br>  Vejamos v√°rios dispositivos e caixas a partir deles: <br> <a href=""><img src="https://habrastorage.org/webt/e4/qa/rr/e4qarrce8fcjv8wwu46aiyib3oa.jpeg"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/ba/06/vb/ba06vbcolhpvuie2xlbgnvsycd0.jpeg"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/mw/1b/t1/mw1bt1hp0cz11xuilzyz0a70dca.jpeg"></a> <br><br>  Estes s√£o todos os dispositivos n√£o certificados.  As instru√ß√µes podem ter o logotipo e o nome "Bluetooth", mas o mais importante - esses elementos devem estar presentes no dispositivo ou na pr√≥pria caixa. <br><br>  Se seus fones de ouvido ou alto-falante disserem que "o bluetooth Ze est√° conectado com √™xito", isso tamb√©m n√£o diz respeito √† qualidade: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/TOFbsbGpIWk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><br><h1>  Conclus√£o </h1>  O Bluetooth pode substituir completamente os fones de ouvido e fones de ouvido com fio?  Provavelmente, mas ao custo da voz de baixa qualidade, maior lat√™ncia na transmiss√£o de som, o que pode ser irritante nos jogos, e uma infinidade de codecs propriet√°rios que exigem taxas de licen√ßa e aumentam o custo final de smartphones e fones de ouvido. <br><br>  O marketing de codecs alternativos √© muito forte: o aptX e o LDAC s√£o apresentados como uma substitui√ß√£o esperada da SBC ‚Äúdesatualizada e ruim‚Äù, que est√° longe de ser t√£o ruim quanto se pensa. <br><br>  Como se viu, as limita√ß√µes artificiais das pilhas Bluetooth na SBC podem ser contornadas, de modo que a SBC fique a par do aptX HD.  Tomei a iniciativa e fiz um patch para o firmware LineageOS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Modificando a pilha Bluetooth para melhorar o som em fones de ouvido sem codecs AAC, aptX e LDAC</a> <br><br>  Mais informa√ß√µes sobre codecs podem ser encontradas nos sites <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SoundGuys</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SoundExpert</a> . <br><br>  <b>B√¥nus:</b> <a href="">codificador de refer√™ncia SBC, informa√ß√µes de fluxo de bits A2DP e arquivos de teste</a> .  Este arquivo foi publicado anteriormente no site da Bluetooth publicamente, mas agora est√° dispon√≠vel apenas para aqueles que aderiram ao Bluetooth SIG. <br><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456182/">https://habr.com/ru/post/pt456182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456170/index.html">Como criar um aplicativo financeiro: 5 APIs para ajudar o desenvolvedor</a></li>
<li><a href="../pt456172/index.html">Parte 2: RocketChip: conectando RAM</a></li>
<li><a href="../pt456174/index.html">Como organizar um hackathon como estudante 101. Parte II</a></li>
<li><a href="../pt456178/index.html">Temas e estilos para Android sem m√°gica. E como cozinh√°-los com o SwitchCompat</a></li>
<li><a href="../pt456180/index.html">Como eu encontrei minha primeira vulnerabilidade?</a></li>
<li><a href="../pt456184/index.html">R√°dio definido por software - como funciona? Parte 8</a></li>
<li><a href="../pt456186/index.html">CS231n: Redes neurais convolucionais para reconhecimento de padr√µes</a></li>
<li><a href="../pt456192/index.html">Dos mon√≥litos aos microsservi√ßos: a experi√™ncia de M.Video-Eldorado e MegaFon</a></li>
<li><a href="../pt456194/index.html">Folha de dicas sobre estruturas de dados Go</a></li>
<li><a href="../pt456196/index.html">Equ√≠vocos b√°sicos sobre o SCRUM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>