<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüéì üßñüèæ üë®üèª‚Äçüåæ C√≥mo hacer amigos PLUTO y HDSDR üöú ‚è™ üïî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, impulsivamente compr√≥ un lindo transceptor SDR para ni√±os y j√≥venes: ADALM PLUTO. Para mi pesar, funciona con un mont√≥n de softw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo hacer amigos PLUTO y HDSDR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441676/"><img src="https://habrastorage.org/webt/dx/vl/5c/dxvl5cuxvc4qn7duv1lossoiz2c.jpeg"><br><br><p>  No hace mucho tiempo, impulsivamente compr√≥ un lindo transceptor SDR para ni√±os y j√≥venes: ADALM PLUTO.  Para mi pesar, funciona con un mont√≥n de software para LINUX, pero mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDSDR</a> favorito no lo admite.  Sin pensarlo dos veces, comenc√© a lidiar con este problema y esto es lo que surgi√≥: <br><a name="habracut"></a><br></p><p>  Analog Devices dirige su PLUTO a los estudiantes.  Todo el software para PLUTO est√° abierto y est√° disponible gratuitamente.  El sitio web de la compa√±√≠a tiene una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√°gina</a> donde puede encontrar casi toda la informaci√≥n necesaria sobre el funcionamiento de PLUTO.  La mayor parte del software est√° escrito bajo Linux y se recomienda a los estudiantes que usen GNU Radio, MATLAB, etc. <br><br></p><p>  Tengo un inter√©s de radio puramente amateur en PLUTO.  Un SDR con un rango de 70MHz a 6GHz (despu√©s de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">divulgaci√≥n</a> ) por solo 150 d√≥lares estadounidenses es un milagro.  ¬°Cu√°ntos experimentos se pueden hacer!  Vea cu√°nto est√° todo integrado all√≠: <br><br></p><p><img src="https://habrastorage.org/webt/ao/wg/mn/aowgmnuvpv1nj7kzloexjef5-fy.jpeg"><br><br></p><p>  Aparentemente, AD cree que los jamones mismos deber√≠an escribir controladores para programas populares, por lo que hasta hace poco, incluso SDR # no era compatible.  Pero SDR # no me conviene, porque necesito un buen soporte CAT en un programa para sincronizar la frecuencia con un transceptor.  Me gustar√≠a intentar usar HDSDR como receptor panor√°mico conect√°ndolo a la primera frecuencia intermedia del transceptor.  Por lo tanto, solo hay una salida: integrar HDSDR y PLUTO usted mismo. <br><br></p><p>  Al usar Google, descubr√≠ r√°pidamente que para resolver mi problema, necesito crear una biblioteca ExtIO_.dll especial en formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Winrad</a> .  Esta biblioteca sirve como un puente de software entre el HDSDR y el receptor SDR deseado.  Afortunadamente, la interfaz de la biblioteca est√° bien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentada</a> .  Adem√°s, hay bastantes implementaciones de biblioteca preparadas para varios receptores en github: RTL_SDR, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LimeSDR</a> , etc. Hab√≠a un lugar para ver c√≥mo escribir c√≥digo.  La biblioteca en s√≠ es bastante antigua, no hay nuevas tecnolog√≠as, puro C89, como escribieron hace 20 a√±os.  Al menos no necesita aprender un nuevo lenguaje de programaci√≥n, que ya inspir√≥ la esperanza de √©xito. <br><br></p><p>  Esencialmente, ExtIO_.dll debe implementarse con docenas de funciones que le permiten inicializar el equipo SDR, iniciar y detener la recepci√≥n de la se√±al, guardar y restaurar la configuraci√≥n especificada.  Para m√≠, el momento m√°s incomprensible fue el formato del intercambio de datos de transmisi√≥n entre el receptor y HDSDR, pero m√°s sobre eso a continuaci√≥n. <br><br></p><p>  Ahora ha surgido la pregunta de c√≥mo controlar PLUTO mediante programaci√≥n.  En realidad, hay varias opciones de control.  Encontr√© al menos dos: directamente con el chip a trav√©s de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libad9361.dll</a> o a trav√©s de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IIO</a> .  La √∫ltima opci√≥n me pareci√≥ m√°s simple y mejor descrita, as√≠ que me decid√≠ por ella.  En esta biblioteca, todos los ajustes del equipo est√°n disponibles en forma de alg√∫n tipo de estructura XML, a un elemento individual se accede mediante el nombre textual de la propiedad, lo cual es bastante conveniente.  Una descripci√≥n m√°s detallada de la biblioteca se puede encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  La gran ventaja de la biblioteca es que viene con utilidades de l√≠nea de comandos, con las cuales siempre puede cambiar r√°pidamente la configuraci√≥n deseada del receptor.  Por lo tanto, no necesita implementar todas las configuraciones SDR en la interfaz HDSDR, puede hacerlo con el m√≠nimo necesario.  Y cargar alg√∫n filtro FIR ex√≥tico se puede hacer desde la l√≠nea de comando, si alguna vez surge tal necesidad.  Flujos de datos en IIO: <br><br></p><p><img src="https://habrastorage.org/webt/ce/dz/bh/cedzbhmsy9z56vdehgcoaas5hmk.png"><br><br></p><p>  Aprender program√°ticamente c√≥mo controlar PLUTO desde HDSDR fue bastante r√°pido y f√°cil.  Fue un poco m√°s dif√≠cil obtener un resultado satisfactorio en la transmisi√≥n de datos, especialmente porque no ten√≠a experiencia previa con SDR.  Aqu√≠ debe comprender que los datos provienen del receptor SDR en forma de una secuencia de muestras I / Q / I / Q ... I / Q.  Cada muestra es un entero de 16 bits sin signo, de los cuales solo importan 12 bits de orden inferior.  Al mismo tiempo, HDSDR tiene una docena de opciones para recibir flujos de datos.  Cu√°l es m√°s conveniente y mejor no est√° del todo claro para m√≠.  Como resultado, me decid√≠ por la opci√≥n, que en ExtIO se llama exthwUSBdata16, es decir  en realidad, uno a uno, c√≥mo la biblioteca IIO da datos. <br>  El siguiente problema fue la transferencia de datos entre las memorias intermedias de recepci√≥n IIO y HDSDR.  Este √∫ltimo recibe datos en bloques que son m√∫ltiplos de 512 bytes, y IIO no puede generar datos en este formato.  Tuve que hacer un b√∫fer intermedio y transferir la corriente a trav√©s de √©l.  El c√≥digo de transmisi√≥n se muestra a continuaci√≥n. <br><br></p><p></p><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">DWORD WINAPI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeneratorThreadProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( __in LPVOID lpParameter )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> iqbuf[EXT_BLOCKLEN * <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span> nbytes_rx; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p_dat, *p_end; <span class="hljs-keyword"><span class="hljs-keyword">ptrdiff_t</span></span> p_inc; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iqcnt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pointer to sample in iqbuf while ( !gbExitThread ) { nbytes_rx = iio_buffer_refill(rxbuf); p_inc = iio_buffer_step(rxbuf); p_end = (char *)iio_buffer_end(rxbuf); for (p_dat = (char *)iio_buffer_first(rxbuf, rx0_i); p_dat &lt; p_end; p_dat += p_inc) { iqbuf[iqcnt++] = ((int16_t*)p_dat)[0]; iqbuf[iqcnt++] = ((int16_t*)p_dat)[1]; if (iqcnt == EXT_BLOCKLEN * 2) { // buffer full iqcnt = 0; pfnCallback(EXT_BLOCKLEN, 0, 0.0F, &amp;iqbuf[0]); } } } gbExitThread = false; gbThreadRunning = false; return 0; }</span></span></code> </pre> <br><p>  Utilizando el ciclo indicado, fue posible lograr una transferencia de flujo de 4 MS / s, por encima de este valor, los datos no tienen tiempo para transmitirse y la se√±al se recibe con tartamudeo, aunque parece que el hierro puede enviar 20 MS / sy a√∫n m√°s.  Se aument√≥ la prioridad del subproceso en el que el bucle gira a THREAD_PRIORITY_TIME_CRITICAL, aument√≥ el tama√±o de los b√∫feres.  Sin resultado  Adem√°s, cuando se aument√≥ el tamp√≥n a 1 MB, la recepci√≥n normal era imposible al caudal m√≠nimo.  M√°s aqu√≠ no significa mejor.  Si tiene ideas sobre c√≥mo aumentar la velocidad, comparta en los comentarios. <br><br></p><p>  Debo decir que 4 MS / s es suficiente para mis prop√≥sitos, la banda cubre m√°s que cualquier banda amateur de HF.  S√≠, y en las bandas de VHF y microondas suficientes para la mayor√≠a de las tareas.  Como resultado, la biblioteca est√° escrita, la ventana HDSDR con PLUTO activado para recepci√≥n se ve as√≠: <br><br></p><p><img src="https://habrastorage.org/webt/bz/sd/hb/bzsdhbg83dfjqv9iokbtcpwltbi.jpeg"><br><br></p><p>  Todo el c√≥digo de la biblioteca est√° disponible en github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Si√©ntase libre de usarlo para sus experimentos con ADALM PLUTO. <br><br></p><p>  73 de R2AJP </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441676/">https://habr.com/ru/post/441676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441650/index.html">Webinar Group-IB "Visi√≥n forense sobre la protecci√≥n de objetos CII en 2019"</a></li>
<li><a href="../441654/index.html">C√≥mo realizar una pasant√≠a en una gran empresa de TI</a></li>
<li><a href="../441660/index.html">STM32F103C8T6 como unidad flash con sistema de archivos FAT12</a></li>
<li><a href="../441664/index.html">Linus Torvalds no cree que los servidores en la arquitectura ARM reemplacen a x86. "Venta de un modelo de 64 bits - idiotez"</a></li>
<li><a href="../441668/index.html">STM32. Pr√°ctica de p√©rdida de peso o dieta para el controlador</a></li>
<li><a href="../441678/index.html">Juego de f√≠sica de tornados: c√≥mo se implementa la aerodin√°mica en Just Cause 4 (tr√°fico)</a></li>
<li><a href="../441680/index.html">Programa de conferencia Lua In Moscow 2019</a></li>
<li><a href="../441682/index.html">HyperX Fury 3D: SSD con un pedigr√≠ claro</a></li>
<li><a href="../441684/index.html">Predicciones: las nubes cambiar√°n 2019</a></li>
<li><a href="../441686/index.html">C√≥mo implementamos el cach√© en la base de datos Tarantool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>