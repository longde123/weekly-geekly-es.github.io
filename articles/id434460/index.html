<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🍳 ⏺️ 🤲🏻 Klien Dropbox Single Line saya untuk Linux 👆🏼 🦒 😥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin berbicara tentang upaya saya untuk membuat klien Dropbox single-line sederhana untuk Linux hanya menggunakan komponen open source gratis, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Klien Dropbox Single Line saya untuk Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434460/">  Saya ingin berbicara tentang upaya saya untuk membuat klien Dropbox single-line sederhana untuk Linux hanya menggunakan komponen open source gratis, termasuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rclone</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">entr</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">systemd</a> . <br><br><h2>  Konteks </h2><br>  Baru-baru ini, klien Dropbox yang dipatenkan untuk Linux telah menjatuhkan dukungan untuk semua sistem file Linux kecuali <i>ext4 yang tidak dienkripsi</i> .  Dan direktori home saya, sayangnya, dienkripsi. <br><br>  Pada awal Desember, klien berpemilik berhenti bekerja.  Dia logout dan menyarankan untuk memilih folder sinkronisasi lain di "sistem file yang didukung". <br><a name="habracut"></a><br>  Ngomong-ngomong, saya menjalankan Ubuntu Bionic pada Thinkpad t460s dua tahun. <br><br><h2>  Mengapa saya perlu Dropbox? </h2><br>  Saya aktif menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mode Org</a> : Saya membuat catatan dalam teks biasa, dan Dropbox terus menerus membuat salinan cadangan catatan saat mengetik. <br><br>  Jika Anda juga bekerja di bidang infrastruktur penyimpanan, use case saya sangat mirip dengan "replikasi asinkron tunggal-master", yaitu, dengan satu master.  Semua entri masuk ke Thinkpad saya, ini masternya.  Folder jarak jauh Dropbox hanyalah replika hanya-baca, yang kadang-kadang saya "ajukan permintaan baca-saja" atau gunakan sebagai cadangan untuk membuat wisaya baru ketika yang sekarang gagal atau dicuri. <br><br>  Namun, pengaturan replikasi ini menyelamatkan hidup saya beberapa kali.  Saya masih memiliki di depan mata saya bagaimana Thinkpad menolak untuk boot selama sesi tahun kedua.  Karena saya terus-menerus mereplikasi semua catatan di Dropbox, saya tidak kehilangan data apa pun dan dapat melihat catatan terbaru di Macbook ibuku.  Terima kasih bu! <br><br><h2>  Usaha yang gagal </h2><br>  Ketika klien Dropbox berhenti bekerja, saya fokus mencari klien jarak jauh multifungsi serupa lainnya untuk Linux.  Pada prinsipnya, saya tidak keberatan beralih ke layanan lain, seperti Google Drive atau AWS S3.  Beberapa opsi adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OverGrive</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">insync</a> . <br><br>  Namun, saya sampai pada kesimpulan bahwa solusi ini terlalu fungsional dan <b>tidak terlalu cocok untuk kasus saya</b> . <br><br>  Sebagai contoh, klien mencoba <i>menghubungkan sistem file jarak jauh ke PC Anda</i> .  Mereka berusaha sangat keras untuk abstrak sistem file jarak jauh, membuatnya terlihat seperti yang lokal.  Sebagai aturan, mereka menerapkan sinkronisasi dua arah, pemetaan otomatis tipe file jarak jauh ke tipe file Linux, dll. <br><br>  Saya tidak membutuhkan tingkat abstraksi ini.  Sesuatu yang sederhana diperlukan untuk terus-menerus mencadangkan catatan di cloud saat saya mengetik.  Selain itu, abstraksi membuat penyetelan dan debug sulit.  Belum lagi bahwa sebagian besar klien multi-fungsional adalah milik. <br><br><h2>  rclone </h2><br>  Saya <code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rclone</a></code> utilitas <code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rclone</a></code> , dan saya segera menyadari: inilah yang saya cari.  Program sederhana namun kuat.  Sangat mirip dengan alat <code>rsync</code> , hanya untuk penyimpanan cloud. <br><br>  Misalnya, <code>rclone</code> menangani toleransi kesalahan (pengecekan integritas), memiliki algoritma sinkronisasi yang efisien, dan sebagainya, sambil menyediakan <a href="">antarmuka CRUD sederhana</a> untuk berinteraksi dengan layanan penyimpanan cloud populer, termasuk Amazon S3, Google Drive, dan Dropbox. <br><br>  Perintah berikut menyinkronkan direktori <code>org</code> jauh dengan direktori lokal <code>/home/lpan/org</code> . <br><br><pre> <code class="bash hljs">ORG_DIR=/home/lpan/org REMOTE=dropbox rclone sync <span class="hljs-variable"><span class="hljs-variable">$ORG_DIR</span></span> <span class="hljs-variable"><span class="hljs-variable">$REMOTE</span></span>:org</code> </pre> <br><h2>  entr </h2><br>  Utilitas untuk menjalankan perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">entr</a> menggunakan API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">inotify</a> .  Pada dasarnya, ini menjalankan perintah ketika mengubah file tanpa <i>polling</i> sistem file. <br><br>  Satu kasus penggunaan umum adalah <i>membangun kembali sebuah proyek jika salah satu file sumber telah berubah</i> . <br><br>  <code>entr</code> mengambil daftar path absolut dari <code>stdin</code> dan kemudian mengeksekusi perintah yang dilewati sebagai argumen jika ada file yang diamati telah berubah. <br><br><pre> <code class="bash hljs">WORKDIR=/path/to/myproject find <span class="hljs-variable"><span class="hljs-variable">$WORKDIR</span></span> | grep <span class="hljs-string"><span class="hljs-string">"\.cpp$"</span></span> | entr make</code> </pre> <br><h2>  Skrip baris tunggal </h2><br>  Sekarang kita memiliki <code>rclone</code> dan <code>entr</code> .  Script yang dihasilkan sangat sederhana.  Biarkan saya mengingatkan Anda bahwa kasus penggunaan saya untuk Dropbox sangat sederhana: Anda hanya perlu terus-menerus mereplikasi file Org lokal ketika mereka berubah.  Oleh karena itu, Anda dapat menggunakan <code>entr</code> untuk memantau file dan <code>rclone</code> untuk "menyinkronkan" dengan penyimpanan jarak jauh. <br><br>  Script yang dihasilkan ( <code>/home/lpan/sync_dropbox.sh</code> ) adalah sebagai berikut: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ORG_DIR=/home/lpan/org REMOTE=dropbox find $ORG_DIR | entr -r rclone sync -v $ORG_DIR $REMOTE:org</span></span></code> </pre> <br><h2>  Jalankan daemon </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Daemon</a> hanyalah sebuah program komputer yang berjalan di latar belakang.  Kami menjadikan skrip kami sebagai proses latar belakang sehingga skrip ini secara konstan mensinkronkan perubahan file lokal di latar belakang dengan sistem file jarak jauh. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">systemd</a> menyediakan antarmuka untuk mengendalikan proses daemon. <br><br>  Saya membuat <i>Layanan Dropbox</i> di <code>~/.config/systemd/user/dropbox.service</code> . <br><br><pre> <code class="bash hljs">[Unit] Description=Dropbox Daemon [Service] ExecStart=/home/lpan/sync_dropbox.sh Restart=always [Install] WantedBy=default.target</code> </pre> <br>  Anda kemudian dapat mengontrol daemon menggunakan perintah berikut: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># reload the service file systemctl --user daemon-reload # start the daemon systemctl --user start dropbox.service # start the daemon on login systemctl --user enable dropbox.service # inspect the status of the daemon systemctl --user status dropbox.service</span></span></code> </pre> <br><h2>  Kesimpulan </h2><br>  Dalam artikel ini, kami membahas cara menerapkan filosofi UNIX dan menggunakan seperangkat alat sumber terbuka gratis untuk menggantikan klien Dropbox yang eksklusif dan lama.  Kami menggunakan <code>rclone</code> dan <code>entr</code> .  Saya juga menunjukkan bagaimana membuat proses ini menjadi daemon dan mengelolanya dengan <code>systemd</code> . <br><br>  Saya ingin mengingatkan Anda bahwa ide utamanya adalah kesederhanaan.  Kami menginginkan solusi sederhana untuk tugas-tugas sederhana.  Kasing kasus saya untuk Dropbox sangat sederhana.  Dan itu sebabnya skrip satu baris lebih baik daripada menggunakan klien cloud yang terlalu fungsional dan eksklusif. <br><br>  Terima kasih banyak sudah membaca!  Saya sangat berharap Anda menikmati posting ini.  Jika Anda tahu cara terbaik untuk melakukan hal yang sama atau memperluas skrip untuk kasus penggunaan lain - beri tahu saya di komentar! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434460/">https://habr.com/ru/post/id434460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434446/index.html">Kenapa saya tidak suka pergi</a></li>
<li><a href="../id434448/index.html">Kami membahas tes A / B dengan tes UI. Bagaimana tidak bingung dalam kode asli</a></li>
<li><a href="../id434450/index.html">TeamLead Conf: “MBA digital bukan kawan”</a></li>
<li><a href="../id434452/index.html">AXIS vs IDIS - pertempuran produsen pengawasan video</a></li>
<li><a href="../id434456/index.html">Di mana kita mendapatkan botolnya?</a></li>
<li><a href="../id434466/index.html">Apa yang menentukan biaya penerbangan dalam praktik</a></li>
<li><a href="../id434468/index.html">Simpan Konten vCenter Content Library</a></li>
<li><a href="../id434470/index.html">Pengontrol bawang. Kami memecah layar menjadi beberapa bagian</a></li>
<li><a href="../id434474/index.html">Kucing hijau tentang konten ruang</a></li>
<li><a href="../id434476/index.html">ChatOps di GitLab akan tersedia untuk semua orang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>