<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•µğŸ» ğŸ¤¾ğŸ» ğŸ§—ğŸ¿ è¿›å…¥èˆªç©ºç½‘ç¬¬2é›†ï¼šæ— äººæœº ğŸ‘©ğŸ¾â€ğŸš€ ğŸ”“ ğŸ‘ŒğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å‘ç©ºä¸­å‘å°„è‡ªåŠ¨è™šæ‹Ÿæ— äººæœºçš„è¿‡ç¨‹ã€‚ åœ¨è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå³ä½¿æ˜¯å­¦ç«¥ä¹Ÿè®¾æ³•æŒ‰ç…§æ­¤è¯´æ˜å‘å°„æ— äººæœºã€‚ é—®é¢˜å‡ºç°äº†ï¼šä¸‹ä¸€æ­¥å‘¢ï¼Ÿ å¥½å§ï¼Œæ— äººé©¾é©¶é£æœºï¼Œé£™å‡ã€‚ æ­¤å¤–ï¼Œè™šæ‹Ÿ-åœ¨ç©å…·å’Œæ¨¡æ‹Ÿå™¨ä¸­ï¼Œå¹¶ä¸”ç»˜åˆ¶å¾—æ›´ç²¾ç¾ã€‚ 


 ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å»ºè®®åˆ›å»ºä¸€ç§èƒ½å¤Ÿçœ‹åˆ°æ‚¨çš„ç›®æ ‡å¹¶æˆåŠŸå®ç°ç›®æ ‡çš„å¯»çš„æ— äººæœºã€‚ ä½¿ç”¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è¿›å…¥èˆªç©ºç½‘ç¬¬2é›†ï¼šæ— äººæœº</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461887/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/ms/8w/kims8wf-dzlaryqvo7takz0e3zu.jpeg"></div><br><p> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œ</a>æˆ‘ä»¬ç ”ç©¶äº†å‘ç©ºä¸­å‘å°„è‡ªåŠ¨è™šæ‹Ÿæ— äººæœºçš„è¿‡ç¨‹ã€‚ åœ¨è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå³ä½¿æ˜¯å­¦ç«¥ä¹Ÿè®¾æ³•æŒ‰ç…§æ­¤è¯´æ˜å‘å°„æ— äººæœºã€‚ é—®é¢˜å‡ºç°äº†ï¼šä¸‹ä¸€æ­¥å‘¢ï¼Ÿ å¥½å§ï¼Œæ— äººé©¾é©¶é£æœºï¼Œé£™å‡ã€‚ æ­¤å¤–ï¼Œè™šæ‹Ÿ-åœ¨ç©å…·å’Œæ¨¡æ‹Ÿå™¨ä¸­ï¼Œå¹¶ä¸”ç»˜åˆ¶å¾—æ›´ç²¾ç¾ã€‚ </p><br><p> ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å»ºè®®åˆ›å»ºä¸€ç§èƒ½å¤Ÿçœ‹åˆ°æ‚¨çš„ç›®æ ‡å¹¶æˆåŠŸå®ç°ç›®æ ‡çš„å¯»çš„æ— äººæœºã€‚ ä½¿ç”¨å½©è‰²æ°”çƒä½œä¸ºç›®æ ‡æ˜¯æœ€ç®€å•çš„ã€‚ </p><br><p> è¿™é¡¹ä»»åŠ¡ï¼ˆç”¨æ— äººé©¾é©¶æ— äººæœºå‡»çƒï¼‰æ˜¯æœ€è¿‘ç”±å…¨ä¿„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Robocross-2019</a>çš„Aeronetéƒ¨é—¨çš„å›¢é˜Ÿæ‰§è¡Œçš„ã€‚ æˆ‘ä»¬å—åˆ°äº†ç¾å›½ä¹é˜Ÿé¦–å¼ ä¸“è¾‘ä¸­çš„æ­Œæ›²â€œ Seek and destroyâ€çš„å¯å‘ï¼Œè¯¥ä¸“è¾‘åœ¨æˆ‘åŠ¨è¡çš„é’å¹´æ—¶æœŸéå¸¸å—æ¬¢è¿ã€‚ <br> åœ¨æ¥ä¸‹æ¥çš„ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•æ•™è‡ªä¸»æ— äººæœºéµå¾ªä¸Šè¿°æ­Œæ›²çš„ç®€å•æŒ‡å¯¼ã€‚ </p><a name="habracut"></a><br><p> å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š </p><br><ol><li> æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºæ§åˆ¶çš„é£è¡Œæ— äººæœº </li><li> ç›®æ ‡è¯†åˆ«å’ŒæŒ‡å¯¼ç³»ç»Ÿ </li><li> å°†å‰ä¸¤ç‚¹ç»“åˆåœ¨ä¸€èµ·-ç§ï¼Œæ‚¨å¯ä»¥ç«äº‰ï¼Œå®ƒçš„æ— äººæœºå°†é£è¡Œå¾—æ›´å¿«ï¼Œçƒæ›´å¤šã€‚ </li></ol><br><p> æ¥ä¸‹æ¥ï¼Œé¦–å…ˆè¦åšçš„æ˜¯ã€‚ </p><br><h2 id="jmavsim-upravlyaemyy-s-klaviatury">  jMAVSimé”®ç›˜æ§åˆ¶ </h2><br><p> åƒä¸Šé¢çš„å›¾ç‰‡ä¸€æ ·ï¼Œæƒ³è±¡ä¸€ä¸‹æ— äººé©¾é©¶é£æœºçœ‹åˆ°ä¸€ä¸ªçƒã€‚ æ— äººæœºçš„æ‘„åƒå¤´æ­£å‰æ–¹ã€‚ </p><br><p> è¦åœ¨çƒä¸Šé£è¡Œï¼Œæˆ‘ä»¬çš„æ— äººæœºå¿…é¡»èƒ½å¤Ÿï¼šå‘å‰/å‘åç§»åŠ¨ï¼Œå‘å·¦å’Œå‘å³æ—‹è½¬ï¼Œä¸Šä¸‹é£è¡Œã€‚ çƒä¸ä»…ä¼šç”±äºé˜µé£è€Œåœ¨ç›¸æœºé•œå¤´ä¸­ç§»åŠ¨ï¼Œè€Œä¸”è¿˜ä¼šå› ä¸ºæ— äººæœºæ²¿ä¾§å€¾å’Œä¿¯ä»°æ–¹å‘çš„å€¾æ–œè€Œç§»åŠ¨ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¿½ç•¥äº†è¿™äº›å€¾æ–œã€‚ </p><br><p>æˆ‘ä»¬å°†é€šè¿‡é€šè¿‡mavroså‘ä¸»é¢˜<code>/mavros/setpoint_velocity/cmd_vel_unstamped</code>å‘é€æ¶ˆæ¯æ¥æ§åˆ¶æ— äººæœºçš„é€Ÿåº¦ã€‚ </p><br><p> ä¸ºäº†ä»é”®ç›˜ä¸Šæ“çºµæ— äººæœºï¼Œæˆ‘ä»¬ä½¿ç”¨cursesæ¨¡å—ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”¨ä¿„è¯­æè¿°</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”¨è‹±è¯­</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æè¿°</a> ï¼‰ã€‚ </p><br><p> è¯¥ç®—æ³•å¾ˆç®€å•ï¼šæ‰€éœ€é€Ÿåº¦çš„å½“å‰å€¼å­˜å‚¨åœ¨ç±»å‹ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">geometry_msgs.msg.Twist</a>çš„setvelå˜é‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸­</a> ã€‚ é€šè¿‡æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ /å‡å°‘æ‰€éœ€çš„é€Ÿåº¦åˆ†é‡ã€‚ é€šè¿‡è®¡æ—¶å™¨æ¯ç§’20æ¬¡ï¼Œæˆ‘ä»¬å°†é€Ÿåº¦å‘å¸ƒåˆ°æŒ‡å®šçš„ä¸»é¢˜ä¸­ã€‚ </p><br><p> å¯¹äºå‰è¿›é€Ÿåº¦ï¼ˆç›¸å¯¹äºæ— äººæœºï¼‰ï¼Œéœ€è¦è¿›è¡Œè¯´æ˜ã€‚ äº‹å®æ˜¯ï¼Œå¿…é¡»åœ¨æ— äººæœºé£è¡Œçš„â€œä¸–ç•Œâ€çš„æœ¬åœ°åæ ‡ç³»ä¸­è®¾ç½®é£è¡Œé€Ÿåº¦ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨æ­¤åæ ‡ç³»ä¸­è·Ÿè¸ªæ— äººæœºçš„å½“å‰ä½ç½®ï¼ˆå§¿åŠ¿ï¼‰ã€‚ æ— äººæœºçš„Xè½´ç›¸å¯¹äºâ€œä¸–ç•Œâ€çš„Xè½´æ—‹è½¬ä¸€å®šè§’åº¦åèˆªã€‚  Mavrosåœ¨ä¸»é¢˜<code>/mavros/local_position/pose</code>ä¸­çš„â€œä¸–ç•Œâ€åæ ‡ä¸­å‘å¸ƒæ— äººæœºçš„å½“å‰ä½ç½®ã€‚ ä¸ºäº†è·å¾—å¹¶åœ¨ä¸–ç•Œåæ ‡ä¸­å‘å¸ƒæ‰€éœ€çš„æ— äººæœºé€Ÿåº¦è€Œä»è¯¥ä½ç½®è·å¾—äº†åèˆªè§’ï¼Œæˆ‘ä»¬åˆ†åˆ«å°†æ‰€éœ€çš„å‰è¿›é€Ÿåº¦setvel_forwardä¹˜ä»¥ä¸–ç•ŒXè½´çš„cosï¼ˆåèˆªï¼‰å’Œä¸–ç•ŒYè½´çš„sinï¼ˆåèˆªï¼‰ã€‚ </p><br><p><img src="https://habrastorage.org/webt/iy/lu/te/iylutettoxhh8hauaduxxbkeawo.png"></p><br><div class="spoiler">  <b class="spoiler_title">ç¨‹åºå…¨æ–‡ï¼š</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # coding=UTF-8 import rospy import mavros import mavros.command as mc from mavros_msgs.msg import State from geometry_msgs.msg import PoseStamped, Twist, Quaternion from mavros_msgs.srv import CommandBool from mavros_msgs.srv import SetMode import tf.transformations as t import math current_state=State() current_pose = PoseStamped() current_vel = Twist() def localpose_callback(data): global current_pose current_pose = data def publish_setvel(event): global current_pose, setvel_pub, setvel, setvel_forward q=current_pose.pose.orientation.x, current_pose.pose.orientation.y,current_pose.pose.orientation.z,current_pose.pose.orientation.w roll, pitch, yaw = t.euler_from_quaternion(q) setvel.linear.x = setvel_forward * math.cos(yaw) setvel.linear.y = setvel_forward * math.sin(yaw) setvel_pub.publish(setvel) def main(): global current_pose, setvel, setvel_pub, setvel_forward rospy.init_node("offbrd",anonymous=True) rate=rospy.Rate(10) pose_sub=rospy.Subscriber("/mavros/local_position/pose",PoseStamped,localpose_callback) setvel_pub=rospy.Publisher("/mavros/setpoint_velocity/cmd_vel_unstamped",Twist,queue_size=1) arming_s=rospy.ServiceProxy("/mavros/cmd/arming",CommandBool) set_mode=rospy.ServiceProxy("/mavros/set_mode",SetMode) setvel=Twist() setvel_forward = 0 arming_s(True) set_mode(0,"AUTO.TAKEOFF") print 'Taking off.....\r' rospy.sleep(5) # keyboard manipulation import curses stdscr = curses.initscr() curses.noecho() stdscr.nodelay(1) stdscr.keypad(1) for i in range (0,10): setvel_pub.publish(setvel) rate.sleep() set_mode(0,"OFFBOARD") setvel_timer = rospy.Timer(rospy.Duration(0.05), publish_setvel) while (rospy.is_shutdown()==False): rate.sleep() # keyboard hcommands handling c = stdscr.getch() if c == ord('q'): break # Exit the while() elif c == ord('u'): setvel.linear.z += 0.25 elif c == ord('d'): setvel.linear.z -= 0.25 elif c == curses.KEY_LEFT: setvel.angular.z += 0.25 elif c == curses.KEY_RIGHT: setvel.angular.z -= 0.25 elif c == curses.KEY_UP: setvel_forward += 0.25 elif c == curses.KEY_DOWN: setvel_forward -= 0.25 elif c == ord('s'): setvel_forward=setvel.linear.z=setvel.angular.z=0 if c!=curses.ERR: print setvel,'\r' curses.endwin() set_mode(0,"AUTO.LAND") print 'Landing.......\r' if __name__=="__main__": main()</span></span></code> </pre> </div></div><br><p> è¦è¿è¡Œç¨‹åºä»¥æ‰§è¡Œç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦è¿è¡ŒjMAVSimï¼Œå¹¶ä½¿ç”¨roslaunch mavroså‘½ä»¤å°†mavrosè¿æ¥åˆ°å®ƒï¼ˆå¦‚æœæ²¡æœ‰è‡ªåŠ¨å¯åŠ¨ï¼Œåˆ™åœ¨è¿è¡Œroscoreä¹‹åï¼‰ï¼š </p><br><pre> <code class="bash hljs">roslaunch mavros mavros_sitl.launch fcu_url:=<span class="hljs-string"><span class="hljs-string">"udp://@192.168.7.14:14580"</span></span></code> </pre> <br><p> ç¡®ä¿æˆ‘ä»¬ä½¿ç”¨rostopic echo / mavros / stateè¿æ¥ã€‚ è¿æ¥å­—æ®µå¿…é¡»ä¸º= Trueã€‚ </p><br><p> ä¹‹åï¼Œå°†ç¨‹åºä»£ç ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨<code>python fly_mavsim.py</code>è¿è¡Œå®ƒã€‚ è™šæ‹Ÿç›´å‡æœºåº”å‡è‡³å¤§çº¦2ç±³çš„é«˜åº¦ï¼ˆåœ¨QGroundControlçš„MIS_TAKEOFF_ALTå‚æ•°ä¸­è®¾ç½®äº†èµ·é£é«˜åº¦ï¼‰å¹¶å†»ç»“ã€‚ ä½¿ç”¨é”®ç›˜ä¸Šçš„æŒ‰é’®ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ§åˆ¶ï¼šå·¦å³ç®­å¤´-æ—‹è½¬ï¼Œä¸Šä¸‹ç®­å¤´-å‘å‰/å‘åç§»åŠ¨ï¼Œu-å‘ä¸Šé£ï¼ˆå‘ä¸Šï¼‰ï¼Œd-å‘ä¸‹é£ï¼ˆå‘ä¸‹ï¼‰ï¼Œs-æŒ‚åœ¨é€‚å½“ä½ç½®ï¼ˆåœæ­¢ï¼Œæ‰€æœ‰é€Ÿåº¦= 0ï¼‰ï¼Œq-é€€å‡ºç¨‹åºï¼ˆQUITï¼‰å¹¶é™è½ç›´å‡æœºã€‚ </p><br><p> æ‚¨å¯ä»¥åœ¨è™šæ‹Ÿä¸–ç•Œä¸­é£è¡Œï¼Œæ£€æŸ¥ç†æƒ³çš„è™šæ‹Ÿæ— äººæœºåœ¨é£è¡Œä¸­çš„è¡Œä¸ºã€‚ </p><br><p><img src="https://habrastorage.org/webt/x_/yn/2i/x_yn2ic0ejcwxe9dhohhkycwyg8.png" alt="é£è¡Œä¸­çš„æ— äººæœº"></p><br><p> æ€»ç»“äº†å‡»é”®é€Ÿåº¦çš„å˜åŒ–ï¼Œæ‚¨å¯ä»¥ä½¿æ— äººæœºå›´ç»•ç‰¹å®šç‚¹ç»•åœˆæ—‹è½¬ï¼Œæˆèºæ—‹å½¢é£è¡Œï¼Œå¹¶æ¨¡æ‹Ÿç›®æ ‡ç³»ç»Ÿã€‚ </p><br><p> ç„¶åï¼Œä¹è¶£å°±å¼€å§‹äº†ï¼šä»çœŸç©ºä¸­çš„çƒå½¢æ— äººé©¾é©¶é£æœºï¼Œæˆ‘ä»¬è¿›å…¥äº†ç°å®ä¸–ç•Œã€‚ </p><br><h2 id="upravlyaemyy-s-klaviatury-realnyy-dron"> é”®ç›˜æ§åˆ¶çš„çœŸå®æ— äººæœº </h2><br><p> ç½‘ç»œä¸Šæœ‰è®¸å¤šæœ‰å…³åœ¨PX4å †æ ˆä¸Šç»„è£…å’Œé…ç½®ç›´å‡é£æœºçš„è¯´æ˜ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼€å‘äººå‘˜æ–‡æ¡£ä¸­</a>å¯¹è¯¥è¿‡ç¨‹è¿›è¡Œäº†è¯¦ç»†æè¿°ã€‚ </p><br><p> ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ç°æˆçš„æ— äººæœºï¼Œå› æ­¤åœ¨ç³»ç»Ÿçš„ç»„è£…å’Œåˆæ­¥é…ç½®è¿‡ç¨‹ä¸­ï¼Œè¿™ä½¿æˆ‘å…äºå¤šæ¬¡è¹²åã€‚ </p><br><p> ä½œä¸ºè½¦è½½è®¡ç®—æœºï¼Œæˆ‘ä»¬ä½¿ç”¨å®‰è£…äº†Raspbian + ROS Kineticçš„Raspberry PI 3 Model B +ã€‚ æ ¹æ®è®¡åˆ’ï¼ŒRaspberryé€šè¿‡uartè¿æ¥åˆ°Pixraceré£è¡Œæ§åˆ¶å™¨ï¼š </p><br><p><img src="https://habrastorage.org/webt/sc/37/8o/sc378o12gepjgab3fu3_j6htw-k.png" alt="Pixracer +æ ‘è“æ´¾PI"></p><br><p>  GPSæ¨¡å—å·²è¿æ¥è‡³é£è¡Œæ§åˆ¶å™¨çš„GPSç«¯å£ã€‚ æˆ‘ä½¿ç”¨çš„æ˜¯Radiolinkçš„TS100æ¨¡å—ï¼Œè´¨é‡å¾ˆå¥½ï¼Œæˆæœ¬ä¹Ÿä¸é«˜ã€‚ </p><br><p> å¯ä»¥æŒ‰ç…§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯´æ˜</a>è‡ªè¡Œå®‰è£…ROS Kineticã€‚ åœ¨Raspberryä¸Šï¼Œæ‚¨åº”è¯¥é€šè¿‡Wifiå’Œsshé…ç½®è®¿é—®æƒé™ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€æ¡è¯´æ˜</a> ï¼‰ã€‚ </p><br><p> æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œç›´å‡æœºå¿«è½¦â€å…¬å¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºRaspberry</a>æä¾›çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç°æˆå›¾åƒ</a> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥ç¦ç”¨é»˜è®¤çš„èªæ˜è½¯ä»¶åŒ…ï¼Œæˆ‘ä»¬ä¸éœ€è¦ï¼š </p><br><pre> <code class="bash hljs">sudo systemctl stop clever sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> clever</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>æè¿°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†</a>å¦ä¸€ä¸ªå¸¦æœ‰ROSå’ŒOpenCVçš„Raspberryæ˜ åƒï¼Œæˆ‘åœ¨å·¥ä½œä¸­æ²¡æœ‰å°è¯•è¿‡ï¼Œä½†æ˜¯ä½¿ç”¨çš„å·¥å…·æ˜¯ç›¸ä¼¼çš„ã€‚ </p><br><p> æ‰“å¼€æ— äººæœºå¹¶é€šè¿‡sshè¿æ¥åˆ°Raspberryä¹‹åï¼Œæˆ‘ä»¬å¯åŠ¨mavroså¹¶æ£€æŸ¥ä¸é£è¡Œæ§åˆ¶å™¨çš„è¿æ¥ï¼š </p><br><pre> <code class="bash hljs">roslaunch mavros px4.launch fcu_url:=<span class="hljs-string"><span class="hljs-string">'/dev/ttyAMA0:921600'</span></span> gcs_url:=<span class="hljs-string"><span class="hljs-string">'tcp-l://0.0.0.0:5760'</span></span> rostopic <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> /mavros/state</code> </pre> <br><p> å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæˆ‘ä»¬å°†æ¯ç§’æ”¶åˆ°ä¸€åˆ™å…³äºé£è¡Œæ§åˆ¶å™¨çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå…¶å­—æ®µä¸ºConnected = Trueã€‚ </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cv/6o/k4/cv6ok4c4_royj-xq31ayojmrusa.png"></div><br><p> éœ€è¦<code>gcs_url</code>è°ƒç”¨ä¸­çš„<code>gcs_url</code>å‚æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥é€šè¿‡TCPæ¡¥æ¥å™¨é€šè¿‡WiFiå°†QGroundControlè¿æ¥åˆ°æ— äººæœºçš„é£è¡Œæ§åˆ¶å™¨ã€‚ è¿æ¥å‚æ•°åœ¨QGroundControlä¸­è®¾ç½®ï¼š </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j0/sh/6i/j0sh6idslfmvbayzqv_xvztarpk.png"></div><br><p> ä¸ºå‡†å¤‡æ— äººé©¾é©¶é£æœºçš„æ— äººæœºï¼Œæˆ‘éµå¾ªä¸€äº›ç®€å•çš„æ­¥éª¤ï¼š </p><br><p>  <strong>1.</strong>ç¡®ä¿æ— äººæœºåœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹é£è¡Œè‰¯å¥½ã€‚ ä¸ºæ­¤ï¼Œå¿…é¡»é€‰æ‹©æ­£ç¡®çš„å‚æ•°è®¾ç½®å¹¶æ ¡å‡†æ‰€æœ‰ä¼ æ„Ÿå™¨ã€‚ æ­¤æ—¶ï¼Œä½¿ç”¨å¸‚å”®çš„æ— äººæœºä½¿æˆ‘å…äºéº»çƒ¦ã€‚ æˆ‘ä½¿ç”¨äº†å¯ç”¨äº†GPSå’Œæ°”å‹è®¡çš„LPEä¼°ç®—å™¨ï¼š </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q1/8i/fh/q18ifhk84imc-efc2f-pwrz7_e0.png"></div><br><p>  <strong>2.</strong>å¦‚æœç³»ç»Ÿæ˜¯åœ¨æ–°çš„åœ°æ–¹æˆ–ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œåˆ™åº”ç­‰å¾…GPSæ¨¡å—â€œçƒ­èº«â€ã€‚  GPSåœ¨è¡—ä¸Šè¿›è¡Œå¸¸è§„å·¥ä½œæ—¶ï¼Œé€šå¸¸ä¼šæ•è·16åˆ°22é¢—å«æ˜Ÿã€‚ </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kd/yb/xn/kdybxnsj-bg5ocyzcpd16gbsela.png"></div><br><p>  <strong>3.</strong>åœ¨é£å¾€æ–°åœ°ç‚¹ä¹‹å‰ï¼Œå¦‚æœæ— äººæœºæ²¡æœ‰æŠ“ä½ä¸€ç‚¹ï¼Œåˆ™åº”é‡æ–°æ ¡å‡†æŒ‡å—é’ˆï¼š </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rr/2d/xl/rr2dxlcgadat_fla3dwb-zecp1g.png"></div><br><p> æ‚¨åº”è¯¥ä½¿ç”¨<u><strong>å¤–éƒ¨</strong></u>æŒ‡å—é’ˆï¼Œå¹¶ç¡®ä¿åœ¨è®¾ç½®ä¸­è®¾ç½®äº†æ­£ç¡®çš„æ–¹å‘ï¼š </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i4/4l/6p/i44l6p5dhnwydm39j8jv-swfxwc.png"></div><br><p> å¦‚æœæ‰€æœ‰è®¾ç½®å‡æ­£ç¡®è®¾ç½®ï¼Œåˆ™æ— äººæœºå¿…é¡»æ”¾å¿ƒåœ°å°†å…¶ä¿æŒåœ¨â€œä¿æŒâ€æ¨¡å¼ï¼Œå¹¶åœ¨â€œä½ç½®â€æ¨¡å¼ä¸‹ç¨³å®šé£è¡Œã€‚ </p><br><p> åœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹æˆåŠŸè¯•é£ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥fly_jmavsim.pyç¨‹åºå¦‚ä½•åœ¨çœŸæ­£çš„æ— äººæœºä¸Šè¿è¡Œï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">video</a> ã€‚ </p><br><p> çœŸæ­£çš„æ— äººæœºä¸èƒ½åƒè™šæ‹Ÿæ— äººæœºé‚£æ ·å®Œç¾é£è¡Œ-ä½†å®ƒè¿˜éœ€è¦æœä»é”®ç›˜ä¸Šçš„å‘½ä»¤-ä»¥æ­£ç¡®çš„æ–¹å‘é£è¡Œå¹¶åœæ­¢æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ </p><br><p> å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—æœºè§†è§‰ä»£æ›¿é”®ç›˜æ§åˆ¶ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®ºæœ‰å…³è®¾ç½®çš„ä¿¡æ¯ã€‚ æœ€åˆçš„çŒçƒæµ‹è¯•çœ‹èµ·æ¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åƒè¿™æ ·</a> ã€‚ </p><br><p> æˆ‘ä»¬çš„é£è¡Œæ§åˆ¶å™¨+ç¨‹åºä»£ç çš„è®¾ç½®å‘å¸ƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨githubä¸Š</a> ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461887/">https://habr.com/ru/post/zh-CN461887/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461875/index.html">5çº³ç±³å’Œ3çº³ç±³</a></li>
<li><a href="../zh-CN461877/index.html">Java vs Kotlin for Androidï¼šå¼€å‘äººå‘˜æ„è§</a></li>
<li><a href="../zh-CN461879/index.html">ã€Š Linuxåœ¨è¡ŒåŠ¨ã€‹ä¸€ä¹¦</a></li>
<li><a href="../zh-CN461881/index.html">Node.jsè®°å½•æŒ‡å—</a></li>
<li><a href="../zh-CN461885/index.html">EDSæ˜¯å¦ä¸€ç§æ¬ºè¯ˆ</a></li>
<li><a href="../zh-CN461891/index.html">æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ManageIQåœ¨é“¶è¡ŒåŸºç¡€è®¾æ–½ä¸­ç»“è¯†æœ‹å‹</a></li>
<li><a href="../zh-CN461895/index.html">è¾¹èµ°è¾¹å­¦-åœ¨ç¬¬ä¸€å±Šæ¬§æ´²å•†ä¸šåˆ†ææ—¥æˆ‘ä»¬å¦‚ä½•å¼€è½¦</a></li>
<li><a href="../zh-CN461897/index.html">æˆ‘ä»¬å¦‚ä½•ä¿æŒLamodaåº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§</a></li>
<li><a href="../zh-CN461899/index.html">äº‹ä»¶ç”Ÿæˆï¼ŒCQRSå’ŒLaravel</a></li>
<li><a href="../zh-CN461901/index.html">ä¸‰å¹´çš„è‡ªåŠ¨æµ‹è¯•ï¼šå¦‚ä½•æé«˜é€Ÿåº¦ï¼Œè€Œä¸ä»…ä»…æ˜¯</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>