<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜ ğŸ˜¾ ğŸ‘©ğŸ½â€ğŸš’ Test de performances du serveur cloud Ã  l'aide de Dwarf Fortress ğŸ‘¨â€ğŸ¤ ğŸ‘©ğŸ»â€ğŸ’» âºï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dwarf Fortress est un jeu lÃ©gendaire qui simule un monde fantastique en dÃ©tail, et un joueur (dans l'un des modes) peut construire et gÃ©rer une coloni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Test de performances du serveur cloud Ã  l'aide de Dwarf Fortress</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401485/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dwarf Fortress</a> est un jeu lÃ©gendaire qui simule un monde fantastique en dÃ©tail, et un joueur (dans l'un des modes) peut construire et gÃ©rer une colonie (forteresse) de gnomes (nains).  Assez a Ã©tÃ© Ã©crit sur le jeu, donc je n'entrerai pas dans les dÃ©tails.  Il est important qu'en raison de la grande taille du monde du jeu et des dÃ©tails Ã©levÃ©s de la simulation, le jeu soit assez exigeant en ressources - Ã  la fois le processeur et la mÃ©moire / cache.  Le jeu prend en charge les trois principaux systÃ¨mes d'exploitation. <br><br>  Il existe un projet DFHack pour le jeu, qui est engagÃ© dans la rÃ©tro-ingÃ©nierie des structures de donnÃ©es de jeu et vous permet de crÃ©er des plugins et des scripts en C ++, Lua ou Ruby. <br><br>  Je suis l'auteur de l'application et du code serveur qui implÃ©mente entiÃ¨rement l'interface utilisateur du jeu sur les appareils iOS.  Autrement dit, l'utilisateur met le jeu, le plug-in et l'application d'origine, et peut jouer Ã  distance Ã  partir d'un appareil mobile avec toutes les commoditÃ©s. <br><br>  Le serveur peut Ãªtre installÃ© Ã  la maison et louÃ© auprÃ¨s de l'un des fournisseurs de cloud.  Et l'idÃ©e de cette Ã©tude est nÃ©e - premiÃ¨rement, pour savoir lequel des services cloud est le mieux adaptÃ© et peut Ãªtre recommandÃ© aux utilisateurs en premier lieu, et deuxiÃ¨mement, comparer rÃ©ellement les performances du serveur en utilisant quelque chose de diffÃ©rent des serveurs Web et des utilitaires spÃ©ciaux . <br><a name="habracut"></a><br>  Pour les tests, la version de Dwarf Fortress / DFHack 0.43.03-r1 a Ã©tÃ© utilisÃ©e.  J'ai une image publique pour Docker, y compris le jeu lui-mÃªme et la version minimale de DFHack (ainsi que le code serveur lui-mÃªme pour le jeu distant, mais dans ce cas, il n'est pas utilisÃ©).  Un script a Ã©tÃ© Ã©crit en Lua pour exÃ©cuter des tests et envoyer les rÃ©sultats Ã  un serveur Web.  Ã‰galement pour l'automatisation, le script suivant a Ã©tÃ© utilisÃ©, spÃ©cifiÃ© dans les donnÃ©es utilisateur lors de la configuration des serveurs.  Autrement dit, vous aviez juste besoin de crÃ©er un serveur, attendez que les rÃ©sultats arrivent et supprimez-le. <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash fallocate -l 4G /swp ; chmod 600 /swp ; mkswap /swp ; swapon /swp ; echo '/swp none swap sw 0 0' &gt;&gt;/etc/fstab apt-get update apt-get install -fy docker.io apt install unzip wget https://github.com/mifki/dfremote-cloud-benchmark/raw/master/benchmark.lua wget http://mifki.com/a/t/gloveloved.zip unzip gloveloved.zip -d save/ docker run --name=df -dt -v $PWD/save:/df_linux/data/save -v $PWD/benchmark.lua:/df_linux/hack/scripts/benchmark.lua mifki/dfremote sleep 5 docker exec df /df_linux/dfhack-run benchmark server_name</span></span></code> </pre> <br>  Les fournisseurs suivants ont Ã©tÃ© testÃ©s: Digital Ocean, Amazon Lightsail, Amazon EC2, Vultr, Linode, Google Compute Engine et Macbook Pro Fin 2013 2Ghz Core i7. <br><br>  Si le service cloud prend en charge la crÃ©ation d'un serveur avec Docker en un clic, alors cette fonctionnalitÃ© a Ã©tÃ© utilisÃ©e, sinon, la version d'Ubuntu 16.04 a Ã©tÃ© sÃ©lectionnÃ©e.  Ainsi, seul Vultr n'a pas utilisÃ© Ubuntu, mais CentOS 7. Pour les serveurs avec plus de 2 Go de mÃ©moire, le fichier d'Ã©change n'a pas Ã©tÃ© utilisÃ©.  Pour Google Compute Engine micro et petit, un lecteur SSD a Ã©tÃ© sÃ©lectionnÃ©. <br><br>  Les options de serveur les moins chÃ¨res ont Ã©tÃ© choisies, d'une part, car elles sont plus intÃ©ressantes pour ceux qui vont les utiliser pour le jeu, et d'autre part, parce que Dwarf Fortress n'utilise toujours qu'un seul cÅ“ur de processeur pour la simulation et (dans la version spÃ©cifiÃ©e) Application 32 bits. <br><br><h3>  Les tests </h3><br>  Le processus de jeu de Dwarf Fortress se compose de deux parties - la gÃ©nÃ©ration du monde et l'histoire initiale, dans laquelle vous pouvez spÃ©cifier la taille du monde et la longueur de l'histoire (et d'autres paramÃ¨tres), et le processus de jeu lui-mÃªme.  De maniÃ¨re cohÃ©rente, sans redÃ©marrer le jeu, les tests suivants ont Ã©tÃ© effectuÃ©s: <br><br><ol><li>  GÃ©nÃ©rer un monde de trÃ¨s petite taille avec une trÃ¨s longue histoire. </li><li>  GÃ©nÃ©rer un monde de grande taille avec une courte histoire. </li><li>  Gameplay.  UtilisÃ© l'un des sauvegardes du Â«groupeÂ» (quand beaucoup de gens jouent Ã  tour de rÃ´le) - gantÃ©e aimÃ©e (AnethadefÃ­ni, 254).  Le choix n'est pas si important, tant qu'il y a une forteresse suffisamment grande, et rien qui arrÃªterait automatiquement le jeu ne se produit pendant le test, qui a durÃ© 20 jours en jeu. </li></ol><br>  Le dernier test est le plus important, premiÃ¨rement, parce que c'est le gameplay lui-mÃªme, pour lequel tout se passe, et deuxiÃ¨mement, il est moins affectÃ© par le hasard que la gÃ©nÃ©ration du monde (dans laquelle les civilisations, les colonies, le paysage, les Ã©vÃ©nements et ainsi de suite). <br><br><h3>  RÃ©sultats </h3><br>  Voici l'horaire.  Le temps d'exÃ©cution en secondes, respectivement, moins c'est mieux.  Prix â€‹â€‹mensuels en dollars amÃ©ricains. <br><br><img src="https://habrastorage.org/files/d87/d72/2de/d87d722deebd43f48670376da89c58f7.png" alt="image"><br><br>  Une diffusion non naturelle des rÃ©sultats du premier test est immÃ©diatement visible, je ne sais pas exactement Ã  quoi cela est liÃ©.  Je crois, en partie avec la mise en cache, en partie avec les mauvaises performances du serveur nouvellement crÃ©Ã© pour une raison quelconque.  Par consÃ©quent, les rÃ©sultats sont triÃ©s par le dernier test, qui, comme indiquÃ©, est le plus important.  Le deuxiÃ¨me test est Ã©galement gÃ©nÃ©ralement en corrÃ©lation avec les rÃ©sultats du troisiÃ¨me. <br><br>  En dehors de la premiÃ¨re place attendue sur le serveur EC2 c4.large, qui est un type de C4 optimisÃ© pour les performances, Amazon Lightsail s'est avÃ©rÃ© Ãªtre le plus rapide, ce qui, compte tenu du prix, est une trÃ¨s agrÃ©able surprise.  Il est suivi par presque le mÃªme rÃ©sultat du serveur et de l'ordinateur portable Ã  processeur unique de Google.  De plus, le Vultr inconnu, Linode, dont je m'attendais Ã  mieux, s'est avÃ©rÃ© bon.  Le prix du public revient Ã  Digital Ocean - plus lent, mais le plus simple et le plus rapide Ã  utiliser.  Les serveurs EC2 m3.medium plutÃ´t chers sont Ã©tonnamment lents, et les serveurs GCE les moins chers sont vraiment mauvais mÃªme avec des SSD, je n'ai pas obtenu le rÃ©sultat du test du serveur de micro-taille. <br><br>  SÃ©parÃ©ment, il faut dire Ã  propos des instances EC2 de type T2.  Leur caractÃ©ristique est qu'avec un simple serveur reÃ§oit des crÃ©dits de processeur (jusqu'Ã  une certaine limite), qui sont dÃ©pensÃ©s sous charge.  En dÃ©pensant des prÃªts, le serveur fonctionne Ã  pleine capacitÃ©, lorsqu'ils sont Ã©puisÃ©s - les performances tombent Ã  20%.  D'une part, il est trÃ¨s bien adaptÃ© Ã  nos besoins - les gens, en particulier Ã  partir d'un appareil mobile, ne jouent pas en continu toute la journÃ©e, de plus la simulation dans le jeu s'arrÃªte lorsqu'une personne fait quelque chose dans le menu, etc., c'est donc une bonne option pour obtenir haute performance pour peu d'argent.  En revanche, il s'agit de Â«faussesÂ» performances, donc je n'ai pas inclus d'instances de ce type dans les tests afin de ne dÃ©router personne.  Par expÃ©rience, tant qu'il y a des prÃªts, ils sont assez rapides, lorsqu'ils s'Ã©puisent - trÃ¨s lentement. <br><br>  Câ€™est tout. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr401485/">https://habr.com/ru/post/fr401485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr401475/index.html">InterprÃ©tation multi-mondes et multivers - peuvent-ils devenir une seule et mÃªme idÃ©e?</a></li>
<li><a href="../fr401477/index.html">Des chercheurs d'IBM mesurent la conductivitÃ© thermique par un contact monatomique</a></li>
<li><a href="../fr401479/index.html">Vacance</a></li>
<li><a href="../fr401481/index.html">10 technologies qui devraient Ãªtre dans un smartphone moderne</a></li>
<li><a href="../fr401483/index.html">Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ±Ğ°Ğ½ĞºĞ½Ğ¾Ñ‚. Ğ§Ğ°ÑÑ‚Ğ½Ğ¾Ğµ Ñ€Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ</a></li>
<li><a href="../fr401487/index.html">La huitiÃ¨me gÃ©nÃ©ration d'Intel Core restera sur le processus de fabrication 14 nm</a></li>
<li><a href="../fr401489/index.html">Ford dÃ©veloppe son propre systÃ¨me de contrÃ´le de vÃ©hicule autonome</a></li>
<li><a href="../fr401491/index.html">Des ingÃ©nieurs japonais ont crÃ©Ã© un pollinisateur quadricoptÃ¨re</a></li>
<li><a href="../fr401493/index.html">Les mathÃ©maticiens mettent en lumiÃ¨re une hypothÃ¨se minimaliste</a></li>
<li><a href="../fr401495/index.html">L'histoire de la technologie implantable. Aides auditives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>