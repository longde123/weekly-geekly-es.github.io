<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😂 🏄 🧑🏿‍🤝‍🧑🏻 Geschichten von Wolken 🐒 👩🏾‍💼 ⛎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich muss Sie sofort warnen: Dies sind nicht die Geschichten, in denen die Ratte in den Müll gerissen wurde . Nur verschiedene kleine Geschichten "wie ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geschichten von Wolken</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croccloudteam/blog/414039/"><img src="https://habrastorage.org/webt/6i/gt/dm/6igtdmw5nfinicggcocqtucnw6e.jpeg"><br><br>  Ich muss Sie sofort warnen: Dies sind nicht die Geschichten, in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">denen die Ratte in den Müll gerissen wurde</a> .  Nur verschiedene kleine Geschichten "wie die Leute machen", die für Administratoren nützlich sein können.  Und sie können nicht sein.  Wir haben viele ziemlich große Kunden, und sie haben dementsprechend kompetente Administratoren.  Aus Erfahrung sage ich: Es ist oft erfahrener, wenn es strenge Budgetbeschränkungen gibt. <br><br>  Wir haben einen Kunden, der unsere Cloud weiterverkauft (wie sich herausstellte), es gibt Kontrolle über das Backen von Brot aus der Cloud, es gibt sogar eine eingesetzte CTF für die Schulung von Hackern.  Aber beginnen wir mit Kreuzungen, einschließlich solcher, die aufgrund von von Baggern ausgegrabenen Straßen in Moskau entstanden sind. <br><a name="habracut"></a><br><h3>  Höchste Datenrate </h3><br>  Umzug vom Rechenzentrum in der Region in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unsere Cloud</a> .  Da es viele Daten gibt, hat der Kunde beschlossen, die Festplatten einfach in einen normalen LKW zu laden.  Da mit dem LKW nicht alles richtig lief, fuhr er in einem Abteil im Zug.  Ich stelle mir direkt vor: Ich habe alles im Abteil gekauft, es mit Eisen in Kisten gezwungen, mich eingesperrt und paranoid.  Infolgedessen habe ich unseren Rekord für die Datenübertragungsgeschwindigkeit aufgestellt, wie im alten Witz über einen LKW mit Discs. <br><br><h3>  Massenbewegungen </h3><br>  Als Moskau ausgegraben wurde, ging eine ganze Welle von Umzugsanträgen an uns.  Jemand hat das Stromkabel durchtrennt, und während es repariert wurde, sind Leute in die Cloud gefahren (da wir im Rahmen der Vertragsgarantie schnell migrieren).  Sah genauer hin, blieb und übertrug langsam Anwendungen von ihrem Server zu uns, während die Hardware von der Garantie entfernt wird. <br><br>  Die interessanteste Geschichte war mit einem kleinen Serverraum in Khimki.  Dort gab der Finanzdirektor grundsätzlich kein Geld für die Modernisierung, sondern nutzte Eisen in Zyklen von 5-6 Jahren. <br><br>  Die logische Konsequenz dieses Ansatzes ist, dass am Ende des Zyklus alles in der Luft atmete und es sogar Probleme mit Festplatten für die Kampfdatenbank gab.  Jede Woche flog etwas aus ihnen heraus, sie untersuchten die am wenigsten kritischen Anwendungen und schnitten sie ab.  Infolgedessen gaben Ausgrabungen von Baggern von Khimki den Administratoren eine seltene Chance, sich dennoch auf einen Wechsel in die Cloud zu einigen. <br><br>  Eine ähnliche Geschichte gab es beim Wiederaufbau der Kaluga-Autobahn, aber dort verlegte das Unternehmen sofort das Büro unter diesem Geschäft und beschloss, keinen Serverknoten an einem neuen Ort zu errichten, sondern direkt zu unserem Rechenzentrum zu gehen. <br><br><h3>  Dringender Umzug </h3><br>  Wenn Sie sehr dringend umziehen müssen, können Sie einfach physischen Speicher mitbringen.  Es gibt solche Geschichten und nicht ohne Kuriositäten.  Der Administrator des Kunden gab uns das Bügeleisen und sagte: "Überlastung."  "Was ist das?"  - Wir fragen.  "Alle möglichen wichtigen Dokumente", antwortet er.  Dateien wurden gezogen - der Administrator liest einfach ihre Namen und kriecht vor Lachen an der Wand entlang.  Auf dem Fileshare mit wichtigen Dokumenten, die tatsächlich fast 9 TB gesammelt wurden, liegt die Serie „House MD“.  Dann säuberten sie natürlich, dass der Kunde nicht in Eile gelöscht hatte. <br><br><h3>  Flash-Laufwerk vergessen </h3><br>  Wir haben eine neue Umgebung bereitgestellt, nachdem wir planmäßig umgezogen sind.  Wir nehmen Bewerbungen mit den Admins des Kunden auf, und dann schlägt man sich auf die Stirn.  Er sagt: "Sie haben das Flash-Laufwerk vergessen."  Nun, vergessen und vergessen, dann bringen.  Geschäft etwas.  Es stellt sich heraus, dass dies nicht nur ein Flash-Laufwerk ist, sondern ein Autorisierungsschlüssel für eine geschäftskritische Anwendung.  Ich musste nachts in das alte Rechenzentrum eilen, ein Flash-Laufwerk in einem der Server finden, es herausreißen und zu uns kommen.  Wir steckten es in einen Standard-USB-Hub für die Cloud und präsentierten es der virtuellen Maschine, als ob es in einem physischen Port stecken würde. Alles ging hoch. <br><br><h3>  In der Cloud überwachen </h3><br>  Rufen Sie an: "Haben Sie einen Monitor in der Cloud?"  Wir: "WAS?"  Kunde: "Nun, ich nehme den Server hier, der Fernzugriff ist nicht darauf konfiguriert.  Benötigen Sie einen Monitor in der Cloud. "  Wie sich später herausstellte, kauften sie einen neuen Desktop-Computer (ungefähr auf Spielebene) und stellten Dienste darauf bereit.  Die Konfiguration ist fast wie bei einem Server, sie hat ihn fast bis zum Limit mit Speicher gefüllt.  Also wurde er in die Cloud gebracht, mit seinen virtuellen Maschinen in einem Vilan gefangen und ging.  Wenn es abstürzt, werden sie es los, aber im Moment ist es im Rack nur umständlich und konkurriert mit Servern in der Geschwindigkeit.  Wir hatten einen Monitor, also haben wir ihn einfach eingerichtet. <br><br><h3>  Autoskalierung </h3><br>  Einer der wichtigsten Einzelhandelskunden verfügt über eine automatische Skalierung, dh den Verbrauch von Ressourcen nach Bedarf.  Sie haben ein Zabbix-Überwachungssystem, in dem Trigger zum Laden jedes Dienstes konfiguriert sind.  Angenommen, Webknoten.  Wenn der Auslastungsdurchschnitt 0,8 erreicht, ruft Zabbix das externe Terraform-Skript ab und erstellt über die API eine neue virtuelle Maschine.  Es wird sich mit Ansible einschleichen, Pakete werden zusammengezogen, eine Veröffentlichung wird veröffentlicht.  Der Balancer empfängt es und aktualisiert die Konfiguration.  Die Bereitstellung dauert 5-10 Minuten.  Wenn die Gesamtlast auf ein bestimmtes Niveau abfällt, wird dieser Knoten entfernt. <br><br>  Ihre Datenbank ist als Master-Master konfiguriert und daher auch leicht skalierbar.  Übrigens wird die Leistung von Festplatten bei uns im Allgemeinen durch eine Anforderung an die API richtig skaliert, die sie und eine Reihe anderer Clients aktiv nutzen. <br><br>  Am Ende wie eine Krücke, aber schön.  Einsparungen von ca. 25–30% bei vollständiger Vorbereitung auf Spitzen. <br><br><h3>  Autoscaling für Legacy </h3><br>  Die staatliche Gesellschaft hat eine weitere Skalierung durchgeführt.  Sie haben eine Legacy-Architektur (lesen Sie: etwas funktioniert auf Fortran, etwas auf der Halbachse, an einigen Stellen müssen Sie den alten Hypervisor im neuen Hypervisor ausführen, um die Kompatibilität zu gewährleisten).  Sie können nicht horizontal an Autos zusammenkleben.  Aber sie schalten ihre VMs nachts aus und starten sie mit einer einfachen Art von Ressourcen neu.  Am Nachmittag - die leistungsstärksten Cloud-Maschinen - halten sie nach 12 Nächten teilweise an und starten stattdessen dieselbe, aber viel billigere, mit langsamerem Zugriff auf Festplatten und mit unterschiedlichen Kontingenten für Kerne.  Es wirft den Kopf auf den Exapark - unser System, das von außen hängt.  Um 6-7 Uhr wiederholt sich alles in umgekehrter Reihenfolge.  Diese Funktionalität steht allen Kunden der Cloud zur Verfügung, aber hier wussten die Administratoren direkt genau, was sie wollten und wie.  Das Ergebnis sind gute Einsparungen, da die Zahlung für Cloud-Ressourcen stündlich erfolgt. <br><br><h3>  Ungewöhnlicher Zugriffstyp </h3><br>  Wir haben AWS-kompatiblen Objektspeicher.  In der Regel wird es als S3 verwendet.  Einer der Kunden bewirbt sich jedoch direkt über eine mobile Anwendung ohne Zwischenumschichtungen.  Als Anwendung für iOS- und Android-Anwendungen arbeiten Tausende von Merchandisern daran.  Sie laden dort alle Fotos und Berichte hoch.  Direkt vom Handy zum Objektspeicher.  Anwendungen werden übrigens mit dem AWS SDK geschrieben, nur mit anderen Endpunkten. <br><br><h3>  Wir ziehen den Schalter in einem Monat </h3><br>  Es gibt ein Unternehmen, das Unternehmen kauft, die bereit sind zu sterben und ihr Leben verlängert.  Es gab eine französische Firma, die aufgrund von Sanktionen Russland verlassen wollte.  Unsere Kunden überbieten das Geschäft.  Die gesamte französische Infrastruktur befand sich in Moskau in einem normalen Büro, einem dicht gepackten Server-Rack.  Einen Monat lang musste alles auf einmal in die Cloud übertragen werden.  Wenn Sie keine Zeit haben - schalten Sie einfach das Licht aus und fertig.  Und es gibt Lieferungen aus Lagern, Autos warten.  Und dennoch konnten einige Dinge nicht überprüft werden, bis die alte Infrastruktur vollständig ausgeschaltet war.  Natürlich wollten wir am ersten Tag nicht ohne Versand bleiben, daher stimmten wir den Administratoren zu, dass wir am Sonntag vor Ende des Monats, wenn sie den Office-Serverknoten löschen, beobachten, wie sich alles Neue entwickelt.  Ist gestiegen.  Eine weitere Schwierigkeit bestand darin, dass die Muttergesellschaft keinen Zugang zu nativen Mitteln zur Übertragung der Datenbank gewährte, sondern auch darunter litt. <br><br><h3>  Löschen Sie beim Verlassen die VM </h3><br>  Einer unserer Kunden - der Aggregator - besteht fast ausschließlich aus Entwicklern.  Sie sind sehr schnell und sehr gut gemacht.  Wir sind meistens für Testumgebungen in die Cloud gefahren.  Zuvor hatten sie Probleme mit der Tatsache, dass viele verschiedene Entwicklungsteams zum Administrator kamen und rissen: "Ressourcen geben."  Es war nicht klar, wie viel es wert war: Es gab keine Budgetaufteilung, es wurde manuell betrachtet.  Sie zogen in unsere Cloud, deckten alles mit Automatisierungsskripten ab und gingen herum.  Nach dem ersten Tag hatten sie keinen einzigen Eintrag in der GUI und nur ein paar Einträge in der Konsole - sie erledigen alles in einer sehr automatisierten Infrastruktur.  Ihre Automatisierungstools können jederzeit alles bereitstellen, was sie möchten.  Jetzt der Hauch von Finanziers - sie fragen: "Gehen, um das Auto auszuschalten."  Damit nach den Tests jeder nach sich selbst aufräumte.  Angesichts der Tatsache, dass sie ihre Infrastruktur vollständig als Code (IaaC) schreiben, denke ich, dass sie dies auch automatisieren.  Wenn noch nicht fertig. <br><br>  Ein anderer Entwickler hatte ein ähnliches Bild - er verwendete unsere Standardfunktionalität für die Projektbuchhaltung.  Dies sind separate Rollen für jede Gruppe von Administratoren: Es ist klar, wie viel Geld für welche Art von Aktivität ausgegeben wird.  Die Projektbuchhaltung ist eine Rolle, mit der Sie im Wesentlichen private Clouds erstellen und darin Ressourcen bereitstellen können.  Rechte und Zugang werden nach Belieben gekürzt, es gibt Obergrenzen, es gibt eine separate Abrechnung. <br><br><h3>  Spaß zu benutzen </h3><br>  Wir wissen normalerweise nicht, wie Kunden unsere Cloud nutzen.  Aber manchmal erzählen und zeigen Administratoren selbst.  Unser Blockchain-Knoten wurde also zersägt, es gibt CTF von einem Sicherheitsunternehmen - es ist ein direkter Simulator des Unternehmensnetzwerks des Unternehmens. Sie müssen sich dort verbinden und alles kaputt machen.  Wird zur Schulung von Mitarbeitern und Endkunden verwendet.  Ein anderer Kunde koordiniert die Reinigung über die Cloud, es gibt ein Brotbackmanagement (ACS TP), es gibt einen medizinischen Dienst mit Video-Konsultationen mit Patienten (sie haben eine sehr komplizierte Vorgeschichte mit persönlichen Daten, es gibt ein spezielles, speziell geschütztes Segment).  Es gibt immer noch ein paar Kunden - einige verkaufen den Service und die zweite Schreibsoftware zuerst.  Aus verschiedenen Ländern.  Und beide stehen nebeneinander in der Wolke.  Ein anderes Einzelhandelsunternehmen steht nur bei uns, um sich mit Raidern zu befassen - sie wurden einmal im Monat vom Licht auf dem Serverknoten abgeschnitten.  Es gab Anfragen wie einen Service für Spammer: „Wir wollen in Russland sein.  Mehrere Millionen Briefe pro Stunde senden.  Es ist in der Russischen Föderation notwendig.  Und Software ist russisch. "  Zuletzt abgelehnt.  Der Lichtregler eines der Büros (dynamische Beleuchtung durch das Wetter und die Anwesenheit von Personen in den Büros) wird direkt an die Cloud weitergeleitet, damit der Dienstleister dorthin gehen kann.  Dies ist unser erstes IoT in der Cloud. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414039/">https://habr.com/ru/post/de414039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414025/index.html">Arbeitgeber verfolgen Computer, Toilettenfahrten und jetzt auch Emotionen. Folgt Ihnen Ihr Chef?</a></li>
<li><a href="../de414027/index.html">Können meine Freunde als wahre Freunde betrachtet werden?</a></li>
<li><a href="../de414029/index.html">Geheimnisvolles Licht um einen neu gebildeten Stern und was Astronomen darüber denken</a></li>
<li><a href="../de414031/index.html">Nach dem Treffen "PostgreSQL 11 New Features"</a></li>
<li><a href="../de414037/index.html">Einmal bei einer HFT-Firma ...</a></li>
<li><a href="../de414041/index.html">Im Winter und Sommer in einer Farbe? Suchen Sie nach Saisonalität in Daten</a></li>
<li><a href="../de414049/index.html">Die Hauptspiele der E3 2018: Fallout 76, Metro Exodus, Doom Eternal und andere</a></li>
<li><a href="../de414053/index.html">5 Missverständnisse über die DSGVO</a></li>
<li><a href="../de414055/index.html">Trans-PRK: einer der Standards für die Sehkorrektur</a></li>
<li><a href="../de414057/index.html">Rechenzentrumskühlung: Ein Lied von Eis und Feuer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>