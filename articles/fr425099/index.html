<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏴󠁧󠁢󠁷󠁬󠁳󠁿 😟 😇 Ce que j'ai compris et quels problèmes j'ai rencontrés lors de la création d'un clone de Hacker News 🐗 🍄 🏞️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D'un traducteur: Cet article est une traduction abrégée de la publication originale du développeur Web Jesse Horne. Son travail et en même temps son h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ce que j'ai compris et quels problèmes j'ai rencontrés lors de la création d'un clone de Hacker News</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/425099/"><img src="https://habrastorage.org/getpro/habr/post_images/9d2/2a8/a7c/9d22a8a7c00b7d82fb381a39ec725b64.jpg"><br><br>  D'un traducteur: Cet article est une traduction abrégée de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publication</a> originale <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du</a> développeur Web Jesse Horne.  Son travail et en même temps son hobby est le webdesign.  Jesse partage souvent ses meilleures pratiques et leçons apprises avec d'autres programmeurs, expérimentés et débutants. <br><br>  Il y a quelque temps, j'ai écrit un article assez volumineux sur Hacker News, qui a reçu un solide soutien des lecteurs.  J'ai attiré l'attention sur les capacités de cette ressource et j'ai décidé d'essayer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'en créer un clone</a> afin d'acquérir de nouvelles expériences et connaissances. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox recommande:</b> Un cours de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">développeur PHP</a> pratique d'un an. <br>  <b>Nous vous rappelons:</b> <i>pour tous les lecteurs de «Habr» - une remise de 10 000 roubles lors de l'inscription à un cours Skillbox en utilisant le code promo «Habr».</i> </blockquote><br>  Au départ, cela me semblait être un grand objectif, où l'ensemble d'outils et de tactiques de travail était prédéterminé.  Auparavant, j'ai travaillé sur des tâches plus petites en utilisant différents langages et cadres.  La seule chose qui n'existait pas était un projet majeur qui permettrait de rassembler tout cela. <br><br>  J'ai décidé de travailler sur un nouveau projet à partir de zéro en utilisant le langage Crystal.  Il s'agit d'un outil pratique, qui est également nouveau.  C'est rapide, les principes de travail avec lui sont similaires à Ruby.  Il est typé statistiquement et est open source.  Mais juste une nouvelle langue ne suffit pas non plus, j'ai donc décidé de compliquer ma tâche, et de ne pas faire un clone de Hacker News, mais une version améliorée de cette ressource. <br><br>  Soit dit en passant, je pensais que la création d'un clone normal serait une tâche facile.  Et le fait que ce ne soit pas le cas, je m'en suis rendu compte un peu plus tard, en commençant le travail. <br><br>  <b>Ne pas balayer trop haut</b> <br><br>  Je ne veux pas dire que vous ne devez pas vous fixer d’objectifs ambitieux.  Essayez d'atteindre les étoiles, avec ou sans épines.  Rêver est utile, essayer de réaliser ce que je ne pouvais pas faire avant est nécessaire pour réussir sur l'échelle professionnelle. <br><br>  J'ai dit que vous ne devriez pas essayer de vous <s>précipiter</s> immédiatement <s>dans l'embrasure d'</s> une tâche complexe et vaste.  Choisissez ce dont vous avez besoin à un moment particulier pour mettre en œuvre l'idée.  De plus, je recommande de diviser les objectifs importants en objectifs plus petits.  Si vous avez trop de code dans lequel il y a beaucoup de «déchets», essayez de simplifier et de tout structurer. <br><br>  Je ne peux même pas mettre en mots à quel point il est important de diviser une grande tâche en plusieurs plus petites. <br><br>  Dans mon cas, j'ai rencontré divers nouveaux problèmes que je n'avais pas rencontrés auparavant.  Tout d'abord, je n'ai travaillé qu'une seule fois sur Crystal - lorsque je créais une application dont la complexité n'était pas beaucoup plus élevée que la complexité d'un programme comme «Hello, world!».  Dans le passé, j'utilisais Python, Lua, PHP.  La nouvelle langue a été le premier obstacle à la mise en œuvre du projet. <br><br>  <b>Le second était le cadre</b> .  Crystal, étant un nouveau langage, n'a toujours pas trop de frameworks et de documentation pour eux.  J'ai décidé d'utiliser Kemal pour mon clone.  J'espérais que le cadre est intuitif, car je l'ai rencontré dans mon travail.  Mais voici un autre cas - les choses individuelles n'étaient pas faciles à comprendre.  Par exemple, certaines sections du code semblaient tout à fait normales, mais pour une raison quelconque, cela ne fonctionnait pas.  Et il était difficile de trouver la cause du problème sur Internet pour la même raison - la nouveauté du langage et du cadre lui-même.  Dans certains cas, j'ai dû m'arrêter longtemps et m'occuper de la cause du problème.  Jusqu'à présent, je n'ai jamais regardé la source, par exemple, le même flacon. <br><br>  <b>Le troisième obstacle</b> est les objectifs spécifiques que j'ai choisis pour le projet.  Afin de rendre mon clone plus utile, j'ai décidé d'ajouter un certain nombre de fonctionnalités fonctionnelles.  J'ai travaillé avec Hacker News plus tôt, donc je connais beaucoup les avantages et les inconvénients de cette ressource.  Il m'est venu à l'esprit qu'il serait bon de puiser dans les analyses fournies par GitHub.  En les utilisant, j'ai pu ajouter des statistiques sur le nombre de vues et l'activité des utilisateurs sur le site. <br><br>  J'ai donc décidé que mon clone devrait afficher au moins les vues et les clics pour chaque publication.  Une telle fonction serait probablement utile pour les utilisateurs, et sa mise en œuvre serait une bonne pratique pour moi.  Mais je ne pensais pas que ça prendrait si longtemps!  Maintenant, le projet est plus une preuve de concept qu'une ressource toute faite.  En plus des vues et des clics, j'ai également décidé d'ajouter un affichage des commentaires qui apparaissent afin qu'ils apparaissent en temps réel.  Sans cette tâche supplémentaire, le projet aurait été achevé beaucoup plus rapidement. <br><br>  Maintenant, le projet prend en charge l'autorisation, la publication et le tri des messages, l'interaction avec d'autres utilisateurs en commentant et en affichant les profils, etc. <br><br>  <b>Le quatrième problème auquel</b> je suis confronté est le chaos.  Les migrations, les modèles, les vues, les contrôleurs API, le code CSS et JavaScript s'accumulent très rapidement.  Et tout cela devient un gâchis.  J'ai essayé de résoudre le problème et j'ai presque réussi.  Mais des endroits partiellement problématiques dans le code de mon projet se produisent toujours - vous pouvez facilement le remarquer.  Ainsi, dans de nombreux endroits, le code est répété, les points de terminaison ne sont pas organisés, la dénomination est compliquée, ce qui entraîne une augmentation de la quantité de code et un grand nombre de requêtes vers la base de données.  Petit à petit, je résous ce problème. <br><br>  <b>Dans de nombreux endroits, le code est répété</b> <br><br>  Lorsque le projet a commencé, j'ai résolu les problèmes tels qu'ils se présentaient.  Par exemple, il était nécessaire de vérifier si l'utilisateur était authentifié - et j'ai trouvé une solution originale qui prenait environ trois lignes selon l'itinéraire.  J'étais pressé de mettre en œuvre les solutions trouvées. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faf/a2b/142/fafa2b142f94d3d413c25c8889938de6.jpg"><br><br>  En général, j'ai dû suivre les principes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DRY</a> dès le début.  Ne vous répétez pas!  J'avais besoin d'écrire un programme intermédiaire qui ferait ce qui était nécessaire, puis d'appliquer simplement la solution trouvée dans les cas où elle était requise.  À l'avenir, j'ajusterai mon projet en fonction de ce principe. <br><br>  <b>Désignation et organisation des points de terminaison</b> <br><br>  J'avais l'habitude de développer l'API dans l'équipe Pioneer.  Nous avons utilisé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">REST</a> , un style d'architecture que j'ai juré en tant que nouveau membre de l'équipe Pioneer.  Dans cette équipe, j'ai travaillé sur les petits éléments d'une énorme application.  Mais dans mon nouveau projet, j'ai dû tout écrire à partir de zéro. <br><br>  Une «API RESTful» doit avoir une interface uniforme, comme le Wiki le dit.  Dans mon projet, j'ai tout organisé pour que les points de terminaison soient définis dans des fichiers sources, qui étaient appelés en fonction de la fonction ou du but.  L'enregistrement et la sortie de l'application ont été enregistrés dans "auth.cr".  Le nom d'utilisateur a été enregistré dans "user.cr". <br><br>  Sans aucun doute, cette partie nécessite un traitement.  À l'avenir, je vais tout organiser pour que les actions se rapportent au point de terminaison "/ user", simplement parce que tout cela est lié à "User".  Par exemple, pour améliorer la structure du projet, je vais diviser le code en parties plus pratiques et gérables avec un grand nombre de fichiers.  Je vais créer le dossier «src / user / auth /», qui contiendra les fonctions de connexion, d'enregistrement et de sortie utilisateur de l'application. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/857/b21/861/857b21861b663781c60ea6ae8fb29845.png" alt="1_6dy_OCE7_Cjj_Df7_A0s_Aj_3i_Q"></a> <br><br>  <b>Trop de demandes</b> <br><br>  Dans ce projet, j'essaie de faire évoluer mes idées.  Trop de requêtes sont actuellement effectuées dans la base de données.  Donc, si l'application comptait une centaine d'utilisateurs, je deviendrais fou en essayant de savoir combien de requêtes de base de données sont effectuées toutes les quelques secondes.  Désormais, le client met à jour l'état des messages toutes les 10 minutes.  De plus, la publication détermine cycliquement si elle a été consultée par l'utilisateur.  Lors de chaque vérification, une requête est envoyée à la base de données, qui est effectuée conformément au filtre actuel.  Et tout cela charge considérablement le serveur. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/270/faf/fe9/270faffe964e6f1e60721f8b9a6d4dc2.jpg"><br><br>  Tout ce qui est décrit ci-dessus n'est que des exemples de problèmes que je rencontre tout le temps.  Je ne peux pas les décrire en entier.  Cependant, je pense maintenant à documenter mes problèmes et mes solutions.  J'espère que tout cela aidera d'autres programmeurs à voir et à comprendre mes erreurs et à éviter les leurs.  Je sais que si j'utilise une combinaison de Redis et MySQL ou Postgres, je peux accélérer l'exécution des requêtes.  Mais pour l'instant, je m'attarderai là-dessus. <br><br>  J'espère que vous avez apprécié l'article et que vous avez pu apprendre quelque chose d'utile par vous-même. <br><br><blockquote>  <b>Skillbox recommande:</b> <br><br><ul><li>  Cours en ligne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Profession frontend-developer"</a> . </li><li>  Cours pédagogique en ligne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Profession d'un développeur web"</a> . </li><li>  Cours pratique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Mobile Developer PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425099/">https://habr.com/ru/post/fr425099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425087/index.html">Openspace Agility: Présentation d'Agile dans toute l'entreprise (maintenant avec leadership!)</a></li>
<li><a href="../fr425089/index.html">L'informatique dans le monde animal: recherche d'aliments pour fourmis et TCP / IP</a></li>
<li><a href="../fr425091/index.html">Que se passe-t-il avec les cotes de popularité des langages de programmation?</a></li>
<li><a href="../fr425093/index.html">Solutions IoT pour le logement et les services communaux: quels seront les compteurs intelligents et qui devrait les entretenir?</a></li>
<li><a href="../fr425095/index.html">Webinaire ouvert "Jeu" 2048 "</a></li>
<li><a href="../fr425101/index.html">Docker + Laravel = ❤</a></li>
<li><a href="../fr425103/index.html">Empêchez Google Predators de poursuivre vos enfants</a></li>
<li><a href="../fr425105/index.html">Intel ME Manufacturing Mode - une menace cachée ou ce qui se cache derrière la vulnérabilité CVE-2018-4251 du MacBook</a></li>
<li><a href="../fr425107/index.html">Digest Fintech: problèmes de biométrie sur mobile, location de téléphones Samsung, titres sur la blockchain</a></li>
<li><a href="../fr425109/index.html">Le livre «Java dans le cloud. Spring Boot, Spring Cloud, Cloud Foundry »</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>