<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏁 🧗🏼 🕶️ 微型UPS电离电阻 🌅 🎄 ✡️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="对所有受尊敬的社区来说都是美好的一天。 我很荣幸向对无线电电子感兴趣的Hubrovites提供一些注意事项，并在离子电阻器（它们是具有双电层的超级电容器）上实现备用电源的特定实现，旨在确保在标准Linux Debian下运行的ARM微控制器上的处理器模块正确完成。 

 问题出现在谦卑的仆人面前，其...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>微型UPS电离电阻</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402243/"> 对所有受尊敬的社区来说都是美好的一天。 我很荣幸向对无线电电子感兴趣的Hubrovites提供一些注意事项，并在离子电阻器（它们是具有双电层的超级电容器）上实现备用电源的特定实现，旨在确保在标准Linux Debian下运行的ARM微控制器上的处理器模块正确完成。 <br><a name="habracut"></a><br> 问题出现在谦卑的仆人面前，其表现形式如下：关闭外部电源后，您需要正确熄灭Linux OS（在嵌入式解决方案上运行）。 该电源至少通过标准USB-B连接器从标准USB 2.0端口提供给先前制造的盒装设备。 没有经验的用户最好遵循“ UnPlug-NoPlay-NoProblem”的原则拔出USB电缆。 显然，在配置过程中不带硬盘且虚拟内存为零的嵌入式解决方案可以抵抗这种不可抗力，但是，成千上万的用户小时的使用表明，这种解决方案并不总是“没有问题”。 <br><br> 我不得不皱动我的大脑，陷入创造性的tr。 离开the时，解决问题的第一种可能的方法得以实现-心理方法，乍一看似乎最有吸引力。 思路大致如下-普通用户为什么用不可动摇的手摇动一根棍子插入USB端口？ 可能是因为他本人和最亲密的熟人都没有以这种方式迷失了自己的论文，论文或年度报告。 为什么同一个人在ona日子里没有从正在工作的打印机上拔出打印机电缆？ 可能是因为他要么看到别人的声音，要么从别人的嘴中听到了声音，因此他必须购买新的MB或ISA（PCI）上的Centronics。 我不希望（一般来说）我的盒子被毫不客气地拉出。 为此需要做什么？ 更正，形成所需的用户行为。 <br><br> 我不得不动摇电路和跟踪的技能，下一个盒子的版本在前面板上有一个RGB LED和一个按钮，以及内部带有讨厌音色的压电信号。 一个简单的程序确定极端关机是否正确通过。 如果这是不正确的，并且用户的不当行为是其闪存上的第一个不当行为，则采取控制措施：取代指示器令人愉悦的黄色和绿色，该盒子闪烁的红色眼睛闪烁着，狠狠地尖叫了几分钟，然后平静下来并开始加载。 重复使用将被处以五分钟的处罚，更糟糕的是希瑟（Heather）和手册中的一句话，即由于反复不正确的关机而造成的包装盒堵塞，已从保修单中删除。 <br><br> 您知道，该方法非常有效。 但是，亲爱的客户在这里提出了一个愿望，即在断开包装盒连接之前，仍会通知服务器它在现场花费了一些时间。 现在有些，但需要能源。 下一个创意tr的大脑带着一种想法回到了大脑：锂聚合物电池就是我们的一切！ 普遍的想法使这种想法更加令人怀疑：我并不是真的想每次打开电池都充电，因为充放电的次数是一种消耗的资源，而且是无辜顾客的电池制造商愤世嫉俗的欺骗对象。 不是每次打开时都在充电，而是在放电时充电？ 因此，有必要将整个花园围起来，校准电池，并以良好的精度测量其上的电压。 总的来说，三星银河以其燃烧的电池出现在现场。 想象在盒子本应放置的地方发生火灾，我不得不自愿挥舞军刀，并停止了第二种想法的痛苦讨论。 <br><br> 第三次进入a状态，一个创造性的天才出现了电离离子晶体管。 而且，这似乎还不错。 容量以法拉为单位，充放电循环的次数不受限制，实际上，伏特实际上还不够-每个电池最大2.7，并且它们不是非常级联。 缺少选项已经没有什么值得思考的了，我又不得不将电路与走线一起解决。 <br><br> 在互联网的广阔范围内进行搜索带来了一些麻烦，因此，片刻考虑，决定停止使用Linear LTC3110微电路。 展望未来，我会说，已经测试了更多的选择，但并不是特别成功。 如果读者对选择的细节感兴趣-在PM中欢迎您。 在可用选项中，LTC3110包含在离子电阻器上构建备用电源所需的几乎所有东西： <br>  -它具有一个升压转换器，这使设计人员在选择电源电压时不受特别限制； <br>  -该转换器使用电感进行能量存储，从而大大提高了效率，并可以为负载提供几安培的电流； <br>  -可以将充电过程中消耗的电流限制在125mA-2A的范围内，这在使用USB供电时尤其重要； <br>  -内置电路可单独平衡串联的离子电阻，以增加存储功率和可靠性； <br>  -芯片配备了指示离子电阻器充电程度的引线； <br>  -并且，对于甜点，还有一个附加的比较器，其阈值由用户设置。 <br><br> 有关应用程序的详细信息和示例，我将好奇的Reader发送到微电路的数据表上，它是具有“ LTC3110 pdf”拼写的全能Google可以为您提供帮助。 <br><br> 从理论上讲，要构建可行的Micro-UPS，LTC3110本身需要增加一个电路，以在正常模式下为盒子供电，如果存在与工作USB的连接。 选择IC ST1S10PHR担任这一荣誉角色，其朴实的配置和低廉的价格已为人们所熟知并经过了长时间的测试。 我还必须添加一个钥匙，以便在电离电阻的初始充电过程中破坏主要消费者的电源电路。 此键可解决两个问题：首先，减少了初始充电时间（由于USB消耗的几乎所有东西都流向了离子电阻器），其次，它消除了UPS充电不足以至于能量供应仍不足以提供正确电源时的令人不安的停电可能性。关闭。 此外，充满电的离子电阻器的“高启动”使电路有时（但不是很频繁）消耗的电流超过USB端口所能提供的电流-离子电阻器将弥补这一不足。 例如，当在随盒子一起供电的大容量USB闪存驱动器上记录大量信息时，可能会出现这种情况。 <br><br> 我认为入门部分可以完成，然后转到特定的工作计划。 <br><br><img src="https://habrastorage.org/files/249/ae5/0b7/249ae50b7dff4c188249bbb255dc9b05.GIF" alt="图片"><br><br> 这就是离子晶体管上的微型UPS电路的外观。 <br><br> 电源通过USB 2.0端口（电路的左上角）供电。 在DA1上，根据推荐方案，从数据手册中组装了一个5V-&gt; 3.3V降压转换器。 它的唯一功能是在L2和C7上产生高频振铃的附加滤波器。 如果需要，可以排除这些元素。 电阻器R3 ... R5用于在运输之前（例如，在运输之前）或在整块电路板整体安装之前进行紧急放电，否则电源仍然存在，功率足以燃烧任何东西。 放电电阻通过跳线SA1连接或断开。  VT1，C16，R17和R18-为主要消费者供电的关键，它已经在上面提到过了，下面必须添加一些文字。 其他所有内容都是数据表中的标准LTC3110线束。 <br><br>  3V3SBY是控制电路的备用电源，在盒子中是在Altera的CPLD EPM240T100上实现的，但没有什么阻止它在微控制器或离散逻辑上执行的。  3V3是UPS保留的盒子的主电源。  Micro-UPS状态信息显示在PWRFAIL，BATFULL和BATLOW上，并带有不言自明的名称。 当USB断电时，PWRFAIL被激活，BATFULL指示电荷达到95％（5.2V）的水平，BATLOW表明电荷水平降低到40％（2.1V）。 如果需要，可以在数据手册的指导下通过选择R6和R7来调节此电平。 不幸的是，这种技巧在BATFULL电平上不起作用-用钉子将其锤入IC。 <br><br> 微型UPS控制两个信号：PWRON和BATOFF。  PWRON会打开主电源，BATOFF会关闭整个UPS。 <br><br> 微型UPS运行的一般逻辑如下： <br><br><ol><li> 在初始状态下，C8和C9完全放电，跳线SA1在左侧，未提供5V USB电源； </li><li> 设备已插入USB-B 2.0端口； </li><li>  DA1上的转换器开始向3V3SBY线供电，为CPLD上的控制电路通电，这反过来又打开VT1键，消除了PWRON信号； 另外，控制电路去除包括DA2在内的BATOFF信号。 </li><li>  DA2开始给电离器充电； 当它们充电时，BATLOW信号被禁用（在2.1 V时），然后BATFULL被激活（在离子电阻器上在5.2 V时）； </li><li> 在BATFULL信号出现后，控制电路考虑到微型UPS的工作就绪状态，并打开VT1，为主电路供电。 同时，DA2继续监视电离晶体管，当电荷下降到95％以下时，它将开始充电。 将VT1连接到RSENS DA2引脚可确保考虑到已消耗的主电路，该电流可充电以使其不超过USB极限； 如果主电路的消耗超过此限制，则电离电阻的放电将开始补偿不必要的费用； </li><li> 断开5V USB时，PWRFAIL线被激活，让控制设备知道外部电源已消失； 控制电路产生中断ARM处理器以运行正确的关机脚本的请求； 一直以来，电源由DA2提供； </li><li> 关闭程序完成后，ARM发出一个信号，表明一切都已准备就绪，灭绝，控制电路将BATOFF设置为无效，从而禁用DA2。 在这种状态下，该盒子位于向5V USB供电之前的位置（除了C8和C9上的剩余电荷，请参见第1点）； </li><li> 如果ARM犹豫了很多，并且直到BATLOW信号都无法关闭所有部件，则电路将不得不强制断电。 </li></ol><br> 如果您愿意，可以轻松组织任何其他微型UPS控制逻辑，例如，通过将BATLOW百分比接通水平提高到60％（选择R6和R7），将其用作停止信号，强制断开与完全放电C8和C9的连接。 <br><br> 最后，快速浏览电路的可配置参数。  R1和R2确定DA1的输出电压，另一个电压可能需要替换C1，C2，C4-C6和L1。  C8和C9的等级仅决定UPS的充电和放电时间，我个人尝试将其从4.7法拉到100法拉，从理论上讲没有任何限制。  R6和R7确定BATLOW的激活级别。 电离电阻的最大电荷电压取决于比率R8 / R9。  R11确定从5V USB消耗的电流，在所示电阻下，电路消耗0.5A。  R12 / R14比率将压降设置为5V USB，这将被定义为电源故障（PWRFAIL）。  R15 / R16确定放电模式下DA2的输出电压。 <br><br>  LTC3110的输出信号是根据“漏极开路”方案制成的，因此不会受到特定电源电压的束缚。 在我的电路中，CPLD包含了它们的上拉电阻，在任何现代微控制器中使用它们都不是问题。 好吧，如果您决定在K155上组装一个控制电路，那么您必须自己照顾电阻器。 <br><br> 关于C16的几句话。 获得这些知识使我花费了最多的时间在UPS原型板上。 毕竟是什么问题？ 黑色的英文是说，如果要确保主电路消耗的电流与电离晶体管的充电电流之和不超过R11设置的限制，请从RSENS输出为主电路供电。 好，同意。 然后更有趣。 数据表说，由于您的电路可以有任何东西，甚至可以发生短路（短路，短路，短路），因此LTC3110配备了特殊的保护电路。 好，很好 现在是有趣的部分。 我们会进一步阅读数据表：为了确保保护方案没有弄错，请提供电源线的总容量，更多，卡尔，10微法。 高飞...对于所有事物的一切，不要否认自己。 的确，当连接楔块时，任何大于10uF的负载……巴瑟曼，别被欺骗。 我不得不稍微延迟一下VT1的键，该键为C16。 我了解到一段时间后，VT1不会处于按键模式，而是处于天地之间（从某种意义上说，介于VCC和GND之间），这一点也不好。 但至少它能起作用。 这就是“新哈瓦”。 对于狂热的关键模式的纯洁，我要补充一点，我尝试不放置C16，而是将1.5μH的电感与VT1串联-一切正常。 <br><br> 下面我给出了具有所述电路的印刷电路板的图像，当然，组件的编号与电路图中指示的编号不同-它是整个包装箱的横切图。 <br><br><img src="https://habrastorage.org/files/ca6/497/465/ca6497465973465483dabf323d12be70.jpg" alt="图片"><br><br> 如果您有任何疑问，请。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN402243/">https://habr.com/ru/post/zh-CN402243/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN402233/index.html">我们超频了JTAG路由器</a></li>
<li><a href="../zh-CN402235/index.html">智能汽车而不是人员需要详细的路线图</a></li>
<li><a href="../zh-CN402237/index.html">为什么选择Intel Mobileye？</a></li>
<li><a href="../zh-CN402239/index.html">宗教网络</a></li>
<li><a href="../zh-CN402241/index.html">Arduino兼容PLC CONTROLLINO，第1部分</a></li>
<li><a href="../zh-CN402245/index.html">首艘中国货船下水的准备工作已到达终点线</a></li>
<li><a href="../zh-CN402247/index.html">爱普生打印技巧</a></li>
<li><a href="../zh-CN402249/index.html">Astell＆Kern AK70-面向音乐爱好者的袖珍媒体收割机</a></li>
<li><a href="../zh-CN402251/index.html">俄罗斯第一个私人城市。 第三部分</a></li>
<li><a href="../zh-CN402253/index.html">自然网络的力量是多余的循环</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>