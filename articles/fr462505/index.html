<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👧 👷 ⚠️ Ne me trompez pas avec votre programmation fonctionnelle 🖕🏼 ☎️ 👨🏼‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les adeptes de la programmation fonctionnelle aiment attirer les nouveaux arrivants avec des promesses d'expressivité parfaite du code, de correction ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ne me trompez pas avec votre programmation fonctionnelle</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/462505/">  Les adeptes de la programmation fonctionnelle aiment attirer les nouveaux arrivants avec des promesses d'expressivité parfaite du code, de correction à 100%, de facilité de support et de refactorisation, et parfois même de prédire les performances les plus élevées.  Cependant, les développeurs expérimentés savent que cela ne se produit pas.  La programmation est un travail difficile et les «pilules magiques» n'existent pas. <br><br>  D'un autre côté, des éléments d'un style de programmation fonctionnel ont déjà pénétré dans des langages de programmation industriels tels que Swift et Kotlin.  Les développeurs de ces langages connaissent bien la programmation fonctionnelle, ils ont donc pu l'utiliser «dans le petit», fournissant la plupart, mais pas la totalité, des composants nécessaires.  Plus loin - plus il y a de parties de FI introduites dans les armes nucléaires industrielles, et mieux et plus complètement le soutien est mis en œuvre. <br><br>  Pouvoir programmer dans un style fonctionnel est utile pour simplifier votre travail, et maintenant nous allons voir comment l'utiliser! <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/mmvHC3UgYmg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vitaliy Bragilevsky</a> est professeur de FP, de théorie des algorithmes et de calcul, auteur du livre "Haskell in Depth" et membre des comités Haskell 2020 et du comité de surveillance du compilateur GHC. <br><a name="habracut"></a><br><h2>  Bref historique </h2><br>  Les histoires de programmation fonctionnelle ne sont pas toujours vraies.  Souvent, les gens parlent de la FA comme ça. <br><br>  <i>«Il était une fois dans une galaxie très lointaine, la programmation était simple, directe et bonne.</i>  <i>Les algorithmes et les structures de données sont programmés et tout va bien - pas de problèmes!</i> <i><br><br></i>  <i>Puis sont arrivées les personnes effrayantes <s>Sith</s> qui ont décidé que tous les programmes se composaient de classes: '' Programmation orientée objet pour tout le monde!</i>  <i>Tout doit être écrit uniquement par de telles méthodes. ''</i> <i><br><br></i>  <i>Quand ils ont gagné en force, il est devenu impossible de développer des logiciels - beaucoup de problèmes sont apparus.</i>  <i>Pour sauver les malheureux développeurs qui souffrent, et il y a une programmation fonctionnelle. "</i> <br><br>  L'essentiel dans le salut est de dessiner une image magnifique et dénuée de sens. <br><br><img src="https://habrastorage.org/webt/ej/qg/ok/ejqgokehdxnmlm0dhhgck6kbyu4.jpeg"><br><br>  Lorsque vous appliquez tout dans l'image, le bonheur, la paix et la tranquillité viendront et les problèmes de développement de logiciels seront résolus. <br><br>  L'histoire est belle, mais en réalité tout est différent.  C'est ainsi que je représente la programmation fonctionnelle et industrielle. <br><br><img src="https://habrastorage.org/webt/vv/og/_n/vvog_n7u5dowxuefad5rrkegnj0.jpeg"><br><br><blockquote> La programmation fonctionnelle est le laboratoire de Faraday - le berceau d'idées qui sont ensuite appliquées à la programmation industrielle. </blockquote><br>  Dans une conversation sur les langages de programmation industriels, les concepts de savoir s'ils sont fonctionnels ou non, qu'ils utilisent FP ou non, ne devraient pas être soulevés! <br><br><blockquote>  La principale mission du PC est de transmettre de bons éléments aux langues dominantes. </blockquote><br>  Vouloir transférer tout le monde sur des rails fonctionnels revient à forcer les scientifiques à mener des expériences comme Faraday - cela n'a aucun sens.  Personne ne mène actuellement d'expériences sur l'électricité avec des méthodes aussi obsolètes. <br><br>  Regardons des exemples. <br><br><h3>  Fonction John McCarthy </h3><br>  John McCarthy est l'un des créateurs de Lisp. <br><br><img src="https://habrastorage.org/webt/pc/6z/fx/pc6zfxhxktuiarb-_n5ppc_f26g.jpeg"><br><br>  Fortran était le principal langage de programmation il y a 65 ans.  Il a une déclaration conditionnelle: <br><br><pre><code class="plaintext">        IF (I.NE.0) GOTO 40
        STMT-1
        STMT-2
40      STMT-3
</code></pre><br>
   I   0,     «40».&nbsp;<br>
<br>
     ,   ,        .  ,         <code>XIF(M, N1,N2)</code>,   ,      : N1  N2.<br>
<br>
<blockquote>    :      «… »   ,     .</blockquote><br>
    —   N1  N2.   ,     ?<br>
<br>
         <strong>  </strong>:<br>
<br>
<pre><code class="plaintext">M==0 ? N1 : N2</code></pre><br>
      .          .    ,      ,  -   .<br>
<br>
<h3>       ?</h3><br>
  —      .  1977       .      «       ?».     —   —    ,   .<br>
<br>
<img src="https://habrastorage.org/webt/vh/a_/l5/vha_l5z-pwfdapahyuwsq2f7u_c.jpeg"><br>
<br>
      — ,      .<br>
<br>
     <strong>  - </strong>:<br>
<br>
<pre><code class="cpp">c := 0 
for i := 1 step 1 until n do
    c := c + a[i]*b[i]</code></pre><br>
     —      .<br>
<br>
     <strong>  </strong>.          FP.<br>
<br>
<pre><code class="cpp">Def DotP = (Insert +) o (ApplyToAll x) o Transpose</code></pre><br>
     — <code>o</code>,  ,    ,  .<br>
<br>
  —    —      ,   ,      .<br>
<br>
    .         .<br>
<br>
<h3>   </h3><br>
  ,  -   Java         . ,    ,      ,   .<br>
<br>
<img src="https://habrastorage.org/webt/pj/mx/j8/pjmxj8r8gewqos3xzxezmgj909c.jpeg"><br>
<br>
,   ,    :<br>
<br>
<ul>
<li> ,     ;</li>
<li>  ;</li>
<li>   ;</li>
<li> .</li>
</ul><br>
     ,  .<br>
<br>
<h3> </h3><br>
    :<br>
<br>
<pre><code class="kotlin">fun countLinesInFiles(fnames: List&lt;String&gt;): Int
    = fnames.map { File(it).readLines().size }
        .sum()</code></pre><br>
   <strong>Kotlin</strong>,     ,     .   ?<br>
<br>
  <strong>   </strong>,       ,        . <strong> </strong> —  «map» —       .  <strong> </strong>,      :   ,      .  it —         .      — sum().<br>
<br>
  ,   <code>map</code>     Kotlin,  ,   .   ,          .    — <code>readLines</code>    .<br>
<br>
<h3>   Haskell</h3><br>
  ,    Haskell.<br>
<br>
<pre><code class="haskell">countLines :: FilePath -&gt; IO Int
countLines = fmap (length . lines) . readFile 

countLinesInFiles :: [FilePath] -&gt; IO Int
countLinesInFiles = fmap sum . traverse countLines</code></pre><br>
, , .  Haskell    ,   ,     .<br>
<br>
<strong>        </strong>.   ,  :    ,   Int —  .&nbsp;<br>
<br>
<strong>  </strong>.   «IO»,    Haskell  ,    <strong> </strong>   -.  « »,     Int,  IO Int.  ,        .<br>
<br>
<strong>        </strong>.   —    Haskell.      — FilePath,      IO Int — .  : , traverse —   ,        «countLines».<br>
<br>
<strong> . </strong>   «. » (  <code>o</code>) —   .     ,     .<br>
<br>
<strong>«f. g» —  ,    «x»   «f(g(x))». </strong>  ,    .    ,       .      .<br>
<br>
<h2>    </h2><br>
<blockquote>         .</blockquote><br>
  ,  ,        .  —   ,   .<br>
<br>
      UML-.  : , , , ,  .<br>
<br>
<img src="https://habrastorage.org/webt/sm/yu/e1/smyue10nmz3bcdhvsvf8kagfmgi.jpeg"><br>
<br>
<h3>  Swift</h3><br>
  ,     ,  - .   Swift    ,  ,  .<br>
<br>
<pre><code class="swift">protocol Shape {
    func area() -&gt; Double
    func diameter() -&gt; Double
}

class Circle: Shape {
    var r = 0.0
    init(radius: Double) {
        r = radius
    }
    func area() -&gt; Double {
        return 3.14 * r * r
    }
    func diameter() -&gt; Double {
        return 2 * r
    }
}

class Square: Shape {
    var s = 0.0
    init(size: Double) {
        s = size
    }
    func area() -&gt; Double {
        return s * s
    }
    func diameter() -&gt; Double {
        return sqrt(2) * s
    }
}</code></pre><br>
  ,   .<br>
<br>
   : , ,  – ,  .       .<br>
<br>
  , ,     .<br>
<br>
<pre><code class="swift">func testShape(shape: Shape) {
    print(shape.area())
    print(shape.diameter())
}</code></pre><br>
 .  .<br>
<br>
<pre><code class="swift">testShape(shape: Circle(radius: 5))
testShape(shape: Square(size: 5))

78.5
10.0
25.0
7.0710678118654755</code></pre><br>
   ,    ,   , ,  - .     – ,  .<br>
<br>
<h3>  Haskell</h3><br>
   Haskell,    ,     Swift.<br>
<br>
<pre><code class="haskell">data Shape = Circle Double | Square Double

area :: Shape -&gt; Double
area (Circle r) = 3.14 * r * r
area (Square s) = s * s

diameter :: Shape -&gt; Double
diameter (Circle r) = 2* r
diameter (Square s) = sqrt 2 * s</code></pre><br>
      .       ,    «  » —    .   «»     .       .<br>
<br>
     — ,    ,    .     Haskell — .    ,     .<br>
<br>
:<br>
<br>
<pre><code class="haskell">&gt; area (Circle 5)
78.5
&gt; diameter (Circle 5)
10.0
&gt; area (Square 5)
25.0
 diameter (Square 5)
7.0710678118654755</code></pre><br>
  —        —     ,    .<br>
<br>
,   Swift  Haskell  .    <strong>   </strong>,   ,  <strong>  </strong>,      . ,       ,   —  ,   — ,  ,   .<br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td> </td>
<td>Circle</td>
<td>Square</td>
</tr>
<tr>
<td>area</td>
<td>*</td>
<td>*</td>
</tr>
<tr>
<td>diameter</td>
<td>*</td>
<td>*</td>
</tr>
</tbody>
</table></div><blockquote> —       ,    —  .  —      ,      .</blockquote><br>
 ,         :    ?       .       .<br>
<br>
  ,    :<br>
<br>
<ul>
<li>  —         ;</li>
<li>  —   ,   ,     ,    .</li>
</ul><br>
 —     .<br>
<br>
<h3>  </h3><br>
,        Swift.<br>
<br>
  Haskell…<br>
<br>
<pre><code class="haskell">data Shape = Circle Double | Square Double</code></pre><br>
…  Swift   .<br>
<br>
<pre><code class="swift">enum Shape { 
    case Circle(radius: Double) 
    case Square(size: Double)
}</code></pre><br>
   .    «»    ,    Swift  «enum»,  . ,       .<br>
<br>
  Haskell…<br>
<br>
<pre><code class="haskell">area :: Shape -&gt; Double 
    area (Circle r) = 3.14 * r * r 
    area (Square s) = s * s</code></pre><br>
…  Swift .<br>
<br>
<pre><code class="swift">extension Shape {
    var area: Double {
        switch self {
            case .Circle(let r): return 3.14 * r * r 
            case .Square(let s): return s * s
        }
    }
}</code></pre><br>
,   —   .<br>
<br>
      <strong>Kotlin</strong>:<br>
<br>
<pre><code class="kotlin">sealed class Shape {
    data class Circle(val radius: Double): Shape() 
    data class Square(val size: Double): Shape()
}
fun area(sh: Shape): Double {
    return when (sh) {
        is Shape.Circle -&gt; 3.14 * sh.radius * sh.radius 
        is Shape.Square -&gt; sh.size * sh.size 
    }
}</code></pre><br>
 ,   — .<br>
<br>
    ,  Kotlin  Swift   ?     ,  , ,  .       ,        -,           .<br>
<br>
<h2> </h2><br>
       .    ,      ,      ,  ,          ,    .<br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td> </td>
<td>Circle</td>
<td>Square</td>
<td>x</td>
</tr>
<tr>
<td>area</td>
<td>*</td>
<td>*</td>
<td>?</td>
</tr>
<tr>
<td>diameter</td>
<td>*</td>
<td>*</td>
<td>?</td>
</tr>
<tr>
<td>f</td>
<td>?</td>
<td>?</td>
<td>?</td>
</tr>
</tbody>
</table></div><br>
      ,      ,     , -  —  .   .   :       —      .   , , .<br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td> </td>
<td>Circle</td>
<td>Square</td>
<td>x</td>
</tr>
<tr>
<td>area</td>
<td>*</td>
<td>*</td>
<td> + ()</td>
</tr>
<tr>
<td>diameter</td>
<td>*</td>
<td>*</td>
<td> + ()</td>
</tr>
<tr>
<td>f</td>
<td> + ()</td>
<td> + ()</td>
<td>?</td>
</tr>
</tbody>
</table></div><br>
         .    .<br>
<br>
       .      .   —  -      ,         —     ,   .             —     .<br>
<br>
<h3>  </h3><br>
   —       —  .  20   ,      .<br>
<br>
<ul>
<li> «Visitor». ,     ,     .   ,   .&nbsp;</li>
<li>.</li>
<li>  —  .</li>
<li> .</li>
<li> .</li>
</ul><br>
  ,       « »,      .    .       ,     —  ,   .<br>
<br>
<h2> </h2><br>
     ,     .<br>
<br>
   ,     : , , , .  ,       .<br>
<br>
<img src="https://habrastorage.org/webt/9m/de/9i/9mde9ivlsr1rca-aghsfsyn_sxu.png"><br>
<br>
    Haskell.        , ,     ,   «» ?<br>
<br>
  ,  «» —         .<br>
<br>
<strong>           —  «Composite»</strong>.    .    ,           .<br>
<br>
,     Kotlin —    .<br>
<br>
<pre><code class="kotlin">val a = "Hello " 
val b = "world"
val c = a + b</code></pre><br>
      , : «,   ?     ».     ,      —  <strong>    - </strong>.<br>
<br>
  —   HTTP-.   Kotlin   :<br>
<br>
<pre><code class="kotlin">val a = HttpReq("f","v1") 
val b = HttpReq("f2","v2")
val c = a + b</code></pre><br>
  Haskell  ,     .   HTTP- —  .          HTTP-.&nbsp;<br>
<br>
     . <strong>         </strong>.        -     .  —    ,      — ,     .       «optional chaining», ,  Swift.<br>
<br>
<pre><code class="swift">if let johnsStreet = john.residence?.address?.street
{ /* SUCCESS */ } else { /* FAILURE */ }</code></pre><br>
   ,    .   «john» —  .<br>
<br>
<ul>
<li><code>?.</code> ,    ,      false.&nbsp;</li>
<li>   ,     .</li>
<li>   .</li>
<li>  —  .</li>
</ul><br>
  :     ,  ,  .   —    .   ,    else —     .      .<br>
<br>
 Swift     .  ,   ,     ,    :       .<br>
<br>
           Haskell,    .<br>
<br>
<pre><code class="haskell">case residence john &gt;&gt;= address &gt;&gt;= street of
    Just johnsStreet -&gt; -- SUCCESS
    Nothing -&gt; -- FAILURE</code></pre><br>
 , <strong>&nbsp;«&gt;&gt;=» —     </strong>.       .<br>
<br>
 Swift  «optional chaining»     .  Kotlin         .  Haskell            ,      «&gt;&gt;=».&nbsp;<br>
<br>
    :<br>
<br>
<ul>
<li>  ,      ,       .</li>
<li> ,   Haskell.</li>
</ul><br>
  .             . ,               .  ,    —  ,       .<br>
<br>
<blockquote>    ,        —  .</blockquote><br>
 «»       .   —  ,     .      «»,     .    « »    .<br>
<br>
<h2> —    ?</h2><br>
     .      ,    —         .<br>
<br>
 ,  <strong> —  . </strong>       Haskell   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Build Systems a la Carte»</a> <strong> </strong>      .     Distinguished Paper Award  International Conference on Functional Programming (ICFP)  -  2018 .     Build-,   .<br>
<br>
     Build-    Build-     — .      .<br>
<br>
<pre><code class="haskell">data Store i k v</code></pre><br>
   :<br>
<br>
<ul>
<li>i —    ;</li>
<li>k —  , ,    ;</li>
<li>v —  ,    , ,  .</li>
</ul><br>
 —  .    —    ,   .        .&nbsp;<br>
<br>
  <strong></strong>.   ,       ,   .    ,      -  -, ,      .<br>
<br>
   — <strong>«Task» —    </strong>.<br>
<br>
<pre><code class="haskell">newtype Task c k v = Task { run :: forall f. c f =&gt; (k -&gt; f v) -&gt; f v }</code></pre><br>
    Haskell,    . ,  —    «f»,    .  ,        .<br>
<br>
 ?  «k -&gt; fv»       —    - .     .         .      Build-.<br>
<br>
      —  :<br>
<br>
<pre><code class="haskell">type Tasks c k v = k -&gt; Maybe (Task c k v) </code></pre><br>
  ,  ,        . «Maybe» —  -  «optional».  ,  -  - ,   .<br>
<br>
     Build-:<br>
<br>
<pre><code class="haskell">type Build c i k v = Tasks c k v -&gt; k -&gt; Store i k v
    -&gt; Store i k v</code></pre><br>
     .    k,    .  —           .   ,     .<br>
<br>
               .<br>
<br>
<ul>
<li>Make,</li>
<li>Shake —  Make  Haskell,</li>
<li>Bazel,</li>
<li>Excel.</li>
</ul><br>
     .  — Excel —    . Excel      —       .     ,  - . Make  Excel  - ,       .<br>
<br>
<h2> —   </h2><br>
     .<br>
<br>
<i> —  Haskell .     ,            .</i><br>
<br>
 ,  . -  —   .         ,   ,   .     ,   <strong> </strong>.<br>
<br>
<h3>    </h3><br>
,    Haskell:<br>
<br>
<pre><code class="haskell">h :: [a] -&gt; Int
h = length . filter p . map g . map f</code></pre><br>
    —    .     - ,  :<br>
<br>
<ul>
<li><code>map f</code> —      <code>f</code>;</li>
<li><code>map g</code> —      <code>g</code>;</li>
<li><code>filter p</code> —  :  ,  ,    ;</li>
<li><code>length</code> —     —        .</li>
</ul><br>
      :<br>
<br>
<em> — ,   ,    …    !   !</em><br>
<br>
 ,   .<br>
<br>
<h3>Fusion</h3><br>
     «fusion»,       .&nbsp;<br>
<br>
  «fusion»? -:           :<br>
<br>
<pre><code class="haskell">c := 0
foreach (x : xs)
    if p(g(f(x)))
        then c := c + 1</code></pre><br>
 ,   <strong> (!)</strong>,     <strong> (!)</strong>.    ,         ,      2-3  .<br>
<br>
<blockquote>,  , ,      .      —   .</blockquote><br>
         ,    .<br>
<br>
<h3>  GPU?  !</h3><br>
     Haskell,      :<br>
<br>
<pre><code class="haskell">dotp :: Acc (Vector Float) -&gt; Acc (Vector Float) -&gt; Acc (Scalar Float) 
dotp xs ys = fold (+) 0 (zipWith (*) xs ys)</code></pre><br>
,    Haskell:  2 ,  ,   . ,   Haskell        GPU.     GPU,     :  CUDA, Open CL — ,  .  Accelerate  Haskell  —   .<br>
<br>
 CUDA&nbsp;   100 ,         ,    .    !   ,     .   ,        .<br>
<br>
<h3></h3><br>
 —   .   ?       a, b, c   D.<br>
<br>
<pre><code class="haskell">f :: A -&gt; B -&gt; C -&gt; D
f a b c = ...</code></pre><br>
 ,        —     .  ,     :<br>
<br>
<ul>
<li><code>f :: A -&gt; B -&gt; C -&gt; D</code></li>
<li><code>f a :: B -&gt; C -&gt; D</code></li>
<li><code>f a b :: C -&gt; D</code></li>
<li><code>f a b c :: D</code></li>
</ul><br>
        ,   .   ,   ,  - ,   .         —  ,    ,   .<br>
<br>
   , ,  Scala  -.<br>
<br>
<pre><code class="scala">f :: A -&gt; (B , C) -&gt; D
f a p = …
    f :: A -&gt; B -&gt; C -&gt; D
    f a :: (B, C) -&gt; D
    f a p :: D</code></pre><br>
 : «   ,   .     ,     .  ,   — ».      .<br>
<br>
  ,         .<br>
<br>
<h3>    </h3><br>
    .  Haskell 15     QuickCheck,     .<br>
<br>
,  ,   :<br>
<br>
<pre><code class="haskell">reverse :: String -&gt; String
reverse = ...</code></pre><br>
  ,    .           ,    .<br>
<br>
<pre><code class="haskell">&gt; quickCheck (\s -&gt; reverse (reverse s) == s)
    +++ OK, passed 100 tests.</code></pre><br>
,          .      ,    100,   ,  ,    .<br>
<br>
       ,     ,        .  .     Haskell 15  .       . ,   Swift  Kotlin    .<br>
<br>
<h3>  </h3><br>
 ,   ?<br>
<br>
<pre><code class="haskell">abs :: Int -&gt; Int 
abs x = if x &lt; 0 then 0 - x else x

head :: [a] -&gt; a --      ! 
head (x:_) = x 

example :: Int -&gt; Int
example x = if abs x &lt; 0 then head [] else x</code></pre><br>
 ,      <b></b> .<br>
<br>
<pre><code class="haskell">head :: [a] -&gt; a --      ! 
head (x:_) = x </code></pre><br>
   ,  <code>head</code>   ,         —  .<br>
<br>
    «head»,    ? ,  LiquidHaskell   . LiquidHaskell —    Haskell-.<br>
<br>
<pre><code class="haskell">{-@ abs :: Int -&gt; { n : Int | 0 &lt;= n } @-} 
abs :: Int -&gt; Int 
abs x = if x &lt; 0 then 0 - x else x

{-@ head :: { xs : [a] | 1 &lt;= len xs } -&gt; a @-} 
head :: [a] -&gt; a --      ! 
head (x:_) = x 

{-@ head :: { xs : [a] | 1 &lt;= len xs } -&gt; a @-} 
head :: [a] -&gt; a --      ! 
head (x:_) = x </code></pre><br>
 ,    abs    ,    n.<br>
<br>
<pre><code class="haskell">{-@ abs :: Int -&gt; { n : Int | 0 &lt;= n } @-} 
abs :: Int -&gt; Int 
abs x = if x &lt; 0 then 0 - x else x</code></pre><br>
 ,        .<br>
<br>
<pre><code class="haskell">{-@ head :: { xs : [a] | 1 &lt;= len xs } -&gt; a @-} 
head :: [a] -&gt; a --      ! 
head (x:_) = x </code></pre><br>
 ,    ,   .   x    x.<br>
<br>
<pre><code class="haskell">{-@ example :: x : Int -&gt; { y : Int | x == y } @-} 
example :: Int -&gt; Int
example x = if abs x &lt; 0 then head [] else x</code></pre><br>
              ,    .     ,        .  ,   -     . -   -   , ,  Eiffel,  -   . <br>
<br>
<h3>   ?</h3><br>
  -:<br>
<br>
<pre><code class="haskell">type MyAPI = Get '[PlainText] String
    :&lt;|&gt; "conf" :&gt; Get '[JSON] String
    :&lt;|&gt; "year" :&gt; Get '[JSON] Int
    :&lt;|&gt; "like" :&gt; Get '[JSON] Bool
myAPI :: Server MyAPI 
    = root :&lt;|&gt; year :&lt;|&gt; conf :&lt;|&gt; like</code></pre><br>
 Haskell   Servant,     API   . ,      url  ,  ,    ,     JSON. ,     : String», Int», Bool.<br>
<br>
   .<br>
<br>
<pre><code class="haskell">root :: Handler String				
root = pure "Welcome to my REST API" 	
conf :: Handler String				
conf = pure "AppsConf"	   		
year :: Handler Int
year = pure 2019 conf
like :: Handler Bool
like = pure True</code></pre><br>
    —  ,    .<br>
<br>
 ,      .                 ,  ,    .  —   .<br>
<br>
<h2></h2><br>
  —  .      ,        .   .<br>
<br>
  —    <strong> </strong> «  Haskell».       2018 .     ,   .      Haskell.    600 ,   .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Haskell in Depth»</a>     .     ,  ,   .  «slbragilevsky»   42%.<br>
<br>
<blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Saint AppsConf</a>  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introductory-</a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>,       .    , ,     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>   ,        iOS, Android, -   —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   .  ,         ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>.<br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">telegram-</a>,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>.</blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462505/">https://habr.com/ru/post/fr462505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462489/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 374 (29 juillet - 4 août 2019)</a></li>
<li><a href="../fr462493/index.html">SGBD multimodèle - la base des systèmes d'information modernes?</a></li>
<li><a href="../fr462495/index.html">Evénements numériques à Moscou du 05 au 11 août</a></li>
<li><a href="../fr462501/index.html">Pourquoi ai-je besoin de ma propre autorité de certification</a></li>
<li><a href="../fr462503/index.html">À quoi servent les «signaux d'or» de la surveillance et du SRE?</a></li>
<li><a href="../fr462507/index.html">Quand le courrier est livré: lutter contre la perte de notifications push dans iOS</a></li>
<li><a href="../fr462509/index.html">Product Fest - Conférence sur la gestion des produits informatiques à laquelle vous souhaitez vous rendre</a></li>
<li><a href="../fr462511/index.html">Google Play Instantané. Refactoring à vie</a></li>
<li><a href="../fr462513/index.html">Délocalisation: préparation, sélection, développement du territoire</a></li>
<li><a href="../fr462515/index.html">Bugs lors de l'utilisation du clavier système</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>