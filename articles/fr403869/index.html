<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🔧 🙎🏼 🦋 Mon expérience de la création d'une maison «non intelligente» 👸🏼 👨🏼‍🎤 👨‍👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mon temps est venu de partager mon expérience de la création d'une maison «sans smart». Je ne veux pas vraiment m'engager dans des polémiques sur ce q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mon expérience de la création d'une maison «non intelligente»</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403869/">  Mon temps est venu de partager mon expérience de la création d'une maison «sans smart».  Je ne veux pas vraiment m'engager dans des polémiques sur ce qu'est une maison intelligente tout de même et ce qu'elle devrait pouvoir faire.  Dans mon cas, nous apprivoiserons les modules wifi Sonoff d'ITEAD et apprendrons à allumer / éteindre la "charge" du téléphone.  La publication expliquera comment flasher un module, connecter un capteur de température / humidité au module et apprendre à contrôler le module via les applications HomeKit ("Home") et Siri.  Ajoutez à tout cela le système de gestion domotique Smart Domoticz sur Raspberry Pi.  Ajoutez le wifi à la machine à café et apprenez à Siri à ouvrir l'interphone. <br><a name="habracut"></a><br>  J'ai commandé trois modules sonoff conventionnels et un SV (tension sûre) pour les tests.  Au moment de la commande, le module habituel de 4,85 est toujours vert, en stock, bien que le stock semble perpétuel.  SV à un prix similaire de 4,85.  Avec la livraison en Ukraine, le coût total était de 26 verts.  La Chine et la Chine en Afrique, en Chine, l'argent a disparu, et les marchandises ont encore trois semaines à attendre, et peut-être plus.  Vous pouvez certainement acheter en Ukraine et ne pas attendre, mais un peu plus cher. <br><br><h2>  Les joies des premiers pas vers une maison «sans smart» </h2><br>  Quatre modules sont venus, les habituels sont emballés dans des boîtes, et le SV est juste dans un sac antistatique.  Le boîtier et la taille ravis. <br><br><img src="https://habrastorage.org/web/b03/b90/90e/b03b9090e5f2437fa0fc84260c747fff.jpg"><br><br>  Je ne décrirai pas le processus d'installation du logiciel natif e-Welink et la connexion du module au réseau domestique, les instructions dans toutes les langues sur Internet, prenez-le - je ne veux pas. <br><br>  Sans y réfléchir à deux fois, nous entrons dans le couloir et ajoutons ce module au plafonnier.  Le module est petit, il y a beaucoup d'espace dans la lampe.  La lumière reste souvent allumée dans le couloir, et maintenant vous pouvez éteindre la lumière dans le lit devant le téléviseur.  L'appartement a déjà été réparé partout et des interrupteurs conventionnels sont installés.  Ne touchez pas la réparation et n'utilisez pas le câblage existant. <br><br>  Il s'avère que la logique de travail suivante: <br><br>  - L'interrupteur est éteint, alors le module ne fonctionne pas non plus; <br>  - L'interrupteur est allumé, puis la lumière peut être éteinte depuis l'application; <br>  - L'interrupteur est allumé et la lumière a été éteinte via l'application, puis pour allumer la lumière, il est nécessaire d'éteindre / allumer l'interrupteur, en réglant d'abord le module «alimentation dans la section» sur ON (lorsque le module relais est allumé, la lumière s'allume). <br><br>  Réjouis-toi. <br><br>  Le deuxième module a ajouté à la lampe dans la chambre.  Ensuite, la lampe n'était pas aussi spacieuse que dans le couloir.  J'ai dû limer le boîtier un peu et réduire / couper le bouton, il ne tenait pas en hauteur.  Ensuite, le module est soigneusement caché dans la lampe. <br><br><h3>  On refait le switch sous le bouton </h3><br>  Les interrupteurs de la série Schneider Unica sont installés dans l'appartement.  Vous pouvez refaire un tel interrupteur en mettant un ressort sous la clé et le lieu a déjà été préparé à l'avance. <br><br>  Pendant qu'ils écrivent sur Internet, vous pouvez essayer le ressort à partir de stylos à bille.  Mes tentatives pour installer un ressort à partir d'un stylo à bille ont échoué.  Un ressort très faible et un manque de rigidité ramènent la clé dans sa position d'origine. <br><br>  Le ressort Schneider d'origine a les caractéristiques suivantes d = 3,6 mm, épaisseur de fil 0,6 mm, hauteur 10 mm.  Je ne l'ai pas tenu moi-même, je ne l'ai pas trouvé en vente, j'ai trouvé des informations sur le printemps sur l'un des forums. <br><br>  Après avoir fouillé la maison, un ressort similaire a été trouvé, assez élastique et ajouté avec succès à l'interrupteur.  Sans dépenser un sou, nous obtenons un bouton au lieu d'un interrupteur. <br><br><img src="https://habrastorage.org/web/092/72f/5ea/09272f5ea6f34969a9ce5c4774039141.jpg"><br>  <i>Il ressemble à un interrupteur avec un ressort installé.</i> <br><br>  Maintenant, nous avons toujours le module avec alimentation et dans le réseau.  Dans les paramètres, nous définissons que lorsque l'alimentation est appliquée au module, le module change l'état du relais. <br><br>  La logique du travail dans ce cas: <br><br>  - sur le module sonoff il y a toujours de l'alimentation, allumant et éteignant la lumière via l'application; <br>  - une pression sur le bouton coupe l'alimentation et le relais change d'état dans le sens inverse. <br><br>  Nous pouvons contrôler la charge à la fois sur le commutateur et via l'application.  L'application et le module natifs fonctionnent via un serveur chinois. <br><br>  Oui, oui, je sais, pendant la nuit il y a un saut / déconnexion, la mise sous tension et la lumière s'allume.  Pendant le fonctionnement du module, cela ne s'est jamais produit auparavant, mais nous vivons en Ukraine et les gros titres sont pleins de promesses de pannes. <br><br>  Sur la table est le troisième module.  Où es-tu cher?  Et nous choisirons votre natif et nous nous moquerons! <br><br><h2>  Installer un firmware alternatif </h2><br>  Une autopsie a montré <s>que le patient est décédé d'une autopsie,</s> qu'il y a une place sous le peigne pour 5 broches. <br><br><img src="https://habrastorage.org/web/643/e5a/1f4/643e5a1f425645aab6056fce519173d8.jpg"><br><br>  Depuis le bouton sur le boîtier (3,3 V Rx, Tx, GND, GPIO 14).  Fer à souder à la main et connectez l'adaptateur USB à TTL.  Dans mon adaptateur usb vers ttl, il y a 3,3 V, je n'ai pas essayé d'alimenter le module à partir de 5 V et je ne le recommande pas. <br><br>  Vient ensuite la partie logicielle.  Il existe un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">firmware</a> pour ces modules sur le github.  Maintenant, une nouvelle version du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">firmware</a> est déjà apparue.  À quoi servent ces micrologiciels?  Il y a le contrôle Web, le protocole mqtt, OTA (Over the air) - firmware over the air.  Quant au firmware natif, le protocole mqtt dans les promesses d'ajouter, OTA est également là, mais uniquement pour le sien.  L'inconvénient du firmware natif est qu'il ne fonctionne que lorsqu'il est connecté au réseau mondial.  Pourquoi en avons-nous besoin?  À ce stade, ce n'est pas nécessaire ... d'autant plus que nous ne savons pas quoi et où notre module envoie. <br><br>  Installez l'IDE Arduino.  J'ai installé la version portable 1.8.1.  Le micrologiciel nécessite la version IDE 1.6.10 ou supérieure. <br><br>  - Ajout de la prise en charge des modules ESP8266 <br>  - Installer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pubsubclient</a> <br>  ○ Recherchez le fichier src \ PubSubClient.h et changez la valeur de MQTT_MAX_PACKET_SIZE en 400 ou plus (maintenant les versions de Tasmot demandent une valeur de 500 ou plus). <br><br>  Téléchargez le croquis, compilez-le avec les doigts croisés et espérez que tout se passe bien.  Ce n'était pas mon cas, nous avons lu l'erreur et ajouté les bibliothèques nécessaires qui n'étaient pas là.  Quelques heures de tourments et un firmware sans erreurs.  (Le problème principal était que j'ai installé l'IDE Arduino sur Win XP).  Modifiez le fichier de configuration et remplissez notre firmware. <br><br>  Ce minimum que j'ai décidé dans User_config.h. <br><br><div class="spoiler">  <b class="spoiler_title">User_config.h</b> <div class="spoiler_text"><code>#define PROJECT "bath" //   -         <br> #define STA_SSID1 "your_wifi_station_id" //    <br> #define STA_PASS1 "your_pass" //     <br> #define STA_SSID2 "your_wifi_station_id_plus" //      <br> #define STA_PASS2 " " //      <br> <br> #define SYS_LOG_HOST "192.168.." //  ,    raspberry pi,    <br> //#define USE_I2C //      <br> //#define USE_IR_REMOTE <br> //#define USE_WS2812</code> <br> </div></div><br>  Selon la version, d'autres paramètres peuvent être ajoutés que je désactiverais inutilement.  Dans le dernier firmware (Tasmota), de plus en plus de paramètres peuvent être définis via le menu des paramètres Web et dupliqués avec User_config.h. <br><br><h3>  Remplissage d'esquisse: </h3><br>  - coupez l'alimentation du module (de toute manière appropriée); <br>  - maintenez le bouton sur le module et branchez l'alimentation.  Le module est prêt à recevoir le firmware; <br>  - cliquez sur OK dans l'IDE et en croisant à nouveau les doigts, nous attendons que le firmware commence le téléchargement sur le module. <br><br>  En cas d'erreur, nous vérifions les fils, et si tout est bien vissé partout, ou peut-être qu'il n'y a pas assez de puissance USB-to-tl et nous devons prendre une source externe.  Nous dansons avec un tambourin et répétons la procédure. <br><br>  <b>Important: l'</b> <i>alimentation du module n'est fournie que par des broches de 3,3 V.</i>  <i>Il ne peut pas être connecté à la charge électrique via l'alimentation du module lui-même.</i>  <i>Les utilisateurs expérimentés écrivent que fournir 220v au module avec le micrologiciel le transforme en brique, petite mais en brique.</i>  Je n'ai pas essayé, je ne sais pas.  Par conséquent, lors du flashage du module, seuls quatre câbles aux broches y sont connectés, et nous retirons tout le reste. <br><br>  Si tout va bien, après le redémarrage, le module doit se connecter au point d'accès, trouver l'adresse IP et y accéder dans le navigateur. <br><br><img src="https://habrastorage.org/web/c96/316/9a0/c963169a05594c6791d9dfdd706b365e.png"><br>  <i>L'apparence de la page de démarrage.</i> <br><br>  Si le module ne se connecte pas à votre point d'accès, continuez à danser avec un tambourin.  Il existe différentes solutions, dans le cadre de cet article je ne décrirai pas.  J'ai vérifié les configurations et je viens de flasher à nouveau le module. <br><br>  Nous avons maintenant un accès Web au module et à ses paramètres, mqtt, les fils peuvent être placés dans un tiroir, le firmware / mise à jour se fait par voie aérienne. <br><br><h3>  Et où est Siri? </h3><br>  Tout cela est certainement merveilleux, il est temps d'apprendre à gérer ce bien depuis le téléphone.  J'ai essayé plusieurs programmes de l'application pour iPhone et je n'ai rien obtenu d'intéressant.  Il a été décidé de puiser dans l'application Home ou HomeKit, qui permet également de contrôler les modules via Siri. <br><br>  On retrouve sur l'étagère Raspberry pi et on se connecte au réseau.  Dans mon cas, il y avait déjà une "framboise" connectée au réseau.  Comment installer l'OS et connecter les "framboises" pour le décrire n'a aucun sens. <br><br>  Pour communiquer avec HomeKit, vous devez installer Homebridge.  Homebridge est un serveur NodeJS fonctionnant sur votre réseau local et émulant l'API HomeKit iOS. <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get upgrade sudo apt-get install git make sudo apt-get install g++</code> </pre><br>  Selon votre système, vous devrez peut-être mettre à jour le compilateur C ++. <br><br>  Installez Nodejs.  Nous allons au magasin et sélectionnons la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dist</a> appropriée.  Copiez l'adresse de la distribution et plus loin dans l'image <br><br><pre> <code class="bash hljs">wget https://nodejs.org/dist/v4.0.0/node-v4.0.0-linux-armv6l.tar.gz tar -xvf node-v4.0.0-linux-armv6l.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> node-v4.0.0-linux-armv6l sudo cp -R * /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/</code> </pre> <br>  J'ai installé la v6.9.4 pour moi, maintenant il y en a de plus récentes. <br><br>  Ajoutez d'autres packages nécessaires: <br><br><pre> <code class="bash hljs">sudo apt-get install libavahi-compat-libdnssd-dev</code> </pre> <br>  Installez Homebridge lui-même: <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge</code> </pre><br>  Si cela ne fonctionne pas, essayez: <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge hap-nodejs node-gyp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/homebridge/ sudo npm install --unsafe-perm bignum <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/hap-nodejs/node_modules/mdns sudo node-gyp BUILDTYPE=Release rebuild</code> </pre> <br>  Après avoir installé Homebridge, vous devez installer quelques plugins supplémentaires, puis procéder à la modification des paramètres du serveur Homebridge. <br><br>  L'installation des plugins se fait de la même manière que le homebridge lui-même <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge-plugin-name</code> </pre> <br>  Nous trouvons le plugin requis dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le gestionnaire de paquets</a> .  Nous y trouvons un exemple de paramètres qui devront être ajoutés à nos paramètres. <br><br>  Pour un simple interrupteur. <br><br><pre> <code class="bash hljs">npm install -g homebridge-mqttswitch</code> </pre> <br>  Accédez aux paramètres, créez, s'il n'est pas déjà créé, le fichier de configuration: <br><br><pre> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre> <br>  Le fichier de configuration est le suivant: <br><br><div class="spoiler">  <b class="spoiler_title">config.json</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"bridge"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Homebridge"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"CC:22:3D:E3:CE:30"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-number"><span class="hljs-number">51826</span></span>, <span class="hljs-attr"><span class="hljs-attr">"pin"</span></span>: <span class="hljs-string"><span class="hljs-string">"031-45-154"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"platforms"</span></span>: [ ], <span class="hljs-attr"><span class="hljs-attr">"accessories"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"accessory"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqttswitch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://192.168.178.123:1883"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"caption"</span></span>: <span class="hljs-string"><span class="hljs-string">"room"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"statusGet"</span></span>: <span class="hljs-string"><span class="hljs-string">"stat/sleeping/POWER"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusSet"</span></span>: <span class="hljs-string"><span class="hljs-string">"cmnd/sleeping/power"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"onValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"offValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"integerValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"true"</span></span> } ] }</code> </pre><br></div></div><br>  Avant d'enregistrer le fichier de paramètres, vérifiez, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Après avoir enregistré, essayez d'exécuter: <br><br><pre> <code class="bash hljs">Homebridge</code> </pre> <br>  Si tout commence, il nous écrira, quelque chose comme: <br><br><pre> <code class="bash hljs"> 11:27:43 PM] [] Initializing mqttswitch accessory...</code> </pre><br>  Le code 031-45-154 pour la connexion y sera indiqué, s'il n'a pas été modifié dans les paramètres. <br><br>  Maintenant, allumez le téléphone / planest exécutant iOS.  Nous trouvons l'application «Home» ou «HomeKit» → Ajoutez un accessoire et attendez que notre accessoire «Homebridge» apparaisse, ajoutez-le, entrez le code, attribuez une pièce pour le commutateur.  Et le tour est joué: «Salut Siri, allume / éteint la lumière dans la pièce» - cela a fonctionné.  «Hi Siri» sur les téléphones de la 5e série et ci-dessous ne fonctionne que lorsqu'il est connecté à la charge. <br><br>  Si tout fonctionne correctement pour nous, il reste à ajouter Homebridge au démarrage.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instructions complètes</a> en anglais.  Dans mon cas, via <code>init.d</code> , créez le fichier <code>sudo nano /etc/init.d/homebridge</code> <br>  Copiez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle</a> dans un fichier de ce fichier et modifiez-le sous homebridge <br><br><div class="spoiler">  <b class="spoiler_title">/etc/init.d/homebridge</b> <div class="spoiler_text"> <code>#!/bin/sh <br> ### BEGIN INIT INFO <br> # Provides: homebridge <br> # Required-Start: $network $remote_fs $syslog <br> # Required-Stop: $remote_fs $syslog <br> # Default-Start: 2 3 4 5 <br> # Default-Stop: 0 1 6 <br> # Short-Description: Start daemon at boot time <br> # Description: Enable service provided by daemon. <br> ### END INIT INFO <br> <br> dir="/home/pi" <br> cmd="DEBUG=* /usr/local/bin/homebridge" <br> user="pi" <br></code> <br></div></div><br>  Enregistrez, quittez. <br><br><pre> <code class="bash hljs">sudo chmod 755 /etc/init.d/homebridge sudo update-rc.d homebridge defaults</code> </pre> <br>  Homebridge va maintenant démarrer au démarrage du système. <br><br><h3>  Nous fixons le capteur DHT22 (température / humidité) </h3><br>  Un lecteur attentif a remarqué qu'il y a 5 broches sur le peigne et l'une d'entre elles est GPIO 14. Encore une fois, nous prenons le fer à souder dans nos mains et soudons les trois fils à 3,3 V, GND, GPIO 14 pour le capteur de température d'humidité DHT22.  Vous pouvez utiliser un autre capteur (ds18b20, DHT 11 ou un autre qui est pris en charge par le firmware), mais c'était DHT22 dans ma boîte.  Le capteur était connecté via un connecteur, qui était fixé sur le côté du boîtier natif.  Si nécessaire, il sera possible de connecter un autre capteur sans scalpel et fer à souder. <br><br><img src="https://habrastorage.org/web/b68/643/a1f/b68643a1f956407286a799bb1b03d223.jpg"><br><br>  Dans l'image, je viens de fixer le connecteur, je n'ai pas encore connecté les fils.  Dans le firmware Sonoff-MQTT-OTA-Arduino, vous devez vérifier les paramètres: <br><br><pre> <code class="hljs lisp">#define DHT_PIN <span class="hljs-number"><span class="hljs-number">14</span></span> // GPIO <span class="hljs-number"><span class="hljs-number">14</span></span> = AM2301 (<span class="hljs-name"><span class="hljs-name">Sonoff_TH10A</span></span>(<span class="hljs-number"><span class="hljs-number">16</span></span>A), Sonoff SV) #define DHT_TYPE AM2301 // DHT module type (<span class="hljs-name"><span class="hljs-name">DHT11</span></span>, DHT21, DHT22, AM2301, AM2302 or AM2321)</code> </pre> <br>  Pour le firmware Tasmota, le type de broche et de capteur peut être spécifié dans les paramètres Web. <br><br>  Si tout est correctement connecté et configuré, alors en allant sur l'interface Web, nous verrons l'état du relais et les lectures du capteur.  Dans les paramètres, vous pouvez définir le taux d'interrogation du capteur.  La valeur par défaut est 300 secondes (5 minutes). <br><br><img src="https://habrastorage.org/web/3a2/4a3/3fb/3a24a33fbb3647979f69354039fb808c.png"><br><br>  Nous plongons dans la recherche d'un plug-in pour Homebridge pour travailler avec un capteur de température et d'humidité.  Nous devons maintenant afficher ces lectures en annexe.  J'ai réussi à faire tout cela, mais à mon humble avis c'était mon râteau et ne devrait pas être fait. <br><br>  Pourquoi?  Tout est très simple, il suffit de visser le capteur au sonoff n'a pas de sens, vous devez activer / désactiver quelque chose en fonction de ces lectures.  Mais dans les paramètres du firmware, il n'y a pas une telle possibilité, il est possible de configurer l'application Home / HomeKit à de telles fins, mais vous avez besoin d'une tablette qui sera constamment à la maison ou d'Apple TV.  La présence dans le firmware de la capacité de communiquer avec Domoticz m'a conduit sur cette voie épineuse vers l'installation du système de contrôle domotique Smart Home. <br><br>  Sous la forme d'une petite digression, je dirai que j'ai essayé de connecter des plugins au homebridge qui vous permettent de transférer le flux RTSP depuis une webcam.  J'ai une caméra IP TOP-201 de la part de mes homologues chinois. <br><br>  Installez le plugin: <br><br><pre> <code class="bash hljs">npm install -g --unsafe-perm homebridge-camera-ffmpeg</code> </pre> <br>  Ajoutez au fichier de paramètres: <br><br><div class="spoiler">  <b class="spoiler_title">config.json</b> <div class="spoiler_text"><pre> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">"platforms"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"Camera-ffmpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"cameras"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"top-201"</span></span>, <span class="hljs-string"><span class="hljs-string">"videoConfig"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"-re -i rtsp://admin@192.168.178.10:554/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp?real_stream"</span></span>, <span class="hljs-string"><span class="hljs-string">"maxStreams"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"maxWidth"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>, <span class="hljs-string"><span class="hljs-string">"maxHeight"</span></span>: <span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-string"><span class="hljs-string">"maxFPS"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> } } ]</code> </pre> <br></div></div><br>  De plus, une image de l'appareil photo apparaît dans l'application HomeKit, mais tout cela a fonctionné très lentement et il n'y avait pas besoin de cet appareil photo.  Pour éviter de charger inutilement le système, j'ai supprimé la caméra ip.  Revenons à l'installation d'un système de gestion «sans maison intelligente». <br><br><h3>  Installer et configurer Domoticz pour les modules Sonoff </h3><br>  Putty → ssh → et encore on cueille la framboise.  Étonnamment, l'installation dans mon cas n'a pas nécessité de danser avec un tambourin et c'était suffisant <br><br><pre> <code class="bash hljs">sudo curl -L install.domoticz.com | sudo bash</code> </pre><br>  Ajouter un démarrage automatique: <br><br><pre> <code class="bash hljs">sudo cp domoticz.sh /etc/init.d sudo chmod +x /etc/init.d/domoticz.sh sudo update-rc.d domoticz.sh defaults</code> </pre><br>  Si nécessaire, modifiez certains paramètres: <br><br><pre> <code class="bash hljs">sudo nano /etc/init.d/domoticz.sh</code> </pre> <br>  Ouvrez l'adresse des framboises <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">192.168.xxx.xxx</a> : 8080.  Et ils devraient aller sur la page domotique.  De plus, la configuration et l'ajout de capteurs ont déjà lieu via le Web. <br><br><img src="https://habrastorage.org/web/130/93c/ab8/13093cab88b54ac498fbd15d17d4536a.png"><br>  <i>Des capteurs Sonoff et un capteur de rue ont déjà été ajoutés à la capture d'écran.</i> <br><br>  Pour ajouter des capteurs / commutateurs, accédez à Configuration → matériel et ajoutez Dummy (ne fait rien, utilisez uniquement les commutateurs virtuels).  Notre «mannequin» apparaîtra dans la liste des appareils.  En cliquant dessus sur Créer un capteur virtuel, appelez notre capteur / commutateur et sélectionnez le type requis dans la liste.  Maintenant, dans l'onglet Configuration → Périphériques, un nouveau périphérique apparaîtra et vous pouvez maintenant y voir l'idx du périphérique. <br><br>  Nous déchirons la face Web de notre commutateur / capteur et enregistrons la configuration → domoticz → idx de notre commutateur.  Dans le nouveau firmware Tasmota, il est possible de spécifier plusieurs idx.  Pour relais / interrupteurs et séparément pour GPIO.  Selon le module, il peut s'agir d'un capteur supplémentaire ou plus, car dans la version SV, il y a en plus trois broches qui peuvent être affectées à leur rôle dans votre système (relais / capteurs). <br><br>  Dans l'ancien firmware (Sonoff-MQTT-OTA-Arduino) pour le module, je devais effectuer quelques danses avec un tambourin, afin que Domoticz puisse voir les lectures d'humidité et de température.  Je pense qu'il ne sert à rien de le décrire ici, pour le nouveau firmware (Tasmota) il n'est pas nécessaire. <br><br>  Selon les lectures d'humidité, vous pouvez contrôler la hotte dans la salle de bain.  Lorsqu'il y a un ventilateur d'extraction, il y a suffisamment d'espace pour le module et nous avons déjà tout ce dont nous avons besoin.  Il ne reste plus qu'à ajuster le contrôle des lectures d'humidité. <br><br>  Configuration → Plus d'options → Événements <br><br><img src="https://habrastorage.org/web/6ec/865/203/6ec865203b894f579e3fb3c1f0d62261.png"><br><br>  En utilisant le constructeur, nous créons la logique de fonctionnement du capot (comme dans l'image).  Vous pouvez toujours sur Lua, mais ce n'est pas mon cas.  Une expérience supplémentaire a montré que 5 minutes d'interrogation du capteur sont trop grandes et je l'ai réduit à 3 minutes.  Maintenant, sous la douche, lorsque l'humidité dépasse 70%, la hotte se met en marche.  Par la suite, lorsqu'il est réduit en dessous de 45%, il s'éteint.  Données d'humidité sélectionnées expérimentalement.  Le seul point négatif, ou ce n'est peut-être pas un inconvénient, mais une caractéristique du système, si vous forcez la hotte à être allumée en appuyant sur un bouton, puis après 3 minutes, après avoir interrogé le capteur d'humidité, le système s'éteindra. <br><br>  Mais qu'en est-il de Siri?  Il s'est avéré que tout est très simple. <br><br><pre> <code class="bash hljs">sudo npm install -g -g --unsafe-perm homebridge-edomoticz</code> </pre><br>  Et ajouter aux paramètres <br><br><pre> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre><br><pre> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://127.0.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"topic_prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"homebridge"</span></span>, <span class="hljs-string"><span class="hljs-string">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"bar"</span></span></code> </pre><br>  Et lorsque vous démarrez Homebridge, nous obtenons <br><br><pre> <code class="bash hljs">[5/8/2017, 11:42:30 PM] [eDomoticz] You have 10 devices defined <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Domoticz. [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">'bath-temp'</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">''</span></span>...</code> </pre><br>  Tous les appareils que nous avons ajoutés à Domotics seront désormais affichés parmi nos appareils dans Homekit et vous pouvez les contrôler via un ami Siri.  Le besoin d'autres plugins pour Homebridge a en quelque sorte disparu. <br><br>  Nous avons un tas de Domoticz-Homebridge et tout fonctionne très bien et de manière stable.  Déjà testé pas le premier mois. <br><br>  Un capteur de température / humidité DHT22 d'anciens métiers est fixé au Raspberry pi et les données sont transmises à narodmon.ru avec un script python toutes les 10 minutes.  Ajoutez quelques lignes à un script existant. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#domoticz settings IP = '192.168..' #IP domoticz PORT = '8080' #port of server IDX_1 = '7' #IDX of the DHT temp sensor //…. ,        narodmon.ru url = 'http://{}:{}/json.htm?type=command¶m=udevice&amp;nvalue=0&amp;idx={}&amp;svalue={}'.format(IP, PORT, IDX_1, sensor_value_1) request = urllib2.Request(url) response = urllib2.urlopen(request)</span></span></code> </pre><br>  Dans Domoticz, nous ajoutons un capteur virtuel supplémentaire.  Et maintenant, nous pouvons également voir la température et l'humidité dans la rue, à la fois sur le Web sur notre page de maison locale et dans l'application iOS. <br><br>  À qui mqtt est plus proche, les lectures du capteur pourraient être envoyées via mqtt. <br><br><pre> <code class="python hljs"> playload = <span class="hljs-string"><span class="hljs-string">'{{ "idx": {} , "nvalue" : {}, "svalue" : "1" }}'</span></span>.format(IDX_1, humidity) client.publish(TOPIC_DOMOTICZ, playload, qos =<span class="hljs-number"><span class="hljs-number">0</span></span> , retain =<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-comment"><span class="hljs-comment">#publish</span></span></code> </pre><br><h2>  Ajoutez le Wifi à la machine à café. </h2><br>  Pendant que ma machine est en réparation et attend que l'unité de commande arrive d'Allemagne, j'ai reçu une machine à café Delonghi en cadeau.  Sur le panneau, nous avons un bouton marche / arrêt, pour faire un petit café double et deux autres que je n'utilise pas car  Je ne fouette pas le lait avec de la vapeur, je ne bois pas de latte et autres boissons.  L'inconvénient est que le café ne se moud pas lui-même, il faut le remplir de moulu et d'une tasse. <br><br>  Pour une machine à café, j'utilise Sonoff SV.  Les broches 3,3v, Rx, Tx, GND sont signées.  Séparément, le GPIO 4, 5, 14 est toujours affiché sur la carte Micrologiciel pour la même procédure que celle décrite ci-dessus. <br><br>  Nous ouvrons l'appareil et arrivons au tableau avec des boutons. <br><br>  La carte a une alimentation de 5 V, ce qui est suffisant pour alimenter notre module sans fil sonoff sv.  Il n'a pas été difficile de trouver où nous avions le 5c chéri. <br><br>  Appuyer sur les boutons court-circuite simplement le signal à la masse.  Nous connectons notre module selon le schéma. <br><br><img src="https://habrastorage.org/web/a3c/559/ba5/a3c559ba5c1f48d6b552aaddaa448209.png"><br><br>  Comme vous pouvez le voir sur le schéma, je n'ai connecté que deux boutons: on / off et faire du café.  Par analogie, vous pourriez créer tous les autres boutons.  Sur sonoff sv, nous avons une sortie 3 broches vers la carte, un relais, et vous pouvez également utiliser Rx, Tx (dans le dernier firmware Tasmota). <br><br><img src="https://habrastorage.org/web/a62/efb/5b0/a62efb5b0ea54284b0406b4f16595145.png"><br><br>  Nous collectons tout selon le schéma, nous trouvons un endroit approprié à l'intérieur de la machine à café.  Dans les paramètres du module de l'interface Web, ajoutez un deuxième relais à GPIO5.  Dans le menu "console" définissez les paramètres suivants: <br><br><pre> <code class="hljs ruby">PowerOnState <span class="hljs-number"><span class="hljs-number">0</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/   ,     . PulseTime1 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   0,1 ,      PulseTime2 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     1 . 1  2     .</span></span></code> </pre> <br>  Dans les paramètres Domotics, créez deux autres «capteurs virtuels» et ajoutez leur idx aux paramètres du module dans le menu des paramètres Domotics (Configuration → Configurer Domoticz → IDX 1 et IDX 2). <br><br>  En conséquence, nous obtenons deux autres commutateurs, dont l'un appuie sur le bouton marche / arrêt de la machine à café et le second appuie sur le bouton de préparation du café. <br><br>  Pour faire du café, de toute façon, vous devez marcher avec vos jambes, mais vous devez verser du café.  Mais allumer la machine est pratique.  À partir du moment où vous l'allumez et avant de faire du café, vous avez besoin de temps pour réchauffer la machine.  Par conséquent, assis en travaillant dans la pièce, vous pouvez allumer la machine à café à distance et après un certain temps déjà piétiner vos jambes et vous faire un verre. <br><br>  Il sera plus utile dans un tel interrupteur sur une machine entièrement automatique dans une machine à café, il suffit de penser à mettre la tasse à l'avance.  Nous attendons le tableau de contrôle. <br><br><h2>  Ajouter le wifi pour ouvrir la porte avec l'interphone Vizit </h2><br>  Dans le couloir commun, le vestibule près de l'ascenseur est fermé par une porte avec une serrure magnétique et un système d'accès Vizit.  Le système a été installé après la réparation et le bouton pour ouvrir la porte du vestibule de l'appartement n'a pas été maintenu.  Pour démarrer les invités, vous devez aller à la porte et ouvrir avec le bouton pour ouvrir la porte dans le couloir.  Unité de contrôle KTM-602M. <br><br><img src="https://habrastorage.org/web/771/ea1/9ab/771ea19abd1144e4b95e39f8ffbe2c73.jpg"><br><br>  La fermeture de OP + GND ouvre la porte / déconnecte l'aimant pendant 7 secondes. <br><br>  Nous partageons l'alimentation du module sonoff sv et du relais en retirant deux résistances, comme indiqué ci-dessous dans l'image. <br><br><img src="https://habrastorage.org/web/c31/85f/644/c3185f6440db4066bf6cf3fd1336d4af.png"><br><br>  On connecte OP à l'entrée relais "entrée +", à la sortie du relais "sortie +" on fixe GND.  Entre l'ELC et le GND de l'unité de contrôle 18v à partir de laquelle nous alimentons le module lui-même. <br><br>  Nous ajoutons la sonnette de porte «cloche de porte» aux Domotiks et maintenant Siri peut nous aider à ouvrir les portes pour les invités. <br><br>  L'assistant Siri reconnaît la commande vocale "Ouvrir la porte", mieux que "allumer la machine à café". <br><br>  Je me suis arrêté là avec la décoration des modules sonoff. <br><br><h2>  Petit bonus </h2><br>  Une fois qu'un tel alcool aura disparu, nous mettrons également le téléviseur sous / hors tension.  Éteindre et allumer le téléviseur n'a rien à voir avec les modules wifi.  Le téléviseur est à proximité de Raspberry Pi.  Ici, une LED IR et une paire de résistances de différentes valeurs nominales nous aident.  Nous installons lirc, là, dans les bases de données, nous trouvons les paramètres de votre télécommande / TV. <br><br>  Pour travailler avec Domotics, nous exécutons un petit script python qui traduit nos souhaits d'allumer / éteindre le téléviseur de mqtt à lirc. <br><br><div class="spoiler">  <b class="spoiler_title">mqtt dans lirc</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> paho.mqtt.client <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mqtt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json IP = <span class="hljs-string"><span class="hljs-string">'192.168..'</span></span> PORT = <span class="hljs-string"><span class="hljs-string">'1883'</span></span> device = {<span class="hljs-number"><span class="hljs-number">18</span></span> : <span class="hljs-string"><span class="hljs-string">'OpenBox'</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span> : <span class="hljs-string"><span class="hljs-string">'PHILIPS'</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span> : <span class="hljs-string"><span class="hljs-string">'air'</span></span>} TOPIC_DOMOTICZ = <span class="hljs-string"><span class="hljs-string">'domoticz/in'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(device, command)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># """ Sends IR-signal to the device """ os.system("irsend SEND_ONCE '" + device + "' '" + command + "'") # The callback for when the client receives a CONNACK response from the server. def on_connect(client, userdata, flags, rc): print("Connected with result code "+str(rc)) # Subscribing in on_connect() means that if we lose the connection and # reconnect then subscriptions will be renewed. client.subscribe(TOPIC_DOMOTICZ,0) def on_publish(client,userdata,result): #create function for callback print("data published \n") pass # The callback for when a PUBLISH message is received from the server. def on_message(client, userdata, msg): domoticz = json.loads(msg.payload) if domoticz ['idx'] in device.keys(): idx = domoticz ['idx'] dev = device [idx] command = 'KEY_POWER' send (dev, command) client = mqtt.Client() client.on_connect = on_connect client.on_message = on_message client.on_publish = on_publish client.connect(IP, PORT, 60) client.loop_forever()</span></span></code> </pre> <br></div></div><br>  Nous ajoutons à Domoticz trois autres boutons virtuels pour le téléviseur, le récepteur et le climatiseur. <br>  Ce n'est pas pratique de contrôler le téléviseur à partir du téléphone, de toute façon la télécommande est en quelque sorte apparentée.  Mais éteignez la télé quand j'ai oublié et déjà quitté la chambre un joli bonus. <br><br>  Un bon ajout à tout cela est la disponibilité de la montre Pebble de l'application Pemoticz.  Ajout de l'adresse dans les paramètres et l'application a tiré tous les commutateurs.  Aucun Siri ne peut désormais allumer la machine à café / ouvrir les portes et éteindre les lumières.  La montre est généralement à portée de main et le téléphone peut ne pas être à proximité.  Cela a aussi ses avantages.  Je n'ai pas abordé le sujet de la reconnaissance vocale pendant des heures à les flasher, mais c'est également possible. <br><br><img src="https://habrastorage.org/web/651/e3d/d81/651e3dd81b654be3b0fc324f44dc8b9e.png"><br><br>  Sur ce, peut-être, vous pouvez terminer l'histoire "sans maison intelligente". <br><br><h2>  Conclusion </h2><br>  Sous forme de conclusion, et puis quoi? <br><br>  Liste de Todo: <br><br>  - Climatisation, il n'a pas été possible de trouver les réglages de la télécommande pour lirc et les premières tentatives de copie de clics, n'ont pas non plus abouti.  Scier plus loin. <br>  - Nous attendons une commande de la société chinoise Mi c gateway et plusieurs capteurs.  Les capteurs d'ouverture de porte au moyen de manipulations délicates se transforment en capteurs de fuite.  Nous ajouterons à notre système.  Lorsque les capteurs déclenchés enverront des notifications au propriétaire. <br>  "Les pensées s'arrêtent là ..." <br><br><h3>  Sources utilisées </h3><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exécution de HomeBridge sur un Raspberry Pi</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wiki Sonoff-Tasmota</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Installation de Domoticz sur un Pi déjà en cours d'exécution</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment: ajouter le WiFi à votre machine à café</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr403869/">https://habr.com/ru/post/fr403869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr403855/index.html">Après 11500 accidents, un quadricoptère IA a appris à voler à l'intérieur</a></li>
<li><a href="../fr403857/index.html">Oticon a introduit une technologie de conduction osseuse non implantable pour les enfants</a></li>
<li><a href="../fr403861/index.html">Quelque chose ne va pas avec Masterhost</a></li>
<li><a href="../fr403865/index.html">Ampoules LED Auchan</a></li>
<li><a href="../fr403867/index.html">Liberté d'information</a></li>
<li><a href="../fr403871/index.html">BBC Micro - l'ordinateur qui a battu le ZX Spectrum</a></li>
<li><a href="../fr403873/index.html">Batterie solaire sur le balcon: test de batterie et BMS</a></li>
<li><a href="../fr403875/index.html">Les montres intelligentes et les réseaux de neurones détectent la fibrillation auriculaire avec une précision de 97%</a></li>
<li><a href="../fr403877/index.html">La fusée ultra-lourde de la NASA augmentera ses prix d'au moins 500 millions de dollars et son lancement sera reporté d'une autre année</a></li>
<li><a href="../fr403881/index.html">La fusée la plus merveilleuse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>