<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏾 👠 ☘️ Confessions d'un testeur: comment j'ai fouillé dans un IDS concurrent 🧑🏽‍🤝‍🧑🏽 🚟 👩🏾‍🤝‍👩🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aucune passerelle de sécurité réseau UTM qui se respecte ne peut se passer d'un système de détection d'intrusion (IDS). Une autre chose est que l'opti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confessions d'un testeur: comment j'ai fouillé dans un IDS concurrent</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smart_soft/blog/421893/">  Aucune passerelle de sécurité réseau UTM qui se respecte ne peut se passer d'un système de détection d'intrusion (IDS).  Une autre chose est que l'option est souvent indiquée par le fabricant pour une coche afin de suivre les concurrents.  D'après mon expérience en tant que testeur, je sais comment cela se produit - il semble y avoir un IDS, mais en fait ce n'est pas bon.  C'est pourquoi, quand on m'a proposé de tester un matériel UTM relativement peu coûteux, j'ai suggéré tout d'abord de «chasser» son OWL. <br><br><img src="https://habrastorage.org/webt/om/x9/vb/omx9vbdtha8doiwq72xhixgx1ps.png"><br>  <i>Pièce UTM de Traffic Inspector Next Generation S100 et Cisco 2960G Switch</i> <br><br><a name="habracut"></a><br>  Si vous avez de l'expérience avec IDS, il est intéressant de le lire dans les commentaires de l'article.  Il est conseillé - pas de matériel coûteux (il est clair que certains Cisco NGFW pour un million fonctionnent bien), mais de solutions plus abordables.  Je pense que les administrateurs de lokalka et les utilisateurs potentiels de passerelles réseau seront curieux de savoir qui travaille avec IDS et s'il vaut la peine d'acheter à un prix élevé, lorsque vous pouvez, après avoir dansé avec un tambourin, obtenir le même pour moins d'argent. <br><br>  Dans ce test, nous parlons du modèle S100 - le prix le plus abordable de la gamme Traffic Inspector Next Generation (les chiffres signifient qu'il est conçu pour 100 abonnés).  Voici sa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description sur le site officiel &gt;&gt;&gt;</a> .  En bref, le matériel contient, par exemple, un filtre réseau, un VPN, un bloqueur de ressources et, bien sûr, un IDS. <br><br>  Je propose une méthodologie de test simple - nous vérifions le débit et établissons la dépendance du nombre de paquets abandonnés sur l'intensité du trafic par incréments de 50, 100, 150 et 200 Mb / s.  Pourquoi prenons-nous de tels intervalles?  Nous partons de 100 Mb / s - la demande client la plus populaire, et reportons le plus et le moins pour voir ce qui se passe en modes plus ou moins chargés, ainsi qu'en mode extrême 200 Mb / s. <br><br>  L'expérience de vie me dit qu'avec toutes les règles actives, le S100 peut ne pas tirer, donc je suggère que la procédure décrite soit exécutée en trois modes: d'abord lorsque toutes les règles sont actives, puis avec la partie des règles désactivée (appelons-le Groupe n ° 1) et, enfin, seulement quand il est actif juste quelques règles (appelons-le groupe n ° 2).  Nous formons les groupes de règles suivants: <br><br>  - Groupe n ° 0: c'est compréhensible, toutes les règles sans exception. <br>  - Groupe n ° 1: groupe de règles Emerging Threads (je connais les règles depuis le test d'IDS Snort, à l'exception des règles des jeux émergents). <br>  - Groupe n ° 2: un ensemble de règles que je considère simplement contraignantes pour IDS (voir ci-dessous), y compris l'ajout de règles p2p, car d'après ma propre expérience, je sais à quel point les grandes entreprises sont négativement liées au fait que leurs employés utilisent activement l'entreprise réseau pour télécharger vos émissions de télévision préférées. <br><br>  Le test est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">possible</a> à l'aide de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilitaire tcpreplay</a> .  Cet utilitaire vous permet de lire le trafic réseau préenregistré à une vitesse spécifique.  Commande: <b>tcpreplay –i &lt;interface&gt; -l 0 testTI.pcap</b> .  Le fichier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">testTI.pcap</a> contient 1 146 313 paquets (nous choisissons un tel volume pour que, d'une part, il y ait de bonnes statistiques, d'autre part, le temps de «s'exécuter» ne soit pas trop long, dans notre cas, pas plus de 15 minutes).  En plus de cela, comme je l'ai dit, nous lançons un tracker torrent. <br><br>  Disposition du banc d'essai: <br><br><img src="https://habrastorage.org/webt/bx/b-/qr/bxb-qrz2b5eaz-jhjihskbabadq.png"><br><br>  Si quelqu'un a des questions sur la méthodologie de test, je suis prêt à répondre dans les commentaires. <br><br>  Donc, les résultats. <br><br>  <b>Groupe 0</b> <br><br>  Les tests sur un ensemble complet impliquent le chargement de toutes les règles, et il y en a 30 305. <br><br>  Lors des tests, nous utilisons les paramètres IDS par défaut: <br><br><img src="https://habrastorage.org/webt/kl/2b/w9/kl2bw9dxrpimxfk_7lpbjzzen_i.png"><br><br>  Nous commençons à tester avec 100 Mb / s et nous comprenons que le morceau de fer peut à peine tirer: sur 114 000 paquets, 109 000 sont jetés!  Il est donc inutile de tester à 150 et encore plus à 200 Mb / s.  Au contraire, je propose de donner une chance à l'appareil et d'effectuer un test supplémentaire à 10 Mb / s.  Le résultat dans le tableau: <br><br><img src="https://habrastorage.org/webt/vp/sx/it/vpsxitlg8-miyc34mch3w_r4v2m.png"><br><br>  Remarque: <br><br>  kernel_packets - paquets envoyés; <br>  kernel_drops - paquets perdus.  Comme vous pouvez le voir, avec les paramètres par défaut et avec un ensemble complet de règles, de grandes pertes de paquets se produisent (&gt; 30% par rapport aux kernel_packets).  Espérons que l'optimisation des règles de paramétrage changera la situation; <br>  decoder_packets - le nombre de paquets que le système a correctement traités; <br>  detect_alerts - nombre d'attaques détectées.  La plupart des attaques sont de type paquet fragmenté, mais les attaques de détection de traqueur de torrent ont également été identifiées. <br><br>  <b>Numéro de groupe 1</b> <br><br>  De toute évidence, le matériel n'est pas optimisé pour fonctionner comme un IDS puissant à part entière, mais il y a une marge de manœuvre, à savoir la possibilité de changer le mécanisme de recherche des itinéraires, de désactiver le téléchargement du contenu du package (charge utile) et de désactiver les groupes de règles et les groupes spécifiques de packages.  Un peu d'expérimentation avec les paramètres - et nous arrivons à l'option que je présente dans la figure suivante. <br><br><img src="https://habrastorage.org/webt/df/l_/hb/dfl_hbxxcotwty1uf6bfmzwrs6i.jpeg"><br><br>  La liste des règles actives que nous laissons: <br><br><img src="https://habrastorage.org/webt/a4/nv/ls/a4nvls33gssilc3plyf-kgatbt8.png"><br><br>  Résultat du test: <br><br><img src="https://habrastorage.org/webt/ek/tq/6p/ektq6poxykowllmgy2xtbcnwehi.png"><br><br>  Comme vous pouvez le voir, l'image s'est considérablement améliorée avec ce groupe de règles (le pourcentage de paquets abandonnés a diminué plusieurs fois).  Une attaque telle que «Détection d'un traqueur de torrent» a été détectée avec succès (les attaques de «paquets fragmentés» n'apparaissent plus). <br><br>  <b>Numéro de groupe 2</b> <br><br>  Les paramètres sont les mêmes.  Liste des règles actives: <br><br><img src="https://habrastorage.org/webt/vi/g3/rd/vig3rdsn16jezodfjmaiavvymh8.png"><br><br>  Le résultat dans le tableau: <br><br><img src="https://habrastorage.org/webt/dc/yw/8a/dcyw8ak_y7bhtj0a3uqyz3lmiu0.png"><br>  <i>Ici, l'image du traitement des paquets est encore meilleure, ce qui est attendu.</i> <br><br>  <b>Résumé</b> <br><br>  Le tableau de résultats final, exprimé en pourcentage de kernel_drops par rapport à kernel_packets, est présenté ci-dessous: <br><br><img src="https://habrastorage.org/webt/pl/fi/j9/plfij9pmoyi6nllbdkjzjquxlcu.png"><br><br>  Graphiquement, le résultat est le suivant: <br><br><img src="https://habrastorage.org/webt/n6/ig/7b/n6ig7bt4vdkfeiyftkivflro9k8.png"><br><br>  Comme vous pouvez le voir, le nombre de règles et de paramètres actifs affecte directement l'efficacité.  Cela n'a pas de sens d'activer les paramètres au maximum et toutes les règles en même temps - les pertes descendent immédiatement de l'échelle même de 10 Mb / s.  Dans les modes optimisés, le matériel semble normal jusqu'à 100 Mb / s, mais les pertes augmentent fortement sur un trafic plus intensif.  Cependant, pour une utilisation «bureautique», 100 Mb / s suffisent.  Si vous conduisez l'appareil à cette vitesse et sélectionnez les règles, vous pouvez obtenir un IDS tout à fait satisfaisant. <br><br>  Peut-être, pour utiliser l'ensemble complet de règles, des améliorations sont nécessaires pour utiliser le mécanisme pf_ring (https://www.ntop.org/products/packet-capture/pf_ring/) comme mécanisme de transfert d'un paquet vers l'espace utilisateur à partir du tampon d'interface réseau.  Pour ce faire, vous devrez utiliser plusieurs instances de Suricata, qui, bien sûr, prendront des ressources d'autres processus, mais peut-être que le jeu en vaut la chandelle. <br><br>  Je répète qu'à mon avis, l'objectif principal de l'appareil testé est un pare-feu et que l'option IDS est auxiliaire.  Honnêtement, j'étais prêt pour le fait que le matériel échoue.  Il s'est avéré qu'avec une certaine perception gutta de l'administrateur système, le système de détection d'intrusion du S100 est pleinement opérationnel. <br><br>  PS Comme je l'ai dit ci-dessus, j'exhorte les lecteurs à écrire sur leur expérience de l'utilisation d'IDS dans des solutions relativement peu coûteuses. <br><br>  Le test PPS est publié dans le compte du fabricant, car je ne veux pas me «briller».  Néanmoins, je suis prêt à répondre à toutes les questions et débats dans les commentaires, mais, encore une fois, pas en mon nom :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421893/">https://habr.com/ru/post/fr421893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421881/index.html">Implémentation de BottomAppBar. Partie 2: Contrôle du menu et du tiroir de navigation</a></li>
<li><a href="../fr421883/index.html">Reportages vidéo de CocoaHeads @ FunCorp mitap</a></li>
<li><a href="../fr421887/index.html">La structure des répertoires du projet (en particulier sur Flask)</a></li>
<li><a href="../fr421889/index.html">Webinaires Skillbox Friday: Développement pour les débutants</a></li>
<li><a href="../fr421891/index.html">Contexte: semaine de travail de 4 jours - une réelle opportunité ou un fantasme?</a></li>
<li><a href="../fr421895/index.html">Arrêtez de développer des logiciels avec une marge</a></li>
<li><a href="../fr421897/index.html">Poudlard rouge. Série 10. Étudiants - Métallurgiste</a></li>
<li><a href="../fr421899/index.html">Tester's Way: Où commencer l'apprentissage de l'automatisation</a></li>
<li><a href="../fr421901/index.html">N'essayez pas de prédire les problèmes de demain</a></li>
<li><a href="../fr421903/index.html">TiKV - base de données clé-valeur distribuée pour le cloud natif</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>