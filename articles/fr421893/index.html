<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§–ğŸ¾ ğŸ‘  â˜˜ï¸ Confessions d'un testeur: comment j'ai fouillÃ© dans un IDS concurrent ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ½ ğŸšŸ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aucune passerelle de sÃ©curitÃ© rÃ©seau UTM qui se respecte ne peut se passer d'un systÃ¨me de dÃ©tection d'intrusion (IDS). Une autre chose est que l'opti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confessions d'un testeur: comment j'ai fouillÃ© dans un IDS concurrent</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smart_soft/blog/421893/">  Aucune passerelle de sÃ©curitÃ© rÃ©seau UTM qui se respecte ne peut se passer d'un systÃ¨me de dÃ©tection d'intrusion (IDS).  Une autre chose est que l'option est souvent indiquÃ©e par le fabricant pour une coche afin de suivre les concurrents.  D'aprÃ¨s mon expÃ©rience en tant que testeur, je sais comment cela se produit - il semble y avoir un IDS, mais en fait ce n'est pas bon.  C'est pourquoi, quand on m'a proposÃ© de tester un matÃ©riel UTM relativement peu coÃ»teux, j'ai suggÃ©rÃ© tout d'abord de Â«chasserÂ» son OWL. <br><br><img src="https://habrastorage.org/webt/om/x9/vb/omx9vbdtha8doiwq72xhixgx1ps.png"><br>  <i>PiÃ¨ce UTM de Traffic Inspector Next Generation S100 et Cisco 2960G Switch</i> <br><br><a name="habracut"></a><br>  Si vous avez de l'expÃ©rience avec IDS, il est intÃ©ressant de le lire dans les commentaires de l'article.  Il est conseillÃ© - pas de matÃ©riel coÃ»teux (il est clair que certains Cisco NGFW pour un million fonctionnent bien), mais de solutions plus abordables.  Je pense que les administrateurs de lokalka et les utilisateurs potentiels de passerelles rÃ©seau seront curieux de savoir qui travaille avec IDS et s'il vaut la peine d'acheter Ã  un prix Ã©levÃ©, lorsque vous pouvez, aprÃ¨s avoir dansÃ© avec un tambourin, obtenir le mÃªme pour moins d'argent. <br><br>  Dans ce test, nous parlons du modÃ¨le S100 - le prix le plus abordable de la gamme Traffic Inspector Next Generation (les chiffres signifient qu'il est conÃ§u pour 100 abonnÃ©s).  Voici sa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description sur le site officiel &gt;&gt;&gt;</a> .  En bref, le matÃ©riel contient, par exemple, un filtre rÃ©seau, un VPN, un bloqueur de ressources et, bien sÃ»r, un IDS. <br><br>  Je propose une mÃ©thodologie de test simple - nous vÃ©rifions le dÃ©bit et Ã©tablissons la dÃ©pendance du nombre de paquets abandonnÃ©s sur l'intensitÃ© du trafic par incrÃ©ments de 50, 100, 150 et 200 Mb / s.  Pourquoi prenons-nous de tels intervalles?  Nous partons de 100 Mb / s - la demande client la plus populaire, et reportons le plus et le moins pour voir ce qui se passe en modes plus ou moins chargÃ©s, ainsi qu'en mode extrÃªme 200 Mb / s. <br><br>  L'expÃ©rience de vie me dit qu'avec toutes les rÃ¨gles actives, le S100 peut ne pas tirer, donc je suggÃ¨re que la procÃ©dure dÃ©crite soit exÃ©cutÃ©e en trois modes: d'abord lorsque toutes les rÃ¨gles sont actives, puis avec la partie des rÃ¨gles dÃ©sactivÃ©e (appelons-le Groupe n Â° 1) et, enfin, seulement quand il est actif juste quelques rÃ¨gles (appelons-le groupe n Â° 2).  Nous formons les groupes de rÃ¨gles suivants: <br><br>  - Groupe n Â° 0: c'est comprÃ©hensible, toutes les rÃ¨gles sans exception. <br>  - Groupe n Â° 1: groupe de rÃ¨gles Emerging Threads (je connais les rÃ¨gles depuis le test d'IDS Snort, Ã  l'exception des rÃ¨gles des jeux Ã©mergents). <br>  - Groupe n Â° 2: un ensemble de rÃ¨gles que je considÃ¨re simplement contraignantes pour IDS (voir ci-dessous), y compris l'ajout de rÃ¨gles p2p, car d'aprÃ¨s ma propre expÃ©rience, je sais Ã  quel point les grandes entreprises sont nÃ©gativement liÃ©es au fait que leurs employÃ©s utilisent activement l'entreprise rÃ©seau pour tÃ©lÃ©charger vos Ã©missions de tÃ©lÃ©vision prÃ©fÃ©rÃ©es. <br><br>  Le test est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">possible</a> Ã  l'aide de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilitaire tcpreplay</a> .  Cet utilitaire vous permet de lire le trafic rÃ©seau prÃ©enregistrÃ© Ã  une vitesse spÃ©cifique.  Commande: <b>tcpreplay â€“i &lt;interface&gt; -l 0 testTI.pcap</b> .  Le fichier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">testTI.pcap</a> contient 1 146 313 paquets (nous choisissons un tel volume pour que, d'une part, il y ait de bonnes statistiques, d'autre part, le temps de Â«s'exÃ©cuterÂ» ne soit pas trop long, dans notre cas, pas plus de 15 minutes).  En plus de cela, comme je l'ai dit, nous lanÃ§ons un tracker torrent. <br><br>  Disposition du banc d'essai: <br><br><img src="https://habrastorage.org/webt/bx/b-/qr/bxb-qrz2b5eaz-jhjihskbabadq.png"><br><br>  Si quelqu'un a des questions sur la mÃ©thodologie de test, je suis prÃªt Ã  rÃ©pondre dans les commentaires. <br><br>  Donc, les rÃ©sultats. <br><br>  <b>Groupe 0</b> <br><br>  Les tests sur un ensemble complet impliquent le chargement de toutes les rÃ¨gles, et il y en a 30 305. <br><br>  Lors des tests, nous utilisons les paramÃ¨tres IDS par dÃ©faut: <br><br><img src="https://habrastorage.org/webt/kl/2b/w9/kl2bw9dxrpimxfk_7lpbjzzen_i.png"><br><br>  Nous commenÃ§ons Ã  tester avec 100 Mb / s et nous comprenons que le morceau de fer peut Ã  peine tirer: sur 114 000 paquets, 109 000 sont jetÃ©s!  Il est donc inutile de tester Ã  150 et encore plus Ã  200 Mb / s.  Au contraire, je propose de donner une chance Ã  l'appareil et d'effectuer un test supplÃ©mentaire Ã  10 Mb / s.  Le rÃ©sultat dans le tableau: <br><br><img src="https://habrastorage.org/webt/vp/sx/it/vpsxitlg8-miyc34mch3w_r4v2m.png"><br><br>  Remarque: <br><br>  kernel_packets - paquets envoyÃ©s; <br>  kernel_drops - paquets perdus.  Comme vous pouvez le voir, avec les paramÃ¨tres par dÃ©faut et avec un ensemble complet de rÃ¨gles, de grandes pertes de paquets se produisent (&gt; 30% par rapport aux kernel_packets).  EspÃ©rons que l'optimisation des rÃ¨gles de paramÃ©trage changera la situation; <br>  decoder_packets - le nombre de paquets que le systÃ¨me a correctement traitÃ©s; <br>  detect_alerts - nombre d'attaques dÃ©tectÃ©es.  La plupart des attaques sont de type paquet fragmentÃ©, mais les attaques de dÃ©tection de traqueur de torrent ont Ã©galement Ã©tÃ© identifiÃ©es. <br><br>  <b>NumÃ©ro de groupe 1</b> <br><br>  De toute Ã©vidence, le matÃ©riel n'est pas optimisÃ© pour fonctionner comme un IDS puissant Ã  part entiÃ¨re, mais il y a une marge de manÅ“uvre, Ã  savoir la possibilitÃ© de changer le mÃ©canisme de recherche des itinÃ©raires, de dÃ©sactiver le tÃ©lÃ©chargement du contenu du package (charge utile) et de dÃ©sactiver les groupes de rÃ¨gles et les groupes spÃ©cifiques de packages.  Un peu d'expÃ©rimentation avec les paramÃ¨tres - et nous arrivons Ã  l'option que je prÃ©sente dans la figure suivante. <br><br><img src="https://habrastorage.org/webt/df/l_/hb/dfl_hbxxcotwty1uf6bfmzwrs6i.jpeg"><br><br>  La liste des rÃ¨gles actives que nous laissons: <br><br><img src="https://habrastorage.org/webt/a4/nv/ls/a4nvls33gssilc3plyf-kgatbt8.png"><br><br>  RÃ©sultat du test: <br><br><img src="https://habrastorage.org/webt/ek/tq/6p/ektq6poxykowllmgy2xtbcnwehi.png"><br><br>  Comme vous pouvez le voir, l'image s'est considÃ©rablement amÃ©liorÃ©e avec ce groupe de rÃ¨gles (le pourcentage de paquets abandonnÃ©s a diminuÃ© plusieurs fois).  Une attaque telle que Â«DÃ©tection d'un traqueur de torrentÂ» a Ã©tÃ© dÃ©tectÃ©e avec succÃ¨s (les attaques de Â«paquets fragmentÃ©sÂ» n'apparaissent plus). <br><br>  <b>NumÃ©ro de groupe 2</b> <br><br>  Les paramÃ¨tres sont les mÃªmes.  Liste des rÃ¨gles actives: <br><br><img src="https://habrastorage.org/webt/vi/g3/rd/vig3rdsn16jezodfjmaiavvymh8.png"><br><br>  Le rÃ©sultat dans le tableau: <br><br><img src="https://habrastorage.org/webt/dc/yw/8a/dcyw8ak_y7bhtj0a3uqyz3lmiu0.png"><br>  <i>Ici, l'image du traitement des paquets est encore meilleure, ce qui est attendu.</i> <br><br>  <b>RÃ©sumÃ©</b> <br><br>  Le tableau de rÃ©sultats final, exprimÃ© en pourcentage de kernel_drops par rapport Ã  kernel_packets, est prÃ©sentÃ© ci-dessous: <br><br><img src="https://habrastorage.org/webt/pl/fi/j9/plfij9pmoyi6nllbdkjzjquxlcu.png"><br><br>  Graphiquement, le rÃ©sultat est le suivant: <br><br><img src="https://habrastorage.org/webt/n6/ig/7b/n6ig7bt4vdkfeiyftkivflro9k8.png"><br><br>  Comme vous pouvez le voir, le nombre de rÃ¨gles et de paramÃ¨tres actifs affecte directement l'efficacitÃ©.  Cela n'a pas de sens d'activer les paramÃ¨tres au maximum et toutes les rÃ¨gles en mÃªme temps - les pertes descendent immÃ©diatement de l'Ã©chelle mÃªme de 10 Mb / s.  Dans les modes optimisÃ©s, le matÃ©riel semble normal jusqu'Ã  100 Mb / s, mais les pertes augmentent fortement sur un trafic plus intensif.  Cependant, pour une utilisation Â«bureautiqueÂ», 100 Mb / s suffisent.  Si vous conduisez l'appareil Ã  cette vitesse et sÃ©lectionnez les rÃ¨gles, vous pouvez obtenir un IDS tout Ã  fait satisfaisant. <br><br>  Peut-Ãªtre, pour utiliser l'ensemble complet de rÃ¨gles, des amÃ©liorations sont nÃ©cessaires pour utiliser le mÃ©canisme pf_ring (https://www.ntop.org/products/packet-capture/pf_ring/) comme mÃ©canisme de transfert d'un paquet vers l'espace utilisateur Ã  partir du tampon d'interface rÃ©seau.  Pour ce faire, vous devrez utiliser plusieurs instances de Suricata, qui, bien sÃ»r, prendront des ressources d'autres processus, mais peut-Ãªtre que le jeu en vaut la chandelle. <br><br>  Je rÃ©pÃ¨te qu'Ã  mon avis, l'objectif principal de l'appareil testÃ© est un pare-feu et que l'option IDS est auxiliaire.  HonnÃªtement, j'Ã©tais prÃªt pour le fait que le matÃ©riel Ã©choue.  Il s'est avÃ©rÃ© qu'avec une certaine perception gutta de l'administrateur systÃ¨me, le systÃ¨me de dÃ©tection d'intrusion du S100 est pleinement opÃ©rationnel. <br><br>  PS Comme je l'ai dit ci-dessus, j'exhorte les lecteurs Ã  Ã©crire sur leur expÃ©rience de l'utilisation d'IDS dans des solutions relativement peu coÃ»teuses. <br><br>  Le test PPS est publiÃ© dans le compte du fabricant, car je ne veux pas me Â«brillerÂ».  NÃ©anmoins, je suis prÃªt Ã  rÃ©pondre Ã  toutes les questions et dÃ©bats dans les commentaires, mais, encore une fois, pas en mon nom :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421893/">https://habr.com/ru/post/fr421893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421881/index.html">ImplÃ©mentation de BottomAppBar. Partie 2: ContrÃ´le du menu et du tiroir de navigation</a></li>
<li><a href="../fr421883/index.html">Reportages vidÃ©o de CocoaHeads @ FunCorp mitap</a></li>
<li><a href="../fr421887/index.html">La structure des rÃ©pertoires du projet (en particulier sur Flask)</a></li>
<li><a href="../fr421889/index.html">Webinaires Skillbox Friday: DÃ©veloppement pour les dÃ©butants</a></li>
<li><a href="../fr421891/index.html">Contexte: semaine de travail de 4 jours - une rÃ©elle opportunitÃ© ou un fantasme?</a></li>
<li><a href="../fr421895/index.html">ArrÃªtez de dÃ©velopper des logiciels avec une marge</a></li>
<li><a href="../fr421897/index.html">Poudlard rouge. SÃ©rie 10. Ã‰tudiants - MÃ©tallurgiste</a></li>
<li><a href="../fr421899/index.html">Tester's Way: OÃ¹ commencer l'apprentissage de l'automatisation</a></li>
<li><a href="../fr421901/index.html">N'essayez pas de prÃ©dire les problÃ¨mes de demain</a></li>
<li><a href="../fr421903/index.html">TiKV - base de donnÃ©es clÃ©-valeur distribuÃ©e pour le cloud natif</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>