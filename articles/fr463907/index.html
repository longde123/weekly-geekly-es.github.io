<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õèÔ∏è üßõüèæ üïµüèΩ Cr√©ation d'une application Sticky Notes √† l'aide de 8base, GraphQL et React üôáüèæ üßòüèæ üîí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voir la version de d√©monstration du programme ici . 

 √Ä tout moment, la gestion du temps a √©t√© une √©norme lutte pour moi, les t√¢ches planifi√©es sont ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation d'une application Sticky Notes √† l'aide de 8base, GraphQL et React</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463907/"><img src="https://habrastorage.org/getpro/habr/post_images/c98/5ef/e7d/c985efe7da6be444438fac5cbae68238.png" alt="image"><br><br>  Voir la version de d√©monstration du programme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  √Ä tout moment, la gestion du temps a √©t√© une √©norme lutte pour moi, les t√¢ches planifi√©es sont oubli√©es, les notes sont perdues, car elles sont r√©parties sur plusieurs applications qui enregistrent des notes.  La solution n'est pas du tout dans l'application de notes personnalis√©es que je vous propose de cr√©er, bien qu'il soit probable que vous l'utiliserez en raison du temps que vous y mettez. <br><a name="habracut"></a><br>  Pour cr√©er une application de prise de notes, nous avons besoin d'une pile simple qui ne n√©cessite pratiquement pas de backend de d√©veloppement, et d'une application qui peut √™tre facilement d√©ploy√©e.  En fonction de ces exigences, nous choisirons la pile pour l'application.  Cela ressemble √† ceci: <br>  <b>-R√©action</b> - pour le d√©veloppement frontal.  Il s'agit d'une biblioth√®que populaire pour cr√©er des interfaces utilisateur, elle peut √™tre facilement d√©ploy√©e sur plusieurs plates-formes, telles que Now et Netlify. <br>  <b>-8base GraphQL</b> - couche de base de donn√©es pour notre application.  Ici, nous allons stocker et lire les demandes dans notre application.  Avec 8base, vous n'avez pas besoin de cr√©er et de maintenir un backend pour l'application. <br><br>  J'ai r√©ussi √† cr√©er une application simple √† l'aide de ces outils.  Dans cet article, nous verrons le processus de cr√©ation de cette application et de configuration d'un backend s'ex√©cutant sur la plateforme 8base. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/807/f6e/fa9/807f6efa97c63a172fa3e621d6411de5.png" alt="image"><br><br>  Si les captures d'√©cran ne vous conviennent pas, vous pouvez toujours consulter une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">application de d√©monstration</a> .  Les notes sont plac√©es au hasard sur une page Web et peuvent √™tre gliss√©es √† diff√©rents endroits. <br><br>  Suivre les instructions n√©cessite une compr√©hension de base de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React</a> et de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Node.js.</a>  Avant de commencer, assurez-vous que Node et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">yarn sont install√©s</a> . <br><br>  Nous utiliserons √©galement des requ√™tes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GraphQL</a> dans le projet, donc une certaine familiarit√© avec cette technologie sera utile. <br><br>  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plate-</a> forme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">8base</a> offre une large gamme de fonctionnalit√©s pour aider les d√©veloppeurs √† cr√©er des applications plus rapidement et plus facilement.  Avec 8base, vous pouvez facilement organiser le backend de votre application sans √©crire de code.  En utilisant la plateforme 8base, vous pouvez cr√©er votre backend √† l'aide d'une interface graphique simple qui vous permet d'effectuer des actions telles que: <br><br><ul><li>  D√©finissez votre sch√©ma de donn√©es: cr√©ez des tables / relations de table. </li><li>  T√©l√©chargez des fichiers. </li><li>  D√©finissez les droits d'acc√®s et les r√¥les d'autorisation. </li><li>  G√©rez divers projets √† l'aide d'ateliers. </li><li>  Concevez des requ√™tes √† l'aide de l'API Explorer (bas√© sur GraphQL). </li></ul><br>  Dans ce guide, nous verrons comment utiliser 8base pour configurer rapidement le c√¥t√© serveur et traiter les donn√©es √† l'aide de l'API GraphQL.  Notre application frontale sera construite √† l'aide de React et interagira avec le serveur √† l'aide de GraphQL. <br><br>  Pour commencer √† utiliser 8base, proc√©dez comme suit: <br><br>  1. <b>Cr√©ez un compte</b> sur 8base.  C'est gratuit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/674/3bc/809/6743bc8091fa63acb34a068fe09581a9.png" alt="image"><br><br>  2. Une fois l'enregistrement termin√©, cliquez sur le bouton <b>Data Builder</b> pour acc√©der √† la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Donn√©es</a> , puis cliquez sur Nouvelle table pour commencer √† configurer le backend. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/571/e32/808/571e32808c3cd8d029805f01279c60a8.png" alt="image"><br><br>  3. Apr√®s avoir charg√© une nouvelle table, vous serez redirig√© vers le sch√©ma et vous pourrez commencer √† d√©finir les champs.  Notons deux ou trois choses.  Sur la gauche, vous verrez les <i>tables syst√®me</i> et <i>vos tables</i> . <br><br>  Chaque nouvel espace de travail 8base est automatiquement livr√© avec plusieurs tables int√©gr√©es.  Ces tableaux sont utilis√©s pour des choses comme les fichiers, les param√®tres et les autorisations, et ils sont tous accessibles via l'API GraphQL 8base. <br><br>  4. Allez-y et <b>cr√©ez le tableau</b> <i>Notes</i> , qui se compose des champs suivants: <br><br>  <b>title</b> : type de champ <i>Texte</i> .  Voici le titre de la note. <br>  <b>texte</b> : type du champ <i>Texte</i> .  Ce champ contiendra le corps de la note. <br>  Notre sch√©ma est assez simple et est utilis√© pour r√©aliser les opportunit√©s que nous essayons de r√©aliser. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bea/d62/ca7/bead62ca7ffa32276ddc9df5ef9a4712.png" alt="image"><br><br>  5. <b>Copiez</b> ensuite <b>l'</b> URL de l'API <b>du</b> point de terminaison (disponible en bas √† gauche) - il s'agit de la ligne de communication principale entre les parties client et serveur de votre application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56b/762/8d9/56b7628d911cf529305c3dece34a3896.png" alt="image"><br><br>  6. Enfin, aux fins de ce guide, nous <b>autoriserons</b> par d√©faut <b>l'acc√®s public aux invit√©s</b> , de sorte que l'authentification n'est pas requise.  Pour autoriser l'acc√®s invit√© au nouveau tableau Notes, acc√©dez √† Param√®tres&gt; R√¥les&gt; Invit√© et cochez les cases correspondantes dans la section Notes.  Tous les utilisateurs non autoris√©s qui acc√®dent √† votre point de terminaison API se voient attribuer le r√¥le Invit√© par d√©faut.  L'autorisation n'est pas trait√©e dans ce guide.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez en savoir plus sur la fa√ßon de l'utiliser. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/110/0c9/f7d/1100c9f7d58abd0b4ade83938c6378c7.png" alt="image"><br><br>  Maintenant que nous avons fini de configurer le backend √† l'aide de 8base, nous allons commencer √† travailler sur le c√¥t√© frontal de l'application. <br><br><h3>  Pour commencer </h3><br>  J'ai cr√©√© un projet de d√©marrage pour configurer et r√©duire facilement les frais g√©n√©raux, de sorte que l'article d√©crit essentiellement comment d√©marrer avec 8base et GraphQL.  Le squelette de l'application est d√©j√† configur√©, y compris les styles et la structure du projet.  Les options suivantes sont disponibles dans la branche de d√©marrage: <br><br><ol><li>  Un composant du formulaire de note pour cr√©er une note. </li><li>  Composant d'une note qui affiche les d√©tails d'une seule note. </li><li>  Un composant de liste de notes qui affiche une liste des notes disponibles. </li></ol><br>  Ex√©cutez la commande suivante pour cloner le r√©f√©rentiel: <br><br><pre><code class="javascript hljs">git clone -b starter https:<span class="hljs-comment"><span class="hljs-comment">//github.com/HackAfro/note-app.git</span></span></code> </pre> <br>  Ouvrez le dossier et installez les d√©pendances du projet en ex√©cutant la commande suivante: <br><br><pre> <code class="javascript hljs">npm install</code> </pre> <br>  D√©marrez le serveur d'applications React en ex√©cutant npm start dans le terminal dans le dossier racine de votre projet. <br><br><h4>  Connectez-vous au backend 8base √† l'aide de GraphQL </h4><br>  Maintenant que notre frontend initial est op√©rationnel, l'√©tape suivante consiste √† configurer le client pour interagir avec le backend 8base √† l'aide de GraphQL.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Apollo-boost</a> est une biblioth√®que utile pour vous aider √† vous connecter;  il fournit un client pour se connecter au backend GraphQL √† l'aide d'un URI.  L'URI est un point de terminaison fourni par 8base.  Mettons √† jour le fichier <i>index.js</i> pour configurer ApolloClient. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ApolloProvider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ApolloClient <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"apollo-boost"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> serviceWorker <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./serviceWorker"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"./index.css"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./App"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApolloClient({ <span class="hljs-attr"><span class="hljs-attr">uri</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;YOUR_8BASE_ENDPOINT&gt;"</span></span> }); ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">client</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{client}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"root"</span></span>) ); serviceWorker.unregister();</code> </pre> <br>  ApolloClient prend un objet avec la propri√©t√© <i>uri</i> comme argument;  en m√™me temps, le client nous donne acc√®s √† recevoir, mettre √† jour et supprimer des donn√©es en utilisant l' <i>uri</i> fourni.  Veillez √† remplacer la valeur de &lt;YOUR_8BASE_ENDPOINT&gt; par le point de terminaison r√©el. <br><br>  Ensuite, nous enveloppons l'application dans ApolloProvider, qui accepte le client prop.  ApolloProvider charge le sch√©ma de table 8base, qui vous donne acc√®s √† toutes les propri√©t√©s du mod√®le de donn√©es dans votre code frontal. <br><br><h4>  Recevoir et afficher des notes </h4><br>  Pour obtenir des notes du backend, nous allons √©crire une requ√™te GraphQL pour recevoir les notes stock√©es dans 8base.  Commen√ßons par mettre √† jour le fichier <i>App.js.</i> <br><br>  Ajoutez les importations suivantes √† l'endroit o√π vous trouvez le TODO - 1 commentaire: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"graphql-tag"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>;</code> </pre> <br>  Ils seront utiles pour cr√©er des requ√™tes GraphQL et envoyer des accessoires au composant App pour prendre des notes.  Ensuite, nous devons ajouter une demande pour recevoir des notes du c√¥t√© serveur.  Mettez √† jour <i>NOTE_LIST_QUERY</i> pour ressembler √† l'extrait ci-dessous: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> NOTE_LIST_QUERY = gql<span class="hljs-string"><span class="hljs-string">` query { notesList { items { id title text } } } `</span></span>;</code> </pre> <br>  Si vous n'√™tes pas s√ªr de vos demandes, vous pouvez toujours les tester dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://auth.8base.com/login%3Fstate%3Dg6Fo2SBpQzdtSDdPX3B6Y1Y1QUFvVXp0R014dG56MVpWVzlHZaN0aWTZIG5ncC16aHpjSXE1TlJtVUVyQmVKdVpIQXo5aEdFVFZEo2NpZNkgcUdIWlZ1NUN4WTVrbGl2bTI4T1BMam9wdnNZcDBiYUQ%26client%3DqGHZVu5CxY5klivm28OPLjopvsYp0baD%26protocol%3Doauth2%26response_type%3Dtoken%2520id_token%26redirect_uri%3D">explorateur d'API 8base</a> .  V√©rifions la requ√™te ci-dessus. <br><br>  Si vous ex√©cutez cette requ√™te dans votre explorateur, vous retournerez probablement un tableau vide, car vous n'avez cr√©√© aucune note.  Nous pouvons facilement cr√©er des notes √† l'aide de la barre d'outils 8base.  Suivez le lien de <b>donn√©es</b> dans la barre lat√©rale et suivez les instructions dans les captures d'√©cran ci-dessous: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/757/48f/de2/75748fde25301cb5fba67934b5a89d37.png" alt="image"><br><br>  Nous obtiendrons l' <i>identifiant</i> , le <i>titre</i> et le <i>texte</i> des √©l√©ments notesList.  Ensuite, nous pr√©parerons le composant <i>App</i> pour utiliser les notes re√ßues de la demande.  Enfin, nous utiliserons le <i>graphql HOC</i> (Higher Order Component) pour associer la requ√™te au composant <i>App</i> .  La fonction accepte la cha√Æne de requ√™te et les param√®tres de configuration. <br>  // TODO - 3 <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(NOTE_LIST_QUERY, { <span class="hljs-attr"><span class="hljs-attr">props</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { data } = result; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { loading, refetch } = data; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> notes = []; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data &amp;&amp; data.notesList) notes = data.notesList.items; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { loading, notes, refetch, }; }, })(App);</code> </pre> <br>  Remplacez la ligne d'exportation existante sous le commentaire TODO-3 ci-dessus. <br><br>  La fonction <i>graphql</i> renvoie une fonction ¬´enhancer¬ª, qui √©tendra tout composant qui lui est transmis avec des capacit√©s GraphQL.  Cela correspond au mod√®le de composant d'ordre √©lev√© qui est √©galement utilis√© par la fonction de <i>connexion</i> dans response-redux. <br><br>  En utilisant la fonction <code>graphql()</code> , nous pouvons acc√©der au point de terminaison GraphQL.  En tant que premier param√®tre, il accepte la requ√™te (NOTE_LIST_QUERY), la seconde - config, la valeur de retour est HOC, qui doit √™tre ex√©cut√©e avec le composant requis comme argument.  Dans le fragment, nous transmettons la valeur de la propri√©t√© <code>data.noteList</code> nouvelles notes variables.  En renvoyant cette valeur, nous pouvons y acc√©der √† l'int√©rieur du composant en tant que <code>props.notes</code> , et l'√©tat de t√©l√©chargement en tant que <code>props.loading</code> . <br><br>  La m√©thode de <i>refetch</i> sera tr√®s utile pour que nous puissions r√©aliser quelque chose de proche de la mise √† jour en temps r√©el.  Nous appellerons la fonction apr√®s chaque mutation pour nous assurer que les donn√©es de l'application sont toujours synchronis√©es avec le backend 8base. <br>  Si vous passez √† localhost: 3000, vous verrez la note qui vient d'√™tre cr√©√©e.  Nous devons pouvoir cr√©er des notes sans visiter la barre d'outils 8base, cela signifie passer au niveau suivant de GraphQL ....  Des mutations! <br><br><h4>  Cr√©er des notes </h4><br>  Apr√®s avoir termin√© les param√®tres de r√©ception des notes du backend, l'√©tape logique suivante consiste √† ajouter la possibilit√© de cr√©er des notes.  Les fichiers initiaux contiennent le composant de formulaire, et nous devons mettre √† jour le composant pour permettre √† la mutation d'enregistrer les notes cr√©√©es sur le backend 8base. <br><br>  Dans la section pr√©c√©dente, nous avons ex√©cut√© la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">demande</a> de r√©ception de notes du backend, dans cette section, nous allons effectuer des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mutations</a> pour enregistrer de nouvelles notes, la mutation est similaire √† la demande, √† la seule diff√©rence que la mutation est appel√©e chaque fois qu'il est n√©cessaire de modifier les donn√©es.  Apr√®s avoir cr√©√© des tables dans 8base, les requ√™tes et mutations pour cette table sont facilement accessibles dans l'API Explorer;  par cons√©quent, nous pouvons toujours y arriver si nous doutons de la fa√ßon dont la mutation doit √™tre structur√©e. <br><br>  Voyons √† quoi ressemble la mutation pour cr√©er des notes dans l'explorateur d'API.  Acc√©dez √† la barre d'outils 8base et cliquez sur l'explorateur d'API dans la barre lat√©rale. <br><br>  Dans l'explorateur d'API, cliquez sur le lien de <i>mutation</i> , comme indiqu√© ci-dessus.  Cela montrera toutes les mutations disponibles.  Recherchez le responsable de la cr√©ation des notes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f18/b87/a31/f18b87a316f26f5ebdaaaafbdc3a9625.png" alt="image"><br><br>  La capture d'√©cran montre que le nom de la mutation est <i>noteCreate</i> et prend un argument de type <i>NoteCreateInput</i> .  <i>NoteCreateInput</i> - D√©finit le type de corps de demande requis pour cr√©er une note. <br><br>  Maintenant que nous savons ce qui est exig√© de nous, passons √† la mise en ≈ìuvre.  J'ai pris soin de vous et cr√©√© un formulaire de cr√©ation de notes, il ne reste donc qu'√† ajouter une mutation au composant √† l'aide de la fonction <i>graphql</i> . <br><br>  Ouvrez <i>src / components / note-form / index.js</i> , ajoutez les importations suivantes lorsque vous avez un commentaire TODO 1.: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"graphql-tag"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>;</code> </pre> <br>  Ensuite, nous allons d√©clarer la mutation, mettre √† jour la variable <i>NOTE_MUTATION</i> et lui affecter une nouvelle valeur, similaire au fragment ci-dessous: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> NOTE_MUTATION = gql<span class="hljs-string"><span class="hljs-string">` mutation NoteCreate($data: NoteCreateInput!) { noteCreate(data: $data) { id } } `</span></span>;</code> </pre> <br>  Ensuite, nous associons la mutation au composant en utilisant la fonction <i>graphql</i> .  Remplacez la ligne d' <i>exportation</i> dans le fichier par l'extrait ci-dessous: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(NOTE_MUTATION, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"noteCreate"</span></span> })(NoteForm);</code> </pre><br>  Ainsi, la fonction <i>graphql</i> transmet la fonction nomm√©e <i>noteCreate</i> , qui sera utilis√©e pour effectuer la mutation create.  Utilisons la fonction <i>noteCreate</i> pour cr√©er une note lors de la soumission d'un formulaire. <br><br>  Acc√©dez au commentaire TODO 4 et mettez √† jour la fonction de <i>soumission</i> pour ressembler √† l'extrait ci-dessous: <br>  // TODO - 4 <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> submit = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> note =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> noteCreate({ <span class="hljs-attr"><span class="hljs-attr">variables</span></span>: { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: note } }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (res.data.noteCreate.id) { setNote({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }); refetch() } };</code> </pre> <br>  Dans l'extrait ci-dessus, nous avons utilis√© la fonction <i>noteCreate</i> pour effectuer la mutation de <i>cr√©ation</i> dans le tableau des notes.  L'argument pass√© √† la fonction est un objet contenant des <i>variables</i> et un corps de <i>donn√©es</i> . <br><br>  Nous attendons que la demande soit termin√©e, puis v√©rifions son succ√®s en trouvant id dans le corps de la r√©ponse.  Ensuite, nous r√©initialisons l'√©tat de la note et r√©cup√©rons.  J'ai mentionn√© la fonction de r√©cup√©ration plus t√¥t dans cet article, mais permettez-moi de mettre √† jour votre m√©moire.  Refetch oblige votre composant √† r√©p√©ter la requ√™te que vous avez d√©finie dans la fonction <code>graphql()</code> . <br><br>  Maintenant, tout est pr√™t pour les tests.  Allez √† localhost: 3000, remplissez le formulaire et profitez du r√©sultat. <br><br><h4>  Supprimer des notes </h4><br>  √Ä quoi sert une application de prise de notes si vous ne pouvez pas supprimer toutes vos notes et pr√©tendre qu'elles n'ont jamais exist√©.  Proc√©dure de suppression d'une note: <br><br><ol><li>  L'utilisateur clique sur le bouton Supprimer. </li><li>  Une fen√™tre de confirmation appara√Æt - cela r√©duit le nombre d'utilisateurs malveillants, tr√®s utile. </li><li>  Reste √† commettre un acte - supprimer la note. </li></ol><br>  Le param√®tre de suppression des notes se trouve dans le fichier <i>src / note-card / delete-button.js</i> .  Ouvrez le fichier et ajoutez les importations suivantes en haut du fichier.  En particulier, ci-dessous o√π se trouve TODO 1: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'graphql-tag'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-apollo'</span></span>;</code> </pre> <br>  Ensuite, √©crivez la mutation de suppression et affectez-la √† la variable <i>DELETE_MUTATION</i> .  Cela devrait ressembler √† ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DELETE_MUTATION = gql<span class="hljs-string"><span class="hljs-string">` mutation DeleteNote($data: NoteDeleteInput!) { noteDelete(data: $data) { success } } `</span></span>;</code> </pre> <br>  Ensuite, nous associons la mutation au composant en utilisant la fonction <i>graphql</i> .  Remplacez la ligne d' <i>exportation</i> dans le fichier par le fragment ci-dessous: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(DELETE_MUTATION, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'deleteNote'</span></span>, })(DeleteButton);</code> </pre> <br>  La fonction <i>graphql</i> transmet <i>ensuite</i> la fonction <i>deleteNote</i> nomm√©e, qui sera utilis√©e pour effectuer la mutation de suppression.  Nous pouvons maintenant mettre √† jour le gestionnaire d'√©v√©nements click et ajouter les param√®tres indispensables pour supprimer la note. <br><br>  Acc√©dez √† la fonction <i>onDeleteClick</i> dans le composant, placez le fragment suivant √† l'int√©rieur de la fonction: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onDeleteClick = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: noteId, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> remove = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.confirm(<span class="hljs-string"><span class="hljs-string">'Are you sure you want to delete this note?'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (remove) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> deleteNote({ <span class="hljs-attr"><span class="hljs-attr">variables</span></span>: { data } }); refetch(); } };</code> </pre> <br>  Lorsque vous cliquez sur le bouton Supprimer, dans le corps de l'objet de <b>donn√©es</b> , nous d√©finissons le champ <i>id</i> sur <i>noteId</i> , puis <i>affichons</i> √† l'utilisateur un message de confirmation, indiquant sans √©quivoque que nous avons l'intention de supprimer d√©finitivement cette note.  Si l'utilisateur fait comme pr√©vu et d√©cide de continuer, nous appelons la fonction <i>deleteNote</i> pour <i>muter la</i> suppression.  Lorsque cela est termin√©, vous avez besoin d'une application. <br><br>  Voici √† quoi cela devrait ressembler.  Acc√©dez √† localhost: 3000 et essayez de supprimer la note: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/515/f80/9ea/515f809ea6cbc73518d449241df4299e.png" alt="image"><br>  Vous pouvez trouver une d√©mo de cette application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Conclusion </h3><br>  Je suis s√ªr que vous avez pass√© un bon moment √† cr√©er cette application, nous avons regard√© comment √©crire des requ√™tes pour recevoir des donn√©es du c√¥t√© serveur de 8base, ainsi que comment √©crire des mutations de <i>cr√©ation</i> et de <i>suppression</i> .  8base en tant que plate-forme est relativement facile √† naviguer et offre une interface utilisateur intuitive.  J'ai pass√© la nuit √† le comprendre.  Vous pouvez combler le trou manquant en apprenant √† √©crire des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mutations de</a> <i>mise</i> √† <i>jour</i> et en ajoutant la possibilit√© de modifier des notes.  Je suis s√ªr que les utilisateurs seront satisfaits.  Vous pouvez √©galement consulter leur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> officielle pour obtenir plus d'informations sur la plateforme.  Vous pouvez trouver le code source de l'application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463907/">https://habr.com/ru/post/fr463907/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463897/index.html">Audit de s√©curit√© de la plateforme cloud MCS</a></li>
<li><a href="../fr463899/index.html">Pourquoi attendons-nous l'invention du v√©lo depuis si longtemps?</a></li>
<li><a href="../fr463901/index.html">Test de la disponibilit√© des r√©seaux NB-IoT √† Saint-P√©tersbourg (ao√ªt 2019)</a></li>
<li><a href="../fr463903/index.html">5 conseils de leadership en conception 2e partie</a></li>
<li><a href="../fr463905/index.html">Promotion de la cha√Æne Youtube</a></li>
<li><a href="../fr463913/index.html">Et comment les agences de recrutement recherchent-elles vraiment des programmeurs?</a></li>
<li><a href="../fr463915/index.html">Qu'est-ce qu'un CDN et comment fonctionne-t-il?</a></li>
<li><a href="../fr463917/index.html">20 choses que j'aimerais savoir avant de devenir d√©veloppeur web</a></li>
<li><a href="../fr463919/index.html">Grande pens√©e philosophique: Top 10 des discussions Piter de DotNext 2019</a></li>
<li><a href="../fr463921/index.html">(Pas tr√®s) les co√ªts cach√©s de la base de code commune d'iOS et d'Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>