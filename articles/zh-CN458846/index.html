<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏼 👩‍👦‍👦 💇🏾 如何使用Unity开发另一个平台游戏。 另一个教程 👨‍🏫 🗻 🎾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！ 


 另一篇文章正等待您的切入，这将根据Habr上名为2D游戏的关卡设计模式的文章的翻译，向您介绍我如何设定编程游戏的目标。 


 这篇文章有很多文本（常规和来源）和许多图片。 


 在开始我的第一篇文章之前，让我们认识您。 我叫丹尼斯。 我以系统管理员的身份工作，总共有7年的经验。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何使用Unity开发另一个平台游戏。 另一个教程</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458846/"><p> 哈Ha！ </p><br><p> 另一篇文章正等待您的切入，这将根据Habr上名为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2D游戏的关卡设计模式</a>的文章的翻译，向您介绍我如何设定编程游戏的目标。 </p><br><p> 这篇文章有很多文本（常规和来源）和许多图片。 </p><a name="habracut"></a><br><p> 在开始我的第一篇文章之前，让我们认识您。 我叫丹尼斯。 我以系统管理员的身份工作，总共有7年的经验。 我不是要告诉您的是，系统管理员是一种IT员工，需要认真部署一次，然后考虑在监视器上闪烁各种字符。 随着时间的流逝，我得出的结论是，该是扩展知识范围并转向编程的时候了。 在不赘述的情况下，我尝试使用C ++和Python进行任何项目。 但是经过一年的学习，我得出的结论是，对我的应用程序和系统软件进行编程不是我的。 由于各种原因。 </p><br><p> 经过更深入的思考，我问自己一个问题：我真的喜欢使用不同类型的计算设备做什么？ 我对自己的问题让我进入了孩提时代，也就是在PS1，PS2，PC上的Railroad Tycoon 3花费的欢乐时光中……，嗯，您知道的。 电子游戏！ </p><br><p> 根据各种培训材料的数量，选择权就落在了Unity上（不重新发明轮子吗？）。 经过一个月的阅读和阅读各种材料后，我决定将第一款非常简单的儿童游戏发布到游戏市场。 克服恐惧可以这么说。 毕竟，在游戏市场发布应用程序并不可怕，对吗？ </p><br><p> 几个月后，我发布了已经更加复杂的平台程序。 然后休息了（毕竟，必须继续进行这项工作）。 </p><br><p> 大约两周前，我在一个名为2D游戏的关卡设计模式（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/en/post/456152/</a> ）的中心上看到一篇文章的翻译，并自言自语-为什么不呢？ 本文的表简单明了，列出了游戏中应该包含的内容，因此很有趣。 我在OneNote中将表复制给自己，并用标签Cases（可以标记为完成）标记每个模式。 </p><br><p> 结果我想得到什么？ 您的批评。 就像我对自己说的那样-如果您想学习游泳，那就用头潜水。 如果您认为我做得很好，请在评论中写信给我。 如果您认为我做得不好，请加倍写下。 </p><br><p> 我将开始我的长程序，以对另一个平台程序进行编程。 </p><br><h3> 头像 </h3><br><p>  <em>游戏中玩家控制的实体。</em>  <em>例如，《超级马里奥兄弟》（任天堂，1985年）中的马里奥和路易吉。</em> </p><br><p> 为了赋予英雄生命，需要执行几个子任务。 即： </p><br><pre><code class="plaintext hljs">•   ( ) •      •      •       •       </code> </pre> <br><p> 要实现动画，我们需要将单个子画面转换为多子画面。 这非常简单。 将精灵添加到项目文件夹，然后在Explorer Explorer Unity Unity Explorer中找到它。 然后，在检查器窗口中单击精灵，将<strong>SptiteMode</strong>属性的值从<strong>Single</strong>更改为<strong>Multiple</strong> 。 </p><br><p><img src="https://habrastorage.org/webt/xx/ot/ny/xxotnyobz6-0kunbcizdwwk-4zu.png" alt="图片"></p><br><p> 单击“ <strong>应用”</strong> ，然后单击“ <strong>SpriteEditor”</strong> 。 </p><br><p> 在“ <strong>精灵编辑器”</strong>窗口中，您需要用鼠标选择未来动画的每一帧，如下图所示。 </p><br><p> 同样，Unity提供了自动突出显示精灵内对象边界的功能。 为此，在“ <strong>精灵编辑器”</strong>窗口中，必须单击“ <strong>切片”</strong>按钮。 在下拉菜单中，您应该具有<strong>Type =&gt; Automatic，Pivot =&gt; Center</strong> 。 您所要做的就是单击“ <strong>切片”</strong>按钮。 之后，将自动选择精灵内的所有对象。 </p><br><img src="https://habrastorage.org/webt/bf/tb/kv/bftbkvncerh-ybaf6_nlgaxprdg.png"><br><p> 让我们对所有其他动画执行此操作。 接下来，您将需要配置动画状态及其切换。 这分两个步骤完成。 第一个动作，程序代码。 <br> 创建一个空的游戏对象。 为此，请在“ <strong>层次结构”</strong>选项卡中单击鼠标右键，然后从下拉菜单中选择“ <strong>创建空白</strong> ”。 </p><br><img src="https://habrastorage.org/webt/l1/zb/ap/l1zbap5u09_kzb1mllj1tqwizgw.png"><br><p> 默认情况下，在舞台上创建的一个空游戏对象只有一个组件<strong>-Transform</strong> 。 该组件确定对象在舞台上的位置，倾斜角度及其比例。 </p><br><p> 您可以在两种不同的含义中遇到“ <strong>变换</strong> ”一词： </p><br><blockquote><ul><li>  <strong>变换</strong>是一类。 由于这是一个类，因此Transform描述了该对象将位于什么坐标以及它将位于什么尺寸的<strong>软件实现</strong> 。 </li><li>  <strong>transform</strong>是类的实例。 也就是说， <strong>您可以引用特定的对象</strong>并更改其在场景中的位置或比例。 例如，在代码的更深处将有一行： <br><pre> <code class="cs hljs">transform.position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2 (transform.position.x + dirX, transform.position.y + dirY);.</code> </pre> <br><br> 这条线将负责卢卡斯在舞台上的移动。 </li></ul><br></blockquote><p> 要创建自己的组件，请在对象检查器的选项卡中单击“ <strong>添加组件”</strong>按钮。 接下来，在标准组件中出现一个搜索框。 开始键入将来脚本（或已实现的组件）的名称就足够了，如果没有合适的名称，Unity将为您提供一个创建新组件的名称。 我称这个组件为<strong>HeroScript.cs</strong> 。 </p><br><img src="https://habrastorage.org/webt/fi/hf/gn/fihfgnpyl-ndmnx23l8mbotdh4a.png"><br><p> 首先，我们描述将存储有关卢卡斯视觉和物理组件信息的字段： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Animator animator; <span class="hljs-comment"><span class="hljs-comment">//      . private Rigidbody2D rb2d; //rb    </span></span></code> </pre> </div></div><br><p> 接下来，将响应角色移动的字段： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> Vector3 localScale; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> facingRight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dirX, dirY; <span class="hljs-comment"><span class="hljs-comment">//    [Range(1f, 20f)] [SerializeField] private float moveSpeed; //    private SpriteRenderer sprite; //   SpriteRenderer /*   ,     */</span></span></code> </pre> </div></div><br><p> 一个很好的开始。 接下来，将描述枚举并写入将负责切换动画状态的属性。 该枚举必须在类之外编写： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/* *      . *         *    . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CharState { idle, <span class="hljs-comment"><span class="hljs-comment">//   0 Run, //   1 Walk, //   2 Die //   3 }</span></span></code> </pre> </div></div><br><p> 我们实现了一个属性，该属性将接收并设置新的动画状态： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CharState State { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> {<span class="hljs-comment"><span class="hljs-comment">//    CharState    animator       int return (CharState)animator.GetInteger("State"); } set { //    animator     int    State       ,      int. animator.SetInteger("State", (int)value); } }</span></span></code> </pre> </div></div><br><p> 软件部分完成。 现在，我们有了一个枚举和一个与切换动画相关的属性。 接下来，第二步。 在Unity编辑器中，您需要绑定动画状态并指出需要更改哪些int值。 </p><br><p> 为此，您必须将先前创建的多重精灵与一个空的游戏对象相关联。 您需要做的就是在Unity Explorer中选择框架并将其拖动到一个空的游戏对象上，我们之前已将该脚本固定到该游戏对象上。 </p><br><p><img src="https://habrastorage.org/webt/zx/md/y8/zxmdy88fwc5gglpbjz3bkj0rjfq.png" alt="图片"></p><br><p> 对每个后续动画执行此操作。 此外，在带有动画的资源管理器中，您将找到带有框图和“ <strong>播放”</strong>按钮的对象的外观。 双击它会打开“ <strong>Animator”</strong>选项卡。 在内部，您将看到几个带有动画的块，并且最初，只有<strong>Entry</strong>状态和已连接的第一组动画被连接。  <strong>AnyState</strong>和其他动画将显示为常规灰色正方形。 为了绑定所有内容，您需要单击<strong>AnyState</strong>的状态，并选择唯一的<strong>Make Transaction</strong>下拉菜单，并将其绑定到灰色块。 必须针对每种条件执行此操作。 最后，您应该获得类似下面的屏幕快照中所示的内容。 </p><br><p><img src="https://habrastorage.org/webt/-d/0d/7j/-d0d7j-y1okjqhr6wgywx2ht768.png" alt="图片"></p><br><p> 接下来，您必须明确指出<strong>State的</strong>确切位置，以启动必要的动画。 注意屏幕截图，即其左侧部分。  <strong>参数</strong>标签。 在其中创建一个类型为<strong>int State的</strong>变量。 接下来，注意右侧。 首先，从动画过渡开始，您需要取消选中“ <strong>可以向自身交易”</strong>复选框。 此操作将使您免于动画向自身和“ <strong>条件”</strong>部分的奇怪的过渡，有时甚至是完全无法理解的过渡，在“ <strong>条件”</strong>部分中，我们指出此动画过渡被分配了<strong>State</strong>变量的值3。 之后，Unity将知道要运行哪个动画。 <br> 动画角色移动已完成所有操作。 让我们继续前进。 </p><br><p> 下一步是教卢卡斯走上舞台。 这完全是编程。 要在场景中四处移动角色，您将需要按钮，单击此按钮，卢卡斯将来回移动。 为此，在<strong>Assets Store</strong>选项卡中，我们需要导入Standart Assets，但不是全部，仅导入一些其他组件，即： </p><br><p>  <strong>•CrossPlatformInput</strong> <strong><br></strong>  <strong>•编辑器</strong> <strong><br></strong>  <strong>•环境</strong> </p><br><p> 导入资产后，应修改Unity主窗口，并出现另一个选项卡<strong>Mobile Input</strong> 。 我们激活它。 </p><br><p> 让我们在舞台上创建新的<strong>UI</strong>元素-控制按钮。 在每个方向上创建4个按钮。 上，下，前进和后退。 在图像组件中，我们为按钮分配一个图像，该图像将与图像相对应，这意味着可以移动。 它看起来应类似于以下屏幕截图： </p><br><img src="https://habrastorage.org/webt/c6/jv/kk/c6jvkketndj8sqq4vodxamn-oni.png"><br><p> 向每个按钮添加一个<strong>AxisTouchButton</strong>组件。 该脚本只有4个字段。  <strong>axisName</strong>字段表示调用时要响应的名称。  <strong>axisValue</strong>字段负责Lucas的移动方向。  <strong>responseSpeed</strong>字段负责Lucas将以多快的速度发展。  <strong>returnToCentreSpeed</strong>字段负责按钮返回中心的速度。 对于“前进”按钮，保持原样。 对于后退按钮，将<strong>axisValue</strong>的值<strong>更改</strong>为-1，以便Lucas向后移动。 对于“向上”和“向下”按钮，将<strong>axisName</strong>更改为<strong>Vertical</strong> 。 对于“向上”按钮<strong>axisValue，</strong>将“向下-1”的值设置为1。 </p><br><p> 接下来，修改<strong>HeroScript.cs</strong> 。 将名称空间添加到<strong>using</strong>指令 </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityStandardAssets.CrossPlatformInput; <span class="hljs-comment"><span class="hljs-comment">//    .</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">       : <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> Vector3 localScale; <span class="hljs-comment"><span class="hljs-comment">//   bool facingRight = true; [SerializeField] private float dirX, dirY; //    [Range(1f, 20f)] [SerializeField] private float moveSpeed; //    private SpriteRenderer sprite; //   SpriteRenderer /*   ,     */</span></span></code> </pre> </div></div><br><p> 在标准的Start方法中，添加以下代码： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { localScale = transform.localScale; animator = GetComponent&lt;Animator&gt;(); <span class="hljs-comment"><span class="hljs-comment">//     . sprite = GetComponent&lt;SpriteRenderer&gt;(); //  SpriteRenderer rb = GetComponent&lt;Rigidbody2D&gt;(); State = CharState.idle; }</span></span></code> </pre> </div></div><br><p> 我们创建一个负责移动英雄的方法： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveHero</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { dirX = CrossPlatformInputManager.GetAxis (<span class="hljs-string"><span class="hljs-string">"Horizontal"</span></span>) * moveSpeed * Time.deltaTime; dirY = CrossPlatformInputManager.GetAxis (<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>) * moveSpeed * Time.deltaTime; transform.position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2 (transform.position.x + dirX, transform.position.y + dirY); }</code> </pre> </div></div><br><p> 如您所见，一切都很简单。  <strong>dirX</strong>和<strong>DirY字段</strong>记录有关轴方向（ <strong>水平</strong>和<strong>垂直</strong> ），速度（需要在编辑器中指定），乘以最后一帧的行进时间的信息。 <br>  <strong>transform.position</strong>将新位置写入游戏对象的<strong>Transform</strong>组件。 </p><br><p> 在问题的实际方面，您可以运行场景并查看卢卡斯如何掉入深渊，因为其下没有物体可以阻止这种情况。 卢卡斯（Lucas）始终处在“ <strong>空闲”</strong>动画中，当我们将其引导回去时不会转身。 为此，需要修改脚本。 创建一个确定卢卡斯朝哪个方向看的方法： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckWhereToFace</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { facingRight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { facingRight = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirX == <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.idle; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirY &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dirY &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { State = CharState.Walk; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((facingRight) &amp;&amp; (localScale.x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) || ((!facingRight) &amp;&amp; (localScale.x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>))) localScale.x *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; transform.localScale = localScale;</code> </pre> </div></div><br><p> 这部分代码也不难。 该方法描述了如果<strong>dirX</strong> &gt; 0（如果我们转到右侧），则我们将精灵沿该方向旋转并开始行走动画。 如果小于0，则将Lucas旋转180度并开始动画。 如果<strong>dirX</strong>为零，则卢卡斯站着，您需要启动等待动画。 </p><br><p> 为什么在这种情况下使用<strong>Scale</strong>操作比使用<strong>flipX = true更可取</strong> ？ 将来，我将描述手拿任何物体的能力，而卢卡斯自然可以转过身来拿手中的东西。 如果我使用通常的反射，那么当卢卡斯向左看时，握在手中的对象将保留在右侧（例如）。 放大将使固定卢卡斯的对象朝与卢卡斯本人转过的方向相同的方向移动。 </p><br><p> 我们将<strong>CheckWhereToFace（）</strong>函数放在<strong>Update（）</strong>函数中，以便逐帧监视。 </p><br><p> 太好了  5的前2分完成。 让我们继续对卢卡斯的需求。 假设卢卡斯必须具备3种生存需求。 这是生活水平，饥饿水平和口渴水平​​。 为此，您需要创建一个简单易懂的面板，其中包含每个项目的指示器。 要创建这样的面板，请右键单击并选择<strong>UI =&gt; Panel</strong> 。 </p><br><p> 让我们大致如下标记 </p><br><p><img src="https://habrastorage.org/webt/yp/oz/fs/ypozfsb3q_vygo6usfn1t_btnyc.png" alt="图片"></p><br><p> 该面板包含每个需求的三幅图像（图像）（左）。 右边是面板本身。 在第一层（我们将以这种方式进行说明）上，有一个不透明的颜色指示器（图像），在其下面复制了一个Image对象，该对象是透明的。 此图像是原始图像的一半透明。 此外，不具有透明度的图像具有图像<strong>类型=填充</strong>属性。 此功能将使我们能够模拟需求规模的减少。 </p><br><p><img src="https://habrastorage.org/webt/ld/vo/qy/ldvoqyj2ioak7ufaycjjmjvbeta.png" alt="图片"></p><br><p><img src="https://habrastorage.org/webt/l7/wu/ok/l7wuokjirtsp-p66wixm2zybfbu.png" alt="图片"></p><br><p> 定义新的静态变量： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Health = <span class="hljs-number"><span class="hljs-number">100</span></span>, Eat = <span class="hljs-number"><span class="hljs-number">100</span></span>, Water = <span class="hljs-number"><span class="hljs-number">100</span></span>, _Eat = <span class="hljs-number"><span class="hljs-number">0.05f</span></span>, _Water = <span class="hljs-number"><span class="hljs-number">0.1f</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        .    _  . /*   ,     */ /*  ,      */ [SerializeField] Image iHealt, iEat, iWater; //      /*   ,      */</span></span></code> </pre> </div></div><br><p> 在这种情况下，我使用静态字段。 这样做是为了使这些字段对于整个类都是唯一的。 同样，这将使我们能够通过类名直接访问这些字段。 我们编写一些简单的函数： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fEat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { Eat = Eat - x * Time.deltaTime; iEat.fillAmount = Eat / <span class="hljs-number"><span class="hljs-number">100f</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,        return Eat; } private float fWater(float x) { Water = Water - x * Time.deltaTime; iWater.fillAmount = Water / 100; return Water; }</span></span></code> </pre> </div></div><br><p> 然后，我们编写一种方法来收集有关饮食欲望的信息： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Needs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(_Eat) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.Log(Eat); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(<span class="hljs-number"><span class="hljs-number">0</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { StartCoroutine(ifDie()); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fWater(_Water) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.Log(Water); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fWater(<span class="hljs-number"><span class="hljs-number">0</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { StartCoroutine(ifDie()); }</code> </pre> </div></div><br><p>  <strong>Needs（）</strong>函数放置在<strong>Update（）</strong>函数中，并调用每个框架。 因此，在行中 </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fEat(_Eat) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p> 调用一个函数，该函数将应从<strong>Eat</strong>和<strong>Water</strong>变量中获取多少作为参数。 如果函数的结果不为0，则表示卢卡斯尚未因口渴或饥饿而死亡。 如果卢卡斯确实死于饥饿或致命伤，那么我们会协程 </p><br><pre> <code class="cs hljs">StartCoroutine(ifDie());</code> </pre> <br><p> 这将启动死亡动画并重新启动关卡： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ifDie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { State = CharState.Die; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">)</span></span>; SceneManager.LoadScene(<span class="hljs-string"><span class="hljs-string">"WoodDay"</span></span>, LoadSceneMode.Single); }</code> </pre> </div></div><br><h3> 硬瓦 </h3><br><p>  <em>不允许玩家通过的游戏对象。</em>  <em>例如：《超级马里奥兄弟》中的性别（任天堂，1985年）。</em> </p><br><p> 为了实现地球并防止Lucas跌落，您需要将<strong>BoxCollider2D</strong>和<strong>Rigidbody2D</strong>组件连接到Lucas。 另外，您还需要<strong>BoxCollider2D</strong>组件所在的地球精灵。  <strong>BoxCollider2D</strong>组件实现了碰撞器及其碰撞行为。 在这个阶段，我们除了防止卢卡斯（Lucas）地下的失败外，什么都不需要。 我们可以选择编辑的仅仅是对撞机的边框。 在我的情况下，地面精灵具有草皮表面，因此看起来草皮无法支撑卢卡斯的重量，我将编辑组件的边框。 </p><br><img src="https://habrastorage.org/webt/ey/0n/hv/ey0nhvwblv9xamkiyesto7exsve.png"><br><p> 现在，一个令人兴奋的关卡标记过程。 为了方便起见，您可以将这块土地出口到预制件。 预制件是游戏对象的容器，对其进行修改后，您可以将更改自动应用于从该预制件创建的所有游戏对象。 接下来，使用CTRL + D克隆此预制件（在“层次结构”选项卡中选择它），然后将其放置在舞台上。 </p><br><p><img src="https://habrastorage.org/webt/b6/dm/6t/b6dm6tbsz6mezi1upkenyd9sloa.png" alt="图片"></p><br><h3> 萤幕 </h3><br><p>  <em>玩家当前可见的游戏级别/世界的一部分。</em> </p><br><p> 设置一个摄像机，该摄像机将跟随播放器显示部分场景。 接下来，将有一个非常简单的脚本来实现： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject objectToFollow; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed = <span class="hljs-number"><span class="hljs-number">2.0f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CamFoll(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CamFoll</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> interpolation = speed * Time.deltaTime; Vector3 position = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position; position.y = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.y, objectToFollow.transform.position.y, interpolation); position.x = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.x, objectToFollow.transform.position.x, interpolation); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position = position; }</code> </pre> </div></div><br><p> 在<strong>GameObject</strong>类型的<strong>objectToFollow</strong>字段中，将分配一个要监视的对象，在speed字段中，必须平滑地移动到分配的GameObject后面的速度。 </p><br><p> 自上一帧以来的移动速度信息记录在插值字段中。 接下来，将使用Lerp方法，这将确保相机在沿X和U轴移动时在Lucas后面平滑移动。不幸的是，我无法解释这条线的操作 </p><br><pre> <code class="cs hljs">position.y = Mathf.Lerp(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.position.y, objectToFollow.transform.position.y, interpolation);</code> </pre> <br><p> 在数学方面。 因此，我会说更简单-此方法将延长任何操作的执行时间。 在我们的情况下，这是摄像机在物体后面的移动。 </p><br><h3> 危险性 </h3><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><p> 阻止玩家完成任务的实体。 示例：来自1001个尖峰的尖峰（Nicalis和8bits Fanatics，2014年）。 </p></div></div><br><p> 让我们开始添加一些东西，这不仅会阻止卢卡斯走到舞台的尽头，而且会影响卢卡斯的生命和死亡的可能性（其中一个，我们将实现第五个子问题来实现卢卡斯的人生故事-英雄可以被杀死或死亡）。 <br> 在这种情况下，我们在隐藏在植被后面的舞台上散布尖峰，只有玩家的专心才能通过。 </p><br><p> 创建一个空的<strong>GameObject</strong>并将<strong>SpriteRenderer</strong>和<strong>PolygonCollider2D</strong>组件连接到它。 在<strong>SpriteRenderer</strong>组件中， <strong>我们根据需要</strong>连接带倒钩的按钮的精灵或任何其他对象。 另外，将<strong>标签= Thorn</strong>分配给峰值。 </p><br><p> 接下来，在Lucas <strong>GameObject上，我们</strong>创建一个脚本，该脚本负责Lucas与其他对撞机发生碰撞时将发生的事情。 就我而言，我将其称为<strong>ColliderReaction.cs</strong> </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rigidbody2D rb2d; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { rb2d = GetComponent&lt;Rigidbody2D&gt;(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerEnter2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Thorn"</span></span>: { rb2d.AddForce(transform.up * <span class="hljs-number"><span class="hljs-number">4</span></span>, ForceMode2D.Impulse); HeroScript.Health = HeroScript.Health - <span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p> 该脚本的本质很简单，只有2x2。 当<strong>Thorn</strong>标签<strong>与</strong>游戏对象<strong>碰撞</strong>时， <strong>Switch</strong>语句将与我们指定的候选对象进行比较。 就我们而言，现在是<strong>Thorn</strong> 。 首先，卢卡斯吐了，然后我们转向一个静态变量，并从卢卡斯得到5个生命单位。 展望未来，我可以说描述与敌人冲突的同一件事是有意义的： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Enemy"</span></span>: { rb2d.AddForce(transform.up * <span class="hljs-number"><span class="hljs-number">2</span></span>, ForceMode2D.Impulse); HeroScript.Health = HeroScript.Health - <span class="hljs-number"><span class="hljs-number">10</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre> </div></div><br><p> 接下来，我建议用一块石头杀死两只鸟。 </p><br><h3> 收集的项目和规则。 </h3><br><p> 玩家可以拾取的游戏对象。 </p><br><p> 我们提出的规则是，如果卢卡斯想在岛屿之间穿行并爬上去，那么您需要收集一棵树来建造桥梁和楼梯。 <br> 根据已经通过的方法，我们将创建一棵树和楼梯。 </p><br><p> 我们会将脚本连接到树上，该脚本将负责您开始砍伐后可以从中敲出多少条日志。 由于在精灵集中仅提出了攻击的动画，因此我们在切割树时将使用它（生产成本）。 <br> 树上的脚本： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform inst; <span class="hljs-comment"><span class="hljs-comment">//     [SerializeField] private GameObject FireWoodPref; //   [SerializeField] private int fireWood; //       </span></span></code> </pre> </div></div><br><p> 当级别开始时，我们在<strong>fireWood中</strong>写入一个随机值： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { fireWood = Random.Range(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>); }</code> </pre> </div></div><br><p> 描述一种带有参数的方法，该方法将负责一次笔触将落入多少日志： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fireWoodCounter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; fireWood; i++) { fireWood = fireWood - x; InstantiateFireWood(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fireWood; }</code> </pre> </div></div><br><p> 一种在舞台上创建日志克隆的方法。 <br> 私有void InstantiateFireWood（）： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"> { Instantiate(FireWoodPref, inst.position, inst.rotation); }</code> </pre> </div></div><br><img src="https://habrastorage.org/webt/g6/sb/di/g6sbdisre8fpoe58lkkr3bvyeha.png"><br><p> 让我们创建一个日志，并将脚本与以下代码连接： </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerEnter2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Player"</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"   !"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { InventoryOnHero.woodCount = InventoryOnHero.woodCount + <span class="hljs-number"><span class="hljs-number">1</span></span>; Destroy(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p> 接下来，我们还将创建一个负责库存的类。 </p><br><p> 首先，检查袋子中是否有空间。 如果没有，那么错误和日志仍然存在，如果有空间，那么我们将库存补充一个单位并销毁日志。 <br> 接下来，您需要使用这些资源。 如上所述，我们为玩家提供了建造桥梁和楼梯的机会。 </p><br><p> 要创建桥，我们需要两个预制件，桥的左右一半。       <strong>BoxCollider2D</strong> .  ,    ,      - ,  . </p><br><p>        : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform inst1, inst2; <span class="hljs-comment"><span class="hljs-comment">//        [SerializeField] private GameObject bridgePref1, bridgePref2; //   [SerializeField] private int BridgeCount; //   ,   .   </span></span></code> </pre> </div></div><br><p> : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildBridge</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount == <span class="hljs-number"><span class="hljs-number">0</span></span>) { Debug.LogWarning (<span class="hljs-string"><span class="hljs-string">" !"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (InventoryOnHero.woodCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { BridgeCount = BridgeCount - <span class="hljs-number"><span class="hljs-number">1</span></span>; InventoryOnHero.woodCount = InventoryOnHero.woodCount - <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (BridgeCount) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: Inst1(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: Inst2(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"-      "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  ,    ,       . ,   10 ,  12  8. </p><br><p> , ,      ,  ,    .  ,   1  ,      1   .    ,      5,   ,        .  0,   .  ,   . </p><br><p>      . </p><br><p>    ,   <strong>ColliderReaction.cs</strong> : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerStay2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Ladder"</span></span>: { rb2d.gravityScale = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerExit2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (collision.gameObject.tag) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Ladder"</span></span>: { rb2d.gravityScale = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> </div></div><br><p>  <strong>OnTriggerStay2D</strong> ,          .  ,     0. ,        .  <strong>OnTriggerExit2D</strong>  ,              . </p><br><h3>  </h3><br><p> <em>,   .</em> </p><br><p>    19    ,           . ,       ,    ,  ,      ,   . </p><br><p>   GO,      <strong>SpriteRenderer</strong> , <strong>BoxCollider2D</strong> , <strong>Rigidbody2D</strong> . ,      — ,        .       ,          ru.stackoverflow.com. </p><br><p><img src="https://habrastorage.org/webt/fu/uw/ri/fuuwriruf0zli9r6pwvprae_qba.png" alt="图片"></p><br><p>         <strong>Trees</strong> . </p><br><p> ,        . ,    -,      ,          Raycast     2     (4   ).  ,  ,   ,      (   ).        (    ),      .      ,      .     ,      ,       .  ,      . ,     ,                 (     ,      ). </p><br><p>   ,     .   ,       - . </p><br><p>     : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameObject area; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> m1 = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, m2; <span class="hljs-comment"><span class="hljs-comment">// m  move private void fGreenMonster() { float dist = Vector3.Distance(greenMonster.transform.position, area.transform.position); Debug.Log(dist); if (m1) { if (dist &lt; 3f) { transform.position += new Vector3(speed,0,0) * Time.deltaTime; SR.flipX = true; } else { m1 = false; m2 = true; } } if (m2) { if(dist &gt;= 1f) { transform.position += new Vector3(-speed,0,0) * Time.deltaTime; SR.flipX = false; } else { m2 = false; m1 = true; } } }</span></span></code> </pre> </div></div><br><p>      <strong>Update()</strong>    ,        .   ,  3 ,   .   3,        ,     . </p><br><p><img src="https://habrastorage.org/webt/nf/4y/6e/nf4y6edxsifi9_m3eq56d0xlbtw.png" alt="图片"></p><br><p>  ,         . </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fSunFlower</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { canBullet = canBullet - minus * Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameObject; newArrow.transform.position = transform.position; Rigidbody2D rb = newArrow.GetComponent&lt;Rigidbody2D&gt;(); rb.velocity = sunFlowerTrans.transform.forward * -sunFlowerBulletSpeed; canBullet = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameObject; newArrow.transform.position = transform.position; Rigidbody2D rb = newArrow.GetComponent&lt;Rigidbody2D&gt;(); rb.velocity = sunFlowerTrans.transform.forward * sunFlowerBulletSpeed; canBullet = <span class="hljs-number"><span class="hljs-number">2</span></span>; }</code> </pre> </div></div><br><pre> <code class="cs hljs">canBullet = canBullet - minus * Time.deltaTime;</code> </pre> <br><p>   ,      . </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canBullet &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; SR.flipX == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { GameObject newArrow = Instantiate(sunFlowerBullet) }</code> </pre> </div></div><br><p>  ,  ,     ,   ,    : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Damage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { Health = Health - x; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Health; }</code> </pre> </div></div><br><p> , ,     : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ifDie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Damage(<span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { Destroy(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } }</code> </pre> </div></div><br><p>   0,   . </p><br><p>  ,         : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bGreenMonster) { fGreenMonster(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bSunFlower) { fSunFlower(); }</code> </pre> </div></div><br><p>   ,         . </p><br><p><img src="https://habrastorage.org/webt/-1/1s/ki/-11skihlzc3vevw5zqiuxstlmre.png" alt="图片"></p><br><p>   . </p><br><p>  ,      ? </p><br><p> ,       . </p><br><p>      : </p><br><img src="https://habrastorage.org/webt/7i/oe/3l/7ioe3lshbpcu-hkwa09wydzefbs.png"><br><p>  : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Transform Hero; <span class="hljs-comment"><span class="hljs-comment">//         [SerializeField] private float distWhatHeroSee; //   [SerializeField] private LayerMask Tree, BridgeBuild, LadderBuild ,drinkingWater, lEnemy; //  </span></span></code> </pre> </div></div><br><p>      ,         : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AttackBtn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CrossPlatformInputManager.GetButtonDown(<span class="hljs-string"><span class="hljs-string">"Attack"</span></span>)) { GameObject.Find(<span class="hljs-string"><span class="hljs-string">"Hero"</span></span>).GetComponent&lt;HeroScript&gt;().State = CharState.AttackA; Collider2D[] Trees = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, Tree); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Trees.Length; i++) { Trees[i].GetComponent&lt;TreeControl&gt;().fireWoodCounter(<span class="hljs-number"><span class="hljs-number">1</span></span>); Debug.Log(<span class="hljs-string"><span class="hljs-string">"Trees Collider"</span></span>); HeroScript.Water = HeroScript.Water - <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// BB  BridgeBuild Collider2D[] BB = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, BridgeBuild); for (int i = 0; i &lt; BB.Length; i++) { BB[i].GetComponent&lt;BridgeBuilding&gt;().BuildBridge(); HeroScript.Water = HeroScript.Water - 0.17f; }</span></span></code> </pre> </div></div><br><pre> <code class="cs hljs">GameObject.Find(<span class="hljs-string"><span class="hljs-string">"Hero"</span></span>).GetComponent&lt;HeroScript&gt;().State = CharState.AttackA;</code> </pre> <br><p>      ,          . <br> ,   : </p><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text"><pre> <code class="cs hljs">Collider2D[] Trees = Physics2D.OverlapCircleAll(Hero.position, distWhatHeroSee, Tree); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Trees.Length; i++) { Trees[i].GetComponent&lt;TreeControl&gt;().fireWoodCounter(<span class="hljs-number"><span class="hljs-number">1</span></span>); Debug.Log(<span class="hljs-string"><span class="hljs-string">"Trees Collider"</span></span>); HeroScript.Water = HeroScript.Water - <span class="hljs-number"><span class="hljs-number">0.7f</span></span>; }</code> </pre> </div></div><br><p>   <strong>Trees</strong> ,      .      ,        ,       ,    .         . <br>  ,            . Simple as that! </p><br><p>   , -    : </p><br><p><img src="https://habrastorage.org/webt/x6/cg/du/x6cgduvtlqneym3ulljopmfy2yo.png" alt="图片"></p><br><p>      ,       —  . <br>   ,      .  ,         ,    ,     . </p><br><p>   2        ,                     . </p><br><p> ! </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> . </p><br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://opengameart.org/</a> ,  : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> </li><li>   Unity  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ru.stackoverflow.com</a> </li><li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Google Play</a> </li><li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Google Play</a> </li><li>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">sourceforge.net.</a> <br>             worldofonehero@gmail.com. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458846/">https://habr.com/ru/post/zh-CN458846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458834/index.html">保罗·艾伦（Paul Allen）个性的一面，关于这个问题，我想知道的人并不多</a></li>
<li><a href="../zh-CN458836/index.html">罗宋汤指数。 评估，比较，确定价格/质量比的系统方法</a></li>
<li><a href="../zh-CN458840/index.html">我们如何刺穿中国大防火墙（第2部分）</a></li>
<li><a href="../zh-CN458842/index.html">耐心和劳动将摘录全文</a></li>
<li><a href="../zh-CN458844/index.html">通过VeriSM™适应方法进行筒仓破坏</a></li>
<li><a href="../zh-CN458848/index.html">Rust 1.36.0版本：未来特性，分配稳定和MaybeUninit <T></a></li>
<li><a href="../zh-CN458850/index.html">廉价而高效地学习英语。 第二部分</a></li>
<li><a href="../zh-CN458854/index.html">MotionLayout：动画效果更好，代码更少</a></li>
<li><a href="../zh-CN458856/index.html">便宜和昂贵的AAA电池</a></li>
<li><a href="../zh-CN458860/index.html">调整Linux内核参数以优化PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>