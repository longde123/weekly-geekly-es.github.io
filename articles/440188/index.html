<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàµ üë®‚Äçüíª üë®üèæ‚Äçüíº Alcanzando las estrellas: Dominando a los operadores de Ansible para la gesti√≥n de aplicaciones en Kubernetes üìô üòª üï∫üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Veremos c√≥mo usar los roles publicados en Ansible Galaxy como operadores que administran aplicaciones en Kubernetes, y veamos c√≥mo crear un operador q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alcanzando las estrellas: Dominando a los operadores de Ansible para la gesti√≥n de aplicaciones en Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/440188/">  Veremos c√≥mo usar los roles publicados en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ansible Galaxy</a> como operadores que administran aplicaciones en Kubernetes, y veamos c√≥mo crear un operador que simplemente instale la aplicaci√≥n y ajuste su comportamiento de manera flexible seg√∫n el entorno. <br><br><img src="https://habrastorage.org/webt/kk/7j/6q/kk7j6qx0eteemrqiug7iyohofli.jpeg" width="100%"><br><br>  Usaremos <a href="">Ansible Operator</a> y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulo k8s</a> para mostrar c√≥mo usar Ansible para crear aplicaciones Kubernetes. <br><a name="habracut"></a><br>  Ansible Operator es parte del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Operator SDK</a> y le permite formular las regulaciones operativas de la aplicaci√≥n (c√≥mo debe instalarse y mantenerse) en el lenguaje de roles y libros de jugadas de Ansible.  El m√≥dulo k8s, a su vez, ampl√≠a la capacidad de administrar objetos en Kubernetes al crear tales roles y libros de jugadas. <br><br>  Un operador se crea as√≠ simplemente as√≠. <br><br><pre><code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre> <br><h3>  Tecla de inicio </h3><br>  Primero, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">algunas</a> palabras sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el m√≥dulo k8s Ansible</a> .  Apareci√≥ en Ansible 2.6 y ampl√≠a las posibilidades de trabajar con objetos Kubernetes de Ansible y en cualquier distribuci√≥n de Kubernetes, incluido Red Hat OpenShift.  Ansible blog ten√≠a una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci√≥n separada</a> sobre este m√≥dulo y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cliente din√°mico de Python para Red Hat OpenShift</a> .  En nuestra opini√≥n, trabajar con objetos Kubernetes a trav√©s de Ansible sin usar el m√≥dulo k8s est√° mal.  El mecanismo del operador se cre√≥ originalmente para ejecutar aplicaciones en Kubernetes, y el SDK del operador proporciona herramientas para ensamblar, probar y empaquetar operadores.  A su vez, se necesita Ansible Operator para establecer las regulaciones operativas de la aplicaci√≥n en lenguaje Ansible.  El flujo de trabajo correspondiente se organiza de manera bastante simple: primero hacemos operator-sdk new --type = Ansible para generar los archivos necesarios para el operador Ansible, luego pintamos Ansible, y finalmente hacemos operator-sdk build para construir la aplicaci√≥n para trabajar en Kubernetes.  Pero si ya tenemos un papel en Ansible Galaxy, que controla la aplicaci√≥n en Kubernetes, las cosas se vuelven a√∫n m√°s f√°ciles.  A continuaci√≥n haremos lo siguiente: <br><br><ol><li>  Creemos un rol Ansible para administrar la aplicaci√≥n Hello World en Kubernetes, lo que nos ayudar√° a demostrar las capacidades del m√≥dulo k8s Ansible. </li><li>  Publicaremos este papel en Ansible Galaxy. </li></ol><br>  Entonces, ensamblemos el operador Ansible usando el rol publicado en Ansible Galaxy.  ¬øPor qu√© incluso crear un operador usando un rol de Ansible Galaxy?  Hay dos razones: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Para no repetir</a> .  Si ya hemos programado la funci√≥n Ansible para administrar la aplicaci√≥n Hello World y la hemos publicado en Ansible Galaxy, entonces es l√≥gico usarla al crear el operador Ansible. </li><li>  Debido a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">separaci√≥n de responsabilidades</a> .  Queremos que el rol Hello World Ansible administre la aplicaci√≥n del mismo nombre en Kubernetes y que la l√≥gica operativa (operativa) permanezca dentro del operador.  En nuestro ejemplo, la l√≥gica operativa es extremadamente simple: simplemente llama al rol djzager.hello_world_k8s cada vez que crea o modifica un recurso personalizado HelloWorld.  Sin embargo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el futuro</a> esta separaci√≥n se volver√° m√°s significativa, por ejemplo, agregaremos validaci√≥n a la aplicaci√≥n Hello World a trav√©s del rol Ansible e implementaremos el control de estado de los recursos personalizados HelloWorld a trav√©s de la l√≥gica del operador. </li></ol><br><h3>  Hola Kubernetes, conoce a Ansible. </h3><br><h4>  Que necesitamos </h4><br><ol><li>  Ansible: consulte la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gu√≠a de instalaci√≥n</a> si no tiene Ansible instalado. </li><li>  Cliente de Python para OpenShift (opcional).  Solo es necesario para el lanzamiento local.  Las instrucciones de instalaci√≥n est√°n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </li></ol><br>  Empecemos  Primero, crea un esqueleto de roles usando ansible-galaxy: <br><br><pre> <code class="plaintext hljs"># I like clear names on projects. # In meta/main.yml I will make role_name: hello-world-k8s $ ansible-galaxy init ansible-role-hello-world-k8s</code> </pre><br>  Inmediatamente despu√©s de crear una nueva funci√≥n Ansible, estableceremos todos los valores predeterminados para documentar al mismo tiempo sus par√°metros de configuraci√≥n v√°lidos.  Adem√°s, nuestro ejemplo de Hello World no es particularmente complicado a este respecto.  As√≠ es como se ve nuestro archivo por defecto / main.yml: <br><br><pre> <code class="plaintext hljs">--- # NOTE: meta.name(space) comes from CR metadata when run with Ansible Operator # deploy/crds has an example CR for reference name: "{{ meta.name | default('hello-world') }}" namespace: "{{ meta.namespace | default('hello-world') }}" image: docker.io/ansibleplaybookbundle/hello-world:latest # To uninstall from the cluster # state: absent state: present # The size of the hello-world deployment size: 1</code> </pre><br>  Una vez establecidos los valores predeterminados, es necesario decidir qu√© har√° el rol.  La aplicaci√≥n Hello World tendr√° que hacer lo siguiente: <br><br><ol><li>  Obtenga informaci√≥n sobre las API disponibles en el cl√∫ster. </li><li>  Cree varias plantillas y aseg√∫rese de que est√©n presentes o ausentes en el cl√∫ster. </li></ol><br>  Por lo tanto, nuestro archivo tareas / main.yml se ve as√≠: <br><br><pre> <code class="plaintext hljs">--- - name: "Get information about the cluster" set_fact: api_groups: "{{ lookup('k8s', cluster_info='api_groups') }}" - name: 'Set hello-world objects state={{ state }}' k8s: state: '{{ state }}' definition: "{{ lookup('template', item.name) | from_yaml }}" when: item.api_exists | default(True) loop: - name: deployment.yml.j2 - name: service.yml.j2 - name: route.yml.j2 api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  Antes de pasar a las plantillas, preste atenci√≥n a esta l√≠nea en el archivo de tareas: <br><br><pre> <code class="plaintext hljs">api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  Usando set_fact, obtenemos una lista de todas las API disponibles en el cl√∫ster para que podamos generar plantillas de forma selectiva dependiendo de si hay una API all√≠, en este caso, route.openshift.io.  De manera predeterminada, en el cl√∫ster Kubernetes de OpenShift, las Rutas no est√°n disponibles y no las necesitamos, por lo tanto, solo trabajamos con el objeto Ruta cuando hay route.openshift.io en el cl√∫ster. <br><br>  No solo podemos administrar objetos de forma selectiva en el cl√∫ster dependiendo de la disponibilidad de ciertas API, sino tambi√©n usar las plantillas Jinja2 para usar OpenShift DeploymentConfig en nuestra plantilla de implementaci√≥n si el cl√∫ster tiene la API apps.openshift.io.  As√≠ es como se ve nuestro archivo templates / despliegue.yml.j2: <br><br><pre> <code class="plaintext hljs">--- {% if 'apps.openshift.io' in api_groups %} apiVersion: apps.openshift.io/v1 kind: DeploymentConfig {% else %} apiVersion: apps/v1 kind: Deployment {% endif %} metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: replicas: {{ size }} {% if 'apps.openshift.io' in api_groups %} selector: app: {{ name }} service: {{ name }} {% else %} selector: matchLabels: app: {{ name }} service: {{ name }} {% endif %} template: metadata: labels: app: {{ name }} service: {{ name }} spec: containers: - image: {{ image }} name: hello-world ports: - containerPort: 8080 protocol: TCP</code> </pre><br>  Plantillas de archivo / service.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: v1 kind: Service metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: ports: - name: web port: 8080 protocol: TCP targetPort: 8080 selector: app: {{ name }} service: {{ name }}</code> </pre><br>  Y finalmente, el archivo templates / route.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: route.openshift.io/v1 kind: Route metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: port: targetPort: web to: kind: Service name: {{ name }}</code> </pre><br>  Omitimos el archivo meta / main.yml, pero se puede encontrar <a href="">aqu√≠</a> . <br><br>  Como resultado, tenemos la funci√≥n Ansible de administrar la aplicaci√≥n Hello World en Kubernetes, y podemos usar las API disponibles en el cl√∫ster.  En otras palabras, el m√≥dulo k8s y el cliente din√°mico simplifican el trabajo con objetos en Kubernetes.  Esperamos que con el ejemplo de este rol, podamos mostrar el potencial de Ansible al trabajar con Kubernetes. <br><br><h3>  Hola Galaxy, conoce a Kubernetes </h3><br>  Ansible Galaxy tiene muchos roles para configurar servidores y administrar aplicaciones, pero no hay tantos roles para administrar aplicaciones de Kubernetes, por lo que haremos una peque√±a contribuci√≥n. <br><br>  Despu√©s de publicar nuestro papel en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> , todo lo que quedaba era: <br><br><ol><li>  Inicie sesi√≥n en Ansible Galaxy para dar acceso a nuestros repositorios en GitHub. </li><li>  Importa nuestro papel. </li></ol><br>  Eso es todo, ahora nuestro rol hello_world_k8s est√° disponible p√∫blicamente en Ansible Galaxy, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h3>  Hola operador de Ansible, Meet Galaxy </h3><br>  Si estudia cuidadosamente nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto Hello World en GitHub</a> , notar√° que agregamos algunas cosas all√≠ que son necesarias para crear el operador Ansible, a saber: <br><br><ol><li>  <a href="">Un archivo de Watches</a> que asigna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">recursos personalizados de</a> Kubernetes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a</a> roles o libros de jugadas de Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dockerfile</a> para construir nuestro operador. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Implemente el directorio</a> con los objetos de Kubernetes necesarios para ejecutar nuestro operador. </li></ol><br>  Si necesita aprender m√°s sobre c√≥mo construir sus propias declaraciones de Ansible, use la <a href="">Gu√≠a del usuario</a> .  Pero dado que prometimos construir un operador Ansible usando el rol publicado en Ansible Galaxy, todo lo que <b>realmente</b> necesitamos es un Dockerfile: <br><br><pre> <code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre><br>  Ahora recogemos el operador: <br><br><pre> <code class="plaintext hljs">$ docker build -t hello-world-operator -f Dockerfile . Sending build context to Docker daemon 157.2 kB Step 1/3 : FROM quay.io/operator-framework/ansible-operator latest: Pulling from operator-framework/ansible-operator Digest: sha256:1156066a05fb1e1dd5d4286085518e5ce15acabfff10a8145eef8da088475db3 Status: Downloaded newer image for quay.io/water-hole/ansible-operator:latest ---&gt; 39cc1d19649d Step 2/3 : RUN ansible-galaxy install djzager.hello_world_k8s ---&gt; Running in 83ba8c21f233 - downloading role 'hello_world_k8s', owned by djzager - downloading role from https://github.com/djzager/ansible-role-hello-world-k8s/archive/master.tar.gz - extracting djzager.hello_world_k8s to /opt/ansible/roles/djzager.hello_world_k8s - djzager.hello_world_k8s (master) was installed successfully Removing intermediate container 83ba8c21f233 ---&gt; 2f303b45576c Step 3/3 : RUN echo $'--- \n- version: v1alpha1\n group: examples.djzager.io\n kind: HelloWorld\n role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml ---&gt; Running in cced495a9cb4 Removing intermediate container cced495a9cb4 ---&gt; 5827bc3c1ca3 Successfully built 5827bc3c1ca3 Successfully tagged hello-world-operator:latest</code> </pre><br>  Est√° claro que para <b>usar</b> este operador, necesita el contenido del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">directorio de implementaci√≥n</a> de nuestro proyecto para crear una cuenta de servicio, rol y enlace de roles, definici√≥n de recursos personalizados, as√≠ como para implementar el propio operador.  Y despu√©s de implementar el operador, deber√° crear un recurso personalizado para obtener una instancia de la aplicaci√≥n Hello World: <br><br><pre> <code class="plaintext hljs">apiVersion: examples.djzager.io/v1alpha1 kind: HelloWorld metadata: name: example-helloworld namespace: default spec: size: 3</code> </pre><br><h3>  √Åmbitos del operador: espacio de nombres y cl√∫ster </h3><br>  Un poco m√°s arriba, ya sugerimos explorar nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">directorio de implementaci√≥n</a> y buscar los objetos de Kubernetes necesarios para iniciar el operador.  Hay tres cosas que limitan el alcance del operador al administrar recursos personalizados con el espacio de nombres en el que se implementa el operador, a saber: <br><br><ol><li>  La variable de entorno WATCH_NAMESPACE en el archivo <a href="">operator.yaml</a> que le dice al operador d√≥nde buscar recursos personalizados </li><li>  <a href="">role.yaml</a> </li><li>  <a href="">enlace de roles</a> </li></ol><br>  Esta limitaci√≥n es ciertamente √∫til en el desarrollo de operadores.  Pero si quisi√©ramos que nuestra aplicaci√≥n fuera accesible para todos los usuarios del cl√∫ster, necesitar√≠amos la ayuda de un administrador.  Tendr√≠a que hacer lo siguiente: <br><br><ol><li>  Cree ClusterRole en lugar de Role. </li><li>  Cree una declaraci√≥n de ServiceAccount en el espacio de nombres donde se desplegar√° la declaraci√≥n. </li><li>  Cree un ClusterRoleBinding que asociar√° una ServiceAccount de un espacio de nombres particular con un ClusterRole. </li><li>  Expanda la declaraci√≥n con una variable de entorno WATCH_NAMESPACE indefinida (es decir, ""). </li></ol><br>  Si hace todas estas cosas, el resto de los usuarios del cl√∫ster podr√°n implementar instancias de nuestra aplicaci√≥n Hello World.  Si est√° interesado en este tema, le recomendamos que estudie el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Administrador del ciclo de vida</a> del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">operador</a> (parte del marco del operador). <br><br><h3>  Star trek </h3><br>  Mostramos c√≥mo crear un rol Ansible para controlar una aplicaci√≥n en Kubernetes, publicar este rol en Ansible Galaxy y usarlo en el operador Ansible.  Esperamos que ahora: <br><br><ol><li>  Utilizar√° el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulo k8s Ansible</a> . </li><li>  Comience a publicar sus roles para administrar aplicaciones Kubernetes en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ansible Galaxy</a> . </li><li>  Interesarse en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SDK</a> del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">operador</a> y suscribirse a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuestro bolet√≠n del Marco del operador</a> . </li></ol><br>  Nuestra aplicaci√≥n Hello World se hizo extremadamente simple intencionalmente, pero hay cosas que pueden ayudar a que sea a√∫n m√°s confiable, y aqu√≠ hay algunas: <br><br><ol><li>  Uso del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SDK</a> del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">operador</a> : no lo hicimos intencionalmente en nuestro ejemplo para enfatizar lo f√°cil que es cambiar del rol Ansible al operador.  Pero es mejor seguir usando esta funci√≥n con el SDK (es decir, operator-sdk new), adem√°s, es posible que necesite esto en los pr√≥ximos pasos. </li><li>  Validaci√≥n: en nuestra versi√≥n actual, el usuario puede crear un CR con el tama√±o: abc, lo que inevitablemente conducir√° a un error en la etapa de implementaci√≥n.  Por lo tanto, es mejor detectar errores en la etapa de especificaci√≥n, y no despu√©s de que comience el trabajo. </li><li>  Ciclo de vida: en ejemplos m√°s complejos, puede ser la misma actualizaci√≥n de versi√≥n.  En escenarios como el nuestro, donde solo hay una versi√≥n de la aplicaci√≥n Hello World, podr√≠amos determinar si la imagen de un contenedor en funcionamiento est√° desactualizada compar√°ndola con las im√°genes disponibles en el registro del contenedor correspondiente y actualizar las instancias en ejecuci√≥n si es necesario. </li><li>  Pruebas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Molecule es</a> muy √∫til al desarrollar y probar roles de Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Operator Lifecycle Manager</a> es un juego de herramientas para la gesti√≥n de operadores.  La integraci√≥n con √©l ayudar√° a instalar y actualizar nuestro operador. </li><li>  Estado: podr√≠amos activar el subrecurso de estado en nuestro Hello World CRD y usar el m√≥dulo k8s_status, que es parte de la imagen del Operador Ansible, para incluir informaci√≥n de estado en el recurso personalizado. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440188/">https://habr.com/ru/post/440188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440176/index.html">Siete tendencias de ciberseguridad para 2019</a></li>
<li><a href="../440178/index.html">Eliminar la recursividad en Python</a></li>
<li><a href="../440180/index.html">Concurso de programaci√≥n Q #: Concurso de codificaci√≥n Q # de Microsoft</a></li>
<li><a href="../440182/index.html">IBM Watson Studio: una plataforma de desarrollo de aplicaciones de IA basada en la nube</a></li>
<li><a href="../440184/index.html">¬øPor qu√© usamos GraphQL en 8base?</a></li>
<li><a href="../440190/index.html">Conocimiento de la red neuronal m√°s simple y su implementaci√≥n paso a paso.</a></li>
<li><a href="../440192/index.html">¬øC√≥mo hacemos radio corporativa para nuestro</a></li>
<li><a href="../440196/index.html">Secretos de la mente y las matem√°ticas</a></li>
<li><a href="../440198/index.html">Nuevas impresoras 3D DWS para profesionales</a></li>
<li><a href="../440200/index.html">Hablemos sobre el registro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>