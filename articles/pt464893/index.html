<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà¥ üë©üèæ‚Äçüíª ‚èπÔ∏è Estamos procurando bugs no c√≥digo PHP sem analisadores est√°ticos üê´ üò∫ üë©üèΩ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Minha parte favorita na an√°lise de c√≥digo est√°tico √© apresentar hip√≥teses sobre erros em potencial no c√≥digo e depois verific√°-las. 


 Exemplo de hip...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos procurando bugs no c√≥digo PHP sem analisadores est√°ticos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464893/"><p>  Minha parte favorita na an√°lise de c√≥digo est√°tico √© apresentar hip√≥teses sobre erros em potencial no c√≥digo e depois verific√°-las. </p><br><p>  Exemplo de hip√≥tese: </p><br><pre><code class="plaintext hljs"> strpos      .</code> </pre> <br><p>  Mas h√° uma chance de que, mesmo em alguns milh√µes de linhas de c√≥digo, esse diagn√≥stico n√£o "atire", portanto voc√™ n√£o deseja gastar muito tempo em hip√≥teses sem √™xito. </p><br><p>  Hoje vou mostrar como executar a an√°lise est√°tica mais simples usando o utilit√°rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">phpgrep</a> sem escrever c√≥digo. </p><br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/webt/ct/6n/nt/ct6nntwmvdgniqe2e625qogapj0.png"></td><td><hr><p>  Sob o corte: </p><br><ul><li>  Pesquisa e an√°lise de bugs em projetos de c√≥digo aberto. </li><li>  In√≠cio r√°pido do phpgrep. </li><li>  O princ√≠pio da busca sint√°tica. </li></ul><br><br><hr></td></tr></tbody></table></div><a name="habracut"></a><br><h1 id="predposylki">  Antecedentes </h1><br><p>  H√° v√°rios meses, apoio o linter NoVerify PHP (leia sobre isso no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NoVerify: Linter for PHP da equipe VKontakte</a> ). </p><br><p>  De tempos em tempos, id√©ias para novos diagn√≥sticos aparecem na equipe.  Pode haver muitas id√©ias, mas quero verificar tudo, principalmente se a verifica√ß√£o proposta tiver como objetivo identificar defeitos cr√≠ticos. </p><br><p>  Anteriormente, eu desenvolvia ativamente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">go-critical</a> e a situa√ß√£o era semelhante, com a √∫nica diferen√ßa de que os c√≥digos-fonte foram analisados ‚Äã‚Äãno Go e n√£o no PHP.  Quando descobri o utilit√°rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gogrep</a> , meu mundo virou de cabe√ßa para baixo.  Como o nome indica, esse utilit√°rio tem algo em comum com o grep, apenas a pesquisa √© realizada n√£o por express√µes regulares, mas por padr√µes de sintaxe (explicarei mais adiante o que isso significa). </p><br><p>  Eu n√£o queria viver sem um grep inteligente, ent√£o uma noite eu decidi sentar e escrever o <code>phpgrep</code> . </p><br><h1 id="analiziruemyy-korpus">  Caso analisado </h1><br><p>  Para ser divertido, imediatamente nos envolvemos no aplicativo.  Analisaremos um pequeno conjunto de projetos PHP bastante conhecidos e grandes dispon√≠veis no GitHub. </p><br><p>  Nosso kit incluiu os seguintes projetos: </p><br><div class="scrollable-table"><table><tbody><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wordpress</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wikia</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Drupal</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">yii2</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CodeIgniter</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compositor</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Phalcon</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Joomla!</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Laravel</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moodle</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√∫cleo ownCloud</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Phabricator</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Phpunit</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">symfony</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">woocommerce</a> </td></tr></tbody></table></div><br><p>  Para as pessoas que est√£o tramando o que estamos tramando, esse √© um cen√°rio muito apetitoso. </p><br><p>  Ent√£o vamos l√°! </p><br><h1 id="ispolzovanie-prisvaivaniya-v-kachestve-vyrazheniya">  Usando atribui√ß√£o como uma express√£o </h1><br><p>  Se a atribui√ß√£o for usada como express√£o, al√©m disso: </p><br><ul><li>  o contexto espera o resultado de uma opera√ß√£o l√≥gica (condi√ß√£o l√≥gica) e </li><li>  o lado direito da express√£o n√£o tem efeitos colaterais e √© constante, </li></ul><br><p>  provavelmente √© um erro no c√≥digo. </p><br><p>  Para come√ßar, tomemos as seguintes constru√ß√µes para o "contexto l√≥gico": </p><br><ol><li>  Express√£o dentro de " <code>if ($cond)</code> ". </li><li>  A condi√ß√£o do operador tern√°rio √©: " <code>$cond ? $x : $y</code> ". </li><li>  Condi√ß√µes de continua√ß√£o para loops " <code>while ($cond)</code> " e " <code>for ($init; $cond; $post)</code> ". </li></ol><br><p>  No lado direito da tarefa, esperamos constantes ou literais. </p><br><div class="spoiler">  <b class="spoiler_title">Por que precisamos de tais restri√ß√µes?</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  As duas restri√ß√µes s√£o necess√°rias para reduzir o n√∫mero de falsos positivos. <br><br>  Se procurarmos atribui√ß√µes exclusivamente dentro de condi√ß√µes, a probabilidade de que houve um erro de digita√ß√£o e, em vez de "=", foi impl√≠cita em "==" √© maior. <br><br>  Mas mesmo neste caso, permanecem situa√ß√µes controversas nas quais a atribui√ß√£o faz sentido devido aos efeitos colaterais que podem ocorrer dentro de uma fun√ß√£o.  Para n√£o lidar com eles, escolheremos apenas os valores atribu√≠dos mais simples. <br></td></tr></tbody></table></div></div></div><br><p>  Vamos come√ßar com (1): </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      # |      (  ) # | | # | | phpgrep . 'if ($_ = []) $_' # 1 # | # | #    #  3    . phpgrep . 'if ($_ = ${"const"}) $_' # 2 phpgrep . 'if ($_ = ${"str"}) $_' # 3 phpgrep . 'if ($_ = ${"num"}) $_' # 4</span></span></code> </pre> <br><p>  Aqui vemos 4 padr√µes, a √∫nica diferen√ßa entre os quais √© a express√£o atribu√≠da (RHS).  Vamos come√ßar com o primeiro. </p><br><p>  O modelo " <code>if ($_ = []) $_</code> " captura um <code>if</code> , que possui uma matriz vazia atribu√≠da a qualquer express√£o.  <code>$_</code> corresponde a qualquer express√£o ou declara√ß√£o. </p><br><pre> <code class="plaintext hljs">    (RHS) | if ($_ = []) $_ | | |   if',   ,  {}    LHS  </code> </pre> <br><p>  Os exemplos a seguir usam grupos <strong>const</strong> , <strong>str</strong> e <strong>num</strong> mais complexos.  Ao contr√°rio de <code>$_</code> eles descrevem restri√ß√µes em opera√ß√µes compat√≠veis. </p><br><ul><li>  <code>const</code> √© uma constante nomeada ou constante de classe. </li><li>  <code>str</code> √© uma string literal de qualquer tipo. </li><li>  <code>num</code> √© um literal num√©rico de qualquer tipo. </li></ul><br><p>  Esses padr√µes s√£o suficientes para realizar v√°rias opera√ß√µes no caso. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moodle / blocks / rss_client / viewfeed.php # L37</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($courseid = SITEID) { $courseid = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  O segundo gatilho no moodle foi a depend√™ncia do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADOdb</a> .  Na biblioteca upstream, o problema ainda est√° presente. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADOdb / drivers / adodb-odbtp.inc.php # L741</a> : </p><br><p><img src="https://habrastorage.org/webt/uo/mv/wj/uomvwjrpztuhmrkm4lolol9sbvg.png"></p><br><p>  H√° muito nesse fragmento, mas para n√≥s apenas a primeira linha √© relevante.  Em vez de comparar o campo <code>databaseType</code> , executamos a atribui√ß√£o e sempre entramos na condi√ß√£o. </p><br><p>  Outro local interessante onde queremos executar a√ß√µes apenas para registros "corretos", mas, em vez disso, sempre execute-os e, al√©m disso, marque qualquer registro como correto! </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moodle / question / format / blackboard_six / formatqti.php # L598</a> : </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// For BB Fill in the Blank, only interested in correct answers. if ($response-&gt;feedback = 'correct') { // ... }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Lista estendida de modelos para esta verifica√ß√£o</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  'para ($ _; $ _ = []; $ _) $ _'
 phpgrep.  'para ($ _; $ _ = $ {"const"}; $ _) $ _'
 phpgrep.  'para ($ _; $ _ = $ {"num"}; $ _) $ _'
 phpgrep.  'para ($ _; $ _ = $ {"str"}; $ _) $ _'
 phpgrep.  'while ($ _ = []) $ _'
 phpgrep.  'while ($ _ = $ {"const"}) $ _'
 phpgrep.  'while ($ _ = $ {"num"}) $ _'
 phpgrep.  'while ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = []) $ _'
 phpgrep.  'if ($ _ = $ {"const"}) $ _'
 phpgrep.  'if ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = $ {"num"}) $ _'
 phpgrep.  '$ _ = []?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"const"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"str"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"num"}?  $ _: $ _ '
 phpgrep.  '($ _ = []) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"const"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"str"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"num"}) &amp;&amp; $ _'
 phpgrep.  '$ _ &amp;&amp; $ _ = []'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"const"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"str"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"num"}'
 phpgrep.  '($ _ = []) ||  $ _ '
 phpgrep.  '($ _ = $ {"const"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"str"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"num"}) ||  $ _ '
 phpgrep.  '$ _ ||  $ _ = [] '
 phpgrep.  '$ _ ||  $ _ = $ {"const"} '
 phpgrep.  '$ _ ||  $ _ = $ {"str"} '
 phpgrep.  '$ _ ||  $ _ = $ {"num"} ' </pre></td></tr></tbody></table></div></div></div><br><p>  Vamos repetir o que aprendemos: </p><br><ul><li>  Os modelos se parecem com o c√≥digo php que encontram. </li><li>  <code>$_</code> significa qualquer coisa.  Voc√™ pode comparar com <code>.</code>  em express√µes regulares. </li><li>  <code>${"&lt;class&gt;"}</code> funciona como <code>$_</code> com uma restri√ß√£o de tipo de elemento AST. </li></ul><br><p>  Tamb√©m vale ressaltar que tudo, exceto as vari√°veis, √© mapeado literalmente.  Isso significa que o padr√£o " <code>array(1, 2 + 3)</code> " ser√° satisfeito apenas pelo c√≥digo id√™ntico na estrutura sint√°tica (os espa√ßos n√£o afetam).  Por outro lado, o padr√£o " <code>array($_, $_)</code> " satisfaz qualquer literal de array de dois elementos. </p><br><h1 id="sravnenie-vyrazheniya-s-samim-soboy">  Comparando uma express√£o consigo mesmo </h1><br><p>  A necessidade de comparar algo consigo mesmo √© muito rara.  Pode ser uma verifica√ß√£o de <code>NaN</code> , mas pelo menos metade do tempo √© um erro de copiar / colar. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wikia / app / extensions / SemanticDrilldown / includes / SD_FilterValue.php # L103</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( $fv1-&gt;month == $fv1-&gt;month ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p>  √Ä direita deve estar " <code>$fv2-&gt;month</code> ". </p><br><p>  Para expressar partes duplicadas em um modelo, usamos vari√°veis ‚Äã‚Äãcom nomes diferentes de " <code>_</code> ".  O mecanismo de repeti√ß√£o em um padr√£o √© semelhante aos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">backlinks</a> em express√µes regulares. </p><br><p>  O padr√£o " <code>$x == $x</code> " ser√° exatamente o que o exemplo acima encontra.  Em vez de " <code>x</code> ", qualquer nome pode ser usado.  √â importante apenas que os nomes sejam id√™nticos.  Vari√°veis ‚Äã‚Äãde modelo que possuem nomes distintos n√£o precisam ter o mesmo conte√∫do ao capturar. </p><br><p>  O exemplo a seguir foi encontrado usando " <code>$x &lt;= $x</code> ". </p><br><p>  Up <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Drupal / core / m√≥dulos / visualiza√ß√µes / testes / src / Unit / ViewsDataTest.php # L166</a> : </p><br><pre> <code class="php hljs">$prev = $base_tables[$base_tables_keys[$i - <span class="hljs-number"><span class="hljs-number">1</span></span>]]; $current = $base_tables[$base_tables_keys[$i]]; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTrue( $prev[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &lt;= $current[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &amp;&amp; $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] &lt;= $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>], <span class="hljs-comment"><span class="hljs-comment">// &lt;--------------  'The tables are sorted as expected.');</span></span></code> </pre> <br><h1 id="dubliruyuschiesya-podvyrazheniya">  Subexpress√µes duplicadas </h1><br><p>  Agora que sabemos das possibilidades de repetidas subexpress√µes, podemos compor muitos padr√µes interessantes. </p><br><p>  Um dos meus favoritos √© " <code>$_ ? $x : $x</code> ". <br>  Este √© um operador tern√°rio com ramifica√ß√µes verdadeiras / falsas id√™nticas. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Joomla-cms / libraries / src / User / UserHelper.php # L522</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted;</code> </pre> <br><p>  Ambas as ramifica√ß√µes s√£o duplicadas, o que sugere um poss√≠vel problema no c√≥digo.  Se olharmos o c√≥digo ao redor, podemos entender o que deveria ter sido.  Para facilitar a leitura, recortei parte do c√≥digo e reduzi o nome da vari√°vel <code>$encrypted</code> para <code>$enc</code> . </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'crypt-blowfish'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt ? <span class="hljs-string"><span class="hljs-string">'{crypt}'</span></span> : <span class="hljs-string"><span class="hljs-string">''</span></span>) . crypt($plaintext, $salt); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'md5-base64'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'ssha'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SSHA}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'smd5'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SMD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'sha256'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc;</code> </pre> <br><p>  Aposto que o c√≥digo precisa do seguinte patch: </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">- ($show_encrypt) ? '{SHA256}' . $encrypted : '{SHA256}' . $encrypted; + ($show_encrypt) ? '{SHA256}' . $encrypted : $encrypted;</span></span></code> </pre> <br><h1 id="opasnye-prioritety-operaciy-v-php">  Prioridades de opera√ß√µes perigosas em PHP </h1><br><p>  Uma boa precau√ß√£o no PHP √© o uso de colchetes, sempre que for importante ter a ordem correta dos c√°lculos. </p><br><p>  Em muitas linguagens de programa√ß√£o, a express√£o " <code>x &amp; mask != 0</code> " tem um significado intuitivo.  Se a <code>mask</code> descrever um pouco, esse c√≥digo verificar√° que em <code>x</code> esse bit n√£o √© igual a zero.  Infelizmente, para PHP, essa express√£o ser√° calculada da seguinte forma: " <code>x &amp; (mask != 0)</code> ", que quase sempre n√£o √© o que voc√™ precisa. </p><br><p>  WordPress, Joomla e moodle usam o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SimplePie</a> . </p><br><p>  ‚éÜ SimplePie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">/ library / SimplePie / Locator.php # L254</a> <br>  ‚éÜ SimplePie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">/ library / SimplePie / Locator.php # L384</a> <br>  ‚éÜ SimplePie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">/ library / SimplePie / Locator.php # L412</a> <br>  ‚éÜ SimplePie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">/ biblioteca / SimplePie / Sanitize.php # L349</a> <br>  ‚éÜ SimplePie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">/ library / SimplePie.php # L1634</a> </p><br><pre> <code class="php hljs">$feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  <code>SIMPLEPIE_FILE_SOURCE_REMOTE</code> definido como <code>1</code> , portanto a express√£o ser√° equivalente a: </p><br><pre> <code class="plaintext hljs">$feed-&gt;method &amp; (1 === 0) // =&gt; $feed-&gt;method &amp; false</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Modelos de pesquisa de amostra</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  '$ x &amp; $ mask == $ y'
 phpgrep.  '$ x &amp; $ mask === $ y'
 phpgrep.  '$ x &amp; $ mask! == $ y'
 phpgrep.  '$ x &amp; $ mask! = $ y'
 phpgrep.  '$ x |  $ mask == $ y '
 phpgrep.  '$ x |  $ mask === $ y '
 phpgrep.  '$ x |  $ mask! == $ y '
 phpgrep.  '$ x |  $ mask! = $ y ' </pre></td></tr></tbody></table></div></div></div><br><p>  Continuando o t√≥pico de prioridades inesperadas de opera√ß√£o, voc√™ pode ler sobre o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">operador tern√°rio em PHP</a> .  No habr, at√© o artigo foi dedicado a ele: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a ordem de execu√ß√£o do operador tern√°rio</a> . </p><br><p>  √â poss√≠vel encontrar esses lugares com o <code>phpgrep</code> ?  A resposta √© <strong>sim</strong> ! </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ == $_ ? $_ : $_ ? $_ : $_'</span></span> phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ != $_ ? $_ : $_ ? $_ : $_'</span></span></code> </pre> <br><h1 id="prelesti-proverki-url-s-pomoschyu-regulyarnyh-vyrazheniy">  Os benef√≠cios da valida√ß√£o de express√£o regular </h1><br><p>  ‚éÜ <a href="">Wikia / app / maintenance / wikia / updateCentralInterwiki.inc # L95</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( preg_match( <span class="hljs-string"><span class="hljs-string">'/(wowwiki.com|wikia.com|falloutvault.com)/'</span></span>, $url ) ) { $local = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $local = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Conforme concebido pelo autor do c√≥digo, verificamos o URL por coincid√™ncia com uma das tr√™s op√ß√µes.  Desculpe s√≠mbolo <code>.</code>  n√£o blindado, o que levar√° ao fato de que, em vez de <code>falloutvault.com</code> , podemos obter <code>falloutvaultxcom</code> em qualquer dom√≠nio e passar no teste. </p><br><p><img src="https://habrastorage.org/webt/n7/sj/pc/n7sjpcnsabhg5ggan7tiscxy0q4.png"></p><br><p>  Este n√£o √© um erro espec√≠fico do PHP.  Em qualquer aplicativo em que a valida√ß√£o √© realizada por meio de express√µes regulares e um meta caractere faz parte da sequ√™ncia que est√° sendo verificada, existe o risco de esquecer o escape onde √© necess√°rio e obter uma vulnerabilidade. </p><br><p>  Voc√™ pode encontrar esses lugares executando o <code>phpgrep</code> : </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'preg_match(${"pat:str"}, ${"*"})'</span></span> <span class="hljs-string"><span class="hljs-string">'pat~[^\\]\.(com|ru|net|org)\b'</span></span></code> </pre> <br><p>  Introduzimos o subpadr√£o <code>pat</code> nomeado, que captura qualquer literal de string e, em seguida, aplicamos um filtro a partir da express√£o regular. </p><br><p>  Os filtros podem ser aplicados a qualquer vari√°vel de modelo.  Al√©m das express√µes regulares, tamb√©m existem operadores estruturais <code>=</code> e <code>!=</code> .  Uma lista completa pode ser encontrada na <a href="">documenta√ß√£o</a> . </p><br><p>  <code>${"*"}</code> captura um n√∫mero arbitr√°rio de argumentos, portanto, n√£o precisamos nos preocupar com os par√¢metros opcionais da fun√ß√£o <code>preg_match</code> . </p><br><h1 id="dublikaty-klyuchey-v-literale-massiva">  Chaves duplicadas no literal da matriz </h1><br><p>  No PHP, voc√™ n√£o receber√° nenhum aviso se executar este c√≥digo: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> var_dump([<span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// : array(1) {["a"]=&gt; int(2)}</span></span></code> </pre> <br><p>  Podemos encontrar essas matrizes usando o <code>phpgrep</code> : </p><br><pre> <code class="plaintext hljs">[${"*"}, $k =&gt; $_, ${"*"}, $k =&gt; $_, ${"*"}]</code> </pre> <br><p>  Esse padr√£o pode ser descriptografado da seguinte forma: "uma matriz literal na qual existem pelo menos duas chaves id√™nticas em uma posi√ß√£o arbitr√°ria".  As express√µes <code>${"*"}</code> nos ajudam a descrever uma "posi√ß√£o arbitr√°ria", permitindo elementos 0-N antes, entre e depois das chaves de seu interesse. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wikia / app / extensions / wikia / WikiaMiniUpload / WikiaMiniUpload_body.php # L23</a> : </p><br><pre> <code class="php hljs">$script_a = [ <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-comment"><span class="hljs-comment">// ... ];</span></span></code> </pre> <br><p>  Nesse caso, isso n√£o √© um erro grave, mas eu sei de casos em que a duplica√ß√£o de chaves em matrizes grandes (mais de 100 elementos) carregava pelo menos um comportamento inesperado no qual uma das chaves se sobrepunha ao valor da outra. </p><br><hr><br><p>  Isso conclui nossa breve excurs√£o com exemplos.  Se voc√™ quiser mais, no final do artigo descreve como obter todos os resultados. </p><br><h1 id="chto-zhe-takoe-phpgrep">  O que √© phpgrep? </h1><br><p>  A maioria dos editores e IDEs usa pesquisa de texto sem formata√ß√£o para pesquisar o c√≥digo (se n√£o for uma pesquisa por um caractere especial, como uma classe ou vari√°vel) - em outras palavras, algo como grep. </p><br><p>  Voc√™ digita " <code>$x</code> ", encontra " <code>$x</code> ".  Express√µes regulares podem estar dispon√≠veis para voc√™, ent√£o voc√™ pode realmente tentar analisar o c√≥digo PHP com regulares.  √Äs vezes, at√© funciona se voc√™ estiver procurando por algo bastante espec√≠fico e simples - por exemplo, "qualquer vari√°vel com algum sufixo".  Mas se essa vari√°vel com sufixo fizer parte de outra express√£o composta, surgir√£o dificuldades. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O phpgrep</a> √© uma ferramenta para a pesquisa conveniente de c√≥digo PHP, que permite pesquisar n√£o usando regulares orientados a texto, mas usando modelos com reconhecimento de sintaxe. </p><br><p>  Reconhecer sintaxe significa que o idioma do modelo reflete o idioma de destino e n√£o opera com caracteres individuais, como as express√µes regulares.  Tamb√©m n√£o fazemos diferen√ßa antes de formatar o c√≥digo, apenas sua estrutura √© importante. </p><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do opcional: In√≠cio r√°pido</b> <div class="spoiler_text"><h1 id="quick-start">  In√≠cio r√°pido </h1><br><h3 id="ustanovka">  Instala√ß√£o </h3><br><p>  Existem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compila√ß√µes de vers√£o</a> prontas para o amd64 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para Linux e Windows</a> , mas se voc√™ tiver o Go instalado, um comando ser√° suficiente para obter um bin√°rio novo para sua plataforma: </p><br><pre> <code class="bash hljs">go get -v github.com/quasilyte/phpgrep/cmd/phpgrep</code> </pre> <br><p>  Se <code>$GOPATH/bin</code> estiver no sistema <code>$PATH</code> , o comando <code>phpgrep</code> ficar√° imediatamente dispon√≠vel.  Para verificar isso, tente executar o comando com o par√¢metro <code>-help</code> : </p><br><pre> <code class="bash hljs">phpgrep -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><p>  Se nada acontecer, encontre onde o Go instalou o bin√°rio e adicione-o √† vari√°vel de ambiente <code>$PATH</code> . </p><br><p>  Uma maneira antiga e confi√°vel de analisar o <code>$GOPATH</code> , mesmo que n√£o esteja definido explicitamente: </p><br><pre> <code class="bash hljs">go env GOPATH</code> </pre> <br><h3 id="ispolzovanie">  Use </h3><br><p>  Crie um arquivo <code>hello.php</code> teste: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...$xs)</span></span></span><span class="hljs-function"> </span></span>{} f(<span class="hljs-number"><span class="hljs-number">10</span></span>); f(<span class="hljs-number"><span class="hljs-number">20</span></span>); f(<span class="hljs-number"><span class="hljs-number">30</span></span>); f($x); f();</code> </pre> <br><p>  Execute o <code>phpgrep</code> nele: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># phpgrep hello.php 'f(${"x:int"})' 'x!=20' hello.php:3: f(10) hello.php:5: f(30)</span></span></code> </pre> <br><p>  Encontramos todas as chamadas para a fun√ß√£o <code>f</code> com um argumento, um n√∫mero cujo valor n√£o √© igual a 20. </p></div></div><br><h1 id="kak-rabotaet-phpgrep">  Como o phpgrep funciona </h1><br><p>  Para analisar o PHP, a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/z7zmey/php-parser</a> √© usada.  √â bom o suficiente, mas algumas limita√ß√µes do <code>phpgrep</code> seguem os recursos do analisador usado.  Especialmente surgem muitas dificuldades ao tentar trabalhar normalmente com colchetes. </p><br><p>  O princ√≠pio do <code>phpgrep</code> √© simples: </p><br><ul><li>  O AST √© constru√≠do a partir do modelo de entrada, os filtros s√£o desmontados; </li><li>  para cada arquivo de entrada, uma √°rvore AST completa √© constru√≠da; </li><li>  contornamos o AST de cada arquivo, tentando encontrar as sub√°rvores que correspondem ao padr√£o; </li><li>  para cada resultado √© aplicada uma lista de filtros; </li><li>  todos os resultados que passaram nos filtros s√£o impressos na tela. </li></ul><br><p>  O mais interessante √© como exatamente os dois n√≥s AST s√£o correspondidos por igualdade.  √Äs vezes trivial: individual e meta-n√≥s podem capturar mais de um elemento.  Exemplos de meta-n√≥s s√£o <code>${"*"}</code> e <code>${"str"}</code> . </p><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p>  Seria desonesto falar sobre o <code>phpgrep</code> sem mencionar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pesquisa estrutural e a substitui√ß√£o</a> (SSR) do PhpStorm.  Eles resolvem problemas semelhantes, e o SSR tem suas vantagens, por exemplo, integra√ß√£o ao IDE, e o <code>phpgrep</code> orgulha de ser um programa independente, que √© muito mais f√°cil de colocar, por exemplo, no IC. </p><br><p>  Entre outras coisas, o <code>phpgrep</code> tamb√©m √© uma biblioteca que voc√™ pode usar em seus programas para combinar o c√≥digo PHP.  Isso √© especialmente √∫til para gera√ß√£o de c√≥digo e linter. </p><br><p>  Ficarei feliz se esta ferramenta for √∫til para voc√™.  Se este artigo apenas o motiva a olhar na dire√ß√£o do SSR acima mencionado, tamb√©m √© bom. </p><br><img src="https://habrastorage.org/webt/o_/9a/cz/o_9aczasnsf3wssmuunol5lyjfe.png"><br><br><h1 id="dopolnitelnye-materialy">  Materiais adicionais </h1><br><p>  A lista completa de padr√µes usados ‚Äã‚Äãpara an√°lise pode ser encontrada no arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">patterns.txt</a> .  Ao lado deste arquivo, voc√™ encontra o script <code>phpgrep-lint.sh</code> , que simplifica o lan√ßamento do <code>phpgrep</code> com uma lista de modelos. </p><br><p>  O artigo n√£o fornece uma lista completa de respostas, mas voc√™ pode reproduzir o experimento clonando todos os reposit√≥rios nomeados e executando o <code>phpgrep-lint.sh</code> neles. </p><br><p>  Voc√™ pode se inspirar nos modelos de teste, por exemplo, nos artigos do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">est√∫dio PVS</a> .  Eu realmente gostei de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Express√µes L√≥gicas: Erros Feitos por Profissionais</a> , que se transforma em algo assim: </p><br><pre> <code class="plaintext hljs">#  "x != y || x != z": phpgrep . '$x != $a || $x != $b' phpgrep . '$x !== $a || $x != $b' phpgrep . '$x != $a || $x !== $b' phpgrep . '$x !== $a || $x !== $b'</code> </pre> <br><p>  Voc√™ tamb√©m pode estar interessado na apresenta√ß√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">phpgrep: pesquisa de c√≥digo com reconhecimento de sintaxe</a> . </p><br><blockquote>  O artigo usa imagens de esquilos que foram criados atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gopherkon</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464893/">https://habr.com/ru/post/pt464893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464877/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 473 (06/08/2019 - 08/08/2019)</a></li>
<li><a href="../pt464881/index.html">Customizando a composi√ß√£o dos testes JUnit5 com application.properties</a></li>
<li><a href="../pt464883/index.html">Para onde a rede est√° indo</a></li>
<li><a href="../pt464887/index.html">Alguns erros comuns no Vue.js (Vuex)</a></li>
<li><a href="../pt464889/index.html">De volta ao futuro dos telefones celulares</a></li>
<li><a href="../pt464895/index.html">Por que Israel √© o motor do desenvolvimento de tecnologia automotiva</a></li>
<li><a href="../pt464897/index.html">Construindo XPath? XPath algor√≠tmico? Nada al√©m do XPath</a></li>
<li><a href="../pt464899/index.html">O colapso de uma cidade do Texas que perdeu dinheiro de uma fazenda de bitcoin</a></li>
<li><a href="../pt464901/index.html">Desenvolvimento de Helpdesk</a></li>
<li><a href="../pt464909/index.html">‚ÄúEles est√£o nos observando‚Äù: o que pode acontecer em uma minivan discreta logo abaixo da sua janela</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>