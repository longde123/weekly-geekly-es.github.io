<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüíº üë©üèΩ‚Äçü§ù‚Äçüë©üèº üåì ReCaptcha-Bypass in Selentests üçú üïù ü§µ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ReCaptcha (sie wird im Volksmund als ‚ÄûCAPTCHA‚Äú bezeichnet ) ist eines der schmerzhaftesten Dinge, denen ein Testautomat auf seinem Weg begegnen kann. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ReCaptcha-Bypass in Selentests</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442034/">  <b>ReCaptcha</b> (sie wird im Volksmund als <b>‚ÄûCAPTCHA‚Äú bezeichnet</b> ) ist eines der schmerzhaftesten Dinge, denen ein <b>Testautomat</b> auf seinem Weg begegnen kann.  Tausende verschiedener Videos, die von Einwanderern aus dem sonnigen Indien aufgenommen wurden, gehen im Internet dar√ºber, welche T√§nze mit einem Tamburin m√∂glich sind, um dieses Tier zu t√§uschen.  In der Tat ist es ziemlich schwierig zu versuchen, mit den programmierten Skripten mit einer Sache zu interagieren, deren Hauptzweck darin besteht, sicherzustellen, dass "Sie kein Roboter sind". <br><br>  Ein sehr wichtiger Haftungsausschluss: <b>Es ist unm√∂glich, ein Captcha zu t√§uschen.</b> <br><br>  Wenn Sie bereits auf dieses Problem gesto√üen sind und diesen Artikel lesen und versuchen, ein Rezept f√ºr ein Allheilmittel zu googeln, wissen Sie, dass es nicht existiert.  Dar√ºber hinaus sind in Ihrem Kopf h√∂chstwahrscheinlich innovative Ideen zur Simulation eines realistischen Benutzerverhaltens mit WebDriver entstanden, indem Elemente mit der Maus zuf√§llig verschoben, auf Eingaben geklickt und Thread.sleep () sorgf√§ltig platziert wurden.  Es ist absolut bekannt, dass dieser Ansatz nicht funktioniert. Verschwenden Sie Ihre Zeit nicht umsonst. <br><br><img src="https://www.scienceabc.com/wp-content/uploads/2016/07/Captcha-meme.jpg" alt="Bild"><br><br>  <i>Es stellt sich heraus, dass es keinen Ausweg gibt?</i> <br><a name="habracut"></a><br>  Nicht alles ist so pessimistisch.  Manchmal reicht es aus, sich die genaueste Antwort auf die Frage "Was ist die Herausforderung f√ºr mich?" Zu geben.  und schauen Sie sich die Situation weiter an.  In den meisten F√§llen werden Sie verstehen, dass Ihr Ziel nicht darin besteht, das Captcha zu t√§uschen, sondern es zu umgehen, um die dahinter verborgene Funktionalit√§t zu testen.  Am Beispiel meines Falles werde ich Ihnen die Optionen mitteilen, die ich zur L√∂sung der Aufgabe gefunden habe. <br><br>  Kontext: Wir haben einen Teil unseres Produkts in einen Drittanbieter-Service integriert und wollten √ºberwachen, ob auf ihrer Seite alles in Ordnung ist, weil  Sie decken keine Teile ihrer Plattform von Drittanbietern ab.  Um auf unsere Funktionen zugreifen zu k√∂nnen, mussten Sie sich zun√§chst anmelden.  Damals traf ich mich mit dem Captcha von Angesicht zu Angesicht.  Als n√§chstes gebe ich alle Optionen an, die ich versucht habe, um dieses Problem zu umgehen. <br><hr><br><h2>  Nicht arbeitend </h2><br><h3>  Melden Sie sich √ºber Google oder Facebook an </h3><br>  Neben der klassischen Authentifizierung gab es eine kanonische Anmeldung bei Google / Facebook.  Nat√ºrlich waren dort auch ihre "Captcha" vorhanden, so dass diese Option nicht zur L√∂sung des Problems beitrug. <br><br><h3>  Benutzerverhalten simulieren </h3><br>  Ja, ich habe es auch versucht.  Es war lustig, aber zu naiv. <br><br><hr><br><h2>  Arbeiter </h2><br><h3>  Chrome / Firefox-Profile </h3><br>  Lassen Sie uns √ºber die erste "Live" -Option sprechen.  Die Treiber f√ºr diese Browser (chromedriver / geckodriver) k√∂nnen unter einem vordefinierten Benutzerprofil gestartet werden.  Es speichert alle gespeicherten Passw√∂rter, Cookies, Sitzungen und sogar den Browserverlauf und die Lesezeichen.  Das hei√üt,  Daher haben wir einfach den Anmeldeschritt verpasst, der f√ºr unsere Aufgabe absolut unwichtig ist, und sind direkt zur Seite mit dem Testobjekt gelangt.  Es wird wie folgt implementiert: <br><br><ol><li>  Erstellen Sie ein "sauberes" Browserprofil </li><li>  Geben Sie das Captcha manuell ein und melden Sie sich bei der gew√ºnschten Ressource an </li><li>  Kopieren Sie das gew√ºnschte Profil in unser Projekt (HOWTO f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Firefox</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chrome</a> ). </li></ol><br>  Danach m√ºssen wir dem Treiber mitteilen, dass er aus dem angegebenen Profil geladen werden soll: <br><br>  <b><u>Firefox:</u></b> <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   FirefoxProfile profile = new FirefoxProfile(new File("////")); //      FirefoxOptions options = new FirefoxOptions(); options.setProfile(profile); //   WebDriver driver = new FirefoxDriver(options);</span></span></code> </pre> <br>  <b><u>Chrome:</u></b> <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//      ChromeOptions options = new ChromeOptions(); options.addArgument("--user-data-dir=/////"); options.addArgument("--profile-directory=____"); //   WebDriver driver = new ChromeDriver(options);</span></span></code> </pre><br>  Dieser Ansatz erwies sich beim Testen auf einem lokalen Computer mit einem installierten Browser und den √ºblichen Gecko- / Cromedrivers als gut, aber es gab Probleme beim Ausf√ºhren auf Jenkins.  Wir erh√∂hen den Selenium-Hub und die Knoten innerhalb des Kubernetes-Clusters, sodass Probleme in Form eines Verzeichnisses aufgetreten sind, das zu lang war, um das Verzeichnis im Container bereitzustellen (ein sauberes Profil wiegt durchschnittlich etwa 25 MB, was ziemlich viel ist), sowie einige Probleme mit den CRUD-Rechten des Browsers konnte zur Laufzeit keine √Ñnderungen am Profil vornehmen und fiel mit der Ausf√ºhrung "Unbekannter Fehler: Pr√§fektdatei konnte nicht geschrieben werden" aus.  Dar√ºber hinaus ist das Aktualisieren des Profils nach Erreichen des Ablaufdatums von Cookies und Sitzungen recht unpraktisch, und ich wollte keinen gro√üen Ordner mit den Profilinternalen im Projekt behalten, sodass letztendlich die folgende Option ausgew√§hlt wurde. <br><br><h3>  Cookies </h3><br>  "Und die Box wurde gerade ge√∂ffnet" - so konnte die Situation beschrieben werden, nachdem wir dem Fahrer gerade die manuell empfangenen Cookies hinzugef√ºgt hatten.  Der Aktionsalgorithmus ist so einfach wie m√∂glich und h√§ngt nicht vom ausgew√§hlten Browser ab: <br><br><ol><li>  Melden Sie sich manuell an </li><li>  √úber das Netzwerk suchen wir nach Anforderungsheadern -&gt; Cookies, die unser Browser sendet </li></ol><br>  F√ºgen Sie sie wie folgt zu unseren Tests hinzu: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  cookie private static final Cookie COOKIE = new Cookie("", "", "", "", new Date("")); //   WebDriver driver = new ChromeDriver(options); //  cookie   driver.manage().addCookie(COOKIE);</span></span></code> </pre><br>  Das offensichtliche Minus dieses Ansatzes ist die Notwendigkeit, Cookies nach Ablauf ihrer G√ºltigkeitsdauer manuell zu √§ndern.  Da dieser Zeitraum auf der getesteten Plattform 3 Monate betr√§gt, haben wir uns f√ºr diese L√∂sung entschieden. <br><br><hr><br><h2>  Und wenn ich mich nicht anmelden muss? </h2><br><br>  Aber was ist mit der Situation, in der es nicht um Autorisierung und Sitzungen geht, sondern um die Beauftragung einer einmaligen Aktion (z. B. Bestellung aus dem Warenkorb, Registrierung eines neuen Benutzers usw.)?  Hier ist die Situation noch schlimmer.  Zwei Optionen, die ich finden konnte, sind: <br><br><ol><li>  Vereinbaren Sie mit Ihren Entwicklern eine Problemumgehung.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google bietet eine solche M√∂glichkeit</a> , aber denken Sie daran, dass Sie bewusst ein kleines Sicherheitsloch machen. </li><li>  Nutzen Sie kostenpflichtige Dienste von Drittanbietern, die von Ihrer Seite einen Captcha-Screenshot erstellen, versuchen, ihn zu entschl√ºsseln, und senden Sie einen entschl√ºsselten Wert.  Ich selbst habe diese Methode nicht ausprobiert und kann sie nicht vollst√§ndig empfehlen. </li></ol><br><hr><br><h2>  Zusammenfassend </h2><br>  Wie Sie sehen, gibt es keine hoffnungslosen Situationen.  Es w√§re jedoch dumm zu leugnen, dass absolut alle oben genannten Optionen ihre eigenen, ziemlich bedeutenden Nachteile haben, sodass Sie die Wahl haben. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit. <br><br>  PS Wenn Sie andere L√∂sungen kennen, die im wirklichen Leben funktionieren - beschreiben Sie sie bitte in den Kommentaren. Es wird sehr interessant sein, sie zu lesen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de442034/">https://habr.com/ru/post/de442034/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de442022/index.html">Design auf CodeFest. Das ist aber nicht sicher</a></li>
<li><a href="../de442024/index.html">In Russland wird eine nationale Strategie f√ºr k√ºnstliche Intelligenz entwickelt</a></li>
<li><a href="../de442026/index.html">Trojan.Multi.BroSubsc.gen - Kaspersky funktioniert</a></li>
<li><a href="../de442028/index.html">Karriere Steroide. Samurai-Weg</a></li>
<li><a href="../de442032/index.html">Wiedereinf√ºhrung von Bison (kleiner Sieg der Zoologen)</a></li>
<li><a href="../de442036/index.html">Laufzeit f√ºr ausgereifte Container: Containerd wird CNCF-Absolvent</a></li>
<li><a href="../de442038/index.html">Die Zusammenfassung der Ereignisse f√ºr HR-Experten im Bereich IT im M√§rz 2019</a></li>
<li><a href="../de442040/index.html">Partnerschaft als wirksames Instrument f√ºr die Gesch√§ftsentwicklung</a></li>
<li><a href="../de442044/index.html">Wie wir das Zabbix-Einzelhandels√ºberwachungssystem verwenden</a></li>
<li><a href="../de442046/index.html">Reagieren und Code teilen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>