<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛐 🎦 ⏪ Laden Sie 16 GB Torrent über ein Tablet mit 4 GB freiem Speicherplatz herunter 🏂 🍵 👞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Herausforderung: 


 Es gibt einen PC ohne Internet, aber es ist möglich, die Datei über USB zu übertragen. Es gibt ein Tablet mit dem Internet, von d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Laden Sie 16 GB Torrent über ein Tablet mit 4 GB freiem Speicherplatz herunter</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473636/"><p><img src="https://habrastorage.org/webt/wr/vp/h0/wrvph0mo5udgxojltbbxmiur0dm.png"></p><br><p>  <strong>Herausforderung:</strong> </p><br><p>  Es gibt einen PC ohne Internet, aber es ist möglich, die Datei über USB zu übertragen.  Es gibt ein Tablet mit dem Internet, von dem diese Datei übertragen werden kann.  Auf dem Tablet können Sie den gewünschten Torrent herunterladen, aber nicht genügend freien Speicherplatz.  Die Datei im Torrent ist einfach und groß. </p><br><p>  <strong>Weg zur Lösung:</strong> </p><br><p>  Ich habe den Torrent zum Herunterladen gestartet.  Als der freie Speicherplatz fast zu Ende war, pausierte ich den Download.  Ich habe das Tablet an den PC angeschlossen und die Datei vom Tablet auf den PC verschoben.  Er machte eine Pause und zu meiner Überraschung wurde die Datei erneut erstellt und der Strom schwang weiter, als wäre nichts passiert. </p><br><p>  Aufgrund der Tatsache, dass der Torrent-Client das Sparse-Flag auf eine Datei setzt, in die er die empfangenen Daten schreibt, versucht das System nicht sofort, 16 GB zu reservieren, und es tritt kein Fehler auf, wenn versucht wird, in eine Datei über 4 GB hinaus zu schreiben. </p><br><p>  Ich wiederholte den Vorgang viermal und erhielt vier Dateien auf dem PC, in denen sich verschiedene Teile desselben Torrents befanden.  Jetzt bleibt es, sie zusammenzubauen.  Das Verfahren ist im Wesentlichen einfach.  Es ist notwendig, null Bytes durch einen anderen Wert zu ersetzen, wenn es sich in einer der vier Dateien an dieser Position befindet. </p><br><p> Es schien mir, dass ein so einfaches Programm im Internet sein sollte.  Wirklich niemand stand vor einer solchen Aufgabe?  Aber mir wurde klar, dass ich nicht einmal weiß, nach welchen Keywords ich suchen soll.  Deshalb habe ich schnell ein Lua-Skript für diese Aufgabe erstellt und jetzt habe ich es optimiert.  Ich möchte es teilen. </p><a name="habracut"></a><br><h2 id="zagruzhaem-torrent-po-chastyam">  Torrent in Teilen herunterladen </h2><br><ol><li>  Starten Sie den Download von Torrent auf dem ersten Gerät </li><li>  Warten Sie, bis das ROM gefüllt ist </li><li>  Unterbrechen Sie den Download </li><li>  Übertragen Sie die Datei auf das zweite Gerät und fügen Sie dem Dateinamen eine Ziffer hinzu </li><li>  Gehen Sie zurück zum ersten Punkt, bis die Datei vollständig heruntergeladen ist </li></ol><br><h2 id="slivaem-chasti-v-odin-fayl">  Teile in einer Datei zusammenführen </h2><br><p>  Nachdem der letzte Teil empfangen wurde, müssen sie in einer ganzen Datei zusammengefasst werden. </p><br><p>  Die Aufgabe ist einfach: </p><br><ol><li>  Lesen Sie alle Teile auf einmal </li><li>  Wenn in einem Teil der Position das Nicht-Null-Byte in den Ausgang geschrieben wird, schreiben wir andernfalls Null </li></ol><br><p> Die Funktion <code>merge_part</code> verwendet ein Array von <code>streams_in</code> Streams, aus denen ein Teil der Größe <code>buffer_length</code> und gibt das Ergebnis des Zusammenführens von Teilen aus verschiedenen Streams zurück. </p><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge_part</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(streams_in, buffer_length)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> out_part <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, stream <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">ipairs</span></span>(streams_in) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> in_part = stream:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(buffer_length) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> out_part <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> out_part = in_part <span class="hljs-comment"><span class="hljs-comment">--       elseif in_part and #in_part &gt; 0 then if #out_part &lt; #in_part then out_part, in_part = in_part, out_part end if out_part ~= in_part --   and in_part:find("[^\0]") --    in_part and out_part:find("\0", 1, true) --     out_part then local find_index = 1 --[[</span></span></code> </pre> <br><p>  Die Funktion <code>string.gsub</code> für die Aufgabe geeignet, da sie mit Nullen gefüllte Teile findet und das, was an sie übergeben wird, <code>string.gsub</code> . </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] out_part = out_part:gsub("\0+", function(zero_string) if #in_part &lt; find_index then return --     end --[[</span></span></code> </pre> <br><p>  <code>string.gsub</code> nicht die Position, an der eine Übereinstimmung gefunden wurde.  Daher führen wir eine parallele Suche nach der Position <code>zero_string</code> mit der Funktion <code>string.find</code> .  Es reicht aus, das erste Null-Byte zu finden. </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] local start_index = out_part:find("\0", find_index, true) find_index = start_index + #zero_string --[[</span></span></code> </pre> <br><p>  Wenn <code>in_part</code> Daten für <code>out_part</code> kopieren Sie diese. </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] if #in_part &gt;= start_index then local end_index = start_index + #zero_string - 1 --[[</span></span></code> </pre> <br><p>  Wir schneiden den Teil, der der Folge von Nullen entspricht, aus <code>in_part</code> . </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] local part = in_part:sub(start_index, end_index) if (part:byte(1) ~= 0) or part:find("[^\0]") then --[[</span></span></code> </pre> <br><p>  Es gibt teilweise Daten. </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] if #part == #zero_string then return part else --[[</span></span></code> </pre> <br><p>  <code>part</code> stellte sich als weniger als eine Folge von Nullen heraus.  Wir ergänzen es mit ihnen. </p><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--]] return part..zero_string:sub(1, end_index - #in_part) end end end end) end end end return out_part end</span></span></code> </pre> <br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Somit war es möglich, diese Datei auf einen PC herunterzuladen und zusammenzustellen.  Nach der Fusion habe ich eine Torrent-Datei vom Tablet gezogen.  Ich habe den Torrent-Client auf dem PC installiert und die Datei damit überprüft. </p><br><p>  Der zuletzt heruntergeladene Teil auf dem Tablet kann in der Distribution verbleiben. Sie müssen ihn jedoch vor dem erneuten Überprüfen der Teile einschließen und die Datei deaktivieren, damit sie nicht erneut heruntergeladen wird. </p><br><p>  <strong>Gebraucht:</strong> </p><br><ol><li>  Torrent Client Flud auf dem Tablet. </li><li>  QBittorent Torrent Client auf dem PC. </li><li>  <a href="">Lua-Skript</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473636/">https://habr.com/ru/post/de473636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473626/index.html">„Der Entwickler möchte in drei Jahren ein Flugzeug kaufen. Meine Aufgabe ist es, ihm zu helfen “- Denis Puschkin über die Motivation von Skyeng</a></li>
<li><a href="../de473628/index.html">C ++ im Dienste der Kieferorthopädie: Interview mit Mikhail Matrosov, CAD-Entwickler bei Align Technology</a></li>
<li><a href="../de473630/index.html">Best Practices und Tools für die Entwicklung von iOS-Anwendungen</a></li>
<li><a href="../de473632/index.html">Wir haben einen Artikel über Habr gesehen</a></li>
<li><a href="../de473634/index.html">Comcast-Lobbys verbieten die DNS-Verschlüsselung</a></li>
<li><a href="../de473638/index.html">Shader ist keine Magie. Shader in Unity schreiben. Einleitung</a></li>
<li><a href="../de473640/index.html">Big Data Sonnenuntergang</a></li>
<li><a href="../de473642/index.html">Cribble Crabble Gradle: Magie automatisch aufbauen</a></li>
<li><a href="../de473646/index.html">Hackathon in einer kleinen Firma: Wie man arrangiert, ohne einen Zug von Ressourcen zu entsorgen</a></li>
<li><a href="../de473648/index.html">Das Pferd ist totschrei: Übergang von Tslint zu Eslint</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>