<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌠 👨🏿‍💻 👨🏽‍🤝‍👨🏻 Redis Best Practices, Teil 1 😫 🤱🏾 💣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einer Reihe von Artikeln werde ich meine angepasste Übersetzung des Redis Best Practices- Abschnitts von der offiziellen Redis Labs-Website präsent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Redis Best Practices, Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485672/">  In einer Reihe von Artikeln werde ich meine angepasste Übersetzung des <a href="https://redislabs.com/redis-best-practices/" rel="nofollow">Redis Best Practices-</a> Abschnitts von der offiziellen Redis Labs-Website präsentieren. <div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/6y/f5/hr6yf5w1hp0fh-i5vfa0p1pxeuy.png"></div><a name="habracut"></a><br>  Redis kann auf unzählige Arten verwendet werden. Es gibt jedoch mehrere Muster, mit denen häufig auftretende Probleme gelöst werden können.  Wir haben eine Sammlung allgemeiner Muster zusammengestellt, die wir als <i>Best Practices</i> zur Lösung dieser Probleme betrachten.  Diese Sammlung erhebt keinen Anspruch auf Vollständigkeit und scheint nicht die einzige Möglichkeit zu sein, Redis zu verwenden. Wir hoffen, dass sie als Ausgangspunkt für die Lösung von Problemen mit Redis dient. <br><br>  Wir haben diesen Leitfaden für bewährte Verfahren nach Bedarf in Kapitel und Unterkapitel unterteilt (Anmerkung des Übersetzers: Einige Unterkapitel sind kurz, daher werde ich sie in einem kombinieren): <br><br><ul><li>  Im Kapitel „Indizierungsmuster“ werden wir nach Möglichkeiten suchen, um über den üblichen Schlüsselwertzugriff mit Redis hinauszugehen.  Es enthält Möglichkeiten zur intelligenten Verwendung von Schlüsselmustern mithilfe verschiedener Redis-Datentypen, um nicht nur Daten zu finden, sondern auch die Komplexität des Zugriffs zu verringern. </li><li> Das Kapitel Interaktionsmuster konzentriert sich auf Redis-Muster, mit denen Daten über die Infrastruktur hinweg verschoben werden.  In diesem Fall fungiert Redis nicht als Repository, sondern als Leitfaden für Daten. </li><li>  Das Kapitel „Datenspeichermuster“ beschreibt Methoden zum Speichern komplexer Darstellungen von Daten in Redis.  Wir werden komplexe Skripte von Dokumenten berechnen, die auf einfache und komplexe Weise verallgemeinert werden können. </li><li>  Muster für temporär gespeicherte Daten werden im Kapitel „Zeitreihenmuster“ beschrieben. </li><li>  Geschwindigkeitsbegrenzung wird häufig in Redis verwendet.  Im Kapitel "Grundlegende Geschwindigkeitsbegrenzungsmuster" werden die Grundlagen der Anwendungsfälle behandelt. </li><li>  Der Bloom-Filter ist seit langem in Redis zu sehen, und im Kapitel „Muster mit einem Bloom-Filter“ untersuchen wir probabilistische Datenstrukturen und wie sie sich von ihren unwahrscheinlichen Analoga unterscheiden. </li><li>  die Theke ist eine überraschend tiefe Rezeption.  In einem separaten Kapitel erfahren Sie, wie Sie Aktivitäten und eindeutige Elemente auf effiziente Weise berechnen können. </li><li>  Schließlich werden wir darüber sprechen, wie wir Lua nutzen können, um Redis dazu zu bringen, mit weniger mehr zu erreichen. </li></ul><br>  Diese Anleitung ist inkonsistent, sodass Sie mit jedem Kapitel beginnen können.  Sie können auch die Navigation am Anfang jedes Beitrags verwenden, um etwas Passendes zu finden. <br><br><h2>  Indizierungsmuster </h2><br>  Konzeptionell ist Redis eine Datenbank, die auf dem Schlüssel / Wert-Paradigma basiert, wenn jedem Datenelement ein bestimmter Schlüssel zugeordnet ist.  Wenn Sie Daten für etwas anderes als einen Schlüssel abrufen möchten, müssen Sie einen Index implementieren, der einen der vielen in Redis verfügbaren Datentypen verwendet. <br><br>  Die Indizierung in Redis unterscheidet sich erheblich von der in anderen Datenbanken, sodass Ihre eigenen Verwendungsszenarien und Daten die beste Strategie für die Indizierung bestimmen.  In diesem Kapitel werden neben dem einfachen Abrufen von Schlüsseln und Werten einige allgemeine Strategien zum Abrufen von Daten behandelt: <br><br><ul><li>  sortierte Mengen als Indizes; </li><li>  lexikografische Indizes; </li><li>  Geodatenindizes; </li><li>  IP-Geolocation </li><li>  Volltextsuche; </li><li>  partitionierte Indizes. </li></ul><br><h3>  Sortierte Mengen als Indizes </h3><br>  Sortierte Mengen (ZSETs) sind ein Standarddatentyp in Redis, der viele eindeutige Objekte darstellt (Wiederholungen werden nicht gespeichert), wobei jedem Objekt eine Nummer (als "Anzahl" bezeichnet) zugewiesen wird, die als natürlicher Sortiermechanismus fungiert.  Und obwohl Objekte nicht wiederholt werden können, können einige Objekte dieselbe Anzahl haben.  Mit einem relativ geringen Zeitaufwand für das Hinzufügen, Löschen und Abrufen eines Wertebereichs (nach Rang oder Anzahl) eignen sich sortierte Mengen gut als Indizes.  Nehmen Sie als Beispiel die Länder der Welt, geordnet nach Bevölkerung: <br><br><pre><code class="plaintext hljs">&gt; ZADD countries-by-pop 1409517397 china &gt; ZADD countries-by-pop 146573899 russia &gt; ZADD countries-by-pop 81456724 germany &gt; ZADD countries-by-pop 333016381 usa &gt; ZADD countries-by-pop 1 mars &gt; ZADD countries-by-pop 37290812 afghanistan &gt; ZADD countries-by-pop 1388350202 india</code> </pre> <br>  Es ist ganz einfach, die fünf besten Länder zu finden: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE countries-by-pop 0 4 1) "mars" 2) "afghanistan" 3) "germany" 4) "russia" 5) "india"</code> </pre> <br>  Und Länder mit einer Bevölkerung zwischen 10.000.000 und 1.000.000.000 erhalten: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE countries-by-pop 10000000 1000000000 1) "afghanistan" 2) "germany" 3) "russia"</code> </pre> <br>  Sie können mehrere Indizes erstellen, um verschiedene Arten der Datensortierung zu demonstrieren.  In unserem Beispiel könnten wir dieselben Objekte verwenden, aber anstelle der Anzahl der Personen die Bevölkerungsdichte, die geografische Größe, die Anzahl der Internetnutzer usw. verwenden.  Dadurch werden Hochleistungsindizes für verschiedene Aspekte erstellt.  Wenn der Name eines Objekts durch Daten geteilt wird, die entweder in Redis (z. B. in Hash) oder in einem anderen Datenspeicher gespeichert sind, kann der sekundäre Prozess bei Bedarf zusätzliche Informationen zu jedem Element abrufen. <br><br><h3>  Lexikografische Indizes </h3><br>  Sortierte Mengen (ZSETs) mit einer Rangfolge nach Anzahl haben eine interessante Eigenschaft, mit der ein Mechanismus für die grobe alphabetische Sortierung erstellt werden kann.  Die Eigenschaft ist, dass Objekte mit derselben Punktzahl in lexikografischer Reihenfolge und nach Grenzwerten zurückgegeben werden können.  Nehmen Sie die folgenden Daten: <br><br><pre> <code class="plaintext hljs">&gt; ZADD animal-list 0 bison 0 boa 0 dog 0 emu 0 falcon 0 alligator 0 chipmunk</code> </pre> <br>  Dieser Befehl fügt dem Tierlistenschlüssel mehrere Tiere hinzu.  Jedes Objekt hat eine Punktzahl von 0. Nach der Ausführung des ZRANGE-Befehls mit den Argumenten 0 und -1 sehen wir eine merkwürdige Reihenfolge: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE animal-list 0 -1 1) "alligator" 2) "bison" 3) "boa" 4) "chipmunk" 5) "dog" 6) "emu" 7) "falcon"</code> </pre> <br>  Obwohl die Elemente nicht alphabetisch hinzugefügt wurden, wurden sie alphabetisch sortiert zurückgegeben.  Diese Reihenfolge ist das Ergebnis eines binären Zeichenfolgenvergleichs, byteweise.  Dies bedeutet, dass ASCII-Zeichen in alphabetischer Reihenfolge zurückgegeben werden.  Dies legt Folgendes nahe: <br><br><ul><li>  Zeichen in Groß- und Kleinschreibung werden nicht als gleich erkannt. </li><li>  Multibyte-Zeichen werden nicht wie erwartet sortiert. </li></ul><br>  Redis bietet auch einige erweiterte Funktionen, um die lexikografische Suche weiter einzugrenzen.  Zum Beispiel möchten wir Tiere zurückgeben, die mit <i>b beginnen</i> und mit <i>e</i> enden.  Wir können den folgenden Befehl verwenden: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f 1) "bison" 2) "boa" 3) "chipmunk" 4) "dog" 5) "emu"</code> </pre> <br>  Das Argument <i>(f</i> kann etwas verwirrend sein. Dies ist ein wichtiger Punkt, da Redis keine Ahnung vom wörtlichen Verständnis der Buchstaben des Alphabets hat. Dies bedeutet, dass wir berücksichtigen müssen, dass alles, was mit <i>e</i> beginnt, immer vor allem steht, was mit <i>f</i> beginnt, unabhängig von den nachfolgenden Buchstaben Ein weiterer Hinweis ist, dass die eckige Klammer die Suche mit Einschluss und die runde Klammer die Suche ohne Einschluss angibt. In unserem Fall wird bei einer Abfrage mit <i>b</i> diese in die Liste aufgenommen, während <i>f</i> nicht in der Auswahl angezeigt wird alle Elemente bis zum Ende verwenden  das letzte Symbol (255 oder 0xFF) codiert: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [c "[\xff" 1) "chipmunk" 2) "dog" 3) "emu" 4) "falcon"</code> </pre> <br>  Dieser Befehl kann auch eingeschränkt werden, wodurch die Paginierung sichergestellt wird: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f LIMIT 0 2 1) "bison" 2) "boa" &gt; ZRANGEBYLEX animal-list [b (f LIMIT 2 2 1) "chipmunk" 2) "dog"</code> </pre> <br>  Der einzige Nachteil ist, dass die Zeitkomplexität mit zunehmendem Einzug zunimmt (erstes Argument nach LIMIT).  Wenn Sie also 1 Million Objekte haben und versuchen, die letzten beiden zu erhalten, ist ein Crawl von nur einer Million erforderlich. <br><br><h3>  Geodatenverzeichnisse </h3><br>  Redis verfügt über mehrere Geodatenindizierungsteams (GEO-Teams). Im Gegensatz zu anderen Teams haben diese Teams jedoch keine eigenen Datentypen.  Diese Befehle ergänzen die Art der sortierten Menge.  Dies wird erreicht, indem der Breiten- und Längengrad unter Verwendung des Geohash-Algorithmus in die Punktzahl des sortierten Satzes codiert wird. <br>  Das Hinzufügen von Elementen zu einem Geo-Index ist einfach.  Angenommen, Sie verfolgen eine Gruppe von Autos, die auf einer Straße fahren.  Wir nennen diesen Satz von Autos einfach "Autos".  Angenommen, Ihre bestimmte Maschine kann als "Mein Auto" -Objekt identifiziert werden (wir verwenden den Begriff "Objekt", da der Geo-Index einfach eine Form der Menge ist).  Um eine Maschine zum Set hinzuzufügen, können wir den Befehl ausführen: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17087 36.12306 my-car</code> </pre> <br>  Das erste Argument ist die Menge, zu der wir hinzufügen, das zweite ist der Breitengrad, das dritte der Längengrad und das vierte der Name des Objekts. <br><br>  Um den Standort der Maschine zu aktualisieren, müssen Sie den Befehl nur noch einmal mit den neuen Koordinaten ausführen.  Dies funktioniert, weil ein Geo-Index einfach eine Menge ist, bei der doppelte Elemente nicht zulässig sind. <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17172 36.12196 my-car</code> </pre> <br>  Fügen Sie ein zweites Auto zu "Autos" hinzu.  Diesmal führt Volodya sie: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.171971 36.120609 volodias-car</code> </pre> <br>  Wenn man sich die Koordinaten ansieht, kann man sagen, dass diese Autos ziemlich nahe beieinander liegen, aber wie viel?  Sie können dies mit dem Befehl GEODIST definieren: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car volodias-car "151.9653"</code> </pre> <br>  Dies bedeutet, dass zwei Fahrzeuge ungefähr 151 Meter voneinander entfernt sind.  Sie können auch in anderen Einheiten berechnen: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car robins-car ft "498.5737"</code> </pre> <br>  Dies ergab die gleiche Distanz in Schritten.  Sie können auch Meilen (ml) oder Kilometer (km) verwenden. <br><br>  Nun wollen wir sehen, wer sich im Radius eines bestimmten Punktes befindet: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUS cars -115.17258 36.11996 100 m 1) "volodias-car"</code> </pre> <br>  Dies brachte alle innerhalb eines Radius von 100 Metern um den angegebenen Punkt zurück.  Sie können auch alle Personen im Radius eines Objekts aus der Gruppe anfordern: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m 1) "volodias-car" 2) "my-car"</code> </pre> <br>  Wir können den Abstand auch durch Hinzufügen des optionalen WITHDIST-Arguments aktivieren (dies funktioniert für GEORADIUS oder GEORADIUSBYMEMBER): <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST 1) 1) "volodias-car" 2) "0.0000" 2) 1) "my-car" 2) "151.9653"</code> </pre> <br>  Ein weiteres optionales Argument für GEORADIUS und GEORADIUSBYMEMBER ist WITHCOORD, das die Koordinaten jedes Objekts zurückgibt.  WITHDIST und WITHCOORD können zusammen oder getrennt verwendet werden: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST WITHCOORD 1) 1) "volodias-car" 2) "0.0000" 3) 1) "-115.17197102308273315" 2) "36.12060917648089031" 2) 1) "my-car" 2) "151.9653" 3) 1) "-115.17171889543533325" 2) "36.12196018285882104"</code> </pre> <br>  Da Geodatenindizes nur eine Alternative zu sortierten Mengen sind, können einige Operatoren der letzteren verwendet werden.  Wenn wir "my-car" aus der Menge "cars" entfernen möchten, können wir den Befehl der sortierten Menge von ZREM verwenden: <br><br><pre> <code class="plaintext hljs">&gt; ZREM cars my-car</code> </pre> <br>  Redis bietet eine Vielzahl von Werkzeugen für die Arbeit mit Geodaten. In diesem Abschnitt haben wir nur die grundlegenden untersucht. <br><br><h3>  IP-Geolocation </h3><br>  Das Ermitteln des tatsächlichen Standorts des verbundenen Dienstes kann sehr hilfreich sein.  IP-Geolocation-Tabellen sind normalerweise recht groß und schwer effektiv zu verwalten.  Wir können sortierte Sets verwenden, um schnelle und effiziente IP-Geolocation-Services zu implementieren. <br><br>  IPv4 wird am häufigsten in Dezimalschreibweise angegeben (z. B. 74.125.43.99).  Netzwerkdienste sehen diese Adresse jedoch als 32-Bit-Zahl, wobei jedes Byte eine von vier Zahlen in Dezimalform darstellt.  Das obige Beispiel wäre 0x4A7D2B63 hexadezimal oder 1249717091 dezimal. <br><br>  IP-Geolocation-Datasets sind weit verbreitet und haben normalerweise die Form einer einfachen Tabelle mit drei Spalten (Anfang, Ende, Position).  Anfang und Ende sind die dezimale Darstellung von IPv4.  In Redis können wir sortierte Mengen an dieses Format anpassen, da die IP-Bereiche keine „Lücken“ aufweisen. Daher können wir davon ausgehen, dass das Ende eines Bereichs der Anfang eines anderen Bereichs ist. <br><br>  Fügen Sie für ein einfaches Beispiel den sortierten Mengen einige Bereiche hinzu: <br><br><pre> <code class="plaintext hljs">&gt; ZADD ip-loc 1249716479 us:1 &gt; ZADD ip-loc 1249716735 taiwan:1 &gt; ZADD ip-loc 1249717759 us:2 &gt; ZADD ip-loc 1249718015 finland:1</code> </pre> <br>  Das erste Argument ist der Schlüssel unserer Menge, das zweite ist die dezimale Darstellung des Endes des IP-Bereichs und das letzte ist das Objekt selbst.  Beachten Sie, dass das gesetzte Objekt eine Nummer nach dem Doppelpunkt hat.  Dies dient nur zur Veranschaulichung.  Echte IP-Tabellen haben eindeutige Kennungen für jeden Bereich (und mehr zusätzliche Informationen als nur den Namen des Landes). <br><br>  Um die Tabelle nach einer bestimmten IP-Adresse abzufragen, können wir den Befehl ZRANGEBYSCORE mit einigen zusätzlichen Argumenten verwenden.  Nehmen Sie die IP-Adresse und konvertieren Sie sie in eine Dezimalzahl.  Dies kann mit Ihrer Programmiersprache erfolgen.  Verwenden Sie zunächst die Adresse aus dem ursprünglichen Beispiel 74.125.43.99 (1249717091).  Wenn wir diese Zahl als Bezugspunkt nehmen und kein Maximum angeben und dann das Ergebnis nur auf das erste Objekt beschränken, finden wir dessen Geolocation: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE ip-loc 1249717091 +inf LIMIT 0 1 1) "us:2"</code> </pre> <br>  Das erste Argument ist der Schlüssel unserer sortierten Menge, das zweite ist die dezimale Darstellung der IP-Adresse, das dritte (+ inf) weist Redis an, ohne Obergrenze anzufordern, und die letzten drei Argumente geben lediglich an, dass wir nur das allererste Ergebnis erhalten möchten. <br><br><h3>  Volltextsuche </h3><br>  Vor der Einführung von Modulen wurde die Volltextsuche mit nativen Redis-Befehlen implementiert.  Das RedisSearch-Modul ist viel produktiver als dieses Muster. In einigen Umgebungen ist es jedoch nicht verfügbar.  Darüber hinaus ist dieses Muster sehr interessant und kann auf andere Workloads verallgemeinert werden, in denen RedisSearch nicht ideal ist. <br>  Angenommen, wir haben mehrere Textdokumente, die durchsucht werden müssen.  Dies ist möglicherweise nicht der offensichtliche Anwendungsfall für Redis, da es den Zugriff auf Schlüssel ermöglicht. Andererseits kann Redis als völlig neue Volltextsuchmaschine verwendet werden. <br><br>  Nehmen wir zunächst einige Beispieltexte in den Dokumenten: <br><br>  <i>"Redis ist sehr schnell"</i> <br>  <i>"Geparden sind schnell"</i> <br>  <i>"Geparden haben Flecken"</i> <br><br>  Wir teilen sie in Wortgruppen ein, die der Einfachheit halber durch ein Leerzeichen getrennt sind: <br><br><pre> <code class="plaintext hljs">&gt; SADD ex1 redis is very fast &gt; SADD ex2 cheetahs are very fast &gt; SADD ex3 cheetahs have spots</code> </pre> <br>  Beachten Sie, dass wir jede Zeile in einen eigenen Satz einfügen.  Es scheint, als würden wir nur die gesamte Zeile hinzufügen - SADD ist variabel und nimmt mehrere Elemente gleichzeitig als Argumente.  Wir haben auch alle Wörter in Kleinbuchstaben umgewandelt. <br>  Dann müssen wir diesen Index umkehren und zeigen, welches Wort in welchem ​​Dokument enthalten ist.  Dazu erstellen wir für jedes Wort eine Menge und geben den Namen des Dokuments als Objekt an: <br><br><pre> <code class="plaintext hljs">&gt; SADD redis ex1 &gt; SADD is ex1 &gt; SADD very ex1 ex2 &gt; SADD fast ex1 ex2 &gt; SADD cheetahs ex2 ex3 &gt; SADD have ex3 &gt; SADD spots ex3</code> </pre> <br>  Aus Gründen der Übersichtlichkeit haben wir dies in verschiedene Befehle unterteilt, aber alle Befehle werden normalerweise atomar im MULTI / EXEC-Block ausgeführt. <br><br>  Um unseren winzigen Volltextindex abzufragen, verwenden wir den Befehl SINTER (Schnittmenge von Mengen).  Finden Sie Dokumente mit "sehr" und "schnell": <br><br><pre> <code class="plaintext hljs">&gt; SINTER very fast 1) "ex2" 2) "ex1"</code> </pre> <br>  Falls es keine Dokumente gibt, die der Anfrage entsprechen, erhalten wir ein leeres Ergebnis: <br><br><pre> <code class="plaintext hljs">&gt; SINTER cheetahs redis (empty list or set)</code> </pre> <br>  Aus Gründen der Konsistenz ist es besser, SUNION anstelle von SINTER zu verwenden: <br><br><pre> <code class="plaintext hljs">&gt; SUNION cheetahs redis 1) "ex2" 2) "ex1" 3) "ex3"</code> </pre> <br>  Das Entfernen eines Objekts aus dem Index ist etwas komplizierter.  Rufen Sie zuerst indizierte Wörter aus dem Dokument ab und löschen Sie dann die Dokument-ID aus jedem Wort: <br><br><pre> <code class="plaintext hljs">&gt; SMEMBERS ex3 1) "spots" 2) "have" 3) "cheetahs" &gt; SREM have ex3 &gt; SREM cheetahs ex3 &gt; SREM spots ex3</code> </pre> <br>  Redis verfügt nicht über einen separaten Operator, der alle diese Schritte mit einem einzigen Befehl ausführt. Sie müssen also zuerst mit dem Befehl SMEMBERS abfragen und dann jedes Objekt nacheinander mit SREM löschen. <br><br>  Dies ist natürlich eine sehr vereinfachte Volltextsuche.  Sie können fortgeschrittenere Aktionen ausführen, indem Sie sortierte Sets anstelle der üblichen verwenden.  In diesem Fall können Sie ein Wort, das in einem Dokument mehrmals vorkommt, höher einstufen als das Dokument, in dem es einmal vorkommt.  Die oben beschriebenen Muster sind mit Ausnahme der verwendeten Mengenarten mehr oder weniger gleich. <br><br><h3>  Partitionierte Indizes </h3><br>  Eine einzelne Instanz (oder ein Shard) von Redis ist sehr brauchbar, aber es gibt Situationen, in denen Sie möglicherweise einen Index benötigen, der auf mehrere Instanzen verteilt ist.  Zum Beispiel, um den Durchsatz zu erhöhen, indem Indizes parallelisiert werden, die größer sind als der freie Speicherplatz einer Instanz.  Angenommen, Sie möchten eine Operation mit mehreren Tasten ausführen.  Eine effektive Möglichkeit, diese Schlüssel zu trennen (zu partitionieren), besteht darin, eine gleichmäßige Verteilung der Schlüssel auf alle Partitionen sicherzustellen, alle Operationen in jeder Partition parallel auszuführen und die Ergebnisse am Ende zu kombinieren. <br><br>  Um eine einheitliche Schlüsselverteilung zu erreichen, verwenden wir einen nicht kryptografischen Hashing-Algorithmus.  Jede schnelle Hash-Funktion kann verwendet werden, wir verwenden jedoch den berühmten CRC-32 als Beispiel.  In den meisten Fällen geben diese Algorithmen das Ergebnis hexadezimal zurück (für „mein-cooles-Dokument“ gibt CRC-32 F9FDB2C9 zurück).  Die hexadezimale Darstellung ist für den Computer einfacher, es handelt sich jedoch nur um eine andere Darstellung von Dezimalzahlen, sodass Sie mit diesen Werten Berechnungen durchführen können. <br>  Als nächstes müssen Sie die Anzahl der Partitionen bestimmen - dies sollte mindestens x2 der Anzahl der Kopien sein.  Dies trägt weiter zur Skalierung bei. <br><br>  Nehmen wir an, wir haben 3 Kopien und 6 Partitionen.  Die Partition, an die das Dokument gesendet wird, kann wie folgt berechnet werden: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&amp;#xA0;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="60.941ex" height="2.78ex" viewBox="0 -832 26238.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-68" x="1575" y="0"></use><g transform="translate(2152,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-66" x="353" y="-219"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-75" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="3463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-63" x="4064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-74" x="4497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="4859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6F" x="5204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="5690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMAIN-28" x="6290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="6680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-64" x="7025" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-65" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-74" x="8616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="8977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-66" x="9323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="9873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-65" x="10219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-72" x="10685" y="0"></use><g transform="translate(11137,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-64" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6F" x="11857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-63" x="12342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-75" x="12776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6D" x="13348" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-65" x="14227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="14693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-74" x="15294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMAIN-29" x="15655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6D" x="16295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6F" x="17173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-64" x="17659" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="18182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-75" x="18783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6D" x="19355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-62" x="20234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-65" x="20663" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-72" x="21130" y="0"></use><g transform="translate(21581,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-70" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-61" x="22287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-72" x="22817" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-74" x="23268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="23630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-74" x="23975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-69" x="24337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6F" x="24682" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-6E" x="25168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhjStZ4wchtxgEXFlptkV8DeEqulcw#MJMATHI-73" x="25768" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&nbsp;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mtext>&nbsp;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> hash \ _function (identifier \ _document) \ mod number \ _partitions </script></p><br><br><pre> <code class="plaintext hljs">CRC32(“my-cool-document”) = F9FDB2C9 (16)  4194153161 (10) 4194153161 mod 6 = 5</code> </pre> <br>  In Redis Enterprise können Sie steuern, zu welcher Partition der Schlüssel gehört, indem Sie entweder vordefinierte reguläre Ausdrücke verwenden oder einen Teil des Schlüssels in geschweifte Klammern setzen.  In unserem Beispiel können wir den Schlüssel für das Dokument folgendermaßen festlegen: <br><br>  <i>idx: my-cool-document {5}</i> <br><br>  Dann haben wir ein anderes Dokument, das eine Partition mit der Nummer 3 ausgibt, daher sieht der Schlüssel so aus: <br><br>  <i>idx: mein-anderes-dokument {3}</i> <br><br>  Wenn Sie über zusätzliche Zusatzschlüssel verfügen, mit denen Sie arbeiten müssen und die mit diesem Dokument verknüpft sind, müssen Sie sich auf derselben Partition befinden, damit Sie Vorgänge mit beiden Schlüsseln gleichzeitig ausführen können, ohne dass eine Reihe von Fehlern auftreten.  Dazu müssen Sie dem Schlüssel dieselbe Partitionsnummer wie dem Dokument hinzufügen. <br><br>  Wenn Sie Ihre Daten aus der Ferne betrachten, werden Sie feststellen, dass Ihr Index ziemlich gleichmäßig über Partitionen verteilt ist.  Sie können die Aufgabe, die für jede Partition ausgeführt werden muss, parallelisieren.  Wenn Sie eine Aufgabe haben, die über den gesamten Index erledigt werden muss, muss Ihre Anwendung für jede Partition dieselbe Logik ausführen, das Ergebnis zurückgeben und nach Bedarf in der Anwendung kombinieren. <br><br>  Hiermit endet der erste Artikel.  Das nächste wird eine Übersetzung der Unterüberschriften "Interaktionsmuster" und "Datenspeichermuster" sein. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de485672/">https://habr.com/ru/post/de485672/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de485650/index.html">Docker-Bildverkleinerungstechniken</a></li>
<li><a href="../de485652/index.html">Beeinflussen Sie die Statistik der Inline-Kommentare</a></li>
<li><a href="../de485654/index.html">Eine Idee aus der Physik hilft der KI, in höheren Dimensionen zu arbeiten.</a></li>
<li><a href="../de485660/index.html">Das DDoS-Schutzunternehmen selbst habe DDoS-Angriffe gestartet, gab sein Gründer zu</a></li>
<li><a href="../de485664/index.html">Erstellen dynamischer Parameter in einem Jenkins-Job oder wie Sie Ihre Aufgabe benutzerfreundlich gestalten können</a></li>
<li><a href="../de485682/index.html">Zeitmanagement wird nicht helfen: Aufschub ist das Problem der Regulierung von Emotionen, nicht Zeit</a></li>
<li><a href="../de485688/index.html">Myapp verlängert Urlaub</a></li>
<li><a href="../de485692/index.html">Beratung des IT-Spezialisten für den Kunden oder wie das Chaos automatisiert werden kann</a></li>
<li><a href="../de485694/index.html">Embox auf Elbrus-Prozessor. Oder vergiss nie, was du an Intelligenz hast</a></li>
<li><a href="../de485702/index.html">FunCorp iOS Meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>