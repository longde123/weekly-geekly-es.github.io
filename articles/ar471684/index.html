<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ ๐ง๐ป ููุงุฐุง ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุญุฏุงุช ู nginx ๐น ๐๐ฝ ๐ฉโโค๏ธโ๐ฉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nginx ูู ุฎุงุฏู ููุจ ูุนูู ุนูู ุญู ุงูุนุดุฑุงุช ูู ููุงู ุงูุนูู ุ ูุชู ุชููููู ุจูุฑููุฉ ูุชูุณูุน ูุทุงูู ููุนูู ุนูู ุฌููุน ุฃูุธูุฉ ุงูุชุดุบูู ูุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุชูุฑูุจูุง. ูููู ูุตู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุฐุง ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุญุฏุงุช ู nginx</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/471684/" style=";text-align:right;direction:rtl">  Nginx ูู ุฎุงุฏู ููุจ ูุนูู ุนูู ุญู ุงูุนุดุฑุงุช ูู ููุงู ุงูุนูู ุ ูุชู ุชููููู ุจูุฑููุฉ ูุชูุณูุน ูุทุงูู ููุนูู ุนูู ุฌููุน ุฃูุธูุฉ ุงูุชุดุบูู ูุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุชูุฑูุจูุง.  ูููู ูุตู ูุงุฆูุฉ ุจุงูููุฒุงุช ูุงููุฏุฑุงุช ูุงููุดููุงุช ุงูุชู ูุฌุจ ุญููุง ุฎุงุฑุฌ ุงูุตูุฏูู ูู ูุชูุจ ุตุบูุฑ.  ูููู ูู ุจุนุถ ุงูุฃุญูุงู ุ ูุง ูููู ุญู ุนุฏุฏ ูู ููุงู ุงูุนูู ุฅูุง ูู ุฎูุงู ุชุทููุฑ ูุญุฏุงุชู ุงูุฎุงุตุฉ ูู nginx.  ูุฐู ูู ูุญุฏุงุช ููุฌูุฉ ูุญู ุงูุฃุนูุงู ูุชุญุชูู ุนูู ุจุนุถ ููุทู ุงูุฃุนูุงู ุ ูููุณ ูุฌุฑุฏ ุญู ูุธุงู ุนุงู. <br><br><img src="https://habrastorage.org/webt/_g/qx/cl/_gqxcl-ni0gc2f2rsr7thf4tici.jpeg"><br><br>  ุจุดูู ุนุงู ุ ูู ุดูุก ูู nginx ุนุจุงุฑุฉ ุนู ูุญุฏุงุช ุชู ูุชุงุจุชูุง ูู ูุจู ุดุฎุต ูุง.  ูุฐูู ุ ูุฅู ูุชุงุจุฉ ุงููุญุฏุงุช ุงูููุทูุฉ ุชุญุช nginx ููุณุช ููููุฉ ูุญุณุจ ุ ูููููุง ุถุฑูุฑูุฉ ุฃูุถูุง.  ุนูุฏูุง ูููู ูู ุงูุถุฑูุฑู ุงูููุงู ุจุฐูู ูููุงุฐุง ุ ูุฅู <strong>Vasily Soshnikov</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">dedokOne</a> ) ุณูู ูุฎุจุฑูุง ุนูู ุณุจูู ุงููุซุงู ูู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุช. <br><br>  ุฏุนูุง ูุชุญุฏุซ ุนู ุงูุฃุณุจุงุจ ุงูุชู ุชุดุฌุน ุนูู ูุชุงุจุฉ ุงููุญุฏุงุช ุงูููุทูุฉ ูู C ูุงูุจููุฉ ุงูุฃุณุงุณูุฉ ูู nginx ูุชุดุฑูุญ ูุญุฏุงุช HTTP ููุญุฏุงุช C ู NJS ู Lua ู nginx.conf.  ูู ุงูููู ุฃู ุชุนุฑู ููุณ ููุท ูุฃููุฆู ุงูุฐูู ูุชุทูุฑูู ุชุญุช nginx ุ ูููู ุฃูุถูุง ูุฃููุฆู ุงูุฐูู ูุณุชุฎุฏููู nginx-configs ุฃู Lua ุฃู ูุบุฉ ุฃุฎุฑู ุฏุงุฎู nginx. <br><br>  <em>ููุงุญุธุฉ: ูุณุชูุฏ ุงูููุงู ุฅูู ุชูุฑูุฑ ูู ูุงุณููู ุณูุดููููู.</em>  <em>ูุฌุฑู ุจุงุณุชูุฑุงุฑ ุชุญุฏูุซ ุงูุชูุฑูุฑ ูุชุญุฏูุซู.</em>  <em>ุงููุนูููุงุช ุงููุงุฑุฏุฉ ูู ุงููุงุฏุฉ ุชูููุฉ ุชูุงููุง ููู ุฃุฌู ุงูุญุตูู ุนูู ุฃูุตู ุงุณุชูุงุฏุฉ ูููุง ุ ูุญุชุงุฌ ุงููุฑุงุก ุฅูู ุฎุจุฑุฉ ูู ุงูุนูู ุจุงุณุชุฎุฏุงู ุดูุฑุฉ nginx ุจูุณุชูู ูุชูุณุท โโููุง ููู.</em> <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/82CyWPpjNNY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 style=";text-align:right;direction:rtl">  ููุชุฑุฉ ูุฌูุฒุฉ ุญูู ุฅูุฌู ุฅูุณ </h2><br>  <strong>ูู ูุง ุชุณุชุฎุฏูู ูุน nginx ูู ูุญุฏุงุช</strong> .  ูู ุชูุฌูู ูู ุชูููู nginx ูู ูุญุฏุฉ ููุทูุฉ ูููุตูุฉ ุ ุชูุช ูุชุงุจุชูุง ุจุนูุงูุฉ ุจูุงุณุทุฉ ุฒููุงุก ูู ูุฌุชูุน nginx. <br><br>  <strong>ุงูุชูุฌููุงุช ูู nginx.conf ูู ุฃูุถูุง ูุญุฏุงุช</strong> ุชุนูู ุนูู ุญู ูุดููุฉ ูุนููุฉ.  ูุฐูู ุ ูู ูุญุฏุงุช nginx ูู ูู ุดูุก.  add_headerุ proxy_pass ุ ุฃู ุชูุฌูู - ูุฐู ูู ุงููุญุฏุงุช ุงูููุทูุฉ ุฃู ูุฌููุนุงุช ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุชู ุชุนูู ููููุง ูููุงุนุฏ ูุนููุฉ. <br><br>  <strong>Nginx ูู ุฅุทุงุฑ</strong> ูุญุชูู ุนูู: Network &amp; File I / O ุ ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุ ุงูุชูููู ูุงูุจุฑูุฌุฉ ุงููุตูุฉ.  ูุฐู ุทุจูุฉ ุถุฎูุฉ ูู ุงูููุชุจุงุช ููุฎูุถุฉ ุงููุณุชูู ุ ูุงูุชู ููููู ูู ุฎูุงููุง ูุนู ุฃู ุดูุก ููุนูู ูุน ูุญุฑูุงุช ุฃูุฑุงุต ุงูุดุจูุฉ. <br><br>  <strong>Nginx ุณุฑูุน ููุณุชูุฑ ุ ูููู ูุนูุฏ</strong> .  ูุฌุจ ุนููู ูุชุงุจุฉ ูุซู ูุฐุง ุงูุฑูุฒ ุญุชู ูุง ุชููุฏ ูุฐู ุงูุตูุงุช ูู nginx.  ุบูุฑ ูุณุชูุฑ nginx ุนูู ุงูุฅูุชุงุฌ ุนููุงุก ุบูุฑ ุฑุงุถูู ุ ููู ูุง ููู ูู ูุฐุง. <br><br><h2 style=";text-align:right;direction:rtl">  ููุงุฐุง ุฅูุดุงุก ูุญุฏุงุช ุฎุงุตุฉ ุจู </h2><br>  <strong>ุชุญููู ุจุฑูุชูููู HTTP ุฅูู ุจุฑูุชูููู ุขุฎุฑ.</strong>  ูุฐุง ูู ุงูุณุจุจ ุงูุฑุฆูุณู ุงูุฐู ูุญูุฒ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฅูุดุงุก ูุญุฏุฉ ููุทูุฉ ูุนููุฉ. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุชููู ุงููุญุฏุฉ ุงูููุทูุฉ memcached_pass ุจุชุญููู HTTP ุฅูู ุจุฑูุชูููู ุขุฎุฑ ุ ูููููู ุงูุนูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ ุฃุฎุฑู.  ุชุณูุญ ูู ุงููุญุฏุฉ ุงูููุทูุฉ proxy_pass ุฃูุถูุง ุจุงูุชุญููู ุ ุนูู ุงูุฑุบู ูู HTTP (s) ุฅูู HTTP (s).  ูุซุงู ุฌูุฏ ุขุฎุฑ ูู fastcgi_pass. <br><br>  ูุฐู ูููุง ุชูุฌููุงุช ูููููุฐุฌ: "ุงูุชูู ุฅูู ูุซู ูุฐู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุ ุญูุซ ูุง HTTP (ูููู ูู ุญุงูุฉ proxy_pass HTTP)." <br><br>  <strong>ุฅุฏุฑุงุฌ ุงููุญุชูู ุงูุฏููุงูููู: ุชุฌุงูุฒ AdBlock ุ ุฅุฏุฎุงู ุงูุฅุนูุงู.</strong>  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏููุง ุฎูููุฉ ููุฌุจ ุชุนุฏูู ุงููุญุชูู ุงูุฐู ูุฃุชู ูููุง.  ุนูู ุณุจูู ุงููุซุงู ุ AdBlock ุ ุงูุฐู ูุญูู ุดูุฑุฉ ุฅุฏุฑุงุฌ ุงูุฅุนูุงู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงูุชุนุงูู ูุนูุง - ูุถุจุทูุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู. <br><br>  ููุงู ุดูุก ุขุฎุฑ ูุฌุจ ุนููู ูุนูู ุบุงูุจูุง ูุชุถููู ุงููุญุชูู ูู ูุดููุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู HLS.  ุนูุฏูุง ูุชู ุชุฎุฒูู ุงููุนููุงุช ุฏุงุฎู HLS ุ ูููู ููุณุชุฎุฏููู ุงูุญุตูู ุนูู ููุณ ุงูุฌูุณุฉ ุฃู ููุณ ุงููุนููุงุช.  ูู ููุงู ุ ููููู ูุต ุฃู ุฅุถุงูุฉ ุจุนุถ ุงููุนููุงุช ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชุชุจุน ุดูุก ูุง. <br><br>  <strong>ุฌูุน ุงูุจูุงูุงุช Clickstream ูู ุงูุฅูุชุฑูุช / ูุชุฑ ุงููุญููู.</strong>  ุญุงูุฉ ุดุนุจูุฉ ูู ููุงุฑุณุชู.  ุบุงูุจูุง ูุง ูุชู ุฐูู ุนูู nginx ุ ูููู ููุณ ุนูู access.log ุ ูููู ููููุงู ุฃูุซุฑ ุฐูุงุกู. <br><br>  <strong>ุชุญููู ุฌููุน ุฃููุงุน ุงููุญุชูู.</strong>  ุนูู ุณุจูู ุงููุซุงู ุ ุชุณูุญ ูู ูุญุฏุฉ rtmp ูู ุจุงูุนูู ููุณ ููุท ูุน rtmp ุ ูููู ุฃูุถูุง ูุน HLS.  ูุฐู ุงููุญุฏุฉ ูููู ุฃู ุชูุนู ุงููุซูุฑ ูุน ูุญุชูู ุงูููุฏูู. <br><br>  <strong>ููุทุฉ ุงูุชุฎููู ุงูุนุงูุฉ: SEP ุฃู Api Gateway.</strong>  ูุฐุง ูู ุงูุญุงู ุนูุฏูุง ูุนูู nginx ูุฌุฒุก ูู ุงูุจููุฉ ุงูุชุญุชูุฉ: ูุฑุฎุต ููุฌูุน ุงูููุงููุณ ููุฑุณู ุงูุจูุงูุงุช ุฅูู ุงููุฑุงูุจุฉ ู ClickStream.  ุชุนูู Nginx ููุง ููุญูุฑ ููุจููุฉ ุงูุชุญุชูุฉ - ููุทุฉ ุฏุฎูู ูุงุญุฏุฉ ูููุงุฌูุงุช ุงูุฎูููุฉ. <br><br>  <strong>ุฅุซุฑุงุก ุทูุจุงุช ุชุชุจุนูู ุงููุงุญูุฉ.</strong>  ุงูุฃูุธูุฉ ุงูุญุฏูุซุฉ ูุนูุฏุฉ ููุบุงูุฉ ุ ูุน ุนุฏุฉ ุฃููุงุน ูู ุงูุฎูููุฉ ุงูุชู ุชุดูู ูุฑููุง ูุฎุชููุฉ.  ููุงุนุฏุฉ ุนุงูุฉ ุ ูุตุนุจ ุธููุฑูุง ูุฃูู ูุฑุฉ ุ ูุฃุญูุงููุง ูููู ูู ุงูุตุนุจ ููู ูู ุฃูู ุฌุงุก ุงูุทูุจ ููู ุฃูู ุชู ุฅุฑุณุงู ุงูุทูุจ.  ูุชุจุณูุท ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ุชุณุชุฎุฏู ุจุนุถ ุงูุดุฑูุงุช ุงููุจูุฑุฉ ุชูููุฉ ุตุนุจุฉ - ููู ุชุถูู ุจูุงูุงุช ูุนููุฉ ุฅูู ุงูุทูุจุงุช.  ูู ูุฑุงูุง ุงููุณุชุฎุฏู ุ ูููู ูู ูุฐู ุงูุจูุงูุงุช ุ ูู ุงูุณูู ุชุชุจุน ูุณุงุฑ ุงูุทูุจ ุฏุงุฎู ุงููุธุงู.  ููุฐุง ูุง ูุณูู <strong>ุชุชุจุน</strong> . <br><br>  <strong>S3-ุงููููู.</strong>  ูุฐุง ุงูุนุงู ุ ุฃุฑู ุบุงูุจูุง ุงูุฃุดุฎุงุต ุงูุฐูู ูุนูููู ูุน ุฃุดูุงุกูู ูู ุฎูุงู s3.  ูููู ููุณ ูู ุงูุถุฑูุฑู ุงูููุงู ุจุฐูู ุนูู ูุญุฏุงุช C ุ ูุงูุจููุฉ ุงูุชุญุชูุฉ ูุงููุฉ ูู nginx ูุฐูู.  ูุญู ุจุนุถ ูุฐู ุงููุดุงูู ุ ููููู ุงุณุชุฎุฏุงู Lua ุ ูุชู ุญู ุดูุก ูุง ุนูู NJS.  ููู ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ูุญุฏุงุช ูู C. <br><br><h2 style=";text-align:right;direction:rtl">  ูุชู ูู ุงูููุช ุงูููุงุณุจ ูุฅูุดุงุก ูุญุฏุงุช </h2><br>  ููุงู ูุนูุงุฑุงู ูููู ุฃู ุงูููุช ูุฏ ุญุงู. <br><br>  <strong>ุชุนููู ุงููุธููุฉ.</strong>  ุนูุฏูุง ุชููู ุฃู ุดุฎุตูุง ุขุฎุฑ ูุญุชุงุฌ ุฅูู ููุชุฌู ุ ููุฌุจ ุนููู ุชูุฑูุจู ุฅูู "ุงููุตุฏุฑ ุงูููุชูุญ" ูุฅูุดุงุก ูุธุงุฆู ูุนููุฉ ููุดุฑู ูุงูุณูุงุญ ุจุงุณุชุฎุฏุงูู. <br><br>  <strong>ุญู ูุดุงูู ุงูุนูู.</strong>  ุนูุฏูุง ูุญุฏุฏ ุงููุดุงุท ุงูุชุฌุงุฑู ูุฐู ุงููุชุทูุจุงุช ุงูุชู ูุง ูููู ุชูุจูุชูุง ุฅูุง ุนู ุทุฑูู ูุชุงุจุฉ ุงููุญุฏุฉ ุงูุฎุงุตุฉ ุจู ูู nginx.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฅุฏุฑุงุฌ / ุงูุชุบููุฑ ุงูุฏููุงูููู ูููุญุชูู ุ ูููู ุฅุฌุฑุงุก ูุฌููุนุฉ ClickStream ุนูู Lua ุ ูููู ุนูู ุงูุฃุฑุฌุญ ูู ูุนูู ุจุดูู ุทุจูุนู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุนูุงุฑุฉ Nginx </h2><br>  ููุฏ ูุชุจุช ุฑูุฒ nginx ููุชุฑุฉ ุทูููุฉ.  ุชุณุนุฉ ูู ูุญุฏุงุชู ุชุฏูุฑ ูู ุงูุฅูุชุงุฌ ุ ุฅุญุฏุงูุง ูู ุงููุตุฏุฑ ุงูููุชูุญ ุ ููู ุงูุฅูุชุงุฌ ููุนุฏูุฏูู.  ูุฐูู ุ ูุฏู ุฎุจุฑุฉ ูููู. <br><blockquote style=";text-align:right;direction:rtl">  Nginx ูู ุฏููุฉ ุชุนุดุด ูููุง ูู ุดูุก ูุจูู ุญูู ุงูููุงุฉ. </blockquote>  ูุฐูู ุฃูุง ุฃููู nginx. <br><blockquote style=";text-align:right;direction:rtl">  ุงูุฃุณุงุณูุฉ ูู ูุบููุฉ ุนูู epoll. </blockquote>  Epoll ูู ุทุฑููุฉ ุชุณูุญ ูู ุจุงูุนูู ุจุดูู ุบูุฑ ูุชุฒุงูู ูุน ุฃู ูููุงุช ูุตููุฉ ุ ูููุณ ููุท ูุขุฎุฐ ุชูุตูู ุ ูุฃู ุงููุงุตู ููุณ ูุฌุฑุฏ ูุฃุฎุฐ ุชูุตูู. <br><br>  ุฃุนูู ุงูููุงุฉ ูู upstreams ู HTTP ู script.  ูู ุฎูุงู ุงูุจุฑูุฌุฉ ุงููุตูุฉ ุ ุฃุนูู nginx.conf ุ ูููุณ NJS.  ุนูุงูุฉ ุนูู ุงูุชุฏููุงุช ุงูุฃูููุฉ ุ HTTP ุ ูุงูุจุฑูุฌุฉ ุงููุตูุฉ ุ ุชู ุจูุงุก ูุญุฏุงุช HTTP ุจุงููุนู ุ ูุงูุชู ุณูุชุญุฏุซ ุนููุง. <br><br><img src="https://habrastorage.org/webt/d7/b6/ff/d7b6ffhplgm4ddkbvncbfh4umym.jpeg"><br><br>  ูุซุงู ููุงุณููู ุนูู upstreams ู HTTP ุฎูุงุฏู upstream - ุชูุฌููุงุช ุฏุงุฎู ุงูุชูููู.  ูุซุงู ุนูู ุงููุญุฏุงุช ุงูููุทูุฉ ูู HTTP ูู add_header.  ูุซุงู ุนูู ุงูุจุฑูุฌุฉ ุงููุตูุฉ ูู ููู ุงูุชูููู ููุณู.  ูุญุชูู ุงูููู ุนูู ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุชู ูุชููู ูููุง nginx ุ ูุชู ุชูุณูุฑูุง ุจุทุฑููุฉ ูุง ูุชุชูุญ ูู ุงูููุงู ุจุดูุก ูุง ููุณุคูู ุฃู ููุณุชุฎุฏู ูุฏูู. <br><br>  ูู ูููุฑ ูู ุงูููุงุฉ ูุณูุชุญุฏุซ ุจุฅูุฌุงุฒ ุดุฏูุฏ ุนู ุงูุชุฏููุงุช ุงูุนููุง ุ ูุฃูู ููู ูููุตู ุฏุงุฎู nginx.  ุงููุตุฉ ุนููู ุชุณุชุญู ุงูุนุฏูุฏ ูู ุงูููุงูุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุดุฑูุญ ูุญุฏุงุช HTTP </h2><br>  ุญุชู ูู ูู ุชูุชุจ ููุฏ C ุฏุงุฎู nginx ุ ููู ุงุณุชุฎุฏูุชู ุ ุชุฐูุฑ ุงููุงุนุฏุฉ ุงูุฑุฆูุณูุฉ. <br><blockquote style=";text-align:right;direction:rtl">  ูู nginx ุ ูุทูุน ูู ุดูุก ููุท ุณูุณูุฉ ุงููุณุคูููุฉ - COR. </blockquote>  ูุง ุฃุนุฑู ููููุฉ ุชุฑุฌูุฉ ูุฐุง ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ ุ ููููู ุณูู ุฃุตู ุงูููุทู.  ููุฑ ุทูุจู ุนุจุฑ ูุฌููุนุฉ ูู ูุญุฏุงุช ุงูุณูุณูุฉ ุงูููููุฉ ุ ุจุฏุกูุง ูู ุงููููุน.  ูู ูู ูุฐู ุงููุญุฏุงุช ุชุฑุฌุน ูุชูุฌุฉ.  ุฅุฐุง ูุงูุช ุงููุชูุฌุฉ ุณูุฆุฉ ุ ูุชู ููุงุทุนุฉ ุงูุณูุณูุฉ. <br><br><img src="https://habrastorage.org/webt/ky/sf/zj/kysfzj-evntyaf8v8q53ygxgrr4.jpeg"><br><br>  ุนูุฏ ุชุทููุฑ ุงููุญุฏุงุช ุงูููุทูุฉ ุฃู ุงุณุชุฎุฏุงู ุจุนุถ ุงูุชูุฌููุงุช ูู NJS ู Lua ุ ูุง ุชูุณู ุฃู ุงูููุฏ ูุฏ ูุนุทู ุชูููุฐ ูุฐู ุงูุณูุณูุฉ. <br><br>  ุงูุฃูุฑุจ ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุณูุฉ ุงููุณุคูููุฉ</a> ูู ุณุทุฑ ูู ููุฏ Bash: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">grep -RI pool nginx | awk -F<span class="hljs-string"><span class="hljs-string">":"</span></span> <span class="hljs-string"><span class="hljs-string">'{print $1}'</span></span> | sort -u | wc -l</code> </pre> <br>  ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูููู ูู ุดูุก ุจุณูุทูุง ุฌุฏูุง: ุฅุฐุง ุณูุท AWK ูู ููุชุตู ุงูุณุทุฑ ุ ููุฑุฒ ููู ูุชู ุชูููุฐ ุงูุฃูุงูุฑ ุงูุชุงููุฉ.  ุชุนูู ูุญุฏุฉ nginx ุจุดูู ูุดุงุจู ุ ููู ุงูุญูููุฉ ูู nginx ูููููู ุงูุงูุชูุงู ุญูู ุฐูู - ุฃุนุฏ ุชุดุบูู ุงูููุฏ.  ููู ูุฌุจ ุฃู ุชููู ูุณุชุนุฏูุง ููุชุนุทู ูุงูุชุดุบูู ุ ุชูุงููุง ูุซู ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุชู ุชุณุชุฎุฏููุง ูู ุงูุชูููู ุ ูููู ููุณ ุญูููุฉ ุฃู ูุฐุง ูู ุงูุญุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃููุงุน ูุญุฏุงุช HTTP </h3><br><blockquote style=";text-align:right;direction:rtl">  HTTP ู nginx ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงููุฑุงุญู ุงููุฎุชููุฉ. </blockquote><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ูุนุงูุฌุฉ ุงููุฑุญูุฉ - ูุนุงูุฌุงุช ุงููุฑุญูุฉ</strong> . </li><li style=";text-align:right;direction:rtl">  <strong>ูุฑุดุญุงุช - ูุฑุดุญุงุช ุงูุฌุณู / ุงูุฑุคูุณ</strong> .  ูุฐุง ุงูุชุตููุฉ ูู ุงูุฑุคูุณ ุฃู ูุตูุต ุงูุทูุจ. </li><li style=";text-align:right;direction:rtl">  <strong>ุงููููุงุก</strong> .  ูุญุฏุงุช ุงูุจุฑููุณู ุงููููุฐุฌูุฉ ูู proxy_pass ุ fastcgi_pass ุ memcached_pass. </li><li style=";text-align:right;direction:rtl">  <strong>ุงููุญุฏุงุช ุงูููุทูุฉ ูููุงุฒูุฉ ุงูุญูู ุงููุญุฏุฏุฉ - ููุงุฒูุงุช ุงูุชุญููู</strong> .  ูุฐุง ูู ุฃูุซุฑ ุฃููุงุน ุงููุญุฏุงุช ุบูุฑ ุงูููุชููุฉ ุ ุญูุซ ูุง ูุชู ุชุทููุฑูุง ูุซูุฑูุง.  ูุซุงู ุนูู ุฐูู ูู ูุญุฏุฉ Ketama CHash ุ ุงูุชู ุชุชูุญ ูู ุฅุฌุฑุงุก ุชุฌุฒุฆุฉ ูุชูุงุณูุฉ ุฏุงุฎู nginx ูุชูุฒูุน ุงูุทูุจุงุช ุนูู ุงููุงุฌูุงุช ุงูุฎูููุฉ. </li></ul><br>  ุณุฃููู ุนู ูู ูู ูุฐู ุงูุฃููุงุน ูุงูุบุฑุถ ูููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุนุงูุฌุงุช ุงููุฑุญูุฉ </h3><br>  ุชุฎูู ุฃู ูุฏููุง ุนุฏุฉ ูุฑุงุญู ุ ุจุฏุกูุง ูู ูุฑุญูุฉ ุงููุตูู.  ููุงู ุนุฏุฉ ูุญุฏุงุช ูู ูู ูุฑุญูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชููุณู ูุฑุญูุฉ ACCESS ุฅูู ุงุชุตุงู ุ ูุทูุจ ุฅูู nginx ุ ูุงูุชุญูู ูู ุชุฑุฎูุต ุงููุณุชุฎุฏู.  ูู ูุญุฏุฉ ูู ุฎููุฉ ูู ุงูุณูุณูุฉ.  ูููู ุฃู ูููู ููุงู ุนุฏุฏ ูุง ุญุตุฑ ูู ูู ูุฐู ุงููุญุฏุงุช ูู ุงููุฑุญูุฉ. <br><br><img src="https://habrastorage.org/webt/pn/6b/t9/pn6bt9m3khwxmsxgnqjvyzwfcb0.jpeg"><br><br>  ุขุฎุฑ ูุนุงูุฌ ููุงุฆู ูู ูุฑุญูุฉ ุงููุญุชูู ุงูุฐู ูุชู ููู ุชุณููู ุงููุญุชูู ุนูุฏ ุงูุทูุจ. <br><blockquote style=";text-align:right;direction:rtl">  ุงูุทุฑููุฉ ุฏุงุฆููุง ูู: ุทูุจ - ุณูุณูุฉ ูู ุงููุนุงูุฌุงุช - ุฅุฎุฑุงุฌ ุงููุญุชูู. </blockquote>  ุงููุฑุงุญู ุงููุชุงุญุฉ ููุทูุฑู ุงููุญุฏุงุช ุงูููุทูุฉ ูู <a href="https://github.com/nginx/nginx/blob/master/src/http/ngx_">ูุตุงุฏุฑ NGINX</a> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> { NGX_HTTP_POST_READ_PHASE = <span class="hljs-number"><span class="hljs-number">0</span></span>, NGX_HTTP_SERVER_REWRITE_PHASE, NGX_HTTP_FIND_CONFIG_PHASE, NGX_HTTP_REWRITE_PHASE, NGX_HTTP_POST_REWRITE_PHASE, NGX_HTTP_PREACCESS_PHASE, NGX_HTTP_ACESS_PHASE, NGX_HTTP_POST_ACESS_PHASE, NGX_HTTP_PRECONTENT_PHASE, NGX_HTTP_CONTENT_PHASE, NGX_HTTP_LOG_PHASE, } ngx_http_phases;</code> </pre> <br>  ูููู ุงููุชุงุจุฉ ููู ุงููุฑุงุญู ุ ุฃุถู ูุนุงูุฌู ุงูุฎุงุต.  ููุณุช ููุงู ุญุงุฌุฉ ุฅูู ูู ูููู ูู ุงูุญูุงุฉ ุงูุญููููุฉ ุ ุฅุฐุง ูู ุชูู ูุทูุฑ ูุจ nginx core.  ูุฐูู ุ ูู ุฃุชุญุฏุซ ุนู ูู ูุฑุญูุฉ ุ ูููู ููุท ุนู ุงููุฑุญูุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุงุณุชุฎุฏูุชูุง. <br><br>  <strong>ุงูุนูุตุฑ</strong> ุงูุฑุฆูุณู ูู <strong>ACCESS_PHASE.</strong>  ูู ุงููููุฏ ุจุดูู ุฎุงุต ุฅุถุงูุฉ ุชูููุถู ุฅูู nginx - ููุชุญูู ูู ุชูููุฐ ุงูุทูุจ ูู ุญูุซ ุงููุตูู. <br><br>  ุงููุฑุงุญู ุงููููุฉ ุงูุชุงููุฉ ุงูุชู ุฃุณุชุบููุง ุบุงูุจูุง ูู ูุฑุงุญู ุงูุณููู ูุงููุญุชูู.  ูุณูุญ <strong>ูู PRECONTENT_PHASE</strong> ุจุฌูุน ููุงููุณ ุญูู ุงููุญุชูู ุนูู ูุดู ุฅุฑุณุงููุง ูุฑุฏ ุนูู ุงูุนููู.  ูุชูุญ <strong>ูู CONTENT_PHASE</strong> ุฅูุดุงุก ูุญุชูู ูุฑูุฏ ุฎุงุต ุจู ุงุณุชูุงุฏูุง ุฅูู ุดูุก ูุง. <br><br>  ุงููุฑุญูุฉ ุงูุฃุฎูุฑุฉ ุงูุชู <strong>ุฃุณุชุฎุฏููุง</strong> ุบุงูุจูุง ูู ูุฑุญูุฉ ุงูุชุณุฌูู <strong>LOG_PHASE.</strong>  ุจุงูููุงุณุจุฉ ุ ุงูุชูุฌูู ACCESS_LOG ูุนูู ููู.  ุชุชุถูู ูุฑุญูุฉ ุงูุชุณุฌูู ุฃุดุฏ ุงููููุฏ ุงูุชู ุชุฏูุนูู ุฅูู ุงูุฌููู: ูุง ููููู ุงุณุชุฎุฏุงู ุทูุจ ูุฑุนู ูุนููููุง ูุง ููููู ุงุณุชุฎุฏุงู ุฃู ุทูุจ.  ููุฏ ุชุฑูุช ุงููุญุชูู ูููุณุชุฎุฏู ุจุงููุนู ุ ููู ูุชู ุชูููุฐ ุฃู ูุนุงูุฌุงุช ุ ุฃู ูุนูููู ุ ูุฃู ุทูุจ ูุฑุนู. <br><br>  ุณุงูุถุญ ููุงุฐุง ูู ูุฒุนุฌ.  ุฏุนูุง ูููู ุนูุฏูุง ุชุฑูุฏ ุนุจูุฑ nginx ู Kafka ูู ูุฑุญูุฉ ุงูุชุณุฌูู.  ูู ูุฐู ุงููุฑุญูุฉ ุ ุชู ุฅููุงู ูู ุดูุก ุจุงููุนู: ููุงู ุญุฌู ูุญุณูุจ ูููุญุชูู ูุงูุญุงูุฉ ูุฌููุน ุงูุจูุงูุงุช ุ ููู ูุง ููููู ุงูููุงู ุจุฐูู.  ุงููู ูุง ูุนูููู ููุงู.  ุนููู ุฃู ุชูุชุจ ุนูู ูุขุฎุฐ ุนุงุฑูุฉ ูู ูุฑุญูุฉ ุงูุชุณุฌูู ูุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ูุงููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุดุญุงุช ุงูุฌุณู / ุงูุฑุคูุณ </h3><br>  ููุงู ููุนุงู ูู ุงููุฑุดุญุงุช: ูุฑุดุญุงุช ุงูุฌุณู ููุฑุดุญุงุช ุงูุฑุคูุณ. <br><br>  ูุซุงู ุนูู <strong>ูุฑุดุญ ุงูุฌุณู</strong> ูู ูุญุฏุฉ ูุฑุดุญ gzip.  ููุงุฐุง ูู ูุฑุดุญุงุช ุงูุฌุณู ุงููุงุฒูุฉุ  ุชุฎูู ุฃู ูุฏูู ูููููุง ูุนูููุง ุ ูุชุฑูุฏ ุชุญููู ุงููุญุชูู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุฃู ุชุญูููู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ูุฑุดุญ ุงูุฌุณู. <br><br>  ุฅูู ูุนูู ูุงูุชุงูู: ุชุฃุชูู ุงูุนุฏูุฏ ูู ุงููุทุน ุ ูุชูุนู ุดูุฆูุง ูุง ุจูุง ุ ูุชููู ูุธุฑุฉ ุนูู ุงููุญุชููุงุช ุ ูุชุฌููุนูุง ุ ุฅูุฎ.  ููู ูุฑุดุญ ูุฏูู ุฃูุถุง ูููุฏ ูุจูุฑุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุฑุฑุช ุชุบููุฑ ุงููุต ุงูุฃุณุงุณู - ูุฅุฏุฑุงุฌ ูุต ุงูุงุณุชุฌุงุจุฉ ุฃู ูุตู ุ ุชุฐูุฑ ุฃูู ุณูุชู ุงุณุชุจุฏุงู ุณูุงุช HTTP ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุฌุฒ ููุจ ูููุญุชูู.  ูููู ุฃู ูุคุฏู ุฐูู ุฅูู ุชุฃุซูุฑุงุช ุบุฑูุจุฉ ุฅุฐุง ูู ุชูู ุจุชุทุจูู ุงููููุฏ ูุชุนูุณ ุจุดูู ุตุญูุญ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู. <br><br>  ูุซุงู ุนูู <strong>ูุฑุดุญ ุงูุฑุฃุณ</strong> ูู add_header ุงูุฐู ุงุณุชุฎุฏูู ุงูุฌููุน.  ุงูุฎูุงุฑุฒููุฉ ุชุนูู ููุง ูู ุงูุญุงู ูู ูุฑุดุญ ุงูุฌุณู.  ูุชู ุฅุนุฏุงุฏ ุงุณุชุฌุงุจุฉ ููุนููู ุ ููุณูุญ ูู ุนุงูู ุงูุชุตููุฉ add_header ุจุงูููุงู ุจุดูุก ูุง ููุงู: ุฅุถุงูุฉ ุฑุฃุณ ุ ุญุฐู ุฑุฃุณ ุ ุงุณุชุจุฏุงู ุฑุฃุณ ุ ุฅุฑุณุงู ุทูุจ ูุฑุนู. <br><br>  ุจุงูููุงุณุจุฉ ุ ูู ุชุตููุฉ ุงููุต ุงูุฃุณุงุณู ููู ุทูุจุงุช ุงูุชุฑุดูุญ ุงููุฑุนูุฉ ุงููุชุงุญุฉ ูู ุฑุฃุณ ุงูุตูุญุฉ ุ ููููู ุฅุฑุณุงู ุงูุชุนุฑููุงุช ุงูุฏุงุฎููุฉ ุฅูู ูููุน ุฅุถุงูู ููุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููููู </h3><br>  ูุฐุง ูู ุฃูุซุฑ ุฃููุงุน ุงููุญุฏุงุช ุงูููุทูุฉ ุชุนููุฏูุง ูุฅุซุงุฑุฉ ููุฌุฏู ุงูุชู ุชุณูุญ ูู ุจุฅุฑุณุงู ุทูุจุงุช ูููู ุฅูู ุฃูุธูุฉ ุฎุงุฑุฌูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ <strong>ุชุญููู HTTP ุฅูู ุจุฑูุชูููู ุขุฎุฑ</strong> .  ุฃูุซูุฉ: proxy_pass ุ redis_pass ุ tnt_pass. <br><br>  Proxy ูู ูุงุฌูุฉ ุงูุชุฑุญูุง ูุทูุฑู nginx ุงูุฃุณุงุณููู ูุฌุนู ูุชุงุจุฉ ูุญุฏุงุช ุงููููู ุฃุณูู.  ุฅุฐุง ุชู ุฐูู ุจุงูุทุฑููุฉ ุงูููุงุณูููุฉ ุ ูุณูุชู ุชูููุฐ ูุนุงูุฌุงุช PHASES ุงูุจุฏููุฉ ูุฐู ุ ุงููุฑุดุญุงุช ุ ุงูููุงุฒูุงุช.  ููุน ุฐูู ุ ุฅุฐุง ูุงู ุงูุจุฑูุชูููู ุงูุฐู ุชุฑูุฏ ุชุญููู HTTP ุฅููู ูุฎุชูููุง ุชูุงููุง ุนู ุงูููุงุณูููุงุช ุ ูุณุชุจุฏุฃ ุงููุดุงูู ุงููุจูุฑุฉ.  ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงููููู ุงูุชู ููุฏููุง nginx ูู ุจุจุณุงุทุฉ ุบูุฑ ููุงุณุจุฉ - ูุฌุจ ุนููู ุงุฎุชุฑุงุน ูุญุฏุฉ ุงููููู ูุฐู ูู ุงูุจุฏุงูุฉ. <br><br>  ูุซุงู ุฌูุฏ ุนูู ูุฐู ุงููุญุฏุฉ ูู postgres_pass.  ูุฃููุง ุชุชูุญ nginx ุงูุชูุงุตู ูุน ุจูุณุชุฌุฑุณ.  ูุง ุชุณุชุฎุฏู ุงููุญุฏุฉ ุงูููุทูุฉ ุงููุงุฌูุฉ ุงูุชู ุชู ุชุทููุฑูุง ูู nginx ุนูู ุงูุฅุทูุงู - ููุง ูุณุงุฑูุง ุงูุฎุงุต. <br><blockquote style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุงููููู ุ ูููู ูู ุงูุฃูุถู ุนุฏู ุงููุชุงุจุฉ.  ููุชุงุจุฉ ุงูุจุฑููุณู ุ ูุฌุจ ุฃู ุชุชุนูู ูููุฉ nginx ุนู ุธูุฑ ููุจ - ุฅููุง ุทูููุฉ ูุตุนุจุฉ ููุบุงูุฉ. </blockquote><br><h3 style=";text-align:right;direction:rtl">  ุชุญููู ููุงุฒูุงุช </h3><br>  ูููุฉ ููุงุฒูุงุช ุงูุชุญููู ุจุณูุทุฉ ููุบุงูุฉ - ููุนูู ูู ูุถุน ุฌููุฉ ุฑูุจู.  ุชุฎูู ุฃู ูุฏูู ูุณููุง ุฃููููุง ุ ุจุนุถ ุงูุฎูุงุฏู ููู ุ ุชุญุฏุฏ ุงูุฃูุฒุงู ูุทุฑู ุงูููุงุฒูุฉ.  ูุฐุง ูู ููุงุฒู ุงูุชุญููู ุงููููุฐุฌู. <br><br>  ูุฐุง ุงููุถุน ุบูุฑ ููุงุณุจ ุฏุงุฆููุง.  ูุฐูู ุ ุชู ุชุทููุฑ ูุญุฏุฉ Ketama CHash ุ ุญูุซ ูููู ูู ุงููููู ูุดุฑูุทูุง ุงููุตูู ุฅูู ุทูุจ ุชุฌุฒุฆุฉ ุซุงุจุช ูุจุนุถ ุงูุฎูุงุฏู.  ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ูุฑูุญุฉ.  ููุฏู Nginx Lua balancer_by_lua.  ุนูู Lua ุ ููููู ูุชุงุจุฉ ุฃู ููุงุฒู ุจุดูู ุนุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุญุฏุงุช C </h2><br>  ุงููุงุฏู ุณูููู ุฑุฃูู ุดุฎุตู ุชูุงูุง ุนูู ุชุทููุฑ C- ูุญุฏุงุช.  ูุชุจุฏุฃ - ููุงุนุฏู ุงูุฐุงุชูุฉ. <br><br>  <strong>ุชุจุฏุฃ ุงููุญุฏุฉ ุงูููุทูุฉ ุจุชูุฌููุงุช nginx.conf.</strong>  ุญุชู ูู ููุช ุชููู ุจุชุตููุน ูุญุฏุฉ C ูู ูุชู ุชุดุบูููุง ุฅูุง ูู ููุจู ุดุฑูุชู ุ ููุฑ ุฏุงุฆููุง ูู ุงูุชูุฌููุงุช.  ุงุจุฏุฃ ูู ุชุตููู ุงููุญุฏุฉ ูุนูู ุ ูุฃู ูุฐุง ูู ูุง ุณูุชูุงุตู ูุนู ูุณุคูู ุงููุธุงู.  ูุฐุง ููู - ูู ุจุชูุณูู ุฌููุน ุงููุฑูู ุงูุฏูููุฉ ูุนู ุฃู ูุน ุงูุดุฎุต ุงูุฐู ุณูููู ุจุชุดุบูู ูุญุฏุฉ C ุงูุฎุงุตุฉ ุจู.  ุฅู NGINX ููุชุฌ ูุนุฑูู ุ ูุชุทูุน ุชูุฌููุงุชู ููุงููู ูุนููุฉ ูุนุฑููุง ูุณุคููู ุงููุธุงู.  ูุฐูู ุ ููุฑ ุฏุงุฆููุง ูู ุงูุฃูุฑ. <br><br>  <strong>ุงุณุชุฎุฏุงู ููุท ุฑูุฒ nginx.</strong>  ุชุฎูู ุฃู ุงููุญุฏุฉ ุงูุฎุงุตุฉ ุจู ุณูุชู ุฏุนููุง ูู ูุจู ุดุฎุต ุขุฎุฑ.  ุฅุฐุง ูุงู ุจุงููุนู ุนูู ุฏุฑุงูุฉ ุจู nginx ูููุท ุงูููุฏ ุงูุฎุงุต ุจู ุ ูุณูููู ูู ุงูุฃุณูู ุนููู ูุฑุงุกุฉ ูููู ุงูููุฏ. <br><br>  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุทูุจ ููู ุตุฏูู ุฌูุฏ ูู ุฃููุงููุง ูุณุงุนุฏุชู ูู ุงูุชุนุงูู ูุน ุฎูู ุฏุงุฎู ููุฏ nginx ุงูุฎุงุต ุจู.  ูุง ุฃุนุฑู ุนู ููุท ุงูุดูุฑุฉ ุงูุฐู ูุชุจู ุ ููููู ูู ุฃุณุชุทุน ุญุชู ูุฑุงุกุฉ ุงูููุฏ ุจุดูู ุทุจูุนู. <br><br>  <strong>ุงุณุชุฎุฏุงู ุชุฌูุน ุงูุฐุงูุฑุฉ ุงูุตุญูุญ.</strong>  ุงุญุฑุต ุฏุงุฆููุง ุนูู ูุถุน ุฐูู ูู ุงูุงุนุชุจุงุฑ ุ ุญุชู ูู ูุงู ูุฏูู ุงููุซูุฑ ูู ุงูุฎุจุฑุฉ ูุน nginx.  ุฎุทุฃ ูููุฐุฌู ููุทูุฑ ูุญุฏุฉ C ูุจุชุฏุฆ ูู nginx ูู ุงูุญุตูู ุนูู ูุฌููุนุฉ ุฎุงุทุฆุฉ. <br><br>  ุฎูููุฉ ุตุบูุฑุฉ: ูุณุชุฎุฏู nginx ุนููููุง ุฃูุฏููููุฌูุฉ ุงูููุฎุตุตูู ุงูุถุนูุงุก.  ููููู ุงุณุชุฎุฏุงู malloc ููุงู ุ ูููู ุบูุฑ ูุณุชุญุณู.  ูุฏูู ุฃููุงุญ ุฎุงุตุฉ ุจู ุ ูุฎุตุต ุงูุฐุงูุฑุฉ ุงูุฎุงุตุฉ ุจู ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงูู.  ููููุง ูุฐูู ุ ูุญุชูู ูู ูุงุฆู ุนูู ุฑุงุจุท ุฅูู ุงูุชุฌูุน ุงูุฎุงุต ุจู ุ ููุฌุจ ุงุณุชุฎุฏุงู ูุฐุง ุงูุชุฌูุน.  ูุชูุซู ุงูุฎุทุฃ ุงููุจุชุฏุฆ ุงููููุฐุฌู ูู ุงุณุชุฎุฏุงู ุงุชุตุงู ุชุฌูุน ูู ุนุงูู ุชุตููุฉ ุงูุฑุฃุณ ุ ูููุณ ุทูุจ ุชุฌูุน.  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ูุงู ูุฏููุง ุงุชุตุงู ูุณุชูุฑ ุ ูุณูู ููุชูุฎ ุงููุณุจุญ ุญุชู ููุงุฏ ุงูุฐุงูุฑุฉ ุฃู ุชุญุฏุซ ุขุซุงุฑ ุฌุงูุจูุฉ ุฃุฎุฑู.  ูุฐูู ุ ูู ุงูููู. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูุตุนุจ ููุบุงูุฉ ุธููุฑ ูุซู ูุฐู ุงูุฃุฎุทุงุก.  Valgrind ("ุณูููู syshniks") ูุง ูุนูู ูุน ุชุฎุตูุต ููุญ - ุณูุธูุฑ ุตูุฑุฉ ุบุฑูุจุฉ. <br><br>  <strong>ูุง ุชุณุชุฎุฏู ุญุธุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ</strong>  ุฎุทุฃ ูููุฐุฌู ูุฃููุฆู ุงูุฐูู ูุฑุบุจูู ูู ุชุทุจูู ุดูุก ุฎุงุฑุฌู ุฃุณุฑุน ูู ุงุณุชุฎุฏุงู ุญุธุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุญุธุฑ ุงูููุงุจุณ.  ูุง ููููู ุงูููุงู ุจุฐูู ุฃุจุฏูุง ูู nginx - ูููุงู ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ุ ููู ูู ุนูููุฉ ุชุณุชุฎุฏู ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ. <br><br>  ููููู ุนูู ุฎููุท ูุชุนุฏุฏุฉ ุ ูููู ููุงุนุฏุฉ ุนุงูุฉ ุ ูุฐุง ูุฒูุฏ ุงูุฃูุฑ ุณูุกูุง.  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุญุธุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูู ูุซู ูุฐู ุงูุจููุฉ ุ ูุณูููู ุงูุฌููุน ูู ุงูุชุธุงุฑ ูุทุนุฉ ุงูุญุธุฑ ูุฐู. <br><br>  ุณูู ูู ูุง ููุชู ุฃุนูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ุงููุญุฏุฉ ุงูููุทูุฉ ุจุชูุฌููุงุช nginx.conf </h3><blockquote style=";text-align:right;direction:rtl">  ุญุฏุฏ ุงูุตููู ุงูุฐู ูุฌุจ ุฃู ุชุนูุดู ุงูุชูุฌููุงุช: ุฑุฆูุณู ุ ุฎุงุฏู ุ HTTP ุ ูููุน ุ ูููุน ุฅุฐุง. </blockquote>  ุญุงูู ุชุฌูุจ ุงููููุน ุฅุฐุง - ููุงุนุฏุฉ ุนุงูุฉ ุ ูุคุฏู ุฐูู ุฅูู ุงุณุชุฎุฏุงู ุบุฑูุจ ููุบุงูุฉ ูุชูููู nginx. <br><br>  ุฌููุน ุงูุชูุฌููุงุช ูู nginx ุชุนูุด ูู ุณูุงูุงุช ูุฎุชููุฉ ููู ูุทุงูุงุช ูุฎุชููุฉ.  ูููู ุฃู ูุนูู ุชูุฌูู add_header ุนูู ูุณุชูู HTTP ูุนูู ูุณุชูู ุงููููุน ูุนูู ูุณุชูู ุงููููุน ุฅุฐุง.  ูุนุงุฏุฉ ูุง ููุตู ูุฐุง ูู ุงููุซุงุฆู. <br><blockquote style=";text-align:right;direction:rtl">  ููู ุนูู ุฃู ุงููุณุชููุงุช ูููู ุฃู ูุนูู ุงูุชูุฌูู ุงูุฎุงุต ุจู ุ ุญูุซ ูุชู ุชูููุฐ ุงูุชูุฌูู: PHASE Handler ุ ูุฑุดุญ ุงูุฌุณู / ุงูุฑุฃุณ. </blockquote>  ูุฐุง ููู ูุฃูู ูู nginx ูุชู ุชุฌููุฏ ุงูุชูููู.  ุญุณุจ ุงูุงุตุทูุงุญ ุ ุนูุฏูุง ุชูุชุจ add_header ูู ููุงู ูุง ุฃุนูุงู ุ ูุชู ุชูุนูู ูุฐู ุงููููุฉ ูู add_header ุงูุณูููุฉ ุ ูุงูุชู ูุฏูู ุจุงููุนู ูู ุงููููุน.  ูููุง ูุฐูู ุ ุณูู ุชุถูู ุฑุฃุณูู.  ููุฐุง ููุทุจู ุนูู ุฃู ุชูุฌูู. <br><br>  ุฅุฐุง ููุช ุจุชุญุฏูุฏ ูููุฐ ูุถูู ูุง ุ ููู ุจุงูุนูุณ - ูุฌููุนุฉ ูุขุฎุฐ ุงูุชูุตูู.  ูุฌุจ ุงูุฅุดุงุฑุฉ ุฅูู ูุฐุง ูุฑุฉ ูุงุญุฏุฉ. <br><br>  ุจุดูู ุนุงู ุ ุฃูุฏ ููุน ุฃู ุฏูุฌ - ุฃูุช ููุท ูุง ุชุญุชุงุฌ ุฅูููุง.  ูุฐูู ุ ูุฌุจ ุฃู ุชุญุฏุฏ ุฏุงุฆููุง ุจูุถูุญ ุตูููุงุช nginx ูู ุงูุชูููู ุงูุฐู ุชุนูุด ููู ุงูุชูุฌููุงุช ุฃู ูุฌููุนุฉ ุงูุชูุฌููุงุช. <br><br>  ูุซุงู ุฌูุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">location /my_location/ { add_header โMy-Headerโ โmy valueโ; }</code> </pre> <br>  ููุง ูุชู ุฅุถุงูุฉ add_header ุจุจุณุงุทุฉ ุฅูู ุงููููุน.  ูููู ุฃู ูููู add_header ููุณู ูู ููุงู ูุง ุฃุนูุงู ุ ูุณูุชู ุชูููุซ ูู ุดูุก ุจูู ุจุณุงุทุฉ.  ูุฐุง ูู ุณููู ููุซู ูููููู. <br><blockquote style=";text-align:right;direction:rtl">  ููุฑ ูููุง ูุฏ ูุนูู ุชูููุฐ ุงูุชูุฌูู. </blockquote>  ุชุฎูู ุฃูู ุชููู ุจุชุทููุฑ ูุฑุดุญ ุงูุฌุณู.  ููุง ููุช ุฃุนูุงู ุ ูุถุน nginx ุงููุญุฏุฉ ุงูููุทูุฉ ุงูุฎุงุตุฉ ุจู ูู ุณูุณูุฉ ูุดุชุฑูุฉ ุ ูููุณ ูุฏูู ุฃู ุถูุงู ุจุฃู ูุญุฏุฉ gzip ูู ุชุฏุฎู ุงูุณูุณูุฉ ุฃูุงู ูุฑุดุญ ุฌุณูู ูู ููุช ุงูุชุฑุฌูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุฅุฐุง ูุงู ุดุฎุต ูุง ุจุชุดุบูู ูุญุฏุฉ gzip ุ ูุณูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ูุญุฏุชู ูู ุฃุฌู gzip.  ูุฐุง ููุฏุฏ ุจุฃูู ูุง ููููู ูุนู ุฃู ุดูุก ุจุงููุญุชูู.  ููููู ุฅุนุงุฏุฉ gzip ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ูุฐุง ุชููู ูู ูุฌูุฉ ูุธุฑ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. <br><br>  ุชูุทุจู ููุณ ุงูููุงุนุฏ ุนูู ุฌููุน ูุนุงูุฌุงุช ุงููุฑุญูุฉ - ูุง ููุฌุฏ ุฃู ุถูุงู ูู ุณูุชู ุงุณุชุฏุนุงุคู ูู ูุจู ููู ุจุนุฏู.  ูุฐูู ุ ุงุญุชุฑู ุงูุดุฎุต ุงูุฐู ุณูุชู ุงุณุชุฏุนุงุคู ุ ูุชุฐูุฑ ุฃู ุจุนุถ gzip ุฃู ุฃู ุดูุก ุขุฎุฑ ูุฏ ูุทูุฑ ุฅููู ุจุดูู ุบูุฑ ูุชููุน. <br><br><h3 style=";text-align:right;direction:rtl">  ููุท ุฑูุฒ Nginx </h3><br><blockquote style=";text-align:right;direction:rtl">  ุนูุฏ ุฅูุดุงุก ุงูููุชุฌ ุ ุชุฐูุฑ ุฃู ุดุฎุตูุง ูุง ุณูู ูุฏุนูู.  ูุง ุชูุณู ุนู ุฑูุฒ ููุท nginx. </blockquote>  ูุจู ูุชุงุจุฉ ุงููุญุฏุฉ ุงูููุทูุฉ nginx ุ ุชุนุฑู ุนูู ุงููุตุฏุฑ: <a href="">ุงูุฃูู</a> <a href="">ูุงูุซุงูู</a> . <br><br>  ุฅุฐุง ููุช ุชุชูุงูู ุชุทููุฑ ูุญุฏุงุช nginx ูู ุงููุณุชูุจู ุ ูุณุชููู ูุฏุฑููุง ุฌูุฏูุง ููุตุงุฏุฑ nginx.  ุณูู ุชุญุจูู ูุฃูู ูุง <strong>ููุฌุฏ ูุซุงุฆู</strong> .  ุณูู ุชุชุนูู ุจููุฉ ุฏููู nginx ุฌูุฏูุง ุ ูุชุนูู ุงุณุชุฎุฏุงู Grep ุ ูุฑุจูุง Sed ุ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ููู ุจุนุถ ุงููุทุน ูู nginx ุฅูู ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุฎุงุตุฉ ุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฌูุน ุงูุฐุงูุฑุฉ </h3><br>  ูุฌุจ ุงุณุชุฎุฏุงู ุงูุชุฌูุนุงุช ุจุดูู ุตุญูุญ.  <strong>ุนูู ุณุจูู ุงููุซุงู ุ "r-&gt; connection-&gt; pool! = R-&gt; pool".</strong>  ูุง ููููู ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ุงุณุชุฎุฏุงู ุชูููู ุชุฌูุน ุงูุฐุงูุฑุฉ ุนูุฏ ูุนุงูุฌุฉ ุงูุทูุจุงุช ุ ูุณูู ุชูุชูุฎ ุญุชู ุชุชู ุฅุนุงุฏุฉ ุชุดุบูู nginx. <br><br>  ููู ุนูุฑ ุงููุงุฆู.  ูููุชุฑุถ ุฃู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุทูุจ ููุง ุจุงูุถุจุท ุนูุฑ ุฎุท ุงูุฃูุงุจูุจ ูุฐุง.  ูู ูุฐุง ุงููุฌูุน ุ ููููู ูุถุน ุงููุซูุฑ ูู ุงูุฃุดูุงุก ูุฅูุณุงุญ ุงููุฌุงู.  ูููู ุฃู ูุนูุด ุงูุงุชุตุงู ูุธุฑููุง ุฅูู ุฃุฌู ุบูุฑ ูุณูู - ูู ุงูุฃูุถู ูุถุน ุดูุก ููู ุญููุง ููู. <br><br>  <strong>ุญุงูู ุฃูุง ุชุณุชุฎุฏู ุฃุฏูุงุช ุชุฎุตูุต ุฎุงุฑุฌูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ malloc / free</strong> .  ูุฐุง ูู ุชุฃุซูุฑ ุณูุก ุนูู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉ.  ุฅุฐุง ููุช ุชุนูู ูุน ูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ูุชุณุชุฎุฏู ุงููุซูุฑ ูู malloc ุ ูุฅู nginx ูุจุทุฆ ุจุดูู ุฌูุฏ. <br><br>  <strong>ููุญุจู Valgrind ููุงู</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ุงุฎุชุฑุงู</strong></a> ูุณูุญ ูู ุจุชุตุญูุญ ุชุฌูุนุงุช nginx ุจุงุณุชุฎุฏุงู Valgrind.  ูุฐุง ููู ุฅุฐุง ูุงู ูุฏูู ุงููุซูุฑ ูู ููุฏ C ุนูู nginx ุ ูุฃูู ุญุชู ูุทูุฑ ูุชูุฑุณ ูู ุงูุนูู ูุน ุงูุฐุงูุฑุฉ ูููู ุฃู ูุฑุชูุจ ุฎุทุฃ. <br><br><h3 style=";text-align:right;direction:rtl">  ุญุธุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ </h3><blockquote style=";text-align:right;direction:rtl">  ูู ุดูุก ุจุณูุท ููุง - ูุง ุชุณุชุฎุฏู ุญุธุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ. </blockquote>  ูุฅูุง ุ ูุณุชููู ููุงู ุนูู ุงูุฃูู ูุดููุงุช ูู ุงูุงุชุตุงูุงุช ุงููุจุงุดุฑุฉ ุ ูููู ูุญุฏ ุฃูุตู ุ ุณูุนูู ูู ุดูุก ููุชุฑุฉ ุทูููุฉ ุฌุฏูุง. <br><br>  ุฃุนุฑู ุงูุญุงูุฉ ุนูุฏูุง ุงุณุชุฎุฏู ุดุฎุต Quora ุฏุงุฎู nginx ูู ูุถุน ุงูุญุธุฑ (ูุง ุชุณุฃู ุนู ุงูุณุจุจ).  ุฃุฏู ูุฐุง ุฅูู ุญูููุฉ ุฃู ุงูุงุชุตุงูุงุช ุงููุญุงูุธุฉ ุนูู ุงูุญูุงุฉ ุชุฎูุช ุนู ูุดุงุทูุง ูุงููุถุช ูููุชูุง ุทูุงู ุงูููุช.  ูู ุงูุฃูุถู ุนุฏู ุงูููุงู ุจุฐูู - ูู ุดูุก ุณูู ูุนูู ููุชุฑุฉ ุทูููุฉ ุ ุบูุฑ ููุก ูุณูุชุนูู ุนููู ุนูู ุงูููุฑ ุชุญุฑูู ููููู ูููุฉ ุ ูุฃู nginx ุณูุจุฏุฃ ูููุฉ ูู ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก. <br><br>  ูููู ููุงู ุจุฏูู ููุญุฏุงุช C - NJS ูููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุง ุชุญุชุงุฌ ุฅูู ุชุทููุฑ C- ูุญุฏุงุช </h2><br>  ูุฐู ุงูุณูุฉ ูุงูุช ูุฏู ุฃูู ุชุฌุฑุจุฉ ูู ุงูุนูู ุนูู NJS ุ ููุฏู ุงูุทุจุงุน ุดุฎุตู ุนู ุฐูู ุ ูุฃุฏุฑูุช ุญุชู ูุง ูุงู ููููุฏูุง ุ ุจุญูุซ ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู.  ุฃูุฏ ุฃูุถูุง ุฃู ุฃุชุญุฏุซ ุนู ุชุฌุฑุจุชู ูู ุงูุนูู ูุน Lua ุถูู nginx ุ ุนูุงูุฉ ุนูู ุฐูู ุ ูุดุงุฑูุฉ ุงููุดุงูู ุงูููุฌูุฏุฉ ูู Lua. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃุณุงุณูุงุช Lua / LuaJit </h3><br>  Nginx ูุง ูุณุชุฎุฏู Lua ุ ููู LuaJit.  ูููู ูุฐุง ููุณ ููุง ุ ูุฃู ููุง ูุฏ ุทูุฑุช ุจุงููุนู ูุณุฎุชูู ุ ู LuaJit ุนุงูู ูู ููุงู ูุง ูู ุงููุงุถู.  <strong>ุงููุคูู ุนูููุง ูุง ูุทูุฑ LuaJit - ูุนูุด ูู ุงูุบุงูุจ ูู ุงูุดูู.</strong>  ุงูุดููุฉ ุงูุฃูุซุฑ ุญุฏุงุซุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LuaJit2</a> .  ูุฐุง ูุถูู ููุงูู ุบุฑูุจุฉ ูู ููุณ OpenResty. <br><br>  <strong>ุฌุงูุน ุงูููุงูุฉ ูุญุชุงุฌ ุฅูู ุนูุงูุฉ</strong> .  ูุง ุชุณุชุทูุน LuaJit ุงูุชุบูุจ ุนูู ูุฐู ุงููุดููุฉ - ูุง ุนููู ุณูู ุงูุฎุฑูุฌ ุจุจุนุถ ุงูุญููู.  ูุน ูุฌูุฏ ุญูููุฉ ุถุฎูุฉ ุ ุนูุฏูุง ูููู ููุงู ุงููุซูุฑ ูู ุนูููุงุช ุฌูุน ุงูุจูุงูุงุช ุงูููููุฉ ุงูุชู ูุชู ุงูุงุญุชูุงุธ ุจูุง ูุฑุฆูุฉ ุนูู ุงูุนููู ูุน ูุฌูุฏ ุฃุฎุทุงุก ูู ุงููุฎุทุท ูุงูุฃุฎุทุงุก 500. ููุงู ุงูุนุฏูุฏ ูู ุงูุทุฑู ููุชุนุงูู ูุน ุฃุฏุงุฉ ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ูู Lua ุ ูู ุฃุฑูุฒ ุนูููุง ููุง.  ููุงู ุงููุซูุฑ ูู ุงููุนูููุงุช ุญูู ูุฐุง ุงูุฃูุฑ ุนูู ุงูุฅูุชุฑูุช. <br><br>  <strong>ุชูููุฐ ุณูุณูุฉ ูุคุฏู ุฅูู ูุดุงูู ุงูุฃุฏุงุก</strong> .  ูุฐุง ูู ูุฌุฑุฏ ุดุฑ LuaJit ุ ููู ููุง ุชู ุฅุตูุงุญู.  ุชูููุฐ ุงูุณูุงุณู ูู LuaJit ูุชุญุฏู ุจุจุณุงุทุฉ ุฃู ููุทู.  ุชุจุทุฆ ุงูุฎุทูุท ูู ุฃุนูู ุงูุทุฑู ุ ูุงูุชู ุชุฑุชุจุท ุจุงูุชูููุฐ ุงูุฏุงุฎูู. <br><br>  <strong>ุนุฏู ุงููุฏุฑุฉ ุนูู ุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ุงูููุชุจุงุช ุงูุฌุงูุฒุฉ</strong> .  ูุชู ุญุธุฑ Lua ูู ุงูุจุฏุงูุฉ ุ ูุฐุง ุชุณุชุฎุฏู ูุนุธู ุงูููุชุจุงุช ูู Lua ู LuaJit ุญุธุฑ I / O.  ุจุณุจุจ ุนุฏู ุญุธุฑ nginx ุ ูู ุงููุณุชุญูู ุงุณุชุฎุฏุงู ููุชุจุงุช ุฌุงูุฒุฉ ุฏุงุฎู nginx ุชุณุชุฎุฏู ุฃู ุญุธุฑ ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ.  ูุฐุง ุณูู ุชุจุทุฆ nginx. <br><br>  ุชุชุดุงุจู ุฃุณุจุงุจ ุงุณุชุฎุฏุงู LuaJit ูุน ุฃุณุจุงุจ ุงุณุชุฎุฏุงู ุงููุญุฏุงุช ุงูููุทูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงุฐุฌ ูู ูุญุฏุงุช ูุนูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ุญุณุงุจุงุช HMAC ุ SHA ููุชุฑุงุฎูุต ุ </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุฒูู</a> </li><li style=";text-align:right;direction:rtl">  ุงูุชุทุจููุงุช ุงูุตุบูุฑุฉ: ูุนุงูุฌุงุช ุงูุฑุฃุณ ูููุงุนุฏ ุนูููุงุช ุฅุนุงุฏุฉ ุงูุชูุฌูู ุ </li><li style=";text-align:right;direction:rtl">  ูุชุบูุฑุงุช ุงูุญูุณุจุฉ ูู nginx.conf. </li></ul><br>  ุฃูู ุงูุฃูุถู ุนุฏู ุงุณุชุฎุฏุงู LuaJitุ <br><blockquote style=";text-align:right;direction:rtl">  ุงููุงุนุฏุฉ ุงูุฑุฆูุณูุฉ: ูุง ุชูู ุจูุนุงูุฌุฉ ููุฆุฉ ุถุฎูุฉ ุนูู ููุง - ูุฐุง ูุง ูุนูู. </blockquote>  <strong>ูุง ุชุนูู ูุนุงูุฌุงุช ุงููุญุชูู ุนูู Lua ุฃูุถูุง</strong> .  ูุญุงููุฉ ูุชูููู ุงูููุทู ุฅูู ุนุฏุฏ ูููู ูู <code>if</code> .  ุณูู ูุนูู ููุงุฒู ุจุณูุท ุ ูููู ุงูุดุฑูุท ุงูุฌุงูุจู ูู Lua ุณูุนูู ุจุดูู ุณูุก ููุบุงูุฉ. <br><br>  <strong>ุณูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุฃู ุฌุงูุน ุงูููุงูุฉ ุชุฃุชู.</strong>  ูุง ุชุณุชุฎุฏู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ูุน Lua - Garbage Collector ุจุณุฑุนุฉ ูุจุถูุงู ุฅุฎุฑุงุฌ ุงููุฎ ูุงููุฉ ุฅูู ุงูุฅูุชุงุฌ. <br><br>  <strong>ูุง ุชุณุชุฎุฏู coroutines</strong> ูุน ุงููุซูุฑ ูู ุงููุฑูุจุงุช ุงููุญุงูุธุฉ ุนูู ุงูุญูุงุฉ.  ูููุฏ Coroutines ุงููุฒูุฏ ูู ุงูููุงูุฉ ุฏุงุฎู LuaJit Garbage Collector ุ ููู ุฃูุฑ ุณูุก. <br><br>  ุฅุฐุง ููุช ุชุณุชุฎุฏู LuaJit ุจุงููุนู ุ ูุชุฐูุฑ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญูู ูุฑุงูุจุฉ ุงูุฐุงูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุนูู ุฑุตุฏ ูุชุญุณูู ุนูู ุฌุงูุน ุงูููุงูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุญูู ููููุฉ ุนูู Garbage Collector ุ ุฅุฐุง ููุช ูุฏ ูุชุจุช ุชุทุจูููุง ูุนูุฏูุง ูู LuaJit ุ ูุฃูู ูุชุนูู ุนููู ุฅุถุงูุฉ ุดูุก ุฌุฏูุฏ. </li></ul><br><h3 style=";text-align:right;direction:rtl">  NJS </h3><br>  ุนูุฏูุง ููุช ูู NGINX Conf ุ ุฃููุนููู ุฃูู ุณูููู ูู ุงูุฑุงุฆุน ุนุฏู ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู C. ุงุนุชูุฏุช ุฃูู ูุงู ุนูู ุงููุญุงููุฉ ุ ููุฐุง ูุง ุญุตูุช ุนููู. <br><br>  <strong>ุฅุฐู.</strong>  ุฅูู ูุนูู ุ ุงูููุฏ ุจุณูุท ุ ูุง ูุคุซุฑ ุนูู ุงูุณุฑุนุฉ - ูู ุดูุก ุฑุงุฆุน.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุฐุฌู</a> ุงูุตุบูุฑ ุงูุฐู ุจุฏุฃุช ุจู ูู 10 ุณุทูุฑ ูู ุงูููุฏ.  ููู ูุฐู ุงูุฃุณุทุฑ ุงูุนุดุฑุฉ ุชูุนู ุงูุชุฎููู ูุน s3. <br><br>  <strong>ุญุณุงุจ ุงููุชุบูุฑุงุช ู nginx.conf.</strong>  ูููู ุญุณุงุจ ุงูุนุฏูุฏ ูู ุงููุชุบูุฑุงุช ุจุงุณุชุฎุฏุงู NJS.  ุฏุงุฎู nginx ุ ูุฐุง ุฑุงุฆุน.  ููุฌุฏ ูุซู ูุฐู ุงูููุฒุฉ ูู Lua ุ ูููู ููุฌุฏ ุฃุฏุงุฉ ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุ ูุฐุง ููู ููุณุช ุฑุงุฆุนุฉ. <br><br>  ููุน ุฐูู ุ ููุณ ูู ุดูุก ุฌูุฏ ุฌุฏุง.  ููุนู ุฃุดูุงุก ุฑุงุฆุนุฉ ุญููุง ุนูู NJS ุ ููุฏ ูุงุชู ุจุนุถ ุงูุฃุดูุงุก. <br><br>  <strong>ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ</strong> .  ููุฏ ููุช ุจุชุฑููุน ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุ ูุฐุง ุดููุฉ ุฎุงุตุฉ ุจู ุ ูุฐูู ูููู ุงูุขู. <br><br>  <strong>ูุฑุดุญุงุช ุฏุนู ุงููุฒูุฏ ูู ุงููุฑุงุญู</strong> .  ูู NJS ุ ูุง ููุฌุฏ ุณูู ูุฑุญูุฉ ุงููุญุชูู ูุงููุชุบูุฑุงุช ุ ููุฑุดุญ ุงูุฑุฃุณ ููููุฏ ููุบุงูุฉ.  ุนููู ุฃู ุชูุชุจ ุนูุงุฒุงุช ูุฅุถุงูุฉ ุงููุซูุฑ ูู ุงูุฑุคูุณ.  ูุง ููุฌุฏ ูุฑุดุญ ูุต ูุงูู ููููุทู ุงููุนูุฏ ุฃู ุงูุนูู ูุน ุงููุญุชูู. <br><br>  <strong>ูุนูููุงุช ุญูู ููููุฉ ูุฑุงูุจุชูุง ูููููุง ุงูุดุฎุตู</strong> .  ุฃูุง ุฃุนุฑู ุงูุขู ููู ุ ูููู ูุงู ุนูู ุฃู ุฃุฏุฑุณ ุงููุตุฏุฑ.  ูุง ุชูุฌุฏ ูุนูููุงุช ุฃู ุฃุฏูุงุช ูุงููุฉ ุญูู ุงูุชุดููู ุงูุฌุงูุจู ุงูุตุญูุญ.  ุฅุฐุง ูุงู ูุฐูู ุ ูุฅูู ูุฎูู ุญูุซ ูุง ูููู ุงูุนุซูุฑ ุนูููุง.  ูู ููุณ ุงูููุช ุ ูุง ุชูุฌุฏ ูุนูููุงุช ูุงููุฉ ุญูู <strong>ุฃูู ูููููู ุงุณุชุฎุฏุงู NJS</strong> ูุฃูู ูุง ูููููู ุฐููุ <br><br>  <strong>ูุญุฏุงุช C.</strong>  ูุงู ูุฏู ุงูุฑุบุจุฉ ูู ุชูุณูุน NJS. <br><br><h2 style=";text-align:right;direction:rtl">  ุฎุงุชูุฉ </h2><br>  <strong>ููุงุฐุง ุฅูุดุงุก ุงููุญุฏุงุช ุงูุฎุงุตุฉ ุจูุ</strong>  ูุญู ุงููุดุงูู ุงูุนุงูุฉ ูุงูุชุฌุงุฑูุฉ. <br><br>  <strong>ูุชู ุฃุญุชุงุฌ ุฅูู ุชูููุฐ ุงููุญุฏุงุช ุงูููุทูุฉ ูู Cุ</strong>  ุฅุฐุง ูู ุชูู ููุงู ุฎูุงุฑุงุช ุฃุฎุฑู.  ุนูู ุณุจูู ุงููุซุงู ุ ุนุจุก ุซููู ุฃู ุฅุฏุฎุงู ูุญุชูู ุฃู ุชูููุฑ ุฃุณุงุณู ุนูู ุงูุฃุฌูุฒุฉ.  ุซู ูุฌุจ ุฃู ูุชู ุฐูู ูุถููู ูู C. ูู ูุนุธู ุงูุญุงูุงุช ุ ุชููู Lua ุฃู NJS ููุงุณุจุฉ.  ูููู ูุฌุจ ุฃู ุชููุฑ ุฏุงุฆูุง ูู ุงููุณุชูุจู. <br><br>  <strong>ูุนูู ููุงุ</strong>  ุนูุฏูุง ูุง ููููู ุงููุชุงุจุฉ ูู C. ุนูู ุณุจูู ุงููุซุงู ุ ูุง ุชุญุชุงุฌ ุฅูู ุชุญููู ูุต ุงูุทูุจ ุจุงุณุชุฎุฏุงู RPS ุถุฎูุฉ.  ูููู ุนุฏุฏ ุงูุนููุงุก ูุฏูู ุ ูู ูุฑุญูุฉ ูุง ุณุชุชููู ุนู ุงูุชุนุงูู - ููุฑ ูู ุงูุฃูุฑ. <br><br>  <strong>NJSุ</strong>  ุนูุฏูุง ุณุฆูุช LuaJit ุชูุงููุง ูู ุฌุงูุน ุงูููุงูุฉ ูุงูุฃูุชุงุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฃูุดุฃ ุงูุชุฎููู ุงูุนุฏูุฏ ูู ูุงุฆูุงุช Garbage ุนูู Lua ุ ููู ูุฐุง ูู ููู ุญุฑุฌูุง.  ููุน ุฐูู ุ ููุฏ ุงูุนูุณ ูุฐุง ูู ุงูุฑุตุฏ ููุฒุนุฌ.  ุงูุขู ุชููู ุนู ุงูุธููุฑ ูู ุงููุฑุงูุจุฉ ุงูุฎุงุตุฉ ุจู ุ ูุฃุตุจุญ ูู ุดูุก ุฌูุฏูุง. <br><br><blockquote style=";text-align:right;direction:rtl">  ูู HighLoad ++ 2019 ุ ุณูู ููุงุตู Vasily Soshnikov ููุถูุน ูุญุฏุงุช nginx <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุญุฏุซ</a> ุฃูุซุฑ ุนู NJS ุ ุฏูู ูุณูุงู ุงูููุงุฑูุฉ ูุน LuaJit ู C. <br><br>  ุงุทูุน ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงุฆูุฉ</a> ุงููุงููุฉ ููุชูุงุฑูุฑ ุนูู ุงููููุน ุ ูุฃุฑุงู ูููู 7 ู 8 ููููุจุฑ ูู ุฃูุจุฑ ูุคุชูุฑ ููุทูุฑู ุงูุฃูุธูุฉ ุงููุญููุฉ ููุบุงูุฉ.  ุชุงุจุน ุฃููุงุฑูุง ุงูุฌุฏูุฏุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุดุฑุฉ ุงูุฅุฎุจุงุฑูุฉ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุงุฉ ุงูุจุฑู</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471684/">https://habr.com/ru/post/ar471684/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471666/index.html">ุชุฌุฑุจุฉ iOS Developer ุชูุชูู ุฅูู ุฃููุงููุง ุจุชุฃุดูุฑุฉ ุนูู</a></li>
<li><a href="../ar471668/index.html">ุงูุชุญููู ุงูููู ูู checkm8 ุงุณุชุบูุงู</a></li>
<li><a href="../ar471670/index.html">ูุญุงููุฉ Jetpack ูุคูู ูู ุงููุนุฑูุฉุ</a></li>
<li><a href="../ar471676/index.html">ุงููุญุชุงููู ุงููุงุชู. ุงูุฅุฌุฑุงุก ุงูุซุงูู ุ ุงูุฐู ุชููุงุฑ ููู ูุฃูุฑุจ ุฅูู ุฃูุฑุจ ุตุฑุงู ุขูู</a></li>
<li><a href="../ar471678/index.html">ุชุญูู ุงูุฎุฏูุงุช ุญุณุจ ุงูุทูุจ</a></li>
<li><a href="../ar471686/index.html">ููู AWS ูุฎูุฑ ุฎุฏูุงุชู ูุฑููุฉ. ุฎุงุฏู ููุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชุญุฌูู</a></li>
<li><a href="../ar471688/index.html">ููู AWS ูุฎูุฑ ุฎุฏูุงุชู ูุฑููุฉ. ุชุญุฌูู ุงูุดุจูุฉ</a></li>
<li><a href="../ar471700/index.html">ููู ุงุฎุชุฑุช ูููุฉ ุงูุชูููููุฌูุฉ ูุน ุฃุณุงุณ ูููุณุชูุจู</a></li>
<li><a href="../ar471702/index.html">ุชุทุจููุงุช ุงูููุจ ุงููุญุณูุฉ ุนูู ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar471704/index.html">ูุชุงุจ "ุงูููุชููููุฏุฑูุง ุงูุฃูุงููุฉ. ููู ุชุญุงูุธ ุนูู ุงูุตุญุฉ ูุชุญุฑู ุงูุดูุฎูุฎุฉ "</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>