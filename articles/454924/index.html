<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ö±Ô∏è ‚û°Ô∏è üñïüèæ Configuraci√≥n de autenticaci√≥n en Veeam Backup para Microsoft Office 365 v3 üòâ üë∏üèæ üòó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la versi√≥n 3.0 recientemente lanzada de Veeam Backup para Microsoft Office 365 , entre otras innovaciones, admite un m√©todo de autenticaci√≥n modern...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configuraci√≥n de autenticaci√≥n en Veeam Backup para Microsoft Office 365 v3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/454924/">  En la versi√≥n 3.0 recientemente lanzada de <b>Veeam Backup <i>para Microsoft Office 365</i></b> , entre otras innovaciones, admite un m√©todo de autenticaci√≥n moderno para trabajar con datos en la nube.  Utiliza la autenticaci√≥n mediante la aplicaci√≥n de Azure y una cuenta de servicio configurada con autenticaci√≥n multifactor (MFA). <br><br><img src="https://habrastorage.org/webt/yf/cq/9p/yfcq9pstszziwyruwzbj82x5x2s.png"><br><br>  En este art√≠culo, discutiremos brevemente c√≥mo crear las entidades necesarias para dicha autenticaci√≥n y configurar sus par√°metros en Microsoft Office 365. <br><a name="habracut"></a><br><h1>  Como funciona </h1><br>  Para la autenticaci√≥n con la nube de Office 365, Veeam usa la aplicaci√≥n Azure Active Directory y una cuenta de servicio que est√° configurada con autenticaci√≥n multifactor (MFA). <br><br><ul><li>  La aplicaci√≥n permite que Veeam Backup <i>para Microsoft Office 365</i> use la <b>API Graph de Microsoft</b> para recuperar los datos de la organizaci√≥n de Microsoft Office 365. Esta aplicaci√≥n debe registrarse previamente en el portal de Azure Active Directory, como se describe a continuaci√≥n. </li><li>  La cuenta de servicio se usar√° para conectarse a los servicios EWS y PowerShell. </li></ul><br>  En consecuencia, cuando agrega una organizaci√≥n a la infraestructura de Veeam Backup <i>para Microsoft Office 365</i> , deber√° hacer lo siguiente: <br><br><ol><li>  En el paso de <b>configuraci√≥n de conexi√≥n de Office 365</b> del <b>Asistente para agregar organizaci√≥n,</b> seleccione <b>Autenticaci√≥n moderna</b> . </li><li>  En el paso de <b>credenciales de Exchange Online</b> , debe especificar el ID de la aplicaci√≥n Azure Active Directory (as√≠ como su certificado o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secreto</a> ) y el nombre de usuario y la contrase√±a de la cuenta de la aplicaci√≥n ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">contrase√±a de la aplicaci√≥n</a> ): </li></ol><br><br><img src="https://habrastorage.org/webt/xw/5v/xi/xw5vxikmiguexdwm14rpopiupmc.png"><br><br>  ¬øD√≥nde obtener estos mismos certificados, secretos y contrase√±as de la aplicaci√≥n?  - nos preguntan algunos usuarios.  Esto es lo que explicaremos a continuaci√≥n. <br><br><h2>  Por cierto, si <i>se</i> selecciona la <i>autenticaci√≥n moderna</i> , ¬øsignifica esto que los protocolos de autenticaci√≥n b√°sicos se desactivar√°n por completo del proceso? </h2><br>  Veeam Backup <i>para Microsoft Office 365</i> v3 es totalmente compatible con los m√©todos modernos de autenticaci√≥n, pero junto con esto, tambi√©n utiliza una serie de protocolos b√°sicos para poder trabajar con la API de Office 365. <br><br>  Para ellos, debe verificar la siguiente configuraci√≥n: <br><br><ul><li> Para trabajar con <i>Exchange Online PowerShell,</i> debe habilitar el par√°metro <b>AllowBasicAuthPowershell</b> para la cuenta del servicio Veeam; esto es necesario para obtener informaci√≥n sobre la cantidad de usuarios con licencia, buzones, etc.  Para una mayor seguridad, puede habilitarlo para una sola cuenta, y no para toda la organizaci√≥n, como se explica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> , en particular, esto solo se puede hacer para la contabilidad de Veeam. </li><li>  <i>Exchange Online PowerShell</i> tambi√©n funciona con el <i>servicio web de Servicios web de Exchange</i> (EWS); para ello, habilite el par√°metro <b>AllowBasicAuthWebServices</b> .  En principio, esta opci√≥n es opcional, es decir, no es necesario habilitarla para una organizaci√≥n de Office 365: Veeam Backup para Microsoft Office 365 puede prescindir de ella, pero en este caso, cuando agrega una organizaci√≥n, deber√° usar un certificado de aplicaci√≥n, no un secreto. </li><li>  Para proteger archivos de texto, im√°genes, videos, contenido din√°mico y otro contenido que se carga en p√°ginas en sitios de SharePoint Online, debe habilitar el par√°metro <b>LegacyAuthProtocolsEnabled</b> , configur√°ndolo en <i>$ True</i> .  Esta configuraci√≥n se aplicar√° a la organizaci√≥n en su conjunto;  se requiere para la operaci√≥n de servicios individuales, por ejemplo, para ASMX. </li></ul><br><h1>  Entonces, obtenemos la identificaci√≥n, el secreto y el certificado de la aplicaci√≥n </h1><br>  Todo esto debe obtenerse en el portal de <b>Office 365 Azure Active Directory</b> al registrar una nueva aplicaci√≥n en Azure Active Directory. <br><br>  Para registrar una aplicaci√≥n, debe seguir estos pasos: <br><br><ol><li>  Inicie sesi√≥n en el <b>Centro de administraci√≥n de Microsoft Office 365</b> con una cuenta de <i>administrador global</i> , <i>administrador de</i> <i>aplicaciones</i> o <i>administrador de aplicaciones en la nube</i> y vaya al <b>centro de administraci√≥n de Azure Active Directory</b> . <br></li><li>  En la secci√≥n <b>Registros de</b> la <b>aplicaci√≥n</b> , haga clic en <b>Nuevo registro</b> : <br><br><img src="https://habrastorage.org/webt/tn/0f/8b/tn0f8b89xx87bhc53chx6ewydea.png"><br></li><li>  Ingrese el nombre de la aplicaci√≥n, especifique los <b>tipos de cuenta admitidos</b> (tipos de cuentas que funcionar√°n con la aplicaci√≥n; tenemos ‚ÄúCuentas solo en este directorio organizacional‚Äù, es decir, cuentas solo del directorio de esta organizaci√≥n) y haga clic en <b>Registrarse</b> : <br><br><img src="https://habrastorage.org/webt/2v/3i/k5/2v3ik51t0_2auk9bkeymcdzvwdk.png"><br></li></ol><br>  Ahora la ID de la aplicaci√≥n aparecer√° en la configuraci√≥n que est√° visible en la ventana <b>Descripci√≥n general</b> . <br>  Pero eso no es todo: para completar el proceso de configuraci√≥n, debe realizar algunos pasos m√°s.  La aplicaci√≥n debe proporcionar los permisos necesarios para trabajar con la API. <br><ol><li>  En la secci√≥n <b>API de llamadas</b> , haga clic en <b>Ver permisos de API</b> : <br><br><img src="https://habrastorage.org/webt/aw/tb/kn/awtbkn78vr8lsqfpvc60auhgwlc.png"><br></li><li>  En la ventana que se abre, veremos los permisos proporcionados a nuestra aplicaci√≥n.  De forma predeterminada, solo se configuran uno de los permisos para acceder a Microsoft Graph: esto es <i>User.Read</i> .  Se puede quitar de forma segura, porque  No es necesario para nuestra aplicaci√≥n.  Luego haga clic en <b>Agregar un permiso</b> : <br><br><img src="https://habrastorage.org/webt/ui/wk/9r/uiwk9rkh9ejxgatpfclpguo2jsi.png"><br></li><li>  A continuaci√≥n, en la secci√≥n <b>Seleccionar una API</b> , seleccione <b>Microsoft Graph</b> : <br><br><img src="https://habrastorage.org/webt/ke/rd/50/kerd502zltf5ut_i0pkyplx-y2q.png"><br></li><li>  Puede haber dos tipos de permisos para las aplicaciones de Azure AD: estos son <i>permisos</i> <i>Delegados</i> o de <i>Aplicaci√≥n</i> (asignados a la aplicaci√≥n).  La primera opci√≥n ( <i>permisos delegados</i> ) requiere un usuario conectado que proporcionar√° los permisos necesarios cada vez que se realice una llamada a la API.  En la versi√≥n con <i>permisos de Aplicaci√≥n,</i> el administrador los otorga una vez (se da el consentimiento - consentimiento del administrador).  Veeam Backup para Microsoft Office 365 requiere la asignaci√≥n de <i>permisos</i> de <i>aplicaci√≥n</i> : seleccione <i>Directory.Read.All</i> (para leer datos en un directorio) y <i>Group.Read.All</i> (para leer datos de grupo) de la lista de permisos, luego haga clic en <b>Agregar permisos</b> : <br><br><img src="https://habrastorage.org/webt/8v/dp/an/8vdpanl-smklajxsjc8z5m1oijy.png"><br>  <i>Nota:</i> Si desea utilizar el certificado de la aplicaci√≥n en lugar de un secreto, adem√°s, debe seleccionar varias API m√°s y los permisos correspondientes: <br><br><ul><li>  Permiso y <b>acceso a la API en l√≠nea de Microsoft Exchange</b> <i>Utilice los servicios web de Exchange con acceso completo a todos los buzones</i> </li><li>  Permiso y <b>acceso a la API de Microsoft SharePoint Online</b> <i>Tenga control total de todas las colecciones de sitios</i> <i><br></i> <br></li></ul><br>  Al final de la configuraci√≥n, debe emitir el consentimiento del administrador (consentimiento del <i>administrador</i> ) para todo el cliente, es decir, para toda la organizaci√≥n del cliente con cuyos datos funcionar√° la aplicaci√≥n.  Lea m√°s sobre este mecanismo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo de Microsoft</a> . <br><br>  En la secci√≥n <b>Permisos de API</b> , haga clic en <b>Otorgar consentimiento de administrador para &lt;nombre del inquilino&gt;</b> .  Para confirmar, haga clic en <b>S√≠</b> : <br><br><img src="https://habrastorage.org/webt/-j/zm/b9/-jzmb9vxcrvvqcef0e7_smdadnu.png"><br><br>  Ahora puede comenzar a configurar el secreto o el certificado de la aplicaci√≥n. <br><br><ol><li>  De todos modos, en la secci√≥n <b>Registros de aplicaciones</b> , seleccione la aplicaci√≥n reci√©n creada, luego haga clic en <b>Certificados y secretos</b> y seleccione <b>Nuevo secreto de cliente</b> o <b>Cargar certificado</b> . <br><br><img src="https://habrastorage.org/webt/ei/ou/_g/eiou_gsd8dkpvbp0iu48qt18_88.png"><br></li><li>  Para un secreto, debe ingresar una descripci√≥n y una fecha de vencimiento.  Tenga en cuenta que el c√≥digo secreto debe copiarse de inmediato, ya que no se volver√° a mostrar, y deber√° especificarlo en el asistente Agregar organizaci√≥n (que es donde comenzamos esta explicaci√≥n): <br><br><img src="https://habrastorage.org/webt/l7/qx/jd/l7qxjdn57diux3steubgsf7kj7u.png"><br></li></ol><br>  ¬°Hurra, esta parte de la extracci√≥n de los par√°metros necesarios se ha completado!  Sigamos adelante. <br><br><h1>  Obtenga la contrase√±a de la aplicaci√≥n </h1><br>  Si ya tiene una cuenta para usar MFA cuando trabaja con Office 365 y tiene todas las funciones y permisos necesarios para Veeam Backup <i>para Microsoft Office 365</i> , puede crear una nueva contrase√±a de aplicaci√≥n: <br><br><ol><li>  Debe iniciar sesi√≥n en Office 365 con esta cuenta y pasar un control de seguridad adicional.  Vaya a la configuraci√≥n del usuario y haga clic en <b>Configuraci√≥n de su aplicaci√≥n</b> : <br><br><img src="https://habrastorage.org/webt/gr/br/tl/grbrtlwuntoyiy6ftsh9qgapeby.png"><br></li><li>  Ser√° redirigido a la p√°gina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://portal.office.com/account</a> , donde deber√° ir a la secci√≥n <b>Seguridad y privacidad</b> y seleccionar <b>Crear y administrar contrase√±as de aplicaciones all√≠</b> : <br><br><img src="https://habrastorage.org/webt/fm/74/1n/fm741nkphovlpffd8qsptffwiww.png"><br></li><li>  Cree una nueva contrase√±a de aplicaci√≥n, c√≥piela en el portapapeles y, cuando acceda al asistente Agregar organizaci√≥n, ingr√©sela. <br><br>  <i>Nota: Se</i> recomienda usar la contrase√±a de la aplicaci√≥n solo una vez, y si es necesario, simplemente puede generar una nueva contrase√±a como se describe anteriormente. <br><br><img src="https://habrastorage.org/webt/8a/sd/tz/8asdtzohdccbuexdpdh2mfubhw4.png"><br></li></ol><br>  Ahora tiene un conjunto completo de opciones que puede especificar al agregar una organizaci√≥n de Office 365 a Veeam Backup <i>para Microsoft Office 365</i> .  No olvide asegurarse de haber especificado la opci√≥n de implementaci√≥n correcta ( <b>Microsoft Office 365</b> ) y el m√©todo de autenticaci√≥n correcto (en nuestro caso, <b>autenticaci√≥n moderna</b> ). <br><br>  <i>Nota:</i> Tenga en cuenta que puede usar cuentas diferentes o id√©nticas para acceder a Exchange Online y SharePoint Online (junto con OneDrive para la Empresa). <br>  Si planea usar varias aplicaciones para ejecutar Exchange Online y SharePoint Online, aseg√∫rese de registrar previamente estas aplicaciones siguiendo el procedimiento de este art√≠culo. <br><br><h1>  Enlaces de sitio </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo sobre Habr√© sobre la decisi√≥n de Veeam Backup para Microsoft Office 365</a> </li><li>  Puede descargar una versi√≥n de prueba de la edici√≥n comercial de la soluci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠.</a> </li><li>  Puede descargar la edici√≥n gratuita de Community Edition <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manual de usuario (en ingl√©s)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nuevas caracter√≠sticas de la versi√≥n 3.0 (video en ruso)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo de Microsoft sobre c√≥mo deshabilitar la autenticaci√≥n b√°sica en Office 365</a> </li></ul></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454924/">https://habr.com/ru/post/454924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454914/index.html">Usamos Yii2. Estamos escribiendo otro CMS o un intento de acelerar significativamente el desarrollo con una sobrecarga m√≠nima</a></li>
<li><a href="../454916/index.html">Arquitectura de red neuronal para implementar el algoritmo RL con la capacidad de establecer acciones simult√°neas</a></li>
<li><a href="../454918/index.html">C√≥mo combinar los respaldos de dos minoristas en SAP en 12 horas</a></li>
<li><a href="../454920/index.html">Rendimiento de front-end: an√°lisis de m√©tricas importantes</a></li>
<li><a href="../454922/index.html">Historias sobre clientes extranjeros y sus caracter√≠sticas de trabajo en Rusia despu√©s de la Ley de DP</a></li>
<li><a href="../454926/index.html">Todo lo que sab√≠as sobre word2vec no es cierto</a></li>
<li><a href="../454930/index.html">Recolecci√≥n de basura en V8: como funciona el nuevo Orinoco GC</a></li>
<li><a href="../454932/index.html">Inversiones y software: 5 terminales comerciales para operar en bolsa</a></li>
<li><a href="../454936/index.html">Vivaldi: el bloqueo de anuncios debe ser la elecci√≥n del usuario</a></li>
<li><a href="../454938/index.html">Desarrollo de su propio n√∫cleo para incrustar en un sistema de procesador basado en FPGA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>