<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ³ï¸â€ğŸŒˆ ğŸ¥ ğŸ™ ä½¿ç”¨TensorFlow.jsç©çœŸäººå¿«æ‰“ ğŸŒ’ ğŸ™ŒğŸ¿ ğŸ¹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="é€šè¿‡å¯¹Guess.jsé¢„æµ‹æ¨¡å‹çš„æ”¹è¿›è¿›è¡Œè¯•éªŒï¼Œæˆ‘å¼€å§‹å¯†åˆ‡å…³æ³¨æ·±åº¦å­¦ä¹ ï¼šé€’å½’ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ï¼Œå°¤å…¶æ˜¯LSTMï¼Œå› ä¸ºå®ƒä»¬åœ¨Guess.jså·¥ä½œçš„é¢†åŸŸå…·æœ‰â€œä¸åˆç†çš„æœ‰æ•ˆæ€§â€ ã€‚ åŒæ—¶ï¼Œæˆ‘å¼€å§‹ç ”ç©¶å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œå®ƒä¹Ÿç»å¸¸ç”¨äºæ—¶é—´åºåˆ—ã€‚ CNNé€šå¸¸ç”¨äºåˆ†ç±»ï¼Œè¯†åˆ«å’Œæ£€æµ‹å›¾åƒã€‚ 


 ä½¿ç”¨Tensor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨TensorFlow.jsç©çœŸäººå¿«æ‰“</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428019/"> é€šè¿‡å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Guess.js</a>é¢„æµ‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨¡å‹çš„</a>æ”¹è¿›è¿›è¡Œè¯•éªŒï¼Œæˆ‘å¼€å§‹å¯†åˆ‡å…³æ³¨æ·±åº¦å­¦ä¹ ï¼šé€’å½’ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ï¼Œå°¤å…¶æ˜¯LSTMï¼Œå› ä¸ºå®ƒä»¬åœ¨Guess.jså·¥ä½œçš„é¢†åŸŸå…·æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œä¸åˆç†çš„æœ‰æ•ˆæ€§â€</a> ã€‚ åŒæ—¶ï¼Œæˆ‘å¼€å§‹ç ”ç©¶å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œå®ƒä¹Ÿç»å¸¸ç”¨äºæ—¶é—´åºåˆ—ã€‚  CNNé€šå¸¸ç”¨äºåˆ†ç±»ï¼Œè¯†åˆ«å’Œæ£€æµ‹å›¾åƒã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fb/9be/edc/1fb9beedcad00d1c0dcdc7bbef67e6d9.png"><br>  <i><font color="gray">ä½¿ç”¨TensorFlow.jsç®¡ç†<a href="">MK.js</a></font></i> <br><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æ–‡</a>å’Œ<a href="">MK.js</a>çš„æºä»£ç åœ¨æˆ‘çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubä¸Š</a> ã€‚ æˆ‘è¿˜æ²¡æœ‰å‘å¸ƒè®­ç»ƒæ•°æ®é›†ï¼Œä½†æ˜¯æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è¯´æ˜æ„å»ºè‡ªå·±çš„æ¨¡å‹å¹¶è®­ç»ƒæ¨¡å‹ï¼ </blockquote><a name="habracut"></a><br> åœ¨ç©äº†CNNä¹‹åï¼Œæˆ‘è¿˜è®°å¾—å‡ å¹´å‰æµè§ˆå™¨å¼€å‘äººå‘˜å‘å¸ƒ<code>getUserMedia</code> APIæ—¶è¿›è¡Œçš„ä¸€é¡¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®éªŒ</a> ã€‚ åœ¨å…¶ä¸­ï¼Œç”¨æˆ·çš„ç›¸æœºå……å½“äº†æ’­æ”¾Mortal Kombat 3çš„å°å‹JavaScriptå…‹éš†çš„æ§åˆ¶å™¨ã€‚æ‚¨å¯ä»¥åœ¨<a href="">GitHubå­˜å‚¨åº“ä¸­</a>æ‰¾åˆ°è¯¥æ¸¸æˆã€‚ ä½œä¸ºå®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘å®ç°äº†ä¸€ç§åŸºæœ¬çš„å®šä½ç®—æ³•ï¼Œè¯¥ç®—æ³•å°†å›¾åƒåˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š <br><br><ul><li> å·¦æ‹³æˆ–å³æ‹³ </li><li> å·¦è¸¢æˆ–å³è¸¢ </li><li> å·¦å³æ­¥éª¤ </li><li> ä¸‹è¹² </li><li> ä»¥ä¸Šéƒ½ä¸æ˜¯ </li></ul><br> è¯¥ç®—æ³•éå¸¸ç®€å•ï¼Œæˆ‘å¯ä»¥ç”¨å‡ å¥è¯æ¥è§£é‡Šå®ƒï¼š <br><br><blockquote> è¯¥ç®—æ³•æ‹æ‘„èƒŒæ™¯ã€‚ ä¸€æ—¦ç”¨æˆ·å‡ºç°åœ¨æ¡†æ¶ä¸­ï¼Œè¯¥ç®—æ³•å°±ä¼šè®¡ç®—å‡ºä¸ç”¨æˆ·ä¹‹é—´çš„èƒŒæ™¯å’Œå½“å‰æ¡†æ¶ä¹‹é—´çš„å·®å¼‚ã€‚ å› æ­¤ï¼Œå®ƒç¡®å®šäº†ç”¨æˆ·å›¾å½¢çš„ä½ç½®ã€‚ ä¸‹ä¸€æ­¥æ˜¯ä»¥é»‘åº•ç™½å­—æ˜¾ç¤ºç”¨æˆ·çš„èº«ä½“ã€‚ ä¹‹åï¼Œå»ºç«‹å‚ç›´å’Œæ°´å¹³ç›´æ–¹å›¾ï¼Œå°†æ¯ä¸ªåƒç´ çš„å€¼ç›¸åŠ ã€‚ åŸºäºæ­¤è®¡ç®—ï¼Œç®—æ³•å°†ç¡®å®šèº«ä½“çš„å½“å‰ä½ç½®ã€‚ </blockquote><br> è§†é¢‘æ˜¾ç¤ºäº†ç¨‹åºçš„å·¥ä½œæ–¹å¼ã€‚  <a href="">GitHub</a>æºä»£ç ã€‚ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0_yfU_iNUYo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> å°½ç®¡å¾®å‹MKå…‹éš†æˆåŠŸè¿è¡Œï¼Œä½†è¯¥ç®—æ³•è¿˜è¿œéå®Œç¾ã€‚ éœ€è¦å¸¦æœ‰èƒŒæ™¯çš„æ¡†æ¶ã€‚ ä¸ºäº†æ­£ç¡®æ“ä½œï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼ŒèƒŒæ™¯å¿…é¡»ä¸ºç›¸åŒçš„é¢œè‰²ã€‚ è¿™æ ·çš„é™åˆ¶æ„å‘³ç€å…‰çº¿ï¼Œé˜´å½±å’Œå…¶ä»–äº‹ç‰©çš„å˜åŒ–ä¼šå¹²æ‰°å¹¶ç»™å‡ºä¸å‡†ç¡®çš„ç»“æœã€‚ æœ€åï¼Œè¯¥ç®—æ³•æ— æ³•è¯†åˆ«è¯¥åŠ¨ä½œã€‚ ä»–åªå°†æ–°æ¡†æ¶åˆ†ç±»ä¸ºé¢„å®šä¹‰é›†åˆä¸­èº«ä½“çš„ä½ç½®ã€‚ <br><br> ç°åœ¨ï¼Œç”±äºWeb APIï¼ˆå³WebGLï¼‰çš„è¿›æ­¥ï¼Œæˆ‘å†³å®šé€šè¿‡åº”ç”¨TensorFlow.jsè¿”å›æ­¤ä»»åŠ¡ã€‚ <br><br><h1> å¼•è¨€ </h1><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«æˆ‘ä½¿ç”¨TensorFlow.jså’ŒMobileNetåˆ›å»ºç”¨äºå¯¹èº«ä½“ä½ç½®è¿›è¡Œåˆ†ç±»çš„ç®—æ³•çš„ç»éªŒã€‚ è¯·è€ƒè™‘ä»¥ä¸‹ä¸»é¢˜ï¼š <br><br><ul><li> æ”¶é›†è®­ç»ƒæ•°æ®ä»¥è¿›è¡Œå›¾åƒåˆ†ç±» </li><li> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">imgaugè¿›è¡Œ</a>æ•°æ®å¢å¼º </li><li> ä½¿ç”¨MobileNetè½¬ç§»å­¦ä¹  </li><li> äºŒå…ƒåˆ†ç±»å’ŒNå…ƒåˆ†ç±» </li><li> åœ¨Node.jsä¸­è®­ç»ƒTensorFlow.jså›¾åƒåˆ†ç±»æ¨¡å‹å¹¶åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å®ƒ </li><li> å…³äºä½¿ç”¨LSTMå¯¹åŠ¨ä½œè¿›è¡Œåˆ†ç±»çš„å‡ å¥è¯ </li></ul><br> åœ¨æœ¬æ–‡ä¸­ï¼Œä¸é€šè¿‡ä¸€ç³»åˆ—å¸§è¯†åˆ«åŠ¨ä½œç›¸åï¼Œæˆ‘ä»¬å°†å‡å°‘åŸºäºä¸€ä¸ªå¸§ç¡®å®šèº«ä½“ä½ç½®çš„é—®é¢˜ã€‚ æˆ‘ä»¬å°†ä¸è€å¸ˆä¸€èµ·å¼€å‘æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œè¯¥æ¨¡å‹åŸºäºç”¨æˆ·ç½‘ç»œæ‘„åƒå¤´ä¸­çš„å›¾åƒæ¥ç¡®å®šäººçš„åŠ¨ä½œï¼šè¸¢è…¿ï¼Œè¸¢è…¿æˆ–ä¸åšä»»ä½•åŠ¨ä½œã€‚ <br><br> åˆ°æœ¬æ–‡ç»“å°¾ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿæ„å»ºä¸€ä¸ªæ’­æ”¾<a href="">MK.js</a>çš„æ¨¡å‹ï¼š <br><br><img src="https://habrastorage.org/webt/2u/0e/g6/2u0eg6ng2p4kwxosmut1koa751g.gif"><br><br> ä¸ºäº†æ›´å¥½åœ°ç†è§£æœ¬æ–‡ï¼Œè¯»è€…åº”è¯¥ç†Ÿæ‚‰ç¼–ç¨‹å’ŒJavaScriptçš„åŸºæœ¬æ¦‚å¿µã€‚ å¯¹æ·±åº¦å­¦ä¹ çš„åŸºæœ¬ç†è§£ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ã€‚ <br><br><h1> èµ„æ–™æ”¶é›† </h1><br> æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å‡†ç¡®æ€§é«˜åº¦ä¾èµ–äºæ•°æ®è´¨é‡ã€‚ ä¸ç”Ÿäº§ä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦åŠªåŠ›æ”¶é›†å¹¿æ³›çš„æ•°æ®é›†ã€‚ <br><br> æˆ‘ä»¬çš„æ¨¡å‹åº”è¯¥èƒ½å¤Ÿè¯†åˆ«å‡ºæ‹³å’Œè¸¢è„šã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»æ”¶é›†ä¸‰ä¸ªç±»åˆ«çš„å›¾åƒï¼š <br><br><ul><li> è¸¢çƒ </li><li> è¸¢çƒ </li><li> å…¶ä»– </li></ul><br> åœ¨æ­¤å®éªŒä¸­ï¼Œä¸¤åå¿—æ„¿è€…ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@lili_vs</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@gsamokovarov</a> ï¼‰å¸®åŠ©æˆ‘æ”¶é›†äº†ç…§ç‰‡ã€‚ æˆ‘ä»¬åœ¨MacBook Proä¸Šå½•åˆ¶äº†5ä¸ªQuickTimeè§†é¢‘ï¼Œæ¯ä¸ªè§†é¢‘åŒ…å«2-4ä¸ªè„šå’Œ2-4ä¸ªè„šã€‚ <br><br> ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ffmpegä»è§†é¢‘ä¸­æå–å•ä¸ªå¸§å¹¶å°†å…¶å¦å­˜ä¸º<code>jpg</code>å›¾åƒï¼š <br><br> <code>ffmpeg -i video.mov $filename%03d.jpg</code> <br> <br> è¦æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œé¦–å…ˆéœ€è¦åœ¨è®¡ç®—æœºä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®‰è£…</a> <code>ffmpeg</code> ã€‚ <br><br> å¦‚æœè¦è®­ç»ƒæ¨¡å‹ï¼Œåˆ™å¿…é¡»æä¾›è¾“å…¥æ•°æ®å’Œç›¸åº”çš„è¾“å‡ºæ•°æ®ï¼Œä½†æ˜¯åœ¨æ­¤é˜¶æ®µï¼Œæˆ‘ä»¬åªæœ‰ä¸€å †åŒ…å«ä¸‰ä¸ªäººçš„ä¸åŒå§¿åŠ¿çš„å›¾åƒã€‚ è¦æ„å»ºæ•°æ®ï¼Œæ‚¨éœ€è¦å°†æ¡†æ¶åˆ†ä¸ºä¸‰ç±»ï¼šæ‹³ï¼Œè¸¢å’Œå…¶ä»–ã€‚ å¯¹äºæ¯ä¸ªç±»åˆ«ï¼Œå°†åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç›®å½•ï¼Œæ‰€æœ‰å¯¹åº”çš„å›¾åƒéƒ½å°†ç§»åŠ¨åˆ°è¯¥ç›®å½•ä¸­ã€‚ <br><br> å› æ­¤ï¼Œåœ¨æ¯ä¸ªç›®å½•ä¸­åº”è¯¥æœ‰å¤§çº¦200å¼ ä¸ä»¥ä¸‹å›¾åƒç›¸ä¼¼çš„å›¾åƒï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/798/e9a/908/798e9a9083a1f5dfa5811fbb7de3bcc9.jpg"><br><br> è¯·æ³¨æ„ï¼Œâ€œå…¶ä»–â€ç›®å½•ä¸­å°†æœ‰æ›´å¤šçš„å›¾åƒï¼Œå› ä¸ºç›¸å¯¹è¾ƒå°‘çš„å¸§ä¸­åŒ…å«æœ‰æ‹³æ‰“è„šè¸¢çš„ç…§ç‰‡ï¼Œè€Œå…¶ä½™çš„å¸§ä¸­åˆ™æ˜¯äººä»¬èµ°åŠ¨ï¼Œè½¬èº«æˆ–æ§åˆ¶è§†é¢‘ã€‚ å¦‚æœæˆ‘ä»¬åœ¨ä¸€ç±»çš„å›¾åƒä¸Šæœ‰å¤ªå¤šçš„å›¾åƒï¼Œåˆ™å†’ç€æ•™å¯¼åå‘è¯¥ç‰¹å®šç±»çš„æ¨¡å‹çš„é£é™©ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å¯¹å…·æœ‰å†²å‡»åŠ›çš„å›¾åƒè¿›è¡Œåˆ†ç±»æ—¶ï¼Œç¥ç»ç½‘ç»œä»å¯ä»¥ç¡®å®šç±»åˆ«â€œå…¶ä»–â€ã€‚ ä¸ºäº†å‡å°‘è¿™ç§åè§ï¼Œæ‚¨å¯ä»¥ä»â€œå…¶ä»–â€ç›®å½•ä¸­åˆ é™¤ä¸€äº›ç…§ç‰‡ï¼Œå¹¶åœ¨æ¯ä¸ªç±»åˆ«ä¸Šä½¿ç”¨ç›¸åŒæ•°é‡çš„å›¾åƒè®­ç»ƒæ¨¡å‹ã€‚ <br><br> ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åœ¨ç›®å½•ç¼–å·ä¸­åˆ†é…çš„ç¼–å·ä»<code>1</code>åˆ°<code>190</code> ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå›¾åƒä¸º<code>1.jpg</code> ï¼Œç¬¬äºŒä¸ªå›¾åƒä¸º<code>1.jpg</code> ï¼Œä¾æ­¤<code>2.jpg</code> ã€‚ <br><br> å¦‚æœä»…åœ¨åŒä¸€ç¯å¢ƒä¸‹ç”±åŒä¸€ä¸ªäººæ‹æ‘„600å¼ ç…§ç‰‡ä¸­çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°†æ— æ³•è·å¾—å¾ˆé«˜çš„å‡†ç¡®æ€§ã€‚ ä¸ºäº†å……åˆ†åˆ©ç”¨æˆ‘ä»¬çš„æ•°æ®ï¼Œæœ€å¥½ä½¿ç”¨æ•°æ®å¢å¼ºæ¥ç”Ÿæˆä¸€äº›é¢å¤–çš„æ ·æœ¬ã€‚ <br><br><h1> æ•°æ®æ‰©å…… </h1><br> æ•°æ®å¢å¼ºæ˜¯ä¸€ç§é€šè¿‡ä»ç°æœ‰é›†ä¸­åˆæˆæ–°ç‚¹æ¥å¢åŠ æ•°æ®ç‚¹æ•°é‡çš„æŠ€æœ¯ã€‚ é€šå¸¸ï¼Œå¢å¼ºç”¨äºå¢åŠ è®­ç»ƒé›†çš„å¤§å°å’Œå¤šæ ·æ€§ã€‚ æˆ‘ä»¬å°†åŸå§‹å›¾åƒè½¬ç§»åˆ°åˆ›å»ºæ–°å›¾åƒçš„è½¬æ¢ç®¡é“ä¸­ã€‚ æ‚¨ä¸èƒ½å¤ªè¿‡æ¿€è¿›åœ°è¿›è¡Œè½¬æ¢ï¼šåº”è¯¥ä»æ‰“å­”å™¨ä¸­ç”Ÿæˆå…¶ä»–æ‰‹åŠ¨æ‰“å­”å™¨ã€‚ <br><br> å¯æ¥å—çš„è½¬æ¢åŒ…æ‹¬æ—‹è½¬ï¼Œé¢œè‰²åè½¬ï¼Œæ¨¡ç³Šç­‰ã€‚æœ‰å‡ºè‰²çš„å¼€æºå·¥å…·å¯ç”¨äºæ•°æ®å¢å¼ºã€‚ åœ¨ç”¨JavaScriptæ’°å†™æœ¬æ–‡æ—¶ï¼Œæ²¡æœ‰å¤ªå¤šé€‰æ‹©ï¼Œå› æ­¤æˆ‘ä½¿ç”¨äº†åœ¨Pythonä¸­å®ç°çš„åº“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-imgaug</a> ã€‚ å®ƒå…·æœ‰ä¸€ç»„å¯ä»¥æ¦‚ç‡åº”ç”¨çš„å¢å¼ºå™¨ã€‚ <br><br> è¿™æ˜¯æ­¤å®éªŒçš„æ•°æ®æ‰©å……é€»è¾‘ï¼š <br><br><pre> <code class="python hljs">np.random.seed(<span class="hljs-number"><span class="hljs-number">44</span></span>) ia.seed(<span class="hljs-number"><span class="hljs-number">44</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">191</span></span>): draw_single_sequential_images(str(i), <span class="hljs-string"><span class="hljs-string">"others"</span></span>, <span class="hljs-string"><span class="hljs-string">"others-aug"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">191</span></span>): draw_single_sequential_images(str(i), <span class="hljs-string"><span class="hljs-string">"hits"</span></span>, <span class="hljs-string"><span class="hljs-string">"hits-aug"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">191</span></span>): draw_single_sequential_images(str(i), <span class="hljs-string"><span class="hljs-string">"kicks"</span></span>, <span class="hljs-string"><span class="hljs-string">"kicks-aug"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_single_sequential_images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, path, aug_path)</span></span></span><span class="hljs-function">:</span></span> image = misc.imresize(ndimage.imread(path + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + filename + <span class="hljs-string"><span class="hljs-string">".jpg"</span></span>), (<span class="hljs-number"><span class="hljs-number">56</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)) sometimes = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> aug: iaa.Sometimes(<span class="hljs-number"><span class="hljs-number">0.5</span></span>, aug) seq = iaa.Sequential( [ iaa.Fliplr(<span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-comment"><span class="hljs-comment"># horizontally flip 50% of all images # crop images by -5% to 10% of their height/width sometimes(iaa.CropAndPad( percent=(-0.05, 0.1), pad_mode=ia.ALL, pad_cval=(0, 255) )), sometimes(iaa.Affine( scale={"x": (0.8, 1.2), "y": (0.8, 1.2)}, # scale images to 80-120% of their size, individually per axis translate_percent={"x": (-0.1, 0.1), "y": (-0.1, 0.1)}, # translate by -10 to +10 percent (per axis) rotate=(-5, 5), shear=(-5, 5), # shear by -5 to +5 degrees order=[0, 1], # use nearest neighbour or bilinear interpolation (fast) cval=(0, 255), # if mode is constant, use a cval between 0 and 255 mode=ia.ALL # use any of scikit-image's warping modes (see 2nd image from the top for examples) )), iaa.Grayscale(alpha=(0.0, 1.0)), iaa.Invert(0.05, per_channel=False), # invert color channels # execute 0 to 5 of the following (less important) augmenters per image # don't execute all of them, as that would often be way too strong iaa.SomeOf((0, 5), [ iaa.OneOf([ iaa.GaussianBlur((0, 2.0)), # blur images with a sigma between 0 and 2.0 iaa.AverageBlur(k=(2, 5)), # blur image using local means with kernel sizes between 2 and 5 iaa.MedianBlur(k=(3, 5)), # blur image using local medians with kernel sizes between 3 and 5 ]), iaa.Sharpen(alpha=(0, 1.0), lightness=(0.75, 1.5)), # sharpen images iaa.Emboss(alpha=(0, 1.0), strength=(0, 2.0)), # emboss images iaa.AdditiveGaussianNoise(loc=0, scale=(0.0, 0.01*255), per_channel=0.5), # add gaussian noise to images iaa.Add((-10, 10), per_channel=0.5), # change brightness of images (by -10 to 10 of original value) iaa.AddToHueAndSaturation((-20, 20)), # change hue and saturation # either change the brightness of the whole image (sometimes # per channel) or change the brightness of subareas iaa.OneOf([ iaa.Multiply((0.9, 1.1), per_channel=0.5), iaa.FrequencyNoiseAlpha( exponent=(-2, 0), first=iaa.Multiply((0.9, 1.1), per_channel=True), second=iaa.ContrastNormalization((0.9, 1.1)) ) ]), iaa.ContrastNormalization((0.5, 2.0), per_channel=0.5), # improve or worsen the contrast ], random_order=True ) ], random_order=True ) im = np.zeros((16, 56, 100, 3), dtype=np.uint8) for c in range(0, 16): im[c] = image for im in range(len(grid)): misc.imsave(aug_path + "/" + filename + "_" + str(im) + ".jpg", grid[im])</span></span></code> </pre> <br> è¯¥è„šæœ¬ä½¿ç”¨å…·æœ‰ä¸‰ä¸ª<code>for</code>å¾ªç¯çš„<code>main</code>æ–¹æ³•-æ¯ä¸ªå›¾åƒç±»åˆ«ä¸€ä¸ªã€‚ åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œåœ¨æ¯ä¸ªå¾ªç¯ä¸­ï¼Œæˆ‘ä»¬éƒ½è°ƒç”¨<code>draw_single_sequential_images</code>æ–¹æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªæ˜¯è·¯å¾„ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¿å­˜ç»“æœçš„ç›®å½•ã€‚ <br><br> ä¹‹åï¼Œæˆ‘ä»¬ä»ç£ç›˜è¯»å–æ˜ åƒï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¸€ç³»åˆ—è½¬æ¢ã€‚ æˆ‘å·²ç»åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­è®°å½•äº†å¤§å¤šæ•°è½¬æ¢ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸å†é‡å¤ã€‚ <br><br> å¯¹äºæ¯ä¸ªå›¾åƒï¼Œè¿˜å°†åˆ›å»ºå…¶ä»–16å¼ å›¾ç‰‡ã€‚ è¿™æ˜¯å®ƒä»¬çš„å¤–è§‚ç¤ºä¾‹ï¼š <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/759/ad9/43d/759ad943d7aa07dbccee4a6f26a1d920.jpg"></a> <br><br> è¯·æ³¨æ„ï¼Œåœ¨ä¸Šè¿°è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬å°†å›¾åƒç¼©æ”¾åˆ°<code>100x56</code>åƒç´ ã€‚ æˆ‘ä»¬è¿™æ ·åšæ˜¯ä¸ºäº†å‡å°‘æ•°æ®é‡ï¼Œä»è€Œå‡å°‘æˆ‘ä»¬çš„æ¨¡å‹åœ¨è®­ç»ƒå’Œè¯„ä¼°æœŸé—´æ‰§è¡Œçš„è®¡ç®—æ•°é‡ã€‚ <br><br><h1> æ¨¡å‹åˆ¶ä½œ </h1><br> ç°åœ¨å»ºç«‹åˆ†ç±»æ¨¡å‹ï¼ <br><br> ç”±äºæˆ‘ä»¬æ­£åœ¨å¤„ç†å›¾åƒï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ã€‚ å·²çŸ¥è¯¥ç½‘ç»œä½“ç³»ç»“æ„é€‚ç”¨äºå›¾åƒè¯†åˆ«ï¼Œå¯¹è±¡æ£€æµ‹å’Œåˆ†ç±»ã€‚ <br><br><h3> å­¦ä¹ è½¬ç§» </h3><br> ä¸‹å›¾æ˜¾ç¤ºäº†æµè¡Œçš„CNN VGG-16ï¼Œç”¨äºå¯¹å›¾åƒè¿›è¡Œåˆ†ç±»ã€‚ <br><br><img src="https://habrastorage.org/webt/7t/0u/zk/7t0uzk4kdf4pbesgvlojn5nal18.png"><br><br>  VGG-16ç¥ç»ç½‘ç»œå¯è¯†åˆ«1000ç§å›¾åƒç±»åˆ«ã€‚ å®ƒæœ‰16å±‚ï¼ˆä¸è®¡ç®—æ± å’Œè¾“å‡ºå±‚ï¼‰ã€‚ è¿™æ ·çš„å¤šå±‚ç½‘ç»œåœ¨å®è·µä¸­å¾ˆéš¾è®­ç»ƒã€‚ è¿™å°†éœ€è¦å¤§é‡çš„æ•°æ®é›†å’Œè®¸å¤šå°æ—¶çš„åŸ¹è®­ã€‚ <br><br> è¢«è®­ç»ƒçš„CNNçš„éšè—å±‚ä»è¾¹ç¼˜å¼€å§‹è¯†åˆ«è®­ç»ƒé›†ä¸­çš„å›¾åƒçš„å„ç§å…ƒç´ ï¼Œç„¶åç§»åŠ¨åˆ°æ›´å¤æ‚çš„å…ƒç´ ï¼Œä¾‹å¦‚å½¢çŠ¶ï¼Œå•ä¸ªå¯¹è±¡ç­‰ã€‚  VGG-16é£æ ¼çš„ç»è¿‡è®­ç»ƒçš„CNNï¼ˆç”¨äºè¯†åˆ«å¤§é‡å›¾åƒï¼‰å¿…é¡»å…·æœ‰éšè—å±‚ï¼Œè¿™äº›éšè—å±‚å·²ä»è®­ç»ƒé›†ä¸­å­¦ä¹ äº†å¾ˆå¤šåŠŸèƒ½ã€‚ è¿™äº›åŠŸèƒ½å¯¹äºå¤§å¤šæ•°å›¾åƒæ¥è¯´æ˜¯é€šç”¨çš„ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸åŒçš„ä»»åŠ¡ä¸­é‡å¤ä½¿ç”¨ã€‚ <br><br> å­¦ä¹ è½¬ç§»ä½¿æ‚¨å¯ä»¥é‡ç”¨ç°æœ‰ä¸”ç»è¿‡åŸ¹è®­çš„ç½‘ç»œã€‚ æˆ‘ä»¬å¯ä»¥ä»ç°æœ‰ç½‘ç»œçš„ä»»ä½•å±‚è·å–è¾“å‡ºï¼Œå¹¶å°†å…¶ä½œä¸ºè¾“å…¥ä¼ é€’åˆ°æ–°çš„ç¥ç»ç½‘ç»œã€‚ å› æ­¤ï¼Œé€šè¿‡æ•™å¯¼æ–°åˆ›å»ºçš„ç¥ç»ç½‘ç»œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¯ä»¥æ•™å¯¼äººä»¬è¯†åˆ«æ›´é«˜çº§åˆ«çš„æ–°åŠŸèƒ½ï¼Œå¹¶ä»åŸå§‹æ¨¡å‹ä»æœªè§è¿‡çš„ç±»ä¸­æ­£ç¡®åˆ†ç±»å›¾åƒã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7n/cc/a7/7ncca7e5ne2ammearn2sqnk4by0.png"></div><br><br> ä¸ºäº†æˆ‘ä»¬çš„ç›®çš„ï¼Œè¯·ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@ tensorflow-models / mobilenetè½¯ä»¶åŒ…ä¸­</a>è·å–MobileNetç¥ç»ç½‘ç»œã€‚  MobileNetçš„åŠŸèƒ½ä¸VGG-16ä¸€æ ·å¼ºå¤§ï¼Œä½†ä½“ç§¯å´å°å¾—å¤šï¼Œä»è€Œå¯ä»¥åŠ å¿«ç›´æ¥åˆ†å‘é€Ÿåº¦ï¼Œå³ç½‘ç»œä¼ æ’­ï¼ˆæ­£å‘ä¼ æ’­ï¼‰çš„é€Ÿåº¦ï¼Œå¹¶å‡å°‘æµè§ˆå™¨ä¸­çš„ä¸‹è½½æ—¶é—´ã€‚  MobileNetæ¥å—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ILSVRC-2012-CLS</a>å›¾åƒåˆ†ç±»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•°æ®é›†çš„</a>åŸ¹è®­ã€‚ <br><br> åœ¨å¼€å‘å…·æœ‰å­¦ä¹ è½¬ç§»çš„æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š <br><br><ol><li> æºæ¨¡å‹çš„å“ªä¸€å±‚ç”¨ä½œç›®æ ‡æ¨¡å‹çš„è¾“å…¥çš„è¾“å‡ºã€‚ </li><li> æˆ‘ä»¬å°†è®­ç»ƒç›®æ ‡æ¨¡å‹ä¸­çš„å¤šå°‘å±‚ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ </li></ol><br> ç¬¬ä¸€ç‚¹éå¸¸é‡è¦ã€‚ æ ¹æ®æ‰€é€‰å±‚çš„ä¸åŒï¼Œæˆ‘ä»¬å°†ä»¥è¾ƒä½æˆ–è¾ƒé«˜çš„æŠ½è±¡æ°´å¹³è·å¾—è¦ç´ ï¼Œä½œä¸ºå¯¹ç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚ <br><br> æˆ‘ä»¬ä¸ä¼šè®­ç»ƒMobileNetçš„ä»»ä½•å±‚ã€‚ æˆ‘ä»¬ä»<code>global_average_pooling2d_1</code>è¾“å‡ºï¼Œå¹¶å°†å…¶ä½œä¸ºè¾“å…¥ä¼ é€’åˆ°æˆ‘ä»¬çš„å¾®å‹æ¨¡å‹ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©æ­¤ç‰¹å®šå›¾å±‚ï¼Ÿ æ ¹æ®ç»éªŒã€‚ æˆ‘åšäº†ä¸€äº›æµ‹è¯•ï¼Œè¿™ä¸€å±‚å·¥ä½œå¾—å¾ˆå¥½ã€‚ <br><br><h3> å‹å·å®šä¹‰ </h3><br> æœ€åˆçš„ä»»åŠ¡æ˜¯å°†å›¾åƒåˆ†ä¸ºä¸‰ç±»ï¼šæ‰‹ï¼Œè„šå’Œå…¶ä»–è¿åŠ¨ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬è§£å†³è¾ƒå°çš„é—®é¢˜ï¼šæˆ‘ä»¬å°†ç¡®å®šæ¡†æ¶ä¸­æ˜¯å¦æœ‰æ‰‹è§¦ã€‚ è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒè¿›åˆ¶åˆ†ç±»é—®é¢˜ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»¥ä¸‹æ¨¡å‹ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@tensorflow/tfjs'</span></span>; const model = tf.sequential(); model.add(tf.layers.inputLayer({ inputShape: [<span class="hljs-number"><span class="hljs-number">1024</span></span>] })); model.add(tf.layers.dense({ units: <span class="hljs-number"><span class="hljs-number">1024</span></span>, activation: <span class="hljs-string"><span class="hljs-string">'relu'</span></span> })); model.add(tf.layers.dense({ units: <span class="hljs-number"><span class="hljs-number">1</span></span>, activation: <span class="hljs-string"><span class="hljs-string">'sigmoid'</span></span> })); model.compile({ optimizer: tf.train.adam(<span class="hljs-number"><span class="hljs-number">1e-6</span></span>), loss: tf.losses.sigmoidCrossEntropy, metrics: [<span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>] });</code> </pre> <br> è¿™æ ·çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼Œä¸€ä¸ªå…·æœ‰<code>1024</code>å•å…ƒçš„å±‚å’Œ<code>ReLU</code>æ¿€æ´»ï¼Œä»¥åŠä¸€ä¸ªé€šè¿‡<code>sigmoid</code>æ¿€æ´»<code>sigmoid</code>è¾“å‡ºå•å…ƒã€‚ åè€…ç»™å‡ºä¸€ä¸ªä»<code>0</code>åˆ°<code>1</code> ï¼Œå…·ä½“å–å†³äºè¯¥å¸§ä¸­æ‰‹éƒ¨æ‰“å‡»çš„å¯èƒ½æ€§ã€‚ <br><br> ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©<code>1024</code>å•å…ƒä½œä¸ºç¬¬äºŒçº§ä¸”è®­ç»ƒé€Ÿåº¦ä¸º<code>1e-6</code> ï¼Ÿ å¥½å§ï¼Œæˆ‘å°è¯•äº†å‡ ç§ä¸åŒçš„é€‰æ‹©ï¼Œå¹¶ä¸”å‘ç°è¿™ç§é€‰æ‹©æ•ˆæœæœ€å¥½ã€‚  Spearæ–¹æ³•ä¼¼ä¹å¹¶ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œè¿™å°±æ˜¯æ·±åº¦å­¦ä¹ ä¸­è¶…å‚æ•°è®¾ç½®çš„å·¥ä½œæ–¹å¼-åŸºäºå¯¹æ¨¡å‹çš„ç†è§£ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›´è§‰æ¥æ›´æ–°æ­£äº¤å‚æ•°å¹¶å‡­ç»éªŒéªŒè¯æ¨¡å‹çš„å·¥ä½œæ–¹å¼ã€‚ <br><br>  <code>compile</code>æ–¹æ³•å°†å„å±‚ç¼–è¯‘åœ¨ä¸€èµ·ï¼Œä¸ºè®­ç»ƒå’Œè¯„ä¼°å‡†å¤‡æ¨¡å‹ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®£å¸ƒæˆ‘ä»¬è¦ä½¿ç”¨<code>adam</code>ä¼˜åŒ–ç®—æ³•ã€‚ æˆ‘ä»¬è¿˜å£°æ˜æˆ‘ä»¬å°†æ ¹æ®äº¤å‰ç†µè®¡ç®—æŸå¤±ï¼ˆæŸå¤±ï¼‰ï¼Œå¹¶è¡¨æ˜æˆ‘ä»¬è¦è¯„ä¼°æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚ ç„¶åTensorFlow.jsä½¿ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—å‡†ç¡®æ€§ï¼š <br><br> <code>Accuracy = (True Positives + True Negatives) / (Positives + Negatives)</code> <br> <br> å¦‚æœæ‚¨ä»åŸå§‹MobileNetæ¨¡å‹è½¬ç§»åŸ¹è®­ï¼Œåˆ™å¿…é¡»é¦–å…ˆä¸‹è½½å®ƒã€‚ ç”±äºåœ¨æµè§ˆå™¨ä¸­åœ¨è¶…è¿‡3,000å¼ å›¾åƒä¸Šè®­ç»ƒæ¨¡å‹æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨Node.jså¹¶ä»æ–‡ä»¶ä¸­åŠ è½½ç¥ç»ç½‘ç»œã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>ä¸‹è½½MobileNetã€‚ ç›®å½•åŒ…å«æ–‡ä»¶<code>model.json</code> ï¼Œå…¶ä¸­åŒ…å«æ¨¡å‹çš„ä½“ç³»ç»“æ„-å±‚ï¼Œæ¿€æ´»ç­‰ã€‚ å…¶ä½™æ–‡ä»¶åŒ…å«æ¨¡å‹å‚æ•°ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ä»æ–‡ä»¶ä¸­åŠ è½½æ¨¡å‹ï¼š <br><br><pre> <code class="python hljs">export const loadModel = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { const mn = new mobilenet.MobileNet(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); mn.path = `file://PATH/TO/model.json`; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> mn.load(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (input): tf.Tensor1D =&gt; mn.infer(input, <span class="hljs-string"><span class="hljs-string">'global_average_pooling2d_1'</span></span>) .reshape([<span class="hljs-number"><span class="hljs-number">1024</span></span>]); };</code> </pre> <br> è¯·æ³¨æ„ï¼Œåœ¨<code>loadModel</code>æ–¹æ³•ä¸­<code>loadModel</code>æˆ‘ä»¬è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ç»´å¼ é‡ä½œä¸ºè¾“å…¥å¹¶è¿”å›<code>mn.infer(input, Layer)</code> ã€‚  <code>infer</code>æ–¹æ³•é‡‡ç”¨å¼ é‡å’Œå±‚ä½œä¸ºå‚æ•°ã€‚ è¯¥å±‚ç¡®å®šæˆ‘ä»¬è¦ä»å“ªä¸ªéšè—å±‚è¾“å‡ºã€‚ å¦‚æœæ‰“å¼€<a href="">model.json</a>å¹¶<code>global_average_pooling2d_1</code> ï¼Œåˆ™ä¼šåœ¨å…¶ä¸­ä¸€å±‚ä¸Šæ‰¾åˆ°è¿™æ ·çš„åç§°ã€‚ <br><br> ç°åœ¨ï¼Œæ‚¨éœ€è¦åˆ›å»ºç”¨äºè®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ‰€æœ‰å›¾åƒä¼ é€’ç»™MobileNetä¸­çš„<code>infer</code>æ–¹æ³•ï¼Œå¹¶ä¸ºå…¶åˆ†é…æ ‡ç­¾ï¼š <code>1</code>è¡¨ç¤ºå¸¦æœ‰ç¬”åˆ’çš„å›¾åƒï¼Œ <code>0</code>è¡¨ç¤ºæ²¡æœ‰ç¬”åˆ’çš„å›¾åƒï¼š <br><br><pre> <code class="python hljs">const punches = require(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) .readdirSync(Punches) .filter(f =&gt; f.endsWith(<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>)) .map(f =&gt; `${Punches}/${f}`); const others = require(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) .readdirSync(Others) .filter(f =&gt; f.endsWith(<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>)) .map(f =&gt; `${Others}/${f}`); const ys = tf.tensor1d( new Array(punches.length).fill(<span class="hljs-number"><span class="hljs-number">1</span></span>) .concat(new Array(others.length).fill(<span class="hljs-number"><span class="hljs-number">0</span></span>))); const xs: tf.Tensor2D = tf.stack( punches .map((path: string) =&gt; mobileNet(readInput(path))) .concat(others.map((path: string) =&gt; mobileNet(readInput(path)))) ) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf.Tensor2D;</code> </pre> <br> åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè¯»å–å¸¦æœ‰æˆ–ä¸å¸¦æœ‰åŒ¹é…é¡¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ ç„¶åæˆ‘ä»¬ç¡®å®šåŒ…å«è¾“å‡ºæ ‡ç­¾çš„ä¸€ç»´å¼ é‡ã€‚ å¦‚æœæˆ‘ä»¬æœ‰<code>n</code>å¸¦æœ‰ç¬”è§¦çš„å›¾åƒå’Œ<code>m</code>å…¶ä»–å›¾åƒï¼Œåˆ™å¼ é‡å°†åŒ…å«<code>n</code>å…ƒç´ çš„å€¼ä¸º1ï¼Œ <code>m</code>å…ƒç´ çš„å€¼ä¸º0ã€‚ <br><br> åœ¨<code>xs</code>æˆ‘ä»¬ä¸ºå•ä¸ªå›¾åƒæ·»åŠ äº†è°ƒç”¨<code>infer</code>æ–¹æ³•çš„ç»“æœã€‚ è¯·æ³¨æ„ï¼Œå¯¹äºæ¯ä¸ªå›¾åƒï¼Œæˆ‘ä»¬éƒ½è°ƒç”¨<code>readInput</code>æ–¹æ³•ã€‚ è¿™æ˜¯å®ƒçš„å®ç°ï¼š <br><br><pre> <code class="python hljs">export const readInput = img =&gt; imageToInput(readImage(img), TotalChannels); const readImage = path =&gt; jpeg.decode(fs.readFileSync(path), true); const imageToInput = image =&gt; { const values = serializeImage(image); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tf.tensor3d(values, [image.height, image.width, <span class="hljs-number"><span class="hljs-number">3</span></span>], <span class="hljs-string"><span class="hljs-string">'int32'</span></span>); }; const serializeImage = image =&gt; { const totalPixels = image.width * image.height; const result = new Int32Array(totalPixels * <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (let i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; totalPixels; i++) { result[i * <span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">0</span></span>] = image.data[i * <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">0</span></span>]; result[i * <span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>] = image.data[i * <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>]; result[i * <span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>] = image.data[i * <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; };</code> </pre> <br>  <code>readInput</code>é¦–å…ˆè°ƒç”¨<code>readImage</code>å‡½æ•°ï¼Œç„¶åå°†å…¶è°ƒç”¨å§”æ‰˜ç»™<code>imageToInput</code> ã€‚  <code>readImage</code>å‡½æ•°ä»ç£ç›˜è¯»å–å›¾åƒï¼Œç„¶åä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">jpeg-js</a>åŒ…ä»ç¼“å†²åŒºè§£ç jpgã€‚ åœ¨<code>imageToInput</code>æˆ‘ä»¬å°†å›¾åƒè½¬æ¢ä¸ºä¸‰ç»´å¼ é‡ã€‚ <br><br> ç»“æœï¼Œå¯¹äºæ¯ä¸ªä»<code>0</code>åˆ°<code>TotalImages</code> <code>ys[i]</code> ï¼Œå¦‚æœ<code>xs[i]</code>å¯¹åº”äºå…·æœ‰ç‚¹å‡»çš„å›¾åƒï¼Œåˆ™<code>ys[i]</code>ç­‰äº<code>1</code> ï¼Œå¦åˆ™ä¸º<code>0</code> ã€‚ <br><br><h1> æ¨¡å‹è®­ç»ƒ </h1><br> ç°åœ¨è¯¥æ¨¡å‹å·²å‡†å¤‡å¥½è¿›è¡Œè®­ç»ƒï¼ è°ƒç”¨<code>fit</code>æ–¹æ³•ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> model.fit(xs, ys, { epochs: Epochs, batchSize: parseInt(((punches.length + others.length) * BatchSize).toFixed(<span class="hljs-number"><span class="hljs-number">0</span></span>)), callbacks: { onBatchEnd: <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (_, logs) =&gt; { console.log(<span class="hljs-string"><span class="hljs-string">'Cost: %s, accuracy: %s'</span></span>, logs.loss.toFixed(<span class="hljs-number"><span class="hljs-number">5</span></span>), logs.acc.toFixed(<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> tf.nextFrame(); } } });</code> </pre> <br> ä¸Šé¢çš„ä»£ç è°ƒç”¨åŒ…å«ä¸‰ä¸ªå‚æ•°ï¼š <code>xs</code> ï¼Œyså’Œé…ç½®å¯¹è±¡ã€‚ åœ¨é…ç½®å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å°†è®¾ç½®è®­ç»ƒæ¨¡å‹çš„æ•°é‡ï¼Œæ•°æ®åŒ…å¤§å°ä»¥åŠTensorFlow.jsåœ¨å¤„ç†æ¯ä¸ªæ•°æ®åŒ…åå°†ç”Ÿæˆçš„å›è°ƒçš„æ¬¡æ•°ã€‚ <br><br> æ•°æ®åŒ…å¤§å°å†³å®šäº†<code>xs</code>å’Œ<code>ys</code>ä»¥ä¾¿åœ¨ä¸€ä¸ªæ—¶ä»£ä¸­è®­ç»ƒæ¨¡å‹ã€‚ å¯¹äºæ¯ä¸ªæ—¶ä»£ï¼ŒTensorFlow.jså°†ä»<code>ys</code>é€‰æ‹©<code>xs</code>çš„å­é›†å’Œç›¸åº”çš„å…ƒç´ ï¼Œæ‰§è¡Œç›´æ¥åˆ†é…ï¼Œä»¥<code>sigmoid</code>æ¿€æ´»æ–¹å¼æ¥æ”¶å±‚çš„è¾“å‡ºï¼Œç„¶ååŸºäºæŸå¤±ï¼Œä½¿ç”¨<code>adam</code>ç®—æ³•æ‰§è¡Œä¼˜åŒ–ã€‚ <br><br> å¯åŠ¨è®­ç»ƒè„šæœ¬åï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹ç»“æœï¼š <br><br><pre> æˆæœ¬ï¼š0.84212ï¼Œç²¾åº¦ï¼š1.00000
 eta = 0.3&gt; ---------- acc = 1.00æŸå¤±= 0.84æˆæœ¬ï¼š0.79740ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.2 =&gt; --------- acc = 1.00æŸå¤±= 0.80æˆæœ¬ï¼š0.81533ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.2 ==&gt; -------- acc = 1.00æŸå¤±= 0.82æˆæœ¬ï¼š0.64303ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.2 ===&gt; ------- acc = 0.50æŸå¤±= 0.64æˆæœ¬ï¼š0.51377ï¼Œå‡†ç¡®æ€§ï¼š0.00000
 eta = 0.2 ====&gt; ------ acc = 0.00æŸå¤±= 0.51æˆæœ¬ï¼š0.46473ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.1 =====&gt; ----- acc = 0.50æŸå¤±= 0.46æˆæœ¬ï¼š0.50872ï¼Œå‡†ç¡®æ€§ï¼š0.00000
 eta = 0.1 ======&gt; acc = 0.00æŸå¤±= 0.51æˆæœ¬ï¼š0.62556ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.1 =======&gt; --- acc = 1.00æŸå¤±= 0.63æˆæœ¬ï¼š0.65133ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.1 =======&gt;-acc = 0.50æŸå¤±= 0.65æˆæœ¬ï¼š0.63824ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.0 ===========&gt;
 293ms 14675us /æ­¥-acc = 0.60æŸè€—= 0.65
æ—¶ä»£3/50
è´¹ç”¨ï¼š0.44661ï¼Œå‡†ç¡®æ€§ï¼š1.000000
 eta = 0.3&gt; ---------- acc = 1.00æŸå¤±= 0.45æˆæœ¬ï¼š0.78060ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.3 =&gt; --------- acc = 1.00æŸå¤±= 0.78æˆæœ¬ï¼š0.79208ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.3 ==&gt; -------- acc = 1.00æŸå¤±= 0.79æˆæœ¬ï¼š0.49072ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.2 ===&gt; ------- acc = 0.50æŸå¤±= 0.49æˆæœ¬ï¼š0.62232ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.2 ====&gt; ------ acc = 1.00æŸå¤±= 0.62æˆæœ¬ï¼š0.82899ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.2 =====&gt; ----- acc = 1.00æŸå¤±= 0.83æˆæœ¬ï¼š0.67629ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.1 ======&gt; ---- acc = 0.50æŸå¤±= 0.68æˆæœ¬ï¼š0.62621ï¼Œå‡†ç¡®æ€§ï¼š0.50000
 eta = 0.1 =======&gt; --- acc = 0.50æŸå¤±= 0.63æˆæœ¬ï¼š0.46077ï¼Œå‡†ç¡®æ€§ï¼š1.00000
 eta = 0.1 =======&gt;-acc = 1.00æŸå¤±= 0.46æˆæœ¬ï¼š0.62076ï¼Œå‡†ç¡®æ€§ï¼š1.000000
 eta = 0.0 ===========&gt;
 304ms 15221us / step-acc = 0.85æŸè€—= 0.63 </pre><br> è¯·æ³¨æ„ï¼Œéšç€æ—¶é—´çš„æµé€ï¼Œç²¾åº¦å¦‚ä½•æé«˜ï¼Œè€ŒæŸè€—å´å¦‚ä½•é™ä½ã€‚ <br><br> åœ¨æˆ‘çš„æ•°æ®é›†ä¸Šï¼Œè®­ç»ƒåçš„æ¨¡å‹æ˜¾ç¤ºå‡º92ï¼…çš„å‡†ç¡®æ€§ã€‚ è¯·è®°ä½ï¼Œç”±äºè®­ç»ƒæ•°æ®é›†å¾ˆå°‘ï¼Œå› æ­¤å‡†ç¡®æ€§å¯èƒ½ä¸æ˜¯å¾ˆé«˜ã€‚ <br><br><h1> åœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ¨¡å‹ </h1><br> åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®­ç»ƒäº†äºŒè¿›åˆ¶åˆ†ç±»æ¨¡å‹ã€‚ ç°åœ¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œå®ƒå¹¶è¿æ¥åˆ°<a href="">MK.js</a> ï¼ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> video = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'cam'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Layer = <span class="hljs-string"><span class="hljs-string">'global_average_pooling2d_1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mobilenetInfer = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m</span></span></span><span class="hljs-function"> =&gt;</span></span> (p): tf.Tensor&lt;tf.Rank&gt; =&gt; m.infer(p, Layer); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> canvas = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'canvas'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scale = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'crop'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ImageSize = { <span class="hljs-attr"><span class="hljs-attr">Width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">Height</span></span>: <span class="hljs-number"><span class="hljs-number">56</span></span> }; navigator.mediaDevices .getUserMedia({ <span class="hljs-attr"><span class="hljs-attr">video</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">audio</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stream</span></span></span><span class="hljs-function"> =&gt;</span></span> { video.srcObject = stream; });</code> </pre> <br> ä¸Šé¢çš„ä»£ç ä¸­æœ‰å‡ ä¸ªå£°æ˜ï¼š <br><br><ul><li> <code>video</code>     <code>HTML5 video</code>   </li><li> <code>Layer</code>     MobileNet,                  </li><li> <code>mobilenetInfer</code> â€” ,    MobileNet    .              MobileNet </li><li> <code>canvas</code>    <code>HTML5 canvas</code> ,          </li><li> <code>scale</code> â€”   <code>canvas</code> ,       </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹åï¼Œæˆ‘ä»¬ä»ç”¨æˆ·çš„æ‘„åƒå¤´è·å–è§†é¢‘æµï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºelementçš„æº</font></font><code>video</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ä¸€æ­¥æ˜¯å®ç°ä¸€ä¸ªæ¥å—</font></font><code>canvas</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶è½¬æ¢å…¶å†…å®¹</font><font style="vertical-align: inherit;">çš„ç°åº¦æ»¤é•œ</font><font style="vertical-align: inherit;">ï¼š</font></font><br><br><pre> <code class="python hljs">const grayscale = (canvas: HTMLCanvasElement) =&gt; { const imageData = canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>).getImageData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, canvas.width, canvas.height); const data = imageData.data; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (let i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; data.length; i += <span class="hljs-number"><span class="hljs-number">4</span></span>) { const avg = (data[i] + data[i + <span class="hljs-number"><span class="hljs-number">1</span></span>] + data[i + <span class="hljs-number"><span class="hljs-number">2</span></span>]) / <span class="hljs-number"><span class="hljs-number">3</span></span>; data[i] = avg; data[i + <span class="hljs-number"><span class="hljs-number">1</span></span>] = avg; data[i + <span class="hljs-number"><span class="hljs-number">2</span></span>] = avg; } canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>).putImageData(imageData, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æ¨¡å‹ä¸MK.jsè¿æ¥ï¼š </font></font><br><br><pre> <code class="python hljs">let mobilenet: (p: any) =&gt; tf.Tensor&lt;tf.Rank&gt;; tf.loadModel(<span class="hljs-string"><span class="hljs-string">'http://localhost:5000/model.json'</span></span>).then(model =&gt; { mobileNet .load() .then((mn: any) =&gt; mobilenet = mobilenetInfer(mn)) .then(startInterval(mobilenet, model)); });</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåŠ è½½ä¸Šé¢è®­ç»ƒçš„æ¨¡å‹ï¼Œç„¶åä¸‹è½½MobileNetã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†MobileNetä¼ é€’ç»™è¯¥æ–¹æ³•ï¼Œ</font></font><code>mobilenetInfer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥è·å¾—ä»éšè—ç½‘ç»œå±‚è®¡ç®—è¾“å‡ºçš„æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">ä¹‹åï¼Œæˆ‘ä»¬</font></font><code>startInterval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¸¤ä¸ªç½‘ç»œä½œä¸ºå‚æ•°</font><font style="vertical-align: inherit;">è°ƒç”¨è¯¥æ–¹æ³•</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="python hljs">const startInterval = (mobilenet, model) =&gt; () =&gt; { setInterval(() =&gt; { canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>).drawImage(video, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); grayscale(scale .getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>) .drawImage( canvas, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, canvas.width, canvas.width / (ImageSize.Width / ImageSize.Height), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, ImageSize.Width, ImageSize.Height )); const [punching] = Array.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>(( model.predict(mobilenet(tf.fromPixels(scale))) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf.Tensor1D) .dataSync() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Float32Array); const detect = (window <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> any).Detect; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (punching &gt;= <span class="hljs-number"><span class="hljs-number">0.4</span></span>) detect &amp;&amp; detect.onPunch(); }, <span class="hljs-number"><span class="hljs-number">100</span></span>); };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€æœ‰è¶£çš„éƒ¨åˆ†å§‹äºæ–¹æ³•</font></font><code>startInterval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼é¦–å…ˆï¼Œæˆ‘ä»¬è¿è¡Œä¸€ä¸ªé—´éš”ï¼Œæ¯ä¸ªäººéƒ½</font></font><code>100ms</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°ƒç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚åœ¨å…¶ä¸­ï¼Œ</font></font><code>canvas</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰å½“å‰å¸§</font><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">è§†é¢‘</font><font style="vertical-align: inherit;">é¦–å…ˆåœ¨å…¶é¡¶éƒ¨</font><font style="vertical-align: inherit;">å‘ˆç°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å¸§å°ºå¯¸å‡å°åˆ°ï¼Œ</font></font><code>100x56</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å¯¹å…¶åº”ç”¨ç°åº¦æ»¤é•œã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ä¸€æ­¥æ˜¯å°†å¸§ä¼ è¾“åˆ°MobileNetï¼Œä»æ‰€éœ€çš„éšè—å±‚è·å–è¾“å‡ºï¼Œå¹¶å°†å…¶ä½œä¸ºè¾“å…¥ä¼ è¾“åˆ°</font></font><code>predict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬çš„æ¨¡å‹</font><font style="vertical-align: inherit;">æ–¹æ³•ä¸­</font><font style="vertical-align: inherit;">ã€‚è¿™å°†è¿”å›å…·æœ‰ä¸€ä¸ªå…ƒç´ çš„å¼ é‡ã€‚ä½¿ç”¨ï¼Œ</font></font><code>dataSync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ä»å¼ é‡è·å¾—å€¼å¹¶å°†å…¶åˆ†é…ç»™ä¸€ä¸ªå¸¸é‡</font></font><code>punching</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åï¼Œæˆ‘ä»¬æ£€æŸ¥ï¼šå¦‚æœè§¦å‡»çš„å¯èƒ½æ€§è¶…è¿‡</font></font><code>0.4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™æˆ‘ä»¬è°ƒç”¨</font></font><code>onPunch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">global object </font><font style="vertical-align: inherit;">method </font></font><code>Detect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ MK.jsä¸ºå…¨å±€å¯¹è±¡æä¾›äº†ä¸‰ç§æ–¹æ³•ï¼š</font></font><code>onKick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>onPunch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€Œä¸”</font></font><code>onStand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨äºæ§åˆ¶çš„äººç‰©ä¹‹ä¸€ã€‚</font></font><br><br> åšå®Œäº†ï¼<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç»“æœå°±æ˜¯è¿™é‡Œï¼ </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/05c/e0e/83e05ce0e9304865bb6aee072204902b.gif"><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å…·æœ‰Nåˆ†ç±»çš„è„šè¸¢å’Œæ‰‹è‡‚è¯†åˆ« </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ›´æ™ºèƒ½çš„æ¨¡å‹ï¼šè¯†åˆ«å‡ºæ‹³ï¼Œè„šè¸¢å’Œå…¶ä»–å›¾åƒçš„ç¥ç»ç½‘ç»œã€‚</font><font style="vertical-align: inherit;">è¿™æ¬¡ï¼Œè®©æˆ‘ä»¬ä»å‡†å¤‡è®­ç»ƒé›†å¼€å§‹ï¼š</font></font><br><br><pre> <code class="python hljs">const punches = require(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) .readdirSync(Punches) .filter(f =&gt; f.endsWith(<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>)) .map(f =&gt; `${Punches}/${f}`); const kicks = require(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) .readdirSync(Kicks) .filter(f =&gt; f.endsWith(<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>)) .map(f =&gt; `${Kicks}/${f}`); const others = require(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) .readdirSync(Others) .filter(f =&gt; f.endsWith(<span class="hljs-string"><span class="hljs-string">'.jpg'</span></span>)) .map(f =&gt; `${Others}/${f}`); const ys = tf.tensor2d( new Array(punches.length) .fill([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]) .concat(new Array(kicks.length).fill([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>])) .concat(new Array(others.length).fill([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>])), [punches.length + kicks.length + others.length, <span class="hljs-number"><span class="hljs-number">3</span></span>] ); const xs: tf.Tensor2D = tf.stack( punches .map((path: string) =&gt; mobileNet(readInput(path))) .concat(kicks.map((path: string) =&gt; mobileNet(readInput(path)))) .concat(others.map((path: string) =&gt; mobileNet(readInput(path)))) ) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf.Tensor2D;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œä»¥å‰ä¸€æ ·ï¼Œæˆ‘ä»¬é¦–å…ˆé˜…è¯»å¸¦æœ‰æ‰‹ï¼Œè„šå’Œå…¶ä»–å›¾åƒçš„æ‰“å­”å›¾åƒçš„ç›®å½•ã€‚æ­¤åï¼Œä¸ä¸Šæ¬¡ä¸åŒï¼Œæˆ‘ä»¬ä»¥äºŒç»´å¼ é‡è€Œä¸æ˜¯ä¸€ç»´çš„å½¢å¼å½¢æˆé¢„æœŸç»“æœã€‚å¦‚æœæˆ‘ä»¬æœ‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã‘</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾ç‰‡åŒ…å«æœ‰å†²å¤´ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±³</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾åƒä¸è¸¢å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ä·</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä»–å›¾åƒï¼Œå¼ é‡</font></font><code>ys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ˜¯</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å€¼çš„å…ƒä»¶</font></font><code>[1, 0, 0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸è¯¥å€¼çš„å…ƒç´ </font></font><code>[0, 1, 0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>k</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¡¹å…·æœ‰å€¼</font></font><code>[0, 0, 1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ª</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç´ </font><font style="vertical-align: inherit;">å‘é‡ï¼Œ</font><font style="vertical-align: inherit;">å…¶ä¸­æœ‰</font></font><code>n - 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªå…·æœ‰å€¼çš„å…ƒç´ å’Œä¸€ä¸ªå…·æœ‰å€¼çš„</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç´ </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬ç§°ä¸ºaçŸ¢é‡ï¼ˆone-hot vectorï¼‰ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹åï¼Œæˆ‘ä»¬å½¢æˆè¾“å…¥å¼ é‡</font></font><code>xs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å †å æ¥è‡ªMobileNetçš„æ¯ä¸ªå›¾åƒçš„è¾“å‡ºã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæ‚¨å¿…é¡»æ›´æ–°æ¨¡å‹å®šä¹‰ï¼š</font></font><br><br><pre> <code class="python hljs">const model = tf.sequential(); model.add(tf.layers.inputLayer({ inputShape: [<span class="hljs-number"><span class="hljs-number">1024</span></span>] })); model.add(tf.layers.dense({ units: <span class="hljs-number"><span class="hljs-number">1024</span></span>, activation: <span class="hljs-string"><span class="hljs-string">'relu'</span></span> })); model.add(tf.layers.dense({ units: <span class="hljs-number"><span class="hljs-number">3</span></span>, activation: <span class="hljs-string"><span class="hljs-string">'softmax'</span></span> })); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> model.compile({ optimizer: tf.train.adam(<span class="hljs-number"><span class="hljs-number">1e-6</span></span>), loss: tf.losses.sigmoidCrossEntropy, metrics: [<span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>] });</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¸ä»¥å‰çš„æ¨¡å‹ä»…æœ‰çš„ä¸¤ä¸ªåŒºåˆ«æ˜¯ï¼š </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¾“å‡ºå±‚ä¸­çš„å•ä½æ•° </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¾“å‡ºå±‚ä¸­çš„æ¿€æ´» </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¾“å‡ºå±‚ä¸­æœ‰ä¸‰ä¸ªå•ä½ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸‰ç§ä¸åŒçš„å›¾åƒç±»åˆ«ï¼š </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç½¢å·¥ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¸¢ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å…¶ä»– </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¿™ä¸‰ä¸ªå•å…ƒä¸Šè§¦å‘æ¿€æ´»</font></font><code>softmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™ä¼šå°†å®ƒä»¬çš„å‚æ•°è½¬æ¢ä¸ºå…·æœ‰ä¸‰ä¸ªå€¼çš„å¼ é‡ã€‚ä¸ºä»€ä¹ˆè¾“å‡ºå±‚éœ€è¦ä¸‰ä¸ªå•ä½ï¼Ÿä¸ºä¸‰ç±»çš„ä¸‰ä¸ªå€¼ä¸­çš„æ¯ä¸€ä¸ªå¯ä»¥ç”±ä¸¤ä¸ªæ¯”ç‰¹è¡¨ç¤ºï¼š</font></font><code>00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åˆ›å»ºçš„å¼ é‡å€¼çš„æ€»å’Œ</font></font><code>softmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šå¾—åˆ°00ï¼Œå› æ­¤æˆ‘ä»¬å°†æ— æ³•å¯¹å…¶ä¸­ä¸€ä¸ªç±»åˆ«çš„å›¾åƒè¿›è¡Œåˆ†ç±»ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»è¿‡å¤šå¹´çš„è®­ç»ƒ</font></font><code>500</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘çš„å‡†ç¡®ç‡è¾¾åˆ°äº†çº¦92ï¼…ï¼è¿™è¿˜ä¸é”™ï¼Œä½†æ˜¯è¯·ä¸è¦å¿˜è®°è®­ç»ƒæ˜¯åœ¨ä¸€ä¸ªå°çš„æ•°æ®é›†ä¸Šè¿›è¡Œçš„ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ä¸€æ­¥æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ¨¡å‹ï¼ç”±äºé€»è¾‘ä¸è¿è¡Œç”¨äºäºŒè¿›åˆ¶åˆ†ç±»çš„æ¨¡å‹éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤è¯·çœ‹æœ€åä¸€æ­¥ï¼Œå…¶ä¸­æ ¹æ®æ¨¡å‹çš„è¾“å‡ºé€‰æ‹©æ“ä½œï¼š</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [punch, kick, nothing] = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from((model.predict( mobilenet(tf.fromPixels(scaled)) ) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf.Tensor1D).dataSync() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Float32Array</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> detect = (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> any).Detect; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nothing &gt;= <span class="hljs-number"><span class="hljs-number">0.4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (kick &gt; punch &amp;&amp; kick &gt;= <span class="hljs-number"><span class="hljs-number">0.35</span></span>) { detect.onKick(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (punch &gt; kick &amp;&amp; punch &gt;= <span class="hljs-number"><span class="hljs-number">0.35</span></span>) detect.onPunch();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘ä»¬å°†MobileNetçš„æ¡†æ¶ç¼©å°ä¸ºç°è‰²é˜´å½±ï¼Œç„¶åå†ä¼ é€’ç»è¿‡è®­ç»ƒçš„æ¨¡å‹çš„ç»“æœã€‚</font><font style="vertical-align: inherit;">æ¨¡å‹è¿”å›ä¸€ç»´å¼ é‡ï¼Œæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º</font></font><code>Float32Array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>dataSync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†</font></font><code>Array.from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹åŒ–æ•°ç»„è½¬æ¢ä¸ºJavaScriptæ•°ç»„ã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œæˆ‘ä»¬æå–å¸§ä¸­å­˜åœ¨ç”¨æ‰‹ï¼Œè„šè¸¢æˆ–ä¸å‘çƒçš„æ¦‚ç‡ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœç¬¬ä¸‰ä¸ªç»“æœçš„æ¦‚ç‡è¶…è¿‡</font></font><code>0.4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å°†è¿”å›ã€‚</font><font style="vertical-align: inherit;">å¦åˆ™ï¼Œå¦‚æœå‘ç”Ÿè¸¢çš„å¯èƒ½æ€§æ›´é«˜</font></font><code>0.32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬ä¼šå‘MK.jså‘é€ä¸€ä¸ªè¸¢å‘½ä»¤ã€‚</font><font style="vertical-align: inherit;">å¦‚æœè¸¢</font></font><code>0.32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å¯èƒ½æ€§è¶Šæ¥è¶Šå¤§ï¼Œåˆ™æˆ‘ä»¬å‘é€è¸¢çš„åŠ¨ä½œã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€èˆ¬æ¥è¯´ï¼Œä»…æ­¤è€Œå·²ï¼</font><font style="vertical-align: inherit;">ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/168/f71/f3d/168f71f3df8d267bec3e0791d5857c64.gif"><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åŠ¨ä½œè¯†åˆ« </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ‚¨æ”¶é›†äº†å¤§é‡æœ‰å…³æ‰‹è„šæåŠ¨çš„äººçš„æ•°æ®ï¼Œåˆ™å¯ä»¥å»ºç«‹ä¸€ä¸ªé€‚ç”¨äºå„ä¸ªæ¡†æ¶çš„æ¨¡å‹ã€‚ä½†æ˜¯å¤Ÿäº†å—ï¼Ÿå¦‚æœæˆ‘ä»¬æƒ³èµ°å¾—æ›´è¿œå¹¶åŒºåˆ†ä¸¤ç§ä¸åŒçš„è¸¢æ³•ï¼Œè¯¥æ€ä¹ˆåŠï¼šè½¬èº«å’Œåå«ï¼ˆåè¸¢ï¼‰ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ä¸‹é¢çš„æ¡†æ¶ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨æŸä¸ªè§’åº¦ä»æŸä¸ªè§’åº¦çš„æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªç¬”ç”»çœ‹èµ·æ¥æ˜¯ç›¸åŒçš„ï¼š</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c1/567/5bf/6c15675bf7b8c238e7ce9d5aaefeea80.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a60/e3c/dba/a60e3cdba0eb3ecbc8730c39bc6c95b2.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½†æ˜¯å¦‚æœæ‚¨æŸ¥çœ‹æ€§èƒ½ï¼Œåˆ™åŠ¨ä½œæ˜¯å®Œå…¨ä¸åŒçš„ï¼š</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e72/28b/fe8/e7228bfe8cfe9bbe73f9011d94778a7a.gif"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è®­ç»ƒç¥ç»ç½‘ç»œæ¥åˆ†ææ¡†æ¶çš„åºåˆ—ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Ÿ</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ç´¢å¦ä¸€ç±»ç¥ç»ç½‘ç»œï¼Œç§°ä¸ºé€’å½’ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ã€‚ä¾‹å¦‚ï¼ŒRNNéå¸¸é€‚åˆå¤„ç†æ—¶é—´åºåˆ—ï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªå•è¯éƒ½å–å†³äºå‰ä¸€ä¸ªå’Œåä¸€ä¸ª </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ ¹æ®æ‚¨çš„æµè§ˆå†å²é¢„æµ‹ä¸‹ä¸€é¡µ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¸§è¯†åˆ« </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å®ç°è¿™ç§æ¨¡å‹ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œä½†æ˜¯è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¤ºä¾‹æ¶æ„ï¼Œä»¥äº†è§£æ‰€æœ‰è¿™äº›å¦‚ä½•ååŒå·¥ä½œã€‚ </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RNNçš„åŠ›é‡ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹å›¾æ˜¾ç¤ºäº†åŠ¨ä½œè¯†åˆ«æ¨¡å‹ï¼š</font></font><br><br><img src="https://habrastorage.org/webt/kz/oq/ie/kzoqieod8t9nhs_taapnhpr_y0c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»è§†é¢‘ä¸­</font><font style="vertical-align: inherit;">è·å–æœ€åä¸€</font><font style="vertical-align: inherit;">å¸§å¹¶å°†å…¶ä¼ è¾“åˆ°CNNã€‚</font><font style="vertical-align: inherit;">æ¯ä¸ªå¸§çš„CNNè¾“å‡ºä½œä¸ºè¾“å…¥RNNä¼ è¾“ã€‚</font><font style="vertical-align: inherit;">å¾ªç¯ç¥ç»ç½‘ç»œå°†ç¡®å®šå„ä¸ªæ¡†æ¶ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶è¯†åˆ«å®ƒä»¬å¯¹åº”çš„åŠ¨ä½œã€‚</font></font><br><br><h1> ç»“è®º </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†å›¾åƒåˆ†ç±»æ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ”¶é›†äº†ä¸€ä¸ªæ•°æ®é›†ï¼šæˆ‘ä»¬æå–äº†è§†é¢‘å¸§å¹¶å°†å…¶æ‰‹åŠ¨åˆ†ä¸ºä¸‰ç±»ã€‚ç„¶å</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">imgaug</font></a><font style="vertical-align: inherit;">æ·»åŠ å›¾åƒæ¥</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">å¢å¼º</font></a><font style="vertical-align: inherit;">æ•°æ®</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹åï¼Œæˆ‘ä»¬è§£é‡Šäº†ä»€ä¹ˆæ˜¯å­¦ä¹ è½¬ç§»ï¼Œå¹¶ä½¿ç”¨äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ tensorflow-models / mobilenet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¯ä»¶åŒ…ä¸­è®­ç»ƒæœ‰ç´ çš„MobileNetæ¨¡å‹æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„</font><font style="vertical-align: inherit;">ã€‚æˆ‘ä»¬ä»Node.jsè¿›ç¨‹ä¸­çš„æ–‡ä»¶åŠ è½½äº†MobileNetï¼Œå¹¶è®­ç»ƒäº†ä¸€ä¸ªé¢å¤–çš„å¯†é›†å±‚ï¼Œè¯¥å±‚ä»éšè—çš„MobileNetå±‚é¦ˆé€æ•°æ®ã€‚ç»è¿‡åŸ¹è®­ï¼Œæˆ‘ä»¬çš„å‡†ç¡®ç‡è¾¾åˆ°äº†90ï¼…ä»¥ä¸Šï¼</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºäº†åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨è¯¥æ¨¡å‹ï¼Œæˆ‘ä»¬å°†å…¶ä¸MobileNetä¸€èµ·ä¸‹è½½ï¼Œå¹¶å¼€å§‹æ¯100æ¯«ç§’å¯¹ç”¨æˆ·ç½‘ç»œæ‘„åƒå¤´ä¸­çš„å¸§è¿›è¡Œåˆ†ç±»ã€‚æˆ‘ä»¬å°†æ¨¡å‹ä¸æ¸¸æˆè¿æ¥</font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä½¿ç”¨æ¨¡å‹è¾“å‡ºæ¥æ§åˆ¶å­—ç¬¦ä¹‹ä¸€ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•é€šè¿‡å°†æ¨¡å‹ä¸é€’å½’ç¥ç»ç½‘ç»œç»“åˆä»¥è¯†åˆ«åŠ¨ä½œæ¥æ”¹è¿›æ¨¡å‹ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸Œæœ›æ‚¨èƒ½åƒæˆ‘ä¸€æ ·å–œæ¬¢è¿™ä¸ªå°é¡¹ç›®ï¼</font><font style="vertical-align: inherit;">â€</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428019/">https://habr.com/ru/post/zh-CN428019/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428003/index.html">å“åº”å¼è®¾è®¡ï¼šä¿æŒæ ‡è®°å…ƒç´ çš„å½¢çŠ¶</a></li>
<li><a href="../zh-CN428005/index.html">åŠ å‰§å…¬å…³ç¾éš¾çš„ä¸‰ç§æœ‰æ•ˆæ–¹æ³•</a></li>
<li><a href="../zh-CN428007/index.html">å·²ç»ä¸æ˜¯ä¾¿æºå¼è®¡ç®—æœºï¼Œè¿˜ä¸æ˜¯ç¬”è®°æœ¬ï¼šç¬”è®°æœ¬ç”µè„‘TOSHIBA T3100 / 20</a></li>
<li><a href="../zh-CN428009/index.html">Equifaxï¼šæœ€å¤§çš„æ•°æ®æ³„æ¼å‘ç”Ÿä¸€å¹´å</a></li>
<li><a href="../zh-CN428011/index.html">å¤ªç©ºåƒµå°¸æ­Œæ›²</a></li>
<li><a href="../zh-CN428021/index.html">å¯†å°ç¥ç»ç½‘ç»œã€‚ æˆ–é€‰æ‹©å¹¶è¿è¡Œç¥ç»ç½‘ç»œä»¥è¯†åˆ«Raspberry Zeroä¸Šçš„å¯¹è±¡</a></li>
<li><a href="../zh-CN428023/index.html">ç”µå­è®¾å¤‡è®¾è®¡ä¸­çš„ç”µæ°”å®‰å…¨åŸºç¡€</a></li>
<li><a href="../zh-CN428025/index.html">ä½¿ç”¨å¤–éƒ¨SSDä½œä¸ºç³»ç»Ÿæ—¶ï¼Œåœ¨MAC OS Xä¸­è¿æ¥äº¤æ¢æ–‡ä»¶ï¼ˆSWAPï¼‰</a></li>
<li><a href="../zh-CN428027/index.html">æˆ‘å¦‚ä½•å°è¯•åˆ¶ä½œGLSLé™æ€åˆ†æå™¨ï¼ˆä»¥åŠå‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼‰</a></li>
<li><a href="../zh-CN428029/index.html">10æœˆ29æ—¥è‡³11æœˆ4æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>