<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏻 👩🏼‍🤝‍👨🏽 🤭 MIRO adalah platform robot terbuka dalam ruangan. Bagian 4 - Komponen Perangkat Lunak: ARDUINO (AVR) 👶🏾 💋 🤟🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami terus membongkar komponen perangkat lunak platform MIRO. Saya ingin memeriksa lebih detail tepatnya peranti lunak di bawah AVR. Karena itu, kami ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIRO adalah platform robot terbuka dalam ruangan. Bagian 4 - Komponen Perangkat Lunak: ARDUINO (AVR)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475512/"><img src="https://habrastorage.org/webt/yq/gb/cs/yqgbcsglidkja0zh62mzaqgixme.png" alt="gambar"><br><br>  Kami terus membongkar komponen perangkat lunak platform MIRO.  Saya ingin memeriksa lebih detail tepatnya peranti lunak di bawah AVR.  Karena itu, kami akan mencurahkan dua bagian untuk masalah ini.  Dalam yang pertama, kami menggambarkan struktur umum perpustakaan, dan yang kedua, implementasi beberapa metode kelas utama. <br><a name="habracut"></a><br>  Daftar Isi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 4</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 5</a> . <br><br>  Perangkat lunak di bawah ARDUINO ternyata menjadi yang terbesar dari yang ditulis sendiri.  Secara umum, hampir semua logika langsung bekerja dengan aktuator dan sensor robot terletak pada AVR.  Dan pada level ini, API diimplementasikan - pustaka perangkat lunak pengembangan cepat untuk MIRO. <br><br>  Struktur API dijelaskan di bagian wiki dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori yang</a> sesuai.  Sejauh ini, hanya dalam bahasa Rusia.  Dan sekarang kita akan menganalisis kode lebih terinci.  Saya sengaja tidak akan memberikan deklarasi kelas yang lengkap, menguranginya dengan elipsis "...", hanya menyisakan hal-hal yang signifikan saat ini. <br><br>  Dalam model perangkat lunak kami, setiap robot MIRO terdiri dari sasis dan satu set perangkat yang terhubung.  Saat mendesain, diasumsikan bahwa sasis robot - akan selalu menjadi semacam sasis beroda - robot berjalan atau robot yang menggunakan beberapa prinsip gerakan lain harus dipertimbangkan secara terpisah. <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Miro</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Robot { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Miro(byte *PWM_pins, byte *DIR_pins); <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(ENCODERS_ON) Miro(byte *PWM_pins, byte *DIR_pins, byte *ENCODER_pins); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> ~Miro(); ... };</span></span></code> </pre> <br>  Kelas Miro adalah kelas tingkat atas dan menjelaskan konfigurasi lengkap robot.  Kelas ini adalah turunan dari kelas Robot, yang hanya menjelaskan fungsi paling dasar dari robot. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robot</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Robot(byte *PWM_pins, byte *DIR_pins); <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(ENCODERS_ON) Robot(byte *PWM_pins, byte *DIR_pins, byte *ENCODER_pins); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> ~Robot(); Chassis chassis; void Sync(); int attachDevice(Device *dev); int dettachDevice(Device *dev); ... protected: Device* _devices[ROBOT_MAX_DEVICES]; byte _device_count; };</span></span></code> </pre><br>  Perancang melakukan pengaturan awal pin sasis dan nilai awal konfigurasi robot. <br><br>  Metode Sync () mengimplementasikan operasi yang diperlukan untuk sasis dan untuk semua perangkat yang terhubung ke robot, setiap langkah siklus utama () dari sketsa ARDUINO.  Metode Miro Sync () dari kelas Miro menggunakan metode Sync () pada sasis dan semua perangkat yang terhubung ke robot. <br><br>  Kelas Robot juga berisi pointer ke array perangkat yang terhubung ke robot, metode untuk bekerja dengan array ini (menghubungkan perangkat baru, putuskan sambungan, temukan dengan indeks dan nama).  Kelas Robot juga berisi objek dari kelas Chassis - sasis. <br><br>  Tapi mari kita mulai dengan sesuatu yang lebih sederhana - dengan perangkat.  Setiap perangkat yang dapat dihubungkan ke robot, baik itu LED, sensor, atau aktuator yang tidak berhubungan langsung dengan sasis (troli), dijelaskan oleh kelas penggantinya, yang umum untuk semua perangkat di kelas Perangkat virtual: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Device</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sync</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setParam</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte pnum, byte *pvalue)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParam</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte pnum, byte *pvalue)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> byte </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPinsCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> byte </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParamCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: byte *pins[<span class="hljs-number"><span class="hljs-number">2</span></span>]; };</code> </pre><br>  Metode virtual setParam, getParam, getParamCount dikaitkan dengan menetapkan, menerima, dan menentukan jumlah parameter perangkat.  Parameter dapat berupa properti apa saja: kecerahan LED, posisi drive servo, dll. Kelas penerus setiap perangkat menerapkan metode ini dengan caranya sendiri.  Tujuan dari getName, metode getPinsCount, saya pikir, jelas dari namanya.  Metode Sync yang baru ditemukan adalah metode khusus untuk kontrol perangkat non-pemblokiran dan otomatisasi beberapa operasi perangkat yang harus dilakukan secara teratur, setiap iterasi pada loop utama. <br><br>  Mari sekarang kita lihat beberapa implementasi umum dari kelas turunan. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MIROUsonic</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Device { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sync</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setParam</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte bnum, byte *pvalue)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParam</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte bnum, byte *pvalue)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">byte </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPinsCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">byte </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParamCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte trig_pin, byte echo_pin)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">On</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_dist)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">On</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Off</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_dist)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMesCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _isOn; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _mesCount; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _dist; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _max_dist; };</code> </pre><br>  Dalam menentukan kelas pengintai ultrasonik (di atas), selain metode induk, ada juga metode: <br><br><ul><li>  Init - inisialisasi; </li><li>  Nyala dan Mati - nyalakan perangkat (pengintai); </li><li>  getDist - mengembalikan jarak yang diukur oleh pencari jarak; </li><li>  getMesCount - mengembalikan jumlah pengukuran yang dilakukan sejak perangkat dihidupkan. </li></ul><br>  Untuk menyimpan keadaan internal perangkat, bidang-bidang berikut digunakan: <br><br><ul><li>  _isOn (BENAR - perangkat dihidupkan, dikendalikan oleh metode Nyala dan Mati); </li><li>  _mesCount (menyimpan jumlah dimensi yang digunakan dalam metode getMesCount); </li><li>  _max_dist - jarak maksimum yang diperlukan untuk pengukuran *; </li><li>  _dist adalah jarak pengukuran aktual. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Tentang rentang pengukuran maksimum</b> <div class="spoiler_text">  * <i>Diketahui bahwa HC-SR04 yang tersebar luas menurut paspor mampu mengukur jarak hingga 4 meter.</i>  <i>Namun, metode pengukuran itu sendiri melibatkan menunggu kembalinya sinyal ultrasonik, diikuti dengan pengkodean durasi dalam sinyal pada garis Echo.</i>  <i>Dan pada kenyataannya, jika pengguna jelas tidak perlu mengukur jarak dalam kisaran hingga 4 meter, tetapi cukup, kisaran, katakanlah 1 meter, maka Anda bisa menunggu 4 kali lebih sedikit untuk sinyal yang dipantulkan.</i>  <i>Rangefinder itu sendiri menghasilkan sinyal pada garis Echo segera setelah menerimanya dan melakukan modulasi.</i>  <i>Yaitu</i>  <i>ini mungkin tidak mempengaruhi panjang periode antara pengukuran yang berdekatan, tetapi durasi pengukuran tunggal dengan cara ini dapat dikurangi.</i> <br></div></div><br>  Dan sekarang untuk penjelasan tentang metode Sync.  Jika perangkat memiliki status _isOn == BENAR (aktif), maka siklus pengukuran itu sendiri akan dilakukan dalam metode Sinkronisasi, dan hasil pengukuran akan dicatat dalam bidang _dist.  Dalam hal ini, ketika Anda memanggil getDist, metode ini akan segera mengembalikan nilai yang direkam dalam _dist, tidak akan ada siklus pengukuran.  Jika _isOn == FALSE (off), siklus pengukuran, sebaliknya, dilakukan hanya selama panggilan ke getDist, tidak ada yang akan diukur dalam metode Sync.  Diasumsikan bahwa pemrogram akan memanggil metode Sinkronisasi dari seluruh robot, yang pada gilirannya akan memanggil metode Sinkronisasi dengan nama yang sama dari semua perangkat yang terhubung ke robot dan objek dari kelas Chasis (sasis). <br><br>  Dari perangkat di API, hanya hal-hal yang dimiliki MIRO sekarang yang diterapkan: LED, pencari jarak ultrasonik, sensor cahaya resistif-foto, drive servo, sensor garis. <br><br>  Sentuh Chassis dengan ringan.  Kelas ini mengimplementasikan "kereta abstrak" dari robot.  Ini berisi metode yang memungkinkan Anda untuk mengontrol pemindah. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Chassis</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Chassis(byte *PWM_pins, byte *DIR_pins); <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(ENCODERS_ON) Chassis(byte *PWM_pins, byte *DIR_pins, byte *ENCODER_pins); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> ~Chassis(); void Sync(); float getVoltage(); int wheelRotatePWMTime(int *speedPWM, unsigned long time); int wheelRotatePWM(int *speedPWM); bool wheelIsMoving(byte wheel) {return this-&gt;_wheel_move[wheel];} byte getWheelCount() { return WHEEL_COUNT; } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(ENCODERS_ON) int wheelRotateAng(float *speed, float *ang, bool en_break); unsigned long wheelGetEncoder(byte wheel); ... #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//ENCODERS_ON private: float _vbat; //Battery volgage bool _wheel_move[WHEEL_COUNT]; char _wheelDir[WHEEL_COUNT]; byte _wheel_PWM_pins[WHEEL_COUNT]; byte _wheel_DIR_pins[WHEEL_COUNT]; void _init(byte *PWM_pins, byte *DIR_pins); #if defined(ENCODERS_ON) byte _wheel_ENCODER_pins[WHEEL_COUNT]; bool _wheel_sync_move; float _wheelAngSpeed[WHEEL_COUNT]; float _wheelSetAng[WHEEL_COUNT]; float _wheelSetAngSpeed[WHEEL_COUNT]; ... #endif //ENCODERS_ON };</span></span></span></span></code> </pre><br>  Jika kami mempertimbangkan keranjang tanpa penyandi dan umumnya tanpa umpan balik, maka ada metode kontrol sederhana untuk ini menggunakan sinyal PWM.  Jika ada encoder di troli, kelas menjadi jauh lebih rumit.  Untuk menyederhanakan kehidupan pengguna, metode seperti yang muncul di dalamnya: <br><br><ul><li>  wheelRotateAng - rotasi roda pada sudut rotasi yang ditentukan sebelumnya dengan kecepatan sudut yang diberikan; </li><li>  wheelGetPath - mengembalikan panjang jalur yang dilalui oleh setiap roda; </li><li>  wheelGetLinSpeed ​​- mengembalikan kecepatan linier saat ini dari setiap roda; </li><li>  wheelGetAngSpeed ​​- mengembalikan kecepatan sudut saat ini dari setiap roda; </li><li>  wheelGetEncoder - mengembalikan jumlah respons pembuat enkode setiap roda. </li></ul><br>  Dan sejumlah metode tambahan.  Serta metode kalibrasi propulsi.  Tetapi secara lebih rinci metode kunci dari kelas Chassis akan dipertimbangkan kali berikutnya. <br><br>  Melihat sedikit ke depan, di tempat inilah yang akan tepat untuk dicatat bahwa seluruh perpustakaan Miro ini dapat dengan mudah diadaptasi atau ditambah dengan robot lain dengan skema gerak diferensial roda dua.  Dan dengan upaya tertentu - dan untuk penggerak lain dan konfigurasi kemudi.  Dalam kasus rangkaian diferensial, Anda hanya perlu menjelaskan dengan benar file konfigurasi config.h.  Dan tanpa RPi.  Sebagai contoh, dalam waktu kurang dari satu jam, kami meluncurkan semuanya pada yang kecil untuk turnamen cybersecurity BlackMirrorCTF-2019 regional kami di universitas kami ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan</a> ). <br><br><img src="https://habrastorage.org/webt/z8/ie/nk/z8ienkgagi7itbygujwbur1as4a.png" alt="gambar"><br><br>  Robot memiliki antarmuka untuk akses melalui TELNET dan sistem perintah untuk remote control.  Dokumen dengan sistem perintah di suatu tempat tersembunyi atau disandikan.  Peserta memindai alamat IP dan membuka port pada robot itu sendiri.  Dengan koneksi yang sukses, robot mengeluarkan undangan, dan para peserta mengerti bahwa mereka telah "masuk."  Nah, kemudian tim membawa robot di sepanjang jalan raya ke garis finish.  Awalnya, mereka ingin membuat seluruh trek dengan robot di suatu tempat di ruang terisolasi dengan kamera IP diinstal, tetapi penyelenggara memiliki beberapa masalah dengan kamera IP dan kehilangan beberapa pesona. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KSd1O-lMriE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Itu saja untuk saat ini.  Ada kemungkinan bahwa dalam perjalanan pengembangan, model program akan mengalami perubahan.  By the way, baru-baru ini sedikit dimodifikasi, setelah kode tampak sedikit lebih berpengalaman OOP-shchik. <br><br>  Menjelang bagian kelima - mari kita bicara tentang penyandi, sudut dan kalibrasi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id475512/">https://habr.com/ru/post/id475512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id475488/index.html">Memperkenalkan PyTorch: Pembelajaran Jauh dalam Pemrosesan Bahasa Alami</a></li>
<li><a href="../id475494/index.html">"Apakah ada kehidupan setelah Signor?" Atau apa yang akan kita bicarakan di SECR-2019</a></li>
<li><a href="../id475496/index.html">Cara menentukan alamat kontrak cerdas sebelum penyebaran: menggunakan CREATE2 untuk pertukaran crypto</a></li>
<li><a href="../id475498/index.html">Windows Server Core vs. GUI dan Kompatibilitas Perangkat Lunak</a></li>
<li><a href="../id475506/index.html">Wawancara dengan Mikhail Chinkov tentang pekerjaan dan kehidupan di Berlin</a></li>
<li><a href="../id475514/index.html">Pembunuh IOS: jailbreak menggunakan checkra1n dalam pertanyaan dan jawaban</a></li>
<li><a href="../id475518/index.html">Perusahaan Kanada mengembangkan materi yang membuat Anda tidak terlihat</a></li>
<li><a href="../id475520/index.html">Transisi CSS properti tinggi dari 0px ke otomatis</a></li>
<li><a href="../id475522/index.html">HP: drive asli Anda sama sekali tidak asli. Siapa yang harus disalahkan dan apa yang harus dilakukan?</a></li>
<li><a href="../id475536/index.html">Lanjutkan untuk penerjemah lepas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>