<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤œ ğŸ’• ğŸ‘©ğŸ¿â€ğŸš’ Panduan Lengkap untuk Prometheus pada tahun 2019 ğŸ¦„ ğŸ§’ğŸ¿ ğŸŒ‡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Insinyur DevOps dan SRE mungkin pernah mendengar tentang Prometheus lebih dari sekali. 


 Prometheus dibuat di SoundCloud pada tahun 2012 dan sejak i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panduan Lengkap untuk Prometheus pada tahun 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/455290/"><p><img src="https://habrastorage.org/webt/sw/aw/et/swawetpfrgxw6k0m4bb960d3q2c.jpeg"></p><br><p>  <strong>Insinyur DevOps dan SRE</strong> mungkin pernah mendengar tentang <strong>Prometheus</strong> lebih dari sekali. </p><br><p>  Prometheus dibuat di SoundCloud pada tahun 2012 dan sejak itu menjadi standar untuk <strong>sistem pemantauan</strong> .  Ini benar-benar kode sumber terbuka, menyediakan puluhan eksportir yang berbeda yang dapat Anda gunakan untuk mengatur <strong>pemantauan seluruh infrastruktur dalam</strong> <strong>hitungan menit</strong> . </p><br><p>  Prometheus memiliki nilai yang jelas dan sudah digunakan oleh inovator industri seperti DigitalOcean atau Docker sebagai bagian dari sistem pemantauan lengkap. </p><br><p>  <em>Apa itu Prometheus?</em> <em><br></em>  <em>Mengapa itu dibutuhkan?</em> <em><br></em>  <em>Apa bedanya dengan sistem lain?</em> </p><br><p> Jika Anda sama sekali tidak tahu tentang Prometheus atau ingin lebih memahaminya, ekosistemnya dan semua interaksinya, <strong>artikel ini hanya untuk Anda</strong> . </p><a name="habracut"></a><br><p>  Kami membagi panduan ini menjadi 3 bagian, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seperti yang kami lakukan dengan InfluxDB</a> . </p><br><ul><li>  Pertama datang gambaran lengkap tentang <strong>Prometheus</strong> , ekosistemnya, dan aspek-aspek kunci dari teknologi yang bergerak cepat. </li><li>  Kemudian, <strong>penjelasan istilah teknis Prometheus</strong> disediakan.  Jika Anda tidak tahu apa itu metrik, label, contoh atau eksportir, di sinilah Anda. </li><li>  Akhirnya, kami menggambarkan berbagai <strong>skenario dunia nyata untuk menggunakan Prometheus</strong> .  Di sini Anda akan terinspirasi oleh contoh-contoh perusahaan yang sukses. </li></ul><br><h2 id="chast-i-chto-takoe-prometheus">  Bagian I. Apa itu Prometheus? </h2><br><p>  Prometheus adalah basis data deret waktu.  Jika Anda tidak mengetahui apa itu database deret waktu, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bacalah bagian pertama manual InfluxDB</a> . </p><br><p>  Tetapi Prometheus bukan hanya basis data deret waktu. </p><br><p>  Anda dapat melampirkan <strong>seluruh ekosistem alat</strong> untuk memperluas fungsionalitas. </p><br><p>  Prometheus <strong>memonitor berbagai sistem</strong> : server, database, mesin virtual individu, dan hampir semua hal. </p><br><p>  Untuk melakukan ini, <strong>Prometheus secara berkala mengikis targetnya</strong> . </p><br><p>  <em>Apa itu memo?</em> </p><br><p>  Prometheus <strong>mengambil metrik melalui panggilan HTTP</strong> ke titik akhir tertentu yang ditentukan dalam konfigurasi Prometheus. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/bu/li/99/buli99giwtpiuq88n9e3xc1b6ng.png"></a> </p><br><p>  Ambil, misalnya, aplikasi web yang terletak di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 3000</a> .  Aplikasi mengirimkan metrik dalam format teks ke beberapa URL.  Katakanlah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 3000 / metrik</a> . </p><br><p>  Di alamat ini, Prometheus <strong>mengambil data</strong> dari target pada interval tertentu. </p><br><h3 id="1-kak-rabotaet-prometheus">  1. Bagaimana cara kerja Prometheus? </h3><br><p>  Seperti yang kami katakan, Prometheus terdiri dari berbagai komponen. </p><br><p>  Pertama, Anda perlu mengekstrak metrik dari sistem Anda.  Ada berbagai cara: </p><br><ul><li>  <strong>Instrumentasi</strong> aplikasi, yaitu, aplikasi Anda akan memberikan metrik yang kompatibel dengan Prometheus di URL yang ditentukan.  Prometheus akan mengidentifikasi itu sebagai target dan akan membuangnya pada interval yang ditentukan. </li><li>  Gunakan <strong>eksportir siap pakai</strong> .  Prometheus memiliki koleksi eksportir untuk teknologi yang ada.  Misalnya, eksportir siap pakai untuk memantau mesin-mesin Linux ( <em>Eksportir Node</em> ), untuk basis data umum ( <em>Eksportir SQL</em> atau <em>Eksportir MongoDB</em> ), dan bahkan untuk penyeimbang beban HTTP (misalnya, <em>Eksportir HAProxy</em> ). </li><li>  Menggunakan <strong>Pushgateway</strong> .  Terkadang aplikasi atau tugas tidak memberikan metrik secara langsung.  Mereka mungkin tidak dirancang untuk ini (misalnya, pekerjaan batch) atau Anda sendiri memutuskan untuk tidak memberikan metrik langsung melalui aplikasi. </li></ul><br><p>  Seperti yang sudah Anda pahami, <strong>Prometheus mengumpulkan data itu sendiri</strong> (kecuali untuk kasus yang jarang terjadi ketika kami menggunakan Pushgateway). </p><br><p> <a href=""><img src="https://habrastorage.org/webt/x8/x5/xl/x8x5xlzryccoxhuk0ly10m4z0ky.png"></a> </p><br><p>  <em>Apa artinya ini?</em> <em><br></em>  <em>Mengapa ini dibutuhkan?</em> </p><br><h3 id="2-sbor-vs-otpravka">  2. Koleksi vs.  mengirim </h3><br><p>  Prometheus memiliki perbedaan penting dari database deret waktu lainnya: Prometheus <strong>secara aktif memindai target untuk mendapatkan metrik dari mereka</strong> . </p><br><p>  InfluxDB, misalnya, bekerja secara berbeda: Anda langsung <strong>mengirim data</strong> sendiri. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/hp/f5/of/hpf5ofsciuwl0z2jjymkfh9dbi0.png"></a> </p><br><p>  Kedua pendekatan memiliki pro dan kontra mereka.  Berdasarkan dokumentasi yang tersedia, kami telah menyusun daftar alasan mengapa pencipta Prometheus memilih arsitektur ini: </p><br><ul><li>  <strong>Kontrol terpusat</strong> .  Jika Prometheus mengirimkan permintaan ke target, kami melakukan semua konfigurasi di sisi Prometheus, bukan sistem individual. </li></ul><br><p>  Prometheus memutuskan di <strong>mana</strong> dan <strong>seberapa sering</strong> untuk mengikis. </p><br><p>  Jika objek itu sendiri mengirim data, ada risiko akan ada terlalu banyak data dan server akan macet.  Ketika sistem mengumpulkan data, Anda dapat <strong>mengontrol frekuensi pengumpulan</strong> dan membuat beberapa konfigurasi goresan untuk memilih <strong>frekuensi yang berbeda untuk objek yang berbeda</strong> . </p><br><ul><li>  Prometheus menyimpan <strong>metrik gabungan</strong> . </li></ul><br><p>  Ini merupakan tambahan pada bagian pertama di mana kami membahas peran Prometheus. </p><br><p>  Prometheus tidak berdasarkan pada peristiwa dan sangat berbeda dari database deret waktu lainnya.  Itu tidak mencegat acara individu dengan referensi ke waktu (misalnya, pemadaman layanan), <strong>tetapi mengumpulkan metrik yang telah dikumpulkan sebelumnya tentang layanan Anda</strong> . </p><br><p>  Secara khusus, layanan web tidak mengirim pesan kesalahan 404 dan pesan dengan penyebab kesalahan.  Pesan dikirim bahwa layanan menerima pesan kesalahan 404 dalam lima menit terakhir. </p><br><p>  Ini adalah perbedaan utama antara basis data deret waktu yang mengumpulkan metrik teragregasi dan yang mengumpulkan metrik mentah. </p><br><h3 id="3-razvitaya-ekosistema-prometheus">  3. Ekosistem Prometheus yang dikembangkan </h3><br><p>  Pada dasarnya, Prometheus adalah database deret waktu. </p><br><p>  Tetapi ketika bekerja dengan database seperti itu, Anda sering perlu <strong>memvisualisasikan</strong> data, <strong>menganalisisnya</strong> , dan mengkonfigurasi <strong>lansiran</strong> untuk mereka. </p><br><p>  Prometheus mendukung alat-alat berikut yang memperluas fungsinya: </p><br><ul><li>  <strong>Alertmanager</strong> .  Prometheus mengirimkan peringatan ke Alertmanager berdasarkan aturan khusus yang ditentukan dalam file konfigurasi.  Dari sana, mereka dapat diekspor ke titik akhir yang berbeda (misalnya, Pagerduty atau Slack). </li><li>  <strong>Visualisasi data</strong> .  Seperti Grafana, Anda dapat memvisualisasikan deret waktu secara langsung di antarmuka pengguna web Prometheus.  Anda dapat memfilter data dan membuat ulasan spesifik tentang apa yang terjadi di target yang berbeda. </li><li>  <strong>Penemuan layanan</strong> .  Prometheus secara dinamis mendeteksi target dan secara otomatis menghapus target baru berdasarkan permintaan.  Ini sangat nyaman jika Anda bekerja dengan kontainer yang secara dinamis mengubah alamat berdasarkan permintaan. </li></ul><br><p> <a href=""><img src="https://habrastorage.org/webt/vn/v8/hw/vnv8hwhdgfwge_zr4fpijo-dw6w.png"></a> </p><br><p><img src="https://habrastorage.org/webt/c0/i6/9g/c0i69gzbicfmvsaangv6g5-4jpa.png"></p><br><h2 id="chast-ii-koncepcii-prometheus">  Bagian II  Konsep Prometheus </h2><br><p>  Seperti dalam manual InfluxDB, kami akan menjelaskan secara rinci <strong>istilah teknis</strong> terkait dengan Prometheus. </p><br><h3 id="1-model-dannyh-klyuch-znachenie">  1. Model data nilai-kunci </h3><br><p>  Sebelum beralih ke alat Prometheus, penting untuk sepenuhnya memahami model data ini. </p><br><p>  Prometheus bekerja dengan <strong>pasangan kunci-nilai</strong> .  Kunci menjelaskan apa yang kita ukur, dan nilai menyimpan nilai aktual sebagai angka. </p><br><blockquote>  Ingat: Prometheus tidak dirancang untuk menyimpan informasi mentah, seperti teks biasa.  Ini menyimpan metrik yang dikumpulkan selama periode waktu. </blockquote><p>  Kunci dalam hal ini disebut <strong>metrik</strong> .  Ini, misalnya, kecepatan prosesor atau penggunaan memori. </p><br><p>  <em>Tetapi bagaimana jika Anda membutuhkan detail lebih lanjut tentang metrik?</em> <em><br></em>  <em>Misalnya, prosesor memiliki 4 core, dan kami membutuhkan 4 metrik terpisah?</em> </p><br><p>  Dan di sini jalan pintas datang untuk menyelamatkan.  Pintasan menyediakan lebih banyak informasi tentang metrik dengan menambahkan bidang tambahan.  Misalnya, Anda menjelaskan bukan hanya kecepatan prosesor, tetapi kecepatan satu inti di atas IP tertentu. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/k3/an/wz/k3anwzmbgecefriltntgwfkge3o.png"></a> </p><br><p>  Kemudian Anda dapat memfilter metrik dengan label dan hanya melihat informasi yang Anda butuhkan. </p><br><h3 id="2-tipy-metrik">  2. Jenis metrik </h3><br><p>  Saat memantau dengan Prometheus, metrik dapat dijelaskan dalam empat cara.  Lebih baik membacanya sampai akhir, karena ada <strong>jebakan di</strong> sini. </p><br><h3 id="schetchik">  Penghitung </h3><br><p>  Ini mungkin jenis metrik paling sederhana.  Penghitung, sesuai namanya, <strong>menghitung elemen untuk periode waktu tertentu</strong> . </p><br><p>  Jika Anda ingin menghitung, misalnya, kesalahan HTTP pada server atau mengunjungi situs web, gunakan <strong>penghitung</strong> . </p><br><p>  Dan secara logis, tentu saja, <strong>penghitung hanya dapat meningkatkan atau nol angka</strong> , oleh karena itu tidak cocok untuk nilai yang dapat menurun, atau untuk nilai negatif. </p><br><p>  Dengan bantuannya, akan lebih mudah untuk mempertimbangkan <strong>jumlah kemunculan</strong> peristiwa tertentu selama periode waktu tertentu, yaitu tingkat perubahan metrik dari waktu ke waktu. </p><br><p>  <em>Dan jika Anda perlu mengukur, katakanlah, memori yang digunakan untuk periode tertentu?</em> <em><br></em>  <em>Nilai ini dapat menurun.</em>  <em>Bagaimana cara menghitungnya dengan Prometheus?</em> </p><br><h3 id="izmeriteli">  Meter </h3><br><p>  <strong>Temui meter!</strong> </p><br><p>  Meter berurusan dengan nilai-nilai yang <strong>mungkin berkurang seiring waktu</strong> .  Mereka dapat dibandingkan dengan termometer - jika Anda melihat termometer, kita akan melihat suhu saat ini. </p><br><p>  <em>Tetapi jika meter dapat meningkat dan turun dan mengambil nilai positif dan negatif, maka ternyata mereka lebih baik daripada penghitung?</em> <em><br></em>  <em>Jadi penghitung tidak berguna?</em> </p><br><p>  Awalnya, saya pikir begitu.  Karena mereka dapat melakukan segalanya, mari kita gunakan di mana saja.  Apakah ini logis? </p><br><h3 id="a-vot-i-net">  Tapi tidak. </h3><br><p>  Meter ideal untuk mengukur nilai metrik saat ini, yang dapat menurun seiring waktu. </p><br><p>  Di sinilah letak jebakan: meter tidak menunjukkan perkembangan metrik selama periode waktu tertentu.  Dengan menggunakan meter, <strong>Anda dapat kehilangan perubahan metrik tidak teratur dari waktu ke waktu</strong> . </p><br><p>  Mengapa  Inilah yang <em>/ u / justinDavidow katakan</em> : </p><br><blockquote>  â€œMeteran menunjukkan nilai rata-rata counter delta untuk sebuah unit selama periode waktu tertentu. <br><br>  Penghitung memperhitungkan setiap unit yang digunakan (jika itu adalah prosesor, maka operasi, siklus atau kutu), dan kemudian Anda dapat memilih indikator mana untuk periode yang Anda butuhkan. <br><br>  Jika Anda menggunakan meter, laju pengambilan sampel harus akurat.  Jika frekuensi berbeda setidaknya beberapa mikrodetik, nilainya tidak dapat diandalkan.  "Ini bahkan lebih terlihat di bawah beban berat, di mana waktu antara pengukuran meningkat secara eksponensial, karena perencana sistem tidak punya waktu untuk memperhatikan aplikasi pemantauan." </blockquote><p>  Jika sistem mengirim metrik setiap 5 detik dan Prometheus menghapus target setiap 15, beberapa metrik mungkin hilang dalam proses.  Jika Anda melakukan perhitungan tambahan dengan metrik ini, keakuratan hasil akan lebih rendah. </p><br><p>  Di konter, setiap nilai dijumlahkan.  Ketika Prometheus mengumpulkannya, ia menyadari bahwa nilainya dikirim pada interval tertentu. </p><br><p>  Sekarang jangan bingung. </p><br><h3 id="gistogramma">  Grafik batang </h3><br><p>  Histogram adalah jenis metrik yang lebih kompleks.  Ini memberikan informasi tambahan.  Misalnya jumlah penjumlahan dan jumlahnya. </p><br><p>  Nilai dikumpulkan di area dengan batas atas kustom.  Oleh karena itu, histogram dapat: </p><br><ul><li>  <strong>Hitung nilai rata-rata</strong> , yaitu jumlah nilai yang dibagi dengan jumlah nilai. </li><li>  <strong>Hitung pengukuran relatif dari nilai</strong> , dan ini sangat nyaman jika Anda perlu mencari tahu berapa banyak nilai dalam area tertentu yang sesuai dengan kriteria yang ditentukan.  Ini sangat berguna jika Anda perlu melacak proporsi atau menetapkan indikator kualitas. </li></ul><br><p>  Di dunia nyata, saya ingin menerima peringatan jika 20% dari server saya memiliki respons lebih dari 300 ms atau respons server lebih dari 300 ms lebih dari 20% dari waktu. </p><br><p>  Jika Anda berurusan dengan proporsi, <strong>Anda perlu histogram</strong> . </p><br><h3 id="svodki">  Ringkasan </h3><br><p>  Dasbor <strong>adalah histogram canggih</strong> .  Mereka juga menunjukkan jumlah dan jumlah pengukuran, dan juga <strong>kuantil untuk periode bergerak</strong> . </p><br><p>  Kuantil, jika ada, membagi kepadatan probabilitas menjadi segmen-segmen dengan probabilitas yang sama. </p><br><p>  <em>Jadi: diagram batang atau ringkasan?</em> </p><br><p>  Itu semua tergantung <strong>niat</strong> . </p><br><p>  Histogram menggabungkan nilai selama periode waktu tertentu, memberikan jumlah dan kuantitas yang dapat digunakan untuk melacak pengembangan metrik tertentu. </p><br><p>  Ringkasan, di sisi lain, menunjukkan kuantil selama periode bergerak (mis., Pengembangan berkelanjutan dari waktu ke waktu). </p><br><p>  Ini sangat nyaman jika Anda perlu mengetahui nilai yang mewakili 95% dari nilai yang dicatat selama suatu periode. </p><br><h3 id="3-zadaniya-i-ekzemplyary">  3. Tugas dan contoh </h3><br><p>  Mengingat kemajuan terbaru dalam arsitektur terdistribusi dan popularitas solusi berbasis cloud, Anda tidak mungkin menggunakan server tunggal yang berjalan sendiri. </p><br><p>  <strong>Server direplikasi dan didistribusikan di seluruh dunia.</strong> </p><br><p>  Untuk mengilustrasikan ini, mari kita lihat arsitektur klasik dua server HAProxy yang mendistribusikan ulang beban di sembilan server web backend ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tidak, tidak, tidak ada tumpukan Stackoverflow.</a> ) </p><br><p>  Dalam contoh kehidupan nyata ini, kami akan melacak <strong>jumlah kesalahan HTTP yang dikembalikan oleh server web</strong> . </p><br><p>  Dalam Prometheus, satu server web disebut <strong>instance</strong> .  <strong>Tugasnya</strong> adalah fakta bahwa Anda mengukur jumlah kesalahan HTTP pada semua instance. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/3x/s4/n9/3xs4n94kpfhqg3igmcrlfjatube.png"></a> </p><br><p>  Keindahannya adalah bahwa tugas dan instance adalah bidang dalam label, dan Anda dapat memfilter hasilnya dengan contoh atau tugas tertentu. </p><br><h3 id="udobno-zhe">  Apakah itu nyaman? </h3><br><h3 id="4-promql">  4. PromQL </h3><br><p>  Jika Anda menggunakan basis data berdasarkan InfluxDB, Anda mungkin sudah terbiasa dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">InfluxQL</a> .  Atau gunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SQL di TimescaleDB</a> . </p><br><p>  Prometheus juga memiliki bahasa sendiri untuk menanyakan dan mengambil data dari server: <strong>PromQL</strong> . </p><br><p>  Seperti yang sudah kita ketahui, data disajikan dalam bentuk pasangan kunci-nilai.  PromQL menggunakan sintaks yang sama dan mengembalikan hasil sebagai vektor. </p><br><p>  <em>Vektor macam apa?</em> </p><br><p>  Ada dua jenis vektor di Prometheus dan PromQL: </p><br><ul><li>  <strong>Vektor instan</strong> yang mewakili semua metrik dengan cap waktu terakhir. </li><li>  <strong>Vektor dengan rentang waktu</strong> : jika Anda perlu melihat pengembangan metrik dari waktu ke waktu, Anda dapat menentukan rentang waktu dalam permintaan ke Prometheus.  Sebagai hasilnya, Anda akan mendapatkan vektor yang menggabungkan semua nilai yang direkam untuk periode yang dipilih. </li></ul><br><p> <a href=""><img src="https://habrastorage.org/webt/gs/ih/1_/gsih1_1lvftmhzgzuze3ctrlhci.png"></a> </p><br><p>  API PromQL menyediakan serangkaian fungsi untuk operasi dengan data dalam kueri. </p><br><p>  Anda dapat mengurutkan nilai, menerapkan fungsi matematika pada mereka (misalnya, menghitung turunan atau eksponen), dan bahkan membuat prediksi (misalnya, menggunakan model Holt-Winters). </p><br><h3 id="5-instrumentirovanie">  5. Instrumentasi </h3><br><p>  <strong>Instrumentasi</strong> adalah bagian penting lain dari Prometheus.  Anda instrumen aplikasi sebelum Anda mengekstrak data dari mereka. </p><br><p>  Dalam Prometheus, instrumentasi berarti menambahkan perpustakaan klien ke aplikasi untuk memberikan metrik Prometheus. </p><br><p>  Instrumentasi tersedia untuk sebagian besar bahasa pemrograman umum: misalnya, <strong>Python, Java, Ruby, Go, dan bahkan Node atau C #</strong> . </p><br><p>  Intinya, Anda membuat objek memori (misalnya, meter atau penghitung) yang secara dinamis akan menambah atau mengurangi nilai. </p><br><p>  Lalu Anda memilih tempat untuk menyediakan metrik.  Prometheus akan mengambilnya dari sana dan menyimpannya di basis data deret waktu mereka. </p><br><p><img src="https://habrastorage.org/webt/xi/-u/xk/xi-uxkqvgontz2729o5rmroyxkk.png"></p><br><h3 id="6-eksportery">  6. Eksportir </h3><br><p>  Dalam aplikasi yang Anda tulis, sangat mudah untuk menyesuaikan metrik yang disediakan dan mengubahnya dari waktu ke waktu menggunakan instrumentasi. </p><br><p>  Untuk aplikasi, server, dan basis data yang terkenal, <strong>Prometheus menawarkan kepada eksportir tempat Anda dapat memantau target</strong> . </p><br><p>  Eksportir ini biasanya direpresentasikan sebagai gambar Docker dan mudah disesuaikan.  Mereka menyediakan satu set metrik yang siap pakai dan dasbor yang sering dibuat dengan yang Anda dapat mengkonfigurasi pemantauan dalam hitungan menit. </p><br><p>  Contoh eksportir: </p><br><ul><li>  Pengekspor database: untuk database MongoDB, SQL dan server MySQL. </li><li>  <strong>Eksportir HTTP</strong> : untuk server HAProxy, Apache, atau NGINX. </li><li>  <strong>Eksportir Unix</strong> : kinerja sistem dapat dipantau menggunakan eksportir simpul bawaan, yang menyediakan semua metrik sistem tanpa konfigurasi tambahan. </li></ul><br><p><img src="https://habrastorage.org/webt/7q/fm/uh/7qfmuhfszdwxa-k21na-hpko3tk.png"></p><br><h3 id="para-slov-o-vzaimnoy-sovmestimosti">  Beberapa kata tentang kompatibilitas satu sama lain </h3><br><p>  Sebagian besar database deret waktu mendukung interoperabilitas untuk sistem mereka. </p><br><p>  Prometheus bukan satu-satunya sistem pemantauan dengan persyaratan metriknya.  Misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">InfluxDB</a> (via Telegraf), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CollectD</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">StatsD</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nagios</a> juga memiliki standar sendiri. </p><br><p>  Oleh karena itu, untuk interaksi berbagai sistem, eksportir dibuat.  Bahkan jika Telegraf tidak mengirim metrik dalam format yang diterima oleh Prometheus, Telegraf dapat mengirim metrik ini ke eksportir InfluxDB, dari mana Prometheus kemudian akan mengambilnya. </p><br><h3 id="7-opovescheniya">  7. Lansiran </h3><br><p>  Saat bekerja dengan database deret waktu, Anda memerlukan umpan balik dari data, dan manajer lansiran bertanggung jawab untuk ini. </p><br><p>  Di Grafana, peringatan biasa terjadi, tetapi peringatan itu juga tersedia di Prometheus melalui manajer lansiran. </p><br><p>  <strong>Alert Manager adalah alat terpisah yang bergabung dengan Prometheus dan meluncurkan sirene khusus</strong> . </p><br><p>  Lansiran didefinisikan dalam <strong>file konfigurasi</strong> dan menetapkan seperangkat aturan untuk metrik.  Jika kepatuhan terhadap aturan terjadi dalam deret waktu, peringatan dipicu dan dikirim ke penerima yang ditentukan. </p><br><p>  Seperti di Grafana, Anda dapat menentukan alamat email, <strong>Slack webhook, PagerDuty, dan objek HTTP khusus</strong> sebagai penerima. </p><br><p><img src="https://habrastorage.org/webt/0x/xz/gf/0xxzgfpfufej_ro_ztjded5lbys.png"></p><br><h2 id="chast-iii-primery-ispolzovaniya-prometheus">  Bagian III.  Contoh Prometheus </h2><br><p><img src="https://habrastorage.org/webt/rq/6r/zk/rq6rzkeqnwe2xhzpukzx-hjdgi0.png"></p><br><p>  Dan, tentu saja, setiap pemandu harus memiliki <strong>contoh praktis</strong> .  Seperti yang saya katakan, teknologi bukanlah tujuan itu sendiri dan harus memenuhi tugas tertentu. </p><br><p>  Kami akan membicarakan ini. </p><br><h2 id="1-devops">  1. DevOps </h2><br><p>  Dengan semua pengekspor ini untuk berbagai sistem, basis data dan server, jelas bahwa Prometheus ditujukan terutama untuk <strong>industri DevOps</strong> . </p><br><p>  Kita tahu bahwa ada banyak pemasok yang bersaing dan solusi yang dipersonalisasi di bidang ini. </p><br><p>  <strong>Prometheus sangat cocok untuk DevOps.</strong> </p><br><p>  Hampir tidak ada upaya untuk mengatur dan menjalankan instance, dan Anda dapat dengan mudah mengaktifkan dan mengkonfigurasi alat bantu apa pun. </p><br><p>  Dengan <strong>mendeteksi target</strong> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">misalnya, melalui eksportir file</a> - ini adalah solusi yang bagus untuk tumpukan di mana kontainer dan arsitektur terdistribusi banyak digunakan. </p><br><p>  Dalam lingkungan di mana instance secara konstan dibuat dan dihapus, tidak satu pun tumpukan DevOps dapat dilakukan tanpa <strong>ditemukannya layanan</strong> . </p><br><h3 id="2-zdravoohranenie">  2. Kesehatan </h3><br><p>  Saat ini, solusi pemantauan diperlukan tidak hanya di bidang TI.  Mereka juga digunakan dalam industri besar yang menyediakan arsitektur perawatan kesehatan yang fleksibel dan scalable. </p><br><p>  Permintaan meningkat, dan arsitektur TI harus mematuhinya.  Jika Anda tidak memiliki alat yang dapat diandalkan untuk memantau seluruh infrastruktur, <strong>Anda berisiko terganggunya layanan</strong> .  Sudah di sektor kesehatan, bahaya seperti itu pasti harus diminimalkan. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Contoh ini dibahas di opensource.com pada artikel berikut</a> . </p><br><h3 id="3-finansovye-uslugi">  3. Layanan keuangan </h3><br><p>  Contoh terbaru diberikan pada konferensi InfoQ, yang membahas penggunaan Prometheus di lembaga keuangan. </p><br><p>  Jamie Christian dan Alan Strader menunjukkan bagaimana mereka menggunakan Prometheus untuk memantau infrastruktur mereka di Northern Trust.  Sangat informatif, saya menyarankan Anda untuk melihatnya. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_WQ9DSanFdw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="chast-x-chto-dalshe">  Bagian X. Apa Selanjutnya? </h2><br><p><img src="https://habrastorage.org/webt/mt/c6/ox/mtc6oxvnw8qk4fijh1ihciosuwy.png"></p><br><p>  Saatnya beralih dari <strong>teori</strong> ke <strong>praktik</strong> . </p><br><p>  Hari ini Anda berkenalan dengan dasar-dasar Prometheus, mempelajari fungsi apa yang dikerjakannya, alat dan sistem apa yang bekerja dengannya dan istilah apa yang digunakannya. </p><br><p>  Sekarang <strong>Anda memiliki semua yang Anda butuhkan untuk membuat solusi pemantauan Anda</strong> . </p><br><p>  Untuk memulai dengan Prometheus, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pelajari semua eksportir yang tersedia</a> . </p><br><p>  Kemudian instal alat yang diperlukan, buat dasbor pertama Anda - dan pergi! </p><br><p>  Jika Anda membutuhkan inspirasi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">baca artikel saya tentang cara memonitor mesin Linux dengan Prometheus dan Grafana</a> .  Ada instruksi untuk menyiapkan alat dan dasbor pertama. </p><br><p>  Saya harap Anda mempelajari sesuatu yang baru. </p><br><p>  Jika Anda memiliki topik untuk artikel saya berikutnya, bagikan. </p><br><p>  <strong>Selamat tinggal!</strong> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id455290/">https://habr.com/ru/post/id455290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id455276/index.html">Game cloud: Layanan Google Stadia mengumumkan harga untuk pengguna</a></li>
<li><a href="../id455280/index.html">Tanggapan psikiater untuk artikel "Sakit-sehat"</a></li>
<li><a href="../id455284/index.html">Alexey Savvateev dan teori permainan: "Berapa probabilitas bom atom akan jatuh dalam lima tahun ke depan?"</a></li>
<li><a href="../id455286/index.html">Gigi kebijaksanaan: tidak bisa dihilangkan</a></li>
<li><a href="../id455288/index.html">Berita terbaik minggu ini: pemblokir iklan perusahaan di kunci enkripsi Chrome, FSB dan Yandex, komunikasi semakin mahal</a></li>
<li><a href="../id455292/index.html">Cara 4 kali meningkatkan runtime perangkat dengan self-powered</a></li>
<li><a href="../id455294/index.html">Panduan: bagaimana memilih sepeda listrik menggunakan Twitter sebagai contoh - berbicara tentang bingkai</a></li>
<li><a href="../id455302/index.html">Kerangka API Golang</a></li>
<li><a href="../id455306/index.html">Jawaban atas pertanyaan Anda tentang mengapa Anda memerlukan penerbit untuk menerbitkan buku</a></li>
<li><a href="../id455308/index.html">Tempat yang menjanjikan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>