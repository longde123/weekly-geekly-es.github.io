<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦 👩🏿‍🤝‍👨🏾 🚌 Bagaimana saya membuat peta benua untuk permainan saya 👩🏻‍🔧 🧙 😐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bagian 1. SVG dan sistem koordinat 
 Sampai baru-baru ini, ukuran peta di game Dragons Abound saya sudah diperbaiki dan agak non-deterministik. Saya m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya membuat peta benua untuk permainan saya</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429620/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/2a8/d08/3272a8d0885e3e2f041a6f2bdb7400c9.png" alt="gambar"></div><br><h2>  Bagian 1. SVG dan sistem koordinat </h2><br>  Sampai baru-baru ini, ukuran peta di game <i>Dragons Abound</i> saya sudah diperbaiki dan agak non-deterministik.  Saya menganggap mereka "regional" - bukan peta seluruh dunia, tetapi bagian-bagian penting, seperti, misalnya, pantai barat Amerika Serikat atau bagian Eropa.  Saya cukup senang dengan skala ini, tetapi saya ingin sedikit bereksperimen dengan permainan untuk melihat apakah saya dapat menghasilkan peta seluruh dunia (atau setidaknya yang lebih besar).  Tapi sebelum saya mulai, mari kita bicara sedikit tentang peta dunia fantasi. <br><br>  Dunia adalah ruang besar.  Kebanyakan kartu "dunia" fantasi bahkan tidak mirip dengan ukuran sebenarnya.  Ambil contoh, Middle-earth, tempat aksi Lord of the Rings terjadi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/bc8/9f3/90fbc89f36ab284a974be18c66909558.jpg"></div><br>  Meskipun tampaknya dunia yang besar ditangkap, nyatanya, Dunia Tengah diciptakan atas dasar Eropa. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a0/e6d/d95/7a0e6dd9576841e7ecf87babf2a66b93.webp"></div><br>  Yaitu, peta sebenarnya dari "dunia" untuk dunia Tolkien akan menjadi sekitar 50 kali lebih besar dari peta Dunia Tengah (!).  Bahkan, sebagian besar peta dunia fantasi yang saya lihat mencerminkan suatu wilayah seukuran benua: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c95/17a/90e/c9517a90ef51440cda257b2300ba591e.png"></div><br>  Ini tampaknya menjadi area terbesar yang divisualisasikan dengan baik dalam gaya kartu fantasi. <br><br>  Artinya, tugas menghasilkan "peta dunia" nyata mungkin terlalu ambisius.  Lebih baik bertujuan membuat peta benua (atau bagian dari benua).  (Namun, masih lebih nyaman untuk menganggap kartu sebagai ukuran "dunia".) Jadi, ukuran apa kartu itu?  Jika <i>kartu Dragons Abound</i> saat ini memiliki ukuran “subkontinental”, maka kita dapat mengasumsikan bahwa Anda perlu membuat kartu 8-10 kali lebih besar. <br><br>  Sebelum saya beralih ke tugas menghasilkan peta besar, saya perlu lebih memahami berbagai sistem koordinat yang digunakan dalam game saya.  Saya meminjam banyak sistem koordinat dari kode sumber Martin O'Leary, dan interaksinya dapat membingungkan bahkan ketika Anda bekerja dengan mereka selama dua tahun.  Biasanya saya bisa melakukan tanpa bereksperimen dengan mereka, tetapi jelas bahwa saya harus melakukan ini untuk menghasilkan peta besar. <br><br>  Untuk mulai dengan, "dunia" peta regional saat ini sedang dihasilkan dalam satuan persegi.  Setiap peta regional memiliki koordinat dari (-0,5, -0,5) hingga (0,5, 0,5), dan titik asal (0,0) ada di tengah-tengah wilayah. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/201/c65/c30/201c65c30244efe1e6cd4bd47e07b901.png"></div><br>  Salah satu keanehan di sini adalah bahwa sumbu Y terbalik dibandingkan dengan apa yang kami pelajari dalam geometri sekolah.  -0,5 di bagian atas peta, dan 0,5 di bagian bawah.  Dalam grafik komputer, sumbu Y sering terbalik.  Saya mendengar bahwa ini dijelaskan dengan cara monitor pertama (TV) melakukan pemindaian dari atas ke bawah, yaitu, garis pemindaian pertama berada di atas, yang berikutnya tepat di bawahnya, dan seterusnya, yaitu, indeks Y dari garis pemindaian berubah dari nol di atas ke beberapa angka positif di bawah.  Bagaimanapun, sistem koordinat yang sama digunakan dalam format SVG (Scalable Vector Graphics), itulah sebabnya <i>Naga</i> juga <i>Berlimpah</i> . <br><br>  Sistem koordinat ini tidak tergantung pada bagaimana peta ditampilkan.  Ini hanya sistem tanpa dimensi untuk menciptakan dunia - kota ini berada di (0,12875, -0.223), perbatasan melewati dari (0,337, 0,010) menjadi (0,333, 0,017), dan seterusnya.  Dan meskipun peta regional saya saat ini terbatas pada kisaran 0,5 hingga -0,5, ini bukan batas sistem koordinat.  Saya dapat menciptakan dunia di luar batas-batas ini. <br><br>  Sistem koordinat berikutnya adalah apa yang disebut SVG viewbox.  Ini mengatur koordinat sebenarnya yang akan digunakan untuk menggambar grafik.  Sebagai contoh, <i>Dragons Abound</i> di awal menetapkan viewbox ke koordinat (-500, -500) dan memiliki lebar 1000 dan tinggi 1000: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/509/4f4/e4f/5094f4e4f04889dcc9f389fba59d2b24.png"></div><br>  (Ada kesalahan ketik pada gambar, bagian atas sumbu Y harus -500, maaf.) <br><br>  Anda mungkin memperhatikan bahwa dalam kasus ini, transformasi antara sistem koordinat pertama dan kedua hanya terdiri dari mengalikan semua dengan 1000. Yaitu.  untuk menggambar sesuatu, gim menemukan koordinat objek ini, mengalikannya dengan 1000, dan menggambar SVG dalam koordinat ini. <br><br>  Yaitu, saya bisa menggunakan koordinat viewbox untuk memungkinkan saya menggambar garis dari (0, 0) hingga (250, 250).  Tetapi pada kenyataannya, saya tidak ingin menggambar garis dari (0, 0) hingga (250, 250) di layar komputer.  Ini berarti bahwa jika saya ingin menampilkan peta di titik lain di layar, maka saya harus mengubah koordinat semua objek peta dan menggambar ulang mereka.  Itu akan menjadi pekerjaan besar. <br><br>  Untuk mengontrol koordinat tampilan grafik di layar, SVG memiliki sistem koordinat ketiga yang disebut viewport.  Viewport adalah bagian halaman di mana gambar harus digambar (di halaman web, ini adalah elemen &lt;svg&gt;).  Ia memiliki lebar, tinggi, dan lokasi.  Lokasi adalah koordinat sudut kiri atas viewport.  Artinya, jika saya akan menampilkan peta di viewport dengan koordinat (30, 100), yang memiliki tinggi dan lebar 800, maka sistem koordinat viewport akan terlihat seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/746/73e/f51/74673ef51f001d21b7871382c5dc0638.png"></div><br>  Dalam SVG, viewbox sistem koordinat dan viewport terhubung satu sama lain, dan SVG sendiri berurusan dengan transisi di antara mereka.  Kami cukup menggambar di sistem koordinat viewbox, dan semua yang ditampilkan ditampilkan di lokasi viewport yang sesuai.  (Beberapa masalah muncul saat membuat viewbox dan viewport dengan rasio aspek yang berbeda. Kemudian objek dipotong atau diregangkan, tergantung pada nilai atribut <code>preserveAspectRatio</code> . Saya sarankan untuk tidak melakukan ini sama sekali.) <br><br>  Ringkasnya: sebuah kota yang terletak di koordinat dunia (0,10, 0,33) digambarkan dalam koordinat (100, 330) dan ditampilkan di layar dalam (110, 764). <br><br>  Sekarang Anda bisa mengerti mengapa ini bisa membingungkan! <br><br>  Apa yang terjadi jika saya mengubah masing-masing sistem koordinat ini?  Misalkan dalam sistem koordinat pertama saya akan menghasilkan dunia mulai dari -0,25 hingga 0,25 pada setiap sumbu.  Maka dunia yang dihasilkan akan empat kali lebih kecil dari dunia yang biasa dan hanya mengisi bagian tengah viewport: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/894/11c/6c2/89411c6c2b1975f8512548a487191648.png"></div><br>  (Anda juga dapat melihat artefak di tepian yang biasanya disembunyikan.) Demikian pula, jika saya menggandakan ukuran sistem koordinat pertama (SK), kami tidak akan melihat sebagian besar peta, karena itu akan berada di luar tepi viewport. <br><br>  Apa yang terjadi jika saya menggandakan ukuran viewbox?  Nah, jika saya juga menggandakan rasio antara SC pertama dan viewbox (1000-2000), maka tidak ada yang akan banyak berubah.  Jika rasio tetap sama dengan 1000, maka peta akan dibelah dua lagi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/859/f79/dfe/859f79dfe453741087cedce2d6918e16.png"></div><br>  Namun, kali ini kartu memiliki luas awal 1x1.  Kita dapat kembali melihat artefak di tepian yang biasanya disembunyikan (misalnya, bagian hutan yang cembung).  Anda juga dapat melihat bahwa pola samudra salah - saya pasti memiliki beberapa asumsi tentang ukuran kotak view.  Selain itu, tampaknya kompas tidak terletak di sudut peta, tetapi di sudut kotak tampilan. <br><br>  Dan sebaliknya, jika saya mengurangi ukuran viewbox menjadi setengahnya, ini akan membuat efek zoom peta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/26e/f0e/f8e/26ef0ef8e0a2db5298de4720d12193fe.png"></div><br>  Di sini kita hanya melihat seperempat tengah peta.  Ini bukan cara yang mudah untuk memperbesar, karena hanya setengah dari peta yang menampilkan beberapa masalah - misalnya, penanda kota "South Owenson" melampaui layar.  Selain itu, itu menggandakan ukuran font dan hal-hal lain yang tidak saya butuhkan. <br><br>  Aspek yang lebih berguna dari kotak tampilan mengubah asal.  Sejauh ini, kotak tampilan telah dipusatkan di peta, tetapi ini tidak perlu.  Misalnya, saya bisa memindahkan peta ke kanan dengan memusatkan kotak view pada titik di sisi kiri peta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/bbf/662/970bbf662eb73852a4140af450c48fb8.png"></div><br>  Kita dapat kembali melihat efek pada perbatasan dan beberapa masalah lain, tetapi pada dasarnya peta telah bergerak ke kanan.  Kegunaannya mungkin tidak jelas, tetapi bayangkan saya akan menghasilkan peta yang lebarnya dua kali lipat dari peta biasa.  Secara default, tampilannya seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/fee/3ad/327fee3add9790b0a73a32d7e1ee04cf.png"></div><br>  Itu terlihat seperti peta lain, tetapi pada kenyataannya itu hanya bagian tengah dari peta yang lebih besar.  Yaitu, sekarang saya dapat mengubah kotak tampilan untuk mentransfer bagian lain peta ke jendela ikhtisar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/2a8/d08/3272a8d0885e3e2f041a6f2bdb7400c9.png"></div><br>  Di sini saya memindahkan sudut pandang ke kiri, jadi kita melihat bagian dunia di sebelah timur dari tampilan asli.  Beberapa nama di peta telah berubah karena <i>Dragons Abound</i> melakukan fungsi tertentu (misalnya, memberikan nama ke objek) berdasarkan apakah mereka terlihat.  Saya akan perlu mengubah ini sehingga ketika memindahkan kotak centang peta tetap konstan.  Namun, nantinya saya akan dapat memindahkan viewbox pada peta besar dan menghasilkan peta regional dari area yang diinginkan.  Yaitu, saya bisa membuat dan menampilkan peta besar seukuran benua, tetapi saya juga bisa menghasilkan peta regional area dalam peta besar. <br><br>  Untuk meringkas: permainan menggunakan tiga sistem koordinat.  Yang pertama adalah SC abstrak untuk objek-objek dunia.  Yang kedua adalah viewbox, yang mendefinisikan area yang terlihat di dunia.  Yang ketiga adalah viewport, itu mengontrol di mana peta akan digambar di layar.  Untuk menggambar dunia yang lebih besar, saya perlu memperluas SC pertama.  Untuk menampilkan lebih banyak di layar, Anda perlu memperluas kotak tampilan.  Saya juga dapat memindahkan kotak tampilan untuk menampilkan berbagai bagian dunia besar. <br><br><h2>  Bagian 2. Membuat kartu permanen </h2><br>  Pada bagian sebelumnya, saya menjelajahi sistem koordinat dan belajar cara menggerakkan viewport SVG untuk hanya menampilkan bagian individual dari dunia besar.  Namun, pendekatan ini memiliki beberapa masalah, karena sebelumnya saya berasumsi bahwa segala sesuatu yang tidak terlihat oleh kita tidak masalah.  Pada bagian ini, saya akan menghilangkan asumsi-asumsi ini sehingga memungkinkan untuk menghasilkan dan melihat berbagai bagian peta besar yang tidak dapat diubah. <br><br>  Masalah dengan penempatan nama, yang saya jelaskan di bagian sebelumnya, jelas terlihat pada dua jenis satu kartu ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/fee/3ad/327fee3add9790b0a73a32d7e1ee04cf.png"></div><br>  Di sini adalah dunia yang sama, hanya pandangan yang bergeser ke kiri: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/2a8/d08/3272a8d0885e3e2f041a6f2bdb7400c9.png"></div><br>  Anda mungkin memperhatikan bahwa geografinya sama, tetapi banyak nama telah berubah.  Karena dalam dua jenis objek yang berbeda terlihat, dan proses pembuatan nama dikendalikan oleh angka acak, nama yang berbeda diperoleh. <br><br>  Melihat kode itu, saya menemukan bahwa hampir semua objek diberi nama tergantung pada visibilitasnya.  Tetapi hanya ada satu pengecualian yang membuatnya sulit untuk memberi nama ke semua objek berikutnya.  Dalam kasus kami, pengecualian adalah <i>Dragons Abound</i> hanya menghasilkan garis pantai yang terlihat.  Alasannya sangat membingungkan.  Sebenarnya, ada "garis pantai" di sepanjang seluruh tepi dunia, tetapi penciptaan garis ini menghancurkan bagian dari logika program, karena ia merangkul seluruh dunia.  Untuk menghindarinya, saya hanya membuat garis pantai yang terlihat saja.  Sekarang karena peta dapat meluas jauh melampaui viewport, solusi ini tidak terlihat bagus.  Sebagai gantinya, saya harus berhenti membuat garis pantai ketika saya semakin dekat ke tepi sebenarnya dari peta.  (Yang saya masih meninggalkan layar untuk menyembunyikan masalah di tepinya.) <br><br>  Setelah menghilangkan masalah ini, nama-nama pada kedua kartu tetap konstan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39b/908/a83/39b908a83146f3161397cda6fbcba045.png"></div><br>  dan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6af/322/ad4/6af322ad4cb57591a51748243a8ac02e.png"></div><br>  Catatan lain untuk masa depan: jika saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fitur interaktivitas</a> untuk mengubah nama-nama objek peta, perubahan ini tidak akan dibuat ulang dalam bentuk saat ini, dan mungkin bahkan tidak akan dapat direproduksi.  Ini layak dipertimbangkan. <br><br>  Jika Anda melihat lebih dekat pada peta sebelumnya, Anda dapat melihat bahwa wilayah laut di dekat bagian tengah bawah peta memiliki label menggantung "Pulau Meb".  Itu terjadi karena <i>Dragons Abound</i> sebenarnya percaya bahwa wilayah lautan adalah sebuah pulau.  Saya tidak akan membahas perincian teknis, tetapi sangat sulit untuk membedakan pulau dari danau ketika mereka melampaui peta.  Algoritma ini membingungkan terhadap perubahan yang saya buat pada generasi garis pantai yang tak terlihat, dan untuk menghindari masalah seperti itu, ini perlu diperbaiki. <br><br>  Sekarang, mari kita lipat empat ukuran peta dan perlihatkan hanya seperempatnya di jendela peta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f40/81f/8d4/f4081f8d4d2ac9dd3d7d35077ba23450.png"></div><br>  Secara umum, semuanya terlihat baik (ada sistem sungai yang menarik di peta, sebuah danau besar, tetapi Anda dapat melihat bahwa kota sangat langka. Itu terjadi karena <i>Dragons Abound</i> menghasilkan 10-20 kota. Interval ini sangat cocok untuk dunia berukuran normal, tetapi buruk, ketika ukurannya empat kali lebih besar. Oleh karena itu, intervalnya perlu diubah sesuai dengan ukuran relatif dunia. Mungkin, perlu dilakukan di beberapa tempat. <br><br>  Ini kartu yang sama setelah memperbaiki masalah: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/821/113/b40/821113b400ab683c8fdfad87bccf3213.png"></div><br>  Sekarang di peta ada jumlah yang lebih logis dari kota-kota, tetapi ini menunjukkan kita masalah lain.  Anda dapat melihat banyak nama tambahan di tepi peta, misalnya, Nanmrummombrook, Marwynnley dan Noyewood di sudut kiri bawah.  Ini terjadi karena metode kode penempatan mencoba menempatkannya di tempat yang terlihat.  Sebelumnya, prosedur ini tidak pernah perlu khawatir tentang label di luar layar, karena dalam peta ukuran regional seluruh dunia biasanya terlihat.  Tapi sekarang mungkin ada kota dan benda lain yang terletak di luar layar.  Oleh karena itu, saya perlu menambahkan logika ke prosedur penempatan label yang tidak mencoba membuat label untuk objek peta yang tidak terlihat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9d/022/b5a/b9d022b5a3c22d9f7e1f4c5e7c24771e.png"></div><br>  Sekarang gambarnya lebih logis.  Di sebelah kanan, Cumden hampir tidak terlihat di peta, tetapi label masih terletak di tempat itu terlihat. <br><br>  Ada satu aspek yang tidak langsung terlihat pada peta besar: jumlah lokasi di dunia tidak berubah.  Meskipun peta (dalam arti tertentu) telah menjadi 4 kali lebih besar, luas totalnya masih dibatasi oleh jumlah lokasi yang sama.  Tahap awal pembuatan peta adalah untuk menutupi dunia dengan diagram Voronoi dengan jumlah lokasi yang konstan.  Artinya, ketika peta menjadi lebih besar, sel-sel Voronoi juga menjadi lebih besar. <br><br>  Akan logis untuk skala jumlah lokasi sesuai dengan ukuran peta, tetapi sayangnya, ketergantungan kecepatan eksekusi <i>Naga Berlimpah</i> pada jumlah lokasi jauh lebih buruk daripada linear, yaitu, menghasilkan peta dengan sejumlah besar lokasi dapat memakan banyak waktu.  Berikut adalah contoh kartu dengan resolusi quad (jumlah lokasi): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4bc/faa/7a6/4bcfaa7a64abf56cb1cf4aab84651215.png"></div><br>  Lokasi yang ditambahkan mengubah proses pembuatan, sehingga medannya berbeda dari peta yang ditunjukkan di atas, tetapi di atasnya Anda dapat melihat detail tambahan di pantai. <br><br>  Untungnya, ketika memprofilkan kinerja menghasilkan kartu besar, saya perhatikan bahwa sebagian besar waktu prosesor dihabiskan oleh masalah yang jelas.  Setelah debugging, saya menghilangkan yang paling mengganggu, yang memungkinkan saya untuk membuat peta lebih banyak lagi.  Ini seluruh kartu 4x: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/149/6f4/600/1496f4600dc18c1ffa955580e07d7161.png"></div><br>  Zoom 25% dilakukan.  Sepertinya ukuran peta maksimum yang dapat ditampilkan Chrome.  Prosedur generasi dunia dapat memproses peta yang lebih besar, tetapi mencoba menampilkannya, peramban mogok.  Dalam hal ini, Firefox tampaknya lebih fungsional;  Ini dapat menampilkan kartu 9 kali lebih besar dari ukuran aslinya.  Ini adalah bagian dari peta seperti itu - saya meninggalkannya dalam ukuran penuh, sehingga Anda dapat membukanya di jendela terpisah untuk lebih memahami ukuran dan detailnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15f/1a2/c98/15f1a2c98b85e749101f0a379e7b9937.png"></div><br>  Firefox mampu menghasilkan peta dengan ukuran ini, tetapi saya hanya bisa mengambil tangkapan layar pada ukuran maksimum jendela browser.  Saya memiliki fungsi untuk menyimpan peta sebagai file PNG, tetapi hanya dapat menyimpan bagian peta yang ditampilkan.  Saya pikir Anda dapat menggulir peta, menangkap layar individual dan menghubungkannya bersama-sama, tetapi itu akan memakan waktu. <br><br>  Solusi terbaik adalah menyimpan SVG itu sendiri sehingga dapat dibuka di program seperti Inkscape. <br><br>  Saya dulu bisa memotong dan menempelkan peta SVG ke Inkscape, tetapi SVG untuk peta dunia sangat besar sehingga ketika saya mencoba untuk memotong browser crash!  Untungnya, saya menemukan <a href="">FileSaver.js</a> dan Anda dapat menggunakannya untuk menyimpan SVG langsung ke file, dan kemudian membukanya di Inkscape, sehingga menciptakan gambar yang sangat besar. <br><br>  Setidaknya secara teoritis.  Ketika saya mencoba membuka peta ini di Inkscape, saya menemukan beberapa masalah. <br><br>  Masalah pertama adalah bahwa asumsi Inkscape berbeda dari asumsi Chrome dan Firefox dalam cara membuka SVG.  Secara khusus, jika warna isian tidak ditentukan dalam jalur, maka peramban menganggap bahwa tidak ada isian;  Inkscape menganggap garis besar diisi dengan hitam.  Karena itu, ketika saya membuka SVG yang disimpan di Inkscape, itu hampir sepenuhnya hitam, karena lapisan paling atas dari peta tidak mengandung warna isian.  Ini dapat diperbaiki dengan menentukan "fill: none" di tempat yang diperlukan sehingga garis besar tampak sama di kedua browser dan Inkscape. <br><br>  Masalah kedua adalah bahwa Inkscape memiliki kesalahan dalam memproses topeng.  Inkscape tampaknya membuat topeng dengan hanya satu elemen, dan menangani topeng dengan beberapa elemen dengan buruk.  <i>Dragons Abound</i> menciptakan banyak topeng dengan beberapa elemen.  Anda dapat mengatasi masalah ini dengan mengelompokkan semua elemen dari setiap topeng game ke dalam satu elemen grup (opsional). <br><br>  Masalah ketiga terkait dengan gambar dan sumber daya lainnya yang dapat diunduh.  Dalam SVG asli, referensi untuk mereka ditunjukkan dalam bentuk relatif, misalnya, "gambar / background0.png".  Sumber saya diatur sedemikian rupa sehingga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">server web terpisah yang saya gunakan</a> dapat menemukan sumber daya ini di tempat yang ditentukan.  Ketika saya mengambil SVG yang sama dan membukanya di Inkscape, jalur relatif ini diperlakukan sebagai URL "file:" dan Inkscape mencari sumber daya relatif ke folder tempat SVG disimpan.  Masalah ini dapat dengan mudah dielakkan dengan menyimpan SVG ke folder di mana sudah ada sumber daya di tempat yang tepat;  bisa berupa folder root yang sama yang digunakan oleh server web, atau tempat lain di mana ada salinan sumber daya di sepanjang jalur (relatif) yang sama. <br><br>  Masalah keempat adalah font.  <i>Dragons Abound</i> menggunakan font web dan font yang disimpan secara lokal;  keduanya dalam format WOFF2.  Di browser, mereka diterapkan ke teks menggunakan gaya font-family CSS, dan sebelum membuat peta, semua font yang mungkin diunggah ke halaman web untuk siap digunakan.  Ketika file yang sama dibuka di gim, mencari font di direktori font sistem, dan sepertinya tidak ada direktori font lain yang dapat ditentukan dengan cara apa pun.  Solusi sederhana (setidaknya pada mesin tempat saya berkembang) adalah menginstal font yang digunakan oleh game ke direktori font sistem.  Namun, ini tidak sesederhana kelihatannya, karena nama font harus cocok, dan pada Windows tidak ada cara mudah untuk mengubah nama font.  Tapi, tentu saja, skema seperti itu tidak akan berfungsi pada komputer yang semua font yang diperlukan tidak diinstal.  Solusi yang lebih portabel adalah dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menanamkan font SVG di peta</a> .  Ini akan ada dalam daftar TODO saya. <br><br>  Pada akhirnya, saya datang ke antarmuka pembuatan peta ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/88e/e69/c3b/88ee69c3b069b7c369cbf3921b6a3eba.png"></div><br>  Bidang input yang luas menentukan ukuran total dunia, di mana 1x1 adalah ukuran peta sumber.  Ukuran vbx (kotak tampilan) menentukan ukuran fragmen dunia yang ditampilkan pada peta;  pada tangkapan layar, ia juga memiliki nilai 1x1, artinya peta akan menampilkan seluruh dunia.  Bidang pusat vbx menentukan lokasi pusat peta di dunia;  0, 0 adalah pusat dunia.  Terakhir, parameter SVG menentukan jumlah piksel layar per 1 unit ukuran kotak tampilan;  pada nilai 775, peta 1x1 akan ditampilkan di layar dalam jumlah 775x775 piksel.  Ini nyaman ketika saya membuat peta yang sangat besar.  Dengan mengatur parameter ke nilai rendah (misalnya, 150 piksel), saya dapat memuat peta besar di layar secara keseluruhan. <br><br>  Dengan mengubah enam parameter ini, saya dapat mengontrol ukuran dunia dan sebagian kecil dari dunia yang ditampilkan pada peta.  Tombol Generate berfungsi persis seperti yang Anda duga;  tombol Display hanya menampilkan bagian dari dunia, yaitu, saya dapat menghasilkan dunia, dan kemudian menampilkan bagian-bagiannya sendiri, mengubah parameter kotak pandang tanpa perlu membuat ulang dunia.  (Seorang programmer akan lebih baik mengimplementasikan ini sebagai penskalaan dan pengguliran.) Tombol Simpan PNG menyimpan peta yang terlihat sebagai file PNG;  Tombol Simpan SVG menyimpan file SVG dari seluruh peta.  Tombol Test It digunakan untuk menjalankan kode uji, yang berubah selama pengembangan berbagai fungsi. <br><br>  Sekarang saya dapat menghasilkan dan mencerminkan semua bagian dari dunia besar, saya bisa beralih ke mengadaptasi bentuk tanah ke peta yang lebih besar. <br><br><h2>  Bagian 3. Bentuk Sushi </h2><br>  Setelah membuat berbagai perubahan di bagian sebelumnya, sekarang saya dapat menghasilkan dunia yang jauh lebih besar dari yang sebelumnya (hingga 8 kali lebih banyak) dan menyimpannya sebagai gambar grafik besar: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/963/31e/c94/96331ec940b59a6f349603f0024f5cc7.png"></a> </div><br>  (Buka gambar di jendela terpisah untuk melihat peta dalam resolusi penuh 4800x2400 di Flickr.) <br><br>  Saya menghasilkan peta-peta ini menggunakan generasi prosedural yang sama yang menciptakan peta regional.  Peta yang ditunjukkan di atas memiliki bentuk benua yang cukup teratur dan beberapa pulau terluar yang menarik.  Namun, itu terutama tergantung pada keberuntungan.  Ini peta lain: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/b03/406/fd1/b03406fd17f93c9e33cd8dd488b404c3.png"></a> </div><br>  Kartu ini hanya kekacauan dari pulau-pulau dan keju sushi Swiss. <br><br>  Berikut adalah contoh lain, sesuatu di antara dua kartu sebelumnya.  Ini tidak sepenuhnya realistis, tetapi mungkin menarik untuk lingkungan fantasi: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/7c3/c79/e98/7c3c79e98246dde23f7104428e9cf9b2.jpg"></a> </div><br>  Ini adalah daratan yang sangat luas, tetapi ada cukup banyak bentuk tanah yang aneh, dan secara umum dunia tidak terlihat "nyata".  (Meskipun bagi seseorang dunia seperti itu tampaknya cukup cocok untuk fantasi.) Jadi bentuk apa yang harus dimiliki oleh peta "dunia"? <br><br>  Sebagian besar peta dunia fantasi yang saya lihat mewakili benua pulau besar (dengan pulau-pulau kecil di sekitarnya), misalnya, seperti peta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Andelen ini</a> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/926/3f4/fb8/9263f4fb80cf2899f48693c31aa2566a.png"></div><br>  Atau semenanjung benua, seperti pada peta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Angorun ini</a> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/75c/ef4/bc1/75cef4bc1d0e698c2a76ee77bfc74bd0.png"></div><br>  Dari waktu ke waktu, peta seluruhnya terdiri dari tanah atau beberapa benua pulau, tetapi mereka lebih cenderung menjadi pengecualian terhadap aturan tersebut. <br><br>  Untuk memulai, mari mencari tahu generasi "pulau" benua.  Ternyata dalam permainan saya, sudah ada fungsi yang menghasilkan pulau tengah besar di peta dengan mempertimbangkan ukuran peta, jadi itu harus cocok untuk menghasilkan bentuk utama benua.  Kebisingan dan pulau-pulau tambahan akan mengurus sisanya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a7/86e/0b5/0a786e0b59241b451f3c225c23328a47.png"></div><br>  Saya tidak mengharapkan laut tengah yang besar di peta ini, tetapi ini adalah kejutan yang menyenangkan.  Ini adalah contoh lain: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f58/a14/788/f58a14788a7dbcd6fbaa25c9fb45457e.png"></div><br>  Masalah dengan fungsi pulau tengah adalah bahwa ia dimulai dengan lingkaran yang cocok untuk peta persegi yang ditunjukkan oleh saya, tetapi tidak terlalu baik untuk yang persegi panjang.  (Di bawah ini adalah contoh dengan sedikit distorsi, sehingga bentuk dasar lebih jelas terlihat.) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/30b/b43/073/30bb430737122e671fb2f2067fafea08.png"></div><br>  Ini mudah diperbaiki dengan menutupi sushi alih-alih lingkaran dengan elips (terdistorsi), diambil sesuai dengan ukuran peta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/393/7a9/2ea/3937a92ea08cd752739550bf59a89971.png"></div><br>  Pulau-pulau pusat ini diskalakan untuk mengisi peta, tetapi dalam banyak kasus untuk peta benua kita perlu meninggalkan "perbatasan" di sekitar benua.  Dua parameter mengontrol ukuran peta yang mengisi pulau di sepanjang sumbu X dan Y. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/b00/94e/ad4b0094e542930350a964377888a640.png"></div><br>  Berikut adalah sistem manajemen perbatasan yang sama dengan distorsi yang lebih logis: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/357/9e1/121/3579e11217c879a587f11b30380e94b9.png"></a> </div><br>  Dapat dilihat bahwa bagian timur dan barat peta tetap menjadi lautan.  (Anda dapat membuka peta di jendela terpisah untuk mempelajarinya lebih hati-hati.) Ini berarti bahwa peta menampilkan seluruh dunia (dan ujung kanan dan kirinya dapat dihubungkan) atau bagian dari dunia yang dapat dihubungkan ke peta lain yang juga memiliki lautan dari tepi yang sesuai. <br><br>  Seorang pembaca yang penuh perhatian yang telah mempelajari peta sebelumnya mungkin telah memperhatikan bahwa pola laut dan daratan berhenti di tengah peta.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelumnya, saya hanya punya peta ukuran 1x1, jadi ukuran pola laut dan daratan disesuaikan dengan peta ini. Pada peta yang lebih besar, saya perlu memasang pola secara manual di peta, jadi saya menambahkan fitur ini. (Ada cara di SVG untuk melakukan ubin pola, tetapi di Chrome itu mengandung bug, jadi saya tidak bisa menggunakannya.) Ini adalah fitur yang baik, karena sekarang saya dapat menggunakan pola daratan dan lautan yang lebih kecil yang secara otomatis akan ubin. Saya tidak tahu mengapa saya tidak menyadarinya sebelumnya! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, sekarang benua pulau berfungsi dengan baik, dan kita akan beralih ke implementasi benua "semenanjung" - peta di mana benua muncul di peta dari tepiannya.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9e/d75/914/d9ed75914bd6b4deaae08fb687b828e2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal ini, benua tidak dapat runtuh di tiga sisi. </font><font style="vertical-align: inherit;">Tetapi fitur utama dari peta tersebut adalah bahwa mereka memiliki koneksi darat yang signifikan antara benua yang ditampilkan pada peta dan tanah di luar peta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara termudah untuk menyediakan koneksi seperti itu di luar peta adalah dengan menetapkan permukaan laut yang rendah selama pembuatan. </font><font style="vertical-align: inherit;">Jadi kami akan meningkatkan luas lahan yang ditampilkan di peta, yang meningkatkan kemungkinan massa tanah yang besar dan terjadinya daratan (alih-alih laut) di sepanjang tepi peta.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24d/adb/522/24dadb52258988326f096336470d97c3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tentu saja, ini tidak menjamin bahwa massa tanah akan sangat menarik, dan memang itu akan disatukan: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/c22/335/c0bc223356225dea02bfbd773495f36e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesamaan satu benua dapat dibuat menggunakan generasi yang sama dari benua pulau, tetapi pada saat yang sama menggeser pulau ke tepi peta. </font><font style="vertical-align: inherit;">Anda mendapatkan sesuatu seperti ini:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/209/981/20e/20998120e01c4c48f53419855cf6f703.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapat dilihat bahwa benua (terutama) adalah pulau tengah, bergeser ke atas dan ke kanan. </font><font style="vertical-align: inherit;">Karena ini adalah benua dan tidak diperlukan untuk mempertahankan bentuk pulau yang ketat, Anda dapat menambahkan lebih banyak distorsi pada bentuknya.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5f/000/523/e5f00052339289e504ffcd82b7481545.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jelas, ada banyak pendekatan lain untuk generasi bantuan, tetapi dua ini, setidaknya, memberi saya kesempatan untuk menghasilkan bentuk-bentuk tanah yang paling umum pada skala benua. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembaca yang penuh perhatian dapat melihat bentuk hutan yang aneh dalam bentuk garis-garis pada banyak peta benua. </font><font style="vertical-align: inherit;">Lain kali saya akan mulai berurusan dengan masalah model angin dan bioma yang menyebabkan keanehan ini.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bagian 4. Model angin </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang dikatakan, ukuran benua di peta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dragons Abound</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mulai menunjukkan pola cuaca dan bioma yang tidak realistis. Contoh ini menunjukkan bahwa hutan berbaris di sepanjang arah angin yang ada:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/209/981/20e/20998120e01c4c48f53419855cf6f703.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alasannya bukan dalam kode yang rusak; model cuaca dan bioma terlalu sederhana, dan dalam skala besar hal ini menjadi jelas. Untuk mengatasi masalah ini, saya mulai dengan merevisi model angin. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin model angin saya lebih mencerminkan dinamika angin bumi: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel Hadley</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angin perdagangan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">dan sejenisnya. Dinamika semacam itu dapat membantu menghilangkan pola cuaca aneh di peta benua. Namun, ketika mereka ditambahkan, ketidakpuasan menyakitkan dengan model angin </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dragons Abound</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lambat dan terlalu rumit </font><font style="vertical-align: inherit;">, kembali terungkap </font><font style="vertical-align: inherit;">. (Baca tentang implementasi awal model angin di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) Setelah memikirkan hal ini selama beberapa hari, saya memutuskan bahwa sebagian besar masalah bermuara pada kenyataan bahwa peta permainan disajikan sebagai diagram </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voronoi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . (Atau lebih tepatnya, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">triangulasi Delaunay</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diagram Voronoi.) Ini memiliki banyak keuntungan ketika menghasilkan medan - dalam kombinasi dengan kebisingan, dapat menciptakan massa daratan yang tampak alami. Itulah mengapa sangat sering digunakan untuk menghasilkan bantuan. Tetapi karena masing-masing segitiga memiliki ukuran dan orientasi yang berbeda, setiap perhitungan, termasuk model angin yang menggunakan sel tetangga, menjadi sangat rumit. Akan lebih mudah untuk memodelkan angin melalui kisi-kisi area identik yang berjarak sama. Selain itu, model angin kemungkinan besar tidak harus sedetail tanah.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi saya tidak ingin sepenuhnya meninggalkan diagram Voronoi yang mendasari </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dragons Abound</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . (Minimal, ini akan membutuhkan penulisan ulang hampir seluruh program!) Sebagai gantinya, saya ingin bereksperimen dengan mengikat peta ke kisi yang seragam, menjalankan model angin di dalamnya, dan kemudian melakukan pengikatan terbalik. Jika kehilangan dalam menyalin bolak-balik tidak terlalu besar, maka ini dapat membuat model angin lebih cepat dan lebih mudah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grid mana yang harus saya gunakan? Idealnya, kisi-kisi harus terdiri dari daerah yang sama jaraknya dari tetangganya. Dan deskripsi ini seperti kisi segi enam.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/720/948/12a/72094812ad2adea8d6d71fa795146c44.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktanya, kisi segi enam adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cara terbaik untuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membagi permukaan datar menjadi bidang yang sama. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah selanjutnya adalah menentukan bagaimana mewakili kisi segi enam dalam program saya. Saya mencari di jaringan sedikit bantuan, dan setiap tautan mengembalikan saya ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman tentang kisi-kisi segi enam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Amit Patel ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terjemahan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam Habré). Mungkin, perlu untuk memulainya; Baik juga untuk pertama-tama menjelajahi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situs web Red Blob Games</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jika Anda mencari informasi tentang penerapan mekanisme permainan. Amit menjelaskan lebih baik daripada saya, jadi jika ada sesuatu yang tidak jelas, maka baca halamannya.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilihan pertama yang harus dibuat adalah cara menyimpan kisi segi enam. </font><font style="vertical-align: inherit;">Cara termudah adalah dengan menyimpannya sebagai array dua dimensi, maka saya perlu kemampuan untuk mengikat sel-sel grid ke array. </font><font style="vertical-align: inherit;">Ada banyak opsi di sini (baca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman Amit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), tetapi saya akan menggunakan apa yang ia sebut ganjil-r:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9c/a08/6bb/e9ca086bb2e5957db58d021c302c27f4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angka-angka di setiap sel adalah indeks sel dalam array dua dimensi. </font><font style="vertical-align: inherit;">(Gambar dicuri dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman Amit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Di halamannya itu interaktif, jadi saya sarankan Anda untuk bereksperimen dengan mereka.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah membuat pilihan, sekarang saya harus belajar cara melampirkan indeks ke kisi-kisi segi enam. </font><font style="vertical-align: inherit;">Misalnya, jika saya mencari sel heksagonal (3, 3), lalu seperti apa tetangganya? </font><font style="vertical-align: inherit;">Jika setiap sel memiliki lebar 5 piksel, lalu apa yang akan menjadi koordinat pusat sel (3, 3)?</font></font> Dan sebagainya.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berurusan dengan ini bisa sulit, jadi aku senang Amit melakukannya untukku. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan asumsi kita dapat mencuri semua yang kita butuhkan dari Amit, pertama-tama saya harus mencari cara mengatur hexagon di peta. Pada tahap ini, saya belum membutuhkan sebuah array, saya bisa berpura-pura bahwa itu adalah dan melihat di mana segi enam akan berada. Jika saya tahu lokasi heksagon, maka saya cukup membagi lebar peta dengan jarak horizontal di antara mereka untuk mendapatkan jumlah kolom, dan melakukan hal yang sama secara vertikal untuk mendapatkan jumlah baris, setelah itu saya menggambar segi enam di setiap tempat:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ba/0e2/d39/7ba0e2d39d51e3ea0584734fbb584f19.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segi enam ini jauh lebih besar daripada yang akan saya gunakan untuk model angin, tetapi mereka menunjukkan kepada saya bahwa semuanya ditempatkan dengan benar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini saya membuka tepi peta dan hanya menggambar segi enam pusat dan di perbatasan untuk memeriksa apakah saya benar-benar menutup seluruh peta:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f99/733/2a0/f997332a08696203af9e4cf044cf07cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian atas dan bawah berada di luar peta, tetapi keberadaan beberapa sel di luar negeri tidak penting jika saya tidak melewatkan bagian peta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah selanjutnya adalah membuat array untuk kisi-kisi segi enam dan pasang semua segitiga Delaunay ke segi enam yang sesuai. Karena Javascript tidak mendukung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indeks array negatif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , saya perlu menggeser sel (0, 0) dari pusat peta ke sudut kanan atas. Setelah melakukan ini, saya berkeliling semua segitiga Delaunay dan menambahkannya ke sel yang sesuai dari kisi segi enam. Saya dapat memverifikasi ini dengan mewarnai segi enam yang mengandung tanah:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/848/f2e/1b7/848f2e1b78edb9dbfb91abdbff1bcf56.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menentukan apakah sebuah sel adalah tanah, saya rata-rata ketinggian semua lokasi yang termasuk dalam sel ini. </font><font style="vertical-align: inherit;">Anda mungkin memperhatikan bahwa untuk beberapa heksagon pantai rata-rata di bawah nol bahkan di hadapan tanah. </font><font style="vertical-align: inherit;">Anda juga dapat menggunakan ketinggian maksimum semua lokasi di segi enam:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66b/041/254/66b0412544abda9d618ab32784bd9ec8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal ini, pencarian berlangsung di arah yang berlawanan - segi enam ditandai sebagai tanah jika ada tanah di dalamnya. </font><font style="vertical-align: inherit;">Mana yang lebih baik tergantung pada apa yang Anda butuhkan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal apa pun, saya dapat meningkatkan akurasi dengan mengurangi ukuran segi enam:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3b/0e7/1ec/c3b0e71ecf56429e04ea02a771b3a044.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang pantai telah menjadi jauh lebih baik, tetapi masalah baru telah muncul - banyak segi enam internal yang tidak dianggap tanah. Ini terjadi karena ketika segi enam menjadi cukup kecil, di dalam beberapa di antaranya tidak ada segitiga Delaunay sama sekali. Karena itu, mereka tidak memiliki "tinggi." (Ini juga menunjukkan ketidakteraturan segitiga Delaunay.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat menggunakan solusi ini - ambil ketinggian segitiga yang hilang sebagai rata-rata tetangga mereka, atau sebagai maksimum tetangga mereka.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d51/ad8/30f/d51ad830fd84fa509f8f47c40b730f07.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara umum, ketika pengikatan antara segi enam dan lokasi bukan satu-satu, koreksi diperlukan untuk mengisi informasi yang hilang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang saya telah meletakkan grid segi enam di peta, kita dapat mulai menerapkan model angin. Gagasan utama dari model angin adalah untuk mensimulasikan beberapa angin (angin perdagangan) dan mendistribusikannya ke seluruh peta sampai mencapai keadaan imobilitas. Pada tingkat segi enam (atau tingkat lokasi, jika saya melakukannya pada segitiga Delaunay) ini mencakup dua tahap: (1) kami merangkum semua angin memasuki segi enam saat ini, dan (2) kami menentukan bagaimana angin yang dijumlahkan meninggalkan segi enam.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tahap pertama cukup sederhana. </font><font style="vertical-align: inherit;">Setiap segi enam memiliki enam tetangga, dan masing-masing segi enam ini berkontribusi. </font><font style="vertical-align: inherit;">Jika kita menganggap masing-masing angin yang memasuki segi enam sebagai vektor, maka total angin dalam sel akan menjadi jumlah dari vektor-vektor ini, mis. </font><font style="vertical-align: inherit;">dua angin yang sangat berlawanan dengan kekuatan yang sama saling meniadakan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tahap kedua (menentukan bagaimana total angin meninggalkan segi enam) membutuhkan pemikiran. </font><font style="vertical-align: inherit;">Kasus paling sederhana adalah angin bertiup langsung melalui segi enam:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e8a/982/d5a/e8a982d5af635e1fbee1e82f20c1990d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal ini, kami berharap angin bergerak ke sel berikutnya tanpa perubahan. </font><font style="vertical-align: inherit;">(Di sini, vektor merah adalah angin asli, dan biru adalah vektor dari angin yang merambat.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi bagaimana jika angin tidak bertiup langsung ke sel tetangga?</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cd/396/196/3cd3961960c15fa86e60cd421336e23d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal ini, tampaknya logis bahwa sebagian angin bertiup ke segi enam tepat di atasnya, bagian lain ke dalam sel yang terletak berlawanan arah jarum jam dari yang ini, dan proporsinya harus bergantung pada arah titik panah. </font><font style="vertical-align: inherit;">Dalam kasus kami, bagian utama angin akan pindah ke sel atas, dan lebih sedikit ke sel tetangga. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juga penting untuk memutuskan arah angin yang menyebar. </font><font style="vertical-align: inherit;">Salah satu opsi adalah mempertahankan arah angin asli:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e31/e3f/6ef/e31e3f6ef05e18991e2e48462e47a05b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tampaknya ini adalah opsi yang paling realistis, tetapi ada satu lagi - untuk mengubah arah angin sesuai dengan tepi segi enam yang bersinggungan: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/96b/caa/11d/96bcaa11d738b2468eccd1ea758b9e8d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendekatan ini kurang akurat, tetapi memiliki keuntungan: angin yang masuk akan selalu berada di salah satu dari enam arah, yang dapat menyederhanakan perhitungan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesulitan lain muncul ketika mempertimbangkan medan. </font><font style="vertical-align: inherit;">Apa yang harus terjadi ketika sebuah gunung ditiup angin?</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a95/c03/492/a95c0349265fe5581df74ebb33bbd4f5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dalam hal ini, sebagian dari angin melewati gunung (mungkin menciptakan presipitasi), tetapi sebagian dari angin berputar ke samping. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f4/e8b/fe3/5f4e8bfe34c0e0a8fd7a9bb784487ad9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oleh karena itu, cara angin keluar dari segi enam tergantung pada arahnya, serta topografi di sel-sel tetangga. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang mari kita bicara tentang cara merepresentasikan vektor. </font><font style="vertical-align: inherit;">Ada dua opsi utama. </font><font style="vertical-align: inherit;">Pertama, vektor dapat direpresentasikan sebagai nilai X dan Y, misalnya seperti ini:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/253/4da/c67/2534dac673d43b8bf4d93f70254e540a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita menggambar vektor mulai dari (0, 0), maka (X, Y) adalah koordinat dari titik akhir. </font><font style="vertical-align: inherit;">Catatan seperti itu membuatnya sangat mudah untuk menjumlahkan vektor. </font><font style="vertical-align: inherit;">Kami hanya menjumlahkan semua nilai (X, Y) dan mendapatkan vektor baru:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9fd/b4c/427/9fdb4c427518523698ec72c34b854059.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pilihan lain adalah menggunakan sudut dan panjang vektor: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c43/421/9c9/c434219c9ba69e9a29b5d73b665d5e96.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam bentuk ini, mudah untuk melakukan operasi seperti memutar vektor atau mengubah panjangnya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk sebagian besar operasi yang diperlukan dalam model angin, opsi pertama lebih baik, tetapi dalam beberapa kasus yang kedua lebih baik, sehingga akan lebih mudah untuk beralih di antara mereka jika perlu. </font><font style="vertical-align: inherit;">Agar tidak menemukan kembali roda, saya mencari perpustakaan vektor untuk Javascript dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Victor.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sepenuhnya muncul </font><font style="vertical-align: inherit;">, jadi saya mengambil keuntungan dari itu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan mulai dengan menambahkan vektor angin ke setiap segi enam dan melihat apakah saya dapat memvisualisasikannya:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9e/1a2/b49/d9e1a2b49e115bbc4436a8e518164adb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terlihat bagus sejauh ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah selanjutnya adalah memeriksa apakah saya dapat dengan benar membagi vektor angin dan mendistribusikannya ke sel berikutnya. Pertama, Anda perlu menghitung sudut yang mengarah ke sel lain. Saya menemukan jawabannya lagi di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman Amit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f2/f9d/4a9/9f2f9d4a9c349dbb47ff2dc32ede0ff8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yaitu, vektor pada 0 derajat menunjuk ke segi enam di sebelah kanan, pada 60 derajat - ke segi enam di kanan bawah, dan seterusnya. Vektor yang menunjuk di antara dua arah ini dibagi secara proporsional antara dua sel - yaitu, vektor pada sudut 30 derajat akan dibagi secara merata antara sel ke kanan dan sel dari bawah ke kanan. Setiap vektor terletak di suatu tempat di antara sudut-sudut wajah dari dua sel yang bersebelahan, jadi lihat saja sudut vektor angin, cari tahu bahwa ia jatuh di antara sudut-sudut pusat dari dua segi enam, dan kemudian membaginya secara proporsional di antara kedua segi enam ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, jika vektor angin memiliki sudut 22 derajat:</font></font><br><br><div style="text-align:center;"><img height="320" src="https://habrastorage.org/getpro/habr/post_images/147/fc8/add/147fc8add812755fa9abab8c5eb928aa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemudian 38/60 dari nilai merambat ke sel di sebelah kanan, dan 22/60 dari nilai vektor ke sel di kanan bawah. Jika vektor disajikan sebagai pasangan nilai X dan Y, maka Anda dapat mendistribusikannya dengan mengalikan setiap nilai vektor asli dengan fraksi (misalnya, dengan 22/60), dan kemudian menambahkannya ke vektor angin di hexagon baru. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menguji ini, saya dapat mengatur angin di arah yang berbeda dan menempatkannya di bagian atas dan samping peta dan melihat apakah mereka dapat menyebar dengan benar di peta. Ketika angin bertabrakan, mereka harus digabungkan dan memilih arah rata-rata dengan peningkatan kecepatan:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/039/482/4ac/0394824ac970c0887bb100c515ea300e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini kita melihat bahwa angin bertemu di sepanjang diagonal dan bergabung untuk berhembus ke sudut bawah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah selanjutnya adalah memperhitungkan pengaruh tanah terhadap angin. </font><font style="vertical-align: inherit;">Tentu saja, model angin nyata sangat kompleks, tetapi saya terutama tertarik pada bagaimana geografi tanah mempengaruhi angin permukaan. </font><font style="vertical-align: inherit;">Pada tingkat paling sederhana, ini adalah pengaruh ketinggian tanah dan dataran rendah pada arah dan kecepatan angin. </font><font style="vertical-align: inherit;">Saya bereksperimen dengan banyak pendekatan berbeda, tetapi sebagai hasilnya saya menetapkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dua aturan sederhana</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Angin berpaling dari rintangan. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Angin melambat saat naik, dan berakselerasi, jatuh. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hambatan terjadi ketika angin berhembus ke dalam sel dengan ketinggian yang lebih tinggi, misalnya, ke dalam sel dengan gunung. </font><font style="vertical-align: inherit;">Ketika ini terjadi, saya melihat dua sel di mana angin bertiup, dan mengubah sudut angin sehingga lebih mengarah ke yang lebih rendah dari dua segi enam. </font><font style="vertical-align: inherit;">Besarnya sudut perubahan tergantung pada perbedaan ketinggian dua sel, jadi ketika angin berhembus menjadi dua sel tetangga dengan gunung, arahnya berubah sedikit, tetapi jika ia berhembus ke dalam sel dengan gunung dan sel dengan dataran, maka itu akan berubah lebih ke arah sel kosong:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6f/4cd/b90/e6f4cdb90eb194445cf21b3c5679e3ca.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kekuatan angin bisa disesuaikan. </font><font style="vertical-align: inherit;">Pada peta di atas, ia terlalu kuat, yang akan mengarah pada munculnya banyak bioma yang tidak realistis. </font><font style="vertical-align: inherit;">Berikut ini arti yang lebih logis:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e70/676/6f8/e706766f8d1abfc1ad18b928b72d9c7e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagian besar pergerakan angin yang disebabkan oleh relief masih tetap ada, tetapi celah besar dan lembah angin kencang telah menjadi lebih kecil. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur lain yang meningkatkan realisme adalah dispersi angin. Misalnya, peta di atas menunjukkan bahwa angin bertiup ke barat tepat di atas kota Breeches. Meskipun berhembus jarak jauh, itu tidak pernah menghilang seperti yang kita harapkan. Ketika angin yang berhembus bertemu dengan udara lain, biasanya angin bertiup bersama dengannya. Untuk mensimulasikan ini, saya dapat mengambil sebagian kecil angin yang bertiup di setiap segi enam dan mendistribusikannya ke semua sel tetangga. Beginilah tampilan peta di atas dengan sebaran kecil:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98d/53c/6d1/98d53c6d1659c068a8d36c58d692bd02.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang Anda lihat, sekarang angin di atas Breeches mulai menghilang sedikit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi ini menentukan sebagian besar arah angin. Bagian kedua adalah perlambatan angin ketika naik dan akselerasi saat menurunkan. Saya dapat menyadari hal ini dengan melihat ketinggian relatif sel dari mana angin datang, dan ketinggian sel tempat angin bertiup, dan mempercepat / memperlambatnya jika perlu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Begini tampilannya:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/633/2c0/d8b/6332c0d8b042591426238cceafaea5a8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita melihat bahwa bagian dari angin yang bertiup melalui pegunungan tinggi di bagian tengah pulau terputus. Dan sebaliknya - beberapa angin baru muncul di bagian barat pulau itu, tempat udara bergerak dari daratan yang relatif tinggi ke laut. (Ini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angin sepoi-sepoi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Meskipun tidak terlalu: mekanismenya berbeda di sana.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang saya dapat mengganti angin baru ke dalam algoritma presipitasi yang ada. Ini perbandingannya (angin tua di kiri, angin baru di kanan):</font></font><br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/1e2/c41/3b4/1e2c413b436456e0964c50b794a402db.png"></a> </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik pada gambar untuk melihat versi yang lebih besar.) Jelas, ada perbedaan antara model angin. Di kedua peta, angin bertiup dari timur. Pegunungan di dekat pusat peta membelokkan angin ke selatan, menyebabkan hujan lebat dan membuat rawa dan hutan di selatan pegunungan. Di bagian bawah, angin bertiup tanpa gangguan, dan hutan terbentuk di sepanjang bagian timur pulau. Dalam model angin asli, angin yang cukup melewati pegunungan tengah dan rawa-rawa untuk membuat hutan di bagian barat pulau. Dalam model baru, sebagian besar angin terputus dan membentuk biomassa berumput di sisi jauh pegunungan.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model lama memiliki variabilitas parameter acak (dalam interval yang diberikan), dan ada kemungkinan bahwa beberapa kombinasi dari parameter ini akan memberikan gambar lebih seperti peta baru. Namun pada kenyataannya, kita tidak perlu mereproduksi perilaku yang tepat dari model lama, hanya model yang menciptakan hasil yang terlihat meyakinkan.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inti dari semua ini adalah untuk mempercepat dan menyederhanakan generasi angin sehingga perilaku angin baru dapat ditambahkan ke peta benua. </font><font style="vertical-align: inherit;">Apakah saya melakukannya? </font><font style="vertical-align: inherit;">Saya membuat profil model angin asli dan model berbasis hexagon baru. </font><font style="vertical-align: inherit;">Ternyata model baru itu 15-20 kali lebih cepat daripada yang asli (!). </font><font style="vertical-align: inherit;">Ini adalah akselerasi yang sangat signifikan yang tidak banyak berpengaruh pada kartu. </font><font style="vertical-align: inherit;">Percobaan memperjelas bahwa model ini tidak terlalu sensitif terhadap ukuran segi enam, jadi jika perlu, saya dapat mempercepat algoritma lebih banyak lagi dengan meningkatkan ukuran sel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lain kali kita akan bekerja menggunakan model angin baru untuk menerapkan pola angin skala benua, dan kemudian menghubungkannya dengan model curah hujan dan bioma.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429620/">https://habr.com/ru/post/id429620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429606/index.html">Selusin untuk PM: daftar buku untuk manajer proyek</a></li>
<li><a href="../id429610/index.html">Kisah tentang cara menjalankan emulator Android atau menghemat prosesor intel</a></li>
<li><a href="../id429612/index.html">Fulsteks adalah MIDL abadi. Jangan ikuti jalan ini jika Anda tidak ingin menderita</a></li>
<li><a href="../id429616/index.html">Digital Workspace Bagian 1: Citrix</a></li>
<li><a href="../id429618/index.html">Game elektronik XO</a></li>
<li><a href="../id429622/index.html">Robot menggantikan Amazon dengan 20.000 pekerja</a></li>
<li><a href="../id429624/index.html">Bagaimana NASA akan menggunakan robot untuk membuat bahan bakar roket dari tanah Mars</a></li>
<li><a href="../id429626/index.html">Kerupuk genom telah menunjukkan bahwa tidak ada DNA yang akan anonim lagi</a></li>
<li><a href="../id429628/index.html">Cara membuat bot obrolan untuk VKontakte menggunakan Python, Django dan webhook</a></li>
<li><a href="../id429630/index.html">"Monster dalam game atau membuat rasa takut beragam"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>