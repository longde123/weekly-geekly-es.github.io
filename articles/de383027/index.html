<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèª üë¥ ü§≤üèø IoT f√ºr einen Cent: ein praktischer Leitfaden. Teil 2, Software üå´Ô∏è üë©üèª‚Äçüé§ üôÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir setzen die Reihe von Leitartikeln fort, in denen wir uns √ºberlegen, wie ein einfaches und billiges Cloud-basiertes und IoT-Ger√§t mit gro√üem Potenz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IoT f√ºr einen Cent: ein praktischer Leitfaden. Teil 2, Software</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/383027/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir setzen die Reihe von Leitartikeln fort, in denen wir uns √ºberlegen, wie ein einfaches und billiges Cloud-basiertes und IoT-Ger√§t mit gro√üem Potenzial von Grund auf ohne L√∂ten und unn√∂tige Schwierigkeiten implementiert werden kann. Nehmen Sie einen sauberen Mikrochip ESP8266, installieren Sie die Firmware von DeviceHive, konfigurieren und schreiben Sie eine einfache Webanwendung, um auf den Cloud-Server zuzugreifen. Wir bauen ein einfaches Ger√§t zusammen und verbinden es mit dem Mikrochip, der mit wenigen Klicks im Browser gesteuert werden kann. Hier ist der zweite Teil des Zyklus, in dem beschrieben wird, welche Software ben√∂tigt wird, wie sie gestartet wird, wie ESP8266 geflasht wird und wie man sich mit dem Server anfreundet.</font></font></i><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/VuReziKXvos%3Ffeature%3Doembed&amp;usg=ALkJrhjWNxio8f65Uh1aW5qQmlujGcIC-Q" frameborder="0" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Autor des Artikels zeigt, was heute diskutiert wird. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ersten Artikel der Serie: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT f√ºr einen Cent oder Was DeviceHive kann. </font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT f√ºr einen Cent: ein praktischer Leitfaden. </font><font style="vertical-align: inherit;">Teil 1, Hardware.</font></font></a><br>
<a name="habracut"></a><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie einen Server</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen wir den einfachsten Weg und nutzen den kostenlosen DeviceHive-Spielplatz. </font><font style="vertical-align: inherit;">Gehen Sie dazu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und registrieren Sie sich. </font><font style="vertical-align: inherit;">Danach melden Sie sich an und gelangen auf diese Seite:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/844/419/90d/84441990d53945c1b48f2fae010472ff.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Herzliche Gl√ºckw√ºnsche! </font><font style="vertical-align: inherit;">Jetzt haben Sie Ihren eigenen Spielplatz auf DeviceHive. </font><font style="vertical-align: inherit;">Verwenden Sie den URL-API-Link, um von au√üen eine Verbindung zur Spielgruppe herzustellen. </font><font style="vertical-align: inherit;">Dies ist die Adresse, mit der wir √ºber ESP8266 und die Clientanwendung auf den Server zugreifen. </font><font style="vertical-align: inherit;">Verwenden Sie den angegebenen Login (Initial Login) und das angegebene Passwort (Initial Password), um auf das Admin-Panel (unter Admin-URL) zuzugreifen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein kleiner Exkurs: Der Server kann lokal oder in einem Cloud-Dienst bereitgestellt werden. </font><font style="vertical-align: inherit;">Installationsanweisungen finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie k√∂nnen es einfacher machen - starten Sie den Server mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in einer Zeile: </font><font style="vertical-align: inherit;">
Eine vollst√§ndige Beschreibung finden Sie </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">hier</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
DeviceHive ist ein vollst√§ndig Open Source-Projekt. </font><font style="vertical-align: inherit;">Dies bedeutet, dass der Server sowohl zu Hause als auch in einem Cloud-Dienst, z. B. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Azure</font></a><font style="vertical-align: inherit;"> , bereitgestellt werden kann</font></font><br>
<br>
<code>docker run -d --name=devicehive -p 8080:80 -p 9001:9001 devicehive/devicehive-standalone<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit, die Firmware zu machen. Dazu m√ºssen wir den ESP8266 an den Computer anschlie√üen und dann den USB-&gt; UART-Adapter, das Netzteil und das ESP8266-Modul anschlie√üen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie den Treiber f√ºr Ihren Adapter. Linux-Benutzer sind hier einfacher, da die meisten dieser Treiber bereits im Kernel enthalten sind. Windows- und OS X-Benutzer m√ºssen den Adaptertreiber jedoch selbst installieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Links zu den offiziellen Download-Seiten f√ºr die beliebtesten Chips: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CP210x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PL230x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.prolific.com.tw/US/ShowProduct.aspx?pcid=41</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
FTDI: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www. ftdichip.com/Drivers/VCP.htm</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CH341: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.wch.cn/index.php?s=/page-search_content-keyword-CH341SER.html</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schlie√üen Sie den Adapter an und stellen Sie sicher, dass der Treiber ordnungsgem√§√ü funktioniert. Unter Linux sollte das Ger√§t im Dateisystem / dev / ttyUSB *, unter OS X - /dev/tty.* und unter Windows angezeigt werden. Im Ger√§te-Manager sollte ein zus√§tzlicher COM-Anschluss angezeigt werden. Wenn alles in Ordnung ist, trennen Sie den Adapter vom Computer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbinden Sie anschlie√üend den Ausgang des Netzteils (3,3 Volt) mit zwei Dr√§hten mit dem ESP8266. Damit sich das Modul beim Einschalten einschalten kann, muss es arbeiten k√∂nnen, indem dem Ausgang von CH_PD ein hoher Pegel zugef√ºhrt wird. Das Modul muss dar√ºber informiert werden, dass der interne Speicher verwendet wird. Wenn der GPIO15 eingeschaltet ist, sollte er daher niedrig sein. Und um in den Programmiermodus zu gelangen, m√ºssen wir einen niedrigen Pegel auf GPIO0 anwenden. Letzteres ben√∂tigen wir nur w√§hrend der Firmware. Es klingt gruselig, aber in Wirklichkeit m√ºssen wir nur die drei Dr√§hte von CH_PD mit dem Plus der Stromquelle verbinden und GPIO0 und GPIO15 mit der Masse (Minus) der Stromquelle verbinden. Zuletzt verbinden wir den USB-&gt; UART-Adapter mit drei weiteren Dr√§hten: Wir verbinden die Klemmen abz√ºglich der Quelle (GND) mit der Adaptermasse,Der Ausgang des RX-Adapters ist mit dem Ausgang des TX-Moduls des ESP8266 und der Ausgang des TX-Adapters mit dem Ausgang des RX-Moduls verbunden. Wir erhalten das endg√ºltige Anschlussdiagramm f√ºr drei verschiedene Standardmodule. Wenn ein Ausgang fehlt, ist er h√∂chstwahrscheinlich bereits im Modul angeschlossen. Das lila Kabel ist die vor√ºbergehendste Verbindung, um in den Programmiermodus zu gelangen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e1/9f3/512/8e19f3512588495b876d97a3e9ab806f.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c11/6df/510/c116df510f854c09b2e12ea14b5c5d23.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8fb/a10/7b3/8fba107b32ee43199ff3d113922f5880.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel f√ºr die Ausf√ºhrung einer solchen Verbindung:</font></font><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/482/644/75f/48264475fcfa4d408b58d46b85b38046.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen, war zum L√∂ten nichts erforderlich, alle Verbindungen k√∂nnen mit normalen Steckverbindern hergestellt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schalten Sie als N√§chstes die Stromquelle ein, schlie√üen Sie den Adapter an den Computer an und laden Sie die neu kompilierte DeviceHive-Firmware f√ºr ESP8266 herunter. </font><font style="vertical-align: inherit;">Zum Zeitpunkt der Ver√∂ffentlichung, die erste und die </font><font style="vertical-align: inherit;">neueste Version ist verf√ºgbar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neue vorkompilierte Versionen finden Sie immer auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie k√∂nnen auch das gesamte Repository nehmen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kompilieren die Firmware selbst und √§ndern Sie </font><font style="vertical-align: inherit;">es , </font><font style="vertical-align: inherit;">wie Sie wollen. </font><font style="vertical-align: inherit;">Der gesamte Code im Repository ist unter MIT lizenziert.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entpacken Sie das √ºber den obigen Link heruntergeladene Archiv in ein separates Verzeichnis und f√ºhren Sie esp-flasher- &lt;Ihr Betriebssystemname&gt; √ºber die Konsole aus (Windows-Benutzer k√∂nnen einfach auf esp-flasher-win.exe doppelklicken). Als Ergebnis sollten Sie so etwas haben:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e2/0d2/3ab/8e20d23ab58341e595662a60778544af.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zum mitgelieferten Dienstprogramm f√ºr die Firmware ESP8266 k√∂nnen Sie auch ein anderes Dienstprogramm verwenden, z. B. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esptool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Herzlichen Gl√ºckwunsch - die Firmware ist installiert und funktioniert bereits! Trennen Sie nun die Masse vom GPIO0-Pin (wird nicht mehr ben√∂tigt), damit das Modul nicht wieder in den Programmiermodus wechselt. Um eine Verbindung zum ESP8266-Terminal herzustellen, f√ºhren Sie esp-terminal- &lt;Ihr Betriebssystemname&gt; oder ein anderes Terminal mit serieller Schnittstelle aus, das Escape-Zeichen unterst√ºtzt, z. B. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder das GNU-Dienstprogramm 'screen'. Portparameter: Geschwindigkeit 115200, 8N1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beide enthaltenen Dienstprogramme k√∂nnen automatisch den Port erkennen, an den der ESP8266 angeschlossen ist, d. H. Beim Start sind keine Parameter erforderlich. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Starten des Terminals sehen wir die Einladung:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/89a/fa8/916/89afa8916b634d60877dabb7ac9ff577.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tats√§chlich ist dies ein regul√§res Unix-√§hnliches Terminal, das die automatische Vervollst√§ndigung (Tabulatortaste) und den Verlauf (Aufw√§rts-, Abw√§rts-Tasten) unterst√ºtzt. </font><font style="vertical-align: inherit;">Tats√§chlich gibt es dort jedoch keine Datei oder Betriebssysteme. </font><font style="vertical-align: inherit;">Eine Liste der verf√ºgbaren Befehle finden Sie unter 'Hilfe':</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3ab/5fe/a19/3ab5fea19fbb4c9cb662c9136c4364e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir interessieren uns f√ºr den Befehl 'configure'. </font><font style="vertical-align: inherit;">F√ºhren Sie es aus, um das Ger√§t zu konfigurieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Dienstprogramm stellt f√ºnf einfache Fragen:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Name Ihres Wi-Fi-Netzwerks.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passwort Ihres Wi-Fi-Netzwerks.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die API-Adresse Ihres Servers.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ger√§te-ID Ihres Ger√§ts.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeviceKey Ihres Ger√§ts.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie unter "DeviceHive-Server-URL" die "API-URL" vom Server ein. </font><font style="vertical-align: inherit;">In ‚ÄûDeviceID‚Äú - einer eindeutigen Ger√§tekennung f√ºr den Server - werden mit diesem Namen Ger√§te auf dem Server unterschieden. </font><font style="vertical-align: inherit;">"DeviceID" kann einfacher Text sein. </font><font style="vertical-align: inherit;">Insbesondere k√∂nnen Sie eine Text-GUID generieren, indem Sie auf die Registerkarte klicken. </font><font style="vertical-align: inherit;">Geben Sie bei der letzten Anforderung von DeviceKey das ausgew√§hlte Kennwort ein. </font><font style="vertical-align: inherit;">Es kann durch Dr√ºcken der Tabulatortaste generiert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier lohnt sich ein kleiner Exkurs. </font><font style="vertical-align: inherit;">ESP8266 verwendet die Serverauthentifizierung nach Ger√§te-ID. </font><font style="vertical-align: inherit;">Sobald DeviceID und DeviceKey auf dem Server registriert sind, kann kein anderes Ger√§t mit derselben DeviceID, aber mit einem anderen Kennwort eine Verbindung herstellen. </font><font style="vertical-align: inherit;">In Zukunft ist ein DeviceKey-Kennwort m√∂glicherweise nur erforderlich, wenn Sie das physische Ger√§t durch ein anderes Ger√§t mit derselben Ger√§te-ID ersetzen m√∂chten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht das Setup aus:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7f0/f03/fb1/7f0f03fb17254a9aaedfccd4ae78e0b2.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir alles richtig gemacht haben, k√∂nnen wir in die Debug-Ausgabe schauen und sicherstellen, dass das Ger√§t erfolgreich mit dem Server verbunden ist. Hier ist die Debug-Ausgabe eines erfolgreich verbundenen Ger√§ts:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/664/ea5/a6e/664ea5a6eccb456c9826c2357cf108e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
USB-&gt; UART-Adapter kann jetzt deaktiviert werden. Sie k√∂nnen es verlassen, wenn Sie die Debug-Ausgabe oder den Netzwerkstatus anzeigen m√∂chten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Registerkarte "Ger√§te" im Admin-Bereich wird nun das erste Ger√§t angezeigt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versuchen wir, den ersten Befehl an das Ger√§t zu senden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Gehen Sie dazu wie folgt zum Admin-Bereich: "Ger√§te" -&gt; "ESP" -&gt; "Details" -&gt; "Befehle" -&gt; "Neuen Befehl eingeben". Geben Sie im Feld "Name" "gpio / read" an und dr√ºcken Sie "push". Team geschickt! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Antwort wird sehr schnell kommen, aber die Ergebnisse der Befehle im Admin-Bereich werden nicht automatisch aktualisiert. Zu diesem Zweck befindet sich gegen√ºber dem Befehl eine Schaltfl√§che zum Aktualisieren. Klicken Sie ein oder zwei Sekunden nach dem Senden darauf und Sie sehen diesen Bildschirm:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/745/de9/39a/745de939a7a743c99b45cee26b346440.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist passiert? Durch Dr√ºcken der Taste haben Sie einen Befehl vom Admin-Bereich (in diesem Fall dem Server-Client) an den Server-Befehl gesendet. ESP8266 hat es aufgenommen, ausgef√ºhrt und das Ergebnis an den Server √ºbergeben. Durch Klicken auf die Schaltfl√§che Aktualisieren haben Sie den Server nach dem Ergebnis des Befehls gefragt: Die </font><font style="vertical-align: inherit;">
Liste der verf√ºgbaren Befehle befindet sich in der PDF-Datei, die mit der Firmware geliefert wurde. Es ist auch </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">hier</font></a><font style="vertical-align: inherit;"> verf√ºgbar, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">stimmt</font></a><font style="vertical-align: inherit;"> jedoch m√∂glicherweise nicht mit der Version Ihrer Firmware √ºberein.</font></font><br>
<br>
<code>{"0":"1","1":"0","2":"1","3":"0","4":"1","5":"1","12":"0","13":"0","14":"0","15":"0"}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach einer guten Tradition werden wir die LED auf der Platine anz√ºnden. In den meisten ESP8266-Modulen befindet sich die LED an einem TX-Ausgang, und wir werden uns darum k√ºmmern. Sie leuchtet auf, wenn am Ausgang des Chips ein niedriger Pegel angezeigt wird. In dem Dokument werden wir sehen, dass GPIO1 nichts anderes als der gleiche TX-Ausgang ist. Setzen wir also eine logische Null darauf. In diesem Fall leuchtet die LED problemlos auf. Danach funktioniert das Terminal am Modul bis zum Neustart nicht mehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt setzen wir den Befehl, der </font><font style="vertical-align: inherit;">auch im Dokument angegeben ist. Im Feld "Name" setzen wir </font><font style="vertical-align: inherit;">und im Feld "Parameter" - </font><font style="vertical-align: inherit;">. Nach Ausf√ºhrung des Befehls sollte die LED auf der Platine aufleuchten, wie auf dem Foto unten dargestellt.</font></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>{"1":"0"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/284/6cd/b84/2846cdb8454e4b48922ea951e8fa832e.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine blaue LED unter Quarz, neben der noch eine rote leuchtet, die anzeigt, dass die Platine mit Strom versorgt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie auf dem Foto sehen k√∂nnen, sind nur zwei Dr√§hte mit Strom und zwei Steckbr√ºcken an das Modul angeschlossen, um das Modul im richtigen Modus einzuschalten. </font><font style="vertical-align: inherit;">Senden Sie zum Ausschalten einen Befehl mit einem Parameter </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Format der Befehlsparameter ist normales JSON. </font><font style="vertical-align: inherit;">Felder, die ausgef√ºllt werden k√∂nnen, sowie ihre m√∂glichen Werte werden in der PDF-Datei beschrieben. </font><font style="vertical-align: inherit;">
Heute haben wir herausgefunden, wie die einfachsten Befehle vom Admin-Panel an das Ger√§t gesendet werden k√∂nnen. </font><font style="vertical-align: inherit;">Im n√§chsten Artikel erfahren Sie, wie Sie eine einfache Clientanwendung f√ºr den Server schreiben, mit der Sie auf das Ger√§t zugreifen und ein etwas seri√∂seres Ger√§t implementieren k√∂nnen (erinnern Sie sich an den Laser aus dem ersten Artikel?). </font><font style="vertical-align: inherit;">
Bleiben Sie dran, es wird interessant sein!</font></font><code>{"1":"1"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gepostet von Nikolai Khabarov, Senior Embedded Developer.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de383027/">https://habr.com/ru/post/de383027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de383011/index.html">Handflammenwerfer wurden in den USA zum Verkauf angeboten</a></li>
<li><a href="../de383013/index.html">IBM ver√∂ffentlicht LinuxOne-Mainframes und schlie√üt Vertr√§ge mit Canonical ab</a></li>
<li><a href="../de383017/index.html">Ist k√ºnstliche Intelligenz ein b√∂ser oder guter Geist?</a></li>
<li><a href="../de383023/index.html">Robotik in der Landwirtschaft</a></li>
<li><a href="../de383025/index.html">√úberblick √ºber echtes Android TV am Beispiel des Sony 55w807c</a></li>
<li><a href="../de383033/index.html">Der stinkende Supraleiter arbeitet bei -70 ¬∞ C.</a></li>
<li><a href="../de383035/index.html">Alternativen zu Google Play und dem App Store oder wie China ohne Google Play lebt</a></li>
<li><a href="../de383039/index.html">Postkartenlabyrinth. Ein Geschenk, das nicht ge√∂ffnet werden kann, ohne das R√§tsel zu l√∂sen</a></li>
<li><a href="../de383041/index.html">Fragen Sie Ethan Nr. 25: Wohin in unserer Galaxie?</a></li>
<li><a href="../de383045/index.html">Wie Tesla die Welt ver√§ndern wird</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>