<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêê üöè üèø Distributed Systems Monitoring - Google Experience (√úbersetzung des Google SRE-Buchkapitels) üë©üèø‚ÄçüöÄ üë§ üèπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SRE (Site Reliability Engineering) - ein Ansatz zur Sicherstellung der Verf√ºgbarkeit von Webprojekten. Es wird als Framework f√ºr DevOps angesehen und ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Distributed Systems Monitoring - Google Experience (√úbersetzung des Google SRE-Buchkapitels)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484246/"><img src="https://habrastorage.org/webt/rj/u4/8s/rju48s3gqxozu32f2esipgkpc6c.png"><br><br>  SRE (Site Reliability Engineering) - ein Ansatz zur Sicherstellung der Verf√ºgbarkeit von Webprojekten.  Es wird als Framework f√ºr DevOps angesehen und beschreibt, wie DevOps-Praktiken erfolgreich angewendet werden k√∂nnen.  Dieser Artikel ist eine √úbersetzung von <a href="https://landing.google.com/sre/book/chapters/monitoring-distributed-systems.html">Kapitel 6, √úberwachung verteilter Systeme,</a> aus dem Buch <a href="https://landing.google.com/sre/book.html">Site Reliability Engineering</a> von Google.  Ich habe diese √úbersetzung selbst angefertigt und mich auf meine eigenen Erfahrungen im Verst√§ndnis der √úberwachungsprozesse verlassen.  Im Telegrammkanal <a href="https://t.me/monitorim_it/28">@monitorim_it</a> und im <a href="https://medium.com/%40antonkasimov/%25D1%2586%25D0%25B5%25D0%25BB%25D0%25B8-%25D1%2583%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BD%25D1%258F-%25D0%25BE%25D0%25B1%25D1%2581%25D0%25BB%25D1%2583%25D0%25B6%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F-%25D0%25BE%25D0%25BF%25D1%258B%25D1%2582-google-630008918e9f%3Fsource%3Dfriends_link%255E_%255Eamp%255E_%255Esk%3D0b7f6ab888298580001b027434c53c56">Blog auf dem Medium habe</a> ich auch einen Link zur √úbersetzung des 4. Kapitels desselben Buches √ºber die Ziele des Servicelevels ver√∂ffentlicht. <br><br>  √úbersetzung von Katze.  Viel Spa√ü beim Lesen! <br><a name="habracut"></a><br>  Die Google SRE-Teams verf√ºgen √ºber die Grundprinzipien und Best Practices f√ºr die Erstellung erfolgreicher √úberwachungs- und Benachrichtigungssysteme.  Dieses Kapitel enth√§lt Empfehlungen zu Problemen, auf die ein Webseitenbesucher sto√üen kann, und zur L√∂sung von Problemen, die die Anzeige von Webseiten erschweren. <br><br><h1>  Definitionen </h1><br>  Es gibt kein einziges Vokabular, das zur Diskussion von √úberwachungsthemen verwendet wird.  Selbst bei Google werden die folgenden Begriffe nicht h√§ufig verwendet, wir listen jedoch die am h√§ufigsten verwendeten Interpretationen auf. <br><br><h3>  √úberwachung </h3><br>  Erfassung, Verarbeitung, Aggregation und Anzeige quantitativer Daten √ºber das System in Echtzeit: Anzahl der Anfragen und Arten von Anfragen, Anzahl der Fehler und Arten von Fehlern, Bearbeitungszeit f√ºr Anfragen und Server-Verf√ºgbarkeit. <br><br><h3>  White-Box-√úberwachung </h3><br>  √úberwachung basierend auf Metriken, die von internen Komponenten des Systems angezeigt werden, einschlie√ülich Protokollen, Profilerstellungsmetriken der Java Virtual Machine oder HTTP-Handler, die interne Statistiken generieren. <br><br><h3>  Black-Box-√úberwachung </h3><br>  Testen des Verhaltens der Anwendung aus Sicht des Benutzers. <br><br><h3>  Dashboard (Dashboards) </h3><br>  Eine Schnittstelle (normalerweise das Web), die einen √úberblick √ºber die wichtigsten Gesundheitsindikatoren f√ºr Dienste bietet.  Das Dashboard verf√ºgt m√∂glicherweise √ºber Filter, die M√∂glichkeit, anzuzeigende Indikatoren auszuw√§hlen usw. Die Benutzeroberfl√§che wurde erstellt, um die wichtigsten Indikatoren f√ºr Benutzer zu identifizieren.  Informationen f√ºr Mitarbeiter des technischen Supports k√∂nnen auch im Dashboard angezeigt werden: Anforderungswarteschlange, Liste der Fehler mit hoher Priorit√§t, zugewiesener Techniker f√ºr einen bestimmten Verantwortungsbereich. <br><br><h3>  Alarm (Hinweis) </h3><br>  Benachrichtigungen, die von einer Person per E-Mail oder auf andere Weise empfangen werden sollen und die aufgrund von Fehlern oder einer Zunahme der Warteschlange von Anforderungen ausgel√∂st werden k√∂nnen.  Benachrichtigungen werden wie folgt klassifiziert: Tickets, E-Mail-Benachrichtigungen und Messenger-Nachrichten. <br><br><h3>  Grundursache </h3><br>  Ein Softwaredefekt oder menschlicher Faktor, der nach Beseitigung nicht mehr auftreten sollte.  Das Problem kann mehrere Hauptgr√ºnde haben: unzureichende Automatisierung von Prozessen, Softwarefehler, unzureichende Untersuchung der Logik der Anwendung.  Jeder dieser Faktoren kann die Grundursache sein, und jeder von ihnen muss beseitigt werden. <br><br><h3>  Knoten und Maschine </h3><br>  Austauschbare Begriffe zur Bezeichnung einer einzelnen Instanz einer ausgef√ºhrten Anwendung auf einem physischen Server, einer virtuellen Maschine oder einem Container.  Auf einem Computer k√∂nnen mehrere Dienste vorhanden sein.  Dienstleistungen k√∂nnen sein: <br><br><ul><li>  in Bezug zueinander: zum Beispiel ein Cache-Server und ein Webserver; </li><li>  Nicht verwandte Dienste auf einer einzigen Hardware: Zum Beispiel ein Code-Repository und ein Assistent f√ºr ein Konfigurationssystem wie <a href="https://puppetlabs.com/puppet/puppet-open-source">Puppet</a> oder <a href="https://www.chef.io/chef/">Chef</a> . </li></ul><br><h3>  Dr√ºcken </h3><br>  Jede √Ñnderung der Softwarekonfiguration. <br><br><h1>  Warum ist √úberwachung erforderlich </h1><br>  Es gibt mehrere Gr√ºnde, warum Anwendungen √ºberwacht werden sollten: <br><br><h3>  Lange Trendanalyse </h3><br>  Wie gro√ü ist die Datenbank und wie schnell w√§chst sie?  Wie ver√§ndert sich die t√§gliche Anzahl der Benutzer? <br><br><h3>  Leistungsvergleich </h3><br>  Sind Acme Bucket of Bytes 2.72-Abfragen schneller als Ajax DB 3.14?  Um wie viel besser werden Anforderungen nach dem Auftreten eines zus√§tzlichen Knotens zwischengespeichert?  Ist die Seite im Vergleich zur letzten Woche langsamer geworden? <br><br><h3>  Alarmierung (Benachrichtigungen) </h3><br>  Etwas ist kaputt und jemand muss es reparieren.  Oder etwas wird bald kaputt gehen und jemand sollte es bald √ºberpr√ºfen. <br><br><h3>  Erstellen Sie Dashboards </h3><br>  Dashboards sollten grundlegende Fragen beantworten und einige der <a href="https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/">‚Äû4 goldenen Signale‚Äú enthalten</a> - Latenz, Verkehr, Fehler und Auslastung (S√§ttigung). <br><br><h3>  Durchf√ºhrung einer retrospektiven Analyse (Debugging) </h3><br>  Die Verz√∂gerung der Anforderungsverarbeitung hat zugenommen, und was ist noch ungef√§hr zur gleichen Zeit passiert? <br>  √úberwachungssysteme sind n√ºtzlich als Datenquelle f√ºr Business-Intelligence-Systeme und zur Vereinfachung der Analyse von Sicherheitsvorf√§llen.  Da sich dieses Buch auf technische Bereiche konzentriert, in denen SREs √ºber Fachwissen verf√ºgen, werden hier keine √úberwachungstechniken behandelt. <br><br>  Durch √úberwachung und Warnungen kann das System erkennen, ob ein Defekt vorliegt oder bevorsteht.  Wenn sich das System nicht automatisch selbst wiederherstellen kann, m√∂chten wir, dass die Warnmeldung von der Person analysiert, ermittelt, ob das Problem relevant ist, behoben und die Grundursache ermittelt wird.  Wenn Sie keine Systemkomponenten pr√ºfen, erhalten Sie niemals eine Warnung, nur weil ‚Äûetwas seltsam erscheint‚Äú. <br><br>  Das Aufladen menschlicher Warnmeldungen ist ein ziemlich teurer Zeitaufwand f√ºr die Mitarbeiter.  Wenn ein Mitarbeiter arbeitet, unterbricht eine Warnung den Workflow.  Wenn der Mitarbeiter zu Hause ist, unterbricht die Benachrichtigung die pers√∂nliche Zeit und m√∂glicherweise den Schlaf.  Wenn Warnungen zu h√§ufig auftreten, scannen Mitarbeiter eingehende Warnungen schnell, verz√∂gern sie oder ignorieren sie.  Von Zeit zu Zeit ignorieren sie die reale Warnung, die von Ger√§uschereignissen verdeckt wird.  Betriebsunterbrechungen k√∂nnen lange dauern, da Ger√§uschereignisse die schnelle Diagnose und Fehlerbehebung beeintr√§chtigen.  Effiziente Warnsysteme haben ein gutes Signal-Rausch-Verh√§ltnis. <br><br><h1>  Festlegung angemessener Erwartungen an ein √úberwachungssystem </h1><br>  Das Einrichten der √úberwachung einer komplexen Anwendung ist an sich eine schwierige technische Aufgabe.  Selbst mit einer umfangreichen Infrastruktur von Tools zum Sammeln, Anzeigen und Warnen umfasst das Google SRE-Team mit 10 bis 12 Mitgliedern in der Regel ein oder zwei Personen, deren Hauptzweck die Erstellung und Wartung von √úberwachungssystemen ist.  Diese Zahl hat im Laufe der Zeit abgenommen, da wir die √úberwachungsinfrastruktur generalisieren und zentralisieren, aber jedes SRE-Team verf√ºgt normalerweise √ºber mindestens ein √úberwachungspersonal.  Ich muss sagen, dass die SRE-Teams, obwohl es sehr interessant ist, die Dashboards des √úberwachungssystems zu beobachten, Situationen sorgf√§ltig vermeiden, in denen jemand auf den Bildschirm schauen muss, um Probleme zu √ºberwachen. <br><br>  Im Allgemeinen hat Google auf einfache und schnelle √úberwachungssysteme mit optimalen Tools f√ºr die Post-Factum-Analyse umgestellt.  Wir vermeiden "magische" Systeme, die versuchen, Schwellenwerte vorherzusagen oder die Grundursache automatisch zu erkennen.  Sensoren, die unangemessene Inhalte in Endbenutzeranforderungen erkennen, sind die einzigen Gegenbeispiele.  Solange diese Sensoren einfach bleiben, k√∂nnen sie schnell die Ursachen f√ºr schwerwiegende Anomalien identifizieren.  Andere Formate f√ºr die Verwendung von √úberwachungsdaten wie Kapazit√§tsplanung oder Verkehrsprognose sind schwieriger.  Beobachtungen, die √ºber einen sehr langen Zeitraum (Monate oder Jahre) mit einer geringen Stichprobenrate (Stunden oder Tage) durchgef√ºhrt wurden, lassen einen langfristigen Trend erkennen. <br><br>  Das Google SRE-Team hat mit unterschiedlichem Erfolg mit komplexen Abh√§ngigkeitshierarchien gearbeitet.  Wir verwenden selten Regeln wie "Wenn ich feststelle, dass die Datenbank langsam arbeitet, erhalte ich eine Benachrichtigung √ºber die Verlangsamung der Datenbank, ansonsten erhalte ich eine Warnung √ºber eine langsam laufende Site."  Abh√§ngigkeitsbasierte Regeln gelten normalerweise f√ºr unver√§nderliche Teile unseres Systems, z. B. f√ºr ein System zum Filtern des Benutzerverkehrs zu einem Rechenzentrum.  Beispiel: "Wenn die Verkehrsfilterung f√ºr das Rechenzentrum konfiguriert ist, warnen Sie mich nicht vor Verz√∂gerungen bei der Verarbeitung von Benutzeranforderungen." Dies ist eine allgemeine Regel f√ºr Benachrichtigungen vom Rechenzentrum.  Nur wenige Teams bei Google unterst√ºtzen komplexe Abh√§ngigkeitshierarchien, da unsere Infrastruktur eine konstante kontinuierliche Refactoring-Rate aufweist. <br><br>  Einige der in diesem Kapitel beschriebenen Ideen sind immer noch relevant: Es besteht immer die M√∂glichkeit, schneller von einem Symptom zu einer Grundursache zu gelangen, insbesondere in sich st√§ndig √§ndernden Systemen.  Daher ist es wichtig, dass die √úberwachungssysteme, obwohl in diesem Kapitel einige Ziele f√ºr √úberwachungssysteme und Wege zur Erreichung dieser Ziele aufgef√ºhrt sind, f√ºr alle im Team einfach und verst√§ndlich sind. <br><br>  Um einen niedrigen Rauschpegel und einen hohen Signalpegel aufrechtzuerhalten, sollten Ans√§tze zum √úberwachen von Objekten, f√ºr die Warnungen gemacht werden, ebenfalls sehr einfach und zuverl√§ssig sein.  Regeln, die Warnungen f√ºr Personen ausl√∂sen, sollten leicht verst√§ndlich sein und ein klares Problem darstellen. <br><br><h1>  Symptome und Ursachen </h1><br>  Ihr √úberwachungssystem sollte zwei Fragen beantworten: ‚ÄûWas ist kaputt?‚Äú Und ‚ÄûWarum ist kaputt?‚Äú. <br>  "Was ist kaputt" spricht von dem Symptom und "warum ist es kaputt" von der Ursache.  Die folgende Tabelle zeigt Beispiele f√ºr solche Bundles. <br><div class="scrollable-table"><table><tbody><tr><td align="center">  <b>Symptom</b> </td><td align="center">  <b>Grund</b> </td></tr><tr><td>  HTTP-Fehler 500 oder 404 abrufen </td><td>  Datenbankserver lehnen Verbindungen ab </td></tr><tr><td>  Langsame Serverantworten </td><td>  Hohe CPU-Auslastung oder Besch√§digung des Ethernet-Kabels </td></tr><tr><td>  Antarktisnutzer erhalten keine Katzen-Gifs </td><td>  Ihr CDN hasst Wissenschaftler und Katzen, daher werden einige IP-Adressen auf die schwarze Liste gesetzt </td></tr><tr><td>  Private Inhalte sind √ºberall verf√ºgbar </td><td>  Durch das Aufr√ºsten einer neuen Softwareversion hat die Firewall alle ACLs vergessen und alle nacheinander zugelassen </td></tr></tbody></table></div><br>  "Was" und "Warum" sind einige der wichtigsten Bausteine ‚Äã‚Äãf√ºr die Schaffung eines guten √úberwachungssystems mit maximalem Signal und minimalem Rauschen. <br><br><h3>  Black-Box gegen White-Box </h3><br>  Wir kombinieren eine umfassende White-Box-√úberwachung mit einer bescheidenen Black-Box-√úberwachung f√ºr kritische Messdaten.  Der einfachste Weg, die Black-Box mit der White-Box zu vergleichen, besteht darin, dass die Black-Box symptomorientiert ist und eher reaktiv als proaktiv √ºberwacht wird: "Das System funktioniert gerade nicht."  Das wei√üe Feld h√§ngt von den Funktionen der internen System√ºberpr√ºfung ab: Ereignisprotokolle oder Webserver.  So k√∂nnen Sie mit der White-Box zuk√ºnftige Probleme, Fehlfunktionen, die wie eine erneute √úbertragung einer Anfrage aussehen, usw. erkennen. <br><br>  Bitte beachten Sie, dass in einem Mehrschichtsystem ein Symptom im Verantwortungsbereich eines Ingenieurs ein Symptom im Verantwortungsbereich eines anderen Ingenieurs ist.  Beispielsweise hat die Datenbankleistung abgenommen.  Langsame Datenbanklesevorg√§nge sind ein Symptom f√ºr SREs in Datenbanken, die sie erkennen.  F√ºr das Front-End-SRE, das eine langsame Website beobachtet, ist der Grund f√ºr dasselbe langsame Lesen der Datenbank die langsame Operation der Datenbank.  Daher konzentriert sich die White-Box-√úberwachung manchmal auf Symptome und manchmal auf Gr√ºnde, je nachdem, wie umfangreich sie ist. <br><br>  Bei der Erfassung der Telemetrie ist f√ºr das Debugging eine White-Box-√úberwachung erforderlich.  Wenn Webserver langsam auf Datenbankabfragen reagieren, m√ºssen Sie wissen, wie schnell der Webserver mit der Datenbank interagiert und wie schnell er reagiert.  Andernfalls k√∂nnen Sie einen langsamen Datenbankserver nicht von einem Netzwerkproblem zwischen dem Webserver und der Datenbank unterscheiden. <br><br>  Die Black-Box-√úberwachung hat beim Senden von Warnungen einen entscheidenden Vorteil: Sie leiten eine Benachrichtigung an den Empf√§nger ein, wenn das Problem bereits zu echten Symptomen gef√ºhrt hat.  Bei einem noch nicht aufgetretenen, aber anstehenden Black-Box-Problem ist die √úberwachung hingegen nutzlos. <br><br><h1>  Vier goldene Signale </h1><br>  Die vier goldenen √úberwachungssignale sind Latenz, Verkehr, Fehler und S√§ttigung.  Wenn Sie in einem Benutzersystem nur vier Metriken messen k√∂nnen, konzentrieren Sie sich auf diese vier. <br><br><h3>  Verz√∂gerung </h3><br>  Die zur Verarbeitung der Anforderung erforderliche Zeit.  Es ist wichtig, zwischen der Verz√∂gerung erfolgreicher und nicht erfolgreicher Anforderungen zu unterscheiden.  Beispielsweise kann ein HTTP 500-Fehler, der durch einen Verbindungsverlust zu einer Datenbank oder einem anderen Backend verursacht wird, sehr schnell diagnostiziert werden. Ein HTTP 500-Fehler kann jedoch auf eine fehlgeschlagene Anforderung hinweisen.  Das Erkennen der Auswirkung des Fehlers 500 auf die Gesamtverz√∂gerung kann zu fehlerhaften Schlussfolgerungen f√ºhren.  Andererseits ist ein langsamer Fehler sogar ein schneller Fehler!  Daher ist es wichtig, die Verz√∂gerung mit einem Fehler zu verfolgen und nicht nur die Fehler zu filtern. <br><br><h3>  Verkehr </h3><br>  Die Anzahl der Anforderungen an Ihr System wird in allgemeinen Systemmetriken gemessen.  Bei einem Webdienst stellt diese Dimension in der Regel die Anzahl der HTTP-Anforderungen pro Sekunde dar, die durch die Art der Anforderung getrennt sind (z. B. statischer oder dynamischer Inhalt).  Bei einem Streaming-Audiosystem kann diese Messung auf die E / A-Geschwindigkeit des Netzwerks oder die Anzahl der gleichzeitigen Sitzungen konzentriert werden.  F√ºr ein Schl√ºsselwertspeichersystem kann eine solche Messung Transaktionen oder Suchergebnisse pro Sekunde sein. <br><br><h3>  Fehler </h3><br>  Dies ist die H√§ufigkeit nicht erfolgreicher Anfragen, die explizit (z. B. HTTP 500), implizit (z. B. HTTP 200, aber in Kombination mit dem falschen Inhalt) oder einer Richtlinie (z. B. "Wenn Sie die Antwort in einer Sekunde aufgezeichnet haben, ist jede Sekunde ein Fehler") sind.  Wenn die HTTP-Protokollantwortcodes nicht ausreichen, um alle Fehlerbedingungen auszudr√ºcken, sind m√∂glicherweise sekund√§re (interne) Protokolle erforderlich, um einen teilweisen Fehler zu erkennen.  Das √úberwachen all dieser fehlerhaften Anforderungen ist m√∂glicherweise nicht aussagekr√§ftig. Durch End-to-End-Systemtests k√∂nnen Sie feststellen, dass Sie den falschen Inhalt verarbeiten. <br><br><h3>  S√§ttigung </h3><br>  Die Metrik zeigt an, wie stark Ihr Service genutzt wird.  Hierbei handelt es sich um eine System√ºberwachungsma√ünahme, mit der die Ressourcen identifiziert werden, die am meisten eingeschr√§nkt sind (in einem System mit begrenztem Arbeitsspeicher wird beispielsweise der Arbeitsspeicher angezeigt, in einem System mit E / A-Einschr√§nkungen wird die Anzahl der E / A angezeigt).  Beachten Sie, dass viele Systeme die Leistung beeintr√§chtigen, bevor sie zu 100% ausgelastet sind. Daher ist es wichtig, einen Verwendungszweck zu haben. <br><br>  In komplexen Systemen kann die S√§ttigung durch die Messung einer h√∂heren Auslastung erg√§nzt werden: Kann Ihr Service den doppelten Datenverkehr ordnungsgem√§√ü verarbeiten, nur 10% mehr Datenverkehr verarbeiten oder noch weniger Datenverkehr verarbeiten als derzeit?  Bei einfachen Diensten, deren Parameter die Komplexit√§t der Anforderung nicht √§ndern (z. B. "Gib mir nichts" oder "Ich ben√∂tige eine eindeutige monotone Ganzzahl"), deren Konfiguration selten ge√§ndert wird, ist der statische Wert des Auslastungstests m√∂glicherweise ausreichend In den meisten Diensten sollten indirekte Signale wie die CPU-Auslastung oder die Netzwerkbandbreite verwendet werden, f√ºr die eine Obergrenze bekannt ist.  Eine erh√∂hte Latenz ist h√§ufig ein Hauptindikator f√ºr die S√§ttigung.  Die Messung der Reaktionszeit des 99. Perzentils in einem kleinen Fenster (z. B. eine Minute) kann zu einem sehr fr√ºhen S√§ttigungssignal f√ºhren. <br><br>  Schlie√ülich wird die S√§ttigung auch mit Vorhersagen einer bevorstehenden S√§ttigung in Verbindung gebracht, zum Beispiel: "Es sieht so aus, als w√ºrde Ihre Datenbank Ihre Festplatte in 4 Stunden f√ºllen." <br><br>  Wenn Sie alle vier goldenen Signale messen und wenn ein Problem mit einer der Metriken auftritt (oder im Falle einer S√§ttigung fast ein Problem), benachrichtigen Sie die Person, wird Ihr Service mehr oder weniger √ºberwacht. <br><br><h1>  Angst vor dem Schwanz (oder Instrumentierung und Leistung) </h1><br>  Wenn Sie ein √úberwachungssystem von Grund auf neu erstellen, ist es verlockend, ein System zu entwickeln, das auf Durchschnittswerten basiert: durchschnittliche Latenz, durchschnittliche CPU-Auslastung von Knoten oder durchschnittliche Datenbankbelegung.  Die Gefahr der letzten beiden Beispiele liegt auf der Hand: Prozessoren und Datenbanken werden auf sehr unvorhersehbare Weise entsorgt.  Das gleiche gilt f√ºr die Verz√∂gerung.  Wenn Sie einen Webdienst mit einer durchschnittlichen Verz√∂gerung von 100 ms bei 1000 Anforderungen pro Sekunde ausf√ºhren, kann 1% der Anforderungen 5 Sekunden dauern.  Wenn Benutzer von mehreren dieser Webdienste abh√§ngig sind, kann das 99. Perzentil eines Backends leicht zur mittleren Antwortzeit der Benutzeroberfl√§che werden. <br><br>  Die einfachste M√∂glichkeit, zwischen einem langsamen Durchschnitt und einem sehr langsamen "Ende" von Abfragen zu unterscheiden, besteht darin, statt tats√§chlicher Verz√∂gerungen die in Statistiken ausgedr√ºckten Abfragedimensionen zu erfassen (ein geeignetes Werkzeug zum Anzeigen von Histogrammen): Wie viele Anforderungen wurden vom Dienst bearbeitet, die zwischen 0 ms und 0 ms dauerten? 10 ms, zwischen 10 ms und 30 ms, zwischen 30 ms und 100 ms, zwischen 100 ms und 300 ms usw. Das Erweitern der Histogrammgrenzen ungef√§hr exponentiell (mit einem ungef√§hren Koeffizienten von 3) ist oft eine einfache M√∂glichkeit, die Verteilung von Abfragen zu visualisieren. <br><br><h1>  Auswahl der richtigen Detaillierungsstufe f√ºr Messungen </h1><br>  Verschiedene Elemente des Systems m√ºssen mit unterschiedlichem Detaillierungsgrad gemessen werden.  Zum Beispiel: <br><br><ul><li>  Die √úberwachung der CPU-Auslastung in einem bestimmten Zeitintervall zeigt keine langfristigen Ausrei√üer, die zu hohen Latenzen f√ºhren. </li><li>  Bei einem Webdienst, der sich auf nicht mehr als 9 Stunden Ausfallzeit pro Jahr konzentriert (99,9% der j√§hrlichen Betriebszeit), ist es wahrscheinlich unn√∂tig, mehr als ein- oder zweimal pro Minute nach einer HTTP-Antwort von 200 zu suchen. </li><li>  Ebenso ist es wahrscheinlich nicht erforderlich, mehr als einmal alle 1-2 Minuten nach freiem Festplattenspeicher f√ºr 99,9% Verf√ºgbarkeit zu suchen. </li></ul><br>  Achten Sie darauf, wie Sie die Granularit√§t der Dimensionen strukturieren.  Die H√§ufigkeit, mit der die CPU-Last einmal pro Sekunde erfasst wird, kann interessante Daten liefern. Die Erfassung, Speicherung und Analyse solcher h√§ufigen Messungen kann jedoch sehr kostspielig sein.            ,     ,     ,           .   : <br><br><ol><li>   CPU  . </li><li>    5%. </li><li>    . </li></ol><br>        ,         . <br><br><h1>   ,    </h1><br>             . ,       : <br><br><ul><li>         ,   ,     . </li><li>         . </li><li>         . </li></ul><br>      .     ,    ,   ,     . <br><br>            . ,   ,  : <br><br><ul><li> ,      ,    ,   . </li><li>    ,   ,    (,         SRE),   . </li><li> ,  ,     -      - ,    . </li></ul><br>  Google     ,      ,       (   Google    ,         ).           :   ,  ,      ,  ,       .              ,              .         ,     , ,        (,  -API      ,         ). <br><br><h1>    </h1><br> ,    ,        ,       Google SRE.     ,                             . <br><br>      ,   ,        : <br><br><ul><li>    ,     ,   ,        ? </li><li>      , ,   ?               ? </li><li>    ,     ?   ,      , , -       ,     ? </li><li>          ?           ?     ?          ? </li><li>        ,      ? </li></ul><br>          : <br><br><ul><li>  ,   ,    .        ,   . </li><li>     . </li><li>        .     ,    . </li><li>        ,    . </li></ul><br>     :      ,   ,      White-box   Black-Box.      :        ,   ;     ,      . <br><br><h1>     </h1><br>                ,     . ,      ,    , ,   ,   .    -       ;    ,      . <br><br> ,           .  ,   ,      ,           ,        .    ,   . <br><br><h3> Bigtable SRE:     </h3><br>   Google          (SLO).    SLO  Bigtable         . -   Bigtable             ‚Äã‚Äã¬´¬ª :  5%      . <br><br>           SLO,        SLO.      ,     :        ,   ,    .    ,      ,           .      -        ,     . <br><br>   ,    :       Bigtable,         SLO 75-      .       ,      ,         . <br><br>     ,       Bigtable      ,      .     ,       .   ,         . <br><br><h3> Gmail: ,    </h3><br>     Gmail        Workqueue,         . Workqueue          Gmail,          . <br><br>     Gmail    ,   ,       Workqueue.     ,       Gmail    ,        .     ,   Gmail    ,       . <br><br>    , Gmail SRE  ,       ,     .       ,              ,      ,       ,       . <br><br>            :             ,    ,           .    ,       ,  ,       .           ,       ,    ¬´¬ª . <br><br>          .       ,       ,     .   ,   . <br><br><h3>    </h3><br>     Bigtable  Gmail:      .          ,     ,             . <br><br> ,      ,        .      ,  ,        ,          .      (      ,        )     ,   ,  ,          . <br><br><h1>  Fazit </h1><br>         .       ,    ,        .    ,      ,   ,             .         ,  ,    ;       ,     ,       .         ,    . <br><br>   ,           ,     ,     . <br><br> ,     .    -   <a href="https://t.me/monitorim_it">@monitorim_it</a>  <a href="https://medium.com/%40antonkasimov">  </a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484246/">https://habr.com/ru/post/de484246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484224/index.html">Bitweise LSD-Sortierung (Radix-Sortierung)</a></li>
<li><a href="../de484236/index.html">Geister in den Wolken: Details zum Hacken vieler Unternehmen</a></li>
<li><a href="../de484238/index.html">Das maschinelle Lernen war mit einem ungel√∂sten mathematischen Problem konfrontiert</a></li>
<li><a href="../de484240/index.html">Werden Sie Redner bei den Positive Hack Days 10. Call for Papers f√§ngt an</a></li>
<li><a href="../de484244/index.html">Paul Graham √ºber Java und die Hacker-Programmiersprachen (2001)</a></li>
<li><a href="../de484248/index.html">Paul Graham: Ein Suchttest (The Island Test, 2006)</a></li>
<li><a href="../de484250/index.html">Paul Graham: √úber politische Neutralit√§t und Unabh√§ngigkeit des Denkens (Die zwei Arten von Moderaten)</a></li>
<li><a href="../de484254/index.html">Gewusst wie: Infografiken oder Infografiken?</a></li>
<li><a href="../de484270/index.html">Lassen Sie uns etwas Geld l√∂sen</a></li>
<li><a href="../de484274/index.html">Qualcomm ADAS-Chip</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>