<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾 😄 🥛 Sistem ventilasi kamar berdasarkan "raspberry" dan "detektor CO2" 🏘️ 👇🏼 👧🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mode untuk rumah pintar telah menyapu seluruh Internet, semua orang sekarang ingin membuat bola lampu yang dapat dimatikan melalui Internet atau melem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistem ventilasi kamar berdasarkan "raspberry" dan "detektor CO2"</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dadget/blog/390859/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode untuk rumah pintar telah menyapu seluruh Internet, semua orang sekarang ingin membuat bola lampu yang dapat dimatikan melalui Internet atau melempar kipas angin di toilet. </font><font style="vertical-align: inherit;">Pengalaman saya cukup sederhana: Saya ingin membuat sistem yang dapat secara otomatis membuat ventilasi ruangan, tidak lebih, tidak kurang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mempertimbangkan prinsip sistem, saya sampai pada beberapa kesimpulan, yang saya putuskan untuk diimplementasikan. </font><font style="vertical-align: inherit;">Seperti yang direncanakan, seluruh fungsionalitas sistem dibagi menjadi tiga komponen: "otak" yang mengendalikan segalanya, sistem ventilasi untuk membuka jendela / atau menyalakan kipas, dan sensor itu sendiri, yang memantau kualitas udara di dalam ruangan. </font><font style="vertical-align: inherit;">Selanjutnya, saya akan berbicara tentang sensor kualitas udara, ditambah sedikit sentuhan pada topik mengintegrasikannya dengan "otak" rumah pintar.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ikhtisar Perangkat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan untuk mengontrol kualitas "kesegaran" udara dengan konsentrasi karbon dioksida. Rencana ke depan termasuk meluncurkan sensor untuk amonia, propana / butana (kebocoran gas), konsentrasi debu di udara, dll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diputuskan untuk menempatkan sistem ventilasi di ruang tamu di mana seseorang menghabiskan waktu sebanyak mungkin. Mungkin, ruangan seperti itu adalah kamar tidur, dan di situlah sistem ventilasi otomatis akan sangat berguna selama tidur malam. </font></font><br>
<br>
<img src="https://habrastorage.org/files/a25/543/468/a25543468c9b46439f7f570577cddd2b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bukan rahasia lagi bahwa konsentrasi karbon dioksida di udara sangat memengaruhi tidak hanya produktivitas otak manusia, kinerja manusia, tetapi juga kemampuan untuk beristirahat dengan baik. Semakin tinggi konsentrasi CO2, semakin buruk.</font></font><br>
 <br>
 <img src="https://habrastorage.org/files/609/2dc/c2f/6092dcc2ff3340eea4c0727347a8f234.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Detektor karbon dioksida dari perusahaan Dadget digunakan sebagai alat untuk mengukur konsentrasi karbon dioksida. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perangkat ini dapat menerima daya dari port USB komputer atau laptop. </font><font style="vertical-align: inherit;">Di panel depan - Indikator LCD, yang menampilkan informasi tentang konsentrasi karbon dioksida dan suhu sekitar. </font><font style="vertical-align: inherit;">Ada juga 3 LED yang memberi pengguna representasi visual dari konten. </font><font style="vertical-align: inherit;">Semuanya cukup sederhana - nyalakan perangkat. </font><font style="vertical-align: inherit;">Dan semuanya bekerja. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tertarik pada kenyataan bahwa ada perangkat lunak yang berfungsi dengan perangkat ini. </font><font style="vertical-align: inherit;">Ada perangkat lunak untuk Windows dan Linux. </font><font style="vertical-align: inherit;">Kode sumber program untuk Linux ada di github dan sepertinya ditulis oleh rekan kami. </font><font style="vertical-align: inherit;">Dan jika Anda memiliki kode sumber, Anda dapat memikirkan sesuatu, memodifikasinya, "mempertajam" program untuk Anda sendiri.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ikhtisar Alur Kerja</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang ditunjukkan oleh praktik dan google, perangkat dilihat oleh komputer sebagai perangkat HID. Oleh karena itu, dalam program untuk Windows ada dll yang disebut HIDApi. Untuk bekerja dengan Linux, Anda memerlukan pustaka HIDApi dengan nama yang sama. Saya menyelesaikan kode sumber untuk perangkat lunak linux dan menulis mencicit sederhana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas bahwa menggunakan komputer Linux untuk membaca data dari sensor dan mentransfernya ke pengontrol rumah pintar di suatu tempat adalah penghujatan. Oleh karena itu, diputuskan untuk menggunakan Raspbery pi dengan Debian murni yang diinstal. Di masa depan, direncanakan untuk melakukan segalanya pada Arduino dan mengirimkan melalui saluran nirkabel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skema kompleks perangkat keras-perangkat lunak saya adalah sebagai berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c83/600/997/c836009971eb43578523742643ed8002.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pembaca yang berpengetahuan dan geek yang rajin mungkin berpikir bahwa tidak terlalu sporty untuk menggunakan HUB dalam skema ini. Itu benar, Anda dapat langsung menghubungkan monitor CO2 dan menikmati hidup. Dengan menggunakan skema seperti itu, saya memecahkan beberapa masalah sekaligus: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
● paling sering otak rumah pintar tidak berada di tempat sensor; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
● menggunakan raspberry pi memungkinkan untuk menghubungkan sensor tambahan; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
● menempatkan sensor secara terpisah, kami mendapatkan dua metode indikasi, yang pertama di layar sensor, yang kedua di telepon atau melalui halaman web, karena data ditransmisikan ke controller. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perangkat MicasaVerde digunakan sebagai pengontrol rumah pintar, perangkat dapat mengumpulkan data dari sensor dan membuat keputusan sesuai dengan program yang diberikan, yang disebut "adegan" dalam terminologinya.</font></font><br>
<br>
<img src="https://habrastorage.org/files/963/588/075/963588075d534090bab5100c83c1dfa7.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di perangkat, Anda dapat membuat sensor virtual dan memperbarui informasinya menggunakan permintaan http, yang saya lakukan dengan raspberry pi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh permintaan: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ip_address</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 3480 / data_request? Id = variableet &amp; DeviceNum = 6 &amp; serviceId = urn: micasaverde-com: serviceId: DoorLock1 &amp; Variable = Status &amp; Nilai = 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artinya, Malinka membaca data dari detektor karbon dioksida, dan kemudian mengirimkan permintaan data http ke Vera. </font><font style="vertical-align: inherit;">Skema ini sederhana tetapi berfungsi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revisi perangkat lunak</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi ada "raspberry", tidak peduli versi apa, yang utama adalah bahwa ia memiliki antarmuka jaringan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, Anda perlu menginstal dukungan untuk perangkat hid. Perpustakaan ini diambil dari git, jadi git harus diinstal pada "malink": </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, unduh dan </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instal perpustakaan mkdir hidapi </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cd hidapi / </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
git init </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
git </font><font style="vertical-align: inherit;">clit</font></font><a href=""><font style="vertical-align: inherit;"></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> itu sendiri </font><i><a href=""><font style="vertical-align: inherit;">github.com/signal11/hidapi.git</font></a></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
perpustakaan tambahan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sudo apt-get install libudev-dev libusb-1,0-0-dev autotools-dev libfox-1.6-dev autoconf automake libtool </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Set </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd hidapi / </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
./bootstrap </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
./configure </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
make </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sudo make instal</font></font><br>
</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, unduh kode sumber program monitor CO2 </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mkdir co2monitor </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cd co2monitor </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
git init </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
git klon </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/dmage/co2mon.git</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Selanjutnya, saya sedikit mengubah kode program, pada versi awal membaca dua parameter (suhu dan co2) dan mengirimkannya ke konsol dalam loop tanpa akhir. . Opsi ini tidak cocok untuk saya, tujuannya adalah menjalankannya sekali dan mendapatkan nilainya sekali, jadi saya mengubah dua baris di main.c. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mencari baris </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printf ("CntR \ t% s \ n", buf); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fflush (stdout);</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dan ubah ke </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printf ("% s \ n", buf); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fflush (stdout); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
keluar (1);</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris pertama bertanggung jawab untuk menampilkan nilai, setelah perubahan hanya digit yang akan ditampilkan, dan setelah output, program akan ditutup, jalur keluar (1) akan merespons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompilasi </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
make</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Next, kami menulis sebuah skrip sederhana yang memulai program, memberikan nilai output dari program yang dikompilasi di atas ke sebuah variabel, dan kemudian meneruskan nilai ini menggunakan curl ke MicasaVerde. Setelah itu, tambahkan aturan udev sehingga sistem memiliki akses ke sensor tanpa root. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUBSYSTEM == "usb", ATTR {idVendor} == "04d9", ATTR {idProduct} == "a052", MODE = "0666" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tambahkan skrip polling dan transmisi ke cron, setiap menit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
crontab -e </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tambahkan baris </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* * * * * /home/pi/co2sender.sh </font></font><br>
<br>
<img src="https://habrastorage.org/files/2cb/23c/1b2/2cb23c1b202f4aa5aad89c8c70c69148.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasil dari skrip</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja Anda masih harus mengkonfigurasi file MicasaVerde sehingga ada catatan yang memadai di mana-mana. </font><font style="vertical-align: inherit;">Tapi itu berhasil, cepat dan mudah.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, kami memiliki sistem berbasis pada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detektor CO2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang beroperasi seperti biasa, menganalisis dan melaporkan perubahan konsentrasi karbon dioksida. </font><font style="vertical-align: inherit;">Pada saat yang sama, Malinka membaca data dari sensor satu menit sekali dan mentransfernya ke pengontrol rumah pintar, yang dapat menghidupkan sistem ventilasi jika perlu.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id390859/">https://habr.com/ru/post/id390859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id390845/index.html">Review tablet 8-inch "thermonuclear" bb-mobile Topol 'LTE</a></li>
<li><a href="../id390849/index.html">Pejabat Bea Cukai AS Mulai Mengambil Biometrik Orang yang Melintasi Perbatasan AS dengan Berjalan Kaki</a></li>
<li><a href="../id390851/index.html">Penggunaan ROS secara Praktis pada Raspberry Pi - Bagian 3</a></li>
<li><a href="../id390853/index.html">Paling sering, manajer mencoba mencuri informasi rahasia dari perusahaan mereka sendiri pada tahun 2015</a></li>
<li><a href="../id390855/index.html">Bima Sakti dipelajari dalam kisaran submillimeter. Proyek ATLASGAL selesai</a></li>
<li><a href="../id390863/index.html">Video: siaran pembaruan lineup Samsung Galaxy</a></li>
<li><a href="../id390865/index.html">SpaceX menunda peluncuran SES-9 untuk kedua kalinya (pembaruan: Diluncurkan sejak tanggal 5, pendaratan gagal)</a></li>
<li><a href="../id390867/index.html">Гомеопатия: индустрия плацебо с миллиардными доходами</a></li>
<li><a href="../id390869/index.html">ASU Cast One - Proyektor Jam Tangan Pintar Harus Dijual Di Musim Panas</a></li>
<li><a href="../id390871/index.html">Ulasan video laptop Asus Zenbook Pro UX501VW</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>