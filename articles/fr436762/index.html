<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìø üß° üë©‚Äçüëß‚Äçüëß Couchbase sur Telecom üí• üï¶ üöà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La transformation num√©rique est une tendance mondiale pour les grandes entreprises et est vitale pour adapter une entreprise aux besoins des clients m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Couchbase sur Telecom</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436762/"><p>  La transformation num√©rique est une tendance mondiale pour les grandes entreprises et est vitale pour adapter une entreprise aux besoins des clients modernes.  En plus des probl√®mes habituels de centralisation des syst√®mes pour les grandes entreprises et de combinaison des syst√®mes de facturation et des bases de donn√©es des abonn√©s, s'ajoutent des exigences de haute disponibilit√© et un mode de fonctionnement en temps r√©el auxquels les clients sont d√©j√† habitu√©s par les leaders de l'industrie (Google, Amazon, Netflix). </p><br><p>  Les nouveaux d√©fis n√©cessitent de nouvelles technologies et approches qui sont n√©cessaires pour r√©duire le temps pour introduire des fonctions pratiques pour le client, des offres commerciales personnalis√©es, une r√©ponse rapide aux offres des concurrents, ainsi que le contr√¥le des co√ªts pour les syst√®mes, l'infrastructure informatique, les centres de donn√©es et le personnel qualifi√©.  Ces tendances sont √©galement un gros inconv√©nient: la complexit√© de l'architecture et des bases de donn√©es transactionnelles gonfl√©es qui ne peuvent pas faire face au flux et au traitement de l'information.  Les technologies de la g√©n√©ration pr√©c√©dente ont un plafond d'√©chelle verticale.  Par exemple, une instance Oracle DBMS s'ex√©cute √† la limite du serveur le plus puissant sur les processeurs x86 avec une charge d'un milliard de transactions par jour. </p><br><img src="https://habrastorage.org/webt/ai/bq/m-/aibqm-rewdzdcsg-6vtcbcv36lw.gif"><br><p>  Afin de r√©sister √† une charge similaire √† laquelle l'industrie Internet est confront√©e depuis longtemps, une nouvelle pile de technologies est utilis√©e, comme les caches en m√©moire et les bases de donn√©es NoSQL.  Ainsi, Apple utilise Cassandra, Sberbank - Ignite (GridGain), dans MegaFon nous utilisons Couchbase et Tarantool. </p><br><p>  MegaFon utilise diff√©rents mod√®les architecturaux pour le SGBD en m√©moire: </p><br><ol><li>  Cache simple, mis √† jour dans les d√©lais ou par √©v√©nement √† partir de la base de donn√©es et des applications </li><li>  Toutes les modifications de la base de donn√©es sont effectu√©es via le cache (script d'√©criture), par exemple, la connexion d'un client Oracle √† DCP Couchbase </li></ol><br><p><a name="habracut"></a>  Pour l'un de nos syst√®mes de d√©cision pour la dur√©e de vie de l'abonn√©, nous utilisons le premier mod√®le, car une seule application sur la totalit√© des donn√©es prend une d√©cision et l'envoie √† tous les syst√®mes, y compris la base de donn√©es Oracle.  L'un des cas les plus brillants d'utilisation du cycle de vie d'un abonn√© est le verrouillage et le d√©verrouillage sur un solde n√©gatif.  Apr√®s tout, tous les abonn√©s des op√©rateurs mobiles apr√®s avoir r√©approvisionn√© le solde veulent √™tre imm√©diatement en contact et passer des appels.  Gr√¢ce √† une application s√©par√©e et √† Couchbase, nous avons pu r√©duire le temps de sortie de la serrure de 90 secondes √† 30 et ce n'est pas la limite.  Seul l'enregistrement sur le changement de statut de l'abonn√© sera enregistr√© dans la base de donn√©es principale (Fig.1) </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lf/to/o5/lftoo5voqj_ycrfngqgwo74_i6w.png"></div><br>  <i>Figure 1 (exemple d'interaction)</i> <br><br><p>  Gr√¢ce √† l'utilisation des nouvelles technologies, nous avons pu 3 fois r√©duire le temps de sortie du verrou financier.  Mais pour obtenir les r√©sultats actuels, nous avons parcouru un long chemin dans la transformation architecturale du circuit de facturation et dans le choix de la base de donn√©es NoSQL. </p><br><p>  Pourquoi avons-nous choisi Couchbase?  Il y a plusieurs raisons √† cela. </p><br><p>  <strong>Exigence de performance</strong> </p><br><ol><li>  Traitement jusqu'√† 200 000 demandes par seconde. </li><li>  Le temps de r√©ponse moyen (50%) peut atteindre 5 ms (dans un seul centre de donn√©es). </li><li>  Le temps de r√©ponse maximal (99%) peut atteindre 15 ms (dans un centre de donn√©es). </li><li>  Performance d'insertion maximale 500 Mo / sec </li><li>  Nombre maximum d'op√©rations d'insertion 100 000 / s </li><li>  Nombre maximal d'op√©rations de modification (mises √† jour de documents) 100 000 / s </li><li>  Performances maximales des modifications (mises √† jour des documents) 500 Mo / sec </li><li>  Nombre maximal d'op√©rations de lecture 100 000 / s </li><li>  Vitesse de lecture maximale 500 Mo / sec </li></ol><br><p>  <strong>Recherche de cl√©s haute performance et acc√®s aux donn√©es</strong> </p><br><p>  Au c≈ìur de Couchbase se trouve Distributed Key Vault (KV).  Le r√©f√©rentiel KV est une approche de gestion des donn√©es extr√™mement simple qui stocke un identifiant unique (cl√©) ainsi qu'une information arbitraire.  Le r√©f√©rentiel KV lui-m√™me peut accepter toutes les donn√©es, que ce soit un blob binaire ou un document JSON.  En raison de la simplicit√© de l'impl√©mentation KV, l'acc√®s aux donn√©es est assur√© avec un minimum de retard.  Comme notre exp√©rience le montre, la latence du r√©seau est plus souvent 2-3 fois plus √©lev√©e que la fourniture de donn√©es cl√©s du c√¥t√© Couchbase. </p><br><p>  <strong>Sch√©ma de stockage dynamique (</strong> <strong>JSON)</strong> </p><br><p>  Les documents sont stock√©s sur le serveur Couchbase au format JSON.  Le format prend en charge les types de donn√©es de base, tels que les nombres, les cha√Ænes et les types complexes, ainsi que les dictionnaires et les tableaux int√©gr√©s. </p><br><p>  Le sch√©ma de donn√©es dans Couchbase est une construction logique d√©finie par l'application et le d√©veloppeur.  En raison de sa flexibilit√© et de la possibilit√© d'utiliser plusieurs options, nous pouvons utiliser une balise dans le document, par exemple, avec des informations de version.  Cela permet √† l'application de d√©terminer dans quel mode le document doit √™tre trait√©, ainsi que d'assurer une migration en douceur de la base de donn√©es vers le nouveau sch√©ma de donn√©es. </p><br><p>  <strong>Haute disponibilit√©</strong> </p><br><p>  L'un des param√®tres constitutifs d'un syst√®me d'information est sa disponibilit√©.  Couchbase offre une haute disponibilit√© des donn√©es avec de nombreuses fonctionnalit√©s diff√©rentes.  L'un d'eux est la r√©plication de donn√©es (la distribution de plusieurs copies de donn√©es sur diff√©rents serveurs de cluster), qui vous permet de fournir un service lors de la maintenance de routine ou de la panne de certains serveurs. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5e/jd/3h/5ejd3hwshvqdvwjeuqlovji9ocy.png"></div><br>  <i>Figure 2 (r√©pliques de serveur Couchbase)</i> <br><br><p>  La deuxi√®me fonctionnalit√© importante pour la haute disponibilit√© est le DCP (Database Change Protocol) interne.  Il fournit un transfert de changement √† grande vitesse vers toutes les copies de donn√©es, les index secondaires (GSI), la r√©plication inter-cluster (XDCR) et les consommateurs externes. </p><br><p>  <strong>R√©plication bidirectionnelle</strong> </p><br><p>  La bonne pratique dans les entreprises consiste √† utiliser la redondance pour tous les processus et √©quipements commerciaux.  Id√©alement, il s'agit d'une sauvegarde en mode actif-actif, lorsque la commutation entre les n≈ìuds probl√©matiques se produit automatiquement.  La r√©plication bidirectionnelle dans Couchbase active le mode AA.  Mais tester la r√©plication a montr√© qu'elle n'est efficace que dans les centres de donn√©es √† proximit√©.  Avec un espacement de plus de 100 km, des conflits apparaissent.  Couchbase dispose de m√©canismes de r√©solution des conflits: bas√©s sur l'horodatage et le num√©ro de s√©quence.  Cependant, en raison du retard sur le r√©seau, des donn√©es obsol√®tes p√©n√®trent dans la base de donn√©es.  Nous avons abandonn√© l'utilisation de la r√©plication bidirectionnelle (coh√©rence inter-cluster).  Toutes les modifications sont effectu√©es sur un seul cluster.  La disponibilit√© des donn√©es en mode lecture est fournie dans tous les centres de donn√©es (AA). </p><br><p>  <strong>Mise √† l'√©chelle horizontale</strong> </p><br><p>  Une des caract√©ristiques importantes de la plupart des bases de donn√©es NoSQL est la mise √† l'√©chelle horizontale (Fig. 3).  La principale diff√©rence de Couchbase est la prise en charge de la mise √† l'√©chelle multidimensionnelle, lorsque nous, dans le cluster, pouvons uniquement augmenter les performances du service souhait√©.  Par exemple, le jeu Pokemon GO utilise une architecture divis√©e.  Au d√©but du projet, 5 serveurs avec services combin√©s ont √©t√© utilis√©s.  Apr√®s avoir augment√© la charge, ils ont utilis√© une architecture diversifi√©e: 5 serveurs de donn√©es et 55 serveurs pour le traitement des requ√™tes et des index.  L'un des inconv√©nients de la mise √† l'√©chelle avec Couchbase est que l'orchestrateur a des probl√®mes lorsqu'il y a plus de 50 n≈ìuds de date dans le cluster. </p><br><p></p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/79/9c/ne/799cnegj-o20dtxdfcasl3ihm1u.png"></div><br><p>  <i>Figure 3 MDS</i> </p><br><p>  <strong>Exigences SI</strong> </p><br><p>  Les exigences de s√©curit√© de l'information ont influenc√© notre choix dans une moindre mesure, mais leur pr√©sence dans le syst√®me a fait un argument suppl√©mentaire en faveur de l'une ou l'autre base de donn√©es.  Le cache pouvant contenir des donn√©es personnelles, nous devons imp√©rativement suivre les exigences du r√©gulateur.  Il vaut la peine de d√©cider: allons-nous utiliser du mat√©riel suppl√©mentaire ou pouvons-nous le fournir avec la base de donn√©es elle-m√™me?! </p><br><p>  Dans la version entreprise, Couchbase prend en charge le chiffrement du trafic, le chiffrement des donn√©es et l'acc√®s personnalis√©.  Cela permet d'√©conomiser de l'argent sur des √©quipements tels que Cisco ASA. </p><br><p>  <strong>Mise √† niveau facile</strong> </p><br><p>  L'une des principales forces de Couchbase est son m√©canisme de mise √† jour transparent et la prise en charge des anciennes versions de l'API.  Pendant la mise √† niveau du cluster, il fonctionne en mode de compatibilit√©.  Les nouveaux m√©canismes ne fonctionneront qu'apr√®s une mise √† niveau compl√®te du cluster.  Les effets sur les applications en cours d'ex√©cution sont minimes en raison de la prise en charge de l'ancienne API. </p><br><p>  <strong>PS: la</strong> mise √† niveau / r√©trogradation est autoris√©e uniquement sur les versions principales voisines </p><br><p>  <strong>Fonctionnalit√© suppl√©mentaire</strong> </p><br><p>  <em>Distribution logique</em> </p><br><p>  Une autre caract√©ristique int√©ressante est la combinaison de serveurs dans un cluster en groupes logiques, avec des r√©pliques attach√©es √† eux.  Cela vous permet de distribuer des copies compl√®tes des r√©pliques du m√™me cluster √† diff√©rents autogates.  Cela permet √† l'un des concessionnaires automobiles de ne pas avoir une copie compl√®te des donn√©es dans le deuxi√®me </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/yf/nf/po/yfnfpots5tbrzzew39w4xsehey8.png"></div><br>  <i>Figure 4 Server Gropus</i> <br><br><p>  <b>Sauvegarde et restauration</b> </p><br><p>  Couchbase contient des outils de sauvegarde et de r√©cup√©ration pr√™ts √† l'emploi.  Le processus de sauvegarde peut fonctionner en trois modes: complet, diff√©rentiel et cumulatif.  Cela permet dans certains cas d'√©conomiser de l'espace disque et des ressources processeur. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xe/in/ff/xeinff0eawasua0xiu4ec3yon1y.png"></div><br><p>  <strong>Couchbase vs mongo</strong> </p><br><p>  Il est difficile de r√©pondre √† la question du choix de bases de donn√©es NoSQL alternatives, et souvent, le meilleur Unix est celui que votre administrateur conna√Æt.  Essayons de formuler pourquoi nous avons pr√©f√©r√© Couchbase, et pas une autre plate-forme tr√®s populaire - MongoDB. </p><br><p>  Il est assez difficile de comparer deux projets diff√©rents avec une architecture et des fonctionnalit√©s diff√©rentes.  L'un des param√®tres auxquels nous avons pr√™t√© attention est la facilit√© de maintenance et la possibilit√© de reconfigurer rapidement le syst√®me pour r√©pondre aux besoins de l'entreprise. </p><br><p>  Tableau 1 Comparaison </p><br><table><tbody><tr><td><p><strong>&nbsp;</strong></p><br></td><td><p>  <strong>Couchbase</strong> </p><br></td><td><p>  <strong>Mongodb</strong> </p><br></td></tr><tr><td><p>  <strong>Mise √† l'√©chelle</strong> </p><br></td><td><p>  Automatique pour l'ensemble des donn√©es </p><br></td><td><p>  S√©lection manuelle des touches </p><br></td></tr><tr><td><p>  <strong>Distribution des donn√©es</strong> </p><br></td><td><p>  Les donn√©es sont toujours r√©parties uniform√©ment sur tous les n≈ìuds de donn√©es. </p><br></td><td><p>  Un balisage incorrect peut entra√Æner une distribution de donn√©es asym√©trique </p><br></td></tr><tr><td><p>  <strong>Ajouter / supprimer un h√¥te ou une r√©plique</strong> </p><br></td><td><p>  Il est ajout√© en une seule √©tape via l'interface graphique, avec r√©√©quilibrage </p><br></td><td><p>  Une t√¢che assez difficile avec des calculs de poids pour chaque collection </p><br></td></tr><tr><td><p>  <strong>Distribution de distribution en rack / centre de donn√©es</strong> </p><br></td><td><p>  Impl√©ment√© via des groupes logiques </p><br></td><td><p>  Non impl√©ment√© </p><br></td></tr><tr><td><p>  <strong>√âquilibrage de charge automatique</strong> </p><br></td><td><p>  Chaque n≈ìud a le m√™me nombre d'enregistrements actifs disponibles pour la lecture et l'√©criture. </p><br></td><td><p>  Pas √©quilibr√©.  Les n≈ìuds secondaires ne prennent pas en charge l'enregistrement </p><br></td></tr><tr><td><p>  <strong>Mise √† l'√©chelle de l'index</strong> </p><br></td><td><p>  Flexible, vous pouvez ajouter un index de noeud s√©par√© en raison de la diversit√© de l'architecture </p><br></td><td><p>  La mise √† l'√©chelle mat√©rielle de l'index est associ√©e √† la mise √† l'√©chelle des donn√©es. </p><br></td></tr><tr><td><p>  <strong>M√©tadonn√©es de cluster</strong> </p><br></td><td><p>  Distribu√© sur tous les n≈ìuds de cluster </p><br></td><td><p>  Serveur de configuration requis </p><br></td></tr><tr><td><p>  <strong>Recherche int√©gr√©e</strong> </p><br></td><td><p>  N1LQ (SQL ++) </p><br></td><td><p>  Demande JSON </p><br></td></tr></tbody></table><br><p>  Tableau 2 Comparaison de r√©plication </p><br><table><tbody><tr><td><p><strong>&nbsp;</strong></p><br></td><td><p>  <strong>Couchbase</strong> </p><br></td><td><p>  <strong>Mongodb</strong> </p><br></td></tr><tr><td><p>  <strong>L'architecture</strong> </p><br></td><td><p>  La r√©plication intercluster n'a pas de d√©pendances, les clusters sont ind√©pendants les uns des autres </p><br></td><td><p>  Expansion intracluster uniquement </p><br></td></tr><tr><td><p>  <strong>Flexibilit√© de configuration</strong> </p><br></td><td><p>  Flexible (configuration de godets individuels, filtres, r√©glage) </p><br></td><td><p>  R√©glage de la vitesse </p><br></td></tr><tr><td><p>  <strong>Topologie</strong> </p><br></td><td><p>  R√©plication bidirectionnelle, √©toile, cha√Æne, etc. </p><br></td><td><p>  Etoile </p><br></td></tr><tr><td><p>  <strong>Mode actif actif</strong> </p><br></td><td><p>  Soutenu par </p><br></td><td><p>  Non pris en charge </p><br></td></tr></tbody></table><br><p>  Dans l'ensemble, Couchbase est plus flexible et plus simple dans les param√®tres requis pour nos t√¢ches et l'architecture hybride en √©volution rapide. </p><br><p>  <strong>Exp√©rience d'exploitation</strong> </p><br><p>  Pour commencer, nous aimerions donner les num√©ros avec lesquels le syst√®me et le cluster fonctionnent maintenant sur Couchbase. </p><br><ol><li>  Plus de 80 millions d'abonn√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">[i]</a> </li><li>  380 millions de documents d'information client JSON </li><li>  Disque dur de 3,5 To (nous utilisons memcached, les informations sur le disque sont stock√©es pour un d√©marrage rapide) </li><li>  3 To de RAM </li><li>  50000 op√©rations par seconde (Fig.5) </li><li>  50 microservices qui traitent l'int√©gralit√© du flux de messages </li></ol><br><p></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lv/nq/wc/lvnqwc_jmlr5jukgm10-ibu7qd8.png"></div><br>  <i>Figure 5 Charge</i> <br><p>  Les premiers jalons de la transformation, nous avons commenc√© avec la troisi√®me version de Couchbase.  Au premier stade, au d√©but du projet, toutes les applications fonctionnaient de mani√®re stable.  Mais lorsque nous avons traduit une logique suppl√©mentaire en un nouveau m√©canisme, nous avons √©t√© confront√©s au fait que le m√©canisme View a commenc√© √† fonctionner de mani√®re impr√©visible.  C'est-√†-dire  √† un moment donn√©, le processus se <strong>bloque</strong> et ces vues d'un tel n≈ìud ont cess√© de revenir.  Dans le m√™me temps, l'acc√®s aux donn√©es et leur traitement n'ont pas √©t√© interrompus.  Le probl√®me a √©t√© r√©solu assez facilement - en red√©marrant le n≈ìud, ce qui a g√©n√©ralement r√©duit la disponibilit√© du service.  Au cours de la communication avec le support technique de Couchbase, on nous a propos√© une commande non document√©e qui red√©marre uniquement le processus d'affichage </p><br><p>  <em>curl -s --data 'cb_couch_sup: restart_couch ().'</em>  <em>-u Administrateur: passez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://127.0.0.1:8091/diag/eval</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>[ii]</strong></a></em> </p><br><p>  La commande n'est valide que dans les versions 3.x. </p><br><p>  <em>curl -s --data 'couch_server_sup: restart_core_server ().'</em>  <em>-u Administrateur: Administrateur</em> <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://127.0.0.1:8091/diag/eval</a></em> </p><br><p>  La commande n'est valide que dans les versions 4.x. </p><br><p>  Un autre probl√®me de la troisi√®me version √©tait le m√©canisme de compression des donn√©es (compactage).  Il a d√ª √™tre d√©marr√© manuellement en fonction des mesures de surveillance d√©clench√©es.  Les deux probl√®mes ont maintenu la tension non seulement pendant le quart de travail, mais aussi chez les ing√©nieurs fonctionnels. </p><br><p>  √Ä cet √©gard, nous avons d√©cid√© de migrer vers la quatri√®me version.  La migration avec un impact minimal sur le service a pris environ deux semaines.  Le processus de mise √† jour lui-m√™me ne n√©cessite pas d'actions et de contr√¥le complexes, mais lors de l'ajout ou de la suppression d'un n≈ìud, un r√©√©quilibrage est lanc√©, ce qui prend au moins deux heures.  Dans le processus, nous avons trouv√© un moyen d'acc√©l√©rer le processus de mise √† jour via un serveur tampon: dans ce cas, il ne d√©marre pas un processus de r√©√©quilibrage propre, mais le transfert de donn√©es d'un n≈ìud √† un autre.  Cela a r√©duit le processus de mise √† jour √† 30 minutes. </p><br><p>  Lors de la mise √† jour d'un cluster industriel, les nuances suivantes doivent √™tre prises en compte: travailler en mode compatibilit√©, lorsque le cluster fonctionne en mode de la plus jeune version du logiciel.  Du c√¥t√© positif, le processus de mise √† niveau se d√©roule sans heurts et sans douleur, mais n√©anmoins, vous ne pourrez pas utiliser de nouvelles fonctions, telles que le nouveau m√©canisme de compression, N1QL, tant que le cluster entier ne sera pas enti√®rement mis √† jour. </p><br><p>  Apr√®s la mise √† jour, nous avons r√©ussi √† r√©soudre un seul probl√®me: la compression.  Cela a commenc√© √† fonctionner correctement.  Avec le m√©canisme View, le probl√®me persiste, m√™me s'il est r√©p√©t√© beaucoup moins fr√©quemment.  Il n'a √©t√© possible de le corriger que par les forces des d√©veloppeurs de Couchbase dans la version 4.6.4. </p><br><p>  Dans le cadre de la r√©solution des probl√®mes de support technique, il est devenu clair que le m√©canisme d'affichage ne sera plus mis √† jour.  Cela a √©t√© fait sur la base du fait que la plupart des clients Couchbase n'utilisent pas les vues aux fins pour lesquelles ils ont √©t√© cr√©√©s, et Couchbase a cr√©√© un nouveau m√©canisme N1QL.  Il est ex√©cut√© par un service distinct et ne d√©pend plus des n≈ìuds de donn√©es (Fig. 7) </p><br><p></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/df/xn/x2/dfxnx2uou3mvgpgdvtetuzsshj0.png"></div><br>  <i>Figure 7 R√¥les de n≈ìud</i> <br><br><p>  Nous avons ferm√© tous les probl√®mes critiques avec la version 4.6.4.  Mais en raison de l'augmentation du volume de donn√©es, ils ont d√©cid√© de migrer vers la cinqui√®me version, o√π ils ont ajout√© une nouvelle base de donn√©es pour les index et sur nos donn√©es, la quantit√© de m√©moire et de disques a diminu√© une fois et demie.  Mais, malheureusement, nous n'avons pas observ√© de diminution de la quantit√© de donn√©es sur les n≈ìuds de donn√©es. </p><br><p>  <strong>Conclusions</strong> </p><br><p>  En g√©n√©ral, Couchbase s'est av√©r√© √™tre un syst√®me mature qui d√©tient une charge √©lev√©e, m√™me dans des cas non sp√©cifiques (Viber - utilis√© comme base de donn√©es).  Au sein de l'architecture hybride MegaFon, le cluster peut √™tre facilement adapt√© √† tout usage sans interruption de l'√©quipement et sans reconfiguration s√©rieuse du serveur, ce qui permet g√©n√©ralement √† l'entreprise de r√©duire les co√ªts de personnel et de rendre le service pour l'abonn√© aussi pratique que possible. </p><br><p>  PAO MegaFon </p><br><p>  Kovalchuk Egor 2018 </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">[i] Le</a> syst√®me traite non seulement les abonn√©s, mais aussi les appareils avec cartes SIM int√©gr√©es, modems, etc. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">[ii]</a> Consulter un sp√©cialiste avant utilisation </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436762/">https://habr.com/ru/post/fr436762/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436748/index.html">D√©velopper un hexapode √† partir de z√©ro (partie 3) - cin√©matique</a></li>
<li><a href="../fr436750/index.html">Analyse des tendances de YouTube russe pour 2018</a></li>
<li><a href="../fr436752/index.html">Le g√¢teau est un mensonge</a></li>
<li><a href="../fr436754/index.html">Q2VKPT: Quake II enti√®rement r√©√©crit avec un √©clairage r√©aliste</a></li>
<li><a href="../fr436756/index.html">L'isomorphisme se pr√©cipite √† la rescousse</a></li>
<li><a href="../fr436764/index.html">Cr√©ation de votre jsfiddle, partie 1</a></li>
<li><a href="../fr436768/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 282 (du 14 au 20 janvier)</a></li>
<li><a href="../fr436770/index.html">Les op√©rateurs mobiles russes gagnent dans les nuages</a></li>
<li><a href="../fr436772/index.html">Loi "sur les communications" et vuln√©rabilit√© des messagers</a></li>
<li><a href="../fr436774/index.html">La m√©thode de d√©tournement de comptes "en vrac" en acc√©dant aux services d'un op√©rateur mobile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>