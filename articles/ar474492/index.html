<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ง๐ฝ ๐ ุงูุฑุฏ ุนูู ุฏุฑุฏุดุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฎุฏููู ูุน Chatix ุงูุฎูููุฉ ๐ต๐พ ๐๏ธ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุขู ุณุฃุฑููู ููููุฉ ุฅุฌุฑุงุก ูุญุงุฏุซุฉ ูููุฑูู / ุงููุณุชุฎุฏููู / ุงูุฃุตุฏูุงุก ุฅุฐุง ูู ููู ูุฏูู ุงูุฎูููุฉ ุงูุฎุงุตุฉ ุจู ุฃู ูุง ุชุฑุบุจ ูู ูุถุงุก ุงูููุช ูู ุชุทููุฑู. ุณูุฌุฑู ูุญุงุฏุซุฉ ูุตูุฉ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุฑุฏ ุนูู ุฏุฑุฏุดุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฎุฏููู ูุน Chatix ุงูุฎูููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474492/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d7e/212/ac4/d7e212ac471c99b0cd61dd0e75aab281.png" alt="ุบุฑู ุงูุฏุฑุฏุดุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุณุฃุฑููู ููููุฉ ุฅุฌุฑุงุก ูุญุงุฏุซุฉ ูููุฑูู / ุงููุณุชุฎุฏููู / ุงูุฃุตุฏูุงุก ุฅุฐุง ูู ููู ูุฏูู ุงูุฎูููุฉ ุงูุฎุงุตุฉ ุจู ุฃู ูุง ุชุฑุบุจ ูู ูุถุงุก ุงูููุช ูู ุชุทููุฑู.  ุณูุฌุฑู ูุญุงุฏุซุฉ ูุตูุฉ ุจุณูุทุฉ ูุณูู ูุณุชุบุฑู ููุง ุญูุงูู ุณุงุนุฉ. </p><br><p style=";text-align:right;direction:rtl"> ูู ุงููุณุชุญูู ุชูุฑูุจูุง ูุชุงุจุฉ ุฏุฑุฏุดุฉ ุนูู ุดุจูุฉ ุนูู ุจุฏูู ุฎูููุฉ ุ ูุฌุจ ุฃู ุชููู ุจุดูู ุฃู ุจุขุฎุฑ.  ุณูู ูุณุชุฎุฏู Chatix ู JavaScript SDK ุงูุฎุงุต ุจู.  ุณุชุดุงุฑู Chatix ู SDK ูู ููุงู ุชุฎุฒูู ุงูุฑุณุงุฆู ูุงูุดุจูุงุช ุ ูุณูุชุนุงูู ูุน ุงููุงุฌูุฉ ุงูุฃูุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑูุฒ ุงููุดุฑูุน ุงูููุงุฆู ูุชุงุญ ุนูู ุฌูุซุจ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุฑุถ</a> </p><a name="habracut"></a><br><h2 id="struktura-proekta" style=";text-align:right;direction:rtl">  ูููู ุงููุดุฑูุน </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุทุจูู (ุงููููู ุงูุฑุฆูุณู ููุชุทุจูู ุ ูุนูู ูุญุงุฑุณ ุฏููุฉ ุ ูุฃูู ูู ูุฐุง ุงูุฏุฑุณ ูู ูุถูู Redux ุฃู ุฃู ูุฏูุฑ ุฏููุฉ ุขุฎุฑ) <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑุฃุณ (ุฑุฃุณ ุชุทุจูููุง ุงูุฐู ูุนุฑุถ ุงูุดุนุงุฑ ูุงุณู ุงูุฏุฑุฏุดุฉ ููุณูุญ ูููุณุชุฎุฏู ุจูุชุงุจุฉ ุงุณูู) </li><li style=";text-align:right;direction:rtl">  LogoHeader </li><li style=";text-align:right;direction:rtl">  RoomTitle </li><li style=";text-align:right;direction:rtl">  ุฑุฆูุณู </li><li style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุฃุนุถุงุก (ูุงุฆูุฉ ุงูุฏุฑุฏุดุฉ) <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  MemberItem [] </li></ul></li><li style=";text-align:right;direction:rtl">  ChatField (ุญุงููุฉ ููู ูุง ูุชุนูู ุจุฑุณุงุฆู ุงูุฏุฑุฏุดุฉ) <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  MessageContainer </li><li style=";text-align:right;direction:rtl">  ุงูุฑุณุงูุฉ [] (ุนุฑุถ ููุฑุณุงูุฉ ุ ูู ูุฐุง ุงูุฏุฑุณ ุณูู ูุนูู ููุท ูุน ุงูุฑุณุงุฆู ุงููุตูุฉ) </li><li style=";text-align:right;direction:rtl">  SendMessageForm (ูููุฐุฌ ูุฅุฑุณุงู ุฑุณุงูุฉ ุฏุฑุฏุดุฉ ุฌุฏูุฏุฉ) </li></ul></li><li style=";text-align:right;direction:rtl">  ChatixSDK (ูููู ููุทูุน ุงูุฑุฃุณ ูุณุคูู ุนู ุงูุนูู ูุน ุงููุงุฌูุฉ ุงูุฎูููุฉ) </li></ul></li></ul><br><blockquote style=";text-align:right;direction:rtl"> ููุงุญุธุฉ ูุงูุฉ ุญูู ุชุฎุฒูู ุงูุฏููุฉ.  ุจุงูุทุจุน ุ ุณูููู ุฃูุซุฑ ููุงุกูุฉ ูุฅุถุงูุฉ Redux ููุง ููุนุงูุฌุฉ ุชุบููุฑุงุช ุงูุญุงูุฉ ูู ุฎูุงูู ุ ูููู ูู ุฃุฌู ุชูููุฑ ุงูููุช ุ ุณูููู ุจุชุฎุฒูู ุงูุญุงูุฉ ูู ุงููููู ุงูุฑุฆูุณู ููุชุทุจูู ูุณูููู ุจุฅุนุงุฏุฉ ุชูุฌูู ุงูุจูุงูุงุช ุฅูู ุงูููููุงุช ุงููุฑุนูุฉ ูุงุณุชุฏุนุงุก ุฃูููุงุก ุฃููุฑูู ูู ุงูุทุฑู ุงููุฑุนูุฉ. <br>  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูุญุตู ุนูู ุงุณู ุงูุฏุฑุฏุดุฉ ุ <code>App โ Header โ RoomTitle</code> ูู ุญุงูุฉ ูููู <code>App โ Header โ RoomTitle</code> ุนุจุฑ <code>props</code> : <code>App โ Header โ RoomTitle</code> .  ุนูุฏูุง ููุชุจ ุงููุณุชุฎุฏู ุฑุณุงูุฉ ุ <code>SendMessageForm โ ChatField โ Main โ App</code> ูู SendMessageForm ุฅูู ุงูุชุทุจูู: <code>SendMessageForm โ ChatField โ Main โ App</code> . </blockquote><p style=";text-align:right;direction:rtl">  ุณุชุจุฏู ูุญุงุฏุซุชูุง ูู ูุฐุง ุงูุชุตููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d1e/096/b73/d1e096b7349824c510542cc215ae437e.png" alt="chatix.io"></p><br><h2 id="vzaimodeystvie-mezhdu-komponentami" style=";text-align:right;direction:rtl">  ุงูุชูุงุนู ุจูู ุงูููููุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููู ููููุงุชูุง ุงูุจูุงูุงุช ุฅูู ุจุนุถูู ุงูุจุนุถ ูููู ูุนูู ูู ุดูุก ููุง ูุฌุจ ุ ุฏุนููุง ูุญุฏุฏ ุงูุขู ููููุฉ ุชูุงุนููู ูุน ุจุนุถูู ุงูุจุนุถ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fde/009/821/fde0098218938f714d32a58ad9776ec9.png" alt="ูููู ุงูุชูุงุนู"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู ุงูุดูู ุ ูุฅู ุงููููู ุงูุฑุฆูุณู ุจุงููุณุจุฉ ููุง ูู <code>App</code> ุ ุงูุฐู ูููุฑ ุงูุจูุงูุงุช ููููููุงุช ุงููุฑุนูุฉ (ูุธุฑูุง ููุชูุงุนููุฉ ุ ููุญู ุจุจุณุงุทุฉ ูููู ุจุชุนููู <code>prop</code> ูุณูููู ุงููููู ุงููุฑุนู ุจุงูุฑุฏ ุนูู ุงูุชุบููุฑุงุช) ุ ูุงูููููุงุช ุงููุฑุนูุฉ ุชุนูุฏ ุชูุฌูู ุงูููุงููุงุช ุจุงูุทุฑููุฉ ุฅูู <code>App</code> .  ููุณ ูุฐุง ูู ุฃูุถู ุจููุฉ ูููู (ูููุจุบู) ุงูููุงู ุจูุง ููุดุฑูุน ุฅูุชุงุฌ ุ ูููููุง ุณุชููู ุจุฏุฑุณูุง. </p><br><h2 id="sozdanie-proekta" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงููุดุฑูุน </h2><br><h3 id="sozdaem-vizualnye-komponenty" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููููุงุช ูุฑุฆูุฉ </h3><br><h4 id="shapka" style=";text-align:right;direction:rtl">  ูุจุนุฉ </h4><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ุ ูุฐูู ุณูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูุดุงุก ุชุทุจูู ุฑุฏ ูุนู</a> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npx create-react-app chatix-chatroom cd chatix-chatroom</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุชุดุบูู ุงููุดุฑูุน ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm start</code> </pre> <br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุฅูุดุงุก ุฑุฃุณ. <br>  ุฃููุงู ุ ุฃุถู ุดุนุงุฑูุง ุฅูู ุงูุฑุฃุณ.  ููููุงู ุจุฐูู ุ ุฏุงุฎู ูุฌูุฏ src ุ ูู ุจุฅูุดุงุก ูุฌูุฏ <strong>ุงูููููุงุช</strong> ุ <strong>ูููู</strong> ูุฌูุฏ <strong>logo_header</strong> .  ูููู ุจุชุญููู ุงูุดุนุงุฑ ุฅูู ูุฐุง ุงููุฌูุฏ ูุฅูุดุงุก <strong>ูููุงุช</strong> 2 <strong>LogoHeader.js</strong> ู <strong>LogoHeader.css</strong> </p><br></li></ol><br><p style=";text-align:right;direction:rtl">  <strong>LogoHeader.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import React from 'react' import logo from './chatix_logo.svg'; import './LogoHeader.css'; function LogoHeader(){ return ( &lt;div className="LogoHeader"&gt; &lt;img src={logo} className="App-logo" alt="Chatix logo" /&gt; &lt;/div&gt; ); } export default LogoHeader;</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>LogoHeader.css</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.LogoHeader</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">flex-basis</span></span>: <span class="hljs-number"><span class="hljs-number">200px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">flex-grow</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">flex-shrink</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุดูุก ูุงุถุญ ููุง ุ ูู ูุฐุง ุงููููู ูุชู ุงุณุชูุฑุงุฏ ููู ุจู ุดุนุงุฑ ูุฃููุงุท. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุถูู ุฑูุฒ ุฃูุฑุงู ุงูุฃููุงุท ููุง ุจุนุฏ ุงูุขู ุ ููููู ุฑุคูุชูุง ุนูู ุตูุญุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุดุฑูุน ุงูููุงุฆู</a> </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุนุฑุถ ุงุณู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ูุฌูุฏ <strong>ุนููุงู ุงูุบุฑูุฉ</strong> <strong>ูููู</strong> ูููู <strong>RoomTitle</strong> .  <code>props.chatroomName</code> ุงูุงุณู ูู ูุฐุง ุงููููู ูู ุฎูุงู ุงูุฏุนุงุฆู ุ ูุฐูู ููุชุจ <code>props.chatroomName</code> ูุงูุขู <code>props.chatroomName</code> ููุง. </p><br><p style=";text-align:right;direction:rtl">  <strong>RoomTitle</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import React from 'react'; import './RoomTitle.css'; function RoomTitle(props){ return ( &lt;div className="RoomTitle"&gt; &lt;h1&gt;{props.chatroomName}&lt;/h1&gt; &lt;/div&gt; ); } export default RoomTitle;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูููู ุจุฅูุดุงุก ูููู ุงูุฑุฃุณ ููุณู ููุถุน ุงูุดุนุงุฑ ูุงุณู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ููู.  ุฑูู ุงุณู ุงูุฏุฑุฏุดุฉ ุนูู ุงูููุฑ ูู ุงููููู ุงููุฑุนู ูู ุฎูุงู prop <code>chatroomName</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฃุฐูุฑู ุจุฃููุง ุงุชูููุง ุนูู ุฃูู ุณูุชู ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช (ุญุงูุฉ ุงูุชุทุจูู) ูู ุฎูุงู ุงููููู ุงูุฌุฐุฑ ููุชุทุจูู.  ููู <strong>ุณูููู</strong> ุงูุฑุฃุณ ุฃููุงู ุฅูู <strong>ุงูุฑุฃุณ</strong> ููู <strong>ุงูุฑุฃุณ</strong> ุฅูู <strong>RoomTitle</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ููููุงุช \ ุฑุฃุณ \ Header.js</strong> </p><br><p style=";text-align:right;direction:rtl">  <strong>Header.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import React from 'react'; import './Header.css' import LogoHeader from '../logo_header/LogoHeader'; import RoomTitle from '../room-title/RoomTitle'; function Header(props) { return ( &lt;header&gt; &lt;LogoHeader/&gt; &lt;RoomTitle chatroomName={props.chatroomName} /&gt; &lt;/header&gt; ); } export default Header;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุงูุชุญ ููู <strong>App.js</strong> ูุฃุถู ูููู <strong>Header.js ุฅููู</strong> . <br>  ุซู ูุถูู ุงูุงุณู ุฅูู <strong>ุงูุฏููุฉ</strong> ููุฑุณูู ุฅูู <strong>ุงูุนููุงู</strong> ุนุจุฑ <strong>ุงูุฏุนุงุฆู</strong> . <br>  ุชุญุชุงุฌ ุฃูุถูุง ูู ุงูุฑุฃุณ ุฅูู ุฅุถุงูุฉ ุงุณู ุงููุณุชุฎุฏู ุงูุญุงูู.  ููููุงู ุจุฐูู ุ ูู ุจุฅุถุงูุฉ ูุงุฆู ุงููุณุชุฎุฏู ุฅูู ุงูุญุงูุฉ ูุฅุนุงุฏุฉ ุชูุฌููู ุจุงููุซู ุฅูู ุงูุฑุฃุณ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import React from 'react'; import './App.css'; import Header from './components/header/Header'; class App extends React.Component { constructor(props){ super(props); chatroomName: '-', me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } } render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} /&gt; &lt;/div&gt; ); }; } export default App;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุงูุขู ูู ุงูุฑุฃุณ ุฅูู ุฅุถุงูุฉ ุฅุฏุฎุงู ุจุงุณู ุงููุณุชุฎุฏู ุงูุญุงูู ูุชุนููู ูุนุงูุฌ ููุชุบููุฑ ุญุชู ูุชููู ูู ููู ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ุฅูู ูููู <strong>ุงูุชุทุจูู</strong> . </p><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ูุถูู <code>handleChangeName</code> ุงูุฏุงูุฉ <code>props.updateVisitor</code> ุฅูู ุงูุฅุฏุฎุงู ุจุงูุงุณู <code>props.updateVisitor</code> ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู <code>props.updateVisitor</code> ุงูุชู ููุฑ ุจูุง ูุงุฆู ุงููุณุชุฎุฏู ุจุงูุงุณู ุงููุญุฏุซ. </p><br><p style=";text-align:right;direction:rtl">  <strong>Header.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function Header(props) { const [name, setName] = useState(props.me.name ? props.me.name : props.me.uuid.substr(-10)) const handleChangeName = (e) =&gt; { setName(e.target.value) let visitor = {...props.me}; visitor.name = e.target.value; props.updateVisitor(visitor) } return ( &lt;header&gt; &lt;LogoHeader/&gt; &lt;RoomTitle chatroomName={props.chatroomName}/&gt; { props.me ? &lt;input className='name-input' value={name} placeholder=' ' onChange={(e) =&gt; handleChangeName(e)} /&gt; : null } &lt;/header&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุถู ุงูุขู ูุฐู ุงููุธููุฉ <code>props.updateVisitor</code> ุฅูู <strong>ุงูุชุทุจูู</strong> <code>props.updateVisitor</code> ุฅูู <code>props.updateVisitor</code> .  ุญุชู ุงูุขู ุ ูููู ููุท ุจุชุญุฏูุซ ูุงุฆู ุงููุณุชุฎุฏู ูู ุงูุญุงูุฉ ุ ูููู ูู ุฎูุงูู ุณูููู ุจุชุญุฏูุซ ุงููุณุชุฎุฏู ุนูู ุงูุฎุงุฏู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onUpdateVisitor = (visitor) =&gt; { this.setState({me: visitor}) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ูุจุฏู ุชุทุจูููุง ุงูุขู ุจูุฐุง ุงูุดูู ููุนุฑู ุญุชู ุงูุขู ููููุฉ ุชุญุฏูุซ ุงูุงุณู.  ุงููุถู ูุฏูุง </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/685/7ec/243/6857ec2435f476e8d6dad5201d7909a5.png" alt="ุฑุฃุณ ุบุฑู ุงูุฏุฑุฏุดุฉ"></p><br><h4 id="saydbar" style=";text-align:right;direction:rtl">  ุงูุดุฑูุท ุงูุฌุงูุจู </h4><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ูููุจ ุนูู ุฅูุดุงุก ุดุฑูุท ุฌุงูุจู. <br>  ุณูููู ุงูุดุฑูุท ุงูุฌุงูุจู ููุฌูุฏูุง ุฏุงุฎู ุงููููู ุงูุฑุฆูุณู ูู ุตูุญุฉ <strong>Main.js.</strong> <br>  ูููู ุจุฅูุดุงุฆู <strong>ุจููููุงุช \ main \ Main.js</strong> ุ ุซู ููุดุฆ ูููููุง ุจูุงุฆูุฉ <strong>ุจููููุงุช</strong> ุงููุณุชุฎุฏููู <strong>\ member-list</strong> <strong>\ MemberList.js ูููุดุฆ ุนูู</strong> ุงูููุฑ ูููููุง ุณูุนุฑุถ ุนูู ุงููุณุชุฎุฏููู ุฃููุณูู <strong>ุงูููููุงุช \ member-item \ MemberItem.js</strong> . </p><br><p style=";text-align:right;direction:rtl">  ูุชูุถูุญ ูุฏู ุงุฑุชุจุงุท ูุฐู ุงูููููุงุช ุงูุซูุงุซุฉ ุ ุฃูู ูุธุฑุฉ ุนูู ูุฎุทุท ุงููุดุฑูุน ูู ุจุฏุงูุฉ ุงูููุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ุงูููููุงุช ุ ูุงูุขู ุฏุนูุง ูุฐูุจ ูู ุงููุธุงู. <br>  ุฃููุงู ุ ุฃุถู ุตููู ุงููุณุชุฎุฏููู ุฅูู ุญุงูุฉ ูููู <strong>ุงูุชุทุจูู</strong> ูุฅุถุงูุฉ ุงููููู <strong>ุงูุฑุฆูุณู</strong> .  ุซู ุณูููู ุจุฅุนุงุฏุฉ ุชูุฌูู ูุคูุงุก ุงููุณุชุฎุฏููู ุฅูู ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class App extends React.Component { constructor(props) { super(props); this.state = { chatroomName: '-', members: [ { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" }, { is_online: true, name: "", uuid: "mnzxcv97zx6chvo" }, { is_online: false, name: "", uuid: "kjuhv987ashdfoua" }, { is_online: false, name: "", uuid: "jdhnf978WEHJSNDL" }, ], me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } }; } render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} /&gt; &lt;Main members={this.state.members} me={this.state.me} /&gt; &lt;/div&gt; ); }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููููู <strong>ุงูุฑุฆูุณู</strong> ุ ุฃุถู ูููู <strong>MemberList</strong> ูุฃุนุฏ ุชูุฌูู ุตููู ุงููุณุชุฎุฏููู ุฅูู ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  <strong>Main.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList members={props.members} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูููู <strong>MemberList ุ</strong> ูุฏุฎู ูู ุฌููุน ุงููุณุชุฎุฏููู ูููู ุฅุฑุฌุงุน ูููู <strong>MemberItem ูููุฑุฑ</strong> ูุงุฆู ุงููุณุชุฎุฏู ุฅููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>MemberList.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function MemberList(props) { const members = props.members.map((member) =&gt; &lt;MemberItem key={member.uuid} member={member} /&gt; ); return ( &lt;section className="MemberList"&gt; {members} &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููููู <strong>MemberItem</strong> ูุนุฑุถ ุจุงููุนู ุงููุณุชุฎุฏู ูุจุงุดุฑุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู.  ูู ุฐูู ุ ูุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ุ ุฅุฐุง ูู ููู ูุซุจุชูุง ุ ูุณูููู ุจุนุฑุถ ุฃูู 10 ุฃุญุฑู ูู ุงููุนุฑู.  ูุญู ุฃูุถูุง ูุชุญูู ูู ุงูุญุงูุฉ ุนูู ุงูุฅูุชุฑูุช / ุบูุฑ ูุชุตู ูููุงุฑู ุงููุนุฑู ุจูุนุฑู ุงููุณุชุฎุฏู ุงูุญุงูู ุ ุจุญูุซ ูุนุงุฑุถู ูุนุฑุถ ุงูุนูุงูุฉ "(ุฃูุช)". </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function MemberItem(props) { function getName(){ let name = '' if (props.member.uuid === props.me.uuid) { if(props.me.name) { name = props.me.name } else { name = props.me.uuid.substring(props.me.uuid.length-10, props.me.uuid.length); } } else { if(props.member.name){ name = props.member.name } else { name = props.member.uuid.substring(props.member.uuid.length-10, props.member.uuid.length); } } return name; } return( &lt;div className="MemberItem"&gt; &lt;img src={ icon } alt={ props.member.name }/&gt; &lt;span&gt; { getName() } { props.member.uuid === props.me.uuid &amp;&amp; " () " } &lt;/span&gt; { props.member.is_online &amp;&amp; &lt;span className="online"&gt;โข&lt;/span&gt; } &lt;/div&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุจู.  ุงูุขู ุงูุชุทุจูู ูุจุฏู ุจุงููุนู ูุซู ูุฐุง </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/eba/512/a8b/eba512a8bca7de4b1487567775f7742b.png" alt="ุฑุฃุณ ุบุฑู ุงูุฏุฑุฏุดุฉ"></p><br><h4 id="spisok-soobscheniy-i-forma-otpravki" style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุฑุณุงุฆู ููููุฐุฌ ุงูุชูุฏูู </h4><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุณูุชุนุงูู ูุน ูุงุฆูุฉ ุงูุฑุณุงุฆู ูุดูู ุงูุฅุฑุณุงู. <br>  ุฃููุงู ุ ุฃุถู ุตููููุง ุจู ุฑุณุงุฆู ุฅูู ุญุงูุฉ ูููู <strong>ุงูุชุทุจูู</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">this.state = { chatroomName: '-', messages: [ { content: " 1", sender_id: "mnzxcv97zx6chvo", uuid: "dg897sdfg" }, { content: " 2", sender_id: "98s7dfh9a8s7dhf", uuid: "8723hernm" }, { content: "  ", sender_id: "mnzxcv97zx6chvo", uuid: "435nbcv98234" } ], members: [ { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" }, { is_online: true, name: "", uuid: "mnzxcv97zx6chvo" }, { is_online: false, name: "", uuid: "kjuhv987ashdfoua" }, { is_online: false, name: "", uuid: "jdhnf978WEHJSNDL" }, ], me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฃุฑุณููุง ุฅูู ุงููููู <strong>ุงูุฑุฆูุณู</strong> </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> &lt;Main members={this.state.members} messages={this.state.messages} me={this.state.me} /&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุจุฅูุดุงุก ูููู <strong>conponents / chat-field / ChatField.js</strong> <br>  ูู ุจุชูุตููู ุจู <strong>Main</strong> ููู ุจุฅุนุงุฏุฉ ุชูุฌูู ุงูุฑุณุงุฆู ุฅููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฑุฆูุณู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList me={props.me} members={props.members} /&gt; &lt;ChatField messages={props.messages} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ูููู <strong>conponents / message-container / MessageContainer.js</strong> <br>  ูู <strong>ุจุชูุตููู</strong> ุจู <strong>ChatField</strong> ููู ุฃูุถูุง <strong>ุจุฅุนุงุฏุฉ</strong> ุชูุฌูู ุงูุฑุณุงุฆู ุฅููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุดุงุชูููุฏ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList me={props.me} members={props.members} /&gt; &lt;ChatField messages={props.messages} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณูู ูุฏูุฑ ูู ูู ุงูุฑุณุงุฆู ูููู ุฅุฑุฌุงุน ุงููููู ุงูุฐู ุณูุธูุฑู. <br>  ุฏุนููุง ุฅูุดุงุก ุฐูู <strong>conponents / message / Message.js</strong> .  ููู ูุนุฑุถ ุฃููููุฉ ุงูุฒุงุฆุฑ ูุงุณูู ุฃู ูุนุฑูู ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ุงูุงุณู ููุต ุงูุฑุณุงูุฉ ููุณู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฑุณุงูุฉ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function Message(props) { const getSenderName = () =&gt; { if (props.sender) { return props.sender.name ? props.sender.name : props.sender.uuid.substr(-10); } return "Unknown sender"; }; return( &lt;div className="Message"&gt; &lt;div className="message-sender-icon"&gt; &lt;img src={icon} alt="visitor icon"/&gt; &lt;/div&gt; &lt;div className="message-bubble"&gt; &lt;div className="message-sender-name"&gt;{getSenderName()}&lt;/div&gt; &lt;div className="message-content"&gt;{props.message.content}&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูู <strong>MessageContainer ุ ูุฏุฎู ูู</strong> ูู ุงูุฑุณุงุฆู ูููู ุฅุฑุฌุงุน ูููู <strong>ุงูุฑุณุงุฆู</strong> ุงูุฐู ูููู ุฅููู ูุงุฆู ุงูุฑุณุงูุฉ </p><br><p style=";text-align:right;direction:rtl">  <strong>MessageContainer</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function MessageContainer(props) { const messageList = props.messages.map(message =&gt; &lt;Message key={message.uuid} sender={props.members.find((member) =&gt; member.uuid === message.sender_id)} message={message} /&gt; ); return ( &lt;section className="MessageContainer" ref={messagesContainer}&gt; {messageList} &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจุฏู ุงููุดุฑูุน ูุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/74d/cad/f22/74dcadf22a3086fa2d7182e1aa791cab.png" alt="ุฑุณุงุฆู ุบุฑู ุงูุฏุฑุฏุดุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฅูุดุงุก ูููู ูุน ูููุฐุฌ ูุฅุฑุณุงู <strong>ููููุงุช</strong> ุงูุฑุณุงุฆู <strong>/ ุฅุฑุณุงู ุฑุณุงูุฉ ูููุฐุฌ / SendMessageForm.js</strong> .  ูู ุฐูู ุ ุฅูุดุงุก ูุฏุฎูุงุช ูุฒุฑ ููุฅุฑุณุงู.  ุนูุฏูุง ูุชุบูุฑ ุงูุฅุฏุฎุงู ุ ูุชู ูุชุงุจุฉ ุงููุต ููู ุฅูู ุงูุญุงูุฉ ุ ูุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ ุ ูุฏุนู ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู <code>onSendNewMessage</code> ุงูุฑุณุงูุฉ ูู ุงูุญุงูุฉ ุฅูููุง.  <code>onSendNewMessage</code> ุจุฅูุดุงุก ูุธููุฉ <code>onSendNewMessage</code> ููููุงู ูู ููุช ูุงุญู ูู ูููู <strong>ุงูุชุทุจูู</strong> ูุฅุนุงุฏุฉ ุชูุฌูููุง ูู ุฎูุงู ุงูุฏุนุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  <strong>SendMessageForm</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class SendMessageForm extends React.Component { constructor(props) { super(props); this.state = { message: '' }; } currentMessageChanged = (e) =&gt; { this.setState({message: e.target.value }); } sendMessageClicked = async (e) =&gt; { e.preventDefault(); if (this.state.message.length &gt; 0) { await this.props.onSendNewMessage(this.state.message); this.setState({...this.state, ...{message : ''}}); } } render(){ return ( &lt;section className="SendMessageForm"&gt; &lt;form&gt; &lt;input type="text" value={this.state.message} onChange={this.currentMessageChanged} placeholder="Type message to send"/&gt; &lt;button type="submit" onClick={this.sendMessageClicked} &gt; Send &lt;/button&gt; &lt;/form&gt; &lt;/section&gt; ); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุถุน ุงููููู <strong>SendMessageForm</strong> ุฏุงุฎู <strong>ChatField</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุดุงุชูููุฏ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function ChatField(props) { return( &lt;section className="ChatField"&gt; &lt;MessageContainer members={props.members} messages={props.messages} /&gt; &lt;SendMessageForm onSendNewMessage={props.onSendNewMessage}/&gt; &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููููู <strong>ุงูุฑุฆูุณู</strong> ุ ุณูููู ุฃูุถูุง <code>onSendNewMessage</code> ูุธููุฉ <code>onSendNewMessage</code> ูู <strong>ChatField</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฑุฆูุณู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&lt;ChatField members={props.members} messages={props.messages} onSendNewMessage={props.onSendNewMessage} /&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุจุฅูุดุงุก ูุฐู ุงููุธููุฉ ูู <strong>ุงูุชุทุจูู</strong> ูุฃุญูููุง ุฅูู <strong>Main</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onSendNewMessage = async (message) =&gt; { console.log(message) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุจู.  ุงูุขู ุ ุนูุฏ ุงูููุฑ ููู ุฒุฑ ุฅุฑุณุงู ุฑุณุงูุฉ ุ ุณูุชู ูููู ุฅูู ูููู <strong>ุงูุชุทุจูู</strong> . <br>  ุงูุขู ูุจุฏู ุงูุชุทุจูู ูุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e53/89e/d31/e5389ed317bd0fb4bf87db34b05f57a6.png" alt="ุบุฑู ุงูุฏุฑุฏุดุฉ ุงูููุงุฆูุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูุชู ุนุฑุถ ูู ุดูุก ูู ุชุทุจูููุง ููุนูู ูู ุดูุก ููุง ูุฌุจ ุ ูููู ุญุชู ุงูุขู ูุน ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ ุ ููู ุฃุฌู ุชูุดูุท ุงูุฏุฑุฏุดุฉ ูุฏููุง ุ ุชุญุชุงุฌ ุฅูู ุชูุตููู ูุน ุงููุงุฌูุฉ ุงูุฎูููุฉ. </p><br><h4 id="podklyuchenie-bekenda" style=";text-align:right;direction:rtl">  ุงุชุตุงู ุงูุฎูููุฉ </h4><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ูุฅู ุฃูู ุดูุก ูุนูู ูู ุชุซุจูุช ุญุฒูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">chatix-core</a> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm i chatix-core</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูู ุจุฅูุดุงุก ุญุณุงุจ ุนูู <strong>chatix</strong> ูุฅูุดุงุก ุบุฑูุฉ ุฏุฑุฏุดุฉ.  ููููุงู ุจุฐูู ุ ุงูุชูู ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">chatix.io</a> ููู ุจุงูุชุณุฌูู. <br>  ุจุนุฏ ุงูุชุณุฌูู ุ ููููู ุฑุคูุฉ <strong>ูุนุฑู</strong> ูููุน <strong>websiteId</strong> ูู ูุงุฌูุฉ ุงููุดุฑู ูู ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุฏุฑุฏุดุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููู ุจุฅูุดุงุก ุบุฑูุฉ ุฏุฑุฏุดุฉ ุฌุฏูุฏุฉ ุณูุนูู ูุนูุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/38b/26d/034/38b26d03464c1b236beff17c4118ba00.png" alt="ุฅูุดุงุก ุบุฑูุฉ ุฏุฑุฏุดุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุนูุฏ ุฅูู ูุดุฑูุนูุง ูููุดุฆ ูููููุง ุฌุฏูุฏูุง ุณูุนูู ูู ุฎูุงูู ูุน ุงูุฎุงุฏู. <br>  <strong>ุงูููููุงุช \ chatix \ ChatixSDK.js</strong> </p><br><p style=";text-align:right;direction:rtl">  ูุญู ุงุณุชูุฑุงุฏ <strong>ChatixCore ูู ุฐูู.</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import ChatixCore from 'chatix-core';</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูููู <strong>ChatixSDK ุ ูู</strong> ุจุฅูุดุงุก ูุซูู ููุฆุฉ <strong>ChatixCore</strong> ูุชูุฑูุฑ <strong>websiteId</strong> ููุณูุทุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">const websiteId = "_WEBSITE_ID"; this.sdk = new ChatixCore(websiteId);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู <strong>this.sdk</strong> ููููู ุงุณุชุฎุฏุงู ุฃุณุงููุจ ุงูุนูู ูุน ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ.  ููููู ุนุฑุถ ูุงุฆูุฉ ุงูุทุฑู ุนูู ุตูุญุฉ ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">chatix-core</a> </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู ูุงูุญุตูู ุนูู ุจูุงูุงุช ุญูู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุณุจููุง.  ููุงู ุทุฑู ุบูุฑ ูุชุฒุงููุฉ <strong>ุชุจุฏุฃ ()</strong> ู <strong>getChatroom () ููุฐุง ุงูุบุฑุถ</strong> . </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชููู ูุงุฆู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุ ููุฃุฎุฐ ุงุณูู ุนูู ุงูููุฑ ููููู ุฅูู <strong>ุงูุชุทุจูู</strong> .  ููููุงู ุจุฐูู ุ ูู ุจุฅุถุงูุฉ ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู <code>updateChatroomTitle(chatroom.title)</code> ูู <strong>ุงูุชุทุจูู</strong> <strong>ูุงุชุตู</strong> ุจูุง ูู <strong>ChatixSDK</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class ChatixSDK extends React.Component { constructor(props){ super(props); const websiteId = "_WEBSITE_ID"; this.chatroomId = "_CHATROOM_ID"; this.sdk = new ChatixCore(websiteId); this.sdk.start() .then( async () =&gt; { try { // refresh information about chatroom and call passed handler const chatroom = await this.sdk.getChatroom(this.chatroomId); if (props.updateChatroomTitle) { props.updateChatroomTitle(chatroom.title); } } catch (err) { console.error(err); } }) .catch((e) =&gt; { console.error(e); }); } render(){ return null; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฅููุงุก ูุธุฑุฉ ุนูู <code>this.chatroomId</code> ูู ูุงุฌูุฉ ุงููุฏูุฑ ุนู ุทุฑูู ูุชุญ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุงููุฑุบูุจุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/57d/309/a77/57d309a77bb226589ba225c52cfe37d6.png" alt="ChatroomID"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู <strong>ุงูุชุทุจูู ุ</strong> ุณูููู ุจุชูุตูู ูููู <strong>ChatixSDK</strong> ูุฑูู ูุธููุฉ updateChatroomTitle ููู ุ ูุงูุชู ุณุชููู ุจุชุญุฏูุซ ุงุณู ุงูุฏุฑุฏุดุฉ.  ูุถูู ุฃูุถูุง ุฑุงุจุท <code>ref</code> ุฅููู ุญุชู ูุชููู ูู ุงููุตูู ุฅูู ูุฐุง ุงููููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">this.chatixSDK = React.createRef();</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">setChatroomTitle = (newName) =&gt; { const newStateFragment = { chatroomName: newName}; this.setState({...this.state, ...newStateFragment}); };</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} updateVisitor={this.onUpdateVisitor} /&gt; &lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt; &lt;ChatixSDK ref={this.chatixSDK} updateChatroomTitle={this.setChatroomTitle} /&gt; &lt;/div&gt; ); };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุจู.  ุงูุขู ุ ุจุนุฏ ุงูุงุชุตุงู ุจุงูุฎุงุฏู ูุจุงุดุฑุฉ ุ ูุทูุจ ุจูุงูุงุช ุงูุฏุฑุฏุดุฉ ุ ููุญุตู ุนูู ุงุณูู ูููุชุจูุง ุฅูู ุญุงูุฉ ูููู <strong>ุงูุชุทุจูู</strong> ุ ูุจูุง ุฃู ุงูุชุบููุฑุงุช ูู ุงูุญุงูุฉ ุชุชุณุจุจ ูู ุชูุฏูู ุงููููู ูุฑุฉ ุฃุฎุฑู ุ ุณูุชู ุชุญุฏูุซ ุงูุงุณู ูู ุงูุฑุฃุณ ุชููุงุฆููุง.  ุงูุขู ูููู ุงุณุชุจุฏุงู ุงูุงุณู ุงูุงูุชุฑุงุถู ูู ุงูููุงูุฉ ุจุณูุณูุฉ ูุงุฑุบุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">chatroomName: ''</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ููุก ุงูุดุฑูุท ุงูุฌุงูุจู ูุน ุงููุณุชุฎุฏููู ุงูุญูููููู. <br>  ูููู ูุจู ุฃู ุชุญุตู ุนูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุ ุชุญุชุงุฌ ุฅูู ุงูุงุชุตุงู ุจุงูุฏุฑุฏุดุฉ ุ ูุฐูู ุ ูู <strong>ChatixSDK</strong> ุฏุงุฎู ูุธููุฉ <code>this.sdk.start()</code> ูุญุตู ุนูู ูุงุฆูุฉ ุจุฌููุน ุบุฑู ุงูุฏุฑุฏุดุฉ ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู ุ ูุชุญูู ููุง ุฅุฐุง ูุงูุช ูุชุตูุฉ ุจุงูุบุฑูุฉ ุงูุญุงููุฉ ุ ูุฅุฐุง ูู ุชูู ูุฐูู ุ <code>this.sdk.start()</code> ุจุชูุตูููุง. </p><br><p style=";text-align:right;direction:rtl">  <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">const myChatrooms = await this.sdk.getMyChatrooms(); if (myChatrooms.filter(x =&gt; x.id===this.chatroomId).length === 0) { await this.sdk.connectToChatroom(this.chatroomId); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุชุฃูุฏ ูู ุฃู ูุณุชุฎุฏููุง ูุชุตู ุจุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุ ูููููุง ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุดุงุฑููู ูู ูุฐู ุงูุฏุฑุฏุดุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// lets get all chatroom members using infinite loop with break on empty server response let membersPage = 1; let allChatroomMembers = []; while(true) { let pagedMembers = await this.sdk.getChatroomMembers(this.chatroomId, membersPage++, 10); allChatroomMembers = [...allChatroomMembers, ...pagedMembers]; if (pagedMembers.length === 0) { break; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ูู ุญููุฉ ูุง ููุงุฆูุฉ ุ ูุทูุจ ูู ุงููุณุชุฎุฏููู ุตูุญุฉ ุชูู ุงูุฃุฎุฑู ุญุชู ูุญุตู ุนูู ุงูุฌููุน ุ ุญุงููุง ูุญุตู ุนูู ุงูุฌููุน ุ ูููู ุจุชูุณูุฑ ุงูุญููุฉ.  ุจุนุฏ ุฐูู ุ ุชูุงููุง ูุซู ุงุณู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุ ูุนูุฏ ุชูุฌูููุง ุฅูู ุงููููู ุงูุฃุตู ุจุงุณุชุฎุฏุงู ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if (props.setChatroomMembers) { props.setChatroomMembers(allChatroomMembers); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูู ูููู <strong>ุงูุชุทุจูู</strong> ุ ูู ุจุฅูุดุงุก <code>setChatroomMembers</code> ููุธุงุฆู ุฑุฏ ุงูุงุชุตุงู ูุฐู ูุงูุชู ุณุชููู <code>setChatroomMembers</code> ุงููุณุชุฎุฏููู ุญุณุจ ุญุงูุชูู ุนุจุฑ ุงูุฅูุชุฑูุช / ุฏูู ุงุชุตุงู <code>setChatroomMembers</code> ูู ุงูุญุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>App.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">setChatroomMembers = (members) =&gt; { members.sort(this.sortMembers); const newStateFragment = { members: members}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ูุธููุฉ ุงููุฑุฒ <strong>sortMembers</strong> .  ูููู ุจูุฑุฒ ุงููุณุชุฎุฏููู ุญุณุจ ุงูุญุงูุฉ ูุญุณุจ ุงูุชุฑุชูุจ ุงูุฃุจุฌุฏู. </p><br><p style=";text-align:right;direction:rtl">  <strong>App.js</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sortMembers(a, b) { if (a.is_online === true &amp;&amp; b.is_online === false) { return -1; } else if (b.is_online === true &amp;&amp; a.is_online === false) { return 1; } else { if (a.name &amp;&amp; b.name) { if (a.name.toLocaleUpperCase() &gt; b.name.toLocaleUpperCase()) { return 1; } else if (a.name.toLocaleUpperCase() &lt; b.name.toLocaleUpperCase()) { return -1; } } else if (a.name &amp;&amp; !b.name) { return -1; } else if (!a.name &amp;&amp; b.name) { return 1; } if (a.uuid &gt; b.uuid) { return -1; } else { return 1; } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุนูุฏ ุชูุฌูู ูุธููุฉ setChatroomMembers ูู <strong>ChatixSDK</strong> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} updateVisitor={this.onUpdateVisitor} /&gt; &lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt; &lt;ChatixSDK ref={this.chatixSDK} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} /&gt; &lt;/div&gt; ); };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุจุนุฏ ุงูุงุชุตุงู ุจุงูุฎุงุฏู ูุจุงุดุฑุฉ ุ ูุญู ุ ููุฐูู ูุน ุงูุฑุฃุณ ุ ูุทูุจ ูุงุฆูุฉ ุจุฌููุน ุงููุณุชุฎุฏููู ุงููุชุตููู ูููุชุจูุง ุฅูู ุญุงูุฉ ูููู <strong>ุงูุชุทุจูู</strong> .  ูุฃูุถูุง ุชุบููุฑ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุงุฆูุฉ ุงููุณุชุฎุฏููู ูู ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">members: []</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ููููุง ูููุณ ุงููุจุฏุฃ ุชูุงููุง ุ ูุญุตู ุนูู ูุงุฆู ุงููุณุชุฎุฏู ุงูุญุงูู ููุฌููุนุฉ ูู ุงูุฑุณุงุฆู ูููุชุจูุง ุฃูุถูุง ุฅูู ุญุงูุฉ <strong>ุงูุชุทุจูู</strong> </p><br><p style=";text-align:right;direction:rtl">  <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// lets load 100 last messages from current chatroom const lastMessages = await this.sdk.getChatroomMessages(this.chatroomId, null, 100); if (props.setChatroomMessages) { props.setChatroomMessages(lastMessages); } if (props.setMe) { const me = this.sdk.getVisitor(); this.props.setMe(me); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&lt;ChatixSDK ref={this.chatixSDK} setMe={this.setMe} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} setChatroomMessages={this.setChatroomMessages} /&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณูู ูุฑุณู ุงูุฑุณุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  ูุฏููุง ูู <strong>ุงูุชุทุจูู</strong> ุจุงููุนู ูุธููุฉ <code>onSendNewMessage</code> ุงูุชู ุชุนุฑุถ ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ูุญุฏุฉ ุงูุชุญูู.  ุจุฏูุงู ูู ุฐูู ุ ุณูุชุตู ุจุจุณุงุทุฉ <code>sendChatroomMessage</code> ูุฅุฑุณุงู ุฑุณุงูุฉ ูู <strong>ChatixSDK</strong> . <br>  ูุฐู ุทุฑููุฉ ุบูุฑ ูุชุฒุงููุฉ ูุชููู ุจุฅุฑุฌุงุน ูุงุฆู ุงูุฑุณุงูุฉ ุงููุฑุณูุฉ ูู ุงูุงุณุชุฌุงุจุฉ ุ ูุงูุชู ูุถูููุง ุนูู ุงูููุฑ ุฅูู ุตููู ุงูุฑุณุงุฆู ูู ุงูุญุงูุฉ.  ุจุงูููุงุณุจุฉ ุ ูุฑุฌู ููุงุญุธุฉ ุฃููุง ูุตู <code>this.chatixSDK</code> ุฑุงุจุท <code>this.chatixSDK</code> ุชู ุฅูุดุงุคู ูุณุจููุง. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onSendNewMessage = async (message) =&gt; { let receivedMsg = await this.chatixSDK.current.sendChatroomMessage(message); const currentMessages = this.state.messages; currentMessages.push(receivedMsg); const newStateFragment = {messages: currentMessages}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงูุชุบููุฑ ูู ุงูุญุงูุฉ ูุคุฏู ุฅูู ุฅุนุงุฏุฉ ุชูุฏููู ุ ุณูุชู ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฑุณุงุฆู ุชููุงุฆููุง.  ููููุง ุจุญุงุฌุฉ ุฅูู ุงูุชุฃูุฏ ูู ุฃูู ุนูุฏ ุฅุถุงูุฉ ุงูุฑุณุงุฆู ุ ูุฅู ุดุฑูุท ุงูุชูุฑูุฑ ูู ูุชูุฉ ุงูุฑุณุงูุฉ ุณููุฎูุถ. </p><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ุงูุชุญ ูููู <strong>MessageContainer</strong> <strong>ูุงุณุชุฎุฏู</strong> ุฑุจุท <strong>useEffect ุ</strong> ุฑุงูุจ ุตููู ุงูุฑุณุงุฆู ููุชุบููุฑุงุช ุ ูุจูุฌุฑุฏ ุฃู ูุชู ุชุบููุฑู ูุชูุช ุฅุถุงูุฉ ุงูุฑุณุงุฆู ุ ูุญุตู ุนูู ูุชูุฉ <strong>scrollHeight</strong> ูุน ุงูุฑุณุงุฆู ููู ุจุงูุชูุฑูุฑ ุจูุง ุจููุณ ุงูููุฏุงุฑ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function MessageContainer(props) { const messagesContainer = React.createRef(); useEffect(() =&gt; { messagesContainer.current.scrollTop = messagesContainer.current.scrollHeight }, [props, messagesContainer]); const messageList = props.messages.map(message =&gt; &lt;Message key={message.uuid} sender={props.members.find((member) =&gt; member.uuid === message.sender_id)} message={message} /&gt; ); return ( &lt;section className="MessageContainer" ref={messagesContainer}&gt; {messageList} &lt;/section&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ููุชูู ูู ุชุญุฏูุซ ุงุณู ุงููุณุชุฎุฏู.  ููุฏ ุฃูุดุฃูุง ุจุงููุนู ุฅุฏุฎุงููุง ูู ุงูุฑุฃุณ ูุนูุฏ ุชุบููุฑู ุ ูููู ุจุฅุนุงุฏุฉ ุชูุฌูู ูุงุฆู ุงููุณุชุฎุฏู ุงููุญุฏูุซ ุฅูู ูููู <strong>ุงูุชุทุจูู</strong> ูููุงู ูุนุฑุถู ูู ูุญุฏุฉ ุงูุชุญูู.  ุฏุนููุง ูููู ูุฐู ุงููุธููุฉ.  ููููุงู ุจุฐูู ุ ูู ุจุฅุถุงูุฉ ุทุฑููุฉ ุงุณุชุฏุนุงุก <code>this.chatixSDK.current.updateVisitor(user)</code> ุฅูููุง ุ ุณูุคุฏู ุฐูู ุฅูู ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุฎุงุฏู.  <code>this.state.me</code> ููุท ุจุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุญุงูุฉ ุงููุญููุฉ ุ ูููุฐุง ูููู ุจุชุญุฏูุซ ูุงุฆู <code>this.state.me</code> ููู ุตููู <code>this.state.members</code> ุฃูุถูุง ุงููุณุชุฎุฏู ุงูุญุงูู <code>this.state.members</code> .  ูุฐุง ุถุฑูุฑู ูุชุญุฏูุซ ุงุณู ุงููุณุชุฎุฏู ุงูุญุงูู ูู ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ุฅูููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุชุทุจูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onUpdateVisitor = (user) =&gt; { this.chatixSDK.current.updateVisitor(user) this.setMe(user) let currentUser = this.state.members.find((member) =&gt; (member.uuid === user.uuid)) let currentUserIndex = this.state.members.indexOf(currentUser) let newMembers = [...this.state.members] newMembers[currentUserIndex] = user; this.setState({ members: newMembers }) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ุงูุขู ุจุญุงุฌุฉ ุฅูู ูุนุฑูุฉ ููููุฉ ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุ ูุฑุจุท / ูุตู ุงููุณุชุฎุฏููู ูุชุบููุฑ ุงููุนูููุงุช ูุงููุณุชุฎุฏููู ุงููุชุตููู. </p><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ูู ููู <strong>ChatixSDK.js</strong> ูู ุงููููุดุฆ ุ ูุญุชุงุฌ ุฅูู ุชุฌุงูุฒ ูุธุงุฆู ุฑุฏ ุงูุงุชุตุงู.  ููููู ุฑุคูุฉ ุงููุงุฆูุฉ ุงููุงููุฉ ูููุธุงุฆู ูุงูุญุฌุฌ ูู ุตูุญุฉ ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">chatix-core</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุญู ููุชููู <strong>ุญุงูููุง</strong> ูู <strong>onchatroomMessageRe ุชููู</strong> ุ <strong>onMemberConnectedToChatroom</strong> ุ <strong>onMemberDisconnectedFromChatroom</strong> ู <strong>onApplyVisitorInfo</strong> . </p><br><p style=";text-align:right;direction:rtl">  ูุญู ูุนูุฏ ุชุนุฑูููู ูููู ูุธููุฉ ูุฏุนู ุฑุฏ ุงูุงุชุตุงู ุงูุฐู ุณููุดุฆู ูู <strong>ุงูุชุทุจูู</strong> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">this.sdk.onChatroomMessageReceived = (chatroomId, message) =&gt; { if (chatroomId === this.chatroomId) { this.props.onNewMessageReceived(message); } }; this.sdk.onMemberConnectedToChatroom = (chatroomId, member) =&gt; { if (chatroomId === this.chatroomId &amp;&amp; props.addChatroomMember) { this.props.addChatroomMember(member); } }; this.sdk.onMemberDisconnectedFromChatroom = (chatroomId, member) =&gt; { if (chatroomId === this.chatroomId &amp;&amp; props.removeChatroomMember) { this.props.removeChatroomMember(member); } }; this.sdk.onApplyVisitorInfo = (visitor) =&gt; { this.props.onMemberUpdated(visitor) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุงูุชูู ุฅูู <strong>ุงูุชุทุจูู</strong> ูุฅูุดุงุก ูุฐู ุงููุธุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  <strong>onNewMessageReceived (ุฑุณุงูุฉ)</strong> <br>  ุชุฃุฎุฐ ูุฐู ุงููุธููุฉ ูุงุฆู ุฑุณุงูุฉ ูุชุถูููุง ุจุจุณุงุทุฉ ุฅูู ุงูุญุงูุฉ ูุน ุจููุฉ ุงูุฑุณุงุฆู.          ,        . </p><br><p style=";text-align:right;direction:rtl"> <strong>App</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onNewMessageReceived = (message) =&gt; { const currentMessages = this.state.messages; currentMessages.push(message); const newStateFragment = {messages: currentMessages}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p style=";text-align:right;direction:rtl"> <strong>App</strong> <br> <strong>addChatroomMember(member)</strong> <br>            state     members.              . </p><br><p style=";text-align:right;direction:rtl"> <strong>App</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">addChatroomMember = (member) =&gt; { const newStateFragment = {}; const currentMembers = this.state.members; currentMembers.push(member); currentMembers.sort(this.sortMembers); newStateFragment.members = currentMembers; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p style=";text-align:right;direction:rtl"> <strong>App</strong> <br> <strong>removeChatroomMember(memberId)</strong> <br>         state     <strong>members</strong>  <strong>state</strong> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">removeChatroomMember = (memberId) =&gt; { const currentMembers = this.state.members; const filteredMembers = currentMembers.filter(x=&gt; x.uuid !== memberId); const newStateFragment = {members: filteredMembers}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p style=";text-align:right;direction:rtl"> <strong>onMemberUpdated(updatedMember)</strong> <br>      .        .       <strong>state</strong>     . </p><br><p style=";text-align:right;direction:rtl"> <strong>App</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">onMemberUpdated = (updatedMember) =&gt; { let oldMember = this.state.members.find(member =&gt; member.uuid === updatedMember.uuid); oldMember = this.state.members.indexOf(oldMember); let newStateMembers = this.state.members; newStateMembers[oldMember] = updatedMember; this.setState({ members: newStateMembers }) }</code> </pre> <br><p style=";text-align:right;direction:rtl">      <strong>ChatixSDK</strong> </p><br><p style=";text-align:right;direction:rtl"> <strong>ChatixSDK</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&lt;ChatixSDK ref={this.chatixSDK} setMe={this.setMe} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} addChatroomMember={this.addChatroomMember} removeChatroomMember={this.removeChatroomMember} setChatroomMessages={this.setChatroomMessages} onNewMessageReceived={this.onNewMessageReceived} onMemberUpdated={this.onMemberUpdated} /&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุจู!       \ ,   ,    /   . </p><br><p style=";text-align:right;direction:rtl">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">alekseyso</a> <br>  ููุงุฏ ุฅุถุงููุฉ: <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SDK Chatix ()</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SDK Chatix (npm)</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">192   -</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar474492/">https://habr.com/ru/post/ar474492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar474478/index.html">ููุฎุต ุนู ุชุนูู ุงูุขูุฉ. ุงูุฅุญุตุงุก ุงูุฑูุงุถู. ุทุฑููุฉ ุงูุงุญุชูุงููุฉ ุงููุตูู</a></li>
<li><a href="../ar474480/index.html">ููู ุชููู ุจุชุนููู ุงูุฃุทูุงู ุนูู ุงุณุชุฎุฏุงู ุงูุชูููููุฌูุง ุจุดูู ุตุญูุญ ุฅุฐุง ูู ุชูู ูู ุทูููุชูุ</a></li>
<li><a href="../ar474484/index.html">ุงูุณุฎุฑูุฉ ููุณุช ุนูุงุฒุงู ุ ุงูุณุฎุฑูุฉ ูู ููุงุตูุงุช</a></li>
<li><a href="../ar474488/index.html">ุงูุจุซ ุงููุฌุงูู ูู DotNext ู HolyJS</a></li>
<li><a href="../ar474490/index.html">ููุฏ ุญุงู ุงูููุช: ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุดุงูุทุฉ ุงูุฃูููุฉ ูู Coclean</a></li>
<li><a href="../ar474494/index.html">ููู ูุงูุช ููุฉ Zabbix 2019</a></li>
<li><a href="../ar474496/index.html">ููุงุนุฏ ุงูุจูุงูุงุช ุนูู HighLoad ++ 2019</a></li>
<li><a href="../ar474498/index.html">JavaFX ุงูุจุฑูุงูุฌ ุงูุชุนูููู: ูุฑุญุจุง ุงูุนุงูู</a></li>
<li><a href="../ar474500/index.html">ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุบุฑุงูุงูุง: ูุตุฉ ุงูุฃููุงุน ุงููุงููุฉ</a></li>
<li><a href="../ar474502/index.html">ุชุญููู Odnoklassniki ูู Joker 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>