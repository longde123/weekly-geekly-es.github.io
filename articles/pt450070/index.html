<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéé üë∑üèª üçë 60 milh√µes de campos e 27 culturas. Como fizemos um mapa de todos os campos da Europa e dos EUA ‚úçüèæ üíÖüèΩ üì©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° alguns meses, lan√ßamos o primeiro mapa interativo gratuito do mundo, com o qual voc√™ pode ver informa√ß√µes sobre qualquer campo nos EUA e na Europa....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>60 milh√µes de campos e 27 culturas. Como fizemos um mapa de todos os campos da Europa e dos EUA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450070/"><img src="https://habrastorage.org/webt/dq/bf/0b/dqbf0bvkm5hrtuknni-rm60ot9g.jpeg"><br><br>  H√° alguns meses, lan√ßamos o primeiro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mapa interativo gratuito</a> do mundo, com o qual voc√™ pode ver informa√ß√µes sobre qualquer campo nos EUA e na Europa.  Dezenas de publica√ß√µes escreveram sobre o mapa e, no Product Hunt, ela coletou um milh√£o e meio de curtidas sem precedentes para um produto do setor agr√≠cola (e eventualmente se tornou o produto de IA e Machine Learning do ano 2018).  Desenvolvemos o mapa por dois meses - foi assim que aconteceu. <br><a name="habracut"></a><br>  O mapa interativo √© baseado em algoritmos de aprendizado de m√°quina e imagens de sat√©lite.  Ele cont√©m informa√ß√µes sobre 60 milh√µes de campos e 27 culturas em 44 pa√≠ses da Europa e Estados Unidos.  Dados - por tr√™s anos.  Reconhecemos todos os campos com a ajuda do ML a partir de imagens de sat√©lite.  Usando o mapa, voc√™ pode monitorar as tend√™ncias no n√≠vel de pa√≠ses e regi√µes e observar o desenvolvimento de um campo espec√≠fico.  Por exemplo, voc√™ pode descobrir quanta terra foi ocupada por milho nos Estados Unidos em 2016 (49,1 milh√µes de hectares) ou qual regi√£o da B√©lgica tem mais campos de trigo (Val√¥nia). <br><br><img src="https://habrastorage.org/webt/ot/an/yq/otanyq1ez-dmw0m4xvkpckq5rn4.png"><br>  <i>Europa com zoom m√≠nimo</i> <br><br>  Usando o mapa, voc√™ tamb√©m pode encontrar informa√ß√µes em um campo separado: tamanho, cultura, cronograma de desenvolvimento e um indicador abrangente Pontua√ß√£o do Campo.  √â calculado pelo √≠ndice NDVI, indicadores clim√°ticos e produtividade relativa do campo.  A qualquer momento, voc√™ pode ver como as beterrabas est√£o se desenvolvendo em seu campo ou em que √°rea o vizinho alocou para legumes no ano passado.  Entre outras coisas, √© lindo.  Criamos o bot√£o "aleat√≥rios belos campos": ele o move para mais de 35 lugares em todo o mundo, cada um dos quais parece uma obra de arte abstrata. <br><br>  A id√©ia de criar esse cart√£o surgiu em julho do ano passado.  Nos faltava uma ferramenta que nos permitisse demonstrar claramente todas as nossas capacidades tecnol√≥gicas.  Em agosto, toda a equipe come√ßou a se desenvolver de perto. <br><br><h2>  Dados: coletar, processar, compactar </h2><br>  Ao desenvolver o mapa, usamos imagens do sat√©lite Sentinel-2 do programa Copernicus da Uni√£o Europeia.  No total, foram processados ‚Äã‚Äãcerca de 250 terabytes de informa√ß√µes na Europa e nos EUA.  No primeiro est√°gio, fizemos o pr√©-processamento das imagens: limpamos as nuvens, sombras, neve e executamos a compacta√ß√£o de dados.  Ent√£o, nos 50 terabytes resultantes, eles lan√ßaram o processo de busca de limites de campo e classifica√ß√£o de culturas em nossos modelos de aprendizado de m√°quina.  Na sa√≠da, recebemos cerca de 250 gigabytes de mapas vetoriais contendo geometrias e culturas de campo. <br><br>  Para processar dados e calcular estat√≠sticas, usamos os bancos de dados PostgreSQL e PostGIS.  Ap√≥s exportar os dados vetoriais originais, obtivemos um banco de dados no qual havia cerca de 180 milh√µes de registros de geometria de campo, al√©m de mais de um bilh√£o de registros de informa√ß√µes adicionais sobre atributos sobre os pr√≥prios campos ao longo de tr√™s anos.  Com esse volume de dados, calculamos estat√≠sticas, classifica√ß√µes e determinamos a popularidade de diferentes culturas nas regi√µes do mundo - tudo o que √© exibido no mapa na coluna da esquerda e dicas interativas. <br><br><img src="https://habrastorage.org/webt/h3/hx/ea/h3hxeagfxn1qbfp_qh9pj5f3csm.jpeg"><br>  <i>Campos da Cro√°cia</i> <br><br>  Quer√≠amos calcular e exibir rapidamente indicadores agron√¥micos para o campo, al√©m de visualizar um gr√°fico do desenvolvimento da planta ao longo da temporada.  Para fazer isso, usamos nossa pr√≥pria abordagem para armazenar em cache e compactar dados de sat√©lite.  Isso nos permitiu reduzir o tamanho do data warehouse em 100-200 vezes e reduzir a velocidade de obten√ß√£o de informa√ß√µes no campo para 1 segundo. <br><br>  Tamb√©m nesta vers√£o do mapa, adicionamos um indicador abrangente de Pontua√ß√£o de campo, que permite avaliar rapidamente a classifica√ß√£o de campo.  O Field Score √© o primeiro passo para a previs√£o de rendimento, na qual nossa equipe est√° trabalhando atualmente.  O mapa foi feito em pouco tempo, ent√£o eu tive que inventar muitas solu√ß√µes originais em movimento.  Mas aplicamos todos os novos desenvolvimentos no trabalho em nosso produto principal. <br><br><h2>  Mapa: escolha o formato e prepare os dados </h2><br>  Para visualizar os dados, usamos o Mapbox.  Existem duas abordagens para criar um mapa: tentamos as duas.  O primeiro envolve a cria√ß√£o de um mapa raster.  Nesse caso, dividimos o mapa em quadrados, que renderizamos em imagens e armazenamos no servidor.  O navegador baixa v√°rias fotos e as move quando o usu√°rio se move pelo mapa.  Essa abordagem permite exibir todos os campos, n√£o √© necess√°rio filtrar nada.  Isso √© lindo, o menos √© que o mapa √© est√°tico, al√©m de imagens de bitmap pesarem muito. <br><br>  A segunda abordagem √© criar um mapa vetorial.  O navegador carrega os dados vetoriais e os anima no lado do cliente.  √â assim que os mapas modernos do Google e Yandex funcionam.  Os dados pesam menos que as imagens e permitem alterar o design de qualquer elemento.  Esse mapa pode ser feito pelo servi√ßo Mapbox, em particular, sua biblioteca Mapbox GL √© uma ferramenta de c√≥digo aberto para exibi√ß√£o de mapas na web.  Entre outras coisas, o Mapbox fornece um servi√ßo de armazenamento de mapas pago.  Voc√™ pode enviar manualmente seus dados para seus servidores, e o Mapbox distribuir√° informa√ß√µes rapidamente, garantindo uma opera√ß√£o precisa do mapa.  Essa √© uma parte essencial do trabalho e, gra√ßas ao fato de o Mapbox assumir a responsabilidade, a tarefa da equipe foi bastante simplificada. <br><br><img src="https://habrastorage.org/webt/u_/wo/fv/u_wofvjmemc-piwnprp5pwtmrra.png"><br>  <i>Em√≠lia Romanha, It√°lia</i> <br><br>  Ao trabalhar com dados vetoriais, h√° uma limita√ß√£o condicional: quanto mais informa√ß√µes voc√™ deseja exibir no mapa, mais lento tudo funcionar√°.  Para resolver esse problema, usamos um utilit√°rio do Mapbox chamado Tippecanoe.  Com base nos algoritmos que selecionamos, ele determinou quais campos de zoom seriam vis√≠veis e quais n√£o eram e removeu objetos vetoriais invis√≠veis da camada.  No total, o Tippecanoe possui mais de 20 algoritmos de filtragem, tentamos de tudo e selecionamos alguns b√°sicos.  Preparamos os dados assim preparados usando a tecnologia mbtiles da Mapbox de at√© 50 gigabytes e, em seguida, os carregamos nos servidores da empresa. <br><br>  O uso da estrutura Next JS, que executa a renderiza√ß√£o da p√°gina no lado do servidor, tornou poss√≠vel acelerar ainda mais o mapa.  A maioria dos aplicativos no mundo moderno √© renderizada inteiramente no lado do cliente: quando uma janela √© aberta, o navegador exibe uma p√°gina hmtl vazia e um script que carrega todas as informa√ß√µes.  A estrutura Next JS processa tudo no servidor e isso torna o carregamento do aplicativo r√°pido para o cliente. <br><br><h2>  Mapa: configure o visual e crie um "bot√£o m√°gico" na noite anterior ao lan√ßamento </h2><br>  O Mapbox foi uma descoberta agrad√°vel para o nosso designer.  O servi√ßo simplificou sua tarefa porque ele conseguiu visualizar os dados sem envolver um desenvolvedor front-end.  Do lado de fora, pode parecer f√°cil colorir os campos na interface final, mas h√° muitas nuances.  Temos 27 culturas, e escolher cores para elas n√£o foi f√°cil.  Para culturas populares, s√£o necess√°rias cores contrastantes, cores menos populares e menos contrastantes, e todas devem ser claramente vis√≠veis em diferentes n√≠veis de zoom.  O mapa tem muitas dicas de aninhamento e interativas; portanto, o mais dif√≠cil foi pensar na l√≥gica das transi√ß√µes em diferentes n√≠veis. <br><br>  Na noite anterior ao lan√ßamento, percebemos que, embora seja interessante ver o mapa e os n√∫meros, n√£o quero compartilhar isso nas redes sociais.  Portanto, decidimos adicionar o bot√£o "campos belos aleat√≥rios", que lan√ßa usu√°rios entre diferentes lugares do planeta.  Em todo o escrit√≥rio, procuramos lugares bonitos, em uma hora apertamos um bot√£o e inventamos tudo.  De manh√£, testamos e come√ßamos.  Parece que foi essa fun√ß√£o que nos deu tanta cobertura.  Caso contr√°rio, ningu√©m teria prestado aten√ß√£o ao fato de que os campos s√£o semelhantes √†s pinturas abstratas.  N√£o subestime o poder das decis√µes de √∫ltima hora. <br><br><img src="https://habrastorage.org/webt/5d/xb/rn/5dxbrnwzr6i-iezjv2qxfz9ef3i.jpeg"><br>  <i>Campos da Fran√ßa</i> <br><br>  Adicionamos outra fun√ß√£o ao mapa ap√≥s o lan√ßamento.  Sab√≠amos que √†s vezes n√£o reconhecemos exatamente os campos e culturas no mapa, e o feedback do usu√°rio nos permite melhorar nossos algoritmos.  Ap√≥s o lan√ßamento, os agricultores come√ßaram a enviar mensagens sobre imprecis√µes no reconhecimento das culturas: "Tenho girassol crescendo no campo e voc√™ tem milho".  Para resolver esse problema, adicionamos um bot√£o ao cart√£o de campo que nos envia notifica√ß√µes de erro.  As informa√ß√µes que usamos s√£o usadas para melhorar a precis√£o de nossos modelos de reconhecimento de culturas. <br><br><h2>  No final </h2><br>  Durante o seu desenvolvimento, o conceito do cart√£o se tornou muito mais complicado.  Se, a princ√≠pio, planejamos fazer uma visualiza√ß√£o simples de campos e culturas em todo o mundo, o produto final acabou sendo muito mais complexo.  Mas o cart√£o valeu a pena.  Ap√≥s o lan√ßamento, centenas de investidores, funda√ß√µes e pesquisadores cient√≠ficos nos escreveram.  Usaremos parte das solu√ß√µes tecnol√≥gicas, por exemplo, a estrutura Next JS e o utilit√°rio Tippecanoe, para trabalhar em nossa plataforma web de agricultura de precis√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OneSoil</a> gratuita. <br><br>  Fomos os primeiros a mapear todos os campos dos EUA e da Europa em tr√™s anos.  Os dados que recebemos s√£o √∫nicos.  J√° sabemos mais sobre os campos do que qualquer empresa ou estado.  E as estat√≠sticas que obtemos usando algoritmos de aprendizado de m√°quina geralmente s√£o mais precisas do que aquelas que foram coletadas manualmente.  Demos o primeiro passo para o reconhecimento autom√°tico de campos em todo o mundo - este √© o nosso plano para o futuro pr√≥ximo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt450070/">https://habr.com/ru/post/pt450070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt450060/index.html">Como descobri que meu visto n√£o est√° pronto, uma mensagem no Slack</a></li>
<li><a href="../pt450062/index.html">Restaurando a circula√ß√£o no c√©rebro algumas horas ap√≥s a morte</a></li>
<li><a href="../pt450064/index.html">Microsoft Build 2019 - transmiss√£o ao vivo em russo</a></li>
<li><a href="../pt450066/index.html">Teste: como voc√™ cumpre os requisitos para o processamento de dados pessoais?</a></li>
<li><a href="../pt450068/index.html">Como a tecnologia manipula sua mente: a apar√™ncia de um ilusionista e especialista em √©tica em design</a></li>
<li><a href="../pt450072/index.html">Escolhendo uma TV para voc√™, seu amado, do ponto de vista da ci√™ncia, n√£o da publicidade</a></li>
<li><a href="../pt450074/index.html">Avan√ßos nos ensaios de fase 1 da vacina contra o c√¢ncer colorretal</a></li>
<li><a href="../pt450076/index.html">Refinamos a descri√ß√£o das fun√ß√µes do sistema usando o diagrama de Sequ√™ncias</a></li>
<li><a href="../pt450078/index.html">Cliente da Hertz processa integrador da Accenture e reivindica US $ 32 milh√µes por atualiza√ß√£o de site com defeito</a></li>
<li><a href="../pt450080/index.html">Micr√≥bios ind√≠genas e digest√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>