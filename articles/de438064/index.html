<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌 🏑 🐑 Checkliste: Was musste vor dem Start von Microservices in Prod getan werden? 🎅🏾 👩🏿‍🤝‍👩🏽 🐫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel enthält einen kurzen Auszug aus meiner eigenen Erfahrung und der Erfahrung meiner Kollegen, mit denen ich Tage und Nächte damit verbrac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Checkliste: Was musste vor dem Start von Microservices in Prod getan werden?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438064/"><p><img src="https://habrastorage.org/webt/y7/-a/th/y7-ath7wga1jfx9issm1rhog2lg.jpeg" width="45%" align="right">  Dieser Artikel enthält einen kurzen Auszug aus meiner eigenen Erfahrung und der Erfahrung meiner Kollegen, mit denen ich Tage und Nächte damit verbracht habe, Vorfälle zu harken.  Und viele Vorfälle wären niemals aufgetreten, wenn alle ihre Microservices geliebt hätten und zumindest ein wenig genauer geschrieben worden wären. </p><br><p>  Leider glauben einige <s>Low-</s> Level-Programmierer ernsthaft, dass eine Docker-Datei mit einem Befehl selbst ein Mikroservice ist und bereits jetzt bereitgestellt werden kann.  Hafenarbeiter drehen sich, die Bank ist schlammig.  Dieser Ansatz ist mit Problemen behaftet, die von einem Leistungsabfall über die Unfähigkeit zum Debuggen und Denial-of-Service bis hin zu einem Albtraum namens Dateninkonsistenz reichen. </p><br><p>  Wenn Sie der Meinung sind, dass es an der Zeit ist, eine weitere App in Kubernetes / ECS / was auch immer zu starten, habe ich etwas zu beanstanden. </p><br><p> <strong>Die englische Version <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist ebenfalls verfügbar</a></strong> . </p><a name="habracut"></a><br><p>  Ich habe mir eine Reihe von Kriterien für die Beurteilung der Bereitschaft von Anträgen für den Start in der Produktion gebildet.  Einige Punkte dieser Checkliste können nicht auf alle Anwendungen angewendet werden, sondern nur auf spezielle.  Andere gelten im Allgemeinen für alles.  Ich bin sicher, Sie können Ihre Optionen in den Kommentaren hinzufügen oder einige dieser Punkte bestreiten. </p><br><p>  Wenn Ihr Mikrodienst nicht mindestens eines der Kriterien erfüllt, kann ich nicht zulassen, dass er sich in meinem idealen Cluster befindet, der in einem 2000 Meter unterirdischen Bunker mit Fußbodenheizung und einem geschlossenen, in sich geschlossenen Internetversorgungssystem gebaut wurde. </p><br><p>  Lass uns gehen ... </p><br><p>  <i>Hinweis: Die Reihenfolge der Artikel spielt keine Rolle.</i>  <i>Jedenfalls für mich.</i> </p><br><h2 id="korotkoe-opisanie-v-readme">  Readme Kurzbeschreibung </h2><br><blockquote>  Es enthält eine kurze Beschreibung seiner selbst ganz am Anfang von Readme.md in seinem Repository. </blockquote><p>  Gott, es scheint so einfach.  Aber wie oft bin ich darauf gestoßen, dass das Repository nicht die geringste Erklärung enthält, warum es benötigt wird, welche Aufgaben es löst und so weiter.  Es ist nicht erforderlich, über etwas Komplizierteres wie Konfigurationsoptionen zu sprechen. </p><br><h2 id="integraciya-s-sistemoy-monitoringa">  Integration in ein Überwachungssystem </h2><br><blockquote>  Sendet Metriken an DataDog, NewRelic, Prometheus usw. </blockquote><p>  Analyse des Ressourcenverbrauchs, Speicherlecks, Stacktraces, Service-Interdependenz, Fehlerrate - ohne all dies (und nicht nur) zu verstehen, ist es äußerst schwierig zu steuern, was in einer großen verteilten Anwendung geschieht. </p><br><h2 id="opovescheniya-nastroeny">  Warnungen konfiguriert </h2><br><blockquote>  Der Service umfasst Warnungen, die alle Standardsituationen sowie bekannte eindeutige Situationen abdecken. </blockquote><p>  Metriken sind gut, aber niemand wird ihnen folgen.  Daher erhalten wir automatisch Anrufe / Push / SMS, wenn: </p><br><ul><li>  Der CPU- / Speicherverbrauch hat dramatisch zugenommen. </li><li>  Der Verkehr nahm stark zu / ab. </li><li>  Die Anzahl der verarbeiteten Transaktionen pro Sekunde hat sich in jede Richtung dramatisch geändert. </li><li>  Die Größe des Artefakts nach dem Zusammenbau hat sich dramatisch geändert (exe, app, jar, ...). </li><li>  Der Prozentsatz der Fehler oder deren Häufigkeit hat den zulässigen Schwellenwert überschritten. </li><li>  Der Dienst hat das Senden von Metriken eingestellt (häufig übersehene Situation). </li><li>  Die Regelmäßigkeit bestimmter erwarteter Ereignisse wird verletzt (Cron-Job funktioniert nicht, nicht alle Ereignisse werden verarbeitet usw.) </li><li>  ... </li></ul><br><h2 id="runbooks-sozdany">  Runbooks erstellt </h2><br><blockquote>  Für den Dienst wurde ein Dokument erstellt, das bekannte oder erwartete Eventualitäten beschreibt. </blockquote><br><ul><li>  Wie kann sichergestellt werden, dass der Fehler intern ist und nicht von Dritten abhängt? </li><li>  ob es darauf ankommt, wo, an wen und was zu schreiben ist; </li><li>  wie man es sicher neu startet; </li><li>  wie man aus dem Backup wiederherstellt und wo Backups liegen; </li><li>  Welche speziellen Dashboards / Abfragen werden erstellt, um diesen Dienst zu überwachen? </li><li>  Verfügt der Dienst über ein eigenes Admin-Panel und wie kommt man dorthin? </li><li>  Gibt es eine API / CLI und wie kann man damit bekannte Probleme beheben? </li><li>  usw. </li></ul><br><p>  Die Liste kann zwischen den Organisationen sehr unterschiedlich sein, aber zumindest grundlegende Dinge sollten vorhanden sein. </p><br><h2 id="vse-logi-pishutsya-v-stdoutstderr">  Alle Protokolle werden in STDOUT / STDERR geschrieben </h2><br><blockquote>  Der Dienst erstellt im Produktionsmodus keine Protokolldateien, sendet sie nicht an externe Dienste, enthält keine redundanten Abstraktionen für die Protokollrotation usw. </blockquote><p>  Wenn eine Anwendung Protokolldateien erstellt, sind diese Protokolle unbrauchbar.  Sie werden nicht in 5 Container laufen, die parallel laufen, in der Hoffnung, den Fehler zu finden, den Sie brauchen (und hier sind Sie, <em>weinen</em> ...).  Ein Neustart des Containers führt zum vollständigen Verlust dieser Protokolle. </p><br><p>  Wenn eine Anwendung ihre eigenen Protokolle in ein System eines Drittanbieters schreibt, z. B. in Logstash, führt dies zu nutzloser Redundanz.  Der benachbarte Dienst weiß nicht, wie das geht, weil  Hat es einen anderen Rahmen?  Du bekommst einen Zoo. </p><br><p>  Die Anwendung schreibt einen Teil der Protokolle in Dateien und einen Teil in stdout, da es für den Entwickler praktisch ist, INFO in der Konsole und DEBUG in Dateien zu sehen.  Dies ist im Allgemeinen die schlechteste Option.  Niemand benötigt Komplexität und vollständig redundanten Code und Konfigurationen, die Sie kennen und warten müssen. </p><br><h2 id="logi---eto-json">  Protokolle sind Json </h2><br><blockquote>  Jede Protokollzeile ist im Json-Format geschrieben und enthält einen konsistenten Satz von Feldern </blockquote><p>  Bisher schreibt fast jeder Protokolle im Klartext.  Dies ist eine echte Katastrophe.  Ich würde mich freuen, nie etwas über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grok Patterns</a> zu erfahren.  Ich träume manchmal von ihnen und friere ein, versuche mich nicht zu bewegen, um ihre Aufmerksamkeit nicht zu erregen.  Versuchen Sie einfach, Java-Ausnahmen in den Protokollen einmal zu analysieren. </p><br><p>  Json ist gut, es ist Feuer vom Himmel.  Fügen Sie einfach dort hinzu: </p><br><ul><li>  <strong>Millisekunden-</strong> Zeitstempel gemäß <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RFC 3339</a> ; </li><li>  Level: Info, Warnung, Fehler, Debug </li><li>  user_id; </li><li>  app_name </li><li>  und andere Felder. </li></ul><br><p>  Laden Sie es auf ein geeignetes System herunter (z. B. korrekt konfigurierte ElasticSearch) und genießen Sie es.  Verbinden Sie die Protokolle vieler Microservices und fühlen Sie wieder, <em>was</em> gute monolithische Anwendungen waren. </p><br><p>  <em>(Und Sie können Request-ID hinzufügen und verfolgen ...)</em> </p><br><h2 id="logi-s-urovnyami-verbosity">  Protokolle mit Ausführlichkeitsstufen </h2><br><blockquote>  Die Anwendung muss eine Umgebungsvariable, z. B. LOG_LEVEL, mit mindestens zwei Betriebsmodi unterstützen: ERRORS und DEBUG. </blockquote><p>  Es ist wünschenswert, dass alle Dienste im selben Ökosystem dieselbe Umgebungsvariable unterstützen.  Keine Konfigurationsoption, keine Option in der Befehlszeile (obwohl dies natürlich umkehrbar ist), sondern standardmäßig sofort aus der Umgebung.  Sie sollten in der Lage sein, so viele Protokolle wie möglich zu erhalten, wenn etwas schief geht, und so wenige Protokolle wie möglich, wenn alles in Ordnung ist. </p><br><h2 id="fiksirovannye-versii-zavisimostey">  Abhängigkeitsversionen behoben </h2><br><blockquote>  Abhängigkeiten für Paketmanager sind behoben, einschließlich kleinerer Versionen (z. B. cool_framework = 2.5.3). </blockquote><p>  Dies wurde natürlich schon viel diskutiert.  Einige Fix-Abhängigkeiten von Hauptversionen, in der Hoffnung, dass nur kleinere Fehlerkorrekturen und Sicherheitskorrekturen in kleineren Versionen enthalten sind.  Das ist nicht richtig. <br>  Jede Änderung in jeder Abhängigkeit sollte in einem <em>separaten Commit</em> widergespiegelt <em>werden</em> .  Damit es bei Problemen storniert werden kann.  Ist es schwer mit den Händen zu kontrollieren?  Es gibt nützliche Roboter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wie diesen</a> , die Aktualisierungen verfolgen und Pull-Anfragen für jeden von Ihnen erstellen. </p><br><h2 id="dockerized">  Dockerisiert </h2><br><blockquote>  Das Repository enthält die produktionsbereite Docker-Datei und die Datei docker-compose.yml </blockquote><p>  Docker ist seit langem der Standard für viele Unternehmen.  Es gibt Ausnahmen, aber selbst wenn Sie Docker nicht in der Produktion haben, sollte jeder Ingenieur in der Lage sein, Docker-Kompositionen durchzuführen und an nichts anderes zu denken, um eine Entwickler-Assembly für die lokale Überprüfung zu erhalten.  Und der Systemadministrator muss die Assembly bereits von den Entwicklern mit den erforderlichen Versionen von Bibliotheken, Dienstprogrammen usw. überprüfen lassen, in denen die Anwendung <em>zumindest irgendwie funktioniert</em> , um sie an die Produktion anzupassen. </p><br><h2 id="konfiguraciya-cherez-okruzhenie">  Umgebungskonfiguration </h2><br><blockquote>  Alle wichtigen Konfigurationsoptionen werden aus der Umgebung gelesen, und die Umgebung hat Vorrang vor Konfigurationsdateien (jedoch niedriger als Befehlszeilenargumente beim Start). </blockquote><p>  Niemand wird jemals Ihre Konfigurationsdateien lesen und deren Format studieren wollen.  Akzeptiere es einfach. </p><br><p>  Weitere Details hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://12factor.net/config</a> </p><br><h2 id="readiness-and-liveness-probes">  Bereitschafts- und Lebendigkeitssonden </h2><br><blockquote>  Enthält geeignete Endpunkte oder CLI-Befehle, um die Bereitschaft zu testen, Anforderungen beim Start und bei der Verfügbarkeit während des gesamten Lebens zu bearbeiten. </blockquote><p>  Wenn die Anwendung HTTP-Anforderungen bearbeitet, sollte sie standardmäßig zwei Schnittstellen haben: </p><br><ol><li><p>  Um zu überprüfen, ob die Anwendung aktiv ist und nicht einfriert, wird ein Liveness-Test verwendet.  Wenn die Anwendung nicht reagiert, wird sie möglicherweise automatisch von Orchestratoren wie Kubernetes gestoppt, " <em>aber dies ist nicht korrekt</em> ."  Tatsächlich kann das Beenden einer eingefrorenen Anwendung einen Dominoeffekt verursachen und Ihren Service dauerhaft beeinträchtigen.  Dies ist jedoch kein Entwicklerproblem. Führen Sie einfach diesen Endpunkt aus. </p><br></li><li><p>  Um zu überprüfen, ob die Anwendung nicht gerade gestartet wurde, sondern bereit ist, Anforderungen anzunehmen, wird ein Bereitschaftstest durchgeführt.  Wenn die Anwendung eine Verbindung zur Datenbank, zum Warteschlangensystem usw. hergestellt hat, sollte sie mit einem Status von 200 bis 400 (für Kubernetes) antworten. </p><br></li></ol><br><h2 id="ogranicheniya-resursov">  Ressourcenlimits </h2><br><blockquote>  Enthält Beschränkungen für den Verbrauch von Speicher, CPU, Speicherplatz und anderen verfügbaren Ressourcen in einem konsistenten Format. </blockquote><p>  Die spezifische Implementierung dieses Elements wird in verschiedenen Organisationen und für verschiedene Orchestratoren sehr unterschiedlich sein.  Diese Grenzwerte müssen jedoch für alle Dienste in einem einzigen Format festgelegt werden, für verschiedene Umgebungen (prod, dev, test, ...) unterschiedlich sein und sich <em>außerhalb des Repositorys mit Anwendungscode befinden</em> . </p><br><h2 id="sborka-i-dostavka-avtomatizirovana">  Montage und Lieferung erfolgen automatisiert </h2><br><blockquote>  Das in Ihrer Organisation oder Ihrem Projekt verwendete CI / CD-System ist konfiguriert und kann die Anwendung gemäß dem akzeptierten Workflow an die gewünschte Umgebung liefern. </blockquote><p>  <em>Nichts wird jemals manuell an die Produktion geliefert.</em> </p><br><p>  Unabhängig davon, wie schwierig es ist, die Montage und Lieferung Ihres Projekts zu automatisieren, muss dies erfolgen, bevor dieses Projekt in Produktion geht.  Dieser Artikel umfasst das Erstellen und Ausführen von Ansible / Chef-Kochbüchern / Salt / ..., das Erstellen von Anwendungen für mobile Geräte, das Erstellen einer Verzweigung des Betriebssystems und das Erstellen von Images virtueller Maschinen usw. <br>  Kann nicht automatisieren?  Sie können dies also nicht in die Welt bringen.  Nach dir wird niemand es sammeln. </p><br><h2 id="graceful-shutdown--korrektnoe-vyklyuchenie">  Anmutiges Herunterfahren - korrektes Herunterfahren </h2><br><blockquote>  Die Anwendung kann SIGTERM und andere Signale verarbeiten und ihre Arbeit nach dem Ende der Verarbeitung der aktuellen Aufgabe systematisch unterbrechen. </blockquote><p>  Dies ist ein äußerst wichtiger Punkt.  Docker-Prozesse werden verwaist und arbeiten monatelang im Hintergrund, wo niemand sie sieht.  Nichttransaktionsvorgänge werden während der Ausführung unterbrochen und führen zu Dateninkonsistenzen zwischen Diensten und Datenbanken.  Dies führt zu Fehlern, die nicht vorhersehbar und sehr, sehr teuer sein können. </p><br><p>  Wenn Sie keine Abhängigkeiten kontrollieren und nicht garantieren können, dass Ihr Code SIGTERM korrekt verarbeitet, verwenden Sie etwas wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dummes Init</a> . </p><br><p>  Mehr Infos hier: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://12factor.net/disposability</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods</a> </li></ul><br><h2 id="soedinenie-s-bazoy-dannyh-regulyarno-proveryaetsya">  Die Datenbankverbindung wird regelmäßig überprüft </h2><br><blockquote>  Die Anwendung pingt ständig einen Ping an die Datenbank und reagiert automatisch auf die Ausnahme „Verbindungsverlust“ für alle Anforderungen. Sie versucht, diese selbst wiederherzustellen oder beendet ihre Arbeit ordnungsgemäß </blockquote><p>  Ich habe viele Fälle gesehen (dies ist nicht nur eine Wendung), in denen Dienste, die für die Verarbeitung von Warteschlangen oder Ereignissen erstellt wurden, ihre Verbindung durch Zeitüberschreitung verloren und endlos Fehler in die Protokolle eingaben, Nachrichten an Warteschlangen zurückgaben, sie an die Warteschlange für tote Briefe schickten oder einfach ihre Arbeit nicht erledigten. </p><br><h2 id="masshtabiruetsya-gorizontalno">  Horizontal skaliert </h2><br><blockquote>  Mit zunehmender Auslastung reicht es aus, mehr Anwendungsinstanzen auszuführen, um sicherzustellen, dass alle Anforderungen oder Aufgaben verarbeitet werden. </blockquote><p>  Nicht alle Anwendungen können horizontal skaliert werden.  Ein markantes Beispiel sind die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kafka-Verbraucher</a> .  Dies ist nicht unbedingt schlecht, aber wenn eine bestimmte Anwendung nicht zweimal gestartet werden kann, müssen alle interessierten Parteien dies im Voraus wissen.  Diese Informationen sollten ein Dorn im Auge sein, in der Readme-Datei hängen und wo immer möglich.  Einige Anwendungen können im Allgemeinen unter keinen Umständen parallel gestartet werden, was zu ernsthaften Schwierigkeiten bei der Unterstützung führt. </p><br><p>  Es ist viel besser, wenn die Anwendung selbst diese Situationen steuert oder ein Wrapper dafür geschrieben wird, der "Konkurrenten" effektiv überwacht und es dem Prozess einfach nicht erlaubt, die Arbeit zu starten oder zu starten, bis ein anderer Prozess seine Arbeit abgeschlossen hat oder bis eine externe Konfiguration N Prozesse gleichzeitig arbeiten lässt. </p><br><h2 id="dead-letter-queues-i-ustoychivost-k-plohim-soobscheniyam">  Warteschlangen für tote Briefe und schlechte Ausfallsicherheit von Nachrichten </h2><br><blockquote>  Wenn der Dienst auf Warteschlangen wartet oder auf Ereignisse reagiert, führt das Ändern des Formats oder Inhalts von Nachrichten nicht zu deren Ausfall.  Nicht erfolgreiche Versuche, die Aufgabe zu verarbeiten, werden N-mal wiederholt. Danach wird die Nachricht an die Dead Letter Queue gesendet. </blockquote><p>  Oft habe ich gesehen, wie Verbraucher und Leitungen, die so groß geworden sind, dass ihre anschließende Verarbeitung viele Tage dauerte, endlos neu gestartet wurden.  Jeder Warteschlangen-Listener sollte darauf vorbereitet sein, das Format zu ändern, zufällige Fehler in der Nachricht selbst (z. B. Eingabe von Daten in JSON) oder wenn diese vom untergeordneten Code verarbeitet werden.  Ich bin sogar auf eine Situation gestoßen, in der die Standard-RabbitMQ-Bibliothek für ein äußerst beliebtes Framework keine Wiederholungsversuche, Versuchszähler usw. unterstützte. </p><br><p>  Schlimmer noch, wenn eine Nachricht im Fehlerfall einfach zerstört wird. </p><br><h2 id="ogranichenie-na-kolichestvo-obrabatyvaemyh-soobscheniy-i-zadach-odnim-processom">  Begrenzung der Anzahl der verarbeiteten Nachrichten und Aufgaben pro Prozess </h2><br><blockquote>  Es unterstützt eine Umgebungsvariable, die gezwungen werden kann, die maximale Anzahl verarbeiteter Aufgaben zu begrenzen. Danach wird der Dienst ordnungsgemäß heruntergefahren. </blockquote><p>  Alles fließt, alles ändert sich, besonders die Erinnerung.  Das stetig wachsende Diagramm des Speicherverbrauchs und des am Ende getöteten OOM ist die Norm in modernen kubernetischen Köpfen.  Die Implementierung eines primitiven Tests, der Ihnen sogar die Notwendigkeit erspart, all diese Speicherlecks zu untersuchen, würde Ihnen das Leben erleichtern.  Ich habe oft gesehen, dass Leute viel Zeit und Mühe (und Geld) aufwenden, um diesen Umsatz zu stoppen, aber es gibt keine Garantie dafür, dass das nächste Engagement Ihres Kollegen ihn nicht verschlimmert.  Wenn die Anwendung eine Woche überleben kann, ist dies ein guter Indikator.  Lassen Sie es dann einfach von selbst enden und neu gestartet werden.  Dies ist besser als SIGKILL (zu SIGTERM siehe oben) oder die Ausnahme "Nicht genügend Speicher".  Für ein paar Jahrzehnte reicht dieser Stecker für Sie. </p><br><h2 id="ne-ispolzuet-third-party-integracii-s-filtraciey-po-ip-adresam">  Verwendet keine Drittanbieter-Integration mit Filterung nach IP-Adressen </h2><br><blockquote>  Wenn die Anwendung Anforderungen an einen Drittanbieter-Dienst stellt, der den Zugriff von begrenzten IP-Adressen ermöglicht, führt der Dienst diese Aufrufe indirekt über einen Reverse-Proxy aus. </blockquote><p>  Dies ist ein seltener Fall, aber äußerst unangenehm.  Es ist sehr unpraktisch, wenn ein winziger Dienst die Möglichkeit blockiert, den Cluster zu ändern oder die gesamte Infrastruktur in eine andere Region zu verlagern.  Wenn Sie mit jemandem kommunizieren müssen, der nicht weiß, wie man oAuth oder VPN verwendet, konfigurieren Sie den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reverse-Proxy</a> im Voraus.  Implementieren Sie in Ihrem Programm nicht das dynamische Hinzufügen / Entfernen solcher externer Integrationen, da Sie sich dadurch in die einzig verfügbare Laufzeit einnageln.  Es ist besser, diese Prozesse sofort zu automatisieren, um Nginx-Konfigurationen zu verwalten, und ihn in Ihrer Anwendung zu kontaktieren. </p><br><h2 id="ochevidnyy-http-user-agent">  Offensichtlicher HTTP-Benutzeragent </h2><br><blockquote>  Der Dienst ersetzt den User-Agent-Header durch einen benutzerdefinierten für alle Anforderungen an eine API, und dieser Header enthält genügend Informationen über den Dienst selbst und seine Version. </blockquote><p>  Wenn 100 verschiedene Anwendungen miteinander kommunizieren, können Sie verrückt werden, wenn Sie in den Protokollen etwas wie "Go-http-client / 1.1" und die dynamische IP-Adresse des Kubernetes-Containers sehen.  Identifizieren Sie Ihre Anwendung und ihre Version immer explizit. </p><br><h2 id="ne-narushaet-licenzii">  Verstößt nicht gegen die Lizenz </h2><br><blockquote>  Es enthält keine Abhängigkeiten, die die Anwendung übermäßig einschränken, es ist keine Kopie des Codes einer anderen Person und so weiter. </blockquote><p>  Dies ist ein selbstverständlicher Fall, aber es stellte sich heraus, dass selbst der Anwalt, der die NDA schrieb, jetzt Schluckauf hat. </p><br><h2 id="ne-ispolzuet-nepodderzhivaemye-zavisimosti">  Verwendet keine nicht unterstützten Abhängigkeiten </h2><br><blockquote>  Wenn Sie den Dienst zum ersten Mal starten, enthält er keine bereits veralteten Abhängigkeiten. </blockquote><p>  Wenn die Bibliothek, die Sie in das Projekt aufgenommen haben, von niemandem mehr unterstützt wird, suchen Sie nach einem anderen Weg, um das Ziel zu erreichen, oder entwickeln Sie die Bibliothek selbst. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Es gibt einige sehr spezifische Überprüfungen auf meiner Liste für bestimmte Technologien oder Situationen, aber ich habe nur vergessen, etwas hinzuzufügen.  Ich bin sicher, Sie werden auch etwas finden, an das Sie sich erinnern können. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438064/">https://habr.com/ru/post/de438064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438050/index.html">Kalman-Filter zur Minimierung des Entropiewertes eines zufälligen Fehlers mit einer nicht-Gaußschen Verteilung</a></li>
<li><a href="../de438052/index.html">Interaktor, Betriebsmuster</a></li>
<li><a href="../de438058/index.html">"Datenanalyse in Python" in zwei Teilen</a></li>
<li><a href="../de438060/index.html">Einschätzung der räumlichen Ausrichtung oder Wie man keine Angst vor Mahoney- und Majwik-Filtern hat</a></li>
<li><a href="../de438062/index.html">Meine Adresse ist kein Haus oder eine Straße, meine Adresse ist die Sowjetunion?</a></li>
<li><a href="../de438066/index.html">10 lehrreiche YouTube-Kanäle auf Englisch, von denen Sie noch nie gehört haben</a></li>
<li><a href="../de438070/index.html">Wie wurde aus der Generation Y eine ausgebrannte Generation?</a></li>
<li><a href="../de438074/index.html">[Ankündigung für Jekaterinburg, Nowosibirsk, St. Petersburg] QAutomationstestsitzung: Wir werden alles von der Newa bis zum Ob mit Tests abdecken</a></li>
<li><a href="../de438078/index.html">Facebook zahlt 20 US-Dollar pro Monat für die Einrichtung seines Pseudo-VPN</a></li>
<li><a href="../de438080/index.html">Elektronik mit Wi-Fi-Signal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>