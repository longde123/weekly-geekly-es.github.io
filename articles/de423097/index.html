<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê± üíÜüèΩ üï° Aufgaben und L√∂sungen f√ºr PostgreSQL Fighter üì∞ üë©üèΩ‚Äçüéì üè∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gr√º√üe an alle SQL-Liebhaber! 

 Im Internet habe ich selten Artikel gesehen, die verschiedene Arbeitspunkte und Feinheiten im Zusammenhang mit der Dat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aufgaben und L√∂sungen f√ºr PostgreSQL Fighter</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423097/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/x3/ee/eo/x3eeeo65jv-nyf7mh9ks2dordqg.jpeg"></div><br>  Gr√º√üe an alle SQL-Liebhaber! <br><br>  Im Internet habe ich selten Artikel gesehen, die verschiedene Arbeitspunkte und Feinheiten im Zusammenhang mit <b>der Datenverarbeitung in SQL behandeln</b> . <br>  Ich mag es, wenn man viele Dinge gleichzeitig aus einem Artikel lernen kann, auch allgemein. <br>  Aus diesem Grund habe ich beschlossen, meinen Artikel mit verschiedenen Aufgaben und Antworten mit Erl√§uterungen zu diesen zu schreiben. <br>  Geeignet f√ºr diejenigen, die alle Grundfertigkeiten gut beherrschen und sich weiterentwickeln wollen. <br><br>  Die Antworten sind f√ºr <b>PostgreSQL</b> geeignet (die <u>meisten Aufgaben sind f√ºr andere DBMS geeignet</u> , aber die Ergebnisse und L√∂sungen k√∂nnen unterschiedlich sein. Es ist sogar interessant, wo die Unterschiede auftreten). <br><br>  <i><u>Versuchen Sie, sich selbst zu antworten,</u> bevor Sie den Spoiler √∂ffnen.</i> <i><br></i> <br>  Lass uns gehen! <br><a name="habracut"></a><br><br>  Ich werde versuchen, etwas rein f√ºr PostgreSQL * mit einem Sternchen zu markieren (es gibt nicht viele solcher Momente). <br><br><h4>  1. Ein bisschen √ºber numerische Operationen </h4><br>  <b>1.1</b> Werden diese Anforderungen erf√ºllt?  Welche Ergebnisse werden sie zur√ºckgeben? <br><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- )     SELECT 3/2; -- ) SELECT min('- '::TEXT), avg('- '::TEXT); -- )*      FALSE,     ? SELECT 7.2 = (3.8::FLOAT + 3.4) -- ) SELECT (20/25)*25.0;</span></span></code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">Antworten zu 1.1</b> <div class="spoiler_text">  A) Antwort: <b>1</b> <br>  Es wird nur der ganze Teil gezeigt, weil  Die Operation verwendet Ganzzahlen.  Dies wird oft in anderen Sprachen gefunden. <br><br>  B) Antwort: Die Anfrage <b>wird nicht ausgef√ºhrt</b> . <br><br>  <b>Durchschnitt</b> gibt da einen Fehler aus  akzeptiert nur Zahlen und Zeitintervalle * <br><br>  Die <b>Min / Max-</b> Funktion kann jedoch f√ºr Textdaten ausgef√ºhrt werden (gem√§√ü der alphabetischen Sortierung in der Datenbank). <br>  Manchmal kann dies n√ºtzlich sein, wenn Sie sich zumindest eine Spalte ansehen m√ºssen, die nicht in <i>GROUP BY aufgef√ºhrt ist</i> <br>  Oder wenn Sie eine alphabetische Sortierung auf Zahlen anwenden m√ºssen, in denen '10' &lt;'2' <br><br>  B) Antwort: <b>FALSCH</b> <br><br>  Es mag seltsam erscheinen, aber das ist <u>akzeptabel</u> , weil  Dies ist eine Funktion eines Computers, der einige Gleitkommazahlen darstellt. Eine Zahl kann die Form 7.1 (9) annehmen. <br>  Ich erinnere mich, wie ich einmal lange mit einer Anfrage umgegangen bin, ohne es zu wissen. <br><br>  D) Antwort: <b>0</b> .  Der Haken ist, dass der Ausdruck in Klammern = 0 ist <br><br>  SELECT (20 / 25.0) * 25 w√ºrde korrekter funktionieren </div></div><br><br>  <b>1.2</b> <i>Ausgehend von</i> der Tabelle " <i>table_2</i> " (mit einer einzelnen Spalte " <i>value</i> " (INTEGER)) bestehend aus den folgenden 5 Zeilen: <br><table border="1" cellpadding="1"><tbody><tr><th width="120">  Wert </th></tr><tr><td>  5 </td></tr><tr><td>  5 </td></tr><tr><td>  Null </td></tr><tr><td>  5 </td></tr><tr><td>  5 </td></tr></tbody></table><br>  Welches Ergebnis gibt die Abfrage zur√ºck: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">avg</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)*<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*)) - <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_2;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Antwortoptionen</b> <div class="spoiler_text"><ul><li>  -4 </li><li>  0 </li><li>  Null </li><li>  5 </li><li>  Es wird einen Fehler verursachen, weil  nicht angegeben GROUP BY </li><li>  Keine der aufgelisteten </li></ul><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Antwort 1.2</b> <div class="spoiler_text">  Antwort: <b>5</b> <br><br>  Auf eine bestimmte Spalte angewendete Aggregatfunktionen ignorieren <i>NULL</i> , jedoch z√§hlt count <b>(*)</b> alle Zeilen <br>  5 * 5 - 20 </div></div><br><br><h4>  2. Allgemeine Fragen </h4><br>  <b>2.1</b> In welchen F√§llen kann eine Abfrage nicht den gesamten Inhalt einer Tabelle zur√ºckgeben?  ( <i>parent_id</i> INTEGER, die Tabelle ist mit einer Vielzahl von Daten gef√ºllt) <br><br><pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> any_table <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> parent_id = parent_id;</code> </pre><br>  Wie wird sich die unten stehende Anfrage verhalten?  Welche Daten werden ausgegeben?  <i>* PostgreSQL</i> <br><br><pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> any_table <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> parent_id <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> parent_id;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Antworten zu 2.1</b> <div class="spoiler_text">  Die erste Abfrage zeigt alle Eintr√§ge mit Ausnahme derjenigen an, bei denen <i>parent_id</i> <b>NULL ist</b> <br><br>  Die zweite Abfrage zeigt alle Tabelleneintr√§ge.  <u>IS DISTINCT FROM</u> √§hnelt logisch dem Operator <b>! =</b> In dem NULL mit NULL identisch ist <br>  <u>IS <b>NOT</b> DISTINCT FROM</u> verwandelt logischerweise Ungleichheit in Gleichheit <br></div></div><br>  <b>2.2.</b>  Was wird das Ergebnis der Anfrage sein? <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ) SELECT * FROM ( SELECT 1 UNION ALL SELECT 1 ) x(y) UNION ( SELECT 2 UNION ALL SELECT 2 );</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Antwort auf 2.2</b> <div class="spoiler_text">  Das Ergebnis sind 2 Zeilen mit den Werten <b>1</b> und <b>2.</b> <i>UNION</i> entfernt alle Duplikate in der <u>resultierenden</u> Auswahl und nicht nur zwischen den beiden verkn√ºpften Tabellen.  Mir ist aufgefallen, dass dies nicht f√ºr alle offensichtlich ist. </div></div><br>  <b>2.3</b> Schreiben Sie eine Abfrage, die das Datum von morgen anzeigt. <br><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 2.3</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">now</span></span>()+ <span class="hljs-built_in"><span class="hljs-built_in">INTERVAL</span></span> <span class="hljs-string"><span class="hljs-string">'1 DAY'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span>)</code> </pre> <br>  Nicht jeder arbeitet oft mit Daten, aber es lohnt sich, ein Minimum zu beherrschen <br>  * Postgres-L√∂sung, aber ich denke, andere DBMS sind nicht viel anders <br><br>  Wenn Ihnen die Arbeit mit Daten neu ist, empfehle ich Ihnen, mit der Anfrage zu experimentieren <br>  Zum Beispiel: <br>  - Ersetzen Sie DAY durch (Woche, Monat, Jahr usw.) <br>  - Ersetzen Sie +1 durch -9000 <br>  - DATUM durch ZEIT ersetzen <br>  - CAST entfernen <br>  - nur JETZT lassen () <br>  usw. <br><br>  Und, inspiriert von einigen Ergebnissen, lesen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HANDBUCH</a> . Alle dortigen Themen werden ausf√ºhrlich beschrieben <br><br></div></div><br>  <b>2.4</b> Die <b>Anweisungen</b> <b>UPDATE</b> , <b>DELETE</b> , <b>INSERT</b> und <b>MERGE dienen</b> zum Bearbeiten von Daten in Tabellen.  Ist die Ausf√ºhrung von <b>SELECT ..</b> "sicher"?  Kann eine Abfrage die Daten in der Tabelle beeinflussen? <br><div class="spoiler">  <b class="spoiler_title">Antwort auf 2.4</b> <div class="spoiler_text">  Die Frage mag jedoch primitiv erscheinen ... <br><br>  Gleich zu Beginn des SQL-Lernens war ich der Meinung, dass diese Anweisung nur Daten anzeigen kann, aber: <br><br>  Neben der Tatsache, dass SELECT die Tabelle f√ºr √Ñnderungen sperren kann (BEGIN; SELECT ... FOR UPDATE) * <br>  SELECT kann Funktionen aufrufen, die nahezu jede Manipulation ausf√ºhren k√∂nnen. <br><br>  Anf√§nger m√ºssen dies sofort verstehen und nicht, nachdem sie die Anforderung ‚Äûkleiner Informationen‚Äú auf dem <s>Produktionsserver abgeschlossen haben</s> </div></div><br><br><h4>  3. Nur PostgreSQL </h4><br>  <b>3.1</b> Beschreiben Sie, was passiert, wenn diese Abfrage im SQL-Dialogfeld ausgef√ºhrt wird: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> wtf <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 3.1</b> <div class="spoiler_text">  In der Regel wird SELECT INTO in <i>plpgsql-</i> Funktionen verwendet, um einen Wert in eine Variable zu schreiben. <br><br>  Au√üerhalb von plpgsql √§hnelt der Effekt des Befehls der folgenden Abfrage: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> wtf <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity;</code> </pre> <br></div></div><br>  <b>3.2</b> was diese "einfache" Anfrage zeigen wird <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> wtf_ <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> wtf_ ;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 3.2</b> <div class="spoiler_text">  pg_stat_activity Systemansicht (VIEW) der aktiven Prozesse in der Datenbank. <br><br>  Die Besonderheit der Abfrage besteht darin, dass eine Spalte mit Zeilen (ROW) mit dem TYP pg_stat_activity (oder einer anderen Tabelle) angezeigt wird.  F√ºr diejenigen, die Funktionen schreiben, m√ºssen Sie dies fr√ºher wissen. Weitere Informationen finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Handbuch.</a> <br>  Die Frage wurde hinzugef√ºgt, weil ein Anf√§nger leicht versehentlich ein solches Ergebnis erzielen kann und nicht versteht, worum es geht </div></div><br><h4>  4. Arbeiten Sie mit Text.  Regul√§re Ausdr√ºcke </h4><br>  Ich denke, Sie m√ºssen in der Lage sein, nicht nur Abfragen zu erstellen, sondern die Ergebnisse auch richtig darzustellen. <br>  Regul√§re Ausdr√ºcke sind ein eigenst√§ndiges gro√ües Thema mit vielen hochwertigen Artikeln.  Daher werde ich nur Beispiele ohne detaillierte Erkl√§rungen zeigen. <br><br>  <b>4.1.</b>  Angenommen, es gibt eine Tabelle " <i>table_5</i> " mit einer <i>Textspalte</i> " <i>X</i> " und vielen verschiedenen Zeilen.  Welche Abfrage kann die letzten 10 Zeichen jeder Zeile erhalten? <br><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 4.1</b> <div class="spoiler_text">  Mit SQL k√∂nnen Sie viele L√∂sungen f√ºr dasselbe Problem finden, zum Beispiel: <br>  das einfachste, was mir in den Sinn kommt, ist <b>richtig (X, 10)</b> <br>  Regex kann verwendet werden: <b>Teilzeichenfolge (X, '. {0,10} $')</b> <br>  Sie k√∂nnen sogar <s>nakostylyat</s> "ausweichen" (in allen Sinnen) wie <s>folgt</s> : <b>umgekehrt (Teilzeichenfolge (umgekehrt (X) f√ºr 10))</b> </div></div><br><br>  <b>4.2</b> Es gibt eine Tabelle "table_6" mit einer Textspalte "X".  Die Tabelle enth√§lt eine Zeile (alle Texte nur in Englisch und Russisch): <br><pre> <code class="sql hljs">'Lorem 3 Ipsum 23 standard 7 dummy 17 text Ultimate Answer of Life ?? 777'</code> </pre> <br>  A) Schreiben Sie eine Abfrage, die das 42. bis 68. Zeichen dieser Zeichenfolge zur√ºckgibt <br>  B) Wie extrahiere ich mit SQL nur GROSSBUCHSTABEN (Russisch oder Englisch) in einer Zeichenfolge? <br>  C) Wie berechnet man die Summe der Zahlen ( <u>keine Ziffern</u> ) in einer Zeichenfolge mit SQL? <br><br><div class="spoiler">  <b class="spoiler_title">SQL-Skizze</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> table_6(X) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">'Lorem 3 Ipsum 23 standard 7 dummy 17 text Ultimate Answer of Life ?? 777'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_6</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Antworten zu 4.2</b> <div class="spoiler_text"><pre> <code class="sql hljs"> <span class="hljs-comment"><span class="hljs-comment">--    WITH  "SQL " -- ) SELECT SUBSTRING(LEFT(X,68) FROM 42 ) FROM table_6 -- 1  SELECT SUBSTRING(X, 42, (68-42)+1) FROM table_6 -- 2  -- 3    -- )  ,        SELECT regexp_replace(X,'[^A-Z-]', '','g') FROM table_6 --  ''      - --   'g'    1  -- )        --   regexp_matches   **     ,      SELECT sum(x[1]::INT) FROM ( SELECT regexp_matches(X,'[0-9]+','g') FROM table_6 ) AS y(x) -- *        -- **   +,     (   1 ,     )</span></span></code> </pre> </div></div><br><br>  <b>4.3.</b> Wie ersetze ich alle doppelten (dreifachen oder mehr) Leerzeichen durch ein einzelnes Leerzeichen im Text (Tabellenzelle)?  (Traditionell: die Tabelle " <i>table_7</i> " mit der Spalte " <i>X</i> ") (PS: Es reicht aus, <i>SELECT</i> zu schreiben, um das gew√ºnschte Ergebnis zur√ºckzugeben, und nicht <i>UPDATE table_7 ...</i> ) <br><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 4.3</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> table_7(X) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">'Lorem 3 Ipsum 23 standard 7 dummy 11 text'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>) <span class="hljs-comment"><span class="hljs-comment">-- 1 .    (2   ) SELECT regexp_replace(X, '( ){2,}', ' ', 'g') FROM table_7 -- 2 .     (,  ,    ..)   ,      SELECT regexp_replace(X, '\s+', ' ', 'g') FROM table_7 --  !  ,  -    ,    "" .    .. --   ,    , ,        --    ,      ,    SELECT replace(replace(replace(X, ' ', '&lt;&gt;'), '&gt;&lt;', ''), '&lt;&gt;', ' ') FROM table_7</span></span></code> </pre><br></div></div><br>  <b>4.4</b> Es gibt eine Zeichenfolge " <i>X</i> ", in der Tippfehler zul√§ssig sind.  Anstelle der russischen Buchstaben (e, o, s, C) wurden √§u√üerlich √§hnliche Zeichen des englischen Alphabets verwendet.  Ersetzen Sie diese Zeichen durch SQL. <br><br>  PS Die Zeile sollte nur russische Zeichen enthalten, und Sie sollten sich keine Sorgen √ºber eine m√∂gliche √Ñnderung der englischen W√∂rter machen. <br><br>  (Wenn Sie Schwierigkeiten haben, alle Zeichen zu ersetzen, ersetzen Sie mindestens eines.) <br><br>  Beispielzeile: <br><br> <code>X = 'Coeo  eoc oe'</code> <br> <br><div class="spoiler">  <b class="spoiler_title">Antwort auf 4.4</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- , Replace(Replace(Replace(..  ,  --        (1   1 ) SELECT TRANSLATE('Coeo  eoc oe', 'Cceo', '')</span></span></code> </pre> </div></div><br>  <b>4.5</b> Schreiben Sie eine Abfrage, die eine Zeichenfolge konvertiert: <br>  <b>'</b> <b>Ivan Ivanov und Ivanovich'</b> zur Art <b>'Ivan Ivanov</b> <br><br><div class="spoiler">  <b class="spoiler_title">Antwort auf 4.5</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--  ,     SELECT initcap('  ') *     </span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Bonusquest f√ºr diejenigen, die es geschafft haben</b> <div class="spoiler_text">  <s>Gro√üartig, wenn es eine vorgefertigte Funktion gibt</s> <br>  K√∂nnen Sie umgekehrt konvertieren?  (vorzugsweise ohne Polsterung zu verlieren). <br>  Vielleicht ist die Aufgabe nicht typisch, aber sie wird f√ºr die Entwicklung n√ºtzlich sein. <br><br>  <b>'IVANOV IVAN IVANOVICH'</b> konvertieren zu <b>'IVANOV IVAN IVANOVICH'</b> <br>  <s>und Fall umkehren?</s> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Antwort auf die Bonus-Herausforderung</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> string_agg(<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(x,<span class="hljs-number"><span class="hljs-number">1</span></span>)) || <span class="hljs-keyword"><span class="hljs-keyword">UPPER</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(x <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> rn) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> regexp_split_to_table(<span class="hljs-string"><span class="hljs-string">'    4 TesT'</span></span>, <span class="hljs-string"><span class="hljs-string">'\y'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDINALITY</span></span> y(x, rn) ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> z <span class="hljs-comment"><span class="hljs-comment">-- *  PostgreSQL,      --    ,     --      ,      --      . -- WITH ORDINALITY      (   9.4) --      --          -- ..</span></span></code> </pre> </div></div><br><h4>  5. Ein bisschen √ºber Transaktionen </h4><br>  Transaktionen sind eine sehr wichtige Sache in einem DBMS. Es ist wichtig, die wichtigsten Punkte zu verstehen. <br><br>  Ich werde versuchen, ein Beispiel zu simulieren: <br><br>  Angenommen, es gibt eine Tabelle ‚ÄûWaren‚Äú, mit der zwei Benutzer arbeiten werden. <br>  Es hat eine ganzzahlige <i>Rabattspalte</i> von <u>10</u> f√ºr alle Zeilen. <br>  Die Datenbankeinstellungen sind Standard (READ COMMITTED - Lesen festgeschriebener Daten). <br><br>  Benutzer <i>Benutzer_1</i> √∂ffnet eine Transaktion und f√ºhrt die folgende Anforderung aus: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> discount = discount + <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre><br>  Eine Sekunde sp√§ter ein anderer Benutzer ( <i>User_2</i> ) <br>  Es f√ºhrt fast dieselbe Anforderung aus, ohne eine Transaktion zu √∂ffnen: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> discount = discount + <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre><br>  Was wird Ihrer Meinung nach in den folgenden Situationen passieren: <br><br>  <b>A)</b> Welches Ergebnis erh√§lt Benutzer_2, wenn Benutzer_1 die Transaktion offen l√§sst (d. H. Die Transaktion nicht best√§tigt / die √Ñnderungen nicht r√ºckg√§ngig macht)? <br>  Was User_1 auf Anfrage sehen wird: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> discount <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  <b>B)</b> Was passiert, wenn User_1 ROLLBACK ausf√ºhrt?  Welche Ergebnisse erh√§lt User_2? <br><br>  <b>F)</b> Was passiert, wenn User_1 COMMIT ausf√ºhrt?  Welche Ergebnisse erh√§lt User_2? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antworten</b> <div class="spoiler_text">  Soweit ich wei√ü, wird READ <b>UN</b> COMMITTED in PostgreSQL nicht unterst√ºtzt, und fehlerhafte Daten (nicht best√§tigt) k√∂nnen nicht gelesen werden <br><br>  Die Antworten lauten wie folgt: <br><br>  A) Die Anforderung <u>Benutzer_2</u> wartet auf COMMIT oder ROLLBACK von Benutzer_1.  (Die Anfrage scheint einzufrieren) <br>  <u>Benutzer_1</u> in seiner Transaktion sieht seine Version des Datenbank-Snapshots, wobei der <i>Rabatt</i> bereits <b>15</b> <i>betr√§gt</i> <br><br>  B) Wenn Benutzer_1 ROLLBACK ausf√ºhrt, bleibt der Rabattwert gleich, und Benutzer_2 wird ausgef√ºhrt, wodurch der <i>Rabatt</i> um 10 erh√∂ht wird und der Rabatt <b>20</b> betr√§gt <br><br>  C) Wenn Benutzer_1 COMMIT ausf√ºhrt, erh√∂ht sich der Rabattwert um 5, und dann wird Benutzer_2 ausgef√ºhrt, wodurch der <i>Rabatt</i> um 10 erh√∂ht wird und der Rabatt <b>25</b> betr√§gt <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Eine andere Version dieser Aufgabe</b> <div class="spoiler_text">  Eine etwas andere Version von Task 13 als Benutzer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">kirill_petrov</a> bei READ COMMITTED <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--      CREATE TABLE goods (discount) AS (SELECT 10::INT UNION ALL SELECT 15); -- 1. User_1   (  ): BEGIN; UPDATE goods SET discount = discount + 5; --2. User_2  : UPDATE goods SET discount = discount + 100 WHERE discount = 15 --3. User_1  COMMIT;</span></span></code> </pre>  Welche Daten werden in der Tabelle enthalten sein? <br></div></div><br><h4>  Fazit </h4><br>  Ich denke, das hat ziemlich interessante Punkte ber√ºhrt. <br><br>  Ich hoffe, dass die Aufgaben dazu beitragen, Anf√§nger zu motivieren, denn es ist langweilig, etwas ohne bestimmte Ziele zu lernen. <br><br>  Ich kann mich f√ºr diejenigen freuen, die alle Fragen leicht beantworten konnten.  Und diejenigen, die Schwierigkeiten hatten, haben hoffentlich einen <s>Kick in</s> Richtung Entwicklung bekommen.  Wer nicht viel versteht, aber SQL lernen will, lade den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PostgreSQL Young Fighter Kurs</a> zu meinem letzten Artikel ein. <br><br>  Ich freue mich auf Erg√§nzungen, L√∂sungen f√ºr besonders interessante Probleme (Sie k√∂nnen meine) und andere Kommentare! <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit!  Ich w√ºnsche Ihnen viel Erfolg beim Erlernen von SQL! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423097/">https://habr.com/ru/post/de423097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423087/index.html">Dr√ºck mir nicht ins Auge</a></li>
<li><a href="../de423089/index.html">Programmierer bei MBLT DEV 2018</a></li>
<li><a href="../de423091/index.html">Flattern f√ºr Android-Entwickler. So erstellen Sie eine Benutzeroberfl√§che f√ºr eine Aktivit√§t mit Flutter</a></li>
<li><a href="../de423093/index.html">Wir erh√∂hen die Zuf√§lligkeit der Tatsache, dass [wahrscheinlich] [fast] zuf√§llig</a></li>
<li><a href="../de423095/index.html">Was ist neu bei Apple Presentation?</a></li>
<li><a href="../de423101/index.html">Bereitstellen von LINSTOR Storage f√ºr Proxmox</a></li>
<li><a href="../de423103/index.html">Python-Podcasts: Das ist alles, was wir gefunden haben</a></li>
<li><a href="../de423105/index.html">System.IO.Pipelines: Hochleistungs-E / A in .NET</a></li>
<li><a href="../de423107/index.html">Wir laden Sie zum Go in Production Meeting ein</a></li>
<li><a href="../de423109/index.html">Was Apple eingef√ºhrt hat und was iOS-Entwickler dar√ºber denken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>