<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐บ ๐จ๐พโ๐ฌ ๐ง๐ป ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุบุฑุงูุงูุง: ูุตุฉ ุงูุฃููุงุน ุงููุงููุฉ ๐คฏ ๐ถ๐ผ ๐๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุจุงูุฌููุน! ูุจู ุจุถุนุฉ ุฃุดูุฑ ุ ุฃุทูููุง ูุดุฑูุนูุง ุงูุฌุฏูุฏ ุงูููุชูุญ ุงููุตุฏุฑ ุ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ Grafana ููุฑุงูุจุฉ kubernetes ุ ูุฏุนุง DevOpsProdigy KubeGraf ุ ุฅูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุบุฑุงูุงูุง: ูุตุฉ ุงูุฃููุงุน ุงููุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/474500/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุฌููุน!  ูุจู ุจุถุนุฉ ุฃุดูุฑ ุ ุฃุทูููุง ูุดุฑูุนูุง ุงูุฌุฏูุฏ ุงูููุชูุญ ุงููุตุฏุฑ ุ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ Grafana ููุฑุงูุจุฉ kubernetes ุ ูุฏุนุง <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DevOpsProdigy KubeGraf ุ ุฅูู ุงูุฅูุชุงุฌ</a></b> .  ุดูุฑุฉ ุงููุตุฏุฑ ูููููู ุงูุฅุถุงูู ูุชุงุญุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุณุชูุฏุน ุงูุนุงู ุนูู ุฌูุซุจ</a> .  ููู ูุฐู ุงูููุงูุฉ ุ ูุฑูุฏ ุฃู ูุดุงุฑููู ูุตุฉ ุญูู ููููุฉ ุฅูุดุงุก ุงููููู ุงูุฅุถุงูู ุ ูุงูุฃุฏูุงุช ุงูุชู ุงุณุชุฎุฏููุงูุง ูุงููุฎุงุทุฑ ุงูุชู ูุงุฌููุงูุง ุฃุซูุงุก ุนูููุฉ ุงูุชุทููุฑ.  ุฏุนูุง ูุฐูุจ! <br><a name="habracut"></a><br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 0 - ุชูููุฏู: ููู ูุตููุง ุฅูู ูุฐุงุ </h4><br>  ููุฏุช ููุฑุฉ ูุชุงุจุฉ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฏููุง ูุบุฑุงูุงู ุนู ุทุฑูู ุงูุตุฏูุฉ.  ุชุฑุงูุจ ุดุฑูุชูุง ูุดุงุฑูุน ุงูููุจ ุนูู ูุณุชููุงุช ูุฎุชููุฉ ูู ุงูุชุนููุฏ ูุฃูุซุฑ ูู 10 ุณููุงุช.  ุฎูุงู ูุฐุง ุงูููุช ุ ุงูุชุณุจูุง ุฎุจุฑุฉ ูุจูุฑุฉ ูุญุงูุงุช ูุซูุฑุฉ ููุงูุชูุงู ูุฎุจุฑุฉ ูู ุงุณุชุฎุฏุงู ุฃูุธูุฉ ุงููุฑุงูุจุฉ ุงููุฎุชููุฉ.  ููู ููุช ูุง ุณุฃููุง ุฃููุณูุง: "ูู ููุงู ุฃุฏุงุฉ ุณุญุฑูุฉ ูุฑุตุฏ Kubernetes ุจุญูุซ ุ ููุง ูููููู ุ" ุถุจุท ูููุณู "ุ .. ุจุฑููุณุชุงุฑุชุงุฑุช ูุฑุตุฏ K8s ุ ุจุงูุทุจุน ุ ูุงูุช ูุฌููุนุฉ ูู ุจุฑูููุซููุณ + ุบุฑุงูุงูุง.  ููุญููู ุฌุงูุฒุฉ ููุฐู ุงููุฌููุนุฉ ุ ููุงู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฃุฏูุงุช: ูุดุบู ุจุฑูููุซููุณ ุ ููุฌููุนุฉ ูู ููุญุงุช ุงููุนูููุงุช kubernetes-mixin ุ grafana-kubernetes-app. <br><br>  ูุจุฏู ุฃู ุงูููููู ุงูุฅุถุงูู grafana-kubernetes-app ูู ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุจุงููุณุจุฉ ููุง ุ ูููู ูู ูุชู ุฏุนูู ูุฃูุซุฑ ูู ุนุงู ุ ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ูุนุฑู ููููุฉ ุงูุชุนุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู ููุงููุณ ูุตุฏุฑ ุงูุนูุฏุฉ ู kube-state-metrics.  ููู ูุฑุญูุฉ ูุง ุ ูุฑุฑูุง: "ููู ุฃูุง ูุชุฎุฐ ูุฑุงุฑูุง ุงูุฎุงุตุ" <br><br>  ูุง ุงูุฃููุงุฑ ุงูุชู ูุฑุฑูุง ุชูููุฐูุง ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฏููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุตูุฑ "ุฎุฑูุทุฉ ุงูุชุทุจูู": ุนุฑุถ ููุงุณุจ ููุชุทุจููุงุช ูู ุงููุชูุฉ ุ ูุฌูุนุฉ ุญุณุจ ูุณุงุญุฉ ุงูุงุณู ุ ุงููุดุฑ ... ุ </li><li style=";text-align:right;direction:rtl">  ุชุตูุฑ ุงุชุตุงูุงุช ุงููููุฐุฌ "ุงููุดุฑ - ุงูุฎุฏูุฉ (+ ุงูููุงูุฐ)". </li><li style=";text-align:right;direction:rtl">  ุชุตูุฑ ูุชูุฒูุน ุชุทุจููุงุช ุงููุชูุฉ ุญุณุจ ุฅููุงุกุงุช ุงููุชูุฉ. </li><li style=";text-align:right;direction:rtl">  ุฌูุน ุงูููุงููุณ ูุงููุนูููุงุช ูู ุนุฏุฉ ูุตุงุฏุฑ: ุฎุงุฏู ุจุฑูููุซููุณ ู k8s api. </li><li style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ ูู ูู ุฌุฒุก ุงูุจููุฉ ุงูุชุญุชูุฉ (ุงุณุชุฎุฏุงู ููุช ุงููุนุงูุฌ ุ ูุงูุฐุงูุฑุฉ ุ ูุงููุธุงู ุงููุฑุนู ูููุฑุต ุ ูุงูุดุจูุฉ) ุ ูููุทู ุงูุชุทุจูู - ูุฑูู ุงูุญุงูุฉ ุงูุตุญูุฉ ุ ูุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุชุงุญุฉ ุ ููุนูููุงุช ุญูู ูุฑูุฑ ุนููุงุช ุงูุตูุงุญูุฉ / ุงูุงุณุชุนุฏุงุฏ. </li></ul><br>
<h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 1: ูุง ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุบุฑุงูุงูุงุ </h4><br>  ูู ุงููุงุญูุฉ ุงููููุฉ ุ ูุฅู ุงููููู ุงูุฅุถุงูู ูู Grafana ูู ูุญุฏุฉ ุชุญูู ุฒุงููุฉ ูุชู ุชุฎุฒูููุง ูู ุฏููู ุจูุงูุงุช <i>Grafana</i> ( <i>/var/grafana/plugins/&lt;your_plugin_name&gt;/dist/module.js</i> ) ููููู ุชุญููููุง ููุญุฏุฉ ููุทูุฉ SystemJS.  ุฃูุถูุง ูู ูุฐุง ุงูุฏููู ุ ูุฌุจ ุฃู ูููู ููู plugin.json ูุญุชูู ุนูู ุฌููุน ุงููุนูููุงุช ุงููุตููุฉ ุญูู ุงููููู ุงูุฅุถุงูู ุงูุฎุงุต ุจู: ุงูุงุณู ุ ุงูุฅุตุฏุงุฑ ุ ููุน ุงููููู ุงูุฅุถุงูู ุ ุงุฑุชุจุงุทุงุช ุฅูู ุงููุณุชูุฏุน / ุงููููุน / ุงูุชุฑุฎูุต ุ ุงูุชุจุนูุงุช ุ ููุง ุฅูู ุฐูู. <br><br><img src="https://habrastorage.org/webt/ln/rz/kf/lnrzkf9mc6n6xcyn6iciuvak6cy.png"><br>  <i>module.ts</i> <br><br><img src="https://habrastorage.org/webt/lf/mk/3x/lfmk3xekikfm-p0y-donjv3rvw4.png"><br>  <i>plugin.json</i> <br><br>  ููุง ุชุฑู ูู ููุทุฉ ุงูุดุงุดุฉ ุ ุญุฏุฏูุง plugin.type = ุงูุชุทุจูู.  ููููููุงุช ุงูุฅุถุงููุฉ ูู Grafana ูููู ุฃู ุชููู ูู ุซูุงุซุฉ ุฃููุงุน: <br><br>  <b>ุงูููุญุฉ</b> : ุฃูุซุฑ ุฃููุงุน ุงูููููุงุช ุดููุนูุง - ุฅููุง ููุญุฉ ูุชุตูุฑ ุฃู ููุงููุณ ุ ููุชู ุงุณุชุฎุฏุงููุง ูุฅูุดุงุก ููุญุงุช ูุนูููุงุช ูุฎุชููุฉ. <br>  <b>ูุตุฏุฑ ุงูุจูุงูุงุช</b> : ููุตู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฃู ูุตุฏุฑ ุจูุงูุงุช (ุนูู ุณุจูู ุงููุซุงู ุ ูุตุฏุฑ ุจูุงูุงุช Prometheus ุ ูุตุฏุฑ ุจูุงูุงุช ClickHouse ุ ูุตุฏุฑ ุจูุงูุงุช ุงูุจุญุซ ุงููุฑู). <br>  <b>ุงูุชุทุจูู</b> : ูููู ุฅุถุงูู ูุณูุญ ูู ุจุฅูุดุงุก ุชุทุจูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงูุฎุงุต ุจู ุฏุงุฎู Grafana ุ ูุฅูุดุงุก ุตูุญุงุช html ุงูุฎุงุตุฉ ุจู ูุงููุตูู ูุฏูููุง ุฅูู ูุตุฏุฑ ุงูุจูุงูุงุช ูุชุตูุฑ ุงูุจูุงูุงุช ุงููุฎุชููุฉ.  ุฃูุถูุง ุ ูููู ุงุณุชุฎุฏุงู ุงูููููุงุช ุงูุฅุถุงููุฉ ูู ุงูุฃููุงุน ุงูุฃุฎุฑู (ูุตุฏุฑ ุงูุจูุงูุงุช ูุงูููุญุฉ) ูููุญุงุช ุงููุนูููุงุช ุงููุฎุชููุฉ ูุชุจุนูุฉ. <br><br><img src="https://habrastorage.org/webt/x_/f-/3x/x_f-3x9bj18pz5zfvmx2yzg-9gg.png"><br>  <i>ูุซุงู ุนูู ุชุจุนูุงุช ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุน type = app</i> . <br><br>  ููุบุฉ ุจุฑูุฌุฉ ุ ููููู ุงุณุชุฎุฏุงู ูู ูู JavaScript ู TypeScript (ุงุฎุชุฑูุงูุง).  ููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนุซูุฑ ุนูู</a> ุงููุฑุงุบุงุช ููููููุงุช ุงูุฅุถุงููุฉ ูู hello-world ูู ุฃู ููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> : ูู ูุฐุง ุงููุณุชูุฏุน ููุฌุฏ ุนุฏุฏ ูุจูุฑ ูู ุญุฒู ุงูุจุฏุงูุฉ (ููุฌุฏ ุญุชู ูุซุงู ุชุฌุฑูุจู ููููููู ุงูุฅุถุงูู ุนูู React) ูุน ููุดุฆูู ููุซุจุชูู ูุณุจููุง ููููููููููู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 2: ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุงููุญููุฉ ุงูุฎุงุตุฉ ุจู </h4><br>  ููุนูู ุนูู ุงูููููู ุงูุฅุถุงูู ุ ูุญุชุงุฌ ุจุดูู ุทุจูุนู ุฅูู ูุฌููุนุฉ kubernetes ูุน ุฌููุน ุงูุฃุฏูุงุช ุงููุซุจุชุฉ ูุณุจููุง: ุจุฑูููุซููุณ ุ ูุตุฏุฑ ุงูุนูุฏุฉ ุ ููุงููุณ ุญุงูุฉ ุงูููุนุจุงุช ุ grafana.  ูุฌุจ ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุจุณุฑุนุฉ ูุณูููุฉ ูุจุทุฑููุฉ ุทุจูุนูุฉ ุ ููุชูููุฑ ุจูุงูุงุช ุฅุนุงุฏุฉ ุงูุชุญููู ุงูุณุฑูุนุฉ ุ ูุฌุจ ุชุซุจูุช ุฏููู Grafana ูุจุงุดุฑุฉ ูู ุฌูุงุฒ ุงููุทูุฑ. <br><br>  ุงูุทุฑููุฉ ุงูุฃูุซุฑ ููุงุกูุฉ ุ ูู ุฑุฃููุง ุ ููุนูู ูุญููุงู ูุน kubernetes ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">minikube</a> .  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅูุดุงุก ุญุฒูุฉ Prometheus + Grafana ุจุงุณุชุฎุฏุงู ูุดุบู prometheus.  ุชูุงุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐู ุงูููุงูุฉ</a> ุนูููุฉ ุชุซุจูุช prometheus- ุงููุดุบู ุนูู minikube.  ูุชูููู ุงูุซุจุงุช ุ ูุฌุจ ุนููู ุชุนููู <i>ุงูุซุจุงุช:</i> ุงููุนููุฉ <i>ุงูุญููููุฉ</i> ูู ููู ุงููุฎุทุทุงุช / grafana / values.yaml ุ ูู ุจุฅุถุงูุฉ PV ู PVC ุงูุฎุงุต ุจู ูุญุฏุฏููุง ูู ุงููุนููุฉ persistence.existingClaim <br><br>  ุงูุจุฑูุงูุฌ ุงููุตู ุงูููุงุฆู ูุฅุทูุงู minikube ูุจุฏู ูุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">minikube start --kubernetes-version=v1.13.4 --memory=4096 --bootstrapper=kubeadm --extra-config=scheduler.address=0.0.0.0 --extra-config=controller-manager.address=0.0.0.0 minikube mount /home/sergeisporyshev/Projects/Grafana:/var/grafana --gid=472 --uid=472 --9p-version=9p2000.L</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 3: ุงูุชูููุฉ ููุณูุง </h4><br>  <b>ูููุฐุฌ ุงููุงุฆู</b> <br><br>  ุงุณุชุนุฏุงุฏูุง ูุชูููุฐ ุงูููููู ุงูุฅุถุงูู ุ ูุฑุฑูุง ูุตู ุฌููุน ููุงูุงุช Kubernetes ุงูุฃุณุงุณูุฉ ุงูุชู ุณูุนูู ูุนูุง ููุฆุงุช TypeScript: pod ุ ูุงููุดุฑ ุ daemonset ุ statefulset ุ job ุ cronjob ุ service ุ node ุ space names.  ูุฑุซ ูู ูู ูุฐู ุงููุฆุงุช ูู ูุฆุฉ BaseModel ุงูุดุงุฆุนุฉ ุ ูุงูุชู ุชุตู ุงูููุดุฆ ุ ุงููุฏูุฑ ุ ุทุฑู ุชุญุฏูุซ ูุชุจุฏูู ุงูุฑุคูุฉ.  ูุตู ูู ูุฆุฉ ูู ุงููุฆุงุช ุงูุนูุงูุงุช ุงููุชุฏุงุฎูุฉ ูุน ุงูููุงูุงุช ุงูุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุงุฆูุฉ ุจุงููุฑูู ุงูุฎุงุตุฉ ุจููุงู ูุดุฑ ุงูููุน. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import {Pod} from "./pod"; import {Service} from "./service"; import {BaseModel} from './traits/baseModel'; export class Deployment extends BaseModel{ pods: Array&lt;Pod&gt;; services: Array&lt;Service&gt;; constructor(data: any){ super(data); this.pods = []; this.services = []; } }</code> </pre> <br>  ุจุงุณุชุฎุฏุงู getters ู setters ุ ูููููุง ุนุฑุถ ุฃู ุชุนููู ููุงููุณ ุงูููุงูุงุช ุงูุชู ูุญุชุงุฌูุง ุจุทุฑููุฉ ูุฑูุญุฉ ูุณููุฉ ุงููุฑุงุกุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฅุฎุฑุงุฌ ุงูููุณู ูู ุฅููุงุกุงุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุงุจูุฉ ููุชุฎุตูุต: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">get cpuAllocatableFormatted(){ let cpu = this.data.status.allocatable.cpu; if(cpu.indexOf('m') &gt; -1){ cpu = parseInt(cpu)/1000; } return cpu; }</code> </pre> <br>  <b>ุตูุญุงุช</b> <br><br>  ูุชู ูุตู ูุงุฆูุฉ ุจุฌููุน ุตูุญุงุช ุงููููู ุงูุฅุถุงูู ูุฏููุง ูู ุงูุจุฏุงูุฉ ูู pluing.json ูู ูุณู ุงูุชุจุนูุฉ: <br><br><img src="https://habrastorage.org/webt/vs/ij/b_/vsijb_avnlpat0ukzzgikcgmh4m.png"><br><br>  ูู ูุชูุฉ ูู ุตูุญุฉ ุ ูุฌุจ ุงูุฅุดุงุฑุฉ ุฅูู PAGE TITLE (ุณูุชู ุชุญููููุง ุจุนุฏ ุฐูู ุฅูู ุณุจููุฉ ุ ูุงูุชู ุณุชุชููุฑ ุจูุง ูุฐู ุงูุตูุญุฉ) ุ  ุงุณู ุงููููู ุงููุณุคูู ุนู ุชุดุบูู ูุฐู ุงูุตูุญุฉ (ูุชู ุชุตุฏูุฑ ูุงุฆูุฉ ุงูููููุงุช ุฅูู module.ts) ุ  ุชุญุฏูุฏ ุฏูุฑ ุงููุณุชุฎุฏู ุงูุฐู ูุชููุฑ ูู ุงููุตูู ุฅูู ูุฐู ุงูุตูุญุฉ ูุฅุนุฏุงุฏุงุช ุงูุชููู ููุดุฑูุท ุงูุฌุงูุจู. <br><br>  ูู ุงููููู ุงููุณุคูู ุนู ุชุดุบูู ุงูุตูุญุฉ ุ ูุฌุจ ุนูููุง ุชุซุจูุช templateUrl ุ ูุชูุฑูุฑ ุงููุณุงุฑ ุฅูู ููู html ูุน ุงูุชุฑููุฒ.  ุฏุงุฎู ูุญุฏุฉ ุงูุชุญูู ุ ูู ุฎูุงู ุญูู ุงูุชุจุนูุฉ ุ ูููููุง ุงููุตูู ุฅูู ุฎุฏูุงุช ุงูุฒุงูู ุงููุงูุฉ ุงุซููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  backendSrv - ุฎุฏูุฉ ุชููุฑ ุงูุชูุงุนู ูุน ุฎุงุฏู grafana api </li><li style=";text-align:right;direction:rtl">  datasourceSrv - ุฎุฏูุฉ ุชููุฑ ุชูุงุนููุง ูุญูููุง ูุน ูู ูุตุฏุฑ ุงูุจูุงูุงุช ุงููุซุจุช ูู Grafana (ุนูู ุณุจูู ุงููุซุงู ุ ุทุฑููุฉ .getAll () - ุชูุฑุฌุน ูุงุฆูุฉ ุจุฌููุน ูุตุงุฏุฑ ุงูุจูุงูุงุช ุงููุซุจุชุฉ ุ .get (&lt;name&gt;) - ุชูุฑุฌุน ูุงุฆู ูุซูู ููุตุฏุฑ ุจูุงูุงุช ูุนูู. </li></ul><br><img src="https://habrastorage.org/webt/hd/ss/w8/hdssw8bsserz_p6ffzvuq49xbxs.png"><br><br><img src="https://habrastorage.org/webt/ps/we/ke/pswekesfljdpxjyedl4loxyuu_4.png"><br><br><img src="https://habrastorage.org/webt/aw/hv/ks/awhvksak5uamftrs_kwvbxdo71k.png"><br><br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 4: ูุตุฏุฑ ุงูุจูุงูุงุช </h4><br>  ูู ูุฌูุฉ ูุธุฑ Grafana ุ ูุนุฏ ูุตุฏุฑ ุงูุจูุงูุงุช ูู ููุณ ุงููููู ุงูุฅุถุงูู ุชูุงููุง ูุซู ุฃู ุดุฎุต ุขุฎุฑ: ููู ูุญุชูู ุนูู ุงููุญุฏุฉ ุงูููุทูุฉ ูููุทุฉ ุงูุฏุฎูู ุงูุฎุงุตุฉ ุจู ุ ูููุฌุฏ ููู ุจู plugin.json.  ุนูุฏ ุชุทููุฑ ูููู ุฅุถุงูู ุจุงุณุชุฎุฏุงู type = app ุ ูููููุง ุงูุชูุงุนู ูุน ูุตุฏุฑ ุจูุงูุงุช ููุฌูุฏ (ุนูู ุณุจูู ุงููุซุงู ุ ูุตุฏุฑ ุงูุจูุงูุงุช ุ prometheus-datasource) ุ ููุฐูู ุงูุฎุงุต ุจูุง ุ ูุงูุฐู ูููููุง ุชุฎุฒููู ูุจุงุดุฑุฉ ูู ุฏููู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ (dist / datasource / *) ุฃู ุชุนูููู ูุฌูุฉ ุชุจุนูุฉ.  ูู ุญุงูุชูุง ุ ูุฃุชู ูุตุฏุฑ ุงูุจูุงูุงุช ุจุฑูุฒ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ.  ูู ุงูุถุฑูุฑู ุฃูุถูุง ุงูุชูุงู ูุงูุจ config.html ููุญุฏุฉ ุงูุชุญูู ConfigCtrl ุงูุชู ุณูุชู ุงุณุชุฎุฏุงููุง ูุตูุญุฉ ุงูุชูููู ุงูุฎุงุตุฉ ุจูุซูู ูุตุฏุฑ ุงูุจูุงูุงุช ููุญุฏุฉ ุงูุชุญูู Datasource ุ ูุงูุชู ุชููุฐ ููุทู ูุตุฏุฑ ุจูุงูุงุชู. <br><br>  ูู ุงูููููู ุงูุฅุถุงูู KubeGraf ุ ูู ูุฌูุฉ ูุธุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูุนุฏ ูุตุฏุฑ ุงูุจูุงูุงุช ูุซุงููุง ุนูู ูุฌููุนุฉ kubernetes ุงูุชู ูุชู ูููุง ุชุทุจูู ุงูููุฒุงุช ุงูุชุงููุฉ (ูุชููุฑ ุงูููุฏ ุงููุตุฏุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุณุจ ุงููุฑุฌุน</a> ): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌูุน ุงูุจูุงูุงุช ูู k8s api-server (ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจูุณุงุญุงุช ุงูุฃุณูุงุก ุ ููุดุฑ'ุฃู ...) </li><li style=";text-align:right;direction:rtl">  ุทูุจุงุช ุงูุจุฑููุณู ูู ูุตุฏุฑ ุงูุจูุงูุงุช (prometheus-datasource) (ุงููุญุฏุฏ ูู ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ููู ูุฌููุนุฉ ูุญุฏุฏุฉ) ูุชูุณูู ุงูุงุณุชุฌุงุจุงุช ูุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ูู ูู ุงูุตูุญุงุช ุงูุซุงุจุชุฉ ูููุญุงุช ุงููุนูููุงุช. </li><li style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ุงูุจูุงูุงุช ุนูู ุงูุตูุญุงุช ุงูุซุงุจุชุฉ ูููููู ุงูุฅุถุงูู (ูุน ูุฌููุนุฉ ูุนุฏู ุงูุชุญุฏูุซ). </li><li style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ุทูุจุงุช ุฅูุดุงุก ูุงุฆูุฉ ููุงูุจ ูู grafana-dashboards (.metriFindQuery () ุทุฑููุฉ) </li></ul><br><img src="https://habrastorage.org/webt/m0/dp/eg/m0dpeghprcomipkozpjqmwle888.png"><br><br><img src="https://habrastorage.org/webt/kg/il/f5/kgilf58m2_urrtf9ad9cbdqoiby.png"><br><br><img src="https://habrastorage.org/webt/zh/em/xa/zhemxa8z6uu7mf6tflfbzqbuf-m.png"><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ูุน ูุชูุฉ k8s ุงูููุงุฆู. </li></ul><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">testDatasource(){ let url = '/api/v1/namespaces'; let _url = this.url; if(this.accessViaToken) _url += '/__proxy'; _url += url; return this.backendSrv.datasourceRequest({ url: _url, method: "GET", headers: {"Content-Type": 'application/json'} }) .then(response =&gt; { if (response.status === 200) { return {status: "success", message: "Data source is OK", title: "Success"}; }else{ return {status: "error", message: "Data source is not OK", title: "Error"}; } }, error =&gt; { return {status: "error", message: "Data source is not OK", title: "Error"}; }) }</code> </pre> <br>  ููุงู ููุทุฉ ูุซูุฑุฉ ููุงูุชูุงู ูููุตูุฉ ุ ูู ุฑุฃููุง ุ ูู ุชูููุฐ ุขููุฉ ุงูุชูุซูู ูุงูุชุฑุฎูุต ููุตุฏุฑ ุงูุจูุงูุงุช.  ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุฎุงุฑุฌ ุงูุตูุฏูู ูุชูููู ุงููุตูู ุฅูู ูุตุฏุฑ ุงูุจูุงูุงุช ุงูููุงุฆู ุ ูููููุง ุงุณุชุฎุฏุงู ูููู Grafana ุงููุฏูุฌ - datasourceHttpSettings.  ุจุงุณุชุฎุฏุงู ูุฐุง ุงููููู ุ ูููููุง ุชููุฆุฉ ุงููุตูู ุฅูู ูุตุฏุฑ ุจูุงูุงุช http ุนู ุทุฑูู ุชุญุฏูุฏ ุนููุงู url ูุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ / ุงูุชุฎููู ุงูุฃุณุงุณูุฉ: ุชุณุฌูู ุงูุฏุฎูู - ูููุฉ ุงููุฑูุฑ ุ ุฃู client-cert / client - key.  ูู ุฃุฌู ุฅุฏุฑุงู ุงููุฏุฑุฉ ุนูู ุชูููู ุงููุตูู ุจุงุณุชุฎุฏุงู ุงูุฑูุฒ ุงููููุฒ ูุญุงูู (ูู ุงููุงูุน ุงููุนูุงุฑ ู k8s) ุ ูุงู ุนูู ุฃู ุฃูุนู ููููุงู "ุงูููููุงุฆูุฉ". <br><br>  ูุญู ูุฐู ุงููุดููุฉ ุ ููููู ุงุณุชุฎุฏุงู ุขููุฉ "ูุณุงุฑุงุช ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ" ุงููุถููุฉ ูู Grafana (ุงููุฒูุฏ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุตูุญุฉ ุงููุซุงุฆู ุงูุฑุณููุฉ</a> ).  ูู ุฅุนุฏุงุฏุงุช ูุตุฏุฑ ุงูุจูุงูุงุช ุงูุฎุงุต ุจูุง ุ ูููููุง ุงูุฅุนูุงู ุนู ูุฌููุนุฉ ูู ููุงุนุฏ ุงูุชูุฌูู ุงูุชู ุณูุชู ูุนุงูุฌุชูุง ุจูุงุณุทุฉ ุฎุงุฏู ุงููููู grafana.  ุนูู ุณุจูู ุงููุซุงู ุ ููู ููุทุฉ ููุงูุฉ ูููุฑุฏุฉ ุ ููุงู ุฅููุงููุฉ ูุชุถููู ุงูุฑุคูุณ ุฃู ุนูุงููู url ูุน ุงููุฏุฑุฉ ุนูู ุงููุงูุจ ุ ุญูุซ ูููู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุญููู jsonData ู secureJsonData (ูุชุฎุฒูู ูููุงุช ุงููุฑูุฑ ุฃู ุงูุฑููุฒ ุงููููุฒุฉ ูู ูููุฐุฌ ูุดูุฑ).  ูู ุงููุซุงู ุงูุฎุงุต ุจูุง ุ ุณูุชู ุฅุฑุณุงู ุทูุจุงุช ุงููููุฐุฌ <i>/ __ proxy / api / v1 / ูุณุงุญุงุช ุงูุฃุณูุงุก</i> ุฅูู ุนููุงู url ูููููุฐุฌ <br>  &lt;your_k8s_api_url&gt; / api / v1 / ูุณุงุญุงุช ุงูุฃุณูุงุก ูุน ุงูุชุฎููู: Bearer header. <br><br><img src="https://habrastorage.org/webt/ht/xt/nm/htxtnmm0hw6xg0wutfdr11kx1a4.png"><br><br><img src="https://habrastorage.org/webt/mj/z8/ra/mjz8razkuln7puiqzwuplxhfqc4.png"><br><br>  ุจุทุจูุนุฉ ุงูุญุงู ุ ููุนูู ูุน k8s api-server ุ ูุญุชุงุฌ ุฅูู ูุณุชุฎุฏู ูุฏูู ุฅููุงููุฉ ูุตูู ูููุฑุงุกุฉ ููุท ุ ููู ุจูุงู ุงูุฅูุดุงุก ุงูุฐู ููููู ุงูุนุซูุฑ ุนููู ุฃูุถูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุฏ ุงููุตุฏุฑู</a> ูููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฅุถุงูู</a> . <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 5: ุงูุงูุฑุงุฌ </h4><br><img src="https://habrastorage.org/webt/wx/hb/bl/wxhbbl4dw6dszbcic1hhe9g5pte.jpeg"><br><br>  ุจุนุฏ ุฃู ุชูุชุจ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุงูุฎุงุต ุจู ุนู Grafana ุ ุณุชุญุชุงุฌ ุจุทุจูุนุฉ ุงูุญุงู ุฅูู ูุถุนู ูู ุงููุฌุงู ุงูุนุงู.  Grafana ูู ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููููุงุช ุงูุฅุถุงููุฉ</a> ุงููุชุงุญุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">grafana.com/grafana/plugins</a> <br><br>  ูู ุฃุฌู ุฅุชุงุญุฉ ุงููููู ุงูุฅุถุงูู ุงูุฎุงุต ุจู ูู ุงููุชุฌุฑ ุงูุฑุณูู ุ ููุฒูู ุฅุฌุฑุงุก ุงูุนูุงูุงุช ุงูุนุงูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐุง ุงููุณุชูุฏุน</a> ุนู ุทุฑูู ุฅุถุงูุฉ ุงููุญุชููุงุช ุงูุชุงููุฉ ุฅูู ููู repo.json: <br><br><img src="https://habrastorage.org/webt/bk/cf/nt/bkcfntnwmmnx8scgebsbtxpgjfk.png"><br><br>  ุญูุซ ูููู ุงูุฅุตุฏุงุฑ ูู ุฅุตุฏุงุฑ ุงููููู ุงูุฅุถุงูู ุงูุฎุงุต ุจู ุ ูุฅู url ูู ุฑุงุจุท ูููุณุชูุฏุน ุ ูุงูุงูุชุฒุงู ูู ุชุฌุฒุฆุฉ ููุงูุชุฒุงู ุ ุญูุซ ูุชููุฑ ุฅุตุฏุงุฑ ูุญุฏุฏ ูู ุงููููู ุงูุฅุถุงูู. <br><br>  ูุนูุฏ ุงูุฎุฑูุฌ ุณุชุฑู ุตูุฑุฉ ุฑุงุฆุนุฉ ูููููุฐุฌ: <br><br><img src="https://habrastorage.org/webt/j3/cb/ul/j3cbulols6yx4buc_ysgd9qffdo.png"><br><br>  ุณูุชู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุง ุชููุงุฆููุง ูู Readme.md ู Changelog.md ูููู plugin.json ูุน ูุตู ุงููููู ุงูุฅุถุงูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 6: ุจุฏูุง ูู ุงูุงุณุชูุชุงุฌุงุช </h4><br>  ูู ูุชููู ุนู ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฏููุง ุจุนุฏ ุงูุฅุตุฏุงุฑ.  ูุงูุขู ูุญู ูุนูู ุนูู ุงูุฑุตุฏ ุงูุตุญูุญ ูุงุณุชุฎุฏุงู ููุงุฑุฏ ุงูุนูุฏ ุงูุนูููุฏูุฉ ุ ูุฅุฏุฎุงู ููุฒุงุช ุฌุฏูุฏุฉ ูุฒูุงุฏุฉ UX ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฌูุน ูุฏุฑ ูุจูุฑ ูู ุงูููุงุญุธุงุช ุงููุงุฑุฏุฉ ุจุนุฏ ุชุซุจูุช ุงููููู ุงูุฅุถุงูู ูู ูุจู ุนููุงุฆูุง ููู ishui ุนูู github (ุฅุฐุง ุชุฑูุช ูุดููุชู ุฃู ุทูุจ ุงูุณุญุจ ุ ูุฃูุง ุณุฃููู ุณุนูุฏุง ุฌุฏุง :-)). <br><br>  ูุฃูู ุฃู ุชุณุงุนุฏู ูุฐู ุงูููุงูุฉ ูู ููู ูุฐู ุงูุฃุฏุงุฉ ุงูุฑุงุฆุนุฉ ูุซู Grafana ุ ูุฑุจูุง ูุชุงุจุฉ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุงูุฎุงุต ุจู. <br><br>  ุดูุฑุง ูู!) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar474500/">https://habr.com/ru/post/ar474500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar474490/index.html">ููุฏ ุญุงู ุงูููุช: ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุดุงูุทุฉ ุงูุฃูููุฉ ูู Coclean</a></li>
<li><a href="../ar474492/index.html">ุงูุฑุฏ ุนูู ุฏุฑุฏุดุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฎุฏููู ูุน Chatix ุงูุฎูููุฉ</a></li>
<li><a href="../ar474494/index.html">ููู ูุงูุช ููุฉ Zabbix 2019</a></li>
<li><a href="../ar474496/index.html">ููุงุนุฏ ุงูุจูุงูุงุช ุนูู HighLoad ++ 2019</a></li>
<li><a href="../ar474498/index.html">JavaFX ุงูุจุฑูุงูุฌ ุงูุชุนูููู: ูุฑุญุจุง ุงูุนุงูู</a></li>
<li><a href="../ar474502/index.html">ุชุญููู Odnoklassniki ูู Joker 2019</a></li>
<li><a href="../ar474504/index.html">ุงูุฎูููุฉ ุงูุฃุฑุซูุฐูุณูุฉ</a></li>
<li><a href="../ar474508/index.html">ุฅูุฌุงุฒุงุช 3D ุงูุทุจุงุนุฉ ุงูุญูููุฉ ูู ุชุฑููุน ุงูุฌูุฏ</a></li>
<li><a href="../ar474514/index.html">ููู ุงูุตูููุฉ ุงูุชุนุฏูู ุจูุชูููู ุงูุชุนุฏูู ุงูุจูุงุก ุนูู ููุฏ ุงูุญูุงุฉ</a></li>
<li><a href="../ar474516/index.html">ุงูุชุทุจููุงุช ุงูุตูุชูุฉ: ุงูุณูู ุงููููุงุฑ ุงูุชู ูุง ุชูุงุญุธูุง ุฑูุณูุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>