<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👴🏻 🐲 ㊙️ FLProg - Integrasi independen ke dalam program pengontrol khusus 👩🏻‍🏭 👨🏼‍🌾 ✊🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Untuk waktu yang lama proyek FLProg belum tercakup di Habré. Ini karena kurangnya waktu untuk menulis artikel, dan bahkan masalah pribadi saya sendiri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FLProg - Integrasi independen ke dalam program pengontrol khusus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467007/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/m4/sc/xc/m4scxccdteuasxjzm_whvn1bs9q.png"></div><br>  Untuk waktu yang lama proyek FLProg belum tercakup di Habré.  Ini karena kurangnya waktu untuk menulis artikel, dan bahkan masalah pribadi saya sendiri.  Tetapi proyek ini tidak mati, ia hidup dan berkembang.  Rata-rata sebulan sekali, versi program berikutnya dirilis.  Sejak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">publikasi terakhir</a> , rendering skema telah sepenuhnya diulang (berkat ini, jalur dihapuskan selama rendering), sistem Referensi Silang untuk proyek, dan sistem analisis proyek untuk kesalahan diperkenalkan.  Kode program itu sendiri dipindahkan ke versi bahasa pemrograman yang lebih baru.  Karena ini, di sisi positif (dari sudut pandang saya, tentu saja, baik, pengguna mendukung saya), antarmuka program telah berubah.  Banyak blok menarik telah ditambahkan.  Skema skema yang diterapkan dan memblokir pencarian. <br><a name="habracut"></a><br>  Tapi tetap saja, masalah utama dari proyek ini tetap bahwa pengembang program adalah satu orang (ini saya), dan jumlah papan pengontrol, sensor, sensor, kartu ekspansi yang berbeda yang diproduksi oleh orang Cina dan baru-baru ini oleh pabrikan kami terus bertambah.  Dan pengguna ingin mencobanya, atau menggunakannya dalam proyek mereka.  Untuk perangkat periferal, pada satu waktu, masalah ini kurang lebih diselesaikan oleh saya dengan bantuan membuat editor blok khusus.  Langkah ini, seperti yang mereka katakan, "tembak", dan sekarang, hampir di sebagian besar papan periferal yang ada, di Internet, atau di forum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">program</a> , Anda dapat menemukan blok pengguna yang sesuai.  Ya, atau di forum yang sama (atau dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kelompok di Vkontakte</a> ) minta guru setempat untuk menulis satu.  Biasanya Anda bisa setuju. <br><br>  Sekarang saatnya untuk menyelesaikan masalah kedua - ini adalah papan pengontrol. <br><br>  Baru-baru ini, versi beta dari program dengan angka 6.0 dirilis.  Dalam versi ini, editor untuk deskripsi pengguna dari pengendali diimplementasikan.  Seperti blok khusus, deskripsi dapat dikelompokkan ke dalam perpustakaan, disimpan sebagai deskripsi terpisah serta seluruh perpustakaan sebagai file, dan dibagikan. <br><br>  Dengan posting ini, saya memulai serangkaian setidaknya dua posting di mana kami akan mempertimbangkan bagaimana menggunakan editor ini.  Pada artikel pertama, dengan izin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">shiotiny,</a> saya akan mencoba menggambarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">papan ShIoTiny-nya.</a>  Pada artikel kedua, kita akan mencoba untuk membuat analog dari pengontrol industri nyata, dan menggambarkannya. <br><br>  Jadi mari kita mulai. <br><br>  Buka program FLProg.  Di menu "Tools", pilih "Controller Custom Descriptions Editor". <br><br><img src="https://habrastorage.org/webt/x-/ut/xg/x-utxgu-j-yc6o4bxbij3ortuye.png"><br><br>  Jendela editor deskripsi terbuka. <br><br>  Deskripsi khusus dapat dikombinasikan di perpustakaan dengan kedalaman bersarang.  Karena itu, pertama-tama kita membuat pustaka deskripsi. <br><br><img src="https://habrastorage.org/webt/io/kh/cs/iokhcsgn0qt_kgc6zvf4nhmi8a4.png"><br><br>  Tetapkan nama perpustakaan. <br><br><img src="https://habrastorage.org/webt/ir/l1/bd/irl1bdlbht21as-bsinayisfuzi.png"><br><br>  Setelah itu kita akan membuat deskripsi controller di library. <br><br><img src="https://habrastorage.org/webt/er/fr/60/erfr60lyicwjbbppzgshkypj6ha.png"><br><br>  Dan beri dia nama: <br><br><img src="https://habrastorage.org/webt/zr/vw/of/zrvwofrlxkqwswrwq149hkmxlti.png"><br><br>  Saat membuat deskripsi pengontrol, kami segera membuka cabang parameter umum. <br><br><img src="https://habrastorage.org/webt/t7/u1/ct/t7u1ct8h0myo9vxvfjtapl58vpe.png"><br><br>  Di sini kita dapat mengubah nama, mengatur jenis CPU, mengatur ukuran EEPROM, mengubah nomor versi deskripsi. <br><br>  Karena papan ShloTiny didasarkan pada pengontrol ESP8266, kami memilihnya.  Saat memilih pengontrol, volume EEPROM yang sesuai secara otomatis ditempelkan.  Jika perlu, nilai ini dapat diubah.  Nomor versi default untuk deskripsi baru diatur ke 1. <br><br>  Di masa mendatang, saat mengubah deskripsi yang ada, disarankan untuk mengubahnya ke atas.  Saat menggunakan deskripsi ini dalam proyek, program akan membandingkan versi deskripsi di proyek dan di perpustakaan.  Jika nomor versi deskripsi di pustaka lebih besar daripada di proyek, item untuk memperbarui deskripsi di program muncul di menu "Proyek" program.  Jika sebaliknya, maka suatu item akan muncul untuk memperbarui deskripsi di perpustakaan.  Nah, jika deskripsi pengontrol yang digunakan dalam proyek tidak ditemukan di perpustakaan sama sekali, item untuk memasukkan deskripsi dari proyek ke perpustakaan akan muncul di menu yang sama. <br><br>  Juga di utas ini, Anda dapat menulis deskripsi teks dari pengontrol yang membantu pemilihannya. <br><br>  Untuk menerapkan perubahan yang dibuat sebelum mengubah ke cabang lain dari parameter pengontrol, klik tombol "Terapkan".  Jika ini tidak dilakukan, perubahan tidak akan disimpan. <br><br>  Sekarang perhatikan diagram sirkuit papan ShloTiny. <br><br><img src="https://habrastorage.org/webt/lq/wt/de/lqwtdebl8ssogd2rvcvvxbz9rd0.png"><br><br>  Papan memiliki tiga input digital, tiga output digital, input analog, dan input untuk sensor.  Sebanyak delapan kesimpulan dewan. <br><br>  Di editor, buka cabang "Pengendali kesimpulan" dan atur jumlah kesimpulan, jangan lupa klik tombol "Terapkan" setelah itu. <br><br><img src="https://habrastorage.org/webt/ls/wl/lb/lswllbh_hqil-hof8ydl6z7vn9y.png"><br><br>  Program ini akan menghasilkan jumlah kesimpulan yang diperlukan.  Kami lolos ke yang pertama dari mereka. <br><br><img src="https://habrastorage.org/webt/4u/d9/ha/4ud9habaghl5ioujfwby0a-08tc.png"><br><br>  Di cabang ini, Anda dapat menentukan nama output alternatif, yang akan ditampilkan dalam program.  Jika tidak ada, program akan menampilkan PinN di mana N adalah nomor pin dalam daftar pin.  Saya sarankan Anda menulis prasasti di papan tulis di bidang nama alternatif.  Ini akan membuatnya lebih mudah untuk memahami kesimpulan apa yang sedang ditarik.  Untuk papan yang dijelaskan, kita akan meletakkan nilai Input1 sesuai dengan diagram sirkuit.  Jadi di utas ini, Anda dapat menulis deskripsi satu per satu dari keluaran, misalnya, untuk menunjukkan fitur penerapannya.  Jika perlu, Anda juga dapat menentukan alias untuk output, yang akan ditampilkan dalam program dalam tanda kurung setelah nama output. <br><br>  Setelah melakukan perubahan, jangan lupa klik tombol "Terapkan".  Dengan prinsip yang sama, mari kita sebut kesimpulan yang tersisa. <br><br><img src="https://habrastorage.org/webt/bp/y6/1u/bpy61u53hnwuttwg6s4ttl7kq2y.png"><br><br>  Di cabang yang sama dari parameter output utama, fungsi yang dilakukannya ditambahkan ke dalamnya. <br><br><img src="https://habrastorage.org/webt/ks/ol/vt/ksolvtqefuyugg0s1aven_efhps.png"><br><br>  Fungsi-fungsi berikut dapat ditetapkan untuk setiap pin. <br><br><img src="https://habrastorage.org/webt/y8/04/cd/y804cdepj9pr9qgnji3h9ffan38.png"><br><br><ul><li>  I2C adalah fungsi dari salah satu pin bus I2C (SDA atau SCL). </li><li>  SPI adalah fungsi dari salah satu pin bus SPI (MISO, MOSI, SCK, SS). </li><li>  UART adalah fungsi dari salah satu pin antarmuka UART (RX atau TX). </li><li>  Fungsi input analog </li><li>  Fungsi output analog (belum digunakan dalam FLProg, backlog untuk masa depan). </li><li>  Fungsi input / output digital. </li></ul><br>  Tetapkan pin 1 fungsi input / output digital.  Saat menetapkan fungsi baru (belum dikonfigurasi) ke output, cabang "Kesalahan" akan muncul di pohon pengontrol dan seluruh jalur ke cabang fungsi yang salah akan berubah merah.  Pada cabang "Kesalahan", Anda dapat melihat daftar kesalahan yang ditemukan dalam deskripsi pengontrol. <br><br><img src="https://habrastorage.org/webt/fu/c5/l6/fuc5l68t2uqnnb018st1us7kp84.png"><br><br>  Dalam hal ini, input 1 dalam fungsi "Input / output digital" tidak menentukan jumlah input ini sebagai digital.  Kami beralih ke cabang fungsi ini (di masa depan saya berencana untuk melakukan transisi langsung ke cabang yang diinginkan ketika saya mengklik kesalahan). <br><br><img src="https://habrastorage.org/webt/m5/86/hp/m586hpytkvzarwhavx6lf1a2lcm.png"><br><br>  Menurut diagram sirkuit papan, output "Input1" terhubung ke pin GPIO2 controller.  Kami memasukkan nilai ini di bidang "Nomor input digital".  Saat menyusun proyek, nilai ini akan dimasukkan ke dalam kode.  Karena penggunaan input ini sebagai output tidak disediakan, kami menghapus kotak centang "Dapat digunakan sebagai output".  Seperti biasa, klik tombol "Terapkan".  Dengan cara yang sama, konfigurasikan dua input digital lainnya.  Lalu pergi ke output dari input analog "ADC1" dan tambahkan fungsi "Input Analog" untuk itu. <br><br><img src="https://habrastorage.org/webt/i5/vb/6j/i5vb6johktcuk0mym00jifsptqm.png"><br><br>  Dalam pengaturan fungsi ini, Anda harus menentukan jumlah output ini sebagai input analog.  Menurut skema, ini adalah 0 (dalam ESP8266 itu adalah satu). <br><br><img src="https://habrastorage.org/webt/jh/yl/vs/jhylvsjhmvsl6dbki2nsnmu-aoe.png"><br><br>  Lalu pergi ke pengaturan output "1WIRE".  Di sini kami menambahkan fungsi input / output digital, tetapi kami melarang penggunaan input dan output.  Akibatnya, itu akan tersedia untuk pemilihan hanya di blok sensor, dan tidak tersedia saat membuat input dan output. <br><br><img src="https://habrastorage.org/webt/5o/s-/3i/5os-3i6f-756ojmbhfn0jrblftm.png"><br><br>  Pengaturan output "K1" - "K3" mirip dengan pengaturan input "Input1" - "Input3" hanya dalam hal output kami melarang mereka untuk digunakan sebagai input. <br><br><img src="https://habrastorage.org/webt/wc/vh/nl/wcvhnl5d42ola1rk3cmcgqltpjy.png"><br><br><img src="https://habrastorage.org/webt/e3/qj/1y/e3qj1yyzrzn36t-plzwu_nl7-sq.png"><br><br>  Buka cabang "Gambar".  Di dalamnya, kita dapat menambahkan gambar yang dimuat ke dalam deskripsi controller, misalnya, dengan tampilan controller, pinout, dll. <br><br>  Harap dicatat bahwa gambar dimuat langsung ke deskripsi controller, dan disimpan dalam proyek yang dibuat menggunakannya.  Karena itu, jangan unggah gambar besar.  Ini akan memerlukan peningkatan ukuran proyek, dan akan mempengaruhi kecepatan pembukaannya. <br><br>  Gambar ditambahkan menggunakan tombol "Tambah Gambar". <br><br><img src="https://habrastorage.org/webt/f_/ar/so/f_arso1h9wd207bcwxg0yx8rbjm.png"><br><br>  Setelah memilih dan memuat gambar (hanya format PNG yang didukung), cabang terpisah dibuat untuk setiap gambar di pohon.  Di cabang ini, Anda dapat menentukan nama untuk gambar yang diunduh, yang akan ditampilkan dalam informasi pengontrol. <br><br><img src="https://habrastorage.org/webt/9f/th/jb/9fthjbpdldgi5zzbmye2ior6kyw.png"><br><br>  Jika perlu, Anda dapat mengunggah beberapa gambar dan mengaturnya dalam urutan yang diinginkan. <br><br><img src="https://habrastorage.org/webt/b_/cv/lx/b_cvlxb8-0zaxazygmrj300mkhy.png"><br><br><img src="https://habrastorage.org/webt/ru/wh/nu/ruwhnuvfvcuhntsygr0hpapxed0.png"><br><br>  Kami lolos ke cabang "Blok standar". <br><br><img src="https://habrastorage.org/webt/5e/nr/gg/5enrggudk1-qgs36xmh1ryem1f8.png"><br><br>  Cabang ini menunjukkan blok yang dapat diwakili di perpustakaan blok standar program sesuai dengan pengaturan program saat ini.  Apa artinya itu?  Beberapa blok bangunan program hanya ditujukan untuk jenis CPU tertentu.  Dan ketersediaannya tergantung pada prosesor yang dipilih.  Juga, blok yang dirancang untuk bekerja dengan SPI, I2C, UART akan muncul dalam daftar ini hanya jika fungsi yang sesuai ditambahkan ke pin pengontrol.  Blok yang dirancang untuk bekerja dengan EEPROM akan muncul hanya jika ukuran EEPROM yang ditentukan pada cabang parameter pengontrol umum lebih besar dari nol, atau fungsi I2C ditambahkan ke pin pengontrol.  Secara default, semua blok di perpustakaan dilarang untuk digunakan (ditandai dengan oranye).  Anda dapat mengizinkan untuk menggunakan blok terpisah atau seluruh folder blok dengan menyorot cabang yang diperlukan dan mengklik tombol "Izinkan", atau dari menu konteks. <br><br><img src="https://habrastorage.org/webt/_g/-f/cc/_g-fccqwf5_0twhukgxs6wfxhwo.png"><br><br>  Ketika Anda membiarkan blok atau folder blok ditampilkan di program, mereka dicat hitam. <br><br>  Pemblokiran blok atau folder terpisah dilarang dengan cara yang sama. <br><br><img src="https://habrastorage.org/webt/dc/yo/4p/dcyo4p2p6mj8c1zqtj_p_mymupw.png"><br><br>  Dalam folder di mana tidak semua blok diizinkan untuk ditampilkan, mereka ditandai dengan tiga tanda bintang sebelum dan sesudah nama. <br><br>  Kami melarang penggunaan motor, jam waktu nyata, display, unit kontrol IR, sensor (kecuali untuk sensor DS18B20 dan DHT22 - karena pengembang sejauh ini hanya mengumumkan dukungan mereka), chip ekspansi dan speaker piezo. <br><br><img src="https://habrastorage.org/webt/co/ip/ji/coipji0n9m9oho6ed6jjpuatuu8.png"><br><br>  Kami akan melakukan hal yang sama untuk bahasa LAD <br><br><img src="https://habrastorage.org/webt/h9/-u/xe/h9-uxez75k-8pyzyi08vk7z-p4m.png"><br><br>  Jangan lupa untuk menerapkannya setelah melakukan perubahan. <br><br>  Cabang-cabang yang tersisa dari deskripsi pengontrol akan dibahas di posting berikutnya, sementara pengaturan saat ini cukup untuk menggunakan papan khusus ini dalam program FLProg. <br><br>  Untuk saat ini, saya hanya akan mengatakan secara singkat bahwa cabang "Blok Khusus" digunakan untuk memuat blok khusus ke dalam deskripsi, yang akan ditampilkan di perpustakaan blok standar dalam program saat menggunakan pengontrol ini.  Cabang "Kode khusus" digunakan untuk merekam kode yang akan selalu dimasukkan ke dalam kode yang dikompilasi, dan cabang "Perpustakaan khusus" digunakan untuk memuat pustaka ke dalam deskripsi controller, yang akan diunggah ke folder \ libraries ArduinoIDE tempat program ini bekerja. <br><br>  Setelah semua perubahan, simpan perpustakaan deskripsi pengontrol. <br><br><img src="https://habrastorage.org/webt/x0/oe/d7/x0oed7fkffsba-owxcfxvgchyjm.png"><br><br>  Sekarang mari kita coba gunakan deskripsi controller yang kita buat. <br>  Dalam program FLProg, kami membuat proyek baru untuk controller. <br><br><img src="https://habrastorage.org/webt/dx/7w/ya/dx7wyao116azs1a2lwrpoa1tt4i.png"><br><br>  Buka jendela pemilihan pengontrol. <br><br><img src="https://habrastorage.org/webt/l4/5f/wt/l45fwtcbztx_s8w9p71skiimmyo.png"><br><br>  Dan pilih deskripsi yang kami buat. <br><br><img src="https://habrastorage.org/webt/dq/ly/jp/dqlyjprofstw-fkadjd1jiguzl4.png"><br><br>  Saat memilih pengontrol, Anda dapat melihat gambarnya dan, jika perlu, menyimpan yang diperlukan ke file. <br><br><img src="https://habrastorage.org/webt/ba/ni/gw/banigw8zc9shyyogovawmcvlyxy.png"><br><br><img src="https://habrastorage.org/webt/rh/ra/ss/rhrasshfamvayeljiqnmceepo3g.png"><br><br>  Anda juga dapat melihat parameter lainnya <br><br><img src="https://habrastorage.org/webt/gf/6p/wd/gf6pwdh-67cn9e8cbm0k4utlbw0.png"><br><br>  Setelah memilih controller, konfirmasikan pilihannya: <br><br><img src="https://habrastorage.org/webt/d0/7x/fy/d07xfyaacufag5wf1zqmcokjjd8.png"><br><br>  Akibatnya, jendela kerja proyek utama terbuka, dikonfigurasi sesuai dengan pengontrol yang dipilih. <br><br><img src="https://habrastorage.org/webt/dz/my/qj/dzmyqjeks591vtjfqnqhqnhvty4.png"><br><br>  Tujuan dari posting ini tidak termasuk tugas pelatihan untuk bekerja dengan program FLProg.  Ini dijelaskan dengan cukup baik di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting</a> saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebelumnya</a> , di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web proyek</a> , dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">forum proyek</a> .  Selain itu, sudah ada cukup banyak saluran di YouTube di mana tutorial video tentang bekerja dengan program tersebut diposting.  Misalnya, saluran yang sangat bagus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Kunci Arduino"</a> , baru saja melakukan serangkaian pelajaran, dengan presentasi materi yang sangat bagus. <br><br>  Karena itu, misalnya, kami cukup membuat proyek sederhana dan mencoba mengompilasinya. <br>  Pertama, tambahkan input controller. <br><br><img src="https://habrastorage.org/webt/4c/94/wf/4c94wfvporudssfe-mdvmg6fenm.png"><br><br>  Hanya kesimpulan bahwa kami diizinkan bekerja dalam kapasitas yang tersedia untuk dipilih sebagai input. <br><br><img src="https://habrastorage.org/webt/yy/dk/fi/yydkfixeg0aemh73lrqunx1qq_a.png"><br><br>  Kemudian buat output digital.  Hanya kesimpulan yang diizinkan juga tersedia di sini. <br><br><img src="https://habrastorage.org/webt/mk/cq/qm/mkcqqm7djcs0klswidh2qkm2bt8.png"><br><br>  Kami merakit sirkuit sehingga ketika tombol pada Input1 (Input 1) ditekan, relai K1 (Relay1) menyala. <br>  Kami juga mengeluarkan unit untuk membaca informasi dari sensor DS18B20 ke papan sirkuit di papan terpisah. <br><br><img src="https://habrastorage.org/webt/xn/wa/2p/xnwa2pfpn7em5w2irs5meayndbc.png"><br><br>  Buka pengaturan blokir.  Saat membuat bus OneWire baru, kami melihat bahwa semua input / output digital tersedia untuk dipilih.  Ini adalah cacat dalam versi 6.0.  Tapi karena versi ini masih berstatus beta, itu bisa dimaafkan.  Dalam versi 6.1, akan dimungkinkan untuk melarang penggunaan pin sebagai sensor, sensor, atau untuk chip ekspansi.  Selain itu, pada posting selanjutnya saya akan memberi tahu Anda cara lain untuk menyelesaikan masalah ini.  Untuk saat ini, pilih pin 1WIRE. <br><br><img src="https://habrastorage.org/webt/yi/0n/i0/yi0ni02zslfqijbthixnw4yeq_m.png"><br><br>  Kami mengkonfigurasi sensor untuk mengatur alamat melalui array. <br><br><img src="https://habrastorage.org/webt/nu/ft/9h/nuft9hg43uwk_toqi1yanem1miq.png"><br><br>  Kami menyisipkan papan baru di depan yang pertama dan mengeluarkan blok "OneWire Bus Scan" di atasnya. <br><br><img src="https://habrastorage.org/webt/qv/21/r5/qv21r5i9ggwzcovlis6k9kg3f9u.png"><br><br>  Kami mengkonfigurasinya pada bus OneWire yang sama, dan pada larik yang sama, di mana unit pembacaan dari sensor DS18B20 dikonfigurasi. <br><br><img src="https://habrastorage.org/webt/vm/cm/ri/vmcmrigupgqdmnxfbb8fcwfuluc.png"><br><br>  Kami menyusun skema untuk memulai tunggal pemindaian bus saat pengontrol dimulai, menggunakan blok R pemicu (pemilihan tepi depan). <br><br><img src="https://habrastorage.org/webt/vh/xd/2l/vhxd2l7bxk3afyi7obm1kaix9l0.png"><br><br>  Di papan dengan unit pembacaan data dari sensor DS18B20, kami merakit relai on / off dengan hysteresis.  Untuk ini, kami menggunakan dua pembanding, dan pemicu SR.  Berkat skema ini, relai 2 akan menyala ketika suhu turun di bawah 10 derajat, dan mati ketika suhu naik di atas 20 derajat. <br><br><img src="https://habrastorage.org/webt/55/nw/3y/55nw3y062rknemyx2c7ouyavwgm.png"><br><br>  Kami memulai skema kompilasi. <br><br><img src="https://habrastorage.org/webt/oh/tr/so/ohtrso3_hk9k13yizhsgy8stp0o.png"><br><br>  Akibatnya, kode yang dihasilkan akan terbuka di Arduino IDE.  Sebagai papan, kami memilih NodeMCU, di mana chip yang sama dipasang seperti pada ShloTiny.  Memeriksa kode menunjukkan bahwa itu benar dan dapat diunduh. <br><br><img src="https://habrastorage.org/webt/lv/jy/dc/lvjydc9b531j1inhq5vuumgn0n0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Kode yang dikompilasi</b> <div class="spoiler_text"><pre><code class="plaintext hljs">#include &lt;OneWire.h&gt; extern "C" { #include "user_interface.h"; } OneWire _ow13(13); byte _FLPArray133289689[9]; unsigned long _d18x2x1Tti = 0UL; float _d18x2x1O = 0.00; bool _trgr1 = 0; bool _bounseInputD2S = 0; bool _bounseInputD2O = 0; unsigned long _bounseInputD2P = 0UL; bool _trgrt1 = 0; bool _trgrt1I = 0; bool _sowb1_needScan = 0; bool _sowb1_ost = 0; bool _sowb1_Out_1 = 0; void setup() { pinMode(2, INPUT); pinMode(12, OUTPUT); pinMode(14, OUTPUT); _bounseInputD2O = digitalRead(2); } void loop() { bool _bounceInputTmpD2 = (digitalRead (2)); if (_bounseInputD2S) { if (millis() &gt;= (_bounseInputD2P + 40)) { _bounseInputD2O = _bounceInputTmpD2; _bounseInputD2S = 0; } } else { if (_bounceInputTmpD2 != _bounseInputD2O ) { _bounseInputD2S = 1; _bounseInputD2P = millis(); } } //:1 if (1) { if (_trgrt1I) { _trgrt1 = 0; } else { _trgrt1 = 1; _trgrt1I = 1; } } else { _trgrt1 = 0; _trgrt1I = 0; }; if (_sowb1_needScan) { if ( _oneWireSeach (_FLPArray133289689, _ow13)) { _sowb1_Out_1 = 1; } _ow13.reset_search(); _sowb1_needScan = 0; } if (_trgrt1) { if (! _sowb1_ost) { _sowb1_ost = 1; _sowb1_needScan = 1; _sowb1_Out_1 = 0; } } else { _sowb1_ost = 0; } //:2 digitalWrite(12, !(_bounseInputD2O)); //:3 if (_isTimer(_d18x2x1Tti, 1000)) { _d18x2x1Tti = millis(); _d18x2x1O = _readDS18_ow13(_FLPArray133289689, _FLPArray133289689[8]); } if (((_d18x2x1O)) &gt; (20)) _trgr1 = 0; if (((_d18x2x1O)) &lt; (10)) _trgr1 = 1; digitalWrite(14, _trgr1); } bool _isTimer(unsigned long startTime, unsigned long period ) { unsigned long currentTime; currentTime = millis(); if (currentTime &gt;= startTime) { return (currentTime &gt;= (startTime + period)); } else { return (currentTime &gt;= (4294967295 - startTime + period)); } } float _convertDS18x2xData(byte type_s, byte data[12]) { int16_t raw = (data[1] &lt;&lt; 8) | data[0]; if (type_s) { raw = raw &lt;&lt; 3; if (data[7] == 0x10) { raw = (raw &amp; 0xFFF0) + 12 - data[6]; } } else { byte cfg = (data[4] &amp; 0x60); if (cfg == 0x00) raw = raw &amp; ~7; else if (cfg == 0x20) raw = raw &amp; ~3; else if (cfg == 0x40) raw = raw &amp; ~1; } return (float)raw / 16.0; } float _readDS18_ow13(byte addr[8], byte type_s) { byte data[12]; byte i; _ow13.reset(); _ow13.select(addr); _ow13.write(0xBE); for ( i = 0; i &lt; 9; i++) { data[i] = _ow13.read(); } _ow13.reset(); _ow13.select(addr); _ow13.write(0x44, 1); return _convertDS18x2xData(type_s, data); } bool _oneWireSeach (byte array[], OneWire ow ) { byte temp[8]; byte i; if ( !ow.search(temp)) { return false; } if (OneWire::crc8(temp, 7) != temp[7]) { return false; } switch (temp[0]) { case 0x10: array[8] = 1; break; case 0x28: array[8] = 0; break; case 0x22: array[8] = 0; break; default: return false; } for ( i = 0; i &lt; 8; i++) { array[i] = temp[i]; } return true; }</code> </pre> <br></div></div><br>  → <a href="">Deskripsi pengontrol ShloTiny untuk program FLProg</a> <br><br>  Kami akan menyelesaikan pelajaran ini, di pos berikutnya kami akan mencoba menggambarkan sesuatu yang lebih serius dan lebih dekat dengan pengontrol industri "nyata". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467007/">https://habr.com/ru/post/id467007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466993/index.html">Konfigurasi Peringatan Next Generation plugin untuk integrasi dengan PVS-Studio</a></li>
<li><a href="../id466995/index.html">Mengkonfigurasi plugin Next Generation untuk integrasi PVS-Studio</a></li>
<li><a href="../id466999/index.html">Perbandingan perpustakaan CLI populer untuk Python: klik, semen, api, dan lainnya</a></li>
<li><a href="../id467003/index.html">Menu cepat, nyaman, adaptif untuk 1075 kategori (36000 produk)</a></li>
<li><a href="../id467005/index.html">Cara mewarnai polinomial dengan benar</a></li>
<li><a href="../id467009/index.html">Membuat perpustakaan rumah dengan Notion dan Python</a></li>
<li><a href="../id467011/index.html">Apa yang harus dibaca dan dilihat sebagai permulaan dalam Ilmu Data: buku, kamus, dan kursus</a></li>
<li><a href="../id467015/index.html">JWT: Digital Signature Attack VS MAC Attack</a></li>
<li><a href="../id467017/index.html">Apa itu HED / MRSD dan untuk apa ini?</a></li>
<li><a href="../id467019/index.html">Merancang dasbor untuk situs web analitik e-commerce Bagian 3: Saluran SEO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>