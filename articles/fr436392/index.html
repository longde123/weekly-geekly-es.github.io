<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüç≥ üë©üèø‚Äçüéì üë®üèæ‚Äçüç≥ Avantages de l'analyse des applications de niveau 7 dans les pare-feu. Partie 1. Bases üõ∂ üë©üèΩ‚Äçüé® üöæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La nouvelle g√©n√©ration de pare-feu est plus pratique et plus s√ªre gr√¢ce √† la nouvelle architecture du moteur et √† la nouvelle id√©ologie de gestion des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Avantages de l'analyse des applications de niveau 7 dans les pare-feu. Partie 1. Bases</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436392/"><img src="https://habrastorage.org/getpro/habr/post_images/786/9e4/d4e/7869e4d4eac6b07b8bfa763cb3985347.png"><br>  La nouvelle g√©n√©ration de pare-feu est plus pratique et plus s√ªre gr√¢ce √† la nouvelle architecture du moteur et √† la nouvelle id√©ologie de gestion des flux r√©seau. <br><h3>  Pourquoi cet article est-il apparu? </h3><blockquote>  Ils sont venus √† plusieurs reprises √† des coll√®gues de la s√©curit√© qui utilisent une nouvelle g√©n√©ration de pare-feu et ont vu qu'ils continuaient √† √©crire des r√®gles sur les num√©ros de port.  Sur ma suggestion de continuer √† √©crire par le nom des applications, j'ai entendu "Et si √ßa ne marche pas comme √ßa?".  Si vous avez √©galement "peur" ou si vous ne savez pas pourquoi √©crire les r√®gles pour les applications, cet article est pour vous. </blockquote><br><a name="habracut"></a><br><h1>  PARTIE 1. Bases du pare-feu </h1><br><h3>  SOMMAIRE </h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©finitions</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pare-feu</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pare-feu L3</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pare-feu L4</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pare-feu L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UTM</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NGFW</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Des exemples</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Serveur proxy</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qu'est-ce que l'ID UTILISATEUR</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Id√©es fausses sur l'inspection dynamique: √©tat L4 vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Id√©es fausses sur l'inspection avec √©tat: nombre de sessions L4 vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Id√©es fausses sur l'inspection dynamique: cluster L4 vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2. Impact sur la s√©curit√© du pare-feu L7</a> <br><br><a name="Intro"></a><h2>  Pr√©sentation </h2><br>  Skype, TOR, Ultrasurf, TCP-sur-DNS et plusieurs centaines d'autres applications et tunnels passent tranquillement par le pare-feu d'inspection et les proxys HTTP.  De nombreuses protections ouvrent les connexions, mais ne v√©rifient pas ce qui se passe √† l'int√©rieur.  Je propose de comprendre comment contr√¥ler les connexions d'application dans une nouvelle g√©n√©ration de pare-feu de mani√®re contr√¥l√©e, o√π les r√®gles sont √©crites par des noms d'application, ce qui correspond au niveau 7 du mod√®le ISO OSI.  Ces pare-feu sont appel√©s pare-feu de nouvelle g√©n√©ration, une nouvelle g√©n√©ration de pare-feu ou simplement NGFW. <br><blockquote>  L'administrateur du pare-feu doit non seulement autoriser la connexion, mais √©galement s'assurer que ce que vous voulez va √† l'int√©rieur de la connexion autoris√©e, y compris la v√©rification des fichiers transf√©r√©s.  C'est ce qu'on appelle <b>l'autorisation d'application s√©curis√©e</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b2/d52/1e2/9b2d521e2806d725232f208f318014fb.jpg"></blockquote>  Il existe plusieurs diff√©rences importantes dans l'utilisation du trafic, que vous ne comprenez que lorsque vous passez √† l'utilisation r√©elle des r√®gles, o√π le crit√®re est l'application du niveau 7 du mod√®le ISO OSI: <br><br><ul><li>  L'administrateur informatique voit que NGFW visualise le trafic r√©seau, c'est-√†-dire qu'il affiche le contenu du champ de donn√©es par paquets, les noms d'utilisateur et l'application qui s'ex√©cute et les fichiers qu'elle transmet. <br></li><li>  La s√©curit√© informatique voit que NGFW fournit une r√©solution d'application s√©curis√©e, car une analyse plus approfondie des donn√©es dans le package vous permet de voir les virus, d'activer l'envoi de fichiers inconnus dans le bac √† sable, de v√©rifier le type de fichier, les mots cl√©s pour DLP, de v√©rifier la cat√©gorie d'URL, de v√©rifier ce qui se passe √† l'int√©rieur de SSL et SSH, Comparez avec des indicateurs de compromis d√©j√† connus dans le monde, activez le filtre DNS et d'autres techniques modernes. <br></li></ul><br>  Pour comprendre les raisons de cela, comparez les journaux de pare-feu L4 et L7. <br><blockquote>  A) Comparez l'entr√©e dans le journal du <b>pare-feu L4</b> , qui analyse uniquement l'en-t√™te du niveau de transport (quatri√®me) du mod√®le ISO OSI - dans ce cas TCP: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8a/7bd/dbd/d8a7bddbdb4f4b2de47d82f964de4075.png"></blockquote>  Oui, il y a des informations sur la source et la destination, vous pouvez deviner par le num√©ro de port 443 qu'√† l'int√©rieur, avec un haut degr√© de probabilit√© (comme le disent les anglais), la connexion SSL.  Personnellement, je ne vois aucun incident dans cette entr√©e.  Et vous? <br><blockquote>  B) Comparez l'entr√©e dans le journal du <b>pare-feu L7</b> pour la m√™me connexion TCP, o√π le contenu lui-m√™me est √©galement transf√©r√© dans le champ de donn√©es TCP / IP: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cea/5fc/e07/cea5fce0756312001f33bc13bf101d7a.png"></blockquote>  Ici, vous voyez qu'Ivanov du service marketing a t√©l√©charg√© un fichier marqu√© ¬´non destin√© √† la distribution¬ª sur Slideshare.  Voici un exemple d'incident r√©el o√π un employ√© a publi√© sur Internet des plans de d√©veloppement d'entreprise confidentiels pour un an.  Ces informations ont √©t√© obtenues dans le pare-feu L7 sur la base de l'analyse de la m√™me connexion que ci-dessus pour le pare-feu L4 et imm√©diatement les informations deviennent suffisantes pour comprendre qu'il y a eu un incident.  Et c'est une approche compl√®tement diff√©rente de l'analyse du trafic.  Mais, je vous avertis imm√©diatement qu'une analyse aussi approfondie met une charge s√©rieuse sur le processeur et la RAM de l'appareil. <br><br>  On estime parfois que le niveau de d√©tail des magazines dans NGFW est similaire au niveau de d√©tail dans les syst√®mes SIEM qui collectent des informations bit par bit √† partir de diff√©rentes sources.  C'est pourquoi NGFW est l'une des meilleures sources d'information pour SIEM. <br><br><a name="Def"></a><h2>  D√©finitions </h2><br>  Il est n√©cessaire de souligner les conditions avec lesquelles nous continuerons √† fonctionner.  Je n'ai aucun but en d√©tail de donner toutes les d√©finitions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/871/b80/69b/871b8069b4cf331d60aeb72e986a6fa1.png"><br><br>  <b>Le mod√®le OSI ISO √† sept niveaux</b> est un mod√®le d'interaction entre les p√©riph√©riques r√©seau, qui indique qu'il existe 7 niveaux cons√©cutifs d'abstraction d'interaction: le premier est physique, le suivant est canal, r√©seau, le quatri√®me est transport, puis la session, les vues et le septi√®me niveau sont des applications (voir l'image ci-dessus ) <br><br>  Chaque p√©riph√©rique r√©seau fonctionne √† son propre niveau d'abstraction: le serveur Web et le navigateur - au niveau de l'application (niveau 7 ou bri√®vement L7), les routeurs - communiquent entre eux au niveau du canal (2) et du niveau r√©seau (3) lorsqu'ils se transmettent des trames et des paquets. . <br><br>  Les pare-feu sont √©galement des p√©riph√©riques r√©seau et, selon leur type, peuvent √©galement √™tre des commutateurs et des routeurs et m√™me √™tre un ¬´c√¢ble virtuel¬ª du point de vue de la topologie du r√©seau, mais ces p√©riph√©riques r√©seau ont une charge suppl√©mentaire: ils doivent analyser le contenu des paquets. <br><br>  Et la profondeur de l'analyse des paquets r√©seau peut varier.  Qu'ils analysent le niveau 4 ou 7 est une diff√©rence importante. <br><br><a name="FW"></a><h2>  Pare-feu </h2><br>  <b>Pare-feu (UIT), le pare</b> - <b>feu r√©seau</b> est un p√©riph√©rique r√©seau qui divise le r√©seau en segments avec diff√©rentes politiques de s√©curit√© et contr√¥le ces politiques.  Par exemple, le segment Internet - tout peut y √™tre fait.  Et le segment de votre centre de donn√©es - l√†, vous ne pouvez travailler qu'une liste d√©di√©e d'employ√©s pour les applications autoris√©es.  Au sein d'un m√™me h√¥te VMware, il peut y avoir plusieurs r√©seaux virtuels avec des machines virtuelles et des strat√©gies d'acc√®s diff√©rentes pour eux. <br><br>  La strat√©gie de s√©curit√© du pare-feu contient des r√®gles qui appliquent le code de programme du p√©riph√©rique en analysant chaque trame et paquet qui va et vient du pare-feu.  Dans les r√®gles de pare-feu, des crit√®res d'inspection (qualificatifs) sont d√©finis, selon lesquels une d√©cision est prise d'autoriser ou de bloquer le trafic.  Des exemples de qualificatifs dans les r√®gles sont: adresse, port, application, utilisateur, zone.  Le pare-feu s√©quentiellement, r√®gle par r√®gle, scanne les crit√®res du haut vers le bas de la liste et si le trafic entrant r√©pond √† tous les crit√®res de la r√®gle (op√©ration logique ¬´ET¬ª entre les crit√®res) alors l'action indiqu√©e est appliqu√©e: bloquer ou ignorer.  L'action est effectu√©e √† la fois pour le premier paquet et pour tous les paquets suivants de la m√™me connexion TCP / IP. <br><br>  Il existe diff√©rents types et impl√©mentations de pare-feu.  Nous consid√©rerons la classification en fonction du degr√© de profondeur d'analyse du trafic utilis√©: L3, L4 et L7. <br><br><a name="L3"></a><h2>  Pare-feu L3 </h2><br>  <b>Le pare</b> - <b>feu L3</b> est un pare-feu qui passe le trafic √† travers lui-m√™me et analyse uniquement les en-t√™tes de protocole IP, c'est-√†-dire l'adresse d'o√π et o√π va le trafic.  Ces pare-feu sont appel√©s <b>filtrage de paquets</b> .  Les r√®gles sont appel√©es ¬´liste d'acc√®s¬ª ou liste d'acc√®s (ACL) et cette fonctionnalit√© fonctionne aujourd'hui dans presque tous les routeurs et syst√®mes d'exploitation.  Une telle analyse ne n√©cessite pas une charge s√©rieuse sur les processeurs et la m√©moire du pare-feu. <br><br><a name="L4"></a><h2>  Pare-feu L4 </h2><br>  <b>Le pare</b> - <b>feu L4</b> est un pare-feu qui passe le trafic √† travers lui-m√™me et v√©rifie les en-t√™tes des 4 protocoles de niveau: TCP, UDP, ICMP, c'est-√†-dire que les principaux crit√®res de v√©rification pour le trafic sont les adresses IP et les ports TCP / UDP ou les services ICMP. <br><br>  Le concept d'inspection dynamique appara√Æt √©galement dans le pare-feu L4, o√π chaque demande de passage est stock√©e et l'√©tat de la demande est stock√© afin de permettre les connexions de r√©ponse n√©cessaires.  Autrement dit, le concept d'un initiateur de connexion appara√Æt, ce qui est logique dans les r√©seaux construits sur la technologie client-serveur.  Un tel pare-feu d√©pense de la m√©moire pour stocker des donn√©es sur chaque connexion, c'est-√†-dire qu'il y a une limite sur le nombre maximal de sessions simultan√©es stock√©es en m√©moire.  Dans le pare-feu L4, vous n'avez plus besoin d'√©crire une r√®gle de r√©ponse pour la connexion inverse, comme cela est requis dans le pare-feu L3, car en fonction de l'√©tat de la connexion, le pare-feu autorise automatiquement les connexions inverses.  Autrement dit, le pare-feu L4 est plus pratique qu'un filtre de paquets. <br><br>  Les pare-feu L4 modernes stockent non seulement l'√©tat de TCP, UDP et ICMP, mais √©galement le suivi de l'interaction de certaines applications L7.  Par exemple, l'√©tat de FTP, HTTP, SIP et d'autres applications, qui d√©pend d√©j√† de l'impl√©mentation sp√©cifique du pare-feu.  Nous devons poser la question suivante au fabricant du pare-feu L4: quelles applications sp√©cifiques leur moteur de pare-feu d'inspection dynamique prend-il en charge? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fbb/493/449/fbb49344946f0e1ae8ecde30d879b35e.png"><br><br><a name="L7"></a><h2>  Pare-feu L7 </h2><br>  <b>Le pare</b> - <b>feu L7</b> est un pare-feu qui passe le trafic r√©seau IP √† travers lui-m√™me et v√©rifie √† la fois les en-t√™tes de niveau 4 et le segment de donn√©es de chaque paquet IP, c'est-√†-dire qu'il comprend le trafic de niveau application L7, vers lequel les fichiers sont transf√©r√©s et dans quelle direction.  √âtant donn√© que davantage de donn√©es sont analys√©es, il existe davantage de crit√®res de v√©rification dans les r√®gles du pare-feu L7: nom d'utilisateur, application, cat√©gorie d'URL, √©tat du logiciel sur l'ordinateur de l'utilisateur. <br><br>  La charge sur le pare-feu L7 est beaucoup plus √©lev√©e, car son processeur doit constamment analyser les m√©gaoctets du champ de donn√©es transmis par l'application, tandis que le pare-feu L4 ne v√©rifie que quelques octets de l'en-t√™te du paquet IP avec les adresses et ports source et de destination.  La taille de la m√©moire tampon pour stocker l'√©tat de chaque application L7 n√©cessite beaucoup plus, car plus de donn√©es sont transf√©r√©es vers L7 que juste dans l'en-t√™te TCP / IP.  En raison de l'augmentation de la taille du tampon lors de l'utilisation de l'analyse d'application, le nombre de sessions stock√©es simultan√©ment dans la m√©moire du pare-feu L7 est inf√©rieur √† celui du pare-feu L4 avec la m√™me quantit√© de m√©moire.  √âtant donn√© que le pare-feu L7 voit par contenu quel type d'application passe sur le r√©seau, le num√©ro de port n'a pas beaucoup de sens et les r√®gles peuvent √™tre √©crites par le nom de l'application L7.  De plus, les applications modernes g√©n√®rent de nombreuses connexions et toutes ces connexions font partie d'une seule application.  Ce type de pare-feu vous permet de reprendre le contr√¥le des applications dynamiques modernes fonctionnant sur n'importe quel port, par exemple, teamviewer, bittorent, tor, dont le pare-feu L4 ne sait rien.  Autrement dit, le pare-feu L7 dans les r√©alit√©s modernes est n√©cessaire si le r√©seau a besoin de s√©curit√©. <br><blockquote>  Si apr√®s avoir lu cet article, vous continuez √† utiliser le pare-feu L4, cela signifie que vous ne vous souciez pas de la s√©curit√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9dd/ded/ecb/9dddedecb30376ea249d293db19a016d.png"><br></blockquote><br><a name="UTM"></a><h2>  UTM </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/ab9/466/fc5/ab9466fc51717a9788e0093244b6261d.png"><br><br>  <b>Un UTM</b> est un p√©riph√©rique r√©seau qui contient plusieurs composants de s√©curit√© diff√©rents qui analysent s√©quentiellement le trafic passant par le p√©riph√©rique.  Le c≈ìur de l'UTM est le pare-feu L4, le syst√®me de pr√©vention des attaques (IPS), l'antivirus et l'analyse des cat√©gories d'URL en HTTP et HTTPS.  Souvent, les UTM fournissent toujours des fonctions de passerelle VPN.  Tous ces composants sont g√©n√©ralement g√©r√©s √† partir de plusieurs syst√®mes de contr√¥le diff√©rents.  Le trafic √† l'int√©rieur de l'UTM passe s√©quentiellement √† travers les modules de filtrage et la sortie est du trafic pur, qui est autoris√© par les politiques de s√©curit√© de chaque module.  UTM peut √™tre utilis√© comme plate-forme pour d'autres fonctions: protection antivirus, IPS, DDoS, QoS, DLP, filtre DNS, base de donn√©es d'indicateurs Threat Intelligence, protection contre le phishing, etc. (selon le fabricant). <br><br><blockquote>  La parabole sur la personne qui a command√© sept chapeaux √† partir d'un skin a √©galement √©t√© √©crite pour les clients UTM: plus vous souhaitez activer de fonctions apr√®s l'achat, plus la charge sur le processeur UTM pour analyser la m√™me quantit√© de trafic est importante.  Plus de fonctionnalit√©s - moins de vitesse de l'appareil. </blockquote><br><br>  L'id√©e de l'UTM - charger un processeur avec autant de fonctions que possible est devenue une impasse √©volutive, car le nombre de fonctions a augment√© et les processeurs ne pouvaient pas supporter toute cette charge.  Aujourd'hui, malgr√© les bonnes fonctionnalit√©s d√©clar√©es, personne n'inclut toutes les fonctionnalit√©s de l'UTM pour √©liminer les retards de trafic. <br><blockquote>  Le but de l'UTM: impl√©menter autant de fonctions que possible sur un m√™me serveur afin de r√©duire le co√ªt de l'appareil pour l'utilisateur. </blockquote>  Maintenant, les fabricants UTM ont commenc√© √† installer des moteurs d'analyse d'applications de niveau 7 pour dire qu'ils sont NGFW, ce qui d√©route le consommateur.  Cependant, cela est facile √† reconna√Ætre si vous regardez la politique de s√©curit√©: les r√®gles sont toujours bas√©es sur les crit√®res de v√©rification des champs L4.  Et pour filtrer les applications L7, une section de param√®tres distincte est utilis√©e, c'est-√†-dire que l'application L7 n'est pas un qualificatif, comme elle devrait l'√™tre dans le pare-feu L7.  Reconna√Ætre l'application L7 et utiliser l'application L7 comme crit√®re de politique de s√©curit√© sont ¬´deux grandes diff√©rences¬ª. <br><br><a name="NGFW"></a><h2>  NGFW </h2><br>  <b>NGFW</b> est un p√©riph√©rique r√©seau dans lequel le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pare</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">feu L7</a> est impl√©ment√©.  Le qualificatif principal devenant le nom de l'application L7, les r√®gles sont √©crites selon de nouveaux crit√®res.  Dans NGFW, le mappage dynamique des adresses IP aux utilisateurs du r√©seau fonctionne toujours, de sorte que le nom d'utilisateur devient √©galement un qualificatif (crit√®re).  NGFW comprend des fonctions de d√©cryptage SSL / TLS et SSH pour reconna√Ætre les applications et les attaques en leur sein, IPS, antivirus et filtrage d'URL. <br><br>  Le terme NGFW a d'abord √©t√© invent√© par la soci√©t√© de marketing Palo Alto Networks.  Mais, progressivement, a pris racine sur le march√© et tous les fabricants d'UTM s'appellent d√©sormais √©galement NGFW.  En effet, NGFW remplit √©galement plusieurs fonctions simultan√©ment, pourquoi alors NGFW n'est pas UTM?  Il est important de conna√Ætre la diff√©rence.  C'est que dans les fonctions de s√©curit√© des applications NGFW (IPS, antivirus, filtrage d'URL) sont acc√©l√©r√©s par le mat√©riel.  Il existe des puces mat√©rielles sp√©cialis√©es: IPS v√©rifie les attaques sur sa puce, l'antivirus signature seul, le d√©cryptage SSL seul, etc.  La s√©paration des fonctions entre les diff√©rents processeurs permet d'ex√©cuter des fonctions de protection en parall√®le et de ne pas attendre que la fonction pr√©c√©dente ait fini de fonctionner, comme dans UTM.  Par exemple, jusqu'√† 60 sont install√©s dans les pare-feu mat√©riels de Palo Alto Networks <br>  Processeurs sp√©cialis√©s Cavium qui acc√©l√®rent les fonctions de s√©curit√©, de r√©seau et de gestion.  Il est important que NGFW contienne une interface logicielle unique pour g√©rer toutes les fonctions en m√™me temps. <br><blockquote>  L'id√©e de NGFW, contrairement √† UTM, est d'impl√©menter chaque fonction sur un processeur s√©par√©, qui est sp√©cialis√© pour la fonctionnalit√© requise. </blockquote>  Les fabricants d'ordinateurs suivaient le m√™me mod√®le et ont int√©gr√© les fonctions math√©matiques et graphiques dans des coprocesseurs math√©matiques et graphiques distincts.  Par cons√©quent, NGFW dispose de processeurs distincts pour reconna√Ætre les applications L7, pour d√©chiffrer SSL / SSH, pour v√©rifier les signatures antivirus, v√©rifier les signatures IPS, etc.  Cela vous permet d'activer toutes les fonctions en m√™me temps, sans d√©gradation ni retard du trafic dans l'appareil pendant l'analyse.  Pourquoi personne n'ach√®te d'ordinateurs sans acc√©l√©rateurs graphiques et n'ach√®te pas de pare-feu sans acc√©l√©ration?  Parce que l'acc√©l√©ration n'est pas n√©cessaire √† basse vitesse, mais lorsque les vitesses d'analyse du trafic d√©passent 1 √† 5 gigabits, il est d√©j√† impossible de mettre en ≈ìuvre toutes les fonctions de s√©curit√© sans acc√©l√©ration. <br><br>  Le but du dispositif NGFW est de permettre aux entreprises de travailler en toute s√©curit√© sans ralentir le trafic.  Cela vous permet de v√©rifier en permanence que les applications transmettent du contenu s√©curis√© √† l'entreprise dont vous avez besoin, et le fonctionnement parall√®le des moteurs de protection avec un flux de trafic garantit les performances sp√©cifi√©es avec toutes les fonctionnalit√©s de s√©curit√© activ√©es et minimise √©galement le retard du trafic. <br><br><a name="Ex"></a><h2>  Des exemples </h2><br><blockquote>  Exemple de politique L7 √† Palo Alto Networks NGFW <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/433/201/c3d433201745dec7e570b6fe82769f2b.png"></blockquote>  Pourquoi pourriez-vous avoir besoin d'une cat√©gorie d'URL comme qualificatif?  Par exemple, vous pouvez autoriser certains employ√©s √† visiter des sites malveillants avec un navigateur, mais bloquer les t√©l√©chargements de fichiers pour eux. <br><blockquote>  Un exemple de strat√©gie de Palo Alto Networks utilisant des v√©rifications de profil d'informations d'h√¥te et des URL de cat√©gorie. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/957/d22/0a0/957d220a05d44f91fef65d4cebf76b89.png"></blockquote>  Cette politique implique √©galement de v√©rifier la protection de l'h√¥te TRAPS dans la colonne Profil HIP, ce qui emp√™chera les utilisateurs d'entrer sur le site avec du code malveillant et des exploits, sans la protection install√©e sur l'ordinateur.  TRAPS est un agent de protection contre les logiciels malveillants et les exploits. <br><br>  Le t√©l√©chargement de fichiers est bloqu√© dans les param√®tres de la colonne Profil, o√π le profil pour bloquer le transfert de tous les fichiers pour n'importe quelle application est appliqu√©.  Voici √† quoi ressemble sa configuration: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/480/87e/6e2/48087e6e2f973ee821ef6240828dfd6a.png"><br><br><a name="Proxy"></a><h2>  Serveur proxy </h2><br>  <b>Un serveur proxy</b> est un p√©riph√©rique qui met fin au trafic d'une application sur lui-m√™me, v√©rifie ce trafic √† l'aide de diverses m√©thodes et envoie ce trafic plus loin.  Le plus souvent utilis√© dans les r√©seaux proxy pour HTTP et HTTPS.  √âtant donn√© que UTM et NGFW analysent les flux HTTP et HTTPS de mani√®re transparente, sans exiger de param√®tres de serveur proxy explicites de la part des clients, les proxys HTTP disparaissent progressivement des entreprises. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf2/e91/3eb/bf2e913eb4c39a379ff76818a6173b6d.png"><br><br><a name="USER-ID"></a><h2>  Qu'est-ce que l'ID UTILISATEUR </h2><br>  NGFW a invent√© un m√©canisme d'identification des utilisateurs.  L'algorithme fonctionne en interne ou s'ex√©cute sur un agent externe.  J'appellerai cela un m√©canisme d'ID UTILISATEUR.  USER-ID cr√©e et g√®re une table de mappage pour le nom d'utilisateur et son adresse IP actuelle.  Il arrive √©galement que dans le tableau il y ait une valeur et un port pour un utilisateur donn√©, si les utilisateurs travaillent via VDI (c'est-√†-dire que les utilisateurs viennent de la m√™me adresse et ne peuvent √™tre distingu√©s que par port). <br><img src="https://habrastorage.org/getpro/habr/post_images/37d/0cc/99b/37d0cc99baa26dc2597b17e7ae9ed7a4.png" alt="image"><br>  Je vais lister les m√©canismes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ID UTILISATEUR</a> dans les r√©seaux de Palo Alto <br><ol><li>  <b>Surveillance du serveur</b> : l'agent ID utilisateur lit les √©v√©nements des serveurs Exchange, des contr√¥leurs de domaine ou des serveurs Novell eDirectory </li><li>  <b>Sondage client</b> : l'agent ID utilisateur interroge les clients Windows via WMI </li><li>  <b>Agent de services Terminal</b> Server: l' <b>agent</b> TS distribue √† diff√©rents utilisateurs diff√©rentes plages de ports TCP / UDP pour travailler avec des serveurs Terminal Server Windows / Citrix </li><li>  Analyse des messages <b>Syslog</b> : l'agent ID utilisateur lit les messages d'authentification Syslog de divers syst√®mes, contr√¥leurs sans fil, p√©riph√©riques 802.1x, serveurs Apple Open Directory, serveurs proxy, passerelles VPN, Cisco ISE </li><li>  Authentification via <b>GlobalProtect</b> Client: VPN + nom d'utilisateur et mot de passe peuvent √™tre ajout√©s √† MFA </li><li>  Authentification via le <b>portail captif</b> : le trafic Web est authentifi√© par le formulaire Web NTLM ou AAA (le portail captif est utilis√© dans le m√©tro et les caf√©s de Moscou. NTLM vous permet de rendre l'authentification transparente) </li><li>  <b>API XML</b> : les informations sur l'entr√©e et la sortie sont transmises par l'agent ID utilisateur avec des commandes sp√©ciales via le pare-feu de l'API REST </li><li>  <b>X-Forwarded-For</b> : les proxys remplissent ce champ dans la requ√™te HTTP pour qu'il soit clair qui se cache derri√®re le proxy </li></ol><br>  La lecture des journaux √† partir des contr√¥leurs Active Directory est la fonctionnalit√© la plus couramment utilis√©e dans USER-ID.  USER-ID       AD,       IP  ,    USER-ID            NGFW,   Windows 2008/2012  : <br> ‚Äî 4768 ‚Äì Authentication Ticket Granted <br> ‚Äî 4769 ‚Äî Service Ticket Granted <br> ‚Äî 4770 ‚Äì Ticket Granted Renewed <br> ‚Äî 4264 ‚Äì Logon Success <br>     USER-ID     Even Log Reader. <br><br><a name="Stateful"></a><h2>   Stateful Inspection </h2><br>             .      ,        .      stateful inspection,        . <br><br> <b>  </b> ,      .  Attention! Stateful inspection ‚Äî       TCP, UDP  ICMP!           : FTP, SIP, RPC, SMTP, SMB   ! <br><blockquote> . <br><br>  FTP ‚Äî    .      PORT,     TCP .  firewall,     stateful inspection firewall,    FTP    PORT       ,   .     : firewall       PORT    ,  FTP    NAT. </blockquote>      L4 firewall  ,    L7 .     :   HTTP, RPC,  ‚Ä¶     7   Application Layer Gateway (ALG). <br><blockquote> . <br><br>  ¬´¬ª      ‚Äì  ALG  SIP,   ,   SIP ALG  L4 firewall  ,     . </blockquote>     L4 firewall     7 . L4 firewall       ALG.     L4 firewall,       :        Stateful Inspection?     . <blockquote> ,  L7 firewall ‚Äî   stateful inspection firewall,        ,    ,  L4 firewall. </blockquote><br><br><a name="Sessions"></a> <b> </b>    firewall.   datasheet,     ,  ¬´  ¬ª.    :              stateful  TCP,        L7 ? <br><br>  ,        ,   firewall.           .  ,  ¬´  ¬ª           .  ,   L4 firewall        TCP   UDP.    TCP  ,     IP   .     L7 , , HTTP      ,  , ,   GET  HTTP   .    . ,       ¬´  ¬ª,    : <br><ul><li>         /, c  stateful inspection, </li><li>     L4,      TCP/IP, </li><li>   -  L7    . </li></ul><br>  L7 firewall      HTTP,    : 64, 44, 16, 1.5. ,   -       UDP 1518 ,          ,       UDP   1518  ‚Äì  ,          HTTP.    ,   L7 firewall         HTTP.   ,     :  NSS Labs. <br>   firewall       ,      , : 30%  HTTPS, 10%  SMB, 10%  FTP   . <br><blockquote> . <br><br>      IXIA     UTM: <br><ul><li>   L4 firewall ‚Äî 4 000 000  , </li><li>   L7 firewall ‚Äî 200 000  . </li></ul><br>   ,     L7     -   . </blockquote><br> ,  ,       :          10  ,   .     4     ,    . <br><br><a name="Cluster"></a> <b>  </b> ‚Äì   .       ,        ,    ¬´ ¬ª     ‚Äî        .  ¬´¬ª firewall  ,           firewall.      ,    ?    firewall     ,         IP       L7 :     - SSL         IPS   ‚Äì     ,   .     L4  L7 firewall :   L4    ,    L7.    . <br><br> <b>   </b> ,  L7 firewall        ‚Äî  ,     L7                      .           L4,           . <br><br>     L4  L7 firewall,              . L7 firewall         ,                 !      . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> 2.  L7 Firewall  </a> <br><a name="Opros"></a></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436392/">https://habr.com/ru/post/fr436392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436376/index.html">Pr√©sentation du robot tout-terrain EZ-Robot Roli Rover</a></li>
<li><a href="../fr436378/index.html">bobaos.pub - KNX TP / UART, Raspberry Pi et Redis</a></li>
<li><a href="../fr436380/index.html">D√©marrage rapide en impression 3D: imprimantes √©conomiques pour d√©butants ou technologie grand public</a></li>
<li><a href="../fr436382/index.html">Antiquit√©s: dix ans d'√©volution de l'ordinateur portable avec le ThinkPad X301</a></li>
<li><a href="../fr436390/index.html">Nous fabriquons UITableView. Pour d√©butants</a></li>
<li><a href="../fr436394/index.html">Demis Hassabis - le grand intellect qui a cr√©√© le grand intellect</a></li>
<li><a href="../fr436396/index.html">Puis-je utiliser la programmation fonctionnelle dans mon langage?</a></li>
<li><a href="../fr436398/index.html">De l'eau</a></li>
<li><a href="../fr436400/index.html">Configurer l'environnement de d√©veloppement pour l'apprentissage du HTML, CSS, PHP dans Windows</a></li>
<li><a href="../fr436404/index.html">√âquilibrage du trafic VoIP √† tol√©rance de pannes. Commutation de charge entre les centres de donn√©es aux heures de pointe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>