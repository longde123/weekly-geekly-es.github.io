<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÑ üèûÔ∏è üëô Pourquoi je d√©teste Eloquent ORM ‚úäüèª ü•´ üî∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Je veux m'avouer devant vous et vous parler un peu de ce que je ressens quand je me d√©veloppe sur Laravel. Non, n'y pense pas, j'adore...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pourquoi je d√©teste Eloquent ORM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434984/"><p><img src="https://habrastorage.org/webt/aw/le/nh/awlenhgll_4ltklubkiqe1wvk8c.jpeg" alt="image"></p><br><p>  Bonjour √† tous.  Je veux m'avouer devant vous et vous parler un peu de ce que je ressens quand je me d√©veloppe sur Laravel.  Non, n'y pense pas, j'adore ce framework et je suis incroyablement reconnaissant √† l'√©quipe qui l'a cr√©√© et le soutient, ils font un travail extr√™mement cool et, √† mon avis, Laravel est la meilleure continuation de Symfony, non moins aim√© de moi. </p><br><p>  J'adore le code stupide.  B√™te en ce sens que m√™me apr√®s 10 ans, si le client vous demande d'y apporter des modifications, vous pouvez le faire sans plonger dans la logique, m√™me apr√®s avoir √©t√© apr√®s une f√™te d'entreprise vendredi, sans rien casser dans l'ancien code.  Et stupide dans le sens o√π vous n'avez pas besoin de faire d'effort cognitif pour le comprendre.  Mais il y a une solution architecturale dans Laravel Eloquent ORM qui me fait pleurer.  Int√©ressant?  Viens sous le chat. </p><a name="habracut"></a><br><p> Les gens intelligents ont tout invent√© pour nous il y a longtemps: OOP, Design Patterns, SOLID, DDD et d'autres mots effrayants qui vous font tellement peur au d√©but, puis les appliquent sur une intuition. </p><br><p>  Ces j'aime Laravel et Symfony.  Ils vous permettent d'√©crire le code le plus stupide et s√©curis√© d√®s la sortie de la bo√Æte.  Oui  Chacun a ses inconv√©nients ... Mais √† Laravel, il y en a un qui me g√™ne le plus.  Cela utilise Active Record Pattern (AR) pour travailler avec des mod√®les. </p><br><p>  Pour commencer, un peu sur ce mod√®le.  De quoi s'agit-il?  Pour comprendre, vous devez vous adresser au parent de cet opus de conception d'application - le mod√®le de r√©f√©rentiel.  Ce motif est une collection.  Une collection d'entit√©s (Entit√©s) qui peuvent les r√©cup√©rer, les modifier, les enregistrer, les supprimer, en g√©n√©ral, les g√©rer dans un emplacement de stockage abstrait.  Dans 90% des cas sur 100, cet emplacement de stockage est une vari√©t√© de bases de donn√©es.  Mais il peut y avoir un syst√®me de fichiers, une sorte de cache et m√™me une API externe. </p><br><p>  Cette approche est pleinement conforme au principe de la responsabilit√© partag√©e et √† l'approche DDD.  De plus, gr√¢ce √† cette approche, une faible connectivit√© est mise en ≈ìuvre - nous ne nous soucions pas exactement de la fa√ßon dont l'application est stock√©e, nous travaillons avec Entity lorsque nous voulons travailler directement avec la repr√©sentation objet des donn√©es et travailler avec Repository lorsque nous devons interagir avec le r√©f√©rentiel. </p><br><p>  Mais Laravel a d√©cid√© d'opter pour la RA, ce qui est ind√©niablement cool et incroyablement pratique lorsque vous devez cr√©er un prototype rapide, mais cela devient un casse-t√™te incroyable lorsque vous devez interagir avec plusieurs sources de donn√©es et fonctionner avec elles dans le syst√®me. </p><br><p>  AR est un mod√®le qui mappe l'entit√© et le r√©f√©rentiel en un seul mod√®le.  C'est-√†-dire qu'un objet devient une repr√©sentation d'un enregistrement particulier dans la base de donn√©es.  Et ... quoi?  √Ä quoi cela m√®ne-t-il et pourquoi est-ce si ennuyeux? </p><br><p>  Premi√®rement, nous violons le m√™me principe de responsabilit√© partag√©e - la logique de travailler avec le r√©f√©rentiel √† un endroit et la logique de travailler avec une entit√© √† un autre.  Ceci est important, car dans le cadre de mon syst√®me, je ne souhaite pas transf√©rer une ligne de la base de donn√©es dans la repr√©sentation d'objet via la cha√Æne d'appel.  Je veux passer le mod√®le.  Je ne devrais pas me soucier de la fa√ßon dont cela se passe, change et persiste.  J'ai besoin de ces m√©thodes qui vous permettent d'interagir uniquement avec le mod√®le, et non avec les lignes de la base de donn√©es. </p><br><p>  Deuxi√®mement, nous ne pouvons pas (en raison du fait que la couche persistante - la couche de stockage - est connect√©e √† la couche d'entit√©), simplement changer l'emplacement de stockage du mod√®le.  Oui, nous pouvons le faire dans la configuration, en le modifiant imm√©diatement pour tout le monde, dans les bases de donn√©es prises en charge.  Ou modifiez uniquement pour un mod√®le sp√©cifique (avec tout cela, nous ne supprimons aucune m√©thode de g√©n√©rateur de requ√™te, car vous ne pouvez pas vous d√©barrasser des m√©thodes de classe de base) et rencontrez une tonne d'erreurs probables dans le code ou, Dieu nous en pr√©serve, si quelqu'un d'autre soutiendra (et cela arrive tout le temps). </p><br><p>  Troisi√®mement.  Je veux tester mes entit√©s.  Je tiens √† le damner pour √™tre s√ªr que les changements que j'apporter ne briseront pas ma logique commerciale.  Et, comme le montre la pratique, dans le cas de la RA, vous ne pouvez pas le faire, car le principe diabolique de la responsabilit√© unique a √©t√© viol√©!  Bien qu'ici, je sois un peu hypocrite.  Tester des mod√®les est possible, juste ... Un peu compliqu√©. </p><br><p>  N√©anmoins, il est impossible de ne pas parler des avantages de ce mod√®le.  Bien que son plus, c'est qu'il est "rapide, simple, sans h√©sitation".  En fusionnant deux mod√®les qui sont proches en logique de leurs actions et sont constamment utilis√©s ensemble, nous avons obtenu un outil pratique qui r√©duit l√©g√®rement la quantit√© de code (dans le sens de la complexit√©, nous souvenons-nous du "code stupide"?).  Il vous permet √©galement de vous d√©barrasser des probl√®mes inutiles au stade de la formation de MVP, ce qui est obligatoire (la pratique montre que cela se produit rarement, mais quand m√™me), il est pr√©vu de le r√©√©crire.  Cela vous permet de passer de la question ¬´comment faisons-nous¬ª √† la question ¬´que faisons-nous¬ª, c'est-√†-dire de se d√©barrasser des questions inutiles sur les technologies et de passer √† la logique m√©tier. </p><br><p>  √Ä quelle conclusion suis-je parvenu au cours des ann√©es d'utilisation du Laravel Eloquent ORM?  Active Record mal dans la chair?  Non, c'est l'outil le plus cool pour certaines situations, en particulier pour l'√©tape o√π vous √©crivez une application simple ou un prototype d'une telle application.  Mais c'est une chose impossible √† travailler lorsque votre application grandit et que vous devez travailler avec un grand nombre de sources de donn√©es, √©crire du code avec une couverture de test √† 100% et de gros probl√®mes commencent. </p><br><p>  Oui, de nouvelles puces sont en train d'√™tre invent√©es ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Trucker</a> ?), Mais allons-y pour des trucs.  Mais je veux quand m√™me un peu plus de libert√© par rapport au cadre, d'autant plus qu'il est si bon pour tant de gens! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434984/">https://habr.com/ru/post/fr434984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434972/index.html">Comment √©crire des tests unitaires si vous n'en avez pas envie du tout</a></li>
<li><a href="../fr434974/index.html">Travailler avec un format de configurations 1C: Enterprise</a></li>
<li><a href="../fr434976/index.html">ITAB University Fablab: DIY-coworking pour les cr√©atifs - montrer ce qu'il y a √† l'int√©rieur</a></li>
<li><a href="../fr434978/index.html">Pr√©sentation de HealthKit</a></li>
<li><a href="../fr434982/index.html">Perspective: MultiClet S1</a></li>
<li><a href="../fr434986/index.html">Concepts de base de la biblioth√®que C ++ standard</a></li>
<li><a href="../fr434992/index.html">Mise √† niveau d'IDA Pro. D√©bogueur pour Sega Mega Drive (partie 1)</a></li>
<li><a href="../fr434994/index.html">Android: cr√©ation de saveurs de produits dynamiques et signature de configurations</a></li>
<li><a href="../fr434996/index.html">Comment je partage l'emplacement via l'API VK</a></li>
<li><a href="../fr434998/index.html">Un autre article sur la fa√ßon de choisir un smartphone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>