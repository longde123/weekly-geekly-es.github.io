<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚§¥Ô∏è üôÖüèø üí≤ Noolite MTRF-32 + Arduino + Domoticz üïå üå≥ üë®‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini, saya menjelaskan cara menghubungkan modul Noolite MTRF-32 ke sistem kontrol rumah pintar berbasis Domoticz. 

 Sedikit tentang rumah...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Noolite MTRF-32 + Arduino + Domoticz</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402799/">  Pada artikel ini, saya menjelaskan cara menghubungkan modul Noolite MTRF-32 ke sistem kontrol rumah pintar berbasis Domoticz. <br><a name="habracut"></a><br><h3>  Sedikit tentang rumah itu sendiri </h3><br>  Rumah saya pribadi.  Ini telah memperkenalkan beberapa dasar dari rumah pintar dan aktuator nirkabel berbasis Domoticz di MySensor. <br><br>  Saat ini, sensor pembuka pintu, pencantuman pencahayaan rumah, sensor suhu dan kelembaban di rumah dan di jalan, suara menginformasikan tentang peristiwa dan prakiraan cuaca diimplementasikan. <br><br>  Rumah itu dari kayu, jadi aku tidak benar-benar ingin mengontrol pencahayaan dengan menutup gulungan dari Cina.  Menarik kabel di mana saja juga bukan pilihan.  Setelah banyak pertimbangan, kontrol lampu dilakukan pada unit daya dan konsol noolite dan entah bagaimana tetap berteman dengan Domoticz. <br><br>  Pada saat ini, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebuah artikel</a> tentang modul MTRF-32 dari Noolite menarik perhatian saya.  Domoticz mendukung pengiriman permintaan HTTP GET.  Prospek menggunakan modul dengan umpan balik juga memberi isyarat, jadi modul itu dipesan. <br><br><h3>  Tentang apa yang Anda perlu ukur 7 kali sebelum memotong </h3><br>  Ternyata, saya membeli tidak cukup apa yang Anda butuhkan.  Pada saat pembelian, satu modul MTRF-32 tersedia.  Dan ketika membaca artikel itu, saya tidak melihat informasi tentang varietas modul ini.  Secara umum, saya membutuhkan versi USB dari MTRF-32-USB. <br><br><div class="spoiler">  <b class="spoiler_title">Harus mengklarifikasi</b> <div class="spoiler_text">  32 berarti kemampuan untuk mengontrol lebih dari 32 saluran.  Sampai saat ini, modul dengan 64 saluran tersedia di situs web noolite, dengan kedua opsi dengan atau tanpa USB.  Pertanyaan kepada pembaca MTRF-32 dapatkah diperbarui ke MTRF-64? <br></div></div><br>  Apa yang dilakukan sudah selesai.  Selendang itu ditunda sampai <s>seseorang</s> menata <s>perpustakaan yang sudah jadi</s> lebih baik. <br><br>  Untuk beberapa alasan, waktu terbaik belum tiba.  Meskipun saya pikir sistem itu populer. <br><br><h3>  Upaya pertama </h3><br>  Setelah mengunjungi situs tersebut, Noolite menemukan perangkat lunak NooliteOne untuk bekerja dengan MTRF-64-USB.  Ternyata itu bekerja melalui port-com dan saya menyadari bahwa MTRF-64 berbeda dari MTRF-64-USB dengan adaptor USB-COM bawaan.  Perangkat lunak yang dibundel termasuk driver dari chip FTDI, dan board saya memiliki pad kontak yang sesuai. <br><br>  Saya tidak menyolder chip.  Tapi saya membuat adaptor USB-COM dari Chinese Arduino Nano dengan FTDI dan menghubungkannya ke papan tulis. <br><br>  Itu tidak lepas landas.  Untuk beberapa alasan, NooliteOne tidak dapat menemukan adaptor saya.  Saya sudah mulai melihat ke arah kompilasi ketika saya menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perpustakaan</a> untuk modul MT1132. <br><br><h3>  Upaya kedua </h3><br>  Saya membandingkan deskripsi modul dan menyadari bahwa dalam hal transfer data, mereka hampir tidak berbeda.  Fungsi yang diterapkan di perpustakaan untuk MT1132 sudah cukup bagi saya (Umpan balik belum diperlukan - tidak ada unit daya yang cocok). <br><br>  Setelah memperbaiki kode di perpustakaan, saya mulai menerima tanggapan dari MTRF-32.  Anehnya, semuanya berjalan pertama kali.  Dan inilah yang terjadi pada akhirnya: <br><br><div class="spoiler">  <b class="spoiler_title">Ardunoo.H</b> <div class="spoiler_text"><pre><code class="javascript hljs"> </code> </pre> <br>  #ifndef ARDUNOO_H <br>  #define ARDUNOO_H <br><br>  #jika ditentukan (ARDUINO) &amp;&amp; ARDUINO&gt; = 100 <br>  #include "Arduino.h" <br>  #else <br>  #sertakan "WProgram.h" <br>  #endif <br><br>  #termasuk &lt;SoftwareSerial.h&gt; <br><br>  kelas ArduNoo { <br><br>  byte chnl; <br>  SoftwareSerial ns; <br><br>  publik: <br>  ArduNoo (byte rx, byte tx, byte ch = 0); <br>  batal pada (byte ch = -1); <br>  batal (byte ch = -1); <br>  membatalkan onoff (byte ch = -1); <br>  membatalkan bind (byte ch = -1); <br>  void unbind (byte ch = -1); <br><br>  perintah bool (saluran byte, perintah byte); <br>  }; <br><br>  #endif <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Ardunoo.cpp</b> <div class="spoiler_text">  #termasuk &lt;ardunoo.h&gt; <br><br>  ArduNoo :: ArduNoo (byte rx, byte tx, byte ch): ns (rx, tx) { <br>  chnl = ch; <br>  ns.begin (9600); <br>  } <br><br>  membatalkan ArduNoo :: off (byte ch) { <br>  perintah (ch, 0); <br>  } <br><br>  membatalkan ArduNoo :: on (byte ch) { <br>  perintah (bab, 2); <br>  } <br><br>  membatalkan ArduNoo :: onoff (byte ch) { <br>  perintah (bab, 4); <br>  } <br><br>  void ArduNoo :: unbind (byte ch) { <br>  perintah (bab, 9); <br>  } <br><br>  membatalkan ArduNoo :: bind (byte ch) { <br>  perintah (bab, 15); <br>  } <br><br>  bool ArduNoo :: command (byte chnl, byte command) { <br>  byte statis i, r, buf [17] = {171.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.172}; <br>  jumlah int = 0; <br><br>  memset (buf + 2,0,14);  / * jelas isi pesan * / <br>  buf [4] = chnl; <br>  buf [5] = perintah; <br><br>  untuk (i = 0; i &lt;15; ++ i) {// 10 <br>  jumlah + = buf [i]; <br>  } <br>  buf [15] = lowByte (jumlah); // 10 <br>  buf [16] = 172; // 11 <br><br>  untuk (i = 0; i &lt;17; ++ i) { <br>  ns.write (buf [i]); <br>  } <br>  // kode debug <br>  untuk (i = 0; i &lt;17; ++ i) { <br>  while (! ns.available ()) delay (10); <br>  r = ns.read (); <br>  Serial.print¬Æ; <br>  } <br>  Serial.println (); <br><br>  kembali benar; <br>  } <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Ardunoo.ino</b> <div class="spoiler_text">  #termasuk &lt;SoftwareSerial.h&gt; <br>  #termasuk &lt;ardunoo.h&gt; <br><br>  #define RXpin 10 <br>  #define TXpin 11 <br><br>  ArduNoo noo (RXpin, TXpin); <br>  String readString, chString; <br><br>  pengaturan batal () { <br>  Serial.begin (9600); <br>  } <br><br>  void loop () { <br>  readString = ""; <br>  chString = ""; <br>  while (Serial.available ()) { <br>  keterlambatan (3);  // tunda untuk memungkinkan buffer untuk mengisi <br>  if (Serial.available ()&gt; 0) { <br>  char c = Serial.read ();  // dapatkan satu byte dari buffer serial <br>  readString + = c;  // buat string readString <br>  } <br>  } <br>  if (readString.length ()&gt; 1 &amp;&amp; readString.length () &lt;4) {// kita mengharapkan 1 huruf dan 1 atau 2 digit (ch = 0-31) <br>  untuk (int i = 1; i &lt;readString.length (); i ++) { <br>  if (isDigit (readString [i]))) { <br>  chString.concat (readString [i]); <br>  } <br>  } <br>  //Serial.println(readString[0]); <br>  int ch = chString.toInt (); <br>  switch (readString [0]) { <br>  huruf 'n': // pada <br>  noo.on (ch); <br>  istirahat; <br>  huruf 'f': // mati <br>  noo.off (ch); <br>  istirahat; <br>  huruf 'x': // beralih <br>  noo.onoff (ch); <br>  istirahat; <br>  huruf 'b': // bind <br>  noo.bind (ch); <br>  istirahat; <br>  huruf 'u': // tidak mengikat <br>  noo.unbind (ch); <br>  istirahat; <br>  huruf 'y': // di semua saluran <br>  untuk (int i = 0; i &lt;32; i ++) { <br>  siang hari (i); <br>  keterlambatan (100); <br>  } <br>  istirahat; <br>  huruf 'z': // dari semua saluran <br>  untuk (int i = 0; i &lt;32; i ++) { <br>  noo.off (i); <br>  keterlambatan (100); <br>  } <br>  istirahat; <br>  } <br>  } <br>  } <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Lisensi Perpustakaan oleh Zhumatiy Sergey</b> <div class="spoiler_text">  Lisensi MIT (MIT) <br><br>  Hak Cipta ¬© 2014 Zhumatiy Sergey <br><br>  Izin dengan ini diberikan, gratis, kepada siapa pun yang mendapatkan salinannya <br>  dari perangkat lunak ini dan file dokumentasi terkait ("Perangkat Lunak"), untuk ditangani <br>  dalam Perangkat Lunak tanpa batasan, termasuk tanpa batasan hak <br>  untuk menggunakan, menyalin, memodifikasi, menggabungkan, menerbitkan, mendistribusikan, mensublisensikan, dan / atau menjual <br>  salinan Perangkat Lunak, dan untuk mengizinkan orang kepada siapa Perangkat Lunak ini berada <br>  diperlengkapi untuk melakukannya, tunduk pada ketentuan berikut: <br><br>  Pemberitahuan hak cipta di atas dan pemberitahuan izin ini harus dimasukkan dalam semua <br>  salinan atau bagian substansial Perangkat Lunak. <br><br>  PERANGKAT LUNAK INI DISEDIAKAN "SEBAGAIMANA ADANYA", TANPA JAMINAN APA PUN, BAIK SECARA TEGAS <br>  DITERAPKAN, TERMASUK TAPI TIDAK TERBATAS PADA JAMINAN DAGANG, <br>  KESESUAIAN UNTUK TUJUAN TERTENTU DAN NONINFRINGEMENT.  DALAM ACARA TIDAK AKAN <br>  PENULIS ATAU PEMEGANG HAK CIPTA BERTANGGUNG JAWAB ATAS KLAIM, KERUSAKAN ATAU LAINNYA <br>  KEWAJIBAN, APAKAH DALAM TINDAKAN KONTRAK, TORT ATAU LAINNYA, TINGGAL DARI, <br>  DI LUAR ATAU DALAM HUBUNGAN DENGAN PERANGKAT LUNAK ATAU PENGGUNAAN ATAU HUBUNGAN LAINNYA DALAM <br>  PERANGKAT LUNAK. <br></div></div><br>  Perintah yang diimplementasikan adalah mematikan, menghidupkan, menghidupkan, menghidupkan semua, mematikan semua. <br><br>  Masalahnya kecil, Anda perlu memberikan perintah ke port com.  Karena ini bermasalah dari Domoticz di Windows, saya memutuskan untuk menulis aplikasi konsol yang akan menerjemahkan perintah dari skrip lua.  Perintah dilewatkan ke aplikasi sebagai parameter peluncuran. <br><br><div class="spoiler">  <b class="spoiler_title">noo.cs</b> <div class="spoiler_text">  menggunakan Sistem; <br>  menggunakan System.Collections.Generic; <br>  menggunakan System.Linq; <br>  menggunakan System.Text; <br>  menggunakan System.IO.Ports; <br><br>  namespace noo <br>  { <br>  program kelas <br>  { <br>  static void Main (string [] args) <br>  { <br>  if (args.Length == 2) <br>  { <br>  SerialPort COM = SerialPort baru (args [0]); <br>  COM.Open (); <br>  COM.WriteLine (args [1]); <br>  COM.Tutup (); <br>  } <br>  } <br>  } <br>  } <br></div></div><br><h3>  Contoh perintah: </h3><br>  noo.exe com5 n4 - nyalakan lampu pada saluran 4, itu ditransmisikan ke papan Arduino pada port COM5.  Nilai yang mungkin dari parameter pemicu kedua: <br><br><ul><li>  nX - aktifkan saluran X </li><li>  fX - matikan saluran X </li><li>  xX - beralih saluran X </li><li>  bX - ikat blok daya ke saluran X </li><li>  uX - lepaskan blok daya dari saluran X </li><li>  yX - mengaktifkan semua saluran, X nilai apa pun </li><li>  zX - matikan semua saluran, X nilai apa pun </li></ul><br><div class="spoiler">  <b class="spoiler_title">naskah lua</b> <div class="spoiler_text">  sensor1 lokal = 'SWHallWay' <br>  sensor2 lokal = 'SWHall' <br>  sensor3 lokal = 'SWKitchen' <br>  sensor4 lokal = 'SWBedroom' <br>  sensor5 lokal = 'BTNLiteOff' <br>  commandArray = {} <br>  if (devicechanged [sensor1] == 'On') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ script \\ noo.exe com4 n3") <br>  akhir <br>  if (devicechanged [sensor1] == 'Off') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ scripts \\ noo.exe com4 f3") <br>  akhir <br>  if (devicechanged [sensor2] == 'On') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ scripts \\ noo.exe com4 n0") <br>  akhir <br>  if (devicechanged [sensor2] == 'Off') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ scripts \\ noo.exe com4 f0") <br>  akhir <br>  if (devicechanged [sensor3] == 'On') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ script \\ noo.exe com4 n1") <br>  akhir <br>  if (devicechanged [sensor3] == 'Off') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ scripts \\ noo.exe com4 f1") <br>  akhir <br>  if (devicechanged [sensor4] == 'On') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ script \\ noo.exe com4 n2") <br>  akhir <br>  if (devicechanged [sensor4] == 'Off') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ script \\ noo.exe com4 f2") <br>  akhir <br>  if (devicechanged [sensor5] == 'Off') lalu <br>  os.execute ("c: \\ PROGRA ~ 1 \\ Domoticz \\ scripts \\ noo.exe com4 z9") <br>  akhir <br>  kembali commandArray <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Denah lantai dasar di Domoticz</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/9b9/300/3b5/9b93003b5232474da997a3bf950765b1.PNG"><br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Video</a> pendek </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id402799/">https://habr.com/ru/post/id402799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id402785/index.html">Menyimpan game di Nintendo Switch dapat hilang kapan saja: tidak ada cadangan</a></li>
<li><a href="../id402791/index.html">Kerentanan kritis dalam Xfce yang dapat menyebabkan kegagalan monitor belum diperbaiki</a></li>
<li><a href="../id402793/index.html">Thermal-acoustic engine - Mesin stirling tanpa piston</a></li>
<li><a href="../id402795/index.html">Apa itu antibiotik?</a></li>
<li><a href="../id402797/index.html">Di Norwegia, parasit ikan berjuang dengan robot laser bawah air</a></li>
<li><a href="../id402803/index.html">Istilah "kecerdasan buatan" telah kehilangan semua makna</a></li>
<li><a href="../id402805/index.html">Buatan Rusia: Korektor postur tubuh Oscor dengan umpan balik yang bagus</a></li>
<li><a href="../id402807/index.html">Mikroskop elektron di garasi. Tegangan tinggi</a></li>
<li><a href="../id402809/index.html">Ponsel pintar mungkin bisa disalahkan atas peningkatan jumlah kecelakaan yang melibatkan pejalan kaki</a></li>
<li><a href="../id402811/index.html">RuTracker diblokir, tetapi jumlah torrent yang diunduh tidak berubah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>