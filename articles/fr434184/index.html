<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏴 👏🏽 💆 Comment se faire des amis Alice et HomeBridge 🏴 ⚒️ 💃🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD 08/06/2019: C'est arrivé, il est devenu possible de demander à Alice elle-même d'allumer la lumière . Le projet est sur le github . Vérifié sur so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment se faire des amis Alice et HomeBridge</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434184/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/u_/ii/8i/u_ii8i75ovakz625savr9lbudba.png" alt="image"></div><br>  <b>UPD 08/06/2019:</b> C'est arrivé, il <b>est devenu possible de demander à Alice elle-même d'allumer la lumière</b> .  Le projet est sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">github</a> .  Vérifié sur son homebridge, tout fonctionne.  Je considère qu'un soutien supplémentaire de mes compétences n'est pas approprié. <br><br>  Je recherche depuis longtemps, en plus de la maison intelligente, un assistant vocal qui comprend et parle le russe.  En conséquence, j'ai décidé de tenter ma chance et de prendre une nouvelle colonne brute Yandex.Station avec une jeune, mais déjà très aimée Alice.  La première impression a été excellente, mais quand j'ai entendu beaucoup de blagues et parlé suffisamment, j'ai commencé à apprendre le côté pratique de la colonne.  Surtout, je m'intéressais à la question de l'interaction d'Alice avec la maison intelligente. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Description du problème</b> <div class="spoiler_text">  Ma maison est basée sur un serveur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">HomeBridge</a> .  Beaucoup d'articles ont été écrits sur sa configuration et son utilisation sur le Habré et d'autres ressources ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">deux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">trois</a> ), donc je ne m'attarderai pas là-dessus.  N'ayant pas étudié la question à fond, j'étais sûr que le catalogue de compétences d'Alice avait déjà de nombreuses solutions pour interagir avec les systèmes de contrôle de la maison intelligente.  Il s'est avéré qu'au moment de la rédaction de ce document, la plupart des compétences sur le sujet de la «maison intelligente» nécessitent un appareil avec un écran de travail, qui ne convient pas à la station.  La seule compétence qui semblait répondre aux exigences et savoir comment travailler sans écran était <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Alfred</a> .  La compétence ne me convenait pas car elle est liée à un service - IFTTT.  Supposons que je veuille créer un commutateur virtuel qui fonctionne dans un système domestique intelligent et vous permet de lier des scripts à son état actuel.  Alfred utilise le service WebHook pour IFTTT avec lequel vous ne pouvez agir que sur le déclencheur créé dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">applet IFTTT,</a> mais il n'y a aucun moyen d'obtenir l'état actuel de l'applet (vous pouvez activer ou désactiver le commutateur, mais vous ne pouvez pas savoir dans quel état le commutateur est maintenant). <br></div></div><br>  Pour résoudre le problème ci-dessus, le service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Alice-HomeBridge</a> a été créé, conçu pour connecter l'assistant vocal Yandex.Alice et divers systèmes de contrôle de la maison intelligente.  De plus, comme exemple de paramètres, nous considérerons la configuration de HomeBridge, mais cette approche est également applicable à d'autres systèmes tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Home Assistant</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">openHAB</a> et autres. <br><br>  Le service permet aux utilisateurs, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">après leur inscription sur le site, de</a> créer des commutateurs virtuels. <br><br><img src="https://habrastorage.org/webt/ch/e_/hr/che_hrwfku3y_guj9yh3amj7yn4.png"><br><br>  Vous pouvez modifier ou connaître l'état des commutateurs à l'aide d'une demande de service GET spécialement générée. <br><br><img src="https://habrastorage.org/webt/ev/um/-u/evum-ulou_hyouaetd4oejdqzne.png"><br><br>  Afin que le service interagisse avec l'assistant vocal "Alice", la compétence "Lazy Jimmy" a été créée. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img alt="Jimmy paresseux" src="https://habrastorage.org/getpro/habr/post_images/318/3f3/f42/3183f3f422f73cfc44b3e4ebd936ab33.svg"></a> <br>  Dites à Alice: «Exécutez la compétence paresseux Jimmy» et il vous proposera de vous informer du code d'activation, que vous pouvez trouver dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">votre compte personnel</a> . <br><br><img src="https://habrastorage.org/webt/nl/9l/ks/nl9lksijqnfjbvld5ul5xycfnza.png"><br><br>  Après l'activation, vous pouvez modifier l'état de vos commutateurs à l'aide des commandes Activer ou Désactiver.  Par exemple, si vous dites «Allumer la lumière», l'état du commutateur «Lumière» devient positif.  Si vous dites simplement «Light», l'état de l'interrupteur changera à l'opposé. <br><br>  Pour que le dialogue semble plus naturel, il est possible de créer des commutateurs avec des noms plus compréhensibles, par exemple, "Avec Utrechk", alors vous pouvez dire à Alice "Tell Jimmy With Utrechk" et l'état du commutateur changera. <br><br>  Reste à configurer HomeBridge.  Par exemple, nous utiliserons l'extension <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">cmdswitch2</a> .  Créez un commutateur pour HomeKit appelé «Alice Button 1». <br><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"cmdSwitch2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"CMD Switch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"switches"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Alice Button 1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"on_cmd"</span></span>: <span class="hljs-string"><span class="hljs-string">"curl --silent \"http://alicehomebridge.org/alice/switches.php?switch=34&amp;hb=ADB7BYBT728O&amp;state=set&amp;val=true\""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"off_cmd"</span></span>: <span class="hljs-string"><span class="hljs-string">"curl --silent \"http://alicehomebridge.org/alice/switches.php?switch=34&amp;hb=ADB7BYBT728O&amp;state=set&amp;val=false\""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state_cmd"</span></span>: <span class="hljs-string"><span class="hljs-string">"curl --silent \"http://alicehomebridge.org/alice/switches.php?switch=34&amp;hb=ADB7BYBT728O&amp;state=get\" | grep -oh \"true\""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"polling"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"interval"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> } ] }</code> </pre> <br>  Afin de ne pas surcharger le serveur avec des demandes inutiles, définissez le paramètre d'intervalle sur au moins 2 secondes. <br><br>  Tout est prêt. <br><br><img src="https://habrastorage.org/webt/vh/5t/4y/vh5t4ykyxbsexa2-pzuib09_bzs.png"><br><br>  Maintenant, si vous dites «Alice dit au paresseux Jimmy avec le mot du matin», le commutateur «Alice Button 1» changera d'état.  Voici une démonstration de la façon dont tout fonctionne conjointement avec les scripts HomeKit personnalisés: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hGNGzKjo7Os" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Version complète du fichier de configuration HomeBridge</a> <br><br>  <b>PS</b> La plupart des systèmes de gestion domestique intelligents, tels que HomeKit, prennent en charge les scripts.  Vous pouvez créer un script que vous souhaitez utiliser dans une situation spécifique, par exemple, lorsque vous vous réveillez et affectez son appel à l'événement «Turn On the Utrechok Switch». <br><br>  <b>PS</b> Mon service ne fait que se développer et est encore, pour le moins, loin d'être idéal.  Mais Alice refuse également d'accepter certaines phrases de temps en temps.  Par exemple, elle transmet parfaitement l'expression «Allumez la lumière» à la compétence, mais elle ne passera pas l'expression «Bonjour».  J'espère que Yandex connaît le problème et le réglera bientôt.  En attente de vos commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434184/">https://habr.com/ru/post/fr434184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434174/index.html">Génétique du cultivar Romanesco: un modèle mathématique fractal d'expression des gènes</a></li>
<li><a href="../fr434176/index.html">Se préparer à enquêter sur les incidents</a></li>
<li><a href="../fr434178/index.html">Comment un fournisseur de services a fait son Service Desk</a></li>
<li><a href="../fr434180/index.html">Évaluation de droidcon SF</a></li>
<li><a href="../fr434182/index.html">L'impression à jet d'encre comme l'un des domaines de la dynamique des fluides appliquée</a></li>
<li><a href="../fr434186/index.html">Méta-sélection: ce que les publications étrangères sont invitées à donner en vacances</a></li>
<li><a href="../fr434188/index.html">Security Week 52: The Greatest Hits</a></li>
<li><a href="../fr434190/index.html">Comment créer un miracle de Noël numérique: une interview avec CIO Santa Claus</a></li>
<li><a href="../fr434192/index.html">Comment Baldur's Gate a sauvé les RPG informatiques</a></li>
<li><a href="../fr434194/index.html">Développement de compétences pour Alice. Expérience avec les interfaces vocales, conseils pour les débutants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>