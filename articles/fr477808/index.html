<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ»â€ğŸ¨ ğŸ‘ ğŸ‘¨ğŸ»â€ğŸ“ Nous nous dÃ©barrassons des avertissements gÃªnants lors de l'entrÃ©e dans le serveur de terminal ğŸ˜½ ğŸ‘©ğŸ¿â€âš–ï¸ ğŸ“˜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a pas si longtemps, nous avons implÃ©mentÃ© la solution sur un serveur Terminal Server Windows. Comme d'habitude, ils ont jetÃ© des raccourcis pou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous nous dÃ©barrassons des avertissements gÃªnants lors de l'entrÃ©e dans le serveur de terminal</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pc-administrator/blog/477808/"><p><img src="https://habrastorage.org/getpro/habr/post_images/702/310/c1f/702310c1fe62aa89d2d3c2f35fe47ef0.jpg"></p><br><p>  Il n'y a pas si longtemps, nous avons implÃ©mentÃ© la solution sur un serveur Terminal Server Windows.  Comme d'habitude, ils ont jetÃ© des raccourcis pour se connecter aux bureaux des employÃ©s et ont dit - travail.  Mais les utilisateurs Ã©taient intimidÃ©s en termes de cybersÃ©curitÃ©.  Et lorsque vous vous connectez au serveur, vous voyez des messages comme: Â«Faites-vous confiance Ã  ce serveur?  Exactement? ", Ils avaient peur et se sont tournÃ©s vers nous - est-ce que tout va bien, pouvez-vous cliquer sur OK?  Ensuite, il a Ã©tÃ© dÃ©cidÃ© de tout faire Ã  merveille, de sorte qu'il n'y ait pas de questions et de panique. </p><br><p>  Si vos utilisateurs viennent toujours Ã  vous avec des craintes similaires, et que vous en avez assez de cocher la case Â«Ne plus demanderÂ» - bienvenue sous cat. </p><a name="habracut"></a><br><h1 id="shag-nulevoy-podgotovka-i-voprosy-doveriya">  Ã‰tape zÃ©ro.  ProblÃ¨mes de formation et de confiance </h1><br><p>  Ainsi, notre utilisateur fouille le fichier enregistrÃ© avec l'extension .rdp et reÃ§oit une telle demande: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/017/d20/a69/017d20a69c2fa84f756e8835f00d0b78.jpg"></p><br><p>  <em>Connexion "malveillante"</em> . </p><br><p> Pour se dÃ©barrasser de cette fenÃªtre, un utilitaire spÃ©cial appelÃ© <strong>RDPSign.exe est utilisÃ©.</strong>  La documentation complÃ¨te est disponible, comme d'habitude, sur le <a href="https://docs.microsoft.com/ru-ru/windows-server/administration/windows-commands/rdpsign">site officiel</a> , et nous analyserons un exemple d'utilisation. </p><br><p>  Nous devons d'abord prendre un certificat pour signer le fichier.  Cela peut Ãªtre: </p><br><ul><li>  Publique </li><li>  DÃ©livrÃ© par l'autoritÃ© de certification de l'autoritÃ© interne. </li><li>  Absolument auto-signÃ©. </li></ul><br><p>  Plus important encore, le certificat doit pouvoir signer (oui, vous pouvez sÃ©lectionner <br>  Comptables EDS) et les PC clients lui ont fait confiance.  Ici, je vais utiliser un certificat auto-signÃ©. </p><br><p>  Permettez-moi de vous rappeler que la confiance dans un certificat auto-signÃ© peut Ãªtre organisÃ©e Ã  l'aide de stratÃ©gies de groupe.  Un peu plus de dÃ©tails - sous le spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Comment rendre un certificat approuvÃ© Ã  l'aide de GPO Magic</b> <div class="spoiler_text"><p>  Vous devez d'abord prendre un certificat existant sans clÃ© privÃ©e au format .cer (cela peut Ãªtre fait en exportant le certificat Ã  partir du composant logiciel enfichable Certificats) et le placer dans un dossier rÃ©seau accessible aux utilisateurs.  AprÃ¨s cela, vous pouvez configurer la stratÃ©gie de groupe. </p><br><p>  L'importation de certificats est configurÃ©e dans la section: Configuration ordinateur - StratÃ©gies - Configuration Windows - ParamÃ¨tres de sÃ©curitÃ© - StratÃ©gies de clÃ© publique - AutoritÃ©s de certification racine de confiance.  Ensuite, cliquez avec le bouton droit pour importer le certificat. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/089/2e2/57e/0892e257e9796e10bf8a093f776042ff.jpg"></p><br><p>  <em>Politique personnalisÃ©e.</em> </p><br><p>  Les PC clients feront dÃ©sormais confiance au certificat auto-signÃ©. </p></div></div><br><p>  Si les problÃ¨mes de confiance sont rÃ©solus, nous procÃ©dons directement Ã  l'Ã©mission de signature. </p><br><h1 id="shag-pervyy-razmashisto-podpisyvaem-fayl">  PremiÃ¨re Ã©tape.  Fichier signÃ© Ã  grande Ã©chelle </h1><br><p>  Il existe un certificat, vous devez maintenant connaÃ®tre son empreinte digitale.  Il vous suffit de l'ouvrir dans le composant logiciel enfichable "Certificats" et de le copier dans l'onglet "Composition". </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c10/1c7/a08/c101c7a087b3114a04844f520e8c6c25.jpg"></p><br><p>  <em>Nous avons besoin de l'empreinte digitale.</em> </p><br><p>  Il est prÃ©fÃ©rable de l'amener immÃ©diatement Ã  sa forme appropriÃ©e - uniquement en majuscules et sans espaces, le cas Ã©chÃ©ant.  Cela peut Ãªtre facilement effectuÃ© dans la console PowerShell avec la commande: </p><br><pre><code class="bash hljs">(<span class="hljs-string"><span class="hljs-string">"6b142d74ca7eb9f3d34a2fe16d1b949839dba8fa"</span></span>).ToUpper().Replace(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>)</code> </pre> <br><p>  AprÃ¨s avoir reÃ§u l'empreinte digitale dans le format souhaitÃ©, vous pouvez signer en toute sÃ©curitÃ© le fichier rdp: </p><br><pre> <code class="bash hljs">rdpsign.exe /sha256 6B142D74CA7EB9F3D34A2FE16D1B949839DBA8FA .\contoso.rdp</code> </pre><br><p>  OÃ¹. \ Contoso.rdp est le chemin absolu ou relatif de notre fichier. </p><br><blockquote>  Une fois le fichier signÃ©, il n'est plus possible de modifier certains paramÃ¨tres via une interface graphique comme le nom du serveur (est-il valide, Ã  quoi d'autre sert-il de signer?) Et si vous modifiez les paramÃ¨tres avec un Ã©diteur de texte, la signature Â«voleÂ». </blockquote><p>  Maintenant, lorsque vous double-cliquez sur le raccourci, le message sera diffÃ©rent: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/76f/080/bd9/76f080bd9fd2d0bd59ce5c10aeca95b3.jpg"></p><br><p>  <em>Nouveau message.</em>  <em>Couleur moins dangereuse, progresse dÃ©jÃ .</em> </p><br><p>  DÃ©barrassons-nous de lui aussi. </p><br><h1 id="shag-vtoroy-i-snova-voprosy-doveriya">  DeuxiÃ¨me Ã©tape  Et encore une fois, les problÃ¨mes de confiance </h1><br><p>  Pour nous dÃ©barrasser de ce message, nous aurons Ã  nouveau besoin d'une stratÃ©gie de groupe.  Cette fois, la route se trouve dans Configuration ordinateur - StratÃ©gies - ModÃ¨les d'administration - Composants Windows - Services Bureau Ã  distance - Client de connexion Bureau Ã  distance - SpÃ©cifiez les empreintes digitales SHA1 des certificats reprÃ©sentant les Ã©diteurs RDP de confiance. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d09/240/479/d0924047971139996ea0bbc3550bc8b8.jpg"></p><br><p>  <em>Nous avons besoin d'une politique.</em> </p><br><p>  En politique, il suffit d'ajouter l'empreinte digitale que nous connaissons dÃ©jÃ  Ã  l'Ã©tape prÃ©cÃ©dente. </p><br><blockquote>  Il convient de noter que cette stratÃ©gie remplace la stratÃ©gie Â«Autoriser les fichiers RDP des Ã©diteurs valides et les paramÃ¨tres RDP par dÃ©faut de l'utilisateurÂ». </blockquote><p><img src="https://habrastorage.org/getpro/habr/post_images/4a7/d3d/d78/4a7d3dd7883ceaf71bcf6698edead822.jpg"></p><br><p>  <em>Politique personnalisÃ©e.</em> </p><br><p>  Voila, maintenant pas de questions Ã©tranges - juste une demande de login-mot de passe.  Hmm ... </p><br><h1 id="shag-tretiy-prozrachnyy-vhod-na-server">  TroisiÃ¨me Ã©tape  Connexion transparente au serveur </h1><br><p>  En effet, si nous sommes dÃ©jÃ  autorisÃ©s Ã  entrer dans l'ordinateur du domaine, alors pourquoi devons-nous ressaisir le mÃªme nom d'utilisateur et le mÃªme mot de passe?  Nous transfÃ©rerons les informations d'identification sur le serveur Â«de maniÃ¨re transparenteÂ».  Dans le cas d'un RDP simple (sans utiliser la passerelle RDS), nous viendrons Ã  notre aide ... C'est vrai, la politique de groupe. </p><br><p>  Nous allons Ã  la section: Configuration de l'ordinateur - StratÃ©gies - ModÃ¨les d'administration - SystÃ¨me - Transfert des informations d'identification - Autoriser le transfert des informations d'identification par dÃ©faut. </p><br><p>  Ici, vous pouvez ajouter les serveurs nÃ©cessaires Ã  la liste ou utiliser des caractÃ¨res gÃ©nÃ©riques.  Il ressemblera Ã  <strong>TERMSRV / trm.contoso.com</strong> ou <strong>TERMSRV /</strong> <b>*</b> <strong>.contoso.com.</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/712/fa7/3bb/712fa73bb547a895b1a8a4c65c8ae640.jpg"></p><br><p>  <em>Politique personnalisÃ©e.</em> </p><br><p>  Maintenant, si vous regardez notre raccourci, il ressemblera Ã  ceci: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/caf/153/8ec/caf1538ec0a117ec8288dd53372dab1d.jpg"></p><br><p>  <em>Ne modifiez pas le nom d'utilisateur.</em> </p><br><p>  Si vous utilisez RDS Gateway, vous devrez Ã©galement autoriser le transfert de donnÃ©es dessus.  Pour ce faire, dans le Gestionnaire des services Internet, dans les "MÃ©thodes d'authentification", dÃ©sactivez l'authentification anonyme et activez l'authentification Windows. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0cb/a26/4a2/0cba264a2f7d8320fdd4487d511bd85f.jpg"></p><br><p>  <em>IIS configurÃ©.</em> </p><br><p>  N'oubliez pas de redÃ©marrer les services Web lorsque vous avez terminÃ©: </p><br><pre> <code class="bash hljs">iisreset /noforce</code> </pre><br><p>  Maintenant, tout va bien, pas de questions et demandes. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477808/">https://habr.com/ru/post/fr477808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477790/index.html">Comment le systÃ¨me de satellites Galileo s'est dÃ©connectÃ© en raison d'une confusion organisationnelle et d'autres problÃ¨mes</a></li>
<li><a href="../fr477792/index.html">Quand gagner est votre profil</a></li>
<li><a href="../fr477800/index.html">Faits saillants du forum de dÃ©veloppement Web Chrome Web Dev Summit 2019</a></li>
<li><a href="../fr477802/index.html">BoÃ®tier pour appareil Ã©lectronique: comment le concevoir et le fabriquer en Chine</a></li>
<li><a href="../fr477804/index.html">Le chemin vers l'intelligence naturelle</a></li>
<li><a href="../fr477810/index.html">Nous fabriquons un routeur et un NAS sur un seul processeur</a></li>
<li><a href="../fr477812/index.html">Examen de la lÃ©gislation russe pour protÃ©ger les infrastructures d'informations critiques</a></li>
<li><a href="../fr477814/index.html">Existe-t-il des virus sous Mac?</a></li>
<li><a href="../fr477816/index.html">Comment trouver un emploi avec un bon contrat</a></li>
<li><a href="../fr477818/index.html">Comment devenir Data Scientist en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>