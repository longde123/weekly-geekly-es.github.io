<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèø üêÄ üë®üèº‚Äçüíª API JSON: trabajamos de acuerdo con las especificaciones üßóüèº üë©‚Äçüöí üñïüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, el desarrollo web se ha dividido. Ahora no todos somos programadores completos, somos front-end y back-end. Y lo m√°s dif√≠cil de esto, c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>API JSON: trabajamos de acuerdo con las especificaciones</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/433322/">  Recientemente, el desarrollo web se ha dividido.  Ahora no todos somos programadores completos, somos front-end y back-end.  Y lo m√°s dif√≠cil de esto, como en otros lugares, es el problema de interacci√≥n e integraci√≥n. <br><br>  El frontend con el backend interact√∫a a trav√©s de la API.  Y todo el resultado del desarrollo depende de qu√© API es, qu√© tan bueno o malo han acordado el backend y la interfaz.  Si todos comenzamos a discutir juntos c√≥mo hacer la actualizaci√≥n, y pasamos todo el d√≠a reelaborando, entonces es posible que no lleguemos a las tareas comerciales. <br><br>  Para no resbalar y generar holivars sobre los nombres de las variables, necesita una buena especificaci√≥n.  Hablemos de c√≥mo deber√≠a ser facilitar la vida de todos.  Al mismo tiempo, nos convertiremos en expertos en cobertizos para bicicletas. <br><br><img src="https://habrastorage.org/webt/o4/me/1u/o4me1uwmahvlwsnvqxyf_rzwa1i.jpeg"><br><a name="habracut"></a><br>  Comencemos desde lejos, con el problema que estamos resolviendo. <br><br>  Hace mucho tiempo, en 1959, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cyril Parkinson</a> (que no debe confundirse con la enfermedad, es escritor y una figura econ√≥mica) propuso varias leyes interesantes.  Por ejemplo, que los gastos crecen con los ingresos, etc.  Una de ellas se llama la Ley de la trivialidad: <br><br><blockquote>  El tiempo dedicado a discutir el art√≠culo es inversamente proporcional a la cantidad considerada. <br></blockquote><br>  Parkinson era economista, por lo que explic√≥ sus leyes en t√©rminos econ√≥micos, algo as√≠.  Si viene a la junta directiva y dice que necesita $ 10 millones para construir una planta de energ√≠a nuclear, lo m√°s probable es que este tema se discuta mucho menos que la asignaci√≥n de 100 libras para un cobertizo de bicicletas para los empleados.  Como todos saben c√≥mo construir un cobertizo para bicicletas, todos tienen su propia opini√≥n, todos se sienten importantes y quieren participar, y la planta de energ√≠a nuclear es algo abstracto y distante, 10 millones tampoco se han visto nunca; hay menos preguntas. <br><br>  En 1999, la ley de la trivialidad de Parkinson apareci√≥ en la programaci√≥n, que luego se desarroll√≥ activamente.  En programaci√≥n, esta ley se encontr√≥ principalmente en literatura en ingl√©s y sonaba como una met√°fora.  Se llamaba <strong>el efecto Bikeshed</strong> (el efecto de un cobertizo para bicicletas), pero la esencia es la misma: estamos listos para un cobertizo para bicicletas y queremos discutir mucho m√°s que la construcci√≥n de una planta de energ√≠a. <br><br>  Este t√©rmino fue acu√±ado por el desarrollador dan√©s Poul-Henning Kamp, quien particip√≥ en la creaci√≥n de FreeBSD.  Durante el proceso de dise√±o, el equipo pas√≥ mucho tiempo discutiendo c√≥mo deber√≠a funcionar la funci√≥n del sue√±o.  Esta es una cita de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">carta de</a> Poul-Henning Kamp (el desarrollo se llev√≥ a cabo por correo electr√≥nico): <br><br><blockquote>  Fue una propuesta para hacer dormir (1) DTRT Si se le da un argumento no entero que desencaden√≥ este incendio de c√©sped en particular, no voy a decir nada m√°s al respecto que eso, porque es un elemento mucho m√°s peque√±o de lo que uno podr√≠a esperar de la longitud del hilo, y ya ha recibido mucha m√°s atenci√≥n que algunos de los * problemas * que tenemos por aqu√≠. <br></blockquote><br>  En esta carta, dice que hay muchos problemas sin resolver mucho m√°s importantes: "¬°No tratemos con el cobertizo para bicicletas, haremos algo con esto y seguiremos adelante!" <br><br>  Entonces, Poul-Henning Kamp en 1999 introdujo el t√©rmino efecto bikeshed en la literatura en ingl√©s, que puede reformularse como: <br><br><blockquote>  La cantidad de ruido creado por el cambio en el c√≥digo es inversamente proporcional a la complejidad del cambio. <br></blockquote><br>  Cuanto m√°s simple sea la adici√≥n o el cambio que hagamos, m√°s opiniones debemos escuchar al respecto.  Creo que muchos se han encontrado con esto.  Si resolvemos una pregunta simple, por ejemplo, c√≥mo nombrar variables, no importa para una m√°quina: esta pregunta causar√° una gran cantidad de holivares.  Pero los problemas serios, realmente importantes para los negocios no se discuten y pasan a un segundo plano. <br><br>  ¬øQu√© crees que es m√°s importante: c√≥mo nos comunicamos entre el backend y la interfaz, o las tareas comerciales que hacemos?  Todos piensan de manera diferente, pero cualquier cliente, una persona que espera que le traigas dinero, dir√°: "¬°Haz mis tareas comerciales ya!"  Absolutamente no le importa c√≥mo transfieres datos entre el backend y el frontend.  Quiz√°s ni siquiera sabe lo que son un backend y una interfaz. <br><br>  Para resumir la introducci√≥n, me gustar√≠a decir: <strong>API es un cobertizo para bicicletas.</strong> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1cJVwn44iSc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace de</a></em> <em>presentaci√≥n</em> <br><br>  <strong>Sobre el orador:</strong> Alexey Avdeev ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Avdeev</a> ) trabaja para la empresa Neuron.Digital, que se ocupa de las neuronas y hace una interfaz genial para ellas.  Alex tambi√©n presta atenci√≥n a OpenSource y aconseja a todos.  Ha estado involucrado en el desarrollo durante mucho tiempo: desde 2002, descubri√≥ la antigua Internet, cuando las computadoras eran grandes, Internet era peque√±a y la ausencia de JS no molestaba a nadie y a todos inventaban sitios en las mesas. <br><br><h2>  ¬øC√≥mo lidiar con cobertizos para bicicletas? <br></h2><br>  Despu√©s de que el respetado Cyril Parkinson dedujera la ley de la trivialidad, fue muy discutido.  Resulta que el efecto de un cobertizo para bicicletas aqu√≠ se puede evitar f√°cilmente: <br><br><ol><li>  <strong>No escuches los consejos.</strong>  Creo que la idea es regular: si no escucha los consejos, puede hacer tal cosa, especialmente en programaci√≥n, y especialmente si es un desarrollador novato. <br></li><li>  <strong>Haz lo que quieras.</strong>  "Soy un artista, ¬°ya lo veo!"  - sin efecto bikeshed, todo lo que necesita est√° hecho, pero aparecen cosas muy extra√±as en la salida.  Esto a menudo se encuentra en forma independiente.  Seguramente te encontraste con tareas que ten√≠as que completar para otros desarrolladores y la implementaci√≥n de las cuales te caus√≥ desconcierto. <br></li><li>  <strong>¬øEs importante preguntarte a ti mismo?</strong>  Si no, simplemente no puede discutirlo, pero es una cuesti√≥n de conciencia personal. <br></li><li>  <strong>Utiliza criterios objetivos.</strong>  Hablar√© sobre este punto en el informe.  Para evitar el efecto de un cobertizo para bicicletas, puede usar criterios que digan objetivamente cu√°l es mejor.  Ellos existen <br></li><li>  <strong>No hable de lo que no quiere escuchar consejos.</strong>  En nuestra compa√±√≠a, los desarrolladores principiantes de back-end son introvertidos, por lo que sucede que hacen algo de lo que no se lo dicen a otros.  Como resultado, nos encontramos con sorpresas.  Este m√©todo funciona, pero en la programaci√≥n no es la mejor opci√≥n. <br></li><li>  Si no le importa el problema, simplemente puede <strong>dejarlo pasar o elegir cualquiera de las opciones propuestas</strong> que surgieron en el proceso de holivarov. <br></li></ol><br><h2>  Herramienta anti-bikeshedding <br></h2><br>  Quiero hablar sobre <strong>herramientas objetivas</strong> para resolver el problema de un cobertizo para bicicletas.  Para demostrar qu√© es una herramienta anti-bikeshedding, te contar√© una peque√±a historia. <br><br>  Imagine que tenemos un desarrollador backend novato.  Recientemente lleg√≥ a la empresa y se le indic√≥ que dise√±ara un peque√±o servicio, por ejemplo, un blog, para el que debe escribir un protocolo REST. <br><br><img src="https://habrastorage.org/webt/zn/9m/uk/zn9muk80uvsd_yuragws16ms70c.png">  <em>Roy Fielding, autor de REST</em> <br><br>  En la foto, Roy Fielding, quien en el a√±o 2000 defendi√≥ su tesis "Estilos arquitect√≥nicos y dise√±o de arquitecturas de software de red" e introdujo el t√©rmino REST.  Adem√°s, invent√≥ HTTP y, de hecho, es uno de los fundadores de Internet. <br><br>  REST es un conjunto de principios arquitect√≥nicos que dicen c√≥mo dise√±ar protocolos REST, API REST, servicios RESTful.  Estos son principios arquitect√≥nicos bastante abstractos y complejos.  Estoy seguro de que ninguno de ustedes ha visto una API hecha completamente de acuerdo con todos los principios RESTful. <br><br><h2>  Requisitos de arquitectura REST <br></h2><br>  Dar√© algunos requisitos para los protocolos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">REST</a> , a los que luego me referir√© y en los que confiar√©.  Hay bastantes, puedes leer m√°s sobre esto en Wikipedia. <br><br>  1. <strong>El modelo cliente-servidor.</strong> <br>  El principio m√°s importante de REST, es decir, nuestra interacci√≥n con el backend.  Seg√∫n REST, el backend es un servidor, el front-end es un cliente y nos comunicamos en un formato cliente-servidor.  Los dispositivos m√≥viles tambi√©n son clientes.  Los desarrolladores de relojes, refrigeradores y otros servicios tambi√©n desarrollan la parte del cliente.  La API RESTful es el servidor al que accede el cliente. <br><br>  2. <strong>Falta de condici√≥n.</strong> <br>  No debe haber estado en el servidor, es decir, todo lo que se necesita para una respuesta viene en la solicitud.  Cuando una sesi√≥n se almacena en el servidor, y dependiendo de esta sesi√≥n, se obtienen diferentes respuestas, esto es una violaci√≥n del principio REST. <br><br>  3. <strong>Uniformidad de la interfaz.</strong> <br>  Este es uno de los principios subyacentes clave sobre los que se debe construir la API REST.  Incluye lo siguiente: <br><br><ul><li>  La identificaci√≥n de recursos es c√≥mo debemos construir una URL.  En REST, recurrimos al servidor en busca de alg√∫n tipo de recurso. </li><li>  Manipulaci√≥n de recursos mediante presentaci√≥n.  El servidor nos devuelve una vista diferente de la que se encuentra en la base de datos.  No importa si almacena la informaci√≥n en MySQL o PostgreSQL, tenemos una vista. </li><li>  Mensajes de autodescripci√≥n, es decir, el mensaje contiene id, enlaces donde puede obtener este mensaje nuevamente, todo lo que se necesita para trabajar con este recurso nuevamente. </li><li>  Hypermedia es un enlace a las siguientes acciones con un recurso.  Me parece que ni una sola API REST lo hace, pero Roy Fielding lo describe. </li></ul><br>  Hay 3 principios m√°s que no cito porque no son importantes para mi historia. <br><br><h2>  Blog RESTful <br></h2><br>  Volver al desarrollador backend inicial, a quien se le pidi√≥ que hiciera un servicio para el blog en RESTful.  A continuaci√≥n se muestra un ejemplo de un prototipo. <br><br><img src="https://habrastorage.org/webt/op/wi/6l/opwi6l_tbihj0tvef8tu4feyoo4.png"><br><br>  Este es un sitio en el que hay art√≠culos, puede comentar sobre ellos, el art√≠culo y los comentarios tienen un autor, una historia est√°ndar.  Nuestro desarrollador backend novato har√° una API RESTful para este blog. <br><br>  Trabajamos con todos los datos del blog sobre la base de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CRUD</a> . <br><img src="https://habrastorage.org/webt/4i/rk/hm/4irkhm7dcicexgmqomprfdraisu.png"><br>  Deber√≠a ser posible crear, leer, actualizar y eliminar cualquier recurso.  Intentemos pedirle a nuestro desarrollador de back-end que cree un AP RESTful basado en el principio de CRUD.  Es decir, escribir m√©todos para crear art√≠culos, obtener una lista de art√≠culos o un solo art√≠culo, actualizar y eliminar. <br><br>  Veamos c√≥mo pudo hacerlo. <br><img src="https://habrastorage.org/webt/m2/i2/ua/m2i2uadak8sdzbge_pvqlnpu55s.png"><br><br>  <strong>Aqu√≠ todo est√° mal con respecto a todos los principios de REST</strong> .  Lo m√°s interesante es que funciona.  De hecho, obtuve API que se ve√≠an as√≠.  Para el cliente es un cobertizo para bicicletas, para los desarrolladores es una ocasi√≥n para relajarse y discutir, y para un desarrollador novato es solo un mundo enorme y valiente en el que tropieza cada vez, cae, se golpea la cabeza.  Tiene que rehacerlo una y otra vez. <br><img src="https://habrastorage.org/webt/k1/nj/lm/k1njlm8egbrcguim8am6juym76s.png"><br><br>  Esta es una opci√≥n REST.  Con base en los principios de identificaci√≥n de recursos, trabajamos con recursos, con art√≠culos y utilizamos los m√©todos HTTP que propuso Roy Fielding.  No pudo evitar usar su trabajo anterior en su pr√≥ximo trabajo. <br><br>  Para actualizar art√≠culos, muchos usan el m√©todo PUT; tiene una sem√°ntica ligeramente diferente.  El m√©todo PATCH actualiza los campos que se pasaron y el PUT simplemente reemplaza un art√≠culo por otro.  Por sem√°ntica, PATCH se fusiona y PUT se reemplaza. <br><br>  Nuestro desarrollador backend novato se cay√≥, lo recogieron y dijeron: "Todo est√° en orden, hazlo as√≠", y honestamente lo rehizo.  Pero luego encontrar√° un gran camino a trav√©s de las espinas. <br><br>  <strong>¬øPor qu√© es tan correcto?</strong> <br><br><ul><li>  porque Roy Fielding lo dijo; </li><li>  porque es REST; </li><li>  porque estos son los principios arquitect√≥nicos en los que se basa nuestra profesi√≥n ahora. </li></ul><br>  Sin embargo, este es un "cobertizo para bicicletas", y el m√©todo anterior funcionar√°.  Las computadoras se comunicaron antes de REST, y todo funcion√≥.  Pero ahora ha aparecido un est√°ndar en la industria. <br><br><h2>  Eliminar el articulo <br></h2><br>  Considere el ejemplo de eliminar un art√≠culo.  Supongamos que hay un m√©todo de recurso normal DELETE / articles, que elimina el art√≠culo por id.  HTTP contiene encabezados.  El encabezado Aceptar acepta el tipo de datos que el cliente desea recibir en respuesta.  Nuestro junior escribi√≥ un servidor que devuelve 200 OK, Content-Type: application / json, y pasa un cuerpo vac√≠o: <br><br> <code>01. <b><font color="#c6e90e">DELETE /articles/</font></b> 1 /1.1 <br> 02. Accept: <b><font color="#c6e90e">application/json</font></b></code> <br> <br> <code>01. HTTP/1.1 200 OK <br> 02. Content-Type: <b><font color="#c6e90e">application/json</font></b> <br> 03. null <br></code> <br>  <strong>Aqu√≠ se ha cometido un error</strong> muy <strong>com√∫n: un cuerpo vac√≠o</strong> .  Todo parece ser l√≥gico: el art√≠culo se ha eliminado, 200 OK, el encabezado de la aplicaci√≥n / json est√° presente, pero lo m√°s probable es que el cliente se caiga.  Lanzar√° un error porque un cuerpo vac√≠o no es v√°lido.  Si alguna vez has intentado analizar una cadena vac√≠a, entonces te enfrentas al hecho de que cualquier analizador json tropieza y falla. <br><br>  ¬øC√≥mo arreglar esta situaci√≥n?  Probablemente la mejor opci√≥n es pasar json.  Si dijimos: "Aceptar, danos json", el servidor dice: "Tipo de contenido, te doy json", da json.  Un objeto vac√≠o, una matriz vac√≠a, coloque algo all√≠, esta ser√° la soluci√≥n y funcionar√°. <br><br>  Todav√≠a hay una soluci√≥n.  Adem√°s de 200 OK, hay un c√≥digo de respuesta 204: sin contenido.  Con √©l, no puedes transmitir el cuerpo.  No todos saben sobre esto. <br><br>  As√≠ que conduje a los tipos de medios. <br><br><h3>  Tipos de mimo <br></h3><br>  Los tipos de medios son como una extensi√≥n de archivo, solo en la web.  Cuando transmitimos datos, debemos informar o solicitar qu√© tipo de respuesta queremos recibir. <br><br><ul><li>  Por defecto, esto es texto / simple, solo texto. </li><li>  Si no se especifica nada, lo m√°s probable es que el navegador signifique aplicaci√≥n / flujo de octetos, solo un flujo de bits. </li></ul><br>  Puede especificar solo un tipo espec√≠fico: <br><br><ul><li>  aplicaci√≥n / pdf; </li><li>  imagen / png; </li><li>  aplicaci√≥n / json; </li><li>  aplicaci√≥n / xml; </li><li>  application / vnd.ms-excel. </li></ul><br>  Los encabezados Content-Type y Accept son y son importantes. <br><br><blockquote>  La API y el cliente deben pasar los encabezados Content-Type y Accept. <br></blockquote><br>  Si su API est√° construida en JSON, siempre pase Aceptar: aplicaci√≥n / json y Aplicaci√≥n de tipo de contenido / json. <br><br>  Tipos de archivos de ejemplo. <br><img src="https://habrastorage.org/webt/jd/v_/aa/jdv_aarpo9qnevtro5ddqbgw5ic.png"><br><br>  Los tipos de medios son similares a estos tipos de archivos, solo en Internet. <br><br><h3>  C√≥digos de respuesta <br></h3><br>  El siguiente ejemplo de las aventuras de nuestro desarrollador junior son los c√≥digos de respuesta. <br><br><img src="https://habrastorage.org/webt/o4/tc/ci/o4tcci6wnmokubjjdecsy5vwclm.png"><br><br>  La tasa de respuesta m√°s divertida es 200 OK.  Todos lo aman, significa que todo sali√≥ bien.  Incluso tuve un caso: recib√≠ <strong>errores 200 OK</strong> .  Algo realmente cay√≥ en el servidor, en respuesta a la respuesta llega una p√°gina HTML en la que se ha compilado un error HTML.  Solicit√© una aplicaci√≥n json con el c√≥digo 200 OK, y pens√© c√≥mo trabajar con ella.  Vas por respuesta, buscas la palabra "error", crees que esto es un error. <br><br>  Esto funciona, sin embargo, en HTTP hay muchos otros c√≥digos que puede usar, y REST recomienda que los use en REST.  Por ejemplo, la creaci√≥n de una entidad (art√≠culo) se puede responder: <br><br><ul><li>  <strong>201 Created</strong> es un c√≥digo exitoso.  Se crea el art√≠culo, en respuesta necesita devolver el art√≠culo creado. </li><li>  <strong>202 Aceptado</strong> significa que la solicitud ha sido aceptada, pero su resultado ser√° posterior.  Estas son operaciones de larga duraci√≥n.  En Aceptado, ning√∫n cuerpo puede ser devuelto.  Es decir, si no proporciona el Tipo de contenido en la respuesta, entonces el cuerpo tambi√©n puede no estarlo.  O texto / plano de tipo contenido: eso es todo, sin preguntas.  Una cadena vac√≠a es un texto / plano v√°lido. </li><li>  <strong>204 Sin contenido</strong> : el cuerpo puede estar completamente ausente. </li><li>  <strong>403 Prohibido</strong> : no puede crear este art√≠culo. </li><li>  <strong>404 Not Found</strong> : subiste a alg√∫n lugar equivocado, por ejemplo, no existe tal cosa. </li><li>  <strong>409 El conflicto</strong> es un caso extremo que pocas personas usan.  A veces es necesario si est√° generando una identificaci√≥n en el cliente, y no en el backend, y en ese momento alguien ya logr√≥ crear este art√≠culo.  El conflicto es la respuesta correcta en este caso. </li></ul><br><h3>  Creaci√≥n de entidad <br></h3><br>  El siguiente ejemplo: creamos una entidad, digamos Content-Type: application / json, y pasamos esta aplicaci√≥n / json.  Esto convierte al cliente en nuestro frontend.  Creemos este mismo art√≠culo: <br><br> <code>01. POST /articles /1.1 <br> 02. Content-Type: application/json <br> 03. { "id": 1, "title": " JSON API"}</code> <br> <br>  El c√≥digo puede venir en respuesta: <br><br><ul><li>  422 Entidad no procesable: una entidad no procesada.  Todo parece ser genial: sem√°ntica, hay c√≥digo; </li><li>  403 prohibido </li><li>  500 Error interno del servidor. </li></ul><br>  Pero es absolutamente incomprensible lo que sucedi√≥ exactamente: qu√© tipo de entidad no se procesa, ¬øpor qu√© no deber√≠a ir all√≠ y qu√© pas√≥ finalmente con el servidor? <br><br><h3>  Errores de retorno <br></h3><br>  Aseg√∫rate (y los junior no saben sobre esto) en respuesta, devuelve errores.  Esto es sem√°ntico y correcto.  Por cierto, Fielding no escribi√≥ sobre esto, es decir, fue inventado m√°s tarde y construido sobre REST. <br><br>  El backend puede devolver una matriz con errores en respuesta, puede haber varios. <br><br> <code>01. HTTP/1.1 422 Unprocessable Entity <br> 02. Content-Type: application/json <br> 03. <br> 04. { "errors": [{ <br> 05.   "status": "422", <br> 06. <b><font color="#c6e90e">"title": "Title already exist",</font></b> <br> 07. }]}</code> <br> <br>  Cada error puede tener su propio estado y t√≠tulo.  Esto es genial, pero ya va al nivel de la convenci√≥n adem√°s de REST.  Esta podr√≠a ser nuestra herramienta anti-bikeshedding para dejar de discutir y hacer una buena API correcta de inmediato. <br><br><h2>  Agregar paginaci√≥n <br></h2><br>  El siguiente ejemplo: los dise√±adores se acercan a nuestro desarrollador backend inicial y dicen: ‚ÄúTenemos muchos art√≠culos, necesitamos paginaci√≥n.  Dibujamos este ". <br><img src="https://habrastorage.org/webt/fn/6l/9t/fn6l9tjzotvgzehwpbezkd0vcf4.png"><br><br>  Consideremos con m√°s detalle.  En primer lugar, 336 p√°ginas son sorprendentes.  Cuando vi esto, pens√© en c√≥mo obtener esta cifra.  D√≥nde obtener 336, porque cuando solicito una lista de art√≠culos obtengo una lista de art√≠culos.  Por ejemplo, hay 10 mil de ellos, es decir, necesito descargar todos los art√≠culos, dividirlos por el n√∫mero de p√°ginas y averiguar este n√∫mero.  Durante mucho tiempo cargar√© estos art√≠culos, necesito una forma de obtener el n√∫mero de entradas r√°pidamente.  Pero si nuestra API devuelve una lista, entonces d√≥nde colocar este n√∫mero de registros en general, porque una serie de art√≠culos viene en respuesta.  Resulta que, dado que el n√∫mero de registros no se coloca en ning√∫n lado, debe agregarse a cada art√≠culo para que cada art√≠culo diga: "¬°Y hay tantos de nosotros!" <br><br>  Sin embargo, existe una convenci√≥n sobre la API REST que resuelve este problema. <br><br><h3>  Solicitud de lista <br></h3><br>  Para hacer que la API sea extensible, puede usar de inmediato los par√°metros GET para la paginaci√≥n: el tama√±o de la p√°gina actual y su n√∫mero, de modo que se nos devuelva exactamente la parte de la p√°gina que solicitamos.  Esto es conveniente  En respuesta, no puede dar inmediatamente una matriz, sino agregar anidamiento adicional.  Por ejemplo, la clave de datos contendr√° una matriz, los datos que solicitamos y la metaclave, que no estaba all√≠ antes, contendr√° el total. <br><br> <code>01. GET /articles? <b><font color="#c6e90e">page[size]=30&amp;page[number]=2</font></b> <br> 02. Content-Type: application/json <br></code> <br> <code>01. HTTP/1.1 200 OK <br> 02. { <br> 03.   "data": [{ "id": 1, "title": "JSONAPI"}, ...], <br> 04.   "meta": { <b><font color="#c6e90e">"count": 10080</font></b> } <br> 05. } <br></code> <br>  De esta manera, la API puede devolver informaci√≥n adicional.  Adem√°s de contar, puede haber otra informaci√≥n: es extensible.  Ahora, si el junior no lo hizo de inmediato, y solo despu√©s de que se le pidi√≥ que hiciera la pajinizaci√≥n, <strong>hizo el cambio incompatible hacia atr√°s</strong> , rompi√≥ la API y todos los clientes tuvieron que rehacerlo, generalmente duele mucho. <br><br>  La pajinizaci√≥n es diferente.  Ofrezco varios trucos de vida que puedes usar. <br><br><h4>  [desplazamiento] ... [l√≠mite] <br></h4><br> <code>01. GET /articles? <b><font color="#c6e90e">page[offset]=30&amp;page[limit]=30</font></b> <br> 02. Content-Type: application/json <br></code> <br> <code>01. HTTP/1.1 200 OK <br> 02. { <br> 03.   "data": [{ "id": 1, "title": "JSONAPI"}, ...], <br> 04.   "meta": { "count": 10080 } <br> 05. } <br></code> <br>  Quienes trabajan con bases de datos ya pueden tener una subcorteza [offset] ... [limit].  Usarlo en lugar de p√°gina [tama√±o] ... p√°gina [n√∫mero] ser√° m√°s f√°cil.  Este es un enfoque ligeramente diferente. <br><br><h4>  Posicionamiento del cursor <br></h4><br> <code>01. GET /articles? <b><font color="#c6e90e">page[published_at]=1538332156</font></b> <br> 02. Content-Type: application/json</code> <br> <br> <code>01. HTTP/1.1 200 OK <br> 02. { <br> 03.    "data": [{ "id": 1, "title": "JSONAPI"}, ...], <br> 04.    "meta": { "count": 10080 } <br> 05. }</code> <br> <br>  La ubicaci√≥n del cursor utiliza un puntero a la entidad con la que comenzar a cargar registros.  Por ejemplo, es muy conveniente cuando usa paginaci√≥n o carga en listas que cambian con frecuencia.  Digamos que constantemente se escriben nuevos art√≠culos en nuestro blog.  La tercera p√°gina ahora no es la misma tercera p√°gina que estar√° en un minuto, pero si vamos a la cuarta p√°gina, obtendremos algunos registros de la tercera p√°gina, porque toda la lista se mover√°. <br><br>  Este problema se resuelve con la paginaci√≥n del cursor.  Decimos: "Cargue los art√≠culos que vienen despu√©s del art√≠culo publicado en ese momento" - ya no puede haber cambio puramente tecnol√≥gicamente, y esto es genial. <br><br><h2>  Problema N +1 <br></h2><br>  El siguiente problema que nuestro desarrollador junior definitivamente encontrar√° es el problema N + 1 (los backenders lo entender√°n).  Suponga que desea enumerar una lista de 10 art√≠culos.  Subimos una lista de art√≠culos, cada art√≠culo tiene un autor, y para cada uno necesita descargar un autor.  Enviamos: <br><br><ul><li>  1 solicitud de una lista de art√≠culos; </li><li>  10 solicitudes para los autores de cada art√≠culo. </li></ul><br>  Total: 11 consultas para mostrar una peque√±a lista. <br><br><h3>  Agregar enlaces <br></h3><br>  En el backend, este problema se resuelve en todos los ORM; solo debe recordar agregar esta conexi√≥n.  Estas conexiones tambi√©n se pueden usar en el extremo frontal.  Esto se hace de la siguiente manera: <br><br> <code>01. GET /articles? <b><font color="#c6e90e">include =author</font></b> <br> 02. Content-Type: application/json <br></code> <br>  Puede usar un par√°metro GET especial, ll√°melo include (como en el backend), indicando qu√© enlaces debemos cargar junto con los art√≠culos.  Supongamos que cargamos art√≠culos y queremos obtener de inmediato al autor junto con los art√≠culos.  La respuesta se ve as√≠: <br><br> <code>01. /1.1 200  <br> 02. { "data": [{ <br> 03.  { attributes: { "id": 1, "title": "JSON API" }, <br> 04.  { relationships: { <br> 05. <b><font color="#c6e90e">"author": { "id": 1, "name": "Avdeev" } }</font></b> <br> 06.  }, ... <br> 07. }]}</code> <br> <br>  Los atributos del art√≠culo propio se transfirieron a los datos y se agregaron las relaciones clave.  Ponemos todas las conexiones en esta clave.  Por lo tanto, con una solicitud, recibimos todos los datos que anteriormente recib√≠an 11 solicitudes.  Este es un truco de vida genial que resuelve bien el problema con N + 1 en el extremo frontal. <br><br><h2>  El problema de la duplicaci√≥n de datos. <br></h2><br>  Suponga que desea mostrar 10 art√≠culos que indican el autor, todos los art√≠culos tienen un autor, pero el objeto con el autor es muy grande (por ejemplo, un apellido muy largo, que toma un megabyte).  Se incluye un autor en la respuesta 10 veces, y 10 inclusiones del mismo autor en la respuesta tomar√°n 10 MB. <br><br>  Como todos los objetos son iguales, el problema de que un autor se incluya 10 veces (10 MB) se resuelve con la ayuda de la normalizaci√≥n, que se utiliza en las bases de datos.  En la parte frontal, tambi√©n puede usar la normalizaci√≥n al trabajar con la API; esto es muy bueno. <br><br> <code>01. /1.1 200  <br> 02. { "data": [{ <br> 03. "id": "1‚Ä≥, <b><font color="#c6e90e">"type": "article",</font></b> <br> 04. "attributes": { "title": "JSON API" }, <br> 05. "relationships": { ... } <br> 06.  "author": { "id": 1, <b><font color="#c6e90e">"type": "people"</font></b> } } <br> 07. }, ... ] <br> 08. }</code> <br> <br>  Marcamos todas las entidades con alg√∫n tipo (este es un tipo de representaci√≥n, un tipo de recurso).  Roy Fielding introdujo el concepto de un recurso, es decir, solicitaron art√≠culos, recibieron un "art√≠culo".  En las relaciones, ponemos un enlace al tipo de personas, es decir, todav√≠a tenemos el recurso de personas en otro lugar.  Y el recurso en s√≠ lo tomamos en una clave separada incluida, que se encuentra en el mismo nivel que los datos. <br><br> <code>01. /1.1 200  <br> 02. { <br> 03. "data": [ ... ], <br> 04. <b><font color="#c6e90e">"included":</font></b> [{ <br> 05.  "id": 1, "type": "people", <br> 06.  "attributes": { "name": "Avdeev" } <br> 07. }] <br> 08. }</code> <br> <br>  Por lo tanto, todas las entidades relacionadas en una sola instancia caen en la clave especial incluida.  Solo almacenamos enlaces, y las entidades mismas se almacenan incluidas. <br><br>  Tama√±o de solicitud disminuido.  Este es un truco de vida sobre el que el back-end no sabe.  Lo descubrir√° m√°s tarde cuando necesite romper la API. <br><br><h3>  No todos los campos de recursos son necesarios <br></h3><br>  El siguiente truco de vida se puede aplicar cuando no se necesitan todos los campos de recursos.  Esto se realiza utilizando un par√°metro GET especial, que enumera los atributos que se devolver√°n, separados por comas.  Por ejemplo, el art√≠culo es grande, y puede haber megabytes en el campo de contenido, y necesitamos mostrar solo la lista de encabezados; no necesitamos el contenido en la respuesta. <br><br> <code>GET /articles <b><font color="#c6e90e">?fields[article]=title /1.1</font></b></code> <br> <br> <code>01. /1.1 200 OK <br> 02. { "data": [{ <br> 03.  "id": "1‚Ä≥, "type": "article", <br> 04.  "attributes": { <b><font color="#c6e90e">"title": " JSON API"</font></b> }, <br> 05.  }, ... ] <br> 06. }</code> <br> <br>  Si necesita, por ejemplo, tambi√©n la fecha de publicaci√≥n, puede escribir una "fecha de publicaci√≥n" separada por comas.  En respuesta, dos campos vendr√°n en atributos.  Esta es una convenci√≥n que se puede usar como una herramienta anti-bikeshedding. <br><br><h3>  Buscar por articulos <br></h3><br>  A menudo necesitamos b√∫squedas y filtros.  Hay convenciones para esto: filtros especiales para obtener par√°metros: <br><br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?filters[search]=api</font></b> HTTP/1.1</code> - buscar; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?fiIters[from_date]=1538332156</font></b> HTTP/1.1</code> - descargue art√≠culos desde una fecha espec√≠fica; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?filters[is_published]=true</font></b> HTTP/1.1</code> : descargue los art√≠culos que se acaban de publicar; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?fiIters[author]=1</font></b> HTTP/1.1</code> - descargue art√≠culos con el primer autor. <br><br><h3>  Ordenar art√≠culos <br></h3><br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?sort=title</font></b> /1.1</code> - por t√≠tulo; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?sort=published_at</font></b> HTTP/1.1</code> - por fecha de publicaci√≥n; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?sort=-published_at</font></b> HTTP/1.1</code> - por fecha de publicaci√≥n en la direcci√≥n opuesta; <br>  ‚óè <code>GET /articles <b><font color="#c6e90e">?sort=author,-publisbed_at</font></b> HTTP/1.1</code> : primero por autor, luego por fecha de publicaci√≥n en la direcci√≥n opuesta, si los art√≠culos son del mismo autor. <br><br><h2>  Necesito cambiar las URL <br></h2><br>  Soluci√≥n: hipermedia, que ya mencion√©, se puede hacer de la siguiente manera.  Si queremos que el objeto (recurso) se describa a s√≠ mismo, el cliente podr√≠a entender a trav√©s de hipermedia lo que se puede hacer con √©l, y el servidor podr√≠a desarrollarse independientemente del cliente, entonces podemos agregar enlaces a la lista de art√≠culos, al art√≠culo mismo usando teclas de enlaces especiales : <br><br> <code><code>01. GET /articles /1.1 <br> 02. { <br> 03. "data": [{ <br> 04.  ... <br> 05. <b><font color="#c6e90e">"links": { "self": "http://localhost/articles/1"</font></b></code> }, <br> 06.  "relationships": { ... } <br> 07. }], <br> 08. <b><font color="#c6e90e">"links": { "self": " <code>http://localhost/articles</code> " }</font></b> <br> 09. } <br></code> <br>  O relacionado, si queremos decirle al cliente c√≥mo cargar un comentario en este art√≠culo: <br><br> <code><code>01. ... <br> 02. "relationships": { <br> 03. "comments": { <br> 04.  "links": { <br> 05. <b><font color="#c6e90e">"self": "http://localhost/articles/l/relationships/comments</font></b></code> ", <br> 06. <b><font color="#c6e90e">"related": " <code>http://localhost/articles/l/comments</code> "</font></b> <br> 07.  } <br> 08. } <br> 09. }</code> <br>  El cliente ve que hay un enlace, lo sigue, carga un comentario.  Si no hay un enlace, entonces no hay comentarios.  Esto es conveniente, pero muy pocos lo hacen.  Fielding present√≥ los principios de REST, pero no todos ingresaron a nuestra industria.  Utilizamos principalmente dos o tres. <br><br>  En 2013, todos los trucos de la vida que te cont√©, Steve Klabnik se combinaron en la especificaci√≥n JSON API y se registraron como un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuevo tipo de medio adem√°s de JSON</a> .  Entonces, nuestro desarrollador backend junior, que evolucion√≥ gradualmente, lleg√≥ a la API JSON. <br><br><h2>  API JSON <br></h2><br>  Todo se describe en detalle en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://jsonapi.org/implementations/</a> : incluso hay una lista de 170 implementaciones de especificaciones diferentes para 32 lenguajes de programaci√≥n, y estas solo se agregan al cat√°logo.  Ya se han escrito bibliotecas, analizadores, serializadores, etc. <br><br>  Dado que esta especificaci√≥n es de c√≥digo abierto, todos est√°n invirtiendo en ella.  Yo, entre otras cosas, escrib√≠ algo yo mismo.  Estoy seguro de que hay muchas personas as√≠.  Puedes unirte a este proyecto t√∫ mismo. <br><br><h4>  JSON API Pros <br></h4><br>  La especificaci√≥n JSON API resuelve una serie de problemas, un <strong>acuerdo com√∫n para todos</strong> .  Como existe un acuerdo general, <strong>no discutimos dentro del equipo</strong> : el cobertizo para bicicletas est√° documentado.  Tenemos un acuerdo sobre qu√© materiales hacer un cobertizo para bicicletas y c√≥mo pintarlo. <br><br>  Ahora, cuando el desarrollador hace algo mal y lo veo, no comienzo la discusi√≥n, pero digo: "¬°No por la API JSON!"  y mostrar en su lugar en la especificaci√≥n.  Me odian en la empresa, pero poco a poco se acostumbraron, y a todos les empez√≥ a gustar la API JSON.  Hacemos nuevos servicios predeterminados de acuerdo con esta especificaci√≥n.  Tenemos una clave de fecha, estamos listos para agregar meta, incluir claves.  Hay filtros de par√°metros GET reservados para filtros.  No discutimos c√≥mo llamar a un filtro; utilizamos esta especificaci√≥n.  Describe c√≥mo hacer una URL. <br><br>  Como no estamos discutiendo, sino haciendo tareas comerciales, la <strong>productividad del desarrollo es mayor</strong> .  Tenemos las especificaciones descritas, el desarrollador ley√≥ el backend, cre√≥ la API, la atornillamos: el cliente est√° contento. <br><br>  <strong>Los problemas populares ya se han resuelto</strong> , por ejemplo, con la paginaci√≥n.  Hay muchas pistas en la especificaci√≥n. <br><br>  Como se trata de JSON (gracias a Douglas Crockford por este formato), es m√°s conciso que XML, es bastante <strong>f√°cil de leer y comprender</strong> . <br><br>  El hecho de que esto sea <strong>Open Source</strong> puede ser tanto un plus como un menos, pero me encanta Open Source. <br><br><h4>  Contras API JSON <br></h4><br>  El objeto ha crecido (fecha, atributos, incluidos, etc.): la <strong>interfaz necesita analizar las respuestas:</strong> poder iterar sobre las matrices, recorrer el objeto y saber c√≥mo funciona la reducci√≥n.  No todos los desarrolladores novatos conocen estas cosas complejas.  Hay bibliotecas de serializadores / deserializadores, puede usarlos.  En general, esto solo funciona con datos, pero los objetos son grandes. <br><br>  Y el <strong>motor tiene</strong> dolor: <br><br><ul><li>  Control de anidamiento: incluir se puede escalar muy lejos; </li><li>  La complejidad de las consultas de la base de datos: a veces se crean autom√°ticamente y resultan muy dif√≠ciles; </li><li>  Seguridad: puedes subir a la jungla, especialmente si conectas alg√∫n tipo de biblioteca; </li><li>  La especificaci√≥n es dif√≠cil de leer.  Ella est√° en ingl√©s y asust√≥ a algunos, pero poco a poco todos se acostumbraron; </li><li>  No todas las bibliotecas implementan bien la especificaci√≥n; este es un problema de c√≥digo abierto. </li></ul><br><h4>  Errores JSON API <br></h4><br>  Un poco de hardcore. <br><br>  <strong>El n√∫mero de relaciones en el tema no est√° limitado.</strong>  Si incluimos, solicitamos art√≠culos, agregamos comentarios a ellos, en respuesta recibiremos todos los comentarios de este art√≠culo.  Hay 10,000 comentarios - obtenga todos los 10,000 comentarios: <br><br> <code>GET /articles/1?include=comments /1.1</code> <br> <br> <code>01. ... <br> 02. "relationships": { <br> 03. "comments": { <br> 04.  "data": <b><font color="#c6e90e">[0 ... ‚àû]</font></b> <br> 05. } <br> 06. }</code> <br> <br>  Por lo tanto, en realidad 5 MB llegaron a nuestra solicitud en respuesta: "Est√° escrito en la especificaci√≥n; es necesario reformular la solicitud correctamente: <br><br> <code>GET /comments? <b><font color="#c6e90e">filters[article]=1&amp;</font></b> page[size]=30 HTTP/1.1</code> <br> <br> <code>01. { <br> 02. "data": <b><font color="#c6e90e">[0 ... 29]</font></b> <br> 03. }</code> <br> <br>  Solicitamos comentarios con un filtro por art√≠culo, diga: "30 piezas, por favor" y obtenga 30 comentarios.  Esto es ambig√ºedad. <br><br>  <strong>Las mismas cosas pueden formularse de manera ambigua</strong> : <br><br>  ‚óè <code>GET /articles/1 <b><font color="#c6e90e">?include=comments</font></b> HTTP/1.1</code> : solicite un art√≠culo con comentarios; <br>  ‚óè <code>GET /articles/1/comments HTTP/1.1</code> : solicite comentarios sobre el art√≠culo; <br>  ‚óè <code>GET /comments <b><font color="#c6e90e">?filters[article]=1</font></b> HTTP/1.1</code> - solicita comentarios con un filtro por art√≠culo. <br><br>  Este es uno y el mismo: los mismos datos, que se obtienen de diferentes maneras, hay cierta ambig√ºedad.  Este escollo no es inmediatamente visible. <br><br>  <strong>Las relaciones polim√≥rficas de uno a muchos se</strong> arrastran a REST muy r√°pidamente. <br><br> <code>01. GET /comments?include=commentable /1.1 <br> 02. <br> 03. ... <br> 04. "relationships": { <br> 05. <b><font color="#c6e90e">"commentable"</font></b> : { <br> 06.  "data": { "type": "article", "id": "1‚Ä≥ } <br> 07. } <br> 08. }</code> <br> <br>  Hay una conexi√≥n polim√≥rfica comentable en el backend: se arrastra hacia REST.  Entonces deber√≠a suceder, pero se puede disfrazar.  No puedes disfrazarlo en la API JSON: saldr√° a la luz. <br><br>  <strong>Complejas relaciones de muchos a muchos con opciones avanzadas</strong> .  Adem√°s, salen todas las tablas de conexi√≥n: <br><br> <code>01. GET /users?include <b><font color="#c6e90e">=users_comments</font></b> /1.1 <br> 02. <br> 03. ... <br> 04. "relationships": { <br> 05. "users_comments": { <br> 06.  "data": [{ "type": "users_comments", "id": "1‚Ä≥ }, ...] <br> 07. }, <br> 08. }</code> <br> <br><h2>  Swagger <br></h2><br>  Swagger es una herramienta de escritura de documentaci√≥n en l√≠nea. <br><br>  Digamos que se le pidi√≥ a nuestro desarrollador de backend que escribiera documentaci√≥n para su API, y √©l la escribi√≥.  Esto es f√°cil si la API es simple.  Si se trata de una API JSON, Swagger no se puede escribir tan f√°cilmente. <br><br>  <strong>Ejemplo:</strong> tienda de mascotas Swagger.  Cada m√©todo se puede abrir, ver respuesta y ejemplos. <br><br><img src="https://habrastorage.org/webt/ul/lj/yk/ulljykpo7bhyw85r9ru69k2nuxe.png"><br><br>  Este es un ejemplo de un modelo de mascota.  Aqu√≠ hay una interfaz genial, todo es f√°cil de leer. <br><br><img src="https://habrastorage.org/webt/i9/rg/ir/i9rgirjcdxgm16ogmtopu6dnjrq.png"><br><br>  Y as√≠ es como se ve la creaci√≥n del modelo API JSON: <br><br><img src="https://habrastorage.org/webt/ty/14/kn/ty14knt_laxzsr2ozusbo0xkk0c.png"><br><br>  Esto no es tan bueno.  Necesitamos datos, en datos algo con relaciones, incluido contiene 5 tipos de modelos, etc.  Puedes escribir Swagger, la API abierta es algo poderoso, pero complicado. <br><br><h2>  Alternativa <br></h2><br>  Hay una especificaci√≥n OData, que apareci√≥ un poco m√°s tarde, en 2015.  Esta es "La mejor manera de DESCANSAR", como asegura el sitio web oficial.  Se ve as√≠: <br><br>  <code>01. GET http://services.odata.org/v4/TripRW/People HTTP/1.1</code> - Solicitud GET; <br>  <code>02. OData-Version: 4.0</code> - encabezado especial con versi√≥n; <br>  <code>03. OData-MaxVersion: 4.0</code> - Segundo encabezado de versi√≥n especial <br><br>  La respuesta se ve as√≠: <br><br> <code>01. HTTP/1.1 200 OK <br> 02. Content-Type: application/json; odata.metadata=minimal <br> 03. OData-Version: 4.0 <br> 04. { <br> 05. '@odata.context': 'http://services.odata.org/V4/ <br> 06. '@odata.nextLink' : 'http://services.odata.org/V4/ <br> 07. 'value': [{ <br> 08.  '@odata.etag': 1W/108D1D5BD423E51581‚Ä≤, <br> 09.  'UserName': 'russellwhyte', <br> 10.  ... <br></code> <br>  Aqu√≠ est√° la aplicaci√≥n extendida / json y el objeto. <br><br>  No usamos OData, en primer lugar, ya que es lo mismo que la API JSON, pero no es conciso.  Hay objetos enormes y me parece que todo es mucho peor de leer.  OData tambi√©n sali√≥ en c√≥digo abierto, pero es m√°s complicado. <br><br><h2>  ¬øQu√© hay de GraphQL? <br></h2><br>  Naturalmente, cuando est√°bamos buscando un nuevo formato de API, nos encontramos con esta exageraci√≥n. <br><br>  ‚óè <strong>Umbral de entrada alto.</strong> <br><br>  Desde el punto de vista de la interfaz, todo parece genial, pero no puede hacer que el nuevo desarrollador escriba GraphQL, porque primero debe estudiarlo.  Es como SQL: no puede escribir SQL inmediatamente, al menos debe leer lo que es, seguir los tutoriales, es decir, el umbral de entrada aumenta. <br><br>  ‚óè <strong>El efecto del big bang.</strong> <br><br>  Si no hab√≠a API en el proyecto y comenzamos a usar GraphQL, despu√©s de un mes nos dimos cuenta de que no nos conviene, ser√° demasiado tarde.  Tienes que escribir muletas.  Puede evolucionar con JSON API u OData: el RESTful m√°s simple, que mejora progresivamente, se convierte en una API JSON. <br><br>  ‚óè <strong>Infierno en el backend.</strong> <br><br>  GraphQL llama al infierno en el backend, uno a uno, al igual que la API JSON completamente implementada, porque GraphQL obtiene el control total sobre las consultas, y esta es una biblioteca, y deber√° resolver un mont√≥n de preguntas: <br><br><ul><li>  control de anidamiento; </li><li>  recursividad </li><li>  limitaci√≥n de frecuencia; </li><li>  control de acceso. </li></ul><br><h2>  En lugar de conclusiones <br></h2><br>  Recomiendo dejar de discutir sobre el cobertizo de la bicicleta, y tomar la herramienta anti-bikeshedding como especificaci√≥n y simplemente hacer una API con una buena especificaci√≥n. <br><br>  Para encontrar su est√°ndar para resolver el problema de un cobertizo para bicicletas, puede consultar estos enlaces: <br><br>  ‚óè <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://jsonapi.org</a> <br>  ‚óè <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://www.odata.org</a> <br>  ‚óè <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://graphgl.org</a> <br> ‚óè <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://xmlrpc.scripting.com</a> <br> ‚óè <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.jsonrpc.org</a> <br><br> <strong>   :</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">alexey-avdeev.com</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . <br><br><blockquote> ,  <strong>  </strong>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Frontend Conf</a> ,   27  28    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">++</a> .     ,        . <br><br> <strong>   ?</strong>      ?        ?    ,        ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> ! <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> ,  ,   ,    ,      . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es433322/">https://habr.com/ru/post/es433322/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es433306/index.html">Visual studio 2019</a></li>
<li><a href="../es433308/index.html">Transferencia de la configuraci√≥n de PBX al servicio 3CX PBX Express</a></li>
<li><a href="../es433316/index.html">Resumen del dise√±o: incorporaci√≥n, retroalimentaci√≥n, b√∫squeda de ideas y toma de decisiones.</a></li>
<li><a href="../es433318/index.html">garbage.collect ()</a></li>
<li><a href="../es433320/index.html">Dise√±o de cuadr√≠cula como base de dise√±os modernos</a></li>
<li><a href="../es433324/index.html">Recolectando el paquete de sue√±os con Webpack</a></li>
<li><a href="../es433326/index.html">Calidad del c√≥digo</a></li>
<li><a href="../es433328/index.html">Mejor perder un d√≠a</a></li>
<li><a href="../es433330/index.html">Resuelve crucigramas japoneses con SAT Solver</a></li>
<li><a href="../es433332/index.html">Soporte de Python en Azure Functions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>