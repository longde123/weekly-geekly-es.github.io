<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕯️ 🔊 🎤 Markov-Ketten zur prozeduralen Gebäudeerzeugung 🙆🏻 👩🏽‍💻 🧑🏻‍🤝‍🧑🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hinweis: Den vollständigen Quellcode dieses Projekts finden Sie [ hier ]. Da es Teil eines größeren Projekts ist, empfehle ich, das Commit zum Zeitpun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Markov-Ketten zur prozeduralen Gebäudeerzeugung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475764/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" alt="Bild"></div><br>  Hinweis: Den vollständigen Quellcode dieses Projekts finden Sie [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ].  Da es Teil eines größeren Projekts ist, empfehle ich, das Commit zum Zeitpunkt der <code>/source/helpers/arraymath.h</code> dieses Artikels oder die Datei <code>/source/helpers/arraymath.h</code> sowie <code>/source/world/blueprint.cpp</code> . <br><br>  In diesem Artikel möchte ich detailliert auf die Prinzipien der Verwendung von Markov-Ketten und Statistiken für die prozedurale Generierung von 3D-Gebäuden und anderen Systemen eingehen. <br><br>  Ich werde die mathematischen Grundlagen des Systems erläutern und versuchen, die Erklärung so allgemein wie möglich zu gestalten, damit Sie dieses Konzept auch in anderen Situationen anwenden können, beispielsweise um 2D-Dungeons zu generieren.  Die Erklärung wird von Bildern und Quellcode begleitet. <br><br>  Diese Methode ist eine verallgemeinerte Methode zur prozeduralen Generierung von Systemen, die bestimmte Anforderungen erfüllen. Ich empfehle daher, mindestens bis zum Ende des ersten Abschnitts zu lesen, damit Sie verstehen, ob diese Technik in Ihrem Fall nützlich sein kann, da ich im Folgenden die erforderlichen Anforderungen erläutere. <br><a name="habracut"></a><br>  Die Ergebnisse werden in meiner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Voxel-Engine verwendet,</a> damit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Task-Bots</a> Gebäude und dann Städte bauen können.  Ganz am Ende des Artikels steht ein Beispiel! <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterstützt kein HTML5-Video. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/buildings.mp4" type="video/mp4"></video></div></div></div><br>  <i>Ein paar Beispiele mit den Ergebnissen.</i> <br><br><h2>  Die Grundlagen </h2><br><h3>  Markov-Ketten </h3><br>  Markov-Ketten sind eine Folge von Zuständen, entlang derer sich ein System bewegt, beschrieben durch zeitliche Übergänge.  Übergänge zwischen Zuständen sind stochastisch, dh sie werden durch Wahrscheinlichkeiten beschrieben, die ein Merkmal des Systems sind. <br><br>  Das System wird durch den Zustandsraum definiert, der den Raum aller möglichen Systemkonfigurationen darstellt.  Wenn das System richtig beschrieben ist, können wir die Übergänge zwischen Zuständen auch als diskrete Schritte beschreiben. <br><br>  Es ist zu beachten, dass es von einem Zustand des Systems häufig mehrere mögliche diskrete Übergänge gibt, von denen jeder zu einem anderen Zustand des Systems führt. <br><br>  Die Übergangswahrscheinlichkeit vom Zustand i zum Zustand j ist gleich: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.969ex" height="2.66ex" viewBox="0 -780.1 1278.5 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="345" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P_ {ij} </script></p><br>  Der Markov-Prozess ist der Prozess des Studierens dieses Zustandsraums mit Hilfe von darauf übertragenen Wahrscheinlichkeiten. <br><br>  Wichtig ist, dass Markov-Prozesse „kein Gedächtnis haben“.  Dies bedeutet lediglich, dass die Wahrscheinlichkeiten des Übergangs vom aktuellen zum neuen Zustand nur vom aktuellen Zustand und nicht mehr von anderen zuvor besuchten Bedingungen abhängen. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.417ex" height="2.78ex" viewBox="0 -832 5346.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-50" x="2612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="3364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="3753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-2C" x="4099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="4544" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="4956" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P_ {ij} = P (i, j) </script></p><br><h4>  Beispiel: Textgenerierung </h4><br>  Ein System ist eine Folge von Bits.  Der Zustandsraum besteht aus allen möglichen Folgen von Bits.  Ein diskreter Übergang ändert ein Bit von 0 auf 1 oder 1 auf 0. Wenn das System n Bits hat, haben wir von jedem Zustand n mögliche Übergänge in einen neuen Zustand.  Der Markov-Prozess besteht in der Untersuchung des Zustandsraums durch Ändern der Werte von Bits in einer Sequenz unter Verwendung bestimmter Wahrscheinlichkeiten. <br><br><h4>  Beispiel: Wettervorhersage </h4><br>  Das System ist die aktuelle Wetterlage.  Der Zustandsraum ist alle möglichen Zustände, in denen das Wetter sein kann (z. B. "regnerisch", "bewölkt", "sonnig" usw.).  Der Übergang wird ein Wechsel von einem Zustand in einen anderen sein, in dem wir die Wahrscheinlichkeit des Übergangs festlegen können (zum Beispiel: "Wie groß ist die Wahrscheinlichkeit, dass es morgen regnet, wenn es heute sonnig ist, unabhängig vom Wetter von gestern?"). <br><br><h3>  Monte-Carlo-Methode für Markov-Ketten </h3><br>  Da die Übergänge zwischen den Zuständen durch Wahrscheinlichkeiten bestimmt werden, können wir auch die Wahrscheinlichkeit festlegen, dass sich ein „stabiler“ Zustand in einem beliebigen Zustand befindet (oder, wenn die Zeit gegen unendlich geht, die durchschnittliche Zeit, in der wir uns in einem bestimmten Zustand befinden).  Dies ist eine interne Verteilung von Zuständen. <br><br>  Dann ist der Monte-Carlo-Algorithmus für Markov-Ketten (Markov-Chain Monte-Carlo, MCMC) eine Technik zum Erhalten einer Probe aus dem Zustandsraum.  Sampling (Sampling) bezeichnet die Auswahl des Zustands anhand der Auswahlwahrscheinlichkeit unter Berücksichtigung der internen Verteilung. <br><br>  Sie sagen, dass die Wahrscheinlichkeit, sich in einem Zustand zu befinden, proportional * zu einer bestimmten Kostenfunktion ist, die eine „Schätzung“ des aktuellen Zustands liefert, in dem sich das System befindet.  Es wird angenommen, dass bei niedrigen Kosten die Wahrscheinlichkeit hoch ist, in diesem Zustand zu sein, und dass dieses Verhältnis eintönig ist.  Die Kostenfunktion ist wie folgt definiert: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.376ex" height="2.66ex" viewBox="0 -832 1884 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="1494" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> R (i) </script></p><br>  Hinweis: Ich bin mir nicht sicher, ob das Wort „proportional“ richtig verwendet wird, da das Verhältnis nicht unbedingt linear ist. <br><br>  Dann liefert eine Stichprobe aus der Zustandsverteilung eine Konfiguration mit geringen Kosten (oder einer guten "Schätzung") mit einer höheren Wahrscheinlichkeit! <br><br>  Selbst bei einem extrem großen Zustandsraum (möglicherweise unendlich, aber "zählbar unendlich") wird der MCMC-Algorithmus unabhängig von der Komplexität des Systems eine kostengünstige Lösung finden, wenn wir ihm genügend Zeit für die Konvergenz geben. <br><br>  Eine solche Untersuchung des Zustandsraums ist eine Standardtechnik der stochastischen Optimierung und hat viele Anwendungen in Bereichen wie maschinellem Lernen. <br><br><h3>  Gibbs-Verteilung </h3><br>  Hinweis: Wenn Ihnen dieser Abschnitt nicht klar ist, können Sie ihn problemlos überspringen.  Sie können weiterhin die Implementierung des Systems nutzen. <br><br>  Wie bestimmen wir die Wahrscheinlichkeit dieses Zustands, nachdem wir die Kosten für einen möglichen Zustand ermittelt haben? <br><br>  Lösung: Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gibbs-Verteilung</a> ist die Verteilung der maximalen Entropie für einen bestimmten Satz von Bedingungen. <br><br>  Im Wesentlichen bedeutet dies, dass, wenn wir die Wahrscheinlichkeiten des Systems stark einschränken, die Gibbs-Verteilung die „geringste Anzahl von Annahmen“ über die Form der Verteilung erzeugt. <br><br>  Anmerkung: Die Gibbs-Verteilung ist auch die Verteilung mit der geringsten Empfindlichkeit für Änderungen der Abhängigkeiten (gemäß der Kullback-Leibler-Divergenzmetrik). <br><br>  Die einzige Einschränkung, die wir der Verteilung von Zuständen auferlegen, ist die Kostenfunktion. Daher verwenden wir sie in der Gibbs-Verteilung, um die Wahrscheinlichkeit des Übergangs zwischen Zuständen zu berechnen: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>Z</mi><mi>i</mi></msub></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.266ex" height="2.78ex" viewBox="0 -832 18628.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-65" x="2862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-78" x="3329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-70" x="3901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="4405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-2212" x="4794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-66" x="5823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-72" x="6373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-61" x="6825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-63" x="7354" y="0"></use><g transform="translate(7788,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="1561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-2212" x="2173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-52" x="3173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="3933" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="4322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="4668" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-54" x="12845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="13550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-2217" x="14162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-66" x="15134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-72" x="15685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-61" x="16136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-63" x="16666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-31" x="17099" y="0"></use><g transform="translate(17600,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>−</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>R</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>−</mo><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow><mo stretchy="false">)</mo><mo>∗</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>Z</mi><mi>i</mi></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> P_ {ij} = \ exp (- \ frac {R (j) -R (i)} {T}) * \ frac {1} {Z_i} </script></p><br>  Wobei Z die Partitionsfunktion der Menge von Übergängen von Zustand i ist.  Dies ist ein Normalisierungsfaktor, der garantiert, dass die Summe der Übergangswahrscheinlichkeiten von jedem Zustand 1 ist. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.215ex" height="2.78ex" viewBox="0 -832 6981.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="966" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-3D" x="1305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-73" x="2611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-75" x="3081" y="0"></use><g transform="translate(3653,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-28" x="4924" y="0"></use><g transform="translate(5313,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMATHI-6A" x="345" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjmUciOfMO3k6vHSMoxE4WBgPErBw#MJMAIN-29" x="6592" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy="false">(</mo><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> Z_i = \ sum_j (P_ {ij}) </script></p><br>  Beachten Sie, dass wenn wir entscheiden, dass der nächste Zustand derselbe ist, die relativen Kosten Null sind, dh die Wahrscheinlichkeit nach der Normalisierung ungleich Null ist (aufgrund der Form der Verteilung mit dem Indikator)!  Dies bedeutet, dass in vielen Übergängen die Wahrscheinlichkeit unveränderter Zustände berücksichtigt werden muss. <br><br>  Erwähnenswert ist auch, dass die Gibbs-Verteilung durch die „Rechentemperatur“ T parametrisiert wird. <br><br>  Einer der Hauptvorteile der Verwendung von Wahrscheinlichkeiten bei der Untersuchung des Zustandsraums besteht darin, dass das System Übergänge in teurere Zustände durchführen kann (da sie eine Übergangswahrscheinlichkeit ungleich Null haben), wodurch der Algorithmus zu einer „nicht gierigen“ Optimierungsmethode wird. <br><br>  Beachten Sie, dass, da die Temperatur gegen unendlich tendiert, die Wahrscheinlichkeit eines einzelnen Übergangs gegen eins geht, so dass, wenn die Menge der Wahrscheinlichkeiten aller Übergänge aus dem Zustand normalisiert wird, sie gleich wahrscheinlich werden (oder die Gibbs-Verteilung sich der Normalverteilung nähert), obwohl ihre Kosten höher sind! <br><br>  Wenn sich die Rechentemperatur Null nähert, werden Übergänge mit geringeren Kosten wahrscheinlicher, d. H. Die Wahrscheinlichkeit bevorzugter Übergänge nimmt zu. <br><br>  Bei der Erforschung / Optimierung des Zustandsraums senken wir die Temperatur allmählich ab.  Dieser Vorgang wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"simuliertes Tempern" genannt.</a>  Dank dessen können wir am Anfang leicht aus dem lokalen Minimum herauskommen und am Ende die besten Lösungen auswählen. <br><br>  Wenn die Temperatur niedrig genug ist, tendieren alle Wahrscheinlichkeiten zu Null, mit Ausnahme der Wahrscheinlichkeit, dass kein Übergang stattfindet! <br><br>  Dies liegt daran, dass nur das Fehlen eines Übergangs eine Kostendifferenz von Null hat, das heißt, dass derselbe Zustand nicht von der Temperatur abhängt.  Aufgrund der Form der Exponentialfunktion bei T = 0 stellt sich heraus, dass dies die einzige Wahrscheinlichkeit mit einem Wert ungleich Null ist, dh nach der Normierung wird es zu Eins.  Infolgedessen konvergiert unser System zu einem stabilen Punkt, und eine weitere Kühlung ist nicht mehr erforderlich.  Dies ist eine integrale Eigenschaft der Wahrscheinlichkeitsgenerierung unter Verwendung der Gibbs-Verteilung. <br><br>  Der Konvergenzprozess des Systems kann durch Ändern der Abkühlrate angepasst werden! <br><br>  Wenn die Kühlung langsamer ist, kommen wir in der Regel zu einer Lösung mit geringeren Kosten (bis zu einem gewissen Grad), jedoch auf Kosten von mehr Konvergenzschritten.  Wenn die Abkühlung schneller ist, ist es wahrscheinlicher, dass das System in den frühen Stadien mit höheren Kosten in die Falle einer Subregion gerät, das heißt, wir erhalten "weniger optimale" Ergebnisse. <br><br>  Folglich erzeugt der Markov-Prozess nicht nur zufällige Ergebnisse, sondern versucht, „gute“ Ergebnisse zu erzielen, und mit hoher Wahrscheinlichkeit wird er erfolgreich sein! <br><br>  Durch die Definition beliebiger Kostenfunktionen muss kein eindeutiges Optimum existieren.  Diese Methode der probabilistischen Optimierung erzeugt nur eine Annäherung an das Optimum, wobei versucht wird, die Kostenfunktion zu minimieren, und aufgrund der Abtastung werden jedes Mal andere Ergebnisse erzeugt (wenn der Zufallszahlengenerator einen anderen Startwert hat). <br><br>  Der Abtastvorgang selbst kann unter Verwendung der inversen Transformationsmethode über die Massenverteilungsfunktion unseres diskreten Satzes von Übergängen durchgeführt werden.  Ich werde später zeigen, wie das gemacht wird. <br><br><h3>  Prozedurale Generierung </h3><br>  Inwiefern ist diese Methode für die prozedurale Generierung nützlich? <br><br>  In einigen Systemen ist es oft schwierig, einen einfachen Algorithmus zu definieren, der gute Ergebnisse liefert, insbesondere bei komplexen Systemen. <br><br>  Das Setzen beliebiger Generierungsregeln ist nicht nur schwierig, sondern auch nur durch unsere Vorstellungskraft und Verarbeitung von Grenzfällen begrenzt. <br><br>  Wenn das System bestimmte Anforderungen erfüllt, können wir uns durch die Verwendung von MCMC keine Gedanken über die Auswahl eines Algorithmus oder von Regeln machen.  Stattdessen definieren wir eine Methode zur Generierung eines möglichen Ergebnisses und wählen bewusst eine gute Methode basierend auf ihrer „Bewertung“. <br><br>  Folgende Anforderungen werden gestellt: <br><br><ul><li>  Das System kann in einer diskreten (möglicherweise unendlichen) Zustandskonfiguration sein. </li><li>  Wir können diskrete Übergänge zwischen Zuständen definieren. </li><li>  Wir können eine Kostenfunktion festlegen, die den aktuellen Status des Systems schätzt. </li></ul><br>  Im Folgenden werde ich einige andere Beispiele nennen, in denen diese Methode meiner Meinung nach angewendet werden kann. <br><br><h2>  Implementierung </h2><br><h3>  Pseudocode </h3><br>  In unserer Implementierung möchten wir Folgendes erreichen: <br><br><ul><li>  Setzt den Systemstatus. </li><li>  Alle möglichen Übergänge auf den nächsten Status setzen. </li><li>  Berechnen Sie die Kosten des aktuellen Zustands. </li><li>  Berechnen Sie die Kosten aller möglichen nächsten Zustände (oder einer Teilmenge davon). </li><li>  Berechnen Sie mithilfe der Gibbs-Verteilung die Wahrscheinlichkeit von Übergängen. </li><li>  Beispiel (Beispiel) Übergänge mit Wahrscheinlichkeiten. </li><li>  Führen Sie einen abgetasteten Übergang durch. </li><li>  Rechentemperatur reduzieren. </li><li>  Wiederholen Sie die Schritte, bis Sie zufriedenstellende Ergebnisse erhalten. </li></ul><br>  In Form von Pseudocode lautet der MCMC-Algorithmus wie folgt: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// MCMC    T = 200; //     State s = initialState(); Transitions t[n] = {...} //n   thresh = 0.01; //  ( ) // ,      while(T &gt; thresh){ //    curcost = costfunc(s); newcost[n] = {0}; // newcost   0 probability[n] = {0}; //     0 //  for(i = 0; i &lt; n; i++){ newcost[i] = costfunc(doTransition(s, t[i])); probability[i] = exp(-(newcost[i] - curcost)/T); } //  probability /= sum(probability); //  sampled = sample_transition(t, probability); //  s = doTransition(s, sampled); //  T *= 0.975; }</span></span></code> </pre> <br><h3>  3D-Gebäudegenerierung </h3><br><h4>  Zustandsraum und Übergänge </h4><br>  Um Gebäude in 3D zu generieren, generiere ich viele Räume mit dem durch den Begrenzungsrahmen angegebenen Volumen. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Volume</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 a; glm::vec3 b; void translate(glm::vec3 shift); int getVol(); }; //   int Volume::getVol(){ return abs((bx-ax)*(by-ay)*(bz-az)); } //    void Volume::translate(glm::vec3 shift){ a += shift; b += shift; }</span></span></code> </pre> <br>  Wenn ich n Räume generiere, ist der Status des Systems die Konfiguration der Begrenzungsrahmen im 3D-Raum. <br><br>  Es sollte beachtet werden, dass die möglichen Konfigurationen für diese Volumes endlos sind, aber unzählige (sie können in einer unendlichen Zeitspanne aufgelistet werden)! <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  (  !) std::vector&lt;Volume&gt; rooms; // N  for(int i = 0; i &lt; n; i++){ //  Volume x; xa = glm::vec3(0); xb = glm::vec3(rand()%4+5); //   //  . rooms.push_back(x); } //...</span></span></code> </pre> <br>  Viele mögliche Übergänge werden eine schrittweise Verschiebung von Räumen in eine der sechs Raumrichtungen sein, einschließlich des Fehlens eines Übergangs: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//... //   std::array&lt;glm::vec3, 7&gt; moves = { glm::vec3( 0, 0, 0), //   ! glm::vec3( 1, 0, 0), glm::vec3(-1, 0, 0), glm::vec3( 0, 1, 0), glm::vec3( 0,-1, 0), glm::vec3( 0, 0, 1), glm::vec3( 0, 0,-1), }; //...</span></span></code> </pre> <br>  Hinweis: Es ist wichtig, dass wir das System in der Lage halten, in seinem aktuellen Zustand zu bleiben! <br><br><h4>  Kostenfunktion </h4><br>  Ich wollte, dass die Volumes im 3D-Raum sich wie „Magnete“ verhalten, das heißt: <br><br><ul><li>  Wenn sich ihre Volumina überschneiden, ist dies schlecht. </li><li>  Wenn sich ihre Oberflächen berühren, ist dies gut. </li><li>  Wenn sie sich überhaupt nicht berühren, ist dies schlecht. </li><li>  Wenn sie den Boden berühren, ist das gut. </li></ul><br>  Für zwei Quader im 3D-Raum können wir leicht einen Begrenzungsrahmen definieren: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Volume </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boundingBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Volume v1, Volume v2)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Volume bb; //   bb.ax = (v1.ax &lt; v2.ax)?v1.ax:v2.ax; bb.ay = (v1.ay &lt; v2.ay)?v1.ay:v2.ay; bb.az = (v1.az &lt; v2.az)?v1.az:v2.az; //   bb.bx = (v1.bx &gt; v2.bx)?v1.bx:v2.bx; bb.by = (v1.by &gt; v2.by)?v1.by:v2.by; bb.bz = (v1.bz &gt; v2.bz)?v1.bz:v2.bz; return bb; }</span></span></code> </pre> <br>  Mithilfe des Begrenzungsrahmens für Volumina können wir einen 3D-Vektor berechnen, der Informationen zum Schnittpunkt zweier Volumina liefert. <br><br>  Wenn die Länge des Parallelepipeds entlang einer Seite größer ist als die Summe der Längen von zwei Volumina entlang dieser Seite, berühren sie sich von dieser Seite nicht.  Wenn sie gleich sind, berühren sich die Flächen, und wenn sie kleiner sind, schneiden sich die Volumina. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    3  glm::vec3 overlapVolumes(Volume v1, Volume v2){ //      Volume bb = boundingBox(v1, v2); //  glm::vec3 ext1 = glm::abs(v1.b - v1.a); // v1  3  glm::vec3 ext2 = glm::abs(v2.b - v2.a); // v2  3  glm::vec3 extbb = glm::abs(bb.b - bb.a); //   //  return ext1 + ext2 - extbb; }</span></span></code> </pre> <br>  Dieser Code wird verwendet, um die Anzahl der Mengen zu berechnen, für die ich einen gewichteten Betrag bilde, der letztendlich als Kosten verwendet wird. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volumeCostFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;Volume&gt; rooms)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// int metric[6] = { 0, //   0, //   0, //     0, //     0, // ,   0};//    int weight[6] = {2, 4, -5, -5, -5, 5}; //    for(unsigned int i = 0; i &lt; rooms.size(); i++){ //     for(unsigned int j = 0; j &lt; rooms.size(); j++){ //    ,  . if(i == j) continue; //    . glm::vec3 overlap = overlapVolumes(rooms[i], rooms[j]); //   glm::vec3 posOverlap = glm::clamp(overlap, glm::vec3(0), overlap); metric[0] += glm::abs(posOverlap.x*posOverlap.y*posOverlap.z); //   //   glm::vec3 negOverlap = glm::clamp(overlap, overlap, glm::vec3(0)); metric[1] += glm::abs(negOverlap.x*negOverlap.y*negOverlap.z); //   //   if(overlap.y == 0){ metric[2] += overlap.x*overlap.z; } //   (X) if(overlap.x == 0){ //      0,   , .. overlap.z = 0 metric[3] += overlap.z*overlap.y; } //   (Z) if(overlap.z == 0){ //      0,   , .. overlap.x = 0 metric[4] += overlap.x*overlap.y; } } //  ,   -   . if(rooms[i].ay == 0){ //  ,  ,    . metric[4] += rooms[i].ax*rooms[i].az; } //,     ! if(rooms[i].ay &lt; 0){ //,        if(rooms[i].by &lt; 0){ metric[5] += rooms[i].getVol(); } else{ metric[5] += abs(rooms[i].ay)*(rooms[i].bz-rooms[i].az)*(rooms[i].bx-rooms[i].ax); } } } // Metric * Weights return metric[0]*weight[0] + metric[1]*weight[1] + metric[2]*weight[2] + metric[3]*weight[3] + metric[4]*weight[4] + metric[5]*weight[5]; }</span></span></code> </pre> <br>  Hinweis: „Positives Schnittvolumen“ bedeutet, dass sich die Volumina tatsächlich schneiden.  „Negatives Schnittvolumen“ bedeutet, dass sie sich überhaupt nicht berühren und der Schnittpunkt durch das Volumen im Raum definiert wird, das sich zwischen den zwei nächstgelegenen Punkten von zwei Quadern im 3D-Raum befindet. <br><br>  Gewichte werden so gewählt, dass das eine Vorrang hat und das andere Vorrang hat.  Zum Beispiel feine ich hier die unter dem Boden befindlichen Räume streng ein und erhöhe auch die Priorität derjenigen, deren Oberflächenbereiche sich berühren (mehr als ich den Schnittpunkt der Volumina feine). <br><br>  Ich generiere Kosten für alle Zimmerpaare und ignoriere Räume, die mit sich selbst gepaart sind. <br><br><h4>  Eine kostengünstige Lösung finden </h4><br>  Die Konvergenz wird wie im Pseudocode beschrieben durchgeführt.  Bei der Umstellung bewege ich jeweils nur einen Raum.  Dies bedeutet, dass ich mit n Räumen und 7 möglichen Übergängen 7 * n Wahrscheinlichkeiten berechnen und aus allen auswählen muss, wobei ich nur den Raum bewege, der <em>wahrscheinlich am</em> meisten bevorzugt wird. <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//  float T = 250; while(T &gt; 0.1){ //   std::vector&lt;std::array&lt;double, moves.size()&gt;&gt; probabilities; //   () int curEnergy = volumeCostFunction(rooms); //      ... for(int i = 0; i &lt; n; i++){ //    std::array&lt;double, moves.size()&gt; probability; //      ,     for(unsigned int m = 0; m &lt; moves.size(); m++){ //        . rooms[i].translate(moves[m]); //      ! probability[m] = exp(-(double)(volumeCostFunction(rooms) - curEnergy)/T); //   rooms[i].translate(-moves[m]); } //       probabilities.push_back(probability); } //  ( ) double Z = 0; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ Z += probabilities[i][j]; } } //  for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ probabilities[i][j] /= Z; } } //    (CDF) ( ) std::vector&lt;double&gt; cdf; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ if(cdf.empty()) cdf.push_back(probabilities[i][j]); else cdf.push_back(probabilities[i][j] + cdf.back()); } } //      std::random_device rd; std::mt19937 e2(rd()); std::uniform_real_distribution&lt;&gt; dist(0, 1); double uniform = dist(e2); int sampled_index = 0; //   CDF for(unsigned int i = 0; i &lt; cdf.size(); i++){ //    ,   ... if(cdf[i] &gt; uniform){ sampled_index = i; break; } } //     int _roomindex = sampled_index/moves.size(); int _moveindex = sampled_index%moves.size(); //  rooms[_roomindex].translate(moves[_moveindex]); // T T *= 0.99; // !!! } //!! //...</span></span></code> </pre> <br>             ;    «  ». <br><br>       ,      (cumulative distribution function, CDF).             0  1.     CDF  ,   ,     «    CDF       »,      .  : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/960/9fe/3cd/9609fe3cdc3a514c34ed2d8e128d8629.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anstelle einer kontinuierlichen Funktion können diskrete Schritte vorhanden sein. </font><font style="vertical-align: inherit;">Weitere Details finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Außerdem habe ich Raumvolumendaten im 3D-Raum! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich benutze sie, um mithilfe der Blueprint-Klasse ein „Schema“ zu generieren und ein Thema auf bekannte Massendaten anzuwenden. </font><font style="vertical-align: inherit;">So bekommen Häuser ihr Aussehen. </font><font style="vertical-align: inherit;">Die Bauplanklasse ist im vorherigen Artikel [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] ([ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übersetzung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] auf Habré) beschrieben. </font><font style="vertical-align: inherit;">Eine vollständige Erstellung eines Hauses aus diesen Volumes finden Sie im Quellcode.</font></font><br><br><h2>  Ergebnisse </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ergebnisse für eine solche verallgemeinerte Methode sind recht gut. </font><font style="vertical-align: inherit;">Das einzige, was ich einrichten musste, war die richtige Priorität und Strafgewichte in der Kostenfunktion.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" width="562" height="562"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige Beispiele für die Erstellung von Gebäuden mit diesem Algorithmus und dem auf sie angewendeten Thema.</font></font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62d/1ee/92c/62d1ee92c2f422d79c27c14532346855.gif"></div><br> <i>  ( ).</i> <br><br>     ,      (3-5),           . <br><br>         ,      3D- ,      MCMC. <br><br>     ,    ,           ,       .  ,         ,   . <br><br>          .    (  ). <br><br><h2>     </h2><br> ,     3D-    2D-,      . <br><br>        ,        2D-    —        ,    . <br><br>         ,     ,      ,     ,   ,      . <br><br>        MCMC,           ,       (             ,  ..). <br><br>   : <br><br><ul><li>  ;       ,    /   . </li><li>  ,          ,    ,   . </li><li> ,  ! </li></ul><br>  :     MCMC     ,  « »,  NP- .   —  ,      ,   —  ! <br><br><h2>   Task- </h2><br> ,     task-           . <br><br>   ,    ,   : <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterstützt kein HTML5-Video. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/bot_the_builder3.mp4" type="video/mp4"></video></div></div></div><br> <i>      ( ,     ).    .        (   )     .   ,    .            ,       .    - ,     , .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475764/">https://habr.com/ru/post/de475764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475754/index.html">Shorts über Scrum</a></li>
<li><a href="../de475756/index.html">Food Design Digest Oktober 2019</a></li>
<li><a href="../de475758/index.html">Automatisch erneuerbare Abonnementstufen in der iOS-App</a></li>
<li><a href="../de475760/index.html">Nachwuchsentwickler - warum wir sie einstellen und wie wir mit ihnen arbeiten</a></li>
<li><a href="../de475762/index.html">Ein Lebenslauf mit einem Foto fliegt in eine Urne. Merkmale der Jobsuche in den USA</a></li>
<li><a href="../de475768/index.html">Kotlin: Wie ist es eine gute Wahl für die Entwicklung von Android-Apps?</a></li>
<li><a href="../de475770/index.html">Stanford University - Besuch und Rückblick</a></li>
<li><a href="../de475772/index.html">6 Anwendungspunkte für das industrielle Internet der Dinge</a></li>
<li><a href="../de475774/index.html">"Das sind alberne Regeln, die jeden nerven": Diskussion über die Praxis der Passwortfelder</a></li>
<li><a href="../de475776/index.html">Do-it-yourself steht für drei Gitarren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>