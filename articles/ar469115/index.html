<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค ๐ ๐ Discovery.js Guide: ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ ๐ด๐ฟ #โฃ ๐ง๐ฝโ๐คโ๐ง๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุณูุฑุดุฏู ูุฐุง ุงูุฏููู ุงูุฅุฑุดุงุฏู ุงูุชุงูู ุฅูู ุนูููุฉ ุฅูุดุงุก ุญู ูุณุชูุฏ ุฅูู ูุดุฑูุน Discovery.js . ูุฏููุง ูู ุฅูุดุงุก ููุชุด node_modules NPM ุ ุฃู ูุงุฌูุฉ ููุญุต ุจููุฉ node_mod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Discovery.js Guide: ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/469115/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ุณูุฑุดุฏู ูุฐุง ุงูุฏููู ุงูุฅุฑุดุงุฏู ุงูุชุงูู ุฅูู ุนูููุฉ ุฅูุดุงุก ุญู ูุณุชูุฏ ุฅูู ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Discovery.js</a> .  ูุฏููุง ูู ุฅูุดุงุก ููุชุด <code>node_modules</code> NPM ุ ุฃู ูุงุฌูุฉ ููุญุต ุจููุฉ <code>node_modules</code> . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ih/d_/sc/ihd_schofzsmx1xbptuvltrxmu8.png"></p><br><blockquote style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูุง ูุฒุงู Discovery.js ูู ูุฑุญูุฉ ูุจูุฑุฉ ูู ุงูุชุทููุฑ ุ ูุฐุง ุจูุฑูุฑ ุงูููุช ุ ุณูู ูุณูู ุดูุก ูุง ููุตุจุญ ุฃูุซุฑ ูุงุฆุฏุฉ.  ุฅุฐุง ูุงูุช ูุฏูู ุฃููุงุฑ ุญูู ููููุฉ ุชุญุณูู ุดูุก ูุง ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงูุชุจ ููุง</a> . </blockquote><br><h2 id="annotaciya" style=";text-align:right;direction:rtl">  ููุฎุต </h2><br><p style=";text-align:right;direction:rtl">  ุณุชุฌุฏ ุฃุฏูุงู ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูููุงููู ุงูุฃุณุงุณูุฉ ูู Discovery.js.  ููููู ูุนุฑูุฉ ุงูููุฏ ุงููุฏูู ุจุงููุงูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุนูู GitHub</a> ุ ุฃู ููููู ุชุฌุฑุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุนููู ุนูู ุงูุฅูุชุฑูุช</a> . </p><a name="habracut"></a><br><h2 id="nachalnye-usloviya" style=";text-align:right;direction:rtl">  ุงูุธุฑูู ุงูุฃูููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุงุฎุชูุงุฑ ูุดุฑูุน ููุชุญููู.  ูููู ุฃู ูููู ูุฐุง ูุดุฑูุนูุง ุชู ุฅูุดุงุคู ุญุฏูุซูุง ุฃู ูุดุฑูุนูุง ูุงุฆููุง ุ ูุงูุดูุก ุงูุฑุฆูุณู ูู ุฃูู ูุญุชูู ุนูู <code>node_modules</code> (ูุฏู ุชุญููููุง). </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูู ุจุชุซุจูุช ุญุฒูุฉ <code>discoveryjs</code> ุงูุฃุณุงุณูุฉ ูุฃุฏูุงุช ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm install @discoveryjs/discovery @discoveryjs/cli</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูู ุจุชุดุบูู ุฎุงุฏู Discovery.js: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&gt; npx discovery No config is used Models are not defined (model free mode is enabled) Init common routes ... OK Server listen on http://localhost:8123</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจูุชุญ <code>http://localhost:8123</code> ูู ุงููุณุชุนุฑุถ ุ ููููู ุฑุคูุฉ ูุง ููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4e6/fc9/228/4e6fc922872955e6a2f3355e2856b3d1.png" alt="ุงูุชุดุงู ุฏูู ุงูุชูููู"></p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุถุน ุจุฏูู ูููุฐุฌ ุ ุฃู ูุถุน ุนูุฏ ุนุฏู ุชูููู ุฃู ุดูุก.  ููู ุงูุขู ุ ุจุงุณุชุฎุฏุงู ุฒุฑ "ุชุญููู ุงูุจูุงูุงุช" ุ ููููู ุชุญุฏูุฏ ุฃู ููู JSON ุ ุฃู ุจุจุณุงุทุฉ ุงุณุญุจู ุฅูู ุงูุตูุญุฉ ูุจุฏุก ุงูุชุญููู. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุดูุก ูุญุฏุฏ.  ุนูู ูุฌู ุงูุฎุตูุต ุ ูุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุนุฑุถ ูุจููุฉ <code>node_modules</code> .  ููููุงู ุจุฐูู ุ ุฃุถู ุงูุชูููู. </p><br><h2 id="dobavlyaem-konfiguraciyu" style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุงูุชูููู </h2><br><p style=";text-align:right;direction:rtl">  ููุง ูุฏ ุชูุงุญุธ ุ <code>No config is used</code> ุนุฑุถ ุงูุฑุณุงูุฉ " <code>No config is used</code> ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุฎุงุฏู.  ูููู ุจุฅูุดุงุก ููู ุชูููู <code>.discoveryrc.js</code> ุจุงููุญุชููุงุช ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Node modules structure'</span></span>, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span> }; } };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ุฅุฐุง ููุช ุจุฅูุดุงุก ููู ูู ุฏููู ุงูุนูู ุงูุญุงูู (ุฃู ุ ูู ุฌุฐุฑ ุงููุดุฑูุน) ุ ููู ูููู ููุงู ุดูุก ุขุฎุฑ ูุทููุจ.  ูุฅูุง ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชูุฑูุฑ ุงููุณุงุฑ ุฅูู ููู ุงูุชูููู ุจุงุณุชุฎุฏุงู ุงูุฎูุงุฑ <code>--config</code> ุ ุฃู ุชุนููู ุงููุณุงุฑ ูู <code>package.json</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ ... <span class="hljs-attr"><span class="hljs-attr">"discovery"</span></span>: <span class="hljs-string"><span class="hljs-string">"path/to/discovery/config.js"</span></span>, ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู ุจุญูุซ ูุชู ุชุทุจูู ุงูุชูููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">&gt; npx discovery Load config from .discoveryrc.js Init single model default Define default routes ... OK Cache: DISABLED Init common routes ... OK Server listen on http://localhost:8123</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุชู ุงูุขู ุงุณุชุฎุฏุงู ุงูููู ุงูุฐู ุฃูุดุฃูุงู.  ูุชู ุชุทุจูู ุงููููุฐุฌ ุงูุงูุชุฑุงุถู ุงูููุถุญ ูู ูุจููุง (ูููู ุฃู ูุนูู Discovery ูู ูุถุน ุงูุนุฏูุฏ ูู ุงูุทุฑุฒ ุ ูุณูู ูุชุญุฏุซ ุนู ูุฐู ุงูููุฒุฉ ูู ุงูุฃุฏูุฉ ุงูุชุงููุฉ).  ุฏุนููุง ูุฑู ูุง ุงูุฐู ุชุบูุฑ ูู ุงููุชุตูุญ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/16f/f45/ac8/16ff45ac8eef467b6ccd0ff5624c9652.png" alt="ูุน ุงูุชูููู ุงูุฃุณุงุณู"></p><br><p style=";text-align:right;direction:rtl">  ูุง ูููู ุฑุคูุชู ููุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <code>name</code> ูุนููุงู ููุตูุญุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุชู ุนุฑุถ ูุชูุฌุฉ ุงุณุชุฏุนุงุก ุทุฑููุฉ <code>data</code> ุจุงุนุชุจุงุฑูุง ุงููุญุชูู ุงูุฑุฆูุณู ููุตูุญุฉ. </li></ul><br><blockquote style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูุฌุจ ุฃู ุชููู ุทุฑููุฉ <code>data</code> ุจุฅุฑุฌุงุน ุงูุจูุงูุงุช ุฃู ุงููุนุฏ ุ ุงูุฐู ูุญู ููุจูุงูุงุช. </blockquote><p style=";text-align:right;direction:rtl">  ูุตููุนุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ ุ ููููู ุงููุถู ูุฏูุง. </p><br><h2 id="kontekst" style=";text-align:right;direction:rtl">  ุงูุณูุงู </h2><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุตูุญุฉ ุงูุชูุฑูุฑ ุงููุฎุตุต (ุงููุฑ ููู <code>Make report</code> ): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/def/52b/57a/def52b57a6be174730f07fe55273517a.png" alt="ุชูุฑูุฑ ุงูุตูุญุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูููููุฉ ุงูุฃููู ุ ูุฐุง ูุง ูุฎุชูู ูุซูุฑุงู ุนู ุตูุญุฉ ุงูุจุฏุงูุฉ ... ูููู ููุง ููููู ุชุบููุฑ ูู ุดูุก!  ุนูู ุณุจูู ุงููุซุงู ุ ูููููุง ุฅุนุงุฏุฉ ุฅูุดุงุก ูุธูุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุณูููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/919/de1/c6c919de17d2fed5bdb0501fe1ff9dae.png" alt="ุฅุนุงุฏุฉ ุตูุญุฉ ุงูุจุฏุงูุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ููู ูุชู ุชุนุฑูู ุงูุฑุฃุณ: <code>"h1:#.name"</code> .  ูุฐุง ูู ุฑุฃุณ ุงููุณุชูู ุงูุฃูู ูุน ูุญุชููุงุช <code>#.name</code> ุ ููู ุทูุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Jora</a> .  ูุดูุฑ <code>#</code> ุฅูู ุณูุงู ุงูุทูุจ.  ูุนุฑุถ ูุญุชููุงุชู ุ ุจุจุณุงุทุฉ ุฃุฏุฎู <code>#</code> ูู ูุญุฑุฑ ุงูุงุณุชุนูุงู ูุงุณุชุฎุฏู ุงูุนุฑุถ ุงูุงูุชุฑุงุถู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/524/7a6/2cc/5247a62cc6194ab9bd4797c21ab084b9.png" alt="ููู ุงูุณูุงู"></p><br><p style=";text-align:right;direction:rtl">  ุฃูุช ุงูุขู ุชุนุฑู ููููุฉ ุงูุญุตูู ุนูู ูุนุฑูู ุงูุตูุญุฉ ุงูุญุงููุฉ ููุนููุงุชูุง ูุงูููู ุงููููุฏุฉ ุงูุฃุฎุฑู. </p><br><h2 id="sbor-dannyh" style=";text-align:right;direction:rtl">  ุฌูุน ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุณุชุฎุฏู ูุนุจ ุฑูุชูู ูู ุงููุดุฑูุน ุจุฏูุงู ูู ุจูุงูุงุช ุญููููุฉ ุ ููููุง ูุญุชุงุฌ ุฅูู ุจูุงูุงุช ุญููููุฉ.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ูุญุฏุฉ ููุทูุฉ ูุชุบููุฑ ูููุฉ <code>data</code> ูู ุงูุชูููู (ุจุงูููุงุณุจุฉ ุ ุจุนุฏ ูุฐู ุงูุชุบููุฑุงุช ุ ูุง ููุฒู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู): </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Node modules structure'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./collect-node-modules-data'</span></span>) };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชููุงุช <code>collect-node-modules-data.js</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scanFs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@discoveryjs/scan-fs'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> packages = []; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scanFs({ <span class="hljs-attr"><span class="hljs-attr">include</span></span>: [<span class="hljs-string"><span class="hljs-string">'node_modules'</span></span>], <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\/package.json$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">extract</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file, content</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pkg = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(content); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pkg.name &amp;&amp; pkg.version) { packages.push({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: pkg.name, <span class="hljs-attr"><span class="hljs-attr">version</span></span>: pkg.version, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.dirname(file.filename), <span class="hljs-attr"><span class="hljs-attr">dependencies</span></span>: pkg.dependencies }); } } }] }).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> packages); };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏ ุงุณุชุฎุฏูุช ุญุฒูุฉ <code>@discoveryjs/scan-fs</code> ุ ุงูุฃูุฑ ุงูุฐู ูุจุณุท ุนูููุฉ ูุณุญ ูุธุงู ุงููููุงุช.  ุชู ุชูุถูุญ ูุซุงู ูุงุณุชุฎุฏุงู ุงูุญุฒูุฉ ูู ุงูููู ุงูุชูููุฏู ููุง ุ ููุฏ ุฃุฎุฐุช ูุฐุง ุงููุซุงู ูุฃุณุงุณ ูุชู ุงูุงูุชูุงุก ููู ุญุณุจ ุงูุญุงุฌุฉ.  ุงูุขู ูุฏููุง ุจุนุถ ุงููุนูููุงุช ุญูู ูุญุชููุงุช <code>node_modules</code> : </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d0c/f24/64c/d0cf2464cadda8a8bc0433871200ae9b.png" alt="ุงูุจูุงูุงุช ุงูุชู ุชู ุฌูุนูุง"></p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุญุชุงุฌู!  ูุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ูุฐุง JSON ุนุงุฏู ุ ูููููุง ุจุงููุนู ุชุญูููู ูุงุณุชุฎูุงุต ุจุนุถ ุงูุงุณุชูุชุงุฌุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ุงูุฅุทุงุฑ ุงูููุจุซู ููููู ุงูุจูุงูุงุช ุ ููููู ูุนุฑูุฉ ุนุฏุฏ ุงูุญุฒู ููุนุฑูุฉ ุนุฏุฏ ูููุง ูุญุชูู ุนูู ุฃูุซุฑ ูู ูุซูู ูุนูู ูุงุญุฏ (ุจุณุจุจ ุงุฎุชูุงูุงุช ุงูุฅุตุฏุงุฑ ุฃู ูุดุงูู ูู ุฅูุบุงุก ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ุงูุฎุงุตุฉ ุจูู). </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8f3/93e/5e0/8f393e5e05a1385aa11aad92d8ad15a0.png" alt="ุจุญูุซ ูููู ุงูุจูุงูุงุช"></p><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ูุฏููุง ุจุงููุนู ุจุนุถ ุงูุจูุงูุงุช ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุฒูุฏ ูู ุงูุชูุงุตูู.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูููู ูู ุงูุฌูุฏ ูุนุฑูุฉ ุงูุญุงูุฉ ุงููุงุฏูุฉ ุงูุชู ุชุญู ูู ูู ุงูุชุจุนูุงุช ุงููุนููุฉ ููุญุฏุฉ ูุนููุฉ.  ููุน ุฐูู ุ ูุฅู ุงูุนูู ุนูู ุชุญุณูู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูุชุฌุงูุฒ ูุทุงู ูุฐุง ุงูุฏููู.  ูุฐูู ุ <code>@discoveryjs/node-modules</code> ุจุญุฒูุฉ <code>@discoveryjs/node-modules</code> (ูุงูุชู ุชุณุชูุฏ ุฃูุถูุง ุฅูู <code>@discoveryjs/scan-fs</code> ) ูุงุณุชุฑุฏุงุฏ ุงูุจูุงูุงุช ูุงูุญุตูู ุนูู ุงูุชูุงุตูู ุงููุงุฒูุฉ ุญูู ุงูุญุฒู.  ูุชูุฌุฉ ูุฐูู ุ <code>collect-node-modules-data.js</code> ุชุจุณูุท ุนูููุฉ <code>collect-node-modules-data.js</code> ุจุดูู ูุจูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fetchNodeModules = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@discoveryjs/node-modules'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetchNodeModules(); };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุงููุนูููุงุช ุญูู <code>node_modules</code> ุชุจุฏู ููุง ููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1f5/1c2/187/1f51c2187d527694cbf71089e8d74ba8.png" alt="ุจููุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ"></p><br><h2 id="skript-podgotovki" style=";text-align:right;direction:rtl">  ุงููุตู ุงูุชุญุถูุฑ </h2><br><p style=";text-align:right;direction:rtl">  ููุง ูุฏ ุชูุงุญุธ ุ ุชุญุชูู ุจุนุถ ุงููุงุฆูุงุช ุงูุชู ุชุตู ุงูุญุฒู ุนูู ูุญุฏุงุช ุชุจุนูุฉ - ูุงุฆูุฉ <code>deps</code> .  ูู ุชุจุนูุฉ ููุง ูุฌุงู ุชู <code>resolved</code> ููููุชู ูู ุงูุฅุดุงุฑุฉ ุฅูู ูุซูู ูุงุฏู ููุญุฒูุฉ.  ูุซู ูุฐุง ุงูุฑุงุจุท ูู ูููุฉ <code>path</code> ุฅุญุฏู ุงูุญุฒู ุ ุฅูู ูุฑูุฏ ูู ููุนู.  ูุญู ุงุฑุชุจุงุท ุงูุญุฒูุฉ ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุฑูุฒ ุฅุถุงูู (ุนูู ุณุจูู ุงููุซุงู ุ <code>#.data.pick(&lt;path=resolved&gt;)</code> ).  ูุจุงูุทุจุน ุ ุณูููู ุฃูุซุฑ ููุงุกูุฉ ุฅุฐุง ุชู ุญู ูุฐู ุงูุฑูุงุจุท ุจุงููุนู ูู ูุฑุงุฌุน ูุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ุ ูู ูุฑุญูุฉ ุฌูุน ุงูุจูุงูุงุช ุ ูุง ูููููุง ุญู ุงูุฑูุงุจุท ุ ูุฃู ูุฐุง ุณูุคุฏู ุฅูู ุงุชุตุงูุงุช ุฏุงุฆุฑูุฉ ุ ุงูุฃูุฑ ุงูุฐู ุณูุฎูู ูุดููุฉ ููู ูุฐู ุงูุจูุงูุงุช ูู ุดูู JSON.  ููุน ุฐูู ุ ููุงู ุญู: ูุฐุง ูู ุงูุณููุงุฑูู <code>prepare</code> ุฎุงุต.  ูุชู ุชุนุฑููู ูู ุงูุชูููู ููุณูู ูู ูู ูุฑุฉ ูุชู ูููุง ุชุฎุตูุต ุจูุงูุงุช ุฌุฏูุฏุฉ ููุซูู ุงูุงูุชุดุงู.  ููุจุฏุฃ ูุน ุงูุชูููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { ... prepare: __dirname + <span class="hljs-string"><span class="hljs-string">'/prepare.js'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// :   ,    ... };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ <code>prepare.js</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.setPrepare(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  -  data /   discovery });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุญุฏุฉ ุงูุชุนููููุฉ ุ ุญุฏุฏูุง ูุธููุฉ <code>prepare</code> ููุซูู ุงูุงุณุชูุดุงู.  ูุชู ุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ูู ูู ูุฑุฉ ูุจู ุชุทุจูู ุงูุจูุงูุงุช ุนูู ูุซูู ุงูุงุณุชูุดุงู.  ูุฐุง ููุงู ุฌูุฏ ููุณูุงุญ ุจุงูููู ูู ูุฑุงุฌุน ุงููุงุฆูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.setPrepare(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> packageIndex = data.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map, pkg</span></span></span><span class="hljs-function">) =&gt;</span></span> map.set(pkg.path, pkg), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>()); data.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pkg</span></span></span><span class="hljs-function"> =&gt;</span></span> pkg.deps.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dep</span></span></span><span class="hljs-function"> =&gt;</span></span> dep.resolved = packageIndex.get(dep.resolved) ) ); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุฃูุดุฃูุง ููุฑุณ ุญุฒูุฉ ุญูุซ ุงูููุชุงุญ ูู ูููุฉ <code>path</code> ุงูุญุฒูุฉ (ูุฑูุฏุฉ ูู ููุนูุง).  ุจุนุฏ ุฐูู ุ ูุชุตูุญ ุฌููุน ุงูุญุฒู ูุชุจุนูุงุชูุง ุ ููู ุงูุชุจุนูุงุช ูุณุชุจุฏู ุงููููุฉ ุงูุชู ุชู <code>resolved</code> ุจุงูุฅุดุงุฑุฉ ุฅูู ูุงุฆู ุงูุญุฒูุฉ.  ุงููุชูุฌุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/95b/277/dd6/95b277dd63dc3aff1fdf3716c6881356.png" alt="ุชุญููู deps.resved"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฃุตุจุญ ูู ุงูุฃุณูู ุจูุซูุฑ ุฅุฌุฑุงุก ุงุณุชุนูุงูุงุช ุงูุฑุณู ุงูุจูุงูู ุงูุชุจุนูุฉ.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ููููู ุจูุง ุงูุญุตูู ุนูู ูุฌููุนุฉ ูู ุงูุชุจุนูุงุช (ูุซู ุงูุชุจุนูุงุช ุ ุชุจุนูุงุช ุงูุชุจุนูุฉ ุ ููุง ุฅูู ุฐูู) ูุญุฒูุฉ ูุนููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c64/793/a78/c64793a78d40961af1b234fc111e4dc2.png" alt="ูุซุงู ุนูู ูุฌููุนุฉ ุงูุชุจุนูุฉ"></p><br><blockquote style=";text-align:right;direction:rtl">  ูุตุฉ ูุฌุงุญ ุบูุฑ ูุชููุนุฉ: ุฃุซูุงุก ุฏุฑุงุณุฉ ุงูุจูุงูุงุช ุฃุซูุงุก ูุชุงุจุฉ ุงูุฏููู ุ ุงูุชุดูุช ูุดููุฉ ูู <code>@discoveryjs/cli</code> (ุจุงุณุชุฎุฏุงู ุงูุงุณุชุนูุงู <code>.[deps.[not resolved]]</code> ) ุ ูุงูุชู ูุงู ููุง ุฎุทุฃ ูุทุจุนู ูู peerDependencies.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู ุฅุตูุงุญ</a> ุงููุดููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู</a> ุงูููุฑ.  ุงูุญุงูุฉ ูุซุงู ุฌูุฏ ุนูู ููููุฉ ูุณุงุนุฏุฉ ูุฐู ุงูุฃุฏูุงุช. </blockquote><p style=";text-align:right;direction:rtl">  ุฑุจูุง ุญุงู ุงูููุช ูุฅุธูุงุฑ ุนูู ุตูุญุฉ ุงูุจุฏุงูุฉ ุงูุนุฏูุฏ ูู ุงูุฃุฑูุงู ูุงูุญุฒู ูุน ูุฃุฎุฐ. </p><br><h2 id="nastraivaem-startovuyu-stranicu" style=";text-align:right;direction:rtl">  ุชุฎุตูุต ุตูุญุฉ ุงูุจุฏุงูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุญุฏุฉ ููุทูุฉ ููุตูุญุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>pages/default.js</code> .  ูุญู ูุณุชุฎุฏู ุงููุถุน <code>default</code> ุ ูุฃู ูุฐุง ูู ุงููุนุฑู ูุตูุญุฉ ุงูุจุฏุงูุฉ ุ ูุงูุชู ูููููุง ุชุฌุงูุฒูุง (ูู Discovery.js ุ ููููู ุชุฌุงูุฒ ุงููุซูุฑ).  ููุจุฏุฃ ุจุดูุก ุจุณูุท ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'default'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'h1:#.name'</span></span>, <span class="hljs-string"><span class="hljs-string">'text:"Hello world!"'</span></span> ]);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุงูุชูููู ุชุญุชุงุฌ ุฅูู ุชูุตูู ูุญุฏุฉ ุงูุตูุญุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Node modules structure'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./collect-node-modules-data'</span></span>), <span class="hljs-attr"><span class="hljs-attr">view</span></span>: { <span class="hljs-attr"><span class="hljs-attr">assets</span></span>: [ <span class="hljs-string"><span class="hljs-string">'pages/default.js'</span></span> <span class="hljs-comment"><span class="hljs-comment">//     ] } };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุงููุชุตูุญ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e0c/d07/8d5/e0cd078d55637ef62a697809544909b9.png" alt="ุชุฌุงูุฒ ุตูุญุฉ ุงูุจุฏุงูุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุฅูู ูุนูู! </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ูุญุตู ุนูู ุจุนุถ ุงูุนุฏุงุฏุงุช.  ููููุงู ุจุฐูู ุ ูู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู <code>pages/default.js</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'default'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'h1:#.name'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'inline-list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">'indicator'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">`[ { label: 'Package entries', value: size() }, { label: 'Unique packages', value: name.size() }, { label: 'Dup packages', value: group(&lt;name&gt;).[value.size() &gt; 1].size() } ]`</span></span> } ]);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูุญุฏุฏ ูุงุฆูุฉ ูุถููุฉ ูู ุงููุคุดุฑุงุช.  ูููุฉ <code>data</code> ูู ุงุณุชุนูุงู Jora ุงูุฐู ููุดุฆ ูุฌููุนุฉ ูู ุงูุณุฌูุงุช.  ูุชู ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุญุฒู (ุฌุฐุฑ ุงูุจูุงูุงุช) ูุฃุณุงุณ ููุงุณุชุนูุงูุงุช ุ ูุฐูู ูุญุตู ุนูู ุทูู ุงููุงุฆูุฉ ( <code>size()</code> ) ุ ูุนุฏุฏ ุฃุณูุงุก ุงูุญุฒูุฉ ุงููุฑูุฏุฉ ( <code>name.size()</code> ) ูุนุฏุฏ ุฃุณูุงุก ุงูุญุฒู ุงูุชู ููุง ููุฑุฑุฉ ( <code>group(&lt;name&gt;).[value.size() &gt; 1].size()</code> ). </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ebf/c97/8a2/ebfc978a2b2da44214a99a8382e17107.png" alt="ุฅุถุงูุฉ ูุคุดุฑุงุช ุฅูู ุตูุญุฉ ุงูุจุฏุงูุฉ"></p><br><p style=";text-align:right;direction:rtl">  ููุณ ุณูุฆุง  ููุน ุฐูู ุ ุณูููู ูู ุงูุฃูุถู ุฃู ูููู ูุฏูู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃุฑูุงู ุ ุฑูุงุจุท ููุนููุงุช ุงูููุงุจูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'default'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'h1:#.name'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'inline-list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Package entries'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Unique packages'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'name'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Dup packages'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'group(&lt;name&gt;).[value.size() &gt; 1]'</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">`indicator:{ label, value: value.query(#.data, #).size(), href: pageLink('report', { query: value, title: label }) }`</span></span> } ]);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูููุง ุจุชุบููุฑ ูููุฉ <code>data</code> ุ ูุงูุขู ูู ูุฌููุนุฉ ููุชุธูุฉ ูุน ุจุนุถ ุงููุงุฆูุงุช.  ุฃูุถูุง ุ ุชูุช ุฅุฒุงูุฉ ุทุฑููุฉ <code>size()</code> ูู ุทูุจุงุช ุงููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชูุช ุฅุถุงูุฉ ุงุณุชุนูุงู ูุฑุนู ุฅูู ุนุฑุถ <code>indicator</code> .  ุชูุดุฆ ูุฐู ุงูุฃููุงุน ูู ุงูุงุณุชุนูุงูุงุช ูุงุฆููุง ุฌุฏูุฏูุง ููู ุนูุตุฑ ูุชู ููู ุงุญุชุณุงุจ <code>value</code> ู <code>href</code> .  ุจุงููุณุจุฉ <code>value</code> ุ ูุชู ุชูููุฐ ุงุณุชุนูุงู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>query()</code> ุ ูุงูุชู ูุชู ููู ุงูุจูุงูุงุช ุฅูููุง ูู ุงูุณูุงู ุ ุซู ูุชู ุชุทุจูู ุทุฑููุฉ <code>size()</code> ุนูู ูุชูุฌุฉ ุงูุงุณุชุนูุงู.  ุจุงููุณุจุฉ ุฅูู <code>href</code> ุ ูุชู ุงุณุชุฎุฏุงู ุทุฑููุฉ <code>pageLink()</code> ุ ูุงูุชู ุชูุดุฆ ุฑุงุจุทูุง ุฅูู ุตูุญุฉ ุงูุชูุฑูุฑ ูุน ุทูุจ ูุญุฏุฏ ูุฑุฃุณ.  ุจุนุฏ ูู ูุฐู ุงูุชุบููุฑุงุช ุ ุฃุตุจุญุช ุงููุคุดุฑุงุช ูุงุจูุฉ ููููุฑ (ูุงุญุธ ุฃู ููููุง ุฃุตุจุญุช ุฒุฑูุงุก) ูุฃูุซุฑ ูุธูููุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e72/104/33c/e7210433ca45798701f34c6625cae050.gif" alt="ูุคุดุฑุงุช ูุงุจูุฉ ููููุฑ"></p><br><p style=";text-align:right;direction:rtl">  ูุฌุนู ุตูุญุฉ ุงูุจุฏุงูุฉ ุฃูุซุฑ ูุงุฆุฏุฉ ุ ุฃุถู ุฌุฏูููุง ุจู ุญุฒู ุชุญุชูู ุนูู ูุณุฎ ููุฑุฑุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'default'</span></span>, [ <span class="hljs-comment"><span class="hljs-comment">// ...      'h2:"Packages with more than one physical instance"', { view: 'table', data: ` group(&lt;name&gt;) .[value.size() &gt; 1] .sort(&lt;value.size()&gt;) .reverse() `, cols: [ { header: 'Name', content: 'text:key' }, { header: 'Version &amp; Location', content: { view: 'list', data: 'value.sort(&lt;version&gt;)', item: [ 'badge:version', 'text:path' ] } } ] } ]);</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ุงูุฌุฏูู ููุณ ุงูุจูุงูุงุช ูุซู ูุคุดุฑ <code>Dup packages</code> .  ุชู ูุฑุฒ ูุงุฆูุฉ ุงูุญุฒู ุญุณุจ ุญุฌู ุงููุฌููุนุฉ ุจุชุฑุชูุจ ุนูุณู.  ุชุฑุชุจุท ุจููุฉ ุงูุฅุนุฏุงุฏุงุช ุจุงูุฃุนูุฏุฉ (ุจุงูููุงุณุจุฉ ุ ุนุงุฏุฉ ูุง ุชุญุชุงุฌ ุฅูู ุชูููู).  ุจุงููุณุจุฉ ูุนููุฏ <code>Version &amp; Location</code> ุ ุญุฏุฏูุง ูุงุฆูุฉ ูุชุฏุงุฎูุฉ (ูุฑุชุจุฉ ุญุณุจ ุงูุฅุตุฏุงุฑ) ุ ูููู ูููุง ูู ุนูุตุฑ ุฒูุฌูุง ูู ุฑูู ุงูุฅุตุฏุงุฑ ูุงููุณุงุฑ ุฅูู ุงููุซูู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a50/5fd/4ab/a505fd4aba48f6a0d025fc5cd4b84b24.png" alt="ุฌุฏูู ูุถุงู ูุน ุญุฒู ุชุญุชูู ุนูู ุฃูุซุฑ ูู ูุซูู ูุนูู ูุงุญุฏ"></p><br><h2 id="stranica-paketov" style=";text-align:right;direction:rtl">  ุญุฒูุฉ ุงูุตูุญุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุฏููุง ููุท ููุญุฉ ุนุงูุฉ ุนู ุงูุญุฒู.  ููู ุณูููู ูู ุงููููุฏ ุงูุญุตูู ุนูู ุตูุญุฉ ุชุญุชูู ุนูู ุชูุงุตูู ุญูู ุญุฒูุฉ ูุนููุฉ.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก <code>pages/package.js</code> ูุญุฏุฉ ููุทูุฉ ุฌุฏูุฏุฉ <code>pages/package.js</code> ูุชุญุฏูุฏ ุตูุญุฉ ุฌุฏูุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'package'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'context'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">`{ name: #.id, instances: .[name = #.id] }`</span></span>, <span class="hljs-attr"><span class="hljs-attr">content</span></span>: [ <span class="hljs-string"><span class="hljs-string">'h1:name'</span></span>, <span class="hljs-string"><span class="hljs-string">'table:instances'</span></span> ] });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุญุฏุฉ ุ ูููุง ุจุชุนุฑูู ุงูุตูุญุฉ <code>package</code> ุงููุนุฑู.  ุชู ุงุณุชุฎุฏุงู ูููู <code>context</code> ูุชูุซูู ุฃููู.  ูุฐุง ูููู ุบูุฑ ูุฑุฆู ูุณุงุนุฏู ุนูู ุชุญุฏูุฏ ุจูุงูุงุช ุงูุชุนูููุงุช ุงููุชุฏุงุฎูุฉ.  ูุงุญุธ ุฃููุง ุงุณุชุฎุฏููุง <code>#.id</code> ููุญุตูู ุนูู ุงุณู ุงูุญุฒูุฉ ุ ูุงูุชู ูุชู ุงุณุชุฑุฏุงุฏูุง ูู ุนููุงู URL ูุซู <code>http://localhost:8123/#package:{id}</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชูุณู ุชุถููู ุงููุญุฏุฉ ุงูููุทูุฉ ุงูุฌุฏูุฏุฉ ูู ุงูุชูููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { ... view: { <span class="hljs-attr"><span class="hljs-attr">assets</span></span>: [ <span class="hljs-string"><span class="hljs-string">'pages/default.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'pages/package.js'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ] } };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุชูุฌุฉ ูู ุงููุชุตูุญ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3ee/698/da0/3ee698da0907aebaa1ace032942c0575.png" alt="ุญุฒูุฉ ุตูุญุฉ ูุซุงู"></p><br><p style=";text-align:right;direction:rtl">  ููุณุช ูุคุซุฑุฉ ุฌุฏุง ุ ูููู ุงูุขู.  ุณููุดุฆ ุชุนูููุงุช ุฃูุซุฑ ุชุนููุฏูุง ูู ุฃุฏูุฉ ูุงุญูุฉ. </p><br><h2 id="bokovaya-panel" style=";text-align:right;direction:rtl">  ููุญุฉ ุฌุงูุจูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ูุฏููุง ุจุงููุนู ุตูุญุฉ ุญุฒูุฉ ุ ุณูููู ูู ุงูุฌูุฏ ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุญุฒู.  ููููุงู ุจุฐูู ุ ููููู ุชุญุฏูุฏ ุนุฑุถ ุฎุงุต - <code>sidebar</code> ุ ูุงูุฐู ูุชู ุนุฑุถู ุฅุฐุง ุชู ุชุนุฑููู (ุบูุฑ ูุนุฑู ุจุดูู ุงูุชุฑุงุถู).  ูู ุจุฅูุดุงุก <code>views/sidebar.js</code> ูุญุฏุฉ ููุทูุฉ ุฌุฏูุฏุฉ <code>views/sidebar.js</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.view.define(<span class="hljs-string"><span class="hljs-string">'sidebar'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'name.sort()'</span></span>, <span class="hljs-attr"><span class="hljs-attr">item</span></span>: <span class="hljs-string"><span class="hljs-string">'link:{ text: $, href: pageLink("package") }'</span></span> });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุฏููุง ูุงุฆูุฉ ุจุฌููุน ุงูุญุฒู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/503/326/a02/503326a020869af76a3b2076c5df2394.png" alt="ุงูุดุฑูุท ุงูุฌุงูุจู"></p><br><p style=";text-align:right;direction:rtl">  ุงููุง ุชุจุฏู ุฌูุฏุฉ.  ูููู ูุน ูุฑุดุญ ุณูููู ุฃูุถู.  ูุญู ููุณุน ุชุนุฑูู <code>sidebar</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.view.define(<span class="hljs-string"><span class="hljs-string">'sidebar'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'content-filter'</span></span>, <span class="hljs-attr"><span class="hljs-attr">content</span></span>: { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'name.[no #.filter or $~=#.filter].sort()'</span></span>, <span class="hljs-attr"><span class="hljs-attr">item</span></span>: { <span class="hljs-attr"><span class="hljs-attr">view</span></span>: <span class="hljs-string"><span class="hljs-string">'link'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'{ text: $, href: pageLink("package"), match: #.filter }'</span></span>, <span class="hljs-attr"><span class="hljs-attr">content</span></span>: <span class="hljs-string"><span class="hljs-string">'text-match'</span></span> } } });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ููุง ุจูู ุงููุงุฆูุฉ ูู ูููู <code>content-filter</code> ุงูุฐู ูุญูู ูููุฉ ุงูุฅุฏุฎุงู ูู ุญูู ุงูุฅุฏุฎุงู ุฅูู ุชุนุจูุฑุงุช ุนุงุฏูุฉ (ุฃู <code>null</code> ุฅุฐุง ูุงู ุงูุญูู ูุงุฑุบูุง) ูุญูุธู ููููุฉ <code>filter</code> ูู ุงูุณูุงู (ูููู ุชุบููุฑ <code>name</code> ุฎูุงุฑ <code>name</code> ).  ุฃูุถูุง ุ ูุชุตููุฉ ุงูุจูุงูุงุช ูููุงุฆูุฉ ุ ุงุณุชุฎุฏููุง <code>#.filter</code> .  ุฃุฎูุฑูุง ุ ุทุจููุง ุชุนููู ุงูุงุฑุชุจุงุท ูุชูููุฒ ุงูุฃุฌุฒุงุก ุงููุชุทุงุจูุฉ ูุน ูุทุงุจูุฉ <code>text-match</code> .  ุงููุชูุฌุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d55/74f/67e/d5574f67e7a2dd222194c66f5ecf0673.png" alt="ูุงุฆูุฉ ุงูุชุตููุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ูุง ุชุญุจ ุงูุชุตููู ุงูุงูุชุฑุงุถู ุ ููููู ุชุฎุตูุต ุงูุฃููุงุท ููุง ุชุดุงุก.  ูููุชุฑุถ ุฃูู ุชุฑูุฏ ุชุบููุฑ ุนุฑุถ ุงูุดุฑูุท ุงูุฌุงูุจู ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ููู ููุท (ุนูู ุณุจูู ุงููุซุงู ุ <code>views/sidebar.css</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.discovery-sidebar</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฅุถุงูุฉ ุฑุงุจุท ุฅูู ูุฐุง ุงูููู ูู ุงูุชูููู ุ ููุฐูู ุฅูู ูุญุฏุงุช ุฌุงูุง ุณูุฑูุจุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { ... view: { <span class="hljs-attr"><span class="hljs-attr">assets</span></span>: [ ... <span class="hljs-string"><span class="hljs-string">'views/sidebar.css'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//  assets    *.css  'views/sidebar.js' ] } };</span></span></code> </pre> <br><h2 id="avtossylki" style=";text-align:right;direction:rtl">  ุงูุฑุงุจุท ุงูุขูู </h2><br><p style=";text-align:right;direction:rtl">  ุงููุตู ุงูุฃุฎูุฑ ูู ูุฐุง ุงูุฏููู ูุฎุตุต ููุฑูุงุจุท.  ูู ููุช ุณุงุจู ุ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>pageLink()</code> ุ ุฃูุดุฃูุง ุฑุงุจุทูุง ุฅูู ุตูุญุฉ ุงูุญุฒูุฉ.  ูููู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฑุงุจุท ุ ูุฌุจ ุนููู ุฃูุถูุง ุชุนููู ูุต ุงูุงุฑุชุจุงุท.  ูููู ููู ูููููุง ุฃู ูุฌุนู ุงูุฃูุฑ ุฃุณููุ </p><br><p style=";text-align:right;direction:rtl">  ูุชุจุณูุท ุนูู ุงูุฑูุงุจุท ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุงุนุฏุฉ ูุฅูุดุงุก ุงูุฑูุงุจุท.  ูู ุงูุฃูุถู ุงูููุงู ุจุฐูู ูู ุงูุจุฑูุงูุฌ ุงููุตู <code>prepare</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.setPrepare(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ ... const packageIndex = data.reduce( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map, item</span></span></span><span class="hljs-function">) =&gt;</span></span> map .set(item, item) <span class="hljs-comment"><span class="hljs-comment">// key is item itself .set(item.name, item), // and `name` value new Map() ); discovery.addEntityResolver(value =&gt; { value = packageIndex.get(value) || packageIndex.get(value.name); if (value) { return { type: 'package', id: value.name, name: value.name }; } }); });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุถููุง ุฎุฑูุทุฉ ุฌุฏูุฏุฉ (ููุฑุณ) ููุญุฒู ูุงุณุชุฎุฏููุงูุง ูู ุฃุฏุงุฉ ุชุญููู ุงูููุงูุงุช.  ูุญุงูู ูุญูู ุงูููุงู ุ ุฅู ุฃููู ุ ุชุญููู ุงููููุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูููุง ุฅูู ูุงุตู ููุงู.  ูุญุชูู ูุงุตู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>type</code> - ููุน ุงูููุงู </li><li style=";text-align:right;direction:rtl">  <code>id</code> - ูู ูุฑุฌุน ูุฑูุฏ ููุซูู ุงูููุงู ุงููุณุชุฎุฏู ูู ุงูุงุฑุชุจุงุทุงุช ููุนุฑูู </li><li style=";text-align:right;direction:rtl">  <code>name</code> - ูุณุชุฎุฏู ููุต ุงุฑุชุจุงุท </li></ul><br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ุชุญุชุงุฌ ุฅูู ุชุนููู ูุฐุง ุงูููุน ุฅูู ุตูุญุฉ ูุนููุฉ (ูุฌุจ ุฃู ูุคุฏู ุงูุงุฑุชุจุงุท ุฅูู ููุงู ูุง ุ ุฃููุณ ูุฐููุ). </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">discovery.page.define(<span class="hljs-string"><span class="hljs-string">'package'</span></span>, { ... }, { <span class="hljs-attr"><span class="hljs-attr">resolveLink</span></span>: <span class="hljs-string"><span class="hljs-string">'package'</span></span> <span class="hljs-comment"><span class="hljs-comment">//    `package`    });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงููุชูุฌุฉ ุงูุฃููู ููุฐู ุงูุชุบููุฑุงุช ูู ุฃู ุจุนุถ ุงูููู ูู ุนุฑุถ <code>struct</code> ูุชู ุชูููุฒูุง ุงูุขู ุจุฑุงุจุท ุฅูู ุตูุญุฉ ุงูุญุฒูุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/eb2/dcd/502/eb2dcd5024f589a3ba8180f2b1ec538f.png" alt="ุฑูุงุจุท ุงูุณูุงุฑุงุช ูู ุงููููู"></p><br><p style=";text-align:right;direction:rtl">  ูุงูุขู ููููู ุฃูุถูุง ุชุทุจูู ูููู <code>auto-link</code> ุนูู ูุงุฆู ุฃู ุงุณู ุงูุญุฒูุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/64d/3c2/f24/64d3c2f244164a22c55ff433409f6e22.png" alt="ุจุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุงูุชููุงุฆู"></p><br><p style=";text-align:right;direction:rtl">  ูููุซุงู ุ ููููู ุฅุนุงุฏุฉ ุตูุงุบุฉ ุงูุดุฑูุท ุงูุฌุงูุจู ููููุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">//   item: { view: 'link', data: '{ text: $, href: pageLink("package"), match: #.filter }', content: 'text-match' }, //   `auto-link` item: { view: 'auto-link', content: 'text-match:{ text, match: #.filter }' }</span></span></code> </pre> <br><h2 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br><p style=";text-align:right;direction:rtl">  ูุฏูู ุงูุขู ููู ุฃุณุงุณู ููููุงููู ุงูุฃุณุงุณูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Discovery.js</a> .  ูู ุงูุฃุฏูุฉ ุงูุชุงููุฉ ุณูู ูููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ุงูููุถูุนุงุช ุงูุชู ุชูุช ุชุบุทูุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุงุทูุงุน ุนูู ุดูุฑุฉ ุงููุตุฏุฑ ุงููุงููุฉ ููุฏููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชูุฏุน ุงูุชุฎุฒูู ุนูู GitHub</a> ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌุฑุจุฉ ููููุฉ ุนููู ุนูู ุงูุฅูุชุฑูุช</a> . </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุชุจุน @ js_discovery</a> ุนูู Twitter ูููุงูุจุฉ ุขุฎุฑ ุงูุฃุฎุจุงุฑ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar469115/">https://habr.com/ru/post/ar469115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar469097/index.html">ุฎุงุฏู ุงูููุจ CentOS 8 ูุน php7 ู node.js ู redis</a></li>
<li><a href="../ar469099/index.html">ุงุฎุชุจุงุฑ ุงูููุงู ูู ููุงุจูุฉ ุงููุทูุฑ - ูู ูุนููุ</a></li>
<li><a href="../ar469101/index.html">ุชุนูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ: ููููุฉ ุชุนูู ุงูุชุญุฏุซ ููุชุญุฏุซ ุฃุตูู</a></li>
<li><a href="../ar469109/index.html">ุฃูุนุงุจ ุฎุดุจูุฉ ุ ุงูุฌุฒุก ุงูุซุงูุซ - 1989</a></li>
<li><a href="../ar469111/index.html">ุงุณุชุจุฏุงู ุงููุงุฆู ุจู var: ูุง ุงูุฎุทุฃ ุงูุฐู ูููู ุฃู ูุญุฏุซุ</a></li>
<li><a href="../ar469117/index.html">ุงูุจุฑูุฌุฉ ุชุญุช 0010 ูุจู ุงููููุงุฏ ูู 2019</a></li>
<li><a href="../ar469119/index.html">ุงูุชูุช ุนูุงููู IPv4 ูู RIPE. ุงูุชูู ุจุงููุงูู ...</a></li>
<li><a href="../ar469125/index.html">ููุถูุน ุงูุธูุงู ุซูุฏุฑุจูุฑุฏ ูุณุจุจ ูุชุดุบูู ูุญูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</a></li>
<li><a href="../ar469127/index.html">ุงูุฃูุซู ุฃู ููู ูุง ุชุทูู ุงููุงุฑ ุนูู ููุณู ูู ุงููุฏู</a></li>
<li><a href="../ar469129/index.html">ุจุณุจุจ ุงูุณูุฉ ุงููุธููุฉ ุ ูุงู ุนูู ุซูุฏุฑุจูุฑุฏ ุชุดุบูู ูุญูู ุงูููุฏ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>