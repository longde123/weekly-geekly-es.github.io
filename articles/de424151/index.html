<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎋 🌻 👂🏾 Etikettiermaschine für Lippenetiketten - Erweitern Sie die Zylinderverzerrung programmgesteuert ♓️ 🚶🏻 🤾🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In unserer Anwendung gibt es eine Funktion wie den Sohn der Freundin vivino meiner Mutter - die Definition von Wein auf einem Foto. Unter der Haube - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Etikettiermaschine für Lippenetiketten - Erweitern Sie die Zylinderverzerrung programmgesteuert</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424151/">  In unserer Anwendung gibt es eine Funktion wie den <s>Sohn der Freundin</s> vivino <s>meiner Mutter</s> - die Definition von Wein auf einem Foto.  Unter der Haube - die Nutzung von Drittanbieter-Diensten, Tineye -, um das am besten geeignete Etikett, Google Vision, zu bestimmen, um den Text darauf zu lesen.  Letzteres ist notwendig, um das richtige Produkt zu klären, weil  Bei der Bildsuche wird die Bedeutung einiger Regionen in der Regel nicht berücksichtigt - dies sind Textinformationen - Jahr und Art des Weins. <br><br>  Die Genauigkeit beider Dienste wird jedoch aufgrund der Tatsache, dass das Etikett durch eine zylindrische Oberfläche verzerrt ist, merklich verringert. <br><br>  Dies macht sich insbesondere bei Google Vision bemerkbar: Jeder Text außerhalb des zentralen Teils des Etiketts ist praktisch unlesbar, obwohl eine Person ihn leicht erkennt.  In diesem Artikel werde ich beschreiben, wie Verzerrungen umgekehrt und die Genauigkeit der Produkterkennung erhöht werden können. <br><br><img src="https://habrastorage.org/webt/hk/-j/2p/hk-j2p_wkudj1asrh2yllwxcsxc.png"><br><a name="habracut"></a><br>  Überlegen Sie zunächst, was Verzerrung ist. <br><br><img src="https://habrastorage.org/webt/uz/gv/n4/uzgvn4oircmh2r_suij8ofrlrh0.png"><br><br>  Das rechteckige Etikett hat beim Aufkleben auf den Zylinder die charakteristische Form eines Zylinders (b in der obigen Abbildung).  Die ABC-Kurve ist in diesem Fall in ziemlich guter Näherung eine Ellipse, weil  Wir sehen einen Kreis (Zylinderabschnitt) in einem Winkel.  Die vielen horizontalen Linien des Etiketts verwandeln sich ebenfalls in viele Ellipsen auf dem Foto. <br><br>  Das Interessanteste ist, dass Sie zum Erweitern des Etiketts nur 6 Marker (ABCDEF) angeben: <br><br><img src="https://habrastorage.org/webt/t2/la/hy/t2lahys1qkcr3-la-6ox-bc0cte.jpeg"><br><br>  Erstellen Sie mit ihnen ein vollständiges Oberflächengitter: <br><br><img src="https://habrastorage.org/webt/b_/om/cc/b_omcchhgmjdtfrxahvm9po67wq.jpeg"><br><br>  Mit einem Oberflächengitter können wir jede Kachel separat erweitern und die ursprüngliche Oberfläche erhalten: <br><br><img src="https://habrastorage.org/webt/up/j8/th/upj8thigpw-fwm_i1a8xmfxx2hg.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Bibliothekscode ist auf dem Github verfügbar</a> .  Der Vorteil dieser Methode besteht darin, dass die Eingabeparameter für die inverse Transformation visuell definierte Merkmale des Etiketts sind (Winkel und obere, untere Punkte), wodurch Sie den Prozess vollständig automatisieren können. <br><br>  Im nächsten Teil geht es um das Definieren von Markern.  Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeitscode</a> ist in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verzweigung auf dem Github</a> nur teilweise verfügbar  Eine wirklich funktionierende Lösung wird von Hacks und Schamanismus abgedeckt, so dass das Gewissen einfach nicht zulässt, dass eine solche Dose auf einen Github hochgeladen wird. <br><br>  Stufe eins - Konvertieren Sie das Bild in Schwarzweiß. <br><br>  Dann müssen Sie die Konturen der Flasche mit dem Etikett erhalten.  Dazu verwenden wir die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sobel-Transformation</a> .  Kurz gesagt, dieser Filter verwischt zuerst das Bild und subtrahiert es dann vom Original.  Infolgedessen bleiben auch Bereiche dunkel und Kanten (Änderungen) hell. <br><br><img src="https://habrastorage.org/webt/jb/cm/rx/jbcmrxypeavsjx7e4f_hkto_c1s.jpeg"><br><br>  Als nächstes müssen Sie die beiden auffälligsten vertikalen Linien identifizieren, die, wenn Sie Glück haben, die Ränder der Flasche sind.  In diesem Fall ist dies der Fall, aber wenn Sie eine Flasche neben anderen Flaschen fotografieren, ist dies nicht mehr der Fall. <br><br>  Verwenden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Hough-Transformation,</a> um diese Linien zu bestimmen.  Das Wesentliche der Technik ist, dass wir viele Linien über den gesamten Bildschirm ziehen und den Durchschnittswert der Pixel berücksichtigen (z. B. Linien, die vom oberen Bildrand nach unten verlaufen).  Wir übertragen diese Werte auf die neue Koordinatenebene und erhalten so etwas wie eine Wärmekarte.  Auf dieser Heatmap suchen wir nach zwei Extrema - sie sind die Seitenlinien. <br><br>  Das folgende Diagramm zeigt, wie die linke Linie zu einem Punkt auf der neuen Koordinatenebene führt: <br><br><img src="https://habrastorage.org/webt/d2/1b/qz/d21bqzk-hlfbfg7n43esn0_x2ey.png"><br><br>  Mit Ellipsen ist es etwas komplizierter, aber da wir wissen, dass die Hough-Transformation auf alle mathematisch definierten Kurven angewendet werden kann, werden wir diese Methode erneut verwenden, aber dieses Mal werden wir nach vielen elliptischen Kurven suchen. <br><br>  Aber zuerst müssen Sie das Problem in eine zweidimensionale Form bringen.  Da wir wissen, dass die Flasche zentral symmetrisch ist, nehmen wir die Mittelachse für die Y-Koordinate und eine Seite für X. Für die Werte auf der neuen Koordinatenebene nehmen wir viele Ellipsen, die zwischen der Mittelachse und der Seite aufgebaut sind.  Dies ist möglich, weil ein beliebiger Punkt auf der Seite und der Mittelachse nur eine Verbindungsmethode hat.  Vielleicht ist dies auf den ersten Blick nicht sehr offensichtlich, aber es ist viel einfacher zu verstehen, wenn wir uns der Parameterformel der Ellipse zuwenden: <br><br>  x = a * cos (t) <br>  y = b * sin (t) <br><br><img src="https://habrastorage.org/webt/kk/st/pk/kkstpkiy3-opp98_zabantk4lmc.jpeg"><br><br>  Genauso finden wir die beiden gesuchten Extreme, die zwei Markierungsellipsen definieren (Kurven AB, FE).  Nachdem wir alle erforderlichen Beschriftungsparameter (Seitenkurven sowie obere und untere Ellipsen) haben, können wir den Algorithmus aus dem ersten Teil des Artikels anwenden und die inverse Transformation durchführen. <br><br>  Was kann verbessert werden.  Erstens berücksichtigt der Algorithmus nicht die Verzerrung der Perspektive der Ellipse selbst, so dass die Seitenfragmente des Etiketts etwas stärker gedehnt werden, als sie sollten.  Um eine Korrektur vorzunehmen, müssen Sie den tatsächlichen Betrachtungswinkel der Kamera kennen oder zumindest den für das Telefon typischen verwenden (Sie können empirisch auswählen). <br><br>  Zweitens arbeitet die Hough-Transformation unter schwierigen Bedingungen ziemlich instabil - beispielsweise wenn benachbarte Flaschen in den Rahmen fallen und die Ränder der interessierenden Flasche möglicherweise nicht richtig erkannt werden. <br><br>  Drittens, wenn die Beschriftung keine rechteckige Form hat (z. B. elliptisch), werden die Markierungen falsch erkannt und die Transformation verzerrt das Bild nur stärker. <br><br>  In der Praxis ist es viel interessanter, ein neuronales Netzwerk zur Identifizierung von Markern zu verwenden, weil  Es kann anhand komplexer Beispiele trainiert werden, so dass der Algorithmus zumindest keine Transformation durchführt, wenn Marker nicht bestimmt werden können.  Aber bis jetzt habe ich nicht versucht, Neuron für diese Aufgabe zu verwenden, also wird dies vielleicht das Thema eines separaten Artikels sein :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424151/">https://habr.com/ru/post/de424151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424139/index.html">Die häufigsten Fehler und Missverständnisse bei der Konfiguration von DFSR</a></li>
<li><a href="../de424141/index.html">Spieldesign zum Leben erwecken. Die Wirtschaftlichkeit des Spiels (Teil I)</a></li>
<li><a href="../de424143/index.html">Die Zusammenfassung interessanter Materialien für den mobilen Entwickler # 271 (vom 17. bis 23. September)</a></li>
<li><a href="../de424147/index.html">Verräterisch ist alles. Schade</a></li>
<li><a href="../de424149/index.html">96 fps Aquarellfrequenz: Revolution oder Formataufruhr in der Kinematographie</a></li>
<li><a href="../de424153/index.html">(Nicht) nach Moldawien ziehen</a></li>
<li><a href="../de424155/index.html">Die Serie "First": Die dunkle Seite der Kosmonautik</a></li>
<li><a href="../de424157/index.html">SDKMAN - Tot, es lebe SDKMAN</a></li>
<li><a href="../de424159/index.html">Hayabusa 2 Missionsabstiegsstationen landeten erfolgreich auf der Oberfläche des Asteroiden 1999 JU3</a></li>
<li><a href="../de424161/index.html">Forensischer Widerstand 1 oder Last-ikActivityView. Benutzeraktivitätsdaten in Windows 10 und deren Löschung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>