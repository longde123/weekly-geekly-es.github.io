<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏿 💭 👩‍👦 Direitos do Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask) 👨‍👨‍👦 🙎🏻 🙅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá pessoal. Esta é uma tradução de um artigo do RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 e EX300. 

 Por mim mesmo: espero que o artigo se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Direitos do Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/">  Olá pessoal.  Esta é uma tradução de um artigo do RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 e EX300. <br><br>  <b>Por mim mesmo:</b> espero que o artigo seja útil não apenas para iniciantes, mas também ajude administradores mais experientes a organizar seus conhecimentos. <br><br>  Então vamos lá. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="imagem"><br><a name="habracut"></a><br>  Para acessar arquivos no Linux, são usadas permissões.  Essas permissões são atribuídas a três objetos: um arquivo, um grupo e outro objeto (ou seja, todos os outros).  Neste artigo, você aprenderá como aplicar permissões. <br><br>  O artigo começa com uma revisão dos conceitos básicos, após o qual são discutidas permissões especiais e listas de controle de acesso (ACLs).  No final deste artigo, você aprenderá como configurar permissões padrão por meio do umask, além de gerenciar atributos avançados do usuário. <br><br><h2>  Gerenciamento de propriedade de arquivos </h2><br>  Antes de discutir as permissões, você deve estar ciente da função do proprietário do arquivo e diretório.  Possuir arquivos e diretórios é vital para trabalhar com permissões.  Nesta seção, você aprenderá primeiro como pode ver o proprietário.  Você aprenderá como alterar o proprietário e o usuário do grupo por arquivos e diretórios. <br><br><h3>  Exibir proprietário de um arquivo ou diretório </h3><br>  No Linux, cada arquivo e cada diretório tem dois proprietários: um usuário e um grupo. <br><br>  Esses proprietários são definidos quando o arquivo ou diretório é criado.  O usuário que cria o arquivo se torna o proprietário desse arquivo e o grupo principal, que inclui o mesmo usuário, também se torna o proprietário desse arquivo.  Para determinar se você, como usuário, possui direitos de acesso a um arquivo ou diretório, o shell verifica sua propriedade. <br><br>  <b>Isso acontece na seguinte ordem:</b> <br><br><ol><li>  O shell verifica se você possui o arquivo que deseja acessar.  Se você é esse proprietário, obtém permissões e o shell para de verificar. </li><li>  Se você não possui o arquivo, o shell verificará se você é membro de um grupo que possui permissões nesse arquivo.  Se você é membro deste grupo, obtém acesso ao arquivo com as permissões definidas para o grupo, e o shell para de verificar. </li><li>  Se você não é o usuário nem o proprietário do grupo, obtém os direitos de outros usuários (Outros). </li></ol><br>  Para ver as atribuições do proprietário atual, você pode usar o <b>comando ls -l</b> .  Este comando mostra o grupo de usuários e proprietários.  Abaixo, você pode ver as configurações do proprietário dos diretórios no diretório / home. <br><br><pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"><span class="hljs-comment"># ls -l total 8 drwx------. 3 bob bob 74 Feb 6 10:13 bob drwx------. 3 caroline caroline 74 Feb 6 10:13 caroline drwx------. 3 fozia fozia 74 Feb 6 10:13 fozia drwx------. 3 lara lara 74 Feb 6 10:13 lara drwx------. 5 lisa lisa 4096 Feb 6 10:12 lisa drwx------. 14 user user 4096 Feb 5 10:35 user</span></span></code> </pre> <br>  Usando o <b>comando ls,</b> você pode exibir o proprietário dos arquivos neste diretório.  Às vezes, pode ser útil obter uma lista de todos os arquivos no sistema em que o usuário ou grupo é especificado como proprietário.  Você pode usar o <b>find para isso</b> .  O <b>argumento find -user</b> pode ser usado para essa finalidade.  Por exemplo, o comando a seguir mostra todos os arquivos que possuem o usuário linda especificado como proprietário: <br><br><pre> <code class="bash hljs">find / -user linda</code> </pre> <br>  Você também pode usar o <b>find</b> para procurar arquivos nos quais um grupo específico os possui. <br><br>  Por exemplo, o comando a seguir pesquisa todos os arquivos pertencentes ao grupo de <i>usuários</i> : <br><br><pre> <code class="bash hljs">find / -group users</code> </pre> <br><h3>  Mudança de propriedade </h3><br>  Para aplicar permissões, a primeira coisa a considerar é a propriedade.  Existe um <b>comando chown</b> para isso.  A sintaxe deste comando é fácil de entender: <br><br><pre> <code class="bash hljs">chown  </code> </pre> <br>  Por exemplo, o comando a seguir altera o proprietário do diretório / home / account para o usuário linda: <br><br><pre> <code class="bash hljs">chown linda /home/account</code> </pre> <br>  O <b>comando chown</b> possui várias opções, uma das quais é especialmente útil: <b>-R</b> .  Você pode adivinhar o que faz, porque esta opção também está disponível para muitas outras equipes.  Isso permite que você defina recursivamente o proprietário, o que permite definir o proprietário do diretório atual e tudo mais abaixo.  O comando a seguir altera o proprietário do diretório / home e tudo abaixo dele para lisa: <br><br>  Agora os proprietários ficam assim: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 account account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br>  Execute: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># chown -R lisa /home/account [root@localhost ~]#</span></span></code> </pre><br>  Agora lisa tornou-se o proprietário do diretório da conta: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 lisa account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br><h3>  Alteração de proprietário do grupo </h3><br>  Existem duas maneiras de alterar a propriedade do grupo.  Você pode fazer isso usando <b>chown</b> , mas existe um comando especial chamado <b>chgrp</b> que faz o trabalho.  Se você deseja usar o <b>comando chown</b> , use <b>.</b>  ou <b>:</b> antes do nome do grupo. <br><br>  O comando a seguir altera qualquer proprietário do grupo / home / account para o grupo de contas: <br><br><pre> <code class="bash hljs">chown .account /home/account</code> </pre><br>  Você pode usar <b>chown</b> para alterar o proprietário de um usuário e / ou grupo de várias maneiras.  Aqui estão alguns exemplos: <br><br><ul><li>  <b>chown lisa myfile1</b> define lisa como proprietária de myfile1. </li><li>  <b>chown lisa.sales myfile</b> define o usuário lisa como o proprietário do arquivo myfile e também define o grupo de vendas como o proprietário do mesmo arquivo. </li><li>  <b>chown lisa: myfile de vendas é</b> igual ao comando anterior. </li><li>  <b>chown .sales myfile</b> define o grupo de vendas como o proprietário do arquivo myfile sem alterar o proprietário do usuário. </li><li>  <b>chown: myfile de vendas é</b> igual ao comando anterior. </li></ul><br>  Você pode usar o comando <b>chgrp</b> para alterar o proprietário do grupo.  Considere o exemplo a seguir, onde você pode usar o <b>chgrp para</b> definir o grupo de vendas como o proprietário do diretório da conta: <br><br><pre> <code class="bash hljs">chgrp .sales /home/account</code> </pre> <br>  Como no <b>chown</b> , você pode usar a opção <b>-R</b> no <b>chgrp</b> e também alterar o proprietário do grupo recursivamente. <br><br><h3>  Entendendo o proprietário padrão </h3><br>  Você pode perceber que, quando o usuário cria o arquivo, a propriedade padrão é aplicada. <br>  O usuário que cria o arquivo se torna automaticamente o proprietário desse arquivo e o grupo principal desse usuário se torna automaticamente o proprietário desse arquivo.  Geralmente, é um grupo especificado no arquivo / etc / passwd como o grupo principal do usuário.  No entanto, se o usuário for membro de vários grupos, ele poderá alterar o grupo principal efetivo. <br><br>  Para mostrar o grupo principal efetivo atual, o usuário pode usar o comando <b>groups</b> : <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># groups lisa lisa : lisa account sales</span></span></code> </pre><br>  Se o usuário atual linda quiser alterar o grupo primário efetivo, ele usará o comando <b>newgrp</b> seguido pelo nome do grupo que deseja definir como o novo grupo primário efetivo.  Após usar o comando <b>newgrp</b> , o grupo principal permanecerá ativo até que o usuário emita o <b>comando exit</b> ou efetue logout. <br><br>  A seguir, mostramos como lisa usa esse comando para que o grupo de vendas se torne o grupo principal: <br><br><pre> <code class="bash hljs">lisa@server1 ~]$ groups lisa account sales [lisa@server1 ~]$ newgrp sales [lisa@server1 ~]$ groups sales lisa account [lisa@server1 ~]$ touch file1 [lisa@server1 ~]$ ls -l total 0 -rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1</code> </pre><br>  Após alterar o grupo principal atual, todos os novos arquivos criados pelo usuário receberão esse grupo como grupo de proprietários.Para retornar à configuração inicial do grupo principal, use <b>exit</b> . <br><br>  Para poder usar o comando <b>newgrp</b> , o usuário deve ser um membro do grupo que ele deseja usar como primário.  Além disso, a senha do grupo pode ser usada para o grupo usando o comando <b>gpasswd</b> .  Se o usuário usar o comando <b>newgrp,</b> mas não for membro do grupo de destino, o shell solicitará a senha do grupo.  Depois de inserir a senha correta do grupo, um novo grupo principal efetivo será definido. <br><br><h2>  Gerenciamento de direitos fundamentais </h2><br>  O sistema de permissão do Linux foi inventado na década de 1970.  Como as necessidades de computação eram limitadas naqueles anos, o sistema básico de permissões era bastante limitado.  Este sistema de permissão usa três permissões que podem ser aplicadas a arquivos e diretórios.  Nesta seção, você aprenderá como usar e alterar essas permissões. <br><br><h3>  Noções básicas sobre direitos de leitura, gravação e execução </h3><br>  Três permissões básicas permitem ler, gravar e executar arquivos.  O efeito dessas permissões difere quando aplicado a arquivos ou diretórios.  Para um arquivo, a permissão de leitura lhe dá o direito de abrir o arquivo para leitura.  Portanto, você pode ler seu conteúdo, mas isso significa que seu computador pode abrir o arquivo para fazer algo com ele. <br><br>  Um arquivo de programa que precise acessar uma biblioteca deve, por exemplo, ter acesso de leitura a essa biblioteca.  Daqui resulta que a permissão de leitura é a permissão mais básica necessária para trabalhar com arquivos. <br><br>  Para um diretório, a leitura permite exibir o conteúdo desse diretório.  Você deve saber que esta permissão não permite ler arquivos em um diretório.  As permissões do Linux não conhecem herança, e a única maneira de ler um arquivo é usar permissões de leitura para esse arquivo. <br><br>  Como você provavelmente pode adivinhar, a permissão de gravação, se aplicada ao arquivo, permite gravar no arquivo.  Em outras palavras, permite modificar o conteúdo dos arquivos existentes.  No entanto, ele não permite criar ou excluir novos arquivos ou alterar suas permissões.  Para fazer isso, você precisa conceder permissão de gravação ao diretório em que deseja criar o arquivo.  Nos diretórios, essa permissão também permite criar e excluir novos subdiretórios. <br><br>  Permissão de execução é o que você precisa para executar o arquivo.  Ele nunca será instalado por padrão, o que torna o Linux quase completamente imune a vírus.  Somente alguém com permissões de gravação no diretório pode aplicar permissão para executar. <br><br>  <b>A seguir, resume o uso de permissões básicas:</b> <br><br><img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br><br><h2>  Usando chmod </h2><br>  Para gerenciar direitos, use o <b>comando chmod</b> .  Ao usar o <b>chmod,</b> você pode definir permissões para o usuário (usuário), grupo (grupo) e outros (outros).  Você pode usar este comando em dois modos: modo relativo e modo absoluto.  No modo absoluto, três dígitos são usados ​​para definir as permissões básicas. <br><br><img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br><br>  Ao definir permissões, calcule o valor necessário.  Se você deseja definir leitura, gravação e execução para o usuário, leitura e execução para o grupo e leitura e execução para outras pessoas no / somefile, use o seguinte <b>comando chmod</b> : <br><br><pre> <code class="bash hljs">chmod 755 /somefile</code> </pre> <br>  Quando você usa o <b>chmod</b> dessa maneira, todas as permissões atuais são substituídas pelas permissões definidas. <br><br>  Se você deseja alterar as permissões relativas às atuais, você pode usar o <b>chmod</b> no modo relativo.  Ao usar o <b>chmod</b> no modo relativo, você está trabalhando com três indicadores para indicar o que deseja fazer: <br><br><ol><li>  Primeiro, você indica para quem deseja alterar as permissões.  Para fazer isso, você pode escolher entre usuário ( <b>u</b> ), grupo ( <b>g</b> ) e outros ( <b>o</b> ). </li><li>  Em seguida, você usa o operador para adicionar ou remover permissões do modo atual ou defini-las completamente. </li><li>  No final, você usa <b>r</b> , <b>we</b> <b>ex</b> para indicar quais permissões você deseja definir. </li></ol><br>  Ao alterar as permissões no modo relativo, você pode pular a parte "para" para adicionar ou remover a permissão para todos os objetos.  Por exemplo, este comando adiciona permissão de execução para todos os usuários: <br><br><pre> <code class="bash hljs">chmod +x somefile</code> </pre> <br>  Ao trabalhar no modo relativo, você também pode usar comandos mais complexos.  Por exemplo, este comando adiciona permissão de gravação a um grupo e remove leituras para outras pessoas: <br><br><pre> <code class="bash hljs">chmod g+w,or somefile</code> </pre> <br>  Ao usar <b>chmod -R o + rx / data,</b> você define a permissão de execução para todos os diretórios, bem como para os arquivos no diretório / data.  Para definir permissão para executar apenas em diretórios, não em arquivos, use <b>chmod -R o + rX / data</b> . <br><br>  X maiúsculo garante que os arquivos não tenham permissão para executar se o arquivo ainda não tiver definido a permissão de execução para alguns objetos.  Isso torna o X uma maneira mais inteligente de trabalhar com permissões de execução;  isso evitará a instalação dessa permissão em arquivos onde não é necessária. <br><br><h2>  Direitos estendidos </h2><br>  Além das permissões básicas sobre as quais você acabou de ler, o Linux também possui um conjunto de permissões avançadas.  Essas não são as permissões padrão definidas por você, mas às vezes fornecem uma adição útil.  Nesta seção, você aprenderá o que são e como configurá-los. <br><br><h3>  Noções básicas sobre permissões estendidas de SUID, GUID e bits persistentes </h3><br>  Existem três permissões avançadas.  A primeira delas é a permissão para definir um identificador de usuário (SUID).  Em alguns casos especiais, você pode aplicar essa permissão aos arquivos executáveis.  Por padrão, o usuário executando o executável executa o arquivo com suas próprias permissões. <br><br>  Para usuários comuns, isso geralmente significa que o uso do programa é limitado.  No entanto, em alguns casos, o usuário requer permissões especiais apenas para executar uma tarefa específica. <br><br>  Considere, por exemplo, uma situação em que o usuário precise alterar a senha.  Para fazer isso, o usuário deve escrever sua nova senha no arquivo / etc / shadow.  No entanto, este arquivo não pode ser gravado por usuários não raiz: <br><br><pre> <code class="bash hljs">root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /etc/shadow ----------. 1 root root 1184 Apr 30 16:54 /etc/shadow</span></span></code> </pre><br>  A resolução SUID oferece uma solução para esse problema.  No utilitário / usr / bin / passwd, essa permissão é usada por padrão.  Isso significa que, quando a senha é alterada, o usuário obtém temporariamente privilégios de root, o que lhe permite gravar no arquivo / etc / shadow.  Você pode ver a resolução SUID com <b>ls -l</b> como <b>s</b> na posição em que normalmente espera ver <b>x</b> para obter permissões de usuário: <br><br><pre> <code class="bash hljs">[root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /usr/bin/passwd -rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd</span></span></code> </pre><br>  As permissões SUID podem parecer úteis (e, em alguns casos, são), mas ao mesmo tempo são potencialmente perigosas.  Se usado incorretamente, você pode acidentalmente conceder permissões de acesso root.  Portanto, recomendo usá-lo apenas com extrema cautela. <br><br>  A maioria dos administradores nunca precisará usá-lo;  você o verá apenas em alguns arquivos nos quais o sistema operacional deve defini-lo por padrão. <br><br>  A segunda permissão especial é o identificador de grupo (SGID).  Esta resolução tem dois efeitos.  Quando aplicado a um arquivo executável, fornece ao usuário que está executando o arquivo as permissões do proprietário do grupo desse arquivo.  Assim, o SGID pode fazer mais ou menos o mesmo que o SUID.  No entanto, o SGID praticamente não é utilizado para esse fim. <br><br>  Assim como na permissão SUID, o SGID é aplicado a alguns arquivos do sistema como a configuração padrão. <br><br>  Quando aplicado a um diretório, o SGID pode ser útil porque você pode usá-lo para definir o proprietário do grupo padrão para os arquivos e subdiretórios criados neste diretório.  Por padrão, quando um usuário cria um arquivo, seu grupo principal efetivo é definido como o proprietário do grupo para esse arquivo. <br><br>  Isso nem sempre é muito útil, especialmente porque os usuários do Red Hat / CentOS têm um grupo com o mesmo nome que o usuário e do qual o usuário é o único membro.  Assim, por padrão, os arquivos que o usuário cria serão compartilhados. <br><br>  Imagine uma situação em que os usuários de linda e lori trabalhem em contabilidade e sejam membros do grupo de <i>contas</i> .  Por padrão, esses usuários são membros do grupo privado dos quais são o único membro.  No entanto, os dois usuários são membros do grupo de contas, mas também como um parâmetro do grupo secundário. <br><br>  A situação padrão é que, quando qualquer um desses usuários cria um arquivo, o grupo principal se torna o proprietário.  Portanto, por padrão, linda não pode acessar os arquivos criados por lori e vice-versa.  No entanto, se você criar o diretório compartilhado de um grupo (digamos / groups / account) e verifique se a permissão SGID é aplicada a este diretório e se a conta do grupo está definida como o proprietário do grupo, todos os arquivos criados nesse diretório e em todos os seus subdiretórios , também obtenha grupos de contas como o proprietário padrão do grupo. <br><br>  Por esse motivo, a permissão SGID é uma permissão muito útil para instalação em diretórios de grupos compartilhados. <br><br>  A permissão SGID é mostrada na saída <b>ls -ld</b> como <b>s</b> na posição em que você normalmente encontra permissão para executar o grupo: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account</span></span></code> </pre><br>  A terceira das permissões especiais é pegajosa.  Essa permissão é útil para proteger arquivos contra exclusão acidental em um ambiente em que vários usuários têm permissões de gravação no mesmo diretório.  Se um bit persistente for usado, um usuário poderá excluir um arquivo apenas se ele for o proprietário do arquivo ou diretório em que o arquivo está localizado.  Por esse motivo, é usado como a permissão padrão para o diretório / tmp e também pode ser útil para diretórios de grupos compartilhados. <br><br>  Sem bits fixos, se um usuário puder criar arquivos em um diretório, ele também poderá excluir arquivos desse diretório.  Em um ambiente de grupo público, isso pode ser irritante.  Imagine os usuários linda e lori, que têm permissões de gravação no diretório / data / account e recebem essas permissões através da associação ao grupo de contas.  Portanto, linda pode excluir arquivos criados por lori e vice-versa. <br><br>  Quando você usa bits fixos, o usuário pode excluir arquivos apenas se uma das seguintes condições for verdadeira: <br><br><ul><li>  O usuário é o proprietário do arquivo; </li><li>  O usuário é o proprietário do diretório em que o arquivo está localizado. </li></ul><br>  Ao usar <b>ls -ld</b> , você pode ver bits pegajosos como <b>t</b> na posição em que geralmente vê permissão de execução para outras pessoas: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account/ drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/</span></span></code> </pre><br><h3>  Direitos aprimorados </h3><br>  Para aplicar SUID, SGID e bit pegajoso, você também pode usar o <b>chmod</b> .  SUID tem um valor numérico de 4, SGID tem um valor numérico de 2 e bit pegajoso tem um valor numérico de 1. <br><br>  Se você deseja aplicar essas permissões, precisará adicionar um argumento de quatro dígitos ao <b>chmod</b> , cujo primeiro dígito se refere a permissões especiais.  A seguinte linha, por exemplo, adicionará permissão SGID ao diretório e configurará rwx para o usuário e rx para o grupo e outros: <br><br><pre> <code class="bash hljs">chmod 2755 /somedir</code> </pre> <br>  Isso é bastante impraticável se você precisar examinar as permissões atuais definidas antes de trabalhar com o <b>chmod</b> no modo absoluto.  (Você corre o risco de sobrescrever permissões, se não o fizer.) Portanto, recomendo trabalhar no modo relativo, se você precisar aplicar alguma das permissões especiais: <br><br><ol><li>  Para SUID, use <b>chmod u + s</b> . </li><li>  Para SGID, use <b>chmod g + s</b> . </li><li>  Para bits persistentes, use <b>chmod + te, em</b> seguida, o nome do arquivo ou diretório para o qual você deseja definir permissões. </li></ol><br>  A tabela resume tudo o que é importante saber sobre o gerenciamento de permissões especiais. <br><br><img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br><br><h3>  Exemplo de trabalho com direitos especiais </h3><br>  Neste exemplo, você usa permissões especiais para tornar mais fácil para os membros da equipe compartilhar arquivos em um diretório de grupo compartilhado.  Você atribui o ID-bit do identificador de grupo definido, bem como o sticky bit, e vê que, após a instalação, são adicionadas funções que facilitam o trabalho conjunto dos membros do grupo. <br><br><ol><li>  Abra o terminal onde você é um usuário linda.  Você pode criar um usuário usando <b>useradd linda</b> , adicione a senha <b>passwd linda</b> . </li><li>  Crie um diretório / data e um subdiretório / data / sales na raiz com o comando <b>mkdir -p / data / sales</b> .  Execute <b>cd / data / sales</b> para ir para o diretório de vendas.  Execute <b>toque linda1</b> e <b>toque linda2</b> para criar dois arquivos vazios de propriedade de linda. </li><li>  Execute <b>su - lisa</b> para alternar o usuário atual para lisa, que também é membro do grupo de vendas. </li><li>  Execute <b>cd / data / sales</b> e, nesse diretório, execute <b>ls -l</b> .  Você verá dois arquivos que foram criados por linda e pertencem ao grupo linda.  Execute <b>rm -f linda *</b> .  Isso excluirá os dois arquivos. </li><li>  Execute o <b>toque lisa1</b> e <b>toque em lisa2</b> para criar dois arquivos que pertencem ao usuário lisa. </li><li>  Execute <b>su -</b> para elevar seus privilégios ao nível raiz. </li><li>  Execute <b>chmod g + s, o + t / data / sales</b> para definir o GUID (bit de identificador de grupo) e o bit persistente no diretório do grupo compartilhado. </li><li>  Execute <b>su - linda</b> .  Em seguida, <b>toque em linda3</b> e <b>toque em linda4</b> .  Agora você deve ver que os dois arquivos criados pertencem ao grupo de vendas, que é o proprietário do grupo de diretórios / data / sales. </li><li>  Execute <b>rm -rf lisa *</b> .  O Sticky Bit impede que esses arquivos sejam excluídos em nome de linda, pois você não os possui.  Observe que se linda é o proprietário do diretório / data / sales, ele pode excluir esses arquivos de qualquer maneira! </li></ol><br><h2>  Gerenciando ACLs (setfacl, getfacl) no Linux </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesmo se os direitos estendidos discutidos acima adicionarem funcionalidade útil à maneira como o Linux trabalha com permissões, isso não permite conceder permissões a mais de um usuário ou um grupo em um único arquivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As listas de controle de acesso oferecem esse recurso. </font><font style="vertical-align: inherit;">Além disso, eles permitem que os administradores definam permissões padrão de uma maneira complexa, na qual as permissões definidas podem variar em diretórios diferentes.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Noções básicas sobre ACLs </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Embora o subsistema ACL adicione grande funcionalidade ao seu servidor, ele tem uma desvantagem: nem todos os utilitários o suportam. Portanto, você pode perder as configurações da ACL ao copiar ou mover arquivos, e o software de backup pode não fazer backup das configurações da ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O utilitário tar não suporta ACLs. Para garantir que as configurações da ACL não sejam perdidas ao fazer backup, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">star em</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vez de tar. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">star</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trabalha com os mesmos parâmetros que o tar; apenas adiciona suporte para configurações de ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você também pode fazer backup da ACL usando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que pode ser restaurado usando o comando setfacl. Para criar um backup, use</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl -R / directory&gt; file.acls</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para restaurar as configurações do arquivo de backup, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl --restore = file.acl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A falta de suporte com algumas ferramentas não deve ser um problema. </font><font style="vertical-align: inherit;">As ACLs geralmente são aplicadas aos diretórios como uma medida estrutural, e não a arquivos individuais. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, não haverá muitos, mas apenas alguns, aplicados em locais inteligentes do sistema de arquivos. </font><font style="vertical-align: inherit;">Portanto, a restauração das ACLs originais com as quais você trabalhou é relativamente fácil, mesmo que o seu software de backup não as suporte.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Preparando o sistema de arquivos para uma ACL </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de começar a trabalhar com ACLs, pode ser necessário preparar um sistema de arquivos para suportar ACLs. </font><font style="vertical-align: inherit;">Como os metadados do sistema de arquivos precisam ser expandidos, nem sempre há suporte padrão para ACLs no sistema de arquivos. </font><font style="vertical-align: inherit;">Se você receber a mensagem "operação não suportada" ao configurar ACLs para o sistema de arquivos, seu sistema de arquivos pode não ter suporte a ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para corrigir isso, você precisa adicionar a opção de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montagem acl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no arquivo / etc / fstab para que o sistema de arquivos seja montado com suporte a ACL por padrão.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Altere e visualize as configurações da ACL com setfacl e getfacl </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para definir a ACL, você precisa do comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para ver as configurações atuais da ACL, você precisa do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando ls -l</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não mostra nenhuma ACL existente; simplesmente mostra + após a lista de permissões, o que indica que as ACLs também se aplicam ao arquivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de configurar as ACLs, é sempre útil mostrar as configurações atuais da ACL usando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Abaixo, com um exemplo, você pode ver as permissões atuais, como mostrado com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -ld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , assim como com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se você olhar com bastante atenção, verá que as informações mostradas são exatamente as mesmas.</font></font><br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># ls -ld /dir drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx other::rx</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado do comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , você pode ver abaixo que as permissões são mostradas para três objetos diferentes: usuário, grupo e outros. Agora vamos adicionar uma ACL para conceder permissões de leitura e execução ao grupo de vendas. O comando para isso é </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: sales: rx / dir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nesse comando, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indica que as configurações atuais da ACL devem ser alteradas. Depois disso, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g: sales: rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diz à equipe para configurar a ACL para ler e executar ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) as vendas do </font><font style="vertical-align: inherit;">grupo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Abaixo, você pode ver a aparência do comando, bem como a saída do comando getfacl após alterar as configurações atuais da ACL.</font></font><br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># setfacl -mg:sales:rx /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx group:sales:rx mask::rx other::rx</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora que você entende como configurar uma ACL de grupo, é fácil entender a ACL para usuários e outros usuários. </font><font style="vertical-align: inherit;">Por exemplo, o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando setfacl -mu: linda: rwx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> concede permissões ao usuário linda no diretório / data, sem torná-lo o proprietário e sem alterar o destino do proprietário atual. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> possui muitos recursos e opções. </font><font style="vertical-align: inherit;">Uma opção é especialmente importante, a opção </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se usada, esta opção configura a ACL para todos os arquivos e subdiretórios existentes no diretório em que você instala a ACL. </font><font style="vertical-align: inherit;">É recomendável que você sempre use essa opção ao modificar ACLs para diretórios existentes.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Trabalhar com ACLs padrão </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um dos benefícios do uso de ACLs é que você pode conceder permissões para vários usuários ou grupos em um diretório. Outra vantagem é que você pode habilitar a herança trabalhando com a ACL padrão. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao definir a ACL padrão, você define as permissões que serão definidas para todos os novos itens criados no diretório. Lembre-se de que a ACL padrão não altera as permissões para arquivos e subdiretórios existentes. Para alterá-los, você precisa adicionar uma ACL regular! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso é importante saber.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Se você deseja usar a ACL para configurar o acesso de vários usuários ou grupos ao mesmo diretório, defina a ACL duas vezes. Primeiro, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -R -m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para alterar a ACL dos arquivos atuais. Então use</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cuidar de todos os novos elementos que também serão criados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para definir a ACL padrão, basta adicionar a opção </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> após a opção </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o pedido é importante!). Portanto, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md: g: sales: rx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se desejar que o grupo de vendas tenha acesso de leitura e execução a qualquer coisa que será criada no diretório / data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao usar ACLs padrão, também pode ser útil definir ACLs para outras pessoas. Isso geralmente não faz muito sentido, porque você também pode alterar as permissões para outras pessoas usando o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No entanto, o que você não pode fazer com o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, isso indica os direitos que devem ser concedidos a outros usuários para cada novo arquivo que será criado. </font><font style="vertical-align: inherit;">Se você quiser que outros não obtenham permissões para qualquer coisa criada em / data, por exemplo, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md: o :: - / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLs e permissões regulares nem sempre são bem integradas. </font><font style="vertical-align: inherit;">Podem ocorrer problemas se você aplicar a ACL padrão a um diretório, após o qual os itens foram adicionados a esse diretório e, em seguida, tentar alterar as permissões normais. </font><font style="vertical-align: inherit;">As alterações que se aplicam às permissões regulares não serão bem refletidas na visão geral da ACL. </font><font style="vertical-align: inherit;">Para evitar problemas, primeiro defina as permissões normais, depois defina as ACLs padrão (e tente não alterá-las novamente).</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Exemplo de gerenciamento avançado de direitos usando ACLs </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste exemplo, você continuará trabalhando com os diretórios / data / account e / data / sales que você criou anteriormente. </font><font style="vertical-align: inherit;">Nos exemplos anteriores, você garantiu que o grupo de vendas possui permissões para / data / sales e o grupo de contas possui permissões para / data / account. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, verifique se o grupo de contas obtém permissões de leitura no diretório / data / account e o grupo de vendas obtém permissões de leitura no diretório / data / account. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, defina as ACLs padrão para garantir que todos os novos arquivos tenham permissões definidas corretamente para todos os novos itens.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abra um terminal. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: account: rx / data / sales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg: sales: rx / data / account</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li>  <b>getfacl</b> ,  ,      ,   . </li><li>  <b>setfacl -md:g:account:rwx,g:sales:rx /data/sales</b> ,   ACL     sales. </li><li>  ACL     /data/account,  <b>setfacl -md:g:sales:rwx,g:account:rx /data/account</b> . </li><li> ,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    . </li></ol><br><h2>       umask </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acima, você aprendeu como trabalhar com ACLs por padrão. Se você não estiver usando uma ACL, há um parâmetro de shell que define os direitos padrão que você receberá: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (máscara reversa). Nesta seção, você aprenderá como alterar as permissões padrão usando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você provavelmente percebeu que quando você cria um novo arquivo, algumas permissões padrão são definidas. Essas permissões são determinadas pela configuração </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esta opção de shell se aplica a todos os usuários no logon. O parâmetro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa um valor numérico que é subtraído das permissões máximas que podem ser definidas automaticamente para o arquivo; a configuração máxima para arquivos é 666 e para diretórios - 777.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, algumas exceções se aplicam a esta regra. Você pode encontrar uma visão geral completa das configurações do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na tabela abaixo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dos dígitos usados ​​em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , como no caso de argumentos numéricos para o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o primeiro dígito refere-se às permissões do usuário, o segundo dígito refere-se às permissões do grupo e o último refere-se às permissões padrão definidas para outros. O valor </font><font style="vertical-align: inherit;">padrão </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">022 fornece 644 para todos os novos arquivos e 755 para todos os novos diretórios criados em seu servidor. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma visão geral completa de todos os valores numéricos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e seus resultados na tabela abaixo.</font></font><br><br><img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma maneira fácil de ver como o parâmetro umask funciona é o seguinte: comece com as permissões padrão para o arquivo definido como 666 e subtraia umask para obter permissões válidas. Faça o mesmo para o diretório e suas permissões padrão 777. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Há duas maneiras de alterar a configuração do umask: para todos os usuários e para usuários individuais. Se você deseja instalar umask para todos os usuários, certifique-se de que a opção umask seja levada em consideração ao executar arquivos de ambiente shell, conforme especificado em / etc / profile. A abordagem correta é criar um script de shell chamado umask.sh no diretório /etc/profile.d e especificar o umask que você deseja usar neste script de shell. Se umask for alterada neste arquivo, ela será aplicada a todos os usuários após o login no servidor.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma alternativa para configurar umask por meio de / etc / profile e arquivos relacionados, onde é aplicada a todos os usuários no sistema, é alterar as configurações de umask em um arquivo chamado .profile, criado no diretório inicial de cada usuário. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As configurações aplicadas neste arquivo são aplicadas apenas a um usuário individual; </font><font style="vertical-align: inherit;">portanto, esse é um bom método se você precisar de mais detalhes. </font><font style="vertical-align: inherit;">Pessoalmente, gosto desse recurso para alterar o valor padrão umask do usuário raiz para 027, enquanto usuários regulares trabalham com o padrão umask 022.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Trabalhando com Atributos Avançados do Usuário </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta é a seção final sobre direitos do Linux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao trabalhar com permissões, sempre há um relacionamento entre um objeto de usuário ou grupo e as permissões que esses objetos de usuário ou grupo têm para o arquivo ou diretório. Um método alternativo de proteger arquivos em um servidor Linux é trabalhar com atributos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os atributos fazem seu trabalho, independentemente do usuário que acessa o arquivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como nas ACLs, os atributos do arquivo podem precisar incluir a opção de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montagem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta é a opção </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_xattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se você receber uma mensagem "operação não suportada" ao trabalhar com atributos avançados do usuário, certifique-se de definir o parâmetro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mount</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no arquivo / etc / fstab.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muitos atributos estão documentados. Alguns atributos estão disponíveis, mas ainda não foram implementados. Não os use; eles não vão te trazer nada. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A seguir, estão os atributos mais úteis que você pode aplicar: </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garante que o tempo de acesso ao arquivo do arquivo não seja alterado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geralmente, sempre que um arquivo é aberto, o tempo de acesso ao arquivo deve ser gravado nos metadados do arquivo. Isso afeta negativamente o desempenho; portanto, para arquivos que são acessados ​​regularmente, o atributo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser usado para desativar esse recurso. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo permite adicionar, mas não excluir, um arquivo. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você usar um sistema de arquivos que suporte a compactação no nível do volume, esse atributo do arquivo garantirá que o arquivo será compactado na primeira vez que o mecanismo de compactação for ativado. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garante que as alterações nos arquivos sejam gravadas no disco imediatamente e não sejam armazenadas em cache em primeiro lugar. Esse é um atributo útil em arquivos importantes do banco de dados, garantindo que eles não sejam perdidos entre o cache do arquivo e o disco rígido. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garante que o arquivo não seja salvo nos backups em que o utilitário de despejo é usado. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este atributo permite a indexação para o diretório em que está incluído. Isso fornece acesso mais rápido a arquivos para sistemas de arquivos primitivos, como o Ext3, que não usam o banco de dados B-tree para acesso rápido a arquivos. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo torna o arquivo inalterado. Portanto, você não pode fazer alterações no arquivo, o que é útil para arquivos que precisam de proteção adicional. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Este atributo garante que, no sistema de arquivos ext3, o arquivo seja gravado primeiro no log e depois nos blocos de dados no disco rígido. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Substitua os blocos nos quais o arquivo foi salvo por 0 s após a exclusão do arquivo. Isso garante que a recuperação do arquivo não seja possível após a exclusão. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este atributo armazena informações de exclusão. </font><font style="vertical-align: inherit;">Isso permite que você desenvolva um utilitário que funciona com essas informações para salvar arquivos excluídos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você deseja aplicar atributos, pode usar o comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por exemplo, use o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo de chattr + s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para aplicar atributos a algum arquivo. </font><font style="vertical-align: inherit;">Precisa remover um atributo? </font><font style="vertical-align: inherit;">Em seguida, use </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chattr -s somefile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e ele será excluído. </font><font style="vertical-align: inherit;">Para obter uma visão geral de todos os atributos usados ​​atualmente, use o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando lsattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sumário </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste artigo, você aprendeu como trabalhar com permissões. Você lê sobre três permissões básicas, permissões avançadas e como aplicar ACLs ao sistema de arquivos. Você também aprendeu como usar o parâmetro umask para aplicar permissões padrão. No final deste artigo, você aprendeu como usar atributos avançados do usuário para aplicar uma camada adicional de segurança do sistema de arquivos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você gostou desta tradução, por favor escreva sobre ela nos comentários. Haverá mais motivação para fazer traduções úteis.</font></font><br><br><blockquote>        .          . <br><br>  « -          .»   « -          .»,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">berez</a> . <br></blockquote><br><blockquote> : <br>      ,  ,     ,     . <br><br> : <br>      ,  ,     ,       .      ,       ,    ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">CryptoPirate</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt469667/">https://habr.com/ru/post/pt469667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt469651/index.html">WIBAttack. A nova vulnerabilidade do cartão SIM é realmente terrível?</a></li>
<li><a href="../pt469655/index.html">Por que você precisa de um serviço de suporte que não suporta?</a></li>
<li><a href="../pt469657/index.html">Análise: quais ativos de câmbio trazem o maior retorno para investidores russos</a></li>
<li><a href="../pt469659/index.html">Carros RC: Introdução</a></li>
<li><a href="../pt469663/index.html">A história do DashaMail: do lançamento de um clone de uma start-up de e-mail americana a brigas com investidores e um novo começo</a></li>
<li><a href="../pt469669/index.html">Edward Snowden fala sobre por que ele se tornou um informante</a></li>
<li><a href="../pt469671/index.html">Por que você deve usar a linguagem Ada para programar seu sistema</a></li>
<li><a href="../pt469677/index.html">Tabagismo, estilo de vida saudável, motivação e velocidade de desenvolvimento de software</a></li>
<li><a href="../pt469681/index.html">Lançada a versão final do TensorFlow 2.0</a></li>
<li><a href="../pt469683/index.html">Segurança Nuclear e Vigilância por Vídeo Industrial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>