<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèø ‚ÜîÔ∏è üö≥ Flexiant Cloud Orchestrator: ce qu'il mange avec üßúüèæ ü§ü üë®‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour fournir le service IaaS (Virtual Data Center), chez Rusonyx , nous utilisons l'orchestre commercial Flexiant Cloud Orchestrator (FCO). Cette solu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Flexiant Cloud Orchestrator: ce qu'il mange avec</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rusonyx/blog/449196/"><img src="https://habrastorage.org/webt/hp/gt/ri/hpgtridynrpdujwcmdjyhy25wbs.png"><br><br>  Pour fournir le service IaaS (Virtual Data Center), chez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rusonyx</a> , nous utilisons l'orchestre commercial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flexiant Cloud Orchestrator</a> (FCO).  Cette solution a une architecture assez unique, ce qui la distingue des plus connues du grand public Openstack et CloudStack. <a name="habracut"></a><br><br>  En tant qu'hyperviseurs de n≈ìuds de calcul, KVM, VmWare, Xen, Virtuozzo6 / 7, ainsi que des conteneurs du m√™me Virtuozzo sont pris en charge.  Des stockages pris en charge - local, NFS, Ceph et Virtuozzo Storage. <br><br>  FCO prend en charge la cr√©ation et la gestion de plusieurs clusters √† partir d'une seule interface.  Autrement dit, vous pouvez g√©rer le cluster Virtuozzo et le cluster KVM + Ceph en basculant entre eux en cliquant avec la souris. <br><br>  En substance, FCO est une solution compl√®te pour les fournisseurs de cloud, qui, en plus de l'orchestration, comprend √©galement la facturation, avec tous les param√®tres, les plug-ins de paiement, les comptes, les notifications, les revendeurs, les tarifs, etc.  Cependant, la partie facturation n'est pas en mesure de couvrir toutes les nuances russes, nous avons donc refus√© de l'utiliser en faveur d'une autre solution. <br><br>  Le syst√®me flexible de distribution des droits sur toutes les ressources cloud est tr√®s agr√©able: images, disques, produits, serveurs, pare-feu - tout cela peut √™tre "fouill√©" et octroy√© des droits entre les utilisateurs, et m√™me entre les utilisateurs de diff√©rents clients.  Chaque client peut cr√©er plusieurs centres de donn√©es ind√©pendants dans son cloud et les g√©rer √† partir d'un seul panneau de contr√¥le. <br><br><img src="https://habrastorage.org/webt/h8/yu/oy/h8yuoyokzissjdota2jxf_wm5ym.png"><br><br>  Sur le plan architectural, FCO se compose de plusieurs parties, chacune ayant son propre code ind√©pendant, et certaines ont sa propre base de donn√©es. <br><br>  <b>Skyline</b> - interface administrateur et utilisateur <br>  <b>Jade</b> - logique m√©tier, facturation, gestion des t√¢ches <br>  <b>Tigerlily</b> est un coordinateur de services qui g√®re et coordonne l'√©change d'informations entre la logique m√©tier et les clusters. <br>  <b>XVPManager</b> - gestion des √©l√©ments du cluster: n≈ìuds, stockage, r√©seau et machines virtuelles. <br>  <b>XVPAgent</b> - un agent install√© sur les n≈ìuds pour interagir avec XVPManager <br><br><img src="https://habrastorage.org/webt/tn/mn/-p/tnmn-ppufyodbq1vwyfi6bzzv78.jpeg"><br><br>  Une histoire d√©taill√©e sur l'architecture de chaque composant que nous pr√©voyons d'int√©grer dans une s√©rie d'articles, √† moins, bien s√ªr, que le sujet ne vous int√©resse. <br><br>  Le principal avantage du FCO tient √† sa ¬´bo√Æte¬ª.  Il offre simplicit√© et minimalisme.  Pour le n≈ìud de contr√¥le, une machine virtuelle sur Ubuntu est allou√©e, dans laquelle tous les packages n√©cessaires sont install√©s.  Tous les param√®tres sont transf√©r√©s dans des fichiers de configuration sous forme de valeur variable: <br><br><pre><code class="plaintext hljs"># cat /etc/extility/config/vars ‚Ä¶ export LIMIT_MAX_LIST_ADMIN_DEFAULT="30000" export LIMIT_MAX_LIST_USER_DEFAULT="200" export LOGDIR="/var/log/extility" export LOG_FILE="misc.log" export LOG_FILE_LOG4JHOSTBILLMODULE="hostbillmodule.log" export LOG_FILE_LOG4JJADE="jade.log" export LOG_FILE_LOG4JTL="tigerlily.log" export LOG_FILE_LOG4JXVP="xvpmanager.log" export LOG_FILE_VARS="misc.log" ‚Ä¶</code> </pre> <br>  La configuration enti√®re est corrig√©e initialement dans les mod√®les, puis le g√©n√©rateur d√©marre <br>  # build-config qui formera le fichier vars et demandera aux services de relire la config.  L'interface utilisateur est agr√©able et peut √™tre facilement marqu√©e. <br><br><img src="https://habrastorage.org/webt/wc/uv/sj/wcuvsjumwmzojh9fbfwxd4royvy.jpeg"><br><br>  Comme vous pouvez le constater, l'interface est constitu√©e de widgets dont la gestion est √† la disposition de l'utilisateur.  Il peut facilement ajouter / supprimer des widgets de la page, formant ainsi le tableau de bord dont il a besoin. <br><br>  Malgr√© sa proximit√©, FCO est un syst√®me hautement personnalisable.  Il dispose d'un grand nombre de param√®tres et de points d'entr√©e pour modifier le flux de travail: <br><br><ol><li>  Les plugins personnalis√©s sont pris en charge, par exemple, vous pouvez √©crire votre propre m√©thode de facturation ou votre propre ressource externe √† fournir √† l'utilisateur </li><li>  Les d√©clencheurs personnalis√©s pour certains √©v√©nements sont pris en charge, par exemple, l'ajout de la premi√®re machine virtuelle au client lors de sa cr√©ation </li><li>  Les widgets personnalis√©s sont pris en charge dans l'interface, par exemple, incorporer des vid√©os de YouTube directement dans l'interface utilisateur. </li></ol><br>  Toute personnalisation est √©crite dans le langage FDL, bas√© sur Lua.  Si vous connaissez Lua, il n'y aura aucun probl√®me avec FDL. <br><br>  Voici un exemple de l'un des d√©clencheurs les plus simples que nous utilisons.  Ce d√©clencheur ne permet pas aux utilisateurs de partager leurs propres images avec d'autres clients.  Nous le faisons afin qu'un utilisateur ne puisse pas cr√©er une image malveillante pour d'autres utilisateurs. <br><br><pre> <code class="plaintext hljs">function register() return {"pre_user_api_publish"} end function pre_user_api_publish(p) if(p==nil) then return{ ref = "cancelPublishImage", name = "Cancel publishing", description = "Cancel all user's images publishing", triggerType = "PRE_USER_API_CALL", triggerOptions = {"publishResource", "publishImage"}, api = "TRIGGER", version = 1, } end -- Turn publishing off return {exitState = "CANCEL"} end</code> </pre><br>  La fonction de registre sera appel√©e par le noyau FCO.  Il renverra le nom de la fonction √† appeler.  Le param√®tre ¬´p¬ª de cette fonction stocke le concours d'appel, et lors du premier appel il sera vide (nul).  Cela nous permettra d'enregistrer notre d√©clencheur.  Dans triggerType, nous montrons que le d√©clencheur est appel√© AVANT l'op√©ration de publication et s'applique uniquement aux utilisateurs.  Pour les administrateurs syst√®me, bien s√ªr, nous autorisons la publication de tout.  Dans triggerOptions, nous d√©taillons les op√©rations pour lesquelles le d√©clencheur se d√©clenchera. <br><br>  Et surtout, renvoyez {exitState = "CANCEL"}, c'est pourquoi le d√©clencheur a √©t√© d√©velopp√©.  Il renverra l'√©chec lorsque l'utilisateur tentera de partager son image dans le panneau de configuration. <br><br>  Dans l'architecture FCO, tout objet (disque, serveur, image, r√©seau, adaptateur r√©seau, etc.) est repr√©sent√© comme une entit√© Ressource qui a des param√®tres communs: <br><br><ul><li>  Uuid de ressource </li><li>  nom de la ressource </li><li>  type de ressource </li><li>  UUID du propri√©taire de la ressource </li><li>  √©tat des ressources (actif, inactif) </li><li>  m√©tadonn√©es de ressource </li><li>  cl√©s de ressource </li><li>  UUID du produit auquel appartient la ressource </li><li>  Ressource VDC </li></ul><br>  Ceci est tr√®s pratique lorsque vous travaillez sur l'API, lorsque le travail avec toutes les ressources est effectu√© sur le m√™me principe.  Les produits sont configur√©s par le fournisseur et le client les commande.  √âtant donn√© que notre facturation est en marge, le client peut commander n'importe quel produit du panneau librement et gratuitement.  Il sera pris en compte plus tard dans la facturation.  Le produit peut √™tre - une adresse IP par heure, un Go suppl√©mentaire de disque par heure ou simplement un serveur. <br><br>  Vous pouvez marquer certaines ressources avec des cl√©s pour changer la logique de travail avec elles.  Par exemple, nous pouvons marquer trois n≈ìuds physiques avec la cl√© Weight et marquer certains clients avec la m√™me cl√©, mettant ainsi en surbrillance ces n≈ìuds personnellement pour ces clients.  Nous utilisons un tel m√©canisme pour les clients VIP qui n'aiment pas les voisins √† c√¥t√© de leurs machines virtuelles.  La fonctionnalit√© elle-m√™me peut √™tre appliqu√©e beaucoup plus largement. <br><br>  Le mod√®le de licence implique le paiement de chaque c≈ìur d'un processeur d'un n≈ìud physique.  Le co√ªt est √©galement affect√© par le nombre de types de cluster.  Si vous pr√©voyez d'utiliser ensemble, par exemple, KVM et VMware, le co√ªt de la licence augmentera. <br><br>  FCO est un produit √† part enti√®re, sa fonctionnalit√© est tr√®s riche, nous pr√©voyons donc de pr√©parer plusieurs articles √† la fois avec une description d√©taill√©e du fonctionnement de la partie r√©seau. <br><br>  Ayant travaill√© avec cet orchestre pendant plusieurs ann√©es, nous pouvons le marquer comme tr√®s appropri√©.  H√©las, le produit n'est pas sans d√©fauts: <br><br><ul><li>  nous avons d√ª optimiser la base de donn√©es, car les requ√™tes ont commenc√© √† ralentir √† mesure que la quantit√© de donn√©es qu'elles contenaient augmentait; </li><li>  apr√®s un accident, d√ª √† un bug, le m√©canisme de r√©cup√©ration n'a pas fonctionn√©, et nous avons d√ª √©lever les machines de clients m√©contents avec notre propre jeu de scripts; </li><li>  le m√©canisme de d√©tection d'inaccessibilit√© du n≈ìud est c√¢bl√© dans le code et ne peut pas √™tre personnalis√©.  Autrement dit, nous ne pouvons pas cr√©er nos propres politiques pour d√©terminer l'inaccessibilit√© d'un n≈ìud. </li><li>  la journalisation n'est pas toujours d√©taill√©e.  Parfois, lorsque vous devez descendre √† un niveau tr√®s bas pour analyser un probl√®me sp√©cifique, le code source de certains composants n'est pas suffisant pour comprendre les raisons; </li></ul><br>  <b>TOTAL: dans l'</b> ensemble, l'exp√©rience du produit est bonne.  Nous sommes en contact permanent avec les d√©veloppeurs de l'orchestre.  Les gars sont arrang√©s pour une coop√©ration constructive. <br><br>  Malgr√© sa simplicit√©, FCO poss√®de de nombreuses fonctionnalit√©s.  Dans les prochains articles, nous pr√©voyons d'explorer les sujets suivants: <br><br><ul><li>  r√©seautage au FCO </li><li>  Live-Recovery et prise en charge du protocole FQP </li><li>  √©crire des plugins et widgets personnalis√©s </li><li>  connexion de services suppl√©mentaires tels que Load Balancer et Acronis </li><li>  sauvegarde </li><li>  m√©canisme unifi√© de configuration et de configuration des n≈ìuds </li><li>  traitement des m√©tadonn√©es de la machine virtuelle </li></ul><br>  <b>PS</b> √âcrivez dans les commentaires si d'autres aspects sont int√©ressants.  Restez √† l'√©coute! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr449196/">https://habr.com/ru/post/fr449196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr449184/index.html">Reconna√Ætre les dates √©crites en langage naturel √† l'aide de Python3</a></li>
<li><a href="../fr449186/index.html">Botnets en 2019: dangers et pr√©judices actuels pour les petites et moyennes entreprises</a></li>
<li><a href="../fr449188/index.html">Tesla Autonomy Investor Day: nouveau Tesla FSDC (Full Self-Driving Computer), pilote automatique complet, robot</a></li>
<li><a href="../fr449192/index.html">5 √† 7 et un seau de caf√©</a></li>
<li><a href="../fr449194/index.html">Pourquoi vous ne pouvez pas marcher sur l'aile au bord et √† l'angle d'attaque</a></li>
<li><a href="../fr449198/index.html">FFmpeg pour d√©marrer avec Visual Studio</a></li>
<li><a href="../fr449200/index.html">Faits saillants du pass√© Moscou Python Conf ++ 2019: transformation en une plate-forme de communication</a></li>
<li><a href="../fr449204/index.html">Comme nous consid√©rons les m√©triques pour le d√©veloppement et le support de la documentation. Rapport Yandex</a></li>
<li><a href="../fr449208/index.html">Comment cr√©er et g√©rer des √©quipes performantes</a></li>
<li><a href="../fr449210/index.html">Fonctionnement de HPE SimpliVity 380 pour VDI: tests de charge difficile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>