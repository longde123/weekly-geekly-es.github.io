<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ด๐ป ๐๐พ ูู ูุง ุชุฑูุฏ ูุนุฑูุชู ุชูุฑูุจูุง ุนู ุงูููุทุฉ ุงูุนุงุฆูุฉ ูู ARM ุ ูููู ุชุฎุดู ุฃู ุชุณุฃู ๐ง๐ฟ ๐๐ป ๐ต๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ูู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุนูู ุงูููุทุฉ ุงูุนุงุฆูุฉ ูููุนุงูุฌุงุช ุฐุงุช ููุฏุณุฉ ARM. ุฃุนุชูุฏ ุฃู ูุฐู ุงูููุงูุฉ ุณุชููู ูููุฏุฉ ูู ุงูููุงู ุงูุฃูู ูุฃููุฆู ุงูุฐ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูู ูุง ุชุฑูุฏ ูุนุฑูุชู ุชูุฑูุจูุง ุนู ุงูููุทุฉ ุงูุนุงุฆูุฉ ูู ARM ุ ูููู ุชุฎุดู ุฃู ุชุณุฃู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/embox/blog/418295/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/uz/l3/0w/uzl30wgy6ecwi5eg7gmrtrdbzd4.jpeg" align="right" width="320">  ูุฑุญุจุง ูุง ูุจุฑ!  ูู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุนูู ุงูููุทุฉ ุงูุนุงุฆูุฉ ูููุนุงูุฌุงุช ุฐุงุช ููุฏุณุฉ ARM.  ุฃุนุชูุฏ ุฃู ูุฐู ุงูููุงูุฉ ุณุชููู ูููุฏุฉ ูู ุงูููุงู ุงูุฃูู ูุฃููุฆู ุงูุฐูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููููู</a> ูุธุงู ุงูุชุดุบูู ุงูุฎุงุต ุจูู ุฅูู ุจููุฉ ARM ููู ููุณ ุงูููุช ูุญุชุงุฌูู ุฅูู ุฏุนู ูููุทุฉ ุนุงุฆูุฉ ุงูุฃุฌูุฒุฉ (ููู ูุง ูุนููุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Embox</a> ุ ูุงูุฐู ุงุณุชุฎุฏู ุณุงุจููุง ุชูููุฐ ุจุฑูุงูุฌ ูุนูููุงุช ุงูููุทุฉ ุงูุนุงุฆูุฉ). <br><br>  ูุฐูู ุฏุนููุง ูุจุฏุฃ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุฃุนูุงู ุงููุชุฑุฌู </h2><br>  ูุฏุนู ุงูููุทุฉ ุงูุนุงุฆูุฉ ุ ูุฌุจ ุนููู ุชูุฑูุฑ ุงูุฃุนูุงู ุงูุตุญูุญุฉ ุฅูู ุงููุชุฑุฌู.  ูุคุฏู ุบูุบู ุณุฑูุน ููุง ุฅูู ููุฑุฉ ุฃู ุฎูุงุฑูู ูููุงู ุจุดูู ุฎุงุต: -mfloat-abi ู -mfpu.  ูููู ุงูุฎูุงุฑ -mfloat-abi ุจุชุนููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ABI</a> ูุนูููุงุช ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ููููู ุฃู ูุญุชูู ุนูู ุฅุญุฏู ุงูููู ุงูุซูุงุซ: "soft" ู "softfp" ู "hard".  ุฎูุงุฑ "soft" ุ ููุง ููุญู ุงูุงุณู ุ ูุฎุจุฑ ุงููุชุฑุฌู ุจุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุกุงุช ุงูุฏูุงู ุงููุถููุฉ ูุจุฑูุฌุฉ ุงูููุทุฉ ุงูุนุงุฆูุฉ (ุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฎูุงุฑ ูู ูุจู).  ุณูุชู ุงููุธุฑ ูู ุงูุงุซููู ุงููุชุจูููู ูู softfp ู "hard" ุจุนุฏ ุฐูู ุจูููู ุ ุจุนุฏ ุงููุธุฑ ูู ุฎูุงุฑ -mfpu. <br><br><h2 style=";text-align:right;direction:rtl">  -Mfpu flag ูุฅุตุฏุงุฑ VFP </h2><br>  ูุชูุญ ูู ุฎูุงุฑ -mfpu ุ ููุง ูู ููุชูุจ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุนุจุฑ ุงูุฅูุชุฑูุช</a> ุ ุชุญุฏูุฏ ููุน ุงูุฌูุงุฒ ูููููู ุงุชุฎุงุฐ ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ: <br><blockquote style=";text-align:right;direction:rtl">  "ุชููุงุฆู" ุ "vfpv2" ุ "vfpv3" ุ "vfpv3-fp16" ุ "vfpv3-d16" ุ "vfpv3-d16-fp16" ุ "vfpv3xd" ุ "vfpv3xd-fp16" ุ "neon-vfpv3" ุ "ูููู" -fp16 'ุ' vfpv4 'ุ' vfpv4-d16 'ุ' fpv4-sp-d16 'ุ' neon-vfpv4 'ุ' fpv5-d16 'ุ' fpv5-sp-d16 'ุ' fp-armv8 'ุ' neon -fp-armv8 'ู' crypto-neon-fp-armv8 '.  ู "ูููู" ูู ููุณู "neon-vfpv3" ู "vfp" ูู "vfpv2". </blockquote>  ุงููุชุฑุฌู (arm-none-eabi-gcc (15: 5.4.1 + svn241155-1) 5.4.1 20160919) ููุชุฌ ูุงุฆูุฉ ูุฎุชููุฉ ููููุงู ุ ููู ูุฐุง ูุง ูุบูุฑ ุงูุฌููุฑ.  ุนูู ุฃู ุญุงู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ููู ููููุฉ ุชุฃุซูุฑ ูุฐู ุงูุนูุงูุฉ ุฃู ุชูู ุนูู ุงููุชุฑุฌู ุ ูุจุงูุทุจุน ุ ุฃู ุฅุดุงุฑุฉ ูุฌุจ ุงุณุชุฎุฏุงููุง ูุชู. <br><br>  ููุฏ ุจุฏุฃุช ูู ููู ุงููุธุงู ุงูุฃุณุงุณู ุจูุงุกู ุนูู ูุนุงูุฌ imx6 ุ ููููุง ุณูุคุฌูู ููุชุฑุฉ ูุตูุฑุฉ ุ ูุธุฑูุง ูุฃู ูุนุงูุฌ ุงููููู ูุฏูู ููุฒุงุช ุณุฃูุงูุดูุง ูุงุญููุง ุ ููุจุฏุฃ ุจุญุงูุฉ ุฃุจุณุท - ูู ููุตุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูุงูู / cp</a> ุ <br>  ููุณ ูุฏู ุงูููุญุฉ ููุณูุง ุ ูุฐูู ุชู ุชุตุญูุญ ุงูุฃุฎุทุงุก ูู ูุญุงูู qemu.  ูู qemu ุ ุชุนุชูุฏ ููุตุฉ Interator / cp ุนูู ูุนุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ARM926EJ-S</a> ุ ูุงูุฐู ุจุฏูุฑู ูุฏุนู ุงููุนุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">VFP9-S</a> .  ูุชูุงูู ูุฐุง ุงููุนุงูุฌ ุงููุดุชุฑู ูุน ุงูุฅุตุฏุงุฑ 2 ูู ุจููุฉ ุงูููุทุฉ ุงูุนุงุฆูุฉ ุงููุชุฌูุงุช (VFPv2).  ููููุง ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุนููู -mfpu = vfpv2 ุ ููู ูุฐุง ุงูุฎูุงุฑ ูู ููู ูู ูุงุฆูุฉ ุฎูุงุฑุงุช ุงููุชุฑุฌู ุงูุฎุงุต ุจู.  ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฅูุชุฑูุช ุ</a> ูุงุจูุช ุฎูุงุฑ ุชุฌููุน ูุน ุงูุฃุนูุงู -mcpu = arm926ej-s -mfpu = vfpv3-d16 ุ ูููุช ุจุชุซุจูุชู ุ ูุชู ุชุฌููุน ูู ุดูุก ูู ุฃุฌูู.  ุนูุฏูุง ุจุฏุฃุช ุ ุชูููุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุณุชุซูุงุก ุชุนูููุงุช ุบูุฑ ูุญุฏุฏ</a> ุ ูุงูุฐู ูุงู ูุชููุนูุง ุ ูุฃูู ุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅููุงู ุชุดุบูู</a> ุงููุนุงูุฌ. <br><br>  ูุชูููู ุงููุนุงูุฌ ุงููุดุชุฑู ูู ุงูุนูู ุ ุชุญุชุงุฌ ุฅูู ุชุนููู ุจุช EN [30] ูู ุณุฌู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">FPEXC</a> .  ูุชู ุฐูู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ VMSR. <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Enable FPU extensions */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"VMSR FPEXC, %0"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"r"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &lt;&lt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">30</span></span></span></span><span class="hljs-function"><span class="hljs-params">);</span></span></span></span></code> </pre> <br>  ูู ุงููุงูุน ุ ูุชู ูุนุงูุฌุฉ ุงูุฃูุฑ VMSR ุจูุงุณุทุฉ ุงููุนุงูุฌ ููุทุฑุญ ุงุณุชุซูุงุก ุฅุฐุง ูู ูุชู ุชุดุบูู ุงููุนุงูุฌ ุ ูููู ุงููุตูู ุฅูู ูุฐุง ุงูุชุณุฌูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ูุณุจุจ ุฐูู</a> .  ุตุญูุญ ุ ุนูู ุนูุณ ุงูุขุฎุฑูู ุ ูุง ูููู ุงููุตูู ุฅูู ูุฐุง ุงูุณุฌู ุฅูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุถุน ุงููููุฒ</a> . <br><br>  ุจุนุฏ ุฃู ุณูุญ ูููุนุงูุฌ ุจุงูุนูู ุ ุจุฏุฃุช ุงุฎุชุจุงุฑุงุชูุง ูููุธุงุฆู ุงูุฑูุงุถูุฉ ุจุงููุฌุงุญ.  ูููู ุนูุฏูุง ููุช ุจุชุดุบูู ุงูุชุญุณูู (-O2) ุ ุชู ุฑูุน ุงุณุชุซูุงุก ุงูุชุนูููุงุช ุบูุฑ ุงููุญุฏุฏ ุงููุฐููุฑ ุณุงุจููุง.  ููุดุฃ ุนูู ุชุนูููุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">vmov</a> ุงูุชู ุชู ุงุณุชุฏุนุงุคูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุณุงุจููุง ุ ูููู ุชู ุชูููุฐูุง ุจูุฌุงุญ (ุจุฏูู ุงุณุชุซูุงุก).  ุฃุฎูุฑูุง ุ ูุฌุฏุช ูู ููุงูุฉ ุงูุตูุญุฉ ุนุจุงุฑุฉ "ุงูุชุนูููุงุช ุงูุชู ุชูุณุฎ ุงูุซูุงุจุช ุงูููุฑูุฉ ูุชุงุญุฉ ูู VFPv3" (ุฃู ุ ุงูุนูููุงุช ูุน ุงูุซูุงุจุช ูุฏุนููุฉ ุจุฏุกูุง ูู VFPv3).  ููุฑุฑุช ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ุงูุฐู ุชู ุฅุตุฏุงุฑู ูู ูุญุงูู ุงูุฎุงุต ุจู.  ูุชู ุชุณุฌูู ุงููุณุฎุฉ ูู ุณุฌู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">FPSID</a> .  ููุชุฑุชุจ ุนูู ุงููุซุงุฆู ุฃู ูููุฉ ุงูุชุณุฌูู ูุฌุจ ุฃู ุชููู 0x41011090.  ูุฐุง ููุงุจู 1 ูู ูุฌุงู ุงูุนูุงุฑุฉ [19..16] ุฃู VFPv2.  ูู ุงููุงูุน ุ ุจุนุฏ ุฃู ููุช ุจุนูู ูุณุฎุฉ ูุทุจูุนุฉ ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ุญุตูุช ุนูู ูุฐุง <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> unit: initializing embox.arch.arm.fpu.vfp9_s: VPF <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: Hardware FP support Implementer = <span class="hljs-number"><span class="hljs-number">0x41</span></span> (ARM) Subarch: VFPv2 Part number = <span class="hljs-number"><span class="hljs-number">0x10</span></span> Variant = <span class="hljs-number"><span class="hljs-number">0x09</span></span> Revision = <span class="hljs-number"><span class="hljs-number">0x00</span></span></code> </pre> <br>  ุจุนุฏ ุฃู ูุฑุฃุช ุจุนูุงูุฉ ุฃู "vfp" ูู ุงุณู ูุณุชุนุงุฑ "vfpv2" ุ ููุช ุจุชุนููู ุงูุนูุงูุฉ ุงูุตุญูุญุฉ ุ ููุฏ ูุฌุญุช.  ุจุงูุนูุฏุฉ ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุตูุญุฉ</a> ุญูุซ ุฑุฃูุช ูุฌููุนุฉ ุงูุฃุนูุงู -mcpu = arm926ej-s -mfpu = vfpv3-d16 ุ ุฃูุงุญุธ ุฃููู ูู ุฃูู ุญุฐุฑุงู ุจูุง ููู ุงูููุงูุฉ ุ ูุฃู -mfloat-abi = soft ูุธูุฑ ูู ูุงุฆูุฉ ุงูุฃุนูุงู.  ุฃู ุฃูู ูุง ููุฌุฏ ุฏุนู ููุฃุฌูุฒุฉ ูู ูุฐู ุงูุญุงูุฉ.  ุจุชุนุจูุฑ ุฃุฏู ุ ูุง ููู -mfpu ุฅูุง ุฅุฐุง ุชู ุชุนููู ูููุฉ ุฃุฎุฑู ุบูุฑ "soft" ุนูู -mfloat-abi. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุฌูุน </h2><br>  ุญุงู ุงูููุช ููุญุฏูุซ ุนู ุงููุฌูุน.  ุจุนุฏ ูู ุดูุก ุ ููุช ุจุญุงุฌุฉ ุฅูู ุชูุฏูู ุฏุนู ููุช ุงูุชุดุบูู ุ ูุนูู ุณุจูู ุงููุซุงู ุ ุงููุชุฑุฌู ุจุงูุทุจุน ูุง ูุนุฑู ุนู ุชุจุฏูู ุงูุณูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุณุฌู </h3><br>  ููุจุฏุฃ ุจูุตู ุงูุณุฌูุงุช.  ูุณูุญ ูู VFP ุจุฅุฌุฑุงุก ุงูุนูููุงุช ุจุงุณุชุฎุฏุงู ุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ 32 ุจุช (s0..s31) ู 64 ุจุช (d0..d15). ุชุธูุฑ ุงููุฑุงุณูุงุช ุจูู ูุฐู ุงูุณุฌูุงุช ูู ุงูุตูุฑุฉ ุฃุฏูุงู. <br><br><img src="https://habrastorage.org/webt/jr/lo/w0/jrlow0oljuvwjd0y5bb-qkxlyh4.png"><br><br>  Q0-Q15 ุนุจุงุฑุฉ ุนู ุชุณุฌููุงุช 128 ุจุช ูู ุงูุฅุตุฏุงุฑุงุช ุงููุฏููุฉ ููุนูู ูุน SIMD ุ ูุงููุฒูุฏ ุนููุง ูุงุญููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุธุงู ุงูููุงุฏุฉ </h3><br>  ุจุงูุทุจุน ุ ูู ูุนุธู ุงูุฃุญูุงู ูุฌุจ ุฅุนุทุงุก ุงูุนูู ูุน ุณุฌูุงุช VFP ูููุชุฑุฌู ุ ูููู ุนูู ุงูุฃูู ูุฌุจ ุนููู ูุชุงุจุฉ ุชุจุฏูู ุงูุณูุงู ูุฏูููุง.  ุฅุฐุง ูุงู ูุฏูู ุจุงููุนู ููู ุชูุฑูุจู ูุตูุบุฉ ุชุนูููุงุช ุงููุฌููุน ููุนูู ูุน ุณุฌูุงุช ุงูุฃุบุฑุงุถ ุงูุนุงูุฉ ุ ููุง ูุฌุจ ุฃู ูููู ุงูุชุนุงูู ูุน ุงูุชุนูููุงุช ุงูุฌุฏูุฏุฉ ุตุนุจูุง.  ูู ุฃุบูุจ ุงูุฃุญูุงู ุ ุชูุถุงู ุงูุจุงุฏุฆุฉ "v". <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">vmov d0, r0, r1 /*  r0  r1, ..  d0 <span class="hljs-number"><span class="hljs-number">64</span></span> ,   r0<span class="hljs-literal"><span class="hljs-literal">-1</span></span>  <span class="hljs-number"><span class="hljs-number">32</span></span> */ vmov r0, r1, d0 vadd d0, d1, d2 vldr d0, r0 vstm r0!, {d0<span class="hljs-literal"><span class="hljs-literal">-d15</span></span>} vldm r0!, {d0<span class="hljs-literal"><span class="hljs-literal">-d15</span></span>}</code> </pre> <br>  ูููุฐุง ุฏูุงููู.  ูููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ูุงููุฉ ุจุงูุฃูุงูุฑ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุน ARM</a> . <br><br>  ูุจุงูุทุจุน ุ ูุง ุชูุณู ุฅุตุฏุงุฑ VFP ุจุญูุซ ูุง ุชูุฌุฏ ุญุงูุงุช ูุซู ุชูู ุงูููุถุญุฉ ุฃุนูุงู. <br><br><h2 style=";text-align:right;direction:rtl">  Flag -mfloat-abi 'softfp' ู 'hard' </h2><br>  ุนูุฏุฉ ุฅูู -mfloat-abi.  ุฅุฐุง ูุฑุฃุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> ุ ูุณูู ูุฑู: <br><blockquote style=";text-align:right;direction:rtl">  ูุณูุญ "softfp" ุจุฅูุดุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ุชุนูููุงุช ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ููุฃุฌูุฒุฉ ุ ููููู ูุง ูุฒุงู ูุณุชุฎุฏู ุงุตุทูุงุญุงุช ุงูุงุชุตุงู ุงูุนุงุฆูุฉ.  "ุตุนุจ" ูุณูุญ ุจุฅูุดุงุก ุชุนูููุงุช ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ููุณุชุฎุฏู ุงุตุทูุงุญุงุช ุงูุงุชุตุงู ุงูุฎุงุตุฉ ุจู FPU. </blockquote>  ุฃู ุฃููุง ูุชุญุฏุซ ุนู ุชูุฑูุฑ ุงูุญุฌุฌ ุฅูู ุฏุงูุฉ.  ูููู ุนูู ุงูุฃูู ูู ููู ูุงุถุญูุง ุจุงููุณุจุฉ ูู ูุง ูู ุงููุฑู ุจูู ุงุตุทูุงุญุงุช ุงูุงุชุตุงู "ุงููุงุนูุฉ - ุงูุนุงุฆูุฉ" ู "ุงูุฎุงุตุฉ ุจู FPU".  ุจุงูุชุฑุงุถ ุฃู ุงูุญุงูุฉ ุงูุตูุจุฉ ุชุณุชุฎุฏู ุชุณุฌููุงุช ุงูููุทุฉ ุงูุนุงุฆูุฉ ุ ูุฃู ุงูุญุงูุฉ softfp ุชุณุชุฎุฏู ุงูุชุณุฌููุงุช ุงูุตุญูุญุฉ ุ ููุฏ ูุฌุฏุช ุชุฃููุฏูุง ุนูู ูููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">debian wiki</a> .  ูุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูู ููุนุงูุฌุงุช NEON ุ ูููู ูุง ููู.  ููุทุฉ ุฃุฎุฑู ูุซูุฑุฉ ููุงูุชูุงู ูู ุฃูู ูุน ุฎูุงุฑ softfp ุ ูููู ูููุชุฑุฌู ุ ูููู ููุณ ูุทููุจูุง ูุงุณุชุฎุฏุงู ุฏุนู ุงูุฃุฌูุฒุฉ: <br><blockquote style=";text-align:right;direction:rtl">  "ูููู ูููุชุฑุฌู ุงุชุฎุงุฐ ุฎูุงุฑุงุช ุฐููุฉ ุญูู ูุชู ููุง ุฅุฐุง ูุงู ูููุฏ ุชุนูููุงุช FPU ูุญุงูุงุฉ ุฃู ุญููููุฉ ุจูุงุกู ุนูู ููุน FPU ุงููุฎุชุงุฑ (-mfpu =)" </blockquote>  ููุญุตูู ุนูู ูุถูุญ ุฃูุถู ุ ูุฑุฑุช ุฃู ุฃุฌุฑุจ ุ ูููุฌุฆุช ููุบุงูุฉ ุ ูุฃูู ูุน ุฅููุงู ุชุดุบูู ุชุญุณูู O0 ุ ูุงู ุงููุฑู ุทููููุง ุฌุฏูุง ููู ููุทุจู ุนูู ุงูุฃูุงูู ุงูุชู ุชู ูููุง ุงุณุชุฎุฏุงู ุงูููุทุฉ ุงูุนุงุฆูุฉ ุจุงููุนู.  ุชุฎููู ุฃู ุงููุชุฑุฌู ูุฏูุน ููุท ูู ุดูุก ุนูู ุงูููุฏุณ ุ ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุงูุชุณุฌููุงุช ุ ููุช ุจุชุดุบูู ุงูุชุญุณูู -O2 ูููุฌุฆุช ูุฑุฉ ุฃุฎุฑู ุ ูุฃูู ูุน ุงูุชุญุณูู ุจุฏุฃ ุงููุชุฑุฌู ุจุงุณุชุฎุฏุงู ุชุณุฌููุงุช ุงูููุทุฉ ุงูุนุงุฆูุฉ ููุฃุฌูุฒุฉ ููู ูู ุงูุฎูุงุฑุงุช ุงูุซุงุจุชุฉ ูุฎูุงุฑุงุช sotffp ุ ูุงููุฑู ูู ููู ููู ุญุงูุฉ -O0 ูุงู ุฐูู ุถุฆููุงู ููุบุงูุฉ.  ููุชูุฌุฉ ูุฐูู ุ ุจุงููุณุจุฉ ูู ุ ุดุฑุญุช ุฐูู ุจุญูููุฉ ุฃู ุงููุชุฑุฌู ูุญู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุดููุฉ</a> ุงููุฑุชุจุทุฉ ุจุญูููุฉ ุฃูู ุฅุฐุง ููุช ุจูุณุฎ ุงูุจูุงูุงุช ุจูู ุชุณุฌููุงุช ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ูุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ุ ูุณูู ููุฎูุถ โโุงูุฃุฏุงุก ุจุดูู ูุจูุฑ.  ููุจุฏุฃ ุงููุชุฑุฌู ุ ุนูุฏ ุงูุชุญุณูู ุ ูู ุงุณุชุฎุฏุงู ุฌููุน ุงูููุงุฑุฏ ุงููุชุงุญุฉ ูู. <br><br>  ุนูุฏูุง ุณูุฆูุช ุนู ุฃู ุฅุดุงุฑุฉ ูุงุณุชุฎุฏุงู "softfp" ุฃู "ุตูุจ" ุ ุฃุฌุจุช ุจููุณู ุนูู ุงููุญู ุงูุชุงูู: ุญูุซูุง ุชูุฌุฏ ุจุงููุนู ุฃุฌุฒุงุก ูุฌูุนุฉ ุจุนูุงูุฉ "softfp" ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู "ุตูุจ".  ุฅุฐุง ูุงู ููุงู ุฃู ูููุง ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู softfp. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุจุฏูู ุงูุณูุงู </h2><br>  ูุธุฑูุง ูุฃู Embox ูุฏุนู ุงูููุงู ุงููุชุนุฏุฏุฉ ุงูููุงุฆูุฉ ุ ููุนูู ุจุดูู ุตุญูุญ ูู ููุช ุงูุชุดุบูู ุ ุจุทุจูุนุฉ ุงูุญุงู ุ ูุงู ููุงู ุญุงุฌุฉ ุฅูู ุชูููุฐ ุชุจุฏูู ุงูุณูุงู.  ููุฐุง ุ ูู ุงูุถุฑูุฑู ุญูุธ ุณุฌูุงุช ุงููุนุงูุฌ ุงููุดุชุฑู.  ููุงู ุฒูุฌุงู ูู ุงููุฑูู ุงูุฏูููุฉ.  ุฃููุงู: ุงุชุถุญ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃูุงูุฑ ุนูููุฉ ุงูุชูุฏูุณ ููููุงุท ุงูุนุงุฆูุฉ (vstm / vldm) ูุง ุชุฏุนู ุฌููุน ุงูุฃูุถุงุน</a> .  ุซุงูููุง: ูุง ุชุฏุนู ูุฐู ุงูุนูููุงุช ุงูุนูู ูุน ุฃูุซุฑ ูู ุณุชุฉ ุนุดุฑ ุชุณุฌูููุง 64 ุจุช.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุญููู / ุญูุธ ุงููุฒูุฏ ูู ุงูุณุฌูุงุช ูู ููุช ูุงุญุฏ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุชุนูููุงุชูู. <br><br>  ุณุฃูุฏู ุชุญุณูู ุตุบูุฑ ุขุฎุฑ.  ูู ุงููุงูุน ุ ูุง ูุนุฏ ุญูุธ 256 ุจุงูุช ูู ุณุฌูุงุช VFP ูุงุณุชุนุงุฏุชูุง ุถุฑูุฑููุง ูู ูู ูุฑุฉ (ุชุดุบู ุณุฌูุงุช ุงูุฃุบุฑุงุถ ุงูุนุงูุฉ 64 ุจุงูุช ููุท ุ ูุฐุง ูุฅู ุงููุฑู ูุจูุฑ).  ูู ูุคุฏู ุงูุชุญุณูู ุงููุงุถุญ ุฅูู ุชูููุฐ ูุฐู ุงูุนูููุงุช ุฅูุง ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุชุณุชุฎุฏู ูุฐู ุงูุณุฌูุงุช ูู ุญูุซ ุงููุจุฏุฃ. <br><br>  ููุง ุฐูุฑุช ุจุงููุนู ุ ุนูุฏ ุฅููุงู ุชุดุบูู ูุนุงูุฌ VFP ุ ุณุชุคุฏู ูุญุงููุฉ ุชูููุฐ ุงูุชุนูููุงุช ุงูููุงุจูุฉ ุฅูู ุงุณุชุซูุงุก "ุชุนูููุงุช ุบูุฑ ูุญุฏุฏุฉ".  ูู ูุนุงูุฌ ูุฐุง ุงูุงุณุชุซูุงุก ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุณุจุจ ุงูุงุณุชุซูุงุก ุ ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุชุนูู ุจุงุณุชุฎุฏุงู ูุนุงูุฌ VPF ุ ูุชู ุชูููุฒ ุงูุนูููุฉ ุนูู ุฃููุง ุชุณุชุฎุฏู ูุนุงูุฌ VFP ุงููุดุชุฑู. <br><br>  ููุชูุฌุฉ ูุฐูู ุ ุชู ุงุณุชููุงู ุญูุธ / ุงุณุชุนุงุฏุฉ ุงูุณูุงู ุงูููุชูุจ ุจุงููุนู ุจูุญุฏุงุช ุงููุงูุฑู <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs tex">#define ARM_FPU_CONTEXT_SAVE_INC(tmp, stack) <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>vmrs tmp, FPEXC ; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>stmia stack!, {tmp}; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ands tmp, tmp, #1&lt;&lt;30; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>beq fpu_out_save_inc; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>vstmia stack!, {d0-d15}; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>fpu_out_save_inc: #define ARM_FPU_CONTEXT_LOAD_INC(tmp, stack) <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ldmia stack!, {tmp}; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>vmsr FPEXC, tmp; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ands tmp, tmp, #1&lt;&lt;30; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>beq fpu_out_load_inc; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>vldmia stack!, {d0-d15}; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>fpu_out_load_inc:</code> </pre> <br>  ููุชุญูู ูู ุตุญุฉ ุนูููุฉ ุชุจุฏูู ุงูุณูุงู ูู ุธุฑูู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุ ูุชุจูุง ุงุฎุชุจุงุฑูุง ูููู ููู ุจุงูุถุฑุจ ูู ุฎูุท ูุงุญุฏ ูู ุญููุฉ ูููุณูู ูู ุขุฎุฑ ุ ุซู ููุงุฑูุฉ ุงููุชุงุฆุฌ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">EMBOX_TEST_SUITE(<span class="hljs-string"><span class="hljs-string">"FPU context consistency test. Must be compiled with -02"</span></span>); <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TICK_COUNT 10 static float res_out[2][TICK_COUNT]; static void *fpu_context_thr1_hnd(void *arg) { float res = 1.0f; int i; for (i = 0; i </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; TICK_COUNT; ) { res_out[0][i] = res; if (i == 0 || res_out[1][i - 1] &gt; 0) { i++; } if (res &gt; 0.000001f) { res /= 1.01f; } sleep(0); } return NULL; } static void *fpu_context_thr2_hnd(void *arg) { float res = 1.0f; int i = 0; for (i = 0; i &lt; TICK_COUNT; ) { res_out[1][i] = res; if (res_out[0][i] != 0) { i++; } if (res &lt; 1000000.f) { res *= 1.01f; } sleep(0); } return NULL; } TEST_CASE("Test FPU context consistency") { pthread_t threads[2]; pthread_t tid = 0; int status; status = pthread_create(&amp;threads[0], NULL, fpu_context_thr1_hnd, &amp;tid); if (status != 0) { test_assert(0); } status = pthread_create(&amp;threads[1], NULL, fpu_context_thr2_hnd, &amp;tid); if (status != 0) { test_assert(0); } pthread_join(threads[0], (void**)&amp;status); pthread_join(threads[1], (void**)&amp;status); test_assert(res_out[0][0] != 0 &amp;&amp; res_out[1][0] != 0); for (int i = 1; i &lt; TICK_COUNT; i++) { test_assert(res_out[0][i] &lt; res_out[0][i - 1]); test_assert(res_out[1][i] &gt; res_out[1][i - 1]); } }</span></span></span></span></code> </pre> <br>  ุงุฌุชุงุฒ ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ ุนูุฏ ุฅููุงู ุชุดุบูู ุงูุชุญุณูู ุ ูุฐูู ุฃูุถุญูุง ูู ูุตู ุงูุงุฎุชุจุงุฑ ุฃูู ูุฌุจ ุฃู ูุชู ุชุฑุฌูุชู ูุน ุงูุชุญุณูู ุ EMBOX_TEST_SUITE ("ุงุฎุชุจุงุฑ ุงุชุณุงู ุณูุงู FPU. ูุฌุจ ุฃู ูุชู ุชุฑุฌูุชู ูุน -02") ุ  ุนูู ุงูุฑุบู ูู ุฃููุง ูุนูู ุฃู ุงูุงุฎุชุจุงุฑุงุช ูุฌุจ ุฃูุง ุชุนุชูุฏ ุนูู ุฐูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุนุงูุฌ ุงููุดุชุฑู NEON ู SIMD </h2><br>  ุญุงู ุงูููุช ููุนุฑูุฉ ุณุจุจ ุชุฃุฌูู ูุตุฉ imx6.  ูุงูุญูููุฉ ูู ุฃููุง ุชุณุชูุฏ ุฅูู ููุงุฉ Cortex-A9 ูุชุญุชูู ุนูู ูุนุงูุฌ NEON ุงููุดุชุฑู ุงูุฃูุซุฑ ุชูุฏููุง (https://developer.arm.com/technologies/neon).  NEON ููุณ ููุท VFPv3 ุ ููููู ุฃูุถูุง ูุนุงูุฌ SIMD.  ุชุณุชุฎุฏู VFP ู NEON ููุณ ุงูุณุฌูุงุช.  ูุณุชุฎุฏู VFP ุชุณุฌููุงุช 32 ุจุช ู 64 ุจุช ููุชุดุบูู ุ ููุณุชุฎุฏู NEON ุชุณุฌููุงุช 64 ุจุช ู 128 ุจุช ุ ููุฏ ุชู ุชุนููู ูุฐุง ุงูุฃุฎูุฑ ููุท Q0-Q16.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูููู ุงูุตุญูุญุฉ ูุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุ ูุฅู NEON ูุงุฏุฑุฉ ุฃูุถูุง ุนูู ุงูุนูู ูุน ุญููุฉ ูุชุนุฏุฏุฉ ุงูุญุฏูุฏ ูู ุงูุฏุฑุฌุฉ 16 ุฃู 8 ูู ุงููุนุงูู 2. <br><br>  ูุง ูุฎุชูู ูุถุน vfp ูู NEON ุชูุฑูุจูุง ุนู ุงููุนุงูุฌ ุงููุณุงุนุฏ vfp9-s ุงููููู.  ุจุงูุทุจุน ุ ูู ุงูุฃูุถู ุชุญุฏูุฏ ุฎูุงุฑุงุช vfpv3 ุฃู vfpv3-d32 ูู -mfpu ูุชุญุณูู ุฃูุถู ุ ูุธุฑูุง ูุฃูู ูุญุชูู ุนูู 32 ุชุณุฌูููุง 64 ุจุช.  ููุชูููู ุงููุนุงูุฌ ุงููุดุชุฑู ุ ูุฌุจ ููุญ ุงููุตูู ุฅูู ุงููุนุงูุฌุงุช ุงููุดุชุฑูุฉ c10 ู c11.  ูุชู ุฐูู ุจุงุณุชุฎุฏุงู ุงูุฃูุงูุฑ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Allow access to c10 &amp; c11 coprocessors */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mrc p15, 0, %0, c1, c0, 2"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"=r"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (val) :)</span></span></span></span>; val |= <span class="hljs-number"><span class="hljs-number">0xf</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mcr p15, 0, %0, c1, c0, 2"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"r"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (val))</span></span></span></span>;</code> </pre> <br>  ูููู ูุง ุชูุฌุฏ ุงุฎุชูุงูุงุช ุฌููุฑูุฉ ุฃุฎุฑู. <br><br>  ุดูุก ุขุฎุฑ ุฅุฐุง ุญุฏุฏุช -mfpu = neon ุ ูู ูุฐู ุงูุญุงูุฉ ูููู ูููุชุฑุฌู ุงุณุชุฎุฏุงู ุชุนูููุงุช SIMD. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู SIMD ูู C </h2><br>  ูู ุฃุฌู &lt;&lt; ุชุณุฌูู &gt;&gt; ุงูููู ูุฏูููุง ุนู ุทุฑูู ุงูุชุณุฌูู ุ ููููู ุชุถููู โarm_neon.hโ ูุงุณุชุฎุฏุงู ุฃููุงุน ุงูุจูุงูุงุช ุงูููุงุจูุฉ: <br>  float32x4_t ูุฃุฑุจุนุฉ ุนูุงูุงุช 32 ุจุช ูู ุชุณุฌูู ูุงุญุฏ ุ uint8x8_t ูุซูุงููุฉ ุฃุนุฏุงุฏ ุตุญูุญุฉ 8 ุจุช ูููุฐุง.  ูููุตูู ุฅูู ูููุฉ ูุงุญุฏุฉ ุ ูุดูุฑ ุฅูููุง ุนูู ุฃููุง ุตููู ุ ุฅุถุงูุฉ ุ ุถุฑุจ ุ ุชุนููู ุ ุฅูุฎ.  ุฃูุง ุงููุชุบูุฑุงุช ุงูุนุงุฏูุฉ ููุซูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32x4_t</span></span> a = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>}, b = {<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">uint32x4_t</span></span> c = a * b; <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(โResult=[%d, %d, %d, %d]\nโ, c[<span class="hljs-number"><span class="hljs-number">0</span></span>], c[<span class="hljs-number"><span class="hljs-number">1</span></span>], c[<span class="hljs-number"><span class="hljs-number">2</span></span>], c[<span class="hljs-number"><span class="hljs-number">3</span></span>]);</code> </pre> <br>  ุจุงูุทุจุน ุ ูุนุฏ ุงุณุชุฎุฏุงู ูุงูู ุงูุจูุงูุงุช ุงูุชููุงุฆู ุฃุณูู.  ููุชูุฌูู ุงูุชููุงุฆู ุ ุฃุถู ุนูุงูุฉ -ftree-vectorize ุฅูู GCC. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simd_test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a[LEN], b[LEN], c[LEN]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; LEN; i++) { a[i] = i; b[i] = LEN - i; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; LEN; i++) { c[i] = a[i] + b[i]; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; LEN; i++) { <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"c[i] = %d\n"</span></span>, c[i]); } }</code> </pre> <br>  ุชููู ุญููุฉ ุงูุฅุถุงูุฉ ุจุฅูุดุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs delphi"><span class="hljs-number"><span class="hljs-number">600059</span></span>a0: f4610adf vld1.<span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-comment"><span class="hljs-comment">{d16-d17}</span></span>, [r1 :<span class="hljs-number"><span class="hljs-number">64</span></span>] <span class="hljs-number"><span class="hljs-number">600059</span></span>a4: e2833010 add r3, r3, <span class="hljs-string"><span class="hljs-string">#16</span></span> <span class="hljs-number"><span class="hljs-number">600059</span></span>a8: e28d0a03 add r0, sp, <span class="hljs-string"><span class="hljs-string">#12288</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span>x3000 <span class="hljs-number"><span class="hljs-number">600059</span></span>ac: e2811010 add r1, r1, <span class="hljs-string"><span class="hljs-string">#16</span></span> <span class="hljs-number"><span class="hljs-number">600059</span></span>b0: f4622adf vld1.<span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-comment"><span class="hljs-comment">{d18-d19}</span></span>, [r2 :<span class="hljs-number"><span class="hljs-number">64</span></span>] <span class="hljs-number"><span class="hljs-number">600059</span></span>b4: e2822010 add r2, r2, <span class="hljs-string"><span class="hljs-string">#16</span></span> <span class="hljs-number"><span class="hljs-number">600059</span></span>b8: f26008e2 vadd.i32 q8, q8, q9 <span class="hljs-number"><span class="hljs-number">600059</span></span>bc: ed430b04 vstr d16, [r3, #-<span class="hljs-number"><span class="hljs-number">16</span></span>] <span class="hljs-number"><span class="hljs-number">600059</span></span>c0: ed431b02 vstr d17, [r3, #-<span class="hljs-number"><span class="hljs-number">8</span></span>] <span class="hljs-number"><span class="hljs-number">600059</span></span>c4: e1530000 cmp r3, r0 <span class="hljs-number"><span class="hljs-number">600059</span></span>c8: <span class="hljs-number"><span class="hljs-number">1</span></span>afffff4 bne <span class="hljs-number"><span class="hljs-number">600059</span></span>a0 &lt;foo+<span class="hljs-number"><span class="hljs-number">0</span></span>x58&gt; <span class="hljs-number"><span class="hljs-number">600059</span></span>cc: e28d5dbf add r5, sp, <span class="hljs-string"><span class="hljs-string">#12224</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span>x2fc0 <span class="hljs-number"><span class="hljs-number">600059</span></span>d0: e2444004 sub r4, r4, <span class="hljs-string"><span class="hljs-string">#4</span></span> <span class="hljs-number"><span class="hljs-number">600059</span></span>d4: e285503c add r5, r5, <span class="hljs-string"><span class="hljs-string">#60</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span>x3c</code> </pre> <br>  ุจุนุฏ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ููุดูุฑุฉ ุงููุชูุงุฒูุฉ ุ ูุฌุฏูุง ุฃู ุงูุฅุถุงูุฉ ุงูุจุณูุทุฉ ูู ุญููุฉ ุ ุดุฑูุทุฉ ุฃู ุชููู ุงููุชุบูุฑุงุช ูุณุชููุฉ ุ ุชุนุทู ุงูุชุณุงุฑุน 7 ูุฑุงุช.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฑุฑูุง ูุนุฑูุฉ ูุฏู ุชุฃุซูุฑ ุงูุชูุงุฒู ุนูู ุงูููุงู ุงูุญููููุฉ ุ ูุฃุฎุฐูุง MESA3d ุจูุญุงูุงุฉ ุจุฑุงูุฌูุง ูููุงุณ ุนุฏุฏ ุงูุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ ุจุฃุนูุงู ูุฎุชููุฉ ุ ูุญุตููุง ุนูู ููุณุจูู ูู ุงูุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ (15 ููุงุจู 13) ุ ุฃู ุฃู ุงูุชุณุงุฑุน ูู ุญูุงูู 15-20ูช . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุฃุนุทู ูุซุงูุงู</a> ุขุฎุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุงูุชุณุฑูุน ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ NEON</a> ุ ูููุณ ุฃูุงูุฑูุง ุ ูููู ูู ARM. <br><br>  ูุณุฎ ุงูุฐุงูุฑุฉ ุฃุณุฑุน ุจูุณุจุฉ ุชุตู ุฅูู 50 ุจุงููุงุฆุฉ ุนู ุงููุนุชุงุฏ.  ุงูุฃูุซูุฉ ุงูุญููููุฉ ููุฌูุฏุฉ ูู ุงููุฌูุน. <br><br>  ุฏูุฑุฉ ุงููุณุฎ ุงูุนุงุฏูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">WordCopy</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">LDR</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">r3</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[r1]</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">STR</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">r3</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[r0]</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">SUBS</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">r2</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">r2</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">BGE</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">WordCopy</span></span></code> </pre> <br>  ุญููุฉ ุจุฃูุงูุฑ ูุณุฌูุงุช ูููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs erlang-repl">NEONCopyPLD PLD [r1, #<span class="hljs-number"><span class="hljs-number">0</span></span>xC0] VLDM r1!,{d0-d7} VSTM r0!,{d0-d7} SUBS r2,r2,#<span class="hljs-number"><span class="hljs-number">0</span></span>x40 BGE NEONCopyPLD</code> </pre> <br>  ูู ุงููุงุถุญ ุฃู ุงููุณุฎ ุจููุฏุงุฑ 64 ุจุงูุช ุฃุณุฑุน ูู 4 ุจุงูุช ุ ููุฐุง ุงููุณุฎ ุณูุนุทู ุฒูุงุฏุฉ ุจูุณุจุฉ 10ูช ุ ููู ุงูู 40ูช ุงููุชุจููุฉ ูุจุฏู ุฃููุง ุชุนุทู ุนูู ุงููุนุงูุฌ ุงููุดุชุฑู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุญุงุก ู </h2><br>  ูุง ูุฎุชูู ุงูุนูู ูุน ูุญุฏุงุช FPU ูู Cortex-M ูุซูุฑูุง ุนู ุฐูู ุงูููุตูู ุฃุนูุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุจุฏู ุจูุง ุงููุงูุฑู ุฃุนูุงู ูุญูุธ ุณูุงู fpu-shny <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs tex">#define ARM_FPU_CONTEXT_SAVE_INC(tmp, stack) <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ldr tmp, =CPACR; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ldr tmp, [tmp]; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>tst tmp, #0xF00000; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>beq fpu_out_save_inc; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>vstmia stack!, {s0-s31}; fpu_out_save_inc:</code> </pre> <br>  ุฃูุถุง ุ ูุณุชุฎุฏู ุงูุฃูุฑ vstmia ููุท ุงูุชุณุฌููุงุช s0-s31 ููุชู ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุญูู ุจุดูู ูุฎุชูู.  ูุฐูู ุ ูู ุฃุฎูุถ ูู ุงููุซูุฑ ูู ุงูุชูุงุตูู ุ ุณุฃุดุฑุญ ููุท ูุฑู.  ูุฐุง ุ ูุฏููุง โโุฏุนููุง ูู STM32F7discovery ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">cortex-m7</a> ูุฐูู ุ ุนูู ุงูุชูุงูู ุ ูุญุชุงุฌ ุฅูู ุชุนููู ุนูุงูุฉ -mfpu = fpv5-sp-d16.  ูุฑุฌู ููุงุญุธุฉ ุฃูู ูู ุงูุฅุตุฏุงุฑุงุช ุงููุญูููุฉ ุ ุชุญุชุงุฌ ุฅูู ุงููุธุฑ ุนู ูุซุจ ูู ุฅุตุฏุงุฑ ุงููุนุงูุฌ ุงููุดุชุฑู ุ ุญูุซ ูุฏ ุชุญุชูู ููุณ ุงููุดุฑุฉ-ู ุนูู ุฎูุงุฑุงุช ูุฎุชููุฉ.  ูุฐูู ุ ุฅุฐุง ูู ููู ุงูุฎูุงุฑ ุงูุฎุงุต ุจู ุจุฏูุฉ ูุฒุฏูุฌุฉ ุ ูููู ุจุฏูุฉ ูุงุญุฏุฉ ุ ููุฏ ูุง ูููู ููุงู ุชุณุฌููุงุช D0-D16 ุ ููุง ูู ุงูุญุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">stm32f4discovery</a> ุ ููุฐุง ูู ุงูุณุจุจ ูู ุงุณุชุฎุฏุงู ุงููุชุบูุฑ ูุน ุงูุณุฌูุงุช S0-S31.  ุจุงููุณุจุฉ ููุญุฏุฉ ุงูุชุญูู ูุฐู ุ ูุณุชุฎุฏู -mfpu = fpv4-sp-d16. <br><br>  ูุงููุฑู ุงูุฑุฆูุณู ูู ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุญูู ุงูุฎุงุตุฉ ุจูุญุฏุฉ ุงูุชุญูู ุ ููู ุชูุน ูุจุงุดุฑุฉ ูู ูุณุงุญุฉ ุงูุนููุงู ููููุงุฉ ุงูุฑุฆูุณูุฉ ุ ููุฃููุงุน ูุฎุชููุฉ ููู ูุฎุชููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">cortex-m4</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุดุฑุฉ m7</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>  ุจูุฐุง ุณุฃุฎุชุชู ูุตุชู ุงููุตูุฑุฉ ุญูู ุงูููุทุฉ ุงูุนุงุฆูุฉ ูู ARM.  ุฃูุงุญุธ ุฃู ูุญุฏุงุช ุงูุชุญูู ุงูุฏูููุฉ ุงูุญุฏูุซุฉ ูููุฉ ุฌุฏูุง ูููุงุณุจุฉ ููุณ ููุท ููุชุญูู ุ ูููู ุฃูุถูุง ููุนุงูุฌุฉ ุงูุฅุดุงุฑุงุช ุฃู ุฃููุงุน ูุฎุชููุฉ ูู ูุนูููุงุช ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ.  ูู ุฃุฌู ุงุณุชุฎุฏุงู ูู ูุฐู ุงูููุฉ ุจุดูู ูุนุงู ุ ุชุญุชุงุฌ ุฅูู ููู ููููุฉ ุนูููุง.  ุขูู ุฃู ุชููู ูุฐู ุงูููุงูุฉ ูุฏ ุณุงุนุฏุช ุนูู ูุนุฑูุฉ ุฐูู ุจุดูู ุฃูุถู ููููุงู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar418295/">https://habr.com/ru/post/ar418295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar418285/index.html">ุฃุธูุฑ ุนููุงุก ุงูููุงุฎ ููู ุชุคุซุฑ ุงูุจุดุฑูุฉ ุนูู ุงูุชุบูุฑุงุช ุงูููุณููุฉ ูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุบูุงู ุงูุฌูู</a></li>
<li><a href="../ar418287/index.html">ูุงุฆูุฉ ูุฑุฌุนูุฉ ุฅูุฒุงููุฉ ูุชุทููุฑ ุชุตููู UX ูุชุทุจููุงุช ุงููุงุชู ุงููุญููู</a></li>
<li><a href="../ar418289/index.html">ููู ุชุณุงุนุฏ ุญููู ุชูููููุฌูุง ุงููุนูููุงุช ูู ุชูุธูู ุงูุชุณุนูุฑ ุงูุฏููุงูููู ุฏุงุฎู ุงููุชุฌุฑ</a></li>
<li><a href="../ar418291/index.html">ูุคุชูุฑ DEFCON 19. "ุณุฑูุฉ ูู ุดูุก ุ ุงูุชู ุงูุฌููุน ุ ุชุณุจุจ ูู ุงูููุงุฑ ูุงูู ูุงูู"! ุดุงุฑุน ุฌุงูุณูู ุฅู</a></li>
<li><a href="../ar418293/index.html">ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุงูููุจ ุงูุขูู ูู Virto Commerce</a></li>
<li><a href="../ar418297/index.html">ูุฑุงุฌุนุฉ ุงููุงุชู ุงูุฐูู Neffos N1</a></li>
<li><a href="../ar418301/index.html">ุงูููุงุฌูุฉ ุงููุจุฑู ูููุฑูุฎ ูู 2018: ููููุฉ ุงููุฑุงูุจุฉ ููุงุฐุง ุชุชููุน</a></li>
<li><a href="../ar418303/index.html">Vanessa-Automation - ุฃุฏุงุฉ ูุงุฎุชุจุงุฑ ุญููู ุงูุชุทุจููุงุช ุนูู ููุตุฉ 1C: Enterprise</a></li>
<li><a href="../ar418305/index.html">ูู ุนุฏุฏ ุงููุงุฆูุงุช ุงูุชู ุชูุจุนุซ ูููุง Python ุนูุฏ ุชูููุฐ ุงูุจุฑุงูุฌ ุงููุตูุฉุ</a></li>
<li><a href="../ar418307/index.html">ุฃุฏูุงุช ุงูุชุนูู ุงูุขูู ูู Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>