<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëñ üö¥üèΩ üí¨ C√≥mo creamos un servicio de campa√±a publicitaria que cumpla con el RGPD ‚è™ üîÅ üíÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El RGPD, que entr√≥ en vigencia en mayo de este a√±o, ha afectado seriamente el mercado de marketing en Internet. A sus participantes les gustar√≠a forma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo creamos un servicio de campa√±a publicitaria que cumpla con el RGPD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/432772/">  El RGPD, que entr√≥ en vigencia en mayo de este a√±o, ha afectado seriamente el mercado de marketing en Internet.  A sus participantes les gustar√≠a formar la audiencia m√°s precisa para mostrar anuncios, pero ahora para esto es necesario obtener el consentimiento expl√≠cito del usuario, de lo contrario, incluso un peque√±o recurso de nicho puede generar multas multimillonarias.  Algunos recursos se han cerrado, pero muchos se est√°n convirtiendo para cumplir con nuevos requisitos.  Y nuestro proyecto de un servicio de gesti√≥n de campa√±as publicitarias para un cliente de EE. UU. Es un gran ejemplo de esto. <br><br><img src="https://habrastorage.org/webt/i2/ko/yo/i2koyopci8twyqzurhdgqkcxym8.jpeg" alt="imagen"><br><a name="habracut"></a><br><h3>  Acerca del servicio </h3><br>  Nuestro cliente, una empresa estadounidense de Los √Ångeles, se centra en el marketing en la industria de la m√∫sica.  Su servicio proporciona soporte para campa√±as publicitarias complejas para equipos de varios tama√±os, desde pandillas a la vuelta de la esquina hasta las estrellas del escenario mundial. <br><br>  De hecho, el servicio de nuestro cliente es una startup que desarrolla una plataforma de marketing especializada que logr√≥ recaudar inversiones de compa√±√≠as discogr√°ficas, ya que tiene en cuenta los detalles del comportamiento de la audiencia en una industria en particular.  La plataforma le permite orientar anuncios mediante el an√°lisis del comportamiento de los usuarios que alguna vez mostraron inter√©s en un equipo en particular.  Los principales usuarios del recurso son m√∫sicos y trabajadores de la industria (gerentes, empleados de compa√±√≠as discogr√°ficas, organizadores de conciertos y muchos otros). <br><br>  Cuando comenz√≥ nuestro proyecto, el servicio ya estaba funcionando y logr√≥ ganar una cierta posici√≥n en el mercado.  Sin embargo, fue m√°s bien un prototipo que prob√≥ la hip√≥tesis b√°sica de un negocio, especialmente porque parte de la funcionalidad se implement√≥ a trav√©s de servicios de socios.  Nos conectamos con el desarrollo para crear una arquitectura completa, y el GDPR fue el √≠mpetu que impuls√≥ todas las transformaciones.  Nuestra tarea no era solo actualizar el servicio existente, sino reconstruirlo con la nueva legislaci√≥n, actualizar y llevar a una interfaz de usuario m√°s uniforme. <br><br><h3>  Implementaci√≥n </h3><br>  Todo el proyecto se dividi√≥ en varias etapas. <br><br><img src="https://habrastorage.org/webt/pi/0r/n8/pi0rn8jspha0icrlm2fowfagm8k.jpeg" alt="imagen"><br><br>  En la primera etapa, reescribimos desde cero la parte que anteriormente hab√≠a funcionado en PHP: acortador de enlaces y servicio de autorizaci√≥n. <br><br>  El acortador de enlaces es una parte de la funcionalidad que est√° disponible de forma gratuita para todos los usuarios registrados y se utiliza para atraer clientes a los servicios pagos de la compa√±√≠a.  El servicio le permite traer un enlace largo a un formulario corto para publicarlo en las redes sociales.  Al mismo tiempo, puede personalizar el enlace configurando, por ejemplo, la segmentaci√≥n geogr√°fica: seg√∫n el pa√≠s de origen del usuario, se le pueden mostrar diferentes p√°ginas de destino. <br>  Actualizando el backend, utilizamos OpenJDK 1.8, Kotlin y Spring boot / data / web, el marco est√°ndar para un proyecto que no espera grandes cargas.  Por cierto, fue en este proyecto que probamos Kotlin "en batalla" por primera vez, y debido a su sintaxis, nos permiti√≥ acelerar significativamente el desarrollo.  Definitivamente, lo usaremos en otros proyectos. <br><br>  La base de datos del servicio de autorizaci√≥n y el acortador implementado en la primera etapa se basa en PostgreSQL: el modelo de almacenamiento de datos relacionales era muy adecuado para resolver estos problemas. <br><br>  En la segunda etapa, asumimos la gesti√≥n de campa√±as publicitarias.  Esta funcionalidad en la plataforma del cliente tambi√©n exist√≠a antes, pero a trav√©s del servicio del socio, por el que ten√≠a que pagar.  Ahora la plataforma del cliente ha crecido hasta el punto en que era necesario cuidar su infraestructura.  El servicio propio, a diferencia de los de terceros, es mucho m√°s f√°cil de desarrollar en la direcci√≥n correcta, realizando r√°pidamente los cambios necesarios. <br><br>  En esta parte del proyecto, implementamos solo la API externa para el administrador de campa√±a.  Pero en la tercera etapa desarrollamos este m√≥dulo: finalizamos la API e hicimos una interfaz de usuario completa para el administrador de la campa√±a. <br><br>  Paralelamente, desarrollamos una peque√±a DMP (plataforma de gesti√≥n de datos) patentada que gestiona la recopilaci√≥n de datos de visitantes.  Los datos DMP se almacenan en MongoDB, porque decidimos dejar las bases para el futuro escalado horizontal de esta base de datos.  Ahora DMP atiende hasta 2 mil solicitudes por segundo (en picos), mientras nos centramos en almacenar aproximadamente un terabyte de datos.  Tal volumen podr√≠a haberse guardado en PostgreSQL, pero a la larga habr√≠a sido necesario hacer grandes esfuerzos para escalar. <br>  El mismo MongoDB se usa en la base de datos del administrador de campa√±a (Campaign DB): aqu√≠ el modelo de una base de datos orientada a documentos nos fue muy √∫til.  Las campa√±as van como entidades individuales y pueden expandirse. <br><br>  Todos los cach√©s funcionan en Redis. <br><br>  Frontend: Angular 5, TypeScript, HTML5, Sass, Node.js, npm, Angular CLI. <br><br>  Durante la √∫ltima etapa del proyecto, completamos la integraci√≥n de los sistemas del cliente y los servicios de un socio clave, abriendo el acceso a una gran base de m√∫sicos para la compa√±√≠a, lo que garantizar√° un aumento en el n√∫mero de usuarios. <br><br>  Hubo algunas dificultades en el proyecto.  El cliente quer√≠a guardar los datos del usuario y los registros acumulados durante la operaci√≥n del servicio, mientras cambiaba ligeramente el modelo.  Paralelamente a la alteraci√≥n de la arquitectura, transferimos registros y cambiamos sus principios: de nombre de usuario a correo electr√≥nico como inicio de sesi√≥n, lo que nos trajo muchas noches sin dormir debido a restricciones en el n√∫mero de usuarios con la misma direcci√≥n de correo electr√≥nico.  El modelo de derechos en el sistema ha cambiado.  Anteriormente, el servicio funcionaba de acuerdo con un modelo de dos niveles, pero implementamos un modelo de derechos sin restricciones (incluida la capacidad de emitir derechos limitados). <br><br>  Al mismo tiempo, la funcionalidad se expandi√≥.  Por ejemplo, en una de las etapas en las que aparecieron varios niveles, con la ayuda de los cuales los visitantes finales que hacen clic en enlaces cortos a una composici√≥n espec√≠fica, pueden configurar p√°ginas con una lista de servicios donde estas composiciones est√°n disponibles para compra legal o para escuchar. <br><br><h3>  Vale la pena decir por separado sobre GDPR </h3><br>  El principal mercado de nuestro cliente es Estados Unidos, pero alrededor del 10% del tr√°fico que la empresa no quer√≠a perder proven√≠a de Europa.  Desde que entr√≥ en vigor la nueva regulaci√≥n (25 de mayo de 2018), su objetivo simplemente se ha deshabilitado.  Despu√©s de consultar con abogados, creamos el servicio de tal manera que no contradijera el GDPR, y desde el 16 de agosto comenzamos a apuntar nuevamente. <br>  Honestamente, estudiamos las complejidades de las regulaciones en todo el grupo de dos semanas.  La dificultad en esta etapa fue que, con la vaguedad general de la redacci√≥n, hasta ahora no existe una pr√°ctica de aplicaci√≥n de la ley, casos reales que podr√≠an mostrar c√≥mo hacerlo bien y qu√© est√° mal.  Sin embargo, ahora (despu√©s de nuestra propia investigaci√≥n y consulta con abogados) confiamos en la arquitectura implementada de la soluci√≥n. <br><br>  La l√≥gica del servicio implicaba agregar un usuario que sigue un enlace corto a una audiencia espec√≠fica, para que luego se le puedan mostrar anuncios.  En t√©rminos de GDPR, esto no puede hacerse sin el consentimiento expl√≠cito del usuario.  E implementamos una solicitud de consentimiento: cuando hace clic en el enlace en la parte inferior de la p√°gina, aparece una placa con una pregunta y dos botones.  La solicitud se abre para usuarios cuya IP pertenece a Europa, y su respuesta se almacena en forma de cookies, por lo que los visitantes no tienen que presionar botones cada vez. <br>  Si no hay consentimiento del usuario (es decir, cookies), simplemente no le mostramos un p√≠xel, es decir  En las estad√≠sticas generales del servicio, se contar√° el hecho de la visita, pero los datos del usuario no se recopilar√°n ni se tendr√°n en cuenta. <br><br>  El RGPD impone restricciones arquitect√≥nicas: los datos personales no solo deben recopilarse correctamente, sino tambi√©n almacenarse de forma segura.  En nuestro caso, estas restricciones se aplican al DMP implementado (a pesar del hecho de que almacena datos an√≥nimos con identificadores an√≥nimos que solo hipot√©ticamente les permiten desanonimizar) y la base de datos del servicio de autorizaci√≥n.  En nuestra arquitectura, estas bases est√°n claramente asignadas en bloques separados.  De acuerdo con las regulaciones, el acceso de terceros a estos m√≥dulos "sensibles" es naturalmente limitado. <br><br>  Solo el servicio correspondiente tiene acceso a la base de datos de autorizaciones.  Todos los dem√°s servicios no saben nada sobre los datos personales del usuario de la plataforma; solo necesitan validaci√≥n del servicio de autorizaci√≥n. <br><br>  La base de datos DMP tambi√©n incluye solo el servicio hom√≥nimo.  Al mismo tiempo, solo los agregados de datos de audiencia se devuelven de la base de datos, pero no los datos en s√≠.  Estos agregados forman la base de los an√°lisis que los usuarios del servicio de la industria de la m√∫sica reciben en su cuenta personal. <br>  Tambi√©n tenemos un procedimiento obligatorio para cargar y eliminar datos de usuario.  Hubo una pregunta sobre c√≥mo verificar que el usuario realmente est√° solicitando sus datos de manera leg√≠tima.  Y utilizamos la cookie almacenada por el usuario como factor de verificaci√≥n. <br><br>  El proyecto se complet√≥ recientemente, por lo que es demasiado pronto para hablar sobre los resultados num√©ricos. <br><br>  Autor del art√≠culo: Nikolay Eremin <br><br>  PD: publicamos nuestros art√≠culos en varios sitios de Runet.  Suscr√≠base a nuestras p√°ginas en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VK</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FB</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Telegram-channel</a> para conocer todas nuestras publicaciones y otras noticias de Maxilect. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432772/">https://habr.com/ru/post/es432772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432762/index.html">El detector de mentiras de IA puede detectar cuando una persona est√° mintiendo</a></li>
<li><a href="../es432764/index.html">UDB Que es esto</a></li>
<li><a href="../es432766/index.html">C√≥mo codificar un mensaje secreto en una huella digital</a></li>
<li><a href="../es432768/index.html">Auriculares inal√°mbricos para "maratones en serie": en Dolby se ofrecer√°n por $ 599</a></li>
<li><a href="../es432770/index.html">Botnets y sus tipos: lo que se conoce en 2018</a></li>
<li><a href="../es432774/index.html">Frontend DevDay. Grabaci√≥n de informes</a></li>
<li><a href="../es432776/index.html">El libro "Reaccionar en acci√≥n"</a></li>
<li><a href="../es432778/index.html">Desarrollo de un convertidor de dinero en STM32F334: principio de operaci√≥n, c√°lculos, creaci√≥n de prototipos</a></li>
<li><a href="../es432780/index.html">¬øPor qu√© se necesita empat√≠a en el mundo tecnol√≥gico?</a></li>
<li><a href="../es432782/index.html">Instalaci√≥n multiservidor de Zimbra Collaboration Suite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>