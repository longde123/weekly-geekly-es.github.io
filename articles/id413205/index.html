<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🎓 🔥 🙎🏻 Diperlukan Header HTTP 🗽 👂🏿 🤾🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Klien Fastly kami suka memanipulasi header HTTP. Memilih kombinasi header yang tepat adalah salah satu hal terbaik yang dapat Anda lakukan untuk menja...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diperlukan Header HTTP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413205/"> Klien Fastly kami suka memanipulasi header HTTP.  Memilih kombinasi header yang tepat adalah salah satu hal terbaik yang dapat Anda lakukan untuk menjaga situs Anda tetap aman dan memberikan kontribusi yang signifikan terhadap kinerjanya. <br><br>  Sebagian besar pengembang menyadari header HTTP yang penting dan bermanfaat.  Yang paling terkenal adalah <code>Content-Type</code> dan <code>Content-Length</code> , ini adalah header yang hampir universal.  Namun baru-baru ini, header seperti <code>Content-Security-Policy</code> dan <code>Strict-Transport-Security</code> telah digunakan untuk meningkatkan <code>Strict-Transport-Security</code> , dan <code>Link rel=preload</code> untuk meningkatkan kinerja.  Meskipun ada dukungan luas di peramban, hanya sedikit yang menggunakannya. <br><br>  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> kami melihat header yang tidak perlu.  Sekarang mari kita cari tahu header mana yang benar-benar harus dikonfigurasi untuk situs Anda. <br><a name="habracut"></a><br><h1>  PR </h1><br>  Ada beberapa layanan di Internet yang akan menganalisis situs Anda dan menyarankan header mana yang akan ditambahkan.  Saya melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">securityheaders.io</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Observatory</a> Mozilla untuk melengkapi pengetahuan dan data saya sendiri dari jaringan Fastly. <br><br><h1>  Judul apa yang seharusnya ada di situs Anda </h1><br>  Jadi apa header utama dalam respons server Anda?  Sebagian besar bertanggung jawab untuk meningkatkan keamanan: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konten-Keamanan-Kebijakan</a> .  Bertindak sebagai firewall di browser.  Jika situs Anda dikompromikan, itu membantu membatasi kerusakan dengan mencegah koneksi ke host yang tidak disetujui.  Judul sangat penting.  Jika Anda tidak memilikinya, Anda harus mengaktifkannya. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kebijakan Perujuk</a> .  Menyesuaikan level detail untuk disertakan dalam header <code>Referer</code> saat meninggalkan halaman.  Membantu mencegah kebocoran data ke situs-situs tempat tautan pergi.  Sangat direkomendasikan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ketat-Transport-Security</a> .  Mencegah segala upaya untuk terhubung ke situs menggunakan HTTP biasa.  Membantu menghentikan serangan MiTM dan meningkatkan keamanan situs.  Juga sangat direkomendasikan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">X-XSS-Perlindungan</a> .  Mencegah beberapa bentuk serangan skrip lintas situs, mencegah eksekusi skrip jika beberapa markup dari dokumen dalam bentuk yang sama hadir dalam permintaan.  Misalnya, jika Anda memuat halaman dengan alamat <code>/index.html?foo=&lt;script&gt;alert('foo');&lt;/script&gt;</code> <code>&lt;script&gt;alert('foo');&lt;/script&gt;</code> , dan dalam kode sumber halaman tersebut adalah <code>&lt;script&gt;alert('foo');&lt;/script&gt;</code> lalu skrip diblokir.  Hari-hari ini, judul sebagian besar digantikan oleh CSP. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">X-Content-Type-Options</a> .  Tetapkan nilai ke <code>nosniff</code> untuk mencegah browser dari mengeksekusi konten seperti JavaScript yang tidak ditentukan nilai tipe konten yang benar.  Mencegah serangan seperti pencampuran MIME, dan baru-baru ini Chrome telah digunakan untuk mengaktifkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">isolasi situs</a> .  Seiring waktu, itu menjadi kurang penting karena perilaku browser yang ditingkatkan secara default, tetapi saat ini masih di antara praktik terbaik. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CORS</a> .  Header Berbagi Sumber Daya Silang Asal memungkinkan Anda memuat URL dengan skrip dari sumber lain.  Ini adalah judul opsional.  Judul jenis ini permisif, bukan penghalang, sehingga ketidakhadirannya memberikan tingkat keamanan maksimum. <br><br>  Lainnya untuk kinerja: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan Waktu-Izinkan-Asal</a> .  Memberikan akses alat pemantauan untuk meminta data waktu.  Ini dalam banyak hal, informasi berharga, dapat sangat meningkatkan kualitas analitik seperti Google Analytics atau Speedcurve. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan rel = preload</a> .  Memberitahu browser tentang sumber daya kritis yang harus diunduh, bahkan jika tidak ada kebutuhan mendesak untuk mereka.  Gunakan tajuk untuk font dan CSS penting. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Waktu Server</a>  Memberikan informasi waktu dari server yang melengkapi API Timing Navigasi dan Resource Timing API dengan informasi lebih rinci tentang waktu yang dibutuhkan untuk menyelesaikan tugas-tugas di server (misalnya, "berapa banyak waktu yang kami habiskan di MySQL").  Sangat bagus untuk memantau data kinerja, dikombinasikan dengan alat RUM Beacon. <br><br>  Mari kita lihat lebih dekat beberapa dari mereka. <br><br><h1>  Kebijakan Keamanan Konten: simpan di dalam </h1><br>  Meskipun <code>Content-Security-Policy</code> adalah salah satu judul paling penting, itu juga salah satu yang paling bertele-tele.  Header CSP terbesar yang saya temukan di HTTPArchive adalah 10K.  <i>Sepuluh kilobyte</i> .  Untuk nilai tajuk tunggal.  Lebih buruk: sementara badan respons dapat dialirkan, tajuk disangga oleh sebagian besar server dan proksi dan hanya dikirimkan setelah selesai.  Kompresi HTTP / 2 membantu <i>sedikit</i> mengingatnya di antara permintaan, tetapi ini tidak berarti bahwa header 10KB baik-baik saja. <br><br>  Selain itu, dengan mengisi seluruh paket pertama jawaban Anda, Anda dapat memaksa browser untuk melakukan dua panggilan ke server <b>hanya untuk mulai menerima konten</b> .  Jadi pikirkan tidak hanya tentang menghapus header yang tidak perlu, tetapi juga tentang memaksimalkan yang sudah ada. <br><br><h1>  Kebijakan rujukan </h1><br>  Sejak dahulu kala (yaitu, di dunia web sejak sekitar akhir 90-an), browser mengirim (dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menulis secara tidak benar</a> ) header <code>Referer</code> .  Untuk sebagian besar riwayatnya, ini telah menjadi salah satu cara paling penting untuk melacak perpindahan pengguna antar halaman dalam alat analisis, serta memahami asal-usul lalu lintas masuk.  Namun, yang terakhir dikaitkan dengan masalah privasi yang signifikan.  Jika saya mengklik tautan dalam email dari klien email, situs dapat menentukan domain email saya.  Lebih buruk lagi, mengetahui URL lengkap dari mana Anda berasal, termasuk argumen permintaan, dapat mengungkapkan ketentuan permintaan pencarian terakhir Anda atau data pribadi seperti alamat email. <br><br>  Anda dapat memilih beberapa strategi dari opsi Kebijakan Referrer yang tersedia, tetapi saran saya yang biasa adalah "origin-when-cross-origin", yang memungkinkan Referer untuk semua permintaan normal, tetapi memotong nilainya hanya ke domain jika tautannya berpindah dari satu domain ke domain lainnya .  Tautan di dalam situs Anda sendiri menyertakan perujuk lengkap. <br><br><h1>  Pengukuran Waktu-Server pada CDN Edge Server </h1><br>  <code>Server-Timing</code> memiliki banyak fitur bagus, dan salah satunya adalah Anda dapat menambahkan beberapa instance sebagai respons - dan semuanya akan digabungkan dalam browser atau alat RUM.  Yaitu, jika permintaan melewati beberapa tahap pemrosesan server - seperti yang terjadi pada CDN - setiap tahap menambahkan metrik waktu sendiri, dan mereka tidak saling bertentangan.  Berikut cara menambahkan metrik Fastly ke header menggunakan VCL di konfigurasi layanan Fastly: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">add</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span> = fastly_info.state {", fastly;desc="Edge <span class="hljs-type"><span class="hljs-type">time</span></span>";dur="} <span class="hljs-type"><span class="hljs-type">time</span></span>.elapsed.msec;</code> </pre> <br>  Nomor ini termasuk waktu yang dihabiskan untuk menunggu backend, jadi dalam kasus normal semua metrik waktu server Anda akan kurang dari angka Fastly.  Namun, jika kami mengeluarkan dokumen dari cache Fastly, Anda akan melihat metrik waktu asli dari saat halaman dibuat, tetapi nomor Fastly akan mengkonfirmasi bahwa total kehilangan waktu sebenarnya sangat kecil. <br><br>  Metrik waktu server tersedia melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">objek kinerja dalam JavaScript</a> dan ditampilkan di panel jaringan Chrome Devtools: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d2e/5e2/349/d2e5e23497238f2cdf12cddf0c6dedb5.png"><br><br>  Saat ini, visualisasi indikator pada tingkat yang belum sempurna.  Tetapi mereka bekerja keras dalam hal ini, sehingga di masa depan antarmuka pengguna cenderung meningkat secara signifikan. <br><br><h1>  Tambahkan semua tajuk yang benar. </h1><br>  Fastly adalah tempat yang baik untuk menambahkan semua header keamanan dan kinerja.  Berikut ini menunjukkan bagaimana mereka semua terlihat bersama.  Tambahkan kode ini pada tahap pengiriman aliran permintaan, ubah nilainya menjadi yang sesuai untuk situs Anda ( <b>cobalah untuk tidak menyalin dan menempel</b> tanpa memeriksa bahwa nilainya sesuai untuk situs Anda): <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Content-<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Policy</span></span> = "default-src 'self'; frame-ancestors 'self'"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Referer-<span class="hljs-keyword"><span class="hljs-keyword">Policy</span></span> = "origin-when-cross-origin"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Strict</span></span>-Transport-<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span> = "max-age=86400"; # Increase <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> working well <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> prod (a year <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a common final <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.X-XSS-Protection = "1; mode=block"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.X-Content-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Options</span></span> = "nosniff"; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.http.Origin) { # Consider checking this against an allowlist <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Origin = req.http.Origin; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Methods = "GET,HEAD,POST,OPTIONS"; } <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span> = fastly_info.state {", fastly;desc="Edge <span class="hljs-type"><span class="hljs-type">time</span></span>";dur="} <span class="hljs-type"><span class="hljs-type">time</span></span>.elapsed.msec; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.<span class="hljs-keyword"><span class="hljs-keyword">Timing</span></span>-Allow-Origin = "*"; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> resp.http.Link = "&lt;/fonts/myfont.otf&gt;; rel=preload; as=font";</code> </pre> <br>  Pada artikel selanjutnya, kita akan melihat beberapa header paling eksotis yang mulai distandarisasi dan diimplementasikan di browser. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413205/">https://habr.com/ru/post/id413205/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413189/index.html">Koleksi css eyeshadows Box-shadows.css</a></li>
<li><a href="../id413193/index.html">Pembelian besi melawan awan: cara menghitung</a></li>
<li><a href="../id413195/index.html">Pemikiran fungsional. Bagian 6</a></li>
<li><a href="../id413199/index.html">Kegagalan futurologis. Gagasan dari film yang tidak terwujud</a></li>
<li><a href="../id413203/index.html">ICO dan Keamanan: Analisis Kontes Intelijen Kompetitif pada Hari Retas Positif</a></li>
<li><a href="../id413207/index.html">PGCon 2018: foto, slide, tayangan</a></li>
<li><a href="../id413211/index.html">Parsing Aplikasi Avito iOS: Tanyakan Saya Apa Pun</a></li>
<li><a href="../id413213/index.html">Apple WWDC 2018: Siaran Teks</a></li>
<li><a href="../id413215/index.html">GitHub sekarang secara resmi dimiliki oleh Microsoft</a></li>
<li><a href="../id413217/index.html">Apakah mobil listrik sangat ramah lingkungan?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>