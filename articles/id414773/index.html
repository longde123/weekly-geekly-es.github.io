<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👨🏼 👐🏻 💞 ActionViews atau bagaimana saya tidak suka boilerplate sejak kecil ‼️ 📪 ♉️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Pada artikel ini saya ingin berbagi pengalaman membuat mekanisme sendiri untuk mengotomatiskan tampilan berbagai jenis Tampilan: ContentVi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ActionViews atau bagaimana saya tidak suka boilerplate sejak kecil</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/414773/"><p>  Halo, Habr!  Pada artikel ini saya ingin berbagi pengalaman membuat mekanisme sendiri untuk mengotomatiskan tampilan berbagai jenis Tampilan: ContentView, LoadingView, NoInternetView, EmptyContentView, ErrorView. </p><br><img src="https://habrastorage.org/webt/ir/qr/we/irqrwe-ha4rx0zfqirxm1vhtlem.jpeg"><a name="habracut"></a><br><hr><br><p>  Sudah jauh.  Jalur coba-coba, penghitungan metode dan opsi, malam tanpa tidur dan pengalaman yang tak ternilai yang ingin saya bagikan dan dengar kritik, yang pasti akan saya perhitungkan. </p><br><p>  Saya akan segera mengatakan bahwa saya akan mempertimbangkan untuk mengerjakan RxJava, karena untuk coroutine saya tidak melakukan mekanisme seperti itu - tangan saya tidak mencapai.  Dan untuk alat serupa lainnya (Loader, AsyncTask, dll.), Tidak masuk akal untuk menggunakan mekanisme saya, karena paling sering RxJava atau coroutine yang digunakan. </p><br><h3 id="actionviews">  Tinjauan tindakan </h3><br><p>  Seorang kolega saya mengatakan bahwa tidak mungkin untuk membakukan perilaku Pandangan, tetapi saya masih mencoba melakukannya.  Dan berhasil. </p><br><p>  Layar aplikasi standar, data yang diambil dari server, setidaknya harus memproses 5 status: </p><br><ul><li>  Tampilan data </li><li>  Memuat </li><li>  Kesalahan - kesalahan apa pun yang tidak dijelaskan di bawah ini </li><li>  Kurangnya internet adalah kesalahan global </li><li>  Layar kosong - permintaan terlewati, tetapi tidak ada data </li><li><del>  Keadaan lain adalah bahwa data dimuat dari cache, tetapi permintaan pembaruan dikembalikan dengan kesalahan, yaitu, menampilkan data yang sudah usang (lebih baik daripada tidak sama sekali) </del>  - Perpustakaan tidak mendukung ini. </li></ul><br><p>  Dengan demikian, untuk setiap keadaan seperti itu harus ada Pandangannya sendiri. </p><br><p>  Saya menyebut View ini - <strong>ActionViews</strong> , karena mereka menanggapi semacam tindakan.  Bahkan, jika Anda bisa menentukan dengan tepat pada titik apa Tampilan Anda harus ditampilkan, dan kapan harus menyembunyikan, maka itu juga bisa menjadi ActionView. </p><br><p> Ada satu (atau mungkin tidak satu) cara standar untuk bekerja dengan Tampilan tersebut. </p><br><p>  Dalam metode yang berisi pekerjaan dengan RxJava, Anda perlu menambahkan argumen masukan untuk semua jenis ActionViews dan menambahkan beberapa logika ke panggilan ini untuk menampilkan dan menyembunyikan ActionViews, seperti yang dilakukan di sini: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LoadingView loadingView, ErrorView errorView, NoInternetView noInternetView, EmptyContentView emptyContentView)</span></span></span><span class="hljs-function"> </span></span>{ mApi.getProjects() .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .doOnSubscribe(disposable -&gt; { loadingView.show(); noInternetView.hide(); emptyContentView.hide(); }) .doFinally(loadingView::hide) .flatMap(projectResponse -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> }) .subscribe( response -&gt; {<span class="hljs-comment"><span class="hljs-comment">/*   */</span></span>}, throwable -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ApiUtils.NETWORK_EXCEPTIONS .contains(throwable.getClass())) noInternetView.show(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> errorView.show(throwable.getMessage()); } ); }</code> </pre> <br><p>  Tetapi metode ini mengandung sejumlah <strong>besar</strong> boilerplate, dan secara default kami tidak menyukainya.  Jadi saya mulai mengurangi kode rutin. </p><br><h3 id="level-up">  Naik level </h3><br><p>  Langkah pertama dalam meningkatkan cara standar untuk bekerja dengan ActionViews adalah mengurangi boilerplate dengan menempatkan logika di kelas utilitas.  Kode di bawah ini tidak ditemukan oleh saya.  Saya seorang penjiplakan dan memata-matai satu rekan yang masuk akal.  Terima kasih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Arutar</a> </p><br><p>  Sekarang kode kita terlihat seperti ini: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LoadingView loadingView, ErrorView errorView, NoInternetView noInternetView, EmptyContentView emptyContentView)</span></span></span><span class="hljs-function"> </span></span>{ mApi.getProjects() .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .compose(RxUtil::loading(loadingView)) .compose(RxUtil::emptyContent(emptyContentView)) .compose(RxUtil::noInternet(errorView, noInternetView)) .subscribe(response -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }, RxUtil::error(errorView)); }</code> </pre> <br><p>  Kode yang kita lihat di atas, meskipun tanpa kode boilerplate, masih tidak menyebabkan kesenangan yang mempesona.  Ini sudah menjadi jauh lebih baik, tetapi masih ada masalah meneruskan tautan ke ActionViews di setiap metode di mana ada pekerjaan dengan Rx.  Dan mungkin ada banyak metode seperti itu dalam sebuah proyek.  Juga menulis ini menulis terus-menerus.  Buueee.  Siapa yang butuh ini?  Hanya pekerja keras, keras kepala, dan tidak malas.  Saya tidak seperti itu.  Saya penggemar kemalasan dan penggemar menulis kode yang indah dan nyaman, jadi keputusan penting dibuat - untuk menyederhanakan kode dengan cara apa pun. </p><br><h3 id="tochka-proryva">  Titik terobosan </h3><br><p>  Setelah banyak penulisan ulang mekanisme, saya sampai pada opsi ini: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ execute(() -&gt; mApi.getProjects(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseSubscriber&lt;&gt;(response -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> })); }</code> </pre> <br><p>  Saya menulis ulang mekanisme saya sekitar 10-15 kali, dan setiap kali itu sangat berbeda dari versi sebelumnya.  Saya tidak akan menunjukkan kepada Anda semua versi, mari kita fokus pada dua versi terakhir.  Yang pertama Anda lihat. </p><br><p>  Setuju, ini terlihat cantik?  Saya bahkan akan mengatakan sangat cantik.  Saya memperjuangkan keputusan seperti itu.  Dan benar-benar semua ActionViews kami akan berfungsi dengan benar pada saat kami membutuhkannya.  Saya dapat mencapai ini dengan menulis sejumlah besar bukan kode yang paling indah.  Kelas yang memungkinkan mekanisme seperti itu mengandung banyak logika yang kompleks, dan saya tidak menyukainya.  Dalam sebuah kata - sayang, yang merupakan monster di bawah tenda. </p><br><img src="https://habrastorage.org/webt/4z/eu/kd/4zeukd8fsc87mpezaq5buigjvvs.jpeg"><br><hr><br><p>  Kode seperti itu di masa depan akan semakin sulit untuk dipertahankan, dan kode itu sendiri mengandung kelemahan dan masalah yang cukup serius: </p><br><ul><li>  Apa yang terjadi jika Anda perlu menampilkan beberapa LoadingViews di layar?  Bagaimana cara memisahkannya?  Bagaimana cara memahami LoadingView yang harus ditampilkan kapan? </li><li>  Pelanggaran konsep Rx - semuanya harus dalam satu aliran (stream).  Ini tidak terjadi di sini. </li><li>  Kompleksitas kustomisasi.  Perilaku dan logika yang dijelaskan sangat sulit diubah untuk pengguna akhir dan, karenanya, sulit untuk menambahkan perilaku baru. </li><li>  Anda harus menggunakan Tampilan khusus agar mekanisme berfungsi.  Ini diperlukan agar mekanisme memahami ActionView mana yang termasuk tipe apa.  Misalnya, jika Anda ingin menggunakan ProgressBar, maka itu harus mengandung implementasi LoadingView. </li><li>  ID untuk ActionView kami harus cocok dengan yang ditentukan dalam kelas dasar untuk menyingkirkan pelat ketel.  Ini sangat tidak nyaman, meskipun Anda bisa menerima ini. </li><li>  Refleksi  Ya, dia ada di sini, dan karena dia, mekanismenya jelas membutuhkan optimasi. </li></ul><br><p>  Tentu saja, saya punya solusi untuk masalah ini, tetapi semua solusi ini memunculkan masalah lain.  Saya mencoba untuk menyingkirkan yang paling kritis sebanyak mungkin, dan sebagai hasilnya, hanya persyaratan yang diperlukan untuk menggunakan perpustakaan tetap. </p><br><h3 id="do-svidaniya-java">  Selamat tinggal Jawa! </h3><br><p>  Setelah beberapa waktu, saya duduk di rumah, <del>  mencoba-coba </del>  Saya bermain-main dan tiba-tiba saya menyadari bahwa saya harus mencoba Kotlin dan memaksimalkan ekstensi, nilai default, lambda dan delegasi. </p><br><p>  Awalnya dia tidak terlihat banyak.  Tetapi sekarang ia kehilangan hampir semua kekurangan, yang pada prinsipnya bisa. </p><br><p>  Ini kode kami sebelumnya, tetapi dalam versi final: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { api.getProjects() .withActionViews(view) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Berkat Extensions, saya bisa melakukan semua pekerjaan dalam satu utas tanpa melanggar konsep dasar pemrograman reaktif.  Saya juga meninggalkan kesempatan untuk menyesuaikan perilaku.  Jika Anda ingin mengubah tindakan di awal atau di akhir acara, Anda bisa meneruskan fungsi ke metode, dan semuanya akan berfungsi: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { api.getProjects() .withActionViews( view, doOnLoadStart = { <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> }, doOnLoadEnd = { <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> }) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Perubahan perilaku juga tersedia untuk ActionViews lainnya.  Jika Anda ingin menggunakan perilaku standar, tetapi Anda tidak memiliki ActionViews default, Anda bisa menentukan Tampilan mana yang harus menggantikan ActionView kami: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(projectLoadingView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadingView</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { mApi.getPosts(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) .withActionViews( view, loadingView = projectLoadingView ) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Saya tunjukkan sangat krim mekanisme ini, tetapi juga memiliki harga sendiri. <br>  Pertama, Anda harus membuat CustomViews agar ini berfungsi: </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SwipeRefreshLayout</span></span></span><span class="hljs-class"> : android.support.v4.widget.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SwipeRefreshLayout</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LoadingView</span></span></span><span class="hljs-class"> { constructor(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Context</span></span></span><span class="hljs-class">) : super(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">) constructor(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Context</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attrs</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AttributeSet</span></span></span><span class="hljs-class">) : super(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attrs</span></span></span><span class="hljs-class">) }</span></span></code> </pre> <br><p>  Bahkan mungkin tidak perlu melakukannya.  Saat ini, saya sedang mengumpulkan umpan balik dan menerima saran untuk meningkatkan mekanisme ini.  Alasan utama kita perlu menggunakan CustomViews adalah untuk mewarisi dari antarmuka yang memberitahukan jenis ActionView yang dimilikinya.  Ini untuk keamanan, karena Anda mungkin secara tidak sengaja melakukan kesalahan saat menentukan jenis tampilan dalam metode withActionsViews. </p><br><p>  Inilah yang tampak seperti metode withActionsViews: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T&gt;</span></span></span><span class="hljs-function"> Observable</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T&gt;</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withActionViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( view: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionsView</span></span></span></span><span class="hljs-function"><span class="hljs-params">, contentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = view.contentActionView, loadingView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadingView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.loadingActionView, noInternetView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">NoInternetView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.noInternetActionView, emptyContentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EmptyContentView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.emptyContentActionView, errorView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ErrorView</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = view.errorActionView, doOnLoadStart: ()</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnLoadSubscribe(contentView, loadingView) }, doOnLoadEnd: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnLoadComplete(contentView, loadingView) }, doOnStartNoInternet: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnNoInternetSubscribe(contentView, noInternetView) }, doOnNoInternet: (Throwable) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnNoInternet(contentView, errorView, noInternetView) }, doOnStartEmptyContent: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnEmptyContentSubscribe(contentView, emptyContentView) }, doOnEmptyContent: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnEmptyContent(contentView, errorView, emptyContentView) }, doOnError: (Throwable) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnError(errorView, it) } ) { <span class="hljs-comment"><span class="hljs-comment">/**/</span></span> }</code> </pre> <br><p>  Itu terlihat menakutkan, tetapi nyaman dan cepat!  Seperti yang Anda lihat, dalam parameter input yang diterimanya loadingView: LoadingView? .. Ini menjamin kami dari kesalahan dengan tipe ActionView. </p><br><p>  Oleh karena itu, agar mekanisme bekerja, Anda perlu mengambil beberapa langkah sederhana: </p><br><ul><li>  Tambahkan ke tata letak kami ActionViews kami, yang merupakan kebiasaan.  Saya sudah membuat beberapa dari mereka, dan Anda bisa menggunakannya. </li><li>  Terapkan antarmuka HasActionsView dan timpa variabel default yang bertanggung jawab untuk ActionViews dalam kode: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentActionView: View <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { recyclerView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loadingActionView: LoadingView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { swipeRefreshLayout } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noInternetActionView: NoInternetView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { noInternetView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyContentActionView: EmptyContentView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { emptyContentView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errorActionView: ErrorView <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { ToastView(baseActivity) }</code> </pre> </li><li><p>  Atau mewarisi dari kelas di mana ActionViews kami sudah ditimpa.  Dalam hal ini, Anda harus menggunakan id yang ditentukan secara ketat di tata letak Anda: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionsFragment</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fragment</span></span></span></span>(), HasActionsView { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentActionView: View <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewById&lt;View&gt;(R.id.contentView) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loadingActionView: LoadingView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.loadingView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> LoadingView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noInternetActionView: NoInternetView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.noInternetView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> NoInternetView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyContentActionView: EmptyContentView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.emptyContentView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> EmptyContentView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errorActionView: ErrorView <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { ToastView(baseActivity) } }</code> </pre> <br></li><li>  Nikmati pekerjaan tanpa pelat baja! </li></ul><br><p>  Jika Anda akan menggunakan Ekstensi Kotlin, maka jangan lupa bahwa Anda dapat mengubah nama impor menjadi nama yang nyaman bagi Anda: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kotlinx</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.synthetic</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.fr_gifts</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.contentView</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">as</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recyclerView</span></span></code> </pre> <br><h3 id="chto-dalshe">  Apa selanjutnya </h3><br><p>  Ketika saya mulai mengerjakan mekanisme ini, saya tidak memikirkan tentang apa perpustakaan itu nantinya.  Tetapi kebetulan saya ingin membagikan kreasi saya, dan sekarang hal termanis menunggu saya - menerbitkan perpustakaan, mengumpulkan masalah, menerima umpan balik, menambah / meningkatkan fungsi dan memperbaiki bug. </p><br><h3 id="poka-ya-pisal-statyu">  Sementara saya sedang menulis artikel ... </h3><br><p>  Saya berhasil mengatur semuanya dalam bentuk perpustakaan: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ActionViews-ViewModel</a> - untuk MVVM </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ActionViews-MVP</a> - untuk MVP </li></ul><br><p>  Perpustakaan dan mekanisme itu sendiri tidak mengklaim harus dimiliki dalam proyek Anda.  Saya hanya ingin membagikan ide saya, mendengarkan kritik, komentar, dan meningkatkan mekanisme saya sehingga menjadi lebih nyaman, digunakan, dan praktis.  Mungkin Anda bisa membuat mekanisme seperti itu lebih baik dari saya.  Saya hanya akan senang.  Saya sangat berharap artikel saya menginspirasi Anda untuk membuat sesuatu milik Anda sendiri, mungkin bahkan serupa dan lebih ringkas. </p><br><p>  Jika Anda memiliki saran dan rekomendasi untuk meningkatkan fungsi dan pengoperasian mekanisme itu sendiri, saya akan senang mendengarkannya.  Selamat datang di komentar dan, untuk jaga-jaga, Telegram saya: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@tanchuev</a> </p><br><p>  <strong>PS</strong> Saya sangat senang bahwa saya menciptakan sesuatu yang berguna dengan tangan saya sendiri.  Mungkin ActionViews tidak akan diminati, tetapi pengalaman dan buzz dari ini tidak akan kemana-mana. </p><br><p>  <strong>PPS</strong> Agar ActionViews berubah menjadi perpustakaan bekas yang lengkap, Anda perlu mengumpulkan umpan balik dan, mungkin, memperbaiki fungsionalitas atau secara fundamental mengubah pendekatan itu sendiri jika semuanya berjalan sangat buruk. </p><br><p>  <strong>PPPS</strong> Jika Anda tertarik dengan pekerjaan saya, maka kita dapat membahasnya secara pribadi pada 28 September di Moskow pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konferensi</a> Pengembang Seluler Internasional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MBLT DEV 2018</a> .  Ngomong-ngomong, tiket early bird sudah habis! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414773/">https://habr.com/ru/post/id414773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id414761/index.html">5 situs berita kreatif dalam bahasa Inggris</a></li>
<li><a href="../id414763/index.html">Empat jenis kesalahan manajer produk yang dapat (dan harus) dihindari</a></li>
<li><a href="../id414767/index.html">Terapkan IdM. Siapa yang harus saya datangi untuk menyelesaikan masalah?</a></li>
<li><a href="../id414769/index.html">Luncurkan penargetan ulang seluler dengan Appsflyer: pengaturan, laporan, dan tautan</a></li>
<li><a href="../id414771/index.html">DevOps di HightLoad ++ Siberia: menghilangkan prasangka mitos dan mendiskusikan alat</a></li>
<li><a href="../id414775/index.html">Anatomi Platform Hosting RUVDS Huawei FusionServer</a></li>
<li><a href="../id414777/index.html">Masuk ke puncak daftar putar Spotify membawa puluhan penulis lagu dan ratusan ribu dolar AS</a></li>
<li><a href="../id414779/index.html">Ulasan Vertex Impress Nero: logam + layar 18: 9 + baterai 3300 mAh untuk 6.990 rubel</a></li>
<li><a href="../id414785/index.html">Visualisasi data dengan Angular dan D3</a></li>
<li><a href="../id414787/index.html">RAT Android baru menggunakan protokol Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>