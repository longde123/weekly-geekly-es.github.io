<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥗 👦 🧑🏽‍🤝‍🧑🏽 Exemple d'archivage Linux et méthodes d'installation 📘 😒 🔁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous allons maintenant parler de l'installation dans différentes versions d'une distribution Linux aussi connue - Arch Linux. Au moment de la rédactio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exemple d'archivage Linux et méthodes d'installation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426953/"> Nous allons maintenant parler de l'installation dans différentes versions d'une distribution Linux aussi connue - Arch Linux.  Au moment de la rédaction de cet article, il est en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">distrowatch, une</a> 12e place honorable en termes de nombre de requêtes de recherche sur 6 mois, avec une note honorifique moyenne de la distribution elle-même de 9,3 / 10.  Beaucoup le considèrent comme un vrai Linux, pour de vrais programmeurs, mais il est célèbre d'abord non pas pour cela, mais pour son processus d'installation non trivial.  Lors du lancement d'un support de démarrage, l'utilisateur ne voit en aucun cas l'interface familière de style «cliquez ici pour installer X», mais une grande fenêtre noire sur le monde Linux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/hh/wb/ixhhwbzjhbdki6xv7b0qptpt-0q.png"></div><a name="habracut"></a><br><blockquote>  L'espoir d'une interface graphique pour configurer / utiliser votre système n'apportera finalement à l'utilisateur que des problèmes.  À un moment donné, l'utilisateur sentira qu'il a besoin de savoir ce que cache l'interface graphique ... <br></blockquote><h1>  Premier acte: installation sur une machine virtuelle </h1><br>  C'est probablement le moyen le plus sûr de vous essayer à l'installation de ce système, ou du moins un bon moyen de " <i>répéter</i> " l'installation <s>côte à côte</s> au lieu de Windows, un autre Linux ou MacOS.  J'utiliserai personnellement la licence VMware Workstation Pro 14 ... <br><br><img src="https://habrastorage.org/webt/om/jk/hf/omjkhfczx875d634y02gvi1d1pg.jpeg"><br><br>  Mais en général, tout autre programme pour travailler avec des machines virtuelles fera l'affaire. <br><br>  Pour commencer, nous avons besoin d'une nouvelle <i>image iso</i> téléchargée depuis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archlinux.org</a> <br>  Avez-vous téléchargé?  Cool! <br><br>  Créez une nouvelle machine virtuelle avec elle.  Nous abandonnons la mémoire, peu importe combien c'est dommage, nous lançons et <s>ouvrons le guide sur Internet et</s> continuons <s>la</s> lecture. <br><br>  Pour installer le système, nous avons besoin d'une connexion Internet, qui devrait être standard avec les paramètres par défaut de la nouvelle machine virtuelle.  Vérification avec <br> <code>ping google.com</code> <br> <br>  Ensuite, nous devons partitionner le disque.  Pour cela, dans l'image que nous avons lancée, il existe plusieurs utilitaires, par exemple <i>cfdisk, fdisk, gdisk, cgdisk, partitionmanager, parted, gparted</i> ... La liste est <i>longue</i> .  J'aime utiliser l'utilitaire cfdisk, comme  il vous permet de marquer à la fois MBR et GPT. <br><br>  Quelle table de partition choisir est l'affaire de tous, je dirai simplement que GPT sera plus récent que MBR.  En savoir plus sur le choix entre GPT et MBR <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Nous démarrons <u>cfdisk</u> , qui devrait nous interroger sur la table de partition.  Choisissez GPT (ou dos).  Nous créons une partition de 100 Mo.  Ensuite, vous pouvez être confus et créer des partitions séparées pour <i>différents points de montage</i> : sous / home, / boot, / var ... Mais sur une machine virtuelle, je pense que cela est inutile - nous voyons une seule partition pour tout l'espace restant en tant que root. <br><br><img src="https://habrastorage.org/webt/ev/hm/xj/evhmxjj31btpficzzkx0ibqi4us.png"><br><br>  N'oubliez pas d'écrire les modifications sur le disque en sélectionnant écrire. <br><br>  Ensuite, vous devez créer des systèmes de fichiers avec l'utilitaire mkfs.  Section EFI que je propose de formater en FAT32: <br><br> <code>mkfs.vfat -F 32 /dev/sdaX</code> <br> <br>  Où X est le numéro de partition (par exemple, j'ai sda1) <br><br>  Les autres sections sont généralement formatées en ext4 ou ext3: <br><br> <code>mkfs.ext4 /dev/sda2</code> <br> <br>  <i>Montez</i> ensuite <i>la</i> partition racine dans / mnt d'abord, puis tout le reste dans les <i>répertoires créés correspondants</i> dans / mnt <br><br><pre> <code class="hljs objectivec">mount /dev/sda2 /mnt mkdir /mnt/boot mount /dev/sda1 /mnt/boot <span class="hljs-comment"><span class="hljs-comment">//       </span></span></code> </pre><br>  Avant d'installer directement, j'aime configurer les miroirs à l'aide de l'utilitaire <u>réflecteur</u> : <br><br><pre> <code class="hljs powershell">pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> reflector reflector —verbose <span class="hljs-literal"><span class="hljs-literal">-l</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> —sort rate —save /etc/pacman.d/mirrorlist</code> </pre><br>  <u>Reflector va</u> trier tous les miroirs par ping et écrire les <i>200 premiers d'entre eux</i> dans la liste des miroirs. <br>  Maintenant, mettez le <i>système</i> lui-même: <br> <code>pacstrap -i /mnt base base-devel</code> <br> <br>  Une fois la commande terminée, nous devons indiquer clairement au système quelles partitions doivent être <i>montées</i> au démarrage - pour cela, nous écrivons: <br> <code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code> <br> <br>  Et maintenant, nous fléchissons nos doigts, maintenant nous devons taper un peu plus sur le clavier ... <br><br><img src="https://habrastorage.org/webt/yw/qa/me/ywqamevyr6ypdsqabr7-crxud9e.jpeg"><br><br>  Faisons une petite configuration initiale du système.  Pour ce faire, accédez à son répertoire racine: <br> <code>arch-chroot /mnt</code> <br> <br>  Réglez l'heure: <br><br><pre> <code class="hljs pgsql">ln -sf /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/zoneinfo/%%/%% /etc/<span class="hljs-built_in"><span class="hljs-built_in">localtime</span></span> hwclock <span class="hljs-comment"><span class="hljs-comment">--systohc</span></span></code> </pre> <br>  Ensuite, dans le fichier /etc/locale.gen, nous trouvons notre <i>langue maternelle</i> et la décommentons, puis nous écrivons, en fait <code>locale-gen</code> . <br><br>  Ensuite, spécifiez le nom de l'ordinateur dans le fichier / etc / hosts.  Exemple de fichier de sortie: <br><br><pre> <code class="hljs css">127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">localhost</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">localhost</span></span> 127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> %%<span class="hljs-selector-class"><span class="hljs-selector-class">.localdomain</span></span> %%</code> </pre> <br>  Ajouter un gramme d'utilisateur <br><br><pre> <code class="hljs powershell">useradd <span class="hljs-literal"><span class="hljs-literal">-m</span></span> <span class="hljs-literal"><span class="hljs-literal">-g</span></span> users <span class="hljs-literal"><span class="hljs-literal">-G</span></span> wheel <span class="hljs-literal"><span class="hljs-literal">-s</span></span> /bin/bash %userName%</code> </pre> <br>  Une pincée de mots de passe: <br><br><pre> <code class="hljs objectivec">passwd <span class="hljs-comment"><span class="hljs-comment">//    root passwd %userName% //      </span></span></code> </pre> <br>  Et enfin, pour démarrer le système, mettez le chargeur de démarrage.  Plus d'informations sur celles qui peuvent être installées peuvent être lues <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Lequel à installer dépend de vous, bien sûr, et ici et maintenant nous installerons le ver le plus ordinaire: <br><br><pre> <code class="hljs powershell">pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> grub grub<span class="hljs-literal"><span class="hljs-literal">-install</span></span> -<span class="hljs-literal"><span class="hljs-literal">-target</span></span>=x86_64<span class="hljs-literal"><span class="hljs-literal">-efi</span></span> -<span class="hljs-literal"><span class="hljs-literal">-efi</span></span><span class="hljs-literal"><span class="hljs-literal">-directory</span></span>=/boot/EFI -<span class="hljs-literal"><span class="hljs-literal">-bootloader</span></span><span class="hljs-literal"><span class="hljs-literal">-id</span></span>=grub grub<span class="hljs-literal"><span class="hljs-literal">-mkconfig</span></span> <span class="hljs-literal"><span class="hljs-literal">-o</span></span> /boot/grub/grub.cfg</code> </pre> <br>  En général, il est prêt, vous pouvez quitter chroot, démonter les disques et redémarrer la machine.  Ensuite, vous pouvez déjà y mettre un <s>environnement graphique</s> .  En savoir plus à ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Eh bien, vous pouvez, en principe, profiter ... <br><br><img src="https://habrastorage.org/webt/sw/hg/sa/swhgsa15obeqs2l69df_vb6h-e0.png"><br><br><h2>  Deuxième acte: installation sur un support externe </h2><br><img src="https://habrastorage.org/webt/yl/a6/sw/yla6swevqpqyvo9btkssnwnhzxu.png"><br><br>  Résolvons le problème: nous avons un disque dur bouché avec <b>Windows 10 / Mac Os Mojave</b> , sur lequel il y a une image Arch Linux téléchargée et aussi un ssd ou hdd externe complètement vide. <br><br>  <b>Tâche:</b> <i>installer le système sur un disque externe sans quitter Windows / MacOS</i> <br><br>  Réfléchissez juste pendant quelques minutes, puis voyez l'élégant <i>hack de la vie</i> . <br><br><div class="spoiler">  <b class="spoiler_title">Voir la solution ...</b> <div class="spoiler_text">  Et la solution est assez simple: nous utilisons la même machine virtuelle pour cela <br>  Pour ce faire, nous le créons simplement sans disque dur virtuel, puis nous lui connectons un support externe (ci-après dénommé lecteur flash) et répétons les étapes décrites ci-dessus. <br><img src="https://habrastorage.org/webt/mi/zr/n4/mizrn4dlyv_oydscheqjwqhp9lg.jpeg"><br>  Remarque: lors du démarrage à partir du lecteur flash résultant, divers types de problèmes de réseau peuvent survenir, dans la plupart des cas en raison de conflits entre les services responsables de la connexion et de l'implémentation des noms de domaine.  Il est décidé en choisissant le service à utiliser, puis en déconnectant tout le monde via systemctl.  Il est également important de mentionner l'utilitaire de <i>menu wifi</i> standard <br></div></div><br>  Qu'est-ce que cela peut être utile plus tard?  Et je dirai - les situations sont différentes.  Une fois votre machine en panne, vous vivez une semaine ou deux sans elle, car  il est en réparation et vous devez travailler sur n'importe quoi.  Ou vous avez acheté / assemblé un nouvel ordinateur sur lequel il n'y a même pas de ms-dos jusqu'à présent - vous aurez au moins la possibilité de créer un lecteur / disque flash USB amorçable ou de continuer à travailler à partir d'un support externe.  La portabilité, pour ainsi dire.  En même temps, je pense qu’il vaut mieux installer au moins manjaro sur un disque externe. <br><br><h2>  Acte 3: installation à côté d'un autre système d'exploitation </h2><br>  Après avoir beaucoup appris à installer archa sur des machines virtuelles, vous pouvez essayer de l'installer sur un vrai disque.  La seule différence est que s'il y avait d'autres systèmes d'exploitation sur le disque auparavant, vous n'auriez pas à les traverser en supprimant les partitions ... Vous pouvez également apporter quelques "améliorations" à l'installation: par exemple, allouer de l'espace pour la partition de swap <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mkswap</span></span> /dev/sdxy swapon /dev/sdxy</code> </pre> <br>  Il ne reste qu'un paramètre utilisateur, que je ne décrirai pas ici, car il s'agit d'un processus créatif et individuel. <br><br><h2>  Épilogue: pourquoi tout cela est nécessaire </h2><br>  Personnellement, je suis porté à croire qu'Arch Linux est la <u>meilleure</u> distribution.  Oui, il peut parfois se casser lors de la mise à jour (de nombreuses versions glissantes en sont un péché), mais en 2018, cela se produit aussi rarement que possible.  Arch est la distribution la plus légère «du marché», seul Gentoo peut défier ce titre.  Contrairement à ce dernier, au fait, nous n'avons pas à forcer notre machine à compiler des packages.  Les dépôts d'archives sont énormes, ils ont presque tout.  Et si ce n'est pas le cas, presque n'importe quel paquet deb peut être configuré spécifiquement pour PKGBUILD.  Si quelque chose se brise encore, il y a très probablement déjà un article sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archwiki</a> à ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sujet</a> , qui vous permet de le corriger facilement si vous avez la possibilité de le lire.  Arch peut être personnalisé.  Comme vous le souhaitez. <br>  Il a également un beau logo. <br><br>  Sur ce point, je considère le sujet épuisé, sur lequel je complète ce récit fascinant.  Bonheur à ceux qui ont lu jusqu'ici. <br><br>  UPD: <br>  Apparemment, j'ai eu un peu de mal avec les drapeaux lors de l'installation de grub, et j'ai également oublié de mentionner os-prober - un utilitaire nécessaire pour détecter d'autres systèmes d'exploitation. <br>  Corrigé: <br><pre> <code class="hljs powershell">pacman <span class="hljs-literal"><span class="hljs-literal">-Syu</span></span> grub os<span class="hljs-literal"><span class="hljs-literal">-prober</span></span> grub<span class="hljs-literal"><span class="hljs-literal">-mkconfig</span></span> &gt; /boot/grub/grub.cfg grub<span class="hljs-literal"><span class="hljs-literal">-install</span></span> -<span class="hljs-literal"><span class="hljs-literal">-target</span></span>=i386<span class="hljs-literal"><span class="hljs-literal">-pc</span></span> /dev/sdX</code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426953/">https://habr.com/ru/post/fr426953/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426943/index.html">La traduction russe la plus complète du cours de programmation Harvard CS50 2015 2015, gratuite sur YouTube</a></li>
<li><a href="../fr426945/index.html">Ce que j'ai aimé chez Paul Allen</a></li>
<li><a href="../fr426947/index.html">"Le diable m'a poussé à aller travailler au bureau" - 10 questions au programmeur, 9ème édition</a></li>
<li><a href="../fr426949/index.html">Recréation du son THX Deep Note</a></li>
<li><a href="../fr426951/index.html">Altium Designer: que faire si un projet se complique?</a></li>
<li><a href="../fr426957/index.html">Introduction aux serveurs WSGI: première partie</a></li>
<li><a href="../fr426959/index.html">Installer kubernetes via kubespray (stockage local, installer Elasticsearch + Fluentd + Kibana, prometheus)</a></li>
<li><a href="../fr426961/index.html">Comment Microsoft a réécrit le compilateur C # en C # et l'a ouvert</a></li>
<li><a href="../fr426963/index.html">Les applications Flutter rêvent-elles de widgets basés sur une plateforme?</a></li>
<li><a href="../fr426965/index.html">Qu'adviendra-t-il de la gestion des erreurs en C ++ 2a</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>