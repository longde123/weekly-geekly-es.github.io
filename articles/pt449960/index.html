<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçø üÜî üå¥ Fontes de inspira√ß√£o ao desenvolver para o UDB üëÜüèæ ‚ôüÔ∏è üíÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bem, j√° sabemos tudo o que voc√™ precisa para programar o UDB. Mas uma coisa √© saber e outra √© poder. Portanto, hoje discutiremos onde e como obter ins...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fontes de inspira√ß√£o ao desenvolver para o UDB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449960/">  Bem, j√° sabemos tudo o que voc√™ precisa para programar o UDB.  Mas uma coisa √© saber e outra √© poder.  Portanto, hoje discutiremos onde e como obter inspira√ß√£o para melhorar nossas pr√≥prias habilidades, onde ganhar experi√™ncia.  Como pode ser visto na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o da documenta√ß√£o</a> , h√° um conhecimento seco que nem sempre est√° vinculado √† pr√°tica real (chamei a aten√ß√£o para isso em uma nota bastante longa, at√© a √∫ltima tradu√ß√£o at√© o momento).  Na verdade, as estat√≠sticas das visualiza√ß√µes de artigos mostram que cada vez menos pessoas leem tradu√ß√µes.  Havia at√© uma proposta de interromper esse ciclo, por desinteressante, mas apenas duas partes permaneciam; portanto, no final, foi simplesmente decidido reduzir o ritmo de sua prepara√ß√£o.  Em geral, a documenta√ß√£o para o controlador √© uma coisa necess√°ria, mas n√£o auto-suficiente.  Onde mais para obter inspira√ß√£o? <br><br><img src="https://habrastorage.org/webt/9n/wy/nb/9nwynby6myz8p5ecl1k5f8l8gwq.jpeg"><br><br>  Antes de tudo, posso recomendar o excelente documento <b>AN82156 Designing PSoC Creator Components com Datapaths UDB</b> .  Nele voc√™ encontrar√° solu√ß√µes t√≠picas, al√©m de v√°rios projetos padr√£o.  Al√©m disso, no in√≠cio do documento, o desenvolvimento √© realizado usando o UDB Editor e, no final, usando a Datapath Config Tool, ou seja, o documento abrange todos os aspectos do desenvolvimento.  Infelizmente, por√©m, considerando o pre√ßo de um √∫nico chip PSoC, eu diria que, se ele puder resolver os problemas descritos neste documento, o controlador ser√° superestimado.  PWMs e portas seriais padr√£o podem ser feitas sem PSoC.  Felizmente, a gama de tarefas PSoC √© muito maior.  Portanto, depois de terminar de ler AN82156, come√ßamos a procurar outras fontes de inspira√ß√£o. <br><a name="habracut"></a><br>  A pr√≥xima fonte √∫til s√£o os exemplos que acompanham o PSoC Creator.  Eu j√° os referi em uma nota a uma das partes da tradu√ß√£o da documenta√ß√£o da empresa (voc√™ pode ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ).  Eles s√£o armazenados aproximadamente aqui (o disco pode ser diferente): <br><br>  E: \ Arquivos de programas (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ psoc \ content \ CyComponentLibrary. <br><br>  Voc√™ deve procurar arquivos * .v, ou seja, textos verilog ou * .vhd, pois a sintaxe da linguagem VHDL exige um pouco mais a ser descrita e, nessa linguagem, √†s vezes voc√™ pode encontrar nuances interessantes escondidas dos olhos do programador da Verilog.  O problema √© que esses n√£o s√£o exemplos, mas solu√ß√µes prontas.  Isso √© maravilhoso, eles s√£o perfeitamente depurados, mas n√≥s, programadores simples, temos objetivos diferentes com os programadores Cypress.  Nossa tarefa √© fazer algo auxiliar em um curto espa√ßo de tempo, ap√≥s o que come√ßamos a us√°-lo em nossos projetos, que ser√£o gastos a maior parte do tempo.  Idealmente, deve resolver as tarefas que nos foram atribu√≠das hoje e, se amanh√£ quisermos inserir o mesmo c√≥digo em outro projeto, onde tudo ser√° um pouco diferente, amanh√£ terminaremos nessa situa√ß√£o.  Para os desenvolvedores do Cypress, o componente √© o produto final, para que possam passar a maior parte do tempo nele.  E eles devem prover tudo-tudo-tudo.  Ent√£o, quando assisti esses textos, fiquei triste.  Eles s√£o muito complexos para algu√©m que acaba de come√ßar a procurar onde se inspirar para seus primeiros desenvolvimentos.  Mas, como refer√™ncias, esses textos s√£o bastante adequados.  Existem muitos designs valiosos que s√£o necess√°rios ao criar suas pr√≥prias coisas. <br><br>  Tamb√©m h√° cantos muito interessantes.  Por exemplo, existem agora, no estilo do "√≥leo de manteiga", modelos para modelagem (h√° muito tempo, um professor severo me desencorajou de traduzir a simula√ß√£o de qualquer outra maneira que n√£o seja "modelagem").  Eles podem ser encontrados no cat√°logo. <br>  E: \ Arquivos de programas (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ warp \ lib \ sim. <br><br>  O diret√≥rio mais interessante para o programador no Verilogue √©: <br><br>  E: \ Arquivos de programas (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ warp \ lib \ sim \ presynth \ vlg. <br><br>  A descri√ß√£o dos componentes na documenta√ß√£o √© boa.  Mas modelos comportamentais para todos os componentes padr√£o s√£o descritos aqui.  √Äs vezes, isso √© melhor do que a documenta√ß√£o (escrita em um idioma pesado, al√©m de alguns detalhes essenciais serem omitidos).  Quando o comportamento deste ou daquele componente n√£o √© claro, vale a pena iniciar tentativas de entend√™-lo com precis√£o, visualizando arquivos deste diret√≥rio.  No come√ßo, tentei pesquisar no Google, mas muitas vezes encontrava nos f√≥runs encontrados apenas argumentos e detalhes espec√≠ficos.  Aqui est√£o precisamente os detalhes. <br><br>  No entanto, o livro de refer√™ncia √© maravilhoso, mas onde procurar um livro did√°tico, o que aprender?  Honestamente, n√£o h√° nada de especial.  N√£o h√° muitos bons exemplos prontos para o UDB Editor.  Eu tive muita sorte de que, quando de repente decidi jogar LEDs RGB, me deparei com um belo exemplo no UDB Editor (escrevi sobre isso em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> que iniciou todo o ciclo).  Mas se voc√™ trabalha muito com um mecanismo de pesquisa, ainda haver√° exemplos para a Ferramenta de configura√ß√£o do Datapath, e foi por isso que criei o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior</a> para que todos entendessem como usar essa ferramenta.  E uma p√°gina maravilhosa na qual muitos exemplos s√£o coletados est√° localizada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Nesta p√°gina, desenvolvimentos feitos por desenvolvedores de terceiros, mas verificados pelo Cypress.  Ou seja, exatamente o que precisamos: tamb√©m somos desenvolvedores de terceiros, mas queremos aprender com algo que √© precisamente verificado.  Vejamos um exemplo em que encontrei esta p√°gina - uma calculadora de hardware com raiz quadrada.  Os usu√°rios finais o incluem no caminho de processamento do sinal, jogando um componente no circuito.  Neste exemplo, treinaremos para analisar um c√≥digo semelhante e todos poder√£o come√ßar a nadar independentemente.  Portanto, o exemplo necess√°rio pode ser baixado do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> . <br><br>  N√≥s examinamos isso.  Existem exemplos (que todos considerar√£o independentemente) e bibliotecas localizadas no diret√≥rio \ CJCU_SquareRoot \ Library \ CJCU_SquareRoot.cylib. <br><br>  Para cada tipo (n√∫mero inteiro ou ponto fixo) e para cada bit, h√° uma solu√ß√£o.  Isso deve ser observado.  A versatilidade √© boa ao desenvolver no UDB Editor, mas ao desenvolver usando a Datapath Edit Tool, como voc√™ pode ver, as pessoas s√£o atormentadas assim.  N√£o se assuste se voc√™ n√£o puder fazer isso universalmente (mas se funcionar melhor). <br><br>  No n√≠vel superior (circuito), n√£o vou parar, estamos estudando n√£o trabalhando com PSoC, mas trabalhando com UDB.  Vejamos uma op√ß√£o de m√©dia complexidade - 16 bits, mas inteiro.  Est√° localizado no diret√≥rio CJCU_B_Isqrt16_v1_0. <br><br>  A primeira coisa a fazer √© expandir o gr√°fico de transi√ß√£o do firmware.  Sem ele, nem adivinharemos que tipo de algoritmo de raiz quadrada foi aplicado, j√° que o Google oferece uma escolha de v√°rios algoritmos fundamentalmente diferentes. <br><br><img src="https://habrastorage.org/webt/ms/xz/la/msxzlahct34myy-jo6ynzdbyph0.png"><br><br>  At√© agora, nada est√° claro, mas √© previs√≠vel.  Precisa adicionar mais informa√ß√µes.  N√≥s olhamos para a codifica√ß√£o de estado.  √â impressionante que eles n√£o estejam codificados no c√≥digo bin√°rio incremental usual. <br><br><img src="https://habrastorage.org/webt/le/ef/ni/leefnikfyhpm0bskxxmyhigc_rk.png"><br><br>  J√° mencionei essa abordagem em meus artigos, mas nunca consegui us√°-la em exemplos espec√≠ficos.  Deixe-me lembr√°-lo de que a configura√ß√£o din√¢mica da RAM ALU possui apenas tr√™s entradas de endere√ßo.  Ou seja, a ALU pode executar uma das oito opera√ß√µes.  Se o aut√¥mato tiver mais estados, a regra "cada estado tem sua pr√≥pria opera√ß√£o" se torna imposs√≠vel.  Portanto, s√£o selecionados estados nos quais as opera√ß√µes da ALU s√£o id√™nticas, elas t√™m tr√™s bits fornecidos ao endere√ßo RAM da configura√ß√£o din√¢mica (geralmente de ordem baixa), s√£o codificadas da mesma maneira e as demais de maneiras diferentes.  Como adicionar esse paci√™ncia j√° √© um problema do desenvolvedor.  Os desenvolvedores do c√≥digo estudado dobraram exatamente como mostrado acima. <br><br>  Adicione essas informa√ß√µes ao gr√°fico, al√©m de colorir os estados que executam a mesma fun√ß√£o na ALU em cores semelhantes. <br><br><img src="https://habrastorage.org/webt/bs/ur/an/bsuran7bbednztvwwhqllpvsxkq.png"><br><br>  Nenhum padr√£o foi manifestado ainda, mas continuamos a abrir o gr√°fico.  Abrimos a Ferramenta de Edi√ß√£o do Datapath e j√° estudamos a l√≥gica nela. <br><br>  Observe que temos dois blocos do Datapath conectados em uma cadeia.  Quando fazemos algo pr√≥prio, tamb√©m podemos precisar disso (a Ferramenta de edi√ß√£o do Datapath pode criar blocos j√° vinculados em uma cadeia, portanto, isso n√£o √© assustador): <br><br><img src="https://habrastorage.org/webt/ww/zy/kp/wwzykp0zjtuvioq7edfl3wgy28w.png"><br><br>  Ao ler (e preencher) o gr√°fico correspondente √† ALU, sempre abrimos um documento com a seguinte figura: <br><br><img src="https://habrastorage.org/webt/kr/nm/5p/krnm5p5sov_is3aijsvjepxgyz4.png"><br><br>  √â verdade que os desenvolvedores deste exemplo cuidaram de n√≥s e preencheram os campos de coment√°rios.  Agora podemos us√°-los para entender o que est√° configurado.  Ao mesmo tempo, observamos por n√≥s mesmos que escrever coment√°rios √© sempre √∫til tanto para quem acompanhar√° o c√≥digo quanto para n√≥s, quando em seis meses esqueceremos tudo sobre ele. <br><br>  Observamos o c√≥digo X000 correspondente aos estados 0 e 12: <br><br><img src="https://habrastorage.org/webt/-f/r3/5_/-fr35_p9nmenndof7gn_k1-iv2a.png"><br><br>  A partir do coment√°rio, j√° est√° claro o que est√° acontecendo l√° (o conte√∫do do registro D0 √© copiado para o registro A0 e o conte√∫do do D1 √© copiado para o registro A1. Sabendo disso, treinamos nossa intui√ß√£o para o futuro e encontramos uma entrada semelhante nos campos de configura√ß√µes: <br><br><img src="https://habrastorage.org/webt/6t/nw/jf/6tnwjfjm-ngl_oavbq6gpw29zwy.png"><br><br>  L√° vemos que a ULA opera no modo <b>PASS</b> , o registro de turnos tamb√©m √© <b>PASS</b> , para que nenhuma outra a√ß√£o seja realmente executada. <br><br>  Ao longo do caminho, examinamos o texto em Verilog e vemos onde o valor dos registros D0 e D1 √© igual: <br><br><img src="https://habrastorage.org/webt/gv/md/9i/gvmd9i8bc7xc738wf8ozl0fypag.png"><br><br>  Se desejado, o mesmo pode ser visto na Ferramenta de configura√ß√£o do Datapath, escolhendo Exibir-&gt; Valores iniciais do registro: <br><br><img src="https://habrastorage.org/webt/hf/2r/i4/hf2ri4nlc3s_npqmpgn0z_l0sbe.png"><br><br><img src="https://habrastorage.org/webt/dl/aw/xi/dlawxi9bjazna2eofwjtslnbriq.png"><br><br>  Para visualiza√ß√£o, √© mais conveniente analisar diretamente o c√≥digo Verilog, criar sua pr√≥pria vers√£o - trabalhar no editor para n√£o manter a sintaxe em mente. <br><br>  Da mesma forma, analisamos (primeiro, espiando nos coment√°rios) todas as outras fun√ß√µes da ALU: <br><br><img src="https://habrastorage.org/webt/d6/_5/wz/d6_5wzhqokkcgmeiaxskrmeklfc.png"><br><br>  Refazemos o gr√°fico de transi√ß√£o do aut√¥mato levando em considera√ß√£o novos conhecimentos: <br><br><img src="https://habrastorage.org/webt/a9/oc/6b/a9oc6b90oehe5lrmrmb1rhpzcv8.png"><br><br>  Algo j√° est√° aparecendo, mas at√© agora n√£o posso confiar com confian√ßa em nenhum dos algoritmos encontrados pelo Google neste gr√°fico.  Em vez disso, sobre alguns, voc√™ pode dizer com seguran√ßa que n√£o s√£o eles, mas mesmo para os cr√≠veis, ainda n√£o posso dar uma resposta confiante de que s√£o eles.  Confunde o uso ativo dos registradores FIFO F0 e F1.  Geralmente no arquivo <br><br>  \ CJCU_SquareRoot \ Library \ CJCU_SquareRoot.cylib \ CJCU_Isqrt_v1_0 \ API \ CJCU_Isqrt.c <br><br>  pode-se ver que F1 √© usado para passar o argumento e retornar o resultado: <br><br><img src="https://habrastorage.org/webt/p3/1_/qj/p31_qjeah1fw3va8adkfc3t7zqk.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mesmo texto:</b> <div class="spoiler_text"><pre><code class="plaintext hljs">void `$INSTANCE_NAME`_ComputeIsqrtAsync(uint`$regWidth` square) { /* Set up FIFOs, start the computation. */ CY_SET_REG`$dpWidth`(`$INSTANCE_NAME`_F1, square); CY_SET_REG8(`$INSTANCE_NAME`_CTL, 0x01); } ‚Ä¶ uint`$resultWidth` `$INSTANCE_NAME`_ReadIsqrtAsync() { /* Read back result. */ return CY_GET_REG`$dpWidth`(`$INSTANCE_NAME`_F1); }</code> </pre> <br></div></div><br>  Mas um argumento e um resultado.  E por que existem tantas chamadas para o FIFO no decorrer do trabalho?  E o que o FIFO0 tem a ver com isso?  Corte-me em peda√ßos, mas parece que os autores aproveitaram o modo encontrado nas tradu√ß√µes da documenta√ß√£o. Quando, em vez de um FIFO de pleno direito, esse bloco agia como um √∫nico registro.  Suponha que os autores decidam expandir o conjunto de registros.  Nesse caso, a metodologia deles ser√° √∫til para n√≥s em nosso trabalho pr√°tico, vamos estudar os detalhes.  De fato, a documenta√ß√£o fala sobre diferentes abordagens para trabalhar com o FIFO.  Voc√™ pode - ent√£o, voc√™ pode - ent√£o, mas voc√™ pode - mais ou menos.  E sem detalhes.  Novamente, temos a chance de aprender sobre as melhores pr√°ticas internacionais.  O que os autores fazem com o FIFO? <br><br>  Primeiro, estas s√£o as atribui√ß√µes de sinal: <br><br><pre> <code class="plaintext hljs"> wire f0_load = (state == B_SQRT_STATE_1 || state == B_SQRT_STATE_4); wire f1_load = (state == B_SQRT_STATE_1 || state == B_SQRT_STATE_3 || state == B_SQRT_STATE_9 || state == B_SQRT_STATE_11); wire fifo_dyn = (state == B_SQRT_STATE_0 || state == B_SQRT_STATE_12);</code> </pre><br>  Em segundo lugar, aqui est√° uma conex√£o com o Datapath: <br><br><pre> <code class="plaintext hljs"> /* input */ .f0_load(f0_load), /* input */ .f1_load(f1_load), /* input */ .d0_load(1'b0), /* input */ .d1_load(fifo_dyn),</code> </pre><br>  Pela descri√ß√£o do controlador, n√£o est√° particularmente claro o que tudo isso significa.  Mas, no Application Note, descobri que essa configura√ß√£o √© respons√°vel por tudo: <br><br><img src="https://habrastorage.org/webt/uo/gz/re/uogzrechxp9befe1esnivuooth8.png"><br><br>  A prop√≥sito, precisamente por causa dessa configura√ß√£o, esse bloco n√£o pode ser descrito usando o Editor UDB.  Quando esses bits de controle est√£o no estado <b>ON</b> , o FIFO pode trabalhar em diferentes fontes e receptores.  Se <b>Dx_LOAD</b> √© igual a um, ent√£o <b>Fx</b> troca com o barramento do sistema, se zero, com o registro selecionado aqui: <br><br><img src="https://habrastorage.org/webt/jj/dx/aq/jjdxaqvh9gr1jdfpbv_axilhfac.png"><br><br>  Acontece que F0 sempre troca com os registradores A0 e F1 nos estados 12 e 0 - com o barramento do sistema (para carregar o resultado e carregar o argumento), nos outros estados - com A1. <br>  Al√©m disso, a partir do c√≥digo Verilog, descobrimos que em F0 os dados ser√£o carregados nos estados 1 e 4 e em F1 - nos estados 1, 3, 9, 11. <br><br>  Adicione o conhecimento adquirido ao gr√°fico.  Para evitar confus√£o durante a sequ√™ncia de opera√ß√µes, tamb√©m era hora de substituir a marca de atribui√ß√£o ‚Äúa la UDB Editor‚Äù pelas setas Verilog, para enfatizar que a fonte √© o valor do sinal que possu√≠a antes de entrar no bloco. <br><br><img src="https://habrastorage.org/webt/ct/xx/hl/ctxxhlmqgxywkwpnvhcneksxnyc.png"><br><br>  Do ponto de vista da an√°lise do algoritmo, tudo j√° est√° claro.  Diante de n√≥s est√° uma modifica√ß√£o de um algoritmo desse tipo: <br><br><pre> <code class="plaintext hljs">uint32_t SquareRoot(uint32_t a_nInput) { uint32_t op = a_nInput; uint32_t res = 0; uint32_t one = 1uL &lt;&lt; 30; // The second-to-top bit is set: use 1u &lt;&lt; 14 for uint16_t type; use 1uL&lt;&lt;30 for uint32_t type // "one" starts at the highest power of four &lt;= than the argument. while (one &gt; op) { one &gt;&gt;= 2; } while (one != 0) { if (op &gt;= res + one) { op -= res + one; res += one &lt;&lt; 1; } res &gt;&gt;= 1; one &gt;&gt;= 2; } return res; }</code> </pre><br>  Somente em rela√ß√£o ao nosso sistema ser√° mais parecido com isto: <br><br><pre> <code class="plaintext hljs">uint32_t SquareRoot(uint32_t a_nInput) { uint32_t op = a_nInput; uint32_t res = 0; uint32_t one = 1uL &lt;&lt; 14; // The second-to-top bit is set while (one != 0) { if (op &gt;= res + one) { op -= res + one; res += one &lt;&lt; 1; } res &gt;&gt;= 1; one &gt;&gt;= 2; } return res; }</code> </pre><br>  Os estados 4 e 10 codificam explicitamente a sequ√™ncia: <br><br><pre> <code class="plaintext hljs"> res &gt;&gt;= 1;</code> </pre><br>  para diferentes ramos. <br><br>  A linha √©: <br><br><pre> <code class="plaintext hljs"> one &gt;&gt;= 2;</code> </pre><br>  √© explicitamente codificado por um par de estados 6 e 7 ou por um par de estados 9 e 7. Por agora, quero exclamar: "Bem, os inventores s√£o os mesmos autores!", mas logo ficar√° claro por que h√° tanta dificuldade com dois ramos (no c√≥digo C h√° um ramo e solu√ß√£o alternativa). <br><br>  O estado 2 codifica uma ramifica√ß√£o condicional.  O estado 7 codifica uma instru√ß√£o de loop.  A opera√ß√£o de compara√ß√£o na etapa 2 √© muito cara.  Em geral, na maioria das etapas, o registro A0 cont√©m a vari√°vel  Mas na etapa 1, a vari√°vel one √© descarregada em F0 e, em vez disso, o valor de <b>res + one √©</b> carregado, na etapa 2 a subtra√ß√£o √© executada para fins de compara√ß√£o e nas etapas 3 e 8, o valor de <b>um</b> √© restaurado.  Por que, na etapa 4, A0 √© copiado para F0 novamente, eu n√£o entendi.  Talvez isso seja algum tipo de rudimento. <br><br>  Resta descobrir quem √© <b>res</b> e quem √© <b>op</b> .  Sabemos que a condi√ß√£o compara op e res + um.  No estado 1, A0 ( <b>um</b> ) e A1 s√£o adicionados.  Portanto, A1 √© <b>res</b> .  Acontece que no estado 11 A1 tamb√©m √© <b>res</b> , e √© ele quem entra em F1, que √© alimentado com a sa√≠da da fun√ß√£o.  F1 no estado 1 √© claramente <b>op</b> .  Proponho introduzir a diferencia√ß√£o de cores das <s>cal√ßas das</s> vari√°veis.  Denotamos <b>res</b> como vermelho, <b>op</b> como verde e <b>um</b> como marrom (n√£o muito contrastado, mas as outras cores s√£o ainda menos contrastadas). <br><br><img src="https://habrastorage.org/webt/xl/hs/ns/xlhsnsgsbuqn2s5kdqtv7xh4tac.png"><br><br>  Na verdade, toda a verdade √© revelada.  Vemos como A1 famosa muda temporariamente de F1 para compara√ß√£o e c√°lculos, como a mesma diferen√ßa √© usada tanto para compara√ß√£o (na verdade, gerando o bit C), quanto para participar da f√≥rmula.  Vimos at√© por que o espa√ßo vazio (desvio) no algoritmo C √© codificado por uma ramifica√ß√£o longa do gr√°fico de transi√ß√£o do aut√¥mato (nessa ramifica√ß√£o, os registros s√£o trocados id√™nticos aos da troca que ocorre no ramo de c√≥digo principal).  N√≥s vemos tudo. <br><br>  A √∫nica pergunta que nunca deixa de me atormentar √© como os autores mudaram o FIFO para o modo de byte √∫nico?  A documenta√ß√£o diz que, para isso, √© necess√°rio aumentar os bits CLR no registro do Controle Auxiliar em uma unidade, mas n√£o vejo que a API tenha esses registros.  Talvez algu√©m entenda isso e escreva nos coment√°rios. <br><br>  Bem, e desenvolver algo pr√≥prio - na ordem inversa, usando as habilidades adquiridas. <br><br><h3>  Conclus√£o </h3><br>  Para desenvolver as habilidades de desenvolver ‚Äúfirmware‚Äù baseado em UDB, √© √∫til n√£o apenas ler a documenta√ß√£o, mas tamb√©m inspirar-se nos projetos de outras pessoas.  O c√≥digo que acompanha o PSoC Creator pode ser √∫til como refer√™ncia, e os modelos comportamentais inclu√≠dos no compilador ajudar√£o voc√™ a entender melhor o significado da documenta√ß√£o.  O artigo tamb√©m fornece um link para um conjunto de exemplos de fabricantes de terceiros e mostra o processo de an√°lise de um desses exemplos. <br><br>  Sobre isso, o ciclo de artigos de direitos autorais sobre o trabalho com o UDB pode ser considerado conclu√≠do.  Ficaria feliz se ele ajudasse algu√©m a obter conhecimento √∫til na pr√°tica.  Existem algumas tradu√ß√µes de documenta√ß√£o adiante, mas as estat√≠sticas mostram que quase ningu√©m as l√™.  Eles s√£o planejados de maneira limpa, para n√£o deixar o t√≥pico em poucas palavras. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449960/">https://habr.com/ru/post/pt449960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449946/index.html">Contos de desenvolvedores 1C: admin</a></li>
<li><a href="../pt449948/index.html">JavaScript: 7 pequenas coisas √∫teis</a></li>
<li><a href="../pt449952/index.html">Configurando a entrega cont√≠nua no gitlab.com</a></li>
<li><a href="../pt449954/index.html">Instale o Zimbra Open-Source Edition no CentOS 7</a></li>
<li><a href="../pt449956/index.html">AI @ MIPT: Big data para modelos matem√°ticos do genoma humano</a></li>
<li><a href="../pt449962/index.html">Roteadores Industriais 4G SmartMotion</a></li>
<li><a href="../pt449964/index.html">Test drive nanoCAD SPDS Canteiro de obras 8. Parte 2</a></li>
<li><a href="../pt449966/index.html">Tabelas em Figma. Design da grade de dados por um componente</a></li>
<li><a href="../pt449968/index.html">Redmadrobot discute AppsConf 2019: v√≠deo</a></li>
<li><a href="../pt449970/index.html">Poste com a bandeira preta ou Como eu n√£o coloquei seu curso em v√≠deo no rastreador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>