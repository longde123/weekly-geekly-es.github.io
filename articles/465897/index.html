<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöò üà∂ üïµüèΩ Los 10 errores m√°s comunes de Spring Framework üë®‚Äçüöí ü§¢ üò∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Les presento la traducci√≥n del art√≠culo "Los 10 errores m√°s comunes del marco de primavera" de Toni Kukurin. 

 Spring es probablemente uno...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Los 10 errores m√°s comunes de Spring Framework</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465897/"> Hola Habr!  Les presento la traducci√≥n del art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Los 10 errores m√°s comunes del marco de primavera"</a> de Toni Kukurin. <br><br>  Spring es probablemente uno de los frameworks Java m√°s populares, as√≠ como una poderosa bestia para domesticar.  Aunque sus conceptos b√°sicos son bastante f√°ciles de entender, lleva tiempo y esfuerzo convertirse en un desarrollador s√≥lido de Spring. <br><br>  En este art√≠culo, veremos algunos de los errores m√°s comunes en Spring, especialmente aquellos relacionados con aplicaciones web y Spring Boot.  Como se indic√≥ en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web de Spring Boot</a> , impone una idea de c√≥mo deben construirse las aplicaciones industriales, por lo que en este art√≠culo intentaremos demostrar esta idea y dar una visi√≥n general de algunos consejos que encajar√°n bien en el proceso est√°ndar de desarrollo de aplicaciones web de Spring Boot. <br>  Si no est√° muy familiarizado con Spring Boot, pero a√∫n as√≠ desea probar algunas de las cosas mencionadas, cre√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el repositorio de GitHub que acompa√±a a este art√≠culo</a> .  Si siente que se perdi√≥ en alg√∫n lugar del art√≠culo, le recomiendo clonar el repositorio en su computadora local y jugar con el c√≥digo. <br><a name="habracut"></a><br><h2>  Error com√∫n n. ¬∞ 1: bajar demasiado </h2><br>  Nos encontramos con este error com√∫n porque el s√≠ndrome <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"no inventado aqu√≠"</a> es bastante com√∫n en el mundo del desarrollo de software. Los s√≠ntomas incluyen la reescritura regular de fragmentos de c√≥digo de uso frecuente, y muchos desarrolladores parecen sufrir esto. <br><br>  Si bien comprender el interior de una biblioteca en particular y su implementaci√≥n es principalmente bueno y necesario (y puede ser un excelente proceso de aprendizaje), resolver constantemente los mismos detalles de implementaci√≥n de bajo nivel es malo para su desarrollo como ingeniero de software.  Existe una raz√≥n por la cual existen abstracciones y marcos como Spring que lo separan estrictamente del trabajo manual repetitivo y le permiten concentrarse en los detalles de nivel superior: sus objetos de dominio y la l√≥gica empresarial. <br><br>  Por lo tanto, use abstracciones: la pr√≥xima vez que encuentre un problema espec√≠fico, primero haga una b√∫squeda r√°pida y determine si la biblioteca que resuelve este problema est√° integrada en Spring.  Actualmente, es m√°s probable que encuentre una soluci√≥n adecuada existente.  Como ejemplo de una biblioteca √∫til, en los ejemplos del resto de este art√≠culo, usar√© las anotaciones <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">del proyecto Lombok</a> .  Lombok se usa como generador de c√≥digo de plantilla y el desarrollador perezoso dentro de ti, con suerte no deber√≠a tener problemas con la idea de esta biblioteca.  Como ejemplo, mire c√≥mo se ve un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"bean Java est√°ndar"</a> con Lombok: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; String secondBeanProperty; }</code> </pre> <br>  Como puede imaginar, el c√≥digo anterior se compila en: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String secondBeanProperty; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> firstBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty = firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String secondBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty = secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Sin embargo, tenga en cuenta que lo m√°s probable es que tenga que instalar el complemento si tiene la intenci√≥n de usar Lombok con su IDE.  La versi√≥n del complemento para IntelliJ IDEA se puede encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  Error Com√∫n # 2: Fugas de Contenido Interno </h2><br>  Revelar su estructura interna siempre es una mala idea, ya que crea inflexibilidad en el dise√±o del servicio y, por lo tanto, contribuye a la mala pr√°ctica de codificaci√≥n.  Una "fuga" de contenido interno se manifiesta en el hecho de que la estructura de la base de datos es accesible desde ciertos puntos finales API.  Como ejemplo, suponga que el siguiente POJO ("Objeto Java simple" representa una tabla en su base de datos: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer id; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } }</code> </pre> <br>  Supongamos que hay un punto final que necesita acceder a los datos de TopTalentEntity.  Por tentador que sea devolver las instancias de TopTalentEntity, una soluci√≥n m√°s flexible ser√≠a crear una nueva clase para mostrar los datos de TopTalentEntity en el punto final de la API: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Por lo tanto, realizar cambios en el backend de la base de datos no requerir√° ning√∫n cambio adicional en la capa de servicio.  Piense en lo que sucede si agrega el campo de contrase√±a a TopTalentEntity para almacenar hashes de contrase√±as de usuario en la base de datos; sin un conector como TopTalentData, si olvida cambiar el servicio, la interfaz mostrar√° accidentalmente informaci√≥n secreta muy indeseable. <br><br><h2>  Error com√∫n # 3: falta de separaci√≥n de deberes </h2><br>  A medida que su aplicaci√≥n crece, organizar su c√≥digo se convierte en un problema cada vez m√°s importante.  Ir√≥nicamente, la mayor√≠a de los buenos principios del desarrollo de software est√°n comenzando a violarse en todas partes, especialmente en aquellos casos en los que se presta poca atenci√≥n al dise√±o de la arquitectura de la aplicaci√≥n.  Uno de los errores m√°s comunes que enfrentan los desarrolladores es mezclar las responsabilidades del c√≥digo, ¬°y es muy f√°cil de hacer! <br><br>  Lo que generalmente viola el principio de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">separaci√≥n de funciones</a> es simplemente "agregar" nuevas funcionalidades a las clases existentes.  Esto, por supuesto, es una excelente soluci√≥n a corto plazo (para empezar, requiere menos tipeo), pero inevitablemente se convertir√° en un problema en el futuro, ya sea durante las pruebas, el mantenimiento o en alg√∫n punto intermedio.  Considere el siguiente controlador, que devuelve TopTalentData desde su repositorio: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::entityToData) .collect(Collectors.toList()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">entityToData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  Al principio, no se nota que algo est√° mal con este c√≥digo.  Proporciona una lista de TopTalentData que se recupera de las instancias de TopTalentEntity.  Sin embargo, si observa detenidamente, veremos que, de hecho, TopTalentController hace algunas cosas aqu√≠.  A saber: asigna solicitudes para un punto final espec√≠fico, recupera datos del repositorio y convierte las entidades obtenidas de TopTalentRepository en otro formato.  Una soluci√≥n "m√°s limpia" ser√≠a dividir estas responsabilidades en sus propias clases.  Puede verse m√°s o menos as√≠: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService.getTopTalent(); } } <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentEntityConverter topTalentEntityConverter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(topTalentEntityConverter::toResponse) .collect(Collectors.toList()); } } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntityConverter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  Un beneficio adicional de esta jerarqu√≠a es que nos permite determinar d√≥nde se encuentra la funcionalidad simplemente verificando el nombre de la clase.  Adem√°s, durante las pruebas, podemos reemplazar f√°cilmente cualquiera de las clases con una implementaci√≥n simulada, si es necesario. <br><br><h2>  Error com√∫n # 4: inconsistencia y manejo de errores deficientes </h2><br>  El tema de la coherencia no es necesariamente exclusivo de Spring (o Java, para el caso), pero sigue siendo un aspecto importante a tener en cuenta al trabajar en proyectos de Spring.  Si bien el estilo de escribir c√≥digo puede ser tema de discusi√≥n (y generalmente es un acuerdo sobre el equipo o en toda la empresa), la presencia de un est√°ndar com√∫n es de gran ayuda en el rendimiento.  Esto es especialmente cierto para equipos de varias personas.  La consistencia permite que el c√≥digo se transmita sin el gasto de recursos para el mantenimiento o la provisi√≥n de explicaciones detalladas sobre las responsabilidades de varias clases. <br><br>  Considere un proyecto Spring con varios archivos de configuraci√≥n, servicios y controladores.  Al ser sem√°nticamente consistentes al nombrarlos, se crea una estructura f√°cil de buscar en la que cualquier desarrollador nuevo puede controlar c√≥mo trabajar con el c√≥digo: por ejemplo, el sufijo Config se agrega a las clases de configuraci√≥n, el sufijo de servicio a los servicios y el sufijo de controlador a los controladores. <br><br>  Estrechamente relacionado con el tema de la coherencia, el manejo de errores del lado del servidor merece una atenci√≥n especial.  Si alguna vez ha tenido que manejar respuestas de excepci√≥n de una API mal escrita, probablemente sepa por qu√© puede ser doloroso analizar excepciones, y es a√∫n m√°s dif√≠cil determinar la raz√≥n por la cual estas excepciones ocurrieron originalmente. <br><br>  Como desarrollador de API, lo ideal es cubrir todos los puntos finales de los usuarios y traducirlos a un formato de error com√∫n.  Esto generalmente significa que tiene un c√≥digo de error y una descripci√≥n comunes, y no solo una excusa en la forma de: a) devolver el mensaje "500 Error interno del servidor" ob) simplemente restablecer el seguimiento de la pila al usuario (lo que debe evitarse a toda costa, ya que muestra su interior adem√°s de la complejidad del procesamiento en el lado del cliente). <br>  Un ejemplo de un formato de respuesta de error com√∫n podr√≠a ser: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ErrorResponse</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer errorCode; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String errorMessage; }</code> </pre> <br>  Algo similar se encuentra generalmente en las API m√°s populares y generalmente funciona bien, ya que puede documentarse de manera f√°cil y sistem√°tica.  Puede traducir las excepciones a este formato proporcionando el m√©todo con la anotaci√≥n @ExceptionHandler (en el error com√∫n n. ¬∞ 6 se proporciona un ejemplo de la anotaci√≥n). <br><br><h2>  Error com√∫n # 5: subprocesamiento m√∫ltiple incorrecto </h2><br>  Independientemente de si se encuentra en aplicaciones de escritorio o web, en Spring o no en Spring, el subprocesamiento m√∫ltiple puede ser una tarea desalentadora.  Los problemas causados ‚Äã‚Äãpor la ejecuci√≥n de programas paralelos son dif√≠ciles de resolver y, a menudo, extremadamente dif√≠ciles de depurar; de hecho, debido a la naturaleza del problema, una vez que comprenda que est√° lidiando con el problema de ejecuci√≥n paralela, probablemente deber√≠a abandonar por completo el depurador y comenzar verifique su c√≥digo manualmente hasta que encuentre la causa del error.  Desafortunadamente, para resolver estos problemas no hay una soluci√≥n de plantilla.  Dependiendo del caso espec√≠fico, tendr√° que evaluar la situaci√≥n y luego atacar el problema desde un √°ngulo que considere el mejor. <br><br>  Idealmente, por supuesto, le gustar√≠a evitar por completo los errores de subprocesos m√∫ltiples.  Nuevamente, no existe un enfoque √∫nico para esto, pero aqu√≠ hay algunas consideraciones pr√°cticas para depurar y prevenir errores de subprocesos m√∫ltiples: <br><br><h3>  Evitar estado global </h3><br>  Primero, recuerde siempre el problema del "estado global".  Si est√° creando una aplicaci√≥n multiproceso, absolutamente todo lo que se pueda cambiar globalmente se debe monitorear cuidadosamente y, si es posible, eliminar por completo.  Si hay una raz√≥n por la cual la variable global debe permanecer mutable, use cuidadosamente la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sincronizaci√≥n</a> y monitoree el rendimiento de su aplicaci√≥n para confirmar que no se est√° desacelerando debido a los nuevos per√≠odos de espera. <br><br><h3>  Evitar la mutabilidad </h3><br>  Esto se deduce directamente de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">programaci√≥n funcional</a> y, seg√∫n OOP, establece que se debe evitar la volatilidad de clase y el cambio de estado.  En resumen, lo anterior significa la presencia de establecedores y campos finales privados en todas las clases del modelo.  Sus valores cambian solo durante la construcci√≥n.  Por lo tanto, puede estar seguro de que no habr√° problemas en la carrera por los recursos y que el acceso a las propiedades del objeto siempre proporcionar√° los valores correctos. <br><br><h3>  Registrar datos cr√≠ticos </h3><br>  Eval√∫e d√≥nde su aplicaci√≥n puede causar problemas y registre previamente todos los datos importantes.  Si se produce un error, agradecer√° la informaci√≥n sobre las solicitudes recibidas y podr√° comprender mejor por qu√© su aplicaci√≥n se est√° comportando mal.  Una vez m√°s, debe tenerse en cuenta que el registro aumenta la E / S del archivo, por lo que no debe abusar de √©l, ya que esto puede afectar seriamente el rendimiento de su aplicaci√≥n. <br><br><h3>  Reutilice implementaciones existentes </h3><br>  Siempre que necesite crear sus propios subprocesos (por ejemplo, para realizar solicitudes asincr√≥nicas a varios servicios), reutilice las implementaciones seguras existentes, en lugar de crear sus propias soluciones.  En su mayor parte, esto significar√≠a usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ExecutorServices</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CompletableFutures</a> en el estilo funcional ordenado de Java 8 para crear hilos.  Spring tambi√©n permite el procesamiento de solicitudes as√≠ncronas a trav√©s de la clase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DeferredResult</a> . <br><br><h2>  Error com√∫n # 6: no usar validaci√≥n basada en anotaciones </h2><br>  Imaginemos que nuestro servicio TopTalent, mencionado anteriormente, necesita un punto final para agregar nuevos Super Talentos.  Adem√°s, suponga que por alguna buena raz√≥n, cada nuevo nombre debe tener exactamente 10 caracteres de longitud.  Una forma de hacerlo podr√≠a ser la siguiente: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> nameNonExistentOrHasInvalidLength = Optional.ofNullable(topTalentData) .map(TopTalentData::getName) .map(name -&gt; name.length() == <span class="hljs-number"><span class="hljs-number">10</span></span>) .orElse(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nameNonExistentOrInvalidLength) { <span class="hljs-comment"><span class="hljs-comment">// throw some exception } topTalentService.addTopTalent(topTalentData); }</span></span></code> </pre> <br>  Sin embargo, lo anterior (adem√°s de estar mal dise√±ado) no es realmente una soluci√≥n "limpia".  Verificamos m√°s de un tipo de validez (es decir, que TopTalentData no es nulo, y que TopTalentData.name no es nulo, y que TopTalentData.name tiene 10 caracteres de longitud), y tambi√©n arroja una excepci√≥n si los datos no son v√°lidos. <br><br>  Esto se puede hacer de manera mucho m√°s limpia usando el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">validador de Hibernate</a> con Spring.  Primero, reescribimos el m√©todo addTopTalent para admitir la validaci√≥n: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/put"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Valid @NotNull @RequestBody TopTalentData topTalentData)</span></span></span><span class="hljs-function"> </span></span>{ topTalentService.addTopTalent(topTalentData); } <span class="hljs-meta"><span class="hljs-meta">@ExceptionHandler</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.BAD_REQUEST) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ErrorResponse </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleInvalidTopTalentDataException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodArgumentNotValidException methodArgumentNotValidException)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// handle validation exception }</span></span></code> </pre> <br>  Adem√°s, debemos indicar qu√© propiedad queremos verificar en la clase TopTalentData: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Length</span></span>(min = <span class="hljs-number"><span class="hljs-number">10</span></span>, max = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Spring ahora interceptar√° la solicitud y la verificar√° antes de llamar al m√©todo; no es necesario utilizar pruebas manuales adicionales. <br><br>  Otra forma en que podr√≠amos lograr lo mismo es crear nuestras propias anotaciones.  Aunque las anotaciones personalizadas generalmente se usan solo cuando sus necesidades exceden el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conjunto de constantes incorporado de Hibernate</a> , para este ejemplo, imaginemos que las anotaciones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">longitud</a> no existen.  Debe crear un validador que verifique la longitud de una cadena creando dos clases adicionales, una para verificar y otra para anotar propiedades: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@Documented</span></span> <span class="hljs-meta"><span class="hljs-meta">@Constraint</span></span>(validatedBy = { MyAnnotationValidator.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> MyAnnotation { <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> "String length does not match expected"</span></span>; Class&lt;?&gt;[] groups() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; Class&lt;? extends Payload&gt;[] payload() <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotationValidator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConstraintValidator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAnnotation</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> expectedLength; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyAnnotation myAnnotation)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength = myAnnotation.value(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s, ConstraintValidatorContext constraintValidatorContext)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || s.length() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expectedLength; } }</code> </pre> <br>  Tenga en cuenta que en estos casos, las mejores pr√°cticas para la separaci√≥n de tareas requieren que marque una propiedad como v√°lida si es nula (s == null en el m√©todo isValid), y luego use la anotaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">NotNull</a> si este es un requisito adicional para la propiedad: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MyAnnotation</span></span>(value = <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-meta"><span class="hljs-meta">@NotNull</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br><h2>  Error com√∫n n. ¬∞ 7: uso de la configuraci√≥n XML (a√∫n) </h2><br>  Aunque XML era necesario para versiones anteriores de Spring, actualmente la mayor parte de la configuraci√≥n se puede hacer exclusivamente con c√≥digo / anotaciones Java.  Las configuraciones XML simplemente representan una plantilla adicional e innecesaria. <br>  Este art√≠culo (y el repositorio de GitHub que lo acompa√±a) usa anotaciones para configurar Spring y Spring sabe a qu√© beans se debe conectar porque el paquete ra√≠z se anot√≥ utilizando la anotaci√≥n compuesta @SpringBootApplication, por ejemplo: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  Esta anotaci√≥n compuesta (puede obtener m√°s informaci√≥n al respecto en la documentaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spring</a> ) solo le da a Spring una pista sobre qu√© paquetes deben escanearse para extraer los beans.  En nuestro caso particular, esto significa que las siguientes clases se utilizar√°n para conectar los beans, comenzando con el paquete de nivel superior (co.kukurin): <br><br><ul><li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> <li> <code>@Component (TopTalentConverter, MyAnnotationValidator) @RestController (TopTalentController) @Repository (TopTalentRepository) @Service (TopTalentService)</code> </li> </ul><br>  Si tuvi√©ramos clases adicionales anotadas con @Configuration, tambi√©n se verificar√≠a la configuraci√≥n de Java. <br><br><h2>  Error com√∫n n√∫mero 8: olvidarse de los perfiles </h2><br>  El problema que a menudo se encuentra al desarrollar servidores es la diferencia entre los diferentes tipos de configuraciones, generalmente las configuraciones industriales y de desarrollo.  En lugar de cambiar manualmente los diversos par√°metros de configuraci√≥n cada vez que cambie de prueba a implementaci√≥n de aplicaci√≥n, una forma m√°s eficiente ser√≠a utilizar perfiles. <br><br>  Considere el caso cuando utiliza la base de datos en memoria para el desarrollo local y la base de datos MySQL en PROM.  En esencia, esto significar√° que usar√° diferentes URL y (con suerte) diferentes credenciales para acceder a cada una de ellas.  Veamos c√≥mo se puede hacer esto con dos archivos de configuraci√≥n diferentes: <br><br><h4>  APLICACI√ìN DE ARCHIVO. YAML </h4><br><pre> <code class="plaintext hljs"># set default profile to 'dev' spring.profiles.active: dev # production database details spring.datasource.url: 'jdbc:mysql://localhost:3306/toptal' spring.datasource.username: root spring.datasource.password:</code> </pre> <br><h4>  APLICACI√ìN DE ARCHIVO-DEV.YAML </h4><br><pre> <code class="plaintext hljs">spring.datasource.url: 'jdbc:h2:mem:' spring.datasource.platform: h2</code> </pre> <br>  Aparentemente, no desea realizar ninguna acci√≥n accidental en su base de datos industrial mientras se mete con el c√≥digo, por lo que tiene sentido establecer el perfil predeterminado en dev.  Luego, en el servidor, puede anular manualmente el perfil de configuraci√≥n especificando el par√°metro -Dspring.profiles.active = prod para la JVM.  Adem√°s, tambi√©n puede establecer la variable de entorno del sistema operativo en el perfil predeterminado deseado. <br><br><h2>  Error com√∫n # 9: incapacidad para aceptar la inyecci√≥n de dependencia </h2><br>  El uso adecuado de la inyecci√≥n de dependencia en Spring significa que le permite unir todos sus objetos al escanear todas las clases de configuraci√≥n requeridas;  Esto es √∫til para desacoplar las relaciones y tambi√©n facilita mucho las pruebas.  En lugar de clases vinculantes, haciendo algo como esto: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentService(); } }</code> </pre> <br><br>  Dejamos que Spring haga el enlace por nosotros: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentService topTalentService)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.topTalentService = topTalentService; } }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Misko Hevery de Google Talk explica en</a> detalle los "motivos" para la inyecci√≥n de dependencia, as√≠ que veamos c√≥mo se usa esto en la pr√°ctica.  En la divisi√≥n de responsabilidades (Errores comunes # 3), creamos clases de servicio y controlador.  Supongamos que queremos probar un controlador bajo el supuesto de que TopTalentService se est√° comportando correctamente.  Podemos insertar un objeto simulado en lugar de la implementaci√≥n real del servicio, proporcionando una clase de configuraci√≥n separada: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SampleUnitTestConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentService </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">topTalentService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TopTalentService topTalentService = Mockito.mock(TopTalentService.class); Mockito.when(topTalentService.getTopTalent()).thenReturn( Stream.of(<span class="hljs-string"><span class="hljs-string">"Mary"</span></span>, <span class="hljs-string"><span class="hljs-string">"Joel"</span></span>) .map(TopTalentData::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>).collect(Collectors.toList())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService; } }</code> </pre> <br>  Luego podemos incrustar el objeto simulado dici√©ndole a Spring que use SampleUnitTestConfig como proveedor de configuraci√≥n: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(classes = { SampleUnitTestConfig.class })</code> </pre> <br>  Entonces esto nos permitir√° usar la configuraci√≥n de contexto para incrustar el bean personalizado en la prueba unitaria. <br><br><h2>  Error com√∫n # 10: falta de pruebas o pruebas incorrectas </h2><br>  A pesar del hecho de que la idea de las pruebas unitarias ha estado con nosotros durante mucho tiempo, muchos desarrolladores parecen "olvidar" hacer esto (especialmente si esto no es necesario), o simplemente dejarlo para m√°s adelante.  Obviamente, esto no es deseable, ya que las pruebas no solo deben verificar la exactitud de su c√≥digo, sino que tambi√©n sirven como documentaci√≥n sobre c√≥mo debe comportarse la aplicaci√≥n en diferentes situaciones. <br><br>  Cuando se prueban los servicios web, rara vez se realizan pruebas unitarias excepcionalmente "limpias", ya que la interacci√≥n a trav√©s de HTTP generalmente requiere llamar a DispatcherServlet Spring y ver qu√© sucede cuando se recibe la HttpServletRequest real (lo que lo convierte en una prueba de integraci√≥n, con usando validaci√≥n, serializaci√≥n, etc.).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">REST Assured</a> : Java DSL para probar f√°cilmente los servicios REST adem√°s de MockMVC ha demostrado ser una soluci√≥n muy elegante.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Considere el siguiente fragmento de c√≥digo con inyecci√≥n de dependencia: </font></font><br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(SpringJUnit4ClassRunner.class) <span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(classes = { Application.class, SampleUnitTestConfig.class }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RestAssuredTestDemonstration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TopTalentController topTalentController; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldGetMaryAndJoel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// given MockMvcRequestSpecification givenRestAssuredSpecification = RestAssuredMockMvc.given() .standaloneSetup(topTalentController); // when MockMvcResponse response = givenRestAssuredSpecification.when().get("/toptal/get"); // then response.then().statusCode(200); response.then().body("name", hasItems("Mary", "Joel")); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SampleUnitTestConfig habilita la implementaci√≥n simulada de TopTalentService en TopTalentController, mientras que todas las dem√°s clases est√°n conectadas usando la configuraci√≥n est√°ndar obtenida escaneando paquetes que tienen ra√≠ces en el paquete de la clase Aplicaci√≥n. </font><font style="vertical-align: inherit;">RestAssuredMockMvc simplemente se usa para crear un entorno ligero y enviar una solicitud GET al punto final / toptal / get.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Convi√©rtete en un maestro de primavera </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring es un marco poderoso con el que es f√°cil comenzar, pero que requiere dedicaci√≥n y tiempo para lograr el dominio total. </font><font style="vertical-align: inherit;">Si pasa tiempo conociendo el marco, sin duda aumentar√° su productividad a largo plazo y, en √∫ltima instancia, lo ayudar√° a escribir un c√≥digo m√°s limpio y a convertirse en un mejor desarrollador. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si est√° buscando recursos adicionales, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring In Action</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un libro de buenas pr√°cticas que cubre muchos temas centrales de Spring.</font></font><br><br>  <b>Etiquetas</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Java SpringFramework </font></font><br><br><h2>  Comentarios </h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timothy Schimandle</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En el n. ¬∞ 2, creo que en la mayor√≠a de los casos se prefiere devolver un objeto de dominio. Su objeto personalizado de ejemplo es una de varias clases que tienen campos que queremos ocultar. Pero la gran mayor√≠a de los objetos con los que trabaj√© no tienen esa restricci√≥n, y agregar la clase dto es solo un c√≥digo innecesario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En definitiva un buen art√≠culo.</font></font> Buen trabajo <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP√çRITU a Timothy Schimandle,</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estoy totalmente de acuerdo. Parece que se ha agregado una capa de c√≥digo adicional innecesaria, creo que @JsonIgnore ayudar√° a ignorar los campos (aunque con fallas en las estrategias de detecci√≥n de repositorio predeterminadas), pero en general esta es una gran publicaci√≥n de blog. Orgulloso de tropezar ... </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arokiadoss Asirvatham</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dude, otro error com√∫n para principiantes: 1) Dependencia c√≠clica y 2) incumplimiento de las doctrinas b√°sicas de la declaraci√≥n de la Clase Singleton, como el uso de la variable de instancia en beans con alcance singleton. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hlodowig</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Con respecto al n√∫mero 8, creo que los enfoques de los perfiles son muy insatisfactorios. A ver:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguridad: algunas personas dicen: si su repositorio fuera p√∫blico, ¬øhabr√≠a claves / contrase√±as secretas? </font><font style="vertical-align: inherit;">Lo m√°s probable es que sea as√≠, siguiendo este enfoque. </font><font style="vertical-align: inherit;">A menos que, por supuesto, agregue archivos de configuraci√≥n a .gitignore, pero esta no es una opci√≥n seria.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Duplicaci√≥n: cada vez que tengo configuraciones diferentes, necesito crear un nuevo archivo de propiedades, lo cual es bastante molesto. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portabilidad: S√© que este es solo un argumento JVM, pero cero es mejor que uno. </font><font style="vertical-align: inherit;">Infinitamente menos propenso a errores.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trat√© de encontrar una manera de usar variables de entorno en mis archivos de configuraci√≥n en lugar de "codificar" los valores, pero hasta ahora no he tenido √©xito, creo que necesito investigar m√°s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gran art√≠culo Tony, ¬°sigue con el buen trabajo! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Traducci√≥n completada: tele.gg/middle_java</font></font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465897/">https://habr.com/ru/post/465897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465885/index.html">¬øC√≥mo convertirse en un l√≠der Scrum Master y Rock the Team?</a></li>
<li><a href="../465889/index.html">C√≥mo fuimos sobre la eficiencia energ√©tica</a></li>
<li><a href="../465891/index.html">C√≥mo encontrar un nombre de producto o empresa usando Vepp como ejemplo</a></li>
<li><a href="../465893/index.html">Summ3r de h4ck 2019. Departamento de an√°lisis de seguridad</a></li>
<li><a href="../465895/index.html">Descripci√≥n general del programa Piter de C ++ Rusia 2019: asincron√≠a, m√≥dulos, bibliotecas ... y taxi</a></li>
<li><a href="../465899/index.html">El libro "S√≠mbolo del sistema de Linux. La gu√≠a completa. 2nd int. ed. "</a></li>
<li><a href="../465901/index.html">¬øQu√© debe tener una aplicaci√≥n de fitness?</a></li>
<li><a href="../465903/index.html">Bienvenido a Fujitsu World Tour 2019</a></li>
<li><a href="../465905/index.html">Conferencia ZeroNights 2019</a></li>
<li><a href="../465911/index.html">Encuentro de aceleraci√≥n 17/09 UPD videos y presentaciones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>