<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ° ğŸ›€ ğŸ¤™ğŸ¼ Comment faire des e-mails et ne pas gÃ¢cher: conseils pratiques ğŸ‘°ğŸ¿ ğŸ‘ˆ ğŸ§˜ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le dÃ©veloppeur, qui a rencontrÃ© pour la premiÃ¨re fois la gÃ©nÃ©ration d'e-mails, n'a pratiquement aucune chance d'Ã©crire une application qui le fera cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment faire des e-mails et ne pas gÃ¢cher: conseils pratiques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/419591/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/le/ph/rs/lephrsp-4zc6zhbbo-fgmhcceec.jpeg" height="500"></div><br>  Le dÃ©veloppeur, qui a rencontrÃ© pour la premiÃ¨re fois la gÃ©nÃ©ration d'e-mails, n'a pratiquement aucune chance d'Ã©crire une application qui le fera correctement.  Environ 40% des e-mails gÃ©nÃ©rÃ©s par les applications d'entreprise ont une sorte de violation des normes et, par consÃ©quent, des problÃ¨mes de livraison et d'affichage.  Il y a des raisons Ã  cela: le courrier Ã©lectronique est techniquement beaucoup plus compliquÃ© que le Web, le courrier est rÃ©glementÃ© par plusieurs centaines de normes et un nombre incalculable de pratiques gÃ©nÃ©ralement acceptÃ©es (et pas ainsi), et les clients de messagerie sont divers et imprÃ©visibles.  Les tests peuvent amÃ©liorer considÃ©rablement la situation, mais il n'y a pratiquement aucun matÃ©riel consacrÃ© au test du courrier. <br><br>  Mail.Ru mail interagit rÃ©guliÃ¨rement avec ses utilisateurs via des e-mails.  Dans notre projet, tous les composants qui sont responsables de la gÃ©nÃ©ration des e-mails, et mÃªme des envois uniques, subissent des tests obligatoires.  Dans cet article, nous partagerons notre expÃ©rience (et plein de bosses). <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que sont les e-mails</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qui est impliquÃ© dans le processus de test et de contrÃ´le</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Courrier et transport postal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'interface de l'infrastructure de messagerie et les limites de l'application testÃ©e</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DÃ©finition des paramÃ¨tres testÃ©s</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Structure typique d'une application gÃ©nÃ©ratrice</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quoi et quand tester</a> <br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Infrastructure de livraison</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GÃ©nÃ©ration d'une application</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ModÃ¨les de lettres structurelles et de mise en page</a> </li></ol></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exigences de base pour vÃ©rifier l'infrastructure</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conditions d'autorisation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VÃ©rification de l'application gÃ©nÃ©ratrice</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exigences d'adresse postale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exigences de l'en-tÃªte de l'e-mail</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conditions requises pour la structure de la lettre</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exigences d'URI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exigences de mise en page</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RÃ©alisation de tests fractionnÃ©s</a> </li></ul><br><a name="habracut"></a><br><a name="1"></a><h2>  Que sont les e-mails </h2><br>  L'application peut gÃ©nÃ©rer diffÃ©rents types de lettres.  Ils peuvent Ãªtre classÃ©s en plusieurs catÃ©gories.  Par la mÃ©thode de sÃ©lection des destinataires: dÃ©clencheur - sÃ©lectif - groupe.  Sur rendez-vous: transactionnel - marketing - service.  DiffÃ©rents types de lettres peuvent avoir des exigences diffÃ©rentes et appliquer diffÃ©rents scripts de test. <br><br>  Les e-mails de dÃ©clenchement sont gÃ©nÃ©rÃ©s en rÃ©ponse Ã  tout Ã©vÃ©nement, par exemple, les actions de l'utilisateur ou les modifications de l'Ã©tat des objets systÃ¨me.  Ils sont gÃ©nÃ©rÃ©s par l'application, et donc les plus intÃ©ressants en termes de tests.  Les e-mails de dÃ©clenchement peuvent Ãªtre Ã  la fois transactionnels et marketing. <br><br>  Des lettres personnalisÃ©es sont envoyÃ©es Ã  une sÃ©lection dynamique d'utilisateurs correspondant Ã  tous les critÃ¨res. <br><br>  Les messages de groupe sont envoyÃ©s Ã  un groupe connu de destinataires, par exemple, Ã  tous les utilisateurs ou partenaires.  Les lettres sÃ©lectives et de groupe sont le plus souvent du marketing, l'envoi de ces lettres est initiÃ© manuellement ou selon un calendrier. <br><br>  Des lettres transactionnelles sont gÃ©nÃ©rÃ©es lorsqu'un utilisateur effectue une action.  Ces lettres comprennent, par exemple, des factures, des tickets ou des notifications d'Ã©tat de livraison, des lettres avec un code de rÃ©cupÃ©ration d'accÃ¨s, etc.  Les e-mails transactionnels sont toujours dÃ©clenchÃ©s.  Une compatibilitÃ© maximale est importante pour eux, ce qui signifie qu'ils doivent Ãªtre aussi simples que possible et qu'ils doivent Ãªtre testÃ©s sur un grand nombre de clients. <br><br>  Les lettres marketing encouragent l'utilisateur Ã  entreprendre n'importe quelle action, par exemple, il peut s'agir d'une offre de remises individuelles basÃ©e sur des achats antÃ©rieurs.  Dans ces lettres, des donnÃ©es transactionnelles peuvent Ãªtre utilisÃ©es, elles peuvent Ãªtre Ã  la fois dÃ©clenchÃ©es et massives - pÃ©riodiques ou ponctuelles.  Pour ces lettres, l'efficacitÃ© est plus importante, elle est gÃ©nÃ©ralement dÃ©terminÃ©e par les rÃ©sultats d'un test fractionnÃ©.  Certains aspects de la compatibilitÃ© peuvent Ãªtre sacrifiÃ©s pour l'efficacitÃ©. <br><br>  Les lettres de marketing de groupe, par exemple, les messages sur les offres saisonniÃ¨res, les promotions et les ventes, sont souvent envoyÃ©es Â«manuellementÂ» et ne font pas partie de votre application, mais vous pouvez (et devez) leur appliquer des principes de test gÃ©nÃ©raux. <br><br>  De plus, il peut y avoir des lettres de service gÃ©nÃ©rÃ©es par les employÃ©s pour les systÃ¨mes CRM, journalisation, audit ou DWH automatisÃ©s ou automatisÃ©s.  Ces lettres sont dÃ©clenchÃ©es, ce qui signifie qu'elles font Ã©galement partie de l'application et doivent Ãªtre testÃ©es. <br><br><a name="2"></a><h2>  Qui est impliquÃ© dans le processus de test et de contrÃ´le </h2><br><ol><li>  IngÃ©nieur AQ - participe Ã  toutes les Ã©tapes du processus. </li><li>  IngÃ©nieur rÃ©seau - Responsable de la configuration du rÃ©seau et de l'infrastructure de messagerie.  Un ingÃ©nieur rÃ©seau doit Ãªtre impliquÃ© dans la planification des tests d'infrastructure. </li><li>  Un spÃ©cialiste de la dÃ©livrabilitÃ© est une personne qui surveille la livraison des lettres, qui participe Ã©galement Ã  la surveillance des paramÃ¨tres techniques et administratifs de tous les messages envoyÃ©s et surveille l'avancement du processus d'envoi.  Il est responsable de s'assurer que les lettres envoyÃ©es atteignent le pourcentage maximum possible d'utilisateurs et ne tombent pas dans le spam, et pour cela le spÃ©cialiste doit avoir certaines connaissances et contacts.  Si des problÃ¨mes surviennent avec la remise des lettres, c'est lui qui doit comprendre la cause probable et l'Ã©liminer: soit en Ã©liminant les obstacles techniques;  ou changer quelque chose dans le contenu des lettres;  ou rÃ©soudre le problÃ¨me avec le service d'assistance du fournisseur de messagerie, auquel les lettres ne parviennent pas.  Un tel spÃ©cialiste (le cas Ã©chÃ©ant) devrait Ã©galement Ãªtre impliquÃ© dans la prÃ©paration d'une liste de contrÃ´le et le test de l'infrastructure qui gÃ©nÃ¨re les applications et les lettres.  Cependant, le processus de test lui-mÃªme doit Ãªtre sous le contrÃ´le du service QA. </li><li>  Marketing par e-mail - dÃ©termine l'efficacitÃ© des campagnes marketing.  Sous son contrÃ´le, le fractionnement des tests pour le public nÃ©cessaire aux mailings marketing a lieu.  Le marketing par e-mail contrÃ´le Ã©galement la segmentation de la base d'utilisateurs, la composition et la frÃ©quence des e-mails envoyÃ©s et la Â«prÃ©sentationÂ» visuelle de l'e-mail Ã  l'utilisateur. </li></ol><br>  Tous ces rÃ´les ne sont pas nÃ©cessairement assumÃ©s par un employÃ© distinct: le rÃ´le d'un responsable marketing peut Ãªtre jouÃ© par l'un des chefs de produit, et le rÃ´le d'un spÃ©cialiste de la dÃ©livrabilitÃ© peut Ãªtre jouÃ©, par exemple, par un employÃ© de support ou un ingÃ©nieur rÃ©seau.  Et dans les startups avec un degrÃ© de probabilitÃ© Ã©levÃ©, tout cela devra Ãªtre fait par une seule personne, et elles peuvent se rÃ©vÃ©ler Ãªtre un spÃ©cialiste de la qualitÃ©. <br><br><a name="3"></a><h2>  Courrier et transport postal </h2><br>  La structure du courrier est similaire Ã  un Ã©norme iceberg, et elle a deux niveaux.  Il existe plus d'une centaine de normes diffÃ©rentes rÃ©gissant le courrier, mais presque toutes appartiennent Ã  l'un de ces deux niveaux: <br><br>  <b>La partie sous-marine de l'iceberg</b> est un service rÃ©seau dont le protocole de base est le protocole d'application SMTP, dÃ©fini par la RFC 5321. Il est responsable de la livraison des lettres.  Pour remettre la lettre, une enveloppe dite SMTP est formÃ©e, qui comprend les adresses de l'expÃ©diteur et du rÃ©cepteur du niveau SMTP.  D'autres services rÃ©seau tels que DNS sont Ã©galement responsables de la remise de la lettre.  Le composant principal de l'infrastructure rÃ©seau est l'agent de transfert de courrier, ou l'abrÃ©viation MTA est utilisÃ©e plus souvent.  MTA est responsable de la gestion de la file d'attente de remise des messages et du processus de remise aux serveurs destinataires.  Les exemples de MTA sont Postfix, Sendmail, Exim, Microsoft SMTP service. <br><br>  Cette partie sous-marine de l'iceberg, qui comprend le MTA, les paramÃ¨tres DNS et d'autres paramÃ¨tres de rÃ©seau, nous l'appellerons infrastructure de messagerie ou infrastructure de livraison de messages. <br><br>  <b>La surface de l'iceberg</b> est la lettre elle-mÃªme.  La structure de base de la lettre est dÃ©finie dans la RFC 5322. La lettre se compose d'en-tÃªtes de service et d'une ou plusieurs parties avec des donnÃ©es.  Les donnÃ©es peuvent contenir du texte en texte brut et / ou HTML, des images en ligne ou des piÃ¨ces jointes de presque n'importe quel type. <br><br><a name="4"></a><h2>  L'interface de l'infrastructure de messagerie et les limites de l'application testÃ©e </h2><br>  L'infrastructure de messagerie, en rÃ¨gle gÃ©nÃ©rale, possÃ¨de une ou plusieurs interfaces avec lesquelles une lettre est envoyÃ©e (elle entre dans la file d'attente de remise du MTA).  Par exemple, le service de soumission SMTP, la fonction <code>mail()</code> en PHP, le transfert de donnÃ©es vers une application de messagerie externe ou sendmail, l'API de services internes ou externes (par exemple, GetResponse, SendPulse ou Amazon SES).  Nous considÃ©rerons ces interfaces comme faisant partie de l'infrastructure.  TrÃ¨s souvent, il y a une situation oÃ¹ l'application A prÃ©pare des donnÃ©es pour une lettre et une liste de destinataires, puis les transfÃ¨re Ã  l'application B via son API (pour le marketing de masse, cela peut Ãªtre fait manuellement via l'interface utilisateur - UI), et dÃ©jÃ  l'application B gÃ©nÃ¨re un message Ã©lectronique dans Format RFC 5322 et le met en file d'attente pour la livraison MTA.  Du point de vue de l'application A (et lors de son test), l'application B fera partie de l'infrastructure de messagerie.  L'API ou l'interface utilisateur de l'application B sera l'interface de l'infrastructure de messagerie pour l'application A.  Bien que du point de vue de l'application B, la situation sera diffÃ©rente et l'infrastructure de messagerie pour celle-ci sera constituÃ©e d'applications ou de protocoles rÃ©seau de niveau infÃ©rieur. <br><br><a name="5"></a><h2>  DÃ©finition des paramÃ¨tres testÃ©s </h2><br>  Lors du test de chaque application, il est important de mettre en Ã©vidence toutes les infrastructures de messagerie utilisÃ©es par celle-ci (il peut y en avoir plusieurs), et pour chaque infrastructure, de sÃ©lectionner les interfaces utilisÃ©es (il peut Ã©galement y en avoir plusieurs pour chaque infrastructure).  Pour chaque interface, la composition et le format des donnÃ©es qui y sont transfÃ©rÃ©es sont dÃ©terminÃ©s aussi prÃ©cisÃ©ment que possible, par exemple: texte de message en TEXT / HTML, texte de message en TEXT / PLAIN, sujet du message, nom du destinataire, adresse du destinataire, nom de l'expÃ©diteur, adresse de l'expÃ©diteur de la lettre (RFC5321.From ), l'adresse de l'expÃ©diteur du conducteur SMTP (RFC5322.mailfrom).  Ensuite, un ensemble d'exigences est dÃ©veloppÃ© pour chaque paramÃ¨tre (reprÃ©sentations, codages, valeurs limites, etc.), des mÃ©thodes de contrÃ´le pour chacun des paramÃ¨tres sont dÃ©terminÃ©es (de quelle maniÃ¨re le rÃ©sultat rÃ©el peut-il Ãªtre comparÃ© au rÃ©sultat attendu). <br><br><a name="6"></a><h2>  Structure typique d'une application gÃ©nÃ©ratrice </h2><br>  En rÃ¨gle gÃ©nÃ©rale, le produit que nous testons est responsable de la gÃ©nÃ©ration de la lettre et des donnÃ©es qu'elle contient.  Il s'agit gÃ©nÃ©ralement d'une application serveur (mais parfois cliente).  Il dÃ©finit la structure de la lettre, une partie des en-tÃªtes de service, les formats d'encapsulation des donnÃ©es, la prÃ©sentation des chaÃ®nes et l'encodage du texte.  Un exemple simple d'une telle application est un script qui forme une lettre et appelle la fonction <code>mail()</code> . <br><br>  Les principaux Ã©lÃ©ments de l'application Ã  maÃ®triser: <br><br><ul><li>  code responsable de la gÃ©nÃ©ration des en-tÃªtes et / ou de la structure des lettres si la structure des lettres est gÃ©nÃ©rÃ©e dynamiquement et / ou un modÃ¨le de lettre statique dÃ©crivant sa structure; </li><li>  disposition de la partie HTML de la lettre (idÃ©alement, il s'agit d'une entitÃ© distincte ou d'une partie du modÃ¨le / de la disposition de la lettre, mais qui peut Ãªtre cousue dans le code d'application); </li><li>  Substitution des donnÃ©es d'application dans une lettre (ou dans un modÃ¨le de lettre); </li><li>  intÃ©gration de l'application avec l'infrastructure de distribution de lettres, la justesse des paramÃ¨tres transfÃ©rÃ©s Ã  l'interface de l'infrastructure. </li></ul><br><a name="7"></a><h2>  Quoi et quand tester </h2><br>  Que cela nous plaise ou non, tout l'iceberg doit Ãªtre testÃ©.  Il existe plusieurs composants principaux qui nÃ©cessitent des tests: <br><br><a name="8"></a><h4>  1. Infrastructure de livraison </h4><br>  Les tests devraient mettre l'accent sur: la dÃ©livrabilitÃ© des lettres;  l'exactitude des enregistrements DNS, y compris les enregistrements PTR / FCrDNS, MX et A;  ParamÃ¨tres du protocole SMTP (HELO, utilisant TLS);  autorisation de lettre (SPF / DKIM / DMARC);  Adresses d'enveloppe SMTP (si elles ne sont pas gÃ©rÃ©es par l'application);  traitement correct des paramÃ¨tres d'entrÃ©e de l'interface de l'infrastructure;  suivi, comptabilitÃ© et traitement des lettres non remises. <br><br>  Il est nÃ©cessaire de tester l'infrastructure lors de la mise en Å“uvre initiale et chaque fois que des modifications sont apportÃ©es Ã  l'infrastructure elle-mÃªme (la configuration du MTA, du DNS ou des modifications du rÃ©seau) ou de l'interface d'envoi de lettres;  Utilisation d'un nouveau domaine, rÃ©seau ou API  Modifiez considÃ©rablement les caractÃ©ristiques des e-mails envoyÃ©s, comme leur langue, leur taille ou leur quantitÃ©.  Selon l'expÃ©rience, l'infrastructure a tendance Ã  changer sans dÃ©clarer la guerre, donc des tests de base devraient Ãªtre effectuÃ©s pÃ©riodiquement, mÃªme s'il n'y a aucune information sur des changements. <br><br>  Un ingÃ©nieur rÃ©seau et un spÃ©cialiste de la dÃ©livrabilitÃ© peuvent et doivent Ãªtre impliquÃ©s dans la prÃ©paration du plan et des listes de contrÃ´le des tests d'infrastructure. <br><br><a name="9"></a><h4>  2. L'application gÃ©nÃ©ratrice </h4><br>  Vous devez contrÃ´ler les adresses de l'enveloppe SMTP (si elles sont contrÃ´lÃ©es par l'application, c'est-Ã -dire transfÃ©rÃ©es Ã  l'interface - enveloppe-de, enveloppe-Ã ), les valeurs des en-tÃªtes de message de service (Date, Message-ID, Liste-DÃ©sabonnement, Soumission automatique, etc.) p.), autorisation de lettres (DKIM / DMARC), encodages MIME (base64, quoted-printable), l'exactitude gÃ©nÃ©rale du format de lettre, par exemple, l'absence de caractÃ¨res non ASCII dans les en-tÃªtes, la composition des donnÃ©es substituÃ©es, le dÃ©clenchement correct des dÃ©clencheurs, les mÃ©canismes de dÃ©sabonnement, les mÃ©canismes de suivi collecte de lettres et de statistiques (en-tÃªtes de postmaster, par exemple, Feedback-ID ou X-Mailru-Msgtype, ainsi que le suivi des pixels)  . <br><br>  Vous devez tester l'application au cours de son dÃ©veloppement, lors du changement de tous ses composants associÃ©s responsables de la gÃ©nÃ©ration et du stockage des donnÃ©es, avec des modifications importantes des modÃ¨les de lettres, lors du changement de l'infrastructure utilisÃ©e ou de son interface, ainsi que dans le cadre de rÃ©gressions gÃ©nÃ©rales. <br><br><a name="10"></a><h4>  3. ModÃ¨les de lettres structurelles et de mise en page (peuvent faire partie d'une application gÃ©nÃ©ratrice ou sont dÃ©veloppÃ©s sÃ©parÃ©ment) </h4><br>  La structure du message est vÃ©rifiÃ©e (Content-Type, Content-Disposition, imbrication des parties multiparties de la lettre, encodage de texte, paramÃ¨tres de chaÃ®ne), la valeur de la cible et les en-tÃªtes affichÃ©s (De, Ã€, RÃ©pondre Ã , Objet), le message est affichÃ© dans la liste des lettres et lors de la lecture dans diverses interfaces, microformats (par exemple, qu'un Ã©vÃ©nement de calendrier est reconnu comme un Ã©vÃ©nement de calendrier, ou un billet d'avion comme un billet d'avion), l'image de marque. <br><br>  Les modÃ¨les d'e-mail doivent Ãªtre testÃ©s chaque fois que vous effectuez au moins les moindres modifications, et Ã©galement sÃ©parÃ©ment, par exemple, dans une situation oÃ¹ des lettres pÃ©nÃ¨trent dans l'application avant que la partie serveur ne soit prÃªte. <br><br>  Il est recommandÃ© d'utiliser un spÃ©cialiste du marketing par courrier Ã©lectronique et de la dÃ©livrabilitÃ© pour rÃ©diger une liste de contrÃ´le pour tester un modÃ¨le de lettre. <br><br><a name="11"></a><h2>  Exigences de base pour vÃ©rifier l'infrastructure </h2><br>  L'adresse IP sÃ©lectionnÃ©e pour le serveur de messagerie doit Ãªtre aussi similaire que possible Ã  l'adresse IP du serveur de messagerie.  Il est recommandÃ© de le vÃ©rifier Ã  l'aide de l'utilitaire whois.  En particulier, l'adresse de l'expÃ©diteur ne doit pas appartenir Ã  un rÃ©seau pouvant Ãªtre perÃ§u comme dynamique;  Le rÃ©seau sÃ©lectionnÃ© doit avoir des contacts valides auxquels vous pouvez envoyer des rÃ©clamations;  le rÃ©seau doit Ãªtre utilisÃ© (avoir le statut ASSIGNÃ‰ dans RIPE).  L'adresse IP doit avoir un enregistrement PTR correctement configurÃ©.  Il peut Ãªtre configurÃ© indÃ©pendamment via le panneau de contrÃ´le d'hÃ©bergement ou en utilisant le service d'assistance du fournisseur.  L'enregistrement PTR doit pointer vers le vÃ©ritable nom d'hÃ´te et en mÃªme temps Ãªtre significatif, se rÃ©soudre Ã  la mÃªme adresse IP (la soi-disant vÃ©rification FCrDNS), ne pas rappeler le nom de l'hÃ´te dynamique et ne pas inclure un grand groupe de chiffres ou de caractÃ¨res.  Un bon exemple est mailserver.example.com. <br><br>  Chaque domaine utilisÃ© dans les adresses d'enveloppe ou les en-tÃªtes de message doit avoir un enregistrement MX valide pointant vers un enregistrement A de l'hÃ´te, qui, au minimum, peut traiter les messages concernant l'Ã©chec de la remise.  Pour MX, il n'est pas permis de se rÃ©fÃ©rer directement Ã  une adresse IP. <br><br>  ContrÃ´lez le passage de SPF, DKIM, DMARC.  SPF permet au propriÃ©taire du domaine de spÃ©cifier dans l'enregistrement TXT une liste de serveurs autorisÃ©s Ã  envoyer des e-mails avec des adresses de retour dans ce domaine.  Il est configurÃ© pour l'adresse utilisÃ©e dans l'enveloppe de (enveloppe SMTP) dans la section de gestion de la zone DNS du domaine.  DKIM permet de vÃ©rifier la paternitÃ© d'un message ou l'appartenance de son expÃ©diteur Ã  un domaine spÃ©cifique Ã  l'aide de technologies de signature numÃ©rique, qui sont ajoutÃ©es au message lui-mÃªme (dans son en-tÃªte DKIM-Signature).  En rÃ¨gle gÃ©nÃ©rale, une signature DKIM est configurÃ©e au niveau MTA (infrastructure).  DMARC dÃ©finit la politique de vÃ©rification du courrier entrant dans un domaine spÃ©cifique et les actions sur les lettres qui ne passent pas l'authentification SPF ou DKIM.  Lorsque vous essayez de violer cette politique, un rapport structurÃ© arrive avec des informations sur une telle tentative.  DMARC, ainsi que SPF, est publiÃ© en tant qu'enregistrement TXT dans la zone de domaine. <br><br>  VÃ©rifiez la livraison des lettres aux principaux services postaux - pour la Russie, Mail.Ru, Yandex, GMail, Microsoft (Hotmail / Outlook.com / Office365), Rambler, nic.ru.  Dans les lettres, vous devez vÃ©rifier l'exactitude de HELO;  disponibilitÃ© et passage des chÃ¨ques PTR / FCrDNS, SPF, DKIM et DMARC;  la validitÃ© des en-tÃªtes et des donnÃ©es qu'ils contiennent, en particulier le synchronisme des heures dans les dates et l'exactitude des fuseaux horaires. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2dc/8b4/9bc/2dc8b49bc147ae9369cbc232bd4dfdb3.png"><br><br>  La formation de certains paramÃ¨tres, par exemple l'autorisation, la dÃ©livrabilitÃ© et le spam, est influencÃ©e intÃ©gralement par tous les composants, mais il existe gÃ©nÃ©ralement des outils opÃ©rationnels distincts pour les contrÃ´ler - rapports DMARC et FBL, API de service postmaster, outils de suivi des e-mails et statistiques de livraison.  Les tests doivent prendre en compte le niveau de mise en Å“uvre des outils de suivi opÃ©rationnel dans l'entreprise - par exemple, en l'absence de suivi opÃ©rationnel des rapports DMARC, vous devez tester rÃ©guliÃ¨rement l'autorisation de courrier, en l'absence de suivi opÃ©rationnel de la dÃ©livrabilitÃ© - vÃ©rifier rÃ©guliÃ¨rement comment et oÃ¹ les lettres arrivent, mÃªme s'il n'y a pas de dÃ©veloppement liÃ© Ã  l'envoi de lettres pas effectuÃ©. <br><br>  Pour vÃ©rifier l'infrastructure, vous pouvez utiliser des services spÃ©cialisÃ©s, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mail-tester.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mxtoolbox.com</a> .  Les exigences d'infrastructure dÃ©taillÃ©es peuvent Ãªtre trouvÃ©es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet article</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ee/d3f/4d3/3eed3f4d3e9ad8df1edb1a90d115e318.png"><br><br><a name="12"></a><h2>  Conditions d'autorisation </h2><br>  La vÃ©rification du passage de SPF, DKIM, DMARC est gÃ©nÃ©ralement possible en utilisant l'en-tÃªte Authentication-Results sur le serveur du destinataire. <br><br>  VÃ©rifiez la validitÃ© de l'enregistrement SPF pour la syntaxe, la limite pour les requÃªtes DNS (par exemple, en utilisant mxtoolbox.com).  Lors de la constitution d'un SPF, toutes les sources de mailing doivent Ãªtre prises en compte (n'oubliez pas les systÃ¨mes CRM, toutes les infrastructures de livraison utilisÃ©es, y compris celles Ã  travers lesquelles des campagnes marketing ponctuelles sont menÃ©es).  Il est recommandÃ© de dÃ©finir les serveurs autorisÃ©s pour le domaine via la liste des rÃ©seaux ('ip4' / 'ip6').  SPF est vÃ©rifiÃ© pour l'adresse de l'expÃ©diteur Ã  partir de l'enveloppe SMTP.  VÃ©rifiez que le domaine d'enveloppe SMTP (enveloppe-de) correspond au domaine de l'en-tÃªte De.  Les erreurs SPF courantes sont rÃ©pertoriÃ©es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet article</a> . <br><br>  VÃ©rifiez l'enregistrement DNS DKIM, la validitÃ© et la composition de la signature DKIM.  VÃ©rifiez que vous utilisez une clÃ© DKIM d'au moins 1024 bits.  Mode de hachage recommandÃ© pour la signature DKIM: dÃ©tendu / dÃ©tendu.  Assurez-vous que tous les en-tÃªtes importants sont signÃ©s (De, Ã€, Objet, Date, ID de message, Version MIME, Type de contenu), que les en-tÃªtes de suivi (ReÃ§u, LivrÃ© Ã , Chemin de retour) ne sont pas signÃ©s et que DKIM est validÃ© pour services postaux de base.  Configurez le transfert vers l'un des services de messagerie vers un autre; DKIM ne doit pas "battre" sur les lettres transfÃ©rÃ©es.  VÃ©rifiez que le domaine de signature DKIM correspond au domaine de l'expÃ©diteur Ã  partir de l'en-tÃªte From. <br><br>  VÃ©rifiez DMARC pour les services de messagerie de base.  Recherchez les rapports DMARC, identifiez et dÃ©pannez SPF et DKIM pour toutes les adresses IP de votre infrastructure. <br><br>  VÃ©rifiez que les messages sont remis Ã  des serveurs externes Ã  l'aide du chiffrement (TLS).  Parfois, vous pouvez vÃ©rifier TLS par l'en-tÃªte Received sur le serveur du destinataire: par exemple, en spÃ©cifiant le protocole ESMTPS ou la prÃ©sence de paramÃ¨tres du formulaire <i>(version = TLS1_2 cipher = ECDHE-RSA-AES128-GCM-SHA256 bits = 128/128);</i>  indique la prÃ©sence de TLS. <br><br><a name="13"></a><h2>  VÃ©rification de l'application gÃ©nÃ©ratrice </h2><br><a name="14"></a><h4>  Exigences d'adresse postale </h4><br>  <b>Adresses d'enveloppe</b> <br>  Nous commenÃ§ons la vÃ©rification de l'application gÃ©nÃ©ratrice avec les adresses dans l'enveloppe SMTP. <br><br>  Les adresses d'enveloppe sont des adresses du niveau de l'infrastructure de messagerie.  Ils ne sont pas visibles pour l'utilisateur, mais importants pour la livraison, car dans quelle boÃ®te aux lettres la lettre est envoyÃ©e, elle est dÃ©terminÃ©e prÃ©cisÃ©ment par l'adresse de l'enveloppe. <br><br>  L'adresse du destinataire dans une enveloppe (enveloppe-Ã , alias RCPT TO :) est l'adresse Ã  laquelle la lettre sera effectivement livrÃ©e. <br><br><ul><li>  pour toutes les lettres Ã  l'exception de l'inscription, l'adresse doit Ãªtre lÃ©galement signÃ©e et validÃ©e pour l'envoi conformÃ©ment aux exigences administratives. </li><li>  pour les newsletters, l'adresse doit Ãªtre Â«en directÂ», les adresses auxquelles les lettres ne peuvent pas Ãªtre livrÃ©es rÃ©guliÃ¨rement doivent Ãªtre marquÃ©es comme inactives, aucun courrier ne doit leur Ãªtre envoyÃ©.  Mais certaines catÃ©gories de lettres (par exemple, la rÃ©cupÃ©ration d'accÃ¨s) peuvent Ã©galement devoir Ãªtre envoyÃ©es Ã  des adresses prÃ©cÃ©demment marquÃ©es comme inactives. </li></ul><br>  Adresse de l'expÃ©diteur dans une enveloppe SMTP (gÃ©nÃ©ralement appelÃ©e enveloppe-de, smtp.mailfrom ou Return-Path) - des messages seront livrÃ©s Ã  cette adresse concernant l'impossibilitÃ© de remettre une lettre et des rÃ©ponses automatiques.  Cette adresse n'est pas visible pour l'utilisateur.  Cette adresse est Ã©galement utilisÃ©e pour l'autorisation SPF.  Nous vÃ©rifions que: <br><br><ul><li>  l'adresse est disponible; </li><li>  Ce n'est pas l'adresse de l'employÃ© et il n'est pas redirigÃ© vers lui pour exclure les rÃ©ponses automatiques, les messages d'inaccessibilitÃ©, etc .; </li><li>  Il est traitÃ© par un script qui marquera les adresses des utilisateurs inaccessibles comme inactives; </li><li>  l'adresse peut Ãªtre gÃ©nÃ©rÃ©e automatiquement, c'est-Ã -dire  unique Ã  chaque lettre; </li><li>  Une lettre Ã  cette adresse ne doit pas conduire Ã  la gÃ©nÃ©ration d'une lettre de rÃ©ponse, par exemple un message concernant un dÃ©bordement de boÃ®te. </li></ul><br>  <b>Adresses d'en-tÃªte de messagerie</b> <br><br>  Ces adresses sont soit directement visibles par l'utilisateur, soit utilisÃ©es lors de la rÃ©ponse Ã  une lettre. <br><br>  Adresse de l'expÃ©diteur (Ã  partir de :) L'en-tÃªte est l'adresse et le nom de l'expÃ©diteur affichÃ©s dans la liste des lettres et lors de la lecture d'une lettre.  Nous vÃ©rifions que: <br><br><ul><li>  Il s'agit d'une adresse conviviale Â«lisible par l'hommeÂ» qui identifie l'entreprise. </li><li>  Il contient non seulement le courrier Ã©lectronique, mais Ã©galement le nom de l'expÃ©diteur. </li><li>  n @ply est possible, mais seulement si nous voulons souligner que nous ne nous attendons pas Ã  recevoir une rÃ©ponse Ã  la lettre et qu'elle ne sera pas lue.  Il vaut mieux reproduire cette idÃ©e dans le texte de la lettre. </li><li>  En prÃ©sence de caractÃ¨res non ASCII (par exemple cyrillique), le nom de l'expÃ©diteur doit Ãªtre codÃ© conformÃ©ment Ã  MIME, le domaine en prÃ©sence de caractÃ¨res non ASCII doit Ãªtre codÃ© en Punycode. </li><li>  Les lettres de la mÃªme catÃ©gorie doivent avoir la mÃªme adresse; l'utilisation d'adresses gÃ©nÃ©rÃ©es automatiquement n'est pas autorisÃ©e.  Cela est dÃ» au fait que From: est le plus souvent utilisÃ© par les gens pour trier les lettres dans des dossiers Ã  l'aide de filtres. </li><li>  L'adresse doit Ãªtre diffÃ©rente (de prÃ©fÃ©rence dans des sous-domaines diffÃ©rents) pour les lettres transactionnelles, marketing et urgentes (telles que les lettres du service d'assistance).  Cela est Ã©galement dÃ» au fait que l'utilisateur peut marquer les e-mails marketing comme spam ou les filtrer dans un dossier illisible. </li><li>  L'adresse de provenance et l'adresse d'enveloppe SMTP doivent Ãªtre dans le mÃªme domaine ou dans des sous-domaines du mÃªme domaine d'organisation afin de passer le SPF dans le DMARC. </li><li>  L'adresse doit provenir du domaine de l'organisation.  Il est inacceptable d'utiliser des services de messagerie gratuits et d'autres domaines de messagerie publique dans De, car ces mailings ne passeront pas l'authentification SPF et DKIM dans le cadre de DMARC. </li></ul><br>  Adresse de rÃ©ponse - les rÃ©ponses Â«manuellesÂ» seront envoyÃ©es Ã  cette adresse lorsque l'utilisateur rÃ©pond Ã  la lettre.  Elle est facultative: si elle est absente, l'adresse de From est utilisÃ©e pour la rÃ©ponse.  VÃ©rifiez que RÃ©pondre Ã : <br><br><ul><li>  Il peut Ãªtre gÃ©nÃ©rÃ© automatiquement, c'est-Ã -dire  unique Ã  la lettre (permet de savoir Ã  quelle lettre la rÃ©ponse est arrivÃ©e). </li><li>  Il ne doit pas tomber dans la boÃ®te de l'employÃ© pour Ã©viter de rÃ©pondre aux appels, mais devrait idÃ©alement Ãªtre Â«enveloppÃ©Â» dans CRM. </li><li>  Il peut gÃ©nÃ©rer une rÃ©ponse automatique CRM standard, mais il ne doit pas gÃ©nÃ©rer quoi que ce soit de superflu, par exemple, des messages sur un dÃ©bordement de boÃ®te.  Lors de la gÃ©nÃ©ration de rÃ©ponses automatiques, des mesures doivent Ãªtre prises pour Ã©viter le bouclage, elles sont rÃ©pertoriÃ©es dans la RFC 3834. </li><li>  Il peut provenir de n'importe quel domaine qui ne coÃ¯ncide pas nÃ©cessairement avec From, mais cela effraie parfois les utilisateurs lorsqu'ils rÃ©pondent. </li><li>  Peut Ãªtre absent, alors l'adresse De remplit ses fonctions. </li><li>  En plus de l'adresse, le nom de l'expÃ©diteur est indiquÃ©. </li></ul><br>  Pour adresser: <br><br><ul><li>  Il doit contenir l'e-mail du destinataire (sinon il effraie le destinataire du message et protÃ¨ge l'anti-spam). </li><li>  IdÃ©alement, il devrait contenir le nom du destinataire.  Mais si le nom est inconnu ou douteux (par exemple, l'adresse n'a pas encore Ã©tÃ© confirmÃ©e), il est prÃ©fÃ©rable de ne pas l'indiquer (quelqu'un peut entrer l'adresse de quelqu'un d'autre avec un mauvais nom, et le destinataire peut Ãªtre offensÃ© par vous). </li></ul><br><a name="15"></a><h4>  Exigences de l'en-tÃªte de l'e-mail </h4><br>  L'encodage rÃ©el du texte doit correspondre Ã  celui indiquÃ© dans l'en-tÃªte.  Il est conseillÃ© d'utiliser un seul codage dans tous les en-tÃªtes et parties de la lettre.  Il est recommandÃ© d'utiliser UTF-8 comme Ã©tant largement pris en charge.  L'encodage est indiquÃ© dans les en-tÃªtes Content-Type et dans la balise &lt;META&gt; de la partie HTML. <br><br>  Les en-tÃªtes From:, Message-ID: et Date: doivent Ãªtre formÃ©s directement dans le script pour l'envoi de la lettre (et selon les normes - avec le texte de la lettre) et toujours dans le format correct.  S'ils sont absents ou mal formÃ©s, l'un des serveurs de transit peut ajouter ces en-tÃªtes, ce qui entraÃ®ne une violation de l'intÃ©gritÃ© de la signature DKIM. <br><br>  Les caractÃ¨res de 8 bits dans les en-tÃªtes, y compris la ligne d'objet (Objet) et les noms des fichiers joints (Content-Type et Content-Disposition), doivent Ãªtre absents;  Tous les caractÃ¨res non ASCII, y compris cyrillique, doivent Ãªtre codÃ©s en imprimable entre guillemets ou en base64. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/910/ab6/456/910ab6456ccd1ed4ef29f1725dab4bdd.png"><br><br><a name="16"></a><h4>  Conditions requises pour la structure de la lettre </h4><br>  Pour la partie HTML de la lettre, il est souhaitable de former une partie alternative (texte brut).  Il est Ã©galement nÃ©cessaire de vÃ©rifier la conformitÃ© et la lisibilitÃ© de la partie en texte brut de la lettre (le cas Ã©chÃ©ant) et la structure gÃ©nÃ©rale de la lettre. <br><br>  Selon la RFC 5322, la longueur de ligne dans une lettre ne doit pas dÃ©passer 998 caractÃ¨res 8 bits.  Veuillez noter qu'en UTF-8, un personnage peut occuper plusieurs octets.  Le terminateur des lignes dans l'e-mail est une paire de CRLF (&lt;cr&gt; ascii 13, lf&gt; ascii 10), qui occupe 2 octets.  Vous devez vÃ©rifier l'exactitude du terminateur de chaÃ®ne, car les lettres sont souvent envoyÃ©es Ã  l'aide d'un script Unix, et dans Unix, le terminateur de ligne est un caractÃ¨re lf unique - il s'agit d'une erreur pour le courrier Ã©lectronique.  Vous devez Ã©galement vÃ©rifier si les terminateurs de chaÃ®ne rompent les caractÃ¨res codÃ©s UTF-8: vous ne pouvez pas autoriser la prÃ©sence d'un terminateur de chaÃ®ne entre deux octets du mÃªme caractÃ¨re, par exemple cyrillique.          ,     base64. <br><br>        â€”      Â«Content-Disposition: inlineÂ»,   ,   ,  Â«Content-Disposition: attachmentÂ»,     . <br>  ,  ,    :  ,      multipart-   (mixed, alternative, related),  multipart/mixed       , multipart/related â€”    , multipart/alternative â€”   plain text-  HTML-.     ,       -,    : <br><br> multipart/alternative <br> â€” text/plain <br> â€” text/html <br><br>   , text/plain    text/html  multipart/related.    ,     HTML-,       -   â€”  plain-. <br><br>     -      : <br><br> multipart/alternative <br> â€” text/plain <br> â€” multipart/related <br> â€”â€” text/html <br> â€”â€” image/â€¦ (-) <br> â€”â€” image/â€¦ (-) <br><br> -   Content-Disposition: inline     multipart/related-. <br><br>    ,     ,   ,    : <br><br> multipart/mixed <br> â€” multipart/alternative <br> â€”â€” text/plain <br> â€”â€” multipart/related <br> â€”â€”â€” text/html <br> â€”â€”â€” image/png <br> â€”â€”â€” image/png <br>  ... <br> â€” application/octet-string (content-disposition: attachment) <br> â€” application/octet-string (content-disposition: attachment) <br>  ... <br><br> (multipart/related-  multipart/alternative-     ,     multipart/mixed-) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b63/896/ef4/b63896ef4964a08327693deae2192641.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ab/123/d6d/7ab123d6d0398601b7c62bd1ae57d59a.png"><br><br><a name="17"></a><h4>   URI </h4><br>  URI (  src, href,   ..)       ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://example.com/somepath</a> ).       (/somepath)    (//example.com/somepath),    , ..        file://. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/852/64f/c5585264ffa6e6f15246000cd26f9d00.png"><br><br><ul><li>    ASCII- ( , )  URI       percent encoding. </li><li> ,    (..    URL,     ),        &lt;&gt;,         .  -    ,      .  href  A        ,  -          .         Â«Â»,     . </li><li>     htt://, htts://  milto:. </li><li>           http://   htts://. </li><li>      (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">example.com</a> :8080/somepath), ..     . </li><li>     HTML-     -    (, ,    ..)      , ..   -      ,    ;           ,        ,     ,     ( -         GET-,       POST  PUT). </li><li>      List-Unsubscribe, ,      -  , ..          . </li><li>     ,            ,    ,     (,   ).           .  ,    ,   ,    ,   ,     . </li><li>  Parce que  URI   ,       URI  data:.            URI. </li><li>     ,      . ,        ,          . </li><li>       -     . </li></ul><br><a name="18"></a><h4>     </h4><br>     ? <br><br><blockquote>            .         â€”   (XSS, Crossite scripting),   (interface spoofing), DOM clobbering,   /   (, IP-      )  ..,                 .  ,       .     : <br><br><ul><li>   , </li><li>   / , </li><li>    , </li><li>        (    ), </li><li>       (..      )       , </li><li>  HTML-     ( Microsoft Exchange / Outlook  RTF, -       Outlook      ), </li><li>          . </li></ul><br>      ,   -  URI cid://,     . , Mozilla Thunderbird   cid://   . </blockquote><br>      -     -       . <br><br>          . ,          URI, -    , -   ,       .        :          ,     (  ,               ). <br><br>      : <br><br><ul><li>      , ,  , ,    . </li><li>          . </li><li>   , , ,          .      (      ).      .     ,        . </li><li>       ,   . </li><li>  ,    ,  ..   -,    - ,  c,   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">      </a> ( ,   , ,  ,  -       ). ,             ,    . </li><li>       . </li><li>    , ,  , .        (, -  ),   , ,  ,     . </li><li>               . </li><li>   : <br><ul><li>    :  Â« Â» Mail.Ru, Yandex, Gmail,   Rambler  Outlook.com; </li><li>      ; </li><li>   ,    IMAP,     ,    iPhone, Pixel (  Android), Samsung (   Android), MIUI (    Android-); </li><li>   : Chrome, Firefox, Edge, Internet Explorer, Opera  .; </li><li>   ( ),  Thunderbird, Outlook  Apple Mail,  The Bat!  Opera Mail; </li><li>     - (Exchange,  Roundcube, Communigate, Zimbra, SquirrelMail) â€”  B2B-; </li><li>       Retina-,        . </li></ul></li><li>          : <br><ul><li>   , SPF/DKIM/DMARC. </li><li>   :    ,  . </li><li>     : ,    ,     ,      (,       Â«Â»). </li><li>    :    ,       ..,         . </li><li>        . </li><li>     . </li><li>  . </li><li>   ,  . ,        ,    - ,       ,             . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dfd/d33/a08/dfdd33a0855e3f55c1ac96534b66a716.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/964/e13/e6a964e1366a217ecd60bdb41f584e2f.png"></li></ul></li><li>      (  )  ,      .        ,      . </li><li>  ,     ,   , ..       ,  , , Â«Â»   . </li><li>       . ,    DKIM-   -    (  DNS   DKIM-,   ), -    (   ,    ,      From, Date  Message-ID)  -   (  ,   ,   ).   Â«Â»    ,        . </li></ul><br><a name="19"></a><h2>  - </h2><br>       ,      ,     . <br><br>   ,     ,    (   ).       .       ,     ,        . <br><br>      CTR   â€”         .  postmaster.mail.ru      .        (),     . CTR &lt; 10% â€”    ,    .    CTR &gt; 30%.        CTR          (Â«Â»)   .      (   ).          ,   â€”   .  ,       ,  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://help.mail.ru/developers/mailing_rules/technical</a> . <br><br>   -       .           CTR        .          (      ).             Â«Â» â€”    10 000 ,       . <br><br>  :      , ,      .       Â« Â»    . ,         . <br><br> <i>          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">z3apa3a</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">s4ever</a> .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">EdT</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">4Alexander</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419591/">https://habr.com/ru/post/fr419591/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419581/index.html">Quels projets Ã  but non lucratif sont intÃ©ressants pour Y Combinator</a></li>
<li><a href="../fr419583/index.html">Comment la Russie a ratÃ© l'apogÃ©e du DVD, mais rattrapÃ© l'Occident avec l'avÃ¨nement de l'Internet haut dÃ©bit</a></li>
<li><a href="../fr419585/index.html">PWA est facile. Bonjour habr</a></li>
<li><a href="../fr419587/index.html">Des compÃ©titions qui changent le monde. 1567 - 2035</a></li>
<li><a href="../fr419589/index.html">Nous utilisons AMP comme une bibliothÃ¨que polyvalente pour crÃ©er des sites dynamiques rapides</a></li>
<li><a href="../fr419593/index.html">Lunettes daltoniennes: comment Ã§a marche et quelles sont les difficultÃ©s de sÃ©lection</a></li>
<li><a href="../fr419599/index.html">Java REST Ã  HeadHunter School of Programmers</a></li>
<li><a href="../fr419601/index.html">Un exemple de conception d'un appareil numÃ©rique "sur les doigts"</a></li>
<li><a href="../fr419603/index.html">Contexte: les entreprises qui produisent des robots</a></li>
<li><a href="../fr419611/index.html">De l'Allemagne avec amour: le pionnier de la tÃ©lÃ©phonie IP arrive en Russie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>