<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ üëà üåè L'avenir de WebAssembly comme ¬´arbre de comp√©tences¬ª üêÆ üòò üí§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Certaines personnes ont mal compris WebAssembly. Il y a ceux qui croient que puisque les navigateurs prennent d√©j√† en charge WebAssembly (depuis 2017)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'avenir de WebAssembly comme ¬´arbre de comp√©tences¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/infopulse/blog/428347/">  Certaines personnes ont mal compris WebAssembly.  Il y a ceux qui croient que puisque les navigateurs prennent d√©j√† en charge WebAssembly (depuis 2017), alors tout est pr√™t.  Pas encore proche, seul le MVP (produit minimalement viable) est pr√™t.  Je peux deviner d'o√π vient la racine de cette erreur: apr√®s la sortie de MVP, ses d√©veloppeurs ont promis de maintenir la compatibilit√© descendante au niveau de ¬´tout code √©crit maintenant fonctionnera √† l'avenir¬ª.  Mais cela ne signifie pas que le d√©veloppement de WebAssembly est termin√©, pas du tout!  De nombreuses fonctionnalit√©s sont en cours de d√©veloppement et devraient √™tre d√©velopp√©es dans un avenir proche.  Et quand ils seront mis en ≈ìuvre, tout changera beaucoup. <br><br>  Vous pouvez essayer d'imaginer toutes ces fonctionnalit√©s sous la forme d'un arbre de comp√©tences dans certains jeux.  Nous avons quelques "basiques" (fonctionnalit√©s d√©j√† impl√©ment√©es) et un arbre entier avec de nombreuses branches et feuilles qui s'ouvriront avec le temps, nous donnant de plus en plus de puissance. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c6f/7a8/30f/c6f7a830f86adac22fb26212840d79e6.png" alt="image"></a> <br>  Voyons ce que nous avons d√©j√† et ce qu'il nous reste √† d√©couvrir. <br>  ( <b>Sous la coupe beaucoup d'images, le trafic</b> ) <br><a name="habracut"></a><br><h2>  Produit minimum viable (MVP) </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e24/fc2/578/e24fc257831cdd6a1e1ff997eb6e31a4.png" alt="image"><br>  Au tout d√©but de l'histoire de WebAssembly se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Emscripten</a> , qui a permis de compiler du code C ++ en code JavaScript.  Cela nous a permis de transf√©rer un grand nombre de biblioth√®ques C ++ dans le monde du Web, sans lesquelles il serait impossible d'ex√©cuter du code de niveau sup√©rieur.  Le code JS g√©n√©r√© √©tait loin d'√™tre id√©al et fonctionnait lentement (par rapport √† sa version native).  Mais tout de m√™me, les ing√©nieurs de Mozilla ont trouv√© deux fa√ßons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de l'</a> acc√©l√©rer.  Le principal √©tait l'allocation d'un sous-ensemble du langage qui pouvait √™tre ex√©cut√© √† des vitesses comparables aux vitesses d'ex√©cution de code natif.  Ce sous-ensemble a √©t√© appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">asm.js.</a> <br><br>  Les d√©veloppeurs d'autres navigateurs ont remarqu√© et appr√©ci√© la vitesse de asm.js, tous les principaux navigateurs ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">obtenu</a> son soutien.  Mais cela n'a pas mis fin √† l'histoire.  Ce n'√©tait que le d√©but.  Il y avait encore de la place pour travailler plus vite.  Mais ils d√©passaient d√©j√† Javascript.  Il s'est av√©r√© que le code natif (par exemple, en C ++) devait √™tre compil√© non pas en Javascript, mais dans autre chose.  En quelque chose de nouveau, cr√©√© sp√©cifiquement comme une alternative rapide √† JS.  Et c'est ainsi que WebAssembly a vu le jour. <br><br>  Qu'est-ce qui est inclus dans la premi√®re version de WebAssembly?  Qu'est-ce qui a suffi pour obtenir le fier titre de ¬´produit minimum viable¬ª? <br><br><h3>  Comp√©tence: plateforme de compilation cible </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/8a4/363/557/8a43635574df19b6115ac43061f809ab.png" alt="image"><br><br>  Les programmeurs qui ont travaill√© sur WebAssembly ont compris que leur t√¢che n'√©tait pas de prendre en charge uniquement C ou C ++.  La t√¢che consistait √† donner la possibilit√© de compiler du code dans n'importe quelle langue dans WebAssembly.  Il devait s'agir d'un tel ¬´assembleur¬ª, qui devait √™tre ex√©cut√© dans le navigateur, tout comme le code machine de l'application de bureau est ex√©cut√©, par exemple, sur la plate-forme x86.  Mais ce nouveau langage ne devrait s'appuyer sur aucune plateforme sp√©cifique, son objectif devrait √™tre une plateforme abstraite d'un niveau sup√©rieur, dont la mise en ≈ìuvre sp√©cifique d√©pendrait d√©j√† de l'ensemble des instructions utilis√©es sur ce mat√©riel. <br><br><h3>  Comp√©tence: ex√©cution rapide de code </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/1de/2ef/f15/1de2eff156f50e2791dee8b2fbf6c794.png" alt="image"><br><br>  Tout devait fonctionner rapidement.  Sinon, pourquoi s'emb√™ter avec toute cette histoire?  En fin de compte, l'utilisateur devrait √™tre en mesure d'ex√©cuter des applications vraiment ¬´lourdes¬ª, de pouvoir jouer aux meilleurs jeux dans le navigateur, etc. <br><br><h3>  Comp√©tence: Compacit√© </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/a9f/38c/906/a9f38c9069761e4e6c5619641b159399.png" alt="image"><br><br>  Il est important non seulement la vitesse d'ex√©cution du code, mais aussi la vitesse de son chargement.  Les utilisateurs sont habitu√©s aux applications de bureau qui se lancent tr√®s rapidement (car elles sont install√©es localement et disposent de toutes les ressources n√©cessaires).  Les applications Web s'ex√©cutent √©galement relativement rapidement car elles ne chargent pas autant de ressources √† la fois.  Et cela pose un nouveau d√©fi pour nous: si nous voulons cr√©er un nouveau type d'application Web avec une base de code aussi grande que celle de bureau classique, mais t√©l√©chargeable sur Internet, le code doit √™tre aussi compact que possible. <br><br><h3>  Comp√©tence: acc√®s √† la m√©moire </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/350/e55/239/350e55239fe24dc00799045dce0bb36e.png" alt="image"><br><br>  Nos nouvelles applications devront √©galement travailler avec la m√©moire d'une mani√®re l√©g√®rement diff√©rente de celle du code JavaScript.  Besoin d'un acc√®s direct aux blocs de m√©moire.  Cela est d√ª √† la particularit√© des langages C et C ++, dans lesquels il existe des pointeurs.  Un pointeur est, en gros, une variable qui contient une adresse en m√©moire.  Une application peut lire des donn√©es √† cette adresse, les modifier et m√™me utiliser l'arithm√©tique vers un pointeur pour ¬´avancer¬ª en m√©moire √† partir de l'adresse sp√©cifi√©e.  Une √©norme quantit√© de code C / C ++ utilise des pointeurs pour augmenter l'efficacit√© de son travail, la cr√©ation d'une plate-forme cible pour un tel code est impossible sans le support des pointeurs. <br><br>  Mais nous ne pouvons permettre √† aucun morceau de code t√©l√©charg√© sur Internet d'avoir un acc√®s direct √† la m√©moire de notre processus - c'est trop dangereux.  Nous devrons cr√©er un environnement qui, d'une part, permet au code natif compil√© dans WebAssembly de croire qu'il a un acc√®s direct √† la m√©moire, mais d'autre part, cela limitera strictement la zone dans laquelle il est autoris√© √† manipuler des donn√©es. <br><br>  Pour cela, WebAssembly utilise le ¬´mod√®le de m√©moire lin√©aire¬ª.  Ceci est impl√©ment√© √† l'aide de TypedArrays - quelque chose comme un tableau en JavaScript, mais ne contenant qu'un ensemble s√©quentiel d'octets en m√©moire.  Lorsque vous voulez y mettre quelque chose, vous utilisez l'acc√®s √† l'√©l√©ment par index (qui peut √™tre une adresse en m√©moire).  Ainsi, ce tableau ¬´pr√©tend¬ª √™tre un bloc de m√©moire pour le code C ++. <br><br><h3>  Nouvelle r√©alisation! </h3><br>  Ainsi, avec tout ce qui pr√©c√®de, les gens pourront enfin ex√©cuter l'application de bureau dans un navigateur avec environ les m√™mes performances que si elle √©tait native.  C'est √† propos de cet ensemble de fonctionnalit√©s et a √©t√© appel√© le "produit minimum viable" (MVP). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a9/c6e/ac9/3a9c6eac96976ad0cd5c5893b47e9ccc.png" alt="image"><br><br>  √Ä ce stade, certaines applications pourraient en effet d√©j√† √™tre cr√©√©es sous WebAssembly et gagner de l'argent dans le navigateur.  Mais il y avait encore un long chemin √† parcourir. <br><br><h2>  Applications de bureau lourdes </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/393/bfe/b91/393bfeb91e6a174d57e9a8896fd2f912.png" alt="image"><br><br>  La prochaine √©tape importante devrait √™tre la possibilit√© de lancer de tr√®s grandes applications de bureau.  Pouvez-vous imaginer la version compl√®te de Photoshop fonctionnant dans un navigateur?  Et vous ne l'avez pas install√©, juste ouvert le lien - et maintenant vous avez toute la puissance de 100% de ce produit, √† vitesse native, la derni√®re version avec toutes les mises √† jour et correctifs, sur n'importe quel appareil. <br><br>  Et nous n'en sommes pas si loin - des exemples commencent d√©j√† √† appara√Ætre.  Par exemple, AutoCAD.  Et aussi Adobe Lightroom.  Mais soyons honn√™tes - tout n'est pas pr√™t dans l'impl√©mentation actuelle de WebAssembly pour lancer des applications vraiment volumineuses.  Les goulots d'√©tranglement sont √©tudi√©s et corrig√©s ici m√™me au moment o√π vous lisez cet article. <br><br><h3>  Comp√©tence: multithreading </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/7c2/779/cac/7c2779cac9e06ed2a7ea21469efcb54e.png" alt="image"><br><br>  De toute √©vidence, nous avons besoin du multithreading.  Les ordinateurs modernes ont de nombreux c≈ìurs.  Nous devons pouvoir les utiliser. <br><br><h3>  Comp√©tence: SIMD </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/2ec/c98/11c/2ecc9811c01888acb643fb14fe70c7b3.png" alt="image"><br><br>  En plus du multithreading, il existe une autre technologie qui permet une mise en ≈ìuvre plus efficace du traitement parall√®le des donn√©es.  Il s'agit du SIMD: traitement par une seule instruction de plusieurs blocs de donn√©es √† la fois.  Un aspect important n√©cessaire pour un assemblage Web vraiment rapide. <br><br><h3>  Comp√©tence: adressage 64 bits </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/0fd/e7e/26d/0fde7e26d23106765832788445d65f88.png" alt="image"><br><br>  Une autre caract√©ristique importante de l'architecture mat√©rielle moderne, qui n'est pas encore disponible dans WebAssembly, est la prise en charge de l'adressage de m√©moire 64 bits.  Tout est simple: avec les adresses 32 bits, vous ne pouvez utiliser que 4 Go de m√©moire (ce qui est tr√®s petit pour les gros programmes), mais avec les adresses 64 bits, cela repr√©sente d√©j√† jusqu'√† 16 exaoctets (c'est beaucoup pour les logiciels modernes).  Bien s√ªr, non seulement le maximum th√©orique est important, mais aussi le maximum pratique (combien de m√©moire l'OS vous donnera).  Mais sur la plupart des appareils modernes, il y a d√©j√† 4 Go ou plus de RAM et ce nombre augmentera. <br><br><h3>  Comp√©tence: Compilation de flux </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/477/392/ade/477392ade953503f39a7f98214190ef1.png" alt="image"><br><br>  Nous devons non seulement ex√©cuter rapidement les applications.  Nous devons √©galement r√©duire l'intervalle de temps entre le d√©but de son t√©l√©chargement sur le r√©seau et son d√©marrage.  La compilation de flux vous permet de d√©marrer le traitement d'un fichier WebAssembly avant qu'il ne soit finalement t√©l√©charg√©.  Nous examinons les instructions lors du t√©l√©chargement sur le r√©seau.  Ainsi, le chargement et la compilation vont en parall√®le.  Dans le code Firefox, nous avons pu atteindre une vitesse de compilation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sup√©rieure √† la vitesse de t√©l√©chargement</a> - c'est-√†-dire que le temps de traitement de certains codes de N octets s'est av√©r√© √™tre inf√©rieur au temps de t√©l√©chargement de ce code sur le r√©seau.  Les d√©veloppeurs d'autres navigateurs travaillent √©galement sur la compilation de flux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7a/ad8/71f/c7aad871f04688b8f1d93480c48e6a74.png" alt="image"><br><br>  Une chose li√©e √† la compilation en streaming est l'utilisation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux compilateurs</a> .  L'un d'eux (d√©crit ci-dessus) fonctionne rapidement et vous permet de lancer imm√©diatement le code t√©l√©charg√©.  Cependant, il n'en effectue pas toutes les optimisations th√©oriquement possibles, car cela demande plus de temps.  Ces optimisations sont effectu√©es par un autre compilateur travaillant en arri√®re-plan.  D√®s qu'il a termin√© son travail, une version en m√©moire en remplace une autre puis fonctionne √† la place. <br><br>  Nous obtenons donc √† la fois le d√©marrage rapide de l'application et son fonctionnement efficace. <br><br><h3>  Comp√©tence: mise en cache </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/287/101/9b4/2871019b4d4d50c27713f67c9fe6ccd9.png" alt="image"><br><br>  Si nous avons t√©l√©charg√© et compil√© du code WebAssembly par le compilateur d'optimisation, cela n'a aucun sens de faire de m√™me lors du chargement de ce code dans un autre onglet (ou la prochaine fois que le navigateur est ouvert, √† condition que l'application reste inchang√©e).  Le code compil√© peut (et doit) √™tre mis en cache puis utilis√© √† partir du cache. <br><br><h3>  Comp√©tence: autres am√©liorations </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/85f/14f/157/85f14f1575ad1327cb1d0afa9e3ed353.png" alt="image"><br><br>  Maintenant, il y a beaucoup de discussions sur les autres am√©liorations possibles et sur quoi les efforts des d√©veloppeurs devraient √™tre concentr√©s.  Quelque chose va certainement se r√©aliser, quelque chose pas imm√©diatement, quelque chose ne se produira pas du tout.  Avec votre permission, je d√©finirai tous ces points dans la classe g√©n√©rale ¬´autres am√©liorations¬ª, et ce qui y entrera, nous comprendrons avec le temps. <br><br><h3>  O√π en sommes-nous maintenant? </h3><br>  Quelque part ici: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a04/e7b/b13/a04e7bb13ef5b52fd1f0a5a1af4c298d.png" alt="image"><br><br><h4>  Multithreading </h4><br>  Pour le multithreading, nous avons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plan</a> presque pr√™t, mais l'un de ses √©l√©ments cl√©s ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SharedArrayBuffers</a> ) a √©t√© forc√© d'√™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©sactiv√©</a> au d√©but de cette ann√©e.  Il sera bient√¥t r√©activ√© et nous pourrons continuer. <br><br><h4>  SIMD </h4><br>  <a href="">D√©velopp√©</a> activement en ce moment. <br><br><h4>  Adressage 64 bits </h4><br>  Pour le <a href="">wasm-64</a> , nous avons une id√©e assez claire de la fa√ßon dont les choses devraient fonctionner.  Nous √©tions bas√©s sur des approches d'architecture x86 et ARM. <br><br><h4>  Compilation de flux </h4><br>  Dans Firefox, il a √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajout√©</a> en 2017, d'autres navigateurs y travaillent. <br><br><h4>  Utilisation de deux compilateurs </h4><br>  Dans Firefox, cela a √©t√© ajout√© en 2017 et dans d'autres navigateurs en 2018. <br><br><h4>  Mise en cache HTTP implicite </h4><br>  Dans Firefox, le d√©veloppement est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">presque termin√©</a> , il y aura bient√¥t une sortie. <br><br><h4>  Autres am√©liorations </h4><br>  Il y a une discussion <br><br>  Comme vous pouvez le voir, la plupart des √©l√©ments sont toujours en cours de d√©veloppement.  Et pourtant, nous pouvons d√©j√† voir des applications s'ex√©cuter sur WebAssembly aujourd'hui, car les capacit√©s d'aujourd'hui sont d√©j√† suffisantes pour quelqu'un.  D√®s que toutes les fonctionnalit√©s ci-dessus seront pr√™tes, nous ouvrirons une nouvelle "nouvelle r√©alisation" et encore plus de nouvelles applications recevront le support de WebAssembly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/994/53c/36b/99453c36b420ead1b724c7a7e415c689.png" alt="image"><br><br><h2>  Interaction Javascript </h2><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/42e/383/372/42e383372c2216891576c4cdda6ae193.png" alt="image"></a> <br><br>  WebAssembly a √©t√© cr√©√© non seulement comme plate-forme pour les jeux et les applications lourdes.  Il peut √™tre utilis√© pour le d√©veloppement Web r√©gulier.  Nous sommes conscients qu'aujourd'hui il existe de tr√®s grandes applications Web √©crites en Javascript et peu d√©cident de les prendre et de les r√©√©crire compl√®tement dans WebAssembly.  Le point important ici est que ce n'est pas n√©cessaire.  Tr√®s probablement, la plupart de ces applications fonctionnent assez bien et seulement dans certains goulots d'√©tranglement, peut-√™tre, il y a un manque de performances dans les calculs, ou la bande passante de traitement des donn√©es, ou un manque de fonctionnalit√©s en raison du manque d'une version JS d'une biblioth√®que.  Nous voulons donner aux d√©veloppeurs la possibilit√© de r√©√©crire uniquement ces goulots d'√©tranglement sur WebAssembly, en laissant le reste du code dans JS familier.  Et c'est d√©j√† possible.  Par exemple, en r√©√©crivant l'analyseur Gutenberg dans Rust et en l'assemblant sous WebAssebly, nous avons r√©ussi √† augmenter la productivit√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">86 fois</a> . <br><br>  Mais pour rendre une telle pratique de masse et pratique, nous devons mettre en ≈ìuvre autre chose. <br><br><h3>  Comp√©tence: appels rapides entre JS et WebAssembly </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/557/618/0ec/5576180eca50ce1736a684aa32575524.png" alt="image"><br><br>  L'appel de WebAssembly √† partir de JS devrait fonctionner tr√®s rapidement.  En ajoutant un petit module WebAssembly, le programmeur ne devrait ressentir aucune perte de performances, m√™me si ce module est appel√© tr√®s souvent.  Ce n'est pas le cas dans MVP (puisque l'objectif de MVP n'√©tait pas de maximiser les performances de tels appels).  Ce probl√®me doit encore √™tre r√©solu.  Dans Firefox, nous avons d√©j√† v√©rifi√© que certains appels JS-&gt; WebAssembly sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©j√† plus rapides que les appels JS-&gt; JS non en ligne</a> .  Les d√©veloppeurs d'autres navigateurs travaillent √©galement sur cette t√¢che. <br><br><h3>  Comp√©tence: √©change de donn√©es rapide </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/606/f9c/445/606f9c44570c6a3a4f64b008be4e5eda.png" alt="image"><br><br>  Cette t√¢che est li√©e √† la pr√©c√©dente: il est important non seulement d'appeler rapidement le code WebAssembly depuis JS, mais √©galement de transf√©rer rapidement des donn√©es entre eux.  Il y a certains probl√®mes avec cela.  Par exemple, le fait que WebAssembly ne comprend que les nombres.  Il n'y a pas d'objets dedans, mais dans JS ils le sont.  Il s'av√®re que nous avons besoin d'une sorte de couche de traduction.  Il existe d√©j√†, mais n'est pas encore suffisamment productif. <br><br><h3>  Comp√©tence: int√©gration avec les modules ES </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/b4f/15f/db4/b4f15fdb4151fccd40d509e675e3363e.png" alt="image"><br><br>  Maintenant, l'utilisation du module WebAssembly ressemble √† l'appel d'une API sp√©ciale qui vous renverra le module pour utilisation.  Mais cela signifie que le module WebAssembly ne fait pas vraiment partie du graphique du module JS de l'application Web.  Afin d'avoir toutes les fonctions disponibles pour les modules ES (comme l'exportation et l'importation), le module WebAssembly doit pouvoir s'int√©grer aux modules ES. <br><br><h3>  Comp√©tence: int√©gration dans le d√©veloppement </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/60a/a00/b26/60aa00b2662dcb635ff336ad09319e85.png" alt="image"><br><br>  Le simple fait d'importer et d'exporter ne signifie pas devenir un module enti√®rement fonctionnel.  Nous avons besoin d'un endroit o√π les modules WebAssembly pourraient √™tre distribu√©s.  Quel sera l'analogue de npm pour WebAssembly?  Hmm ... que diriez-vous de npm lui-m√™me?  Et quel sera l'analogue de webpack ou Parcel for WebAssembly?  Hmm ... qu'en est-il du webpack et du colis? <br><br>  Les modules WebAssembly ne doivent pas diff√©rer des modules ordinaires, ce qui signifie qu'ils peuvent √™tre distribu√©s via la m√™me infrastructure.  Mais nous avons besoin d'outils pour les int√©grer dans cette infrastructure. <br><br><h3>  Comp√©tence: r√©trocompatibilit√© </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/e1e/86f/b36/e1e86fb36b5c6f28e1084613b8acd24f.png" alt="image"><br><br>  Il y a une autre chose importante que nous devons fournir.  Tout devrait bien fonctionner m√™me dans les anciennes versions des navigateurs.  M√™me ceux qui n'ont aucune id√©e de WebAssembly.  Nous devons garantir qu'une fois que nous aurons √©crit le code de WebAssembly, le d√©veloppeur n'aura pas √† √©crire la deuxi√®me version du m√™me code en Javascript simplement parce que le site doit √©galement s'ouvrir dans IE11. <br><br><h3>  O√π en sommes-nous maintenant? </h3><br>  Quelque part ici: <br><img src="https://habrastorage.org/getpro/habr/post_images/49e/46e/ff9/49e46eff987d5d8de4984576f954847c.png" alt="image"><br><br><h4>  Raccourcis entre JS et WebAssembly </h4><br>  D√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">impl√©ment√©</a> dans Firefox, des travaux sont en cours dans d'autres navigateurs. <br><br><h4>  √âchange de donn√©es rapide </h4><br>  Il y a plusieurs suggestions.  Par exemple, d√©veloppez le syst√®me de types dans WebAssembly avec des r√©f√©rences aux objets JS.  C'est possible, mais cela n√©cessitera l'√©criture de code suppl√©mentaire (par exemple, pour appeler les m√©thodes JS), ce qui ne fonctionne pas trop vite.  Pour r√©soudre ce probl√®me, √† son tour, il existe plusieurs suggestions. <br><br>  Il y a un autre aspect li√© √† l'√©change de donn√©es.  Il s'agit de suivre la dur√©e de stockage des donn√©es en m√©moire.  Si vous avez des donn√©es en m√©moire auxquelles le code JS devrait avoir acc√®s, vous devez les y laisser jusqu'√† ce que le code JS les lise.  Mais si vous les laissez l√† pour toujours, nous obtiendrons une fuite de m√©moire.  Comment savoir que les donn√©es peuvent d√©j√† √™tre supprim√©es (le code JS les a d√©j√† lues)?  Aujourd'hui, cette responsabilit√© incombe au programmeur - tout est lib√©r√© manuellement.  Une fois que le code JS a fini de lire les donn√©es, il devrait appeler quelque chose comme la fonction ¬´libre¬ª.  Mais cette approche est d√©pass√©e et conduit souvent √† des erreurs.  Pour r√©soudre ce probl√®me, nous avons introduit le concept de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WeakRef</a> en Javascript.  Cela permet de lire les donn√©es sur le c√¥t√© du code JS, et lorsque le garbage collector fonctionne, il est n√©cessaire d'effacer correctement la m√©moire dans le module WebAssembly. <br><br>  Tout cela est encore en d√©veloppement.  Pendant ce temps <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">, des outils ont</a> √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©√©s</a> dans l'√©cosyst√®me Rust qui automatisent l'√©criture de ce code pour vous, rempla√ßant les parties qui n'ont pas encore √©t√© impl√©ment√©es par leur propre impl√©mentation.  Un de ces outils m√©rite une mention sp√©ciale.  Il s'appelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wasm-bindgen</a> .  Lorsqu'il remarque que votre code Rust essaie d'obtenir ou de renvoyer des objets JS ou DOM, il cr√©e automatiquement une couche JS qui pourra interagir avec votre code Rust.  Et cette couche est √©galement capable d'interagir avec le module WebAssembly √©crit dans n'importe quel autre langage, donc non seulement les programmeurs Rust peuvent utiliser cet outil. <br><br><h4>  Int√©gration avec les modules ES </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un plan de</a> travail dans ce domaine existe depuis un certain temps.  Nous y travaillons activement avec les d√©veloppeurs d'autres navigateurs. <br><br><h4>  Int√©gration au d√©veloppement </h4><br>  D√©j√†, il existe des outils comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wasm-pack</a> dans l'√©cosyst√®me Rust qui vous permettent d'emballer automatiquement tout ce dont vous avez besoin pour une sortie en npm.  Et il y a des gens qui utilisent cet outil pour cr√©er leurs modules. <br><br><h4>  Compatibilit√© descendante </h4><br>  Pour la compatibilit√© descendante, nous avons l'outil wasm2js.  Il vous permet de transformer un fichier wasm en un fichier JS √©quivalent.  Ce code Javascript ne sera pas rapide, mais il fonctionnera sur n'importe quel navigateur (y compris celui qui ne prend pas en charge WebAssembly). <br><br>  Comme vous pouvez le voir, nous sommes tr√®s pr√®s de recevoir cette ¬´r√©alisation¬ª.  Et d√®s que nous ferons cela, le chemin vers deux autres s'ouvrira. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4cd/f82/ac3/4cdf82ac3ee88090ba897f2ca4b339da.png" alt="image"></a> <br><br><h2>  Framework JS et langages compil√©s JS </h2><br>  Le premier est la possibilit√© de r√©√©crire les frameworks JS lourds et populaires sur WebAssebly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/794/e65/121/794e6512119d46d55953dba013ed3273.png" alt="image"><br><br>  La seconde consiste √† permettre aux langages de programmation de se compiler en Javascript pour le remplacer par WebAssembly.  Nous parlons de langues comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scala.js</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Reason</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Elm</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31c/1ce/750/31c1ce750e3bfefe906d372292e8dfdb.png" alt="image"><br><br>  Pour ces deux t√¢ches, WebAssembly doit prendre en charge un certain nombre de nouvelles fonctionnalit√©s de haut niveau. <br><br><h3>  Comp√©tence: Garbage Collector </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/c3e/8eb/160/c3e8eb1609af4cde10a08081ee63f046.png" alt="image"><br><br>  Nous avons besoin d'une int√©gration avec un garbage collector bas√© sur un navigateur pour plusieurs raisons.  Rappelons d'abord la t√¢che de r√©√©crire les frameworks JS (ou des parties d'entre eux).  Cela peut √™tre n√©cessaire. ,  React      DOM-,     Rust   .     -     .   DOM     ,         ,        . ,    ,     ,      .      ,   . <br><br>        JS-.       - ,   .           ,      ,       Javascript.  JS-          WebAssembly-,            JS-. <br><br>       (  ),       .    ,   ,    . WebAssembly        ,   . <br><br>       Scala.js, Reason, Kotlin  Elm ‚Äî     Javascript,        .   WebAssembly      ‚Äî          WebAssembly             (    ). <br><br><h3> :   </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/f2f/98a/88d/f2f98a88dd8f91735a5572950606811e.png" alt="image"><br><br>    . ,  ,  Rust,   .    ‚Äî .            ‚Äî    .       WebAssembly     . <br><br>  ,    Javascript.          ‚Äî -           - .   WebAssembly-  JS-,     ‚Äî      .   Rust, ,     .   ,       . <br><br><h3> :  </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/0dc/5f2/b8a/0dc5f2b8a7da6d533192464f6258c314.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les d√©veloppeurs JS sont √©galement habitu√©s √† de bons outils de d√©bogage. </font><font style="vertical-align: inherit;">Tous les navigateurs modernes disposent d'outils pour une analyse pratique du code Javascript. </font><font style="vertical-align: inherit;">Nous avons besoin du m√™me niveau de support pour WebAssembly.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comp√©tence: Tail Calls </font></font></h3><br><img src="https://habrastorage.org/getpro/habr/post_images/365/d07/1d8/365d071d8415b5510f45f70982edee2e.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour prendre en charge les langages fonctionnels, nous avons besoin d'une chose appel√©e les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appels de queue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Je ne m'attarderai pas sur ce sujet, ce qui rend un peu plus facile de dire qu'un appel de queue est un moyen dans certains cas d'appeler une fonction sans lui allouer de cadre sur la pile. </font><font style="vertical-align: inherit;">√âtant donn√© que cette fonctionnalit√© est essentielle pour les langages fonctionnels, nous voulons qu'elle soit prise en charge dans WebAssembly.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O√π en sommes-nous maintenant? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quelque part ici: </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f5/b0d/853/8f5b0d8534744ec21059f27231fa080b.png" alt="image"><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Collecte des ordures </font></font></h4><br>  Pour impl√©menter le garbage collection, le travail est actuellement en cours dans deux directions: ce sont les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">objets typ√©s</a> pour JS et, en fait, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le garbage collector pour WebAssembly</a> .  Les objets typ√©s vous permettent de d√©crire la structure claire de l'objet.  Il existe d√©j√† une vision de la fa√ßon dont cela devrait fonctionner, et elle sera discut√©e lors de la prochaine r√©union du TC39.  Par cons√©quent, le GC pour WebAssembly pourra acc√©der √† la structure ci-dessus √† ses propres fins.  Des travaux sont d√©j√† en cours pour sa mise en ≈ìuvre. <br><br>  D√®s que les deux parties seront termin√©es, nous obtiendrons un syst√®me d'interaction entre JS et WebAssembly, capable de comprendre √† tous les niveaux en quoi consiste l'objet et d'utiliser efficacement ses donn√©es internes.  Nous avons d√©j√† un prototype fonctionnel.  Cependant, le prototype ne peut pas seulement √™tre pris et publi√© - nous devons consacrer un certain temps √† la normalisation et aux r√©visions.  Nous pr√©voyons qu'il atteindra la sortie quelque part au cours de la 2019e ann√©e. <br><br><h4>  Gestion des exceptions </h4><br>  Les travaux sur les <a href="">exceptions sont</a> actuellement en cours de recherche et d√©veloppement.  Nous examinons diverses propositions, essayons de les mettre en ≈ìuvre et voyons leur efficacit√©. <br><br><h4>  D√©bogage </h4><br>  Pour le d√©bogage, il existe d√©j√† un certain support dans les outils de d√©veloppement Firefox.  Mais l'id√©al est encore loin.  Nous voulons montrer au d√©veloppeur son code source et sa position actuelle, et pas seulement les instructions de l'assembleur.  Nous devons d√©velopper et impl√©menter la prise en charge des fichiers de symboles, ce qui nous permettra de corr√©ler chaque instruction de code avec la ligne source.  Actuellement, des <a href="">travaux sont en cours</a> sur la sp√©cification de ce m√©canisme. <br><br><h4>  Appels de queue </h4><br>  <a href="">Il y a un travail en cours</a> . <br><br>  Lorsque tout ce qui pr√©c√®de est termin√©, nous pouvons supposer que nous avons atteint la r√©alisation ¬´Les cadres et langages JS compil√©s dans JS¬ª <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8cb/651/7b4/8cb6517b4483f2b4f566783157f9511d.png" alt="image"></a> <br><br>  Il s'agissait donc d'un plan pour obtenir des ¬´r√©alisations¬ª dans le navigateur.  Qu'en est-il de ce qui se passe en dehors du navigateur? <br><br><h2>  Hors navigateur </h2><br>  Peut-√™tre avez-vous √©t√© g√™n√© par la combinaison des mots ¬´en dehors du navigateur¬ª.  Avons-nous vraiment autre chose que le navigateur lorsque nous parlons du Web?  Mais le "web" que nous avons droit dans le nom "WebAssembly".  Mais en fait, HTML, CSS et JavaScript ne sont que la pointe de l'iceberg. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c4/c11/606/9c4c1160641ee4014f7317b71711f3d2.png" alt="image"><br><br>  Oui, ils sont mieux visibles, car ce sont eux qui forment l'interface utilisateur.  Mais il y a une autre partie tr√®s importante du Web - ce sont les connexions.  La connexion de tout avec tout. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f34/d7b/4f4/f34d7b4f4d2fdfe6487614b4d1530416.png" alt="image"><br><br>  Je peux cr√©er un lien vers votre page d√®s maintenant.  Je n'ai pas besoin de la v√¥tre ou de la permission de quiconque.  Je viens de faire ce lien, de l'ajouter √† mon site.  Tout le monde peut le suivre et votre contenu sera affich√©, le code que vous avez √©crit sera lanc√©.  Cette simplicit√© de cr√©ation de connexions et de transition √† travers elles a cr√©√© notre Internet tel qu'il est.  Nous avons maintenant des r√©seaux sociaux et d'autres sites qui, par essence, √©largissent le concept de ¬´lien¬ª avec la possibilit√© d'ancrer n'importe quoi: personnes, appareils, entreprises, etc. <br><br>  Mais avec tous ces liens et liens, il y a deux probl√®mes. <br><br>  D'abord, √† quoi le lien devrait-il mener?  Si vous allez quelque part et que le site vous propose du code qui doit √™tre ex√©cut√© dans votre navigateur - ce code doit √™tre multiplateforme.  Il devrait se compiler en quelque chose et fonctionner sur un coquelicot, sur Windows, sur un Android.  Partout.  La portabilit√© du code t√©l√©chargeable est une partie importante du concept de connectivit√© Web. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/d74/4c1/b38d744c118cebfdff5d8cd198f8a490.png" alt="image"><br><br>  Mais il ne suffit pas de t√©l√©charger et d'ex√©cuter le code.  Vous devez comprendre que nous ne savons rien de ce code.  Nous ne lui faisons pas suffisamment confiance pour avoir un contr√¥le total sur l'ordinateur de l'utilisateur.  Et si c'est du code malveillant?  Il peut faire quelque chose de mal.  Et ici, nous avons besoin d'une sorte de mod√®le de s√©curit√©.  Nous avons besoin d'un bac √† sable o√π nous pouvons mettre un code inconnu, lui donner des outils contr√¥l√©s pour le travail, mais en retirer tout ce qui est essentiel et dangereux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0bf/1d6/0c6/0bf1d60c6df0e2a76b4afb83e3dffe42.png" alt="image"><br><br>  Il y a donc deux aspects du concept de ¬´communication¬ª: la portabilit√© et la s√©curit√©.  Nous savons que nous pouvons certainement ex√©cuter le code et que cela ne nous nuira certainement pas.  Pourquoi est-ce que j'insiste sur ces concepts et comment cette vision des choses diff√®re-t-elle de la vision du Web en tant que combinaison de HTML, CSS et Javascript?  Parce que cette approche change fondamentalement la vue de ce qu'est WebAssembly. <br><br>  D'une part, nous pouvons consid√©rer WebAssembly comme ¬´un autre outil disponible dans un navigateur moderne¬ª.  Et il en est ainsi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1df/51f/fe5/1df51ffe596ea6f2f45543f913ca7911.png" alt="image"><br><br>  Mais la portabilit√© et la s√©curit√© de l'ex√©cution du code nous ouvrent d'autres portes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5da/71e/e98/5da71ee982b4cb6a126d14aa962ed491.png" alt="image"><br><br><h2>  Node.js </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/b5c/643/c55/b5c643c55f8c180e50e1a24ee4122ef6.png" alt="image"><br><br>  Comment WebAssembly peut-il aider Node?  Apporter la portabilit√©. <br><br>  Le n≈ìud offre un niveau de portabilit√© assez √©lev√© en utilisant Javascript.  Mais il existe encore de nombreux cas o√π les performances du code JS ne sont pas suffisantes ou tout simplement le bon code JS n'a pas encore √©t√© √©crit, mais il existe une version native de celui-ci.  Et puis Node utilise des modules natifs.  Ils sont √©crits dans des langages comme C et doivent √™tre compil√©s pour la plate-forme sp√©cifique sur laquelle votre n≈ìud fonctionne. <br><br>  Les modules natifs peuvent √™tre compil√©s lors de l'installation, ou vous pouvez les prendre imm√©diatement pr√™ts pour l'une des plates-formes populaires.  Les deux approches sont possibles, mais ce n'est qu'un choix de deux maux: soit un mal de t√™te suppl√©mentaire pour l'utilisateur, soit l'auteur du module. <br><br>  Si vous imaginez que ces modules seront sur WebAssembly, alors ils n'auront pas du tout besoin d'√™tre compil√©s.  La portabilit√© vous permet de les ex√©cuter sur n'importe quelle plate-forme, imm√©diatement, comme le code Javascript.  Mais ils fonctionneront avec les performances des versions natives. <br><br>  Et ici, le bonheur vient au monde de Node sous la forme d'une portabilit√© totale de tout et partout.  Vous pouvez porter l'application Node de Linux vers Windows - et tout continuera √† fonctionner sans aucune recompilation.  Mais en m√™me temps, le module WebAssembly n'a pas acc√®s aux ressources syst√®me (il fonctionne dans son sandbox).  Mais les modules Node natifs (et m√™me non natifs) ne fonctionnent pas dans le bac √† sable, ils ont acc√®s √† tout - c'est l'id√©ologie de Node.  Ainsi, pour que le module WebAssembly obtienne les m√™mes fonctionnalit√©s, une couche suppl√©mentaire d'acc√®s aux ressources du syst√®me d'exploitation est n√©cessaire.  Quelque chose comme les fonctions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">POSIX</a> (elles ne sont pas n√©cessaires, elles ne sont donn√©es qu'√† titre d'exemple d'interface d'acc√®s aux ressources relativement stable et suffisante). <br><br><h3>  Comp√©tence: interface portable </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/a08/e88/688/a08e88688da9312cf9b0821ea1ebd9de.png" alt="image"><br><br>  Alors, de quoi les d√©veloppeurs Node ont-ils besoin pour utiliser les modules WebAssembly?  Une sorte d'interface pour acc√©der √† ses fonctions.  Ce serait bien de le standardiser.  Eh bien, non seulement Node peut appeler ces fonctions, mais aussi n'importe qui en g√©n√©ral.  Si vous souhaitez utiliser le module WebAssembly dans votre application, nous sommes connect√©s et nous l‚Äôutilisons.  Quelque chose comme "POSIX pour WebAssembly".  PWSIX (interface syst√®me portable WebAssembly)? <br><br><h3>  O√π en sommes-nous maintenant? </h3><br>  Il existe un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">document</a> qui d√©crit le m√©canisme permettant de fournir un chemin d'acc√®s √† un module par son nom.  Ceci est susceptible d'√™tre utilis√© √† la fois par les navigateurs et par Node (ils pourront fournir des chemins diff√©rents).  Bien qu'il n'y ait pas de d√©veloppement actif, mais il y a beaucoup de discussions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/69c/74f/63f/69c74f63fd64008d91dbf31a18dce24e.png" alt="image"><br><br>  Il sera tr√®s probablement mis en ≈ìuvre sous une forme ou une autre.  C'est bien car cela nous ouvre de nombreuses possibilit√©s. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/ae2/750/50f/ae275050f12b82aba399d26d50656c0f.png" alt="image"></a> <br><br><h2>  CDN, Serverless et Edge Computing </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/c16/77d/224/c1677d22458933b7f3c07cdf47b9bf12.png" alt="image"><br><br>  Les exemples sont des choses comme CDN, Serverless, Edge Computing.  Cas o√π vous mettez votre code sur le serveur de quelqu'un d'autre, qui prend soin de sa disponibilit√© pour les clients.  Pourquoi pourriez-vous avoir besoin de WebAssembly ici?  R√©cemment, il y a eu un excellent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport</a> sur ce sujet.  En bref, il peut √™tre n√©cessaire d'ex√©cuter du code √† partir de diff√©rentes sources (sans se faire mutuellement confiance) au sein d'un m√™me processus.  Ce code doit √™tre isol√© les uns des autres et du syst√®me d'exploitation.  Des solutions comme une machine virtuelle JS (SpiderMonkey ou V8) fonctionnent d'une mani√®re ou d'une autre, mais n'offrent pas les performances et l'√©volutivit√© souhait√©es.  Et WebAssembly - donne. <br><br>  Que faut-il pour que cela fonctionne? <br><br><h3>  Comp√©tence: runtime </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/965/16f/e4c/96516fe4ccb30f39a885d1f460033e0c.png" alt="image"><br><br>  Nous avons besoin d'un environnement d'ex√©cution et certaines entreprises cr√©ent le leur.  Nous avons d√©j√† des compilateurs WebAssembly (comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cranelift</a> ) - ils sont rapides et √©conomes en m√©moire.  Mais le code g√©n√©r√© par lui ne peut pas vivre dans le vide - il doit s'appuyer sur quelque chose, interagir d'une mani√®re ou d'une autre avec l'environnement.  Maintenant, certaines entreprises, telles que Fastly, √©crivent elles-m√™mes cet environnement d'ex√©cution.  Mais ce n'est pas une tr√®s bonne approche - apr√®s tout, de nombreuses entreprises en auront besoin et feront le m√™me travail, encore et encore.  Nous pourrions le faire une fois, ajouter √† la norme - et √©conomiser √† tout le monde un tas de ressources. <br><br><h3>  O√π en sommes-nous maintenant? </h3><br>  Quelque part ici: <br><img src="https://habrastorage.org/getpro/habr/post_images/bba/460/2be/bba4602be78c2f8132a7106d7463218f.png" alt="image"><br><br>  Il n'y a pas encore de standard d'ex√©cution.  Ce qui n'emp√™che pas plusieurs runtimes ind√©pendants d√©j√† utilis√©s dans des projets r√©els d'exister et de fonctionner.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WAVM</a> et wasmjit. <br><br>  Nous pr√©voyons √©galement de publier un runtime construit sur Cranelift, il sera appel√© wasmtime.  Et d√®s que nous avons quelque chose de standardis√© et de fonctionnel, c'est une opportunit√© ouverte de d√©velopper un certain nombre de choses, comme, par exemple ... <br><br><h2>  Utilitaires de ligne de commande portables </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/90a/f8f/a14/90af8fa14441a34a3652478d0bd9b948.png" alt="image"><br><br>  WebAssembly peut √™tre utilis√© non seulement dans le navigateur, mais √©galement dans les syst√®mes d'exploitation traditionnels.  Nous ne parlerons pas du noyau (bien qu'il y ait aussi des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">casse</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cou</a> qui agitent cela), mais le code WebAssembly peut bien fonctionner en mode utilisateur.  Et cela permet de cr√©er des utilitaires de ligne de commande qui, une fois construits, fonctionneront garantis d'√™tre les m√™mes pour n'importe quel syst√®me d'exploitation. <br><br><h2>  Internet des objets </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/18f/10a/dcd/18f10adcda7bfa676d90b6e92cb2bb30.png" alt="image"><br><br>  Par ¬´Internet des objets¬ª, ils d√©signent g√©n√©ralement des appareils de faible puissance (comme des capteurs / contr√¥leurs portables ou divers dans les ¬´maisons intelligentes¬ª).  Les limitations des ressources processeur et de la RAM disponibles affectent n√©gativement la possibilit√© d'ex√©cuter du code JS, mais WebAssembly est une tout autre affaire.  L'optimisation de compilateurs comme Cranelift et d'un runtime comme wasmtime brillera dans de telles conditions, car ils ont √©t√© juste √©crits pour des t√¢ches d'√©conomie de ressources.  Dans des cas absolument extr√™mes, WebAssembly permet m√™me de compiler votre module dans le binaire natif de la plateforme cible.  Eh bien, encore une fois, la portabilit√© - il y a beaucoup de tous ces appareils IoT aujourd'hui et ils sont construits sur diff√©rentes plates-formes.  Avec WebAssembly, vous n'avez pas √† vous en pr√©occuper - le code d√©velopp√© s'ex√©cutera partout. <br><br><h2>  Conclusions </h2><br>  Revenons un peu en arri√®re et jetons √† nouveau un ≈ìil √† notre ¬´arbre de comp√©tences¬ª. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0c6/201/71f/0c620171f0b0c2b880e730e84ee9f1b4.png" alt="image"></a> <br><br>  J'ai commenc√© cet article avec le fait que certaines personnes ne comprennent pas pourquoi WebAssembly n'est pas encore termin√©.  Comme vous pouvez maintenant le comprendre, son chemin a √† peine commenc√©.  Oui, MVP ouvre d√©j√† certaines possibilit√©s.  Nous pouvons d√©j√† compiler quelque chose dans WebAssembly et l'ex√©cuter dans un navigateur.  Mais il reste encore beaucoup de travail √† faire - prendre en charge tout ce dont vous avez besoin pour les applications lourdes et les langages de haut niveau, remplacer les frameworks JS et toutes ces choses ¬´en dehors du navigateur¬ª dont j'ai parl√©.  Lorsque tout cela sera pr√™t, nous verrons un nouveau web.  Haute performance, plus grand, plus portable.  Il n'y aura plus ce type de logiciel qui ne peut pas √™tre √©crit pour √™tre ex√©cut√© dans le navigateur: jeux, blockchain, Internet des objets, utilitaires de ligne de commande - tout commencera. <br><br>  WebAssembly n'est pas termin√©.  Il vient de commencer. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428347/">https://habr.com/ru/post/fr428347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428337/index.html">JavaScript divertissant: sans accolades</a></li>
<li><a href="../fr428339/index.html">Ne l'automatisez pas: mauvais conseils commerciaux</a></li>
<li><a href="../fr428341/index.html">Technologie Qsan RAID EE</a></li>
<li><a href="../fr428343/index.html">Un puzzle int√©ressant en C</a></li>
<li><a href="../fr428345/index.html">Couvrir les exigences avec des cas. SuperJob Realities</a></li>
<li><a href="../fr428349/index.html">Concombre dans le cloud: utilisation de scripts BDD pour les tests de r√©sistance des produits</a></li>
<li><a href="../fr428355/index.html">M√©canique de la gamification: √©valuation</a></li>
<li><a href="../fr428357/index.html">L'absorption en pratique: une histoire de vie</a></li>
<li><a href="../fr428363/index.html">Construire un jetpack / hoverboard: syst√®mes de sauvetage</a></li>
<li><a href="../fr428365/index.html">L'histoire de la fa√ßon dont la facturation Google a chang√©, ou comment √©viter les co√ªts inutiles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>