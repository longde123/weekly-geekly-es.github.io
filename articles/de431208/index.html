<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≤ üêî üê• Splunk mit den Augen eines Neulings: Wie wir ein Lagerinventarsystem erstellt haben ü§° ü•Å üè¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="K√ºrzlich hat uns ein Kunde gebeten, ein Abrechnungssystem f√ºr die Festplattenkapazit√§t zu implementieren. Die Aufgabe bestand darin, Informationen von...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Splunk mit den Augen eines Neulings: Wie wir ein Lagerinventarsystem erstellt haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/431208/"><img src="https://habrastorage.org/getpro/habr/post_images/d3c/c4f/709/d3cc4f70901c0d843b762341460437d1.png"><br><br>  K√ºrzlich hat uns ein Kunde gebeten, ein Abrechnungssystem f√ºr die Festplattenkapazit√§t zu implementieren.  Die Aufgabe bestand darin, Informationen von mehr als siebzig Festplatten-Arrays verschiedener Hersteller zu kombinieren, von SAN-Switches und VMware ESX-Hosts.  Anschlie√üend mussten die Daten systematisiert, analysiert und in einem Dashboard sowie in verschiedenen Berichten angezeigt werden, z. B. √ºber das freie und belegte Speicherplatzvolumen in allen oder separat aufgenommenen Arrays. <br><br>  Wir haben uns entschlossen, das Projekt mit dem Betriebsanalysesystem Splunk umzusetzen. <br><a name="habracut"></a><br><h2>  Warum splunk? </h2><br>  Splunk ist leistungsstark bei der Visualisierung der gesammelten Daten.  Sie k√∂nnen interaktive Berichte - Dashboards - erstellen, die in Echtzeit aktualisiert werden.  Wir haben Informationen zum gesamten Speicherplatz auf ihnen angezeigt und sofort alle Arrays mit der M√∂glichkeit angezeigt, nach verschiedenen Filtern zu sortieren, z. B. nach Kapazit√§t.  Durch Klicken auf das Array erhalten wir sofort Informationen zu allen Verbindungen.  In einem separaten Bereich k√∂nnen Sie den Namen der virtuellen Maschine eingeben und sehen, auf welchem ‚Äã‚ÄãESX-Host sie lebt, von welchen Arrays sie Daten und andere Parameter empf√§ngt. <br><br>  Meiner Meinung nach hat Splunk bisher keine Analoga, die mit jedem Speichersystem sofort funktionieren w√ºrden.  Vor einigen Jahren erschien das kostenpflichtige CommandCentral, aber es verf√ºgt nicht √ºber die erforderliche Flexibilit√§t, es wei√ü nicht, wie beliebige Berichte erstellt werden sollen (in den ersten Versionen der Berichte gab es √ºberhaupt keine) und mit lahmer Visualisierung.  Im Allgemeinen ist dies kein Werkzeug zur Bestandsaufnahme, sondern zur √úberwachung und Steuerung des Systemstatus.  Um die vom Kunden gestellte Aufgabe zu erf√ºllen, m√ºsste sie lange und teuer verfeinert werden. <br><br>  Gleichzeitig verf√ºgt Splunk √ºber beeindruckende Funktionen zur Informationsanzeige: Grafiken k√∂nnen frei untereinander angeordnet werden, √ºberwachen den Status aller Systeme in einem einzigen Fenstermodus und vereinfachen so deren Wartung.  Zu allem anderen - f√ºr unsere Aufgabe haben wir die kostenlose Version verwendet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/266/ee4/c78/266ee4c78b67d3bd6fa4dd887359a818.png"><br><br><h2>  Was hast du gemacht </h2><br>  Bis zu diesem Zeitpunkt hatte unser Team keine Erfahrung mit Splunk.  Gl√ºcklicherweise erwies sich das System als freundlich und intuitiv, und L√∂sungen f√ºr neu auftretende Probleme konnten mithilfe einer regelm√§√üigen Hilfe oder in einer Suchmaschine leicht gefunden werden. <br><br>  Splunk hat eine Reihe von Tools entwickelt, die wir ben√∂tigen.  Das System erm√∂glicht es Ihnen beispielsweise, Daten aus verschiedenen Quellen f√ºr jedes Feld √ºber die sogenannten Lookups (Verzeichnisse) zu kombinieren.  In einer Tabelle wurden ESX-Hosts als IP angezeigt, in einer anderen als DNS-Namen.  Zuerst wollten wir eine hausgemachte Suche erstellen und das Dienstprogramm nslookup verwenden, um DNS-Eintr√§ge auszuw√§hlen und Tabellen zu sammeln. Es stellte sich jedoch heraus, dass Splunk √ºber ein Verzeichnis verf√ºgt, das DNS √ºber IP vergleicht und umgekehrt.  Diese integrierte Suche muss nicht konfiguriert werden, sie extrahiert selbst Daten zu DNS-Servern aus den Systemeinstellungen und spielt keine Rolle, ob es sich um Windows oder Linux handelt. Die Daten in DNS-Eintr√§gen sind immer aktuell. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/539/784/163/539784163408c3d1fb664d273651354c.png"><br><br>  Eines der interessanten Szenarien, die mit Splunk implementiert werden, ist die √Ñnderungskontrolle (RFC) im System.  Beispielsweise erh√§lt ein RFC-Manager eine Anforderung von einem Techniker, einen der SAN-Switches zu warten.  Er gibt den Switch-Namen in Splunk ein und sieht, welche Speicher damit verbunden sind und welche Server Daten von diesen Speichern empfangen.  Gleichzeitig sieht der Manager den vom Techniker erstellten Arbeitsplan und kann bewerten, wie sich das Deaktivieren dieses Switches w√§hrend der Wartung auf die Leistung von Arrays und Servern auswirkt. <br><br>  Wir haben das t√§gliche Laden von Informationen zum Verbinden aller Switches und Arrays mit Splunk eingerichtet.  Der Kunde ist mit dieser Aktualisierungsrate zufrieden.  Er hatte bereits ein √úberwachungstool Stor2RRD, wei√ü aber nicht, wie man Daten aus verschiedenen Quellen kombiniert und visualisiert.  Daher haben wir das Datenerfassungssystem in Splunk wie folgt konfiguriert: <br><br><ol><li>  Wir erhalten Informationen zu Speichern von Stor2RRD; </li><li>  Von Switches erhalten wir Informationen √ºber SAN; </li><li>  √úber vCenter mit PowerCLI-Skripten erfassen wir Daten von ESX-Hosts. </li></ol><br>  Die empfangenen Daten werden automatisch in ein einziges Formular gebracht, verarbeitet und in Form aller erforderlichen Berichte angezeigt. <br><br><h2>  Womit musstest du k√§mpfen? </h2><br>  Splunk ist ein leistungsstarkes System, aber es gibt Aufgaben, die nicht sofort gel√∂st werden k√∂nnen. Um einige Probleme zu l√∂sen, ben√∂tigen wir fundierte Kenntnisse √ºber VMware. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a05/37c/6f6/a0537c6f60f84c056cf45f56b1f4907d.png"><br><br>  Beispielsweise verwendet ein Kunde sowohl direkt zugewiesene RDM-Festplatten als auch virtuelle virtuelle Datenspeicher f√ºr virtuelle Maschinen.  Diese beiden Laufwerkstypen m√ºssen unterschiedlich behandelt werden.  Zuerst haben wir das Problem selbst gel√∂st, waren dann aber mit einer Situation konfrontiert, in der die virtuelle Maschine sowohl RAW-Festplatten als auch virtuelle Festplatten erhielt.  Es stellte sich heraus, dass wir im Bericht das falsche Pfadfeld von vCenter und den falschen Link zum RAW-Festplattenarray erhalten haben.  Das Schema funktioniert mit normalen Datenspeichern, jedoch nicht mit RAW-Festplatten.  F√ºr sie m√ºssen Sie die RAW Disk ID-Festplatteneigenschaft verwenden, die das Festplattenattribut enth√§lt.  Ich musste mich an VMware-Experten wenden, die das Skript √ºberarbeitet haben, damit es das richtige Array √ºber die RAW-Festplatten-ID berechnet. <br><br>  Au√üerdem haben wir nicht sofort gelernt, wie man optimal mit PowerCLI-Skripten arbeitet, sp√§ter mussten die Algorithmen weiterentwickelt werden.  Zun√§chst verarbeiteten die Skripte drei Stunden lang Daten von mehreren tausend virtuellen Maschinen!  Nach der Verfeinerung wurde die Dauer der Skripte auf vierzig Minuten reduziert. <br><br><h2>  Was ist das Ergebnis? </h2><br>  Da wir keine Erfahrung mit Splunk haben, haben wir schnell ein System zur Abrechnung von Festplattenkapazit√§ten implementiert, das Informationen aus zahlreichen Quellen empf√§ngt, konsolidiert und eine breite Palette an praktischen und intuitiven Grafiken bereitstellt.  Wenn Sie zuvor noch kein solches System ausgew√§hlt oder erstellt haben, ist Splunk ein guter Kandidat f√ºr diese Rolle.  Es funktioniert schnell, ist einfach und flexibel zu konfigurieren und erfordert keine speziellen Kenntnisse, um die meisten Aufgaben zu l√∂sen. <br><br>  <i>Vladislav Semenov, Leiter der System Architecture Group, Zentrum f√ºr das Entwerfen von Computerkomplexen, Jet Infosystems</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431208/">https://habr.com/ru/post/de431208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431196/index.html">Wie Yandex.Taxi die Lieferzeit von Autos mithilfe von maschinellem Lernen vorhersagt</a></li>
<li><a href="../de431198/index.html">So funktioniert der Dispatcher</a></li>
<li><a href="../de431200/index.html">Godot: Zum Thema der regelm√§√üigen Verwendung von statischen Code-Analysatoren</a></li>
<li><a href="../de431202/index.html">Debian und Devuan schlie√üen sich f√ºr Sysvinit zusammen</a></li>
<li><a href="../de431204/index.html">Backdoor in einer der Abh√§ngigkeiten der EventStream-Bibliothek</a></li>
<li><a href="../de431210/index.html">Zweiter Mitap Schreiben Sie die Docs Moskau. House Techwriters: Vergessen Sie nicht, dass wir existieren</a></li>
<li><a href="../de431212/index.html">Caching-Paginierung in Android</a></li>
<li><a href="../de431216/index.html">Snom D345 IP-Telefon Bewertung</a></li>
<li><a href="../de431218/index.html">Wie ich ein Lovecraft-Comic gemacht habe</a></li>
<li><a href="../de431220/index.html">Der Blick eines Biologen auf die Wurzeln unseres Alterns</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>