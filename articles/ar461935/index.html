<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง๐ป ๐๐พ ๐ฃ ููููุฉ ุงูุนูู ูุน Postgres in Go: ุงูููุงุฑุณุงุช ูุงูููุฒุงุช ูุงููุฑูู ุงูุฏูููุฉ ๐ง๐ฝ ๐๐ฝ ๐ก</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุณููู ุบูุฑ ุงููุชููุน ููุชุทุจูู ูููุง ูุชุนูู ุจุงูุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุคุฏู ุฅูู ุญุฑุจ ุจูู DBA ูุงููุทูุฑูู: DBA ูุตุฑุฎ: "ุงูุชุทุจูู ุงูุฎุงุต ุจู ูุณูุท ูุงุนุฏุฉ ุงูุจูุงูุงุช" ุ ูุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุงูุนูู ูุน Postgres in Go: ุงูููุงุฑุณุงุช ูุงูููุฒุงุช ูุงููุฑูู ุงูุฏูููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/461935/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yg/8e/hm/yg8ehmpmicsm7ye6fwju6kwog14.png"></p><br><p style=";text-align:right;direction:rtl">  ุงูุณููู ุบูุฑ ุงููุชููุน ููุชุทุจูู ูููุง ูุชุนูู ุจุงูุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุคุฏู ุฅูู ุญุฑุจ ุจูู DBA ูุงููุทูุฑูู: DBA ูุตุฑุฎ: "ุงูุชุทุจูู ุงูุฎุงุต ุจู ูุณูุท ูุงุนุฏุฉ ุงูุจูุงูุงุช" ุ ูุงููุทูุฑูู - "ููู ูู ุดูุก ูุนูู ูู ูุจู!"  ูุงูุฃุณูุฃ ูู ุฐูู ููู ุ ุฃู DBA ูุงููุทูุฑูู ูุง ูุณุชุทูุนูู ูุณุงุนุฏุฉ ุจุนุถูู ุงูุจุนุถ: ุงูุจุนุถ ูุง ูุนุฑููู ุนู ุงููุฑูู ุงูุฏูููุฉ ูู ุงูุชุทุจูู ูุจุฑูุงูุฌ ุงูุชุดุบูู ุ ูุงูุจุนุถ ุงูุขุฎุฑ ูุง ูุนุฑููู ุงูููุฒุงุช ุงููุชุนููุฉ ุจุงูุจููุฉ ุงูุชุญุชูุฉ.  ุณูููู ูู ุงูุฑุงุฆุน ุชุฌูุจ ูุซู ูุฐุง ุงููููู. </p><br><p style=";text-align:right;direction:rtl">  ุนููู ุฃู ุชููู ุ ูุบุงูุจูุง ูุง ูููู ุงูุจุญุซ ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">go-database-sql.org</a> .  ูู ุงูุฃูุถู ุชุณููุญ ููุณู ุจุชุฌุฑุจุฉ ุงูุขุฎุฑูู.  ุญุชู ุฃูุถู ุฅุฐุง ูุงูุช ุชุฌุฑุจุฉ ุงูุชุณุจูุง ุงูุฏู ูุฎุณุฑ ุงููุงู. </p><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Uojy57I-xP0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p style=";text-align:right;direction:rtl">  ุงุณูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ryabinkov Artemy</a> ููุฐู ุงูููุงูุฉ ูู ุชุฑุฌูุฉ ูุฌุงููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชูุฑูุฑู ูู</a> ูุคุชูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Saints HighLoad 2019</a> . </p><br><h1 id="instrumenty" style=";text-align:right;direction:rtl">  ุงูุฃุฏูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุนุซูุฑ ุนูู ุงูุญุฏ ุงูุฃุฏูู ูู ุงููุนูููุงุช ุงูุถุฑูุฑูุฉ ุญูู ููููุฉ ุงูุนูู ูุน Go ูุน ุฃู ูุงุนุฏุฉ ุจูุงูุงุช ุชุดุจู SQL ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">go-database-sql.org</a> .  ุฅุฐุง ูู ุชูู ูุฏ ูุฑุฃุชู ุ ูุงูุฑุฃู. </p><br><h2 id="sqlx" style=";text-align:right;direction:rtl">  sqlx </h2><br><p style=";text-align:right;direction:rtl">  ูู ุฑุฃูู ุ ููุฉ ุงูุฐูุงุจ ูู ุงูุจุณุงุทุฉ.  ููุชู ุงูุชุนุจูุฑ ุนู ุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฃูู ูู ุงููุนุชุงุฏ ุจุงููุณุจุฉ ูู Go ูุชุงุจุฉ ุงุณุชุนูุงูุงุช ูู SQL ุนุงุฑูุฉ (ORM ููุณ ุชูุฑููุงู).  ูุฐู ููุฒุฉ ููุตุฏุฑ ูุตุนูุจุงุช ุฅุถุงููุฉ. </p><br><p style=";text-align:right;direction:rtl"> ูุฐูู ุ ูุน ุฃุฎุฐ ุญุฒูุฉ ูุบุฉ <code>database/sql</code> ุงูููุงุณูุฉ ุ ุณุชุญุชุงุฌ ุฅูู ุชูุณูุน ูุงุฌูุงุชูุง.  ุจูุฌุฑุฏ ุญุฏูุซ ุฐูู ุ ุฃููู ูุธุฑุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/jmoiron/sqlx</a> .  ุงุณูุญ ูู ุฃู ุฃุฑูู ุจุนุถ ุงูุฃูุซูุฉ ุนู ููู ูููู ููุฐุง ุงูุชูุฏูุฏ ุชุจุณูุท ุญูุงุชู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">StructScan</a> ููุบู ุงูุญุงุฌุฉ ุฅูู ููู ุงูุจูุงูุงุช ูุฏููุง ูู ุงูุฃุนูุฏุฉ ุฅูู ุฎุตุงุฆุต ุงููููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Place <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Country <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> City sql.NullString TelephoneCode <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`db:"telcode"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p Place err = rows.StructScan(&amp;p)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุญ ูู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NamedQuery</a> ุงุณุชุฎุฏุงู ุฎุตุงุฆุต ุงูุจููุฉ ูุนูุงุตุฑ ูุงุฆุจุฉ ูู ุงุณุชุนูุงู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">p := Place{Country: <span class="hljs-string"><span class="hljs-string">"South Africa"</span></span>} sql := <span class="hljs-string"><span class="hljs-string">`.. WHERE country=:country`</span></span> rows, err := db.NamedQuery(sql, p)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุญ ูู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Get</a> and <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Select</a> ุงูุชุฎูุต ูู ุงูุญุงุฌุฉ ุฅูู ูุชุงุจุฉ ุญููุงุช ูุฏูููุง ุชุญุตู ุนูู ุฎุทูุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p Place <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pp []Place <span class="hljs-comment"><span class="hljs-comment">// Get   p     err = db.Get(&amp;p, ".. LIMIT 1") // Select   pp   . err = db.Select(&amp;pp, ".. WHERE telcode &gt; ?", 50)</span></span></code> </pre> <br><h1 id="drayvery" style=";text-align:right;direction:rtl">  ุงูุณุงุฆููู </h1><br><p style=";text-align:right;direction:rtl">  <code>database/sql</code> ูู ูุฌููุนุฉ ูู ุงููุงุฌูุงุช ููุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ู <code>sqlx</code> ูู ุงูุชุฏุงุฏูุง.  ููู ุชุนูู ูุฐู ุงููุงุฌูุงุช ุ ูุฅููุง ุชุญุชุงุฌ ุฅูู ุชูููุฐ.  ุงูุณุงุฆููู ูุณุคูููู ุนู ุงูุชูููุฐ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุณุงุฆููู ุงูุฃูุซุฑ ุดุนุจูุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/lib/pq</a> - <code>pure Go Postgres driver for database/sql.</code>  ุธู ุจุฑูุงูุฌ ุงูุชุดุบูู ูุฐุง ูู ุงููุนูุงุฑ ุงูุงูุชุฑุงุถู ููุชุฑุฉ ุทูููุฉ.  ููู ุงูููู ููุฏ ุฃูููุชู ููุง ูุชู ุชุทููุฑู ุจูุงุณุทุฉ ุงููุคูู. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/jackc/pgx</a> - <code>PostgreSQL driver and toolkit for Go.</code>  ูู ุงูุฃูุถู ุงูููู ุงุฎุชูุงุฑ ูุฐู ุงูุฃุฏุงุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  <strong>github.com/jackc/pgx</strong> - ูุฐุง ูู ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุฐู ุชุฑูุฏ ุงุณุชุฎุฏุงูู.  ููุงุฐุงุ </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุจุฏุนู</strong> ุจูุดุงุท <strong>ูุชุทููุฑูุง</strong> . </li><li style=";text-align:right;direction:rtl">  ูููู ุฃู ูููู ุฃูุซุฑ <strong>ุฅูุชุงุฌูุฉ</strong> ุฅุฐุง ุชู ุงุณุชุฎุฏุงูู ุฏูู ูุงุฌูุงุช <code>database/sql</code> . </li><li style=";text-align:right;direction:rtl">  ุฏุนู ุฃูุซุฑ ูู <strong>60 ููุนูุง ูู PostgreSQL</strong> ุงูุชู ูููุฐูุง <code>PostgreSQL</code> ุฎุงุฑุฌ ูุนูุงุฑ <code>SQL</code> . </li><li style=";text-align:right;direction:rtl">  ุงููุฏุฑุฉ ุนูู ุชูููุฐ <strong>ุชุณุฌูู</strong> ูุง ูุญุฏุซ ุฏุงุฎู ุงูุณุงุฆู ุจุดูู ูุฑูุญ. </li><li style=";text-align:right;direction:rtl">  <code>pgx</code> <strong>ุนูู ุฃุฎุทุงุก ูููู ูุฑุงุกุชูุง ูู ููุจู ุงูุฅูุณุงู</strong> ุ ุจูููุง ูุฑูู <code>lib/pq</code> ููุท ุจููุจุงุช ุงูููุน.  ุฅุฐุง ูู ุชุตุงุจ ุจุงูุฐุนุฑ ุ ูุณูู ูุชุนุทู ุงูุจุฑูุงูุฌ.  ( <em>ูุฌุจ ุนุฏู ุงุณุชุฎุฏุงู ุงูุฐุนุฑ ูู Go ุ ููุฐุง ููุณ ูู ููุณู ุงูุงุณุชุซูุงุก.</em> ) </li><li style=";text-align:right;direction:rtl">  ูุน <code>pgx</code> ุ ูุฏููุง ุงููุฏุฑุฉ ุนูู <strong>ุชูููู ูู ุงุชุตุงู</strong> ุจุดูู ูุณุชูู. </li><li style=";text-align:right;direction:rtl">  ููุงู ุฏุนู <strong>ูุจุฑูุชูููู</strong> <code>PostgreSQL</code> <strong>ูููุณุฎ ุงููุชูุงุซู ุงูููุทูู</strong> . </li></ul><br><h2 id="4kb" style=";text-align:right;direction:rtl">  4KB </h2><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉ ุ ููุชุจ ูุฐู ุงูุญููุฉ ููุญุตูู ุนูู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">rows, err := s.db.QueryContext(ctx, sql) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rows.Next() { err = rows.Scan(...) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุงุฎู ุจุฑูุงูุฌ ุงูุชุดุบูู ุ ูุญุตู ุนูู ุงูุจูุงูุงุช ุนู ุทุฑูู ุชุฎุฒูููุง ูู <strong>ูุฎุฒู ูุคูุช 4 ููููุจุงูุช</strong> .  <code>rows.Next()</code> ูููุฏ ุฑุญูุฉ ุดุจูุฉ ููููุฃ ุงููุฎุฒู ุงููุคูุช.  ุฅุฐุง ูู ููู ุงููุฎุฒู ุงููุคูุช ูุงูููุง ุ ูุณูุฐูุจ ุฅูู ุงูุดุจูุฉ ููุญุตูู ุนูู ุงูุจูุงูุงุช ุงููุชุจููุฉ.  ุงููุฒูุฏ ูู ุฒูุงุฑุงุช ุงูุดุจูุฉ - ุณุฑุนุฉ ูุนุงูุฌุฉ ุฃูู.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุธุฑูุง ูุฃู ุญุฏ ุงููุฎุฒู ุงููุคูุช ูู 4 ูููู ุจุงูุช ุ ููููุณู ุฐุงูุฑุฉ ุงูุนูููุฉ ุจุงููุงูู. </p><br><p style=";text-align:right;direction:rtl">  ููู ุ ุจุงูุทุจุน ุ ุฃุฑุบุจ ูู ุฅูุบุงุก ูู ูุญุฏุฉ ุงูุชุฎุฒูู ุงููุคูุชุฉ ุฅูู ุงูุญุฏ ุงูุฃูุตู ูู ุฃุฌู ุชูููู ุนุฏุฏ ุงูุทูุจุงุช ุนูู ุงูุดุจูุฉ ูุชูููู ุฒูู ุงููุตูู ุฅูู ุงูุฎุฏูุฉ ุงูุฐู ููุฏูู.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุถูู</a> ูุฐู ุงููุฑุตุฉ ููุญุงูู ูุนุฑูุฉ ุงูุชุณุงุฑุน ุงููุชููุน ูู <a href="">ุงูุงุฎุชุจุงุฑุงุช ุงูุงุตุทูุงุนูุฉ</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ go <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -v -run=XXX -bench=. -benchmem goos: linux goarch: amd64 pkg: github.com/furdarius/pgxexperiments/bufsize BenchmarkBufferSize/4KB 5 315763978 ns/op 53112832 B/op 12967 allocs/op BenchmarkBufferSize/8KB 5 300140961 ns/op 53082521 B/op 6479 allocs/op BenchmarkBufferSize/16KB 5 298477972 ns/op 52910489 B/op 3229 allocs/op BenchmarkBufferSize/1MB 5 299602670 ns/op 52848230 B/op 50 allocs/op PASS ok github.com/furdarius/pgxexperiments/bufsize 10.964s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ููุงุญุธุฉ ุฃูู ูุง ููุฌุฏ ูุฑู ูุจูุฑ ูู ุณุฑุนุฉ ุงููุนุงูุฌุฉ.  ููุงุฐุง ูุฐุง </p><br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ุฃููุง ูููุฏูู ุจุญุฌู ุงููุฎุฒู ุงููุคูุช ูุฅุฑุณุงู ุงูุจูุงูุงุช ุฏุงุฎู ุจูุณุชุฌุฑุณ ููุณูุง.  ูุญุชูู ูุฐุง ุงููุฎุฒู ุงููุคูุช ุญุฌู <a href="">ุซุงุจุช</a> <strong>8 ูููู ุจุงูุช</strong> .  ุจุงุณุชุฎุฏุงู <code>strace</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููู ุฑุคูุฉ</a> ุฃู ูุธุงู ุงูุชุดุบูู ููุฑุฌุน <code>8192</code> ุจุงูุช ูู ุงุณุชุฏุนุงุก ูุธุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฑุงุกุฉ</a> .  ู <code>tcpdump</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุคูุฏ</a> ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุน</a> ุญุฌู ุงูุญุฒู. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูู ููู</a> ( <em>ุฃุญุฏ ุงููุทูุฑูู ุงูุฃุณุงุณููู ูููุงุฉ Postgres</em> ) <a href="">ูุนูู</a> ูุซู ูุฐุง: </p><br><blockquote style=";text-align:right;direction:rtl">  ุชูููุฏููุง ุ ุนูู ุงูุฃูู ุ ูุงู ูุฐุง ูู ุญุฌู ุงููุฎุงุฒู ุงููุคูุชุฉ ููุฃูุงุจูุจ ูู ุฃุฌูุฒุฉ Unix ุ ูุฐูู ูู ุญูุซ ุงููุจุฏุฃ ุ ูุนุฏ ูุฐุง ุงูุญุฌู ุงูุฃูุซุฑ ุญุฌููุง ูุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ ูุฃุฎุฐ ูููููุณ. </blockquote><p style=";text-align:right;direction:rtl">  <a href="">ูุนุชูุฏ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Andres Freund</a> ( <em>ูุทูุฑ Postgres ูู EnterpriseDB</em> ) ุฃู ุงููุฎุฒู ุงููุคูุช 8 ูููู ุจุงูุช ููุณ ูู ุฃูุถู ุฎูุงุฑ ููุชูููุฐ ุญุชู ุงูุขู ุ ูุชุญุชุงุฌ ุฅูู ุงุฎุชุจุงุฑ ุงูุณููู ุจุฃุญุฌุงู ูุฎุชููุฉ ูุจุชูููู ูุฎุชูู ููููุจุณ. </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุชุฐูุฑ ุฃูุถูุง ุฃู PgBouncer ูุญุชูู ุฃูุถูุง ุนูู ูุฎุฒู ูุคูุช ููููู ุชูููู <code>pkt_buf</code> ุงููุนููุฉ <code>pkt_buf</code> . </p><br><h2 id="oids" style=";text-align:right;direction:rtl">  OIDs </h2><br><p style=";text-align:right;direction:rtl">  ููุฒุฉ ุฃุฎุฑู ูุจุฑูุงูุฌ ุงูุชุดุบูู pgx ( <em>v3</em> ): ููู ุงุชุตุงู ุ ูุฌุนู ุทูุจ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุญุตูู ุนูู ูุนูููุงุช ุญูู <strong>ูุนุฑู ุงููุงุฆู</strong> ( <em>OID</em> ). </p><br><p style=";text-align:right;direction:rtl">  ุชูุช ุฅุถุงูุฉ ูุฐู ุงููุนุฑูุงุช ุฅูู Postgres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุญุฏูุฏ</a> ุงููุงุฆูุงุช ุงูุฏุงุฎููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุดูู ูุฑูุฏ</a> : ุงูุตููู ูุงูุฌุฏุงูู ูุงููุธุงุฆู ุ ุฅูุฎ. </p><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ุจุฑูุงูุฌ ุงูุชุดุบูู ูุนุฑูุฉ <code>OIDs</code> ูููู ุฃู ุนููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู ุฃู ูุบุฉ ุจุฏุงุฆูุฉ ูุฅุถุงูุฉ ุงูุจูุงูุงุช.  ููุฐุง ุ ูุฏุนู <code>pgx</code> ูุซู ูุฐุง ุงูุฌุฏูู ( <em>ุงูููุชุงุญ ูู ุงุณู ุงูููุน ุ ูุงููููุฉ ูู ูุนุฑู ุงููุงุฆู</em> ) </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]Value{ <span class="hljs-string"><span class="hljs-string">"_aclitem"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"_bool"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"_int4"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"_int8"</span></span>: <span class="hljs-number"><span class="hljs-number">55</span></span>, ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุคุฏู ูุฐุง ุงูุชุทุจูู ุฅูู ุญูููุฉ ุฃู ุจุฑูุงูุฌ ุงูุชุดุบูู ููู ุงุชุตุงู ุซุงุจุช ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฏู ุญูุงูู ุซูุงุซุฉ ุทูุจุงุช ูุชุดููู ุฌุฏูู <code>Object ID</code> .  ูู ุงููุถุน ุงูุนุงุฏู ูุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุชุทุจูู ุ ูุณูุญ ูู ุชุฌูุน ุงูุงุชุตุงู ูู Go ุจุนุฏู ุฅูุดุงุก ุงุชุตุงูุงุช ุฌุฏูุฏุฉ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูููู ุนูุฏ ุฃุฏูู ุชุฏููุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุชู ุงุณุชููุงุฏ ูุฌููุนุฉ ุงูุงุชุตุงูุงุช ุนูู ุฌุงูุจ ุงูุชุทุจูู ููุฒูุฏ ุนุฏุฏ ุงูุงุชุตุงูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ููุช ุงููุญุฏุฉ ุฒูุงุฏุฉ ูุจูุฑุฉ.  ุทูุจุงุช <code>OIDs</code> ุซูููุฉ ุฌุฏูุง ุ ููุชูุฌุฉ ูุฐูู ุ ูููู ูุจุฑูุงูุฌ ุงูุชุดุบูู ุฅุญุถุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู ุญุงูุฉ ุญุฑุฌุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ูู ุงููุญุธุฉ ุงูุชู ุชู ูููุง ุตุจ ูุฐู ุงูุทูุจุงุช ุนูู ุฅุญุฏู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/lm/ra/vb/lmravbubtqb2ah8dvbvvpklbz8m.png"></p><br><p style=";text-align:right;direction:rtl">  <strong>15 ูุนุงููุฉ ูู ุงูุฏูููุฉ</strong> ูู ุงููุถุน ุงูุนุงุฏู ุ ููุฒุฉ ุชุตู ุฅูู <strong>6500 ูุนุงููุฉ</strong> ุฎูุงู ุงูุชุฏููุฑ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุง ูุฌุจ ุงูููุงู ุจู</strong> </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ููุจู ูู ุดูุก ุ ูู ุจุชุญุฏูุฏ ุญุฌู ุญูุงู ุงูุณุจุงุญุฉ ุงูุฎุงุต ุจู ูู ุฃุนูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ <code>database/sql</code> ูููู ุงูููุงู ุจุฐูู ุจุงุณุชุฎุฏุงู ูุธููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DB.SetMaxOpenConns</a> .  ุฅุฐุง ููุช ุชุชุฎูู ุนู ูุงุฌูุงุช <code>database/sql</code> ูุชุณุชุฎุฏู <code>pgx.ConnPool</code> ( <em>ุชุฌูุน ุงูุงุชุตุงู ุงูุฐู ูููุฐู ุจุฑูุงูุฌ ุงูุชุดุบูู ููุณู</em> ) ุ ูููููู ุชุญุฏูุฏ <code>MaxConnections</code> ( <em>ุงูุงูุชุฑุงุถู ูู 5</em> ). </p><br><p style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ุนูุฏ ุงุณุชุฎุฏุงู <code>pgx.ConnPool</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูููู</a> ุจุฑูุงูุฌ ุงูุชุดุบูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู</a> ูุนูููุงุช ุญูู <code>OIDs</code> ุงููุณุชููุฉ ููู ููุฏู ุทูุจุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ุงุชุตุงู ุฌุฏูุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุฑูุถ <code>database/sql</code> ุ ูููููู ุชุฎุฒูู ูุนูููุงุช ุนู <code>OIDs</code> ุจููุณู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">github.com/jackc/pgx/stdlib.OpenDB(pgx.ConnConfig{ CustomConnInfo: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c *pgx.Conn)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(*pgtype.ConnInfo, error)</span></span></span></span> { cachedOids = <span class="hljs-comment"><span class="hljs-comment">//  OIDs   . info := pgtype.NewConnInfo() info.InitializeDataTypes(cachedOids) return info, nil } })</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุทุฑููุฉ ุนูู ุ ููู ุงุณุชุฎุฏุงููุง ูุฏ ูููู ุฎุทูุฑูุง ูู ุธู ุดุฑุทูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููู ุงุณุชุฎุฏุงู ุงูุชุนุฏุงุฏ ุฃู ุฃููุงุน ุงููุฌุงู ูู ุจูุณุชุฌุฑุณ ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุดู ุงููุนุงูุฌ ุ ููููู ุชุจุฏูู ุงูุชุทุจูู ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงูุชู ูุชู ุณูุจูุง ุจูุงุณุทุฉ ุงููุณุฎ ุงููุชูุงุซู ุงูููุทูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุคุฏู ุชูููุฐ ูุฐู ุงูุดุฑูุท ุฅูู ุญูููุฉ ุฃู <code>OIDs</code> ุงููุฎุฒูุฉ ูุคูุชูุง ุชุตุจุญ ุบูุฑ ุตุงูุญุฉ.  ููููุง ูู ูููู ูุงุฏุฑูู ุนูู ุชูุธูููุง ุ ูุฃููุง ูุง ูุนุฑู ูุญุธุฉ ุงูุชุญูู ุฅูู ูุงุนุฏุฉ ุฌุฏูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุนุงูู <code>Postgres</code> ุ ุนุงุฏุฉู ูุง ูุชู ุงุณุชุฎุฏุงู ุงููุณุฎ ุงููุชูุงุซู ุงููุนูู ูุชูุธูู ุงูุชูุงูุฑ ุงูุนุงูู ุ ุงูุฐู ููุณุฎ ูุซููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุดูุฆูุง ูุดูุฆูุง ุ ูุฐูู ูุงุฏุฑุงู ูุง ุชุธูุฑ ูุดููุงุช ุงูุชุฎุฒูู ุงููุคูุช <code>OIDs</code> ูู ุงูุจุฑูุฉ.  ( <em>ูููู ูู ุงูุฃูุถู ุฃู ุชุชุฃูุฏ ูู ุทุฑููุฉ DBA ุงูุฎุงุตุฉ ุจู ููู ูุนูู ูุถุน ุงูุงุณุชุนุฏุงุฏ ูุฏูู</em> ). </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณู ุงูุชุงูู ูู ุจุฑูุงูุฌ ุชุดุบูู <code>pgx</code> - ุงูุฅุตุฏุงุฑ <code>pgx</code> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุชููู ููุงู</a> ุญููุงุช <code>OIDs</code> .  ุงูุขู ุณูุนุชูุฏ ุจุฑูุงูุฌ ุงูุชุดุบูู ููุท ุนูู ูุงุฆูุฉ <code>OIDs</code> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ุจุงููุณุจุฉ ููุฃููุงุน ุงููุฎุตุตุฉ ุ ุณุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุฅูุบุงุก ุงูุชุณูุณู ูู ุฌุงูุจ ุงูุชุทุจูู ุงูุฎุงุต ุจู: ุณูู ูุชุฎูู ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุจุณุงุทุฉ ุนู ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ูุตููู ูู ูุญุฏุงุช ุงูุจุงูุช. </p><br><h1 id="logirovanie-i-monitoring" style=";text-align:right;direction:rtl">  ุชุณุฌูู ููุฑุงูุจุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุณุชุณุงุนุฏ ุงููุฑุงูุจุฉ ูุงูุชุณุฌูู ูู ููุงุญุธุฉ ุงููุดููุงุช ูุจู ุชุนุทู ุงููุงุนุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  <code>database/sql</code> ุทุฑููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DB.Stats ()</a> .  ุณุชุนุทูู ููุทุฉ ุงูุญุงูุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ููุฑุฉ ุนูุง ูุญุฏุซ ุฏุงุฎู ุงูุณุงุฆู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> DBStats <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { MaxOpenConnections <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-comment"><span class="hljs-comment">// Pool State OpenConnections int InUse int Idle int // Counters WaitCount int64 WaitDuration time.Duration MaxIdleClosed int64 MaxLifetimeClosed int64 }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงูุชุฌูุน ูู <code>pgx</code> ูุจุงุดุฑุฉู ุ <code>pgx</code> ุทุฑููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ConnPool.Stat ()</a> ูุนูููุงุช ููุงุซูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> ConnPoolStat <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { MaxConnections <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> CurrentConnections <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> AvailableConnections <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุชุณุฌูู ููู ุจููุณ ุงููุฏุฑ ุ ููุชูุญ ูู <code>pgx</code> ุงูููุงู ุจุฐูู.  ููุจู ุจุฑูุงูุฌ ุงูุชุดุบูู ูุงุฌูุฉ <code>Logger</code> ุ ูู ุฎูุงู ุชุทุจูู ุ ูุงูุชู ุณุชุญุตู ุนูู ุฌููุน ุงูุฃุญุฏุงุซ ุงูุชู ุชุญุฏุซ ุฏุงุฎู ุจุฑูุงูุฌ ุงูุชุดุบูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Logger <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Log a message at the given level with data key/value pairs. // data may be nil. Log(level LogLevel, msg string, data map[string]interface{}) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฃุฑุฌุญ ุ ููุณ ุนููู ุญุชู ุชูููุฐ ูุฐู ุงููุงุฌูุฉ ุจููุณู.  ูู <code>pgx</code> ุฎุงุฑุฌ ุงูุตูุฏูู ุ ุชูุฌุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌููุนุฉ ูู ุงููุญููุงุช</a> ุงูุฎุงุตุฉ ุจุฃูุซุฑ ุฃุฌูุฒุฉ ุงูุชุณุฌูู ุดุนุจูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">uber-go / zap</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">sirupsen / logrus</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">rs / zerolog</a> . </p><br><h1 id="infrastruktura" style=";text-align:right;direction:rtl">  ุงูุจููุฉ ุงูุชุญุชูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุฏุงุฆููุง ุชูุฑูุจูุง ุนูุฏ ุงูุนูู ูุน <code>Postgres</code> ุณุชุณุชุฎุฏู <strong>ุฃุฏุงุฉ ุชุฌูุน ุงูุงุชุตุงูุงุช</strong> ุ ูุณุชููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PgBouncer</a> ( <em>ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">odyssey</a> - ุฅุฐุง ููุช Yandex</em> ). </p><br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ูุฐุง ุ ููููู ุฃู ุชูุฑุฃ ูู ุงูููุงูุฉ ุงูููุชุงุฒุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">brandur.org/postgres-connections</a> .  ุจุงุฎุชุตุงุฑ ุ ุนูุฏูุง <strong>ูุชุฌุงูุฒ</strong> ุนุฏุฏ ุงูุนููุงุก <strong>100 ุ</strong> ุชุจุฏุฃ ุณุฑุนุฉ ูุนุงูุฌุฉ ุงูุทูุจุงุช ูู ุงูุงูุฎูุงุถ.  ูุญุฏุซ ูุฐุง ุจุณุจุจ ููุฒุงุช ุชูููุฐ ุจูุณุชุฌุฑุณ ููุณูุง: ุฅุทูุงู ุนูููุฉ ูููุตูุฉ ููู ุงุชุตุงู ุ ูุขููุฉ ุฅุฒุงูุฉ ุงูููุทุงุช ูุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ููุชูุงุนู - ูู ูุฐุง ูุคุซุฑ. </p><br><p style=";text-align:right;direction:rtl">  ููุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุนูุงุฑ ูู</a> ูุฎุชูู ุชุทุจููุงุช ุชุฌูุน ุงูุงุชุตุงูุงุช: <br><img src="https://habrastorage.org/webt/im/p1/-n/imp1-nuasdxn1wmve7l89rrvmbw.png"></p><br><p style=";text-align:right;direction:rtl">  ูุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงุณู</a> ูุน ูุจุฏูู PgBouncer. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jc/cp/21/jccp2150oefyeiixeu005lpsl_0.png"></p><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ุณุชุจุฏู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุงูุฎุงุตุฉ ุจู ููุง ููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bf/ee/ok/bfeeokt_cdojbuddo7_rhzddjis.png"></p><br><p style=";text-align:right;direction:rtl">  ุญูุซ <code>Server</code> ูู ุงูุนูููุฉ ุงูุชู ุชุนุงูุฌ ุทูุจุงุช ุงููุณุชุฎุฏู.  ูุฐู ุงูุนูููุฉ ุชุฏูุฑ ูู <code>kubernetes</code> ูู 3 ูุณุฎ ( <em>ุนูู ุงูุฃูู</em> ).  ุจุดูู ูููุตู ุ ุนูู ุฎุงุฏู ุงูุญุฏูุฏ ุ ููุงู <code>Postgres</code> ุ ุงูุชู ุชุบุทููุง <code>PgBouncer'</code> .  <code>PgBouncer</code> ููุณู ุฐู ุชุฑุงุจุท ูุงุญุฏ ุ ูุฐูู ูุทูู ุงูุนุฏูุฏ ูู ุงูุญุฑุงุณ ุ ุญุฑูุฉ ุงููุฑูุฑ ุงูุชู <code>PgBouncer</code> ุฎูุงููุง ุจุงุณุชุฎุฏุงู <code>HAProxy</code> .  ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุณูุณูุฉ ุชูููุฐ ุงูุงุณุชุนูุงู ูุฐู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: <code>   โ HAProxy โ PgBouncer โ Postgres</code> . </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูุนูู <code>PgBouncer</code> ูู ุซูุงุซุฉ ุฃูุถุงุน: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุชุฌูุน ุงูุฌูุณุฉ</strong> - ููู ุฌูุณุฉ ุ ูุชู ุฅุตุฏุงุฑ ุงุชุตุงู ูุงุญุฏ ูุชุนููู ููุง ุทูุงู ูุชุฑุฉ ุงูุญูุงุฉ. </li><li style=";text-align:right;direction:rtl">  <strong>ุชุฌูุน ุงููุนุงููุงุช</strong> - ูุนูุด ุงูุงุชุตุงู ุฃุซูุงุก ุชุดุบูู ุงููุนุงููุฉ.  ุจูุฌุฑุฏ ุงูุชูุงู ุงููุนุงููุฉ ุ ูุฃุฎุฐ <code>PgBouncer</code> ูุฐุง ุงูุงุชุตุงู <code>PgBouncer</code> ุฅูู ูุนุงููุฉ ุฃุฎุฑู.  ูุณูุญ ูุฐุง ุงููุถุน ุจุงูุชุฎูุต ุฌูุฏูุง ูู ุงููุฑูุจุงุช. </li><li style=";text-align:right;direction:rtl">  <strong>ุชุฌููุน ุงูุจูุงูุงุช</strong> - ูุถุน <strong>ุงูุฅููุงู</strong> .  ุชู ุฅูุดุงุคู ููุท ูุฏุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PL / Proxy</a> . </li></ul><br><p style=";text-align:right;direction:rtl">  ููููู ุฑุคูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตูููุฉ</a> ุงูุฎุตุงุฆุต ุงููุชููุฑุฉ ูู ูู ูุถุน.  ูุฎุชุงุฑ <strong>ุชุฌููุน ุงููุนุงููุงุช</strong> ุ ููู ูู ูููุฏูุง ุนูู ุงูุนูู ูุน <code>Prepared Statements</code> . </p><br><h2 id="transaction-pooling--prepared-statements" style=";text-align:right;direction:rtl">  ุชุฌูุน ุงููุนุงููุงุช + ุงูุจูุงูุงุช ุงููุนุฏุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุชุฎูู ุฃููุง ูุฑูุฏ ุฅุนุฏุงุฏ ุทูุจ ุซู ุชูููุฐู.  ูู ูุฑุญูุฉ ูุง ุ ูุจุฏุฃ ูุนุงููุฉ ูุฑุณู ูููุง ุทูุจ ุชุญุถูุฑ ุ ููุญุตู ุนูู ูุนุฑูู ุงูุทูุจ ุงููุนุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pb/tu/bq/pbtubqa7cvmly0ntnhs0dwc9etc.png"></p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุ ูู ุฃู ูุญุธุฉ ุฃุฎุฑู ูู ุงูููุช ุงูููุงุณุจ ุ ูููู ุจุฅูุดุงุก ูุนุงููุฉ ุฃุฎุฑู.  ูู ุฐูู ุ ููุชูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฑูุฏ ุชูุจูุฉ ุงูุทูุจ ุจุงุณุชุฎุฏุงู ุงููุนุฑู ูุน ุงููุนููุงุช ุงููุญุฏุฏุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/uy/ci/h4/uycih4iuh8aasw43aqodbsxolac.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ูุถุน " <strong>ุชุฌูุน ุงููุนุงููุงุช"</strong> ุ ูููู ุชูููุฐ ูุนุงููุชูู ูู ุงุชุตุงูุงุช ูุฎุชููุฉ ุ ููู <strong>ูุนุฑู ุงูุจูุงู</strong> ุตุงูุญ ููุท ุฏุงุฎู ุงุชุตุงู ูุงุญุฏ.  ูุญุตู ุนูู <code>prepared statement does not exist</code> ุฎุทุฃ ุนูุฏ ูุญุงููุฉ ุชูููุฐ ุทูุจ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฃูุซุฑ ุฑุถุงุกูุง: ูุธุฑูุง ูุฃูู ุฃุซูุงุก ุงูุชุทููุฑ ูุงุฎุชุจุงุฑ ุงูุญูู ุตุบูุฑ ุ ูุฅู <code>PgBouncer</code> ูุตุฏุฑ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ููุณ ุงูุงุชุตุงู ููุนูู ูู ุดูุก ุจุดูู ุตุญูุญ.  ูููู ุจูุฌุฑุฏ ุทุฑุญูุง ุนูู ุงูููุชุฌ ุ ุชุจุฏุฃ ุงูุทูุจุงุช ูู ุงูุงูุฎูุงุถ ูุน ูุฌูุฏ ุฎุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุงุจุญุซ ุนู <code>Prepared Statements</code> ูู ูุฐุง ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">sql := <span class="hljs-string"><span class="hljs-string">`select * from places where city = ?`</span></span> rows, err := s.db.Query(sql, city)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุชุฑุงู!  ุณูุญุฏุซ ุชุญุถูุฑ ุงูุงุณุชุนูุงู ุถูููุง ุฏุงุฎู <code>Query()</code> .  ูู ุงูููุช ููุณู ุ ุณูุญุฏุซ ุฅุนุฏุงุฏ ูุชูููุฐ ุงูุทูุจ ูู ูุนุงููุงุช ูุฎุชููุฉ ูุณูุชููู ุจุงููุงูู ูู ูุง ูุตูุชู ุฃุนูุงู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุง ูุฌุจ ุงูููุงู ุจู</strong> </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุงูุฃูู ูุงูุฃุณูู ูู <strong>ุชุจุฏูู <code>PgBouncer</code> ุฅูู <code>Session pooling</code></strong> .  ูุชู ุชุฎุตูุต ุงุชุตุงู ูุงุญุฏ ููุฌูุณุฉ ุ ูุชุจุฏุฃ ุฌููุน ุงููุนุงููุงุช ูู ูุฐุง ุงูุตุฏุฏ ูุชุนูู ุงูุทูุจุงุช ุงููุนุฏุฉ ุจุดูู ุตุญูุญ.  ูููู ูู ูุฐุง ุงููุถุน ุ ูุฅู ููุงุกุฉ ุงุณุชุฎุฏุงู ุงููุฑูุจุงุช ุชุชุฑู ุงููุซูุฑ ููุง ูู ูุฑุบูุจ ููู.  ูุฐูู ุ ูุง ูุนุชุจุฑ ูุฐุง ุงูุฎูุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุงูุซุงูู ูู <strong>ุฅุนุฏุงุฏ ุทูุจ ูู ุฌุงูุจ ุงูุนููู</strong> .  ูุง ุฃุฑูุฏ ุงูููุงู ุจุฐูู ูุณุจุจูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงุท ุถุนู SQL ุงููุญุชููุฉ.  ูุฏ ููุณู ุงููุทูุฑ ุฃู ููุฑุจ ุจุดูู ุบูุฑ ุตุญูุญ. </li><li style=";text-align:right;direction:rtl">  ุงููุฑูุจ ูู ูุนููุงุช ุงูุงุณุชุนูุงู ูู ูู ูุฑุฉ ูุฌุจ ุฃู ุชูุชุจ ุจูุฏูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ุฎูุงุฑ ุขุฎุฑ ูู <strong>ุงูุชูุงู ูู ุทูุจ ูู ูุนุงููุฉ ุจุดูู ุตุฑูุญ</strong> .  ุจุนุฏ ูู ุดูุก ุ ูุง ุฏุงูุช ุงููุนุงููุฉ ุญูุฉ ุ <code>PgBouncer</code> ูุง ุชูุชูุท ุงูุงุชุตุงู.  ูุนูู ูุฐุง ุ ูููู ุจุงูุฅุถุงูุฉ ุฅูู ุงููุนู ูู ุงูุดูุฑุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูุญุตู ุฃูุถูุง ุนูู ุงููุฒูุฏ ูู ููุงููุงุช ุงูุดุจูุฉ: ุงูุจุฏุก ุ ุงูุฅุนุฏุงุฏ ุ ุงูุชูููุฐ ุ ุงูุงูุชุฒุงู.  ุฅุฌูุงูู 4 ููุงููุงุช ุดุจูุฉ ููู ุทูุจ.  ุงููููู ูููู. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุฃุฑูุฏูุง ุจุฃูุงู ูุฑุงุญุฉ ูููุงุกุฉ.  ูููุงู ูุซู ูุฐุง ุงูุฎูุงุฑ!  ููููู ุฅุฎุจุงุฑ ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุดูู ุตุฑูุญ ุฃูู ุชุฑูุฏ <strong>ุงุณุชุฎุฏุงู ูุถุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Simple Query</a></strong> .  ูู ูุฐุง ุงููุถุน ุ ูู ูููู ููุงู ุฅุนุฏุงุฏ ูุณูุชู ุชูุฑูุฑ ุงูุทูุจ ุจุงููุงูู ูู ููุงููุฉ ุดุจูุฉ ูุงุญุฏุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุนูู ุงูุชุฏุฑูุน ููู ูู ุงููุนููุงุช ููุณูุง ( <em>ูุฌุจ ุชูุดูุท <code>standard_conforming_strings</code> ุนูู ุงููุณุชูู ุงูุฃุณุงุณู ุฃู ุนูุฏ ุฅูุดุงุก ุงุชุตุงู</em> ). </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">cfg := pgx.ConnConfig{ ... RuntimeParams: <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>{ <span class="hljs-string"><span class="hljs-string">"standard_conforming_strings"</span></span>: <span class="hljs-string"><span class="hljs-string">"on"</span></span>, }, PreferSimpleProtocol: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }</code> </pre> <br><h1 id="otmena-zaprosov" style=";text-align:right;direction:rtl">  ุฅูุบุงุก ุงูุทูุจุงุช </h1><br><p style=";text-align:right;direction:rtl">  ุชุชุนูู ุงููุดููุงุช ุงูุชุงููุฉ ุจุฅูุบุงุก ุงูุทูุจุงุช ูู ุฌุงูุจ ุงูุชุทุจูู. </p><br><p style=";text-align:right;direction:rtl">  ุฃูู ูุธุฑุฉ ุนูู ูุฐุง ุงูุฑูุฒ.  ุฃูู ูู ุงููุฒุงููุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">rows, err := s.db.QueryContext(ctx, ...)</code> </pre> <br><p style=";text-align:right;direction:rtl">  Go ูุฏูู ุทุฑููุฉ ููุชุญูู ูู ุชุฏูู ุชูููุฐ ุงูุจุฑูุงูุฌ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">context.Context</a> .  ูู ูุฐุง ุงูุฑูุฒ ุ ูููู ุจุชูุฑูุฑ <code>ctx</code> ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุญูุซ ุนูุฏูุง ูุชู ุฅุบูุงู ุงูุณูุงู ุ ููุบู ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุทูุจ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ููุณู ุ ูู ุงููุชููุน ุฃู ูููุฑ ุงูููุงุฑุฏ ุนู ุทุฑูู ุฅูุบุงุก ุงูุทูุจุงุช ุงูุชู ูุง ููุชุธุฑูุง ุฃุญุฏ.  ูููู ุนูุฏูุง ูุชู <code>PgBouncer</code> ุงูุทูุจ <code>PgBouncer</code> ูุฑุณู <code>PgBouncer</code> ุงูุฅุตุฏุงุฑ <em>1.7</em> ูุนูููุงุช ุฅูู ุงูุงุชุตุงู ุจุฃู ูุฐุง ุงูุงุชุตุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุ ูุจุนุฏ ุฐูู <code>PgBouncer</code> ุฅูู ุงูุชุฌูุน.  ูุฐุง ุงูุณููู ูู <code>PgBouncer'</code> ูู ุชุถููู ุจุฑูุงูุฌ ุงูุชุดุบูู ุ ูุงูุฐู ุนูุฏ ุฅุฑุณุงู ุงูุทูุจ ุงูุชุงูู ุ ูุชููู <code>ReadyForQuery</code> ููุฑูุง ุงุณุชุฌุงุจุฉ ูุฐูู.  ูู ุงูููุงูุฉ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุญุธ ุฃุฎุทุงุก ReadyForQuery ุบูุฑ ุงููุชููุนุฉ</a> . </p><br><p style=";text-align:right;direction:rtl">  ุจุฏุกูุง ูู <code>PgBouncer</code> ุงูุฅุตุฏุงุฑ <em>1.8 ุ</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู ุฅุตูุงุญ</a> ูุฐุง ุงูุณููู.  ุงุณุชุฎุฏู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู <code>PgBouncer</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุนูู ุงูุฑุบู ูู ุฐูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุฎุชูู ุงูุฃุฎุทุงุก - ุณูุจูู ุณููู ูุซูุฑ ููุงูุชูุงู.  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุฏ ูุชููู ุชุทุจูููุง ุฅุฌุงุจุงุช ููุณ ูุทูุจู ุ ูููู ููุทูุจ ุงููุฌุงูุฑ (ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃู ุงูุทูุจุงุช ุชุชูุงูู ูุน ููุน ูุชุฑุชูุจ ุงูุจูุงูุงุช ุงููุทููุจุฉ).  ูุฐุง ูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุงุณุชุนูุงู <code>where user_id = 2</code> ุ ุงุณุชุฌุงุจุฉ ุงูุงุณุชุนูุงู <code>where user_id = 42</code> ุณูุชู ุฅุฑุฌุงุนูุง.  ููุฑุฌุน ุฐูู ุฅูู ูุนุงูุฌุฉ ุทูุจุงุช ุงูุฅูุบุงุก ุนูู ูุณุชููุงุช ูุฎุชููุฉ: ุนูู ูุณุชูู ุชุฌูุน ุงูุณุงุฆููู ูุชุฌูุน ุงูุญุงุฑุณ. </p><br><h3 id="otlozhennaya-otmena" style=";text-align:right;direction:rtl">  ุชุฃุฌูู ุงูุฅูุบุงุก </h3><br><p style=";text-align:right;direction:rtl">  ูุฅูุบุงุก ุงูุทูุจ ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงุชุตุงู ุฌุฏูุฏ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุทูุจ ุงูุฅูุบุงุก.  <code>Postgres</code> ููุดุฆ ุนูููุฉ ูููุตูุฉ ููู ุงุชุตุงู.  ูุฑุณู ุฃูุฑูุง ูุฅูุบุงุก ุงูุทูุจ <strong>ุงูุญุงูู</strong> ูู ุนูููุฉ ูุญุฏุฏุฉ.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ุงุชุตุงู ุฌุฏูุฏ ูููู ููู ูุนุฑู ุงูุนูููุฉ (PID) ุงูุฐู ููููุง.  ูููู ูู ุงูููุช ุงูุฐู ููุชูู ููู ุฃูุฑ ุงูุฅูุบุงุก ุฅูู ุงููุงุนุฏุฉ ุ ููุฏ ููุชูู ุงูุทูุจ ุงูููุบู ูู ุชููุงุก ููุณู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/us/xf/v_/usxfv_i0ze_axpmjtlir183reiu.png"></p><br><p style=";text-align:right;direction:rtl">  ุณูููู <code>Postgres</code> ุจุชูููุฐ ุงูุฃูุฑ ูุฅูุบุงุก ุงูุทูุจ <strong>ุงูุญุงูู</strong> ูู ุงูุนูููุฉ ุงููุญุฏุฏุฉ.  ููู ุงูุทูุจ ุงูุญุงูู ูู ูููู ุงูุทูุจ ุงูุฐู ุฃุฑุฏูุง ุฅูุบุงุคู ูู ุงูุจุฏุงูุฉ.  ูุธุฑูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฐุง ุงูุณููู</a> ุนูุฏ ุงูุนูู ูุน <code>Postgres</code> ูุน <code>PgBouncer</code> ุนุฏู ุฅูุบุงุก ุงูุทูุจ ุนูู ูุณุชูู ุจุฑูุงูุฌ ุงูุชุดุบูู.  ููููุงู ุจุฐูู ุ ููููู ุชุนููู <code>CustomCancel</code> ุ ูุงูุชู ูู ุชูุบู ุงูุทูุจ ุ ุญุชู ูู <code>context.Context</code> ุงุณุชุฎุฏุงู <code>context.Context</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs">cfg := pgx.ConnConfig{ ... CustomCancel: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_ *pgx.Conn)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }, }</code> </pre> <br><h1 id="cheklist-po-rabote-s-postgres" style=";text-align:right;direction:rtl">  Postgres ุงููุฑุฌุนูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุงูุงุณุชูุชุงุฌุงุช ุ ูุฑุฑุช ุฅูุดุงุก ูุงุฆูุฉ ูุฑุฌุนูุฉ ููุนูู ูุน ุจูุณุชุฌุฑุณ.  ูุฐุง ูู ุดุฃูู ุฃู ูุณุงุนุฏ ุงููุงุฏุฉ ุชูุณุฌู ูุน ุฑุฃุณู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/jackc/pgx</a> ูุณุงุฆู ููุนูู ูุน Postgres. </li><li style=";text-align:right;direction:rtl">  ุงูุญุฏ ูู ุญุฌู ุชุฌูุน ุงูุงุชุตุงู ูู ุฃุนูุงู. </li><li style=";text-align:right;direction:rtl">  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช <code>OIDs</code> ุฃู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pgx.ConnPool</a> ุฅุฐุง ููุช ุชุนูู ูุน <code>pgx</code> ุงูุฅุตุฏุงุฑ 3. </li><li style=";text-align:right;direction:rtl">  ุฌูุน ุงูููุงููุณ ูู ุชุฌูุน ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DB.Stats ()</a> ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ConnPool.Stat ()</a> . </li><li style=";text-align:right;direction:rtl">  ุณุฌู ูุง ูุญุฏุซ ูู ุงูุณุงุฆู. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ูุถุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุณุชุนูุงู ุงูุจุณูุท</a> ูุชุฌูุจ ูุดุงูู ูู ุฅุนุฏุงุฏ ุงูุงุณุชุนูุงู ูู ูุถุน ูุนุงููุงุช <code>PgBouncer</code> . </li><li style=";text-align:right;direction:rtl">  ุชุญุฏูุซ <code>PgBouncer</code> ุฅูู ุฃุญุฏุซ ุฅุตุฏุงุฑ. </li><li style=";text-align:right;direction:rtl">  ูู ุญุฐุฑุง ูุน ุฅูุบุงุก ุงูุทูุจุงุช ูู ุงูุชุทุจูู. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar461935/">https://habr.com/ru/post/ar461935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar461919/index.html">ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุงุฐุฌ ุนูู React</a></li>
<li><a href="../ar461921/index.html">HDMI-LVDS. ุงูุชุทููุฑ ุนูู TSUMV59 ูู MStar</a></li>
<li><a href="../ar461923/index.html">JetBrains ุงูููู ุงูููุชูุญ ูู ุณุงูุช ุจุทุฑุณุจุฑุบ: ููุฏูู</a></li>
<li><a href="../ar461927/index.html">ุงูุชุนูู ุงููุดุท ุงูุชุฑุชูุจ</a></li>
<li><a href="../ar461929/index.html">ุฑุตุฏ ูุงูุชุญูู ูู ุญุงูุฉ SSD ุนูู ููููุณ</a></li>
<li><a href="../ar461937/index.html">ูุงููู ุงูุดูู ุงูุฑุนุงุด ูููููุฉ ูุณุฑู</a></li>
<li><a href="../ar461939/index.html">ุนุงู ุงููุบุงูุฑุฉ ูุน ุงูุฌุฑุงููู ุจูุซูู</a></li>
<li><a href="../ar461941/index.html">ุชุฏููููุง</a></li>
<li><a href="../ar461945/index.html">ููุฎุต ุงูุฃุญุฏุงุซ ููุญุชุฑูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูู ูุฌุงู ุชูููููุฌูุง ุงููุนูููุงุช ูุดูุฑ ุฃุบุณุทุณ 2019</a></li>
<li><a href="../ar461949/index.html">AppCode 2019.2: Swift 5.1 ุ ุชุญููู ุชุบุทูุฉ ุงูููุฏ ูู ุฎูุงู ุงูุงุฎุชุจุงุฑุงุช ุ ูุนุฑุถ ุงูููุฏ ุงููููู ูุบูุฑ ุฐูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>