<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèª üöõ üë®üèº‚Äçüè≠ Entendendo os Corretores de Mensagens. Aprendendo a mec√¢nica das mensagens atrav√©s do ActiveMQ e Kafka. Cap√≠tulo 1 üîä ‚öúÔ∏è ü§Ωüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! 

 Come√ßou a traduzir um pequeno livro: 
 " Entendendo os Message Brokers ", 
 autor: Jakub Korab, editor: O'Reilly Media, Inc., data de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entendendo os Corretores de Mensagens. Aprendendo a mec√¢nica das mensagens atrav√©s do ActiveMQ e Kafka. Cap√≠tulo 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466385/"> Ol√° pessoal! <br><br>  Come√ßou a traduzir um pequeno livro: <br>  " <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Entendendo os Message Brokers</a></b> ", <br>  autor: Jakub Korab, editor: O'Reilly Media, Inc., data de publica√ß√£o: junho de 2017, ISBN: 9781492049296. <br><br>  Desde a introdu√ß√£o do livro: <br>  "... <i>Este livro ensinar√° voc√™ a falar sobre sistemas de mensagens em corretores comparando e contrastando duas tecnologias populares de corretores: Apache ActiveMQ e Apache Kafka. Aqui voc√™ encontrar√° exemplos de incentivos de uso e desenvolvimento que levaram seus desenvolvedores a usar abordagens completamente diferentes para na mesma √°rea - envio de mensagens entre sistemas com um intermedi√°rio intermedi√°rio. Analisaremos essas tecnologias do zero e destacaremos a influ√™ncia de v√°rias op√ß√µes de design ao longo do caminho. Voc√™ obter√° um entendimento profundo dos dois produtos,</i>  <i>uma compreens√£o de como eles devem e n√£o devem ser usados, e uma compreens√£o do que procurar ao considerar outras tecnologias de mensagens no futuro</i> ... " <br><br>  Pe√ßas traduzidas at√© a data: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cap√≠tulo 1. Introdu√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cap√≠tulo 2. ActiveMQ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cap√≠tulo 3. Kafka</a> <br><br>  <b>Tradu√ß√£o conclu√≠da: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tele.gg/middle_java</a></b> <br><br>  Vou postar os cap√≠tulos completos √† medida que forem traduzidos. <br><a name="habracut"></a><br><h2>  CAP√çTULO 1 </h2><br><h2>  1. Introdu√ß√£o </h2><br>  As mensagens entre sistemas s√£o uma das √°reas menos compreendidas da TI.  Como desenvolvedor ou arquiteto, voc√™ pode estar familiarizado com v√°rias estruturas e bancos de dados.  No entanto, √© prov√°vel que voc√™ tenha apenas um conhecimento passageiro de como as tecnologias de mensagens baseadas em broker funcionam.  Se voc√™ se sente assim, n√£o se preocupe, est√° em boa companhia. <br><br>  As pessoas geralmente t√™m contato muito limitado com a infraestrutura de mensagens.  Muitas vezes, eles se conectam a um sistema criado h√° muito tempo ou fazem o download de um kit de distribui√ß√£o da Internet, instalam-no no PROM e come√ßam a escrever o c√≥digo para ele.  Ap√≥s o lan√ßamento da infraestrutura no PROM, os resultados podem ser misturados: perda de mensagens durante falhas, o envio n√£o funciona como o esperado ou os corretores "suspendem" seus produtores ou n√£o enviam mensagens para seus consumidores. <br><br>  Parece familiar? <br><br>  Um cen√°rio comum √© quando seu c√≥digo de mensagens funciona bem, por enquanto.  At√© parar de funcionar.  Esse per√≠odo acalma a vigil√¢ncia e d√° uma falsa sensa√ß√£o de seguran√ßa, o que leva a ainda mais c√≥digo baseado em id√©ias falsas sobre o comportamento fundamental da tecnologia.  Quando algo come√ßa a dar errado, voc√™ se depara com uma verdade desconfort√°vel: que realmente n√£o entendeu o comportamento b√°sico do produto ou os compromissos escolhidos pelos autores, como desempenho versus confiabilidade ou transacionalidade versus escalabilidade horizontal. <br><br>  Sem uma compreens√£o profunda de como os corretores funcionam, as pessoas fazem declara√ß√µes aparentemente razo√°veis ‚Äã‚Äãsobre seus sistemas de mensagens, como: <br><br><ul><li>  O sistema nunca perder√° mensagens </li><li>  As mensagens ser√£o processadas sequencialmente </li><li>  A adi√ß√£o de consumidores tornar√° o sistema mais r√°pido </li><li>  As mensagens ser√£o entregues apenas uma vez. </li></ul><br>  Infelizmente, algumas dessas declara√ß√µes s√£o baseadas em suposi√ß√µes que se aplicam apenas em determinadas circunst√¢ncias, enquanto outras s√£o simplesmente incorretas. <br><br>  Este livro ensinar√° como falar sobre sistemas de mensagens baseados em broker comparando e contrastando duas tecnologias populares de broker: Apache ActiveMQ e Apache Kafka.  Aqui, descreveremos exemplos de incentivos de uso e desenvolvimento que levaram seus desenvolvedores a usar abordagens completamente diferentes para o mesmo campo - mensagens entre sistemas com um intermedi√°rio intermedi√°rio.  Examinaremos essas tecnologias do zero e destacaremos o impacto de v√°rias op√ß√µes de design ao longo do caminho.  Voc√™ obter√° um profundo entendimento de ambos os produtos, um entendimento de como eles devem e n√£o devem ser usados ‚Äã‚Äãe um entendimento do que procurar ao considerar outras tecnologias de mensagens no futuro. <br><br>  Antes de come√ßarmos, vamos ao b√°sico. <br><br><h3>  O que √© um sistema de mensagens e por que √© necess√°rio </h3><br>  Para que dois aplicativos se comuniquem, eles devem primeiro definir uma interface.  A defini√ß√£o dessa interface inclui a sele√ß√£o de um transporte ou protocolo, como HTTP, MQTT ou SMTP, e a negocia√ß√£o dos formatos de mensagens que os sistemas trocar√£o.  Pode ser um processo rigoroso, como definir um esquema XML com os requisitos de carga √∫til de uma mensagem ou pode ser muito menos formal, por exemplo, um acordo entre dois desenvolvedores de que alguma parte da solicita√ß√£o HTTP conter√° um identificador de cliente . <br><br>  Enquanto o formato da mensagem e a ordem de envio entre os sistemas forem consistentes, eles poder√£o interagir entre si sem se preocupar com a implementa√ß√£o de outro sistema.  As partes internas desses sistemas, como uma linguagem de programa√ß√£o ou estrutura usada, podem mudar com o tempo.  Enquanto o contrato em si for suportado, a intera√ß√£o poder√° continuar inalterada do outro lado.  Os dois sistemas s√£o efetivamente desconectados (separados) por essa interface. <br><br>  Os sistemas de mensagens, como regra, prev√™em a participa√ß√£o de um intermedi√°rio entre dois sistemas que interagem para liberar ainda mais (separar) o remetente do destinat√°rio ou destinat√°rios.  Ao mesmo tempo, o sistema de mensagens permite que o remetente envie uma mensagem sem saber onde est√° o destinat√°rio, se ele est√° ativo ou quantos est√£o. <br><br>  Vejamos algumas analogias das variedades de problemas que um sistema de mensagens resolve e introduzimos alguns termos b√°sicos. <br><br><h4>  Ponto a ponto </h4><br><blockquote>  Alexandra vai ao correio para enviar um pacote a Adam.  Ela caminha at√© a janela e entrega um pacote ao empregado.  O funcion√°rio pega o pacote e entrega um recibo a Alexandra.  Adam n√£o precisa estar em casa no momento do envio do pacote.  Alexandra est√° confiante de que o pacote ser√° entregue a Adam em algum momento no futuro e poder√° continuar fazendo suas pr√≥prias coisas.  Mais tarde, em algum momento, Adam recebe o pacote. </blockquote>  Este √© um exemplo de um modelo de mensagens <i>ponto a ponto</i> .  Os correios aqui atuam como um mecanismo de distribui√ß√£o de encomendas, garantindo que cada encomenda seja entregue uma vez.  O uso dos correios separa o ato de enviar o pacote da entrega do pacote. <br>  Nos sistemas de mensagens cl√°ssicos, o modelo ponto a ponto √© implementado atrav√©s de <i>filas</i> .  A fila atua como um buffer FIFO (primeiro a entrar, primeiro a sair) no qual um ou mais consumidores podem se inscrever.  Cada mensagem √© entregue a apenas <i>um dos consumidores inscritos</i> .  As filas geralmente tentam distribuir mensagens de maneira justa entre os consumidores.  Apenas um consumidor receber√° esta mensagem. <br><br>  O termo "dur√°vel" √© aplicado √†s filas.  <i>A confiabilidade</i> √© um recurso do servi√ßo que garante que o sistema de mensagens salve as mensagens quando n√£o houver assinantes ativos at√© que o consumidor assine a fila para entrega de mensagens. <br><br>  Confiabilidade √© frequentemente confundida com <i>persist√™ncia</i> e, embora os dois termos sejam usados ‚Äã‚Äãde forma intercambi√°vel, eles executam fun√ß√µes diferentes.  A persist√™ncia determina se a mensagem √© trocada pelo sistema de mensagens em qualquer tipo de armazenamento entre o recebimento e o envio ao consumidor.  As mensagens enviadas para a fila podem ou n√£o ser persistentes. <br>  As mensagens ponto a ponto s√£o usadas quando um caso de uso requer uma a√ß√£o √∫nica com uma mensagem.  Um exemplo √© depositar fundos em uma conta ou concluir uma ordem de entrega.  Discutiremos mais tarde por que o pr√≥prio sistema de mensagens n√£o √© capaz de fornecer entrega √∫nica e por que as filas podem, na melhor das hip√≥teses, fornecer uma garantia de entrega <i>pelo menos uma vez</i> . <br><br><h4>  Assinante do editor </h4><br><blockquote>  Gabriella disca o n√∫mero da confer√™ncia.  Enquanto est√° conectada √† confer√™ncia, ela ouve tudo o que o orador diz, junto com os outros participantes da chamada.  Quando ela desliga, ela pula o que √© dito.  Quando reconectada, ela continua a ouvir o que eles dizem. </blockquote>  Este √© um exemplo de um modelo de mensagens de <i>publica√ß√£o-assinatura</i> .  A confer√™ncia atua como um mecanismo de transmiss√£o.  A pessoa que fala n√£o se importa com quantas pessoas est√£o participando da chamada no momento - o sistema garante que qualquer pessoa conectada no momento ou√ßa o que est√° sendo dito. <br>  Nos sistemas de mensagens cl√°ssicos, o modelo de mensagens de publica√ß√£o-assinatura √© implementado por meio de <i>t√≥picos</i> .  O t√≥pico fornece o mesmo m√©todo de transmiss√£o que o mecanismo de confer√™ncia.  Quando uma mensagem √© enviada ao t√≥pico, ela √© distribu√≠da <i>a todos os usu√°rios inscritos</i> . <br><br>  Os t√≥picos geralmente <i>n√£o</i> s√£o <i>confi√°veis ‚Äã‚Äã(n√£o dur√°veis)</i> .  Como um ouvinte que n√£o ouve o que √© dito na chamada em confer√™ncia, quando o ouvinte √© desconectado, os assinantes do t√≥pico ignoram todas as mensagens enviadas quando est√£o offline.  Por esse motivo, pode-se dizer que os t√≥picos fornecem uma garantia de entrega <i>n√£o mais que uma vez</i> para cada consumidor. <br><br>  O sistema de mensagens com assinatura de publica√ß√£o geralmente √© usado quando as mensagens s√£o de natureza informativa e a perda de uma mensagem n√£o √© particularmente significativa.  Por exemplo, um t√≥pico pode transmitir leituras de temperatura de um grupo de sensores uma vez por segundo.  Um sistema que esteja interessado na temperatura atual e que assine o t√≥pico n√£o se preocupar√° se perder uma mensagem - outro chegar√° no futuro pr√≥ximo. <br><br><h4>  Modelos h√≠bridos </h4><br><blockquote>  O site da loja coloca as mensagens do pedido na fila de mensagens.  O principal consumidor dessas mensagens √© o sistema executivo.  Al√©m disso, o sistema de auditoria deve ter c√≥pias dessas mensagens de pedido para rastreamento subsequente.  Ambos os sistemas n√£o podem ignorar mensagens, mesmo se os sistemas em si n√£o estiverem dispon√≠veis por algum tempo.  Um site n√£o deve estar ciente de outros sistemas. </blockquote>  Os cen√°rios de uso geralmente exigem a combina√ß√£o de modelos de mensagens de publica√ß√£o-assinatura e ponto a ponto, por exemplo, quando v√°rios sistemas exigem uma c√≥pia da mensagem e confiabilidade e persist√™ncia s√£o necess√°rias para evitar a perda de mensagens. <br><br>  Nesses casos, √© necess√°rio um destino (um termo geral para filas e t√≥picos), que distribui as mensagens principalmente como t√≥pico, para que cada mensagem seja enviada para um sistema separado que esteja interessado nessas mensagens, mas tamb√©m no qual cada sistema possa definir v√°rios consumidores que recebem mensagens recebidas, mais parecidas com uma fila.  O tipo de leitura neste caso √© <i>uma vez para cada parte interessada</i> .  Esses destinat√°rios h√≠bridos geralmente exigem durabilidade; portanto, se o consumidor for desconectado, as mensagens enviadas nesse momento ser√£o recebidas ap√≥s a reconex√£o do consumidor. <br><br>  Os modelos h√≠bridos n√£o s√£o novos e podem ser usados ‚Äã‚Äãna maioria dos sistemas de mensagens, incluindo o ActiveMQ (atrav√©s de destinos virtuais ou compostos que combinam t√≥picos e filas) e o Kafka (implicitamente, como uma propriedade fundamental do design de seu destinat√°rio). <br><br>  Agora que temos uma terminologia b√°sica e um entendimento do que um sistema de mensagens pode ser √∫til, vamos aos detalhes. <br><br>  <b>Tradu√ß√£o conclu√≠da: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tele.gg/middle_java</a></b> <br><br>  Pr√≥xima parte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cap√≠tulo 2. ActiveMQ</a> <br><br>  <i>Para continuar ...</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466385/">https://habr.com/ru/post/pt466385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466373/index.html">Desenvolvimento de bot Python TamTam</a></li>
<li><a href="../pt466375/index.html">Museum DataArt. KUVT2 - estudar e brincar</a></li>
<li><a href="../pt466379/index.html">Execute o software "desktop" no microcontrolador</a></li>
<li><a href="../pt466381/index.html">Como as l√¢mpadas LED da Era mudaram em 2019</a></li>
<li><a href="../pt466383/index.html">Oceano de criptomoedas: an√°lise dos 50 principais projetos com o CoinMarketCap</a></li>
<li><a href="../pt466397/index.html">N√≥s reprogramamos o caixa e imprimimos nele Keanu Reeves. Parte 2. Software para PC</a></li>
<li><a href="../pt466401/index.html">Um pouco de matem√°tica financeira: calculando infla√ß√£o e juros</a></li>
<li><a href="../pt466403/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 35. Protocolo de entroncamento din√¢mico de DTP</a></li>
<li><a href="../pt466405/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 36. Protocolo de Canal STP</a></li>
<li><a href="../pt466407/index.html">Cultura de recrutamento em grandes empresas de estat√≠sticas Glassdoor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>