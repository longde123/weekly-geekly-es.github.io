<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏻 🚛 👨🏼‍🏭 Entendendo os Corretores de Mensagens. Aprendendo a mecânica das mensagens através do ActiveMQ e Kafka. Capítulo 1 🔊 ⚜️ 🤽🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá pessoal! 

 Começou a traduzir um pequeno livro: 
 " Entendendo os Message Brokers ", 
 autor: Jakub Korab, editor: O'Reilly Media, Inc., data de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entendendo os Corretores de Mensagens. Aprendendo a mecânica das mensagens através do ActiveMQ e Kafka. Capítulo 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466385/"> Olá pessoal! <br><br>  Começou a traduzir um pequeno livro: <br>  " <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Entendendo os Message Brokers</a></b> ", <br>  autor: Jakub Korab, editor: O'Reilly Media, Inc., data de publicação: junho de 2017, ISBN: 9781492049296. <br><br>  Desde a introdução do livro: <br>  "... <i>Este livro ensinará você a falar sobre sistemas de mensagens em corretores comparando e contrastando duas tecnologias populares de corretores: Apache ActiveMQ e Apache Kafka. Aqui você encontrará exemplos de incentivos de uso e desenvolvimento que levaram seus desenvolvedores a usar abordagens completamente diferentes para na mesma área - envio de mensagens entre sistemas com um intermediário intermediário. Analisaremos essas tecnologias do zero e destacaremos a influência de várias opções de design ao longo do caminho. Você obterá um entendimento profundo dos dois produtos,</i>  <i>uma compreensão de como eles devem e não devem ser usados, e uma compreensão do que procurar ao considerar outras tecnologias de mensagens no futuro</i> ... " <br><br>  Peças traduzidas até a data: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Capítulo 1. Introdução</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Capítulo 2. ActiveMQ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Capítulo 3. Kafka</a> <br><br>  <b>Tradução concluída: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tele.gg/middle_java</a></b> <br><br>  Vou postar os capítulos completos à medida que forem traduzidos. <br><a name="habracut"></a><br><h2>  CAPÍTULO 1 </h2><br><h2>  1. Introdução </h2><br>  As mensagens entre sistemas são uma das áreas menos compreendidas da TI.  Como desenvolvedor ou arquiteto, você pode estar familiarizado com várias estruturas e bancos de dados.  No entanto, é provável que você tenha apenas um conhecimento passageiro de como as tecnologias de mensagens baseadas em broker funcionam.  Se você se sente assim, não se preocupe, está em boa companhia. <br><br>  As pessoas geralmente têm contato muito limitado com a infraestrutura de mensagens.  Muitas vezes, eles se conectam a um sistema criado há muito tempo ou fazem o download de um kit de distribuição da Internet, instalam-no no PROM e começam a escrever o código para ele.  Após o lançamento da infraestrutura no PROM, os resultados podem ser misturados: perda de mensagens durante falhas, o envio não funciona como o esperado ou os corretores "suspendem" seus produtores ou não enviam mensagens para seus consumidores. <br><br>  Parece familiar? <br><br>  Um cenário comum é quando seu código de mensagens funciona bem, por enquanto.  Até parar de funcionar.  Esse período acalma a vigilância e dá uma falsa sensação de segurança, o que leva a ainda mais código baseado em idéias falsas sobre o comportamento fundamental da tecnologia.  Quando algo começa a dar errado, você se depara com uma verdade desconfortável: que realmente não entendeu o comportamento básico do produto ou os compromissos escolhidos pelos autores, como desempenho versus confiabilidade ou transacionalidade versus escalabilidade horizontal. <br><br>  Sem uma compreensão profunda de como os corretores funcionam, as pessoas fazem declarações aparentemente razoáveis ​​sobre seus sistemas de mensagens, como: <br><br><ul><li>  O sistema nunca perderá mensagens </li><li>  As mensagens serão processadas sequencialmente </li><li>  A adição de consumidores tornará o sistema mais rápido </li><li>  As mensagens serão entregues apenas uma vez. </li></ul><br>  Infelizmente, algumas dessas declarações são baseadas em suposições que se aplicam apenas em determinadas circunstâncias, enquanto outras são simplesmente incorretas. <br><br>  Este livro ensinará como falar sobre sistemas de mensagens baseados em broker comparando e contrastando duas tecnologias populares de broker: Apache ActiveMQ e Apache Kafka.  Aqui, descreveremos exemplos de incentivos de uso e desenvolvimento que levaram seus desenvolvedores a usar abordagens completamente diferentes para o mesmo campo - mensagens entre sistemas com um intermediário intermediário.  Examinaremos essas tecnologias do zero e destacaremos o impacto de várias opções de design ao longo do caminho.  Você obterá um profundo entendimento de ambos os produtos, um entendimento de como eles devem e não devem ser usados ​​e um entendimento do que procurar ao considerar outras tecnologias de mensagens no futuro. <br><br>  Antes de começarmos, vamos ao básico. <br><br><h3>  O que é um sistema de mensagens e por que é necessário </h3><br>  Para que dois aplicativos se comuniquem, eles devem primeiro definir uma interface.  A definição dessa interface inclui a seleção de um transporte ou protocolo, como HTTP, MQTT ou SMTP, e a negociação dos formatos de mensagens que os sistemas trocarão.  Pode ser um processo rigoroso, como definir um esquema XML com os requisitos de carga útil de uma mensagem ou pode ser muito menos formal, por exemplo, um acordo entre dois desenvolvedores de que alguma parte da solicitação HTTP conterá um identificador de cliente . <br><br>  Enquanto o formato da mensagem e a ordem de envio entre os sistemas forem consistentes, eles poderão interagir entre si sem se preocupar com a implementação de outro sistema.  As partes internas desses sistemas, como uma linguagem de programação ou estrutura usada, podem mudar com o tempo.  Enquanto o contrato em si for suportado, a interação poderá continuar inalterada do outro lado.  Os dois sistemas são efetivamente desconectados (separados) por essa interface. <br><br>  Os sistemas de mensagens, como regra, prevêem a participação de um intermediário entre dois sistemas que interagem para liberar ainda mais (separar) o remetente do destinatário ou destinatários.  Ao mesmo tempo, o sistema de mensagens permite que o remetente envie uma mensagem sem saber onde está o destinatário, se ele está ativo ou quantos estão. <br><br>  Vejamos algumas analogias das variedades de problemas que um sistema de mensagens resolve e introduzimos alguns termos básicos. <br><br><h4>  Ponto a ponto </h4><br><blockquote>  Alexandra vai ao correio para enviar um pacote a Adam.  Ela caminha até a janela e entrega um pacote ao empregado.  O funcionário pega o pacote e entrega um recibo a Alexandra.  Adam não precisa estar em casa no momento do envio do pacote.  Alexandra está confiante de que o pacote será entregue a Adam em algum momento no futuro e poderá continuar fazendo suas próprias coisas.  Mais tarde, em algum momento, Adam recebe o pacote. </blockquote>  Este é um exemplo de um modelo de mensagens <i>ponto a ponto</i> .  Os correios aqui atuam como um mecanismo de distribuição de encomendas, garantindo que cada encomenda seja entregue uma vez.  O uso dos correios separa o ato de enviar o pacote da entrega do pacote. <br>  Nos sistemas de mensagens clássicos, o modelo ponto a ponto é implementado através de <i>filas</i> .  A fila atua como um buffer FIFO (primeiro a entrar, primeiro a sair) no qual um ou mais consumidores podem se inscrever.  Cada mensagem é entregue a apenas <i>um dos consumidores inscritos</i> .  As filas geralmente tentam distribuir mensagens de maneira justa entre os consumidores.  Apenas um consumidor receberá esta mensagem. <br><br>  O termo "durável" é aplicado às filas.  <i>A confiabilidade</i> é um recurso do serviço que garante que o sistema de mensagens salve as mensagens quando não houver assinantes ativos até que o consumidor assine a fila para entrega de mensagens. <br><br>  Confiabilidade é frequentemente confundida com <i>persistência</i> e, embora os dois termos sejam usados ​​de forma intercambiável, eles executam funções diferentes.  A persistência determina se a mensagem é trocada pelo sistema de mensagens em qualquer tipo de armazenamento entre o recebimento e o envio ao consumidor.  As mensagens enviadas para a fila podem ou não ser persistentes. <br>  As mensagens ponto a ponto são usadas quando um caso de uso requer uma ação única com uma mensagem.  Um exemplo é depositar fundos em uma conta ou concluir uma ordem de entrega.  Discutiremos mais tarde por que o próprio sistema de mensagens não é capaz de fornecer entrega única e por que as filas podem, na melhor das hipóteses, fornecer uma garantia de entrega <i>pelo menos uma vez</i> . <br><br><h4>  Assinante do editor </h4><br><blockquote>  Gabriella disca o número da conferência.  Enquanto está conectada à conferência, ela ouve tudo o que o orador diz, junto com os outros participantes da chamada.  Quando ela desliga, ela pula o que é dito.  Quando reconectada, ela continua a ouvir o que eles dizem. </blockquote>  Este é um exemplo de um modelo de mensagens de <i>publicação-assinatura</i> .  A conferência atua como um mecanismo de transmissão.  A pessoa que fala não se importa com quantas pessoas estão participando da chamada no momento - o sistema garante que qualquer pessoa conectada no momento ouça o que está sendo dito. <br>  Nos sistemas de mensagens clássicos, o modelo de mensagens de publicação-assinatura é implementado por meio de <i>tópicos</i> .  O tópico fornece o mesmo método de transmissão que o mecanismo de conferência.  Quando uma mensagem é enviada ao tópico, ela é distribuída <i>a todos os usuários inscritos</i> . <br><br>  Os tópicos geralmente <i>não</i> são <i>confiáveis ​​(não duráveis)</i> .  Como um ouvinte que não ouve o que é dito na chamada em conferência, quando o ouvinte é desconectado, os assinantes do tópico ignoram todas as mensagens enviadas quando estão offline.  Por esse motivo, pode-se dizer que os tópicos fornecem uma garantia de entrega <i>não mais que uma vez</i> para cada consumidor. <br><br>  O sistema de mensagens com assinatura de publicação geralmente é usado quando as mensagens são de natureza informativa e a perda de uma mensagem não é particularmente significativa.  Por exemplo, um tópico pode transmitir leituras de temperatura de um grupo de sensores uma vez por segundo.  Um sistema que esteja interessado na temperatura atual e que assine o tópico não se preocupará se perder uma mensagem - outro chegará no futuro próximo. <br><br><h4>  Modelos híbridos </h4><br><blockquote>  O site da loja coloca as mensagens do pedido na fila de mensagens.  O principal consumidor dessas mensagens é o sistema executivo.  Além disso, o sistema de auditoria deve ter cópias dessas mensagens de pedido para rastreamento subsequente.  Ambos os sistemas não podem ignorar mensagens, mesmo se os sistemas em si não estiverem disponíveis por algum tempo.  Um site não deve estar ciente de outros sistemas. </blockquote>  Os cenários de uso geralmente exigem a combinação de modelos de mensagens de publicação-assinatura e ponto a ponto, por exemplo, quando vários sistemas exigem uma cópia da mensagem e confiabilidade e persistência são necessárias para evitar a perda de mensagens. <br><br>  Nesses casos, é necessário um destino (um termo geral para filas e tópicos), que distribui as mensagens principalmente como tópico, para que cada mensagem seja enviada para um sistema separado que esteja interessado nessas mensagens, mas também no qual cada sistema possa definir vários consumidores que recebem mensagens recebidas, mais parecidas com uma fila.  O tipo de leitura neste caso é <i>uma vez para cada parte interessada</i> .  Esses destinatários híbridos geralmente exigem durabilidade; portanto, se o consumidor for desconectado, as mensagens enviadas nesse momento serão recebidas após a reconexão do consumidor. <br><br>  Os modelos híbridos não são novos e podem ser usados ​​na maioria dos sistemas de mensagens, incluindo o ActiveMQ (através de destinos virtuais ou compostos que combinam tópicos e filas) e o Kafka (implicitamente, como uma propriedade fundamental do design de seu destinatário). <br><br>  Agora que temos uma terminologia básica e um entendimento do que um sistema de mensagens pode ser útil, vamos aos detalhes. <br><br>  <b>Tradução concluída: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tele.gg/middle_java</a></b> <br><br>  Próxima parte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Capítulo 2. ActiveMQ</a> <br><br>  <i>Para continuar ...</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466385/">https://habr.com/ru/post/pt466385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466373/index.html">Desenvolvimento de bot Python TamTam</a></li>
<li><a href="../pt466375/index.html">Museum DataArt. KUVT2 - estudar e brincar</a></li>
<li><a href="../pt466379/index.html">Execute o software "desktop" no microcontrolador</a></li>
<li><a href="../pt466381/index.html">Como as lâmpadas LED da Era mudaram em 2019</a></li>
<li><a href="../pt466383/index.html">Oceano de criptomoedas: análise dos 50 principais projetos com o CoinMarketCap</a></li>
<li><a href="../pt466397/index.html">Nós reprogramamos o caixa e imprimimos nele Keanu Reeves. Parte 2. Software para PC</a></li>
<li><a href="../pt466401/index.html">Um pouco de matemática financeira: calculando inflação e juros</a></li>
<li><a href="../pt466403/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 35. Protocolo de entroncamento dinâmico de DTP</a></li>
<li><a href="../pt466405/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 36. Protocolo de Canal STP</a></li>
<li><a href="../pt466407/index.html">Cultura de recrutamento em grandes empresas de estatísticas Glassdoor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>