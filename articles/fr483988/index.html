<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê£ ü•ã üíÉüèΩ MicroSPA, ou comment inventer une roue carr√©e üôáüèΩ üíø üêé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous, je m'appelle Andrey Yakovenko et je suis d√©veloppeur web de Digital Design. 

 Notre entreprise a de nombreux projets mis en ≈ìuvre en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MicroSPA, ou comment inventer une roue carr√©e</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/483988/">  Bonjour √† tous, je m'appelle Andrey Yakovenko et je suis d√©veloppeur web de Digital Design. <br><br>  Notre entreprise a de nombreux projets mis en ≈ìuvre en utilisant le <a href="https://www.progress.com/sitefinity-cms">syst√®me de</a> gestion de contenu Web <a href="https://www.progress.com/sitefinity-cms">Sitefinity</a> , ou simplement CMS.  Les raisons pour lesquelles nous l'utilisons ont √©t√© d√©crites plus haut dans <a href="https://habr.com/ru/company/digdes/blog/466419/">cet</a> article.  Le CMS est g√©n√©ralement une application multi-pages, et aujourd'hui je parlerai des frameworks frontaux qui peuvent ajouter aux solutions sitefinity et comment le faire. <br><br><img src="https://habrastorage.org/webt/zn/pj/mm/znpjmmafdzi0jcb7qsjvb7rgzoo.png"><br><a name="habracut"></a><br><h2>  Digression lyrique </h2><br>  Bien que sitefinity ait Angular.js √† bord, la possibilit√© d'int√©grer d'autres frameworks est absente en raison du code source ferm√©.  Cependant, cela ne nous emp√™che pas d'utiliser les capacit√©s d'autres frameworks. <br><br>  Les exemples de cet article ne sont pas une panac√©e et sont principalement √† des fins d'information. <br><br><h2>  Rechercher un nouveau </h2><br>  Depuis Angular, bien que la premi√®re version, soit d√©j√† pr√©sente dans sitefinity, nous avons voulu faire nos amis CMS avec React ou Vue.js. <br><br>  Ces deux cadres sont bons √† leur mani√®re et ont leurs propres approches de d√©veloppement d'applications, mais nous ne ferons pas la comparaison suivante. <br><br>  Apr√®s un rapide coup d'≈ìil aux solutions possibles, un projet int√©ressant a √©t√© trouv√© qui compilait des pages √©crites dans React en html statique.  Cette solution ne nous convenait pas, car nous ne devons pas perdre tous les plaisirs du SSR (Server Side Render) ainsi que l'utilisation de code ex√©cutable c√¥t√© client. <br><br><h2>  Des paroles aux actes </h2><br>  Sitefinity, comme la plupart des CMS, vous permet de composer une page avec diff√©rents √©l√©ments pour afficher du contenu (widgets).  Par exemple, nous consid√©rerons les options pour int√©grer Vue.js dans des widgets pr√™ts √† l'emploi. <br><br><h3>  La premi√®re fa√ßon (simple) </h3><br>  Cette m√©thode consiste √† connecter Vue.js en tant que biblioth√®que au mod√®le de page principale. <br><br>  Apr√®s cela, nous pouvons initialiser notre application dans n'importe quel widget n'importe o√π. <br><br>  Un exemple d'un widget simple: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">'#widget-id'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">msg</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, }, })</code> </pre> <br>  Cependant, cela signifie que le bloc widget entier sera utilis√© comme mod√®le, et Vue.js essaiera de l'interpoler, et afin d'afficher le message au bon endroit, il sera n√©cessaire d'√©crire une construction sp√©ciale qui sera affich√©e si quelque chose provoque une pause du code js avant le rendu, ou si l'utilisateur a d√©sactiv√© JavaScript. <br><br>  La solution √† ce probl√®me consiste √† √©crire votre propre mod√®le, qui dupliquera le widget.  Nous √©largirons notre composante. <br><br>  Un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">'#widget-id'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">msg</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;div&gt;{{msg}}&lt;/div&gt;'</span></span>, })</code> </pre><br>  Maintenant, tout le code html de notre widget sera remplac√© par le mod√®le d√©crit dans le champ mod√®le, et afin de transf√©rer des donn√©es du mod√®le de widget vers Vue, convertissez simplement le mod√®le en JSON de n'importe quelle mani√®re et transf√©rez-le dans le champ de donn√©es. <br><br><h3>  La deuxi√®me voie (difficile) </h3><br>  Pour cette m√©thode, nous avons besoin d'un webpack, dont la configuration minimale sera vue-loader.  De plus, nous n'avons pas besoin d'utiliser le plugin html-extract-plug, car  nous pouvons stocker des mod√®les en code js. <br><br>  Nous pouvons maintenant utiliser les composants √† fichier unique de Vue. <br><br>  Un exemple de composant √† fichier unique ( <b>Sample.vue</b> ): <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>{{msg}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Sample'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">data</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">msg</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Hello world'</span></span></span><span class="javascript">, } }, } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Les composants √† fichier unique ont plus d'options de style que les composants conventionnels et r√©duisent √©galement le nombre de fichiers dans le r√©pertoire du projet. <br><br>  Apr√®s avoir √©crit le composant widget, nous devons l'initialiser. <br><br>  Exemple d'initialisation de widget: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sample <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../Sample.vue'</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(Sample) } }).$mount(<span class="hljs-string"><span class="hljs-string">'#widget-id'</span></span>)</code> </pre><br>  Mais dans ce cas, le code sera ex√©cut√© par lui-m√™me, s'il est n√©cessaire de contr√¥ler l'initialisation de l'application, par exemple, pour sp√©cifier le s√©lecteur, une solution rationnelle consiste √† encapsuler l'application dans une m√©thode qui peut √™tre appel√©e √† tout moment sur la page. <br><br>  D√©veloppons notre exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sample <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../Sample.vue'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initWidget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ Vue({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(Sample) } }).$mount(selector) } initWidget(<span class="hljs-string"><span class="hljs-string">'#widget-id'</span></span>)</code> </pre><br>  Il reste √† transf√©rer les donn√©es du mod√®le de widget vers le composant Vue.js.  Ceci est facile √† faire en les √©crivant en JSON avant de les passer √† l'objet de donn√©es de l'instance Vue, apr√®s quoi ils peuvent √™tre pass√©s au composant comme accessoires. <br><br>  Un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sample <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../Sample.vue'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initWidget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ Vue({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">some</span></span>: <span class="hljs-string"><span class="hljs-string">'some value'</span></span>, } }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(Sample, { <span class="hljs-attr"><span class="hljs-attr">props</span></span>: data }) } }).$mount(selector) } initWidget(<span class="hljs-string"><span class="hljs-string">'#widget-id'</span></span>)</code> </pre><br><h3>  Petit avis </h3><br>  En conclusion, je tiens √† dire que chacune des m√©thodes propos√©es poss√®de son propre environnement d'application.  Ainsi, la premi√®re m√©thode convient √† l'int√©gration rapide d'une seule section d'une application, par exemple, un bouton ou un formulaire, et la seconde, √† son tour, est plus avanc√©e et dispose d'un plus grand ensemble de capacit√©s pour √©crire √† la fois des parties individuelles de l'application et des pages autonomes. <br><br>  Cependant, les deux m√©thodes ont un gros inconv√©nient - avec cette utilisation des frameworks, il devient n√©cessaire de faire deux fois le m√™me travail pour les sections des pages dont d√©pend le r√©f√©rencement. <br><br>  D'autre part, si vous le souhaitez, en utilisant cette approche, vous pouvez connecter n'importe quel framework, biblioth√®que ou √©crire votre propre gestionnaire DOM en vanilla JavaScript ou jQuery. <br><br>  C‚Äôest tout.  Merci de votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483988/">https://habr.com/ru/post/fr483988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483974/index.html">Ceph via iSCSI - ou skier debout dans un hamac</a></li>
<li><a href="../fr483976/index.html">Cybers√©curit√© et menaces 2020: ce qui nous attend apr√®s les vacances</a></li>
<li><a href="../fr483978/index.html">Comprendre le concept de d√©veloppement d'applications Web modernes en 2020</a></li>
<li><a href="../fr483980/index.html">Cr√©ation d'une infrastructure informatique tol√©rante aux pannes. Partie 1 - Pr√©paration du d√©ploiement du cluster oVirt 4.3</a></li>
<li><a href="../fr483986/index.html">Contr√¥le des pens√©es des robots avec Emotiv Insight</a></li>
<li><a href="../fr483992/index.html">Pourquoi certaines plan√®tes mangent leur ciel</a></li>
<li><a href="../fr483994/index.html">D√©m√©nagement informatique sur un yacht. De la Su√®de √† l'Espagne</a></li>
<li><a href="../fr484004/index.html">@Pythonetc d√©cembre 2019</a></li>
<li><a href="../fr484006/index.html">Trucs et astuces de ma cha√Æne Telegram @pythonetc, d√©cembre 2019</a></li>
<li><a href="../fr484008/index.html">Qu'est-ce qu'un chef d'√©quipe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>