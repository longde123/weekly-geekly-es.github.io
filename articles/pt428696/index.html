<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèº üå≤ üëÑ Coment√°rios do canal Telegram üëÉüèø üë∞ üéë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O conhecimento dos bots de telegrama acabou sendo confuso - no trabalho era necess√°rio ficar √† frente de uma equipe de colegas e, conhecendo bem a API...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coment√°rios do canal Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428696/">  O conhecimento dos bots de telegrama acabou sendo confuso - no trabalho era necess√°rio ficar √† frente de uma equipe de colegas e, conhecendo bem a API interna, o bot foi gravado em poucos dias (posteriormente revisado e recebido pelo <i>emblema de verifica√ß√£o de telegrama</i> ) <br><br>  Como resultado, dois bots foram escritos (o principal e o de distribui√ß√£o), nos quais a ger√™ncia se acalmou, e eu comecei o samizdat. <br><br>  Mais uma vez brincando com o prot√≥tipo, eu queria criar o que mais interessante pode ser escrito rapidamente na pilha de telegramas.  A escolha recaiu sobre os coment√°rios. <br><a name="habracut"></a><br><blockquote>  <i>Bot @CommentsUserBot para coment√°rios no canal de telegrama</i> </blockquote><br>  Existem canais no telegrama, mas eles n√£o podem ser comentados e h√° chats nos quais voc√™ n√£o pode escrever not√≠cias - voc√™ receber√° todas as mensagens de spam ou nada se for <i>silenciar</i> . <br><blockquote>  <i>No entanto, se voc√™ fizer um alfinete com uma notifica√ß√£o no bate-papo, poder√° imitar a publica√ß√£o de aka em #channel.</i> </blockquote><img src="https://habrastorage.org/getpro/habr/post_images/9bb/465/515/9bb4655152f573aa3c1b5020d6f7fb8b.jpg" alt="imagem"><br><br>  Ap√≥s refletir, fui ler a documenta√ß√£o do <i>telegra.ph</i> .  Eu j√° tinha que escrever um analisador de not√≠cias para o site corporativo do IV e tinha uma id√©ia de quais widgets existem na plataforma ( <i>no entanto, alguns n√£o foram iniciados</i> ).  Al√©m disso, na comunidade de desenvolvedores de bot, recebi algumas APIs n√£o p√∫blicas que foram √∫teis mais tarde. <br><br>  Tudo parecia claro, e no fim de semana desenhei um prot√≥tipo do bot de coment√°rios para o canal de telegrama - um bot√£o preso ao post, com uma transi√ß√£o para o bot para escrever texto e, em seguida, a gera√ß√£o da p√°gina de coment√°rios no tel√©grafo.  No pr√≥prio canal, o bot√£o deve mostrar o n√∫mero de coment√°rios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb3/3b7/fc4/eb33b7fc45c35ba6dae070eaec1815bf.jpg" alt="imagem"><br><blockquote>  <i>Tecnicamente, o servidor s√≥ funciona quando um coment√°rio √© postado.</i>  <i>Todo o resto - texto e gr√°ficos - √© armazenado e armazenado em cache pelo pr√≥prio tel√©grafo.</i> </blockquote><br>  Depois de colocar os desenvolvedores para teste, coletei um feedback, desenhei um plano e comecei a arquivar as altera√ß√µes silenciosamente.  Portanto, inicialmente o modo de atualiza√ß√£o autom√°tica do canal foi substitu√≠do pelas configura√ß√µes (manual ou autom√°tica, substituindo a postagem original ou postando uma postagem de coment√°rio).  Os coment√°rios em si foram reabastecidos com widgets, gr√°ficos e v√≠deo ( <i>gra√ßas a Oleg O. por testar vulnerabilidades. A prop√≥sito, ele tamb√©m tem um bom coment√°rio bot @CommentsBot</i> ). <br><blockquote>  <i>Naquele momento, instalei o telegrama-x, e uma das atualiza√ß√µes importantes era que, uma vez registrado no bot, voc√™ n√£o precisa pressionar start cada vez que entra no link direto.</i> </blockquote>  Coment√°rios, como j√° existe um bate-papo simples, foi decidido criar uma √°rvore.  Eu n√£o escrevi esse armazenamento antes, mas depois de alguns artigos pesquisados ‚Äã‚Äãno Google, o banco de dados foi capaz de digeri-los.  A limita√ß√£o atual da profundidade do ramo √© 10 n√≠veis.  O n√∫mero de coment√°rios na p√°gina 20, com a pr√©-exibi√ß√£o de respostas nos ramos, o n√∫mero de coment√°rios e a pagina√ß√£o. <br><br>  Sim, o tel√©grafo n√£o permite reverter o design da p√°gina, mas era exatamente isso que era necess√°rio - um bot no <i>ecossistema do telegrama</i> - n√£o h√° autoriza√ß√µes adicionais e acesso aos sites.  As fontes n√£o voam e as pr√≥prias p√°ginas de coment√°rios funcionam na <i>Visualiza√ß√£o instant√¢nea</i> .  O pr√≥prio usu√°rio ent√£o coloca um coment√°rio no formato usual, em um telegrama - com emoticons, adesivos, links e muito mais. <br><br>  A edi√ß√£o √© substitu√≠da pela adi√ß√£o do coment√°rio atual.  Em geral, isso ainda √© suficiente, porque voc√™ pode excluir seus pr√≥prios coment√°rios ( <i>diretamente da p√°gina de</i> coment√°rios). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a6/0d4/b98/5a60d4b98a9c85e6bd09199d68c45cbe.jpg" alt="imagem"><br><br>  Ent√£o, quando o bot quis usar canais grandes ( <i>&gt; 100 mil assinantes</i> ), surgiu a quest√£o da administra√ß√£o.  A remo√ß√£o de coment√°rios censur√°veis ‚Äã‚Äãe proibi√ß√µes de usu√°rios foi adicionada.  Al√©m disso, devido √† hostilidade pessoal ao spam, a notifica√ß√£o de respostas √© desativada por padr√£o para o usu√°rio, mas as configura√ß√µes permitem que voc√™ assine todos os coment√°rios, bem como canalize / publique coment√°rios, al√©m da op√ß√£o de n√≠vel de coment√°rio.  Tudo isso vem de um spammer bot separado; portanto, depois de bloqueado por um dunno da interface do telegrama, voc√™ ainda pode escrever coment√°rios em outros canais. <br><br>  O √≠cone desenhado no gimp √© pintado para todas as entidades do projeto - bot, bot de notifica√ß√£o, not√≠cias do projeto e bate-papo de suporte. <br><br>  Sobre interfaces de idioma: p√°ginas de tel√©grafo em <i>en</i> e bots em <i>en / ru</i> (obras de detec√ß√£o autom√°tica). <br><blockquote>  <i>Os coment√°rios foram muito longe na Am√©rica do Sul.</i>  <i>Agora, os bons samaritanos est√£o traduzindo arquivos no github para mais localiza√ß√£o.</i> </blockquote>  Na primavera (no ver√£o?), Quando o ILV come√ßou a bloquear os acessos, tornou-se um pouco inconveniente para mim desenvolver (no trem, no caminho para o trabalho / c - o ssh duplo para o servidor cai periodicamente), ent√£o o ritmo de desenvolvimento (j√° baixo) era reduzido.  Agora coleciono feedback, elaboro um plano de melhoria e escrevo de vez em quando outro bot, cujos desenvolvimentos precisarei no projeto atual. <br><br>  O bot @CommentsUserBot para coment√°rios no canal de telegrama. <br><br>  Conectar, escrever, discutir) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt428696/">https://habr.com/ru/post/pt428696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt428680/index.html">Criando e integrando o VK bot em um grupo por meio do VkBotLongPoll [Python]</a></li>
<li><a href="../pt428682/index.html">Precipita√ß√£o auto-destrutiva de beta 76</a></li>
<li><a href="../pt428688/index.html">Configurando o ambiente de trabalho no Docker para o aplicativo yii-framework</a></li>
<li><a href="../pt428690/index.html">Como ensinar sua namorada a programar se voc√™ n√£o √© professora, mas ela acredita em voc√™</a></li>
<li><a href="../pt428694/index.html">A hist√≥ria de um √∫nico jogo ou estrat√©gia 4x que come√ßou h√° 20 anos e ainda est√° vivo</a></li>
<li><a href="../pt428698/index.html">The Elusive Space Pirate: esconda-se na geladeira dos policiais, derrote a guerra dos dr√≥ides e cuspa nos olhos de Sauron</a></li>
<li><a href="../pt428700/index.html">Como o aprendizado de m√°quina na YouDo entra em produ√ß√£o. Palestra em Yandex</a></li>
<li><a href="../pt428702/index.html">Ecos de magia em guarda das ci√™ncias exatas</a></li>
<li><a href="../pt428704/index.html">Prologue Workouts</a></li>
<li><a href="../pt428706/index.html">Crypt Bugs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>