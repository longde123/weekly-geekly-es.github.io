<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏻 👮 ⭐️ 在线服务“通过视频对事故进行速度分析” 🅾️ 🔆 🤾🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在测试版本中，已经启动了一项在线服务，该服务使用交叉路口摄像机的记录来显示我们感兴趣的物体（汽车和其他车辆）的当前速度。 

 驾驶学校的学生和经验丰富的驾驶员都面临着可视化驾驶汽车时的距离及其当前速度的问题。 

 但是，有一个解决方案-分析以前记录的视频帧上的数据，并在各种收费和免费，可访问和封...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>在线服务“通过视频对事故进行速度分析”</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460185/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cd/y3/ep/cdy3epcwmj1kjozbojililkdon0.jpeg"></div><br> 在测试版本中，已经启动了一项在线服务，该服务使用交叉路口摄像机的记录来显示我们感兴趣的物体（汽车和其他车辆）的当前速度。 <br><a name="habracut"></a><br> 驾驶学校的学生和经验丰富的驾驶员都面临着可视化驾驶汽车时的距离及其当前速度的问题。 <br><br> 但是，有一个解决方案-分析以前记录的视频帧上的数据，并在各种收费和免费，可访问和封闭式服务中对其进行处理。 <br><br><img src="https://habrastorage.org/webt/b3/z2/0w/b3z20wxe8mcembonf9sw2px9xem.png"><br><br> 一种这样的最近出现的服务将被进一步讨论。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>链接到在线服务“视频事故中的速度分析”。</b></a> <br><br> 服务的主页（到目前为止非常简单）： <br><br><img src="https://habrastorage.org/webt/tw/qq/0b/twqq0bdt0xrihcn6ktmpdt7nys0.png"><br><br>  <b>这个想法和实现的作者是俄罗斯程序员和<u>Khabrovchanin</u> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Ilya Alexandrovich Volkov</a> 。</b> <br><br>  <b>在他的允许下，该出版物是用哈布雷撰写的。</b> <br><br> 目前，该服务无法自动运行，必须首先准备每个视频，以便由服务运营商进行手动处理（现在，是一个人还是一个新用户的作者，在发布结束时说明如何使用该服务）。 <br><br><img src="https://habrastorage.org/webt/rs/ak/pb/rsakpbaljurajefuvisofzuyk8i.png"><br><br><img src="https://habrastorage.org/webt/to/bj/wc/tobjwcfgqttpubwibnrjcftacec.png"><br><br>  <u>处理视频帧的阶段：</u> <br><br>  -在第一阶段，将补偿摄像机的光学畸变，即，现实世界中的所有直线均应是直线，并且应在服务处理的视频上（来自摄像机的畸变校正已在服务中自动运行）； <br><br>  -在第二阶段，参考道路平面，为此，操作员需要像现实世界中那样在框架上标记矩形，并输入两个（或更多个）具有先前测量长度的段（通常是：道路的宽度，标记线之间的单独条带的宽度，距离在行车道或标志之间，汽车的轴距之间）； <br><br><img src="https://habrastorage.org/webt/df/bk/6d/dfbk6d_d0kny9bcrrteizlb6zjy.png"><br><br><img src="https://habrastorage.org/webt/nb/x4/ov/nbx4ov9cbsabg8gme2yxrepo8_i.png"><br><br><img src="https://habrastorage.org/webt/xs/rt/up/xsrtupaoqnlm8dcwpl0ymbi2nkg.png"><br><br><img src="https://habrastorage.org/webt/uy/de/7n/uyde7npko3rmxzggip5yg7dzglk.png"><br><br>  -在第三阶段，每个帧上的服务运营商需要设置关注对象的位置（标记其路径），结果，服务将向我们显示对象的当前速度及其在移动过程中的变化。 <br><br><img src="https://habrastorage.org/webt/ut/kp/wh/utkpwhc4ssd9i9k520ktzwvv_8e.png"><br><br><img src="https://habrastorage.org/webt/jy/oc/bv/jyocbvnl3p5hvv5r6zob3zuiaco.png"><br><br><img src="https://habrastorage.org/webt/4u/at/gu/4uatgutthy3k02humdk7xkrccik.png"><br><br><img src="https://habrastorage.org/webt/za/rh/jk/zarhjkpwodswoxtim4nnrc74tpq.png"><br><br> 服务播放器具有标尺工具，您可以使用该工具测量视频上的距离： <br><br><img src="https://habrastorage.org/webt/2q/rb/ie/2qrbiet7eqx1irqzzbdj286a-bi.png"><br><br> 服务的准确性在很大程度上取决于视频的质量和参数。 <br><br><img src="https://habrastorage.org/webt/l6/_d/rm/l6_drmwsc4kwedrhzzdj5-cpdza.png"><br><br> 现在，该服务仅适用于使用固定（静态）摄像机获得的视频帧，这些记录的数据库得到了补充和开发。 <br><br> 在最终确定服务功能的过程中，作者计划对在行进和停驶汽车中使用录像机获得的记录进行分析。 <br><br> 该服务的作者计划分析大量涉及行人的事故视频，并分析碰撞时车速数据的统计数据。 <br><br><img src="https://habrastorage.org/webt/7r/jj/4y/7rjj4ygwewm84l9xpqy3n_zbjza.png"><br><br><img src="https://habrastorage.org/webt/uf/rv/ze/ufrvzezefnk4nc4cdwcorayd9ju.png"><br><br>  <b>这是作者打算开发此服务的其他方法：</b> <br><br><ul><li> 添加自动点跟踪； </li><li> 添加地理标签； </li><li> 引入<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">卡尔曼滤波器</a>以消除观测误差； </li><li> 使用计算机视觉； </li><li> 添加用于计算多个对象速度的功能； </li><li> 计划将机器学习引入服务中，以最大程度地减少操作员在准备视频记录方面的工作。 </li></ul><br><img src="https://habrastorage.org/webt/qi/kh/mu/qikhmup6wwntngxudette8rkziq.png"><br><br> 我真的希望该出版物会使Khabrovites感兴趣，并在该服务的开发和当前工作中为该服务的作者提供帮助。 <br><br> 我设法联系了该服务的作者<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Ilya Volkov</a> ，与他讨论了该服务的功能，并获得了针对该项目的专门针对Habr的几个问题的答案。 <br><br>  <b>采访“视频记录中事故的速度分析”服务作者：</b> <br><br>  <i><b>问：</b>实现这种服务的想法早就出现了吗？</i> <br><blockquote>  <b>Ilya的回答：</b>大约四个月前，我看到了一次事故的视频，并且有趣的是其中一位参与者的移动速度（至少接近）。 不仅对我来说变得很有趣-在视频评论中，引起了很多争议，并提出了各种各样的评级。 那时我以为这样的工具会有用。 </blockquote><br>  <i><b>问题：</b>从“您可以做到这一点”的想法到首次启动该服务已经花费了多少时间？</i> <br><blockquote>  <b>伊利亚的回答：</b>好了，四个月了。 但是我不急于调用当前版本的工作版本-它仍然很潮湿:) </blockquote><br>  <i><b>问题：</b>您在服务中使用哪些语言和平台，并且打算进一步使用哪些语言和平台？</i> <br><blockquote>  <b>Ilya的答案：</b>该项目托管在Firebase上，这对于快速启动几乎所有项目都是一件好事。 授权，托管，数据库，文件存储-一切开箱即用。 便捷的API，一开始完全免费。 <br><br> 前端-Vue.js，也是从头开始学习的简单工具。 使用Konva.js在画布上绘图时，着色器负责光学的变形。 <br><br> 几乎所有代码（着色器除外）都是用JavaScript编写的。 堆栈没有特殊要求，我将继续使用它。 </blockquote><br>  <i><b>问题：</b>普通用户何时可以上传视频并使用该服务？</i> <br><blockquote>  <b>Ilya的回答：</b>原则上，这可以立即完成，我写了有关如何执行此操作的说明。 </blockquote><br>  <i><b>问题：</b>您是该项目中唯一的参与者，还是有一个程序员团队？</i> <br><blockquote>  <b>Ilya的答案：</b>团队还很小-我是我的朋友，他在前端开发方面很有能力。 </blockquote><br>  <i><b>问题：</b>您打算继续开发该服务吗？您希望该论坛的同事/论坛成员提供帮助吗？</i> <br><blockquote>  <b>Ilya的回答：</b>该服务的开发肯定是有计划的，因为该原型看起来非常有趣。 发展思想充实，愿望也存在。 <br> 总是欢迎帮助-特别是建议。 </blockquote><br>  <i><b>问题：</b>这将是一项免费服务还是有任何货币化计划？</i> <br><blockquote>  <b>伊利亚的答案：</b>货币化<b>的</b>前景仍然相当模糊。 也许将来它们会变得清晰起来。 </blockquote><br>  <i><b>问题：</b>是否出现了对该服务感兴趣的组织或社区？</i>  <i>例如，摩托车俱乐部或驾驶学校？</i> <br><blockquote>  <b>Ilya的回答：</b>社区没有给我写信，但是一些汽车专家对该项目感兴趣。 </blockquote><br>  <i><b>问题：</b>现在使用该服务确定速度的准确度是多少？</i>  <i>如果输入必要的参数以测量真实道路的轮盘赌或使用内置标尺测量车道宽度的地理服务，这些数据会有多少不同？</i> <br><blockquote>  <b>Ilya的回答：</b>在质量非常好且没有光学失真的视频中，准确性还不错，在开放数据集上进行的测试显示误差高达3％。 随着视频质量的下降和不稳定的帧速率，精度会降低。 <br><br> 至于使用轮盘赌和借助Geoservices进行测量，轮盘赌当然更为可靠。 不能盲目信任来自Geoservice的数据，但可以并且应该对其进行双重检查。 <br><br> 总的来说，我非常希望拒绝将地形捕捉到地标上，并拒绝基于汽车的轴距和其他精确已知的距离而附着。 </blockquote><br>  <i><b>问题：</b>是否可以选择度量单位（km \ h，m \ s，英里\小时）并将高速遥测数据保存到单独的日志文件中？</i> <br><blockquote>  <b>Ilya的回答：</b>是的，因为这样做并不困难。 但是何时会实现-我不能说。 </blockquote><br>  <i><b>问题：</b>由于道路上积雪，冬季的视频在您的服务中将更加难以处理？</i> <br><blockquote>  <b>伊利亚（Ilya）的回答：</b>是的，雪增加了困难-一些地标不可见，有时甚至道路的几何形状也发生了变化。 但原则上，速度也是根据下雪的视频计算得出。 </blockquote><br>  <i><b>问题：</b>是否计划在服务中使用神经网络？</i> <br><blockquote>  <b>Ilya的回答：</b>这绝对不是近期的前景，但是这个话题绝对非常有趣。 训练神经网络以选择相机失真因子会很酷。 使用现成的神经网络的许多想法。 但是目前，没有它们还有很多事情要做：） </blockquote><br>  <i><b>问题：</b>现在该服务托管在Firebase上，您是否正在寻找替代方案？</i> <br><blockquote>  <b>Ilya的回答：</b>关于Firebase唯一不喜欢的是价格。 例如，来自文件存储的1 GB流量的价格约为7卢布，而Yandex.Cloud只有1卢布。 虽然这不是一个很大的问题，但是将来我会寻找优化的方法。 现在，我在设计架构时应避免与服务提供者建立紧密的联系。 </blockquote><br><br>  <u>非常感谢Ilya提供有趣且详细的答案！</u> <br><br> 如果可能，作者将新视频添加到服务中： <br><br><img src="https://habrastorage.org/webt/oe/w4/lv/oew4lvxzzdc7gsdfhqxq9hfawbu.png"><br><br><img src="https://habrastorage.org/webt/_k/ej/ea/_kejeaixqmznjnok48na-a42y_u.png"><br><br><img src="https://habrastorage.org/webt/q0/5u/rl/q05urldstpbfdrdgabqylet5axk.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关使用该服务的说明，请参见此处</a> 。 <br><br>  1.要创建您的项目，您需要登录。 虽然可以通过Google和Facebook帐户获得授权。 授权后，“创建项目”按钮将对您可用。 <br><br><img src="https://habrastorage.org/webt/ee/fo/hb/eefohborji2katvo1yr3ebz9ajk.jpeg"><br><br>  2.单击“创建项目”按钮，出现用于创建新项目的页面，建议在该页面上下载视频文件。 视频文件的最大大小为3 MB。 您可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此视频服务</a>修剪<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频</a> 。 <br><br><img src="https://habrastorage.org/webt/e6/bo/zu/e6bozuunrocmj0ei5vrqomcgnni.jpeg"><br><br>  3.下载文件，成功下载后，项目页面将自动打开。 <br><br><img src="https://habrastorage.org/webt/en/ts/q1/entsq1mygqxlfw0wajward-tjss.jpeg"><br><br>  4.首先，我们消除摄像机光学元件的畸变：使用滑块k3，k4，Scale调整畸变，以使现实世界中的所有直线均在图中并成直线。 <br><br><img src="https://habrastorage.org/webt/ff/fz/7e/fffz7etxpszvok9ffzn74yuhi_g.jpeg"><br><br>  5.移动四边形，使其与现实世界的矩形匹配，并指示2个距离（线段不应平行）。 <br><br><img src="https://habrastorage.org/webt/iy/uy/km/iyuykmbg_hekpav5_767i0omjbs.jpeg"><br><br>  6.您可以使用Yandex.Maps搜索距离。 <br><br><img src="https://habrastorage.org/webt/n9/au/rr/n9aurr2jqr1qq61r1yrvjlfhykc.jpeg"><br><br>  7.由于Yandex.Maps上的距离可能并不完全准确，因此我们需要确保使用标尺获得的绑定足够。 通常我们知道汽车的轴距。 例如，VAZ-2114的底部是2.46米，我们得到2.45。 <br><br><img src="https://habrastorage.org/webt/1o/ee/ar/1oeearwoyktukryafhu14cj5nhe.jpeg"><br><br>  8.电车的长度约为16米，也接近真实长度。 <br><br><img src="https://habrastorage.org/webt/oq/qx/hr/oqqxhr9wpxej0xotr90ijpz1zyk.jpeg"><br><br>  9.现在我们准备直接进行汽车速度的计算。 我们进入对象点的编辑模式，并在每一帧上标记对象的点。 手动标记每个帧上的点可能很累，因此有一个插值工具：在一个帧上标记一个点，然后在5-15帧之后标记一个点，在时间轴上选择帧之间的间隔，然后按I按钮：现在，帧之间的点均匀地直线移动。 <br><br><img src="https://habrastorage.org/webt/pg/pf/kr/pgpfkri7rcpcox6gifap8kuzi8q.jpeg"><br><br>  10.因此，我们计算了物体的速度。 <br><br><img src="https://habrastorage.org/webt/vn/jc/cw/vnjccwwmbc0uuankjpuqj4amhty.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN460185/">https://habr.com/ru/post/zh-CN460185/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN460173/index.html">Docker开发。 当地环境。 第2部分-Nginx + PHP + MySql + phpMyAdmin</a></li>
<li><a href="../zh-CN460175/index.html">市场营销中的符号学：这对您的品牌意味着什么</a></li>
<li><a href="../zh-CN460177/index.html">nRF52832上的无线漏水传感器，DIY项目</a></li>
<li><a href="../zh-CN460179/index.html">LEAN + AGILE = AGILEAN或我们将整个零件收集起来</a></li>
<li><a href="../zh-CN460181/index.html">通过解析源代码来提高您的JavaScript知识</a></li>
<li><a href="../zh-CN460187/index.html">收集数据之前，请想象一下您的数据。</a></li>
<li><a href="../zh-CN460189/index.html">2019年14种最佳看板工具</a></li>
<li><a href="../zh-CN460191/index.html">停止生产线或泵送管道，哟</a></li>
<li><a href="../zh-CN460193/index.html">在Windows上的NetXMS上监视证书到期</a></li>
<li><a href="../zh-CN460195/index.html">小，是的，已删除：微型线性粒子加速器，刷新了新记录</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>