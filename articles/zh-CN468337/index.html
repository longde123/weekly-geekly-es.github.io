<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’‚ğŸ¼ ğŸŠ ğŸ”¦ ä½¿ç”¨Androidç‰ˆcronå¹¶æ·»åŠ Shellè„šæœ¬ä»¥åœ¨è®¾å¤‡å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ ğŸ“ƒ ğŸ›³ï¸ ğŸ‘ŠğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç”±äºç§»åŠ¨è®¾å¤‡é•¿æœŸä»¥æ¥å…·æœ‰å¹¿æ³›çš„åŠŸèƒ½ï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°å°†è‡ªåŠ¨åŒ–ä»»åŠ¡è½¬ç§»ç»™å®ƒä»¬ã€‚ è€Œä¸”ï¼Œcronå°½å¯èƒ½åœ°é€‚åˆæ‰§è¡Œå®ƒä»¬ã€‚ ä½†æ˜¯ï¼Œå¦‚æœcronåœ¨â€œæ™®é€šâ€ Linuxç³»ç»Ÿä¸ŠèŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œåˆ™Androidè®¾å¤‡éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„é…ç½®å·¥ä½œã€‚ 

 å¦‚æœæ‚¨å¯¹è‡ªåŠ¨åŒ–ä¸»é¢˜æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨è®¾å¤‡å¯åŠ¨åç«‹å³å¯åŠ¨Shellè„šæœ¬ï¼Œç”š...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨Androidç‰ˆcronå¹¶æ·»åŠ Shellè„šæœ¬ä»¥åœ¨è®¾å¤‡å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468337/"><img src="https://habrastorage.org/webt/t2/ia/uo/t2iauogb45suwvzulewv9wbktr8.jpeg"><br><br> ç”±äºç§»åŠ¨è®¾å¤‡é•¿æœŸä»¥æ¥å…·æœ‰å¹¿æ³›çš„åŠŸèƒ½ï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°å°†è‡ªåŠ¨åŒ–ä»»åŠ¡è½¬ç§»ç»™å®ƒä»¬ã€‚ è€Œä¸”ï¼Œcronå°½å¯èƒ½åœ°é€‚åˆæ‰§è¡Œå®ƒä»¬ã€‚ ä½†æ˜¯ï¼Œå¦‚æœcronåœ¨â€œæ™®é€šâ€ Linuxç³»ç»Ÿä¸ŠèŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œåˆ™Androidè®¾å¤‡éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„é…ç½®å·¥ä½œã€‚ <br><br> å¦‚æœæ‚¨å¯¹è‡ªåŠ¨åŒ–ä¸»é¢˜æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨è®¾å¤‡å¯åŠ¨åç«‹å³å¯åŠ¨Shellè„šæœ¬ï¼Œç”šè‡³å¯ä»¥é€šè¿‡è®¡æ—¶å™¨å¯åŠ¨ï¼Œé‚£ä¹ˆæ¬¢è¿æ‚¨ï¼ <br><a name="habracut"></a><br><h2> å‰è¨€ </h2><br> æˆ‘ä»äº‹Androidç§»åŠ¨è®¾å¤‡çš„è‡ªåŠ¨åŒ–ã€‚ åœ¨æ‰§è¡Œè‡ªåŠ¨è„šæœ¬çš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿ä½¿ç”¨ç›¸åŒçš„è®¾å¤‡è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿä¼šå‘ç”Ÿè®¸å¤šæ— æ³•é¢„æ–™çš„æƒ…å†µã€‚ <br><br> æœ€å—æ¬¢è¿çš„é—®é¢˜ï¼š <br><br>  0.è‡ªåŠ¨åŒ–è„šæœ¬æ— æ³•æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚ <br>  1.ç§»åŠ¨åº”ç”¨ç¨‹åºè‡ªåŠ¨ä¸‹è½½ <br>  2.æ‰‹æœºè‡ªåŠ¨é‡å¯ <br>  3.é‡æ–°å¯åŠ¨åï¼Œç§»åŠ¨åº”ç”¨ç¨‹åºä¸ä¼šè‡ªåŠ¨å¯åŠ¨ <br>  4. Wi-Fiæ¨¡å—éšæœºå…³é—­ï¼Œæ‰¾ä¸åˆ°ç½‘ç»œï¼Œæœªè¿æ¥åˆ°ç½‘ç»œ <br>  5.ç§»åŠ¨ç½‘ç»œçªç„¶æ¶ˆå¤± <br>  6.æ‰‹æœºè¿›å…¥ç¡çœ æ¨¡å¼ <br>  7.ä»£ç†æ‰çº¿æˆ–æœåŠ¡å™¨æœ¬èº«æˆ–æœåŠ¡å™¨è¿”å›å¥‡æ€ªçš„å“åº” <br><br> å› æ­¤ï¼Œæ‚¨å¿…é¡»ä¸æ–­ç›‘è§†è®¾å¤‡å¹¶æ•è·è¿™äº›ä¸å¯é¢„è§çš„æƒ…å†µã€‚ <br><br><img src="https://habrastorage.org/webt/93/fb/-1/93fb-1wjpwjs3tcpvv4jzg9b2zw.png"><br><br> å› æ­¤ï¼Œæˆ‘å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œå¸¦æœ‰â€œæ­£ç¡®â€è„šæœ¬çš„cronå°†ä½¿æ‚¨èƒ½å¤Ÿè·Ÿè¸ªè½¯ä»¶æ•…éšœå¹¶è¿˜åŸè‡ªåŠ¨åŒ–è„šæœ¬æˆ–å†æ¬¡è¿è¡Œå®ƒã€‚ ä½†äº‹å®è¯æ˜ï¼Œå°½ç®¡AndroidåŒ…å«Linuxå†…æ ¸ï¼Œä½†æˆ‘å¿…é¡»å¤„ç†ä¸€äº›ç‰¹æ®Šçš„ç»†å¾®å·®åˆ«ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿›è¡Œè®¾ç½®ï¼ <br><br><h2>  Cronè®¾ç½® </h2><br><h3> å®šåˆ¶ç¯å¢ƒ </h3><br><ol><li> å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">adb</a>ä»¥ä½¿ç”¨USBçº¿é€šè¿‡å¤–å£³è®¿é—®è®¾å¤‡ã€‚ </li><li> æˆ‘ä»¬æ‰“å¼€â€œé¢å‘<b>å¼€å‘äººå‘˜</b> â€éƒ¨åˆ†ã€‚ ä¸ºæ­¤ï¼Œè¯·è½¬åˆ°â€œ <b>å…³äºç”µè¯â€</b>éƒ¨åˆ†ï¼Œç„¶åå•å‡»â€œ <b>å†…éƒ¨ç‰ˆæœ¬å·â€</b>æˆ–ç±»ä¼¼åç§°ã€‚ </li><li> æˆ‘ä»¬è½¬åˆ°é¢å‘<b>å¼€å‘äººå‘˜</b>çš„éƒ¨åˆ†ï¼Œç„¶åå°†å…¶æ‰“å¼€ã€‚ æˆ‘ä»¬å°†è®¾å¤‡è¿æ¥åˆ°è®¡ç®—æœºï¼Œå¹¶å…è®¸åœ¨æ­¤è®¡ç®—æœºä¸Šè®¿é—®è¯¥è®¾å¤‡ã€‚ </li><li> ä¸ºæ‚¨çš„è®¾å¤‡æ·»åŠ <b>root</b> ã€‚ æœ€å¸¸è§çš„é€‰é¡¹æ˜¯<b>SuperSu</b> ï¼Œ <b>Magisk</b>å’Œ<b>Kingroot</b> ã€‚ è½¬åˆ°w3bsit3-dns.comå¹¶æ‰¾åˆ°æ‚¨è®¾å¤‡çš„rooté€‰é¡¹ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæ²¡æœ‰æ™®éçš„æ ¹æºã€‚ </li><li> æˆ‘ä»¬å®‰è£…äº†<b>BusyBox</b> ï¼ˆä¾‹å¦‚ï¼Œå®ƒä¹Ÿåœ¨w3bsit3-dns.comä¸Šï¼‰ï¼Œå› ä¸ºå®ƒä»…åŒ…å«ä¸€ä¸ªcronç¨‹åºã€‚ </li></ol><br><h3> æ‰‹åŠ¨å¼€å§‹è®¾å®š </h3><br><ol><li> æˆ‘ä»¬ä½¿ç”¨<b>adb shell</b>è¿æ¥åˆ°ç”µè¯ï¼ˆå¦‚æœadbæœªåœ¨æ‚¨çš„ç¯å¢ƒå˜é‡ä¸­æ³¨å†Œï¼Œè¯·æ·»åŠ å®Œæ•´è·¯å¾„ã€‚ </li><li> ä½¿ç”¨<b>su</b>å‘½ä»¤è¿›å…¥rootæ¨¡å¼ </li><li> æˆ‘ä»¬æ£€æŸ¥cronç¨‹åºæ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä½¿ç”¨<b>crond -h</b>å‘½ä»¤æŸ¥çœ‹è®¾ç½® </li></ol><br><div class="spoiler">  <b class="spoiler_title">æ‰§è¡Œç»“æœ</b> <div class="spoiler_text"><pre><code class="bash hljs">crond: invalid option -- h BusyBox v1.29.2-Stericson (2018-08-12 11:19:12 EDT) multi-call binary. Usage: crond -fbS -l N -d N -L LOGFILE -c DIR -f Foreground -b Background (default) -S Log to syslog (default) -l N Set <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> level. Most verbose 0, default 8 -d N Set <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> level, <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> to stderr -L FILE Log to FILE -c DIR Cron dir. Default:/var/spool/cron/crontabs</code> </pre> <br></div></div><br> ä»æœ€åä¸€è¡Œå¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æŒ‡ä»¤åº”å­˜å‚¨åœ¨ç›®å½•<b>/ var / spool / cron / crontabsä¸­</b> ï¼Œè¯¥ç›®å½•ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¹¶ä¸”å¦‚æœæˆ‘ä»¬è¿è¡Œå‘½ä»¤ <pre> <code class="bash hljs">crond -b</code> </pre> ç„¶åæ£€æŸ¥è¯¥è¿‡ç¨‹æ˜¯å¦å¼€å§‹ <pre> <code class="bash hljs">ps | grep crond</code> </pre>  ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¸å­˜åœ¨ï¼Œå› ä¸º ä»–æ²¡æœ‰å¾—åˆ°ä»»ä½•æŒ‡ç¤ºã€‚ æ‰€ä»¥æˆ‘ä»¬æ‰§è¡Œå‘½ä»¤ <pre> <code class="bash hljs">crond -b -fd0</code> </pre> çœ‹çœ‹æ˜¯ä»€ä¹ˆåŸå› ã€‚ æ‚¨å¾ˆå¯èƒ½ä¼šé‡åˆ°ç±»ä¼¼çš„é”™è¯¯ï¼š <br>  <code>crond: can't change directory to '/var/spool/cron/crontabs': No such file or directory</code> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º å°†æ¥ï¼Œæˆ‘ä»¬è‡ªå·±å°†æŒ‡ç¤ºcrontabå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ã€‚ <br><br>  4.åˆ›å»ºä¸€ä¸ªç®€å•çš„crontabæ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs">mkdir /data/crontab <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"*/1 * * * * echo 'text' &gt;&gt; /sdcard/test.txt"</span></span> &gt; /data/crontab/root</code> </pre> <br> ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œæ¯åˆ†é’Ÿå°†å•è¯<i>æ–‡æœ¬</i>æ·»åŠ åˆ°æ–‡ä»¶<b>/sdcard/test.txtä¸­</b> <br> æˆ‘ä»¬æ¨å‡ºï¼š <pre> <code class="bash hljs">crond -b -fd0 -c /data/crontab</code> </pre> å¹¶è·å¾—ä»¥ä¸‹æ—¥å¿—ï¼š <br><br><pre> <code class="bash hljs">crond: crond (busybox 1.29.2-Stericson) started, <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> level 0 crond: ignoring file <span class="hljs-string"><span class="hljs-string">'root'</span></span> (no such user) ...</code> </pre> <br> å½“ç„¶ï¼Œè¿™æœ‰ç‚¹ä»¤äººæƒŠè®¶ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬æ‰§è¡Œ<b>whoamiå‘½ä»¤ï¼Œ</b>å®ƒå°†ä½œä¸ºç»“æœè¿”å›<b>root</b> ã€‚ <br><br>  5.æ·»åŠ rootç”¨æˆ·ï¼Œå› ä¸ºcrondä¼šè¯¢é—®ï¼š <br><br><pre> <code class="bash hljs">mount -o remount,rw /system; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"root:x:0:0::/system/etc/crontabs:/system/bin/sh"</span></span> &gt;&gt; /system/etc/passwd; mount -o remount,ro /system;</code> </pre> <br> ç”±äºç¼ºå°‘æ­¤æ–‡ä»¶ï¼Œæˆ‘æ„è¯†åˆ°åœ¨Androidç³»ç»Ÿä¸­æ ¹æœ¬ä¸æ¶‰åŠè¯¥æ–‡ä»¶ã€‚ å¦‚æœæ‚¨ç¡®å®šå°†crontabæ–‡ä»¶å­˜å‚¨åœ¨ä½•å¤„ï¼Œåˆ™å¯ä»¥ç”¨æ‰€éœ€çš„è¡Œæ›¿æ¢<b>/ system / etc / crontabs</b> ã€‚ å†æ¬¡è¿è¡Œå‘½ä»¤ <br><br><pre> <code class="bash hljs">crond -b -fd0 -c /data/crontab</code> </pre> <br> æˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š <br><br><pre> <code class="bash hljs">crond: user:root entry:*/1 * * * * <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt 111111111111111111111111111111111111111111111111111111111111 111111111111111111111111 11111111111111111111111111111111 111111111111 1111111 crond: wakeup dt=16 crond: file root: crond: line <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt crond: job: 0 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt crond: can<span class="hljs-string"><span class="hljs-string">'t change directory to '</span></span>/system/etc/crontabs<span class="hljs-string"><span class="hljs-string">' crond: can'</span></span>t change directory to <span class="hljs-string"><span class="hljs-string">'/var/spool/cron'</span></span>: No such file or directory crond: USER root pid 12849 cmd <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt</code> </pre> <br> å°½ç®¡æ ¹æ®æ—¥å¿—ï¼Œè¯¥ä»»åŠ¡å·²åœ¨crondä¸­æ³¨å†Œï¼Œä½†æ˜¯åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œæœªåˆ›å»ºæ–‡ä»¶ã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥å¾ˆç®€å•åœ°è§£å†³ï¼š <br><br><pre> <code class="bash hljs">mkdir -p /system/etc/crontabs</code> </pre> <br> å¥½å§ï¼Œä»–æƒ³è¦ä¸€ä¸ªç›®å½•å­˜åœ¨äºæ­¤ï¼Œæˆ‘ä»¬è¯¥ç¦æ­¢ä»–ï¼ æˆ‘ä»¬å†æ¬¡å¼€å§‹ï¼Œçœ‹åˆ°ï¼š <br><br><pre> <code class="bash hljs">crond: user:root entry:*/1 * * * * <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt 111111111111111111111111111111111111111111111111111111111111 111111111111111111111111 11111111111111111111111111111111 111111111111 1111111 crond: wakeup dt=12 crond: file root: crond: line <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt crond: job: 0 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt crond: child running /system/bin/sh crond: USER root pid 13033 cmd <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'text'</span></span> &gt;&gt; /sdcard/test.txt</code> </pre> <br> é”™è¯¯æ¶ˆå¤±äº†ï¼Œå¹¶å‡ºç°äº†ä»¥ä¸‹é—®é¢˜<b>ï¼šå­è¿è¡Œä¸­/ system / bin / sh</b> ã€‚ æœ€åï¼Œcronå·²æˆåŠŸç»“æŸï¼Œæ‚¨å¯ä»¥ç»§ç»­è¿›è¡Œç¬¬äºŒéƒ¨åˆ†ï¼ <br><br><h2> è‡ªåŠ¨shellè„šæœ¬ä¸‹è½½ </h2><br>  Linuxç³»ç»Ÿæœ‰ä¸€ä¸ª<b>init.d</b>ç›®å½•ï¼Œè¯¥ç›®å½•è´Ÿè´£åœ¨ç³»ç»Ÿå¼•å¯¼åç«‹å³è‡ªåŠ¨å¯åŠ¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼ <br><br>  1.æ£€æŸ¥æ­¤ç›®å½•åœ¨æ‚¨çš„è®¾å¤‡ä¸Šæ˜¯å¦å­˜åœ¨ï¼ˆè¿™æ˜¯<b>/etc/init.d</b>æˆ–<b>/system/etc/init.d-</b>è¿™æ˜¯ç›¸åŒçš„å·²å®‰è£…åˆ†åŒºç­‰ï¼‰ã€‚ å°±æˆ‘è€Œè¨€ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚ å¥½å§ï¼Œç„¶ååˆ›å»ºï¼š <br><br><pre> <code class="bash hljs">mount -o remount,rw /system mkdir /system/etc/init.d chmod 0755 /system/etc/init.d mount -o remount,ro /system</code> </pre> <br> ç°åœ¨åœ¨å…¶ä¸­æ·»åŠ ä¸€äº›ç®€å•çš„è„šæœ¬ï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"echo 'Init.d is working !!!' &gt;&gt; /sdcard/init_test.log"</span></span> &gt; /system/etc/init.d/90my_script chmod 777 /system/etc/init.d/90my_script</code> </pre> <br> æˆ‘ä»¬é‡æ–°å¯åŠ¨è®¾å¤‡ï¼Œçœ‹çœ‹æ˜¯å¦å‘ç”Ÿäº†å¥‡è¿¹...ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘çš„æ–‡ä»¶æ²¡æœ‰å‡ºç°ã€‚ <br><br> æˆ‘ä»¬å°†è¿›ä¸€æ­¥æ£€æŸ¥ç³»ç»Ÿï¼Œå¹¶å¯»æ‰¾ä¸€äº›å¯ä»¥åœ¨å¯åŠ¨åè¿è¡Œè„šæœ¬çš„åˆå§‹åŒ–æ–‡ä»¶ã€‚ æˆ‘çš„è®¾å¤‡ä¸Šçš„<b>/init.rcä¸­</b>æœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚ å¥½å§ï¼Œè®©æˆ‘ä»¬å°è¯•æ›´æ”¹å®ƒå¹¶é‡æ–°å¯åŠ¨è®¾å¤‡ï¼š <br><br><pre> <code class="bash hljs">mount -o remount,rw / <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"echo 'Init.d is working !!!' &gt;&gt; /sdcard/init_test.log"</span></span> &gt;&gt; /init.rc mount -o remount,ro / reboot</code> </pre> <br> ä½†æ˜¯æ²¡æœ‰å†æ¬¡åˆ›å»ºè¯¥æ–‡ä»¶ã€‚ æˆ‘ä»¬å»æŸ¥çœ‹æ–‡ä»¶<b>/init.rc</b> ï¼Œæˆ‘ä»¬çš„è®°å½•æ¶ˆå¤±äº†ï¼Œæ–‡ä»¶ä¼¼ä¹æ²¡æœ‰å˜åŒ–ï¼Œå› ä¸º åˆ›å»ºæ—¥æœŸéå¸¸å¥‡æ€ªï¼ˆä»¥æˆ‘ä¸ºä¾‹ï¼Œ70å¹´1æœˆ1æ—¥ï¼Œ05ï¼š00ï¼š00ï¼‰ã€‚ <br><br> æˆ‘ä»¬ç»§ç»­ç†è§£ï¼Œäº‹å®è¯æ˜è¯¥æ–‡ä»¶å­˜å‚¨åœ¨<b>boot.imgä¸­</b> ï¼Œå¹¶ä¸”æ¯æ¬¡é€€å‡ºè¯¥æ–‡ä»¶æ—¶éƒ½ä¼šå­˜å‚¨ã€‚ ä¸ºäº†æ›´æ”¹<b>init.rc</b>æ–‡ä»¶çš„åŠŸèƒ½ï¼Œ <b>æ‚¨</b>éœ€è¦åšæ‰€æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™</a>ä¸€åˆ‡ã€‚ <br><br> ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•å¯ä»¥å¸®åŠ©è§£å†³æ­¤é—®é¢˜ã€‚ å¯¹äºè¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹shellè„šæœ¬ï¼ˆæ„Ÿè°¢Ryuinfernoï¼‰ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Shellè„šæœ¬</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/system/bin/sh #Script to enable init.d by Ryuinferno @ XDA error_msg(){ echo "You do not need this mod..." sleep 1 echo "If you are reapplying, please delete these files if present:" echo "/system/bin/sysinit" sleep 1 echo "/system/etc/install-recovery.sh" sleep 1 echo "/system/etc/install-recovery-2.sh" sleep 1 echo "And run again..." sleep 1 echo "If init.d is still not working, read the FAQ part in my thread..." sleep 1 echo "Aborting..." mount -o remount,ro -t auto /system echo "" echo "Ryuinferno @ XDA" exit 1 } echo "Init.d Enabler by Ryuinferno @ XDA" echo "" sleep 1 id=`id`; id=`echo ${id#*=}`; id=`echo ${id%%\(*}`; id=`echo ${id%% *}` if [ "$id" != "0" ] &amp;&amp; [ "$id" != "root" ]; then echo "Script NOT running as root!" sleep 1 echo "Superuser access not granted!" sleep 1 echo "Please type 'su' first before running this script..." exit 1 else echo "Hello Supaa User! :P" echo "" sleep 1 fi if [ ! "'which busybox'" ]; then echo "busybox NOT INSTALLED!" sleep 1 echo "Please install busybox first!" exit 1 else echo "busybox found!" sleep 1 fi bbb=0 if [ ! "`which grep`" ]; then bbb=1 echo "grep applet NOT FOUND!" sleep 1 else echo "Awesome! grep found! :D" sleep 1 fi if [ ! "`which run-parts`" ]; then bbb=1 echo "run-parts applet NOT FOUND!" sleep 1 else echo "Good! run-parts found! :)" echo "" sleep 1 fi if [ $bbb -eq 1 ] ; then echo "" echo "Required applets are NOT FOUND!" echo "" sleep 1 echo "Please reinstall busybox!" exit 1 fi echo "Great! Let's proceed..." echo "" sleep 1 echo "Press enter to continue..." read enterKey clear sleep 1 echo "Mounting system as rewritable..." mount -o remount,rw -t auto /system sleep 1 echo "Removing old sysinit file" rm /system/bin/sysinit sleep 1 echo "" echo "Checking for the presence of sysinit in /system/bin..." sleep 1 if [ -e /system/bin/sysinit ]; then echo "sysinit found..." if [ -z "`cat /system/bin/sysinit | grep "init.d"`" ]; then echo "Adding lines to sysinit..." echo "" &gt;&gt; /system/bin/sysinit echo "# init.d support" &gt;&gt; /system/bin/sysinit echo "" &gt;&gt; /system/bin/sysinit echo "export PATH=/sbin:/system/sbin:/system/bin:/system/xbin" &gt;&gt; /system/bin/sysinit echo "run-parts /system/etc/init.d" &gt;&gt; /system/bin/sysinit echo "" &gt;&gt; /system/bin/sysinit else echo "" echo "Your sysinit should already be running the scripts in init.d folder at boot..." error_msg fi else echo "sysinit not found, creating file..." echo "#!/system/bin/sh" &gt; /system/bin/sysinit echo "# init.d support" &gt;&gt; /system/bin/sysinit echo "" &gt;&gt; /system/bin/sysinit echo "export PATH=/sbin:/system/sbin:/system/bin:/system/xbin" &gt;&gt; /system/bin/sysinit echo "run-parts /system/etc/init.d" &gt;&gt; /system/bin/sysinit echo "" &gt;&gt; /system/bin/sysinit fi sleep 1 echo "Setting correct permissions and ownership for sysinit..." chmod 755 /system/bin/sysinit chown 0.2000 /system/bin/sysinit sleep 1 echo "" echo "Checking for the presence of install-recovery.sh..." sleep 1 if [ -f /system/etc/install-recovery.sh ] &amp;&amp; [ -z "`cat /system/etc/install-recovery.sh | grep "daemon"`" ]; then if [ ! -z "`cat /system/etc/install-recovery.sh | grep "init.d"`" ];then echo "Your install-recovery.sh seems to be already modified for init.d..." error_msg fi echo "install-recovery.sh found, renaming it as install-recovery-2.sh..." mv /system/etc/install-recovery.sh /system/etc/install-recovery-2.sh echo "Recreating install-recovery.sh..." echo "#!/system/bin/sh" &gt; /system/etc/install-recovery.sh echo "# init.d support" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh echo "/system/bin/sysinit" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh echo "# excecuting extra commands" &gt;&gt; /system/etc/install-recovery.sh echo "/system/etc/install-recovery-2.sh" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh elif [ -f /system/etc/install-recovery.sh ] &amp;&amp; [ ! -z "`cat /system/etc/install-recovery.sh | grep "daemon"`" ]; then if [ -f /system/etc/install-recovery-2.sh ] &amp;&amp; [ ! -z "`cat /system/etc/install-recovery-2.sh | grep "init.d"`" ];then echo "Your install-recovery-2.sh seems to be already modified for init.d..." error_msg fi echo "install-recovery.sh is used for superuser, using install-recovery-2.sh instead..." if [ -f /system/etc/install-recovery-2.sh ]; then echo "" &gt;&gt; /system/etc/install-recovery-2.sh echo "# init.d support" &gt;&gt; /system/etc/install-recovery-2.sh echo "/system/bin/sysinit" &gt;&gt; /system/etc/install-recovery-2.sh echo "" &gt;&gt; /system/etc/install-recovery-2.sh else echo "#!/system/bin/sh" &gt; /system/etc/install-recovery-2.sh echo "# init.d support" &gt;&gt; /system/etc/install-recovery-2.sh echo "" &gt;&gt; /system/etc/install-recovery-2.sh echo "/system/bin/sysinit" &gt;&gt; /system/etc/install-recovery-2.sh echo "" &gt;&gt; /system/etc/install-recovery-2.sh fi if [ -z "`cat /system/etc/install-recovery.sh | grep "install-recovery-2.sh"`" ]; then echo "" &gt;&gt; /system/etc/install-recovery.sh echo "# extra commands" &gt;&gt; /system/etc/install-recovery.sh echo "/system/etc/install-recovery-2.sh" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh fi else echo "install-recovery.sh not found, creating it..." echo "#!/system/bin/sh" &gt; /system/etc/install-recovery.sh echo "# init.d support" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh echo "/system/bin/sysinit" &gt;&gt; /system/etc/install-recovery.sh echo "" &gt;&gt; /system/etc/install-recovery.sh fi sleep 1 echo "Setting the correct permissions and ownership for install-recovery.sh..." echo "Also for install-recovery-2.sh if it exists..." chmod 755 /system/etc/install-recovery.sh chown 0.0 /system/etc/install-recovery.sh if [ -f /system/etc/install-recovery-2.sh ]; then chmod 755 /system/etc/install-recovery-2.sh chown 0.0 /system/etc/install-recovery-2.sh fi sleep 1 echo "" echo "Checking for the presence of the init.d folder..." sleep 1 if [ -d /system/etc/init.d ]; then echo "init.d folder found..." else echo "init.d folder not found, creating the folder..." mkdir /system/etc/init.d fi sleep 1 echo "" echo "Creating basic init.d scripts..." echo "#!/system/bin/sh" &gt; /system/etc/init.d/08setperm echo "#set correct permissions to /system/etc/init.d folder" &gt;&gt; /system/etc/init.d/08setperm echo "" &gt;&gt; /system/etc/init.d/08setperm echo "mount -o remount,rw -t auto /system" &gt;&gt; /system/etc/init.d/08setperm echo "chmod -R 777 /system/etc/init.d" &gt;&gt; /system/etc/init.d/08setperm echo "mount -o remount,ro -t auto /system" &gt;&gt; /system/etc/init.d/08setperm echo "" &gt;&gt; /system/etc/init.d/08setperm echo "#!/system/bin/sh" &gt; /system/etc/init.d/00test echo "#init.d test" &gt;&gt; /system/etc/init.d/00test echo "" &gt;&gt; /system/etc/init.d/00test echo "if [ -f /data/Test.log ]; then" &gt;&gt; /system/etc/init.d/00test echo "rm /data/Test.log" &gt;&gt; /system/etc/init.d/00test echo "fi" &gt;&gt; /system/etc/init.d/00test echo "" &gt;&gt; /system/etc/init.d/00test echo 'echo "Init.d is working !!!" &gt;&gt; /data/Test.log' &gt;&gt; /system/etc/init.d/00test echo 'echo "excecuted on $(date +"%d-%m-%Y %r" )" &gt;&gt; /data/Test.log' &gt;&gt; /system/etc/init.d/00test echo "" &gt;&gt; /system/etc/init.d/00test sleep 1 echo "Creating permissive SELinux script..." sleep 1 echo "#!/system/bin/sh" &gt;&gt; /system/etc/init.d/01permissive echo "#Init.d Permissive SELinux" &gt;&gt; /system/etc/init.d/01permissive echo "" &gt;&gt; /system/etc/init.d/01permissive echo "busybox mount -o remount,rw -t auto /system" &gt;&gt; /system/etc/init.d/01permissive echo "" &gt;&gt; /system/etc/init.d/01permissive echo "setenforce 0" &gt;&gt; /system/etc/init.d/01permissive echo "SELINUX=permissive" &gt;&gt; /system/etc/init.d/01permissive echo "" &gt;&gt; /system/etc/init.d/01permissive sleep 1 echo "Setting correct permissions and ownership for init.d folder and scipts..." chmod 777 /system/etc/init.d chmod 777 /system/etc/init.d/08setperm chmod 777 /system/etc/init.d/00test chmod 777 /system/etc/init.d/01permissive chown 0.0 /system/etc/init.d chown 0.0 /system/etc/init.d/08setperm chown 0.0 /system/etc/init.d/00test chown 0.0 /system/etc/init.d/01permissive sleep 1 echo "" echo "Mounting system as read-only..." mount -o remount,ro -t auto /system sleep 1 echo "" echo "Done!!!" sleep 1 echo "Please reboot at least twice before checking /data..." sleep 1 echo "If init.d is working, you will see a Test.log in /data..." sleep 1 echo "" echo "Enjoy!!! =)" echo "Ryuinferno @ XDA 2013" exit</span></span></code> </pre><br></div></div><br> è„šæœ¬å…¥é—¨ï¼ åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œå®ƒå°†ç§°ä¸ºinit.shã€‚ <br>  1.å°†æ–‡ä»¶ä¸‹è½½åˆ°ç§»åŠ¨è®¾å¤‡çš„SDå¡ä¸­ï¼š <br><pre> <code class="bash hljs">adb push /tmp/init.sh /sdcard</code> </pre> <br>  2.å¤åˆ¶åˆ°ç§»åŠ¨è®¾å¤‡çš„å†…å­˜ä¸­å¹¶è®¾ç½®å¿…è¦çš„æƒé™ï¼š <br><pre> <code class="bash hljs">adb shell su cp /sdcard/init.sh /data/init.sh chmod 777 /data/init.sh</code> </pre> <br>  3.è¿è¡Œæ‰§è¡Œï¼š <br><pre> <code class="bash hljs">/data/init.sh</code> </pre> <br> å¹¶æ³¨æ„æ˜¾ç¤ºçš„æ—¥å¿—ã€‚ è¿™æ˜¯æˆ‘çš„æ—¥å¿—ï¼š <br><div class="spoiler">  <b class="spoiler_title">è¿è¡Œæ—¥å¿—</b> <div class="spoiler_text"><pre> <code class="bash hljs">Init.d Enabler by Ryuinferno @ XDA Hello Supaa User! :P busybox found! Awesome! grep found! :D Good! run-parts found! :) Great! Let<span class="hljs-string"><span class="hljs-string">'s proceed... Press enter to continue... Mounting system as rewritable... Removing old sysinit file rm: /system/bin/sysinit: No such file or directory Checking for the presence of sysinit in /system/bin... sysinit not found, creating file... Setting correct permissions and ownership for sysinit... Checking for the presence of install-recovery.sh... install-recovery.sh not found, creating it... Setting the correct permissions and ownership for install-recovery.sh... Also for install-recovery-2.sh if it exists... Checking for the presence of the init.d folder... init.d folder found... Creating basic init.d scripts... Creating permissive SELinux script... Setting correct permissions and ownership for init.d folder and scipts... Mounting system as read-only... Done!!! Please reboot at least twice before checking /data... If init.d is working, you will see a Test.log in /data... Enjoy!!! =) Ryuinferno @ XDA 2013</span></span></code> </pre> <br></div></div><br> ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰é”™è¯¯ï¼Œè¯·éšæ—¶é‡æ–°å¯åŠ¨è®¾å¤‡ï¼ ä¹Ÿè®¸æœ‰äººå·²ç»åœ¨å·¥ä½œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°<b>/data/Test.log</b>æ–‡ä»¶ï¼Œä½†æˆ‘æ²¡æœ‰ã€‚ ä½¿ç”¨<b>lså‘½ä»¤</b>æ£€æŸ¥<b>/system/etc/init.d</b>ç›®å½•ï¼š <br><br><pre> <code class="bash hljs">00test 01permissive 08setperm</code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œä»»åŠ¡å·²æˆåŠŸåˆ›å»ºã€‚ æ‚¨å¯èƒ½ä»ç„¶éœ€è¦æ›´æ”¹<b>boot.img</b> ï¼Œä½†æ˜¯è®©æˆ‘ä»¬åœ¨å¼€å§‹æ—¶æ£€æŸ¥ä¸€ä¸‹ï¼Œå…¶ä¸­çš„<b>install-recovery.sh</b>æ–‡ä»¶åœ¨ä»¥ä¸‹ä½ç½®ï¼š <br><br><pre> <code class="bash hljs">find / -name <span class="hljs-string"><span class="hljs-string">"install-recovery.sh"</span></span> ... /system/bin/install-recovery.sh /system/etc/install-recovery.sh ...</code> </pre> <br> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œæˆ‘ä»¬æœ‰2ä¸ªæ–‡ä»¶ä½äºä¸åŒçš„ä½ç½®ã€‚ åœ¨åˆ›å»ºæ—¥æœŸä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°è¯¥è„šæœ¬åœ¨<b>/system/etc/install-recovery.sh</b>ç›®å½•ä¸­åˆ›å»ºäº†è¯¥æ–‡ä»¶ï¼Œå°½ç®¡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥åœ¨<b>/ system / etcä¸­</b>åˆ›å»ºè¯¥æ–‡ä»¶<b>ã€‚</b> è®©æˆ‘ä»¬å°†æ–‡ä»¶é‡å‘½åä¸ºbinå¹¶ä»etcå¤åˆ¶æ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs">mount -o remount,rw /system mv /install-recovery.sh /system/bin/install-recovery2.sh cp /install-recovery.sh /system/bin/</code> </pre> <br><br>  <b>UPD</b> ï¼šè¯·æ³¨æ„ï¼Œä¸¤ä¸ªæ–‡ä»¶çš„å®‰å…¨æ€§ä¸Šä¸‹æ–‡å¿…é¡»åŒ¹é…ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨åœ¨å¤åˆ¶æ—¶çªç„¶è¿·è·¯ï¼ˆè™½ç„¶ä»ç†è®ºä¸Šè®²åº”è¯¥ä¸æ˜¯ï¼‰ï¼Œåˆ™éœ€è¦å°†å…¶è¿˜åŸï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">chcon</a>å®ç”¨ç¨‹åºï¼‰ã€‚ ä½¿ç”¨<b>ls -lZ</b>æŸ¥çœ‹å®Œæ•´çš„æ–‡ä»¶ä¿¡æ¯ï¼š <br><pre> <code class="bash hljs">ls -lZ /system/etc/install-recovery.sh <span class="hljs-comment"><span class="hljs-comment"># -rwxr-xr-x root root u:object_r:system_file:s0 install-recovery.sh</span></span></code> </pre><br> åœ¨è¿™é‡Œ<b>uï¼šobject_rï¼šsystem_fileï¼šs0</b>æ˜¯å®‰å…¨ä¸Šä¸‹æ–‡ã€‚ <br><br> å†æ¬¡ï¼Œæˆ‘ä»¬é‡æ–°å¯åŠ¨è®¾å¤‡...ç°åœ¨ï¼Œç»ˆäºï¼ŒæœŸå¾…å·²ä¹…çš„æˆåŠŸï¼ æ–‡ä»¶<b>/data/Test.logå·²ç»</b>å‡ºç°ï¼ <br><br> ä¸€åˆ‡æ­£å¸¸åï¼Œè½¬åˆ°<b>/system/etc/init.d</b>å¹¶åˆ›å»ºä¸€ä¸ªshellè„šæœ¬ã€‚ ç„¶ååœ¨å…¶ä¸­è¿è¡Œæˆ‘ä»¬çš„crondä»¥æ‰§è¡Œï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"#!/system/bin/sh crond -b -L /sdcard/error.log -c /data/crontab"</span></span> &gt; /system/etc/init.d/99cronstart chmod 777 /system/etc/init.d/99cronstart reboot</code> </pre> <br> ä¸‹è½½åï¼Œæ£€æŸ¥crondæ˜¯å¦å·²å¯åŠ¨ï¼š <br><br><pre> <code class="bash hljs">ps | grep crond root 414 1 9532 236 hrtimer_na 000dcf90 S crond</code> </pre> <br> ç°åœ¨å¯ä»¥ç»“æŸäº†ï¼Œä½†æ˜¯è®©æˆ‘ä»¬ç­‰å¾…ä¸€åˆ†é’Ÿï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æ–‡ä»¶ä¸­æ˜¯å¦æœ‰è®°å½•...å¥½äº†ï¼Œæ­£å¦‚æ‚¨å·²ç»äº†è§£çš„é‚£æ ·ï¼Œä»€ä¹ˆä¹Ÿæ²¡èµ·ä½œç”¨ã€‚ äº‹å®æ˜¯ï¼Œæ­¤è¿‡ç¨‹éœ€è¦ä»è¶…çº§ç”¨æˆ·è¿è¡Œã€‚ æ›´æ”¹<b>99cronstart</b>æ–‡ä»¶ä¸­çš„è„šæœ¬ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"#!/system/bin/sh /su/bin/su -c crond -b -L /sdcard/error.log -c /data/crontab"</span></span> &gt; /system/etc/init.d/99cronstart reboot</code> </pre> <br><br>  <b>UPD</b> ï¼šä¹Ÿè®¸åœ¨æ‚¨çš„æƒ…å†µä¸‹ï¼Œ <b>su</b>å°†å…·æœ‰ä¸åŒçš„è·¯å¾„ï¼Œç„¶åä½¿ç”¨<b>su</b>å‘½ä»¤å¹¶ç”¨æ‚¨çš„è·¯å¾„æ›¿æ¢è¯¥è·¯å¾„ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬çš„Androidè®¾å¤‡æ”¯æŒcronä»»åŠ¡ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«ç”¨äºè‡ªåŠ¨å¯åŠ¨çš„shellè„šæœ¬ï¼ <br><br> æœ€åï¼Œå°†è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„è„šæœ¬ï¼ˆå¦‚æœä¸åœ¨è¿›ç¨‹ä¸­ï¼‰å¹¶åœ¨å¯åŠ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¹‹å‰ä¿å­˜æœ‰å…³ä¸»å±å¹•ä¸Šå†…å®¹çš„ä¿¡æ¯ï¼š <br><br><pre> <code class="bash hljs">proc=$(ps | grep <span class="hljs-string"><span class="hljs-string">"com.test.app"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$proc</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">""</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dumpsys window | grep CurrentFocus &gt; /sdcard/current_focus.dump sleep 1 am start -n com.test.app/com.test.app.activities.MainActivity <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468337/">https://habr.com/ru/post/zh-CN468337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468323/index.html">ä»€ä¹ˆæ ·çš„å™ªéŸ³æœ‰åŠ©äºé›†ä¸­ç²¾ç¥å’Œæ”¾æ¾èº«å¿ƒï¼Œè¿˜å¯ä»¥é˜²æ­¢ä¸¥é‡äº‹æ•…ä¸­çš„å¬åŠ›æŸå¤±</a></li>
<li><a href="../zh-CN468327/index.html">å·®è·-Flexboxä¸­ç¼©è¿›çš„ç¾å¥½å‰æ™¯ï¼ˆå¦‚åœ¨Gridä¸­ï¼‰</a></li>
<li><a href="../zh-CN468329/index.html">A / Bæµ‹è¯•è¿˜ä¸å¤Ÿ</a></li>
<li><a href="../zh-CN468331/index.html">Stephen Wolframçš„ç”Ÿæ´»æ—¶åˆ»-Wolfram Mathematicaçš„åˆ›å»ºè€…| Alphaï¼Œä¸€ç§æ–°å‹çš„ç§‘å­¦ç­‰ç­‰</a></li>
<li><a href="../zh-CN468333/index.html">å¦‚ä½•ä½¿ç”¨Visual Studioè°ƒè¯•å’Œé…ç½®æ–‡ä»¶ä»»ä½•exeæ–‡ä»¶</a></li>
<li><a href="../zh-CN468339/index.html">ä¸ºVisual Studio App Centerå¼•å…¥æ·±è‰²ä¸»é¢˜</a></li>
<li><a href="../zh-CN468341/index.html">Windowsç»ˆç«¯ä¸Šçš„Azure Cloud Shell</a></li>
<li><a href="../zh-CN468343/index.html">æ°å¤«Â·è´ç´¢æ–¯ï¼ˆJeff Bezosï¼‰ï¼šâ€œä¸ºäº†åœ°çƒçš„åˆ©ç›Šè€Œè¿›å…¥å¤ªç©ºâ€</a></li>
<li><a href="../zh-CN468345/index.html">GitHubåœ¨CI / CDå’Œå·¥ä»¶ç®¡ç†ä¸­å¯åŠ¨äº†è§¦è§’</a></li>
<li><a href="../zh-CN468347/index.html">MetricKitã€‚ iOSåº”ç”¨ç¨‹åºæ€§èƒ½åˆ†æ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>