<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóíÔ∏è üí≤ üö¨ Ultraschallkoordinatensystem 2.0 üåΩ üöç üë©‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ultraschallkoordinatensystem 2.0 
 Worum es in diesem Artikel geht: In diesem Artikel werden die Funktionsprinzipien meines Koordinatenbestimmungssyst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ultraschallkoordinatensystem 2.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479530/"><h2>  Ultraschallkoordinatensystem 2.0 </h2><br>  <b>Worum es in diesem Artikel geht: In</b> diesem Artikel werden die Funktionsprinzipien meines Koordinatenbestimmungssystems und meine Erfahrungen bei seiner Herstellung beschrieben.  Dieser Artikel ist keine Anleitung zur Herstellung eines Navigationssystems, da es nicht so einfach ist, ihn in einem Artikel zu beschreiben. <br><br><img src="https://habrastorage.org/webt/-r/zu/xp/-rzuxphjgpq9izjwplxls7rrwue.png"><br><br>  Dieser Artikel ist eine Weiterentwicklung der Ideen meines vorherigen Artikels: <br>  <a href="https://habr.com/ru/post/451408/">habr.com/de/post/451408</a> <br><a name="habracut"></a><br><h3>  Systemstruktur </h3><br>  Das Koordinatenbestimmungssystem hat das folgende Strukturdiagramm: <br><br><img src="https://habrastorage.org/webt/l1/-w/4j/l1-w4j5qkp9xuwk_2k8x7kvnqfg.png"><br>  Abb.  1 - Schematische Darstellung des Ultraschallsystems zur Koordinatenbestimmung. <br><br>  Betrachten wir jedes Element genauer. <br><br><h3>  Ultraschallempf√§nger </h3><br><img src="https://habrastorage.org/webt/ix/cv/og/ixcvogrpoy4ntuu0qw9ytjbtyje.png"><br><br><img src="https://habrastorage.org/webt/nc/sr/tf/ncsrtfhxi-rsa8jstcwuuax0nfu.jpeg"><br><br><img src="https://habrastorage.org/webt/f4/83/bj/f483bjd1b0vfkn0a5yywlcv_a-g.jpeg"><br>  Abb.  2 - Entwicklung des Ultraschallempf√§ngers (von oben nach unten). <br><br>  Urspr√ºnglich bestanden die Empf√§nger aus einem Modul und hatten eine sehr kleine Reichweite des Raumes. Damals habe ich das Signal nicht digitalisiert, sondern einfach vom Sensor die L√§nge empfangen, die der normale Controller ausgegeben hat. <br><br>  Um die Reichweite zu erh√∂hen, entschied ich mich f√ºr ein Modul aus drei Sensoren, deren Daten gleichzeitig digitalisiert und an einen PC √ºbertragen wurden, wo Entfernung und Koordinaten berechnet wurden.  Nach dem Testen eines Dreikomponenten-Empf√§ngers habe ich festgestellt, dass ein Empf√§nger ausreicht, wenn Sie das Signal selbst verarbeiten. <br><br>  Infolgedessen wurde der Empf√§nger wieder einkomponentig, aber aufgrund der Tatsache, dass ich gerade das Signal verarbeite, ist der Abdeckungsbereich ziemlich gro√ü geworden.  Das Signal wird nun nach der Digitalisierung in STM32 verarbeitet, es gibt nur den Abstand zum Ausgang aus. <br><br>  Zusammensetzung: <br><ul><li>  STM32 - zur Digitalisierung des Ultraschallsignals und zur Berechnung der Entfernung zum Sender; </li><li>  HC-SR04 - Ich habe es ein wenig modifiziert und kann jetzt das Signal von seinem Eingang empfangen, wie in Abbildung 3 gezeigt. </li><li>  RS485 - um die Entfernung zum Sender an einen PC zu √ºbertragen. </li></ul><br><img src="https://habrastorage.org/webt/sd/xb/qp/sdxbqplmpwkrchgdlty-ptpigms.png"><br>  Abb.  3 - Digitalisiertes Ultraschallsignal. <br><br><img src="https://habrastorage.org/webt/ty/8c/lf/ty8clfyeg2s3jxde_dbgtolirmo.png"><br>  Abb.  4 - Ultraschallsignal im Bereich 4700 - 5200 der obigen Abbildung. <br><br><h3>  Ultraschallstrahler </h3><br><img src="https://habrastorage.org/webt/fv/ta/el/fvtael07m2b6_r2ybluysab17gk.jpeg"><br><br><img src="https://habrastorage.org/webt/gs/i2/7f/gsi27fd6sg6vyiw39z6rfwebmky.jpeg"><br><br><img src="https://habrastorage.org/webt/t5/s6/ai/t5s6aihoqrlyvq7o1uqyxkv90jy.jpeg"><br>  Abb.  5 - Entwicklung des Emitters (von oben nach unten). <br><br>  Wie Sie in Abbildung 5 sehen k√∂nnen, habe ich zuerst den Trig-Fu√ü am HC-SR04-Sensor gezogen. Das war nicht das beste System, schon allein deshalb, weil ich nicht bestimmen konnte, wie viele Ultraschallwellen ich erzeugen konnte, ich ihre Leistung nicht √§ndern konnte und diesen Emitter war sperrig genug. <br><br>  Dann habe ich eine zweite Version erstellt, die viel umst√§ndlicher war, aber mit STM32 und L293D, die direkt mit dem Ultraschall-Lautsprecher verbunden waren, konnte ich bereits alles regeln.  Anstelle der 5-Volt-Norm habe ich jetzt 17 Volt angelegt, was den Arbeitsbereich erheblich vergr√∂√üert hat.  Ich habe auch ein Funkmodul und eine RS485-Schnittstelle hinzugef√ºgt, wodurch dieses Modul eigenst√§ndig ist. <br><br>  Nach einer Reihe von Tests habe ich mich entschlossen, den Emitter auf eine anst√§ndige Gr√∂√üe zu verkleinern und enger zusammenzusetzen, was auf dem letzten Bild zu sehen ist. <br><br>  <b>Zusammensetzung:</b> <br><ul><li>  STM32 - empf√§ngt den Befehl Trig (Start der Entfernungsmessung) √ºber den Funkkanal und sendet ein Ultraschallsignal aus, sendet auch vom Funkmodul empfangene Befehle an RS485 (ich verwende ihn zur Fernsteuerung der mobilen Plattform); </li><li>  RS485 - Ger√§teinformationsschnittstelle f√ºr den Benutzer; </li><li>  DC-DC Boost - wandelt die Stromversorgung 5V in 17V f√ºr den Emitter um; </li><li>  L293D - Ich benutze, um ein starkes Ultraschallsignal mit einer Spannung von 17 V zu erzeugen. </li><li>  nRF24 - Funkkanal; </li><li>  Emitter - 6 Emitter, die aus dem HC-SR04-Modul gezogen werden. </li></ul><br><h3>  Basismodul </h3><br><img src="https://habrastorage.org/webt/sh/ry/r5/shryr5oczq8ct0zjj-nw7ixvpx0.jpeg"><br>  Abb.  6 - Das Grundmodul. <br><br>  <b>Zusammensetzung:</b> <br><ul><li>  STM32 - sendet Trig an den Sender und Empf√§nger, empf√§ngt USB-Befehle vom PC zur √úbertragung √ºber den Funkkanal an den Sender (auch als mobiles Modul bezeichnet); </li><li>  nRF24 - Trigger an den Sender senden und Befehle an den Sender senden. </li></ul><br><h3>  PC-Modul </h3><br>  Der PC √ºber RS485-Adapter ist an alle Ultraschallempf√§nger angeschlossen, √ºber diese Schnittstelle werden alle L√§ngen von diesen empfangen und die Koordinaten des Mobilmoduls berechnet.  √úber USB wird es mit dem Basismodul verbunden und √ºbertr√§gt Steuerbefehle an das Mobilmodul. <br><br><h3>  Platzierung der Module im Arbeitsbereich </h3><br>  Eine Karte eines Raums mit Ultraschallempf√§ngern in den Ecken sieht folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/zf/my/cl/zfmyclsx5ihwv9bg1yay6x033ro.png"><br>  Abb.  7 - Die allgemeine Idee der Position der Sensoren. <br><br><img src="https://habrastorage.org/webt/r_/5p/bz/r_5pbz5hmgbxo4l0wmnfiiew3gi.png"><br>  Abb.  8 - Draufsicht auf eine Skala (Kreise mit Zahlen darin, Sensoren sind angegeben). <br><br><h3>  Der Arbeitsalgorithmus des Ultraschall-Koordinatenbestimmungssystems </h3><br><ol><li>  Das Basismodul sendet einen Trigger-Befehl an den Sender (drahtlos) und an die Empf√§nger (drahtlos). </li><li>  Der Sender beginnt zu senden, und die Empf√§nger h√∂ren die Sendung. </li><li>  Jeder Empf√§nger, der das Ultraschallsignal geh√∂rt hat, zeichnet die Zeit zwischen dem Ausl√∂sebefehl und dem Zeitpunkt des Empfangs dieses Signals auf und √ºbersetzt es in eine Entfernung. </li><li>  RS485-Empf√§nger senden auf einem PC Entfernungen vom Sender zu sich selbst. </li><li>  Der PC berechnet die Koordinaten des Senders. </li></ol><br><h3>  Systembetrieb </h3><br>  L√§uft dies alles, erhalten wir die Koordinaten des Objekts, die Genauigkeit h√§ngt von der Stelle im Raum ab.  An den besten Stellen √ºberschreitet der Fehler nicht einige Zentimeter, und im schlimmsten Fall ... Sie k√∂nnen alles in Abbildung 9 selbst sehen. <br><br><img src="https://habrastorage.org/webt/f-/_p/dc/f-_pdck7ruxzuay-7y9gsfrh6tk.png"><br>  Abb.  9 - Den Sender im Raum bewegen. <br><br>  In dieser Figur gibt es vier S√§tze von Koordinaten, da wir vier Empf√§nger haben und zum Bestimmen von Koordinaten im dreidimensionalen Raum nur drei ben√∂tigen, dann haben wir vier Kombinationen von Empf√§ngern. <br><br>  Wie aus der Abbildung ersichtlich, ermittelt das System die Koordinaten im Allgemeinen korrekt, aber an verschiedenen Stellen ist der Fehler unterschiedlich.  Ich habe den Emitter parallel zur X- und zur Y-Achse bewegt, irgendwo mit einem Abstand zwischen den Linien in einem Meter, irgendwo in einem halben Meter. Dies ist in der Abbildung zu sehen.  Die beste Genauigkeit ist in der Mitte, und an den R√§ndern ist alles schlecht, weil von dort das Ultraschallsignal in einem gro√üen Winkel auf den Empf√§nger f√§llt und dies zu Verzerrungen im digitalisierten Signal f√ºhrt. <br><br>  Nach dem Filtern und Mitteln von vier Koordinatenpaaren erhalten wir das folgende Bild: <br><br><img src="https://habrastorage.org/webt/ac/ny/6c/acny6c59da471karux9ty6u0h6m.png"><br>  Abb.  10 - Gemittelte Flugbahn. <br><br>  Nicht Eis, aber was ist da? <br><br>  Zum Spa√ü zeige ich Ihnen, wie alles in 3D aussieht, da wir auch eine dritte Koordinate haben, obwohl diese in meinem Projekt nicht ben√∂tigt wird, da sich ein mobiler Roboter nur in einem Flugzeug bewegt. <br><br><img src="https://habrastorage.org/webt/-y/gr/uk/-ygrukcimy5ldmzsmpf3zbcqsqe.png"><br>  Abb.  11 - 3D Flugbahn. <br><br>  Wie wir sehen k√∂nnen, liegen alle Punkte ungef√§hr in der gleichen Ebene, und das ist richtig, weil ich den Sender √ºber den Boden gefahren habe, ohne ihn abzunehmen. <br><br>  Und hier ist ein Beispiel f√ºr eine erfolglose Passage einer mobilen Plattform mit einem Sender, dessen Flugbahn deutlich sichtbar ist.  Nach dem Plan sollte die Plattform auf einem rechteckigen Weg zum Ausgangspunkt zur√ºckkehren, aber es hat nicht geklappt. In den folgenden Artikeln werde ich Ihnen erkl√§ren, warum. <br><br><img src="https://habrastorage.org/webt/qj/nu/ez/qjnuezuiq9q3idwssbngqbdeqoc.png"><br>  Abb.  12 - Die Bewegungsbahn der mobilen Plattform. <br><br><h3>  Aktuelle Probleme </h3><br>  Ich habe momentan einige dringende Probleme und wenn jemand etwas vorschlagen kann, schreibe dies bitte in den Kommentaren oder auf VK: <br>  <a href="https://vk.com/b__s__v" rel="nofollow">vk.com/b__s__v</a> <br><br>  1. <b>Wie kann ich ein Ultraschallsignal am besten empfangen?</b>  Die HC-SR04-Sensoren, mit denen ich jetzt ein Ultraschallsignal empfange und verst√§rke, sind nicht die beste Option.  Erstens, weil sie immer ein Signal mit nur einer Frequenz empfangen und Sie keine Frequenztrennung der Signalquellen von ihnen vornehmen k√∂nnen (was f√ºr mich interessant ist), sind sie au√üerdem zu sperrig und ich bin sehr abh√§ngig von ihnen. <br>  2. <b>Wie entferne ich Koordinatenverzerrungen in verschiedenen Ecken des Raumes?</b>  Auf dem Gitter, das ich auf den Boden gemalt habe, kann man sehen, dass manchmal die geraden Linien abweichen, obwohl ich das mobile Modul immer reibungslos bewegt habe und es irgendwie loswerden muss. <br>  3. <b>Bei nRF24 verschwindet das Signal.</b>  Wenn die Module nahe beieinander sind, gibt es keine Probleme, aber es lohnt sich, sie ein paar Meter zu verteilen und selbst zwischen ihnen zu stehen, da die Nachrichten durch einen hindurchreichen.  Ich muss dort keine Nachrichten erneut senden, da ich auf diesem Kanal Taktsignale √ºbertrage und diese immer in derselben Sekunde eintreffen sollten.  Ich habe Module mit einer externen Antenne, und die auf dem Basismodul funktioniert ohne Antenne besser als mit.  Ich verstehe nichts, die Leistung ist maximal. <br>  4. <b>Orte der Projektf√∂rderung.</b>  Wenn jemand internationale Websites wie Habr auf Englisch kennt, verwerfen Sie bitte die Links. Andernfalls habe ich nichts Anst√§ndiges gefunden, aber Stackoverflow. Dies sind nur Fragen und Antworten, nicht ganz, um solche Artikel zu posten. <br>  5. <b>Kommentare und Vorschl√§ge.</b>  Wenn sich jemand zu Wort melden m√∂chte, freue ich mich √ºber Kritik und Anregungen. <br><br>  Dies ist noch lange nicht das Ende meines Projekts, obwohl sich die Zeit dem Ende neigt. Bei Interesse schreibe ich einen Artikel dar√ºber, wie sich ein mobiler Roboter basierend auf diesem System an den angegebenen Koordinaten in meinem Raum fortbewegt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479530/">https://habr.com/ru/post/de479530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479514/index.html">Datenschutz durch Design und Datenschutz durch Standard (Datenschutz durch Design und Datenschutz durch GDPR)</a></li>
<li><a href="../de479516/index.html">Was ist Entropie in Software und wie verwaltet man sie?</a></li>
<li><a href="../de479518/index.html">Kommunikation in einem entfernten Team ist unsere Erfahrung</a></li>
<li><a href="../de479522/index.html">Herausgeber Peter. Winterschlussverkauf</a></li>
<li><a href="../de479524/index.html">Service for Active Restore oder die Geschichte eines Industrieprojekts in Innopolis</a></li>
<li><a href="../de479534/index.html">Kubernetes 1.17 - wie Sie ein Upgrade durchf√ºhren und nicht das gesamte Fehlerbudget ausgeben</a></li>
<li><a href="../de479536/index.html">Lastausgleich in Zimbra Open-Source Edition mit HAProxy</a></li>
<li><a href="../de479538/index.html">Technologie f√ºhrt die Menschheit in den Niedergang. Es ist Zeit, etwas zu √§ndern</a></li>
<li><a href="../de479540/index.html">Verwenden von passwordstore.org - Passwort-Manager im KISS-Stil</a></li>
<li><a href="../de479542/index.html">Wie schreibe ich meinen eigenen √úbersetzer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>