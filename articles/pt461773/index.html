<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏿 ❇️ 🌄 Airtest IDE - uma nova maneira de testar a automação de jogos para celular? 💭 😝 👨‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje, quero falar sobre uma ferramenta de código-fonte bastante nova para testes automatizados chamada Airtest . No futuro, farei mais alguns artigos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Airtest IDE - uma nova maneira de testar a automação de jogos para celular?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461773/"><p>  Hoje, quero falar sobre uma ferramenta de código-fonte bastante nova para testes automatizados chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Airtest</a> .  No futuro, farei mais alguns artigos com uma história detalhada sobre os elementos individuais deste kit de ferramentas e como trabalhar com eles, mas agora tenho o objetivo de apresentá-lo e dar uma idéia geral. </p><br><p>  Este é o primeiro de três artigos.  A segunda parte descreve a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrutura para o reconhecimento de imagem (Image Recognition)</a> - <strong>AirTest</strong> , e a terceira e última parte é dedicada ao <strong>Poco</strong> - a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrutura de automação</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">interface</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usuário, escrevendo código</a> . </p><br><p> O AirTest IDE foi desenvolvido pela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NetEase</a> e destina-se a aplicativos "difíceis de automatizar", como, por exemplo, jogos.  Na verdade, eles são o foco principal dos desenvolvedores, embora isso não pare de usar o AirTest para outros aplicativos. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O AirTest IDE</a> é executado no Windows, MacOS X e Linux e contém 2 estruturas: AirTest e Poco.  Este desenvolvimento foi apresentado por Xin Liu no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Android Game Developer Summit 2018</a> .  Python 2.7 e Python 3.3+ são usados ​​para escrever testes.  Coisas importantes como suporte para executar testes imediatamente em um grande número de dispositivos, código-fonte aberto e aplicativos gratuitos, além de testes escritos fáceis - essas são as vantagens destacadas pelos desenvolvedores.  O aplicativo pode ser usado no Windows e no MacOS e permite automatizar aplicativos no seguinte sistema operacional: Windows, iOS, Android. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Projeto AirTest</a> no GitHub contém 4 projetos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Airtest</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Poco</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iOS-Tangent</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">multi-device-runner</a> . <br>  Também vale mencionar que o NetEase fornece seu próprio farm de dispositivos físicos para testes automatizados chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AirLab</a> . </p><br><img src="https://habrastorage.org/webt/go/fi/bj/gofibjhnktjohm0yb4m6jczbrfg.png" alt="imagem"><a name="habracut"></a><br><p>  Brevemente sobre estruturas. </p><br><p>  <strong>O Airtest</strong> é uma estrutura de plataforma cruzada de reconhecimento de imagem para jogos e aplicativos para dispositivos móveis, baseada na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">retenção de imagem</a> .  O AirTest IDE permite que você interaja com o aplicativo usando os seguintes comandos: <br>  toque, aguarde, deslize, existe, texto, evento de chave, instantâneo, suspensão, assert_exists, assert_not_exists, assert_equal, assert_not_equal.  Vou falar sobre os recursos e parâmetros dos comandos em um artigo separado dedicado a um estudo mais detalhado dos quadros AirTest e Poco.  Agora, vale mencionar que o comando keyevent é responsável por "pressionar os botões físicos" do dispositivo, como Casa, Energia, Menu, Voltar.  Ao usar a maioria dos comandos, o usuário é solicitado a destacar uma parte da tela do dispositivo de trabalho, cuja captura de tela será usada para o comando correspondente (toque, deslize, afirme, etc.). </p><br><img src="https://habrastorage.org/webt/cm/ad/ko/cmadko_9kom-sbotvmbodeawito.gif" alt="imagem"><br><p>  As vantagens do Airtest que posso destacar após o trabalho: </p><br><ol><li>  Escrita de código rápida e clara.  Tudo é feito, na prática, no modo automático, você só precisa selecionar os parâmetros necessários, ajustar os tempos e ter cuidado com a escolha da imagem. </li><li>  A definição exata da imagem, usada no código, no dispositivo de trabalho ativo.  Além disso, o relatório indica a porcentagem de coincidência (comparação) da imagem usada no código e da imagem na tela do dispositivo de trabalho. </li><li>  Falando de relatórios.  Após cada inicialização, você pode criar um relatório usando o atalho de teclado Ctrl \ Cmd + L.  Um relatório conveniente fornece informações como: tipos de afirmação de seus resultados, e cada etapa do teste é destacada em uma subseção separada com informações sobre onde o AirTest clicou, onde esperava uma imagem, porcentagem de imagens correspondentes etc. </li><li>  Depois de escrever o código, você pode usá-lo em qualquer dispositivo. </li><li>  Multithreading: conecte vários dispositivos de teste e execute-os em paralelo. </li></ol><br><p>  Contras Airtest, que posso destacar após o trabalho: </p><br><ol><li>  Se no processo houver elementos com a mesma aparência visual, por exemplo, controles deslizantes, botões etc., com uma alta probabilidade, o AirTest não entenderá qual controle você deseja usar.  Isso será indicado no erro correspondente.  Mas esse menos é facilmente dispensado do uso da segunda estrutura (Poco), que será discutida abaixo. </li><li>  A comparação de imagens (do código e as reais na tela) ocorre em preto e branco.  Vale a pena considerar se você é importante, por exemplo, a aparência visual do personagem (sua cor, roupas diferentes etc.).  Se os caracteres são visualmente diferentes, mas são exibidos na tela da mesma maneira (uma pose, etc.), a verificação provavelmente será bem-sucedida.  As opções de reconhecimento de imagem têm uma marca de seleção "rgb" que você pode usar, mas não funciona muito bem se você tiver uma imagem pequena. </li><li>  Você não pode "congelar" a tela enquanto estiver usando o aplicativo para capturar com precisão as capturas de tela necessárias.  De tempos em tempos, você precisa "capturar" o quadro que precisa. </li><li>  Porque  aplicação em beta aberto, você pode encontrar vários erros ou imprecisões irritantes, por exemplo, como a incapacidade de redimensionar uma janela com um aplicativo interno no Windows.  Agora, os autores estão atualizando o AirTest IDE a cada poucos meses, e espero que esses problemas sejam corrigidos em breve. </li></ol><br><p>  <strong>O Poco</strong> é uma estrutura universal para automatizar a interface do usuário (UI), que fornece APIs poderosas, independentemente do mecanismo (do jogo).  Esses, por sua vez, recuperam a hierarquia dos elementos da interface do usuário em tempo de execução.  Graças a isso, o usuário pode "alcançar" toda a hierarquia de elementos na página atual em apenas alguns cliques no elemento que ele precisa, etc.  Além disso, essa estrutura permite “congelar” a tela atual para escrever código com base na hierarquia de elementos da janela atual.  O Poco foi projetado para ajudar o AirTest a entender que tipo de elemento de interface do usuário os testes estão falando, mas ninguém o incomoda em escrever todos os testes usando apenas essa estrutura. <br>  Todos os testes são escritos em Python.  As implementações de comando podem ser encontradas nas APIs correspondentes: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">módulo</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">airtest.core.api</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacote</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">airtest.core.android</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacote airtest.core.ios</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacote airtest.core.win</a> </p><br><p><img src="https://habrastorage.org/webt/fl/-j/m-/fl-jm-i8pxvlejgwf_a2wcj__fy.gif" alt="imagem"></p><br><p>  Poco vantagens que posso destacar após o trabalho: </p><br><ol><li>  Há suporte para vários mecanismos de jogos importantes, incluindo Unity3D, cocos2dx-js, cocos2dx-lua, mecanismos internos do NetEase, além de suporte para aplicativos Android / iOS nativos.  Se você quiser usar um mecanismo que não esteja na lista de "suportados", poderá criar o seu próprio seguindo as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instruções apropriadas</a> .  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documentação oficial,</a> há uma menção ao Unreal Engine, mas até agora tudo se limita à frase "Em breve". </li><li>  A hierarquia dos elementos da interface do usuário na tela retorna em tempo real. </li><li>  Início rápido e execução de testes. </li><li>  Como no AirTest, escrevi o código uma vez - use-o em qualquer lugar.  Suporte para Python 2.7 e 3.3+ </li><li>  É possível conectar bibliotecas externas ao seu projeto </li><li>  A julgar pela documentação, há suporte para sensores GPS, acelerômetro e giroscópio, além de suporte para os modos de exibição retrato e paisagem. </li></ol><br><p>  Poco contras que posso destacar depois do trabalho: </p><br><ol><li>  Durante o trabalho no Windows 7, não encontrei problemas fundamentais.  o que interferiria no trabalho de pleno direito, mas, no momento, eles estão ao trabalhar com o Windows 10. O principal é o movimento incorreto de objetos (comando de furto) em alguns casos.  Por exemplo, indico o objeto a ser movido e as coordenadas do segundo objeto, que é o ponto final.  Nesses casos raros, Poco perde o local final, mas os relatórios mostram os dados de deslocamento corretos (vetor) e a etapa é considerada bem-sucedida. </li><li>  Quando você seleciona alguns elementos com layouts grandes (layout), a seleção pode se sobrepor à janela do Poco Assistant e você não poderá selecionar outros elementos até que a seleção seja removida da atual.  Para remover a seleção, você pode usar o atalho do teclado Alt + F4 </li></ol><br><p>  Para concluir, vale ressaltar que o Airtest IDE possui seu próprio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>plug-in Selenium</strong></a> , com o qual você pode automatizar seu projeto da Web, mas usando apenas um navegador Chrome.  O restante, no momento, não é suportado.  Pessoalmente, ainda não trabalhei com ele, portanto não posso dizer sobre o trabalho dele, mas era impossível sentir falta dele nesta breve descrição. </p><br><p><img src="https://habrastorage.org/webt/dy/vu/fq/dyvufqnt6-ayoctow3pff4xi0s0.png" alt="imagem"></p><br><p>  Como resultado, eu diria que o AirTest IDE é um desenvolvimento muito promissor, projetado para automatizar a interface do usuário em jogos, mas, no momento, não é adequado para testar o processo do jogo.  Se você tem muitos elementos de interface do usuário e / ou muitos dispositivos para verificar e não deseja gastar muitas horas de trabalho, esse IDE pode se tornar seu salva-vidas.  Para começar a escrever os testes mais simples, você não precisa de conhecimentos profundos em automação e programação, apenas possui um entendimento básico de como trabalhar com o Python.  Obviamente, dessa maneira você não irá longe e precisará aprender essa linguagem de programação, mas para começar e entender o quão realista esse programa combina com você, basta para seus olhos.  A única coisa frustrante agora são vários erros irritantes associados, por exemplo, à incapacidade de redimensionar uma janela com um dispositivo em funcionamento (aplicativo Windows) depois de incorporá-lo, sobrepondo um grande objeto selecionado da interface principal do programa etc., mas é bem possível chegar a um acordo, especialmente considerando o fato de que o aplicativo está no estágio Beta. </p><br><p><img src="https://habrastorage.org/webt/ej/bg/qg/ejbgqgnierz11rcdas3evm9bzoy.png" alt="imagem"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461773/">https://habr.com/ru/post/pt461773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461763/index.html">As agências de publicidade podem matar negócios no início da jornada</a></li>
<li><a href="../pt461765/index.html">Cruzamos k8s com Kafka, salvamos contêineres e escapamos do lixo no Ansible: os 10 principais relatórios do DevOops 2018</a></li>
<li><a href="../pt461767/index.html">Algoritmo do mecanismo de pesquisa SVLAB</a></li>
<li><a href="../pt461769/index.html">Como fiz streaming de webcam Javascript (quase) inútil</a></li>
<li><a href="../pt461771/index.html">Diga não ao silêncio: do berçário ao escritório</a></li>
<li><a href="../pt461775/index.html">3 casos para usar o aipo em um aplicativo Django</a></li>
<li><a href="../pt461779/index.html">80% dos dados da sua empresa não estão disponíveis para você. O que fazer sobre isso?</a></li>
<li><a href="../pt461781/index.html">"Ycombinator Startup School 2019." Vídeo das três primeiras semanas</a></li>
<li><a href="../pt461785/index.html">Desvantagens do RISC-V</a></li>
<li><a href="../pt461787/index.html">Exibição de texto Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>