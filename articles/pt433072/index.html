<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèª üà¥ üè¥ Como hackear a prote√ß√£o contra c√≥pia do console Sega Dreamcast üë®üèº‚Äç‚öïÔ∏è üë©üèæ‚Äçüç≥ üïì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ap√≥s o lan√ßamento do DOOM Black Book, fui de f√©rias ao Jap√£o, onde consegui jogar Ikaruga em uma verdadeira m√°quina de arcade na sala de jogos Taito H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como hackear a prote√ß√£o contra c√≥pia do console Sega Dreamcast</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433072/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/75/nh/l3/75nhl327vyzpklsanxeb3yb9tsw.png"></div><br>  Ap√≥s o lan√ßamento do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DOOM Black Book,</a> fui de f√©rias ao Jap√£o, onde consegui jogar Ikaruga em uma verdadeira m√°quina de arcade na sala de jogos Taito HEY no bairro de Akihabara em T√≥quio.  Essa experi√™ncia reviveu meu interesse no mais recente console de videogame SEGA - Dreamcast. <br><br>  Na rede, voc√™ pode encontrar muitos documentos que facilitam bastante o processo de estudo do problema.  Existem dois excelentes recursos que podem atualizar rapidamente qualquer pessoa: o maravilhoso site de Marcus Comstedt, que descreve tudo at√© os registros da GPU, e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o</a> recurso de Jockel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">: "Vamos criar um jogo para o Sega Dreamcast do zero"</a> . <br><br>  Enquanto eu estudava o carro, descobri uma hist√≥ria incr√≠vel sobre como os hackers rapidamente quebraram a prote√ß√£o de c√≥pias de jogos e arruinaram as mais recentes esperan√ßas de hardware da SEGA. <br><a name="habracut"></a><br><h2>  Primeiro n√≠vel de prote√ß√£o: GD-ROM </h2><br>  No papel, a prote√ß√£o contra c√≥pia do SEGA Dreamcast parecia muito forte.  Os jogos foram entregues em um meio especial chamado GD-ROM, que somente a SEGA poderia produzir.  GD significa "Gigabyte Disc" ("gigabyte disc"), ou seja, seu aumento na densidade de grava√ß√£o forneceu um volume m√°ximo de 1 GB, muito mais do que as capacidades de um CD-ROM convencional (700 MB). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/3dc/d90/c593dcd90243f19b05b025685883c7de.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/797/044/2e8/7970442e84c49259e3a534c34a2909e0.svg" alt="imagem"></div><br>  O GD-ROM tinha as mesmas dimens√µes f√≠sicas que o CD-ROM, mas no n√≠vel macro, consistia em duas √°reas distingu√≠veis a olho nu. <br><br>  A primeira zona (escura) √© uma regi√£o de baixa densidade compat√≠vel com CD-ROM que cont√©m at√© 35 MB.  Ele continha uma faixa de √°udio de voz lembrando ao usu√°rio que o conte√∫do do disco era destinado ao SEGA Dreamcast, e n√£o a um CD player <sup>[1]</sup> .  Al√©m disso, o desenvolvedor adicionou uma faixa com arquivos de texto, por exemplo, informa√ß√µes sobre direitos autorais e, √†s vezes, materiais promocionais, como arte do jogo. <br><br>  A √°rea de alta densidade (luz) foi armazenada at√© 984 MB <sup>[2]</sup> e todo o conte√∫do do jogo estava localizado nela. <br><br>  Parecia imposs√≠vel para os hackers ejetar o jogo do disco e grav√°-lo novamente para distribui√ß√£o. <br><br><h2>  Inicializando a partir do GD-ROM: IP.BIN e 1ST_READ.BIN </h2><br>  Antes de falarmos sobre como os piratas conseguiram copiar jogos, precisamos entender a sequ√™ncia de carregamento.  O Dreamcast n√£o possui um sistema operacional.  Existe um equ√≠voco popular de que ele usou o Windows CE, mas, na verdade, o Microsoft OS era apenas uma biblioteca est√°tica adicional que os desenvolvedores do Dreamcast podiam conectar para usar o DirectX, DirectInput e DirectSound <sup>[3]</sup> .  Em alguns jogos, o WinCE foi usado <sup>[4]</sup> , mas na maioria (por exemplo, Ikaruga) n√£o foi usado.  Independentemente do que o desenvolvedor usou, um jogo com um sistema operacional totalmente conectado e o Dreamcast sempre come√ßou da mesma maneira. <br><br>  Durante o uso normal e o lan√ßamento do jogo oficial no rec√©m-ativado Dreamcast, o BOOTROM foi lan√ßado, carregando o bootstrap do GD-ROM na RAM.  Este pequeno programa, localizado na √∫ltima faixa GD-ROM e conhecido pela comunidade como "IP.BIN", exibia uma tela licenciada pela SEGA e executava dois n√≠veis de inicializa√ß√£o para configurar registros de hardware, criar uma pilha de CPU e inicializar o VBR <sup>[5]</sup> . <br><br>  Mais importante, IP.BIN continha o nome do execut√°vel do jogo.  Esse nome foi pesquisado no sistema de arquivos GD-ROM e carregado na RAM em 0x8C010000, ap√≥s o qual o programa foi transferido para l√°.  Normalmente, o execut√°vel foi nomeado "1ST_READ.BIN". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14f/fac/4a7/14ffac4a70c0af94444f819b03acf2af.svg"></div><br>  Depois que a CPU foi para o endere√ßo 0x8C010000, o jogo come√ßou como deveria. <br><br><h2>  Segundo n√≠vel de prote√ß√£o: scrambler ransomware </h2><br>  A possibilidade te√≥rica de hackers surgiu devido √† capacidade aparentemente insignificante do Dreamcast de inicializar n√£o a partir do GD-ROM, mas do CD-ROM.  Inicialmente, essa funcionalidade chamada ‚ÄúMIL-CD‚Äù foi concebida para adicionar fun√ß√µes multim√≠dia aos CDs de m√∫sica, mas praticamente n√£o foi usada, com exce√ß√£o de sete aplicativos de karaok√™. <br><br>  Os engenheiros da SEGA entenderam que o carregamento de um MIL-CD poderia ser usado como um vetor de ataque e, portanto, adicionaram prote√ß√£o.  Quando o console reconheceu o CD-ROM, o BOOTROM carregou o IP.BIN da maneira usual, mas criptografou 1ST_READ.BIN, √† primeira vista aleatoriamente.  O execut√°vel de trabalho se transformou em um hash ca√≥tico que causou o congelamento do console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/377/512/b26/377512b26e5672bd9f78bc904dc9715d.svg"></div><br>  Desse ponto de vista, o console parecia estar protegido de forma confi√°vel.  O Dreamcast pode reconhecer uma c√≥pia pirateada do jogo, corromper o arquivo execut√°vel durante o processo de download e derrotar os piratas. <br><br><h2>  Sirva minha espada longa! </h2><br>  O problema com o arquivo danificado foi resolvido quando, no final de 1999, o Katana SDK (Sega SDK oficial para Dreamcast) foi roubado pela equipe de hackers da Utopia <sup>[6]</sup> .  Verificou-se que o embaralhador nada mais era do que uma implementa√ß√£o do princ√≠pio "seguran√ßa atrav√©s da obscuridade".  O SDK continha um embaralhador reverso, que transformava o execut√°vel correto em um "hash reverso", que novamente se tornou um execut√°vel ap√≥s carregar e embaralhar com o console do Dreamcast ao inicializar a partir de um CD-ROM. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/102/4e1/0b5/1024e10b5ec8dfd9b9604248728e9e83.svg"></div><br><h2>  Recuperando um jogo com seu GD-ROM </h2><br>  O SDK roubado era o necess√°rio para todos os piratas.  Gra√ßas √† capacidade de executar c√≥digo em uma m√°quina, o Dreamcast agora pode ser usado n√£o como um console de jogos, mas como uma unidade GD-ROM.  O ‚Äúcabo do codificador‚Äù do SDK <sup>[7]</sup> tornou poss√≠vel conectar o console a um PC e estabelecer uma conex√£o f√≠sica.  Para o console despejar o conte√∫do das faixas GD, um arquivo execut√°vel especial foi gravado.  Em seguida, foi reorganizada e gravada em um CD-ROM para gerar todos os 1 GB de dados pela porta serial do console.  Foi um processo propenso a erros que levou at√© 18 horas <sup>[8]</sup> <sup>[9]</sup> .  O resultado foi salvo em um formato ".gdi" especialmente criado. <br><br><pre>  ikaruga.gdi 153 bytes
 track01.bin 13 982 640 bytes
 track02.raw 2.088.576 bytes
 track03.bin 1 185 760 800 bytes </pre><br>  <b>Um fato interessante</b> : voc√™ pode ver que a quantidade total de dados n√£o √© de 1 GB, como mencionado acima, mas de 1,2 GB.  Isso ocorre porque os setores GD-ROM de 2352 bytes seguem o formato Red Book, que usa 12 bytes para sincroniza√ß√£o, 4 bytes para o cabe√ßalho, 2048 bytes para a carga √∫til e 288 bytes para o C√≥digo de detec√ß√£o de erros / C√≥digo de corre√ß√£o de erros <sup>[10 ]</sup> <br><br><pre>  $ cat ikaruga.gdi 
 3
 1 0 4 2352 track01.bin 0
 2 5945 0 2352 track02.raw 0
 3 45000 4 2352 track03.bin 0 </pre><br><h2>  Como ajustar um GD-ROM de 1000 megabytes a um CD-ROM de 700 megabytes </h2><br>  Para ajustar o jogo em um CD-ROM de 700 megabytes, os recursos do jogo foram reformulados.  O sistema de arquivos ISO-9660 usado no GD-ROM facilitou a altera√ß√£o da discretiza√ß√£o de v√≠deos e m√∫sicas, al√©m de exclu√≠-los completamente.  No entanto, para a maioria dos jogos, um processo t√£o complexo n√£o era necess√°rio porque eles n√£o ocupavam os 1 GB inteiros.  Por exemplo, o Ikaruga do Treasure ocupava apenas 150 MB e a maior parte do conte√∫do era preenchida com zeros.  Nesses casos, basta editar os dados de preenchimento. <br><br>  De fato, o ISO-9660 √© um formato t√£o conhecido que at√© os scripts Python (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gditools.py</a> ) foram escritos para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudar o</a> conte√∫do dos arquivos .gdi. <br><br><h2>  Embalagem e distribui√ß√£o </h2><br>  As duas √∫ltimas etapas do processo foram a codifica√ß√£o reversa 1ST_READ.BIN e o empacotamento de todas as informa√ß√µes em um arquivo .cdi para que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DiscJuggler</a> pudesse gravar a imagem no CD-R.  O resultado obtido funcionou sem problemas em qualquer Dreamcast de baunilha sem a necessidade de um chip de modifica√ß√£o. <br><br><h2>  Rea√ß√£o e consequ√™ncias da SEGA </h2><br>  A SEGA lan√ßou rapidamente a segunda vers√£o do console DC com o MIL-CD completamente desativado, mas o dano j√° foi feito.  Ap√≥s uma queda catastr√≥fica na receita e o lan√ßamento do PS2 concorrente, os desenvolvedores abandonaram o Dreamcast e a SEGA deixaram o desenvolvimento de equipamentos, concentrando-se inteiramente na cria√ß√£o de software. <br><br><h2>  Refer√™ncias </h2><br>  [1] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SEGA GD Workshop</a> <br>  [2] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">segaretro.org: GD-ROM</a> <br>  [3] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microsoft anuncia o Windows CE Toolkit para Dreamcast</a> <br>  [4] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogos Dreamcast utilizando Windows CE</a> <br>  [5] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IP.BIN e 1ST_READ.BIN</a> <br>  [6] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vamos construir um jogo Sega Dreamcast do zero</a> <br>  [7] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">adaptador serial para PC</a> <br>  [8] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exame mais preciso e aprofundado da seguran√ßa do Dreamcast</a> <br>  [9] Fonte: As <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formas mais r√°pidas foram projetadas por √∫ltimo, usando o conector de banda larga da DC</a> <br>  [10] Fonte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dreamcast Mito: Capacidade de armazenamento de GD-ROM</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433072/">https://habr.com/ru/post/pt433072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433060/index.html">Por que n√£o acredito em marcas de micropigmenta√ß√£o</a></li>
<li><a href="../pt433062/index.html">AXIS P1367 vs IDIS DC-B3303X: Compare C√¢meras CFTV</a></li>
<li><a href="../pt433064/index.html">Gerenciamento de incidentes: "voc√™ n√£o pode desistir" ou a arte de colocar v√≠rgulas</a></li>
<li><a href="../pt433066/index.html">Copo HighLoad # 2. Campeonato para desenvolvedores de back-end de volta ao servi√ßo</a></li>
<li><a href="../pt433070/index.html">Como distinguir shampoo de champignon e espetos de champagne ... Elasticsearch - procure por produtos nos bancos de dados de lojas</a></li>
<li><a href="../pt433074/index.html">Mudando para o Kotlin em um projeto Android: Dicas e Truques</a></li>
<li><a href="../pt433076/index.html">Como criamos nossa biblioteca da Galeria do Android para exibir conte√∫do de m√≠dia</a></li>
<li><a href="../pt433078/index.html">Escrevemos rob√¥s de negocia√ß√£o usando a estrutura gr√°fica StockSharp. Parte 2</a></li>
<li><a href="../pt433082/index.html">Bombear as contas de outras pessoas se tornou um crime na Cor√©ia do Sul</a></li>
<li><a href="../pt433084/index.html">Li√ß√£o aberta "Engenharia de recursos no exemplo do conjunto de dados cl√°ssico do Titanic"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>