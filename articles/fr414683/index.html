<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úÖ üèõÔ∏è üë± L'histoire de la cr√©ation d'une application mobile pour enfants qui vous permet de gagner de l'argent avec votre esprit. Continuation ü§úüèø üìí üòª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C'est la deuxi√®me partie de l'histoire (m√©lang√©e √† l'histoire de mes erreurs et de leurs solutions) sur la fa√ßon dont j'ai (pendant environ deux ans p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'histoire de la cr√©ation d'une application mobile pour enfants qui vous permet de gagner de l'argent avec votre esprit. Continuation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414683/"><p> <img src="https://habrastorage.org/webt/k1/hu/cx/k1hucxdp80g6ypvp9ib_6cs4658.png" alt="Poursuite de l'histoire du d√©veloppement de l'application mobile iOS / Android pour motiver les enfants √† faire des math√©matiques" width="780" height="644"></p><br><p>  C'est la deuxi√®me partie de l'histoire (m√©lang√©e √† l'histoire de mes erreurs et de leurs solutions) sur la fa√ßon dont j'ai (pendant environ deux ans pendant mon temps libre) d√©velopp√© une application mobile (pour iOS / Android) qui motiverait ma fille √† r√©soudre des exemples math√©matiques.  En cons√©quence, il s'est av√©r√© une application qui permet √† un enfant de gagner de l'argent avec son esprit. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lisez la premi√®re partie ici</a> . </p><br><h3>  Plan de la deuxi√®me partie </h3><br><ul><li>  √Ä propos de l'√©criture de code </li><li>  √Ä propos du contr√¥le de version </li><li>  √Ä propos du doublage </li><li>  √Ä propos de l'ic√¥ne </li><li>  √Ä propos de la construction pour Android et de la taille </li><li>  √Ä propos de la construction pour iOS et de la taille </li><li>  √Ä propos du titre et de la promotion </li><li>  Statistiques </li><li>  Ce que je regrette </li><li>  Ce qui a compris </li><li>  Les r√©f√©rences </li></ul><br><h2>  Anecdotes en programmation qui me facilitent la vie </h2><br><ul><li>  Depuis Mono, je continue √† utiliser <em>// TODO</em> (dans les commentaires) pour marquer les lieux √† finaliser.  Ensuite, tous ces endroits peuvent √™tre facilement surveill√©s sur l'onglet Liste des t√¢ches (Ctrl + \, T est appel√©): </li></ul><a name="habracut"></a><br><p><img src="https://habrastorage.org/webt/ly/bx/e7/lybxe7_dxf0lhqedrkw9ydpybp4.png" alt="Utilisation de // todo pour cr√©er une liste de t√¢ches" width="780" height="580"></p><br><ul><li>  R√©cemment, j'ai commenc√© √† utiliser une fonctionnalit√© telle que <em>#region</em> , par exemple, pour masquer les zones d'√©num√©ration des variables: </li></ul><br><p><img src="https://habrastorage.org/webt/uj/_c/0b/uj_c0b_miqmokyhuak3xluoyndc.png" alt="utilisation de r√©gions dans le code" width="780" height="570"></p><br><ul><li>  il est pratique d'envelopper une partie du code avec certaines constructions en utilisant la s√©quence de touches de raccourci Ctrl + K, Ctrl + S.  Par exemple, je s√©lectionne la partie du code qui doit √™tre plac√©e √† l'int√©rieur du if et appuyez sur Ctrl + K, puis imm√©diatement sur Ctrl + S, saisissez le nom de l'op√©rateur (si) dont vous avez besoin et appuyez sur Entr√©e. </li><li>  cela simplifie consid√©rablement le travail avec le code si vous adh√©rez √† un seul style, par exemple, comme ici - le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de style C # avec Unity √† l'esprit</a> . </li><li>  Je suis tr√®s heureux d'√™tre devenu ami avec Coroutine - ce sont, en gros, des fonctions qui √©tendent leur ex√©cution en plusieurs cadres.  C'est-√†-dire  ils n'essaient pas de terminer une t√¢che dans une image (le calculer pendant une demi-seconde, r√©duisant ainsi les performances √† 2 FPS), mais ils le font un peu dans la premi√®re image, un peu dans la seconde et ainsi de suite, afin que le jeu ne ralentisse pas.  Leur autre objectif est d'effectuer quelque chose qui n'a pas besoin d'√™tre fait directement dans chaque image (par exemple, v√©rifier quelque chose 3 fois par seconde). </li></ul><br><p>  L'exemple ci-dessous montre la coroutine d'un feu de circulation qui allume en continu (toutes les dix secondes) tour √† tour un feu jaune, rouge, vert: </p><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TrafficLights</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10f</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartCoroutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.GetComponent&lt;Lamp&gt;(</span></span></span><span class="hljs-function">).</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BlinkYellow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>))</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartCoroutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.GetComponent&lt;Lamp&gt;(</span></span></span><span class="hljs-function">).</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BlinkRed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>))</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartCoroutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.GetComponent&lt;Lamp&gt;(</span></span></span><span class="hljs-function">).</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BlinkGreen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>))</span></span>; } }</code> </pre> <br><p>  Si en langage humain, l' <em>instruction yield</em> indique simplement √† Unity qu'il est n√©cessaire de transf√©rer l'ex√©cution de la fonction √† la trame suivante (autant de fois que n√©cessaire) jusqu'√† ce qu'elle soit ex√©cut√©e, puis passez √† l'instruction de rendement suivante.  T.O.  Coroutine <em>TrafficLights</em> fonctionnera comme ceci: </p><br><ol><li>  il y a d'abord une attente de 10 secondes (premier rendement), </li><li>  puis la coroutine BlinkYellow d√©marre (deuxi√®me rendement) et jusqu'√† la fin, la coroutine BlinkRed ne d√©marre pas, </li><li>  √† la fin de BlinkYellow, BlinkRed est lanc√©, </li><li>  √† la fin de BlinkRed, BlinkGreen est lanc√©, </li><li>  puis le cycle se r√©p√®te depuis le d√©but (voir point 1). </li></ol><br><h2>  Contr√¥le de version, enfin, vraiment n√©cessaire! </h2><br><p>  La vid√©o qui m'a aid√© √† commencer √† utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> en conjonction avec Unity - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment utiliser GitHub avec Unity</a> . </p><br><p>  Malgr√© le fait que j'√©cris moi-m√™me (seul, sans √©quipe) le code, j'ai r√©alis√© que le contr√¥le de version du code est tout simplement vital pour moi: </p><br><ul><li>  J'ai cess√© d'avoir peur de faire des changements cardinaux dans le code qui pourraient ruiner le projet. </li><li>  Il est tr√®s facile de revenir √† votre condition de travail pr√©c√©dente. </li><li>  Il est pratique de comparer des fichiers avec du code. </li><li>  Vous pouvez clairement voir ce qui a chang√© dans le code. </li><li>  Peu importe ce qui arrive √† mon ordinateur, j'ai toujours une version de sauvegarde dans le cloud. </li></ul><br><p>  Mais seulement lorsque vous travaillez avec le contr√¥le de version, vous devez vous habituer √† valider (publier les mises √† jour) en tr√®s petites portions.  Afin de ne pas √™tre comme le mien au d√©but, j'ai chang√© 20 fichiers, ajout√© une tonne de nouvelles fonctionnalit√©s et fait tout cela √† la fois sous le nom "Fuh, maintenant √ßa marche enfin". </p><br><p>  Il est bon qu'une fois, j'ai compris qu'il vaut mieux ne pas ajouter de fichiers de cache (dossier Library), de fichiers temporaires (tmp, dossier obj) au r√©f√©rentiel, et tout ce que Unity g√©n√®re √† la vol√©e.  En fait, seuls les dossiers Assets et ProjectSettings devaient √™tre ajout√©s au r√©f√©rentiel. </p><br><p>  Il n'est pas n√©cessaire d'utiliser GitHub, car son inconv√©nient est que dans un compte gratuit, il est impossible de rendre le code priv√© (visible uniquement par vous-m√™me).  Mais il y a aussi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitLab</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bitbucket</a> , si possible. </p><br><h2>  Comment ai-je rprprrruk dans le microphone </h2><br><p>  Je per√ßois ma candidature comme p√©dagogique et essaie, si possible, de ne pas utiliser les distractions.  Par cons√©quent, les utilisateurs se plaignent parfois, par exemple, du manque de musique ou d'une interface tr√®s simple (bien qu'une interface simple ne soit pas parce que je la voulais tellement, mais parce que je ne sais pas comment faire mieux).  Avec la musique, je suis un peu √† la crois√©e des chemins maintenant: je veux ajouter et piquer (il est peu probable que les professeurs approuvent la d√©cision de faire leurs devoirs de math√©matiques en musique). </p><br><p>  La musique, la musique, mais sans voix est impossible.  Au d√©but, j'ai recherch√© les sons dont j'avais besoin parmi les sons gratuits, mais j'ai r√©alis√© qu'il fallait plus de temps pour chercher que si je les faisais moi-m√™me.  Par cons√©quent, j'ai simplement cr√©√© la plupart des sons avec ma bouche dans un microphone de t√©l√©phone, puis les ai trait√©s √† l'aide d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Audacity</a> (un logiciel multiplateforme gratuit pour l'enregistrement et l'√©dition audio que j'ai utilis√© pour convertir le son d'un format √† un autre). </p><br><p>  Le plus souvent, la logique de cr√©ation d'un effet sonore dans Audacity √©tait la suivante: </p><br><ol><li>  Coupez tout inutile. </li><li>  Utilis√© l'effet de r√©duction du bruit (pour supprimer le bruit de l'enregistrement). </li><li>  Ajout du son d'effet caricatural Wahwah. </li><li>  Avec des effets, Bass and Treble a √©t√© jou√© avec des fr√©quences afin que le son soit plus doux sur les haut-parleurs des smartphones. </li><li>  Si je dis quelque chose, les effets de Change Pitch, Speed ‚Äã‚Äãet Tempo ont chang√© le son de ma voix en chipmunks. </li></ol><br><p>  Au d√©but, mon son √©tait tr√®s en retard par rapport √† l'√©v√©nement (pas dans l'√©diteur, mais sur le smartphone).  L'option <em>Taille du tampon DSP</em> d√©finie sur <em>Meilleure latence</em> (√âdition -&gt; Param√®tres du projet -&gt; Audio) a aid√© et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce sont les conseils</a> (√† la fois dans la question et dans la r√©ponse). </p><br><h2>  Comment la fille a g√©n√©r√© des id√©es d'ic√¥nes </h2><br><p>  Pendant que je d√©veloppais l'application, j'ai essay√© plusieurs fois de cr√©er les ic√¥nes moi-m√™me, mais aucune d'entre elles n'a pris racine (et en v√©rit√©, une sorte de lie est sortie).  Par cons√©quent, lors de l'ouverture de la publication, j'ai confi√© le d√©veloppement d'une ic√¥ne √† ma fille.  Je lui ai expliqu√© que l'ic√¥ne devait √™tre attrayante et expliquer le sens de l'application.  Elle est venue avec beaucoup d'enthousiasme et a instantan√©ment dessin√© une image compl√®tement inappropri√©e.  Je l'ai rejet√© et expliqu√© ce qui doit √™tre am√©lior√© ou pas utilis√© du tout.  Puis tout s'est pass√© comme pr√©vu - elle a √©t√© offens√©e et a cess√© de dessiner des ic√¥nes. </p><br><p>  Au bout d'un demi-mois, l'insulte a pass√© et elle a approfondi la t√¢che: elle a coup√© des carr√©s du cahier dans la bo√Æte (la taille de l'ic√¥ne sur l'√©cran de son iPod) et a commenc√© √† dessiner les options une par une: </p><br><p><img src="https://habrastorage.org/webt/yi/bk/gk/yibkgkp_synqv6cxb5vg15jt6i0.jpeg" alt="Options d'ic√¥nes dessin√©es par la fille" width="780" height="670"></p><br><p>  M'a apport√©.  J'ai choisi les id√©es que j'aimais.  Il a dit dans quelle direction aller.  Elle est all√©e dessiner les options suivantes.  Apr√®s deux jours et trois douzaines d'options, nous nous sommes install√©s en bas √† droite (photo ci-dessus). </p><br><p>  Ensuite, j'ai demand√© √† ma fille de dessiner une version agrandie de l'ic√¥ne (la premi√®re √† gauche dans la figure ci-dessous), que j'ai num√©ris√©e (la seconde √† gauche) et ... j'ai appel√© un ami de l'artiste pour m'aider avec la s√©lection des couleurs.  En cons√©quence, une version centrale a √©t√© obtenue.  Puis j'ai commenc√© √† broyer progressivement l'ic√¥ne (deuxi√®me √† droite) tout au long de la vie de l'application en magasin.  Et maintenant, elle ressemble √† l'extr√™me droite: </p><br><p><img src="https://habrastorage.org/webt/4w/ga/hl/4wgahlbyaxxnv8v0pu9m833yn6a.png" alt="Progression de la cr√©ation des ic√¥nes" width="780" height="160"></p><br><h2>  Version Android </h2><br><p>  Cette vid√©o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unity Android Build - Comment</a> m'a aid√© √† cr√©er mon premier fichier APK, qui explique comment tout configurer sans installer le lourd Android Studio. </p><br><p>  Je r√©p√®te que je n'ai pas d'appareils avec Android (je demande juste √† mes amis de tester apr√®s la nouvelle version) et donc je n'ai eu aucune erreur avec les appareils montr√©s dans la vid√©o. </p><br><p>  Mais sans accroc, il ne pouvait toujours pas faire.  J'ai d√ª bricoler la mise √† jour du SDK Android pendant longtemps, car Unity ne voulait pas travailler avec les derni√®res mises √† jour.  En cons√©quence, il s'est av√©r√© n√©cessaire de permettre √† Unity de choisir et d'installer la version n√©cessaire de la mise √† jour elle-m√™me.  C'est-√†-dire  Je viens de cliquer sur le bouton <em>Mettre √† jour le SDK Android</em> dans Unity lui-m√™me, et je n'ai pas essay√© de tout mettre √† jour moi-m√™me, comme indiqu√© dans la vid√©o. </p><br><div class="spoiler">  <b class="spoiler_title">Probl√®me de mise √† jour manuelle du SDK Android</b> <div class="spoiler_text"><p>  Jusqu'√† ce que je r√©alise que je devais mettre √† jour sous Unity, j'ai longtemps souffert, en mettant √† jour manuellement en utilisant le script sdkmanager.bat (vous devez utiliser ce script avec le param√®tre --update, et non android.bat, ce qui est indiqu√© dans la vid√©o).  Pendant la mise √† jour, il s'est plaint de ne pas pouvoir √©craser le dossier des outils (√† partir duquel il a lui-m√™me commenc√©).  J'ai essay√© un tas de conseils et je ne me souviens m√™me pas de ce qui a aid√©, semble √™tre une sorte de solution avec des liens symboliques. </p></div></div><br><p>  En outre, des erreurs incompr√©hensibles li√©es √† Java sont apparues.  Il s'est av√©r√© qu'il y avait un probl√®me <em>avec la version de</em> Java Development Kit - il n'avait pas non plus besoin d'√™tre install√© avec la derni√®re version.  J'ai essay√© plusieurs anciens et sur l'un d'eux les erreurs ont disparu et tout a fonctionn√©. </p><br><p>  Avec l'apk de signature pour la publication sur Google Play, la vid√©o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment signer une application Unity pour la</a> vid√©o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android Market</a> m'a aid√©.  J'ai soigneusement enregistr√© et enregistr√© ces deux mots de passe, car ils doivent √™tre saisis √† chaque fois que vous cr√©ez une nouvelle version.  Et si vous les perdez, vous ne pourrez pas mettre √† jour l'application (il suffit d'en lib√©rer une nouvelle avec de nouvelles cl√©s). </p><br><p>  L'ic√¥ne, contrairement √† la version iOS, doit d'abord √™tre faite avec des coins arrondis, sinon sur certains appareils, elle restera parfaitement carr√©e. </p><br><h3>  Taille de construction pour Android </h3><br><p>  Maintenant, la taille de mon fichier apk est de 22 Mo. </p><br><p>  J'ai bien r√©duit la taille de l'assemblage avec le format de compression avec perte de texture / sprite - <em>RGBA Crunched ETC2</em> (pour les sprites avec alpha) et <em>RGB Crunched ETC</em> (pour les textures sans alpha).  L'essentiel √©tait de d√©finir la <em>qualit√© du compresseur</em> = 100 (ce param√®tre n'affecte pas la vitesse des textures sur le p√©riph√©rique final, mais uniquement la qualit√© de la texture et la vitesse de compression dans l'√©diteur). </p><br><p>  Toutes les autres danses avec tambourins ne m'ont pas permis d'obtenir une r√©duction significative de la taille du fichier apk (√† l'exception de certaines nuances d√©crites ci-dessous). </p><br><p>  Maintenant, j'utilise ce qui suit .. </p><br><h3>  .. param√®tres des param√®tres du <em>lecteur</em> .. </h3><br><p>  .. pour la taille minimale d'une part et la couverture maximale des appareils d'autre part: </p><br><ul><li>  Unity 2018.1 (plus la version est r√©cente, mieux elle s'emballe et plus il y a de goodies). </li><li>  API Auto Graphics (Unity lui-m√™me choisit OpenGLES2 et 3). </li><li>  Scripting Backend - Mono (il n'est peut-√™tre pas plus rapide que IL2CPP, mais l'assemblage est nettement plus petit). </li><li>  Architectures cibles - ARMv7 et x86.  En supprimant le support Intel x86, j'ai r√©duit la taille de l'apk de 10 Mo suppl√©mentaires (ce serait 12 Mo).  Mais je ne sais pas combien d'appareils j'ai coup√© en supprimant cette coche.  Ce que je sais, c'est que les t√©l√©phones ne sont pas sortis depuis deux ans d√©j√† sous cette architecture.  Et ceux qui l'ont √©t√© peuvent √™tre compt√©s sur les doigts d'une main (les derniers que je connaisse sont Asus Zenfone, Lenovo K 900, Xolo x1000 et il peut y en avoir encore).  Veuillez me corriger dans les commentaires si je parle de b√™tises. </li><li>  Stirpping Level - Strip Assemblies - Coupe en toute s√©curit√© le code inutile.  D'autres options peuvent faire et font un certain gain de taille (je ne l'ai pas remarqu√© √† la maison), mais pas si s√ªr. </li><li>  Build System - Gradle (vous permet d'activer l'option Minify). </li><li>  Minify - Proguard - raccourcit les noms de toutes les classes et variables afin de r√©duire la taille des octets mis√©rables, mais, en bonus, rend le code moins lisible pour √©viter l'ing√©nierie inverse. </li></ul><br><h2>  Construction IOS </h2><br><p>  Je r√©cup√®re une application sur le macbook de ma femme (je me souviens qu'ils ont pris le MacBook Air le moins cher de 2015). </p><br><p>  Pour cr√©er pour iOS 7 m√™me dans Xcode version 9.3, il suffisait de conduire manuellement la valeur 7.0 dans le champ <em>Cible de d√©ploiement</em> (sous l'onglet <em>G√©n√©ral</em> ). </p><br><p>  Pour ajouter des langues (dans lesquelles j'ai traduit l'application √† l'aide de la localisation Lean) √† la description de l'application dans l'AppStore, nous avons d√ª ajouter les lignes suivantes au fichier info.plist (n'importe o√π, par exemple, imm√©diatement apr√®s &lt;dict&gt;): </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundleLocalizations<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>English<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Russian<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Maintenant, j'utilise Unity 2017.4 pour construire pour iOS (comme je l'ai √©crit ci-dessus, j'ai besoin du support iOS 7, sinon j'utiliserais 2018.1). </p><br><h3>  Taille de construction IOS </h3><br><p>  Maintenant, la taille du fichier t√©l√©charg√© pour mon iPhone est de 44 Mo. </p><br><p>  Malheureusement, sous iOS, je ne peux pas utiliser les sprites Crunched, car ils ne sont pas pris en charge sur les appareils plus anciens que l'iPhone 5 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sans prise en charge de Metal et OpenGL ES 3.0</a> ). </p><br><p>  Lorsque j'ai essay√© de r√©duire la taille de la construction √† tout prix, la plus petite taille (34 Mo) a √©t√© obtenue si: </p><br><ul><li>  utiliser Unity 2018 (c'est-√†-dire que la version minimale prise en charge est iOS 8), </li><li>  L'API graphique ne s√©lectionne que le m√©tal, </li><li>  laisser Target Architectures x64 uniquement, </li><li>  utilisez des textures croquantes. </li></ul><br><p>  Mais je n'ai toujours pas compris comment travailler avec l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">amincissement d'application</a> - c'est une chose qui permet √† l'appstore de cr√©er automatiquement mon application pour un iPhone / iPad / iPod sp√©cifique de l'utilisateur final (ce qui entra√Æne une diminution de la taille du fichier t√©l√©charg√©).  J'ai juste eu le temps de r√©diger moi-m√™me des articles dans mes favoris: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amincissement de l'application</a> (aide officielle de Unity). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AssetBundle Workflow</a> (aide officielle de Unity). </li></ul><br><h3>  Mes <em>param√®tres de joueur que</em> je souhaite partager: </h3><br><ul><li>  Il est pratique d'entrer une fois l' <em>ID d'√©quipe de signature automatique</em> (vous pouvez l'obtenir sur le site Web des d√©veloppeurs Apple ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Compte&gt; Adh√©sion</a> ) et de cocher la case <em>Signer automatiquement</em> afin de ne pas le faire √† chaque fois dans Xcode plus tard. </li><li>  J'ai r√©gl√© la <em>fr√©quence de l'acc√©l√©rom√®tre</em> sur <em>D√©sactiv√©</em> (j'ai d√©sactiv√© l'acc√©l√©rom√®tre), car je ne l'utilise pas.  Je peux √©conomiser un peu de batterie aux gens. </li><li>  <em>Comportement en arri√®re</em> - <em>plan</em> - <em>Suspendre</em> - de cette fa√ßon, l'application ne se ferme pas lorsque vous appuyez sur le bouton Accueil, mais continue de fonctionner en arri√®re-plan (vous pouvez intercepter cet √©v√©nement en utilisant <em>OnApplicationPause</em> pour enregistrer le jeu, par exemple). </li></ul><br><h2>  Comment j'ai choisi le nom et ce que j'ai utilis√© pour la promotion </h2><br><p>  Combien ont utilis√© Booking et TripAdvisor, mais je n'ai jamais remarqu√© que leur nom dans l'AppStore n'est pas seulement Booking, mais ¬´Booking.com Travel Deals¬ª et ¬´TripAdvisor Hotels Restaurants¬ª (le nom est dilu√© avec des mots cl√©s, de sorte que l'application est bas√©e sur ces mots cl√©s trouv√© √† la recherche d'un apsteur).  Par cons√©quent, j'ai d√©cid√© de ne pas utiliser l'ancien nom Math4Ami, mais pendant longtemps j'ai jou√© avec diff√©rentes formulations pour inclure les mots cl√©s dont j'avais besoin.  En fin de compte, je suis d'abord venu √† Pocket Money: Math, puis √† Learn Math &amp; Earn Pocket Money.  En russe, ces options ressemblaient √† Pocket Money for Maths et Pocket Money and Maths: Learn and Earn. </p><br><p>  J'ai fait la promotion de ma candidature en envoyant / publiant des liens vers celle-ci √† des amis et connaissances, j'ai √©crit deux articles sur mon blog et accroch√© une banni√®re au m√™me endroit. </p><br><p>  Soit dit en passant, si vous mettez cette ligne dans les pages Web &lt;head&gt;: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"apple-itunes-app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app-id=1372434662"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  .. puis, en ouvrant cette page sur l'iPhone, tout le monde verra la banni√®re de votre application en haut. </p><br><h2>  T√©l√©charger les statistiques </h2><br><p>  J'ai d'abord publi√© la version iOS. </p><br><p><img src="https://habrastorage.org/webt/gz/9c/dq/gz9cdq_ppptgorpolmmyp0zho_o.png" alt="Statistiques de t√©l√©chargement des applications IOS" width="780" height="484"></p><br><p>  Beaucoup de gens ont parl√© de l'aversion pour les appareils Apple et convaincus qu'Android est beaucoup plus cool.  J'ai d√©cid√© de v√©rifier et, apr√®s 20 jours de proc√©dure avec l'assemblage du fichier apk, j'ai fait une sortie sur Google Play. </p><br><p><img src="https://habrastorage.org/webt/u-/1z/8s/u-1z8sasr3p8qibceptcfuo5pr8.png" alt="Statistiques d'installation d'applications Android" width="780" height="432"></p><br><p>  Vous ne tirerez pas de conclusions objectives (ou pas du tout), mais purement subjectives - j'attendais plus de la plate-forme Google, mais pour le moment, cela s'est av√©r√© √† moiti√© pire qu'Apple. </p><br><h2>  Je regrette que: </h2><br><ul><li>  Je n'ai pas effectu√© de sauvegarde lors du passage √† la nouvelle version d'Unity, </li><li>  n'a pas utilis√© de syst√®me de contr√¥le de version (comme git), </li><li>  J'ai essay√© de travailler avec Perforce (juste un syst√®me terrible - cela ralentit irr√©aliste le d√©veloppement), </li><li>  je n'ai jamais utilis√© ScriptableObject (SO) - c'est tellement cool </li><li>  J'ai √©crit le code sur une longue feuille (√ßa fait peur de se souvenir comment j'ai refactoris√© cette feuille plus tard), </li><li>  Je ne savais pas quelles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©taient</a> les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">odeurs de code</a> , mais oh comment je devais les conna√Ætre, </li><li>  J'ai essay√© d'utiliser des variables globales partout, et pas des variables locales (pensant parano√Øaque que si je demande fr√©quemment une fonction, alors la variable locale √† l'int√©rieur de la fonction sera cr√©√©e encore et encore, et il n'y en aura qu'une seule globale. Par cons√©quent, apr√®s des centaines d'appels √† la fonction avec des variables locales, J'aurais un tas de m√©moire gaspill√©e et une perte de performances due √† Garbage Collector), </li><li>  Je n'ai pas toujours adh√©r√© √† un style uniforme dans le code et au nom de tous les actifs.  Voici un <a href="">bon mod√®le pour UE4</a> (il y a beaucoup de choses utiles sur la d√©nomination des actifs et je l'utilise √©galement dans Unity), </li><li>  J'ai oubli√© que j'√©cris l'application principalement pour ma fille, et non pour un beau code ou pour faire plaisir √† d'autres utilisateurs. </li></ul><br><h2>  J'ai r√©alis√© que: </h2><br><ul><li>  les enfants sont tr√®s faciles √† s'asseoir sur mon application (imm√©diatement apr√®s l'installation de l'application, ils peuvent y rester pendant des heures jusqu'√† ce que la batterie du t√©l√©phone se repose), </li><li>  les enfants sont accros aux math√©matiques dans ma candidature, m√™me s'ils ne parlent pas d'argent.  S'il y a deux enfants dans la famille, il est m√™me venu se disputer par t√©l√©phone pour r√©soudre des exemples, </li><li>  Ma candidature s'ennuie tr√®s vite pour les enfants.  Le lendemain, peu de gens ont jou√© √† l'application, m√™me si l'enfant s'est rendu compte qu'il recevrait de l'argent pour cela, </li><li>  la mauvaise r√©tention des utilisateurs / enfants n'est pas exactement le probl√®me de ma candidature en particulier, mais les sp√©cificit√©s de l'enseignement aux enfants (cela m'a √©t√© dit par les enseignants).  L'application doit √™tre tr√®s diversifi√©e afin de maintenir l'int√©r√™t des enfants tout le temps, </li><li>  assez souvent, les parents et les enfants interpr√®tent mal le principe de l'application et pensent qu'en r√©solvant des exemples, ils recevront de l'argent de ma part (du d√©veloppeur).  J'ai re√ßu diff√©rentes lettres avec des questions telles que: comment retirer de l'argent, puis-je retirer vers webmoney ou paypal, o√π sp√©cifier l'adresse pour envoyer de l'argent par ch√®que, etc., </li><li>  si dans les r√©ponses aux mauvaises critiques, nous nous excusons pour nos erreurs et nos oublis (et expliquons √©galement comment cela devrait r√©ellement fonctionner), alors les gens ont tendance √† pardonner les erreurs et √† supprimer les mauvaises notes, </li><li>  vous n'allez pas loin dans votre propre promotion, </li><li>  les enfants grandissent tr√®s vite et pendant que j'√©crivais l'application - ma fille l'a d√©j√† d√©pass√©.  Mais, mon nouveau ¬´testeur¬ª grandit! </li></ul><br><h3>  Les r√©f√©rences </h3><br><p>  Liste des liens de l'article dans l'ordre de leur mention: </p><br><p>  + Comment garder un seul style de code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide de</a> style <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C # avec Unity √† l'esprit</a> . <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o sur la fa√ßon de visser git √† Unity</a> . <br>  + Il existe un r√©f√©rentiel priv√© gratuit sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitLab</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bitbucket</a> . <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Audacity</a> gratuit pour l'enregistrement et l'√©dition audio. <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment supprimer le retard sonore</a> . <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unity Android Build</a> Video <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutorial - Comment</a> . <br>  + Vid√©o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment signer une application Unity pour le march√© Android</a> . <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Appareils Apple prenant en charge Metal / OpenGL ES 3</a> . <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amincissement d'application</a> (documentation Apple). <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amincissement d'application</a> (aide Unity). <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AssetBundle Workflow</a> (documentation Unity). <br>  + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">O√π obtenir l'ID de l'√©quipe</a> . <br>  + Que sont les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">odeurs de code</a> . <br>  + <a href="">Le principe de nommer les actifs / ressources dans les projets de jeu sur UE4</a> . </p><br><p>  Merci d'avoir lu! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414683/">https://habr.com/ru/post/fr414683/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414669/index.html">D√©veloppement d'un nouvel analyseur statique: PVS-Studio Java</a></li>
<li><a href="../fr414673/index.html">Abibas n'est plus: le miracle technologique de la Chine</a></li>
<li><a href="../fr414675/index.html">Carri√®re de responsable informatique: de la ligne de commande au travail d'√©quipe</a></li>
<li><a href="../fr414677/index.html">Commandes rapides Siri</a></li>
<li><a href="../fr414679/index.html">Box-shadows.css</a></li>
<li><a href="../fr414687/index.html">Comment g√©rer une √©quipe et vous-m√™me: 15 livres pour un chef de projet</a></li>
<li><a href="../fr414689/index.html">Le√ßon ouverte "Applications Web et microservices sur Spring Boot 2.0"</a></li>
<li><a href="../fr414691/index.html">Contexte. YouTube Music et YouTube Premium: de quoi s'agit-il et en quoi ils diff√®rent</a></li>
<li><a href="../fr414693/index.html">Fujitsu fi-4750C sur Windows 10 via Adaptec 78xx SCSI</a></li>
<li><a href="../fr414695/index.html">NanoIntroduction √† l'Internet des nano-objets. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>