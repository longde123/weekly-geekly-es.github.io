<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèΩ üîê üç¶ Escrevendo um aplicativo no Flutter em conjunto com o Redux ü•Å üë¶üèæ üßùüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! Neste artigo, gostaria de mostrar como criar um aplicativo Flutter usando o Redux. Se voc√™ n√£o sabe o que √© o Flutter , esse √© um SDK de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Escrevendo um aplicativo no Flutter em conjunto com o Redux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481624/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/kq/1p/xpkq1phvyqjcztfqddbiedcjijw.jpeg" alt="imagem"></div><br><br>  Ol√° pessoal!  Neste artigo, gostaria de mostrar como criar um aplicativo Flutter usando o Redux.  Se voc√™ n√£o sabe o que <a href="https://flutter.dev/">√©</a> o <a href="https://flutter.dev/">Flutter</a> , esse √© um SDK de c√≥digo aberto para a cria√ß√£o de aplicativos m√≥veis do Google.  Ele √© usado para desenvolver aplicativos para Android e iOS e tamb√©m √© a √∫nica maneira de desenvolver aplicativos para o Google Fuchsia. <br><br>  Se voc√™ conhece o Flutter e deseja criar um aplicativo bem projetado, f√°cil de testar e com um comportamento muito previs√≠vel, continue lendo este artigo e descobrir√° em breve! <br><br>  Mas antes de come√ßarmos a escrever o aplicativo em si.  Vamos nos familiarizar um pouco com a teoria, vamos come√ßar explicando o que √© Redux. <br><a name="habracut"></a><br><h3>  O que √© o Redux? </h3><br>  <a href="https://redux.js.org/">Redux</a> √© uma arquitetura criada originalmente para a linguagem JavaScript e usada em aplicativos criados usando <i><b>estruturas reativas</b></i> (como React Native ou Flutter).  Redux √© uma vers√£o simplificada da arquitetura Flux criada pelo Facebook.  Essencialmente, voc√™ precisa saber tr√™s coisas: <br><br><ol><li>  A √∫nica fonte de verdade - todo o <b>estado do</b> seu aplicativo √© armazenado em apenas um local (chamado <b>armazenamento</b> ). </li><li>  estado √© somente leitura / estado √© somente leitura - para alterar o estado do aplicativo, voc√™ precisa enviar a√ß√µes (a√ß√£o), ap√≥s as quais um novo estado ser√° criado </li><li>  as altera√ß√µes s√£o feitas usando fun√ß√µes puras / fun√ß√µes puras - uma fun√ß√£o pura (por simplicidade, √© uma fun√ß√£o sem efeitos colaterais) pega o aplicativo e a a√ß√£o do estado atual e retorna o novo estado do aplicativo </li></ol><br>  <b>Nota:</b> <i>Um efeito colateral da fun√ß√£o √© a capacidade, no processo de executar seus c√°lculos: de ler e modificar os valores de vari√°veis ‚Äã‚Äãglobais, executar opera√ß√µes de E / S, responder a situa√ß√µes excepcionais e chamar seus manipuladores.</i>  <i>Se voc√™ chamar uma fun√ß√£o com efeito colateral duas vezes com o mesmo conjunto de valores de argumentos de entrada, pode acontecer que valores diferentes sejam retornados como resultado.</i>  <i>Tais fun√ß√µes s√£o chamadas de fun√ß√µes n√£o determin√≠sticas com efeitos colaterais.</i> <br><br>  Parece legal, mas quais s√£o os benef√≠cios desta solu√ß√£o? <br><br><ul><li>  temos controle sobre <b>estado / estado</b> - isso significa que sabemos exatamente o que causou a altera√ß√£o de estado, n√£o temos um estado duplicado e podemos monitorar facilmente o fluxo de dados </li><li>  <b>Redutor</b> s√£o fun√ß√µes puras que s√£o f√°ceis de testar - podemos passar estado, a√ß√£o para a entrada e verificar se o resultado √© verdadeiro </li><li>  O aplicativo est√° claramente estruturado - temos diferentes camadas para a√ß√µes, modelos, l√≥gica de neg√≥cios etc. - para que voc√™ saiba exatamente onde adicionar outro novo <i>recurso</i> </li><li>  √© uma √≥tima arquitetura para aplicativos mais complexos - voc√™ n√£o precisa passar o estado por toda a √°rvore da sua visualiza√ß√£o de pai para filho </li><li>  e tem mais uma ... </li></ul><br><h3>  Viagem no tempo Redux </h3><br>  Redux tem uma oportunidade interessante - Viagem no Tempo!  Com o Redux e ferramentas relacionadas, voc√™ pode acompanhar o estado do seu aplicativo ao longo do tempo, verificar o estado real e recri√°-lo a qualquer momento.  Veja este recurso em a√ß√£o: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4c/d8e/168/e4cd8e16824e262401b8c2f7fae2a181.gif" alt="imagem"></div><br><h3>  Widgets Redux com um exemplo simples </h3><br>  Todas as regras acima tornam o fluxo de dados no Redux unidirecional.  Mas o que isso significa?  Na pr√°tica, tudo isso √© feito usando <b>a√ß√µes</b> , <b>redutores</b> , <b>loja</b> e <b>estados</b> .  Vamos imaginar um aplicativo que exibe um contador: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/871/eb8/5e8/871eb85e8a5a12340a0b03d81ada4635.png" alt="imagem"></div><br><ol><li>  Seu aplicativo tem um certo <b>estado</b> na inicializa√ß√£o (o n√∫mero de cliques, que √© 0) </li><li>  Com base nesse estado, a <b>exibi√ß√£o √©</b> renderizada. </li><li>  Se o usu√°rio clicar no bot√£o, a <b>a√ß√£o</b> ser√° enviada (por exemplo, IncrementCounter) </li><li>  Depois disso, a <i>a√ß√£o</i> recebe um <b>redutor</b> que conhece o <i>estado</i> anterior (contador 0) e recebe a <i>a√ß√£o</i> (IncrementCounter) e pode retornar um novo <b>estado</b> (o contador agora √© 1) </li><li>  Nossa aplica√ß√£o tem um novo <b>estado</b> (contador √© 1) </li><li>  Com base no novo <b>estado</b> , a <b>exibi√ß√£o √©</b> redesenhada, que exibe o estado atual </li></ol><br>  Ent√£o, como voc√™ pode ver, geralmente √© tudo sobre <b>estado</b> .  Voc√™ tem um estado de todo o aplicativo, o <b>estado √©</b> <i>somente leitura e</i> , para criar um novo <b>estado,</b> √© necess√°rio enviar uma <b>a√ß√£o</b> .  O envio de <i>a√ß√µes</i> inicia um <b>redutor</b> , que cria e retorna para n√≥s um novo <b>estado</b> .  E a hist√≥ria se repete. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abd/064/a28/abd064a286704f7c441d19257ed8a390.png" alt="imagem"></div><br>  Vamos criar um pequeno aplicativo e conhecer a implementa√ß√£o da abordagem Redux em a√ß√£o, o aplicativo ser√° chamado de " <i>Lista de Compras</i> " <br><br>  Vamos ver como o Redux funciona na pr√°tica.  Vamos criar um aplicativo simples ShoppingCart.  O aplicativo ter√° recursos como: <br><br><ul><li>  adicionando compras </li><li>  ser√° poss√≠vel marcar a compra como conclu√≠da </li><li>  e isso √© basicamente tudo </li></ul><br>  A aplica√ß√£o ter√° a seguinte apar√™ncia: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85c/b09/372/85cb09372a6f1e4fa72817ab2f2f855a.png" alt="imagem"></div><br>  Vamos come√ßar a escrever c√≥digo! <br><br><h3>  Pr√©-requisito </h3><br>  Neste artigo, n√£o mostrarei a cria√ß√£o da interface do usu√°rio para este aplicativo.  <a href="https://github.com/pszklarska/flutter_shopping_cart">Voc√™ pode se familiarizar com o c√≥digo que eu preparei para voc√™ antes de continuar com o mergulho no Redux</a> .  Depois disso, continuaremos escrevendo c√≥digo e adicionando <i>Redux</i> ao aplicativo atual. <br><br>  <b>Nota:</b> <i>Se voc√™ nunca usou o Flutter antes, sugiro que experimente o <a href="https://codelabs.developers.google.com/codelabs/flutter/">Flutter Codelabs do Google</a> .</i> <br><br><h3>  Prepara√ß√£o preliminar </h3><br>  Para come√ßar a usar o <b>Redux</b> for Flutter, precisamos adicionar depend√™ncias ao arquivo <i>pubspec.yaml</i> : <br><br><pre><code class="swift hljs">flutter_redux: ^<span class="hljs-number"><span class="hljs-number">0.5</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br>  Voc√™ tamb√©m pode verificar a vers√£o atual dessa depend√™ncia, acessando a p√°gina <a href="https://pub.dartlang.org/packages/flutter_redux">flutter_redux</a> . <br><br>  <i>No momento da reda√ß√£o deste artigo, a vers√£o era flutter_redux 0.6.0</i> <br><br><h3>  Modelo </h3><br>  Nosso aplicativo deve poder controlar a adi√ß√£o e modifica√ß√£o de elementos, portanto, usaremos um modelo <i>CartItem</i> simples para armazenar o estado de um elemento.  Todo o estado do nosso aplicativo ser√° apenas uma lista de CartItems.  Como voc√™ pode ver, CartItem √© apenas um objeto. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CartItem</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-type"><span class="hljs-type">String</span></span> name; bool checked; <span class="hljs-type"><span class="hljs-type">CartItem</span></span>(this.name, this.checked); }</code> </pre><br>  Primeiro, precisamos declarar a√ß√µes.  A√ß√£o √©, de fato, qualquer inten√ß√£o que possa ser invocada para alterar o estado de um aplicativo.  Em ess√™ncia, haver√° duas a√ß√µes para adicionar e alterar um elemento: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddItemAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">CartItem</span></span> item; <span class="hljs-type"><span class="hljs-type">AddItemAction</span></span>(this.item); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ToggleItemStateAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">CartItem</span></span> item; <span class="hljs-type"><span class="hljs-type">ToggleItemStateAction</span></span>(this.item); }</code> </pre><br>  Ent√£o, precisamos dizer ao nosso aplicativo o que fazer com essas <i>a√ß√µes</i> .  √â por isso que os <i>redutores</i> s√£o usados ‚Äã‚Äã- eles apenas pegam o estado atual do aplicativo e a a√ß√£o (estado e a√ß√£o do aplicativo), depois criam e retornam um novo estado.  Teremos dois m√©todos <i>redutores</i> : <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; appReducers(<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; items, <span class="hljs-keyword"><span class="hljs-keyword">dynamic</span></span> action) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-type"><span class="hljs-type">AddItemAction</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addItem(items, action); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-type"><span class="hljs-type">ToggleItemStateAction</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> toggleItemState(items, action); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items; } <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; addItem(<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; items, <span class="hljs-type"><span class="hljs-type">AddItemAction</span></span> action) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>.from(items)..add(action.item); } <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; toggleItemState(<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt; items, <span class="hljs-type"><span class="hljs-type">ToggleItemStateAction</span></span> action) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>((item) =&gt; item.name == action.item.name ? action.item : item).toList(); }</code> </pre><br>  O m√©todo <i>appReducers ()</i> delega a a√ß√£o aos m√©todos apropriados.  Os <i>m√©todos addItem</i> <i>()</i> e <i>toggleItemState ()</i> retornam novas listas - este √© o nosso novo estado / estado.  Como voc√™ pode ver, voc√™ <b>n√£o deve alterar a lista atual</b> .  Em vez disso, criamos uma nova lista a cada vez. <br><br><h3>  StoreProvider </h3><br>  Agora que temos <i>a√ß√µes</i> e <i>redutores</i> , precisamos fornecer um local para armazenar o <i>estado do aplicativo</i> .  No Redux, √© chamado de <b>armazenamento</b> e √© a √∫nica fonte de verdade para o aplicativo. <br><br><pre> <code class="swift hljs">void main() { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> store = new <span class="hljs-type"><span class="hljs-type">Store</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;&gt;( appReducers, initialState: new <span class="hljs-type"><span class="hljs-type">List</span></span>()); runApp(new <span class="hljs-type"><span class="hljs-type">FlutterReduxApp</span></span>(store)); }</code> </pre><br>  Para criar uma <b>loja</b> , precisamos passar o m√©todo <i>redutores</i> e o <b>estado</b> inicial.  Se criamos uma <b>loja</b> , devemos transmiti-la ao <i>StoreProvider</i> para informar ao nosso aplicativo que a <i>loja</i> pode ser usada por qualquer pessoa que queira solicitar o <b>estado</b> atual <b>do</b> aplicativo. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlutterReduxApp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">Store</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;&gt; store; <span class="hljs-type"><span class="hljs-type">FlutterReduxApp</span></span>(this.store); @<span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> build(<span class="hljs-type"><span class="hljs-type">BuildContext</span></span> context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">StoreProvider</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;&gt;( store: store, child: new <span class="hljs-type"><span class="hljs-type">ShoppingCartApp</span></span>(), ); } }</code> </pre><br>  No exemplo acima, <i>ShoppingCartApp (</i> ) √© o principal widget do nosso aplicativo. <br><br><h3>  StoreConnector </h3><br>  Atualmente, temos tudo, exceto ... realmente adicionando e alterando itens para compra.  Como fazer isso?  Para tornar isso poss√≠vel, precisamos usar o <i>StoreConnector</i> .  Essa √© uma maneira de obter a <b>loja</b> e enviar alguma <i>a√ß√£o</i> ou apenas obter o <b>estado</b> atual. <br><br>  Primeiramente, queremos obter os dados atuais e exibi-los como uma lista na tela: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ShoppingList</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> build(<span class="hljs-type"><span class="hljs-type">BuildContext</span></span> context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">StoreConnector</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;&gt;( converter: (store) =&gt; store.state, builder: (context, list) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">ListView</span></span>.builder( itemCount: list.length, itemBuilder: (context, position) =&gt; new <span class="hljs-type"><span class="hljs-type">ShoppingListItem</span></span>(list[position])); }, ); } }</code> </pre><br>  O c√≥digo acima envolve <i>ListView.builder</i> com um <i>StoreConnector</i> .  <b>O StoreConnector</b> pode aceitar o <b>estado</b> atual (que √© uma lista de itens <i>) e, com a ajuda das fun√ß√µes do <i>mapa</i> , podemos convert√™-lo em qualquer coisa.</i>  <i>Mas, no nosso caso, ser√° o mesmo <b>estado</b> (Lista), porque aqui precisamos de uma lista de compras.</i> <i><br><br></i>  <i>Em seguida, na fun√ß√£o <i>construtor</i> , obtemos uma lista - que √© basicamente uma lista de <i>CartItems</i> da <b>loja</b> , que podemos usar para criar um <b>ListView</b> .</i> <i><br><br></i>  <i>Ok, legal - n√≥s temos dados.</i>  <i>Agora, como definir alguns dados?</i> <i><br><br></i>  <i>Para isso, tamb√©m usaremos o <i>StoreConnector</i> , mas de uma maneira um pouco diferente.</i> <i><br><br></i> <pre> <i><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddItemDialog</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> build(<span class="hljs-type"><span class="hljs-type">BuildContext</span></span> context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">StoreConnector</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;, <span class="hljs-type"><span class="hljs-type">OnItemAddedCallback</span></span>&gt;( converter: (store) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (itemName) =&gt; store.dispatch(<span class="hljs-type"><span class="hljs-type">AddItemAction</span></span>(<span class="hljs-type"><span class="hljs-type">CartItem</span></span>(itemName, <span class="hljs-literal"><span class="hljs-literal">false</span></span>))); }, builder: (context, callback) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">AddItemDialogWidget</span></span>(callback); }); } }typedef <span class="hljs-type"><span class="hljs-type">OnItemAddedCallback</span></span> = <span class="hljs-type"><span class="hljs-type">Function</span></span>(<span class="hljs-type"><span class="hljs-type">String</span></span> itemName);</code></i> </pre> <i><br></i>  <i>Vamos dar uma olhada no c√≥digo.</i>  <i>Usamos o <i>StoreConnector</i> , como no exemplo anterior, mas desta vez, em vez de combinar a lista <i>CartItems</i> com a mesma lista, faremos uma <i>convers√£o de</i> <b>mapa</b> para <i>OnItemAddedCallback</i> .</i>  <i>Assim, podemos passar <a href="https://developer.mozilla.org/ru/docs/%25D0%25A1%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2580%25D1%258C/%25D1%2584%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F_%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25B2%25D1%258B%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0">a fun√ß√£o de retorno de chamada</a> para <i>AddItemDialogWidget</i> e cham√°-la quando o usu√°rio <i>adicionar um</i> novo elemento:</i> <i><br><br></i> <pre> <i><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddItemDialogWidgetState</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddItemDialogWidget</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-type"><span class="hljs-type">String</span></span> itemName; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">OnItemAddedCallback</span></span> callback; <span class="hljs-type"><span class="hljs-type">AddItemDialogWidgetState</span></span>(this.callback); @<span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> build(<span class="hljs-type"><span class="hljs-type">BuildContext</span></span> context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">AlertDialog</span></span>( ... actions: &lt;<span class="hljs-type"><span class="hljs-type">Widget</span></span>&gt;[ ... new <span class="hljs-type"><span class="hljs-type">FlatButton</span></span>( child: const <span class="hljs-type"><span class="hljs-type">Text</span></span>('<span class="hljs-type"><span class="hljs-type">ADD'</span></span>), onPressed: () { ... callback(itemName); }) ], ); } }</code></i> </pre> <i><br></i>  <i>Agora, sempre que o usu√°rio clica no bot√£o ADD, a fun√ß√£o de retorno de chamada envia uma <b>a√ß√£o</b> <i>AddItemAction ()</i> .</i> <i><br><br></i>  <i>Agora podemos fazer uma implementa√ß√£o muito semelhante para alterar o estado de um elemento.</i> <i><br><br></i> <pre> <i><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ShoppingListItem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-type"><span class="hljs-type">CartItem</span></span> item; <span class="hljs-type"><span class="hljs-type">ShoppingListItem</span></span>(this.item); @<span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> build(<span class="hljs-type"><span class="hljs-type">BuildContext</span></span> context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">StoreConnector</span></span>&lt;<span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CartItem</span></span>&gt;, <span class="hljs-type"><span class="hljs-type">OnStateChanged</span></span>&gt;( converter: (store) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (item) =&gt; store.dispatch(<span class="hljs-type"><span class="hljs-type">ToggleItemStateAction</span></span>(item)); }, builder: (context, callback) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new <span class="hljs-type"><span class="hljs-type">ListTile</span></span>( title: new <span class="hljs-type"><span class="hljs-type">Text</span></span>(item.name), leading: new <span class="hljs-type"><span class="hljs-type">Checkbox</span></span>( value: item.checked, onChanged: (bool newValue) { callback(<span class="hljs-type"><span class="hljs-type">CartItem</span></span>(item.name, newValue)); }), ); }); } }</code></i> </pre> <i><br></i>  <i>Como no exemplo anterior, usamos o <b>StoreConnector</b> para exibir a <i>lista da fun√ß√£o de retorno de chamada <i>OnStateChanged</i> .</i></i>  <i><i>Agora, sempre que o sinalizador √© alterado (no m√©todo onChanged), a fun√ß√£o de retorno de chamada aciona o evento <i>ToggleItemStateAction</i> .</i></i> <i><i><br><br></i></i> <h3>  <i><i>Sum√°rio</i></i> </h3> <i><i><br></i></i>  <i><i>Isso √© tudo!</i></i>  <i><i>Neste artigo, criamos um aplicativo simples que exibe uma lista de compras e um pouco imerso no uso da arquitetura Redux.</i></i>  <i><i>Em nossa aplica√ß√£o, podemos adicionar elementos e alterar seu estado.</i></i>  <i><i>Adicionar novos recursos a este aplicativo √© t√£o f√°cil quanto adicionar novas <i>a√ß√µes</i> e <i>redutores</i> .</i></i> <i><i><br><br></i></i>  <i><i><a href="https://github.com/pszklarska/FlutterShoppingCart">Aqui</a> voc√™ pode encontrar o c√≥digo fonte desse aplicativo, incluindo o widget <b>Viagem</b> no <b>tempo</b> :</i></i> <i><i><br><br></i></i>  <i><i>Espero que tenham gostado deste post!</i></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481624/">https://habr.com/ru/post/pt481624/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481610/index.html">Antipadr√µes do PostgreSQL: atualizando uma tabela grande sob carga</a></li>
<li><a href="../pt481612/index.html">Nossa pequena contribui√ß√£o para a luta da Avalonia UI por menos plataformas</a></li>
<li><a href="../pt481616/index.html">Domo geod√©sico. Sobre o dispositivo e minha experi√™ncia em c√°lculos</a></li>
<li><a href="../pt481618/index.html">MVP no Unity ou como simplificar a vida</a></li>
<li><a href="../pt481620/index.html">Juniper SRX e Cisco ASA: pr√≥xima s√©rie</a></li>
<li><a href="../pt481626/index.html">Cole√ß√µes de exibi√ß√£o complexas no iOS: problemas e solu√ß√µes no exemplo do feed VKontakte</a></li>
<li><a href="../pt481628/index.html">Regras para escrever etapas preliminares em casos de teste</a></li>
<li><a href="../pt481630/index.html">Melhores ferramentas e recursos √∫teis para tornar uma startup mais inteligente em 2019</a></li>
<li><a href="../pt481632/index.html">Fornecedores de nuvem: quem √© o melhor do mercado?</a></li>
<li><a href="../pt481634/index.html">Food Design Digest, novembro de 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>