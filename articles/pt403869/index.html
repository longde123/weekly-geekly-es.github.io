<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§µüèº ‚Ü©Ô∏è ‚ùáÔ∏è Minha experi√™ncia de criar uma casa ‚Äún√£o inteligente‚Äù üêè üëß üîô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chegou a minha hora de compartilhar minha experi√™ncia de criar uma casa ‚Äúsem uma casa inteligente‚Äù. Eu realmente n√£o quero me envolver em pol√™micas so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Minha experi√™ncia de criar uma casa ‚Äún√£o inteligente‚Äù</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403869/">  Chegou a minha hora de compartilhar minha experi√™ncia de criar uma casa ‚Äúsem uma casa inteligente‚Äù.  Eu realmente n√£o quero me envolver em pol√™micas sobre o que √© uma casa inteligente e o que ela deve ser capaz de fazer.  No meu caso, vamos domar os m√≥dulos wifi Sonoff do ITEAD e aprender a ativar / desativar a "carga" do telefone.  A publica√ß√£o discutir√° como atualizar um m√≥dulo, conectar um sensor de temperatura / umidade ao m√≥dulo e aprender como controlar o m√≥dulo por meio dos aplicativos HomeKit ("Home") e Siri.  Adicione a tudo isso o sistema de gerenciamento dom√©stico inteligente Domoticz no raspberry pi.  Adicione wifi √† m√°quina de caf√© e ensine a Siri a abrir o interfone. <br><a name="habracut"></a><br>  Encomendei tr√™s m√≥dulos sonoff convencionais e um SV (Voltagem Segura) para teste.  No momento do pedido, o habitual m√≥dulo 4,85 √© sempre verde, por estoque, embora o estoque pare√ßa perp√©tuo.  SV a um pre√ßo semelhante de 4,85.  Com a entrega na Ucr√¢nia, o custo total foi de 26 verde.  China e China na √Åfrica, China, o dinheiro se foi e os bens ainda t√™m tr√™s semanas de espera, e talvez mais.  Voc√™ certamente poderia comprar na Ucr√¢nia e n√£o esperar, mas depois um pouco mais caro. <br><br><h2>  As alegrias dos primeiros passos em dire√ß√£o a um lar ‚Äúsem uma casa inteligente‚Äù </h2><br>  Quatro m√≥dulos vieram, os habituais s√£o embalados em caixas e o SV est√° apenas em um saco antiest√°tico.  O caso e tamanho satisfeito. <br><br><img src="https://habrastorage.org/web/b03/b90/90e/b03b9090e5f2437fa0fc84260c747fff.jpg"><br><br>  N√£o descreverei o processo de instala√ß√£o do software e-Welink nativo e de conex√£o do m√≥dulo √† rede dom√©stica, instru√ß√µes em qualquer idioma da Internet, aceite - eu n√£o quero. <br><br>  Sem pensar duas vezes, entramos no corredor e adicionamos este m√≥dulo √† l√¢mpada do teto.  O m√≥dulo √© pequeno, h√° muito espa√ßo na l√¢mpada.  A luz geralmente permanece acesa no corredor e agora voc√™ pode desligar a luz na cama em frente √† TV.  O apartamento j√° foi reparado em todos os lugares e interruptores convencionais est√£o instalados.  N√£o toque no reparo e use a fia√ß√£o existente. <br><br>  Acontece a seguinte l√≥gica do trabalho: <br><br>  - O interruptor est√° desligado, ent√£o o m√≥dulo tamb√©m n√£o funciona; <br>  - O interruptor est√° ligado, ent√£o a luz pode ser desligada do aplicativo; <br>  - O interruptor √© ligado e a luz foi apagada atrav√©s do aplicativo; em seguida, para acender a luz, √© necess√°rio desligar / ligar o interruptor, depois de definir o m√≥dulo ‚Äúfonte de alimenta√ß√£o na se√ß√£o‚Äù para ON (quando o m√≥dulo de rel√© √© ligado, a luz acende). <br><br>  Alegrai-vos. <br><br>  O segundo m√≥dulo foi adicionado √† l√¢mpada no quarto.  Ent√£o a l√¢mpada n√£o era t√£o espa√ßosa como no corredor.  Eu tive que arquivar um pouco o estojo e reduzir / cortar o bot√£o, ele n√£o cabia na altura.  Em seguida, o m√≥dulo fica bem escondido na l√¢mpada. <br><br><h3>  N√≥s refazemos o interruptor abaixo do bot√£o </h3><br>  Os comutadores da s√©rie Schneider Unica est√£o instalados no apartamento.  Voc√™ pode refazer essa troca colocando uma mola sob a chave e o local j√° foi preparado com anteced√™ncia. <br><br>  Enquanto escrevem na Internet, voc√™ pode tentar a primavera usando canetas esferogr√°ficas.  Minhas tentativas de instalar uma mola a partir de uma caneta esferogr√°fica falharam.  Uma mola muito fraca e falta de rigidez retornam a chave √† sua posi√ß√£o original. <br><br>  A mola Schneider original tem as seguintes caracter√≠sticas d = 3,6 mm, espessura do fio 0,6 mm, altura 10 mm.  Eu n√£o o segurei, n√£o o encontrei √† venda, encontrei informa√ß√µes sobre a primavera em um dos f√≥runs. <br><br>  Depois de procurar na casa, uma mola semelhante foi encontrada, bastante el√°stica e adicionada com sucesso ao comutador.  Sem gastar um centavo, obtemos um bot√£o em vez de um bot√£o. <br><br><img src="https://habrastorage.org/web/092/72f/5ea/09272f5ea6f34969a9ce5c4774039141.jpg"><br>  <i>Parece um interruptor com uma mola instalada.</i> <br><br>  Agora sempre temos o m√≥dulo com energia e em rede.  Nas configura√ß√µes definidas, quando a energia √© aplicada ao m√≥dulo, o m√≥dulo altera o estado do rel√©. <br><br>  A l√≥gica do trabalho neste caso: <br><br>  - no m√≥dulo sonoff sempre h√° energia, ligando e desligando a luz atrav√©s da aplica√ß√£o; <br>  - pressionar o bot√£o corta a energia e o rel√© muda de estado para o oposto. <br><br>  Podemos controlar a carga no comutador e atrav√©s do aplicativo.  O aplicativo e o m√≥dulo nativos funcionam atrav√©s de algum servidor chin√™s. <br><br>  Sim, sim, eu sei, durante a noite h√° um salto / desconex√£o, ligando a tens√£o e a luz acende.  Durante a opera√ß√£o do m√≥dulo, isso nunca aconteceu antes, mas moramos na Ucr√¢nia e as manchetes est√£o cheias de promessas de apag√µes. <br><br>  Na mesa est√° o terceiro m√≥dulo.  Onde voce esta querido  E n√≥s estaremos escolhendo seu nativo e zombando! <br><br><h2>  Instalando firmware alternativo </h2><br>  Uma aut√≥psia mostrou <s>que o paciente morreu de uma aut√≥psia,</s> que h√° um local embaixo do pente por 5 pinos. <br><br><img src="https://habrastorage.org/web/643/e5a/1f4/643e5a1f425645aab6056fce519173d8.jpg"><br><br>  No bot√£o do gabinete (3,3v Rx, Tx, GND, GPIO 14).  Ferro de soldar na m√£o e conecte o adaptador usb-to-ttl.  No meu adaptador usb-to-ttl h√° 3.3v, n√£o tentei fornecer energia ao m√≥dulo de 5v e n√£o o recomendo. <br><br>  Em seguida √© a parte do software.  H√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">firmware</a> para esses m√≥dulos no github.  Agora, uma nova vers√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">firmware</a> j√° apareceu.  Que bom √© esse firmware?  H√° controle da web, protocolo mqtt, OTA (Over the air) - firmware over the air.  Quanto ao firmware nativo, o protocolo mqtt promete adicionar, o OTA tamb√©m est√° l√°, mas apenas por si pr√≥prio.  A desvantagem do firmware nativo √© que ele s√≥ funciona quando conectado √† rede global.  Por que precisamos disso?  Nesse est√°gio, n√£o √© necess√°rio ... especialmente porque n√£o sabemos o que e para onde nosso m√≥dulo envia. <br><br>  Instale o IDE do Arduino.  Eu instalei a vers√£o port√°til 1.8.1.  O firmware requer a vers√£o IDE 1.6.10 ou superior. <br><br>  - Adicione suporte para m√≥dulos ESP8266 <br>  - Instale o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pubsubclient</a> <br>  ‚óã Encontre o arquivo src \ PubSubClient.h e altere o valor de MQTT_MAX_PACKET_SIZE para 400 ou mais (agora as vers√µes do Tasmot est√£o pedindo um valor de 500 ou superior). <br><br>  Fa√ßa o download do esbo√ßo, compile-o com os dedos cruzados e espere que tudo corra bem.  Este n√£o foi o meu caso, lemos o erro e adicionamos as bibliotecas necess√°rias que n√£o estavam l√°.  Algumas horas de tormento e firmware sem erros.  (O principal problema foi que eu instalei o Arduino IDE no Win XP).  Edite o arquivo de configura√ß√£o e preencha nosso firmware. <br><br>  Esses poucos m√≠nimos que eu decidi em User_config.h. <br><br><div class="spoiler">  <b class="spoiler_title">User_config.h</b> <div class="spoiler_text"><code>#define PROJECT "bath" //   -         <br> #define STA_SSID1 "your_wifi_station_id" //    <br> #define STA_PASS1 "your_pass" //     <br> #define STA_SSID2 "your_wifi_station_id_plus" //      <br> #define STA_PASS2 " " //      <br> <br> #define SYS_LOG_HOST "192.168.." //  ,    raspberry pi,    <br> //#define USE_I2C //      <br> //#define USE_IR_REMOTE <br> //#define USE_WS2812</code> <br> </div></div><br>  Dependendo da vers√£o, podem ser adicionadas outras configura√ß√µes que eu desativaria desnecessariamente.  No firmware mais recente (Tasmota), mais e mais configura√ß√µes podem ser feitas atrav√©s do menu de configura√ß√µes da web e duplicadas com User_config.h. <br><br><h3>  Preenchimento de esbo√ßo: </h3><br>  - desligue a energia do m√≥dulo (de qualquer maneira conveniente); <br>  - segure o bot√£o no m√≥dulo e conecte a energia.  O m√≥dulo est√° pronto para receber firmware; <br>  - clique em OK no IDE e novamente cruzando os dedos, esperamos que o firmware comece a ser carregado no m√≥dulo. <br><br>  Em caso de erro, verificamos os fios e se tudo est√° estragado em todos os lugares, ou se n√£o h√° energia suficiente de usb-para-ttl e precisamos usar uma fonte externa.  Dan√ßamos com um pandeiro e repetimos o procedimento. <br><br>  <b>Importante: a</b> <i>energia do m√≥dulo √© fornecida apenas atrav√©s de pinos de 3,3v.</i>  <i>Ele n√£o pode ser conectado √† carga de energia atrav√©s da fonte de alimenta√ß√£o do pr√≥prio m√≥dulo.</i>  <i>Usu√°rios experientes escrevem que fornecer 220v ao m√≥dulo com firmware o transforma em um tijolo, pequeno, mas em tijolo.</i>  Eu n√£o tentei, n√£o sei.  Portanto, ao piscar o m√≥dulo, apenas quatro fios dos pinos est√£o conectados a ele e removemos todo o resto. <br><br>  Se estiver tudo bem, ap√≥s a reinicializa√ß√£o, o m√≥dulo deve se conectar ao ponto de acesso, encontre o endere√ßo IP e v√° para ele no navegador. <br><br><img src="https://habrastorage.org/web/c96/316/9a0/c963169a05594c6791d9dfdd706b365e.png"><br>  <i>A apar√™ncia da p√°gina inicial.</i> <br><br>  Se o m√≥dulo n√£o se conectar ao seu ponto de acesso, continue dan√ßando com um pandeiro.  Existem v√°rias solu√ß√µes, dentro da estrutura deste artigo, n√£o descreverei.  Eu verifiquei as configura√ß√µes e apenas pisquei o m√≥dulo novamente. <br><br>  Agora temos acesso via web ao m√≥dulo e suas configura√ß√µes, mqtt, os fios podem ser colocados em uma gaveta, firmware / atualiza√ß√£o feita por via a√©rea. <br><br><h3>  E onde est√° a Siri? </h3><br>  Tudo isso √© certamente maravilhoso, √© hora de aprender a gerenciar esse bem pelo telefone.  Eu tentei v√°rios programas do aplicativo para o iPhone e n√£o obtive nada de interessante.  Foi decidido explorar o aplicativo Home ou o HomeKit, que tamb√©m possibilita o controle de m√≥dulos atrav√©s do Siri. <br><br>  Encontramos na prateleira Raspberry pi e nos conectamos √† rede.  No meu caso, j√° havia uma "framboesa" conectada √† rede.  Como instalar o sistema operacional e conectar as "framboesas" para descrev√™-lo n√£o faz sentido. <br><br>  Para se comunicar com o HomeKit, voc√™ deve instalar o Homebridge.  Homebridge √© um servidor NodeJS em execu√ß√£o na rede local e emulando a API do iOS HomeKit. <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get upgrade sudo apt-get install git make sudo apt-get install g++</code> </pre><br>  Dependendo do seu sistema, pode ser necess√°rio atualizar o compilador C ++. <br><br>  Instale o Nodejs.  Vamos √† loja e selecionamos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dist</a> apropriada.  Copie o endere√ßo da distribui√ß√£o e ainda mais na imagem <br><br><pre> <code class="bash hljs">wget https://nodejs.org/dist/v4.0.0/node-v4.0.0-linux-armv6l.tar.gz tar -xvf node-v4.0.0-linux-armv6l.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> node-v4.0.0-linux-armv6l sudo cp -R * /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/</code> </pre> <br>  Eu instalei a v6.9.4 para mim, agora existem mais novas. <br><br>  Adicione outros pacotes necess√°rios: <br><br><pre> <code class="bash hljs">sudo apt-get install libavahi-compat-libdnssd-dev</code> </pre> <br>  Instale o Homebridge: <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge</code> </pre><br>  Se isso n√£o funcionar, tente: <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge hap-nodejs node-gyp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/homebridge/ sudo npm install --unsafe-perm bignum <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/hap-nodejs/node_modules/mdns sudo node-gyp BUILDTYPE=Release rebuild</code> </pre> <br>  Depois de instalar o Homebridge, voc√™ precisa instalar mais alguns plug-ins e, em seguida, continue alterando as configura√ß√µes do servidor Homebridge. <br><br>  A instala√ß√£o de plug-ins √© feita da mesma maneira que o pr√≥prio homebridge <br><br><pre> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge-plugin-name</code> </pre> <br>  Encontramos o plug-in necess√°rio no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerenciador de pacotes</a> .  L√° encontramos um exemplo de configura√ß√µes que precisar√£o ser adicionadas √†s nossas configura√ß√µes. <br><br>  Para uma simples troca. <br><br><pre> <code class="bash hljs">npm install -g homebridge-mqttswitch</code> </pre> <br>  V√° para as configura√ß√µes, crie, se ainda n√£o estiver criado, o arquivo de configura√ß√£o: <br><br><pre> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre> <br>  O arquivo de configura√ß√£o √© o seguinte: <br><br><div class="spoiler">  <b class="spoiler_title">config.json</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"bridge"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Homebridge"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"CC:22:3D:E3:CE:30"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-number"><span class="hljs-number">51826</span></span>, <span class="hljs-attr"><span class="hljs-attr">"pin"</span></span>: <span class="hljs-string"><span class="hljs-string">"031-45-154"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"platforms"</span></span>: [ ], <span class="hljs-attr"><span class="hljs-attr">"accessories"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"accessory"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqttswitch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://192.168.178.123:1883"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"caption"</span></span>: <span class="hljs-string"><span class="hljs-string">"room"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"statusGet"</span></span>: <span class="hljs-string"><span class="hljs-string">"stat/sleeping/POWER"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusSet"</span></span>: <span class="hljs-string"><span class="hljs-string">"cmnd/sleeping/power"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"onValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"offValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"integerValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"true"</span></span> } ] }</code> </pre><br></div></div><br>  Antes de salvar o arquivo de configura√ß√µes, verifique, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Ap√≥s salvar, tente executar: <br><br><pre> <code class="bash hljs">Homebridge</code> </pre> <br>  Se tudo come√ßar, ele nos escrever√° algo como: <br><br><pre> <code class="bash hljs"> 11:27:43 PM] [] Initializing mqttswitch accessory...</code> </pre><br>  O c√≥digo 031-45-154 para conex√£o ser√° indicado l√°, se n√£o tiver sido alterado nas configura√ß√µes. <br><br>  Agora ligue o telefone / mais plano executando o iOS.  Encontramos o aplicativo ‚ÄúCasa‚Äù ou ‚ÄúHomeKit‚Äù ‚Üí Adicione um acess√≥rio e aguarde nosso acess√≥rio ‚ÄúHomebridge‚Äù aparecer, adicione-o, digite o c√≥digo, atribua um espa√ßo para o comutador.  E pronto, ‚ÄúOi Siri, acenda / apague a luz da sala‚Äù - funcionou.  "Oi Siri" nos telefones da 5¬™ s√©rie e abaixo funciona apenas quando conectado ao carregamento. <br><br>  Se tudo funcionar corretamente para n√≥s, resta adicionar o Homebridge √† inicializa√ß√£o.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instru√ß√µes completas</a> em ingl√™s.  No meu caso, via <code>init.d</code> , crie o arquivo <code>sudo nano /etc/init.d/homebridge</code> <br>  Copie o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelo</a> para um arquivo nesse arquivo e altere-o em homebridge <br><br><div class="spoiler">  <b class="spoiler_title">/etc/init.d/homebridge</b> <div class="spoiler_text"> <code>#!/bin/sh <br> ### BEGIN INIT INFO <br> # Provides: homebridge <br> # Required-Start: $network $remote_fs $syslog <br> # Required-Stop: $remote_fs $syslog <br> # Default-Start: 2 3 4 5 <br> # Default-Stop: 0 1 6 <br> # Short-Description: Start daemon at boot time <br> # Description: Enable service provided by daemon. <br> ### END INIT INFO <br> <br> dir="/home/pi" <br> cmd="DEBUG=* /usr/local/bin/homebridge" <br> user="pi" <br></code> <br></div></div><br>  Salve, saia. <br><br><pre> <code class="bash hljs">sudo chmod 755 /etc/init.d/homebridge sudo update-rc.d homebridge defaults</code> </pre> <br>  Agora o homebridge ser√° iniciado na inicializa√ß√£o do sistema. <br><br><h3>  Apertamos o sensor DHT22 (temperatura / umidade) </h3><br>  Um leitor atento notou que existem 5 pinos no pente e um deles √© o GPIO 14. Novamente, pegamos o ferro de soldar em nossas m√£os e soldamos os tr√™s fios a 3,3V, GND, GPIO 14 para o sensor de temperatura de umidade DHT22.  Voc√™ pode usar outro sensor (ds18b20, DHT 11 ou outro suportado pelo firmware), mas era DHT22 na minha caixa.  O sensor foi conectado atrav√©s de um conector, fixado na lateral do gabinete nativo.  Se necess√°rio, ser√° poss√≠vel conectar outro sensor sem bisturi e ferro de soldar. <br><br><img src="https://habrastorage.org/web/b68/643/a1f/b68643a1f956407286a799bb1b03d223.jpg"><br><br>  Na foto, acabei de consertar o conector, ainda n√£o conectei os fios.  No firmware Sonoff-MQTT-OTA-Arduino, voc√™ precisa verificar as configura√ß√µes: <br><br><pre> <code class="hljs lisp">#define DHT_PIN <span class="hljs-number"><span class="hljs-number">14</span></span> // GPIO <span class="hljs-number"><span class="hljs-number">14</span></span> = AM2301 (<span class="hljs-name"><span class="hljs-name">Sonoff_TH10A</span></span>(<span class="hljs-number"><span class="hljs-number">16</span></span>A), Sonoff SV) #define DHT_TYPE AM2301 // DHT module type (<span class="hljs-name"><span class="hljs-name">DHT11</span></span>, DHT21, DHT22, AM2301, AM2302 or AM2321)</code> </pre> <br>  Para o firmware Tasmota, o tipo de pino e sensor pode ser especificado nas configura√ß√µes da web. <br><br>  Se tudo estiver conectado e configurado corretamente, acessando a interface da web, veremos o status do rel√© e as leituras do sensor.  Nas configura√ß√µes, voc√™ pode definir a taxa de polling do sensor.  O padr√£o √© 300 segundos (5 minutos). <br><br><img src="https://habrastorage.org/web/3a2/4a3/3fb/3a24a33fbb3647979f69354039fb808c.png"><br><br>  Mergulhamos na busca de um plug-in para o Homebridge funcionar com um sensor de temperatura e umidade.  Agora precisamos exibir essas leituras no ap√™ndice.  Eu consegui fazer tudo isso, mas IMHO era o meu rake e n√£o deveria ser feito. <br><br>  Porque  Tudo √© muito simples, apenas parafusar o sensor no sonoff n√£o faz sentido; voc√™ precisa ativar / desativar algo com base nessas leituras.  Mas nas configura√ß√µes de firmware n√£o existe essa possibilidade, √© poss√≠vel configurar o aplicativo Home / HomeKit para tais fins, mas voc√™ precisa de um tablet que esteja constantemente em casa ou no Apple TV.  A presen√ßa no firmware da capacidade de se comunicar com o Domoticz me levou nesse caminho espinhoso para instalar o sistema de controle dom√©stico inteligente Domoticz. <br><br>  Na forma de uma pequena digress√£o, digamos, tentei conectar plug-ins ao homebridge que permitem transferir o fluxo RTSP de uma webcam.  Eu tenho uma c√¢mera IP TOP-201 dos meus colegas chineses. <br><br>  Instale o plugin: <br><br><pre> <code class="bash hljs">npm install -g --unsafe-perm homebridge-camera-ffmpeg</code> </pre> <br>  Adicione ao arquivo de configura√ß√µes: <br><br><div class="spoiler">  <b class="spoiler_title">config.json</b> <div class="spoiler_text"><pre> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">"platforms"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"Camera-ffmpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"cameras"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"top-201"</span></span>, <span class="hljs-string"><span class="hljs-string">"videoConfig"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"-re -i rtsp://admin@192.168.178.10:554/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp?real_stream"</span></span>, <span class="hljs-string"><span class="hljs-string">"maxStreams"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"maxWidth"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>, <span class="hljs-string"><span class="hljs-string">"maxHeight"</span></span>: <span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-string"><span class="hljs-string">"maxFPS"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> } } ]</code> </pre> <br></div></div><br>  Al√©m disso, uma foto da c√¢mera aparece no aplicativo HomeKit, mas tudo isso funcionou muito lentamente e n√£o havia necessidade dessa c√¢mera.  Para evitar o carregamento desnecess√°rio do sistema, exclu√≠ a c√¢mera IP.  Vamos voltar √† instala√ß√£o de um sistema para gerenciar uma casa ‚Äúsem uma casa inteligente‚Äù. <br><br><h3>  Instale e configure os m√≥dulos Domoticz for Sonoff </h3><br>  Putty ‚Üí ssh ‚Üí e novamente escolhemos a framboesa.  Surpreendentemente, a instala√ß√£o no meu caso n√£o exigiu dan√ßar com um pandeiro e foi o suficiente <br><br><pre> <code class="bash hljs">sudo curl -L install.domoticz.com | sudo bash</code> </pre><br>  Adicionar inicializa√ß√£o autom√°tica: <br><br><pre> <code class="bash hljs">sudo cp domoticz.sh /etc/init.d sudo chmod +x /etc/init.d/domoticz.sh sudo update-rc.d domoticz.sh defaults</code> </pre><br>  Se necess√°rio, altere algumas configura√ß√µes: <br><br><pre> <code class="bash hljs">sudo nano /etc/init.d/domoticz.sh</code> </pre> <br>  Abra o endere√ßo das framboesas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">192.168.xxx.xxx</a> : 8080.  E eles devem ir para a p√°gina de dom√≥tica.  Al√©m disso, a configura√ß√£o e adi√ß√£o de sensores j√° ocorre via web. <br><br><img src="https://habrastorage.org/web/130/93c/ab8/13093cab88b54ac498fbd15d17d4536a.png"><br>  <i>Os sensores Sonoff e um sensor de rua j√° foram adicionados √† captura de tela.</i> <br><br>  Para adicionar sensores / comutadores, v√° para Configura√ß√£o ‚Üí hardware e adicione Dummy (N√£o faz nada, use apenas para comutadores virtuais).  Nosso "Manequim" aparecer√° na lista de dispositivos.  Ao clicar nele em Criar sensor virtual, chame nosso sensor / interruptor e selecione o tipo necess√°rio na lista.  Agora, na guia Configura√ß√£o ‚Üí Dispositivos, um novo dispositivo ser√° exibido e agora voc√™ tamb√©m poder√° ver o ID do dispositivo l√°. <br><br>  Cortamos a face da Web do nosso switch / sensor e salvamos a configura√ß√£o ‚Üí domoticz ‚Üí idx do nosso switch.  No novo firmware Tasmota, √© poss√≠vel especificar v√°rios IDX.  Para rel√©s / interruptores e separadamente para GPIO.  Dependendo do m√≥dulo, este pode ser um sensor adicional ou mais, uma vez que a vers√£o SV exibe tr√™s pinos adicionais, aos quais pode ser atribu√≠da sua fun√ß√£o no sistema (rel√©s / sensores). <br><br>  No firmware antigo (Sonoff-MQTT-OTA-Arduino) do m√≥dulo, eu tive que fazer algumas dan√ßas com um pandeiro, para que o Domoticz pudesse ver as leituras de umidade e temperatura.  Eu acho que n√£o h√° nenhum ponto aqui para descrev√™-lo, para o novo firmware (Tasmota) n√£o √© necess√°rio. <br><br>  De acordo com as leituras de umidade, voc√™ pode controlar o exaustor no banheiro.  Onde existe um exaustor, h√° espa√ßo suficiente para o m√≥dulo e j√° temos tudo o que precisamos.  Resta apenas ajustar o controle para as leituras de umidade. <br><br>  Configura√ß√£o ‚Üí Mais op√ß√µes ‚Üí Eventos <br><br><img src="https://habrastorage.org/web/6ec/865/203/6ec865203b894f579e3fb3c1f0d62261.png"><br><br>  Usando o construtor, criamos a l√≥gica de opera√ß√£o do exaustor (como na figura).  Voc√™ ainda pode usar Lua, mas esse n√£o √© o meu caso.  Uma experi√™ncia adicional mostrou que 5 minutos de pesquisa no sensor s√£o muito grandes e eu o reduzi a 3 minutos.  Agora, tomando banho, quando a umidade sobe acima de 70%, o cap√¥ se liga.  Posteriormente, quando reduzido abaixo de 45%, ele desliga.  Dados de umidade selecionados experimentalmente.  O √∫nico aspecto negativo, ou talvez esse n√£o seja um sinal de menos, mas um recurso do sistema, se voc√™ for√ßar o exaustor a pressionar pressionando um bot√£o, depois de 3 minutos, ap√≥s interrogar o sensor de umidade, o sistema ser√° desligado. <br><br>  Mas e a Siri?  Acabou que tudo √© muito simples. <br><br><pre> <code class="bash hljs">sudo npm install -g -g --unsafe-perm homebridge-edomoticz</code> </pre><br>  E adicione √†s configura√ß√µes <br><br><pre> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre><br><pre> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://127.0.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"topic_prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"homebridge"</span></span>, <span class="hljs-string"><span class="hljs-string">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"bar"</span></span></code> </pre><br>  E quando voc√™ inicia o Homebridge, obtemos <br><br><pre> <code class="bash hljs">[5/8/2017, 11:42:30 PM] [eDomoticz] You have 10 devices defined <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Domoticz. [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">'bath-temp'</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">''</span></span>...</code> </pre><br>  Todos os dispositivos que adicionamos ao Domotics agora ser√£o exibidos entre nossos dispositivos no Homekit e voc√™ poder√° control√°-los atrav√©s de um amigo Siri.  A necessidade de outros plugins para o Homebridge desapareceu de alguma forma. <br><br>  Temos um monte de Domoticz-Homebridge e tudo funciona muito bem e de forma est√°vel.  J√° testado n√£o no primeiro m√™s. <br><br>  Um sensor de temperatura / umidade DHT22 de artesanato anterior √© preso ao Raspberry pi e os dados s√£o transmitidos para narodmon.ru com um script python a cada 10 minutos.  Adicione algumas linhas a um script existente. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#domoticz settings IP = '192.168..' #IP domoticz PORT = '8080' #port of server IDX_1 = '7' #IDX of the DHT temp sensor //‚Ä¶. ,        narodmon.ru url = 'http://{}:{}/json.htm?type=command¬∂m=udevice&amp;nvalue=0&amp;idx={}&amp;svalue={}'.format(IP, PORT, IDX_1, sensor_value_1) request = urllib2.Request(url) response = urllib2.urlopen(request)</span></span></code> </pre><br>  No Domoticz, adicionamos mais um sensor virtual.  E agora podemos ver adicionalmente a temperatura e a umidade na rua, pela Web, em nossa p√°gina local e no aplicativo iOS. <br><br>  Para quem mqtt est√° mais pr√≥ximo, as leituras do sensor podem ser enviadas via mqtt. <br><br><pre> <code class="python hljs"> playload = <span class="hljs-string"><span class="hljs-string">'{{ "idx": {} , "nvalue" : {}, "svalue" : "1" }}'</span></span>.format(IDX_1, humidity) client.publish(TOPIC_DOMOTICZ, playload, qos =<span class="hljs-number"><span class="hljs-number">0</span></span> , retain =<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-comment"><span class="hljs-comment">#publish</span></span></code> </pre><br><h2>  Adicione Wifi √† m√°quina de caf√©. </h2><br>  Enquanto minha m√°quina est√° em reparo e esperando a unidade de controle chegar da Alemanha, recebi uma m√°quina de caf√© Delonghi como presente.  No painel, temos um bot√£o liga / desliga, para fazer caf√© pequeno e duplo e mais dois que eu n√£o uso porque  N√£o bato leite no vapor, n√£o bebo caf√© com leite e outras bebidas.  A desvantagem √© que o caf√© n√£o se m√≥i, √© necess√°rio ench√™-lo com terra e uma x√≠cara. <br><br>  Para uma m√°quina de caf√©, eu uso o Sonoff SV.  Os pinos 3,3v, Rx, Tx, GND s√£o assinados.  Separadamente, o GPIO 4, 5, 14 ainda √© exibido no painel Firmware para o mesmo procedimento descrito acima. <br><br>  Abrimos o dispositivo e chegamos ao quadro com bot√µes. <br><br>  A placa possui energia de 5V, o que √© suficiente para alimentar nosso m√≥dulo sv sonoff sem fio.  N√£o foi dif√≠cil encontrar onde t√≠nhamos o 5c. <br><br>  Pressionar os bot√µes simplesmente reduz o sinal ao terra.  Conectamos nosso m√≥dulo de acordo com o esquema. <br><br><img src="https://habrastorage.org/web/a3c/559/ba5/a3c559ba5c1f48d6b552aaddaa448209.png"><br><br>  Como voc√™ pode ver no diagrama, conectei apenas dois bot√µes: ligar / desligar e fazer caf√©.  Por analogia, voc√™ pode criar todos os outros bot√µes.  No sonoff sv, temos 3 pinos de sa√≠da na placa, um rel√©, e voc√™ tamb√©m pode usar Rx, Tx (no firmware mais recente da Tasmota). <br><br><img src="https://habrastorage.org/web/a62/efb/5b0/a62efb5b0ea54284b0406b4f16595145.png"><br><br>  Coletamos tudo de acordo com o esquema, encontramos um local adequado dentro da m√°quina de caf√©.  Nas configura√ß√µes do m√≥dulo na interface da web, adicione um segundo rel√© ao GPIO5.  No menu "console", defina as seguintes configura√ß√µes: <br><br><pre> <code class="hljs ruby">PowerOnState <span class="hljs-number"><span class="hljs-number">0</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/   ,     . PulseTime1 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   0,1 ,      PulseTime2 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     1 . 1  2     .</span></span></code> </pre> <br>  Nas configura√ß√µes do Domotics, crie mais dois "sensores virtuais" e adicione seu idx √†s configura√ß√µes do m√≥dulo no menu Configura√ß√µes do Domotics (Configura√ß√£o ‚Üí Configurar Domoticz ‚Üí IDX 1 e IDX 2). <br><br>  Como resultado, temos mais dois interruptores, um dos quais pressiona o bot√£o liga / desliga da m√°quina de caf√© e o segundo pressiona o bot√£o para fazer caf√©. <br><br>  De qualquer maneira, para fazer caf√©, √© preciso andar com as pernas, mas √© preciso derramar caf√©.  Mas √© conveniente ligar a m√°quina.  A partir do momento em que voc√™ o liga e antes de fazer caf√©, √© necess√°rio algum tempo para aquecer a m√°quina.  Portanto, sentado enquanto trabalha na sala, voc√™ pode ligar remotamente a m√°quina de caf√© e depois de um tempo j√° bate as pernas e faz uma bebida. <br><br>  Ser√° mais √∫til em uma troca dessas em uma m√°quina totalmente autom√°tica em uma m√°quina de caf√©, basta lembrar de colocar a x√≠cara com anteced√™ncia.  Estamos aguardando o painel de controle. <br><br><h2>  Adicione wifi para abrir a porta com o interfone Vizit </h2><br>  No corredor comum, o vest√≠bulo pr√≥ximo ao elevador √© fechado por uma porta com uma fechadura magn√©tica e um sistema de acesso Vizit.  O sistema foi instalado ap√≥s o reparo e o bot√£o para abrir a porta do vest√≠bulo do apartamento n√£o foi mantido.  Para iniciar os convidados, voc√™ deve ir at√© a porta e abrir com o bot√£o para abrir a porta no corredor.  Unidade de controle KTM-602M. <br><br><img src="https://habrastorage.org/web/771/ea1/9ab/771ea19abd1144e4b95e39f8ffbe2c73.jpg"><br><br>  Fechar OP + GND abre a porta / desconecta o √≠m√£ por 7 segundos. <br><br>  Compartilhamos a fonte de alimenta√ß√£o do m√≥dulo sonoff sv e o rel√© removendo dois resistores, como mostrado abaixo na figura. <br><br><img src="https://habrastorage.org/web/c31/85f/644/c3185f6440db4066bf6cf3fd1336d4af.png"><br><br>  Conectamos o OP ao rel√© de entrada ‚Äúinput +‚Äù, na sa√≠da do rel√© ‚Äúoutput +‚Äù n√≥s apertamos GND.  Entre o ELC e o GND da unidade de controle de 18v a partir da qual fornecemos energia ao pr√≥prio m√≥dulo. <br><br>  Adicionamos a campainha da porta aos Domotiks e agora a Siri pode nos ajudar a abrir as portas para os h√≥spedes. <br><br>  O assistente Siri reconhece o comando de voz "Abra a porta", melhor do que "ligue a m√°quina de caf√©". <br><br>  Parei por a√≠ com a decora√ß√£o dos m√≥dulos sonoff. <br><br><h2>  B√¥nus pequeno </h2><br>  Quando a bebida acabar, tamb√©m ligar / desligar a TV.  Desligar e ligar a TV n√£o tem nada a ver com m√≥dulos wifi.  A TV est√° pr√≥xima do raspberry pi.  Aqui, um LED IR e um par de resist√™ncias de diferentes valores nominais nos ajudam.  Instalamos o lirc, nos bancos de dados encontramos as configura√ß√µes do seu controle remoto / TV. <br><br>  Para trabalhar com o Domotics, executamos um pequeno script python que traduz nossos desejos de ligar / desligar a TV do mqtt para o lirc. <br><br><div class="spoiler">  <b class="spoiler_title">mqtt em lirc</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> paho.mqtt.client <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mqtt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json IP = <span class="hljs-string"><span class="hljs-string">'192.168..'</span></span> PORT = <span class="hljs-string"><span class="hljs-string">'1883'</span></span> device = {<span class="hljs-number"><span class="hljs-number">18</span></span> : <span class="hljs-string"><span class="hljs-string">'OpenBox'</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span> : <span class="hljs-string"><span class="hljs-string">'PHILIPS'</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span> : <span class="hljs-string"><span class="hljs-string">'air'</span></span>} TOPIC_DOMOTICZ = <span class="hljs-string"><span class="hljs-string">'domoticz/in'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(device, command)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># """ Sends IR-signal to the device """ os.system("irsend SEND_ONCE '" + device + "' '" + command + "'") # The callback for when the client receives a CONNACK response from the server. def on_connect(client, userdata, flags, rc): print("Connected with result code "+str(rc)) # Subscribing in on_connect() means that if we lose the connection and # reconnect then subscriptions will be renewed. client.subscribe(TOPIC_DOMOTICZ,0) def on_publish(client,userdata,result): #create function for callback print("data published \n") pass # The callback for when a PUBLISH message is received from the server. def on_message(client, userdata, msg): domoticz = json.loads(msg.payload) if domoticz ['idx'] in device.keys(): idx = domoticz ['idx'] dev = device [idx] command = 'KEY_POWER' send (dev, command) client = mqtt.Client() client.on_connect = on_connect client.on_message = on_message client.on_publish = on_publish client.connect(IP, PORT, 60) client.loop_forever()</span></span></code> </pre> <br></div></div><br>  Adicionamos ao Domoticz mais tr√™s bot√µes virtuais para a TV, o receptor e o ar condicionado. <br>  N√£o √© conveniente controlar a TV pelo telefone, de qualquer forma, o controle remoto √© de alguma forma parecido.  Mas desligue a TV quando eu esqueci e j√° sai da sala um b√¥nus agrad√°vel. <br><br>  Uma boa adi√ß√£o a tudo isso √© a disponibilidade para o rel√≥gio Pebble do aplicativo Pemoticz.  Adicionado o endere√ßo nas configura√ß√µes e o aplicativo puxou todos os comutadores.  Agora, nem um √∫nico Siri pode ligar a m√°quina de caf√© / abrir as portas e desligar as luzes.  O rel√≥gio geralmente est√° √† m√£o e o telefone pode n√£o estar muito pr√≥ximo.  Isso tamb√©m tem suas vantagens.  Eu n√£o lidei com o t√≥pico de reconhecimento de fala por horas piscando, mas isso tamb√©m √© poss√≠vel. <br><br><img src="https://habrastorage.org/web/651/e3d/d81/651e3dd81b654be3b0fc324f44dc8b9e.png"><br><br>  Nisto, talvez, voc√™ possa terminar a hist√≥ria "sem uma casa inteligente". <br><br><h2>  Conclus√£o </h2><br>  Na forma de uma conclus√£o, e depois o que? <br><br>  Lista de tarefas: <br><br>  - Ar condicionado, n√£o foi poss√≠vel encontrar as configura√ß√µes do controle remoto para lirc e as primeiras tentativas de copiar cliques tamb√©m n√£o levaram ao sucesso.  Serrar ainda mais. <br>  - Estamos aguardando um pedido da empresa chinesa Mi c gateway e de v√°rios sensores.  Os sensores de abertura de porta por meio de manipula√ß√µes complicadas se transformam em sensores de vazamento.  Adicionaremos ao nosso sistema.  Quando acionados, os sensores enviar√£o notifica√ß√µes ao propriet√°rio. <br>  "Os pensamentos terminam a√≠ ..." <br><br><h3>  Fontes utilizadas </h3><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Executando o HomeBridge em um Raspberry Pi</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sonoff-Tasmota Wiki</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instala√ß√£o do Domoticz em um Pi j√° em execu√ß√£o</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como fazer: adicione Wi-Fi √† sua m√°quina de caf√©</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt403869/">https://habr.com/ru/post/pt403869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt403855/index.html">Ap√≥s 11.500 acidentes, um quadrocopter da IA ‚Äã‚Äãaprendeu a voar dentro de casa</a></li>
<li><a href="../pt403857/index.html">A Oticon introduziu a tecnologia de condu√ß√£o √≥ssea n√£o implant√°vel para crian√ßas</a></li>
<li><a href="../pt403861/index.html">Algo errado est√° acontecendo com o Masterhost</a></li>
<li><a href="../pt403865/index.html">L√¢mpadas LED Auchan</a></li>
<li><a href="../pt403867/index.html">Liberdade de informa√ß√£o</a></li>
<li><a href="../pt403871/index.html">BBC Micro - o computador que venceu o ZX Spectrum</a></li>
<li><a href="../pt403873/index.html">Bateria solar na varanda: teste de bateria e BMS</a></li>
<li><a href="../pt403875/index.html">Rel√≥gios inteligentes e redes neurais detectam fibrila√ß√£o atrial com uma precis√£o de 97%</a></li>
<li><a href="../pt403877/index.html">O foguete superpesado da NASA aumentar√° de pre√ßo em pelo menos US $ 500 milh√µes e seu lan√ßamento ser√° adiado por mais um ano</a></li>
<li><a href="../pt403881/index.html">O foguete mais maravilhoso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>