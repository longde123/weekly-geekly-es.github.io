<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¾â€ğŸ­ â¹ï¸ â˜£ï¸ Ù†Ù‚ÙˆÙ… Ø¨ØªÙˆØµÙŠÙ„ Ø£ÙŠ Ø¬Ù‡Ø§Ø² ØªØ¹Ù‚Ø¨ GPS (ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§) (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Sinotrack ST-901 ÙƒÙ…Ø«Ø§Ù„) Ø¨Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ø°ÙƒÙŠ HomeAssistant ğŸ« ğŸ”‡ ğŸ‘¨ğŸ¾â€ğŸ”¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù…Ù‚Ø¯Ù…Ø© 
 Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø§ Ø³Ù‚Ø· Ø¬Ù‡Ø§Ø² ØªØ¹Ù‚Ø¨ GPS Ø§Ù„ØµÙŠÙ†ÙŠ ST-901 ÙÙŠ ÙŠØ¯ÙŠ. ØªÙ… ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ø±Ø§Ø¬Ø§Øª Ø§Ù„Ù†Ø§Ø±ÙŠØ© ØŒ ÙˆÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙˆØ­...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ù†Ù‚ÙˆÙ… Ø¨ØªÙˆØµÙŠÙ„ Ø£ÙŠ Ø¬Ù‡Ø§Ø² ØªØ¹Ù‚Ø¨ GPS (ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§) (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Sinotrack ST-901 ÙƒÙ…Ø«Ø§Ù„) Ø¨Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ø°ÙƒÙŠ HomeAssistant</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414509/" style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  Ù…Ù‚Ø¯Ù…Ø© </h3><br>  Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø§ Ø³Ù‚Ø· Ø¬Ù‡Ø§Ø² ØªØ¹Ù‚Ø¨ GPS Ø§Ù„ØµÙŠÙ†ÙŠ ST-901 ÙÙŠ ÙŠØ¯ÙŠ.  ØªÙ… ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ø±Ø§Ø¬Ø§Øª Ø§Ù„Ù†Ø§Ø±ÙŠØ© ØŒ ÙˆÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙˆØ­Ø¯Ø© gsm 2G Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ ØŒ ÙˆØ­Ø§ÙØ¸Ø© Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ù…Ø§Ø¡ Ù…Ø®ØªÙˆÙ…Ø© ØŒ ÙˆØ¨Ø·Ø§Ø±ÙŠØ© ØµØºÙŠØ±Ø© Ù…Ø¯Ù…Ø¬Ø© ØªØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¹Ù…Ù„ Ù„Ù…Ø¯Ø© 2-3 Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø·Ø§Ù‚Ø© Ø®Ø§Ø±Ø¬ÙŠØ© Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø§Ø±Ø© ÙƒÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚ ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ù„Ùƒ Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø§Ù„ØªØ­Ø°ÙŠØ± Ù…Ù† Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ.  ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØªØ¨Ø¹ Ø¹Ø¨Ø± Ø£ÙˆØ§Ù…Ø± SMS Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ØªØªØ¨Ø¹ ØŒ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ ÙˆØªÙ„Ù‚ÙŠ Ø§Ù„Ø¥Ø®Ø·Ø§Ø±Ø§Øª Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚ØµÙŠØ±Ø© ÙˆØªÙˆØµÙŠÙ„Ù‡ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø¹Ø¨Ø± GPRS.  Ø¨Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø¹Ù‡ Ù„ÙØªØ±Ø© Ù…Ù† Ø§Ù„ÙˆÙ‚Øª ØŒ Ø±Ù…ÙŠØªÙ‡ ÙÙŠ Ø¯Ø±Ø¬ Ø­ØªÙ‰ Ø¸Ù‡Ø± HomeAssistant ÙÙŠ Ø§Ù„Ù…Ù†Ø²Ù„.  ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ ÙÙƒØ±Ø© Ù„Ø±Ø¨Ø·Ù‡ Ø¨Ù…Ù†Ø²Ù„ Ø°ÙƒÙŠ. <br><br><h3 style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ù‡Ø§Ù… </h3><br>  Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…ØªØªØ¨Ø¹ Ø¨Ù€ HomeAssistant ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø­Ù„ Ù…Ø´ÙƒÙ„ØªÙŠÙ†: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù…ØªØªØ¨Ø¹ ÙˆÙƒØªØ§Ø¨ØªÙ‡Ø§ ÙÙŠ HomeAssistant.  Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø¹Ø¯Ø© Ø­Ù„ÙˆÙ„ Ù…Ù…ÙƒÙ†Ø© Ù„Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">gpslogger</a> Ø£Ùˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://www.home-assistant.io/components/device_tracker.owntracks_">owntracks_http</a> ) ØŒ ÙØ¥Ù† Ø­Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙŠ Ø­Ø§Ù„ØªÙŠ ÙƒØ§Ù† Ù…Ø¹Ù‚Ø¯Ù‹Ø§ Ù„Ø£Ù†Ù‡ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØªØ¨Ø¹ Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø¹Ù†ÙˆØ§Ù† IP ÙÙ‚Ø· ØŒ ÙˆÙ„ÙŠØ³ Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ø§Ù„.  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø¹Ø¯Ù… Ø§Ù…ØªÙ„Ø§Ùƒ Ø¹Ù†ÙˆØ§Ù† Ø«Ø§Ø¨Øª ÙÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ ØŒ Ù†Ø´Ø£Øª ÙÙƒØ±Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ³ÙŠØ·.  <b>Ø£Ù„Ø§Ø­Ø¸ Ø£Ù†Ù‡ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØµÙŠÙ„ Ø£ÙŠ Ø¬Ù‡Ø§Ø² ØªØ¹Ù‚Ø¨ GPS ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ (ÙˆÙ„ÙŠØ³ ÙÙ‚Ø· ÙÙŠ Ù…Ù‚Ø§Ù„ØªÙŠ) ØŒ Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„ÙˆØ³ÙŠØ·</b> .  ÙƒÙ„ Ù…Ù† ÙŠÙ‡ØªÙ… Ø¨Ù…Ø§ Ø¬Ø§Ø¡ Ø¨Ù‡ ØŒ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù‚Ø·. <br><a name="habracut"></a><br><br><h3 style=";text-align:right;direction:rtl">  ÙÙƒØ±Ø© </h3><br>  ÙƒÙ…Ø§ Ù‚Ù„Øª Ø£Ø¹Ù„Ø§Ù‡ ØŒ ÙŠÙ…ÙƒÙ† ØªÙˆØµÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØªØ¨Ø¹ Ø¨Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©.  ÙŠØªÙŠØ­ Ù„Ùƒ Ø¨Ø¹Ø¶Ù‡Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ø¬Ø§Ù†Ù‹Ø§.  ØªØ­ØªÙˆÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙƒØ§Ù…Ù„Ø© Ù„Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹Ù‡Ø§ ØŒ Ù„ÙƒÙ†ÙŠ Ù„Ù… Ø£Ø¬Ø¯ Ù…Ø«Ù„ Ù‡Ø°Ù‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©.  ÙˆÙ„ÙƒÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ØªÙˆÙØ± Ø®Ø¯Ù…Ø© "Ù…Ø´Ø§Ø±ÙƒØ©" Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªØªØ¨Ø¹ Ø¹Ø¨Ø± Ø±Ø§Ø¨Ø· Ø¯Ø§Ø¦Ù….  Ø¨Ø¹Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„ØªÙØªÙŠØ´ ÙÙŠ Ø´ÙØ±Ø© Ø§Ù„Ù…ØµØ¯Ø± Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© ØŒ ÙˆØ¬Ø¯Øª Ù…Ø§ ÙƒÙ†Øª Ø£Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø®Ø¯Ù…Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">livegpstracks</a> : Ø·Ù„Ø¨ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª.  ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ØŒ ÙØ¥Ù† Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„ØªØ§Ù„ÙŠ: ÙŠØªØµÙ„ Ø§Ù„Ù…ØªØ¹Ù‚Ø¨ Ø¨Ø®Ø¯Ù…Ø© livegpstracks ÙˆÙŠÙ†Ù‚Ù„ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§ØªÙ‡Ø§ ØŒ ÙˆÙŠÙ‚ÙˆÙ… HomeAssistant Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ Ø¨Ø·Ù„Ø¨ http Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆÙŠØªÙ„Ù‚Ù‰ Ø¢Ø®Ø± Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ØŒ ÙˆØ§Ù„ØªÙŠ ØªØªÙ… ÙƒØªØ§Ø¨ØªÙ‡Ø§ Ø¥Ù„Ù‰ HomeAssistant Ø¨ÙˆØ§Ø³Ø·Ø© Ø·Ù„Ø¨ http Ø¢Ø®Ø±.  Ù‡Ù†Ø§ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø±Ø§Ø¨Ø·</a> Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØªØ¨Ø¹Ø§Øª Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø©. <br><br><h3 style=";text-align:right;direction:rtl">  Ø§Ù„ØªÙ†ÙÙŠØ° </h3><br>  <b>1. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨</b> <br><br>  Ù†Ø­Ù† Ù†Ø³Ø¬Ù„ ÙÙŠ Ø®Ø¯Ù…Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">livegpstracks ÙˆÙ†Ù‚ÙˆÙ…</a> Ø¨ØªÙˆØµÙŠÙ„ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ (ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù…Ø®ØªÙ„Ù Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª).  Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ ØŒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØŒ Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø±ØªØ¨Ø§Ø· Ø®Ø§Øµ Ù„Ù„ØªØªØ¨Ø¹.  ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒÙ„: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">https://livegpstracks.com/dv_USERID.html</code> </pre> <br>  Ø­ÙŠØ« USERID Ù‡Ùˆ Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„ÙƒØ±Ø§ØªÙƒ. <br><br>  Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡.  ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª.  Ù„ÙƒÙŠ Ù„Ø§ ØªØ¹Ø°Ø¨Ùƒ Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø© ØŒ Ø³Ø£Ù‚Ø¯Ù… ÙÙ‚Ø· ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø·Ù„Ø¨: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">https://livegpstracks.com/viewer_coos_s.php?username=USER&amp;ctp=one&amp;code=USERID&amp;tgst=site&amp;tgsv=12&amp;tkv11=TIMENOWMS</code> </pre> <br>  Ù‡Ù†Ø§ USER Ù‡Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨ØªØ³Ø¬ÙŠÙ„Ù‡ ÙÙŠ Ø®Ø¯Ù…Ø© livegpstracks ØŒ USERID Ù‡Ùˆ Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙŠ ØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡ Ù„Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø§Ù„Ù…Ø´ØªØ±Ùƒ ØŒ TIMENOWMS Ù‡Ùˆ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© (ÙˆÙ‚Øª unix). <br><br>  Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© Ù‡ÙŠ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">[{<span class="hljs-attr"><span class="hljs-attr">"code"</span></span>:<span class="hljs-string"><span class="hljs-string">"xxx"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"xxx"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>:<span class="hljs-string"><span class="hljs-string">"44"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>:<span class="hljs-string"><span class="hljs-string">"48"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"speed"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"azimuth"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"d"</span></span>:<span class="hljs-string"><span class="hljs-string">"2018-06-19"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"t"</span></span>:<span class="hljs-string"><span class="hljs-string">"09:35:17"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"altitude"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"battery"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"gpsaccuracy"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>}]</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ù…Øª Ø¨ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù†Ø§ØªØ¬ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ± ØŒ ÙˆÙ‚Ù…Øª Ø£ÙŠØ¶Ù‹Ø§ Ø¨ØªØºÙŠÙŠØ± Ø±Ù…Ø² Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª ØŒ id ØŒ lat ØŒ lng. </blockquote><br>  ØªØ¨Ø¯Ùˆ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙÙŠ Ø§Ù„Ø«Ø¹Ø¨Ø§Ù† ÙƒÙ…Ø§ ÙŠÙ„ÙŠ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInfoFrom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> timenow = int(datetime.now().strftime(<span class="hljs-string"><span class="hljs-string">"%s"</span></span>)) * <span class="hljs-number"><span class="hljs-number">1000</span></span> response = requests.get(<span class="hljs-string"><span class="hljs-string">'https://livegpstracks.com/viewer_coos_s.php'</span></span>, params={<span class="hljs-string"><span class="hljs-string">'username'</span></span>: self._user, <span class="hljs-string"><span class="hljs-string">'ctp'</span></span>: <span class="hljs-string"><span class="hljs-string">'one'</span></span>, <span class="hljs-string"><span class="hljs-string">'code'</span></span>: self._myid, <span class="hljs-string"><span class="hljs-string">'tgst'</span></span>: <span class="hljs-string"><span class="hljs-string">'site'</span></span>, <span class="hljs-string"><span class="hljs-string">'tgsv'</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">'tkv11'</span></span>: timenow}) data = response.json() self._lat = data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"lat"</span></span>] self._lon = data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"lng"</span></span>] self._speed = data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"speed"</span></span>] self._direction = data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"azimuth"</span></span>] self._last_time_rcv = data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"d"</span></span>] + <span class="hljs-string"><span class="hljs-string">' '</span></span> + data[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">"t"</span></span>]</code> </pre> <br>  Ø£Ø¹ØªÙ‚Ø¯ Ø£Ù†Ùƒ Ù„Ø³Øª Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø´Ø±Ø­ Ø£ÙŠ Ø´ÙŠØ¡ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø²: Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ ØŒ ÙˆÙ†Ø·Ù„Ø¨ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØŒ ÙˆÙ†Ø³ØªØ¬ÙŠØ¨ json ØŒ ÙˆÙ†Ø­Ù„Ù„Ù‡ ÙˆÙ†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ®Ø· Ø§Ù„Ø·ÙˆÙ„ ÙˆØ§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ Ø§Ø³ØªÙ„Ù… ÙÙŠÙ‡ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª. <br><br>  <b>2. Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</b> <br><br>  Ù„Ù„ØªØ³Ø¬ÙŠÙ„ ØŒ Ø§Ø³ØªØ®Ø¯Ù…Øª ÙˆØ­Ø¯Ø© GPSLogger Ù„Ù€ HomeAssistant ØŒ Ù„Ø£Ù†Ù‡Ø§ ØªØ¹Ù…Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø·Ù„Ø¨ http ÙˆØªØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù…Ù†ÙØµÙ„Ø© ØŒ ØªØ®ØªÙ„Ù Ø¹Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù€ HA Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.  ØªÙˆØ¶Ø­ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">gpslogger</a> ) Ø£Ù† Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù‡ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ù„ÙŠ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">https://HAADRESS:HAPORT/api/gpslogger?latitude=LAT&amp;longitude=LON&amp;device=DEV&amp;accuracy=ACC&amp;speed=SPD&amp;direction=DIR&amp;api_password=PASS</code> </pre> <br>  Ù‡Ù†Ø§ HAADRESS Ù‡Ùˆ Ø¹Ù†ÙˆØ§Ù† IP Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø®Ø§Ø¯Ù… Ù…Ø¹ HA ØŒ HAPORT Ù‡Ùˆ Ù…Ù†ÙØ° Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ LAT Ù‡Ùˆ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ ØŒ LON Ù‡Ùˆ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ ØŒ DEV Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡ ÙÙŠ HA ØŒ ACC Ù‡ÙŠ Ø¯Ù‚Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª (Ù„Ø³Ø¨Ø¨ Ù…Ø§ Ù„Ø§ ÙŠØ¹Ù…Ù„ ÙÙŠ HA ØŒ ÙØ¥Ù†Ù‡ ÙŠØ¹Ø·ÙŠ Ø®Ø·Ø£ ØŒ I Ù„Ù… ØªØ³ØªØ®Ø¯Ù…Ù‡) ØŒ SPD - Ø§Ù„Ø³Ø±Ø¹Ø© ØŒ DIR - Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© ØŒ PASS - ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª <br><br>  ØªØ¨Ø¯Ùˆ Ø·Ø±ÙŠÙ‚Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙÙŠ python ÙƒÙ…Ø§ ÙŠÙ„ÙŠ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putInfoTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self._lat != <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self._lon != <span class="hljs-string"><span class="hljs-string">''</span></span>: req_str = self._haddr+<span class="hljs-string"><span class="hljs-string">'/api/gpslogger'</span></span> response = requests.get(req_str, params={<span class="hljs-string"><span class="hljs-string">'latitude'</span></span>: self._lat, <span class="hljs-string"><span class="hljs-string">'longitude'</span></span>: self._lon, <span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-string"><span class="hljs-string">'speed'</span></span>: self._speed, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>: self._direction, <span class="hljs-string"><span class="hljs-string">'device'</span></span>: self._name, <span class="hljs-string"><span class="hljs-string">' api_password'</span></span>: self._pwd}) self._last_time_upd = time.strftime(<span class="hljs-string"><span class="hljs-string">"%Y.%m.%d %H:%M"</span></span>)</code> </pre> <br>  Ø£Ø¹ØªÙ‚Ø¯ Ù‡Ù†Ø§ Ø£ÙŠØ¶Ø§ Ø£Ù† Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠØ©. <br><br>  <b>3. Ø§Ù„ÙˆØ­Ø¯Ø©</b> <br><br>  ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„ÙˆØ­Ø¯Ø© Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙˆØªØ³Ø¬ÙŠÙ„Ù‡Ø§. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/local/bin/python3 # coding: utf-8 import time import requests import json import logging from datetime import datetime from datetime import timedelta import voluptuous as vol import homeassistant.helpers.config_validation as cv from homeassistant.components.sensor import PLATFORM_SCHEMA from homeassistant.const import (CONF_NAME) from homeassistant.helpers.entity import Entity _LOGGER = logging.getLogger(__name__) CONF_USER = 'user' CONF_ID = 'myid' CONF_PWD = 'pwd' CONF_SITE = 'haddr' ATTR_LAT = '' ATTR_LON = '' ATTR_SPEED = '' DEFAULT_NAME = 'GPS_Sensor' SCAN_INTERVAL = timedelta(seconds=120) PLATFORM_SCHEMA = PLATFORM_SCHEMA.extend({ vol.Required(CONF_USER): cv.string, vol.Required(CONF_ID): cv.string, vol.Required(CONF_PWD): cv.string, vol.Required(CONF_SITE): cv.string, vol.Optional(CONF_NAME, default=DEFAULT_NAME): cv.string, }) def setup_platform(hass, config, add_devices, discovery_info=None): user = config.get(CONF_USER) name = config.get(CONF_NAME) pwd = config.get(CONF_PWD) myid = config.get(CONF_ID) haddr = config.get(CONF_SITE) add_devices([CarGPS(name, user, myid, haddr, pwd)]) class CarGPS(Entity): def __init__(self, name, user, myid, haddr, pwd): self._name = name self._user = user self._myid = myid self._haddr = haddr self._pwd = pwd self._lat = '' self._lon = '' self._speed = '0' self._direction = '0' self._last_time_rcv = '' self._last_time_upd = '' def getInfoFrom(self): try: today = int(datetime.now().strftime("%s")) * 1000 response = requests.get('https://livegpstracks.com/viewer_coos_s.php', params={'username': self._user, 'ctp': 'one', 'code': self._myid, 'tgst': 'site', 'tgsv': 12, 'tkv11': today}) data = response.json() self._lat = data[0]["lat"] self._lon = data[0]["lng"] self._speed = data[0]["speed"] self._direction = data[0]["azimuth"] self._last_time_rcv = data[0]["d"] + ' ' + data[0]["t"] except: _LOGGER.error('coudnt get parameters') def putInfoTo(self): if self._lat != '' and self._lon != '': try: req_str = self._haddr+'/api/gpslogger' response = requests.get(req_str, params={'latitude': self._lat, 'longitude': self._lon, 'accuracy': 30, 'speed': self._speed, 'direction': self._direction, 'device': self._name, ' api_password': self._pwd}) _LOGGER.info(response) self._last_time_upd = time.strftime("%Y.%m.%d %H:%M") except: _LOGGER.error('coudnt put parameters') #for HASS @property def name(self): return self._name @property def state(self): return self._last_time_upd def update(self): self.getInfoFrom() self.putInfoTo() @property def device_state_attributes(self): attr = {} attr[ATTR_LAT] = self._lat attr[ATTR_LON] = self._lon attr[ATTR_SPEED] = self._speed return attr</span></span></code> </pre> <br></div></div><br>  Ù„ØªÙˆØµÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ­Ø¯Ø© ØŒ ÙŠØ¬Ø¨ Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ Ø¯Ù„ÙŠÙ„ "config_folder_homeassistant / custom_components / sensor / car_location.py" ØŒ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„ØªÙƒÙˆÙŠÙ†: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">device_tracker: - platform: gpslogger password: !secret gpslogger_password sensor: - platform: car_location name: car_sensor user: USER myid: USERID haddr: YOUR_HA_ADDRESS pwd: !secret gpslogger_password</code> </pre> <br>  Ø¥Ù„ÙŠÙƒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù…Ù† Ù‚Ø³Ù… "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨". <br><br>  ØªØ¹Ù…Ù„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ­Ø¯Ø© ÙÙŠ HA Ù…Ù†Ø° Ø£ÙƒØ«Ø± Ù…Ù† Ø´Ù‡Ø± Ø¯ÙˆÙ† Ø£ÙŠ ÙØ´Ù„ Ø£Ùˆ Ù…Ø´Ø§ÙƒÙ„ Ø£Ø®Ø±Ù‰. <br><br>  Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡ ØŒ Ø´ÙƒØ±Ø§ Ù„Ø§Ù‡ØªÙ…Ø§Ù…ÙƒÙ…. <br><br>  <b>ØªØ­Ø¯ÙŠØ«:</b> <br>  Ù‚Ø§Ù… HomeAssistant Ø¨ØªØ­Ø¯ÙŠØ« Ù…ÙƒÙˆÙ† GPSLogger ØŒ ÙˆØ§Ù„Ø°ÙŠ ØªÙ… Ø¨Ù…ÙˆØ¬Ø¨Ù‡ Ø¥ØµØ¯Ø§Ø± Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">device_tracker: - platform: gpslogger sensor: - platform: car_location name: car_sensor user: USER myid: USERID haddr: YOUR_HA_ADDRESS_WEBHOOK</code> </pre><br>  YOUR_HA_ADDRESS_WEBHOOK - Ø¹Ù†ÙˆØ§Ù† Ù…Ø¯ÙˆÙ†Ø© Ø§Ù„ÙˆÙŠØ¨ Ù„Ù€ GPSLogger ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„ - Ù‚Ø³Ù… GPSLogger. <br></div></div><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/local/bin/python3 # coding: utf-8 import time import requests import json import logging from datetime import datetime from datetime import timedelta import voluptuous as vol import homeassistant.helpers.config_validation as cv from homeassistant.components.sensor import PLATFORM_SCHEMA from homeassistant.const import (CONF_NAME) from homeassistant.helpers.entity import Entity _LOGGER = logging.getLogger(__name__) CONF_USER = 'user' CONF_ID = 'myid' CONF_SITE = 'haddr' CONF_NAME = 'name' ATTR_LAT = '' ATTR_LON = '' ATTR_SPEED = '' ATTR_DATE = '' DEFAULT_NAME = 'GPS_Sensor' SCAN_INTERVAL = timedelta(seconds=120) PLATFORM_SCHEMA = PLATFORM_SCHEMA.extend({ vol.Required(CONF_USER): cv.string, vol.Required(CONF_ID): cv.string, vol.Required(CONF_SITE): cv.string, vol.Optional(CONF_NAME, default=DEFAULT_NAME): cv.string, }) def setup_platform(hass, config, add_devices, discovery_info=None): user = config.get(CONF_USER) name = config.get(CONF_NAME) myid = config.get(CONF_ID) haddr = config.get(CONF_SITE) add_devices([CarGPS(name, user, myid, haddr)]) class CarGPS(Entity): def __init__(self, name, user, myid, haddr): self._name = name self._user = user self._myid = myid self._haddr = haddr self._lat = '' self._lon = '' self._speed = '0' self._direction = '0' self._last_time_rcv = '' self._last_time_upd = '' def getInfoFrom(self): try: today = int(datetime.now().strftime("%s")) * 1000 response = requests.get('https://livegpstracks.com/viewer_coos_s.php', params={'username': self._user, 'ctp': 'one', 'code': self._myid, 'tgst': 'site', 'tgsv': 12, 'tkv11': today}) data = response.json() self._lat = str(data[0]["lat"]) self._lon = str(data[0]["lng"]) self._speed = str(data[0]["speed"]) self._direction = str(data[0]["azimuth"]) self._last_time_rcv = data[0]["d"] + ' ' + data[0]["t"] except: _LOGGER.error('coudnt get parameters') def putInfoTo(self): if self._lat != '' and self._lon != '': try: header = {'Content-Type': 'application/x-www-form-urlencoded'} body = 'latitude=' + self._lat + '&amp;longitude=' + self._lon + '&amp;device=' + self._name + '&amp;accuracy=30&amp;battery=100&amp;speed=' + self._speed + '&amp;direction=' + self._direction + '&amp;altitude=0&amp;provider=0&amp;activity=0' response = requests.post(self._haddr, headers=header, data=body) self._last_time_upd = time.strftime("%Y.%m.%d %H:%M") except: _LOGGER.error('coudnt put parameters') #for HASS @property def name(self): return self._name @property def state(self): return self._last_time_upd def update(self): self.getInfoFrom() self.putInfoTo() @property def device_state_attributes(self): attr = {} attr[ATTR_LAT] = self._lat attr[ATTR_LON] = self._lon attr[ATTR_SPEED] = self._speed attr[ATTR_DATE] = self._last_time_rcv return attr</span></span></code> </pre><br></div></div><br><br>  <b>UPD2:</b> <br>  Ù‚Ø§Ù… HomeAssistant Ø¨ØªØ­Ø¯ÙŠØ« Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ù…Ù„ Ù…Ù† Ø§Ù„Ø¥ØµØ¯Ø§Ø± 0.88 ØŒ ÙÙŠÙ…Ø§ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ù† mod: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">sensor</a> <br><br>  <b>UPD3:</b> <br>  Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªÙƒØ§Ù…Ù„.  Ø§Ù†ØªÙ‚Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¬ÙŠØ«Ø¨</a> .  Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ù†Ø§Ùƒ. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar414509/">https://habr.com/ru/post/ar414509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar414499/index.html">ØªÙ‚Ø±ÙŠØ± Ù†Ø§Ø¯ÙŠ Ø±ÙˆÙ…Ø§ 2018 ØŒ Ø§Ù„ÙØµÙ„ 1.1.3: "Ø¹Ø§Ù„Ù… Ø®Ø§Ù„Ù Ù…Ù‚Ø§Ø¨Ù„ Ø³Ù„Ø§Ù… ÙƒØ§Ù…Ù„"</a></li>
<li><a href="../ar414501/index.html">ØªÙ‚Ø±ÙŠØ± Ù†Ø§Ø¯ÙŠ Ø±ÙˆÙ…Ø§ 2018 ØŒ Ø§Ù„ÙØµÙ„ 3.11: "Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ù…Ø§Ù„ÙŠ"</a></li>
<li><a href="../ar414503/index.html">Intel NUC Hades Canyon Ù…Ø¹ AMD Vega Graphics - VR or Not VRØŸ</a></li>
<li><a href="../ar414505/index.html">Ø¯ÙˆØ±Ø© Ù…Ø¹Ù‡Ø¯ Ù…Ø§Ø³Ø§ØªØ´ÙˆØ³ØªØ³ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ "Ø£Ù…Ù† Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±". Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© 2: "Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ù‚Ø±Ø§ØµÙ†Ø©" ØŒ Ø§Ù„Ø¬Ø²Ø¡ 1</a></li>
<li><a href="../ar414507/index.html">ÙƒÙŠÙ ØªØºÙŠØ±Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ù‹Ø§ Ù„Ù„ØªØ¯Ø§ÙˆÙ„: Ù‚ØµØ© Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Bloomberg</a></li>
<li><a href="../ar414513/index.html">27 Ø£Ø¯Ø§Ø© Ø±Ø§Ø¦Ø¹Ø© Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±</a></li>
<li><a href="../ar414515/index.html">Ø¯Ø±Ø³ ØªØ­Ø³ÙŠÙ† Ø®Ø§Ø¯Ù… ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„ÙˆÙŠØ¨</a></li>
<li><a href="../ar414517/index.html">Ø¹Ù„Ù…Ø§Ø¡ Ø£ÙƒØ³ÙÙˆØ±Ø¯: Ø§Ø­ØªÙ…Ø§Ù„ Ø£Ù† Ù†ÙƒÙˆÙ† ÙˆØ­Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…Ù†Ø¸ÙˆØ± Ù…Ù† Ø§Ù„ÙƒÙˆÙ† Ø£Ø¹Ù„Ù‰ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ØµÙØ±</a></li>
<li><a href="../ar414519/index.html">ÙƒÙŠÙÙŠØ© ØªØ­ÙˆÙŠÙ„ 15 Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ù† Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø³ÙƒØ±ÙˆÙ… Ø¥Ù„Ù‰ Ù…Ù†Ø²Ù„ ÙƒØ§Ù…Ù„ØŸ</a></li>
<li><a href="../ar414523/index.html">Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† Ø·Ø§Ø¦Ø±Ø§Øª ÙƒÙˆØ§Ø¯ÙƒÙˆØ¨ØªØ± DJI Mavic Pro Ùˆ Mavic Air</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>