<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äç‚öñÔ∏è üë©üèæ‚Äçüöí üçü Derrotamos al m√≥dulo GPRS de Amperka üö¶ üê® ü§§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antes de que pudi√©ramos derrotar al bus CAN , tuvimos que derrotar a la siguiente pieza de hardware, a saber, el m√≥dulo GPRS. Esta es su vida como des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Derrotamos al m√≥dulo GPRS de Amperka</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401721/"><img src="https://habrastorage.org/files/f8d/d05/ce9/f8dd05ce94d24dc283d1abcbffdb5906.jpg" alt="imagen"><br>  Antes de que pudi√©ramos derrotar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">al bus CAN</a> , tuvimos que derrotar a la siguiente pieza de hardware, a saber, el m√≥dulo GPRS.  Esta es su vida como desarrolladora: todo el tiempo tiene que ganar a alguien (deber√≠a haber una sonrisa prohibida). <br><br>  Para uno de los proyectos personalizados, necesitaba agregar la capacidad de controlar y recibir telemetr√≠a a trav√©s de GSM usando SMS.  Mir√© la lista de opciones disponibles y me decid√≠ por el Escudo GPRS de Amperka.  Por que no  Parece decente, es producido por una empresa conocida, tiene soporte t√©cnico, el precio no es muy diferente de los competidores y, en general, causa una muy buena impresi√≥n. <br><br>  Pero ah√≠ estaba.  Puede aprender sobre esa b√∫squeda y los incre√≠bles cursos de educaci√≥n continua que tuve que seguir, integrando este m√≥dulo GPRS con el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mega Servidor Arduino</a> haciendo clic en el bot√≥n a continuaci√≥n. <br><a name="habracut"></a><br><h2>  M√≥dulo en s√≠ </h2><br>  Como dije, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el m√≥dulo en s√≠ mismo</a> causa una muy buena impresi√≥n con su precisi√≥n de ejecuci√≥n y su relaci√≥n con una empresa conocida.  Nuevamente, el sitio web del fabricante tiene ejemplos de uso y una biblioteca nativa.  Dado que el m√≥dulo tiene la marca, existe la esperanza de un soporte adecuado en caso de cualquier problema con √©l. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/332/bf2/2b2/332bf22b21a64277b46f78d65e580b13.jpg" alt="imagen"></div><br>  Mirando hacia el futuro, dir√© que el soporte t√©cnico respondi√≥ mis preguntas correctamente durante dos semanas, busc√≥ errores en mi biblioteca e incluso lanz√≥ una nueva versi√≥n basada en el motivo por el cual se comunic√≥ conmigo.  Pero ... todav√≠a ten√≠a que hacer que el m√≥dulo funcionara solo. <br><br><h2>  Proyecto </h2><br>  Algunas palabras sobre el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto GSM Coop,</a> que requer√≠a un m√≥dulo GPRS.  Era necesario desarrollar la automatizaci√≥n para gestionar el gallinero.  De hecho, en una √©poca incre√≠ble en la que vivimos, ahora el gallinero debe controlarse mediante un navegador web, sensores inteligentes inal√°mbricos y telemetr√≠a GSM.  Es un objeto estrat√©gico de alg√∫n tipo, no un gallinero. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a91/e3a/6a4/a91e3a6a4cd94a2cabc35ca7ebb381b1.png" alt="imagen"></div><br>  Pero si es necesario, entonces es necesario.  Compramos componentes, entre los cuales se encuentra el m√≥dulo GPRS, y procedemos. <br><br><h2>  Tal√≥n de Aquiles </h2><br>  Ahora sobre las caracter√≠sticas del m√≥dulo.  B√°sicamente funciona.  Trabaja con ejemplos presentados en el sitio web del fabricante y sobre la base de que incluso puede crear un boceto simple.  Pero hay tres "peros". <br><br>  <i><strong>Nota</strong></i>  <i>Se utilizaron dos placas base en el proyecto: <strong>Arduino Mega 2560</strong> y <strong>Arduino Due,</strong> y todo lo siguiente se aplica espec√≠ficamente a ellos y solo a ellos.</i> <br><br>  <strong>El primer "pero", hardware.</strong>  El m√≥dulo no funciona con Arduino Due.  De ninguna manera  Incluso la correspondencia de varios d√≠as con el soporte t√©cnico de Amperka no ayud√≥.  Ni yo ni los especialistas de la compa√±√≠a logramos que GPRS Shield trabaje con Arduino Due.  Y esto es muy decepcionante porque Due es un excelente controlador con grandes capacidades y me encantar√≠a poder usarlo con GPRS Shield. <br><br>  <strong>El segundo "pero" es sist√©mico.</strong>  El m√≥dulo requiere la biblioteca SoftwareSerial para funcionar.  Cuando comenc√© mi conversaci√≥n con GPRS Shield y el soporte t√©cnico de Amperka, esta era una soluci√≥n no alternativa.  Despu√©s de nuestros procedimientos, se lanz√≥ una versi√≥n revisada de la biblioteca con soporte para trabajar en la serie de hierro, pero ... nunca gan√≥ Due o Mega.  ¬øQu√© es generalmente dif√≠cil de explicar? Si un m√≥dulo funciona en SoftSerial, ¬øqu√© impide que funcione en iron Serial? <br><br>  <strong>El tercer "pero", conceptual.</strong>  Eso no es todo.  La emboscada principal reside en el principio de la biblioteca de m√≥dulos.  Funciona en modo cerrado, es decir, bloquea el funcionamiento del controlador mientras espera la llegada de SMS (que es el 99% del tiempo) y durante todas las dem√°s operaciones del m√≥dulo.  ¬øQu√© significa esto?  Esto significa que en la biblioteca est√°ndar del fabricante, no puede crear nada m√°s que un boceto de prueba.  El gallinero estrat√©gico no brilla para usted, ya que miles de aplicaciones geniales m√°s como sistemas de seguridad, gesti√≥n de invernaderos, control inteligente del hogar a trav√©s de GSM, etc., etc. no brillan. <br><br><h2>  M√°s acerca de SoftwareSerial </h2><br>  El m√≥dulo no funciona en Arduino Due, por lo tanto hablaremos de Arduino Mega.  Lo picante de la situaci√≥n es que al tener Mega tiene tres puertos de hardware libres, Serial1, Serial2 y Seria3, nos vemos obligados a conectarnos y usar la biblioteca SoftwareSerial.  De ninguna manera imaginable e inconcebible, incluida la reorganizaci√≥n de los puentes en el m√≥dulo y el interrogatorio con la adicci√≥n al soporte t√©cnico de Amperka, no fue posible hacer que GPRS Shield funcionara con puertos de hardware en Arduino Mega. <br><br>  Bien ... Usamos SoftwareSerial, pero aqu√≠ estamos esperando una emboscada.  SoftwareSerial puede funcionar en muchos pines Arduino Mega, pero por alguna raz√≥n solo funciona en los pines 62 y 63.  ¬øPor qu√© solo en ellos?  Este acertijo es genial.  A todas luces, nunca sabremos la respuesta a esta pregunta. <br><br><h2>  Harina de elecci√≥n </h2><br>  Y ahora, como siempre, llegamos a comprender que la biblioteca est√°ndar no es apta para el uso pr√°ctico.  Al bloquear el controlador mientras espera recibir una respuesta del m√≥dulo GPRS, la biblioteca tambi√©n bloquea todos los dem√°s procesos.  El controlador simplemente se cae de la realidad el 99% del tiempo, esperando hasta que llegue una solicitud o respuesta o finalice el tiempo de espera. <br><br>  Esto pone fin a cualquier aplicaci√≥n de GPRS Shield, a excepci√≥n de la prueba: envi√≥ una solicitud para encender el z√≥calo - se activ√≥, envi√≥ una solicitud para apagar - se apag√≥.  No se puede hablar de ning√∫n trabajo del servidor web, trabajar con sensores, control de actuadores y otras cosas; nada de esto simplemente funcionar√°. <br><br>  Surgi√≥ la pregunta: o abandonamos la biblioteca del fabricante y escribimos nuestro c√≥digo de control GPRS Shield (f√°cil de decir), o abandonamos el m√≥dulo en s√≠ y buscamos una soluci√≥n alternativa.  Pero el m√≥dulo ya est√° all√≠, por lo que se decidi√≥ abandonar la biblioteca y escribir el c√≥digo de control del m√≥dulo. <br><br><h2>  La conquista del Everest </h2><br>  Me salteo todo el proceso de creaci√≥n del c√≥digo que reemplaza la biblioteca est√°ndar de Amperka, solo noto que fue muy, muy dif√≠cil y requiri√≥ un trabajo de investigaci√≥n considerable, la compilaci√≥n de un algoritmo sofisticado y esfuerzos considerables para probar la soluci√≥n resultante. <br><br>  Todo ser√° simple para usted: un poco de magia y el c√≥digo de trabajo listo para usar del m√≥dulo AMS para admitir GPRS Shield est√° listo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/557/a58/157/557a58157e7b45589395e0a9d867ee52.jpg" alt="imagen"></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo completo del m√≥dulo AMS que reemplaza la biblioteca est√°ndar</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* Modul GPRS part of Arduino Mega Server project */</span></span> #ifdef GPRS_FEATURE #include &lt;SoftwareSerial.h&gt; #define ALWAYS <span class="hljs-number"><span class="hljs-number">1</span></span> #define GPRS_ON_PIN <span class="hljs-number"><span class="hljs-number">2</span></span> #define GPRS_STATE_PIN <span class="hljs-number"><span class="hljs-number">3</span></span> #define GPRS_RX_PIN <span class="hljs-number"><span class="hljs-number">62</span></span> #define GPRS_TX_PIN <span class="hljs-number"><span class="hljs-number">63</span></span> #define MASTER <span class="hljs-string"><span class="hljs-string">"+7yyyxxxxxxx"</span></span> #define MESSAGE <span class="hljs-string"><span class="hljs-string">"Hello"</span></span> #define CHECK_ERROR <span class="hljs-number"><span class="hljs-number">0</span></span> #define CHECK_MARKER <span class="hljs-number"><span class="hljs-number">1</span></span> #define CHECK_OK <span class="hljs-number"><span class="hljs-number">2</span></span> #define NO_CHECK <span class="hljs-number"><span class="hljs-number">3</span></span> #define MARKER_OK <span class="hljs-string"><span class="hljs-string">"OK"</span></span> #define MARKER_NO_CHECK <span class="hljs-string"><span class="hljs-string">"-"</span></span> <span class="hljs-comment"><span class="hljs-comment">// GPRS commands #define DATA_TEMP1 "temp1" #define DATA_CONT1 "cont1" #define DATA_LEAK1 "leak1" #define DATA_SMOKE1 "smoke1" #define DATA_ALL "all" #define DATA_RELAY1 "relay1" #define DATA_SERVO1 "servo1" #define DATA_PERIOD "period" #define CMD_RELAY1 "relay1=" #define CMD_SERVO1 "servo1=" #define CMD_PERIOD "period=" byte gprsPeriod = 24; SoftwareSerial GPRS(GPRS_RX_PIN, GPRS_TX_PIN); #define MAX_SOFT_SERIAL 128 char bufferGprs[MAX_SOFT_SERIAL]; int curBuf = 0; #define MESSAGE_LENGTH 20 char message[MESSAGE_LENGTH]; char phone[16]; char datetime[24]; void gprsInit() { initStart("GPRS", true); GPRS.begin(9600); gprsOnOff(); gprsStart(); sendGprs("AT+CFUN=1", "OK"); sendGprs("AT+CNMI=2,1", "OK"); sendGprs("AT+CMGF=1", "OK"); sendGprs("AT+CLIP=1", "OK"); modulGprs = MODUL_ENABLE; initDone(true); } void clearBufferGprs() { for (int i = 0; i &lt; curBuf; i++) { bufferGprs[i] = 0; } } void gprsStart() { while (ALWAYS) { delay(1000); curBuf = 0; GPRS.println("AT"); if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { bufferGprs[curBuf++] = GPRS.read(); } bufferGprs[curBuf] = '\0'; if (strcmp(bufferGprs, "AT\r\n\r\nOK\r\n") == 0) { timeStamp(); Serial.println(" GPRS ON"); break; } else { Serial.print("."); } } clearBufferGprs(); } } // gprsStart() void gprsOnOff() { pinMode(GPRS_ON_PIN, OUTPUT); if (digitalRead(GPRS_STATE_PIN) != HIGH) { digitalWrite(GPRS_ON_PIN, HIGH); delay(3000); } digitalWrite(GPRS_ON_PIN, LOW); } bool clearSoftwareSerial() { if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { char c = GPRS.read(); } } } #define DELAY_GPRS_COMMAND 2000 byte sendGprs(String command, char marker[]) { unsigned long timer = millis(); bool success = false; clearSoftwareSerial(); clearBufferGprs(); Serial.print(F("Send command: ")); //Serial.println(command); while (ALWAYS) { if (millis() - timer &gt; DELAY_GPRS_COMMAND) { Serial.print(F("Send error: ")); Serial.println(command); //clearBufferGprs(); return CHECK_ERROR; } curBuf = 0; GPRS.println(command); delay(280); if (GPRS.available() &gt; 0) { while (GPRS.available() &gt; 0) { char c = GPRS.read(); if (curBuf &gt; MAX_SOFT_SERIAL - 2) {break;} bufferGprs[curBuf++] = c; Serial.print(c); } Serial.println(); bufferGprs[curBuf] = '\0'; if (marker == MARKER_NO_CHECK) { Serial.print(F("Send no check, ")); Serial.println(millis() - timer); return NO_CHECK; } else if (StrContains(bufferGprs, marker)) { Serial.print(F("Send success, ")); Serial.println(millis() - timer); return CHECK_MARKER; } else if (StrContains(bufferGprs, MARKER_OK)) { Serial.print(F("Send success, ")); Serial.println(millis() - timer); return CHECK_OK; } else { Serial.println("."); } } // if (GPRS.available() &gt; 0) delay(500); } // while (ALWAYS) } // sendGprs( ) // +CMGR: "REC READ", "XXXXXXXXXXX", "", "16/10/01,10:00:00+12" // SMS text void parseSms(char *message, char *phone, char *datetime) { int i = 0; int j = 0; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {phone[j++] = bufferGprs[i++];} phone[j] = '\0'; i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; while (bufferGprs[i] != '\"') {i++;} i++; j = 0; while (bufferGprs[i] != '\"') {datetime[j++] = bufferGprs[i++];} datetime[j] = '\0'; i++; while (bufferGprs[i] != '\n') {i++;} i++; j = 0; //Serial.print(F("strlen(bufferGprs): ")); Serial.println(strlen(bufferGprs)); while (i &lt; strlen(bufferGprs) - 1) { if (j &gt; MESSAGE_LENGTH - 1) {break;} if ((byte)bufferGprs[i] == 13) {break;} message[j++] = bufferGprs[i++]; } Serial.print(F("strlen(message1): ")); Serial.println(strlen(message)); message[j] = '\0'; Serial.print(F("strlen(message2): ")); Serial.println(strlen(message)); for (int z = 0; z &lt; strlen(message); z++) { Serial.print((byte)message[z]); Serial.print(F(" ")); } Serial.println(); } void deleteSms() { if (sendGprs("AT+CMGDA=\"DEL ALL\"", "OK")) { Serial.println(F("All SMS deleted")); } else { Serial.println(F("Error delete all SMS")); } } String stringSens(byte v) { String s = ""; switch (v) { case 0: s = (F("OFF")); break; case 1: s = (F("ON")); break; default: s = (F("?")); } return s; } String stringLeak(byte v) { String s = ""; switch (v) { case 0: s = (F("LEAK!")); break; case 1: s = (F("OK")); break; default: s = (F("?")); } return s; } String stringSmoke(byte v) { String s = ""; switch (v) { case 0: s = (F("OK")); break; case 1: s = (F("SMOKE!")); break; default: s = (F("?")); } return s; } String mkTemp1() {String s = DATA_TEMP1; s += '='; s += String(lpTempTemp); s += '\n'; return s;} String mkCont1() {String s = DATA_CONT1; s += '='; s += stringSens(lpContCont1); s += '\n'; return s;} String mkLeak1() {String s = DATA_LEAK1; s += '='; s += stringLeak(lpLeakLeak1); s += '\n'; return s;} String mkSmoke1() {String s = DATA_SMOKE1; s += '='; s += stringSmoke(smokeSmoke); s += '\n'; return s;} String mkRelay1() {String s = DATA_RELAY1; s += '='; s += stringSens(relayRelay); s += '\n'; return s;} String mkServo1() {String s = DATA_SERVO1; s += '='; s += stringSens(servoState); s += '\n'; return s;} String mkPeriod() {String s = DATA_PERIOD; s += '='; s += String(gprsPeriod); s += '\n'; return s;} String mkAll() { String s = ""; s += mkTemp1(); s += mkCont1(); s += mkLeak1(); s += mkSmoke1(); s += mkRelay1(); s += mkServo1(); s += mkPeriod(); return s; } void gprsSetRelay(byte v) { switch (v) { case 0: if (relayRelay) { relayRelay = STATE_OFF; } break; case 1: if (!relayRelay) { relayRelay = STATE_ON; } break; } } void gprsSetServo(byte v) { switch (v) { case 0: servoState = STATE_OFF; break; case 1: servoState = STATE_ON; break; } } void gprsAnswer() { String s = ""; String mess = String(message); String data = ""; if (mess == DATA_TEMP1) {s += mkTemp1();} else if (mess == DATA_CONT1) {s += mkCont1();} else if (mess == DATA_LEAK1) {s += mkLeak1();} else if (mess == DATA_SMOKE1) {s += mkSmoke1();} else if (mess == DATA_RELAY1) {s += mkRelay1();} else if (mess == DATA_SERVO1) {s += mkServo1();} else if (mess == DATA_PERIOD) {s += mkPeriod();} else if (mess == DATA_ALL) {s += mkAll();} else if (mess.indexOf(F("=")) &gt;= 0) { byte p = mess.indexOf(F("=")); if (mess.indexOf(CMD_RELAY1) &gt;= 0) {data = mess.substring(p + 1); gprsSetRelay(data.toInt()); s += DATA_RELAY1; s += '='; s += stringSens(relayRelay);} else if (mess.indexOf(CMD_SERVO1) &gt;= 0) {data = mess.substring(p + 1); gprsSetServo(data.toInt()); s += DATA_SERVO1; s += '='; s += stringSens(servoState);} else if (mess.indexOf(CMD_PERIOD) &gt;= 0) {data = mess.substring(p + 1); gprsPeriod = data.toInt(); s += DATA_PERIOD; s += '='; s += String(gprsPeriod);} } else { Serial.println(F("Not command!")); } //Serial.print(F("mess: ")); Serial.println(mess); //Serial.print(F("answ: ")); Serial.println(s); if (s == "") {s = "Error";} Serial.println(F("Send answer... ")); if (sendSms(MASTER, s)) { Serial.println(F("success")); } else { Serial.println(F("error")); } } void readSms() { byte result = sendGprs("AT+CMGR=1,1", "+CMGR:"); if (result == CHECK_MARKER) { parseSms(message, phone, datetime); Serial.print(F("Number: ")); Serial.println(phone); Serial.print(F("Datetime: ")); Serial.println(datetime); Serial.print(F("Message: ")); Serial.println(message); deleteSms(); if (String(phone) == String(MASTER)) { Serial.println(F("Message from MASTER!")); gprsAnswer(); } } else if (result == CHECK_OK) { Serial.println(F("No SMS")); } else { Serial.println(F("Error read SMS")); } } bool sendSms(char *number, String data) { String numstr = "AT+CMGS=\"" + String(number) + "\""; String messtr = data + String((char)26); if (sendGprs(numstr, "&gt;")) { if (sendGprs(messtr, MARKER_NO_CHECK)) { return true; } } return false; } void sendPeriod() { Serial.println(F("Send period SMS... ")); if (sendSms(MASTER, mkAll())) { Serial.println(F("success")); } else { Serial.println(F("error")); } } void gprsWorks() { if (cycle20s) { readSms(); } switch (gprsPeriod) { case 1: if (cycle1h) {sendPeriod();} break; case 6: if (cycle6h) {sendPeriod();} break; case 12: if (cycle12h) {sendPeriod();} break; default: if (cycle24h) {sendPeriod();} break; } } #endif // GPRS_FEATURE</span></span></code> </pre> <br></div></div><br>  El m√≥dulo fue desarrollado y probado en AMS versi√≥n 0.16 para Arduino Mega.  Las pruebas mostraron un funcionamiento absolutamente estable y confiable de GPRS Shield bajo el control de este m√≥dulo. <br><br><h2>  Con√©ctese al m√≥dulo de soporte AMS GPRS Shield </h2><br>  Para conectar el m√≥dulo GPRS Shield al Arduino Mega Server, debe realizar algunos pasos simples.  Primero, agregue las siguientes l√≠neas al archivo principal de AMS <br><br><pre> <code class="java hljs">#define GPRS_FEATURE</code> </pre><br>  y <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> modulGprs = MODUL_NOT_COMPILLED;</code> </pre><br>  en las secciones apropiadas  All√≠ debe agregar variables de prueba que en su proyecto real ser√°n responsables de los par√°metros controlados (temperatura, estado de contacto, etc.). <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lpTempTemp; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lpContCont1; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lpLeakLeak1; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> smokeSmoke; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> relayRelay; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> servoState;</code> </pre><br><h2>  Explicaci√≥n de las caracter√≠sticas admitidas </h2><br>  El m√≥dulo contiene un conjunto b√°sico de consultas y comandos, pero puede reemplazar estos comandos con cualquier otro y / o expandir el conjunto b√°sico de comandos y consultas que necesita. <br><br><h3>  Consultas </h3><br>  Las solicitudes se env√≠an por SMS, el sistema env√≠a respuestas (tambi√©n por SMS) que contienen informaci√≥n sobre el par√°metro solicitado.  Muy simple: enviamos la solicitud "temp1" desde el tel√©fono, el sistema en respuesta env√≠a el valor de temperatura actual <code>temp1=20.50</code> . <br><br><blockquote>  <strong>temp1</strong> - solicitud de temperatura <br>  <strong>cont1</strong> - solicitar estado de contacto <br>  <strong>fuga1</strong> : solicita el estado del sensor de fuga <br>  <strong>smoke1</strong> - consulta el estado del detector de humo <br>  <strong>rel√©1</strong> : solicita el estado del rel√© (clave) <br>  <strong>servo1</strong> : solicita el estado del <strong>servoalimentador</strong> <br>  <strong>period</strong> - solicitud del periodo de paquetes de telemetr√≠a autom√°tica <br>  <strong>all</strong> : solicita todos los par√°metros del sistema </blockquote><br>  En respuesta a la solicitud de "todos", el sistema env√≠a una lista de todos los par√°metros.  En el caso de enviar un comando no registrado, el sistema enviar√° una respuesta de "Error".  Si los par√°metros monitoreados est√°n fuera del rango normal, el sistema mismo puede enviar mensajes de alarma al tel√©fono inteligente del operador. <br><br>  Para administrar el sistema que solo un operador registrado podr√≠a, el sistema tiene protecci√≥n contra el acceso no autorizado: solo responde a comandos de un n√∫mero de tel√©fono espec√≠fico. <br><br><h3>  Equipos </h3><br>  Los comandos se env√≠an por SMS, una vez aceptado el comando, el sistema cambia su estado y env√≠a respuestas con informaci√≥n sobre el nuevo estado de sus actuadores o configuraciones. <br><br><blockquote>  <strong>rel√©1 =</strong> - comando de control del rel√© (tecla) <br>  <strong>servo1 =</strong> - comando de control del alimentador <br>  <strong>period =</strong> - comando para cambiar el per√≠odo de env√≠o autom√°tico de telemetr√≠a </blockquote><br>  Un ejemplo  Comando <code>relay1=1</code> , respuesta <code>relay1=ON</code> .  Comando <code>relay1=0</code> , respuesta <code>relay1=OFF</code> . <br><br><h2>  Explicaciones de c√≥digo </h2><br>  Inicializaci√≥n del m√≥dulo GPRS.  La inicializaci√≥n est√°ndar del m√≥dulo AMS, el lanzamiento de SoftwareSerial y un poco de magia de los comandos GSM AT.  El prop√≥sito de este bloque es dar vida al m√≥dulo GPRS y devolverlo del nirvana si en este momento lo hab√≠a dejado por alguna raz√≥n fuera de nuestro control. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ initStart(<span class="hljs-string"><span class="hljs-string">"GPRS"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); GPRS.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); gprsOnOff(); gprsStart(); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CFUN=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CNMI=2,1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CMGF=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CLIP=1"</span></span>, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>); modulGprs = MODUL_ENABLE; initDone(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); }</code> </pre><br>  La principal funci√≥n de trabajo del m√≥dulo.  Cada 20 segundos, el Arduino Mega Server comprueba si hay SMS entrantes y, en caso de solicitudes o comandos, los ejecuta.  Como resultado, el retraso promedio en la ejecuci√≥n del comando es de 10 segundos (excluyendo el retraso en el env√≠o de mensajes SMS por parte del operador de telecomunicaciones).  Este intervalo se puede configurar, se seleccionan 20 segundos como un compromiso entre la velocidad de reacci√≥n a los comandos SMS y el arranque del sistema. <br><br>  En estos 20 segundos, AMS puede hacer lo que sea necesario, y el SMS que llega en este per√≠odo de tiempo no se pierde.  Cuando se usa la biblioteca est√°ndar, el sistema no puede hacer nada m√°s que esperar a que llegue el SMS; de lo contrario, simplemente los pierde (y el controlador tampoco puede hacer nada en este momento). <br><br>  Tambi√©n hay un c√≥digo de env√≠o de telemetr√≠a con un intervalo especificado de 1 hora, 6 horas, 12 horas o 24 horas.  Este intervalo se puede cambiar enviando el comando apropiado por SMS. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsWorks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle20s) { readSms(); } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (gprsPeriod) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle1h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle6h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle12h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cycle24h) {sendPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br>  La interacci√≥n del m√≥dulo GPRS y el controlador se realiza utilizando comandos AT especiales y las siguientes funciones forman los comandos del m√≥dulo GPRS en c√≥digos que le son comprensibles. <br><br>  Funci√≥n de env√≠o de SMS.  En los par√°metros de la funci√≥n, el n√∫mero de tel√©fono de destino y el comando o solicitud se transmiten en forma de texto. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">bool </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendSms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *number, String data)</span></span></span><span class="hljs-function"> </span></span>{ String numstr = <span class="hljs-string"><span class="hljs-string">"AT+CMGS=\""</span></span> + String(number) + <span class="hljs-string"><span class="hljs-string">"\""</span></span>; String messtr = data + String((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>)<span class="hljs-number"><span class="hljs-number">26</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sendGprs(numstr, <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sendGprs(messtr, MARKER_NO_CHECK)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br>  Funci√≥n de lectura de SMS.  Los valores aceptados se colocan en las variables mensaje, tel√©fono y fecha y hora, que contienen, respectivamente, el comando recibido, el n√∫mero de tel√©fono y la hora de env√≠o. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readSms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> result = sendGprs(<span class="hljs-string"><span class="hljs-string">"AT+CMGR=1,1"</span></span>, <span class="hljs-string"><span class="hljs-string">"+CMGR:"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == CHECK_MARKER) { parseSms(message, phone, datetime); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Number: "</span></span>)); Serial.println(phone); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Datetime: "</span></span>)); Serial.println(datetime); Serial.print(F(<span class="hljs-string"><span class="hljs-string">"Message: "</span></span>)); Serial.println(message); deleteSms(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String(phone) == String(MASTER)) { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Message from MASTER!"</span></span>)); gprsAnswer(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == CHECK_OK) { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"No SMS"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Error read SMS"</span></span>)); } }</code> </pre><br>  La funci√≥n de formar una respuesta a las solicitudes y comandos de SMS.  Esta funci√≥n es espec√≠fica para cada proyecto y puede cambiarla en sus proyectos de acuerdo con la l√≥gica de su sistema. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsAnswer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String s = <span class="hljs-string"><span class="hljs-string">""</span></span>; String mess = String(message); String data = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_TEMP1) {s += mkTemp1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_CONT1) {s += mkCont1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_LEAK1) {s += mkLeak1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_SMOKE1) {s += mkSmoke1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_RELAY1) {s += mkRelay1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_SERVO1) {s += mkServo1();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_PERIOD) {s += mkPeriod();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess == DATA_ALL) {s += mkAll();} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(F(<span class="hljs-string"><span class="hljs-string">"="</span></span>)) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> p = mess.indexOf(F(<span class="hljs-string"><span class="hljs-string">"="</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_RELAY1) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsSetRelay(data.toInt()); s += DATA_RELAY1; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += stringSens(relayRelay);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_SERVO1) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsSetServo(data.toInt()); s += DATA_SERVO1; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += stringSens(servoState);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mess.indexOf(CMD_PERIOD) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) {data = mess.substring(p + <span class="hljs-number"><span class="hljs-number">1</span></span>); gprsPeriod = data.toInt(); s += DATA_PERIOD; s += <span class="hljs-string"><span class="hljs-string">'='</span></span>; s += String(gprsPeriod);} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Serial.println(F(<span class="hljs-string"><span class="hljs-string">"Not command!"</span></span>)); } <span class="hljs-comment"><span class="hljs-comment">//Serial.print(F("mess: ")); Serial.println(mess); //Serial.print(F("answ: ")); Serial.println(s); if (s == "") {s = "Error";} Serial.println(F("Send answer... ")); if (sendSms(MASTER, s)) { Serial.println(F("success")); } else { Serial.println(F("error")); } }</span></span></code> </pre><br>  Funciones de formar respuestas.  Estas son funciones que forman las respuestas que el sistema env√≠a por SMS al tel√©fono inteligente del usuario en respuesta a una solicitud o seg√∫n su criterio, de acuerdo con el programa establecido. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringSens</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringLeak</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stringSmoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkTemp1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkCont1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkLeak1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkSmoke1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkRelay1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkServo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkPeriod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mkAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre><br>  Y las funciones de ejecuci√≥n de comandos.  Estas son funciones que realizan los comandos de SMS y cambian el estado del sistema, es decir, cambian su configuraci√≥n o habilitan o deshabilitan los actuadores. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsSetRelay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprsSetServo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span></code> </pre><br>  Las funciones restantes son puramente t√©cnicas, y realizan todo el trabajo de mantenimiento de la interacci√≥n entre GPRS Shield y el microcontrolador. <br><br><h2>  Un poco m√°s sobre SoftwareSerial </h2><br>  Todo lo anterior no es suficiente para que GPRS Shield funcione en modo transparente y deje de bloquear otros procesos que se ejecutan en el microcontrolador.  Tambi√©n es necesario modificar el c√≥digo de la biblioteca SoftwareSerial.  El hecho es que su b√∫fer est√°ndar de 64 bytes no es suficiente para digerir la mayor√≠a de los comandos AT GSM y mantener una interacci√≥n din√°mica entre el m√≥dulo y el controlador. <br><br>  Debe aumentar este b√∫fer al menos a 128 bytes, y solo despu√©s de eso la magia funcionar√° y el Escudo GPRS comenzar√° a funcionar normalmente en modo transparente.  Esto se hace en el archivo <code>SoftwareSerial.h</code> .  L√≠nea <br><br><pre> <code class="java hljs">#define _SS_MAX_RX_BUFF <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-comment"><span class="hljs-comment">// RX buffer size</span></span></code> </pre><br>  necesita cambiar a <br><br><pre> <code class="java hljs">#define _SS_MAX_RX_BUFF <span class="hljs-number"><span class="hljs-number">128</span></span> <span class="hljs-comment"><span class="hljs-comment">// RX buffer size</span></span></code> </pre><br><h2>  Conclusi√≥n </h2><br>  Ver√° el intercambio de comandos del operador y respuestas del sistema en la pantalla del tel√©fono inteligente.  Y mientras el sistema realiza docenas de procesos en modo pseudo-multitarea.  Y GPRS Shield comenz√≥ a ocupar menos del 1% del tiempo del procesador, en lugar del 99% como antes, liberando el resto del tiempo para el servidor web y otras tareas para administrar el gallinero. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2e1/615/a08/2e1615a08e2a4a29802805066509d3e4.png" alt="imagen"></div><br>  Eso es todo, integramos GPRS Shield en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AMS</a> , superamos todos los obst√°culos, lo hicimos funcionar en modo transparente, sin bloquear otros procesos como un servidor web, la operaci√≥n de sensores y actuadores inal√°mbricos, y esto abre perspectivas atractivas para construir una gran cantidad de sistemas con control GSM SMS y control basado en AMS: invernaderos, sistemas de seguridad y calefacci√≥n, varias opciones para un hogar inteligente, etc., etc., casi hasta el infinito. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es401721/">https://habr.com/ru/post/es401721/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es401709/index.html">Lin Industrial no se rinde</a></li>
<li><a href="../es401711/index.html">Valve entrena a AI para detectar tramposos en CS: GO</a></li>
<li><a href="../es401713/index.html">Qu√© hacer cuando est√°s aburrido en el avi√≥n: ejecuta Google Chrome en el respaldo de la silla</a></li>
<li><a href="../es401715/index.html">Pesca espacial por Robert Winglee (NASA)</a></li>
<li><a href="../es401719/index.html">Cicl√≥n 10 - FPGA con la marca Intel</a></li>
<li><a href="../es401723/index.html">Renovaci√≥n art√≠stica de equipos inform√°ticos antiguos</a></li>
<li><a href="../es401725/index.html">La historia de la tecnolog√≠a implantable. Dentaduras postizas</a></li>
<li><a href="../es401727/index.html">Elegir un regalo geek para el 23 de febrero: Gu√≠a de Madrobots</a></li>
<li><a href="../es401729/index.html">Lo que es √∫til (y peligroso) "ruido" que nos rodea</a></li>
<li><a href="../es401735/index.html">Aprender el interior de los altavoces vibratorios m√≥viles PartyFon Max</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>