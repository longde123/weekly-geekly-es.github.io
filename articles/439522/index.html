<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¢ üòã üï¥üèæ Reenlace de DNS en 2k19, o c√≥mo sudar realmente visitando un sitio porno üíµ üçà ‚ÜîÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Hoy nos gustar√≠a hablar sobre un ataque viejo y casi olvidado llamado enlace DNS. La primera charla comenz√≥ en 2007, pero luego los expe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reenlace de DNS en 2k19, o c√≥mo sudar realmente visitando un sitio porno</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/fbk_cs/blog/439522/"><p><img src="https://habrastorage.org/webt/ro/dg/v9/rodgv9iuu_71gel5eqwpydcaj9m.jpeg"></p><br><p>  Hola a todos!  Hoy nos gustar√≠a hablar sobre un ataque viejo y casi olvidado llamado enlace DNS.  La primera charla comenz√≥ en 2007, pero luego los expertos en el campo de la seguridad pr√°ctica de la informaci√≥n no le prestaron la debida atenci√≥n en relaci√≥n con las peculiaridades del funcionamiento de este ataque, as√≠ como con pocas consecuencias tangibles, como parec√≠a entonces.  Hoy trataremos de convencerlos de lo contrario, y usted, en particular, demostrando que en el mundo moderno este ataque ha encontrado un segundo viento y ya no parece tan inofensivo. </p><a name="habracut"></a><br><h2 id="chto-takoe-dns-rebinding">  ¬øQu√© es el enlace DNS? </h2><br><p>  Considere el siguiente esquema: </p><br><p><img src="https://habrastorage.org/webt/sr/w6/i8/srw6i8sjgtnecyqfkq6sfndcvrs.png"></p><br><p>  Tenemos la computadora de una v√≠ctima con IP 192.168.0.2 en la red local, y tambi√©n tiene un enrutador con la direcci√≥n IP 192.168.0.1.  El objetivo del atacante que administra el servidor con la direcci√≥n 13.37.13.37 y el nombre de dominio hacker.com (tambi√©n, nuestro propio servidor DNS que contiene informaci√≥n sobre el dominio est√° girando en el ip-shnik) es obtener acceso al enrutador en la red local. </p><br><p>  Para usar la t√©cnica de enlace DNS, debemos atraer a la v√≠ctima a nuestro sitio malicioso.  Supongamos que lo logramos. </p><br><p>  Ahora examinemos en detalle c√≥mo funciona el ataque. </p><br><p>  En primer lugar, el navegador accede a los servidores DNS con una solicitud de registro A: </p><br><p><img src="https://habrastorage.org/webt/ry/op/4y/ryop4y_9c5m0goj-iygirncutbm.png"></p><br><p>  La cadena de servidores DNS conduce a nuestro servidor, que, a su vez, da una respuesta est√°ndar que contiene la verdadera direcci√≥n IP del sitio malicioso, y tambi√©n indica el TTL que necesitamos, en este caso 59. </p><br><p><img src="https://habrastorage.org/webt/18/yt/k9/18ytk9njpok5flotf7axbydovpy.png"></p><br><p>  A continuaci√≥n, el navegador realiza una solicitud HTTP est√°ndar para la IP recibida. </p><br><p><img src="https://habrastorage.org/webt/lc/e8/xd/lce8xd7yfinhsyodhqxtpa8yerm.png"></p><br><p>  En la siguiente etapa, el servidor responde con una p√°gina HTML con c√≥digo javascript que accede a nuestro propio dominio. </p><br><p><img src="https://habrastorage.org/webt/ix/r6/h1/ixr6h19bqirekyafut2tlstyfgc.png"></p><br><p>  Ahora, hasta que caduque el TTL y el usuario est√© en el sitio, se ejecutar√° el javascript recibido anteriormente.  Una vez que termine el TTL, el navegador solicitar√° nuevamente un registro A. </p><br><p><img src="https://habrastorage.org/webt/-n/1b/dx/-n1bdxxgxatewjyou0gdfxkiv1w.png"></p><br><p>  En este momento, nuestro javascript contin√∫a ejecut√°ndose, y el servidor DNS que administramos responder√° con un registro A con una direcci√≥n IP de la red local donde el atacante quiere llegar. </p><br><p><img src="https://habrastorage.org/webt/mw/pg/lc/mwpglcv_8-ydxsitnzv86gugvqo.png"></p><br><p>  Dado que el dominio, el puerto y el protocolo permanecen sin cambios, SOP no se viola y, como resultado, el navegador accede al dominio pew.hacker.com, sin embargo, ya tocar√° el codiciado e inalcanzable enrutador. </p><br><p><img src="https://habrastorage.org/webt/-c/df/qk/-cdfqkxy1xyjp6gftrd9wmtg6wy.png"></p><br><p>  Como resultado, recibimos con calma una respuesta del enrutador y la redirigimos a nosotros incorporando la funcionalidad correspondiente en el c√≥digo JavaScript cargado anteriormente. </p><br><p><img src="https://habrastorage.org/webt/se/5o/wf/se5owf2cq4n0o8kzxdu-d583kno.png"></p><br><p><img src="https://habrastorage.org/webt/f4/s2/br/f4s2brt6sckd8lf6__rlrpdw5me.png"></p><br><p>  Entonces, resumamos lo anterior: </p><br><ul><li>  El usuario visita el sitio, recibe una direcci√≥n IP real y un TTL corto </li><li>  Mientras est√° en el sitio, el navegador realiza llamadas al mismo dominio donde se encuentra el usuario.  Tan pronto como la cach√© caduca, el navegador vuelve a solicitar la IP del dominio. </li><li>  Adem√°s, nuestro servidor DNS emite en lugar de la direcci√≥n real, la direcci√≥n IP del servicio interno (en nuestro caso, el enrutador) </li><li>  Despu√©s de que la solicitud pasa por el dominio al enrutador, y el javascript precargado por el usuario nos env√≠a el resultado de antemano. </li></ul><br><p>  ¬°Lo descubrimos!  Muchos pueden tener una pregunta razonable: "¬øY qu√©?", ‚Äã‚ÄãPorque para la operaci√≥n necesita conocer las direcciones IP internas de los servicios, mantener al usuario durante un tiempo determinado, etc. </p><br><p>  S√≠, sin embargo, con el advenimiento de los servicios de transmisi√≥n, alojamiento de videos, buenos sitios antiguos de pornograf√≠a y otras plataformas donde las personas permanecen mucho tiempo, el atacante tendr√° tiempo suficiente para llevar a cabo el ataque.  En cuanto a las direcciones, a menudo son est√°ndar o f√°cilmente predecibles. </p><br><p>  Pero todo esto es en teor√≠a, pero ¬øqu√© pasa en la pr√°ctica?  Seleccionamos las 4 √°reas m√°s relevantes en 2019, donde hubo incidentes relacionados con el ataque de enlace DNS, estos son: </p><br><ul><li>  IoT </li><li>  Crypto wallets </li><li>  Aplicaciones de escritorio </li><li>  Nubes </li></ul><br><p>  Miremos cada tema en orden y descubramos si todo es realmente tan inofensivo. </p><br><h2 id="iot">  Iot </h2><br><h3 id="google-home">  Google home </h3><br><p><img src="https://habrastorage.org/webt/xk/uj/oh/xkujohaktco1mi9aau3im3fjk7e.png"></p><br><p>  Google home es un asistente inteligente de Google.  Este dispositivo tiene (o ten√≠a en el pasado) una API que no requiere ninguna autenticaci√≥n para controlar el dispositivo.  Proporciona una serie de caracter√≠sticas, como: </p><br><ul><li>  Reproducci√≥n de contenido </li><li>  Escanear </li><li>  Reiniciar </li><li>  Conexi√≥n a redes WIFI, etc. </li></ul><br><p>  Ejemplo de escenario de ataque: un atacante puede desanonimizar a un usuario al obtener las coordenadas de los puntos WIFI m√°s cercanos.  Obviamente, ninguna VPN puede salvarte. </p><br><h3 id="sonos-wifi-speakers">  Sonos altavoces wifi </h3><br><p><img src="https://habrastorage.org/webt/mw/bo/xr/mwboxrh0zhpjewbcxgrw6kn4krg.png"></p><br><p>  Estas columnas de Sonos generan un servidor web en la red local UPnP, que da acceso a varias p√°ginas interesantes: </p><br><ul><li>  192.168.1.76:1400/support/review: escupe la salida de algunos comandos UNIX </li><li>  192.168.1.76:1400/tools: le permite ejecutar algunos comandos UNIX </li></ul><br><p>  En este caso, el atacante tiene la capacidad de ejecutar el comando traceroute para escanear la topolog√≠a de la red interna. </p><br><h3 id="radio-thermostat-ct50">  Termostato de radio CT50 </h3><br><p><img src="https://habrastorage.org/webt/0f/uh/b9/0fuhb9kozjqucxdf9v-qxz1rvgc.png"></p><br><p>  Este es uno de nuestros casos favoritos.  Este modelo de termostato tambi√©n tiene una API sin autorizaci√≥n y le permite cambiar: </p><br><ul><li>  Modo clim√°tico </li><li>  Temperatura </li><li>  Modo de luz de fondo y otras configuraciones </li></ul><br><p>  Como resultado, un atacante puede sudar mucho a su v√≠ctima, pero hablando en serio, tal ataque a un termostato, por ejemplo, en una instalaci√≥n m√©dica puede tener consecuencias bastante desagradables. </p><br><h3 id="roku-tv">  Roku tv </h3><br><p><img src="https://habrastorage.org/webt/h3/7g/2d/h37g2dtzcz-6yiq0wqjuytjl0rw.png"></p><br><p>  Los televisores Roku todav√≠a tienen la misma dolencia: una API sin autenticaci√≥n. </p><br><p>  La API te permite: </p><br><ul><li>  Ejecuta varias aplicaciones </li><li>  Reproducir contenido </li><li>  Realizar consultas de b√∫squeda en el sistema, etc. </li></ul><br><p>  En este caso, lo m√°ximo que amenaza al usuario es la p√©rdida de datos confidenciales, que tambi√©n es desagradable. </p><br><h3 id="lyuboy-wi-fi-router">  Cualquier enrutador WIFI </h3><br><p><img src="https://habrastorage.org/webt/c_/nk/xe/c_nkxekprqwfkc8uzoj1theepz0.png"></p><br><p>  Casi todos tienen este dispositivo IoT hoy.  No es ning√∫n secreto que muchos usuarios comunes no cambian las contrase√±as est√°ndar de los paneles de administraci√≥n de sus enrutadores.  Con la ayuda del enlace DNS, nada nos impide intentar iniciar sesi√≥n con credenciales est√°ndar y obtener acceso al panel de administraci√≥n.  Si no se puede encontrar la IP local, WebRTC viene al rescate. </p><br><h3 id="itog-po-iot">  Resumen de IoT </h3><br><p>  Destacamos algunas de las caracter√≠sticas que proporciona el enlace DNS cuando se trabaja con IoT: </p><br><ul><li>  Capacidad para desanonimizar al usuario </li><li>  Capacidad para escanear una red local </li><li>  Usuario simulado </li><li>  Cualquier cosa, dependiendo de la funcionalidad del dispositivo IoT </li></ul><br><h2 id="crypto-wallets">  Crypto wallets </h2><br><h3 id="geth">  Geth </h3><br><p>  Ahora hablemos de las billeteras de criptomonedas.  El primer caso examinado es un cliente para carteras de ethereum llamado Geth.  Aqu√≠ la caja de Pandora est√° en el servicio JSON-RPC.  Para comenzar, descubramos qu√© es.  JSON-RPC es un protocolo de llamada a procedimiento remoto en formato JSON.  Todo se parece a esto: </p><br><p><img src="https://habrastorage.org/webt/5x/lj/0u/5xlj0ui1rjzvur8roy4oflnpsiu.png"></p><br><p> La mayor√≠a de los clientes ejecutan este servicio en localhost: 8545 y, a su vez, proporciona un conjunto de funciones interesantes, como <code>eth_sendTransaction</code> etc. </p><br><p>  Ahora, un ejemplo de c√≥mo puede obtener su saldo y la direcci√≥n de la billetera sin el conocimiento del usuario y utilizando el ataque de enlace DNS: </p><br><p><img src="https://habrastorage.org/webt/je/oj/om/jeojomqmheqktoigqvdzftukgky.png"></p><br><h3 id="eosio-keosd-wallet">  Billetera keosd EOSIO </h3><br><p>  A continuaci√≥n tenemos un cliente para billeteras EOSIO.  Keosd se inicia en localhost: 8900 y firma autom√°ticamente cualquier acci√≥n de la aplicaci√≥n durante 15 minutos despu√©s de ingresar los datos de autorizaci√≥n.  Habiendo profundizado en la API, nuevamente puede encontrar funcionalidades interesantes.  Para mayor claridad, utilizando la solicitud que se muestra a continuaci√≥n, puede obtener la clave p√∫blica del usuario: </p><br><p><img src="https://habrastorage.org/webt/eu/8o/w0/eu8ow0zlacnzorfnqy_mwf1adpc.png"></p><br><h3 id="itog-po-crypto-wallets">  Resumen de billeteras Crypto: </h3><br><ul><li>  un atacante puede robar dinero del usuario </li><li>  un atacante puede modificar varias configuraciones de usuario </li><li>  la capacidad de desanonimizar al usuario </li></ul><br><h2 id="desktop-applications">  Aplicaciones de escritorio </h2><br><h3 id="transmission-client">  Cliente de transmisi√≥n </h3><br><p>  Me gustar√≠a comenzar el bloque de incidentes relacionados con las aplicaciones de escritorio con una vulnerabilidad relativamente sensacional en el cliente de transmisi√≥n torrent. </p><br><p>  Aqu√≠ el problema radica en el mismo JSON-RPC, que examinamos un poco m√°s arriba.  En este caso, le permite cambiar la configuraci√≥n del usuario, por ejemplo, cambiar la carpeta para descargar archivos: </p><br><p><img src="https://habrastorage.org/webt/km/ot/fr/kmotfrugolntjfkm9l9s-obaw6g.png"></p><br><p>  Por un lado, parece no ser nada serio, pero si especifica el recurso compartido smb controlado por el atacante en lugar de la carpeta (si el cliente usa el cliente de Windows), puede interceptar el hash del usuario, que puede usarse en el futuro. </p><br><h3 id="utorrent-web-client">  Cliente web uTorrent </h3><br><p>  Este compa√±ero tiene en su arsenal el mismo servicio JSON-RPC que le permite cambiar los archivos de configuraci√≥n del usuario, as√≠ como descargar archivos. </p><br><p>  En este caso, se requiere autenticaci√≥n, pero las credenciales est√°n disponibles en <code>http://localhost:19575/users.conf</code> .  ¬øC√≥mo se puede usar esto? </p><br><p>  Primero, haga la siguiente solicitud: </p><br><p><img src="https://habrastorage.org/webt/zw/hd/c5/zwhdc5xvr-guzsxhnbpddipajck.png"></p><br><p>  Despu√©s de recibir el token, cambiamos la carpeta de descarga a la carpeta donde se encuentran los programas que se ejecutan cuando se inicia el sistema: </p><br><p><img src="https://habrastorage.org/webt/wm/qm/ds/wmqmdsmi-zd-t4s3jhg-ehs71um.png"></p><br><p>  Y finalmente, le damos el comando para descargar la carga √∫til necesaria: </p><br><p><img src="https://habrastorage.org/webt/z_/n7/rf/z_n7rfmj1ot8lnyc5op7yukhmn0.png"></p><br><p>  Como resultado, <code>evil.exe</code> se lanzar√° despu√©s del pr√≥ximo reinicio. </p><br><h3 id="minikube">  Minikube </h3><br><p>  Minikube es una utilidad de l√≠nea de comandos para configurar y ejecutar un cl√∫ster Kubernetes de modo √∫nico en una m√°quina virtual en la computadora local. </p><br><p>  Siempre se cuelga en 192.168.99.100, y la interfaz basada en web est√° disponible en el puerto 3000.  Como resultado, un atacante tiene la oportunidad de crear un contenedor malicioso con una carpeta compartida con el sistema principal. </p><br><p>  En primer lugar, debe obtener el token csrf. </p><br><p><img src="https://habrastorage.org/webt/p1/km/nr/p1kmnrq8b3wpp_gvlijlyw-dctg.png"></p><br><p>  A continuaci√≥n, debe crear un contenedor y, para ello, enviar la siguiente solicitud: </p><br><p><img src="https://habrastorage.org/webt/zo/yw/hb/zoywhbt3hwo_prfodgovvznth-e.png"></p><br><p>  Veamos que hace.  En √©l, indicamos que al iniciar el contenedor debemos reenviar el shell inverso y tambi√©n montar la carpeta Usuarios desde el sistema principal: </p><br><p><img src="https://habrastorage.org/webt/rr/ll/jl/rrlljlnmmi_0fsb_slpehnzpoh4.png"></p><br><h3 id="ruby-on-rails">  Ruby on Rails </h3><br><p>  Hay una gema para el marco de Ruby on Rails que le permite ejecutar el c√≥digo de Ruby directamente en el navegador. </p><br><p><img src="https://habrastorage.org/webt/hj/ij/yn/hjijync3otkaeg025phetqwedcm.png"></p><br><p>  Tratemos de descubrir qu√© necesitamos para esto. </p><br><p>  Primero tenemos que ir a una p√°gina inexistente: </p><br><p><img src="https://habrastorage.org/webt/kr/tn/xh/krtnxhmsl0ebss-4smhhd2otbzq.png"></p><br><p>  A continuaci√≥n, intentamos acceder a la consola a trav√©s del navegador: </p><br><p><img src="https://habrastorage.org/webt/ou/bg/wp/oubgwpkdiof-enlikzm0sq0djns.png"></p><br><p>  Bueno, finalmente, formulamos una solicitud para iniciar la aplicaci√≥n de la calculadora (en este ejemplo, el vector para MAC OS X): </p><br><p><img src="https://habrastorage.org/webt/hq/kl/eg/hqklegn3xqxh-zgkhk-yv1mrrlw.png"></p><br><h3 id="blizzard-desktop-application">  Aplicaci√≥n de escritorio de Blizzard </h3><br><p>  No solo los desarrolladores y usuarios habituales son susceptibles a un ataque como el enlace DNS, sino tambi√©n los jugadores.  Aqu√≠ nuevamente encontramos un problema de servicio JSON-RPC que sobresale en este caso en localhost en el puerto 1120.  El servicio permite realizar actualizaciones, cambiar configuraciones y otras opciones de servicio. </p><br><p>  En este caso, la autenticaci√≥n es compatible, pero pasarla haciendo solicitudes desde localhost no es dif√≠cil: </p><br><p><img src="https://habrastorage.org/webt/j-/vy/my/j-vymyf0n5t-wtfnwwl4azfjptc.png"></p><br><p>  Como resultado, puede lograr algo similar: </p><br><p><img src="https://habrastorage.org/webt/o2/iz/wk/o2izwke9cng_-db0zz2chaxpwe8.png"></p><br><p>  M√°s detalles se pueden encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><h3 id="itog-po-desktop-application">  Resumen de la aplicaci√≥n de escritorio: </h3><br><ul><li>  un atacante puede obtener RCE en el sistema principal (tampoco se olvide de VM Escape) </li><li>  un atacante podr√≠a obtener acceso a datos confidenciales, etc. </li></ul><br><h2 id="clouds">  Nubes </h2><br><p>  Bueno, y finalmente, lo m√°s interesante permanece: las nubes.  La conclusi√≥n es que los servicios en la nube a menudo se utilizan para alojar software que analiza a los usuarios que visitan el sitio.  Por ejemplo, al hacer clic en el enlace del encabezado Referer con un navegador sin cabeza para garabatear el recurso desde el cual el cliente fue al sitio.  Este vector de ataque tambi√©n se puede usar, porque en esencia un navegador sin cabeza es un navegador web completo sin una interfaz gr√°fica, pero con soporte para DOM, JS y todo lo dem√°s. </p><br><p>  Volviendo a nuestros carneros, ¬øqu√© podemos hacer en este caso?  De hecho, para un ataque, necesitamos retrasar al usuario (en este caso, el bot) en la p√°gina.  Bueno, para esto podemos usar una imagen en la p√°gina que tiene una longitud de contenido una m√°s de lo que realmente es.  Como resultado, el bot pensar√° que la imagen a√∫n no se ha cargado y permanecer√° en nuestra p√°gina, y luego usaremos nuestra t√©cnica est√°ndar de enlace DNS. </p><br><p>  Como resultado, ya que enviaremos solicitudes desde un proxy, podemos hacer muchas cosas divertidas.  Por ejemplo: </p><br><ul><li>  escanear red interna </li><li>  iniciar sesi√≥n en servicios internos (te√≥ricamente) </li><li>  robar datos de autorizaci√≥n de otros servicios, etc. </li></ul><br><p>  Vayamos directamente a Amazon.  AWS EC2 tiene caracter√≠sticas como el Servicio de metadatos de instancia.  Permite que cualquier entidad EC2 use la API REST ubicada en 169.254.169.254, que revela informaci√≥n sobre la instancia. </p><br><p>  Por ejemplo, aqu√≠ hay una breve lista de servicios similares para varias nubes: </p><br><ul><li>  <strong>AWS</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://169.254.169.254/latest/user-data</a> </li><li>  <strong>Google Cloud</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://169.254.169.254/computeMetadata/v1/</a> </li><li>  <strong>Oc√©ano digital</strong> <a href="">http://169.254.169.254/metadata/v1.json</a> </li><li>  <strong>OpenStack / RackSpace</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://169.254.169.254/openstack</a> </li><li>  <strong>Azure</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://169.254.169.254/metadata/instance</a> </li><li>  <strong>Oracle Cloud</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://169.254.169.254/opc/v1/instance/</a> </li></ul><br><p>  Ahora veamos un caso en el que nos entregamos a AWS. </p><br><p>  Primero, deje que el bot haga una solicitud a la API: </p><br><p><img src="https://habrastorage.org/webt/z1/-o/is/z1-ois7mddxwr0p5g5uluv7r8fa.png"></p><br><p>  En la respuesta, podemos obtener informaci√≥n confidencial, por ejemplo, cr√©ditos en un script que se ejecuta cuando se inicia la m√°quina: </p><br><p><img src="https://habrastorage.org/webt/7j/hh/9d/7jhh9dzzznnbn6telzsx0thw4aa.png"></p><br><p>  A continuaci√≥n, podemos extraer el nombre del nodo con el que continuaremos trabajando: </p><br><p><img src="https://habrastorage.org/webt/e0/30/-w/e030-wpnsjyjtp75xssqozkyreg.png"></p><br><p>  A continuaci√≥n, haremos la siguiente apelaci√≥n por el nombre ya conocido y ¬°bingo! </p><br><p><img src="https://habrastorage.org/webt/cx/c1/x4/cxc1x4gdjj2_zmbws1n7rwmjkas.png"></p><br><p><img src="https://habrastorage.org/webt/re/cb/el/recbelcpwknvcdfx9qqcum90spw.png"></p><br><p>  Recibimos diversa informaci√≥n del usuario, como AccessKeyId, SecretAccessKey, Token, etc. </p><br><p>  Una vez recibidos estos datos, podemos usarlos para la autorizaci√≥n a trav√©s del cliente de la consola: </p><br><p><img src="https://habrastorage.org/webt/iz/sk/oq/izskoqkfrdvdg0ovbnf578vqhhg.png"></p><br><h3 id="obschiy-itog">  El resultado total: </h3><br><p>  Destaquemos los puntos d√©biles comunes que notamos cuando usamos un ataque de enlace DNS: </p><br><ul><li>  API sin autenticaci√≥n </li><li>  Servicios locales sin autenticaci√≥n. </li><li>  Ignorando el par√°metro Host para solicitar </li><li>  Usando http en lugar de https </li></ul><br><p>  Por lo tanto, a pesar de varios argumentos de expertos en el campo de la seguridad pr√°ctica de la informaci√≥n, un ataque de este tipo nace de nuevo en la era de IoT, servicios en la nube, criptomonedas, etc., incluso a pesar de la necesidad de retrasar al cliente del lado del atacante, porque en el mundo de los cines en l√≠nea, Hosting de video y otros servicios que proporcionan contenido al usuario, no es dif√≠cil hacer esto.  Por lo tanto, tenga cuidado al viajar en el mundo en l√≠nea, al comprar otro asistente inteligente y al desarrollar, por supuesto. </p><br><h3 id="istochniki">  Fuentes: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://medium.com/@brannondorsey/attacking-private-networks-from-the-internet-with-dns-rebinding-ea7098a2d325</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://blog.hacker.af/how-your-ethereum-can-be-stolen-using-dns-rebinding</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://medium.com/coinmonks/the-call-is-coming-from-inside-the-house-dns-rebinding-in-eosio-keosd-wallet-e11deae05974</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/transmission/transmission/pull/468</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://labs.mwrinfosecurity.com/advisories/minikube-rce/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://benmmurphy.github.io/blog/2016/07/11/rails-webconsole-dns-rebinding/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://bugs.chromium.org/p/project-zero/issues/detail?id=1471&amp;desc=3#maincol</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://labs.mwrinfosecurity.com/blog/from-">https://labs.mwrinfosecurity.com/blog/from-http-referer-to-aws-security-credentials/</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439522/">https://habr.com/ru/post/439522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439508/index.html">Mitap sobre desarrollo de c√≥digo abierto en Mosc√∫</a></li>
<li><a href="../439510/index.html">Sistema de control distribuido altamente cargado de una central nuclear moderna</a></li>
<li><a href="../439512/index.html">¬øLa edad de los dinosaurios o el reaseguro legalmente verificado?</a></li>
<li><a href="../439514/index.html">Replicaci√≥n de Tarantool: configuraci√≥n y uso</a></li>
<li><a href="../439520/index.html">Prueba de participaci√≥n: ¬ønuevo modelo de negocio en 2019?</a></li>
<li><a href="../439524/index.html">Fortnite es el futuro, pero por razones bastante inesperadas</a></li>
<li><a href="../439526/index.html">Los operadores de telecomunicaciones realizar√°n "pruebas de campo" de la ley de sostenibilidad de Runet</a></li>
<li><a href="../439528/index.html">Seguimiento de llamadas sin costo</a></li>
<li><a href="../439532/index.html">Lo nuevo en JavaScript ES2019</a></li>
<li><a href="../439534/index.html">Programaci√≥n de rendimiento y uso de drones en la producci√≥n de petr√≥leo: 10 conferencias de la conferencia GIS Tech Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>