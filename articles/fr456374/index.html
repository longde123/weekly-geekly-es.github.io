<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèº ü•¶ ‚õ∑Ô∏è Structures de donn√©es d'√©tat de la cha√Æne de blocs Plasma Cash ‚ôçÔ∏è üé∞ üôè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, chers Habrausers! Cet article concerne le web 3.0, Internet avec d√©centralisation. Le Web 3.0 introduit le concept de d√©centralisation comme ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Structures de donn√©es d'√©tat de la cha√Æne de blocs Plasma Cash</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456374/">  Bonjour, chers Habrausers!  Cet article concerne le web 3.0, Internet avec d√©centralisation.  Le Web 3.0 introduit le concept de d√©centralisation comme base de l'Internet moderne; de ‚Äã‚Äãnombreux syst√®mes et r√©seaux informatiques ont besoin de propri√©t√©s de s√©curit√© et de d√©centralisation pour leurs besoins.  La solution de d√©centralisation est appel√©e technologie de registre distribu√© ou blockchain. <br><br><img src="https://habrastorage.org/webt/qd/nd/dv/qdnddvdk76wf5sy2ajwn38jp9w0.jpeg"><br><a name="habracut"></a><br>  Blockchain est un registre distribu√©.  Elle peut √™tre consid√©r√©e comme une √©norme base de donn√©es qui dure √©ternellement et ne change pas dans l'histoire, la blockchain est utilis√©e comme base pour des applications ou services Web d√©centralis√©s. <br><br>  En substance, la blockchain n'est pas seulement une base de donn√©es, c'est une opportunit√© d'augmenter la confiance entre les participants du r√©seau avec la possibilit√© d'ex√©cuter la logique m√©tier sur le r√©seau. <br><br>  Le consensus byzantin augmente la fiabilit√© du r√©seau r√©sout le probl√®me de coh√©rence <br>  L'√©volutivit√© apport√©e par DLT modifie les r√©seaux d'entreprise existants. <br><br>  La blockchain offre de nouveaux avantages tr√®s importants: <br><br><ol><li>  Pr√©vention des erreurs co√ªteuses. </li><li>  Transactions transparentes. </li><li>  Num√©risation des biens immobiliers. </li><li>  Contrats intelligents. </li><li>  Rapidit√© et s√©curit√© des paiements. </li></ol><br>  Opporty PoE est un projet dont le but est d'√©tudier les protocoles cryptographiques et d'am√©liorer les solutions DLT et blockchain existantes. <br><br>  La plupart des syst√®mes de registre distribu√©s publics n'ont pas de propri√©t√©s d'√©volutivit√© - leur d√©bit est plut√¥t faible.  Par exemple, l'√©thereum ne traite que ~ 20 tx / s. <br>  De nombreuses solutions ont √©t√© cr√©√©es pour augmenter la propri√©t√© d'√©volutivit√© et ne pas perdre la d√©centralisation (comme vous le savez, seules 2 sur 3 sont connues: √©volutivit√©, s√©curit√©, d√©centralisation). <br><br>  L'une des plus efficaces est une solution utilisant des sidechains. <br><br><h2>  Concept de plasma </h2><br>  Le concept est que la cha√Æne racine traite un petit nombre de validations √† partir des cha√Ænes enfants, de sorte que la cha√Æne racine agit comme la couche la plus s√ªre et la plus finale pour stocker tous les √©tats interm√©diaires.  Chaque cha√Æne enfant fonctionne comme sa propre blockchain avec son propre algorithme de consensus, mais il y a quelques mises en garde importantes. <br><br><ul><li>  Les contrats intelligents sont cr√©√©s dans la cha√Æne racine et agissent comme un point de contr√¥le sur la cha√Æne enfant dans la cha√Æne racine. </li><li>  Une cha√Æne enfant est cr√©√©e qui fonctionne comme sa propre blockchain avec son propre consensus.  Tous les √âtats de la cha√Æne des processus enfants sont prot√©g√©s par des preuves de fraude, qui garantissent que toutes les transitions entre √âtats sont valides et appliquent un protocole de retrait. </li><li>  Les contrats intelligents sp√©cifiques √† dapp ou √† la cha√Æne enfant (logique d'application) peuvent ensuite √™tre d√©ploy√©s sur la cha√Æne enfant. </li><li>  Les outils n√©cessaires peuvent √™tre transf√©r√©s de la cha√Æne racine √† la cha√Æne enfant. </li></ul><br>  Les validateurs ont des incitations √©conomiques √† agir honn√™tement et √† envoyer des commentaires √† la cha√Æne racine - la couche du r√®glement final de la transaction. <br><br>  En cons√©quence, les utilisateurs de dapp travaillant dans la cha√Æne enfant ne devraient pas du tout interagir avec la cha√Æne racine.  De plus, ils peuvent retirer leur argent √† la cha√Æne racine quand ils le souhaitent, m√™me si la cha√Æne enfant est pirat√©e.  Ces sorties de la cha√Æne enfant permettent aux utilisateurs de stocker leurs fonds en toute s√©curit√© √† l'aide des preuves Merkle, confirmant la propri√©t√© d'un certain montant de fonds. <br><br>  Les principaux avantages du Plasma sont li√©s √† sa capacit√© √† faciliter consid√©rablement les calculs qui surchargent actuellement la cha√Æne principale.  De plus, la blockchain Ethereum peut traiter des ensembles de donn√©es plus √©tendus et plus parall√®les.  Le temps pr√©lev√© sur la cha√Æne racine est √©galement transf√©r√© aux n≈ìuds Ethereum, qui re√ßoivent des exigences de traitement et de stockage moindres. <br><br>  Plasma Cash est une conception qui donne aux jetons r√©seau des num√©ros de s√©rie uniques qui les transforment en jetons uniques.  Les avantages de ceci incluent le manque de besoin de confirmations, un support plus simple pour tous les types de jetons (y compris les jetons non fongibles) et l'att√©nuation contre les sorties massives de la cha√Æne enfant. <br><br>  Le probl√®me du plasma est li√© au concept de "sorties massives" de la cha√Æne enfant.  Dans ce sc√©nario, une sortie simultan√©e coordonn√©e de la cha√Æne fille pourrait potentiellement conduire √† un manque de puissance de calcul pour retirer tous les fonds.  En cons√©quence, les utilisateurs peuvent perdre de l'argent. <br><br><h2>  Options de mise en ≈ìuvre du plasma </h2><br><img src="https://habrastorage.org/webt/vq/qg/hr/vqqghr_ucnoum3q8o1b215zgcic.png"><br><br>  Le plasma de base a de nombreuses options de mise en ≈ìuvre. <br><br>  Les principales diff√©rences sont: <br><br><ul><li>  stocker des informations sur la m√©thode de stockage et de pr√©sentation de l'√©tat, </li><li>  types de jetons (divisible indivisible), </li><li>  s√©curit√© des transactions </li><li>  type d'algorithme de consensus, etc. </li></ul><br>  Les principales variations du plasma: <br><br><ul><li>  Bas√© sur UTXO - chaque transaction se compose d'entr√©es et de sorties: une transaction peut √™tre effectu√©e et d√©pens√©e, la liste des transactions non d√©pens√©es est un √©tat de la cha√Æne enfant elle-m√™me. </li><li>  Compte bas√© - contient simplement une r√©flexion de chaque compte-compte et de son solde, ce type est utilis√© dans ethereum car chaque compte peut √™tre de deux types - un compte utilisateur et un compte de contrat intelligent.  L'avantage de ce type de stockage d'√©tat est sa simplicit√©, et le moins est que cette option n'est pas √©volutive (la propri√©t√© sp√©ciale nonce est utilis√©e pour emp√™cher la transaction d'√™tre ex√©cut√©e deux fois). </li></ul><br>  Le but de cet article est d'expliquer les structures de donn√©es utilis√©es dans la blockchain Plasma Cash. <br><br>  Afin de comprendre exactement comment fonctionne l'engagement, vous devez clarifier le concept de l'arbre Merkle. <br><br><h2>  Les arbres Merkle leur utilisation dans le plasma </h2><br>  Les arbres de Merkle sont une structure de donn√©es extr√™mement importante dans le monde de la blockchain.  Essentiellement, les arbres Merkle nous donnent la possibilit√© de capturer certains ensembles de donn√©es d'une mani√®re qui cache les donn√©es, mais permet aux utilisateurs de prouver que certaines des informations √©taient dans l'ensemble.  Par exemple, si j'ai dix nombres, je peux cr√©er une preuve pour ces nombres, puis prouver qu'un nombre particulier se trouvait dans cet ensemble de nombres.  Ces √©preuves ont une petite taille constante, ce qui les rend bon march√© √† publier sur Ethereum. <br><br>  Vous pouvez l'utiliser pour un ensemble de transactions.  Vous pouvez √©galement prouver qu'une transaction particuli√®re se trouve dans cet ensemble de transactions.  C'est exactement ce que fait l'op√©rateur.  Chaque bloc se compose d'un ensemble de transactions qui se transforment en arbre Merkle.  La racine de cet arbre est la preuve, qui est publi√©e dans Ethereum avec chaque bloc de plasma. <br><br>  Les utilisateurs devraient pouvoir retirer leurs fonds de la cha√Æne plasma. Lorsque les utilisateurs souhaitent quitter la cha√Æne plasma, ils envoient la transaction de ¬´sortie¬ª √† Ethereum. <br><br>  Plasma Cash utilise un Merkle Tree sp√©cial qui permet de ne pas valider le bloc entier mais de ne valider que les branches qui correspondent au token de l'utilisateur. <br><br>  Autrement dit, pour transf√©rer un jeton, vous devez parcourir l'historique et analyser uniquement les jetons dont un certain utilisateur a besoin.Lors du transfert d'un jeton, l'utilisateur transmet simplement l'historique complet √† un autre utilisateur et il peut d√©j√† authentifier toute l'histoire - et surtout, le faire tr√®s rapidement. <br><br><img src="https://habrastorage.org/webt/wx/is/3z/wxis3zgyhtyh-ruopuffedzcwsk.png"><br><br><h2>  Structures de donn√©es Plasma Cash pour stocker l'√©tat et l'historique </h2><br>  N√©anmoins, il est n√©cessaire de n'utiliser que quelques arbres de Merkle, car il est n√©cessaire d'obtenir une preuve d'inclusion et √©galement une preuve de non-inclusion de la transaction dans le bloc, par exemple - <br><br><ul><li>  Arbre de merkle clairsem√© </li><li>  Patricia trie </li></ul><br>  Opporty a termin√© la mise en ≈ìuvre de Sparse Merkle Tree et Patricia Trie <br><br>  Un arbre Merkle clairsem√© est similaire √† un arbre Merkle standard, sauf que les donn√©es qu'il contient sont index√©es et chaque point de donn√©es est plac√© sur une feuille qui correspond √† l'index de ce point de donn√©es <br><br>  Disons que nous avons un arbre Merkle √† quatre feuilles.  Nous remplirons cet arbre de quelques lettres (A, D) pour d√©monstration.  La lettre A est la premi√®re lettre de l'alphabet, nous devons donc la mettre sur la premi√®re feuille.  De m√™me, nous pouvons mettre D sur la quatri√®me feuille. <br><br>  Que se passe-t-il donc dans les deuxi√®me et troisi√®me feuilles?  Nous les laissons simplement vides.  Plus pr√©cis√©ment, une valeur sp√©ciale (par exemple, z√©ro) est plac√©e au lieu de placer la lettre. <br><br>  L'arbre ressemble finalement √† ceci: <br><br><img src="https://habrastorage.org/webt/5g/9g/18/5g9g18uvkq5oizxi81z8pbeij48.png"><br><br>  La preuve d'inclusion fonctionne exactement comme dans un arbre Merkle normal. Que se passe-t-il si nous voulons prouver que C ne fait pas partie de cet arbre Merkle?  C'est facile!  Nous savons que si C faisait partie d'un arbre, ce serait sur la troisi√®me feuille.  Si C ne fait pas partie de l'arbre, alors la troisi√®me feuille doit √™tre nulle. <br><br>  Tout ce qui est n√©cessaire est la preuve standard de l'inclusion de Merkle, montrant que la troisi√®me feuille est nulle. <br><br>  La meilleure partie d'un arbre Merkle clairsem√© est qu'ils repr√©sentent vraiment des magasins de valeurs-cl√©s √† l'int√©rieur de l'arbre Merkle! <br><br>  Voici une partie du code du protocole PoE qui impl√©mente la construction Sparse Merkle Tree. <br><br><pre><code class="plaintext hljs">class SparseTree { //... buildTree() { if (Object.keys(this.leaves).length &gt; 0) { this.levels = [] this.levels.unshift(this.leaves) for (let level = 0; level &lt; this.depth; level++) { let currentLevel = this.levels[0] let nextLevel = {} Object.keys(currentLevel).forEach((leafKey) =&gt; { let leafHash = currentLevel[leafKey] let isEvenLeaf = this.isEvenLeaf(leafKey) let parentLeafKey = leafKey.slice(0, -1) let neighborLeafKey = parentLeafKey + (isEvenLeaf ? '1' : '0') let neighborLeafHash = currentLevel[neighborLeafKey] if (!neighborLeafHash) { neighborLeafHash = this.defaultHashes[level] } if (!nextLevel[parentLeafKey]) { let parentLeafHash = isEvenLeaf ? ethUtil.sha3(Buffer.concat([leafHash, neighborLeafHash])) : ethUtil.sha3(Buffer.concat([neighborLeafHash, leafHash])) if (level == this.depth - 1) { nextLevel['merkleRoot'] = parentLeafHash } else { nextLevel[parentLeafKey] = parentLeafHash } } }) this.levels.unshift(nextLevel) } } } }</code> </pre> <br>  Ce code est assez trivial.  Nous avons un magasin de valeurs-cl√©s avec preuve d'inclusion / non-inclusion. <br><br>  √Ä chaque it√©ration, un niveau sp√©cifique de l'arborescence finale est rempli, en commen√ßant par le dernier.  Selon la cl√© de la feuille courante qui est paire ou impaire, nous prenons deux feuilles adjacentes et consid√©rons le hachage du niveau actuel.  Si nous atteignons la fin, nous √©crivons un seul merkleRoot - un hachage commun. <br><br>  Vous devez comprendre que cet arbre est d√©j√† rempli de valeurs initialement vides!  Et si nous stockons une √©norme quantit√© de jetons IDS.  nous avons une taille d'arbre √©norme et cela prend tr√®s longtemps √† g√©n√©rer! <br><br>  Il existe de nombreuses solutions √† cette non optimisation, mais Opporty a d√©cid√© de changer cet arbre en Patricia Trie. <br><br>  Patricia Trie est un m√©lange de Radix Trie et Merkle Trie. <br><br>  La cl√© de donn√©es Radix Trie stockera le chemin de donn√©es lui-m√™me!  Cela vous permet de cr√©er une structure de donn√©es optimis√©e pour la m√©moire! <br><br><img src="https://habrastorage.org/webt/af/zc/ly/afzclyhgeydkylbnn5hrjj0gs-g.png"><br><br><h3>  Mise en ≈ìuvre de l'opposition </h3><br><pre> <code class="plaintext hljs">buildNode(childNodes, key = '', level = 0) { let node = {key} this.iterations++ if (childNodes.length == 1) { let nodeKey = level == 0 ? childNodes[0].key : childNodes[0].key.slice(level - 1) node.key = nodeKey let nodeHashes = Buffer.concat([Buffer.from(ethUtil.sha3(nodeKey)), childNodes[0].hash]) node.hash = ethUtil.sha3(nodeHashes) return node } let leftChilds = [] let rightChilds = [] childNodes.forEach((node) =&gt; { if (node.key[level] == '1') { rightChilds.push(node) } else { leftChilds.push(node) } }) if (leftChilds.length &amp;&amp; rightChilds.length) { node.leftChild = this.buildNode(leftChilds, '0', level + 1) node.rightChild = this.buildNode(rightChilds, '1', level + 1) let nodeHashes = Buffer.concat([Buffer.from(ethUtil.sha3(node.key)), node.leftChild.hash, node.rightChild.hash]) node.hash = ethUtil.sha3(nodeHashes) } else if (leftChilds.length &amp;&amp; !rightChilds.length) { node = this.buildNode(leftChilds, key + '0', level + 1) } else if (!leftChilds.length &amp;&amp; rightChilds.length) { node = this.buildNode(rightChilds, key + '1', level + 1) } else if (!leftChilds.length &amp;&amp; !rightChilds.length) { throw new Error('invalid tree') } return node }</code> </pre><br>  Autrement dit, nous parcourons r√©cursivement et construisons s√©par√©ment les sous-arbres enfants gauche et droit.  En m√™me temps, construire la cl√© comme chemin dans cet arbre! <br><br>  Cette solution est encore plus banale et fonctionne plus rapidement tout en √©tant assez optimis√©e!  En fait, l'arbre Patricia peut √™tre encore optimis√© en introduisant de nouveaux types de n≈ìuds - n≈ìud d'extension, n≈ìud de branche, etc., comme cela est fait dans le protocole ethereum, mais cette impl√©mentation satisfait toutes nos conditions - nous avons obtenu une structure de donn√©es rapide et optimis√©e en m√©moire. <br><br>  En mettant en ≈ìuvre ces structures de donn√©es, Opporty a permis de dimensionner Plasma Cash car il permet de v√©rifier l'historique du token et l'inclusion de ne pas inclure le token dans l'arbre!  Cela vous permet d'acc√©l√©rer consid√©rablement la validation des blocs et de la cha√Æne enfant plasma elle-m√™me. <br><br><h3>  Liens utiles: </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plasma papier blanc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git hub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cas d'utilisation et description de l'architecture</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Papier r√©seau Lightning</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456374/">https://habr.com/ru/post/fr456374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456362/index.html">Designer de niveau 6: comment nous motivons et d√©veloppons les designers</a></li>
<li><a href="../fr456366/index.html">Comment j'ai con√ßu la LED HEART Box</a></li>
<li><a href="../fr456368/index.html">Effectuer des transactions publiques et priv√©es sur la blockchain JPMorgan Quorum √† l'aide de Web3</a></li>
<li><a href="../fr456370/index.html">Impl√©menter la QoS dans le stockage Qsan</a></li>
<li><a href="../fr456372/index.html">SimbirSoft invite les professionnels de l'informatique √† un √©t√© intensif 2019</a></li>
<li><a href="../fr456376/index.html">Not One Spring Boot: un aper√ßu des alternatives</a></li>
<li><a href="../fr456380/index.html">Journ√©e portes ouvertes de la Facult√© de Programmation en Netologie</a></li>
<li><a href="../fr456384/index.html">PVS-Studio Graphique de d√©veloppement des capacit√©s de diagnostic</a></li>
<li><a href="../fr456386/index.html">Biblioth√®ques ouvertes pour la visualisation du contenu audio</a></li>
<li><a href="../fr456388/index.html">Tableau de d√©veloppement de diagnostic dans PVS-Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>