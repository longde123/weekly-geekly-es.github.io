<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ô üò∫ üåΩ Bagaimana cara kerja MSTP ü•É üç∏ üë®üèø‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari ini mari kita bicara tentang MSTP. Sebelum Anda berurusan dengan MSTP, Anda harus membiasakan diri dengan protokol STP dan RSTP . MSTP adalah mod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara kerja MSTP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419785/"> Hari ini mari kita bicara tentang MSTP.  Sebelum Anda berurusan dengan MSTP, Anda harus membiasakan diri dengan protokol <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">STP</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RSTP</a> .  MSTP adalah modifikasi dari RSTP, dan karenanya STP.  Jika RSTP adalah STP yang sama, hanya dengan pengiriman BPDU dan STP yang lebih dioptimalkan secara umum, lalu mengapa kita harus membuat MSTP yang bekerja berdasarkan RSTP?  Fitur utama MSTP adalah kemampuan untuk bekerja dengan VLAN.  Beberapa pembaca mungkin berkata, "Tunggu, bukankah Cisco pvst + dan rpvst + dapat bekerja dengan vlan?"  RPVST + dan PVST + cukup menjalankan instance RSTP atau STP mandiri dalam batas vlan tunggal.  Tapi di sini ada masalah: <br><br><ul><li>  RPVST + dan PVST + hanya tersedia pada peralatan Cisco, dan pada Cisco tidak ada STP dan RSTP klasik.  Apa yang harus kita lakukan jika vendor lain berpartisipasi dalam topologi? </li><li>  Setiap instance dari STP dan RSTP mengirimkan BPDU setiap dua detik.  Jika 100 vlanes dilewati ke port trunk, berarti 100 pesan akan dikirim dalam 2 detik.  Yang tidak terlalu bagus. </li><li>  Cisco memiliki batasan jumlah instance STP atau RSTP pada satu sakelar, tergantung pada modelnya.  Artinya, menambahkan 128 vlan pada beberapa saklar, kita akan menghadapi pembatasan seperti itu.  Tautkan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">sini</a> </li></ul><a name="habracut"></a><br>  Semua masalah ini berhasil diselesaikan oleh protokol multi-vendor MSTP.  Kami akan mencoba menangani pekerjaannya.  Skema untuk membangun topologi tanpa loop di RSTP adalah membangun grafik tanpa persimpangan terlepas dari topologi logis, tidak mempertimbangkan di mana dan bagaimana vlan dikonfigurasi.  Di MSTP kami mendapat kesempatan untuk menggabungkan vlan tertentu ke dalam grup dan membangun topologi terpisah untuk setiap grup.  Sebagai contoh, lihat topologi seperti itu: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/893/ec7/7a1/893ec77a1fc1abfe79a50798cbd67141.jpg" alt="Gambar saya"></a> <br><br>  PC bertindak sebagai segmen jaringan.  PC1, PC3 adalah segmen jaringan di mana vlan digunakan dari 10 hingga 50, dan PC2, PC4 adalah vlan dari 50 hingga 100. Pada Sw1-4 beralih sendiri, vlan dari 10 hingga 100 dibuat. Jika kita menggunakan protokol RSTP, maka segmen PC1 dan PC2 untuk sampai ke segmen PC3 dan PC4, masing-masing, Anda harus menggunakan satu jalur umum, memilihnya dari dua kemungkinan: <b>Sw1-Sw2-Sw4</b> atau <b>Sw1-Sw3-Sw4</b> .  Sayangnya, tidak akan berhasil membangun sirkuit dengan distribusi beban dan salah satu jalur ini akan diblokir dan kosong.  Dengan bantuan PVST + dan RPVST +, akan dimungkinkan untuk melakukan ini, tetapi ada masalah yang disebutkan di atas.  MSTP datang membantu kami dalam hal ini, membuat instance RSTP untuk sekelompok vlan 10-50 dan 50-100.  Dapat dikonfigurasikan bahwa sakelar Root untuk Vlan 10-50 adalah Sw3, dan untuk 50-100 - Sw2.  Jalur <b>Sw1-Sw3-Sw4</b> akan digunakan oleh vlan 10-50, jalur <b>Sw1-Sw2-Sw4</b> akan digunakan oleh vlan 50-100.  Idenya adalah untuk membuat instance yang akan menggabungkan vlan dan membangun pohon RSTP secara terpisah untuk setiap instance.  Dengan demikian, menggabungkan vlana 10-50 dan 51-100 dalam contoh berbeda, protokol MSTP akan memungkinkan Anda untuk membangun pohon independen untuk setiap contoh.  Konfigurasi akan terlihat seperti ini: <br><blockquote>  konfigurasi span-tree mst <br>  catatan nama <br>  contoh 1 vlan 10-50 <br>  contoh 2 vlan 51-100 <br></blockquote>  Ini akan identik pada semua 4 switch.  Switch dengan konfigurasi identik dari parameter ini membuat satu wilayah.  Mengenai daerah, kami akan berbicara lebih terinci di bawah ini, sementara kami mempertimbangkan topologi dalam satu wilayah.  Untuk setiap instance, Root Bridge-nya dipilih.  Pada Sw3, kita memasukkan perintah <b>utama root spanning-tree mst 1</b> sehingga Sw3 adalah Bridge Root untuk 10-50 vlan, dan pada Sw2 <b>spanning-tree mst 2 root primer</b> untuk 51-100 vlan.  Meringkas, setiap instance - <b>multiple instance-tree instance (MSTI)</b> - menggabungkan vlana.  Dan setiap wilayah menggabungkan sakelar yang memiliki MSTI yang sama.  Sebenarnya, di wilayah saklar harus memiliki parameter berikut: <br><br><ul><li>  nama wilayah - nama wilayah.  Didefinisikan oleh perintah nama. </li><li>  tingkat revisi - parameter perubahan konfigurasi. </li><li>  MSTI. </li></ul><br>  Di setiap wilayah ada instance MSTI 0 (instance 0), yang dibuat secara default dan mencakup semua vlan yang tidak termasuk dalam instance lain.  Instance 0 disebut IST: <br>  <b>Internal Spanning Tree (IST)</b> adalah salinan khusus dari spanning tree yang, secara default, ada di setiap wilayah MST.  IST menetapkan angka 0 (Instance 0).  Ia dapat mengirim dan menerima bingkai BPDU dan berfungsi untuk mengelola topologi di suatu wilayah.  Semua VLAN yang dikonfigurasi pada sakelar di wilayah MST ini terikat ke IST secara default. <br>  Root Bridge untuk IST disebut Regional Root Bridge.  Melalui IST frame BPDU ditransmisikan melalui mana pohon untuk setiap instance diinstal.  Mari kita lihat seperti apa tampilan BDPU di wilayah ini: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/603/7e8/9b6/6037e89b6888f6219b2bd82c2271c761.jpg" alt="Gambar saya"></a> <br><br>  Sebelum dimulainya Perpanjangan MST, BPDU MSTP sangat sulit untuk dipisahkan dari BPDU RSTP dan, secara umum, IST adalah RSTP klasik.  MSTP hanya menambahkan data pada MSTI.  BPDU menyimpan informasi Root Bridge untuk Instance 0-2.  Dengan demikian, untuk semua vlan dan otoritas, hanya satu BPDU yang dikirim, yang berisi semua informasi yang diperlukan.  Ini adalah penghematan besar dibandingkan PVST + dan RPVST +.  Mari kita lihat output dari show spanning-tree mst command pada Sw2 switch: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/211/365/372/2113653723bfbe70f327a68a1ea4f27d.jpg" alt="Gambar saya"></a> <br><br>  Misalnya 0 ada bidang khusus - Regional Root.  Regional Root, kami memilih Sw3 menggunakan <b>perintah utama spanning-tree mst 0 root</b> .  Root Regional adalah saklar root untuk MSTI 0 dalam wilayah yang sama.  Untuk MSTI1, Root juga Sw3, dan untuk MSTI2, itu adalah Sw2.  Dalam hal pemblokiran dan konvergensi pelabuhan, MSTP mengulangi prinsip-prinsip RSTP berdasarkan kerjanya, jadi saya pikir bahwa pekerjaan MSTP dalam satu wilayah cukup dapat dimengerti.  Pertimbangkan topologi dengan dua wilayah: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/501/c74/f20/501c74f206c089449ca1238133fa5dd8.jpg" alt="Gambar saya"></a> <br><br>  Tentang Wilayah A, dikatakan di atas, sekarang mari kita coba mencari tahu bagaimana daerah berinteraksi satu sama lain.  Di wilayah B, sakelar memiliki konfigurasi berikut: <br><blockquote>  konfigurasi span-tree mst <br>  nama WilayahB <br>  contoh 1 vlan 10-30 <br>  contoh 2 vlan 31-60 <br></blockquote>  Pada saat yang sama, Sw9 adalah <b>spanning-tree mst 1 root primer</b> adalah switch root untuk Vlan 10-30, dan Sw10 adalah <b>spanning-tree mst 2 root primer</b> adalah switch root untuk Vlan 31-60. <br><br>  Konstruksi pohon STP di Wilayah B mirip dengan Wilayah A dan telah dijelaskan di atas.  Katakan saja, karena kami tidak mengatur Root Bridge untuk MSTI 0 di Wilayah B, itu akan dipilih oleh alamat MAC terendah di antara Sw9-12.  Alamat MAC terkecil adalah Sw9.  Output perintah dengan Sw10: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/7f4/52a/bbd7f452a27ace3d97fc9b714bfed31a.jpg" alt="Gambar saya"></a> <br><br>  Untuk MSTI 0 Regional Root 5000.0009.0000 (Sw9).  Di bawah ini kita akan membahas mengapa Sw9 dan mengapa prioritas atau alamat poppy tidak ada hubungannya dengan itu.  Sekarang kami lebih tertarik pada pertanyaan tentang apa yang akan terjadi di perbatasan.  Agar pohon STP dibangun dengan benar antar wilayah, pohon yang sama dibuat untuk semua wilayah menggunakan MST0 (IST).  Pohon seperti itu disebut CIST.  Mari kita perkenalkan juga konsep CST.  Jadi, ingat dulu IST: <br><br><ul><li>  <b>Internal Spanning Tree (IST)</b> adalah salinan khusus dari spanning tree yang ada secara default di setiap wilayah MST.  IST menetapkan angka 0 (Instance 0).  IST dapat mengirim dan menerima bingkai BPDU dan berfungsi untuk mengelola topologi di suatu wilayah.  Secara default, semua VLAN di wilayah yang sama terikat ke IST.  Jika beberapa MSTI dibuat di suatu wilayah, maka VLAN yang tidak terkait dengannya tetap terikat pada IST.  Di wilayah kami A dan B, pohon STP independen sedang dibangun untuk vlan yang tidak jatuh ke otoritas 1 dan 2. Jembatan Root di IST disebut Regional Root. </li><li>  <b>Common Spanning Tree (CST)</b> - pohon yang menghubungkan wilayah dan semua sakelar STP, RSTP, PVST +, RPVST + (bukan sakelar MST). </li><li>  <b>Common dan Internal Spanning Tree (CIST)</b> - pohon spanning tunggal yang menggabungkan CST dan IST dari setiap wilayah MST. </li></ul><br>  Untuk memahami batasan setiap pohon, saya sarankan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">artikel</a> berikut. <br><br>  IST adalah pohon dalam satu wilayah, CIST adalah pohon antar daerah, CST adalah pohon yang menggabungkan pohon dalam suatu wilayah dan pohon untuk menghubungkan daerah. <br><br>  Karena kami memperkenalkan perintah <b>utama root spanning-tree mst 0</b> pada Sw3, CIST Root Bridge untuk kedua wilayah adalah Sw3.  Jika hanya ada satu wilayah di seluruh topologi, maka Jembatan Root Regional dan Jembatan Root CIST bersamaan.  Jika ada banyak daerah, maka Regional Root terbaik di antara semua daerah dipilih.  Juga, switch yang menggunakan protokol selain MSTP dapat digunakan dalam pemilihan untuk peran Jembatan Root CIST.  Jika Anda mencoba membangun gambaran keseluruhan, Anda dapat menjelaskan interaksi wilayah sebagai berikut: Setiap wilayah tampaknya merupakan kombinasi dari sejumlah sakelar dan disajikan ke sakelar lain sebagai satu sakelar virtual besar.  Artinya, jika kita mempertimbangkan topologi kita melalui mata wilayah B, maka kita mendapatkan gambar berikut untuknya: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/1d9/115/6f5/1d91156f550268ff06521adfff7a4136.jpg" alt="Gambar saya"></a> <br><br>  Ini akan serupa untuk wilayah A, wilayah B akan diwakili oleh satu saklar.  Di setiap wilayah, setiap sakelar memiliki Port Root yang menghubungkannya dengan Root Regional.  Setiap wilayah juga memilih satu Root Port untuk MSTI 0, yang mengarah ke Bridge Root CIST yang umum.  Port-port ini bisa menjadi port Gi1 / 1 pada Sw9 dan Sw10, karena mereka menghubungkan wilayah.  Dalam topologi kami, Sw9 memiliki Bridge ID terbaik, kemudian Root Port dipilih di atasnya, dan pada Sw10 port Gi1 / 1 diblokir.  Pada Sw9, untuk MSTI 0, port Gi1 / 1 adalah Port Root, tetapi, misalnya, untuk MSTI 1 dan 2, ada Port Root untuk Bridge Root Instance dan port yang mengarah ke Bridge Root CIST menerima peran baru - Master.  Dari satu daerah ke daerah lain hanya ada satu saluran kerja atau dengan kata lain hanya satu port Master dan hanya pada satu saklar.  Berikut adalah informasi tentang MST pada sakelar Sw9, di mana port Master akan dipilih, perhatikan port Gi1 / 1: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/7f4/52a/bbd7f452a27ace3d97fc9b714bfed31a.jpg" alt="Gambar saya"></a> <br><br>  Port ini untuk MSTI 0, seperti yang kami katakan, memiliki peran Root, dan untuk MSTI 1-2 Master.  Juga memperkenalkan saluran jenis baru - P2p Bound (RSTP).  Tipe Batas ditugaskan ke port yang membatasi wilayah lain atau varian lain dari protokol STP.  Informasi tentang Jembatan Root CIST ditransmisikan ke wilayah melalui port Master, fitur khas adalah bahwa port ini tidak mengirim BPDU dengan sendirinya, tetapi hanya menerima, tidak seperti jenis port P2P di RSTP.  Pengecualian hanya BPDU dengan flag TC (perubahan topologi).  Mari kita lihat bagaimana saklar di satu wilayah memproses BPDU dari wilayah lain.  Seperti yang kami katakan pada Master port Gi1 / 1 Sw9, BPDU dari Sw1 akan diterima, sementara Sw9 sendiri tidak akan dikirim, pertimbangkan lagi: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/4d8/35e/f5a/4d835ef5a9fdc2514075fab810cf5cb9.jpg" alt="Gambar saya"></a> <br><br>  Sw1 mengirimkan BPDU yang sama, terlepas dari apakah saklar mengirim BPDU dalam wilayah atau di luar wilayah.  Setelah menerima BPDU ini, Sw9 hanya akan memproses informasi sebelum dimulainya bidang Ekstensi MST, hanya informasi ini yang digunakan untuk membangun pohon sebagai contoh 0. Di sini Anda dapat melihat fakta yang menarik - Root Identifier (50: 00: 00: 03: 00: 00) cocok dengan Identifiet Bridge (50: 00: 00: 00: 00), meskipun ia mengirim paket Sw1 dengan Bridge Identifier - 50: 00: 00: 01: 00: 00: 00.  Ini mengkonfirmasi teori kami bahwa setiap wilayah untuk daerah lain diwakili oleh satu saklar virtual besar.  Anda juga bisa mengatakan bahwa di antara wilayah kami memiliki RSTP klasik.  Tapi mari kita bicara tentang biaya jalur Root.  Ada dua jenis Biaya Path - internal dan eksternal.  Biaya Path Root, yang menunjuk ke MSTI 0, adalah eksternal.  Dan terlepas dari kenyataan bahwa ada satu saluran lagi dari Sw1 ke Root Bridge (Sw3), masih ditunjukkan sebagai nol.  Seolah Root Bridge sendiri yang mengirimnya.  Biaya Internal Root Path tercantum dalam bidang di bawah Ekstensi MST.  Biaya Path Root Internal CIST menunjukkan biaya path ke Regional Root Bridge untuk MSTI 0, dan bidang di bawah MSTID 1 dan 2 menunjukkan Biaya Path Root Internal ke Root Bridge untuk masing-masing contoh.  Biaya Path Root eksternal memiliki peran khusus dan sangat penting, itu akan menentukan Jembatan Root Regional, dan bukan prioritas dan alamat poppy, kami membuat komentar tentang ini di atas.  Sakelar yang memiliki Biaya Jalur Root terkecil hingga Jembatan Root CIST akan menjadi Jembatan Root Regional!  Misalnya, Sw9 dan Sw10 memiliki Biaya Jalur Root sebesar 20.000, sama dengan biaya port Gi1 / 1.  Dan hanya setelah itu mereka mulai membandingkan ID Bridge mereka.  Mari kita periksa ini, ubah biaya tautan ke Sw10 dan pada saat yang sama tingkatkan prioritasnya ke maksimum untuk mengecualikan pilihannya untuk memilih Regional Root berdasarkan prioritas.  Kami memperkenalkan perintah berikut: <br><blockquote>  Sw10 (config-if) # spanning-tree mst 0 priority 61440 <br>  Sw10 (config-if) # antarmuka gigabitEthernet 1/1 <br>  Sw10 (config-if) # spanning-tree mst 0 biaya 10000 <br></blockquote>  Dan kami mendapatkan bahwa Sw10, meskipun memiliki prioritas yang mengerikan, telah menjadi Jembatan Root Regional: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/e5b/abd/51c/e5babd51cd3a12bfbe4e0ab94d9b474a.jpg" alt="Gambar saya"></a> <br><br>  Dengan demikian, pemilihan Jembatan Root Regional terjadi dalam urutan ini dan Jembatan Root Regional tidak pernah bisa menjadi saklar tanpa port batas: <br><br><ul><li>  Biaya jalur eksternal terendah ke jembatan Root CIST. </li><li>  Pengidentifikasi Jembatan Regional Terendah. </li><li>  CIST Bridge Identifier dari BPDU dari wilayah dengan CIST Root Bridge. </li></ul><br>  Jika, misalnya, kami menambahkan tautan antara Sw9 dan Sw4 dan berpikir tentang tautan mana yang akan menjadi Master, maka dengan semua parameternya sama, bidang CIST Bridge Identifier, yang lebih rendah dari Ekstensi MST, akan menjadi bidang penentu.  Kami berbohong sedikit ketika kami mengatakan bahwa Sw9 tidak melihat data di bawah Ekstensi MST.  Dalam hal ini, Pengidentifikasi Jembatan CIST dari Ekstensi MST akan dihitung. <br>  Sekarang mari kita lihat perilaku MST ketika kita menambahkan switch RPVST: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/d40/eff/45b/d40eff45b3025e0e1b47b6a352199390.jpg" alt="Gambar saya"></a> <br><br>  Ada dua kasus yang mungkin: <br><br><ol><li>  Root Bridge dimiliki oleh RPVST. </li><li>  Root Bridge dimiliki oleh MSTP. </li></ol><br>  Pertimbangkan dulu kasus di mana Sw3 terus menjadi Jembatan Root CIST (mis. Kasus 2).  Dalam hal ini, Sw10 dan Sw12 segera setelah mereka menerima BPDU dari RSTP1 dan RSTP2 untuk setiap vlan, mereka akan mengubah tipe port Gi1 / 0 ke P2p <b>Bound (PVST)</b> .  Jenis ini berarti bahwa Sw10 dan Sw12 pada port ini terhubung ke switch RPVST dan akan mulai mengirim salinan BPDU untuk MSTI0 (yaitu, tanpa bidang di bawah Ekstensi MST) ke semua vlan yang diizinkan di port ini.  Dengan demikian, RSTP1 dan RSTP2 tidak akan melihat bahwa Sw10 dan Sw12 menggunakan protokol yang berbeda.  Teknologi ini dalam MSTP disebut <b>Simulasi PVST,</b> dan dengan itu kami mendapatkan koordinasi antara switch yang berbeda. <br><br>  Kasus ketika Root Bridge berada di antara sakelar RPVST lebih kompleks dan tidak direkomendasikan.  Misalkan kita memiliki RSTP1 adalah Root Bridge untuk semua vlan.  Untuk mempermudah, kami mengasumsikan bahwa <b>vlan 1-3</b> diciptakan dan perintah <b>spanning-tree vlan 1-3 priority 12288</b> diperkenalkan, prioritas terendah di antara sakelar RSTP dan MSTP.  Sw10 akan mulai menerima BPDU untuk masing-masing vlana.  Sangat penting untuk dipahami bahwa hanya BPDU untuk Vlan 1 yang akan diproses oleh saklar MSTP. Bagaimana ini terjadi? <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/d40/eff/45b/d40eff45b3025e0e1b47b6a352199390.jpg" alt="Gambar saya"></a> <br><br>  Bergantung pada berapa banyak vlan yang dikonfigurasi, begitu banyak paket RPVST + BPDU akan dikirim, tetapi selain itu, itu juga akan dikirim melalui BPDU vlan asli dengan alamat mac tujuan - 01: 80: c2: 00: 00: 00.  Ini adalah alamat poppy yang digunakan MSTP, switch PVST dan RPVST menggunakan alamat poppy yang berbeda - 01: 00: 0c: cc: cc: cd: cd.  Terlepas dari vlan mana yang dikonfigurasi sebagai asli, informasi untuk vlan pertama akan dikirimkan dalam BPDU ini.  Hanya paket ini yang akan diproses untuk membangun struktur pohon oleh saklar MSTP.  BPDU yang tersisa untuk vlanes tertentu akan digunakan untuk memverifikasi perlindungan simpul akar selama simulasi PVST (simulasi PVST simulasi konsistensi berbasis root-guard).  Cek seperti apa?  Segera setelah kita mengkonfigurasi RSTP1 menggunakan perintah <b>spanning-tree vlan 1-3 priority 12288</b> , maka pada Sw10 kita akan segera mendapatkan kesalahan: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/7a0/098/25f/7a009825fc7dd326bc5e426493500385.jpg" alt="Gambar saya"></a> <br><br>  Mari kita coba jelaskan.  Sw10 mengadopsi vlan BPDU asli untuk vlan 1 dengan prioritas 12288 +1.  Diproses dan memutuskan bahwa Gi1 / 0 adalah Root Port-nya.  Kemudian datang BPDU PVST untuk sisa vlan (1-3), ia mempelajarinya untuk memeriksa integritas switch root dan ada prioritas 12288 + 2, 12288 + 3 untuk vlan 2-3, yang lebih dari 12288 +1.  Integritas runtuh - di satu sisi, itu haruslah Root Port, dan mendapatkan prioritas lain yang lebih tinggi memaksa port untuk beralih ke peran yang Ditunjuk.  Ambiguitas semacam itu tidak diperbolehkan untuk protokol semacam itu, dan MST memblokir port ini, mengubahnya menjadi status BKN, melaporkan kesalahan - <b>Memblokir port root Gi1 / 0: PVD BPDU inferior inferior yang diterima</b> .  Untuk mencegah hal ini, perlu bahwa tidak ada vlan tunggal yang BPDU-nya akan ditransmisikan pada port ini memiliki prioritas lebih rendah (lebih) daripada vlan 1. Yaitu, jika kita mengurangi prioritas vlan 2‚Äì3 menjadi 4096, itu jelas kurang dari vlana 1, lalu perbaiki masalah ini. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/0f6/4a6/c6d/0f64a6c6d9b21ae127cb5572c7ade92d.jpg" alt="Gambar saya"></a> <br><br>  Seperti yang Anda lihat, muncul pesan yang mengembalikan operasi port yang benar - <b>Inkonsistensi Simulasi PVST dihapus pada port GigabitEhternet 0/1</b> . <br><br>  Tentang ini, saya pikir, untuk menyelesaikan percakapan tentang MSTP.  Tautan yang bermanfaat di bawah ini: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">www.cisco.com/c/en/us/support/docs/lan-switching/multiple-instance-stp-mistp-8021s/116464-configure-pvst-00.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">habrahabr.ru/post/128172</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">www.cisco.com/c/ru_s/support/docs/lan-switching/multiple-instance-stp-mistp-8021s/116464-configure-pvst-00.pdf</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">www.cisco.com/c/id/id/td/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/CLIConfigurationGuide/MST.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">networkengineering.stackexchange.com/questions/28716/multiple-spanning-tree-terminology-cst-ist-cist-and-exact-behavior</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">blog.sbolshakov.ru/11-3-mstp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">blog.ine.com/2010/02/22/understanding-mstp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">networklessons.com/spanning-tree/multiple-spanning-tree-mst</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419785/">https://habr.com/ru/post/id419785/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419775/index.html">Versi saya dari "perangkat untuk mimpi jernih" adalah sejarah singkat dan deskripsi dari versi pertama</a></li>
<li><a href="../id419777/index.html">Cara menjual server NNN di Belanda dan tidak dibiarkan dengan antusiasme: rahasia penjualan</a></li>
<li><a href="../id419779/index.html">Paru-paru yang tumbuh berhasil ditransplantasikan ke babi, setelah 5 tahun, percobaan pada manusia dimungkinkan</a></li>
<li><a href="../id419781/index.html">SpaceX mengadakan Workshop Mars pertama</a></li>
<li><a href="../id419783/index.html">Manusia vs. Mesin: Etika Baru untuk Keamanan Siber</a></li>
<li><a href="../id419787/index.html">Laporan Club Club 2018, Bab 3.9: ‚ÄúKinerja Sumber Daya Lima Kali Lipat‚Äù</a></li>
<li><a href="../id419789/index.html">Jimmy Wales Thoughts: "Wikipedia seperti sosis ..."</a></li>
<li><a href="../id419791/index.html">Apple menolak program afiliasi untuk mempromosikan aplikasi dari App Store</a></li>
<li><a href="../id419795/index.html">Tesla melaporkan kehilangan rekor. Saham perusahaan masih naik karena perkiraan untuk kuartal berikutnya</a></li>
<li><a href="../id419797/index.html">Membalikkan rekayasa protokol panel dari AC inverter Electrolux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>