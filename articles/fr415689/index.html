<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëó üë©üèª‚Äçü§ù‚Äçüë®üèΩ üë¥ Nous jouons bataille navale sur BGP üßìüèª üëàüèª ‚óªÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BGP est la colle d'Internet. Pour le protocole, qui a √©t√© dessin√© sur deux serviettes en 1989, il est √† la fois surprenant et terrible qu'il g√®re pres...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous jouons bataille navale sur BGP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415689/"> BGP est la colle d'Internet.  Pour le protocole, qui a √©t√© dessin√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur deux serviettes en 1989, il est √† la</a> fois surprenant et terrible qu'il g√®re presque toutes les interactions entre les FAI, √©tant un √©l√©ment fondamental d'Internet. <br><br>  BGP a une mauvaise r√©putation principalement en raison de la nature confiante des liens entre pairs par d√©faut et de la t√¢che difficile de v√©rifier la l√©gitimit√© des routes.  C'est pourquoi partout nous entendons parler de piratages BGP de divers degr√©s de gravit√©: du changement du routage de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tous les YouTube</a> √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180427153929/">AWS Route 53</a> . <br><br>  Mais pour comprendre la nature de ces hacks, vous devez comprendre la topologie d'Internet.  Commen√ßons par un routeur isol√©: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lg/ge/oa/lggeoargt5imx7dl8yan8cxndlg.png"></div><br><a name="habracut"></a><br>  Un seul routeur est peu utile s'il ne peut rien acheminer.  Par cons√©quent, nous allons lui connecter un autre routeur au niveau physique (cela peut √™tre n'importe quoi: du cuivre Ethernet et de la fibre optique sous-marine aux liaisons Wi-Fi 802.11). <br><br>  Ensuite, deux routeurs connect√©s (dans notre cas rouge et bleu) doivent comprendre qu'ils peuvent acheminer le trafic l'un pour l'autre.  Apr√®s tout, le point des routeurs est d'acheminer le trafic d'une destination √† une autre. <br><br>  Comme mentionn√© ci-dessus, une fa√ßon courante de le faire entre les FAI est d'installer BGP des deux c√¥t√©s et de les laisser ¬´s'annoncer¬ª qu'ils peuvent acheminer le trafic: <br><br><img src="https://habrastorage.org/webt/oh/cv/4a/ohcv4ad9nw9yt2zfkuskukm6ahu.gif"><br><br>  Mais ce n'est pas tr√®s utile s'ils parlent uniquement entre eux, du coup les routeurs rouge et bleu ne sont pas directement connect√©s?  Plus nous connectons de routeurs, plus la topologie de routage que nous formons est complexe.  Cela est possible car chaque homologue BGP partage des tables de routage avec les autres homologues auxquels il est connect√©: <br><br><img src="https://habrastorage.org/webt/xu/gw/3s/xugw3silqx9r_jigrfbp5a89bui.gif"><br><br>  La fa√ßon dont les routeurs √©changent des informations entre eux d√©pend de la politique de configuration, et cela d√©pend g√©n√©ralement des conditions r√©elles pour les n≈ìuds voisins.  Il existe diff√©rents param√®tres pour les clients, les accords d'√©change de trafic et les fournisseurs sup√©rieurs. <br><br>  Pour cette raison, les routeurs n√©cessitent un ensemble d'instructions programm√©es pour filtrer ce qu'ils ne veulent pas donner ou prendre d'autres n≈ìuds.  Mais de temps en temps, les attaquants ont acc√®s √† un routeur qui est connect√© √† un autre routeur qui n'a pas de tels filtres.  Corriger cela au niveau du logiciel est <i>incroyablement difficile</i> , car cela n√©cessite des changements dans les routeurs de chaque fournisseur.  Les tentatives pr√©c√©dentes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180409193946/">ne</a> sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180409193946/">pas r√©pandues</a> . <br><br>  BGP a un moyen de coder les informations en utilisant un itin√©raire appel√© communaut√©.  Elle est d√©finie dans la RFC1997 (malheureusement, √©crite en 1996, rat√©e un peu).  La communaut√© peut √™tre attach√©e √† une d√©claration de route et elle se compose d'un nombre de 32 bits.  En pratique, cette valeur est divis√©e en deux nombres de 16 bits (un pour l'ASN et un pour le signal associ√© √† / pour cet ASN): <br><br><img src="https://habrastorage.org/webt/dp/1j/qw/dp1jqwebgpdffjywht8o0oyeggs.png"><br><br>  Ils sont utilis√©s pour transmettre des informations suppl√©mentaires sur l'itin√©raire, par exemple, o√π le fournisseur a emprunt√© cet itin√©raire: <br><br><img src="https://habrastorage.org/webt/vn/fp/ih/vnfpihy7op-wngfrcitnr99zrbg.png"><br><br>  Ceci est utile en termes de filtrage.  Par exemple, si vous avez de nombreux fournisseurs et que vous essayez de ne pas laisser sortir le trafic √† l'ext√©rieur du pays, vous pouvez utiliser la communaut√© appropri√©e pour diriger le trafic le long de ces itin√©raires. <br><br>  √áa m'a fait r√©fl√©chir.  Que puis-je signaler d'autre √† la communaut√©?  Et jusqu'o√π pouvez-vous aller? <br><br>  Apr√®s quelques tests, il s'est av√©r√© que chaque r√©seau de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">niveau 1</a> efface la communaut√©, √† l'exception de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ancien niveau 3</a> , qui permet le transfert de la communaut√© du routeur source au client.  Cela signifie √©galement qu'un routeur peut envoyer des informations √† d'autres, m√™me sans connexion directe. <br><br><h1>  Bataille navale </h1><br>  Connaissant l'existence d'un canal de communication indirect via BGP, je voulais en quelque sorte l'utiliser pour √©tablir des communications non traditionnelles.  J'ai choisi ¬´bataille navale¬ª comme m√©dium, car ce jeu n√©cessite la transmission d'un minimum d'informations (coordonn√©es X et Y, ainsi que des informations sur le dernier coup: touch√© ou manqu√©). <br><br>  Deux jeux sur BGP deux communaut√©s ont √©t√© cr√©√©s. <br><br><img src="https://habrastorage.org/webt/qd/su/jl/qdsujljum6vztiln1xxvhzje7sg.png"><br><br>  L'ensemble du jeu tient dans deux nombres de 16 bits, permettant un jeu fiable √† travers deux communaut√©s. <br><br>  Le combat naval √©tant un jeu √† deux, j'ai invit√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AS203729 √†</a> jouer.  Il est connect√© √† BGP √† New York et mon installation fonctionne √† Londres. <br><br>  Lors de la planification du jeu, nous avons suppos√© qu'en raison de la fr√©quence de mise √† jour des itin√©raires, nous pouvions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">amortir le trafic BGP</a> .  √âtant donn√© que nous sommes tous deux assis sur un trafic de production r√©el, nous avons convenu de d√©finir un temporisateur de 30 secondes pour chaque mouvement, car l'amortissement entra√Ænera des pannes sur les serveurs de production. <br><br>  Le reste du trafic passait √©galement par les routeurs du jeu, j'ai donc d√ª garder le d√©mon de routage en ligne et il √©tait impossible d'utiliser le d√©mon BGP sp√©cial.  Pour contourner cette limitation, le binaire du jeu a g√©n√©r√© et recharg√© la configuration BIRD √† l'aide du socket de contr√¥le du d√©mon pour interroger les changements de route. <br><br>  Avec ces param√®tres, le 16 mai 2018, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AS206924</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AS203729 ont</a> probablement jou√© le premier jeu de soci√©t√© de l'histoire qui a √©t√© men√© uniquement sur BGP. <br><br><img src="https://habrastorage.org/webt/t0/cb/ks/t0cbksnfb2p-wdzhfoqhcabg8vc.gif"><br><br>  Le jeu s'est bien d√©roul√©, √† l'exception d'une pause de 45 minutes en raison de l'amortissement ci-dessus.  Cela s'est produit de mon c√¥t√© et a fait que le niveau 3 applique l'itin√©raire le moins optimal pour mon trafic pendant 45 minutes.  Pour √©viter une r√©currence de la situation, nous avons d√©cid√© de passer √† une p√©riode de 90 secondes entre les mouvements. <br><br>  Malgr√© cela, le dernier coup port√© √† la flotte de mon ami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AS203729 a</a> √©t√© inflig√© au coup 68.  Ce qui fait de moi le premier gagnant d'un jeu de soci√©t√© r√©alis√© √† l'aide d'un protocole de routage Internet public. <br><br>  C'√©tait logique?  Probablement pas.  C'√©tait amusant?  <b>Mon Dieu, oui.</b> <br><br>  Le code source a √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publi√© des</a> deux c√¥t√©s, bien que je ne propose pas de r√©p√©ter cette exp√©rience. <br><br>  Jusqu'√† la prochaine fois! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415689/">https://habr.com/ru/post/fr415689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415679/index.html">Pourquoi les enfants riches montrent de bons r√©sultats dans une exp√©rience de guimauve</a></li>
<li><a href="../fr415681/index.html">L'histoire de la cr√©ation de l'interpr√®te en langue des signes</a></li>
<li><a href="../fr415683/index.html">Essayez-vous dans la programmation Q #</a></li>
<li><a href="../fr415685/index.html">Divulgation de la m√©moire du noyau dans le syst√®me d'exploitation moderne</a></li>
<li><a href="../fr415687/index.html">Fintech Digest: la Banque centrale oblige les banques √† v√©rifier les appareils clients √† partir desquels l'argent est transf√©r√©</a></li>
<li><a href="../fr415691/index.html">Comparaison de tri Exchange</a></li>
<li><a href="../fr415695/index.html">Google a admis qu'il voulait √©galement acheter GitHub</a></li>
<li><a href="../fr415699/index.html">Trois courtes histoires de registre Windows</a></li>
<li><a href="../fr415701/index.html">Top 10: les meilleurs articles du Joker 2017</a></li>
<li><a href="../fr415705/index.html">Les pirates ont compromis les r√©f√©rentiels Gentoo Linux sur GitHub</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>