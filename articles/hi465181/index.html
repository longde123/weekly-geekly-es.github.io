<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЩ╛ тЧ╗я╕П ЁЯС╕ЁЯП╗ C ++ 17 рдореЗрдВ рдлрд┐рд╕рд▓рди рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди ЁЯСиЁЯП╜тАНЁЯПл ЁЯеБ ЁЯТ│</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рд╛рд▓ рдХреЗ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, C ++ рд▓реАрдкреНрд╕ рдФрд░ рд╕реАрдорд╛ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝ рд░рд╣рд╛ рд╣реИ, рдФрд░ рднрд╛рд╖рд╛ рдХреА рд╕рднреА рд╕реВрдХреНрд╖реНрдорддрд╛рдУрдВ рдФрд░ рдЬрдЯрд┐рд▓рддрд╛рдУрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдПрдХ рдирдпрд╛ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++ 17 рдореЗрдВ рдлрд┐рд╕рд▓рди рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/465181/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><img src="https://habrastorage.org/webt/fp/nd/-g/fpnd-ggxjx4-xafw3sb7rx2keca.png" alt="рдЫрд╡рд┐"></a> <br><br>  рд╣рд╛рд▓ рдХреЗ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, C ++ рд▓реАрдкреНрд╕ рдФрд░ рд╕реАрдорд╛ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝ рд░рд╣рд╛ рд╣реИ, рдФрд░ рднрд╛рд╖рд╛ рдХреА рд╕рднреА рд╕реВрдХреНрд╖реНрдорддрд╛рдУрдВ рдФрд░ рдЬрдЯрд┐рд▓рддрд╛рдУрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдПрдХ рдирдпрд╛ рдорд╛рдирдХ рджреВрд░ рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдирдП рд░реБрдЭрд╛рдиреЛрдВ рдХреА рд╢реБрд░реВрдЖрдд рд╕рдмрд╕реЗ рддреЗрдЬ рдФрд░ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдЬрдмрдХрд┐ C ++ 20 рд╕реЗ рдкрд╣рд▓реЗ рдереЛрдбрд╝рд╛ рд╕рдордп рд╣реИ, рдореИрдВ рд╡рд░реНрддрдорд╛рди рдорд╛рдирдХ рдХреЗ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ "рдлрд┐рд╕рд▓рди" рд╕реНрдерд╛рдиреЛрдВ рдХреЛ рддрд╛рдЬрд╝рд╛ рдХрд░рдиреЗ рдпрд╛ рдЦреЛрдЬрдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВред рднрд╛рд╖рд╛ред <br><br>  рдЖрдЬ рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЕрдЧрд░ рдХреЙрдиреНрд╕реНрдЯреНрд░реЗрдХреНрд╕ рдореИрдХреНрд░реЛрдЬрд╝ рдХреЗ рд▓рд┐рдП рд░рд┐рдкреНрд▓реЗрд╕рдореЗрдВрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╕реНрдЯреНрд░рдХреНрдЪрд░реНрдб рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдФрд░ рдЙрд╕рдХреЗ "рдиреБрдХрд╕рд╛рди" рдХреЗ "рдЗрдВрдЯрд░реНрдирд▓" рдХреНрдпрд╛ рд╣реИрдВ, рдФрд░ рдХреНрдпрд╛ рдпрд╣ рд╕рдЪ рд╣реИ рдХрд┐ рдХреЙрдкреА рдПрд▓рд┐рд╕рди рдЕрдм рд╣рдореЗрд╢рд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдк рдмрд┐рдирд╛ рдХрд┐рд╕реА рд╣рд┐рдЪрдХрд┐рдЪрд╛рд╣рдЯ рдХреЗ рдХреЛрдИ рднреА рд░рд┐рдЯрд░реНрди рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рд╣рд╛рдереЛрдВ рдХреЛ рдереЛрдбрд╝рд╛ рдЧрдВрджрд╛ рдХрд░рдиреЗ рд╕реЗ рдирд╣реАрдВ рдбрд░рддреЗ рд╣реИрдВ, рддреЛ рдЕрдкрдиреА рдЬреАрдн рдХреЗ "рдЗрдирд╕рд╛рдЗрдЯреНрд╕" рдореЗрдВ рдмрд╣рдХ рдХрд░, рдХреИрдЯ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИред <br><a name="habracut"></a><br><hr><br><h1>  рдЕрдЧрд░ рдмрд╛рдзрд╛ </h1><br>  рдЖрдЗрдП рд╕рдмрд╕реЗ рд╕рд░рд▓ рдПрдХ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ - <code>if constexpr</code> рдЖрдкрдХреЛ рд╕рд╢рд░реНрдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╢рд╛рдЦрд╛ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рд╕рдВрдХрд▓рди рдЪрд░рдг рдкрд░ рднреА рд╡рд╛рдВрдЫрд┐рдд рд╕реНрдерд┐рддрд┐ рдкреВрд░реА рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред <br><br>  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ "рдЕрддрд┐рд░рд┐рдХреНрдд" рддрд░реНрдХ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>#if</code> рдореИрдХреНрд░реЛ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╣реИ?  рдирд╣реАрдВред  рдмрд┐рд▓рдХреБрд▓ рдирд╣реАрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдореЗрдВ рдЧреБрдг рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдореИрдХреНрд░реЛрдЬрд╝ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ - рдЕрдВрджрд░ рдЖрдк рдХрд┐рд╕реА рднреА <code>constexpr</code> рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдЧрд┐рди рд╕рдХрддреЗ рд╣реИрдВ <code>constexpr</code> <code>bool</code> <code>constexpr</code> рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдареАрдХ рд╣реИ, рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд, рддреНрдпрд╛рдЧ рдХреА рдЧрдИ рд╢рд╛рдЦрд╛ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рд╕рд┐рдВрдЯреИрдХреНрдЯрд┐рдХ рдФрд░ рд╢рдмреНрджрд╛рд░реНрде рд░реВрдк рд╕реЗ рд╕рд╣реА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рджреВрд╕рд░реА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдХрд╛рд░рдг, <code>if constexpr</code> рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЧреИрд░-рдореМрдЬреВрдж рдлрд╝рдВрдХреНрд╢рди (рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо-рдирд┐рд░реНрднрд░ рдХреЛрдб рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ) рдпрд╛ рдирд┐рд░реНрдорд╛рдг рднрд╛рд╖рд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдЦрд░рд╛рдм рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, " <code>void T = 0;</code> ")ред <br><br>  <code>if constexpr</code> рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдиреЗ рдХреА рдХреНрдпрд╛ рдмрд╛рдд рд╣реИ?  рдореБрдЦреНрдп рдмрд┐рдВрджреБ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдореЗрдВ рд╣реИред  рдЙрдирдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рдирд┐рдпрдо рд╣реИ: рдЬрдм рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рддреНрд╡рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдЦрд╛рд░рд┐рдЬ рдХреА рдЧрдИ рд╢рд╛рдЦрд╛ рдХреЛ рддрддреНрдХрд╛рд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рдЧреБрдгреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЯреЗрдореНрдкреНрд▓реЗрдЯреНрд╕ рдореЗрдВ, рдХрд┐рд╕реА рдХреЛ рдпрд╣ рдирд╣реАрдВ рднреВрд▓рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╢рд╛рдЦрд╛рдУрдВ рдХреЗ рдЕрдВрджрд░ рдХреЛрдб рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рд╕рдВрднрд╛рд╡рд┐рдд) рд╡реЗрд░рд┐рдПрдВрдЯ рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рд▓рд┐рдП рдпрд╣ рд▓рд┐рдЦрдирд╛ <code>static_assert(false)</code> рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢рд╛рдЦрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рдЕрдВрджрд░ <code>static_assert(false)</code> (рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ) <code>static_assert</code> рдХреБрдЫ рдЯреЗрдореНрдкрд▓реЗрдЯ рдирд┐рд░реНрднрд░ рдкреИрд░рд╛рдореАрдЯрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ)ред <br><br>  рдЙрджрд╛рд╣рд░рдг: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{    <span class="hljs-comment"><span class="hljs-comment">//    ,       if constexpr ( os == OS::win ) {        win_api_call(); //         }    else {        some_other_os_call(); //  win      } }</span></span></code> </pre><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foo</span></span></span><span class="hljs-class">() {</span></span>    <span class="hljs-comment"><span class="hljs-comment">//    ,    T      if constexpr ( os == OS::win ) {        T::win_api_call(); //  T   ,    win    }    else {        T::some_other_os_call(); //  T   ,         } }</span></span></code> </pre><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foo</span></span></span><span class="hljs-class">() {</span></span>    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(condition1)</span></span></span><span class="hljs-function"> </span></span>{        <span class="hljs-comment"><span class="hljs-comment">// ...    }    else if constexpr (condition2) {        // ...    }    else {        // static_assert(false); //          static_assert(trait&lt;T&gt;::value); // ,   ,  trait&lt;T&gt;::value   false    } }</span></span></code> </pre><br><h2>  рдпрд╛рдж рд░рдЦрдиреЗ рдпреЛрдЧреНрдп рдмрд╛рддреЗрдВ </h2><br><ol><li>  рд╕рднреА рд╢рд╛рдЦрд╛рдУрдВ рдореЗрдВ рдХреЛрдб рд╕рд╣реА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br></li><li>  рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рдЕрдВрджрд░, рдЫреЛрдбрд╝реА рдЧрдИ рд╢рд╛рдЦрд╛рдУрдВ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рддрддреНрдХрд╛рд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br></li><li>  рдХрд┐рд╕реА рднреА рд╢рд╛рдЦрд╛ рдХреЗ рдЕрдВрджрд░ рдХреЛрдб рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рддрд╛рддреНрдХрд╛рд▓рд┐рдХрддрд╛ рдХреЗ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br></li></ol><br><h1>  рд╕рдВрд░рдЪрд┐рдд рдмрдВрдзрди </h1><br><img src="https://habrastorage.org/webt/0v/jl/x4/0vjlx42it96fu5j20yz-m-pvhpq.png"><br><br>  C ++ 17 рдореЗрдВ, рд╡рд┐рднрд┐рдиреНрди рдЯрдкрд▓-рдЬреИрд╕реА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╡рд┐рдШрдЯрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрд╛рдлреА рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрдВрддреНрд░ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдФрд░ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ рдирд╛рдорд┐рдд рдЪрд░ рдореЗрдВ рдЖрдВрддрд░рд┐рдХ рддрддреНрд╡реЛрдВ рдХреЛ рдмрд╛рдБрдз рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     тАФ    : for (const auto&amp; [key, value] : map) {    std::cout &lt;&lt; key &lt;&lt; ": " &lt;&lt; value &lt;&lt; std::endl; }</span></span></code> </pre><br>  рдЯрдкрд▓-рдЬреИрд╕реА рд╡рд╕реНрддреБ рд╕реЗ рдореЗрд░рд╛ рдЕрднрд┐рдкреНрд░рд╛рдп рдРрд╕реА рд╡рд╕реНрддреБ рд╕реЗ рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рд╕рдВрдХрд▓рди рдХреЗ рд╕рдордп рдЙрдкрд▓рдмреНрдз рдЖрдВрддрд░рд┐рдХ рддрддреНрд╡реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдЬреНрдЮрд╛рдд рд╣реЛ ("рдЯрдкрд▓" рд╕реЗ - рддрддреНрд╡реЛрдВ рдХреА рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ (рд╡реЗрдХреНрдЯрд░) рдХреЗ рд╕рд╛рде рдПрдХ рдЖрджреЗрд╢рд┐рдд рд╕реВрдЪреА)ред <br><br>  рдЗрд╕ рддрд░рд╣ рдХреА рдкрд░рд┐рднрд╛рд╖рд╛рдПрдВ рдЗрд╕ рдкрд░рд┐рднрд╛рд╖рд╛ рдХреЗ рдЕрдВрддрд░реНрдЧрдд рдЖрддреА рд╣реИрдВ: <code>std::pair</code> , <code>std::tuple</code> , <code>std::array</code> , рд░реВрдк рдХреА рд╕рд░рдгрд┐рдпрд╛рдБ " <code>T a[N]</code> ", рд╕рд╛рде рд╣реА рд╡рд┐рднрд┐рдиреНрди рд╕реНрд╡-рд▓рд┐рдЦрд┐рдд рд╕рдВрд░рдЪрдирд╛рдПрдВ рдФрд░ рдХрдХреНрд╖рд╛рдПрдВред <br><br>  рдмрдВрдж рдХрд░реЛ ... рдХреНрдпрд╛ рдЖрдк рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдмрдВрдзрди рдореЗрдВ рдЕрдкрдиреА рдЦреБрдж рдХреА рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  Spoiler: рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХрднреА-рдХрднреА рдЖрдкрдХреЛ рдХрдбрд╝реА рдореЗрд╣рдирдд рдХрд░рдиреА рд╣реЛрддреА рд╣реИ (рд▓реЗрдХрд┐рди рдЙрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХ))ред <br><br><h2>  рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ </h2><br>  рд╕реНрдЯреНрд░рдХреНрдЪрд░рд▓ рд▓рд┐рдВрдХрд┐рдВрдЧ рдХрд╛ рдХрд╛рдо рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдХрд╛ рд╣рдХрджрд╛рд░ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрдм рд╕реЗ рд╣рдо рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ "рдлрд┐рд╕рд▓рди" рд╕реНрдерд╛рдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдореИрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рд╕рдм рдХреБрдЫ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br><br>  рдорд╛рдирдХ рдмрд╛рдзреНрдпрдХрд╛рд░реА рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд┐рдВрдЯреИрдХреНрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br>  <i>attr</i> (рд╡реИрдХрд▓реНрдкрд┐рдХ) <i>cv- рдСрдЯреЛ</i> <i>рд░реЗрдлрд░реА-рдСрдкрд░реЗрдЯрд░</i> (рд╡реИрдХрд▓реНрдкрд┐рдХ) [ <i>рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛-рд╕реВрдЪреА</i> ] <i>рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐</i> ; <br><br><ul><li>  <code>attr</code> - рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╕реВрдЪреА; <br></li><li>  <code>cv-auto</code> - рд╕рдВрднрд╛рд╡рд┐рдд рдХрд╛рд╕реНрдЯ / рд╡рд╛рд╖реНрдкрд╢реАрд▓ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рд╕рд╛рде рдСрдЯреЛ; <br></li><li>  <code>ref-operator</code> - рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕рдВрджрд░реНрдн рдирд┐рд░реНрджрд┐рд╖реНрдЯрдХрд░реНрддрд╛ (рдФрд░ рдпрд╛ &amp;&amp;); <br></li><li>  <code>identifier-list</code> - рдирдП рдЪрд░ рдХреЗ рдирд╛рдореЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА; <br></li><li>  <code>expression</code> рдПрдХ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╣реИ рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдПрдХ рдЯрдкрд▓-рдЬреИрд╕реА рд╡рд╕реНрддреБ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ " <code>= expr</code> ", " <code>{expr}</code> " рдпрд╛ " <code>(expr)</code> ") рдореЗрдВ рд╣реЛ рд╕рдХрддреА рд╣реИред <br></li></ul><br>  рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ <code>identifier-list</code> рдореЗрдВ рдирд╛рдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ <code>expression</code> рд╕реЗ рдЙрддреНрдкрдиреНрди рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рддрддреНрд╡реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдпрд╣ рд╕рдм рдЖрдкрдХреЛ рдлреЙрд░реНрдо рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp;&amp; [a,b,c] = Foo{};</code> </pre><br>  рдФрд░ рдпрд╣рд╛рдБ рд╣рдо рдкрд╣рд▓реЗ "рдлрд┐рд╕рд▓рди" рд╕реНрдерд╛рди рдкрд░ рдЖрддреЗ рд╣реИрдВ: рдлреЙрд░реНрдо рдХреА рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдкреВрд░рд╛ рдХрд░рддреЗ рд╣реБрдП " <code>auto a = expr;</code>  ", рдЖрдк рдЖрдорддреМрд░ рдкрд░ рдорддрд▓рдм рд╣реИ рдХрд┐" <code>a</code> "рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐" <code>expr</code> "рджреНрд╡рд╛рд░рд╛ рдЧрдгрдирд╛ рдХреА рдЬрд╛рдПрдЧреА, рдФрд░ рдЖрдк рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдореЗрдВ" <code>const auto&amp; [a,b,c] = expr;</code>  "рдПрдХ рд╣реА рдХрд╛рдо рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдХреЗрд╡рд▓" <code>a,b,c</code> "рдХреЗ рд▓рд┐рдП" <code>expr</code> "рдХреЗ рд╕рдВрдЧрдд рдкреНрд░рдХрд╛рд░ <code>const&amp;</code> рддрддреНрд╡ рдкреНрд░рдХрд╛рд░ рд╣реЛрдВрдЧреЗ ... <br><br>  рд╕рдЪреНрдЪрд╛рдИ рдЕрд▓рдЧ рд╣реИ: <code>cv-auto ref-operator</code> рд╕реНрдкреЗрд╕рд┐рдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ рдЕрджреГрд╢реНрдп рдЪрд░ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ expr рдХреА рдЧрдгрдирд╛ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдЕрд░реНрдерд╛рдд, рдХрдВрдкрд╛рдЗрд▓рд░ тАЬ <code>const auto&amp; [a,b,c] = expr</code> тАЭ тАЬ <code>const auto&amp; e = expr</code> тАЭ рдХреЗ рд╕рд╛рде рдмрджрд▓рддрд╛ рд╣реИ <code>const auto&amp; e = expr</code> тАЭ) рд╕реЗ рд╣реБрдЖред <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдирдИ рдЕрджреГрд╢реНрдп рдЗрдХрд╛рдИ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИ (рдЗрд╕рдХреЗ рдмрд╛рдж рдореИрдВ рдЗрд╕реЗ {e} рдХрд╣реВрдВрдЧрд╛), рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрдХрд╛рдИ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реИ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЕрд╕реНрдерд╛рдпреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЙрддреНрдкреНрд░реЗрд░рд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ (рдЗрд╕рд▓рд┐рдП, рдЖрдк рдЙрдиреНрд╣реЗрдВ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ " <code>const auto&amp; [a,b,c] = Foo {};</code> рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code>const auto&amp; [a,b,c] = Foo {};</code> ")ред <br><br>  рджреВрд╕рд░рд╛ рдлрд┐рд╕рд▓рди рд╕реНрдерд╛рди рдЙрд╕ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╕реЗ рддреБрд░рдВрдд рдЕрдиреБрд╕рд░рдг рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдХрдВрдкрд╛рдЗрд▓рд░ рдмрдирд╛рддрд╛ рд╣реИ: рдпрджрд┐ {e} рдХреЗ рд▓рд┐рдП рдШрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдкреНрд░рдХрд╛рд░ рдПрдХ рд╕рдВрджрд░реНрдн рдирд╣реАрдВ рд╣реИ, рддреЛ <code>expr</code> рдХрд╛ рдкрд░рд┐рдгрд╛рдо {e} рдореЗрдВ рдХреЙрдкреА рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br><br>  <code>identifier-list</code> рдореЗрдВ рдЪрд░ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реЛрдВрдЧреЗ?  рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпреЗ рдмрд┐рд▓реНрдХреБрд▓ рд╡реИрд░рд┐рдПрдмрд▓ рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред  рд╣рд╛рдВ, рд╡реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ, рд╕рд╛рдорд╛рдиреНрдп рдЪрд░ рдХреА рддрд░рд╣ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдЗрд╕ рдЕрдВрддрд░ рдХреЗ рд╕рд╛рде рдХрд┐ рд╡реЗ рдЙрдирдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реА рдПрдХ рдЗрдХрд╛рдИ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рддрд░рд╣ рдХреЗ "рд╕рдВрджрд░реНрдн" рдЪрд░ рд╕реЗ <code>decltype</code> рд╕реЗ рдЙрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЗрдХрд╛рдИ рдХрд╛ рдЙрддреНрдкрд╛рджрди рд╣реЛрдЧрд╛ рдЬреЛ рдЗрд╕ рдЪрд░ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt; t(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2.f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; [a, b] = t; <span class="hljs-comment"><span class="hljs-comment">// decltype(a) тАФ int, decltype(b) тАФ float ++a; // ,  ┬л ┬╗,   t std::cout &lt;&lt; std::get&lt;0&gt;(t); //  2</span></span></code> </pre><br>  рдкреНрд░рдХрд╛рд░ рд╕реНрд╡рдпрдВ рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><ol><li>  рдпрджрд┐ <b>{e}</b> рдПрдХ рд╕рд░рдгреА ( <code>T a[N]</code> ) рд╣реИ, рддреЛ рдкреНрд░рдХрд╛рд░ рдПрдХ рд╣реЛрдЧрд╛ - T, cv-modifiers рдЙрди рд╕рднреА рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рдПрдВрдЧреЗред <br></li><li>  рдпрджрд┐ <b>{e}</b> рдЯрд╛рдЗрдк E рдХрд╛ рд╣реИ рдФрд░ рдЯрдкрд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╕рдВрд░рдЪрдирд╛рдПрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЧрдИ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs">std::tuple_size&lt;E&gt;</code> </pre> <br><pre> <code class="plaintext hljs">std::tuple_element&lt;i, E&gt;</code> </pre> <br>  рдФрд░ рд╕рдорд╛рд░реЛрд╣: <br><br><pre> <code class="plaintext hljs">get&lt;i&gt;({e}); //  {e}.get&lt;i&gt;()</code> </pre> <br>  рдлрд┐рд░ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░ рдХрд╛ рдкреНрд░рдХрд╛рд░ <code>std::tuple_element_t&lt;i, E&gt;</code> <br></li><li>  рдЕрдиреНрдп рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЪрд░ рдХрд╛ рдкреНрд░рдХрд╛рд░ рд╕рдВрд░рдЪрдирд╛ рддрддреНрд╡ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдпрдХрд╛рд░реА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br></li></ol><br>  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдмрд╣реБрдд рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдХрджрдо рдХреЗ рд╕рд╛рде рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрджрдо рдЙрдард╛рдП рдЧрдП рд╣реИрдВ: <br><br><ol><li>  рдЕрджреГрд╢реНрдп рдЗрдХрд╛рдИ рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рдЖрд░рдВрднреАрдХрд░рдг рдХреА рдЧрдгрдирд╛ {e} рдкреНрд░рдХрд╛рд░ рдХреЗ <code>expr</code> рдФрд░ <code>cv-ref</code> рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ред <br></li><li>  рдЫрджреНрдо рдЪрд░ рдмрдирд╛рдПрдБ рдФрд░ рдЙрдиреНрд╣реЗрдВ {e} рддрддреНрд╡реЛрдВ рд╕реЗ рдмрд╛рдБрдзреЗрдВред <br></li></ol><br><h2>  рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдЕрдкрдиреА рдХрдХреНрд╖рд╛рдУрдВ / рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдирд╛ </h2><br>  рдЙрдирдХреА рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рдмрд╛рдзрд╛ C ++ рдореЗрдВ рдкреНрд░рддрд┐рдмрд┐рдВрдм рдХреА рдХрдореА рд╣реИред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдВрдХрд▓рдХ, рдЬреЛ, рдРрд╕рд╛ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рдЕрд╡рд╢реНрдп рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдпрд╣ рдпрд╛ рдЙрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдЕрдВрджрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдард┐рди рд╕рдордп рд╣реИ: рдПрдХреНрд╕реЗрд╕ рд╕рдВрд╢реЛрдзрдХ (рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ / рдирд┐рдЬреА / рд╕рдВрд░рдХреНрд╖рд┐рдд) рдФрд░ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдмрд╣реБрдд рдЬрдЯрд┐рд▓ рдорд╛рдорд▓реЗ рд╣реИрдВред <br><br>  рдРрд╕реА рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХреЗ рдХрд╛рд░рдг, рдЙрдирдХреА рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рдмрд╣реБрдд рд╕рдЦреНрдд рд╣реИрдВ (рдХрдо рд╕реЗ рдХрдо рдЕрднреА рдХреЗ рд▓рд┐рдП: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">P1061</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">P1096</a> ): <br><br><ol><li>  рдПрдХ рд╡рд░реНрдЧ рдХреЗ рд╕рднреА рдЖрдВрддрд░рд┐рдХ рдЧреИрд░-рд╕реНрдерд┐рд░ рдХреНрд╖реЗрддреНрд░ рдПрдХ рд╣реА рдЖрдзрд╛рд░ рд╡рд░реНрдЧ рд╕реЗ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП, рдФрд░ рд╡реЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд╕рдордп рдЙрдкрд▓рдмреНрдз рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред <br></li><li>  рдпрд╛ рд╡рд░реНрдЧ рдХреЛ "рдкреНрд░рддрд┐рдмрд┐рдВрдм" (рдЯрдкрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рд╕рдорд░реНрдерди) рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br></li></ol><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  ┬л┬╗  struct A { int a; }; struct B : A {}; struct C : A { int c; }; class D { int d; }; auto [a] = A{}; //  (a -&gt; A::a) auto [a] = B{}; //  (a -&gt; B::A::a) auto [a, c] = C{}; // : a  c    auto [d] = D{}; // : d тАФ private void D::foo() {    auto [d] = *this; //  (d   ) }</span></span></code> </pre><br>  рдЯреНрдпреВрдкрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЖрдкрдХреЛ рдмрд╛рдзреНрдпрдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдХрд┐рд╕реА рднреА рдХрдХреНрд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдереЛрдбрд╝рд╛ рдмреЛрдЭрд┐рд▓ рд▓рдЧ рд░рд╣рд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред  рдЖрдЗрдП рддреБрд░рдВрдд рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,      int   class Foo; template&lt;&gt; struct std::tuple_size&lt;Foo&gt; : std::integral_constant&lt;std::size_t, 1&gt; {}; template&lt;&gt; struct std::tuple_element&lt;0, Foo&gt; { using type = int&amp;; }; class Foo { public: template&lt;std::size_t i&gt; std::tuple_element_t&lt;i, Foo&gt; const&amp; get() const; template&lt;std::size_t i&gt; std::tuple_element_t&lt;i, Foo&gt; &amp; get(); private: int _foo = 0; int&amp; _bar = _foo; }; template&lt;&gt; std::tuple_element_t&lt;0, Foo&gt; const&amp; Foo::get&lt;0&gt;() const { return _bar; } template&lt;&gt; std::tuple_element_t&lt;0, Foo&gt; &amp; Foo::get&lt;0&gt;() { return _bar; }</span></span></code> </pre><br>  рдЕрдм рд╣рдо рдмрд╛рдБрдзрддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs">Foo foo; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; [f1] = foo; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [f2] = foo; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; [f3] = foo; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [f4] = foo;</code> </pre><br>  рдФрд░ рдпрд╣ рд╕реЛрдЪрдиреЗ рдХрд╛ рд╕рдордп рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдорд┐рд▓рд╛?  (рдЬреЛ рдХреЛрдИ рднреА рд╕рд╣реА рдЬрд╡рд╛рдм рджреЗ рд╕рдХрддрд╛ рд╣реИ рд╡рд╣ рд╕реНрд╡рд╛рджрд┐рд╖реНрдЯ рд╕реНрд╡реАрдЯреА рдХрд╛ рд╣рдХрджрд╛рд░ рд╣реИред) <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f1); <span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f2); <span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f3); <span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f4);</code> </pre><br><div class="spoiler">  <b class="spoiler_title">рд╕рд╣реА рдЙрддреНрддрд░</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f1); <span class="hljs-comment"><span class="hljs-comment">// int&amp; decltype(f2); // int&amp; decltype(f3); // int&amp; decltype(f4); // int&amp; ++f1; //     foo._foo,  {e}    const</span></span></code> </pre><br></div></div><br>  рдРрд╕рд╛ рдХреНрдпреЛрдВ рд╣реБрдЖ?  рдЙрддреНрддрд░ <code>std::tuple_element</code> рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮрддрд╛ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i, <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:tuple_element&lt;i, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> type = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">add_const_t</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">tuple_element_t</span></span>&lt;i, T&gt;&gt;; };</code> </pre><br>  <code>std::add_const</code> рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП <code>Foo</code> рд▓рд┐рдП рдЯрд╛рдЗрдк рд╣рдореЗрд╢рд╛ <code>int&amp;</code> ред <br><br>  рдЗрд╕реЗ рдХреИрд╕реЗ рдЬреАрддрд╛ рдЬрд╛рдП?  рдмрд╕ <code>const Foo</code> рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖рдЬреНрдЮрддрд╛ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:tuple_element&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Foo&gt; { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> type = <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp;; };</code> </pre><br>  рддрдм рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдЙрдореНрдореАрдж рдХреА рдЬрд╛рдПрдЧреА: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(f1); <span class="hljs-comment"><span class="hljs-comment">// const int&amp; decltype(f2); // const int&amp; decltype(f3); // int&amp; decltype(f4); // int&amp; ++f1; //    </span></span></code> </pre><br>  рд╡реИрд╕реЗ, рдПрдХ рд╣реА рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП рд╕рдЪ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>std::tuple&lt;T&amp;&gt;</code> <br>  - рдЖрдк рдЖрдВрддрд░рд┐рдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рдЧреИрд░-рд╕реНрдерд┐рд░ рд╕рдВрджрд░реНрдн рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рднрд▓реЗ рд╣реА рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрд╡рдпрдВ рд╕реНрдерд┐рд░ рд╣реЛрдЧрд╛ред <br><br><h2>  рдпрд╛рдж рд░рдЦрдиреЗ рдпреЛрдЧреНрдп рдмрд╛рддреЗрдВ </h2><br><ol><li>  " <code>cv-auto ref</code> " рдореЗрдВ " <code>cv-auto ref [a1..an] = expr</code> " рдЕрджреГрд╢реНрдп рдЪрд░ {{} рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред <br></li><li>  рдпрджрд┐ рдЕрдиреБрдорд╛рдирд┐рдд рдкреНрд░рдХрд╛рд░ {e} рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ {e} рдХреЛ рдХреЙрдкреА рдХрд░рдХреЗ ("рд╣реИрд╡реАрд╡реЗрдЯ" рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ) рдЖрд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br></li><li>  рдмрд╛рдзреНрдп рдЪрд░ "рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд" рд▓рд┐рдВрдХ рд╣реИрдВ (рд╡реЗ рд▓рд┐рдВрдХ рдХреА рддрд░рд╣ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ <code>decltype</code> рдЙрдирдХреЗ рд▓рд┐рдП рдПрдХ рдЧреИрд░-рд╕рдВрджрд░реНрдн рдкреНрд░рдХрд╛рд░ рджреЗрддрд╛ рд╣реИ (рдЬрдм рддрдХ рдХрд┐ рдЪрд░ рдПрдХ рд▓рд┐рдВрдХ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ)ред <br></li><li>  рдмрд╛рдзреНрдпрдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрдн рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рджреЗрдЦрднрд╛рд▓ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред <br></li></ol><br><h1>  рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬреЗрд╢рди (rvo, рдХреЙрдкреА рдПрд▓реАрд╢рди) </h1><br><img src="https://habrastorage.org/webt/gt/0i/ln/gt0iln8n664yvitfqfpkjk9vuds.png"><br><br>  рд╢рд╛рдпрдж рдпрд╣ C ++ 17 рдорд╛рдирдХ (рдХрдо рд╕реЗ рдХрдо рдореЗрд░реЗ рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд░реНрдХрд▓ рдореЗрдВ) рдХреА рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЪрд░реНрдЪрд┐рдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдерд╛ред  рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ: C ++ 11 рдиреЗ рдЖрдВрджреЛрд▓рди рдХреЗ рд╢рдмреНрджрд╛рд░реНрдереЛрдВ рдХреЛ рд▓рд╛рдпрд╛, рдЬрд┐рд╕рдиреЗ рд╡рд╕реНрддреБ рдХреЗ "рдЖрдВрддрд░рд┐рдХ" рдХреЗ рд╣рд╕реНрддрд╛рдВрддрд░рдг рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░рдЦрд╛рдиреЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдмрд╣реБрдд рд╕рд░рд▓ рдмрдирд╛ рджрд┐рдпрд╛, рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ C ++ 17, рдпрд╣ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ, рдХрд┐рд╕реА рднреА рдХрд╛рд░рдЦрд╛рдиреЗ рд╡рд┐рдзрд┐ рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдХреИрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред , - рдЕрдм рд╕рдм рдХреБрдЫ рдирдХрд▓ рдХреЗ рдмрд┐рдирд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, "рдЬрд▓реНрдж рд╣реА рд╕рдм рдХреБрдЫ рдордВрдЧрд▓ рдкрд░ рдЦрд┐рд▓ рдЬрд╛рдПрдЧрд╛" ... <br><br>  рд▓реЗрдХрд┐рди рдЖрдЗрдП рдереЛрдбрд╝рд╛ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рдмрдиреЗрдВ: рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рдХрд╛рдо рдирд╣реАрдВ рд╣реИред  рдореИрдВ рдЕрддреНрдпрдзрд┐рдХ cppcon2018 рдХреА рдЗрд╕ рдкреНрд░рд╕реНрддреБрддрд┐ рдХреЛ рджреЗрдЦрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ: рдЖрд░реНрдерд░ рдУ'рдбрд╛рдпрд░ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬреЗрд╢рди: рд╣рд╛рд░реНрдб рдереИрди рдЗрдЯ рд▓реБрдХ</a> ", рдЬрд┐рд╕рдореЗрдВ рд▓реЗрдЦрдХ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХреНрдпреЛрдВ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред <br><br>  рд╢реЙрд░реНрдЯ рд╕реНрдкреЙрдЗрд▓рд░: <br><br>  "рд╡рд╛рдкрд╕реА рдореВрд▓реНрдп рдХреЗ рд▓рд┐рдП рд╕реНрд▓реЙрдЯ" рдЬреИрд╕реА рдХреЛрдИ рдЪреАрдЬ рд╣реИред  рдпрд╣ рд╕реНрд▓реЙрдЯ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рд╕реНрдЯреИрдХ рдкрд░ рдПрдХ рдЬрдЧрд╣ рд╣реИ рдЬрд┐рд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдФрд░ рдкрд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рджреНрд╡рд╛рд░рд╛ рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдХреЙрд▓ рдХреЛрдб рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕ рдПрдХрд▓ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рддреЛ рд╡рд╣ рд╕реАрдзреЗ рдЗрд╕ рд╕реНрд▓реЙрдЯ рдореЗрдВ рд╕реАрдзреЗ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ (рдмрд╢рд░реНрддреЗ рдХрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЖрдХрд╛рд░ рдФрд░ рдкреНрд░рдХрд╛рд░ рдФрд░ рд╕реНрд▓реЙрдЯ рд╕рдорд╛рди рд╣реЛ)ред <br><br>  рдЗрд╕рд╕реЗ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ?  рдЖрдЗрдП рдЗрд╕реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдЕрд▓рдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реЛрдЧрд╛ - NRVO рдХрд╛рдо рдХрд░реЗрдЧрд╛, рд╡рд╕реНрддреБ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рддреБрд░рдВрдд "рд╕реНрд▓реЙрдЯ" рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Base a; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; }</code> </pre><br>  рдпрд╣рд╛рдВ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХрд┐рд╕ рд╡рд╕реНрддреБ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЪрд╛рд▓ рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛</a> (рд╕реА ++ 11) рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛</a> : <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c)</span></span></span><span class="hljs-function"> </span></span>{ Base a,b; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre><br>  рдпрд╣рд╛рдБ рдпрд╣ рдереЛрдбрд╝рд╛ рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ ... рдЪреВрдВрдХрд┐ рд╡рд╛рдкрд╕реА рдореВрд▓реНрдп рдХрд╛ рдкреНрд░рдХрд╛рд░ рдШреЛрд╖рд┐рдд рдкреНрд░рдХрд╛рд░ рд╕реЗ рдЕрд▓рдЧ рд╣реИ, рдЖрдк рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <code>move</code> рдирд╣реАрдВ рдЙрдард╛ рд╕рдХрддреЗ <code>move</code> , рдЗрд╕рд▓рд┐рдП рдХреЙрдкреА рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдРрд╕рд╛ рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <code>move</code> рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c)</span></span></span><span class="hljs-function"> </span></span>{ Derived a,b; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(b); }</code> </pre><br>  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ <code>foo2</code> рдХреЗ рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдЯрд░реНрдирд░реА рдСрдкрд░реЗрдЯрд░ рдПрдХ рдмрд╣реБрдд рд╣реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдЬреАрдм рдмрд╛рдд рд╣реИ</a> ... <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo4</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c)</span></span></span><span class="hljs-function"> </span></span>{ Base a, b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(c ? a : b); }</code> </pre><br>  <code>foo4</code> рд╕рдорд╛рди, рд▓реЗрдХрд┐рди рдпрд╣ рднреА рдПрдХ рдЕрд▓рдЧ рдкреНрд░рдХрд╛рд░ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ <code>move</code> рдХреА рдмрд┐рд▓реНрдХреБрд▓ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c)</span></span></span><span class="hljs-function"> </span></span>{ Derived a, b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(c ? a : b); }</code> </pre><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЙрджрд╛рд╣рд░рдгреЛрдВ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдПрдХ рдХреЛ рдЕрднреА рднреА рд╕реЛрдЪрдирд╛ рд╣реИ рдХрд┐ рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рддреБрдЪреНрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рднреА рдЕрд░реНрде рдХреИрд╕реЗ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рдП ... рдХреНрдпрд╛ рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЛ рдереЛрдбрд╝рд╛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЙрдкрд╛рдп рд╣реИрдВ?  рдРрд╕реЗ рд╣реИрдВ: рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рдХреНрд▓реИрдВрдЧ рдЕрдм рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдХреЙрд▓ <code>move</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреА</a> рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирд┐рджрд╛рди рдХрд╛</a> рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдирдП рдорд╛рдирдХ рдореЗрдВ рдХрдИ рдкреНрд░рд╕реНрддрд╛рд╡ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">P1155</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">P0527</a> ) рд╣реИрдВ рдЬреЛ рд╕реНрдкрд╖реНрдЯ <code>move</code> рдХрдо рдЖрд╡рд╢реНрдпрдХ рдмрдирд╛ рджреЗрдВрдЧреЗред <br><br><h2>  рдпрд╛рдж рд░рдЦрдиреЗ рдпреЛрдЧреНрдп рдмрд╛рддреЗрдВ </h2><br><ol><li>  RVO / NRVO рдХреЗрд╡рд▓ рддрднреА рдХрд╛рдо рдХрд░реЗрдЧрд╛ рдЬрдм: <br><ul><li>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЬреНрдЮрд╛рдд рд╣реИ рдХрд┐ "рд╡рд╛рдкрд╕реА рдорд╛рди рд╕реНрд▓реЙрдЯ" рдореЗрдВ рдХреМрди рд╕реА рдПрдХрд▓ рд╡рд╕реНрддреБ рдмрдирд╛рдИ рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП; </li><li>  рд░рд┐рдЯрд░реНрди рдСрдмреНрдЬреЗрдХреНрдЯ рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рдХрд╛рд░ рд╕рдорд╛рди рд╣реИрдВред </li></ul></li><li>  рдпрджрд┐ рд░рд┐рдЯрд░реНрди рд╡реИрд▓реНрдпреВ рдореЗрдВ рдЕрд╕реНрдкрд╖реНрдЯрддрд╛ рд╣реИ, рддреЛ: <br><ul><li>  рдпрджрд┐ рд▓реМрдЯреЗ рд╣реБрдП рдСрдмреНрдЬреЗрдХреНрдЯ рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдкреНрд░рдХрд╛рд░ рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕ рдХрджрдо рдХреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд░реВрдк рд╕реЗ рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛; </li><li>  рдЕрдиреНрдпрдерд╛, рдЖрдкрдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдореВрд╡ рдХреЙрд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </li></ul></li><li>  рдЯрд░реНрдирд░реА рдСрдкрд░реЗрдЯрд░ рдХреЗ рд╕рд╛рде рд╕рд╛рд╡рдзрд╛рдиреА: рдпрд╣ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╕реНрдкрд╖реНрдЯ рдХрджрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред <br></li><li>  рдЙрдкрдпреЛрдЧреА рдбрд╛рдпрдЧреНрдиреЛрд╕реНрдЯрд┐рдХреНрд╕ (рдпрд╛ рдХрдо рд╕реЗ рдХрдо рд╕реНрдерд┐рд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ) рдХреЗ рд╕рд╛рде рд╕рдВрдХрд▓рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред <br></li></ol><br><h1>  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br>  рдФрд░ рдлрд┐рд░ рднреА рдореИрдВ рд╕реА ++ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддрд╛ рд╣реВрдВ;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi465181/">https://habr.com/ru/post/hi465181/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi465167/index.html">рд╕рдВрд╕рд╛рдзрди рдпреЛрдЬрдирд╛ред рдпрд╣ рдХрд╛рдо рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ? рднрд╛рдЧ 1</a></li>
<li><a href="../hi465169/index.html">рдкреАрд╡реАрдПрд╕-рд╕реНрдЯреВрдбрд┐рдпреЛ рд╕реЗ DIY: рдЙрдкрд▓рдмреНрдзрд┐рдпреЛрдВ рдХрд╛ Gamification</a></li>
<li><a href="../hi465173/index.html">рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╕рджрд╕реНрдпрддрд╛ рдХреА рд▓рд╛рдЧрдд рдХреЛ рдХреИрд╕реЗ рдмрджрд▓реЗрдВред рдРрдк рд╕реНрдЯреЛрд░ рдХрдиреЗрдХреНрдЯ рдФрд░ Google Play рдХрдВрд╕реЛрд▓</a></li>
<li><a href="../hi465177/index.html">рдиреЙрдЯ рдиреНрдпреВ рд░рд┐рд▓реЗрдХрд╕ рд╡рди: рдП рд▓реБрдХ рдПрдЯ рдбрд╛рдЯрдбреЙрдЧ рдПрдВрдб рдЕрдЯреИрдЯрд╕</a></li>
<li><a href="../hi465179/index.html">рдХреНрдпрд╛ рдСрдЯреЛрдореЗрд╢рди рдореИрдиреБрдЕрд▓ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдХреА рдЬрдЧрд╣ рд▓реЗрдЧрд╛?</a></li>
<li><a href="../hi465185/index.html">рдирдП рд╡реАрдбрд┐рдпреЛ рдирд┐рдЧрд░рд╛рдиреА рдорд╛рдирдХ: рд░рд╛рдд рдореЗрдВ рд░рдВрдЧ, рд╡рд┐рд░реЛрдзреА рд╢реЛрд░, ePoE</a></li>
<li><a href="../hi465187/index.html">6 рдЕрдВрдЧреНрд░реЗрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рджреЗрд╢реА рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╡реЗрддрди рд╡рд╛рд░реНрддрд╛ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi465189/index.html">рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд╡рди рд╕реНрдкреНрд░рд┐рдВрдЯ рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдЯреАрдо</a></li>
<li><a href="../hi465191/index.html">рдкреНрд░рд╢рд┐рдХреНрд╖рдг рд╕рд┐рд╕реНрдХреЛ 200-125 CCNA v3.0ред рджрд┐рди 25. IPv6 рдХрд╛ рдЧрд╣рди рдЕрдзреНрдпрдпрди</a></li>
<li><a href="../hi465193/index.html">рдПрдХ рдбреЙрдХрдЯрд░ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдХ рдПрдВрдбреНрд░реЙрдЗрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдирд┐рд░реНрдорд╛рдг</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>