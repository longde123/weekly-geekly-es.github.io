<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìí ü§∂üèø üóëÔ∏è D√©veloppement √©lectronique. √Ä propos des microcontr√¥leurs sur les doigts ü§Æ üë©üèæ‚Äçüíº üë©üèΩ‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous pensez √† une startup technologique, vous n'avez pas du tout besoin d'√™tre un as de l'√©lectronique, un sp√©cialiste √©troit connaissant les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement √©lectronique. √Ä propos des microcontr√¥leurs sur les doigts</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445936/"><img src="https://habrastorage.org/webt/ft/gy/ko/ftgykowsgjxoa9maxgetdwgbzyi.jpeg"><br><br>  Lorsque vous pensez √† une startup technologique, vous n'avez pas du tout besoin d'√™tre un as de l'√©lectronique, un sp√©cialiste √©troit connaissant les bases du marketing a beaucoup plus de chances d'avoir une bonne id√©e, mais m√™me en commandant quelqu'un pour le d√©velopper, vous devez naviguer dans les capacit√©s de la base √©l√©mentaire moderne et pr√©senter le prix de la solution.  Sinon, vous pouvez exiger l'impossible, ou obtenir un appareil avec des co√ªts trop chers sur une base d'√©l√©ments obsol√®tes. <br>  Sous la coupe, une tentative de parler bri√®vement et simplement des capacit√©s des microcontr√¥leurs modernes √† des gens loin d'eux.  Pour ceux qui ont l'id√©e d'un nouvel appareil √©lectronique, mais n'ont aucune id√©e de ce qu'est un microcontr√¥leur.  Ceux qui veulent faire le premier pas des exp√©riences divertissantes avec la plate-forme Arduino √† la conception de leurs propres appareils peuvent √©galement y trouver des conseils simples mais utiles.  J'ai essay√©, sans m'attarder sur les d√©tails techniques, <s>√† cet effet, il ne suffit pas que le livre</s> √©nonce l'essence et donne quelques conseils simples mais utiles sur les circuits pour √©viter aux d√©butants des erreurs √©l√©mentaires. <br><a name="habracut"></a><br><h3>  R√©sum√© de l'article: </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment les microcontr√¥leurs ont conquis le monde</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ARM Architecture - Leader du march√© des microcontr√¥leurs d'aujourd'hui</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comp√©tition avec les jeunes fr√®res</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√Ä propos de la pose d'asphalte, des bienfaits du sommeil et de ses vari√©t√©s</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√Ä propos de la technologie de fabrication et de l'apparence des s√©ries de microcontr√¥leurs</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La p√©riph√©rie du microcontr√¥leur ARM le plus simple pour un demi-dollar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le moyen le moins cher d'obtenir des fonctionnalit√©s suppl√©mentaires</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Et qu'est-ce qui ajoutera la transition au Cortex-M4, en plus du prix augment√© plusieurs fois?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cortex-M7 - quand vous en voulez plus ...</a> <br><br><br><a name="MCU"></a><h4>  <font color="#66a3be">La protection du code, l'√©volutivit√© et la diversit√© ont aid√© les microcontr√¥leurs √† conqu√©rir le monde</font> </h4><br>  Tout appareil intelligent n√©cessite un contr√¥le.  Dans la plupart des cas, les microcontr√¥leurs le font aujourd'hui - des puces qui combinent un noyau de microprocesseur, une m√©moire et des modules p√©riph√©riques qui sont responsables de la communication avec d'autres composants de l'appareil et le monde ext√©rieur. <br><br><img src="https://habrastorage.org/webt/4m/8u/r5/4m8ur5ebaj5ss5wk1u06ibyqcoe.jpeg" align="left">  Les microcontr√¥leurs sont √† la hauteur de tous les m√©tiers.  Un microcontr√¥leur est capable de remplacer des dizaines de microcircuits sp√©cialis√©s qui seraient n√©cessaires pour ex√©cuter les fonctions requises si le microprocesseur jouait le r√¥le de calculatrice. <br><br>  L'un des avantages incontestables du microcontr√¥leur est que le programme sous lequel il s'ex√©cute est cach√© dans son bo√Ætier (dans la section intitul√©e "m√©moire du programme") et est tr√®s bien prot√©g√© contre le piratage, bien s√ªr, si le d√©veloppeur du microcode s'en est occup√© en activant les m√©canismes int√©gr√©s protection.  Ainsi, vous b√©n√©ficiez aujourd'hui autant que possible de la protection de la propri√©t√© intellectuelle. <br><br><img src="https://habrastorage.org/webt/rt/gg/bu/rtggbu8vffk3iumjdp_xhzkxp94.jpeg" align="right">  Ce qui ne peut pas √™tre pirat√© peut √™tre copi√©.  Pourquoi essayer de lire le code int√©gr√© dans le microcontr√¥leur du programme en utilisant des appareils co√ªteux et ing√©nieux, s'il est plus facile et moins cher de trouver un professionnel qui peut le r√©√©crire?  Peut-√™tre que le r√©sultat sera encore meilleur, et la fonctionnalit√© est plus riche que celle du prototype.  Oui, cela co√ªte de l'argent, mais le contenu de la m√©moire FLASH des microcontr√¥leurs d'aujourd'hui est si bien prot√©g√© que les tentatives de ¬´piratage¬ª grossier co√ªteront encore plus cher.  De plus, le probl√®me de la propri√©t√© intellectuelle est en train d'√™tre r√©solu et vous, ainsi que les codes sources du programme, avez la possibilit√© de d√©velopper et d'am√©liorer votre appareil. <br><br>  La m√©moire de programme, dans les microcontr√¥leurs universels modernes, est r√©inscriptible et le processus de r√©√©criture peut √™tre r√©p√©t√© plus de dix mille fois.  Il demande l'utilisation de ce fait pour mettre √† jour le logiciel afin d'√©liminer les erreurs qui s'y trouvent ou d'√©tendre les fonctions d'un appareil d√©j√† fonctionnel.  C'est assez simple √† mettre en ≈ìuvre - en ajoutant une section sp√©ciale de code appel√©e ¬´bootloader¬ª au programme, vous avez la possibilit√© de mettre √† jour le logiciel de votre appareil de diff√©rentes mani√®res: au point de service (si l'appareil a un connecteur sp√©cial cach√© √† l'int√©rieur du bo√Ætier), en le connectant √† ordinateur via USB, via un r√©seau ou m√™me une interface sans fil.  L'essentiel est de fournir √† l'appareil les p√©riph√©riques n√©cessaires pour cela.  Offrant la possibilit√© de mettre √† jour le logiciel, vous devez toujours penser √† la s√©curit√©, si ce processus n'est pas suffisamment prot√©g√©, non seulement les attaquants peuvent voler votre code, ils peuvent le modifier et l'utiliser √† leurs propres fins <s>, ce qui est insidieux</s> .  Par exemple, prenez le contr√¥le des choses de votre ¬´maison intelligente¬ª ou espionnez √† l'aide de la cam√©ra WEB que vous avez install√©e chez vous. <br><br><a name="ARM_MCU"></a><h4>  <font color="#66a3be">ARM Architecture - Leader du march√© des microcontr√¥leurs d'aujourd'hui</font> </h4><br>  Depuis l'√©poque des King Peas, les microcontr√¥leurs sont g√©n√©ralement r√©partis en fonction de la capacit√© des donn√©es sur lesquelles ils effectuent leurs op√©rations.  Dans la grande majorit√© des cas, aujourd'hui, dans les nouveaux d√©veloppements, il vaut la peine de choisir des microcontr√¥leurs 32 bits avec un c≈ìur ARM.  Il existe un grand nombre de modifications et vous pouvez toujours choisir l'instance qui convient le mieux pour r√©soudre votre probl√®me.  En fonction de l'ensemble des fonctions et des performances, le prix d'une puce peut varier de quelques dizaines √† quelques dizaines de dollars. <br>  Les microcontr√¥leurs (MCU), en fonction de l'architecture du c≈ìur de calcul, sont g√©n√©ralement divis√©s en grandes familles.  Aujourd'hui, pour le d√©veloppement d'appareils de petite et moyenne complexit√©, les microcontr√¥leurs les plus populaires avec des c≈ìurs de Cortex-M0 √† Cortex-M7.  Plus le nombre est √©lev√©, plus les capacit√©s de calcul (et pas seulement), le prix et la consommation √©lectrique maximale sont importants.  La succession de l'architecture a jou√© un r√¥le important dans la popularit√© d'ARM.  Un d√©veloppeur peut modifier le code du programme de ses d√©veloppements pr√©c√©dents √† moindre co√ªt, passant des microcontr√¥leurs d'un fabricant aux puces d'un autre et migrant entre des c≈ìurs avec des performances diff√©rentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d-/l5/o3/d-l5o3vfjxpjdltq9o6vftmu6wo.jpeg"></div><br><a name="brothers"></a><h4>  <font color="#66a3be">Comp√©tition avec les jeunes fr√®res</font> </h4><br>  Cependant, les ARM ne se sont pas dirig√©s.  Je me souviens bien de l'√©poque o√π les microcontr√¥leurs 8 bits √©taient les leaders absolus du march√© et, de leurs positions, des coll√®gues 16 bits ont essay√© de les pousser en vain, mais, ironiquement, seuls les fr√®res a√Æn√©s 32 bits ont r√©ussi √† le faire.  Il s'est av√©r√© qu'au moment de leur apparition, les technologies de fabrication de puces ont consid√©rablement r√©duit le co√ªt d'int√©gration de gros volumes de m√©moire FLASH.  Profitant de cette opportunit√©, les programmeurs ont commenc√© √† passer de l'assembleur √† un langage de niveau sup√©rieur - C, dont la structure reposait parfaitement sur une architecture 32 bits.  En cons√©quence, les microcontr√¥leurs 32 bits ont effectu√© des calculs beaucoup plus rapidement que leurs coll√®gues 8 et 16 bits, mais il y avait un probl√®me: leur consommation de courant √©tait plus √©lev√©e. <br><br>  Par cons√©quent, dans un premier temps, ils ont √©t√© utilis√©s dans les cas o√π des performances de calcul sup√©rieures √©taient requises. <br><br>  Il est connu que la consommation de courant moyenne du c≈ìur de calcul du microcontr√¥leur augmente de mani√®re significative avec une augmentation de sa fr√©quence d'horloge.  Au d√©but, les mod√®les 8 bits de microcontr√¥leurs avaient une consommation sensiblement plus faible √† une fr√©quence similaire et, en outre, pouvaient fonctionner √† partir d'une fr√©quence d'horloge basse, jusqu'√† 32 kHz. <br><br>  La consommation d'√©nergie des microcontr√¥leurs d√©pend fortement de la fr√©quence d'horloge du c≈ìur et de la p√©riph√©rie, afin de la r√©guler, ils ont commenc√© √† utiliser l'unit√© de g√©n√©ration de fr√©quence d'horloge bas√©e sur PLL, largement utilis√©e dans les dispositifs de transmission radio.  Cela a permis de varier largement la fr√©quence d'horloge sans changer le r√©sonateur √† quartz ma√Ætre.  Les modules p√©riph√©riques ne doivent pas n√©cessairement avoir la m√™me fr√©quence d'horloge que le c≈ìur de calcul.  Pour r√©duire leur consommation d'√©nergie, la fr√©quence a commenc√© √† leur √™tre fournie via des diviseurs avec un rapport de division contr√¥l√© par programme.  Introduit la possibilit√© de d√©sactiver les modules inutilis√©s.  Ces mesures ont consid√©rablement r√©duit la consommation d'√©nergie, mais elle est rest√©e nettement sup√©rieure √† celle des 8 bits. <br><br>  Pendant un court laps de temps, la parit√© s'est d√©velopp√©e - les microcontr√¥leurs 32 bits ont conquis le cr√©neau des applications haut de gamme, et les microcontr√¥leurs 8 bits ont occup√© en toute confiance des positions dans des appareils pour lesquels une faible consommation d'√©nergie √©tait importante.  Il a persist√© jusqu'√† ce que les microcontr√¥leurs 32 bits ma√Ætrisent parfaitement le mode de fonctionnement "impulsionnel". <br><br>  √Ä ce moment-l√†, les 8-biters ont √©galement appris √† le faire, mais, en raison de leurs performances m√©diocres, ils ont d√ª rester beaucoup plus √©veill√©s et, par cons√©quent, ils ont commenc√© √† perdre en consommation d'√©nergie, en particulier dans les t√¢ches n√©cessitant des calculs, comme l'illustre l'image ci-dessous. <br><br><img src="https://habrastorage.org/webt/ro/z1/ji/roz1jikhroyuoh_0whgbgiwusai.jpeg"><br><br><a name="sleep"></a><h4>  <font color="#66a3be">√Ä propos de la pose d'asphalte, des bienfaits du sommeil et de ses vari√©t√©s</font> </h4><br>  Les microcontr√¥leurs ont donc appris √† croire si bien qu‚Äôils ont commenc√© √† faire leur travail tr√®s rapidement et la plupart du temps, ils ont √©t√© contraints de ¬´battre le prix¬ª, d√©vorant de l‚Äô√©nergie pour effectuer des cycles de ralenti.  Sur les appareils auto-aliment√©s, cela r√©duit consid√©rablement la dur√©e de vie de la batterie ou la dur√©e de vie de la batterie sur une seule charge. <br><br>  Regardez les ouvriers du b√¢timent poser l'asphalte.  Ils intensifient fortement leur travail lorsqu'un camion arrive avec une nouvelle portion d'asphalte, et apr√®s la pose, il ralentit.  Les microcontr√¥leurs peuvent donc augmenter et diminuer la fr√©quence d'horloge centrale.  Cependant, cela n'est pas aussi facile pour eux que pour les travailleurs - la fr√©quence de fonctionnement de toute la p√©riph√©rie interne changera √©galement en m√™me temps, par cons√©quent, ses parties sensibles devront √™tre reconfigur√©es. <br>  Ne serait-il pas plus facile, apr√®s avoir fait tout le travail rapidement, de dormir un peu.  Souvent, oui.  De plus, les types de sommeil des microcontr√¥leurs diff√®rent encore plus consid√©rablement que chez l'homme. <br><br><img src="https://habrastorage.org/webt/_o/s5/4x/_os54x2gaveqetdf6d2erfih87o.jpeg" align="left">  Vous pouvez simplement faire une sieste.  Dans ce cas, notre puce est toujours pr√™te et d√®s que l'alarme du minuteur sonne ou qu'elle a √©t√© perturb√©e par une interruption externe, elle se r√©veille presque instantan√©ment.  Comme une personne pendant une sieste peut soulager le stress, mais pas vraiment dormir suffisamment lorsque vous √™tes constamment tir√©, de sorte que le microcontr√¥leur peut r√©duire sa consommation d'√©nergie dans ce mode ¬´seulement¬ª toutes les 10 fois, ce mode est appel√© SOMMEIL. <br><br>  La meilleure fa√ßon de bien dormir est de se d√©shabiller, de se coucher, de fermer les rideaux de la fen√™tre et d'activer l'alarme.  Cependant, apr√®s un tel r√™ve, vous ne vous mettrez pas imm√©diatement au travail.  Vous devrez au moins rincer √† l'eau froide et vous habiller.  Le microcontr√¥leur dispose √©galement de ce mode, lorsqu'il limite le nombre de stimuli externes et √©teint le g√©n√©rateur d'horloge principal.  Il s'agit du mode STOP.  Il peut r√©duire la consommation de 1000 fois, mais il faudra beaucoup de temps pour en sortir. <br><br>  Maintenant, imaginez qu'avant de vous coucher, vous avez bu une bonne dose de somnif√®res, √©teint l'alarme et le t√©l√©phone et ferm√© toutes les fen√™tres et les portes.  Ce sera le mode STAND BY.  Le microcontr√¥leur ne peut √™tre retir√© de ce mode qu'√† l'aide de conclusions sp√©ciales, et la plupart de la m√©moire de ce qu'il a fait avant un tel r√™ve sera perdue √† jamais, vous devrez recommencer √† travailler.  Mais √©tant dans ce mode, le MCU en consomme encore la moiti√©. <br><br>  Ce dernier, un mode tr√®s exotique, rappelle d√©j√† √† quelqu'un qui ne peut pas se retrouver sans √©quipement sp√©cial.  Dans ce cas, seul un g√©n√©rateur sp√©cial fonctionne <s>, cependant, qui fait partie du microcontr√¥leur</s> sur un quartz de montre s√©par√©, qui peut fonctionner √† partir de sa propre source d'alimentation et avoir litt√©ralement quelques octets de RAM, dont le but est de rappeler au microcontr√¥leur de quel √©tat il est tomb√©.  Si les parties restantes du microcontr√¥leur, en m√™me temps, sont d√©connect√©es de l'alimentation, la consommation √©lectrique peut d√©j√† √™tre un dix milli√®me du mode actif. <br><br>  <b>Lors du choix d'un mode d'√©conomie d'√©nergie, vous devez vous souvenir des cons√©quences de l'application</b> : <br><br><ul><li>  plus le r√™ve est profond, plus l'√©veil est long </li><li>  plus le r√™ve est profond, moins il y a de moyens pour en sortir le microcontr√¥leur </li><li>  plus le sommeil est profond, moins il reste d'informations sur l'√©tat pr√©c√©dent du microcontr√¥leur </li><li>  Pour atteindre les valeurs minimales d√©clar√©es, dans de nombreux modes, il est n√©cessaire de prendre des mesures suppl√©mentaires, par exemple - d√©connexion des p√©riph√©riques </li><li>  Pour minimiser la consommation d'√©nergie de l'appareil dans son ensemble, il est n√©cessaire de concevoir correctement les circuits de l'ensemble de l'appareil </li><li>  Pour minimiser la consommation d'√©nergie de l'appareil dans son ensemble, vous devez vous assurer que les autres composants et circuits disposent √©galement d'une micropuissance en mode inactif.  Il est insens√© de faire des efforts √©normes pour abaisser la consommation du microcontr√¥leur en dessous d'un microamp√®re et, en m√™me temps, utiliser un stabilisateur bon march√© avec un courant d'autoconsommation de 100 microamp√®res dans l'appareil, <s>mais c'est tr√®s courant</s> </li><li>  pour une utilisation r√©ussie des modes de sommeil profond, non seulement le programme, mais aussi les circuits, doivent √™tre soigneusement pens√©s, sinon, au lieu de sauvegarder, vous pouvez avoir des probl√®mes tr√®s graves - qui se produisent rarement, mais l'appareil ¬´mort¬ª se bloque pour une raison inexplicable, ou se r√©veille trop souvent et, comme r√©sultat, la consommation est de plusieurs ordres de grandeur plus √©lev√©e que pr√©vu </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ya/4r/vb/ya4rvbmj6zuxbkfdm42vayp9qnm.jpeg"></div><br>  Si votre programmeur avec un ing√©nieur de circuit s'est bl√¢m√© pour la premi√®re fois pour la courbure et, ensemble, le fabricant pour avoir publi√© des nombres irr√©alistes dans des fiches techniques sur le microcontr√¥leur, et que votre appareil met les batteries un ordre de grandeur plus rapidement que vous ne le pensiez, c'est une raison de se tourner au moins vers l'ind√©pendance des experts hautement qualifi√©s. <br><br><a name="family"></a><h4>  <font color="#66a3be">√Ä propos de la technologie de fabrication et de l'apparence des s√©ries de microcontr√¥leurs</font> </h4><br>  La partie physiquement active du microcontr√¥leur, comme la grande majorit√© des autres microcircuits, est g√©n√©ralement form√©e sur une tranche de monosilicium (appelons-la, dans ce contexte, une puce).  Les copeaux occupent une tr√®s petite surface, mais il est technologiquement rentable de produire des plaques de grand diam√®tre.Par cons√©quent, g√©n√©ralement un grand nombre de copeaux, comme les nids d'abeilles, sont plac√©s sur une grande plaque et form√©s au cours d'un processus technologique.  Par la suite, les plaques sont d√©coup√©es en morceaux, recevant des copeaux individuels, qui sont plac√©s dans le bo√Ætier. <img src="https://habrastorage.org/webt/zb/ci/pl/zbcipl0p0xcz2exeiddm0indj7a.jpeg" align="left">  Le d√©veloppement de la topologie et le d√©bogage des processus technologiques d'une nouvelle puce sont tr√®s co√ªteux, et l'espace occup√© par une seule puce sur une plaque n'est g√©n√©ralement pas important.  Il est rentable pour les fabricants de produire des puces en gros lots, mais les utilisateurs ont besoin de microcontr√¥leurs dans diff√©rents cas - il est important pour quelqu'un d'obtenir un bo√Ætier plus petit et moins cher, d'autre part, plus de sorties sont n√©cessaires pour contr√¥ler un LCD ou une m√©moire externe avec une interface parall√®le.  Il est avantageux pour les fabricants de couvrir toutes les niches afin que les clients ne se pr√©cipitent pas sur leurs concurrents sans trouver le mod√®le optimal pour eux-m√™mes. <br><br>  Il est souvent plus rentable de lib√©rer un grand lot d'une puce universelle et de le placer dans des cas diff√©rents que de lancer une douzaine de puces diff√©rentes.  Pour les puces plac√©es dans des bo√Ætiers avec un petit nombre de broches, certains ports (dans ce contexte, par ports, nous entendons des plots de contact √† la surface de la puce qui servent √† communiquer avec le monde ext√©rieur) restent simplement non connect√©s.  Souvent, les fabricants vont plus loin - pour augmenter la demande et le prix des microcontr√¥leurs avec un grand nombre de pieds, ils coupent artificiellement la fonctionnalit√© de ceux qui en ont moins - d√©sactivent certaines fonctions, limitent la quantit√© de m√©moire disponible, etc. <br><br>  Ainsi, sur la base d'une seule puce, ils forment une s√©rie de microcontr√¥leurs dont la taille de la m√©moire diff√®re consid√©rablement et un ensemble de modules p√©riph√©riques, parfois parfois au prix.  Dans le m√™me temps, les puces qui y sont install√©es peuvent √™tre d√©coup√©es dans les m√™mes plaques.  √âtant donn√© que la zone sur laquelle se trouve une puce est petite, sa contribution au co√ªt du produit final est √©galement petite et peut √™tre sacrifi√©e.  Il devient avantageux de d√©sactiver la m√©moire suppl√©mentaire et d'autres fonctions, par exemple, au stade des tests - soit √† l'aide de bits de configuration une fois programmables, soit en br√ªlant les cavaliers avec un laser.  Ce n'est que pour la plupart des produits de masse qu'il est logique de cr√©er un mod√®le photo l√©g√®rement modifi√© pour cela.  De plus, il n'est pas n√©cessaire qu'il n'y ait pas de m√©moire inutilis√©e physiquement, elle peut, encore une fois, √™tre simplement d√©sactiv√©e en supprimant les cavaliers dans le mod√®le. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/uu/wr/yxuuwr9uhryuqjgsw9faxxl_szo.jpeg"></div><br>  Ainsi, √† partir d'une conception de puce standard, toute une s√©rie de microcircuits est form√©e. <br><br><a name="perif"></a><h4>  <font color="#66a3be">La p√©riph√©rie du microcontr√¥leur ARM le plus simple pour un demi-dollar</font> </h4><br>  Le c≈ìur du processeur est le cerveau, mais pour qu'il ne ressemble pas √† un ¬´cheval sph√©rique dans le vide¬ª, des analogues des sens et des membres sont n√©cessaires. <br><br>  Dans le microcontr√¥leur, leur r√¥le est jou√© par les conclusions sur le bo√Ætier, auquel les ports (pads) de la puce peuvent √™tre connect√©s √† l'int√©rieur du bo√Ætier.  √Ä son tour, gr√¢ce √† des commutateurs internes, divers modules p√©riph√©riques peuvent √™tre connect√©s au m√™me port. <br>  Pour commencer, consid√©rons la p√©riph√©rie de l'une des s√©ries les plus simples de ST bas√©e sur le noyau Cortex-M0 - stm32F03. <br><br><img src="https://habrastorage.org/webt/mr/bx/fv/mrbxfvq_arcn6zy_3aapgjflvho.jpeg"><br><br> <b>       :</b> <br> <b><font color="#66a3be">   (Real Time Clock  RTC)</font></b> ,             .      ,            ,        .  ,      ,            . <br><br> <b><font color="#66a3be">WatchDog</font></b> ‚Äî      , ,         .    .      ‚Äú‚Äù    ,   ,   .   ,     ,   ,      .         , WatchDog ,    -      .     ,         WatchDog      . <br><br> <b><font color="#66a3be">  - (General Purpose Input-Output GPIO)</font></b> ‚Äî    ,     .      ,   . <br><br>     .         (     ),      ,     1.        , ,     ,          ,     .  ,    ,   ,        20 ‚Äî 50      (pull-up)    (pull-down). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si les sorties sont configur√©es avec des sorties num√©riques, elles peuvent √™tre converties par programme √† un niveau √©lev√© </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©gal √† la tension d'alimentation du microcontr√¥leur</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou faible. </font><font style="vertical-align: inherit;">Il existe des modes plus d√©licats, mais nous n'entrerons pas dans des d√©tails excessifs.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseils pour les d√©veloppeurs novices</font></font></b> <div class="spoiler_text"> <i>  ‚Äî    ,     ,      .    ,   ,     ,        ,    . ,   ,   ‚Äî      ,     ,    ,           . <br><br><img src="https://habrastorage.org/webt/a4/06/xz/a406xzrlqas-efxv5iidkjlmhmi.jpeg"><br><br>      ,    ( ),      . X4 ‚Äî    .    5-7,     .      , ,   ,       ,     R24-R26,  1 .  VD4-VD6     5 ,   ,    ,     3,3 ,       5 .  R29-R31  100 . <br>         .        ,    .     STM32Fxx    <s>   </s>    5  ,       ,     ,          . <br><br> ,   .  , ,         ,         ‚Äî              (- ).    ,       .    . <br><br>    .          .          ¬´¬ª ,      . <br><br>      ,     .         ,           ‚Äî  .  ,          ,    . <br> ,    ,   ARM       ,   8- .    ,         ,    .     ,     ,    ,     .</i> </div></div><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capteur de temp√©rature</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le microcontr√¥leur poss√®de son propre capteur de temp√©rature, bien que peu pr√©cis, il peut n√©anmoins, avec certaines hypoth√®ses, √™tre utilis√© pour mesurer la temp√©rature √† l'int√©rieur de l'appareil.</font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Num√©ro de s√©rie unique</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chaque microcontr√¥leur poss√®de son propre num√©ro de s√©rie unique qui lui est attribu√© en usine. Une fonctionnalit√© tr√®s pratique qui peut √™tre utilis√©e pour organiser la production en s√©rie de vos produits.</font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Interfaces pour l'√©change de donn√©es</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Divers microcontr√¥leurs de cette s√©rie peuvent avoir plusieurs des interfaces les plus courantes qui facilitent consid√©rablement la communication avec d'autres puces et le monde ext√©rieur:</font></font><br><br><ul><li> USART ‚Äî   ,       <s>   COM  RS232</s> ,     </li><li> SPI ‚Äî  ,     ,    </li><li> I2C ‚Äî  ,               .      ,           </li></ul><br>          GPIO,            . <br><br> <b><font color="#66a3be">-    AD</font></b>     . <br><br>   ,      .          ,         ,           .        .       12    ,  10     16. <br><br><img src="https://habrastorage.org/webt/2g/ru/k_/2gruk_gpzqlqu_rxupfdbyrmb4s.jpeg"><br><br>   3  12        3/4096=0.00073  ‚Äî   . <br><br>         . <br><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"> <i>               .   ,     ,             <br> <b>    </b> <br><br></i> <ul><li>    MCU      </li><li>      MCU     </li></ul><br> <b>    </b> <br><br><ul><li>           ‚Äî      MCU               XR7  100 ,   ,          ‚Äî  . </li></ul><br> <b>    </b> <br><br><ul><li>        ,     .                  NP0     ,     ,       </li><li>     ,     ,             ,  ,    </li><li>             ‚Äú‚Äù,            ‚Äî       </li></ul><br> <b>    </b> ,  ,        ,      ,                 ,        . <br><br><ul><li>     ,          ,      ,   </li><li>          ( ),   .        ,   ,   ,  .     ,         </li></ul><br><img src="https://habrastorage.org/webt/cm/hp/1h/cmhp1hbrgbk70yzu20fl-v5agdu.jpeg"><br><br>                 .            MEMS             ,    .     ,        ,     . <br><br>   VBUT     .      : R5-10 , 10 0.1 ,   L1  L2 BLM18PG471SN1D     . <br><br><img src="https://habrastorage.org/webt/bi/gs/ja/bigsjabd3x3fbkyhfbnch4bsenc.jpeg"><br><br>       .  ,        ASIC,     .      ‚Äî   .         ,   ,     .        ¬´ ¬ª. <br><br>       ,   . ,    ,  ,   ,      .     1,      16.   ?  ,      .       10 ,     ‚Äî       10    .   ,   .    , ,     1 . ,    10       10 ! <br></div></div><br>  <b><font color="#66a3be">Un syst√®me d'acc√®s direct √† la m√©moire DAP ou DMA</font></b> est une autre chose importante.  Ce module vous permet d'envoyer des donn√©es de la p√©riph√©rie vers la m√©moire ou vice versa. <br><br>  Par exemple, avec son aide, vous pouvez allouer un morceau de m√©moire pour stocker des donn√©es provenant de l'ADC et en faire un tampon circulaire.  Ensuite, l'ADC d√©marre en mode de lecture de donn√©es √† intervalles r√©guliers.  En utilisant les m√©canismes DMA, les donn√©es lues seront, sans la participation du noyau, ind√©pendamment, octet par octet, plac√©es dans un tampon d√©di√©.  Lorsque le tampon est compl√®tement plein, le noyau recevra un signal et commencera √† les traiter par programme, et le syst√®me DMA commencera le processus de d√©marrage depuis le d√©but.  √âtant donn√© que DMA a plusieurs canaux, personne ne se soucie d'impl√©menter pour notre cas une sortie automatique vers USART des donn√©es du tampon.  En cons√©quence, nous obtenons le processus de transfert de la lecture de l'ADC vers USART qui fonctionne sans utiliser le noyau, et le simple travail du programmeur sur la configuration DMA ne sera pas rentable. <br><br>  <b><font color="#66a3be">Module de modulation de largeur d'impulsion PWM ou PWM</font></b> , en raison des limites de l'article, nous ne nous attarderons pas sur celui-ci en d√©tail, je note seulement qu'il s'agit d'une fonction extr√™mement utile et largement utilis√©e avec laquelle il est possible de contr√¥ler la luminosit√© des LED, la vitesse du moteur, les machines de direction, la conception intelligente DC -Convertisseurs DC et m√™me synth√©tiser le son. <br><br>  Que puis-je obtenir en ajoutant 30 cents? <br><br><a name="family_plus"></a><h4>  <font color="#66a3be">Passage √† Cortex-M0 +.</font>  <font color="#66a3be">Le moyen le moins cher d'obtenir des fonctionnalit√©s suppl√©mentaires</font> </h4><br>  Et quels petits pains suppl√©mentaires le microcontr√¥leur de la derni√®re s√©rie offre-t-il avec un noyau l√©g√®rement plus moderne que le Cortex-M0 +, √† un co√ªt de 20 √† 50 cents plus cher que les analogues de la s√©rie ci-dessus en termes de corps et de nombre de sorties? <br><br>  Tableau des diff√©rences entre les s√©ries <br><br><img src="https://habrastorage.org/webt/2y/ep/sx/2yepsxg9tqadr51lrrn23xaksnw.jpeg"><br><br><ul><li>  fr√©quence d'horloge maximale doubl√©e </li><li>  de 2 √† 1,7 volts les chutes de tension d'alimentation minimales </li><li>  ADC est capable de travailler deux fois et demie plus vite </li><li>  deux canaux d'un convertisseur num√©rique-analogique 12 bits sont apparus.  Il s'agit d'une fonction extr√™mement utile, √† l'aide de laquelle il est possible de former un signal d'une tension donn√©e aux bornes avec une pr√©cision meilleure que 1 mV, par exemple, des formes d'onde arbitraires dans la plage de fr√©quences audio </li><li>  des comparateurs sont apparus - des dispositifs pour comparer les valeurs de deux signaux analogiques, il peut √™tre utile de le dire lors de la d√©termination du moment de surintensit√© </li><li>  Ajout d'une interface USB via laquelle vous pouvez connecter des appareils √† un ordinateur.  La disponibilit√© d'options de gestion de l'alimentation pour la mise en ≈ìuvre d'une interface compatible USB type 3-C est particuli√®rement int√©ressante.  J'en ai parl√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans un de mes articles sur Habr√©</a> </li><li>  Un acc√©l√©rateur AES pour les proc√©dures de cryptage / d√©cryptage 256 bits est apparu </li><li>  UART a eu l'opportunit√© de travailler en modes veille et support mat√©riel pour les protocoles LIN (un r√©seau simple, largement utilis√© dans l'industrie automobile), IRDA (protocole de transfert de donn√©es via des LED infrarouges, rappelez-vous des t√©l√©commandes TV), SIMcard ... </li><li>  Minuteries √©tendues et module PWM </li><li>  la limite sup√©rieure de la plage de temp√©rature de fonctionnement est pass√©e √† 125 degr√©s </li><li>  fiabilit√© accrue gr√¢ce √† l'extension des modes de red√©marrage en cas de probl√®me d'alimentation </li><li>  Ajout d'un g√©n√©rateur de valeur al√©atoire mat√©riel ¬´honn√™te¬ª - une fonctionnalit√© utile en cryptographie </li></ul><br>  Eh bien, pour de nombreuses applications, un ajout de prix insignifiant se paie compl√®tement, car vous pouvez refuser de passer √† des microcontr√¥leurs plus chers de s√©ries de mod√®les sup√©rieurs. <br><br><a name="Cort4"></a><h4>  <font color="#66a3be">Et qu'est-ce qui ajoutera la transition au Cortex-M4, en plus du prix augment√© plusieurs fois?</font> </h4><br><img src="https://habrastorage.org/webt/tb/em/zm/tbemzmhj8xymuu7tmimap7hw4og.png"><br><br><ul><li>  La fr√©quence d'horloge maximale monte √† 80 MHz </li><li>  Un bloc semble acc√©l√©rer les calculs en virgule flottante </li><li>  Bien s√ªr, la m√©moire interne maximale a augment√© </li><li>  Les mod√®les avec 100 pieds ou plus prennent en charge la m√©moire statique externe </li><li>  L'USB a appris √† fonctionner en mode H√îTE </li><li>  Le contr√¥leur d'interface CAN est apparu.  Il s'agit d'une interface tr√®s prometteuse con√ßue pour des applications hautement fiables.  Il a commenc√© sa marche victorieuse avec l'industrie automobile et m√®ne une guerre prolong√©e avec le RS-485, obsol√®te depuis longtemps, dans l'industrie de l'automatisation industrielle extr√™mement conservatrice depuis pr√®s de 20 ans. </li><li>  Une interface pour connecter la carte SD est apparue.  Une fonctionnalit√© tr√®s utile - ajoutez un support pour 50 cents √† votre appareil et obtenez un support de stockage amovible de plusieurs dizaines de gigaoctets!  La plupart des cartes parviennent √† fonctionner sur le SPI habituel, mais beaucoup plus lentement </li><li>  Ils ont ajout√© un amplificateur op√©rationnel int√©gr√© avec une grande vari√©t√© de modes de fonctionnement.  <i>Gr√¢ce √† cela et aux fonctions pr√©c√©dentes, pour mon dernier projet de st√©thoscope sans fil, j'ai d√ª arr√™ter le choix sur M4 au lieu de M0 +.</i>  <i>En cons√©quence, il est devenu possible de contr√¥ler l'amplification du signal √† partir du microphone MEMS et d'√©conomiser des dizaines d'heures d'enregistrements audio du travail du c≈ìur sur la carte SD</i> </li><li>  Le module crypto a appris √† lire les fonctions HASH dans le mat√©riel. </li><li>  Le contr√¥leur des applications tactiles est am√©lior√© et prend d√©sormais en charge non seulement les boutons, mais √©galement les √©l√©ments de d√©filement </li></ul><br><a name="Cort7"></a><h4>  <font color="#66a3be">Cortex-M7 - quand vous en voulez plus ...</font> </h4><br><img src="https://habrastorage.org/webt/lm/rb/gh/lmrbghjnya9ftsujulp3aygdma0.png"><br><br>  Dans le tr√®s grand nombre de projets, les capacit√©s fournies par les noyaux ci-dessus sont suffisantes, mais des exceptions se produisent √©galement.  Personnellement, cela ne m'est arriv√© que quelques fois, et une seule fois pour une tr√®s bonne raison - cela n√©cessitait des performances √©lev√©es pour la pr√©paration des donn√©es pour ASIC, un contr√¥leur Ethernet et un bus CAN-FD avec un taux de change accru. <br><br>  Si au niveau des microcontr√¥leurs universels avec des c≈ìurs Cortex 4 et inf√©rieurs, √† mon avis, ST est maintenant le leader en termes de prix / fonctionnalit√©, alors dans le domaine des puces plus performantes, il est inf√©rieur √† ATMEL, ou plut√¥t, MICROCHIP, qui l'a r√©cemment absorb√©.  J'ai donc opt√© pour la s√©rie ATSAMV71, √† partir de 6 $. <br><br>  En plus de ce qui pr√©c√®de (contr√¥leur Ethernet et bus CAN-FD), nous obtenons dans l'ensemble un noyau avec un acc√©l√©rateur d'op√©rations qui augmente consid√©rablement la productivit√©, fonctionnant √† une fr√©quence d'horloge allant jusqu'√† 300 MHz, des interfaces pour connecter une matrice vid√©o et un support pour la m√©moire dynamique. <br><br>  En conclusion, je demanderai √† ceux qui ont de l'exp√©rience dans la communication avec les microcontr√¥leurs de vous demander de choisir la r√©ponse appropri√©e √† la question. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445936/">https://habr.com/ru/post/fr445936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445922/index.html">Pourquoi regarder des √©missions en ligne si vous pouvez lire Habr</a></li>
<li><a href="../fr445924/index.html">TR√âSORS: quand les montres intelligentes deviennent √©tranges</a></li>
<li><a href="../fr445926/index.html">Le programme UFO Secret des √âtats-Unis a √©galement √©tudi√© les trous de ver et les dimensions suppl√©mentaires.</a></li>
<li><a href="../fr445928/index.html">Comment nous avons augment√© la productivit√© de Tensorflow au service de 70%</a></li>
<li><a href="../fr445932/index.html">S√©curit√© des applications client: conseils pratiques pour un d√©veloppeur frontal</a></li>
<li><a href="../fr445940/index.html">AMA avec Habr, v 7.0. Citron, beignets et nouvelles</a></li>
<li><a href="../fr445946/index.html">MWC: mode d'emploi</a></li>
<li><a href="../fr445948/index.html">H√©ritage en C ++: d√©butant, interm√©diaire, avanc√©</a></li>
<li><a href="../fr445952/index.html">Un billion de petits c√©libataires</a></li>
<li><a href="../fr445954/index.html">Acc√©l√©rateur d'IA de HSE, MTS et Rostelecom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>