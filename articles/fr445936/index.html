<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📒 🤶🏿 🗑️ Développement électronique. À propos des microcontrôleurs sur les doigts 🤮 👩🏾‍💼 👩🏽‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous pensez à une startup technologique, vous n'avez pas du tout besoin d'être un as de l'électronique, un spécialiste étroit connaissant les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement électronique. À propos des microcontrôleurs sur les doigts</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445936/"><img src="https://habrastorage.org/webt/ft/gy/ko/ftgykowsgjxoa9maxgetdwgbzyi.jpeg"><br><br>  Lorsque vous pensez à une startup technologique, vous n'avez pas du tout besoin d'être un as de l'électronique, un spécialiste étroit connaissant les bases du marketing a beaucoup plus de chances d'avoir une bonne idée, mais même en commandant quelqu'un pour le développer, vous devez naviguer dans les capacités de la base élémentaire moderne et présenter le prix de la solution.  Sinon, vous pouvez exiger l'impossible, ou obtenir un appareil avec des coûts trop chers sur une base d'éléments obsolètes. <br>  Sous la coupe, une tentative de parler brièvement et simplement des capacités des microcontrôleurs modernes à des gens loin d'eux.  Pour ceux qui ont l'idée d'un nouvel appareil électronique, mais n'ont aucune idée de ce qu'est un microcontrôleur.  Ceux qui veulent faire le premier pas des expériences divertissantes avec la plate-forme Arduino à la conception de leurs propres appareils peuvent également y trouver des conseils simples mais utiles.  J'ai essayé, sans m'attarder sur les détails techniques, <s>à cet effet, il ne suffit pas que le livre</s> énonce l'essence et donne quelques conseils simples mais utiles sur les circuits pour éviter aux débutants des erreurs élémentaires. <br><a name="habracut"></a><br><h3>  Résumé de l'article: </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment les microcontrôleurs ont conquis le monde</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ARM Architecture - Leader du marché des microcontrôleurs d'aujourd'hui</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Compétition avec les jeunes frères</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">À propos de la pose d'asphalte, des bienfaits du sommeil et de ses variétés</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">À propos de la technologie de fabrication et de l'apparence des séries de microcontrôleurs</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La périphérie du microcontrôleur ARM le plus simple pour un demi-dollar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le moyen le moins cher d'obtenir des fonctionnalités supplémentaires</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Et qu'est-ce qui ajoutera la transition au Cortex-M4, en plus du prix augmenté plusieurs fois?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cortex-M7 - quand vous en voulez plus ...</a> <br><br><br><a name="MCU"></a><h4>  <font color="#66a3be">La protection du code, l'évolutivité et la diversité ont aidé les microcontrôleurs à conquérir le monde</font> </h4><br>  Tout appareil intelligent nécessite un contrôle.  Dans la plupart des cas, les microcontrôleurs le font aujourd'hui - des puces qui combinent un noyau de microprocesseur, une mémoire et des modules périphériques qui sont responsables de la communication avec d'autres composants de l'appareil et le monde extérieur. <br><br><img src="https://habrastorage.org/webt/4m/8u/r5/4m8ur5ebaj5ss5wk1u06ibyqcoe.jpeg" align="left">  Les microcontrôleurs sont à la hauteur de tous les métiers.  Un microcontrôleur est capable de remplacer des dizaines de microcircuits spécialisés qui seraient nécessaires pour exécuter les fonctions requises si le microprocesseur jouait le rôle de calculatrice. <br><br>  L'un des avantages incontestables du microcontrôleur est que le programme sous lequel il s'exécute est caché dans son boîtier (dans la section intitulée "mémoire du programme") et est très bien protégé contre le piratage, bien sûr, si le développeur du microcode s'en est occupé en activant les mécanismes intégrés protection.  Ainsi, vous bénéficiez aujourd'hui autant que possible de la protection de la propriété intellectuelle. <br><br><img src="https://habrastorage.org/webt/rt/gg/bu/rtggbu8vffk3iumjdp_xhzkxp94.jpeg" align="right">  Ce qui ne peut pas être piraté peut être copié.  Pourquoi essayer de lire le code intégré dans le microcontrôleur du programme en utilisant des appareils coûteux et ingénieux, s'il est plus facile et moins cher de trouver un professionnel qui peut le réécrire?  Peut-être que le résultat sera encore meilleur, et la fonctionnalité est plus riche que celle du prototype.  Oui, cela coûte de l'argent, mais le contenu de la mémoire FLASH des microcontrôleurs d'aujourd'hui est si bien protégé que les tentatives de «piratage» grossier coûteront encore plus cher.  De plus, le problème de la propriété intellectuelle est en train d'être résolu et vous, ainsi que les codes sources du programme, avez la possibilité de développer et d'améliorer votre appareil. <br><br>  La mémoire de programme, dans les microcontrôleurs universels modernes, est réinscriptible et le processus de réécriture peut être répété plus de dix mille fois.  Il demande l'utilisation de ce fait pour mettre à jour le logiciel afin d'éliminer les erreurs qui s'y trouvent ou d'étendre les fonctions d'un appareil déjà fonctionnel.  C'est assez simple à mettre en œuvre - en ajoutant une section spéciale de code appelée «bootloader» au programme, vous avez la possibilité de mettre à jour le logiciel de votre appareil de différentes manières: au point de service (si l'appareil a un connecteur spécial caché à l'intérieur du boîtier), en le connectant à ordinateur via USB, via un réseau ou même une interface sans fil.  L'essentiel est de fournir à l'appareil les périphériques nécessaires pour cela.  Offrant la possibilité de mettre à jour le logiciel, vous devez toujours penser à la sécurité, si ce processus n'est pas suffisamment protégé, non seulement les attaquants peuvent voler votre code, ils peuvent le modifier et l'utiliser à leurs propres fins <s>, ce qui est insidieux</s> .  Par exemple, prenez le contrôle des choses de votre «maison intelligente» ou espionnez à l'aide de la caméra WEB que vous avez installée chez vous. <br><br><a name="ARM_MCU"></a><h4>  <font color="#66a3be">ARM Architecture - Leader du marché des microcontrôleurs d'aujourd'hui</font> </h4><br>  Depuis l'époque des King Peas, les microcontrôleurs sont généralement répartis en fonction de la capacité des données sur lesquelles ils effectuent leurs opérations.  Dans la grande majorité des cas, aujourd'hui, dans les nouveaux développements, il vaut la peine de choisir des microcontrôleurs 32 bits avec un cœur ARM.  Il existe un grand nombre de modifications et vous pouvez toujours choisir l'instance qui convient le mieux pour résoudre votre problème.  En fonction de l'ensemble des fonctions et des performances, le prix d'une puce peut varier de quelques dizaines à quelques dizaines de dollars. <br>  Les microcontrôleurs (MCU), en fonction de l'architecture du cœur de calcul, sont généralement divisés en grandes familles.  Aujourd'hui, pour le développement d'appareils de petite et moyenne complexité, les microcontrôleurs les plus populaires avec des cœurs de Cortex-M0 à Cortex-M7.  Plus le nombre est élevé, plus les capacités de calcul (et pas seulement), le prix et la consommation électrique maximale sont importants.  La succession de l'architecture a joué un rôle important dans la popularité d'ARM.  Un développeur peut modifier le code du programme de ses développements précédents à moindre coût, passant des microcontrôleurs d'un fabricant aux puces d'un autre et migrant entre des cœurs avec des performances différentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d-/l5/o3/d-l5o3vfjxpjdltq9o6vftmu6wo.jpeg"></div><br><a name="brothers"></a><h4>  <font color="#66a3be">Compétition avec les jeunes frères</font> </h4><br>  Cependant, les ARM ne se sont pas dirigés.  Je me souviens bien de l'époque où les microcontrôleurs 8 bits étaient les leaders absolus du marché et, de leurs positions, des collègues 16 bits ont essayé de les pousser en vain, mais, ironiquement, seuls les frères aînés 32 bits ont réussi à le faire.  Il s'est avéré qu'au moment de leur apparition, les technologies de fabrication de puces ont considérablement réduit le coût d'intégration de gros volumes de mémoire FLASH.  Profitant de cette opportunité, les programmeurs ont commencé à passer de l'assembleur à un langage de niveau supérieur - C, dont la structure reposait parfaitement sur une architecture 32 bits.  En conséquence, les microcontrôleurs 32 bits ont effectué des calculs beaucoup plus rapidement que leurs collègues 8 et 16 bits, mais il y avait un problème: leur consommation de courant était plus élevée. <br><br>  Par conséquent, dans un premier temps, ils ont été utilisés dans les cas où des performances de calcul supérieures étaient requises. <br><br>  Il est connu que la consommation de courant moyenne du cœur de calcul du microcontrôleur augmente de manière significative avec une augmentation de sa fréquence d'horloge.  Au début, les modèles 8 bits de microcontrôleurs avaient une consommation sensiblement plus faible à une fréquence similaire et, en outre, pouvaient fonctionner à partir d'une fréquence d'horloge basse, jusqu'à 32 kHz. <br><br>  La consommation d'énergie des microcontrôleurs dépend fortement de la fréquence d'horloge du cœur et de la périphérie, afin de la réguler, ils ont commencé à utiliser l'unité de génération de fréquence d'horloge basée sur PLL, largement utilisée dans les dispositifs de transmission radio.  Cela a permis de varier largement la fréquence d'horloge sans changer le résonateur à quartz maître.  Les modules périphériques ne doivent pas nécessairement avoir la même fréquence d'horloge que le cœur de calcul.  Pour réduire leur consommation d'énergie, la fréquence a commencé à leur être fournie via des diviseurs avec un rapport de division contrôlé par programme.  Introduit la possibilité de désactiver les modules inutilisés.  Ces mesures ont considérablement réduit la consommation d'énergie, mais elle est restée nettement supérieure à celle des 8 bits. <br><br>  Pendant un court laps de temps, la parité s'est développée - les microcontrôleurs 32 bits ont conquis le créneau des applications haut de gamme, et les microcontrôleurs 8 bits ont occupé en toute confiance des positions dans des appareils pour lesquels une faible consommation d'énergie était importante.  Il a persisté jusqu'à ce que les microcontrôleurs 32 bits maîtrisent parfaitement le mode de fonctionnement "impulsionnel". <br><br>  À ce moment-là, les 8-biters ont également appris à le faire, mais, en raison de leurs performances médiocres, ils ont dû rester beaucoup plus éveillés et, par conséquent, ils ont commencé à perdre en consommation d'énergie, en particulier dans les tâches nécessitant des calculs, comme l'illustre l'image ci-dessous. <br><br><img src="https://habrastorage.org/webt/ro/z1/ji/roz1jikhroyuoh_0whgbgiwusai.jpeg"><br><br><a name="sleep"></a><h4>  <font color="#66a3be">À propos de la pose d'asphalte, des bienfaits du sommeil et de ses variétés</font> </h4><br>  Les microcontrôleurs ont donc appris à croire si bien qu’ils ont commencé à faire leur travail très rapidement et la plupart du temps, ils ont été contraints de «battre le prix», dévorant de l’énergie pour effectuer des cycles de ralenti.  Sur les appareils auto-alimentés, cela réduit considérablement la durée de vie de la batterie ou la durée de vie de la batterie sur une seule charge. <br><br>  Regardez les ouvriers du bâtiment poser l'asphalte.  Ils intensifient fortement leur travail lorsqu'un camion arrive avec une nouvelle portion d'asphalte, et après la pose, il ralentit.  Les microcontrôleurs peuvent donc augmenter et diminuer la fréquence d'horloge centrale.  Cependant, cela n'est pas aussi facile pour eux que pour les travailleurs - la fréquence de fonctionnement de toute la périphérie interne changera également en même temps, par conséquent, ses parties sensibles devront être reconfigurées. <br>  Ne serait-il pas plus facile, après avoir fait tout le travail rapidement, de dormir un peu.  Souvent, oui.  De plus, les types de sommeil des microcontrôleurs diffèrent encore plus considérablement que chez l'homme. <br><br><img src="https://habrastorage.org/webt/_o/s5/4x/_os54x2gaveqetdf6d2erfih87o.jpeg" align="left">  Vous pouvez simplement faire une sieste.  Dans ce cas, notre puce est toujours prête et dès que l'alarme du minuteur sonne ou qu'elle a été perturbée par une interruption externe, elle se réveille presque instantanément.  Comme une personne pendant une sieste peut soulager le stress, mais pas vraiment dormir suffisamment lorsque vous êtes constamment tiré, de sorte que le microcontrôleur peut réduire sa consommation d'énergie dans ce mode «seulement» toutes les 10 fois, ce mode est appelé SOMMEIL. <br><br>  La meilleure façon de bien dormir est de se déshabiller, de se coucher, de fermer les rideaux de la fenêtre et d'activer l'alarme.  Cependant, après un tel rêve, vous ne vous mettrez pas immédiatement au travail.  Vous devrez au moins rincer à l'eau froide et vous habiller.  Le microcontrôleur dispose également de ce mode, lorsqu'il limite le nombre de stimuli externes et éteint le générateur d'horloge principal.  Il s'agit du mode STOP.  Il peut réduire la consommation de 1000 fois, mais il faudra beaucoup de temps pour en sortir. <br><br>  Maintenant, imaginez qu'avant de vous coucher, vous avez bu une bonne dose de somnifères, éteint l'alarme et le téléphone et fermé toutes les fenêtres et les portes.  Ce sera le mode STAND BY.  Le microcontrôleur ne peut être retiré de ce mode qu'à l'aide de conclusions spéciales, et la plupart de la mémoire de ce qu'il a fait avant un tel rêve sera perdue à jamais, vous devrez recommencer à travailler.  Mais étant dans ce mode, le MCU en consomme encore la moitié. <br><br>  Ce dernier, un mode très exotique, rappelle déjà à quelqu'un qui ne peut pas se retrouver sans équipement spécial.  Dans ce cas, seul un générateur spécial fonctionne <s>, cependant, qui fait partie du microcontrôleur</s> sur un quartz de montre séparé, qui peut fonctionner à partir de sa propre source d'alimentation et avoir littéralement quelques octets de RAM, dont le but est de rappeler au microcontrôleur de quel état il est tombé.  Si les parties restantes du microcontrôleur, en même temps, sont déconnectées de l'alimentation, la consommation électrique peut déjà être un dix millième du mode actif. <br><br>  <b>Lors du choix d'un mode d'économie d'énergie, vous devez vous souvenir des conséquences de l'application</b> : <br><br><ul><li>  plus le rêve est profond, plus l'éveil est long </li><li>  plus le rêve est profond, moins il y a de moyens pour en sortir le microcontrôleur </li><li>  plus le sommeil est profond, moins il reste d'informations sur l'état précédent du microcontrôleur </li><li>  Pour atteindre les valeurs minimales déclarées, dans de nombreux modes, il est nécessaire de prendre des mesures supplémentaires, par exemple - déconnexion des périphériques </li><li>  Pour minimiser la consommation d'énergie de l'appareil dans son ensemble, il est nécessaire de concevoir correctement les circuits de l'ensemble de l'appareil </li><li>  Pour minimiser la consommation d'énergie de l'appareil dans son ensemble, vous devez vous assurer que les autres composants et circuits disposent également d'une micropuissance en mode inactif.  Il est insensé de faire des efforts énormes pour abaisser la consommation du microcontrôleur en dessous d'un microampère et, en même temps, utiliser un stabilisateur bon marché avec un courant d'autoconsommation de 100 microampères dans l'appareil, <s>mais c'est très courant</s> </li><li>  pour une utilisation réussie des modes de sommeil profond, non seulement le programme, mais aussi les circuits, doivent être soigneusement pensés, sinon, au lieu de sauvegarder, vous pouvez avoir des problèmes très graves - qui se produisent rarement, mais l'appareil «mort» se bloque pour une raison inexplicable, ou se réveille trop souvent et, comme résultat, la consommation est de plusieurs ordres de grandeur plus élevée que prévu </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ya/4r/vb/ya4rvbmj6zuxbkfdm42vayp9qnm.jpeg"></div><br>  Si votre programmeur avec un ingénieur de circuit s'est blâmé pour la première fois pour la courbure et, ensemble, le fabricant pour avoir publié des nombres irréalistes dans des fiches techniques sur le microcontrôleur, et que votre appareil met les batteries un ordre de grandeur plus rapidement que vous ne le pensiez, c'est une raison de se tourner au moins vers l'indépendance des experts hautement qualifiés. <br><br><a name="family"></a><h4>  <font color="#66a3be">À propos de la technologie de fabrication et de l'apparence des séries de microcontrôleurs</font> </h4><br>  La partie physiquement active du microcontrôleur, comme la grande majorité des autres microcircuits, est généralement formée sur une tranche de monosilicium (appelons-la, dans ce contexte, une puce).  Les copeaux occupent une très petite surface, mais il est technologiquement rentable de produire des plaques de grand diamètre.Par conséquent, généralement un grand nombre de copeaux, comme les nids d'abeilles, sont placés sur une grande plaque et formés au cours d'un processus technologique.  Par la suite, les plaques sont découpées en morceaux, recevant des copeaux individuels, qui sont placés dans le boîtier. <img src="https://habrastorage.org/webt/zb/ci/pl/zbcipl0p0xcz2exeiddm0indj7a.jpeg" align="left">  Le développement de la topologie et le débogage des processus technologiques d'une nouvelle puce sont très coûteux, et l'espace occupé par une seule puce sur une plaque n'est généralement pas important.  Il est rentable pour les fabricants de produire des puces en gros lots, mais les utilisateurs ont besoin de microcontrôleurs dans différents cas - il est important pour quelqu'un d'obtenir un boîtier plus petit et moins cher, d'autre part, plus de sorties sont nécessaires pour contrôler un LCD ou une mémoire externe avec une interface parallèle.  Il est avantageux pour les fabricants de couvrir toutes les niches afin que les clients ne se précipitent pas sur leurs concurrents sans trouver le modèle optimal pour eux-mêmes. <br><br>  Il est souvent plus rentable de libérer un grand lot d'une puce universelle et de le placer dans des cas différents que de lancer une douzaine de puces différentes.  Pour les puces placées dans des boîtiers avec un petit nombre de broches, certains ports (dans ce contexte, par ports, nous entendons des plots de contact à la surface de la puce qui servent à communiquer avec le monde extérieur) restent simplement non connectés.  Souvent, les fabricants vont plus loin - pour augmenter la demande et le prix des microcontrôleurs avec un grand nombre de pieds, ils coupent artificiellement la fonctionnalité de ceux qui en ont moins - désactivent certaines fonctions, limitent la quantité de mémoire disponible, etc. <br><br>  Ainsi, sur la base d'une seule puce, ils forment une série de microcontrôleurs dont la taille de la mémoire diffère considérablement et un ensemble de modules périphériques, parfois parfois au prix.  Dans le même temps, les puces qui y sont installées peuvent être découpées dans les mêmes plaques.  Étant donné que la zone sur laquelle se trouve une puce est petite, sa contribution au coût du produit final est également petite et peut être sacrifiée.  Il devient avantageux de désactiver la mémoire supplémentaire et d'autres fonctions, par exemple, au stade des tests - soit à l'aide de bits de configuration une fois programmables, soit en brûlant les cavaliers avec un laser.  Ce n'est que pour la plupart des produits de masse qu'il est logique de créer un modèle photo légèrement modifié pour cela.  De plus, il n'est pas nécessaire qu'il n'y ait pas de mémoire inutilisée physiquement, elle peut, encore une fois, être simplement désactivée en supprimant les cavaliers dans le modèle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/uu/wr/yxuuwr9uhryuqjgsw9faxxl_szo.jpeg"></div><br>  Ainsi, à partir d'une conception de puce standard, toute une série de microcircuits est formée. <br><br><a name="perif"></a><h4>  <font color="#66a3be">La périphérie du microcontrôleur ARM le plus simple pour un demi-dollar</font> </h4><br>  Le cœur du processeur est le cerveau, mais pour qu'il ne ressemble pas à un «cheval sphérique dans le vide», des analogues des sens et des membres sont nécessaires. <br><br>  Dans le microcontrôleur, leur rôle est joué par les conclusions sur le boîtier, auquel les ports (pads) de la puce peuvent être connectés à l'intérieur du boîtier.  À son tour, grâce à des commutateurs internes, divers modules périphériques peuvent être connectés au même port. <br>  Pour commencer, considérons la périphérie de l'une des séries les plus simples de ST basée sur le noyau Cortex-M0 - stm32F03. <br><br><img src="https://habrastorage.org/webt/mr/bx/fv/mrbxfvq_arcn6zy_3aapgjflvho.jpeg"><br><br> <b>       :</b> <br> <b><font color="#66a3be">   (Real Time Clock  RTC)</font></b> ,             .      ,            ,        .  ,      ,            . <br><br> <b><font color="#66a3be">WatchDog</font></b> —      , ,         .    .      “”    ,   ,   .   ,     ,   ,      .         , WatchDog ,    -      .     ,         WatchDog      . <br><br> <b><font color="#66a3be">  - (General Purpose Input-Output GPIO)</font></b> —    ,     .      ,   . <br><br>     .         (     ),      ,     1.        , ,     ,          ,     .  ,    ,   ,        20 — 50      (pull-up)    (pull-down). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si les sorties sont configurées avec des sorties numériques, elles peuvent être converties par programme à un niveau élevé </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">égal à la tension d'alimentation du microcontrôleur</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou faible. </font><font style="vertical-align: inherit;">Il existe des modes plus délicats, mais nous n'entrerons pas dans des détails excessifs.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseils pour les développeurs novices</font></font></b> <div class="spoiler_text"> <i>  —    ,     ,      .    ,   ,     ,        ,    . ,   ,   —      ,     ,    ,           . <br><br><img src="https://habrastorage.org/webt/a4/06/xz/a406xzrlqas-efxv5iidkjlmhmi.jpeg"><br><br>      ,    ( ),      . X4 —    .    5-7,     .      , ,   ,       ,     R24-R26,  1 .  VD4-VD6     5 ,   ,    ,     3,3 ,       5 .  R29-R31  100 . <br>         .        ,    .     STM32Fxx    <s>   </s>    5  ,       ,     ,          . <br><br> ,   .  , ,         ,         —              (- ).    ,       .    . <br><br>    .          .          «» ,      . <br><br>      ,     .         ,           —  .  ,          ,    . <br> ,    ,   ARM       ,   8- .    ,         ,    .     ,     ,    ,     .</i> </div></div><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capteur de température</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le microcontrôleur possède son propre capteur de température, bien que peu précis, il peut néanmoins, avec certaines hypothèses, être utilisé pour mesurer la température à l'intérieur de l'appareil.</font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Numéro de série unique</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chaque microcontrôleur possède son propre numéro de série unique qui lui est attribué en usine. Une fonctionnalité très pratique qui peut être utilisée pour organiser la production en série de vos produits.</font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Interfaces pour l'échange de données</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Divers microcontrôleurs de cette série peuvent avoir plusieurs des interfaces les plus courantes qui facilitent considérablement la communication avec d'autres puces et le monde extérieur:</font></font><br><br><ul><li> USART —   ,       <s>   COM  RS232</s> ,     </li><li> SPI —  ,     ,    </li><li> I2C —  ,               .      ,           </li></ul><br>          GPIO,            . <br><br> <b><font color="#66a3be">-    AD</font></b>     . <br><br>   ,      .          ,         ,           .        .       12    ,  10     16. <br><br><img src="https://habrastorage.org/webt/2g/ru/k_/2gruk_gpzqlqu_rxupfdbyrmb4s.jpeg"><br><br>   3  12        3/4096=0.00073  —   . <br><br>         . <br><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"> <i>               .   ,     ,             <br> <b>    </b> <br><br></i> <ul><li>    MCU      </li><li>      MCU     </li></ul><br> <b>    </b> <br><br><ul><li>           —      MCU               XR7  100 ,   ,          —  . </li></ul><br> <b>    </b> <br><br><ul><li>        ,     .                  NP0     ,     ,       </li><li>     ,     ,             ,  ,    </li><li>             “”,            —       </li></ul><br> <b>    </b> ,  ,        ,      ,                 ,        . <br><br><ul><li>     ,          ,      ,   </li><li>          ( ),   .        ,   ,   ,  .     ,         </li></ul><br><img src="https://habrastorage.org/webt/cm/hp/1h/cmhp1hbrgbk70yzu20fl-v5agdu.jpeg"><br><br>                 .            MEMS             ,    .     ,        ,     . <br><br>   VBUT     .      : R5-10 , 10 0.1 ,   L1  L2 BLM18PG471SN1D     . <br><br><img src="https://habrastorage.org/webt/bi/gs/ja/bigsjabd3x3fbkyhfbnch4bsenc.jpeg"><br><br>       .  ,        ASIC,     .      —   .         ,   ,     .        « ». <br><br>       ,   . ,    ,  ,   ,      .     1,      16.   ?  ,      .       10 ,     —       10    .   ,   .    , ,     1 . ,    10       10 ! <br></div></div><br>  <b><font color="#66a3be">Un système d'accès direct à la mémoire DAP ou DMA</font></b> est une autre chose importante.  Ce module vous permet d'envoyer des données de la périphérie vers la mémoire ou vice versa. <br><br>  Par exemple, avec son aide, vous pouvez allouer un morceau de mémoire pour stocker des données provenant de l'ADC et en faire un tampon circulaire.  Ensuite, l'ADC démarre en mode de lecture de données à intervalles réguliers.  En utilisant les mécanismes DMA, les données lues seront, sans la participation du noyau, indépendamment, octet par octet, placées dans un tampon dédié.  Lorsque le tampon est complètement plein, le noyau recevra un signal et commencera à les traiter par programme, et le système DMA commencera le processus de démarrage depuis le début.  Étant donné que DMA a plusieurs canaux, personne ne se soucie d'implémenter pour notre cas une sortie automatique vers USART des données du tampon.  En conséquence, nous obtenons le processus de transfert de la lecture de l'ADC vers USART qui fonctionne sans utiliser le noyau, et le simple travail du programmeur sur la configuration DMA ne sera pas rentable. <br><br>  <b><font color="#66a3be">Module de modulation de largeur d'impulsion PWM ou PWM</font></b> , en raison des limites de l'article, nous ne nous attarderons pas sur celui-ci en détail, je note seulement qu'il s'agit d'une fonction extrêmement utile et largement utilisée avec laquelle il est possible de contrôler la luminosité des LED, la vitesse du moteur, les machines de direction, la conception intelligente DC -Convertisseurs DC et même synthétiser le son. <br><br>  Que puis-je obtenir en ajoutant 30 cents? <br><br><a name="family_plus"></a><h4>  <font color="#66a3be">Passage à Cortex-M0 +.</font>  <font color="#66a3be">Le moyen le moins cher d'obtenir des fonctionnalités supplémentaires</font> </h4><br>  Et quels petits pains supplémentaires le microcontrôleur de la dernière série offre-t-il avec un noyau légèrement plus moderne que le Cortex-M0 +, à un coût de 20 à 50 cents plus cher que les analogues de la série ci-dessus en termes de corps et de nombre de sorties? <br><br>  Tableau des différences entre les séries <br><br><img src="https://habrastorage.org/webt/2y/ep/sx/2yepsxg9tqadr51lrrn23xaksnw.jpeg"><br><br><ul><li>  fréquence d'horloge maximale doublée </li><li>  de 2 à 1,7 volts les chutes de tension d'alimentation minimales </li><li>  ADC est capable de travailler deux fois et demie plus vite </li><li>  deux canaux d'un convertisseur numérique-analogique 12 bits sont apparus.  Il s'agit d'une fonction extrêmement utile, à l'aide de laquelle il est possible de former un signal d'une tension donnée aux bornes avec une précision meilleure que 1 mV, par exemple, des formes d'onde arbitraires dans la plage de fréquences audio </li><li>  des comparateurs sont apparus - des dispositifs pour comparer les valeurs de deux signaux analogiques, il peut être utile de le dire lors de la détermination du moment de surintensité </li><li>  Ajout d'une interface USB via laquelle vous pouvez connecter des appareils à un ordinateur.  La disponibilité d'options de gestion de l'alimentation pour la mise en œuvre d'une interface compatible USB type 3-C est particulièrement intéressante.  J'en ai parlé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans un de mes articles sur Habré</a> </li><li>  Un accélérateur AES pour les procédures de cryptage / décryptage 256 bits est apparu </li><li>  UART a eu l'opportunité de travailler en modes veille et support matériel pour les protocoles LIN (un réseau simple, largement utilisé dans l'industrie automobile), IRDA (protocole de transfert de données via des LED infrarouges, rappelez-vous des télécommandes TV), SIMcard ... </li><li>  Minuteries étendues et module PWM </li><li>  la limite supérieure de la plage de température de fonctionnement est passée à 125 degrés </li><li>  fiabilité accrue grâce à l'extension des modes de redémarrage en cas de problème d'alimentation </li><li>  Ajout d'un générateur de valeur aléatoire matériel «honnête» - une fonctionnalité utile en cryptographie </li></ul><br>  Eh bien, pour de nombreuses applications, un ajout de prix insignifiant se paie complètement, car vous pouvez refuser de passer à des microcontrôleurs plus chers de séries de modèles supérieurs. <br><br><a name="Cort4"></a><h4>  <font color="#66a3be">Et qu'est-ce qui ajoutera la transition au Cortex-M4, en plus du prix augmenté plusieurs fois?</font> </h4><br><img src="https://habrastorage.org/webt/tb/em/zm/tbemzmhj8xymuu7tmimap7hw4og.png"><br><br><ul><li>  La fréquence d'horloge maximale monte à 80 MHz </li><li>  Un bloc semble accélérer les calculs en virgule flottante </li><li>  Bien sûr, la mémoire interne maximale a augmenté </li><li>  Les modèles avec 100 pieds ou plus prennent en charge la mémoire statique externe </li><li>  L'USB a appris à fonctionner en mode HÔTE </li><li>  Le contrôleur d'interface CAN est apparu.  Il s'agit d'une interface très prometteuse conçue pour des applications hautement fiables.  Il a commencé sa marche victorieuse avec l'industrie automobile et mène une guerre prolongée avec le RS-485, obsolète depuis longtemps, dans l'industrie de l'automatisation industrielle extrêmement conservatrice depuis près de 20 ans. </li><li>  Une interface pour connecter la carte SD est apparue.  Une fonctionnalité très utile - ajoutez un support pour 50 cents à votre appareil et obtenez un support de stockage amovible de plusieurs dizaines de gigaoctets!  La plupart des cartes parviennent à fonctionner sur le SPI habituel, mais beaucoup plus lentement </li><li>  Ils ont ajouté un amplificateur opérationnel intégré avec une grande variété de modes de fonctionnement.  <i>Grâce à cela et aux fonctions précédentes, pour mon dernier projet de stéthoscope sans fil, j'ai dû arrêter le choix sur M4 au lieu de M0 +.</i>  <i>En conséquence, il est devenu possible de contrôler l'amplification du signal à partir du microphone MEMS et d'économiser des dizaines d'heures d'enregistrements audio du travail du cœur sur la carte SD</i> </li><li>  Le module crypto a appris à lire les fonctions HASH dans le matériel. </li><li>  Le contrôleur des applications tactiles est amélioré et prend désormais en charge non seulement les boutons, mais également les éléments de défilement </li></ul><br><a name="Cort7"></a><h4>  <font color="#66a3be">Cortex-M7 - quand vous en voulez plus ...</font> </h4><br><img src="https://habrastorage.org/webt/lm/rb/gh/lmrbghjnya9ftsujulp3aygdma0.png"><br><br>  Dans le très grand nombre de projets, les capacités fournies par les noyaux ci-dessus sont suffisantes, mais des exceptions se produisent également.  Personnellement, cela ne m'est arrivé que quelques fois, et une seule fois pour une très bonne raison - cela nécessitait des performances élevées pour la préparation des données pour ASIC, un contrôleur Ethernet et un bus CAN-FD avec un taux de change accru. <br><br>  Si au niveau des microcontrôleurs universels avec des cœurs Cortex 4 et inférieurs, à mon avis, ST est maintenant le leader en termes de prix / fonctionnalité, alors dans le domaine des puces plus performantes, il est inférieur à ATMEL, ou plutôt, MICROCHIP, qui l'a récemment absorbé.  J'ai donc opté pour la série ATSAMV71, à partir de 6 $. <br><br>  En plus de ce qui précède (contrôleur Ethernet et bus CAN-FD), nous obtenons dans l'ensemble un noyau avec un accélérateur d'opérations qui augmente considérablement la productivité, fonctionnant à une fréquence d'horloge allant jusqu'à 300 MHz, des interfaces pour connecter une matrice vidéo et un support pour la mémoire dynamique. <br><br>  En conclusion, je demanderai à ceux qui ont de l'expérience dans la communication avec les microcontrôleurs de vous demander de choisir la réponse appropriée à la question. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445936/">https://habr.com/ru/post/fr445936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445922/index.html">Pourquoi regarder des émissions en ligne si vous pouvez lire Habr</a></li>
<li><a href="../fr445924/index.html">TRÉSORS: quand les montres intelligentes deviennent étranges</a></li>
<li><a href="../fr445926/index.html">Le programme UFO Secret des États-Unis a également étudié les trous de ver et les dimensions supplémentaires.</a></li>
<li><a href="../fr445928/index.html">Comment nous avons augmenté la productivité de Tensorflow au service de 70%</a></li>
<li><a href="../fr445932/index.html">Sécurité des applications client: conseils pratiques pour un développeur frontal</a></li>
<li><a href="../fr445940/index.html">AMA avec Habr, v 7.0. Citron, beignets et nouvelles</a></li>
<li><a href="../fr445946/index.html">MWC: mode d'emploi</a></li>
<li><a href="../fr445948/index.html">Héritage en C ++: débutant, intermédiaire, avancé</a></li>
<li><a href="../fr445952/index.html">Un billion de petits célibataires</a></li>
<li><a href="../fr445954/index.html">Accélérateur d'IA de HSE, MTS et Rostelecom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>