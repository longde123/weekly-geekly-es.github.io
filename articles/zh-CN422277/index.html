<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏾 🤦🏾 👩🏻 架构和编程RCA Studio II 📩 ‼️ 🆔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="“最后，我们来到我们一直在等待的指示-性！” 
 /来自有关微处理器CDP1802的文章/ 


 在1970年代初期，诸如Pong之类的简单电子游戏在美国非常流行（在苏联，其类似物出现在5-10年内出售）。 通常，此类游戏在现代意义上没有微处理器和内存，而是基于严格的逻辑构建的。 因此，可替换的弹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>架构和编程RCA Studio II</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422277/"><p>  <i>“最后，我们来到我们一直在等待的指示-性！”</i> <i><br></i>  <i>/来自有关微处理器CDP1802的文章/</i> </p><br><img src="https://habrastorage.org/webt/mk/gh/7j/mkgh7jq8ovzjr98qgrw3zfx3bow.jpeg"><br><br> 在1970年代初期，诸如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pong之</a>类的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">简单电子游戏</a>在美国非常流行（在苏联，其<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">类似物</a>出现在5-10年内出售）。 通常，此类游戏在现代意义上没有微处理器和内存，而是基于严格的逻辑构建的。 因此，可替换的弹药筒并没有多大意义，无论它们在哪里-它们只是一组包括所需比赛的跳投。 <br><br>  1977年，几乎同时发布了两个游戏机： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Fairchild Channel F</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio II</a> 。 这些是功能齐全的计算机形式的第一款游戏机，带有微处理器和可替换的墨盒程序，将要讨论的RCA Studio II不仅由<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA</a>开发，而且由特定的人<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Joseph A. Weisbecker</a> （类似于整个COSMAC体系结构）开发。 。 <br><a name="habracut"></a> 第一个这样的设备<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">System 00</a> ，也称为COSMAC FRED（1971），是一个原型，并未大量生产。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9r/tg/he/9rtghexs8miwoxqkq3vjejk_xyu.jpeg"></div><br> 其中的处理器采用常规逻辑实现（在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FRED2中</a> -在1973年问世的两个名为CDP1801 R和U的芯片上）。  RAM约为256字节-4 kb，此外，FRED2具有内置的录音机。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gq/bl/zh/gqblzh1bed2y3zcuiev8apbtpjm.jpeg"></div><br>  COSMAC架构的第一个商业实现是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">COSMAC ELF</a> 。  1976年，ELF被定位为用于火腿的计算机（在《大众电子》杂志上<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">发表</a>了一系列文章），是一个带有拨动开关，指示器，CDP1802微处理器（相同的1801，但已经在一个芯片中）和256字节RAM的小板。 对于他来说，还有其他扩展卡可以在监视器上显示图形（使用CDP1861芯片），并连接了外接键盘和录音机。 基于带有扩展功能的ELF，出现了ELF II和VIP。 在COSMAC ROM中，有一台名为CHIP-8的虚拟机，可针对原始游戏进行强化（用于输出和移动软件sprite，生成随机数等的命令）。还有其他基于该体系结构的原始计算机和终端。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vq/si/wo/vqsiwo3wbrmq0xda5uaj5wzerxu.jpeg"></div><br> 所有这些设备都是RCA Studio II的直接前身，并且具有极其紧密的硬件和软件架构。 <br><br>  RCA Studio II于1977年发布，当时的价格为150美元（现价600美元）。 通常，市场上的第一个不一定是最成功的。 在2008年，《 PC World》杂志将该游戏机视为有史以来最差的游戏机（从原则上讲，这与事实相差不远）：黑白图像的正方形，没有操纵杆（而不是两个10个按钮的区域）和十几个游戏-有点不愉快令买家满意。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-j/d-/nu/-jd-nu-kdtmskwkfi1sfiw7n8ag.jpeg"></div><br> 此外，所有游戏（内置游戏机和盒装游戏机）均以ST2虚拟机的伪代码编写（与COSMAC中的CHIP-8的想法相同），这使其运行非常缓慢。 <br><br>  RCA设法发布了约6.4万套RCA Studio II，不算后来出现的克隆（东芝Visicom，Conic M-1200等）。随着<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Atari VCS</a>的出现，过时的RCA Studio II和Fairchild Channel F立即退出了战斗。 <br><br><h1> 中央处理器 </h1><br> 作为芯片制造商，RCA选择了自己的产品作为机顶盒处理器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-RCA CDP1802</a>微处理器，该处理器以1.78 MHz的频率运行并使用CMOS技术制造。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ll/4n/zl/ll4nzlkx0bxu1aodzw4lbbotne8.jpeg"></div><br> 他的前任是CDP1801，这是一种两芯片处理器（与1802完全兼容）： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uf/bn/uc/ufbnuczc-cjvw9iclwf_zjrpd8i.jpeg"></div><br>  CDP1802以其抗辐射版本（蓝宝石上的硅）而闻名，例如在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CD 1802</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">伽利略</a>行星际站使用它，并在1990年代飞往木星（有6个这样的处理器），以及在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MAGSAT中使用</a> 。 <br><br> 处理器具有相当棘手的寄存器使用方案。 它具有一个8位累加器D和16个16位寄存器-R0..RF（R0-R15），根据4位寄存器P（指向R之一）的内容，每个寄存器都可以成为指令指针。 SEP Rn小组。 换句话说-处理器中没有一台PC！ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bj/fh/ft/bjfhfttd1jg8bozbot-goad9xt8.png"></div><br> 另外，R0 ... R15中的任何一个都可以成为索引（地址）。 根据4位寄存器X中的值（由SEX Rn命令更改）确定选择，然后将所选的R视为某些命令的索引。 <br><br>  DMA的地址寄存器始终为R0。 在中断内部，指令计数器为R1。 <br><br> 有一个8位寄存器T，用于在发生中断时自动将X和P寄存器保存在其中。 通过使用RET或DIS命令设置IE中断启用标志来启用中断。 <br><br>  4位寄存器I和N包含由处理器执行的当前指令。 <br><br> 有一个标志寄存器-DF。 更确切地说，一个标志，因为它是一位数字，并且仅包含一个进位标志。 <br><br> 此外，处理器还具有一个单位输出端口Q，其状态由SEQ和REQ命令更改。 <br><br> 就像在那一代的许多处理器中一样，这里不存在通常意义上的堆栈（既没有PUSH，POP命令也没有堆栈指针），并且在必要时由现有指令实现。 <br><br> 也没有用于调用例程的传统指令。 使用SEP Rn指令可以执行到子程序的转换，我记得，它使所指示的Rn寄存器成为命令计数器。 要返回，将使用相同的SEP指令，但使用一个寄存器，该寄存器是调用前命令的计数器。 或者（在更通用但更慢的版本中）使用MARK和RET。 <br><br> 除了传统的有条件和无条件跳转（顺便说一句，它们都是绝对的）之外，还有一些SKIP指令，当满足条件时，跳过下一个SKIP指令（两个字节）。 还提供了无条件跳过。 <br><br>  1802处理器通常被称为第一个RISC处理器之一。 然而，在同一上下文中，提到了6502，以及其他一些。 可以肯定的是，该体系结构不是很普通，从编程的角度来看，会引起多种多样的感觉。 一方面，有多达16个16位寄存器。 另一方面，它们的内容只能直接减少或增加一个。 例如，在Rn中放置一个常量如下所示： <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ldi</span></span> <span class="hljs-variable"><span class="hljs-variable">$01</span></span> ; <span class="hljs-attribute"><span class="hljs-attribute">const</span></span> -&gt; D plo r6 ; <span class="hljs-attribute"><span class="hljs-attribute">D</span></span> -&gt; R6.<span class="hljs-number"><span class="hljs-number">0</span></span> ldi <span class="hljs-variable"><span class="hljs-variable">$02</span></span> ; <span class="hljs-attribute"><span class="hljs-attribute">const</span></span> -&gt; D phi r6 ; <span class="hljs-attribute"><span class="hljs-attribute">D</span></span> -&gt; R6.<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br> 因此，大部分代码都在前后移动字节。 <br><br> 实际上，在条件转移中，仅考虑到零的转移（仅累加器D中为0的情况）和转移标志。 典型的循环如下： <br><br><pre> <code class="hljs rust"><span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>: ... dec r7 ; R7-- glo r7 ; R7 -&gt; D bnz <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>: ... adi <span class="hljs-number"><span class="hljs-number">2</span></span> ; D = D + <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> xri $<span class="hljs-number"><span class="hljs-number">07</span></span> ; compare using XOR. (D == <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>) -&gt; D bnz <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span></code> </pre><br> 所有算术和逻辑指令仅适用于电池D。 <br><br> 除了由SEQ / REQ控制的一位端口外，还有一个由OUT / INP命令控制的四位端口。 不幸的是，RCA Studio II中没有使用它。 <br><br><h1> 记忆体 </h1><br> 有：2 KB的ROM（BIOS +五个内置游戏）512字节的RAM（一半保留用于视频） <br> 记忆卡 <br><br><pre> <code class="hljs powershell"><span class="hljs-number"><span class="hljs-number">000</span></span><span class="hljs-literal"><span class="hljs-literal">-2FF</span></span> ROM RCA System ROM :   SP2 <span class="hljs-number"><span class="hljs-number">300</span></span><span class="hljs-literal"><span class="hljs-literal">-3FF</span></span> ROM RCA System ROM : BIOS <span class="hljs-number"><span class="hljs-number">400</span></span><span class="hljs-literal"><span class="hljs-literal">-7FF</span></span> ROM   (    ) <span class="hljs-number"><span class="hljs-number">400</span></span><span class="hljs-literal"><span class="hljs-literal">-7FF</span></span> ROM  ( ) <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-number"><span class="hljs-number">800</span></span><span class="hljs-literal"><span class="hljs-literal">-8FF</span></span> RAM   (<span class="hljs-number"><span class="hljs-number">256</span></span> ) <span class="hljs-number"><span class="hljs-number">900</span></span><span class="hljs-literal"><span class="hljs-literal">-9FF</span></span> RAM  (<span class="hljs-number"><span class="hljs-number">256</span></span> ) A00<span class="hljs-literal"><span class="hljs-literal">-BFF</span></span> ROM  ( ) C00<span class="hljs-literal"><span class="hljs-literal">-DFF</span></span> ---  ,  <span class="hljs-number"><span class="hljs-number">800</span></span><span class="hljs-literal"><span class="hljs-literal">-9FF</span></span> E00<span class="hljs-literal"><span class="hljs-literal">-FFF</span></span> ROM  (  )</code> </pre><br> 需要特别注意的是，对于盒式磁带上的游戏和程序，仅BIOS的一部分可用-包含SP2（不必要，大体上来说），数字从0到9的图像以及用于视频的标准中断处理程序。 <br><br><h1> 影片 </h1><br> 对于图形，使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA CDP1861</a>芯片-所谓的“ Pixie”。 <br><br> 标准的RCA Studio II具有仅带有天线（RF）的标准输出，但是，人们将其<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">重塑</a>为复合材料，从而使质量更好（我几乎写过“为了更好的色彩还原” ：） <br><br> 从技术上讲，视频控制器提供两种颜色（黑色和白色）的最大分辨率64x128。 但是，这需要1024字节的视频内存，在Studio II中，RAM的总量为512字节。 因此，分辨率为64x32（需要256个字节），水平分辨率（64）是固定的。 在64像素的一行中，始终显示8个字节，这种情况持续14个处理器周期。 <br><br>  BIOS中断处理程序用于在屏幕上显示内存（$ 900- $ 9ff）。 中断是由视频控制器启动的，每秒发生60次（NTSC）。BIOS处理器执行所有必要的操作-可执行程序只需要更改视频内存，其中每个位直接对应于一个黑点或白点（从左到右，从上到下）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v7/je/o0/v7jeo04e-mjct0istz6nibhwhb8.jpeg"></div><br> 但是，没有什么可以阻止您编写自己的处理程序。 最简单的情况是分辨率为64x128，这对于视频控制器来说很自然。 对他来说，在处理程序中，将视频内存地址写入R0（屏幕数据将来自哪里）就足够了，字节将通过DMA本身显示，填满整个帧。这种情况在垂直分辨率（而非128）下更加复杂。您必须输入延迟并重复通过更改R0获得数据（请参阅cdp1861和BIOS源的描述）。 <br><br> 原则上，您甚至可以设置可变的垂直分辨率，不输出任何内容到屏幕的一部分，还可以指定ROM，而不是RAM（或部分ROM，部分是RAM）作为视频内存，还可以实现垂直滚动，更改R0中的初始值从其开始向控制器发布数据的地址。 <br><br> 请注意，在视频控制器的INT输出处，本机在光束到达可见区域之前出现两行。 因此，中断处理程序通常以一个延迟开始，该延迟使您可以按时开始显示内存。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/iz/61/kiiz61bjveeghnz-kszzgkbk7sq.jpeg"></div><br> 视频控制器还具有EFX输出，在光束出现在可见区域之前的4线显示0，然后在该区域的最后4线显示0。  EFX输出连接到处理器EF1，可以使用B1（BN1）命令检查其状态。 <br><br> 沿着框架的返回光束的典型期望实现如下： <br><br><pre> <code class="hljs bash">... delay: bn1 delay ; <span class="hljs-built_in"><span class="hljs-built_in">wait</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> EFX <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> video chip ...</code> </pre><br> 如上所述，在ROM中没有字母和符号的图像。 但是，仍然有数字（毕竟，在内置游戏中，您需要以某种方式显示分数和玩家数）。 但是，即使在这里，他们也设法保存： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gh/4i/n7/gh4in7xalq8tj644tsvuzw37l2s.jpeg"></div><br> 如您所见，这些数字被粘在一起，以便从几个相邻的数字中获得其余的数字。 <br><br><h1> 声音 </h1><br> 我们只说有声音。 但没有更多。  NE555通过捆扎带连接到CDP1802的单个一位输出端口，然后全部连接到控制台内置的扬声器。当一个单元提供给RST NE555输入（通过SEQ处理器命令）时，它开始以625Hz的频率发出蜂鸣声。 为零时（通过REQ命令）-蜂鸣声停止。 其实仅此而已。 然而，仍然存在电容器，由于该电容器在吱吱声开始时，频率在0.4秒的过程中逐渐降低了一半（即，获得了一些额外的吱吱声）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u5/zc/ru/u5zcruby6bg3hbe5b-kwfrzauvy.jpeg"></div><br> 在标准BIOS中断处理程序中，除了负责视频的那一部分外，还有一部分检查特定存储单元的内容，如果不为零，则开启吱吱声，并开始循环减少$ 08CD单元的内容（当达到零时，吱吱声将关闭）。 因此，您不必理会端口上的自我录制，而只需设置吱吱声的持续时间，它将在后台发生，而无需停止程序： <br><br><pre> <code class="hljs perl"> ldi $8cd &amp; $ff plo rf ldi <span class="hljs-number"><span class="hljs-number">250</span></span> ;   str rf ...</code> </pre><br> 也可以手动执行此操作（在关闭中断之后）： <br><br><pre> <code class="hljs pgsql">;   sex r3 ; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R3 dis ; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R5, P <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R3, <span class="hljs-number"><span class="hljs-number">0</span></span>-IE, R3=R3+<span class="hljs-number"><span class="hljs-number">1</span></span> db <span class="hljs-number"><span class="hljs-number">53</span></span>h ; forces X=<span class="hljs-number"><span class="hljs-number">5</span></span> P=<span class="hljs-number"><span class="hljs-number">3</span></span> - which <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> change ;   seq ;   ldi <span class="hljs-number"><span class="hljs-number">250</span></span> ; delay plo r6 delay: <span class="hljs-type"><span class="hljs-type">dec</span></span> r6 glo r6 bnz delay ;   req ;    sex r3 ; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R3 ret ; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R5, P <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> R3, <span class="hljs-number"><span class="hljs-number">1</span></span>-IE, R3=R3+<span class="hljs-number"><span class="hljs-number">1</span></span> db <span class="hljs-number"><span class="hljs-number">53</span></span>h ; forces X=<span class="hljs-number"><span class="hljs-number">5</span></span> P=<span class="hljs-number"><span class="hljs-number">3</span></span> - which <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> change</code> </pre><br><br><h1> 程序 </h1><br> 在1970年代，编写了十几个游戏和其他几个程序（主要由RCA自己编写）。 它们几乎都不是用汇编程序编写的，而是用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">伪代码编写的</a> -在控制台ROM中，有一个特殊的解释器-虚拟机ST2。 很难确切地说出是什么促使这种决定。 最有可能的想法是节省内存-游戏的体积确实大大减少了。 通常，ST2的耳朵来自COSMAC中使用的名为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CHIP-8</a>的类似VM。 尽管两个VM彼此不兼容，但在2000年代已经编写了RCA Studio II的CHIP-8解释器。 鉴于架构的极端相似性，正如解释器所写，使用不需要大量内存的COSMAC进行的游戏在RCA Studio II上就不会出现问题也就不足为奇了。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9hdkirBlUIg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  las-这种架构上的虚拟机运行非常缓慢，这给游戏本身留下了不可磨灭的烙印。 后来，在2013年，保罗·罗布森（Paul Robson）写了大约十二种游戏-已经在汇编程序中，并随源一起<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">分发</a> 。 <br><br><h1> 发展历程 </h1><br> 据目击者说，最初，即使没有组装程序，RCA Studio II的开发也是在COSMAC ELF和FRED2上进行的。 <br><br> 当前，没有必要遭受这样的痛苦。 有一个不错的Windows模拟器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Emma</a> ，它具有良好的调试器（顺便说一句，它不仅模拟RCA Studio II，而且模拟所有COSMAC）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xe/oc/k7/xeock7zoxghone2p9pevv3hlzbm.jpeg"></div><br> 作为汇编程序，我首先尝试使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">交叉汇编程序a18，</a>但是由于多种原因，最终集中精力于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">asmx</a> ，后者也具有Python <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">脚本</a>来生成成品盒式映像（扩展名为.st2）。 <br><br> 汇编程序1802的简要介绍可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>找到。 具有无限循环的RCA Studio II的最简单的test.asm如下所示： <br><br><pre> <code class="hljs pgsql"> .<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "1802.inc" .org <span class="hljs-number"><span class="hljs-number">400</span></span>h .db <span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span> ; SYS <span class="hljs-meta"><span class="hljs-meta">$402</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>: br <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> code .<span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> 注意指令“ .db 4,2”。 这是第一条可执行指令的地址，即  “ .db&gt;（开始），&lt;（开始）”。 <br><br> 简单循环实现： <br><br><pre> <code class="hljs pgsql"> ldi <span class="hljs-number"><span class="hljs-number">50</span></span> ;    D   plo r6 ;    D     r6 <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>: <span class="hljs-type"><span class="hljs-type">dec</span></span> r6 ; r6 = r6 <span class="hljs-number"><span class="hljs-number">-1</span></span> glo r6 ;     r6   D bnz <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> ;    <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>    D  </code> </pre><br> 使用跳过指令： <br><br><pre> <code class="hljs rust">; q = <span class="hljs-number"><span class="hljs-number">0</span></span>   $FF00 ,  q=<span class="hljs-number"><span class="hljs-number">1</span></span>   $FF  <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>: ghi r1 ; hi(r1) -&gt; D lsz ;   <span class="hljs-number"><span class="hljs-number">2</span></span> ,   D  (..   seq) req ; <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; Q skp ;   <span class="hljs-number"><span class="hljs-number">1</span></span>     (..   inc r1) seq ; <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; Q inc r1 ; r1 = r1 + <span class="hljs-number"><span class="hljs-number">1</span></span> br <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> ;  ...</code> </pre><br> 要在干净的汇编程序CDP1802中进行练习，可以方便地使用asm80在线汇编程序仿真器。 生成的源文件的扩展名必须为.a18 <br><br> 为了在自然界中的实际硬件上启动完成的应用程序，有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio II 40周年Multicart</a>卡式盒。 我还没有，但是tnt23用一个游戏重新制作了可用的墨盒之一，该游戏用于安装在插槽中的EEPROM AT28C16芯片（2k x 8）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/o1/cb/lmo1cbrxztmmaf8ufqc2dulos1g.jpeg"></div><br> 因此，要运行在一块铁片上，我每次都会将芯片插入编程器中，将其闪烁，然后将其重新排列到转换后的墨盒中，然后打开控制台。 每次都是如此。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/s7/4n/fps74ndjanubcdqewbzktklheco.jpeg"></div><br><br><h1> 介绍无阴影 </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/py/sw/u-/pyswu-iacgl1gla9-txezpndig8.jpeg"></div><br> 为了开发平台，我编写了256个字节的简介（在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Tiny简介</a>比赛中于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Chaos Constructions'2018</a>展示）。 <br><br> 与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vectrex</a>不同，在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vectrex中</a> ，即使仅绘制曲线也可以从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Videopac</a>获得壮观的图像，在ROM中已经有了一组小<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">矮人</a>的图像，在这里，我们遇到了一种悲惨的情况-普通，人人熟悉，光栅图形但黑白和无处不在的分辨率（64x32）。 在ROM中，不仅有图片，甚至还有字符。 声音-仅限于625Hz的吱吱声。 <br><br> 因此，音乐，各种典型的等离子，灯光以及通常涉及非正方形轮廓的所有事物都已被取消。 任何形式的文本也被取消-字母没有足够的空间。 <br><br> 结果，决定a）以不同的速度滚动b）重复c）的东西，结果是这样的： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Y75XFcLE30Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 如上所述，视频控制器中没有硬件滚动。 但是，低分辨率和黑白不仅有缺点，而且还有优点-覆盖较少的字节。 <br><br> 我使用shlc命令（带有连字符的左移）进行了逐行滚动-在循环中执行时，结果发现下一个字节的最左位向左移并不会消失，而是置于进位标志（DF）中。 因此，循环中的下一个shlc将其拾取并将其放在左侧的字节中。 结果是整个行的简单滚动，其中八个将循环滚动（因为方便获取云的图案并逐字节存储房屋） <br><br><pre> <code class="hljs rust">... scrollret: sep r3 ; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> from subroutine ;   scroll: ; set lines counter ldi LINES ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> -&gt; D plo r10 ; D -&gt; Rn.<span class="hljs-number"><span class="hljs-number">0</span></span> nextline: ; set bytes counter ldi BYTES_PER_LINE ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> -&gt; D plo r7 ; D -&gt; Rn.<span class="hljs-number"><span class="hljs-number">0</span></span> ; set carry to scroll glo r12 ; Rn -&gt; D shr ; get one bit to set carry plo r12 ; D -&gt; Rn.<span class="hljs-number"><span class="hljs-number">0</span></span> (save shifted byte) nextbyte: ldx ; Rx -&gt; D shlc ; D = D &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> (carry -&gt; DF) stxd ; D -&gt; M(Rx), Rx-- dec r7 ; Rn-- glo r7 ; Rn -&gt; D bnz nextbyte dec r10 ; Rn-- glo r10 ; Rn -&gt; D bnz nextline ; one line (<span class="hljs-number"><span class="hljs-number">8</span></span> bytes) scrolled, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span><span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> scroll next br scrollret ...</code> </pre><br> 请注意，子例程的入口位于滚动标签上，要返回，不仅要执行sep r3，还要从那里执行第一个br scrollret和sep r3。 <br><br> 这样做是为了使r14（子例程内的指令计数器）保持正确的状态，然后可以一次又一次调用该子例程（使用sep r14）。 <br><br> 当然，此处的调用期间不会保存任何变量-所有变量寄存器都是全局的。 <br><br> 在一般循环中，滚动子例程被两次调用-房屋第二次，云第四次（滚动最慢）。 总的周期沿光束的相反方向同步（道路，房屋，云层-有时间绘制，星星静止）。 就道路而言，只有一条线滚动-道路边缘仅用线绘制。 <br><br> 为了有趣，我尝试滚动整个屏幕-它不适合光束的反向运动。 <br><br> 房屋由样式设置： <br><br><pre> <code class="hljs css">... <span class="hljs-selector-tag"><span class="hljs-selector-tag">house1</span></span>: <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00000000 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %11111111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %10101010 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %11111111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %10101010 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %11111111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00000000 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">house2</span></span>: <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00000000 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00011111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %01110101 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %01011111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %01110101 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00011111 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> %00000000 <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> 1 ...</code> </pre><br> 平板电脑，每个平板电脑都有链接： <br><br><pre> <code class="hljs css">... <span class="hljs-selector-tag"><span class="hljs-selector-tag">commands</span></span>: <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">house5</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">house2</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">house1</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.db</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">house3</span></span> ...</code> </pre><br> 在一个循环中，此标签将按顺序进行排序。 <br><br> 与房屋不同，为简单起见，两朵云都代表一种仅循环滚动的模式。 <br><br> 由于根据与房屋相同的原理输出云，以及由于模式之间的编程间隔（现在这些只是在数据中重复零），因此可以赢得一定数量的字节。 <br><br> 但是，问题还在于中断处理程序使用了某些寄存器-无法更改R0，R1，R2，R8，R9，R11。 将变量存储在内存中是用于写入和读取变量的大量额外字节（更不用说时钟周期了）。 <br><br> 理想情况下，滚动可能应该在中断处理程序中完成。 但是，为此，我必须编写自己的处理程序而不是标准处理程序。 这将是更正确的（顺便说一句，可以释放几个R寄存器），但是最有可能的是，最后，所有内容加在一起不能容纳256个字节。 <br><br> 至于星星，它们是静态的，但是要绘制一些看起来是随机分布的点，出乎意料的不是那么简单： <br><br><pre> <code class="hljs rust">... <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>: ldn r4 ; M[Rn] -&gt; D ani %<span class="hljs-number"><span class="hljs-number">00000010</span></span> ; D AND <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> -&gt; D bdf skip ; jump <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> carry ldi <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> -&gt; D skip: stxd ; D -&gt; M(Rx), Rx-- glo r4 ; Rn -&gt; D adi <span class="hljs-number"><span class="hljs-number">47</span></span> ; D + <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> -&gt; D plo r4 ; Rn -&gt; D glo r15 ; Rn -&gt; D bnz <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> ...</code> </pre><br> 这里，在一个周期中，数据是从BIOS中获取的，这些数据会被稀疏并掩盖多余的位。 手动选择遮罩（用于ani）和音高（用于adi）。 <br><br> 至于声音，不可能改变频率只是模仿了汽车的“哔哔”声。 <br><br> 顺便说一句-我认为这是RCA Studio II的第一部演示作品：) <br><br><h1> 结语 </h1><br>  Studio II之后，RCA发布了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio III的</a>多个实例。 两件事的区别-出现了颜色（分辨率没有改变）和声音更好（您可以发出一个而不是255个不同的频率）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/db/bz/dh/dbbzdhe0-7bjwvpf4dgeiza-paa.jpeg"></div><br> 有趣的是，两台机器在两个方向上都相互兼容，包括与解释器一起使用相同的中间代码。 <br><br> 还已知有RCA Studio IV的计划。 应该将分辨率提高到64x128，甚至已经编写了一个新的伪代码解释器。 <br><br> 至于CDP1802，则继续生产这种微处理器-首先由休斯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（</a> Hughes）制造，然后由<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Intersil（Renesas）制造。</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如果您想</a>了解有关计算机技术发展史的这一特殊分支的更多信息，建议您在Google上搜索“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">COSMAC”和“ CDP1802</a> ”两个词。 <br><br><h1> 网站连结 </h1><br><blockquote><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio II技术信息</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio II示意图</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">微处理器CDP1802的说明</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频控制器CDP1861的说明</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我对复古计算机的其他工作</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我</a>在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Chaos Constructions的</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RCA Studio 2故事</a> </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN422277/">https://habr.com/ru/post/zh-CN422277/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN422263/index.html">“ Dormammu，我同意”：一种与人互利合作的算法</a></li>
<li><a href="../zh-CN422265/index.html">PICASO 3D Designer X PRO 3D打印机概述</a></li>
<li><a href="../zh-CN422269/index.html">该书“内部设备Windows。 第七版</a></li>
<li><a href="../zh-CN422273/index.html">智慧城市中没有愚蠢的道路。 什么是RWIS，它将如何降低道路工程成本</a></li>
<li><a href="../zh-CN422275/index.html">由于软件漏洞，一名Google员工能够控制公司办公室的开门系统</a></li>
<li><a href="../zh-CN422281/index.html">A7数据服务器：在线数据管理</a></li>
<li><a href="../zh-CN422283/index.html">白盒测试</a></li>
<li><a href="../zh-CN422285/index.html">为什么网上购物拥有1％的客户足够的忠诚度</a></li>
<li><a href="../zh-CN422291/index.html">小黑盒子（可视化所有货币和世界市场）</a></li>
<li><a href="../zh-CN422293/index.html">通过AlarmIRP接口从OSS获取警报列表</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>