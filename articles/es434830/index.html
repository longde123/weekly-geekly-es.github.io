<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçü§ù‚Äçüë®üèº üßùüèΩ üë∑ Componentes de reacci√≥n final üë©üèø‚Äçüíº üèáüèø üóª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lo que me gusta del ecosistema React es que IDEA est√° detr√°s de muchas decisiones. Varios autores escriben varios art√≠culos en apoyo del orden existen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Componentes de reacci√≥n final</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434830/"><p>  Lo que me gusta del ecosistema React es que IDEA est√° detr√°s de muchas decisiones.  Varios autores escriben varios art√≠culos en apoyo del orden existente y explican por qu√© todo est√° "bien", para que todos entiendan que la fiesta est√° en el camino correcto. </p><br><p>  Despu√©s de un tiempo, IDEA cambia un poco y todo comienza desde el principio. </p><br><p>  Y el comienzo de esta historia es la separaci√≥n de componentes en contenedores y no contenedores (popularmente llamados componentes tontos, perd√≥n por mi franc√©s). </p><br><p><img src="https://habrastorage.org/webt/p3/cl/nl/p3clnlwh5eus18t7l4xkoxgc09a.jpeg"></p><a name="habracut"></a><br><h3 id="problema">  El problema </h3><br><p>  El problema es muy simple: pruebas unitarias.  Recientemente, ha habido alg√∫n movimiento hacia las pruebas de integraci√≥n, bueno, ya sabes <em>"Escribir pruebas. No demasiadas. Principalmente integraci√≥n".</em>  .  Esta no es una mala idea, y si el tiempo es corto (y las pruebas no son particularmente necesarias), esto es lo que debe hacer.  Simplemente llam√©mosle pruebas de humo, para verificar que nada <em>parece</em> explotar. </p><br><p> Si hay mucho tiempo y se necesitan pruebas, es mejor no hacerlo, porque escribir buenas pruebas de integraci√≥n es muy, muy largo.  Solo porque crecer√°n y crecer√°n, y para probar el tercer bot√≥n a la derecha, primero tendr√° que hacer clic en 3 botones en el men√∫ y no olvide iniciar sesi√≥n.  En general, aqu√≠ hay una <u>explosi√≥n combinatoria</u> en bandeja de plata. </p><br><p>  La soluci√≥n aqu√≠ es una y simple (por definici√≥n): pruebas unitarias.  La capacidad de iniciar pruebas con alg√∫n estado listo de alguna parte de la aplicaci√≥n.  M√°s precisamente, para reducir (reducir) el √°rea de prueba de la Aplicaci√≥n o el <em>Big Block</em> a algo peque√±o: una unidad, sea lo que sea.  No es necesario usar enzimas: puede ejecutar pruebas de navegador, si el alma lo solicita.  Lo m√°s importante aqu√≠ es poder probar algo de forma <em>aislada</em> .  Y sin demasiados problemas. </p><br><p>  El aislamiento es uno de los puntos clave en las pruebas unitarias, y es por eso que no les gustan las pruebas unitarias.  No les gusta por varias razones: </p><br><ul><li>  por ejemplo, su "unidad" se separa de la aplicaci√≥n y no funciona en su composici√≥n, incluso cuando sus propias pruebas son verdes. </li><li>  o por ejemplo porque el aislamiento es un caballo tan esf√©rico en el vac√≠o que nadie ha visto.  ¬øC√≥mo lograrlo y c√≥mo medirlo? </li></ul><br><p>  Personalmente, no veo problemas aqu√≠.  En el primer p√°rrafo, por <em>supuesto,</em> puede recomendar pruebas de integraci√≥n, han sido inventadas para eso, para verificar c√≥mo se ensamblan correctamente los componentes probados previamente.  Conf√≠a en los paquetes npm que prueban, por supuesto, solo ellos mismos y no ellos mismos como parte de su aplicaci√≥n.  ¬øEn qu√© se diferencian sus "componentes" de los paquetes "no sus"? </p><br><p>  Con el segundo p√°rrafo, todo es un poco m√°s complicado.  Y este art√≠culo tratar√° exactamente sobre este punto (y todo lo anterior a eso, una introducci√≥n), sobre c√≥mo hacer que una unidad " <em>unidad</em> " sea <em>comprobable</em> . </p><br><h3 id="razdelyay-i-vlastvuy">  Divide y vencer√°s </h3><br><p>  La idea de separar los componentes React en "Contenedor" y "Presentaci√≥n" no es nueva, est√° bien descrita y ya ha logrado quedar un poco desactualizada.  Si tomamos como base (lo que hace el 99% de los desarrolladores) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo de Dan Abramov</a> , entonces Componente de presentaci√≥n: </p><br><ul><li>  Les preocupa c√≥mo se ven las cosas </li><li> Puede contener componentes tanto de presentaci√≥n como de contenedor <code>**</code> interior, y generalmente tiene un marcado DOM y estilos propios) </li><li>  Ranuras de soporte (a menudo permiten la contenci√≥n a trav√©s de this.props.children) </li><li>  Aplicaci√≥n independiente (no depende del resto de la aplicaci√≥n, como acciones o tiendas Flux) </li><li>  No dependa de los datos (no especifique c√≥mo se cargan o mutan los datos) </li><li>  La interfaz se basa en accesorios (reciba datos y devoluciones de llamadas exclusivamente a trav√©s de accesorios) </li><li>  A menudo sin estado (rara vez tienen su propio estado (cuando lo hacen, es el estado de la interfaz de usuario en lugar de los datos)) </li><li>  A menudo SFC (se escriben como componentes funcionales a menos que necesiten estado, ganchos de ciclo de vida u optimizaciones de rendimiento) </li></ul><br><p>  Bueno, los contenedores son toda la l√≥gica, todo el acceso a los datos y toda la aplicaci√≥n en principio. </p><br><blockquote>  En un mundo ideal, los contenedores son el tronco y los componentes de presentaci√≥n son las hojas. </blockquote><p>  Hay dos puntos clave en la definici√≥n de Dan: <em>"Aplicaci√≥n independiente"</em> , que es casi una definici√≥n acad√©mica de "unidad", y * "Puede contener otros componentes y contenedores de presentaci√≥n <code>**</code> " *, donde estas estrellas son especialmente interesantes. </p><br><blockquote>  (traducci√≥n gratuita) ** En las primeras versiones de mi art√≠culo, yo (Dan) dije que los componentes de presentaci√≥n deber√≠an contener solo otros componentes de presentaci√≥n.  Ya no lo creo.  El tipo de componente son los detalles y pueden cambiar con el tiempo.  En general, no lo comparta y todo estar√° bien. </blockquote><p>  Recordemos lo que sucede despu√©s de esto: </p><br><ul><li>  En el libro de cuentos, todo cae, porque alg√∫n tipo de contenedor, en el tercer bot√≥n a la izquierda, se arrastra hacia el lado del cual no hay ninguno.  Saludos especiales a graphql, react-router y otros react-intl. </li><li>  La capacidad de usar mount en las pruebas se pierde, ya que renderiza todo de la A a la Z, y nuevamente, en alg√∫n lugar en las profundidades del √°rbol de renderizado, alguien hace algo y las pruebas caen. </li><li>  Se pierde la capacidad de controlar el estado de la aplicaci√≥n, ya que (en sentido figurado) se pierde la capacidad de humedecer selectores / solucionadores (especialmente con proxyquire), y toda la puerta debe estar h√∫meda.  Y esto es genial para las pruebas unitarias. </li></ul><br><blockquote>  Si le parece que los problemas son un poco artificiales, intente trabajar en equipo cuando estos contenedores, que se utilizar√°n en sus no contenedores, cambien en otros departamentos, y como resultado, usted y ellos miran las pruebas y no pueden entender por qu√© ayer todo funcion√≥, y ahora de nuevo. </blockquote><p>  Como resultado, debe usar superficial, que <em>por dise√±o</em> elimina todos los efectos secundarios da√±inos (e inesperados).  Aqu√≠ hay un ejemplo simple del art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Por qu√© siempre uso superficial"</a> </p><br><p>  Imagine que la informaci√≥n sobre herramientas muestra "?". Al hacer clic, se mostrar√° el tipo en s√≠. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Tooltip <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { &lt;Tooltip&gt; hint: {veryImportantTextYouHaveToTest} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Tooltip&gt; }</span></span></code> </pre> <br><p>  ¬øC√≥mo probarlo?  Montar + hacer clic + verificar lo que est√° visible.  Esta es una prueba de integraci√≥n, no una unidad, y la pregunta es c√≥mo hacer clic en un componente "extra√±o" para usted.  No hay ning√∫n problema con superficial, ya que no hay <em>cerebros</em> y el "componente alien√≠gena" en s√≠.  Pero aqu√≠ hay cerebros, ya que Tooltip es un contenedor, mientras que MyComponent es <em>pr√°cticamente una</em> presentaci√≥n. </p><br><pre> <code class="javascript hljs">jest.mock(<span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">default</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> childlren});</code> </pre> <br><p>  Pero si reacciona-cool-tooltip, entonces no habr√° problemas con las pruebas.  El "componente" se ha vuelto mucho m√°s tonto, mucho m√°s corto, mucho m√°s <em>finito</em> . </p><br><p>  <strong>Componente final</strong> </p><br><ul><li>  un componente con un tama√±o bien conocido, que puede incluir otros componentes finales previamente conocidos o que no los contienen en absoluto. </li><li>  no contiene otros contenedores, ya que contienen un estado no controlado y un "aumento" de tama√±o, es decir  Hacer que el componente actual sea <em>infinito</em> . </li><li>  de lo contrario, es un componente de presentaci√≥n regular.  De hecho, exactamente como se describe en la <em>primera</em> versi√≥n del art√≠culo de Dan. </li></ul><br><p>  El componente final es solo un engranaje sacado de un mecanismo grande. </p><br><p>  Toda la pregunta es c√≥mo sacarlo. </p><br><h3 id="reshenie-1---di">  Soluci√≥n 1 - DI </h3><br><p>  Mi favorito es la inyecci√≥n de dependencia.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dan tambi√©n lo ama</a> .  En general, esto no es DI, sino "slots".  En pocas palabras, sin necesidad de usar contenedores dentro de la presentaci√≥n, deben <em>inyectarse</em> all√≠.  Y en las pruebas ser√° posible inyectar algo m√°s. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    mount     const PageChrome = ({children, aside}) =&gt; ( &lt;section&gt; &lt;aside&gt;{aside}&lt;/aside&gt; {children} &lt;/section&gt; ); //     shallow,       //     mount ? , ,   wiring? const PageChromeContainer = () =&gt; ( &lt;PageChrome aside={&lt;ASideContainer /&gt;}&gt; &lt;Page /&gt; &lt;/PageChrome&gt; );</span></span></code> </pre> <br><p>  Este es exactamente el caso cuando <em>"los contenedores son el tronco y los componentes de la presentaci√≥n son hojas"</em> </p><br><h3 id="reshenie-2---granicy">  Soluci√≥n 2 - L√≠mites </h3><br><p>  DI a menudo puede ser genial.  Probablemente ahora% username% piensa c√≥mo se puede aplicar en la base de c√≥digo actual, y la soluci√≥n no se inventa ... </p><br><p>  En tales casos, <strong>Borders</strong> te salvar√°. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Boundary = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> ( process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'test'</span></span> ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : children <span class="hljs-comment"><span class="hljs-comment">// //  jest.mock ); const PageChrome = () =&gt; ( &lt;section&gt; &lt;aside&gt;&lt;Boundary&gt;&lt;ASideContainer /&gt;&lt;/Boundary&gt;&lt;/aside&gt; &lt;Boundary&gt;&lt;Page /&gt;&lt;/Boundary&gt; &lt;/section&gt; );</span></span></code> </pre> <br><p>  Aqu√≠, en lugar de "espacios", todos los "puntos de transici√≥n" simplemente se convierten en L√≠mite, lo que representar√° <em>cualquier cosa</em> durante las pruebas.  <em>Declarativamente</em> suficiente, y exactamente lo que necesita para "sacar el equipo". </p><br><h3 id="reshenie-3---tier">  Soluci√≥n 3 - Nivel </h3><br><p>  Las fronteras pueden ser un poco √°speras, y podr√≠a ser m√°s f√°cil hacerlas un poco m√°s inteligentes al agregar un poco de conocimiento sobre Layer. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> checkTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> tier === currentTier; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> WrapperComponent =&gt; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">process.env.NODE_ENV !== </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'test'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> || checkTier(tier</span></span></span><span class="hljs-function">)) &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WrapperComponent</span></span></span><span class="hljs-function">{...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">} /&gt; ); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PageChrome</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ASideContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Page = withTier(<span class="hljs-string"><span class="hljs-string">'Page'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChromeContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(PageChrome);</code> </pre> <br><p>  Bajo el nombre Nivel / Capa, puede haber diferentes cosas: caracter√≠stica, pato, m√≥dulo o simplemente esa capa / nivel.  El punto no es importante, lo principal es que puede tirar del engranaje, tal vez no uno, sino el n√∫mero final, dibujando una l√≠nea entre lo que necesita y lo que no necesita (para diferentes pruebas, este es un borde diferente). </p><br><p>  Y nada impide marcar estos l√≠mites de alguna manera diferente. </p><br><h3 id="reshenie-4separate-concerns">  Soluci√≥n 4 - Preocupaciones separadas </h3><br><p>  Si la soluci√≥n (por definici√≥n) radica en la separaci√≥n de entidades, ¬øqu√© suceder√° si las tomamos y las separamos? </p><br><p>  Los "contenedores", que tanto nos disgustan, generalmente se denominan <em>contenedores</em> .  Y si no, nada impide en este momento comenzar a nombrar Componentes de alguna manera m√°s sonora.  O tienen un cierto patr√≥n en su nombre: Connect (WrappedComonent) o GraphQL / Query. </p><br><p>  ¬øQu√© pasa si justo en tiempo de ejecuci√≥n dibuja una l√≠nea entre entidades sobre la base de un nombre? </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChrome = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-comment"><span class="hljs-comment">// remove all components matching react-redux pattern reactRemock.mock(/Connect\(\w\)/) // all any other container reactRemock.mock(/Container/)</span></span></code> </pre> <br><p>  Adem√°s de una l√≠nea en las pruebas, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">react-remock</a> eliminar√° todos los contenedores que puedan interferir con las pruebas. </p><br><p>  En principio, este enfoque se puede usar para probar los contenedores en s√≠ mismos: solo necesita <em>eliminar</em> todo excepto el primer contenedor. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {createElement, remock} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-remock'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  "" const ContainerCondition = React.createContext(true); reactRemock.mock(/Connect\(\w\)/, (type, props, children) =&gt; ( &lt;ContainerCondition.Consumer&gt; { opened =&gt; ( opened ? ( // ""     &lt;ContainerCondition.Provider value={false}&gt; {createElement(type, props, ...children)} &lt;ContainerCondition.Provider&gt; ) // "" : null )} &lt;/ContainerCondition.Consumer&gt; )</span></span></code> </pre> <br><p>  De nuevo, un par de l√≠neas y equipo eliminado. </p><br><h2 id="itogo">  Total </h2><br><p>  Durante el a√±o pasado, probar los componentes React se ha vuelto m√°s complicado, especialmente para el montaje: debe sobrescribir los 10 Proveedores, Contextos, y cada vez es m√°s dif√≠cil probar el componente correcto en el estilo correcto: hay demasiadas cuerdas para tirar. <br>  Alguien escupe y se adentra en el mundo superficial.  Alguien agit√≥ sus manos en las pruebas unitarias y transfiri√≥ todo a Cypress (¬°camina como camina!). </p><br><p>  Alguien m√°s se√±ala con el dedo la reacci√≥n, dice que estos son <em>efectos algebraicos</em> y que puedes hacer lo que quieras.  Todos los ejemplos anteriores son esencialmente el uso de estos <em>efectos algebraicos</em> y simulacros.  Para m√≠ y DI estos son moki. </p><br><blockquote>  PD: Esta publicaci√≥n fue escrita como respuesta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a los comentarios en React / RFC sobre el hecho de que el equipo React rompi√≥ todo, y todos los pol√≠meros all√≠ tambi√©n</a> <br>  PPS: esta publicaci√≥n es en realidad una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">traducci√≥n muy gratuita de otra</a> <br>  PPPS: en general, para un aislamiento real, mire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rewiremock</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es434830/">https://habr.com/ru/post/es434830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es434818/index.html">Un accidente en el centro de datos de CenturyLink caus√≥ interrupciones del servicio del 911</a></li>
<li><a href="../es434822/index.html">Programa PRC "Autos con nuevas fuentes de energ√≠a". Que esperar en 2019</a></li>
<li><a href="../es434824/index.html">Ingenier√≠a Pol√≠tico-El√©ctrica. Modelado de procesos sociopol√≠ticos por circuitos el√©ctricos.</a></li>
<li><a href="../es434826/index.html">El campo de cama a tiempo, o 5 signos de problemas ocultos en el equipo.</a></li>
<li><a href="../es434828/index.html">Convi√©rtete en un profesional. H√°bitos √∫tiles de dise√±adores UX</a></li>
<li><a href="../es434836/index.html">Maravillosa anotaci√≥n de versi√≥n en JPA</a></li>
<li><a href="../es434838/index.html">Crear un bot para participar en el CodeBall ruso de la Copa AI 2018</a></li>
<li><a href="../es434840/index.html">¬øC√≥mo hice "Your Diary" - o la situaci√≥n en el mercado de diarios electr√≥nicos</a></li>
<li><a href="../es434842/index.html">Las granjas de la ciudad pueden ser extremadamente efectivas, pero no ahora</a></li>
<li><a href="../es434844/index.html">Recuperaci√≥n de las capacidades cognitivas de 100 pacientes (traducci√≥n del art√≠culo de Dale Bredesen)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>