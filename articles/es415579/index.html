<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뱗 游땷 游닏 Aprende OpenGL. Lecci칩n 5.5 - Mapeo normal 鮫勇 游냈 游끧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mapeo normal 
 Todas las escenas que utilizamos est치n formadas por pol칤gonos, que a su vez est치n formados por cientos, miles de tri치ngulos absolutamen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprende OpenGL. Lecci칩n 5.5 - Mapeo normal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415579/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br><h1>  Mapeo normal </h1><br>  Todas las escenas que utilizamos est치n formadas por pol칤gonos, que a su vez est치n formados por cientos, miles de tri치ngulos absolutamente planos.  Ya hemos logrado aumentar ligeramente el realismo de las escenas debido a detalles adicionales que proporcionan la aplicaci칩n de texturas bidimensionales en estos tri치ngulos planos.  El texturizado ayuda a ocultar el hecho de que todos los objetos en la escena son solo una colecci칩n de muchos tri치ngulos peque침os.  Una gran t칠cnica, pero sus posibilidades no son ilimitadas: al acercarse a cualquier superficie, todo queda claro que consiste en superficies planas.  La mayor칤a de los objetos reales no son completamente planos y muestran muchos detalles en relieve. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Contenido</b> <div class="spoiler_text">  Parte 1. Comenzando <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creaci칩n de ventanas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola ventana</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola triangulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreadores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transformaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C치mara</a> </li></ol><br>  Parte 2. Iluminaci칩n b치sica <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conceptos b치sicos de iluminaci칩n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Materiales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M칰ltiples fuentes de iluminaci칩n</a> </li></ol><br>  Parte 3. Descargar modelos 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de pol칤gono de malla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de modelo 3D</a> </li></ol><br>  Parte 4. Caracter칤sticas avanzadas de OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de profundidad</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de plantilla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mezcla de colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caras de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Buffer de trama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tarjetas c칰bicas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manejo avanzado de datos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GLSL avanzado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreador geom칠trico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instancia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suavizado</a> </li></ol><br>  Parte 5. Iluminaci칩n avanzada <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Iluminaci칩n avanzada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Correcci칩n gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cartas de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de sombras omnidireccionales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo de paralaje</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Renderizado diferido</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SSAO</a> </li></ol><br>  Parte 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Teor칤a</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz analiticas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Radiaci칩n difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exposici칩n al espejo.</a> </li></ol><br></div></div><br>  Por ejemplo, toma ladrillos.  Su superficie es muy rugosa y, obviamente, no est치 representada por un plano: en ella hay huecos con cemento y muchos peque침os detalles, como agujeros y grietas.  Si analizamos una escena con imitaci칩n de ladrillo en presencia de iluminaci칩n, entonces la ilusi칩n del relieve superficial se destruye muy f치cilmente.  El siguiente es un ejemplo de tal escena que contiene un plano con una textura de mamposter칤a y una fuente de luz de un punto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/-g/gf/lo-ggfg3yplmjm4cx-6bq74m_6g.png"></div><br>  Como puede ver, la iluminaci칩n no tiene en cuenta los detalles de relieve asumidos para esta superficie: todas las peque침as grietas y cavidades con cemento tambi칠n son indistinguibles del resto de la superficie.  Se podr칤a usar un mapa de brillo especular para limitar la iluminaci칩n de ciertos detalles que se encuentran en los huecos de la superficie.  Pero esto parece m치s un truco sucio que una soluci칩n de trabajo.  Lo que necesitamos es una forma de proporcionar a las ecuaciones de iluminaci칩n datos sobre el microrelieve de la superficie. <br>  En el contexto de las ecuaciones de iluminaci칩n que conocemos, considere esta pregunta: 쯕ajo qu칠 condiciones se iluminar치 la superficie como perfectamente plana?  La respuesta est치 relacionada con lo normal a la superficie.  Desde el punto de vista del algoritmo de iluminaci칩n, la informaci칩n sobre la forma de la superficie se transmite solo a trav칠s del vector normal.  Dado que el vector normal es constante en todas partes en la superficie presentada anteriormente, la iluminaci칩n tambi칠n sale uniforme, correspondiente al plano.  Pero, 쯤u칠 pasa si pasamos al algoritmo de iluminaci칩n no la 칰nica constante normal para todos los fragmentos que pertenecen al objeto, sino la 칰nica normal para cada fragmento?  Por lo tanto, el vector normal cambiar치 ligeramente seg칰n la topograf칤a de la superficie, lo que crear치 una ilusi칩n m치s convincente de la complejidad de la superficie: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/y_/68/kay_684wpm4mpkko92gl1nemjh4.png"></div><br>  Mediante el uso de normales fragmentariamente diferentes, el algoritmo de iluminaci칩n considerar치 que la superficie est치 compuesta de muchos planos microsc칩picos perpendiculares a su vector normal.  Como resultado, esto agregar치 significativamente textura al objeto.  La t칠cnica de aplicar normales 칰nicos a un fragmento y no a toda la superficie: esto es el <b>mapeo normal</b> o el <b>mapeo de relieve</b> .  Aplicado a una escena ya familiar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0c/pp/vt/0cppvtgpjw48at0r2crvdy3omfg.png"></div><br>  Puede ver el impresionante aumento en la complejidad visual debido al costo muy modesto del rendimiento.  Dado que todos los cambios en el modelo de iluminaci칩n solo est치n en el suministro de una normal 칰nica en cada fragmento, entonces no se cambian las f칩rmulas de c치lculo.  Solo en la entrada, en lugar de la normal interpolada, la normal para el fragmento actual sale a la superficie.  Las mismas ecuaciones de iluminaci칩n hacen el resto del trabajo para crear la ilusi칩n de alivio. <br><br><h2>  Mapeo normal </h2><br>  Entonces, resulta que necesitamos proporcionar al algoritmo de iluminaci칩n normales que sean exclusivas de cada fragmento.  Usaremos el m칠todo ya conocido en texturas de reflexi칩n difusa y especular y usaremos la textura 2D habitual para almacenar datos normales en cada punto de la superficie.  No se sorprenda, las texturas tambi칠n son excelentes para almacenar vectores normales.  Luego solo tenemos que seleccionar la textura, restaurar el vector normal y realizar c치lculos de iluminaci칩n. <br><br>  A primera vista, puede que no est칠 muy claro c칩mo guardar los datos vectoriales en una textura regular, que generalmente se usa para almacenar informaci칩n de color.  Pero piense por un segundo: la tr칤ada de color RGB es esencialmente un vector tridimensional.  De manera similar, puede guardar los componentes del vector normal XYZ en los componentes de color correspondientes.  Los valores de los componentes del vector normal se encuentran en el intervalo [-1, 1] y, por lo tanto, requieren una conversi칩n adicional al intervalo [0, 1]: <br><br><pre><code class="cpp hljs">vec3 rgb_normal = normal * <span class="hljs-number"><span class="hljs-number">0.5</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   [-1,1]  [0,1]</span></span></code> </pre> <br>  Tal reducci칩n del vector normal al espacio de los componentes de color RGB nos permitir치 guardar el vector normal en la textura, obtenida sobre la base del relieve real del objeto modelado y 칰nico para cada fragmento.  Un ejemplo de tal textura - mapas normales - para el mismo ladrillo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/jp/nb/sijpnb3we6vaxhlr4eeh9jp3mvq.png"></div><br>  Es interesante observar el tinte azul de este mapa normal (casi todos los mapas normales tienen un tinte similar).  Esto sucede porque todas las normales est치n orientadas aproximadamente a lo largo del eje oZ, que est치 representado por la coordenada triple (0, 0, 1), es decir.  en forma de tr칤ada de colores: azul puro.  Peque침os cambios en el tono son consecuencia de la desviaci칩n de las normales del semi-eje positivo oZ en algunas 치reas, que corresponde a terreno irregular.  Entonces, puede ver que en los bordes superiores de cada ladrillo, la textura adquiere un tono verde.  Y esto es l칩gico: en las caras superiores del ladrillo, las normales deben orientarse m치s hacia el eje oY (0, 1, 0), que corresponde al verde. <br><br>  Para la escena de prueba, tome un plano orientado hacia el semieje positivo oZ y use el siguiente <a href="">mapa difuso</a> y <a href="">el mapa normal</a> para 칠l. <br><blockquote>  Tenga en cuenta que el mapa normal en el enlace y en la imagen de arriba son diferentes.  En el art칤culo, el autor mencion칩 casualmente las razones de las diferencias, limit치ndose a aconsejar que los mapas normales se conviertan para que el componente verde indique "abajo" en lugar de "arriba" en el sistema local del plano de textura. <br>  Si observa con m치s detalle, entonces dos factores interact칰an aqu칤: <br><ul><li>  La diferencia es c칩mo se abordan los texels en la memoria del cliente y en la memoria de textura OpenGL </li><li>  La presencia de dos notaciones para mapas normales.  Convencionalmente, dos campamentos: estilo DirectX y estilo OpenGL </li></ul><br>  En cuanto a las anotaciones de mapas normales, hist칩ricamente familiares son dos campos: DirectX y OpenGL. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vt/f_/bo/vtf_botw_8tazlodtepbgp0zyvk.png"></div><br>  Aparentemente, no son compatibles.  Y con un poco de reflexi칩n, puede comprender que DirectX considera que el espacio tangente es para zurdos y OpenGL para diestros.  Deslizar el mapa X normal de nuestra aplicaci칩n sin ning칰n cambio dar치 como resultado una iluminaci칩n incorrecta, y no siempre queda claro de inmediato que sea incorrecto.  En particular, las protuberancias en el formato OpenGL se convierten en hendiduras para DirectX y viceversa. <br>  En cuanto al direccionamiento: cargar datos de un archivo de textura en la memoria, suponemos que el primer texel es el texel superior izquierdo de la imagen.  Para representar datos de textura en la memoria de la aplicaci칩n, esto es generalmente cierto.  Pero OpenGL usa un sistema de coordenadas de textura diferente: para ello, el primer texel es la esquina inferior izquierda.  Para una textura correcta, las im치genes generalmente se voltean a lo largo del eje Y en el c칩digo de uno u otro cargador de archivos de imagen.  Para Stb_image utilizado en las lecciones, debe agregar una casilla de verificaci칩n <br><br><pre> <code class="cpp hljs">stbi_set_flip_vertically_on_load(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  Lo curioso es que dos opciones se muestran correctamente en t칠rminos de iluminaci칩n: un mapa normal en notaci칩n OpenGL con la reflexi칩n Y activada o un mapa normal en notaci칩n DirectX con la reflexi칩n Y desactivada. La iluminaci칩n en ambos casos funciona correctamente, la diferencia solo permanecer치 en el inverso de la textura a lo largo del eje Y. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ld/tq/1m/ldtq1mzn-lkbnz3tqeuqvs0n6ke.jpeg"></div><br><br>  <b><i>Nota</i></b>  <b><i>trans.</i></b> <br></blockquote><br>  Entonces, cargue ambas texturas, enlace a los bloques de textura y renderice el plano preparado, teniendo en cuenta las siguientes modificaciones del c칩digo del sombreador de fragmentos: <br><br><pre> <code class="cpp hljs">uniform sampler2D normalMap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         [0,1] normal = texture(normalMap, fs_in.TexCoords).rgb; //      [-1,1] normal = normalize(normal * 2.0 - 1.0); [...] //  ... }</span></span></code> </pre> <br>  Aqu칤 aplicamos la transformaci칩n inversa del espacio de valores RGB a un vector normal completo y luego simplemente la usamos en el conocido modelo de iluminaci칩n Blinn-Fong. <br><br>  Ahora, si cambia lentamente la posici칩n de la fuente de luz en la escena, puede sentir la ilusi칩n del alivio de la superficie que proporciona el mapa normal: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/3v/fm/ii3vfmiowd37o6nqoyp7e3tlaay.png"></div><br>  Pero queda un problema que reduce dr치sticamente el rango de uso posible de los mapas normales.  Como ya se se침al칩, el tinte azul del mapa normal insinu칩 que todos los vectores en la textura est치n orientados en promedio a lo largo del eje positivo oZ.  En nuestra escena, esto no cre칩 problemas, porque lo normal a la superficie del avi칩n tambi칠n estaba alineado con oZ.  Sin embargo, 쯤u칠 sucede si cambiamos la posici칩n del plano en la escena para que lo normal est칠 alineado con el eje positivo oY? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ni/2h/md/ni2hmdd81cp3updbfbl7z9iilxw.png"></div><br>  춰La iluminaci칩n result칩 estar completamente equivocada!  Y la raz칩n es simple: las normales del mapa a칰n devuelven vectores orientados a lo largo del semieje positivo oZ, aunque en este caso deber칤an orientarse en la direcci칩n del semieje positivo oY de la superficie normal.  Al mismo tiempo, el c치lculo de la iluminaci칩n es como si las normales a la superficie estuvieran ubicadas como si el plano a칰n estuviera orientado hacia el semieje positivo oZ, lo que da un resultado incorrecto.  La siguiente figura muestra m치s claramente la orientaci칩n de las normales le칤das del mapa en relaci칩n con la superficie: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/dn/wl/wtdnwlrqopjfi5vjpiflloybohm.png"></div><br>  Se puede ver que las normales est치n generalmente alineadas a lo largo del semieje positivo oZ, aunque deber칤an haberse alineado a lo largo de la normal a la superficie que se dirige a lo largo del semieje positivo oY. <br>  Una posible soluci칩n ser칤a establecer un mapa normal separado para cada orientaci칩n de la superficie en consideraci칩n.  Para un cubo, se necesitar칤an seis mapas normales, pero para modelos m치s complejos, el n칰mero de orientaciones posibles puede ser demasiado alto y no adecuado para la implementaci칩n. <br><br>  Existe otro enfoque matem치ticamente m치s complicado, que ofrece calcular la iluminaci칩n en un sistema de coordenadas diferente: de modo que los vectores normales siempre coincidan aproximadamente con el medio eje positivo oZ.  Otros vectores necesarios para los c치lculos de iluminaci칩n se convierten a este sistema de coordenadas.  Este m칠todo permite utilizar un mapa normal para cualquier orientaci칩n del objeto.  Y este sistema de coordenadas espec칤fico se llama <b>espacio</b> <b>tangente</b> o <b>espacio tangente</b> . <br><br><h2>  Espacio tangente </h2><br>  Cabe se침alar que el vector normal en el mapa normal se expresa directamente en el espacio tangente, es decir.  en un sistema de coordenadas tal que lo normal siempre se dirige aproximadamente en la direcci칩n del semieje positivo oZ.  El espacio tangente se define como un sistema de coordenadas local al plano del tri치ngulo, y cada vector normal se define dentro de este sistema de coordenadas.  Puede imaginar este sistema como un sistema de coordenadas local para un mapa normal: todos los vectores en 칠l se dirigen hacia el semieje positivo oZ, independientemente de la orientaci칩n final de la superficie.  Utilizando matrices de transformaci칩n especialmente preparadas, es posible transformar vectores normales de este sistema de coordenadas de tangente local a coordenadas mundiales o de visualizaci칩n, orient치ndolos de acuerdo con la posici칩n final de las superficies texturizadas. <br>  Considere el ejemplo anterior con el uso incorrecto del mapeo normal, donde el plano estaba orientado a lo largo del eje positivo oY.  Como el mapa de las normales se define en el espacio tangente, una de las opciones de ajuste es calcular la matriz de transici칩n de las normales del espacio tangente a una orientaci칩n normal a la superficie.  Esto causar칤a que las normales se alineen a lo largo del eje positivo oY.  Una propiedad notable del espacio tangente es el hecho de que al calcular dicha matriz podemos reorientar las normales a cualquier superficie y su orientaci칩n. <br><br>  Dicha matriz se abrevia como <i>TBN</i> , que es la abreviatura del nombre del triple de vectores <i>Tangente</i> , <i>Bitangente</i> y <i>Normal</i> .  Necesitamos encontrar estos tres vectores para formar esta matriz de cambio de base.  Tal matriz hace la transici칩n de un vector desde el espacio tangente a otro y para su formaci칩n son necesarios tres vectores perpendiculares entre s칤, cuya orientaci칩n corresponde a la orientaci칩n del plano del mapa normal.  Este es un vector de direcci칩n hacia arriba, hacia la derecha y hacia adelante, un conjunto que nos resulta familiar de la lecci칩n sobre la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c치mara virtual</a> . <br>  Con el vector superior, todo est치 claro de inmediato: este es nuestro vector normal.  Los <i>vectores</i> derecho y directo se llaman tangente y <i>bitangente,</i> respectivamente.  La siguiente figura da una idea de su posici칩n relativa en el avi칩n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/su/id/oz/suidozydrgjf0miyfpocfndaiu0.png"></div><br>  El c치lculo de la tangente y la bi-tangente no es tan obvio como el c치lculo del vector normal.  En la figura, puede ver que las direcciones de la tangente y el mapa de tangente de la normalidad est치n alineados con los ejes que especifican las coordenadas de textura de la superficie.  Este hecho es la base para calcular estos dos vectores, que requerir치n cierta habilidad con las matem치ticas.  Mira la foto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4a/nq/k0/4anqk0pjl85p8ei96uporxchq6s.png"></div><br>  Cambios en las coordenadas de textura a lo largo del borde de un tri치ngulo. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="1044" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> E_2 </script>  designado como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mtext" id="MJXp-Span-6">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-14" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.993ex" height="2.298ex" viewBox="0 -780.1 3871.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="966" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> \ Delta U_2 </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-15"><span class="MJXp-mtext" id="MJXp-Span-16">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-24" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.761ex" height="2.298ex" viewBox="0 -780.1 3771.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="825" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ Delta V_2 </script>  expresado en las mismas direcciones que los vectores tangentes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> T </script>  y bi-tangente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> B </script>  .  En base a este hecho, puede expresar los bordes de un tri치ngulo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-msubsup" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-32" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="1044" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> E_1 </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-33"><span class="MJXp-msubsup" id="MJXp-Span-34"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-36" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="1044" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> E_2 </script>  en forma de una combinaci칩n lineal de vectores tangentes y bi-tangentes: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-37"><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43"><font style="vertical-align: inherit;">D </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-msubsup" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">U </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-48"><span class="MJXp-mn MJXp-script" id="MJXp-Span-50" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">1</font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;"> T </font></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;">D </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-msubsup" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">V </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-59"><span class="MJXp-mn MJXp-script" id="MJXp-Span-61" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">1</font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62"><font style="vertical-align: inherit;"> B</font></span></font><span class="MJXp-mtext" id="MJXp-Span-42">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-50" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-53">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-61" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="12097" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> E_1 = \ Delta U_1T + \ Delta V_1B </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-63"><span class="MJXp-msubsup" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-66" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;">D </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-msubsup" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">U </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-74"><span class="MJXp-mn MJXp-script" id="MJXp-Span-76" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">2</font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77"><font style="vertical-align: inherit;"> T </font></span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;">D </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-msubsup" id="MJXp-Span-85"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">V </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-85"><span class="MJXp-mn MJXp-script" id="MJXp-Span-87" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">2</font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88"><font style="vertical-align: inherit;"> B</font></span></font><span class="MJXp-mtext" id="MJXp-Span-68">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-76" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-79">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-85"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-87" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="12097" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> E_2 = \ Delta U_2T + \ Delta V_2B </script></p><br>  Transformando en un registro bit a bit obtenemos: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-89"><span class="MJXp-mo" id="MJXp-Span-90" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-91"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-93" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-94">1</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">x</span></span></span><span class="MJXp-mo" id="MJXp-Span-96" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-97"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-99" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-100">1</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">y</span></span></span><span class="MJXp-mo" id="MJXp-Span-102" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-103"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-105" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-106">1</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">z</span></span></span><span class="MJXp-mo" id="MJXp-Span-108" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-110">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">a</span><span class="MJXp-msubsup" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117" style="margin-right: 0.05em;">U</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-118" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-122" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-123" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-126" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-127" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-130" style="vertical-align: -0.4em;">z</span></span><span class="MJXp-mo" id="MJXp-Span-131" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-132" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-133">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">a</span><span class="MJXp-msubsup" id="MJXp-Span-139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140" style="margin-right: 0.05em;">V</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-141" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-143"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-145" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-147"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-149" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-150" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-153" style="vertical-align: -0.4em;">z</span></span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="26292" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> (E_ {1x}, E_ {1y}, E_ {1z}) = \ Delta U_1 (T_x, T_y, T_z) + \ Delta V_1 (B_x, B_y, B_z) </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-155"><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-159" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-160">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">x</span></span></span><span class="MJXp-mo" id="MJXp-Span-162" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-163"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-165" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-166">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">y</span></span></span><span class="MJXp-mo" id="MJXp-Span-168" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-171" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-172">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">z</span></span></span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-175" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-176">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">a</span><span class="MJXp-msubsup" id="MJXp-Span-182"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183" style="margin-right: 0.05em;">U</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-184" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-185" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-186"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-188" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-189" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-192" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-193" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-194"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-196" style="vertical-align: -0.4em;">z</span></span><span class="MJXp-mo" id="MJXp-Span-197" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-198" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-199">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">a</span><span class="MJXp-msubsup" id="MJXp-Span-205"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206" style="margin-right: 0.05em;">V</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-207" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-208" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-209"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-211" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-212" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-213"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-215" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-216" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-217"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218" style="margin-right: 0.05em;">B</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-219" style="vertical-align: -0.4em;">z</span></span><span class="MJXp-mo" id="MJXp-Span-220" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMAIN-29" x="26292" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> (E_ {2x}, E_ {2y}, E_ {2z}) = \ Delta U_2 (T_x, T_y, T_z) + \ Delta V_2 (B_x, B_y, B_z) </script></p><br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-221"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">E</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.776ex" height="2.057ex" viewBox="0 -780.1 764.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-45" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> E </script>  se calcula como el vector de la diferencia de dos vectores, y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-223"><span class="MJXp-mtext" id="MJXp-Span-224">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">U</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.134ex" height="2.057ex" viewBox="0 -780.1 3502 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-55" x="2734" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ Delta U </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-231"><span class="MJXp-mtext" id="MJXp-Span-232">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">V</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.138ex" height="2.057ex" viewBox="0 -780.1 3504 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-56" x="2734" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> \ Delta V </script>  como la diferencia en las coordenadas de textura.  Queda por encontrar dos inc칩gnitas en dos ecuaciones: la tangente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> T </script>  y sesgo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-241"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-42" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> B </script>  .  Si recuerda las lecciones de 치lgebra, sabe que tales condiciones hacen posible resolver el sistema por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-243"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhgmdhY5Stt8gAJHjfm41HDg3ZR24w#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> T </script>  y para <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-245"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> B </script>  . <br>  La 칰ltima forma dada de ecuaciones nos permite reescribirla en forma de multiplicaci칩n matricial: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-247"><span class="noError" id="MJXp-Span-248" style="display: inline-block;">\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;y&nbsp;E_&nbsp;{1y}&nbsp;y&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;y&nbsp;E_&nbsp;{2y}&nbsp;y&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-19"> \ begin {bmatrix} E_ {1x} y E_ {1y} y E_ {1z} \\ E_ {2x} y E_ {2y} y E_ {2z} \ end {bmatrix} = \ begin {bmatrix} \ Delta U_1 & \ Delta V_1 \\ \ Delta U_2 & \ Delta V_2 \ end {bmatrix} \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Intenta hacer una multiplicaci칩n matricial en tu mente para asegurarte de que el registro sea correcto.  Escribir un sistema en forma de matriz hace que sea mucho m치s f치cil comprender el enfoque para encontrar <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-249"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> T </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> B </script>  .  Multiplica ambos lados de la ecuaci칩n por el inverso de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-253"><span class="MJXp-mtext" id="MJXp-Span-254">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">U</span><span class="MJXp-mtext" id="MJXp-Span-261">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">V</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> \ Delta U \ Delta V </script>  : <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-268"><span class="noError" id="MJXp-Span-269" style="display: inline-block;">\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;^&nbsp;{-&nbsp;1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;&amp;&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z&nbsp;}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;&amp;&nbsp;E_&nbsp;{2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-23"> \ begin {bmatrix} \ Delta U_1 & \ Delta V_1 \\ \ Delta U_2 & \ Delta V_2 \ end {bmatrix} ^ {- 1} \ begin {bmatrix} E_ {1x} & E_ {1y} & E_ {1z } \\ E_ {2x} & E_ {2y} & E_ {2z} \ end {bmatrix} = \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Tenemos una decisi칩n sobre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> T </script>  y <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-272"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> B </script>  , que, sin embargo, requiere el c치lculo de la matriz inversa de cambios en las coordenadas de textura.  No entraremos en detalles sobre el c치lculo de matrices inversas: la expresi칩n para la matriz inversa se parece al producto del n칰mero inverso al determinante de la matriz original y la matriz adjunta: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-274"><span class="noError" id="MJXp-Span-275" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ begin {bmatrix} T_x &amp; T_y &amp; T_z \\ B_x &amp; B_y &amp; B_z \ end {bmatrix} = \ frac {1} {\ Delta U_1 \ Delta V_2 - \ Delta U_2 \ Delta V_1} \ begin {bmatrix} \ Delta V_2 &amp; - \ Delta V_1 \\ - \ Delta U_2 &amp; \ Delta U_1 \ end {bmatrix} \ begin {bmatrix} E_ {1x} &amp; E_ {1y} &amp; E_ {1z} \\ E_ {2x} &amp; E_ {2y } &amp; E_ {2z} \ end {bmatrix}</font></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} = \ frac {1} {\ Delta U_1 \ Delta V_2 - \ Delta U_2 \ Delta V_1} \ begin {bmatrix} \ Delta V_2 & - \ Delta V_1 \\ - \ Delta U_2 & \ Delta U_1 \ end {bmatrix} \ begin {bmatrix} E_ {1x} & E_ {1y} & E_ {1z} \\ E_ {2x} & E_ { 2y} & E_ {2z} \ end {bmatrix} </script></p><br>  Esta expresi칩n es la f칩rmula para calcular el vector tangente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> T </script>  y bi-tangente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> B </script>  basado en las coordenadas de las caras del tri치ngulo y las coordenadas de textura correspondientes. <br>  No se preocupe si la esencia de los c치lculos matem치ticos anteriores se le escapa.  Si comprende que obtenemos la tangente y la tangente de sesgo en funci칩n de las coordenadas de los v칠rtices del tri치ngulo y sus coordenadas de textura (dado que las coordenadas de textura tambi칠n pertenecen al espacio de tangente), esto ya es la mitad de la batalla. <br><br><h4>  C치lculo de tangentes y bitangentes. </h4><br>  En el ejemplo de esta lecci칩n, tomamos un plano simple mirando hacia el semieje positivo oZ.  Ahora intentaremos implementar el mapeo normal usando el espacio tangente para poder orientar el plano en el ejemplo como queramos sin destruir el efecto de mapeo normal.  Usando el c치lculo anterior, encontramos manualmente la tangente y la bi-tangente a la superficie bajo consideraci칩n. <br>  Suponemos que el plano est치 compuesto por los siguientes v칠rtices con coordenadas de textura (los vectores 1, 2, 3 y 1, 3, 4 dan dos tri치ngulos): <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 pos1(-1.0, 1.0, 0.0); glm::vec3 pos2(-1.0, -1.0, 0.0); glm::vec3 pos3( 1.0, -1.0, 0.0); glm::vec3 pos4( 1.0, 1.0, 0.0); //   glm::vec2 uv1(0.0, 1.0); glm::vec2 uv2(0.0, 0.0); glm::vec2 uv3(1.0, 0.0); glm::vec2 uv4(1.0, 1.0); //   glm::vec3 nm(0.0, 0.0, 1.0);</span></span></code> </pre> <br>  Primero, calculamos los vectores que describen las caras del tri치ngulo, as칤 como los deltas de las coordenadas de textura: <br><br><pre> <code class="cpp hljs">glm::vec3 edge1 = pos2 - pos1; glm::vec3 edge2 = pos3 - pos1; glm::vec2 deltaUV1 = uv2 - uv1; glm::vec2 deltaUV2 = uv3 - uv1;</code> </pre> <br>  Con los datos iniciales necesarios en la mano, podemos comenzar a calcular la tangente y la bi-tangente directamente por las f칩rmulas de la secci칩n anterior: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> f = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> / (deltaUV1.x * deltaUV2.y - deltaUV2.x * deltaUV1.y); tangent1.x = f * (deltaUV2.y * edge1.x - deltaUV1.y * edge2.x); tangent1.y = f * (deltaUV2.y * edge1.y - deltaUV1.y * edge2.y); tangent1.z = f * (deltaUV2.y * edge1.z - deltaUV1.y * edge2.z); tangent1 = glm::normalize(tangent1); bitangent1.x = f * (-deltaUV2.x * edge1.x + deltaUV1.x * edge2.x); bitangent1.y = f * (-deltaUV2.x * edge1.y + deltaUV1.x * edge2.y); bitangent1.z = f * (-deltaUV2.x * edge1.z + deltaUV1.x * edge2.z); bitangent1 = glm::normalize(bitangent1); [...] <span class="hljs-comment"><span class="hljs-comment">//        </span></span></code> </pre> <br>  Primero, sacamos el componente fraccional de la expresi칩n final en una variable separada <i>f</i> .  Luego, para cada componente de los vectores, realizamos la parte correspondiente de la multiplicaci칩n de matrices y multiplicamos por <i>f</i> .  Al comparar este c칩digo con la f칩rmula de c치lculo final, puede ver que esta es su disposici칩n literal.  No olvides normalizar al final, para que los vectores encontrados sean unitarios. <br><br>  Como el tri치ngulo es una figura plana, es suficiente calcular la tangente y la bi-tangente una vez por tri치ngulo; ser치n los mismos para todos los v칠rtices.  Vale la pena se침alar que la mayor칤a de las implementaciones de trabajar con modelos (como cargadores o generadores de paisajes) utilizan una organizaci칩n de tri치ngulos, donde comparten v칠rtices con otros tri치ngulos.  En tales casos, los desarrolladores generalmente recurren a par치metros promedio en v칠rtices comunes, como vectores normales, tangentes y bi-tangentes, para obtener un resultado m치s uniforme.  Los tri치ngulos que forman nuestro plano tambi칠n comparten varios v칠rtices, pero dado que ambos se encuentran en el mismo plano, no se requiere promediar.  Sin embargo, es 칰til recordar la presencia de este enfoque en aplicaciones y tareas reales. <br><br>  Los vectores tangentes y bi-tangentes resultantes deben tener valores (1, 0, 0) y (0, 1, 0), respectivamente.  Que junto con el vector normal (0, 0, 1) forman la matriz ortogonal TBN.  Si visualiza la base resultante con el plano, obtendr치 la siguiente imagen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4q/k-/qu/4qk-qubyv3blgflpspploqrmz8i.png"></div><br>  Ahora, habiendo calculado los vectores, puede proceder a la implementaci칩n completa del mapeo normal. <br><br><h4>  Mapeo normal en espacio tangente </h4><br>  Primero debe crear una matriz TBN en los sombreadores.  Para este prop칩sito, transferiremos los vectores de tangente y bi-tangente previamente preparados al sombreador de v칠rtices a trav칠s de los atributos de v칠rtice: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core layout (location = 0) in vec3 aPos; layout (location = 1) in vec3 aNormal; layout (location = 2) in vec2 aTexCoords; layout (location = 3) in vec3 aTangent; layout (location = 4) in vec3 aBitangent;</span></span></code> </pre> <br>  En el c칩digo del v칠rtice del sombreador mismo, formamos la matriz directamente: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 B = normalize(vec3(model * vec4(aBitangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); mat3 TBN = mat3(T, B, N) }</code> </pre> <br>  En el c칩digo anterior, primero convertimos todos los vectores de la base del espacio tangente en un sistema de coordenadas en el que nos sentimos c칩modos trabajando; en este caso, este es el sistema de coordenadas mundial y multiplicamos los vectores por el modelo de matriz <i>modelo</i> .  A continuaci칩n, creamos la matriz TBN en s칤 misma simplemente pasando los tres vectores correspondientes a un constructor de tipo <i>mat3</i> .  Tenga en cuenta que para la exactitud del orden de c치lculo, es necesario multiplicar los vectores no por la matriz modelo, sino por la matriz normal, ya que solo estamos interesados 근n la orientaci칩n de los vectores, pero no en su desplazamiento o escala <br><blockquote>  Estrictamente hablando, no es necesario transferir el vector bi-tangente al sombreador. <br>  Como el triple de los vectores TBN es mutuamente perpendicular, la bi-tangente se puede encontrar en el sombreador mediante la multiplicaci칩n vectorial: <br><br><pre> <code class="cpp hljs"> vec3 B = cross(N, T)</code> </pre> </blockquote><br>  Entonces, se recibe la matriz TBN, 쯖칩mo la usamos?  De hecho, hay dos enfoques para su uso en el mapeo normal: <br><br><ol><li>  Use la matriz TBN para transformar todos los vectores necesarios de la tangente al espacio mundial.  Transfiera los resultados al sombreador de fragmentos, donde, tambi칠n utilizando la matriz, transforme el vector del mapa normal al espacio mundial.  Como resultado, el vector normal estar치 en el espacio donde se calcula toda la iluminaci칩n. </li><li>  Tome la matriz inversa a TBN y convierta todos los vectores necesarios del espacio mundial a tangente.  Es decir  use esta matriz para transformar los vectores involucrados en los c치lculos de iluminaci칩n en espacio tangente.  El vector normal en este caso tambi칠n permanece en el mismo espacio que los otros participantes en el c치lculo de la iluminaci칩n. </li></ol><br>  Veamos la primera opci칩n.  El vector normal de la textura correspondiente se especifica en el espacio tangente, mientras que los otros vectores utilizados en el c치lculo de la iluminaci칩n se definen en el espacio mundial.  Al pasar la matriz TBN al sombreador de fragmentos, podr칤amos transformar el vector normal obtenido mediante el muestreo de la textura del espacio tangente al mundo, asegurando la unidad de los sistemas de coordenadas para todos los elementos del c치lculo de la iluminaci칩n.  En este caso, todos los c치lculos (especialmente las multiplicaciones de vectores escalares) ser치n correctos. <br><br>  La transferencia de la matriz TBN se realiza de la manera m치s simple: <br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } vs_out; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vs_out.TBN = mat3(T, B, N); }</code> </pre> <br>  En el c칩digo del sombreador de fragmentos, respectivamente, establecemos una variable de entrada de tipo mat3: <br><br><pre> <code class="cpp hljs">in VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } fs_in;</code> </pre> <br>  Con la matriz a mano, puede especificar el c칩digo para obtener lo normal mediante la expresi칩n de la traducci칩n de la tangente al espacio mundial: <br><br><pre> <code class="cpp hljs">normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); normal = normalize(fs_in.TBN * normal);</code> </pre> <br>  Como la normal resultante ahora se establece en el espacio mundial, no hay necesidad de cambiar nada m치s en el c칩digo del sombreador.  C치lculos de iluminaci칩n, y as칤 asume un vector normal dado en coordenadas mundiales. <br><br>  Veamos tambi칠n el segundo enfoque.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se requerir치 obtener la matriz TBN inversa, as칤 como transferir todos los vectores involucrados en el c치lculo de la iluminaci칩n del sistema de coordenadas mundial al que corresponde a los vectores normales obtenidos de la textura: la tangente. </font><font style="vertical-align: inherit;">En este caso, la formaci칩n de la matriz TBN permanece sin cambios, pero antes de pasar al sombreador de fragmentos debemos obtener la matriz inversa:</font></font><br><br><pre> <code class="cpp hljs">vs_out.TBN = transpose(mat3(T, B, N));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga en cuenta que la funci칩n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transpose ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se usa en </font><font style="vertical-align: inherit;">lugar de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inverse ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dicha sustituci칩n es verdadera, ya que para las matrices ortogonales (donde todos los ejes est치n representados por unidades de vectores perpendiculares entre s칤), la obtenci칩n de la matriz inversa da un resultado id칠ntico a la transposici칩n. </font><font style="vertical-align: inherit;">Y esto es muy 칰til, ya que, en el caso general, calcular la matriz inversa es una tarea mucho m치s costosa computacionalmente en comparaci칩n con la transposici칩n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el c칩digo de sombreador de fragmentos, no convertiremos el vector normal, en su lugar, convertiremos otros vectores importantes del sistema de coordenadas del mundo a la tangente, es decir, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esta soluci칩n tambi칠n re칰ne todos los elementos de los c치lculos en un solo sistema de coordenadas, esta vez la tangente.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); vec3 lightDir = fs_in.TBN * normalize(lightPos - fs_in.FragPos); vec3 viewDir = fs_in.TBN * normalize(viewPos - fs_in.FragPos); [...] }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El segundo enfoque parece m치s lento y requiere m치s multiplicaciones de matriz en el sombreador de fragmentos (lo que afecta en gran medida el rendimiento). 쯇or qu칠 empezamos a desmontarlo? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El hecho es que traducir vectores de coordenadas mundiales a tangentes proporciona una ventaja adicional: de hecho, 춰podemos mover todo el c칩digo de transformaci칩n del fragmento al sombreador de v칠rtices! Este enfoque funciona porque </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no cambian de fragmento a fragmento, y el valor es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fs_in.FragPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi칠n podemos traducir al espacio tangente en el sombreador de v칠rtices, el valor interpolado en la entrada del sombreador de fragmentos ser치 bastante correcto. </font><font style="vertical-align: inherit;">Por lo tanto, para el segundo enfoque, no es necesario traducir todos estos vectores en el espacio tangente en el c칩digo del sombreador de fragmentos, mientras que el primero lo requiere, porque lo normal es 칰nico para cada fragmento.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, nos alejamos de transferir la matriz inversa a TBN al sombreador de fragmentos y, en su lugar, le pasamos el vector de posici칩n del v칠rtice, la fuente de luz y el observador en el espacio tangente. </font><font style="vertical-align: inherit;">Por lo tanto, eliminaremos las costosas multiplicaciones de matrices en el sombreador de fragmentos, lo que ser치 una optimizaci칩n significativa, porque el sombreador de v칠rtices se ejecuta con mucha menos frecuencia. </font><font style="vertical-align: inherit;">Es esta ventaja la que coloca el segundo enfoque en la categor칤a de uso preferido en la mayor칤a de los casos.</font></font><br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; vec3 TangentLightPos; vec3 TangentViewPos; vec3 TangentFragPos; } vs_out; uniform vec3 lightPos; uniform vec3 viewPos; [...] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] mat3 TBN = transpose(mat3(T, B, N)); vs_out.TangentLightPos = TBN * lightPos; vs_out.TangentViewPos = TBN * viewPos; vs_out.TangentFragPos = TBN * vec3(model * vec4(aPos, <span class="hljs-number"><span class="hljs-number">0.0</span></span>));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el sombreador de fragmentos, cambiamos al uso de nuevas variables de entrada en los c치lculos de iluminaci칩n en el espacio tangente. </font><font style="vertical-align: inherit;">Como las normales se definen condicionalmente en este espacio, todos los c치lculos siguen siendo correctos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora que todos los c치lculos de mapeo normales se realizan en el espacio tangente, podemos cambiar la orientaci칩n de la superficie de prueba en la aplicaci칩n como queramos y la iluminaci칩n seguir치 siendo correcta:</font></font><br><br><pre> <code class="cpp hljs">glm::<span class="hljs-function"><span class="hljs-function">mat4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">model</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0f</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; model = glm::rotate(model, (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)glfwGetTime() * <span class="hljs-number"><span class="hljs-number">-10.0f</span></span>, glm::normalize(glm::vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>))); shader.setMat4(<span class="hljs-string"><span class="hljs-string">"model"</span></span>, model); RenderQuad();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De hecho, exteriormente todo se ve como deber칤a: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/do/ex/uedoexgmihcpjjyf5mmcm09vpps.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las fuentes est치n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu칤</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objetos complejos </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, descubrimos c칩mo realizar un mapeo normal en el espacio tangente y c칩mo calcular independientemente los vectores tangentes y tangentes de polarizaci칩n para esto. </font><font style="vertical-align: inherit;">Afortunadamente, este c치lculo manual no suele ser una tarea: en su mayor parte, los desarrolladores implementan este c칩digo en alg칰n lugar de las entra침as del cargador de modelos. </font><font style="vertical-align: inherit;">En nuestro caso, esto es cierto para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el cargador Assimp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilizado </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assimp proporciona un indicador de opci칩n muy 칰til al cargar modelos: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cuando se pasa a la funci칩n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadFile ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la </font><font style="vertical-align: inherit;">propia biblioteca calcular치 las l칤neas de tangente suave y bi-tangente para cada uno de los v칠rtices cargados, un proceso similar al discutido aqu칤.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aiScene *scene = importer.ReadFile( path, aiProcess_Triangulate | aiProcess_FlipUVs | aiProcess_CalcTangentSpace );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Despu칠s de eso, puede acceder directamente a las tangentes calculadas: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.x = mesh-&gt;mTangents[i].x; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.y = mesh-&gt;mTangents[i].y; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.z = mesh-&gt;mTangents[i].z; vertex.Tangent = <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi칠n deber치 actualizar el c칩digo de descarga para tener en cuenta la recepci칩n de mapas normales para modelos texturizados. El formato Wavefront Object (.obj) exporta mapas normales de tal manera que el indicador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assimp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aiTextureType_NORMAL </font><font style="vertical-align: inherit;">no garantiza que estos mapas se carguen correctamente, mientras que </font><font style="vertical-align: inherit;">todo funciona correctamente </font><font style="vertical-align: inherit;">con el indicador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiTextureType_HEIGHT</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por lo tanto, personalmente, suelo cargar mapas normales de la siguiente manera:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Texture&gt; normalMaps = loadMaterialTextures(material, aiTextureType_HEIGHT, <span class="hljs-string"><span class="hljs-string">"texture_normal"</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, este enfoque puede no ser adecuado para otros formatos de descripci칩n de modelos y tipos de archivos. Tambi칠n noto que configurar el indicador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no siempre funciona. Sabemos que el c치lculo de tangentes se basa en coordenadas de textura, sin embargo, a menudo los autores de modelos aplican varios trucos a las coordenadas de textura, lo que interrumpe el c치lculo de tangentes. Por lo tanto, una imagen especular de coordenadas de textura a menudo se usa para modelos con textura sim칠trica. Si no se tiene en cuenta el reflejo, el c치lculo de las tangentes ser치 incorrecto. Assimp no hace esta contabilidad. El modelo de nanotraje familiar aqu칤 no es adecuado para la demostraci칩n, ya que tambi칠n utiliza la duplicaci칩n.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pero con un modelo correctamente texturizado que utiliza mapas normales y especulares, la aplicaci칩n de prueba ofrece un resultado muy bueno: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qs/fc/45/qsfc45x4jkxagyufkoq6mbspf5k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como puede ver, el uso del mapeo normal proporciona un aumento tangible en los detalles y es barato en t칠rminos de costos de rendimiento. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No olvide que el uso del mapeo normal puede ayudar a mejorar el rendimiento de una escena en particular. </font><font style="vertical-align: inherit;">Sin su uso, lograr el detalle del modelo solo es posible al aumentar la densidad de la malla poligonal, malla. </font><font style="vertical-align: inherit;">Pero esta t칠cnica le permite alcanzar visualmente el mismo nivel de detalle para mallas de baja poli. </font><font style="vertical-align: inherit;">A continuaci칩n puede ver una comparaci칩n de estos dos enfoques:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qm/eq/s2/qmeqs2ocgdhnikxrfmlyjvkqxc8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El nivel de detalle en el modelo de alta poli y en el modelo de baja poli que utiliza el mapeo normal es pr치cticamente indistinguible. </font><font style="vertical-align: inherit;">Por lo tanto, esta t칠cnica es una excelente manera de reemplazar modelos de alta poli en la escena con modelos simplificados, pr치cticamente sin p칠rdida de calidad visual.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ultimo comentario </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay otro detalle t칠cnico sobre el mapeo normal, que mejora un poco la calidad con poco o ning칰n costo adicional. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En los casos en que las tangentes se calculan para mallas grandes y complejas con un n칰mero significativo de v칠rtices que pertenecen a varios tri치ngulos, los vectores tangentes generalmente se promedian para obtener un resultado de mapeo normal suave y visualmente agradable. Sin embargo, esto crea un problema: despu칠s del promedio, el triple de los vectores TBN puede perder perpendicularidad mutua, lo que tambi칠n significa la p칠rdida de ortogonalidad para la matriz TBN. En el caso general, el resultado del mapeo normal obtenido sobre la base de una matriz no ortogonal es solo ligeramente incorrecto, pero a칰n podemos mejorarlo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para hacer esto, es suficiente aplicar un m칠todo matem치tico simple:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proceso de Gram-Schmidt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o re-ortogonalizaci칩n de nuestro triple de vectores TBN. </font><font style="vertical-align: inherit;">En el c칩digo del sombreador de v칠rtices:</font></font><br><br><pre> <code class="cpp hljs">vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); <span class="hljs-comment"><span class="hljs-comment">// - T  N T = normalize(T - dot(T, N) * N); //    B    T  N vec3 B = cross(N, T); mat3 TBN = mat3(T, B, N)</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta enmienda, aunque peque침a, mejora la calidad del mapeo normal a cambio de los gastos generales exiguos. </font><font style="vertical-align: inherit;">Si est치 interesado en los detalles de este procedimiento, puede ver la 칰ltima parte del video Normal Mapping Mathematics, cuyo enlace se proporciona a continuaci칩n.</font></font><br><br><h2>  Recursos Adicionales </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial 26: Mapeo normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una lecci칩n sobre mapeo normal de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ogldev</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C칩mo funciona la asignaci칩n normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un video tutorial que explica los conceptos b치sicos de la asignaci칩n normal de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapeo de Mapeo Normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Una pel칤cula relacionada con la anterior que explica las matem치ticas utilizadas en el m칠todo de Mapeo Normal, tambi칠n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial 13: Mapeo normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : otra lecci칩n de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opengl-tutorial.org</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Tenemos un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telegrama conf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para la coordinaci칩n de transferencias. </font><font style="vertical-align: inherit;">Si tiene un serio deseo de ayudar con la traducci칩n, 춰de nada!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415579/">https://habr.com/ru/post/es415579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415569/index.html">C칍MO configurar ubuntu 18.04 sendmail + DKIM + SPF + DMARC o c칩mo logr칠 ingresar al basti칩n de Gmail</a></li>
<li><a href="../es415571/index.html">kaggle: identificaci칩n del modelo de c치mara de IEEE</a></li>
<li><a href="../es415573/index.html">Optimizaci칩n de un modelo para impresi칩n 3D usando el software Blender como ejemplo</a></li>
<li><a href="../es415575/index.html">Funciones para documentar bases de datos PostgreSQL. Primera parte</a></li>
<li><a href="../es415577/index.html">Diapositivas del curso "DBMS Technologies and Development"</a></li>
<li><a href="../es415581/index.html">International fintech - digest: 12 noticias sobre lo m치s importante en la industria</a></li>
<li><a href="../es415587/index.html">StereoPi: nuestra pieza de hardware para estudiar visi칩n artificial, drones y robots</a></li>
<li><a href="../es415589/index.html">"Un poco m치s sobre DP": las compa침칤as de televisi칩n estadounidenses dejar치n de vender geodatos de clientes</a></li>
<li><a href="../es415591/index.html">Apple Engineers Trap Trampa para teclado MacBook Pro</a></li>
<li><a href="../es415593/index.html">6 a침os despu칠s, una nueva versi칩n de la legendaria distribuci칩n de accidentes Hiren's BootCD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>