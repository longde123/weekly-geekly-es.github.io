<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游댷 游녢游 游뎽 RESS - Nueva arquitectura para aplicaciones m칩viles 游녿游낕 游붒 游내</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contrariamente al t칤tulo provocativo, esta no es una arquitectura nueva, sino un intento de traducir pr치cticas simples y probadas en el tiempo a Newsp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RESS - Nueva arquitectura para aplicaciones m칩viles</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424081/"><img src="https://habrastorage.org/webt/l5/ii/jr/l5iijromy0mesbjmvf1wqqn9bvc.png"><br><br><blockquote>  Contrariamente al t칤tulo provocativo, esta no es una arquitectura nueva, sino un intento de traducir pr치cticas simples y probadas en el tiempo a Newspeak, que es hablado por la comunidad moderna de Android </blockquote><h2>  Introduccion </h2><br>  Recientemente, se ha vuelto doloroso ver lo que est치 sucediendo en el mundo del desarrollo para plataformas m칩viles.  La astron치utica arquitect칩nica est치 en auge, cada hipster considera que es su deber crear una nueva arquitectura y resolver una tarea simple, en lugar de dos l칤neas, insertar varios marcos de moda. <br><br>  Estos sitios han completado tutoriales sobre marcos modernos y arquitecturas sofisticadas, pero ni siquiera existe una mejor pr치ctica para los clientes REST de Android.  Aunque este es uno de los casos de aplicaci칩n m치s frecuentes.  Quiero que el enfoque normal del desarrollo tambi칠n llegue a las masas.  Por lo tanto, estoy escribiendo este art칤culo <br><a name="habracut"></a><br><h2>  쯇or qu칠 las soluciones existentes son malas? </h2><br>  En general, el problema del nuevo MVP, VIPER y similares es exactamente el mismo, sus autores no saben c칩mo dise침ar.  Y sus seguidores, a칰n m치s.  Y por lo tanto no entienden cosas importantes y obvias.  Y se dedican a la <b>sobre ingenier칤a</b> convencional. <br><br><h4>  1. La arquitectura debe ser simple </h4><br>  Cuanto m치s simple, mejor.  Esto hace que sea m치s f치cil de entender, m치s confiable y m치s flexible.  Cualquier tonto puede volver a complicarse y hacer un mont칩n de abstracciones, pero para hacerlo simplemente, debe pensar cuidadosamente. <br><br><h4>  2. El exceso de ingenier칤a es malo </h4><br>  Debe agregar un nuevo nivel de abstracci칩n solo cuando el anterior no resuelva los problemas.  Despu칠s de agregar un nuevo nivel, el sistema deber칤a ser <i>m치s f치cil</i> de entender y <i>menos</i> c칩digo.  Si, por ejemplo, despu칠s de eso tuvo tres archivos en lugar de uno y el sistema se volvi칩 m치s complicado, cometi칩 un error y, de una manera simple, <i>escribi칩 basura</i> . <br><br>  Los fan치ticos de MVP, por ejemplo, en sus propios art칤culos escriben en texto plano que MVP est칰pidamente conduce a una <i>complicaci칩n</i> significativa <i>del</i> sistema.  Y lo justifican por el hecho de que es tan <i>flexible</i> y <i>m치s f치cil de mantener</i> .  Pero, como sabemos por el p치rrafo n칰mero 1, estas son cosas mutuamente excluyentes. <br><br>  Ahora sobre VIPER, solo mira, por ejemplo, el diagrama de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este</a> art칤culo. <br><br><div class="spoiler">  <b class="spoiler_title">Esquema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hq/zy/cf/hqzycfexvow0y3tvihtwgqllz-u.jpeg" alt="imagen"><br></div></div><br>  춰Y esto es para cada pantalla!  Me duelen los ojos.  Simpatizo especialmente con aquellos que en el trabajo tienen que lidiar con esto en contra de su voluntad.  Para aquellos que lo presentaron, simpatizo con razones <i>ligeramente diferentes</i> . <br><br><h2>  Nuevo enfoque </h2><br>  <i>Oye, tambi칠n quiero un nombre de moda</i> .  Por lo tanto, la arquitectura propuesta se llama <b>RESS</b> - <b>R</b> equest, <b>E</b> vent, <b>S</b> creen, <b>S</b> torage.  Las letras y los nombres se detallan tan est칰pidamente para obtener una palabra legible.  Bueno, para no crear confusi칩n con los nombres ya utilizados.  Bueno, con REST sintonizado. <br><br>  Inmediatamente haga una reserva, esta arquitectura es para clientes REST.  Para otros tipos de aplicaciones, probablemente no funcionar치. <br><br><img src="https://habrastorage.org/webt/ub/vd/jz/ubvdjz6pzobholewp2ecloxgski.png"><br><br><h3>  1. Almacenamiento </h3><br>  Data Warehouse (en otros t칠rminos Modelo, Repositorio).  Esta clase almacena datos y los procesa (guarda, carga, agrega a la base de datos, etc.), as칤 como todos los datos del servicio REST primero llegan aqu칤, analizados y almacenados aqu칤. <br><br><h3>  2. Pantalla </h3><br>  La pantalla de la aplicaci칩n, en el caso de Android, esta es su Actividad.  En otros t칠rminos, es un ViewController normal como el MVC de Apple. <br><br><h3>  3. Solicitud </h3><br>  La clase responsable de enviar solicitudes al servicio REST, as칤 como de recibir respuestas y notificar sobre la respuesta de otros componentes del sistema. <br><br><h3>  4. Evento </h3><br>  El enlace entre los otros componentes.  Por ejemplo, Solicitud env칤a un evento sobre la respuesta del servidor a quienes se suscriben.  Y Storage env칤a un evento sobre cambios de datos. <br><br>  El siguiente es un ejemplo de una implementaci칩n simplificada.  El c칩digo se escribi칩 con supuestos y no se verific칩, por lo que puede haber errores de sintaxis y errores tipogr치ficos. <br><br><div class="spoiler">  <b class="spoiler_title">Solicitud</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Request</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String methodName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.methodName = methodName; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String methodName; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Void ... params)</span></span></span><span class="hljs-function"> </span></span>{ URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(Request.serverUrl + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + methodName); HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection(); <span class="hljs-comment"><span class="hljs-comment">// ... //      // ... return result; } @Override protected void onPostExecute(String result) { // ... //  JSON  result // ... Requestr.onHandleAnswer(methodName, json); } } private static String serverUrl = "myserver.com"; private static List&lt;OnCompleteListener&gt; listeners = new ArrayList&lt;&gt;(); private static void onHandleAnswer(String methodName, Json json) { for(RequestListener listener : listeners) { if(methodName.equals("api/method1")) listener.onApiMethod1(json); else if(methodName.equals("api/method2")) listener.onApiMethod2(json); } } private static void makeRequest(String methodName) { new RequestTask(methodName).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); } public static void registerListener(RequestListener listener) { listeners.add(listener); } public static void unregisterListener(RequestListener listener) { listeners.remove(listener); } public static void apiMethod1() { makeRequest("api/method1"); } public static void onApiMethod2() { makeRequest("api/method2"); } }</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Almacenamiento</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData1Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData2Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MyObject1 myObject1 = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;MyObject2&gt; myObjects2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.add(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unregisterListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.remove(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObject1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObject1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;MyObject2&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObjects2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObjects2; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Request.RequestListener listener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request.RequestListener() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T fromJson&lt;T&gt;(Json answer) { <span class="hljs-comment"><span class="hljs-comment">// ... //    JSON // ... return objectT; } @Override public void onApiMethod1(Json answer) { myObject1 = fromJson(answer); for(RequestListener listener : listeners) listener.data1Changed(); } @Override public void onApiMethod2(Json answer) { myObject2 = fromJson(myObjects2); for(RequestListener listener : listeners) listener.data2Changed(); } }; }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Pantalla</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button2; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); button1.setOnClickListener((View) -&gt; { Request.apiMethod1(); }); button2.setOnClickListener((View) -&gt; { Request.apiMethod2(); }); updateViews(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onPause(); DataStorage.unregisterListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onResume(); DataStorage.registerListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); updateViews(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ updateView1(); updateView2(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateView1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Object1 data = DataStorage.getObject1(); <span class="hljs-comment"><span class="hljs-comment">// ... //     // ... } private void updateView2() { List&lt;Object2&gt; data = DataStorage.getObjects2(); // ... //     // ... } @Override public void onData1Changed() { updateView1(); } @Override public void onData2Changed() { updateView2(); } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">La aplicaci칩n</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(); Request.registerListener(DataStorage.listener); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">El mismo shemka, pero en t칠rminos de RESS, para entender</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4o/g-/rz/4og-rzew3vn1ggqdykmdxgzsnx0.png"><br></div></div><br>  Funciona as칤: cuando hace clic en el bot칩n, el m칠todo deseado para Solicitar se contrae, Solicitud env칤a una solicitud al servidor, procesa la respuesta y notifica a DataStorage primero.  DataStorage analiza la respuesta y almacena en cach칠 los datos en casa.  La solicitud luego notifica a la pantalla actualmente activa, la pantalla toma datos del almacenamiento de datos y actualiza la interfaz de usuario. <br><br>  Pantalla de signos y cancelaciones de mediocridad en onResume y onPause, respectivamente.  Tambi칠n actualiza la IU adem치s de onResume.  Que da  Las notificaciones solo aparecen en la Actividad activa actual, no hay problemas para procesar la solicitud en segundo plano o para activar la Actividad.  La actividad siempre estar치 actualizada.  La notificaci칩n no alcanzar치 la actividad en segundo plano y, cuando regrese al estado activo, los datos se tomar치n del Almacenamiento de datos.  Como resultado, no hay problemas cuando gira la pantalla y recrea la Actividad. <br><br>  Y para todo esto, la API predeterminada del SDK de Android es suficiente. <br><br><h2>  Preguntas y respuestas para futuras cr칤ticas </h2><br><h4>  1. 쮺u치l es el beneficio? </h4><br>  Simplicidad real, flexibilidad, mantenibilidad, escalabilidad y un m칤nimo de dependencias.  Siempre puede complicar una determinada parte del sistema si es necesario.  쮻emasiados datos?  Rompe suavemente el DataStorage en varios.  Enorme servicio REST API?  Haga algunas solicitudes.  쯃istear es demasiado simple, inc칩modo y pasado de moda?  Toma el EventBus.  쮹uscas de reojo en una barber칤a en HttpConnection?  Bueno, toma Retrofit.  쮸ctividad audaz con un mont칩n de fragmentos?  Solo considere que cada fragmento es Pantalla, o div칤dalo en subclases. <br><br><h4>  2. AsyncTask es un mal hombre, 춰toma al menos Retrofit! </h4><br>  쮼h?  쯏 qu칠 problemas causa en este c칩digo?  쮽ugas de memoria?  No, aqu칤 AsyncTask no almacena enlaces a activaciones, sino solo un enlace a un m칠todo est치tico.  La respuesta est치 perdida?  No, la respuesta siempre llega al DataStorage est치tico hasta que se cierra la aplicaci칩n.  쯀ntentando actualizar la actividad en pausa?  No, las notificaciones solo vienen en Actividad activa. <br><br>  쯏 c칩mo puede ayudar Retrofit aqu칤?  Solo mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu칤</a> .  El autor tom칩 RxJava, Retrofit y todav칤a esculpe muletas para resolver un problema que RESS simplemente no tiene. <br><br><h4>  3. 춰La pantalla es el mismo ViewController!  Necesito separar la l칩gica y la presentaci칩n, arrr! </h4><br>  Suelta este mantra ya.  Un cliente t칤pico para un servicio REST es una gran vista para el lado del servidor.  Toda su l칩gica empresarial es establecer el estado correcto para un bot칩n o campo de texto.  쯈u칠 vas a compartir all칤?  쮻ecir que ser치 m치s f치cil de mantener?  쯄antener 3 archivos con 3 toneladas de c칩digo, en lugar de 1 archivo con 1 tonelada m치s f치cil?  Ok  쯏 si tenemos actividad con 5 fragmentos?  Esto ya es 3 x (5 + 1) = 18 archivos. <br><br>  La separaci칩n en Controlador y Vista en tales casos simplemente produce un mont칩n de c칩digo sin sentido, es hora de admitirlo.  Agregar funcionalidad a un proyecto con MVP es especialmente divertido: 쯗esea agregar un controlador de botones?  Ok, arregle Presentador, Actividad y Ver-interfaz.  En RESS, para esto escribir칠 un par de l칤neas de c칩digo en un solo archivo. <br><br>  쯇ero en grandes proyectos ViewController crece terriblemente?  Entonces no has visto grandes proyectos.  Su cliente REST para el pr칩ximo sitio con 5 mil l칤neas es un proyecto peque침o, y 5 mil l칤neas all칤 solo porque hay 5 clases en cada pantalla.  Proyectos realmente grandes en RESS con m치s de 100 pantallas y varios equipos de 10 personas se sienten geniales.  Solo haga algunas Solicitudes y Almacenamiento.  Y Pantalla para pantallas en negrita contiene Pantalla adicional para elementos de IU grandes, por ejemplo, los mismos fragmentos.  Un proyecto en un MVP de la misma escala simplemente se ahogar치 en un grupo de presentadores, interfaces, activaciones, fragmentos y conexiones no evidentes.  Y la transici칩n a VIPER generalmente har치 que todo el equipo renuncie un d칤a. <br><br><h2>  Conclusi칩n </h2><br>  Espero que este art칤culo anime a muchos desarrolladores a reconsiderar sus puntos de vista sobre la arquitectura, no a producir abstracciones y buscar soluciones m치s simples y probadas con el tiempo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424081/">https://habr.com/ru/post/es424081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424065/index.html">Firefox instala extensiones en sus dispositivos para recopilar datos sin su conocimiento ... nuevamente</a></li>
<li><a href="../es424069/index.html">iFixit: iPhone XS y XS Max: copias casi exactas de iPhone X con capacidad de mantenimiento 6 de 10</a></li>
<li><a href="../es424071/index.html">Teor칤a de la felicidad. Termodin치mica de la desigualdad de clase.</a></li>
<li><a href="../es424073/index.html">Ejecuci칩n remota de c칩digo en Microsoft JET Database Engine</a></li>
<li><a href="../es424077/index.html">Francia exige que el "derecho al olvido" sea global: lo que puede afectar</a></li>
<li><a href="../es424083/index.html">Un servicio para comerciar en el intercambio Robinhood fue acusado de vender datos sobre aplicaciones de usuarios a operadores de alta frecuencia</a></li>
<li><a href="../es424085/index.html">Estamos desarrollando el m칩dulo procesador NIOS II para IDA Pro</a></li>
<li><a href="../es424087/index.html">Dispositivo Android controlado por Arduino controlado por Bluetooth - ciclo completo (parte 1)</a></li>
<li><a href="../es424089/index.html">Las conferencias son malvadas. O bien?</a></li>
<li><a href="../es424091/index.html">WiX.Py: recopilamos el paquete MSI "en tres l칤neas"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>