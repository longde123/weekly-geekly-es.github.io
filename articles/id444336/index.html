<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’†ğŸ¿ ğŸ¦Š ğŸ‘¦ğŸ» Daftar tangkapan cepat: apa perbedaan antara tautan yang lemah, kuat dan tidak dimiliki? â—½ï¸ ğŸ˜‚ ğŸ›·</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Joseph Wright, The Prisoner - Ilustrasi dari Penangkapan yang Kuat 

 Daftar nilai "yang ditangkap" ada di depan daftar parameter penutupan dan dapat ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Daftar tangkapan cepat: apa perbedaan antara tautan yang lemah, kuat dan tidak dimiliki?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444336/"><img src="https://habrastorage.org/webt/ol/xa/zo/olxazojaea9ikajugulkcm6c-24.jpeg"><br>  <i>Joseph Wright, The Prisoner</i> - Ilustrasi dari Penangkapan yang Kuat <br><br>  Daftar nilai "yang ditangkap" ada di depan daftar parameter penutupan dan dapat "menangkap" nilai dari cakupan dengan tiga cara berbeda: menggunakan tautan "kuat", "lemah" atau "tidak dimiliki".  Kita sering menggunakannya, terutama untuk menghindari siklus referensi yang kuat ("siklus referensi kuat" alias "mempertahankan siklus"). <br>  Mungkin sulit bagi pengembang pemula untuk memutuskan metode mana yang akan digunakan, sehingga Anda dapat menghabiskan banyak waktu untuk memilih antara "kuat" dan "lemah" atau antara "lemah" dan "tidak dimiliki", tetapi seiring waktu, Anda akan menyadari bahwa pilihan yang tepat - hanya satu. <br><a name="habracut"></a><br>  Pertama, buat kelas sederhana: <br><br><pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playSong</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Shake it off!"</span></span>) } }</code> </pre> <br>  Kemudian kami menulis fungsi yang membuat instance dari kelas <b>Singer</b> dan mengembalikan penutupan yang memanggil metode <b>playSong ()</b> dari kelas <b>Singer</b> : <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; () -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> taylor = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singing = { taylor.playSong() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singing }</code> </pre> <br>  Akhirnya, kita dapat memanggil <b>sing () di</b> mana saja untuk mendapatkan hasil <b>bermain playSong ()</b> <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singFunction = sing() singFunction()</code> </pre> <br><br>  Akibatnya, baris "Shake it off!" Akan ditampilkan. <br><br><h2>  Penangkapan yang kuat </h2><br>  Kecuali Anda secara eksplisit menentukan metode penangkapan, Swift menggunakan tangkapan "kuat".  Ini berarti bahwa penutupan menangkap nilai-nilai eksternal yang digunakan dan tidak akan pernah membebaskannya. <br><br>  Mari kita lihat kembali fungsi <b>sing ()</b> <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; () -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> taylor = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singing = { taylor.playSong() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singing }</code> </pre> <br>  <b>Konstanta taylor</b> didefinisikan di dalam suatu fungsi, jadi dalam keadaan normal, tempatnya akan dibebaskan setelah fungsi tersebut selesai bekerja.  Namun, konstanta ini digunakan di dalam penutupan, yang berarti bahwa Swift akan secara otomatis memastikan keberadaannya selama penutupan itu sendiri ada, bahkan setelah fungsi berakhir. <br>  Ini adalah penangkapan "kuat" dalam aksi.  Jika Swift mengizinkan <b>taylor untuk</b> dibebaskan, maka memanggil penutupan akan menjadi tidak aman - metode <b>taylor.playSong ()</b> tidak lagi valid. <br><br><h2>  Tangkapan "Lemah" (penangkapan lemah) </h2><br>  Swift memungkinkan kita membuat " <u>daftar tangkap</u> " untuk menentukan bagaimana nilai yang digunakan ditangkap.  Alternatif penangkapan "kuat" adalah "lemah" dan penerapannya menyebabkan konsekuensi berikut: <br><br>  1. Nilai-nilai yang ditangkap "Lemah" tidak dipegang oleh penutupan dan dengan demikian nilai-nilai itu dapat dilepaskan dan ditetapkan ke <b>nol</b> . <br><br>  2. Sebagai konsekuensi dari paragraf pertama, nilai yang ditangkap dengan "lemah" di Swift selalu <b>opsional</b> . <br>  Kami memodifikasi contoh kami menggunakan tangkapan "lemah" dan segera melihat perbedaannya. <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; () -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> taylor = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singing = { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> taylor] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> taylor?.playSong() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singing }</code> </pre> <br>  <b>[lemah taylor]</b> - ini adalah " <u>daftar tangkap</u> " kami, bagian khusus dari sintaksis penutupan di mana kami memberikan instruksi tentang bagaimana nilai harus ditangkap.  Di sini kita mengatakan bahwa <b>taylor</b> harus ditangkap "dengan lemah", jadi kita perlu menggunakan <b>taylor? .PlaySong ()</b> - sekarang ini <b>opsional</b> , karena dapat disetel ke <b>nol</b> kapan saja. <br><br>  Jika sekarang Anda menjalankan kode ini, Anda akan melihat bahwa memanggil <b>singFunction ()</b> tidak lagi menghasilkan pesan.  Alasan untuk ini adalah bahwa <b>taylor</b> hanya ada di dalam <b>sing ()</b> , dan penutupan yang dikembalikan oleh fungsi ini tidak menahan <b>taylor</b> "sangat" di dalam dirinya sendiri. <br><br>  Sekarang coba ubah <b>taylor? .PlaySong ()</b> ke <b>taylor! .PlaySong ()</b> .  Ini akan menyebabkan pembongkaran paksa <b>taylor</b> di dalam penutupan, dan, karenanya, terjadi kesalahan fatal (membongkar isi yang mengandung <b>nihil</b> ) <br><br><h2>  Tangkapan "Tanpa pemilik" (penangkapan tidak dimiliki) </h2><br>  Alternatif penangkapan "lemah" adalah "tanpa pemilik". <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; () -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> taylor = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singing = { [<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> taylor] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> taylor.playSong() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singing }</code> </pre> <br>  Kode ini akan berakhir secara abnormal dengan cara yang sama dengan opsi opsional yang ditampilkan di atas - <b>taylor yang</b> tidak dikenal mengatakan: "Saya tahu pasti bahwa <b>taylor</b> akan ada selama durasi penutupan, jadi saya tidak perlu menyimpannya di memori."  Bahkan, <b>taylor</b> akan segera dirilis dan kode ini akan mogok. <br><br>  Jadi gunakan yang <b>tidak dimiliki</b> dengan sangat hati-hati. <br><br><h2>  Masalah umum </h2><br>  Ada empat masalah yang dihadapi pengembang saat menggunakan penangkapan nilai dalam penutupan: <br><br><h3>  1. Kesulitan dengan lokasi daftar tangkap dalam kasus ketika penutupan mengambil parameter </h3><br>  Ini adalah masalah umum yang mungkin Anda temui pada awal studi penutupan, tetapi, untungnya, Swift akan membantu kami dalam kasus ini. <br><br>  Saat menggunakan daftar tangkap dan parameter penutupan bersama-sama, daftar tangkap datang dalam tanda kurung siku, lalu parameter penutupan, lalu dalam kata kunci, menandai awal â€œbadanâ€ penutupan. <br><br><pre> <code class="swift hljs">writeToLog { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] user, message <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.addToLog(<span class="hljs-string"><span class="hljs-string">"\(user) triggered event: \(message)"</span></span>) }</code> </pre> <br>  Mencoba memasukkan daftar tangkap setelah parameter penutupan akan menghasilkan kesalahan kompilasi. <br><br><h3>  2. Munculnya siklus tautan yang kuat, yang mengarah ke kebocoran memori </h3><br>  Ketika entitas A memiliki entitas B, dan sebaliknya, Anda memiliki situasi yang disebut "mempertahankan siklus". <br><br>  Sebagai contoh, perhatikan kodenya: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">House</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ownerDetails: (() -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)? <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printDetails</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"This is a great house."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">deinit</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"I'm being demolished!"</span></span>) } }</code> </pre> <br>  Kami mendefinisikan kelas <b>House</b> , yang berisi satu properti (penutupan), satu metode, dan de-initializer yang akan menampilkan pesan ketika instance kelas dihancurkan. <br><br>  Sekarang buat kelas <b>Pemilik</b> mirip dengan yang sebelumnya, kecuali bahwa properti penutupannya berisi informasi tentang rumah. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Owner</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> houseDetails: (() -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)? <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printDetails</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"I own a house."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">deinit</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"I'm dying!"</span></span>) } }</code> </pre> <br>  Sekarang buat instance dari kelas-kelas ini di dalam blok <b>do</b> .  Kami tidak membutuhkan blok penangkap, tetapi menggunakan blok <b>do</b> akan menghancurkan instances setelah} <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Creating a house and an owner"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> house = <span class="hljs-type"><span class="hljs-type">House</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> owner = <span class="hljs-type"><span class="hljs-type">Owner</span></span>() } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Done"</span></span>)</code> </pre> <br>  Akibatnya, pesan akan ditampilkan: "Membuat rumah dan pemilik", "Aku sekarat!", "Aku sedang dihancurkan!", Lalu "Selesai" - semuanya berfungsi sebagaimana mestinya. <br><br>  Sekarang buat satu loop tautan yang kuat. <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Creating a house and an owner"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> house = <span class="hljs-type"><span class="hljs-type">House</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> owner = <span class="hljs-type"><span class="hljs-type">Owner</span></span>() house.ownerDetails = owner.printDetails owner.houseDetails = house.printDetails } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Done"</span></span>)</code> </pre> <br>  Sekarang pesan "Membuat rumah dan pemilik" akan muncul, lalu "Selesai".  Deinitializers tidak akan dipanggil. <br><br>  Ini terjadi sebagai akibat dari kenyataan bahwa rumah memiliki properti yang menunjuk ke pemilik, dan pemilik memiliki properti yang menunjukkan rumah.  Oleh karena itu, tidak ada dari mereka yang dapat dilepaskan dengan aman.  Dalam situasi nyata, ini menyebabkan kebocoran memori, yang menyebabkan kinerja buruk dan bahkan crash aplikasi. <br><br>  Untuk memperbaiki situasi, kita perlu membuat penutupan baru dan menggunakan tangkapan "lemah" dalam satu atau dua kasus, seperti ini: <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Creating a house and an owner"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> house = <span class="hljs-type"><span class="hljs-type">House</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> owner = <span class="hljs-type"><span class="hljs-type">Owner</span></span>() house.ownerDetails = { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> owner] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> owner?.printDetails() } owner.houseDetails = { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> house] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> house?.printDetails() } } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Done"</span></span>)</code> </pre> <br>  Tidak perlu mendeklarasikan kedua nilai yang ditangkap, itu cukup untuk melakukannya di satu tempat - ini akan memungkinkan Swift untuk menghancurkan kedua kelas jika perlu. <br><br>  Dalam proyek-proyek nyata, situasi siklus yang sangat jelas dari tautan yang kuat seperti itu jarang muncul, tetapi ini lebih berbicara tentang pentingnya menggunakan tangkapan "lemah" dengan pengembangan yang kompeten. <br><br><h3>  3. Penggunaan tautan yang kuat secara tidak sengaja, biasanya saat mengambil beberapa nilai </h3><br>  Swift menggunakan pegangan yang kuat secara default, yang dapat menyebabkan perilaku yang tidak terduga. <br>  Pertimbangkan kode berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; () -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> taylor = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> adele = <span class="hljs-type"><span class="hljs-type">Singer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> singing = { [<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> taylor, adele] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> taylor.playSong() adele.playSong() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singing }</code> </pre> <br>  Sekarang kami memiliki dua nilai yang ditangkap oleh penutupan, dan kami menggunakan keduanya dengan cara yang sama.  Namun, hanya <b>taylor yang</b> ditangkap sebagai tidak dimiliki - <b>adele</b> ditangkap dengan kuat karena kata kunci yang <b>tidak dimiliki</b> harus digunakan untuk setiap nilai yang diambil. <br><br>  Jika Anda melakukan ini dengan sengaja, maka semuanya baik-baik saja, tetapi jika Anda ingin kedua nilai ditangkap " <b>tidak dimiliki</b> ", Anda perlu yang berikut ini: <br><br><pre> <code class="swift hljs">[<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> taylor, <span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> adele]</code> </pre> <br><h3>  4. Salin penutupan dan bagikan nilai yang diambil </h3><br>  Kasus terakhir yang ditemukan oleh pengembang adalah bagaimana kesalahan disalin karena data yang mereka ambil tersedia untuk semua salinan kesalahan. <br>  Pertimbangkan contoh penutupan sederhana yang menangkap bilangan variabel <b>integerOfLinesLogged yang</b> dideklarasikan di luar penutupan, sehingga kami dapat meningkatkan nilainya dan mencetaknya setiap kali penutupan dipanggil: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numberOfLinesLogged = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logger1 = { numberOfLinesLogged += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Lines logged: \(numberOfLinesLogged)"</span></span>) } logger1()</code> </pre> <br>  Ini akan menampilkan pesan "Baris yang dicatat: 1". <br>  Sekarang kita akan membuat salinan penutupan yang akan membagikan nilai yang ditangkap bersama dengan penutupan pertama.  Jadi, jika kita menyebut penutupan asli atau salinannya, kita akan melihat nilai variabel yang tumbuh. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logger2 = logger1 logger2() logger1() logger2()</code> </pre><br>  Ini akan mencetak pesan â€œBaris yang dicatat: 1â€ ... â€œBaris yang dicatat: 4" karena <b>logger1</b> dan <b>logger2</b> menunjuk ke variabel <b>numberOfLinesLogged yang</b> ditangkap. <br><br><h2>  Kapan menggunakan tangkapan "kuat", "lemah" dan "tidak memiliki pemilik" </h2><br>  Sekarang kita mengerti bagaimana semuanya bekerja, mari kita coba meringkas: <br><br>  1. Jika Anda yakin bahwa nilai yang ditangkap tidak akan pernah menjadi <b>nol</b> saat melakukan penutupan, Anda dapat menggunakan <b>"pengambilan yang tidak dimiliki"</b> .  Ini adalah situasi yang jarang terjadi di mana menggunakan tangkapan "lemah" dapat menyebabkan kesulitan tambahan, bahkan ketika menggunakan pelindung membiarkan nilai yang ditangkap secara lemah di dalam penutupan. <br><br>  2. Jika Anda memiliki kasus siklus tautan yang kuat (entitas A memiliki entitas B, dan entitas B memiliki entitas A), maka dalam salah satu kasus Anda perlu menggunakan <b>"penangkap lemah"</b> .  Adalah perlu untuk mempertimbangkan yang mana dari dua entitas yang akan dibebaskan terlebih dahulu, jadi jika view controller A mewakili view controller B, maka view controller B dapat berisi tautan "lemah" kembali ke "A". <br><br>  3. Jika kemungkinan siklus tautan kuat dikecualikan, Anda dapat menggunakan tangkapan <b>"kuat"</b> ( <b>"</b> tangkapan <b>kuat"</b> ).  Misalnya, menjalankan animasi tidak memblokir diri di dalam penutup yang berisi animasi, sehingga Anda dapat menggunakan ikatan yang kuat. <br><br>  4. Jika Anda tidak yakin, mulailah dengan ikatan "lemah" dan ubah hanya jika perlu. <br><br>  Opsional - Panduan Swift Resmi: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sirkuit pendek</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penghitungan tautan otomatis</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444336/">https://habr.com/ru/post/id444336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444324/index.html">Mengikuti Jejak Kalkulator: SpeedCrunch</a></li>
<li><a href="../id444326/index.html">Pemantauan SMS dari berat tiga sarang untuk $ 30</a></li>
<li><a href="../id444328/index.html">Redesign UI sering buang-buang waktu</a></li>
<li><a href="../id444330/index.html">Serverless CMS akhirnya merupakan pesaing yang layak untuk Wordpress</a></li>
<li><a href="../id444332/index.html">Keamanan dan katering informasi: bagaimana manajer berpikir tentang produk TI</a></li>
<li><a href="../id444338/index.html">Enkapsulasi dalam Python 3</a></li>
<li><a href="../id444340/index.html">Fitur menggunakan tipe data Simbol dalam JavaScript</a></li>
<li><a href="../id444342/index.html">Mengembangkan aplikasi JavaScript sederhana dan modern menggunakan Webpack dan teknologi web canggih</a></li>
<li><a href="../id444344/index.html">10 langkah untuk proyek Python yang sukses</a></li>
<li><a href="../id444346/index.html">GraphQL dan Golang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>