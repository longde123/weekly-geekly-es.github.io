<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÅ üìì üö∞ Comment nous avons fabriqu√© un enregistreur vid√©o cloud de petite taille √† partir d'une cam√©ra IP standard üë®‚Äçüé§ üßëüèº üì≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le sujet de la vid√©osurveillance est devenu aigu pour moi avec l'av√®nement du logement suburbain. Sur Internet, vous trouverez de nombreuses informati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons fabriqu√© un enregistreur vid√©o cloud de petite taille √† partir d'une cam√©ra IP standard</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422797/"><img src="https://habrastorage.org/webt/s6/vk/u6/s6vku6wsk6xv28mxzagkcil4ddy.jpeg"><br><br>  Le sujet de la vid√©osurveillance est devenu aigu pour moi avec l'av√®nement du logement suburbain.  Sur Internet, vous trouverez de nombreuses informations sur l'organisation de la vid√©osurveillance.  Malheureusement, la plupart des options se r√©sumaient √† l'achat de kits pr√™ts √† l'emploi en Chine.  Des amis ont entendu beaucoup de critiques √† cet √©gard.  D'une mani√®re ou d'une autre, il a m√™me lui-m√™me particip√© √† la mise en place du mat√©riel achet√© chez Aliexpress.  Quelque part la moiti√© des fonctions d√©clar√©es ne fonctionnaient pas comme indiqu√©, certaines des options ne fonctionnaient pas du tout, bien que le bureau d'enregistrement ne soit pas bon march√©.  Et il y avait beaucoup de telles critiques et opinions.  En outre, beaucoup critiquent le fait que les vid√©os soient stock√©es sur des services cloud chinois.  Et puis la pens√©e est venue - et si vous essayez de cr√©er votre propre DVR avec un minimum de fonctionnalit√©s?  Quoi?  √Ä ce moment, j'ai commenc√© √† m'impliquer dans Linux, √† √©crire des applications avec des fonctionnalit√©s √©l√©mentaires sur bash, √† exp√©rimenter le web ... En principe, tout ce dont vous avez besoin pour r√©soudre le probl√®me.  Aussit√¥t dit, aussit√¥t fait. <br><a name="habracut"></a><br><h2>  Allons-y.  S√©lection de fer </h2><br>  Un routeur TP-LINK TL-MR3020 populaire avec OPENWRT √† bord a √©t√© choisi comme sujet de test. <br><br><img src="https://habrastorage.org/webt/kq/at/vp/kqatvporczm8e1ksiicnm0jq_7e.png"><br><br>  Caract√©ristiques du routeur: <br><br><ul><li>  Processeur 300 MHz MIPS; <br></li><li>  32 Mo de RAM; <br></li><li>  puce flash pour 4 Mo; <br></li><li>  Port USB 2.0; <br></li><li>  Port RJ-45 avec 100 Mb full duplex; <br></li><li>  Broches GPIO, √† la fois libres et avec LED; <br></li><li>  Bouton et interrupteur sur les broches GPIO; <br></li></ul><br>  La cam√©ra est une cam√©ra IP HD chinoise ordinaire command√©e en Chine.  Nous prenons une vid√©o sur le protocole RTSP.  L'utilitaire openRTSP nous a aid√© avec cela, qui faisait partie du r√©f√©rentiel OPENWRT et avait toutes les fonctionnalit√©s n√©cessaires.  Nous avons d√©cid√© de travailler avec le service cloud Yandex.Disk via le protocole webdav.  Ce service fournit 10 Go d'espace disque libre √† chaque nouvel utilisateur.  Eh bien, l√†, vous pouvez acheter au besoin. <br><br><h2>  Essence de l'id√©e </h2><br>  En utilisant le protocole rtsp, nous prenons le flux vid√©o de la cam√©ra IP.  Nous cr√©ons un r√©pertoire tampon.  Nous y enregistrons des vid√©os.  En utilisant l'utilitaire CURL via le protocole webdav, nous envoyons des vid√©os sur le cloud.  Dans notre cas, il s'agit de Yandex.Disk. <br><br><h2>  Essayez </h2><br>  Apr√®s avoir connect√© la cam√©ra IP via Ethernet au routeur, nous avons lanc√© un test d'enregistrement d'un clip de 10 secondes au format .mp4 sur le disque Yandex: <br><br><pre><code class="bash hljs">OPENRTSP -V -B 51200 -b 200000 -4 -f 25 -d 10&gt;/tmp/ya_disk/test.mp4</code> </pre> <br>  Ensuite, ils l'ont envoy√© dans le cloud: <br><br><pre> <code class="bash hljs">curl -v -m 180 --stderr /tmp/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -k -u <span class="hljs-variable"><span class="hljs-variable">$email</span></span>:<span class="hljs-variable"><span class="hljs-variable">$pass</span></span> -T /tmp/ya_disk/test.mp4 https://webdav.yandex.ru/</code> </pre> <br><h2>  √áa marche! </h2><br>  Les tests ont commenc√© avec diff√©rentes longueurs de clips, diff√©rents intervalles d'enregistrement, un enregistrement p√©riodique.  En g√©n√©ral, les tests ont r√©ussi.  Cependant, il y avait un probl√®me avec l'enregistrement de clips tr√®s courts (de l'ordre de 5 secondes).  Les clips ont √©t√© enregistr√©s √† une vitesse plus √©lev√©e et leur dur√©e √©tait inf√©rieure √† l'ensemble.  Ils ont r√©solu le probl√®me en √©ditant les sources openRTSP: ils ont veill√© √† ce que le programme respecte strictement la valeur fps entr√©e par l'utilisateur, et non prise √† partir de SDP, a √©galement supprim√© des trames de moins de 100 octets. <br><br><h2>  Nous pensons √† la fonctionnalit√© </h2><br>  Apr√®s des tests r√©ussis, il a √©t√© d√©cid√© de r√©aliser une interface de contr√¥le.  √Ä cette √©poque, je commen√ßais √† me familiariser avec le Web, alors j'ai d√©cid√© de faire une version Web.  Pile technologique c√¥t√© utilisateur (frontend): HTML5, CSS3, JQUERY, AJAX.  C√¥t√© fer (backend): UHTTPD, CGI, BASH.  Ils ne sont pas devenus intelligents avec la conception, ils ont utilis√© la disposition en mosa√Øque des boutons de la page principale. <br><br><img src="https://habrastorage.org/webt/qe/xd/vr/qexdvryzlpxmdrojtosh4rsxrwc.jpeg" alt="Accueil de l'application"><br><br>  Les pages de gestion et de saisie des donn√©es ont √©t√© cr√©√©es √† l'aide de JQUERY.  Avec les premiers r√©sultats positifs de la gestion d'un <s>routeur de bureau d'</s> enregistrement, nous avons commenc√© √† ajouter des fonctionnalit√©s.  C'√©tait peut-√™tre une erreur.  En raison de l'inexp√©rience, nous avons n√©glig√© les tests.  Maintenant, quand il y a beaucoup de fonctionnalit√©s, c'est difficile √† tester.  En raison du manque de discipline dans l'√©criture de code au d√©but du d√©veloppement, il devient de plus en plus difficile de comprendre ce qui est √©crit.  Des √©checs apparaissent de temps en temps, nous les √©liminons bien s√ªr, mais il serait beaucoup plus facile de le faire √† des stades de d√©veloppement ant√©rieurs et par √©tapes. <br><br>  Ainsi, la fonctionnalit√©: <br><br><ul><li>  Prise en charge de toute cam√©ra IP; <br></li><li>  Prise en charge des modems 3G / 4G; <br></li><li>  Enregistrez sur le stockage cloud (gratuit) et / ou sur un lecteur USB; <br></li><li>  Enregistrement p√©riodique et / ou enregistrement de mouvement; <br></li><li>  Boucle sur disque; <br></li><li>  R√©glage de la longueur du rouleau; <br></li><li>  Modes d'enregistrement: par heure, par mouvement, jour, nuit; <br></li><li>  Travail autonome en cas de panne de courant (environ 20 min); <br></li></ul><br><h2>  Impl√©mentation c√¥t√© client </h2><br>  Dans le menu des param√®tres de l'enregistreur, il y a 6 boutons: WIFI, ENREGISTREMENT, APPAREIL PHOTO, 3G / 4G, STOCKAGE et AIDE.  Donc, dans l'ordre: <br><br><h4>  WIFI </h4><br><img src="https://habrastorage.org/webt/ql/xz/us/qlxzusdqgobrodb5sjuz2dyr8_e.jpeg"><br><br>  Ici, vous pouvez configurer l'enregistreur Wi-Fi.  Le WI-FI peut fonctionner en 2 modes - ¬´client¬ª et ¬´point d'acc√®s¬ª.  En mode "Point d'acc√®s", tout est clair: num√©ro de canal, SSID, type de cryptage, mot de passe.  En mode "client", le bureau d'enregistrement est connect√© √† n'importe quel point d'acc√®s wi-fi. <br><br>  Par cons√©quent, dans ce mode, un modem 3G / 4G n'est pas n√©cessaire.  Afin que l'utilisateur ne perde pas le registraire lors de la connexion du client au point d'acc√®s, nous avons impl√©ment√© physiquement le mode r√©p√©teur. <br><br>  La seule chose √† laquelle vous devez faire attention est que lorsque vous connectez le bureau d'enregistrement au point d'acc√®s, vous devez v√©rifier si l'appareil mobile de l'utilisateur a ¬´saut√©¬ª vers un autre point d'acc√®s wi-fi, car  Le point d'acc√®s du registraire Wi-Fi dispara√Ætra pendant un court instant.  Le champ ¬´Mode de r√©cup√©ration¬ª est une garantie que vous ne ¬´perdrez¬ª pas le bureau d'enregistrement.  Il s'agit d'une heure garantie lorsque vous l'allumez, lorsque l'utilisateur peut configurer l'appareil ou allumer le point d'acc√®s.  Apr√®s le mode de r√©cup√©ration, il ira automatiquement √† la page du menu principal.  Cette partie de la fonctionnalit√© est toujours en cours de test et temporairement d√©sactiv√©e. <br><br><h4>  ENREGISTREMENT </h4><br><img src="https://habrastorage.org/webt/ed/yt/a_/edyta_ndlmoiwbzz2h_l0vovi1i.jpeg"><br><br>  Champ d'indication de la date et de l'heure, menu ¬´Set time¬ª, ¬´Record in local storage¬ª et ¬´Record in cloud storage¬ª. <br><br>  <u>R√©glage de l'heure.</u>  En cliquant sur le bouton ¬´Changer l'heure¬ª, vous pouvez changer l'heure et la date.  De plus, √† l'aide du curseur, l'heure du d√©but et de la fin de la journ√©e est d√©finie (pour tout le monde, elle est individuelle).  Ceci est fait afin d'optimiser les modes de fonctionnement du registraire √† diff√©rents moments de la journ√©e. <br>  <u>√âcrivez dans le stockage local.</u>  Ici, vous pouvez activer ou d√©sactiver l'enregistrement sur un support externe, activer ou d√©sactiver l'enregistrement par mouvement et / ou l'enregistrement p√©riodique avec la possibilit√© de d√©finir la dur√©e du clip enregistr√© et la p√©riode d'enregistrement des clips (en mode d'enregistrement p√©riodique). <br>  <u>√âcrivez dans le stockage cloud.</u>  Ici, comme dans le paragraphe pr√©c√©dent, l'enregistrement dans le stockage cloud est configur√©.  Un √©l√©ment a √©t√© ajout√© pour configurer un service cloud, o√π vous pouvez sp√©cifier sur quel cloud de service enregistrer (pour le moment, cela ne fonctionne qu'avec un disque Yandex), le nom d'utilisateur et le mot de passe de votre compte Yandex. <br><br><h4>  AIDE </h4><br><img src="https://habrastorage.org/webt/bo/su/nr/bosunrz6knsyt0os8oaciji7bp4.jpeg"><br><br>  Le contenu des √©l√©ments de menu de l'interface, ainsi que l'objectif de chacun d'entre eux, sont d√©crits par des points. <br><br><h4>  CAMERA </h4><br><img src="https://habrastorage.org/webt/gp/ct/vd/gpctvdkx2nnr94fu2otbenwky1g.jpeg"><br><br>  <u>Adresse de flux RTSP de la cam√©ra.</u>  Les donn√©es de ce champ peuvent √™tre trouv√©es en visitant la page des param√®tres de la cam√©ra IP.  √Ä l'avenir, nous pr√©voyons de recevoir ces donn√©es via ONVIF et le champ sera rempli automatiquement.  Alors que le fonctionnement stable ONVIF sur toutes les cam√©ras IP ne peut que r√™ver. <br>  <u>Le d√©lai entre les rouleaux.</u>  Param√®tre qui d√©termine la pause en secondes lors de l'enregistrement de films.  Il est utilis√© en mode d'enregistrement de mouvement.  Vous permet d'enregistrer le trafic Internet avec des mouvements constants ou fr√©quents dans le cadre. <br>  <u>Vid√©o de la cam√©ra.</u>  Utile pour contr√¥ler l'image enregistr√©e lors de l'installation de la cam√©ra. <br><br><h4>  3G / 4G </h4><br><img src="https://habrastorage.org/webt/ge/c9/dt/gec9dtcbg66elw_sp2ds9h-ysjy.jpeg"><br><br>  Cela affiche des informations sur votre connexion Internet √† l'aide d'un modem 3G / 4G.  Les donn√©es sont mises √† jour toutes les 3 secondes.  Utile pour surveiller la qualit√© de la communication lors de l'installation de la cam√©ra. <br><br><h4>  STOCKAGE </h4><br><img src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"><br><br>  Il existe deux sous-menus - ¬´Stockage local¬ª et ¬´Yandex.Disk¬ª.  Lorsque vous s√©lectionnez le premier, nous entrons dans l'arborescence des fichiers du support externe connect√©, lorsque vous s√©lectionnez le second, nous allons sur Yandex.disk. <br><br><div class="spoiler">  <b class="spoiler_title">Version mobile de l'interface</b> <div class="spoiler_text"><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/63/42/sj/6342sj6nkn2uysfwtn_abkmvefa.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/zv/pl/yt/zvplytjskq_ec8we8uu87kn3rkq.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/wp/iy/os/wpiyos6r4vspkt873xhhpxl8elc.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/rz/s3/2q/rzs32qlwxazwwchceyf-v3lz2f0.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/cy/_l/rf/cy_lrfznpxhzqdsn9ug3acldocm.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"></div><br></div></div><br>  Les vid√©os enregistr√©es peuvent √™tre visionn√©es sur Yandex.Disk avec le lecteur int√©gr√© du service.  De plus, la vid√©o peut √™tre t√©l√©charg√©e et visionn√©e localement par n'importe quel lecteur vid√©o.  Le stockage des vid√©os enregistr√©es est organis√© comme suit: <br><br><img width="500" src="https://habrastorage.org/webt/_z/sz/bb/_zszbbu8vhfriszhfay6pa0zyb4.png"><br><br>  CAM - dossier pour enregistrer des vid√©os du registraire; <br>  MOTION - un dossier pour enregistrer des vid√©os enregistr√©es par mouvement dans le cadre; <br>  TIME - dossier pour l'enregistrement de vid√©os enregistr√©es √† une fr√©quence sp√©cifi√©e; <br>  YYYY-MM-DD - dossier pour les vid√©os enregistr√©es pendant la journ√©e; <br>  DDMMYYYY-HH_MM_SS.mp4 - vid√©os enregistr√©es au format mp4; <br><br><div class="spoiler">  <b class="spoiler_title">Organisation du stockage des fichiers sur Yandex.Disk</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ag/xq/cm/agxqcmgnb5lesjs6uh5z139h0ws.jpeg"><br><img src="https://habrastorage.org/webt/_u/8c/_s/_u8c_sk4-clpuw-pq1zqlsntol8.jpeg"><br><img src="https://habrastorage.org/webt/3e/vh/d0/3evhd0z4yjcpbgn_ynxzlnwemp8.jpeg"><br><img src="https://habrastorage.org/webt/aj/x9/iv/ajx9ivr061regnksnz9_njdyx3i.jpeg"><br></div></div><br><h2>  Qu'y a-t-il √† l'int√©rieur?  Impl√©mentation c√¥t√© serveur </h2><br>  Comme je l'ai √©crit ci-dessus, le routeur TP-LINK TL-MR3020 avec OPENWRT √† bord est devenu le premier exp√©rimental.  Barrier Breaker version 14.07.  Au d√©but du test, c'√©tait la derni√®re version.  Maintenant mis √† jour vers LEDE.  OpenRTSP n'√©tait pas dans le r√©f√©rentiel de cette version, nous avons donc ajout√© l'utilitaire nous-m√™mes, tout en supprimant tout ce qui est superflu. <br><br>  Apr√®s des tests r√©ussis, nous avons commenc√© √† envisager d'autres routeurs avec une architecture similaire.  Nous recherchions une plate-forme plus adapt√©e au bureau d'enregistrement en termes de dimensions et de caract√©ristiques.  L'id√©e est qu'en faisant clignoter l'un des routeurs avec un firmware modifi√© et en y connectant une cam√©ra IP avec un modem 3G / 4G, vous obtenez un registraire.  La liste des appareils sur lesquels la fonctionnalit√© du registraire a √©t√© test√©e: <br><br><ul><li>  TP-LINK TL-MR3020; <br></li><li>  HAME A5; <br></li><li>  CARAMBOLLA2; <br></li><li>  UNWIREDONE; <br></li><li>  Skywork skw71; <br></li><li>  TP-LINK TL-MR10U (avec batterie); <br></li><li>  TP-LINK TL-MR3040 (avec batterie); <br></li><li>  TP-LINK TL-MR3220 V: 2.3 (4 ports Ethernet); <br></li></ul><br>  Nous avons essay√© d'essayer les cartes de routeurs dans le cas.  L'id√©e √©tait qu'√† part le bo√Ætier, rien ne sortait et ne pendait pas, et le bo√Ætier lui-m√™me √©tait de taille minimale.  Par cons√©quent, comme pr√©vu par la 3G / 4G, le modem doit √™tre √† l'int√©rieur du bo√Ætier.  Nous avons donc obtenu un prototype de rue de <s>ferme collective</s> bas√© sur la carte TP-LINK TL-MR3020: <br><br><img src="https://habrastorage.org/webt/nl/ql/dn/nlqldndp6xnonugngztcpn-o_xm.jpeg"><br><br><img src="https://habrastorage.org/webt/vb/hy/by/vbhybyc7_i9shuotg2dwn_qw3ke.jpeg"><br><br><img src="https://habrastorage.org/webt/cu/79/kg/cu79kgd-vpw8yxk5fi2zyi01s7m.jpeg"><br><br><img src="https://habrastorage.org/webt/m_/nw/nn/m_nwnnnz5mix4-hcgidu4dsjhe0.jpeg"><br><br>  Bien s√ªr, nous avons pr√©f√©r√© des routeurs avec des tailles minimales.  Par cons√©quent, nous avons d√©cid√© d'essayer le routeur chinois HAME A5, d'imprimer un bo√Ætier et de voir ce qui se passe: <br><br><img src="https://habrastorage.org/webt/te/qe/ic/teqeicmmwrkyrst7en_32jj84bw.jpeg"><br><br><img src="https://habrastorage.org/webt/dl/hi/y0/dlhiy07kcg5ufwmzubs7r8us2us.jpeg"><br><br>  Sur HAME A5, le firmware de notre bureau d'enregistrement √©tait instable, le routeur a constamment raccroch√© et red√©marr√©.  Cela √©tait probablement d√ª √† une surchauffe grave.  J'ai donc d√ª l'abandonner au profit d'une option plus fiable et √©prouv√©e. <br><br>  Nous avons essay√© de nombreuses options, mais rien n'est meilleur que le mien.  Par cons√©quent, ils ont d√©cid√© de distribuer leur carte avec un module de CARAMBOLLA2 et la possibilit√© de vie de la batterie. <br><br><img src="https://habrastorage.org/webt/bx/p-/zo/bxp-zot1dl1nsjbjumki4qt1dpy.jpeg"><br><br>  Caract√©ristiques de CARAMBOLLA2: <br><br><ul><li>  Processeur AR9331, 400 MHz; <br></li><li>  64 Mo de RAM DDR2; <br></li><li>  FLASH 16 Mo; <br></li><li>  802.11 b / g / n, 2,4 GHz, 1x1 SISO, d√©bit de donn√©es maximal de 150 Mo / s, puissance de sortie de 21 dB; <br></li><li>  Tension d'alimentation 3,3 V; <br></li><li>  Dimensions 28 x 38 mm; <br></li></ul><br>  Lors de la conception de la carte, il est devenu clair qu'elle se r√©v√®le assez petite: <br><br><img src="https://habrastorage.org/webt/09/g4/2o/09g42orapxjcry1gjob3mmtkkpg.jpeg"><br><br><img src="https://habrastorage.org/webt/7s/ol/rf/7solrfz2329dboluqs76zeirkoa.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Encore une photo!</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sh/oq/jx/shoqjxdqcwa-g9biqhqb5szbqt4.jpeg"><br><br><img src="https://habrastorage.org/webt/dq/ia/fm/dqiafmvqrdvxrd7idqtlxlmuop4.jpeg"><br><br><img src="https://habrastorage.org/webt/vs/ym/rf/vsymrfn14peipdbsa0pqm8piypg.jpeg"><br><br><img src="https://habrastorage.org/webt/nj/yj/4x/njyj4x78zsubs7dfdszrbepsyeo.jpeg"><br><br><img src="https://habrastorage.org/webt/ci/mb/me/cimbmecbzt4cv51juvlcurk2akq.jpeg"><br><br><img src="https://habrastorage.org/webt/p-/09/vg/p-09vgwxivhz7nptwo1krbio0re.jpeg"><br><br><img src="https://habrastorage.org/webt/vl/oe/_t/vloe_twvd3tajilgcdeyeidqbq0.jpeg"><br><br><img src="https://habrastorage.org/webt/w7/j4/jf/w7j4jfs7htudfwac7xknhz9reay.jpeg"><br></div></div><br>  Pourquoi ne pas l'installer directement dans la cam√©ra?  Nous r√©solvons donc imm√©diatement le probl√®me avec le cas du registraire.  Alors ils l'ont fait.  Voici ce qui s'est pass√©: <br><br><img src="https://habrastorage.org/webt/6f/v6/nb/6fv6nbf5wd1hkjwv8iggioi1xwy.jpeg"><br><br><img src="https://habrastorage.org/webt/8j/g9/u9/8jg9u9gu3giixnag8fmd1rsnurq.jpeg"><br><br><img src="https://habrastorage.org/webt/gb/n-/if/gbn-ifgahpemu2_xgfszm8sizja.jpeg"><br><br><img src="https://habrastorage.org/webt/ky/mo/vg/kymovgkcsnj8h_lga0gug9p-jzq.jpeg"><br><br>  La photo montre que la carte enregistreur est mont√©e parall√®lement aux cartes de cam√©ra sur les racks.  Pour des raisons de refroidissement de la puce, il est pr√©f√©rable d'utiliser des cam√©ras IP avec un bo√Ætier m√©tallique et de fabriquer un radiateur afin que la chaleur soit √©vacu√©e vers le bo√Ætier.  Pour connecter un modem 3G / 4G et / ou un lecteur USB, un fil de cam√©ra IP Ethernet standard a √©t√© utilis√©.  L'autonomie de la cam√©ra avec l'enregistreur √† l'int√©rieur fournit une batterie de 700mAh 3.7V.  La fonction batterie sera utile en cas de panne de courant d√©lib√©r√©e.  Cette batterie est suffisante pour environ 20 minutes de fonctionnement du DVR avec l'appareil photo. <br><br><h2>  Donnez plus de cam√©ras! </h2><br>  En outre, des exp√©riences ont √©t√© men√©es avec l'enregistrement de vid√©os √† partir de plusieurs cam√©ras IP.  Les exp√©riences ont montr√© que l'enregistrement de vid√©os √† partir de 2 cam√©ras IP fonctionnait de mani√®re assez stable, nous envisageons donc la possibilit√© de cr√©er un enregistreur dans un bo√Ætier s√©par√© avec la possibilit√© de connecter 2 cam√©ras IP.  Nous testons maintenant le travail du registraire avec trois et quatre cam√©ras IP.  Les r√©sultats ne sont pas encore clairs.  Les cam√©ras seront aliment√©es par l'enregistreur via PoE passif. <br><br><img src="https://habrastorage.org/webt/5n/oj/tz/5nojtzo-rywvsubllu0uyfmpur0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Plus de photos!</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1c/rk/k5/1crkk5wkwnsfqqflozr4ros4oq0.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j0/hv/3c/j0hv3cipg7qajfkaywh1ks2yxdq.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hb/ck/lx/hbcklx37psblnkxf0m4l2kmbrfm.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/mj/cw/gtmjcw4yvs0gdljxbcsjkl99zgo.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/-a/ky/-m-akymdn9mjlf65snafjoggdla.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j1/mz/dk/j1mzdkaoi3lbqd7glqc8ldvtblg.png"></div><br></div></div><br>  La fonctionnalit√© de cette option peut √™tre utile, par exemple, lors de l'installation de cam√©ras avec intersection de zones de surveillance.  Pour travailler avec un grand nombre de cam√©ras, vous pouvez regarder dans la direction des mini-ordinateurs actuellement tr√®s populaires.  Mais vous devez comprendre que la consommation d'√©nergie de ces appareils est un ordre de grandeur plus √©lev√©, ainsi que le prix. <br><br><h2>  Comment appelez-vous un bateau pour qu'il navigue </h2><br>  Vous avez probablement remarqu√© l'inscription sur le tableau.  Nous pensions que cela ne valait rien pour un projet sans titre.  Ils sont venus avec un nom modeste - "Vip-Cam" (Video-Ip-Camera).  Eh bien, la version avec plusieurs cam√©ras - "Vip-Box". <br><br><h2>  Et ensuite? </h2><br>  Plans futurs: <br><br><ul><li>  Optimisez et testez le code.  Obtenez un appareil de travail stable; <br></li><li>  Effectuer des recherches sur la possibilit√© de configurer une cam√©ra IP via le menu de l'application Web; <br></li><li>  Explorer la possibilit√© d'int√©grer un DVR dans un syst√®me domestique intelligent; <br></li><li>  Continuez de tester le fonctionnement du DVR avec deux cam√©ras IP ou plus; <br></li><li>  Effectuer des tests sur le fonctionnement de la cam√©ra avec une batterie solaire; <br></li><li>  Cr√©ation d'une modification du DVR avec prise en charge des cam√©ras IP 2 x; <br></li><li>  Ajout de fonctionnalit√©s pour la configuration √† distance du DVR et de la cam√©ra IP; <br></li><li>  Ajout de la possibilit√© de r√©aliser √† distance une vid√©o √† la demande; <br></li></ul><br>  Les sources du projet sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Nous avons donc actuellement mis en ≈ìuvre l'id√©e d'un mini-enregistreur cloud.  Le projet est mis en ≈ìuvre dans votre temps libre, par cons√©quent, le temps de d√©veloppement est consid√©rablement retard√©.  En cons√©quence, nous avons un prototype fonctionnel d'un DVR de petite taille qui peut enregistrer gratuitement des vid√©os sur le stockage cloud.  Il y a encore beaucoup de travail, mais l'une des t√¢ches a √©t√© r√©solue - il est tout √† fait possible de cr√©er un bureau d'enregistrement de haute qualit√© et sans pr√©c√©dent.  Merci de votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422797/">https://habr.com/ru/post/fr422797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422787/index.html">Changements majeurs dans les principales architectures de puces</a></li>
<li><a href="../fr422789/index.html">@Pythonetc ao√ªt 2018</a></li>
<li><a href="../fr422791/index.html">Comment ne PAS apprendre l'anglais: erreurs courantes</a></li>
<li><a href="../fr422793/index.html">Conf√©rence DEFCON 22. Andrew "Zoz" Brooks. Ne le g√¢chez pas! 2e partie</a></li>
<li><a href="../fr422795/index.html">Technologie et affaires: un nouveau mod√®le de coop√©ration avec Zyxel en Russie</a></li>
<li><a href="../fr422799/index.html">Comment Microsoft a cach√© tout le serveur et comment le trouver</a></li>
<li><a href="../fr422801/index.html">Comprendre RBAC dans Kubernetes</a></li>
<li><a href="../fr422803/index.html">Calculateur de co√ªt de stockage, ou comment nous avons ouvert la "bo√Æte noire"</a></li>
<li><a href="../fr422805/index.html">D√©sabonnement rapide aux listes de diffusion dans Mail.Ru Mail</a></li>
<li><a href="../fr422807/index.html">AliceVision: photogramm√©trie en ligne de commande</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>