<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüåæ üò∏ üïò Mode Pengembang Balik Hewan yang Menyeberang üßëüèª üò∑ üö£üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Musim panas lalu, saya mulai merekayasa balik Animal Crossing untuk GameCube. Saya ingin menjelajahi kemungkinan membuat mod untuk game ini. Selain it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mode Pengembang Balik Hewan yang Menyeberang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413967/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4d/fe4/7f0/b4dfe47f0139ba1af039decfb6274524.jpg" alt="Menggunakan kode pada GameCube nyata"></div><br>  Musim panas lalu, saya mulai merekayasa balik Animal Crossing untuk GameCube.  Saya ingin menjelajahi kemungkinan membuat mod untuk game ini.  Selain itu, saya ingin mendokumentasikan proses untuk membuat tutorial untuk orang-orang yang tertarik pada peretasan ROM dan rekayasa balik.  Dalam posting ini, saya akan berbicara tentang fitur debugging pengembang yang masih ada dalam permainan, dan juga berbagi bagaimana saya menemukan cheat combo yang dapat digunakan untuk membuka kuncinya. <br><a name="habracut"></a><br><h3>  new_Debug_mode </h3><br>  Mempelajari simbol debug yang tersisa, saya perhatikan nama-nama fungsi dan variabel yang mengandung kata "debug", dan memutuskan bahwa akan menarik untuk melihat apakah ada fungsi debugging yang tersisa dalam permainan.  Jika saya berhasil mengaktifkan fungsi debugging atau pengembangan, ini akan membantu saya dalam proses membuat mod. <br><br>  Fungsi pertama yang saya perhatikan adalah <code>new_Debug_mode</code> .  Ini disebut dengan fungsi <code>entry</code> , yang dimulai segera setelah layar logo Nintendo selesai.  Yang dia lakukan adalah menempatkan struktur byte <code>0x1C94</code> dan menyimpan pointer ke sana. <br><br>  Setelah dipanggil <code>entry</code> dalam struktur yang dihosting di offset <code>0xD4</code> segera sebelum memanggil <code>mainproc</code> nilai 0 diatur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63e/fbc/0af/63efbc0af9ebfb4eeb2c3b42feddcbed.png"></div><br>  Untuk melihat apa yang terjadi ketika nilainya tidak nol, saya menambal instruksi <code>li r0, 0</code> di <code>80407C8C</code> , menggantinya dengan <code>li r0, 1</code> .  Byte mentah dari instruksi <code>li r0, 0</code> adalah <code>38 00 00 00</code> mana nilai yang diberikan adalah di akhir instruksi, jadi saya hanya bisa mengganti byte dengan <code>38 00 00 01</code> dan mendapatkan <code>li r0, 1</code> .  Sebagai cara yang lebih andal untuk membuat instruksi, Anda dapat menggunakan sesuatu seperti <code>kstool</code> : <br><br> <code>$ kstool ppc32be "li 0, 1" <br> li 0, 1 = [ 38 00 00 01 ]</code> <br> <br>  Di emulator Dolphin, tambalan ini dapat diterapkan dengan masuk ke tab "Tambalan" di properti gim dan memasukkannya sebagai berikut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e65/ecb/706/e65ecb7061c9470c9a9b71c4aad8e506.png"></div><br>  Setelah menetapkan nilai 1, grafik yang menarik muncul di bagian bawah layar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be5/cab/e1f/be5cabe1fe1df63d0534c092d49ca8f9.png"></div><br><br>  Itu tampak seperti indikator kinerja: bilah-bilah kecil di bagian bawah layar dapat naik atau turun.  (Kemudian, ketika saya melihat nama-nama fungsi yang menggambar grafik ini, saya menemukan bahwa mereka benar-benar menampilkan metrik penggunaan CPU dan memori.) <br><br>  Itu hebat, tetapi tidak terlalu membantu.  Setelah menetapkan nilai 1, kota saya berhenti memuat, jadi tidak ada lagi yang bisa dilakukan di sini. <br><br><h3>  Mode zuru </h3><br>  Saya kembali mencari referensi lain untuk fungsi debugging, dan beberapa kali menemukan sesuatu yang disebut "mode zuru".  Cabang-cabang blok kode dengan fungsi debug sering memeriksa variabel <code>zurumode_flag</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/88e/4d4/63c/88e4d463c3ea3474d3b67e2cf8367ee2.png" alt="fungsi game_move_first"></div><br>  <code>zzz_LotsOfDebug</code> (nama yang saya buat sendiri) di fungsi <code>game_move_first</code> ditunjukkan di atas disebut hanya ketika <code>zurumode_flag</code> tidak sama dengan nol. <br><br>  Mencari fungsi yang terkait dengan nilai ini, saya menemukan ini: <br><br><ul><li> <code>zurumode_init</code> </li> <li> <code>zurumode_callback</code> </li> <li> <code>zurumode_update</code> </li> <li> <code>zurumode_cleanup</code> </li> </ul><br>  Sekilas, tujuan mereka misterius, mereka menyulap bit dalam offset variabel yang disebut <code>osAppNMIBuffer</code> . <br><br>  Berikut adalah cara kerja fungsi-fungsi ini pada pandangan pertama: <br><br><h4>  zurumode_init </h4><br><ul><li>  Setel <code>zurumode_flag</code> ke 0 </li><li>  Memeriksa beberapa bit di <code>osAppNMIBuffer</code> </li><li>  Menyimpan pointer ke fungsi <code>zurumode_callback</code> dalam struktur <code>padmgr</code> </li><li>  Panggilan <code>zurumode_update</code> </li></ul><br><h4>  zurumode_update </h4><br><ul><li>  Memeriksa beberapa bit di <code>osAppNMIBuffer</code> </li><li>  Tergantung pada nilai bit ini, pembaruan <code>zurumode_flag</code> </li><li>  Mencetak string format ke konsol OS. </li></ul><br>  Ini biasanya berguna untuk memberikan konteks pada kode, tetapi ada banyak karakter yang tidak dapat dicetak pada baris tersebut.  Satu-satunya teks yang dikenali adalah "zurumode_flag" dan "% d". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/268/f99/093/268f99093e0f9dec2a19bfc22be95ac7.png" alt="mode format string zuru"></div><br>  Dengan asumsi itu bisa berupa teks Jepang dengan pengkodean karakter multibyte, saya melewati string melalui alat pengenalan pengkodean dan menemukan bahwa string itu dikodekan dengan Shift-JIS.  Dalam terjemahan, baris itu berarti "Nilai zurumode_flag telah berubah dari% d menjadi% d."  Ini tidak memberi kita banyak informasi baru, tetapi sekarang kita tahu bahwa Shift-JIS digunakan: dalam file biner dan tabel baris ada lebih banyak baris dalam pengkodean ini. <br><br><h4>  zurumode_callback </h4><br><ul><li>  Panggilan <code>zerumode_check_keycheck</code> </li><li>  Memeriksa beberapa bit di <code>osAppNMIBuffer</code> </li><li>  Nilai <code>zurumode_flag</code> </li><li>  Panggilan <code>zurumode_update</code> </li></ul><br>  <code>zerumode_check_keycheck</code> sampai kami bertemu karena ejaan yang berbeda ... apa itu? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49e/ca7/1fd/49eca71fdd3cefb01b01c578a93bbe72.png" alt="zerumode_check_keycheck"></div><br>  Fungsi rumit yang sangat besar yang bekerja lebih banyak pada bit dengan nilai yang tidak disebutkan namanya. <br><br>  Pada titik ini, saya memutuskan untuk mengambil langkah mundur dan mempelajari fungsi dan variabel debugging lainnya, karena saya tidak yakin tentang pentingnya mode zuru.  Selain itu, saya tidak mengerti apa artinya "pemeriksaan kunci" di sini.  Mungkinkah ini adalah kunci kriptografi? <br><br><h3>  Kembali ke debugging </h3><br>  Sekitar waktu ini, saya melihat ada masalah dengan cara saya memuat simbol debugging di IDA.  File <code>foresta.map</code> pada disk game berisi banyak alamat dan nama fungsi dan variabel.  Pada awalnya, saya tidak melihat bahwa alamat untuk setiap bagian mulai lagi dari awal, jadi saya menulis skrip sederhana yang menambahkan entri nama untuk setiap baris file. <br><br>  Saya menulis skrip IDA baru untuk memperbaiki tabel simbol pemuatan untuk bagian program yang berbeda: <code>.rodata</code> , <code>.rodata</code> , <code>.bss</code> dan <code>.bss</code> .  Bagian <code>.text</code> berisi semua fungsi, jadi saya membuatnya sehingga saat ini ketika saya menetapkan nama, skrip akan secara otomatis mengenali fungsi di setiap alamat. <br><br>  Di bagian data, dia sekarang membuat segmen untuk setiap objek biner (misalnya, <code>m_debug.o</code> , yang seharusnya merupakan kode yang dikompilasi untuk sesuatu yang disebut <code>m_debug</code> ), dan mengatur ruang dan nama untuk setiap bagian data. <br><br>  Ini memberi saya lebih banyak informasi, tetapi saya harus secara manual mengatur tipe data untuk setiap bagian data, karena saya mendefinisikan setiap objek data sebagai array byte sederhana.  (Melihat ke belakang, saya mengerti bahwa akan lebih baik untuk mengasumsikan bahwa fragmen 4 byte berisi bilangan bulat 32-bit, karena ada banyak, dan banyak berisi alamat fungsi dan data yang penting untuk membangun referensi silang.) <br><br>  Mempelajari segmen <code>.bss</code> baru untuk <code>m_debug_mode.o</code> , saya menemukan beberapa variabel dari form <code>quest_draw_status</code> dan <code>event_status</code> .  Ini menarik karena saya ingin informasi yang berguna, bukan hanya grafik kinerja, untuk ditampilkan dalam mode debug.  Untungnya, dari catatan data ini ada referensi silang ke sepotong besar kode yang memeriksa <code>debug_print_flg</code> . <br><br>  Menggunakan debugger di Dolphin emulator, saya menetapkan breakpoint di lokasi fungsi tempat <code>debug_print_flg</code> diperiksa (pada <code>8039816C</code> ) untuk memahami cara kerja pemeriksaan ini.  Namun program tersebut tidak pernah sekalipun melewati breakpoint ini. <br><br>  Mari kita <code>game_debug_draw_last</code> mengapa ini terjadi: fungsi ini dipanggil oleh <code>game_debug_draw_last</code> .  Tebak nilai apa yang diperiksa sebelum panggilan kondisional?  <code>zurumode_flag</code> !  Apa yang sedang terjadi? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/257/048/964/257048964f9e8265670952e66868fc83.png" alt="cek zurumode_flag"></div><br>  Saya menetapkan breakpoint pada cek ini ( <code>80404E18</code> ) dan langsung bekerja.  Nilai <code>zurumode_flag</code> adalah nol, jadi dalam eksekusi normal, program akan melewatkan panggilan ke fungsi ini.  Saya memasukkan instruksi cabang NOP sebagai gantinya (menggantinya dengan instruksi yang tidak melakukan apa-apa) untuk memeriksa apa yang terjadi ketika fungsi dipanggil. <br><br>  Di Dolphin debugger, ini bisa dilakukan dengan menjeda game, mengklik kanan pada instruksi dan memilih "Sisipkan nop": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e6/f00/8d1/2e6f008d1dcf1be707b1961e05df2e71.png" alt="Dolphin debugger nopping"></div><br>  Tidak ada yang terjadi.  Kemudian saya memeriksa apa yang terjadi di dalam fungsi dan menemukan konstruksi percabangan lain yang menghindari segala sesuatu yang menarik terjadi pada <code>803981a8</code> .  Saya juga memasukkan NOP, dan huruf "D" muncul di sudut kanan atas layar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a18/9a0/816/a189a0816b08438ad5b85c09adaac57c.png" alt="Mode surat debug.  D"></div><br>  Dalam fungsi ini di <code>8039816C</code> (saya menyebutnya <code>zzz_DebugDrawPrint</code> ), masih ada banyak kode yang menarik, tetapi tidak dipanggil.  Jika Anda melihat fungsi ini dalam bentuk grafik, Anda dapat melihat bahwa ada serangkaian operator percabangan yang melewati blok kode di seluruh fungsi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/236/131/4bb/2361314bbb4165b8e1c82386e8c50533.png" alt="Cabang di zzz_DebugDrawPrint"></div><br>  Setelah memasukkan NOP alih-alih beberapa konstruksi percabangan lainnya, saya mulai melihat berbagai hal menarik di layar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/c19/008/0dbc1900844131d0c3d7f507f2b61b63.png" alt="Lebih banyak hal debug yang ditambahkan"></div><br>  Pertanyaan selanjutnya adalah bagaimana cara mengaktifkan fungsi debugging ini tanpa mengubah kode. <br><br>  Selain itu, di beberapa konstruksi cabang, <code>zurumode_flag</code> muncul lagi di fungsi undian debug ini.  Saya menambahkan tambalan lain sehingga dalam <code>zurumode_update</code> bendera <code>zurumode_update</code> selalu diberi nilai 2, karena ketika tidak dibandingkan dengan 0, itu dibandingkan secara khusus dengan nilai 2. <br><br>  Setelah memulai kembali permainan, saya melihat di sudut kanan atas layar pesan seperti itu "Pesan.  tidak. " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97d/16e/a0b/97d16ea0b169c72dd86ab623e0e3f977.png" alt="tampilan nomor pesan"></div><br>  Nomor 687 adalah pengidentifikasi catatan dari pesan yang terakhir ditampilkan.  Saya memeriksanya menggunakan program tabel viewer yang saya tulis di awal analisis, tetapi Anda juga dapat memeriksanya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">editor tabel string dengan GUI lengkap</a> , yang saya tulis untuk meretas ROM.  Seperti apa tampilan pos di editor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cad/e3f/378/cade3f3785a86e9bf335a144fe16a338.png" alt="Pesan 687 di editor tabel string"></div><br>  Pada titik ini, menjadi jelas bahwa studi tentang mode zuru tidak lagi diambil - itu terkait langsung dengan fungsi debugging game. <br><br><h3>  Kembali ke mode Zuru lagi </h3><br>  <code>zurumode_init</code> menginisialisasi beberapa hal: <br><br><ul><li>  <code>0xC(padmgr_class)</code> diberikan nilai alamat <code>zurumode_callback</code> </li><li>  <code>0x10(padmgr_class)</code> diberikan nilai alamat <code>padmgr_class</code> itu sendiri </li><li>  <code>0x4(zuruKeyCheck)</code> diberikan nilai bit terakhir dalam kata yang dimuat dari <code>0x3C(osAppNMIBuffer)</code> . </li></ul><br>  Saya mencari tahu apa itu <code>padmgr</code> , singkatan dari "gamepad manager".  Ini berarti bahwa mungkin ada kombinasi tombol (tombol) khusus yang dapat dimasukkan pada gamepad untuk mengaktifkan mode zuru, atau semacam perangkat debugging atau fungsi konsol pengembang yang dapat digunakan untuk mengirim sinyal untuk mengaktifkannya. <br><br>  <code>zurumode_init</code> dijalankan hanya ketika game pertama kali dimuat (ketika tombol reset ditekan, itu tidak bekerja). <br><br>  Setelah menetapkan breakpoint di alamat <code>8040efa4</code> , di mana nilai <code>0x4(zuruKeyCheck)</code> ditetapkan <code>0x4(zuruKeyCheck)</code> , kita dapat melihat bahwa ketika memuat tanpa menekan tombol, nilainya diatur ke 0. Jika Anda menggantinya dengan 1, hal menarik terjadi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9dc/5f5/0fb/9dc5f50fbd68beb624745d0704a18383.png" alt="Layar judul dengan mode zuru"></div><br>  Huruf "D" muncul lagi di sudut kanan atas (kali ini berwarna hijau, bukan kuning), dan beberapa informasi perakitan juga ditampilkan: <br><br> <code>[CopyDate: 02/08/01 00:16:48 ] <br> [Date: 02-07-31 12:52:00] <br> [Creator:SRD@SRD036J]</code> <br> <br>  Sebuah tambalan yang selalu menetapkan <code>0x4(zuruKeyCheck)</code> ke 1 di awal terlihat seperti ini: <br><br> <code>8040ef9c 38c00001</code> <br> <br>  Ini sepertinya cara yang benar untuk menginisialisasi mode zuru.  Setelah ini, berbagai tindakan mungkin diperlukan untuk mencapai tampilan informasi debugging tertentu.  Memulai permainan, berjalan-jalan di atasnya dan berbicara dengan penduduk desa, kita tidak akan melihat pesan apa pun yang disebutkan di atas (kecuali untuk huruf "D" di sudut). <br><br>  Tersangka yang paling mungkin adalah <code>zurumode_update</code> dan <code>zurumode_callback</code> . <br><br><h4>  zurumode_update </h4><br>  <code>zurumode_update</code> pertama kali disebut dalam <code>zurumode_init</code> dan kemudian secara konstan dipanggil oleh <code>zurumode_callback</code> . <br><br>  Lagi memeriksa bit terakhir <code>0x3C(osAppNMIBuffer)</code> dan kemudian, berdasarkan nilai ini, pembaruan <code>zurumode_flag</code> . <br><br>  Jika bitnya nol, maka flag diset ke nol. <br><br>  Jika tidak, pernyataan berikut dijalankan, dengan nilai penuh <code>0x3c(osAppNMIBuffer)</code> menjadi <code>r5</code> : <br><br> <code>extrwi r3, r5, 1, 28</code> <br> <br>  Ini mengekstrak bit ke-28 dari <code>r5</code> dan menyimpannya di <code>r3</code> . <br><br>  Kemudian 1 ditambahkan ke hasil, yaitu, hasil akhir selalu 1 atau 2. <br><br>  Kemudian <code>zurumode_flag</code> dibandingkan dengan hasil sebelumnya, tergantung pada berapa banyak bit ke-28 dan terakhir diatur ke <code>0x3c(osAppNMIBuffer)</code> : 0, 1 atau 2. <br><br>  Nilai ini ditulis ke <code>zurumode_flag</code> .  Jika tidak mengubah apa pun, fungsi keluar dan mengembalikan nilai bendera saat ini.  Jika itu mengubah nilainya, maka rantai blok kode yang jauh lebih kompleks dijalankan. <br><br>  Sebuah pesan ditampilkan dalam bahasa Jepang: ‚Äúnilai zurumode_flag yang sama berubah dari% d menjadi% d‚Äù, yang kita bicarakan di atas. <br><br>  Kemudian serangkaian fungsi dipanggil dengan argumen yang berbeda, tergantung pada apakah bendera telah menjadi sama dengan nol atau tidak.  Kode assembler dari bagian ini monoton, jadi saya akan menunjukkan kodesemu: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flag_changed_to_zero) { JC_JUTAssertion_changeDevice(<span class="hljs-number"><span class="hljs-number">2</span></span>) JC_JUTDbPrint_setVisible(JC_JUTDbPrint_getManager(), <span class="hljs-number"><span class="hljs-number">0</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BIT(nmiBuffer, <span class="hljs-number"><span class="hljs-number">25</span></span>) || BIT(nmiBuffer, <span class="hljs-number"><span class="hljs-number">31</span></span>)) { JC_JUTAssertion_changeDevice(<span class="hljs-number"><span class="hljs-number">3</span></span>) JC_JUTDbPrint_setVisible(JC_JUTDbPrint_getManager(), <span class="hljs-number"><span class="hljs-number">1</span></span>) }</code> </pre> <br>  Perhatikan bahwa jika flagnya nol, maka argumen 0 diteruskan ke JC_JUTDbPrint_setVisible. <br><br>  Jika flag tidak sama dengan nol. Dan bit 25 atau bit 31 diatur ke <code>0x3C(osAppNMIBuffer)</code> , maka <code>setVisible</code> diteruskan argumen 1. <br><br>  Ini adalah kunci pertama untuk mengaktifkan mode <code>0x3C(osAppNMIBuffer)</code> bit terakhir <code>0x3C(osAppNMIBuffer)</code> harus disetel ke 1 untuk menampilkan informasi debug dan mengatur <code>zurumode_flag</code> bukan nol. <br><br><h4>  zurumode_callback </h4><br>  <code>zurumode_callback</code> terletak di <code>8040ee74</code> dan mungkin disebut dengan fungsi yang terkait dengan gamepad.  Setelah memasukkan breakpoint dalam debugger Dolphin, tumpukan panggilan menunjukkan kepada kita bahwa itu sebenarnya dipanggil dari <code>padmgr_HandleRetraceMsg</code> . <br><br>  Salah satu tindakan pertamanya adalah mengeksekusi <code>zerucheck_key_check</code> .  Fungsi ini kompleks, tetapi tampaknya secara umum dirancang untuk membaca dan memperbarui nilai <code>zuruKeyCheck</code> .  Sebelum beralih ke fungsi cek kunci, saya memutuskan untuk memeriksa bagaimana nilai ini digunakan di sisa fungsi panggilan balik. <br><br>  Kemudian lagi memeriksa beberapa bit dalam <code>0x3c(osAppNMIBuffer)</code> .  Jika bit 26 diatur, atau jika bit 25 diatur dan <code>padmgr_isConnectedController(1)</code> mengembalikan nilai bukan nol, maka bit terakhir dalam <code>0x3c(osAppNMIBuffer)</code> ke 1! <br><br>  Jika tidak ada bit ini yang diatur, atau bit 25 yang ditetapkan, tetapi <code>padmgr_isConnectedController(1)</code> mengembalikan 0, maka fungsi memeriksa apakah byte pada alamat <code>0x4(zuruKeyCheck)</code> sama dengan nol.  Jika sama, maka akan mereset bit terakhir dalam nilai asli dan menulisnya kembali ke <code>0x3c(osAppNMIBuffer)</code> .  Jika tidak, maka bit terakhir masih tetap 1. <br><br>  Dalam kode pseudo, tampilannya seperti ini: <br><br><pre> <code class="cpp hljs">x = osAppNMIBuffer[<span class="hljs-number"><span class="hljs-number">0x3c</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BIT(x, <span class="hljs-number"><span class="hljs-number">26</span></span>) || (BIT(x, <span class="hljs-number"><span class="hljs-number">25</span></span>) &amp;&amp; isConnectedController(<span class="hljs-number"><span class="hljs-number">1</span></span>)) || zuruKeyCheck[<span class="hljs-number"><span class="hljs-number">4</span></span>] != <span class="hljs-number"><span class="hljs-number">0</span></span>) { osAppNMIBuffer[<span class="hljs-number"><span class="hljs-number">0x3c</span></span>] = x | <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment">// set last bit } else { osAppNMIBuffer[0x3c] = x &amp; ~1 // clear last bit }</span></span></code> </pre> <br>  Setelah itu, jika bit 26 tidak disetel, fungsi melanjutkan ke memanggil <code>zurumode_update</code> , dan kemudian keluar. <br><br>  Jika bit diatur, maka jika <code>0x4(zuruKeyCheck)</code> tidak sama dengan nol, maka ia memuat string format yang menampilkan berikut ini: "ZURU% d /% d". <br><br><h4>  Untuk meringkas subtotal </h4><br>  Inilah yang terjadi: <br><br>  <code>padmgr_HandleRetraceMsg</code> memanggil <code>zurumode_callback</code> .  Saya berasumsi bahwa ‚Äúhandle retrace message‚Äù ini berarti hanya memindai penekanan tombol pada pengontrol.  Dengan setiap pemindaian, ini dapat menyebabkan serangkaian panggilan balik yang berbeda. <br><br>  Ketika <code>zurumode_callback</code> dijalankan <code>zurumode_callback</code> ia memeriksa penekanan tombol saat ini (tombol).  Sepertinya dia sedang memeriksa tombol atau kombinasi tombol tertentu. <br><br>  Bit terakhir dalam Buffer NMI diperbarui tergantung pada bit spesifik dalam nilai saat ini, serta pada nilai salah satu byte <code>0x4(zuruKeyCheck)</code> ). <br><br>  Kemudian <code>zurumode_update</code> dan periksa bit ini.  Jika 0, maka flag mode zuru diatur ke 0. Jika itu 1, maka flag mode berubah menjadi 1 atau 2, tergantung pada apakah bit 28 diatur. <br><br>  <strong>Ada tiga cara untuk mengaktifkan mode zuru:</strong> <br><br><ol><li>  Bit 26 diatur ke <code>0x3C(osAppNMIBuffer)</code> </li><li>  Bit 25 diatur ke <code>0x3C(osAppNMIBuffer)</code> dan pengontrol terhubung ke port 2 </li><li>  <code>0x4(zuruKeyCheck)</code> bukan nol </li></ol><br><h4>  osAppNMIBuffer </h4><br>  Tertarik dengan apa arti <code>osAppNMIBuffer</code> , saya mulai mencari "NMI" dan menemukan tautan dalam konteks Nintendo untuk "non-maskable interrupt".  Ternyata nama variabel ini sepenuhnya disebutkan dalam dokumentasi pengembang untuk Nintendo 64: <br><br><blockquote>  osAppNMIBuffer adalah buffer 64-byte yang dihapus pada restart dingin.  Jika sistem reboot karena NMI, status buffer ini tidak berubah. </blockquote><br>  Sebenarnya, ini adalah sebagian kecil dari memori yang disimpan selama restart "lunak" (dengan tombol reset).  Gim ini dapat menggunakan buffer ini untuk menyimpan data apa pun saat konsol ada di jaringan.  Animal Crossing asli dirilis pada Nintendo 64, jadi masuk akal jika sesuatu yang serupa muncul di kode. <br><br>  Jika kita masuk ke file <code>boot.dol</code> biner (semua yang ditunjukkan di atas ada di <code>foresta.rel</code> ), maka fungsi <code>main</code> memiliki banyak tautan ke <code>osAppNMIBuffer</code> .  Tampilan cepat menunjukkan bahwa ada serangkaian pemeriksaan yang dapat menyebabkan <code>0x3c(osAppNMIBuffer)</code> nilai bit yang berbeda <code>0x3c(osAppNMIBuffer)</code> menggunakan operasi OR. <br><br>  Nilai ATAU operan berikut mungkin menarik: <br><br><ul><li>  Bit 31: 0x01 </li><li>  Bit 30: 0x02 </li><li>  Bit 29: 0x04 </li><li>  Bit 28: 0x08 </li><li>  Bit 27: 0x10 </li><li>  Bit 26: 0x20 </li></ul><br>  Kita ingat bahwa bit 25, 26 dan 28 sangat menarik: 25 dan 26 menentukan apakah mode zuru aktif, dan bit 28 menentukan level bendera (1 atau 2). <br>  Bit 31 juga menarik, tetapi sepertinya akan berubah tergantung pada nilai yang lain. <br><br><h5>  Bit 26 </h5><br>  Pertama-tama: pada alamat <code>800062e0</code> ada instruksi <code>ori r0, r0, 0x20</code> dengan nilai buffer <code>0x3c</code> .  Set bit 26, yang selalu mengaktifkan mode zuru. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5c/b3c/207/b5cb3c207a61dc20dd12e6724f25099b.png" alt="Pengaturan bit 26"></div><br>  Agar bit diset, byte kedelapan yang dikembalikan dari <code>DVDGetCurrentDiskID</code> harus <code>0x99</code> .  Pengidentifikasi ini terletak di awal gambar disk gim, dan dimuat ke dalam memori pada <code>80000000</code> .  Dalam rilis ritel game reguler, ID terlihat seperti ini: <br><br> <code>47 41 46 45 30 31 00 00 GAFE01..</code> <br> <br>  Mengganti byte terakhir dari pengidentifikasi dengan <code>0x99</code> untuk <code>0x99</code> , kita mendapatkan gambar berikut saat memulai permainan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da6/c58/c90/da6c58c90515fefb62ed8cf766ad8776.png" alt="ID versi gim 0x99"></div><br>  Dan berikut ini ditampilkan di konsol OS: <br><br> <code>06:43:404 HW\EXI_DeviceIPL.cpp:339 N[OSREPORT]: ZURUMODE2 ENABLE <br> 08:00:288 HW\EXI_DeviceIPL.cpp:339 N[OSREPORT]: osAppNMIBuffer[15]=0x00000078</code> <br> <br>  Semua tambalan lain dapat dihapus, setelah itu huruf D muncul lagi di sudut kanan atas layar, tetapi tidak ada pesan debug yang diaktifkan lagi. <br><br><h5>  Bit 25 </h5><br>  Bit 25 digunakan bersama dengan cek port pengontrol 2. Apa yang menyebabkannya hidup? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddf/d00/4a1/ddfd004a1488ec21842c90581ef177fc.png" alt="Bit 25 dan 28"></div><br>  Ternyata ia harus menggunakan cek yang sama dengan bit 28: versi harus lebih besar dari atau sama dengan <code>0x90</code> .  Jika bit 26 diatur (ID adalah <code>0x99</code> ), maka kedua bit ini juga akan ditetapkan, dan mode zuru akan tetap diaktifkan. <br><br>  Namun, jika versi berada dalam kisaran dari <code>0x98</code> hingga <code>0x98</code> , maka mode <code>0x98</code> tidak langsung menyala.  Ingat cek yang dilakukan di <code>zurumode_callback</code> - mode akan diaktifkan hanya jika bit 25 diatur <em>dan</em> <code>padmgr_isConnectedController(1)</code> mengembalikan nilai bukan nol. <br><br>  Setelah pengontrol terhubung ke port 2 (argumennya <code>isConnectedController</code> memiliki pengindeksan nol), mode zuru diaktifkan.  Huruf D dan informasi tentang perakitan muncul di layar awal, dan kami ... dapat mengontrol tampilan debugging menggunakan tombol-tombol pada pengontrol kedua! <br><br>  Beberapa tombol melakukan tindakan yang tidak hanya mengubah tampilan, tetapi juga, misalnya, meningkatkan kecepatan permainan. <br><br><h4>  zerucheck_key_check </h4><br>  Misteri terakhir tetap <code>0x4(zuruKeyCheck)</code> .  Ternyata nilai ini diperbarui dengan fungsi kompleks besar yang saya perlihatkan di atas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49e/ca7/1fd/49eca71fdd3cefb01b01c578a93bbe72.png" alt="zerumode_check_keycheck"></div><br>  Menggunakan debugger emulator Dolphin, saya dapat menentukan bahwa nilai yang diperiksa oleh fungsi ini adalah sekumpulan bit yang sesuai dengan penekanan tombol pada pengontrol kedua. <br><br>  Pelacakan klik tombol disimpan dalam nilai 16-bit pada <code>0x2(zuruKeyCheck)</code> .  Ketika controller tidak terhubung, nilainya <code>0x7638</code> . <br><br>  2 byte yang berisi flags dari penekanan tombol pengontrol diunduh dan kemudian diperbarui pada awal <code>zerucheck_key_check</code> .  Nilai baru diteruskan dengan register <code>r4</code> fungsi <code>padmgr_HandleRetraceMsg</code> ketika ia memanggil fungsi callback. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f98/478/318/f984783181e592098f8beef9c22cef23.png" alt="tombol periksa ujung"></div><br>  Menjelang akhir <code>zerucheck_key_check</code> ada tempat lain di mana <code>0x4(zuruKeyCheck)</code> diperbarui <code>0x4(zuruKeyCheck)</code> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu tidak muncul dalam daftar referensi silang karena digunakan sebagai alamat dasar </font></font><code>r3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan kita dapat mengetahui nilainya </font></font><code>r3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya dengan melihat nilai apa yang diberikan padanya sebelum memanggil fungsi ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di alamat, </font></font><code>8040ed88</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilainya </font></font><code>r4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dituliskan ke </font></font><code>0x4(zuruKeyCheck)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tepat sebelum itu, tetapi ditulis dari tempat yang sama dan kemudian XOR dari 1. Tugas operasi ini adalah untuk mengubah nilai byte (dan sebenarnya bit terakhir) antara 0 dan 1. (Jika nilainya 0, maka hasil </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XOR dari 1 akan menjadi 1 Jika nilainya 1, maka hasilnya adalah 0. Lihat tabel kebenaran untuk XOR.)</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/048/c32/eb1/048c32eb12dda64c878fa7b9f0bd7ddc.png" alt="tombol periksa ujung"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelumnya, ketika saya mempelajari nilai-nilai dalam memori, saya tidak melihat perilaku ini, tetapi saya akan mencoba untuk memecah instruksi ini di debugger untuk memahami apa yang terjadi. Nilai asli dimuat di </font></font><code>8040ed7c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanpa menyentuh tombol pengontrol, saya tidak akan sampai ke breakpoint ini di layar awal. Untuk masuk ke blok kode ini, nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama </font></font><code>0xb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebelum instruksi cabang yang berjalan sebelum breakpoint ( </font></font><code>8040ed74</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Dari banyak jalur berbeda yang mengarah ke blok ini, hanya satu yang memberikan </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai </font></font><code>0xb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di depannya di alamat </font></font><code>8040ed68</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04c/926/959/04c926959999b5f6facfc8920f6a212f.png" alt="Pengaturan r5 ke 0xb"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan bahwa untuk mencapai blok yang menetapkan </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai </font></font><code>0xB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nilainya </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama </font><font style="vertical-align: inherit;">persis sebelum itu </font></font><code>0x1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dengan mengikuti blok rantai hingga awal fungsi, kita bisa melihat semua batasan yang diperlukan untuk mencapai blok ini:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040ed74: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama</font></font><code>0xB</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040ed60: nilai </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama</font></font><code>0x1000</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040ebe8: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama</font></font><code>0xA</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040ebe4: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih kecil</font></font><code>0x5B</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040eba4: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih besar</font></font><code>0x7</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040eb94: nilai </font></font><code>r6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus 1</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8040eb5c: nilai </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak boleh 0</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8040eb74: nilai tombol port 2 harus berubah </font></font></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/2fa/9f3/28e2fa9f3d35b1c6146f816120dee72b.png" alt="Menelusuri jalur kode"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini kita telah mencapai titik di mana nilai-nilai tombol yang lama dimuat dan nilai-nilai baru disimpan. Kemudian datang beberapa operasi yang diterapkan pada nilai-nilai baru dan lama: </font><font style="vertical-align: inherit;">Operasi XOR menandai semua bit yang telah berubah di antara dua nilai. Kemudian, operasi DAN menyembunyikan input baru untuk mengatur semua bit yang saat ini tidak diatur ke status 0. Hasilnya </font><font style="vertical-align: inherit;">adalah seperangkat bit baru (penekanan tombol) pada nilai baru. Jika tidak kosong, maka kita berada di jalur yang benar. </font><font style="vertical-align: inherit;">Untuk membuat </font><font style="vertical-align: inherit;">perbedaan </font><font style="vertical-align: inherit;">, tombol pelacakan keempat dari 16 bit harus berubah. Setelah memasukkan breakpoint setelah operasi XOR / AND, saya menemukan bahwa tombol START memicu keadaan ini. </font><font style="vertical-align: inherit;">Pertanyaan selanjutnya adalah bagaimana cara </font><font style="vertical-align: inherit;">agar awalnya sama</font></font><br><br> <code>old_vals = old_vals XOR new_vals <br> old_vals = old_vals AND new_vals</code> <br> <br><font style="vertical-align: inherit;"></font><code>r0</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>r0</code><font style="vertical-align: inherit;"></font><code>0x1000</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>r5</code><font style="vertical-align: inherit;"></font><code>0xA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>r6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dimuat dari </font></font><code>0x0(zuruKeyCheck)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awal fungsi uji kunci dan diperbarui lebih dekat ke akhir, ketika kita tidak masuk ke dalam blok kode yang termasuk </font></font><code>0x4(zuruKeyCheck)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada beberapa tempat sebelum ini di mana </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilainya diberikan </font></font><code>0xA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><ul><li> <code>8040ed50</code> </li> <li> <code>8040ed00</code> </li> <li> <code>8040ed38</code> </li> </ul><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8040ed38 </font></font></h5><br><ul><li> <code>8040ed34</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilainya </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama </font></font><code>0x4000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(tombol B ditekan)</font></font></li><li> <code>8040ebe0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama</font></font><code>0x5b</code> </li><li> <code>8040eba4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih besar</font></font><code>0x7</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maka semuanya berjalan seperti sebelumnya ... </font></font></li></ul><br> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> harus dimulai dengan </font></font><code>0x5b</code> <br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8040ed00 </font></font></h5><br><ul><li> <code>8040ecfc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama </font></font><code>0xC000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(A dan B ditekan)</font></font></li><li> <code>8040ebf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus&gt; = 9</font></font></li><li> <code>8040ebf0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus kurang dari 10</font></font></li><li> <code>8040ebe4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih kecil</font></font><code>0x5b</code> </li><li> <code>8040eba4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih</font></font><code>0x7</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maka semuanya berjalan seperti sebelumnya ... </font></font></li></ul><br> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> harus dimulai jam 9 </font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8040ed50 </font></font></h5><br><ul><li> <code>8040ed4c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus sama </font></font><code>0x8000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(tombol A ditekan)</font></font></li><li> <code>8040ec04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih kecil</font></font><code>0x5d</code> </li><li> <code>8040ebe4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih besar</font></font><code>0x5b</code> </li><li> <code>8040eba4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: nilai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus lebih besar</font></font><code>0x7</code> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maka semuanya berjalan seperti sebelumnya ... </font></font></li></ul><br> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus mulai dengan </font></font><code>0x5c</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tampaknya ada semacam keadaan di antara penekanan tombol, setelah itu Anda harus memasukkan urutan kombo tertentu dari tombol, diakhiri dengan menekan MULAI. </font><font style="vertical-align: inherit;">Sepertinya A dan / atau B harus tepat sebelum MULAI. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda melacak jalur kode yang menetapkan </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai ke 9, maka sebuah pola muncul: </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- itu adalah nilai yang meningkat yang dapat meningkat ketika </font></font><code>r0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai yang cocok ditemukan, atau nol. </font><font style="vertical-align: inherit;">Kasus paling aneh saat ini bukan nilai dalam rentang dari </font></font><code>0x0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hingga</font></font><code>0xB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, terjadi ketika memproses langkah-langkah dengan beberapa tombol, misalnya, ketika A dan B ditekan secara bersamaan. Seseorang yang mencoba memasukkan kombo ini biasanya tidak dapat menekan kedua tombol pada waktu yang sama persis saat melacak gamepad, jadi Anda harus memproses tombol yang ditekan yang pertama. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami terus menjelajahi jalur kode yang berbeda:</font></font><br><br><ul><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 9 saat KANAN ditekan pada alamat </font></font><code>8040ece8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 8 saat tombol kanan C pada alamat ditekan </font></font><code>8040eccc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 7 ketika tombol kiri C ditekan pada alamat </font></font><code>8040ecb0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 6 ketika KIRI ditekan di alamat </font></font><code>8040ec98</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 5 (dan r6 mengambil nilai 1) ketika BAWAH ditekan pada alamat </font></font><code>8040ec7c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 4 saat tombol atas C di alamat ditekan </font></font><code>8040ec64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 3 saat tombol bawah C pada alamat ditekan </font></font><code>8040ec48</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 2 saat UP ditekan di alamat </font></font><code>8040ec30</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li> <code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 1 (dan </font></font><code>r6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil nilai 1) ketika Z ditekan di alamat </font></font><code>8040ec1c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Urutan saat ini adalah: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z, ATAS, C-BAWAH, C-ATAS, BAWAH, KIRI, C-KIRI, C-KANAN, KANAN, A + B, MULAI </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelum memeriksa Z, satu lagi kondisi diperiksa: walaupun tombol baru harus ditekan Z, bendera saat ini harus sama </font></font><code>0x2030</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: bumper kiri dan kanan juga harus ditekan (mereka memiliki nilai </font></font><code>0x10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>0x20</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Selain itu, ATAS / BAWAH / KIRI / KANAN adalah tombol D-pad, bukan stik analog.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kode curang </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kombo lengkap terlihat seperti ini: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pegang bumper L + R dan tekan Z </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D-up </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C-BAWAH </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C-up </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D-down </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D-kiri </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C-kiri </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C-BENAR </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D-KANAN </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A + B </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MULAI </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu berhasil! </font><font style="vertical-align: inherit;">Hubungkan controller ke port kedua dan masukkan kode, setelah itu informasi debug muncul. </font><font style="vertical-align: inherit;">Setelah itu, Anda dapat mulai menekan tombol pada pengontrol kedua (atau bahkan ketiga) untuk melakukan berbagai tindakan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kombo ini akan berfungsi tanpa menambal nomor versi gim. </font><font style="vertical-align: inherit;">Itu bahkan dapat digunakan dalam salinan eceran game secara reguler tanpa alat curang atau mod konsol. </font><font style="vertical-align: inherit;">Memasukkan kembali kombo menonaktifkan mode zuru.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4d/fe4/7f0/b4dfe47f0139ba1af039decfb6274524.jpg" alt="Menggunakan kode pada GameCube nyata"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesan "ZURU% d /% d" </font></font><code>zurumode_callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">digunakan untuk menampilkan status kombinasi ini jika Anda memasukkannya ketika ID disk sudah sama </font></font><code>0x99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(mungkin untuk men-debug kode cheat itu sendiri). Angka pertama adalah posisi Anda saat ini dalam urutan, sesuai </font></font><code>r5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Yang kedua mengambil nilai 1, ketika tombol tertentu dari urutan dipegang, mereka dapat sesuai dengan ketika </font></font><code>r6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai diberikan 1. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagian besar pesan tidak menjelaskan apa yang mereka lakukan di layar, jadi untuk memahami tujuannya, Anda perlu menemukan fungsi yang memprosesnya. Misalnya, garis panjang bintang biru dan merah di bagian atas layar adalah penampung untuk menampilkan status berbagai pencarian. Ketika pencarian aktif, beberapa angka muncul di sana, melaporkan status pencarian.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layar hitam yang ditampilkan dengan menekan Z adalah konsol untuk menampilkan pesan debug, khususnya untuk aspek tingkat rendah, seperti alokasi memori, kesalahan tumpukan dan pengecualian buruk lainnya. Secara perilaku, </font></font><code>fault_callback_scroll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat diasumsikan bahwa ini digunakan untuk menampilkan kesalahan ini sebelum sistem restart. Itu tidak meluncurkan kesalahan ini, tetapi dapat menyebabkan mereka untuk mencetak beberapa karakter sampah dengan beberapa NOP. Saya pikir di masa depan akan sangat berguna untuk menampilkan pesan debug Anda sendiri:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/755/a33/b06755a33e0b0b8b010b7cbff7a26594.png" alt="JUTConsole karakter sampah"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah melakukan semua ini, saya menemukan bahwa masuk ke mode debug dengan menambal ID </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi </font></font><code>0x99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah diketahui orang lain: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://tcrf.net/Animal_Crossing#Debug_Mode</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(Juga ada catatan bagus pada tautan yang menunjukkan berbagai pesan, dan berbicara tentang hal-hal lain yang dapat dilakukan dengan controller di port 3.) Namun, sejauh yang saya tahu, belum ada yang menerbitkan kombinasi cheat.</font></font><br><br>  Itu saja.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ada fitur pengembang lain yang ingin saya jelajahi, seperti layar debug kartu dan layar pemilihan emulator NES, dan cara mengaktifkannya tanpa menggunakan patch. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/258/eb3/445/258eb3445236357c201c343d6c8ae4ba.png" alt="Layar pilih peta"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selain itu, saya akan menerbitkan artikel tentang rekayasa terbalik sistem dialog, acara, dan pencarian dengan tujuan menciptakan mod. </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413967/">https://habr.com/ru/post/id413967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413955/index.html">Siklus pengembangan lengkap perangkat IoT untuk kontrol pemanasan kolam pada ESP8266 di lingkungan Arduino</a></li>
<li><a href="../id413957/index.html">Contoh membuat aplikasi olahraga waktu nyata di Node.js</a></li>
<li><a href="../id413959/index.html">Gambar Docker Terkecil - Kurang dari 1000 Bytes</a></li>
<li><a href="../id413963/index.html">CRM Mini untuk bisnis kecil</a></li>
<li><a href="../id413965/index.html">Ulasan kode: Anda salah melakukannya</a></li>
<li><a href="../id413969/index.html">Technopark Russky - pengembangan inovatif dari miliaran anggaran</a></li>
<li><a href="../id413971/index.html">10+ media berita berbahasa Inggris untuk pelajar bahasa</a></li>
<li><a href="../id413973/index.html">Cavium ThunderX2 Evaluasi: Mimpi Arm Server Menjadi Nyata (Bagian 2)</a></li>
<li><a href="../id413977/index.html">Membangun sistem perlindungan anti-virus yang diperluas untuk perusahaan kecil. Bagian 3</a></li>
<li><a href="../id413979/index.html">Mitap "Bagaimana menjalankan guild dan komunitas?" dari Tutu.ru dan AgileVerse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>