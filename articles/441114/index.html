<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïï üí∑ üõåüèΩ Programaci√≥n relacional: dolor, inter√©s y dolor de nuevo. üë®üèæ‚Äçü§ù‚Äçüë®üèª üèåÔ∏è üéÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la publicaci√≥n anterior contamos en detalle lo que ense√±amos a los estudiantes en el campo de la "Programaci√≥n industrial". Para aquellos cuyo √°rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programaci√≥n relacional: dolor, inter√©s y dolor de nuevo.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hsespb/blog/441114/">  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci√≥n</a> anterior contamos en detalle lo que ense√±amos a los estudiantes en el campo de la "Programaci√≥n industrial".  Para aquellos cuyo √°rea de inter√©s se encuentra en un campo m√°s te√≥rico, por ejemplo, atra√≠dos por los nuevos paradigmas de programaci√≥n o las matem√°ticas abstractas utilizadas en la investigaci√≥n te√≥rica sobre programaci√≥n, existe otra especializaci√≥n: "Lenguajes de programaci√≥n". <br><br>  Hoy hablar√© sobre mi investigaci√≥n en el campo de la programaci√≥n relacional, que hago en la universidad y como estudiante investigadora en el laboratorio de herramientas de lenguaje JetBrains Research. <br><br>  ¬øQu√© es la programaci√≥n relacional?  Usualmente ejecutamos una funci√≥n con argumentos y obtenemos el resultado.  Y en el caso relacional, puede hacer lo contrario: arreglar el resultado y un argumento, y obtener el segundo argumento.  Lo principal es escribir el c√≥digo correctamente y ser paciente y tener un buen cl√∫ster. <br><br><img src="https://habrastorage.org/webt/_u/8b/t2/_u8bt2bceznm8e2ujbrvhwn8awy.jpeg"><br><a name="habracut"></a><br><h2>  Sobre mi </h2><br>  Mi nombre es Dmitry Rozplokhas, soy estudiante de primer a√±o del HSE de San Petersburgo, y el a√±o pasado me gradu√© del programa de licenciatura de la Universidad Acad√©mica en el campo de "Lenguajes de programaci√≥n".  Desde el tercer a√±o de estudios de pregrado, tambi√©n soy estudiante de investigaci√≥n en el laboratorio de herramientas ling√º√≠sticas de JetBrains Research. <br><br><h2>  Programaci√≥n relacional </h2><br><h3>  Hechos generales </h3><br>  La programaci√≥n relacional es cuando, en lugar de funciones, usted describe la relaci√≥n entre argumentos y el resultado.  Si el lenguaje se agudiza para esto, puede obtener ciertas bonificaciones, por ejemplo, la capacidad de ejecutar la funci√≥n en la direcci√≥n opuesta (como resultado, restaurar los posibles valores de los argumentos). <br><br>  En general, esto se puede hacer en cualquier lenguaje l√≥gico, pero el inter√©s en la programaci√≥n relacional surgi√≥ simult√°neamente con el advenimiento de un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">miniKanren de</a> lenguaje l√≥gico puro minimalista <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hace</a> unos diez a√±os, que hizo posible describir y usar convenientemente tales relaciones. <br><br>  Estos son algunos de los casos de uso m√°s avanzados: puede escribir un comprobador de pruebas y usarlo para encontrar evidencia ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Near et al., 2008</a> ) o crear un int√©rprete para alg√∫n lenguaje y usarlo para generar programas de pruebas ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Byrd et al., 2017</a> ). <br><br><h3>  Ejemplo de sintaxis y juguete </h3><br>  miniKanren es un lenguaje peque√±o; solo se utilizan construcciones matem√°ticas b√°sicas para describir las relaciones.  Este es un lenguaje incrustado, sus primitivas son una biblioteca para alg√∫n lenguaje externo, y se pueden usar peque√±os programas miniKanren dentro de un programa en otro idioma. <br><br>  Idiomas extranjeros adecuados para miniKanren, un mont√≥n.  Inicialmente, estaba Scheme, estamos trabajando con la versi√≥n para Ocaml ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OCanren</a> ), y la lista completa se puede ver en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">minikanren.org</a> .  Los ejemplos en este art√≠culo tambi√©n estar√°n en OCanren.  Muchas implementaciones agregan funciones auxiliares, pero nos centraremos solo en el lenguaje central. <br><br>  Comencemos con los tipos de datos.  Convencionalmente, se pueden dividir en dos tipos: <br><br><ul><li>  Las constantes son algunos datos del idioma en el que estamos incrustados.  Cadenas, n√∫meros, incluso matrices.  Pero para el miniKanren b√°sico, todo esto es un cuadro negro, las constantes solo se pueden verificar para la igualdad. <br></li><li>  Un "t√©rmino" es una tupla de varios elementos.  Com√∫nmente utilizado de la misma manera que los constructores de datos en Haskell: constructor de datos (cadena) m√°s cero o m√°s par√°metros.  OCanren utiliza constructores de datos regulares de OCaml. <br></li></ul><br>  Por ejemplo, si queremos trabajar con matrices en miniKanren, entonces debe describirse en t√©rminos de t√©rminos similares a los lenguajes funcionales, como una lista individualmente vinculada.  Una lista es una lista vac√≠a (indicada por un t√©rmino simple) o un par del primer elemento de la lista ("encabezado") y otros elementos ("cola"). <br><br><pre><code class="plaintext hljs">let emptyList = Nil let list_123 = Cons (1, Cons (2, Cons (3, Nil)))</code> </pre> <br>  Un programa miniKanren es la relaci√≥n entre algunas variables.  Al inicio, el programa proporciona todos los valores posibles de las variables en forma general.  A menudo, las implementaciones le permiten limitar el n√∫mero de respuestas en la salida, por ejemplo, encontrar solo la primera; la b√∫squeda no siempre se detiene despu√©s de encontrar todas las soluciones. <br><br>  Puede escribir varias relaciones que se definen entre s√≠ e incluso se llaman recursivamente como funciones.  Por ejemplo, a continuaci√≥n, en lugar de la funci√≥n <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>c</mi><mi>o</mi><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.477ex" height="2.66ex" viewBox="0 -832 8385.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-28" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-2C" x="4046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="4491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-29" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-2192" x="5587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-63" x="6866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6F" x="7299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6E" x="7785" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üí</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> append (a, b) ‚Üí con </script>  define la relaci√≥n <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.502ex" height="2.66ex" viewBox="0 -832 6674.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6F" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-28" x="3612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-2C" x="4531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="4976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-2C" x="5406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-63" x="5851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-29" x="6284" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> appendo (a, b, c) </script>  : lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.007ex" height="1.455ex" viewBox="0 -520.7 433.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-63" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> c </script>  es una concatenaci√≥n de listas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> a </script>  y <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> b </script>  .  Las funciones que devuelven relaciones terminan tradicionalmente con una "o" para distinguirlas de las funciones ordinarias. <br><br>  Una relaci√≥n se escribe como una declaraci√≥n con respecto a sus argumentos.  Tenemos <b>cuatro operaciones b√°sicas</b> : <br><br><ul><li>  Unificaci√≥n o igualdad (===) de dos t√©rminos, los t√©rminos pueden incluir variables.  Por ejemplo, puede escribir la relaci√≥n "lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> l </script>  consta de un elemento <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> x </script>  ": <br><br><pre> <code class="plaintext hljs">let isSingletono xl = l === Cons (x, Nil)</code> </pre></li><li>  Conjunci√≥n (l√≥gica "y") y disyunci√≥n (l√≥gica "o"), como en la l√≥gica ordinaria.  Los OCanren se denominan &amp;&amp;&amp; y |||.  Pero b√°sicamente no hay una negaci√≥n l√≥gica en MiniKanren. <br></li><li>  Agregar nuevas variables.  En l√≥gica, es un cuantificador de la existencia.  Por ejemplo, para verificar que la lista no est√© vac√≠a, debe verificar que la lista consta de una cabeza y una cola.  No son argumentos de la relaci√≥n, por lo que debe crear nuevas variables: <br><br><pre> <code class="plaintext hljs">let nonEmptyo l = fresh (ht) (l === Cons (h, t))</code> </pre></li></ul><br>  Una relaci√≥n puede invocarse de forma recursiva.  Por ejemplo, debe definir el elemento "relaci√≥n" <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> x </script>  se encuentra en la lista ".  Resolveremos este problema analizando casos triviales, como en los lenguajes funcionales: <br><br><ol><li>  O el jefe de la lista es <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> x </script><br></li><li>  Ya sea <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> x </script>  se encuentra en la cola <br></li></ol><br><pre> <code class="plaintext hljs">let membero lx = fresh (ht) ( (l === Cons (h, t)) &amp;&amp;&amp; (x === h ||| membero tx) )</code> </pre><br>  La versi√≥n b√°sica del lenguaje se basa en estas cuatro operaciones.  Tambi√©n hay extensiones que le permiten usar otras operaciones.  El m√°s √∫til de ellos es la restricci√≥n de desigualdad para establecer la desigualdad de dos t√©rminos (= / =). <br><br>  A pesar del minimalismo, miniKanren es un lenguaje bastante expresivo.  Por ejemplo, observe la concatenaci√≥n relacional de dos listas.  La funci√≥n de dos argumentos se convierte en una triple relaci√≥n " <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.227ex" height="2.057ex" viewBox="0 -780.1 959 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="529" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> ab </script>  es una concatenaci√≥n de listas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> a </script>  y <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> b </script>  ". <br><br><pre> <code class="plaintext hljs">let appendo ab ab = (a === Nil &amp;&amp;&amp; ab === b) ||| (fresh (ht tb) (*  :  fresh   &amp;&amp;&amp; *) (a = Cons (h, t)) (appendo tb tb) (ab === Cons (h, tb)))</code> </pre><br>  La soluci√≥n no es estructuralmente diferente de c√≥mo la escribir√≠amos en un lenguaje funcional.  Analizamos dos casos unidos por una cl√°usula: <br><br><ol><li>  Si la primera lista est√° vac√≠a, entonces la segunda lista y el resultado de la concatenaci√≥n son iguales. <br></li><li>  Si la primera lista no est√° vac√≠a, la analizamos en la cabeza y la cola y construimos el resultado usando una llamada recursiva de la relaci√≥n. <br></li></ol><br>  Podemos hacer una solicitud a esta relaci√≥n, arreglando el primer y segundo argumento; obtenemos la concatenaci√≥n de listas: <br><br><pre> <code class="plaintext hljs">run 1 (Œª q -&gt; appendo (Cons (1, Cons (2, Nil))) (Cons (3, Cons (4, Nil))) q)</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = Cons (1, Cons (2, Cons (3, Cons (4, Nil))))</code> </pre> <br>  Podemos arreglar el √∫ltimo argumento: obtenemos todas las particiones de esta lista en dos. <br><br><pre> <code class="plaintext hljs">run 4 (Œª qr -&gt; appendo qr (Cons (1, Cons (2, Cons (3, Nil)))))</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = Nil, r = Cons (1, Cons (2, Cons (3, Nil))) | q = Cons (1, Nil), r = Cons (2, Cons (3, Nil)) | q = Cons (1, Cons (2, Nil)), r = Cons (3, Nil) | q = Cons (1, Cons (2, Cons (3, Nil))), r = Nil</code> </pre><br>  Puedes hacer cualquier otra cosa.  Un ejemplo un poco m√°s no est√°ndar, en el que arreglamos solo parte de los argumentos: <br><br><pre> <code class="plaintext hljs">run 1 (Œª qr -&gt; appendo (Cons (1, Cons (q, Nil))) r (Cons (1, Cons (2, Cons (3, Cons (4, Nil))))))</code> </pre> <br>  ‚áí <br><pre> <code class="plaintext hljs">q = 2, r = Cons (3, Cons (4, Nil))</code> </pre> <br><br><h3>  Como funciona </h3><br>  Desde el punto de vista de la teor√≠a, aqu√≠ no hay nada impresionante: siempre puede comenzar a buscar todas las opciones posibles para todos los argumentos, verificando para cada conjunto si se comportan con respecto a una funci√≥n / relaci√≥n dada como nos gustar√≠a (ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Algoritmo del Museo Brit√°nico"</a> ) .  Es interesante el hecho de que aqu√≠ la b√∫squeda (en otras palabras, la b√∫squeda de una soluci√≥n) utiliza solo la estructura de la relaci√≥n descrita, por lo que puede ser relativamente efectiva en la pr√°ctica. <br><br>  La b√∫squeda est√° relacionada con la acumulaci√≥n de informaci√≥n sobre diversas variables en el estado actual.  No sabemos nada acerca de cada variable, o sabemos c√≥mo se expresa en t√©rminos, valores y otras variables.  Por ejemplo: <br><br> <code>b = Cons (x, y) <br> c = Cons (10, z) <br> x = ? <br> y = ? <br> z = ? <br></code> <br>  Al pasar por la unificaci√≥n, observamos dos t√©rminos con esta informaci√≥n en mente y actualizamos el estado o finalizamos la b√∫squeda si dos t√©rminos no pueden unificarse.  Por ejemplo, completando la unificaci√≥n b = c, obtenemos nueva informaci√≥n: x = 10, y = z.  Pero la unificaci√≥n b = Nil causar√° una contradicci√≥n. <br><br>  Buscamos en conjunciones secuencialmente (para que la informaci√≥n se acumule), y en una disyunci√≥n dividimos la b√∫squeda en dos ramas paralelas y avanzamos, alternando pasos en ellas: esta es la llamada b√∫squeda intercalada.  Gracias a esta alternancia, la b√∫squeda est√° completa: cada soluci√≥n adecuada se encontrar√° despu√©s de un tiempo finito.  Por ejemplo, en el lenguaje Prolog esto no es as√≠.  Hace algo as√≠ como un rastreo profundo (que puede colgar en una rama infinita), y la b√∫squeda entrelazada es esencialmente una modificaci√≥n dif√≠cil de rastreo amplio. <br><br>  Veamos ahora c√≥mo funciona la primera consulta de la secci√≥n anterior.  Como appendo tiene llamadas recursivas, agregaremos √≠ndices a las variables para distinguirlas.  La siguiente figura muestra el √°rbol de enumeraci√≥n.  Las flechas indican la direcci√≥n de difusi√≥n de la informaci√≥n (con la excepci√≥n del retorno de la recursividad).  Entre disyunciones, la informaci√≥n no se distribuye, y entre conjunciones se distribuye de izquierda a derecha. <br><br><img src="https://habrastorage.org/webt/3j/np/fg/3jnpfgkkgbyyf5-or5g_noicxg4.png"><br><br><ol><li>  Comenzamos con una llamada externa para anexar.  La rama izquierda de la disyunci√≥n muere debido a la controversia: lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> a </script>  no vacio <br></li><li>  En la rama derecha se introducen variables auxiliares, que luego se utilizan para "analizar" la lista <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.284ex" height="1.696ex" viewBox="0 -520.7 983.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-31" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-15"> a_1 </script>  en la cabeza y la cola. <br></li><li>  Despu√©s de esto, la llamada recursiva appendo ocurre para a = [2], b = [3, 4], ab = ?, en la cual ocurren operaciones similares. <br></li><li>  Pero en la tercera llamada al ap√©ndice, ya tenemos a = [], b = [3,4], ab =?, Y luego la disyunci√≥n izquierda simplemente funciona, despu√©s de lo cual obtenemos la informaci√≥n ab = b.  Pero en la rama derecha hay una contradicci√≥n. <br></li><li>  Ahora podemos escribir toda la informaci√≥n disponible y restaurar la respuesta sustituyendo los valores de las variables: <br><br> <code>a_1 = [1, 2] <br> b_1 = [3, 4] <br> ab_1 = Cons h_1 tb_1 <br> h_1 = 1 <br> a_2 = t_1 = [2] <br> b_2 = b_1 = [3, 4] <br> ab_2 = tb_1 = Cons h_2 tb_2 <br> h_2 = 2 <br> a_3 = t_2 = Nil <br> b_3 = b_2 = b_1 = [3, 4] <br> ab_3 = tb_2 = b_3 = [3, 4] <br></code> <br></li><li>  Se sigue que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.282ex" height="2.298ex" viewBox="0 -780.1 1412.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-16"> ab_1 </script>  = Contras (1, Contras (2, [3, 4])) = [1, 2, 3, 4], seg√∫n sea necesario. <br></li></ol><br><br><h2>  Lo que hice en la licenciatura </h2><br><h3>  Todo se ralentiza </h3><br>  Como siempre: le prometen que todo ser√° s√∫per declarativo, pero en realidad necesita adaptarse al lenguaje y escribir todo de una manera especial (teniendo en cuenta c√≥mo se ejecutar√° todo) para que al menos algo funcione, excepto los ejemplos m√°s simples.  Esto es decepcionante. <br><br>  Uno de los primeros problemas a los que se enfrenta un programador principiante de miniKanren es que depende en gran medida del orden en que describa las condiciones (conjuntos) en el programa.  Con una orden, todo est√° bien, pero se intercambiaron dos conjunciones y todo comenz√≥ a funcionar muy lentamente o no termin√≥ en absoluto.  Esto es inesperado <br><br>  Incluso en el ejemplo con appendo, el lanzamiento en la direcci√≥n opuesta (generando la divisi√≥n de la lista en dos) no finaliza a menos que especifique expl√≠citamente cu√°ntas respuestas desea (luego la b√∫squeda finalizar√° despu√©s de encontrar el n√∫mero requerido). <br><br>  Supongamos que arreglamos las variables originales de la siguiente manera: a = ?, B = ?, Ab = [1, 2, 3] (vea la figura a continuaci√≥n) En la segunda rama, esta informaci√≥n no se utilizar√° de ninguna manera durante una llamada recursiva (la variable ab y restricciones en <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>h</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.393ex" height="2.298ex" viewBox="0 -780.1 1030.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-31" x="815" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> h_1 </script>  y <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.891ex" height="2.298ex" viewBox="0 -780.1 1244.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> tb_1 </script>  aparecer solo despu√©s de esta llamada).  Por lo tanto, en la primera llamada recursiva, todos sus argumentos ser√°n variables libres.  Esta llamada generar√° todo tipo de triples a partir de dos listas y su concatenaci√≥n (y esta generaci√≥n nunca terminar√°), y luego entre ellas se elegir√°n aquellas para las cuales el tercer elemento es exactamente el que necesitamos. <br><br><img src="https://habrastorage.org/webt/pg/gn/jg/pggnjghrld84iyiybo9au0nyilk.png"><br><br>  No todo es tan malo como podr√≠a parecer a primera vista, porque clasificaremos estos triples en grupos grandes.  Las listas con la misma longitud pero elementos diferentes no difieren desde el punto de vista de la funci√≥n, por lo tanto, caer√°n en una soluci√≥n: habr√° variables libres en lugar de los elementos.  Sin embargo, seguiremos clasificando todas las longitudes posibles de la lista, aunque solo necesitamos una, y sabemos cu√°l.  Este es un uso muy irracional (no uso) de la informaci√≥n en la b√∫squeda. <br><br>  Este ejemplo espec√≠fico es f√°cil de solucionar: solo necesita mover la llamada recursiva hasta el final y todo funcionar√° como deber√≠a.  Antes de la llamada recursiva, se realizar√° la unificaci√≥n con la variable ab y la llamada recursiva se realizar√° desde la cola de la lista dada (como una funci√≥n recursiva normal).  Esta definici√≥n con una llamada recursiva al final funcionar√° bien en todas las direcciones: a la llamada recursiva, logramos acumular toda la informaci√≥n posible sobre los argumentos. <br><br>  Sin embargo, en cualquier ejemplo un poco m√°s complejo, cuando hay varias llamadas significativas, no existe un orden espec√≠fico para el que todo estar√° bien.  El ejemplo m√°s simple: expandir una lista usando concatenaci√≥n.  Arreglamos el primer argumento, necesitamos este orden en particular, arreglamos el segundo, necesitamos intercambiar las llamadas.  De lo contrario, se busca durante mucho tiempo y la b√∫squeda no finaliza. <br><br><pre> <code class="plaintext hljs">reverso x xr = (x === Nil &amp;&amp;&amp; xr == Nil) ||| (fresh (ht tr) (x === Cons (h, t)) (reverso t tr) (appendo tr (Cons (h, Nil)) xr))</code> </pre><br>  Esto se debe a que los procesos de b√∫squeda intercalados se conjugan secuencialmente y nadie podr√≠a pensar en c√≥mo hacerlo de manera diferente sin perder una eficiencia aceptable, aunque lo intentaron.  Por supuesto, alg√∫n d√≠a se encontrar√°n todas las soluciones, pero con el orden incorrecto, se buscar√°n durante un tiempo tan poco realista que no tiene sentido pr√°ctico. <br><br>  Existen t√©cnicas para escribir programas para evitar este problema.  Pero muchos de ellos requieren habilidades e imaginaci√≥n especiales para su uso, y el resultado son programas muy grandes.  Un ejemplo es el t√©rmino t√©cnica de l√≠mite de tama√±o y la definici√≥n de divisi√≥n binaria con el resto mediante la multiplicaci√≥n con su ayuda.  En lugar de escribir est√∫pidamente una definici√≥n matem√°tica <br><br><pre> <code class="plaintext hljs">divo nmqr = (fresh (mq) (multo mq mq) (pluso mq rn) (lto rm))</code> </pre><br>  Tengo que escribir una definici√≥n recursiva de 20 l√≠neas + una gran funci√≥n auxiliar que no es realista de leer (todav√≠a no entiendo lo que se est√° haciendo all√≠).  Se puede encontrar en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">disertaci√≥n de</a> Will Bird en la secci√≥n Aritm√©tica binaria pura. <br><br>  En vista de lo anterior, me gustar√≠a proponer alg√∫n tipo de modificaci√≥n de b√∫squeda para que los programas simples y naturalmente escritos tambi√©n funcionen. <br><br><h3>  Optimizar </h3><br>  Notamos que cuando todo est√° mal, la b√∫squeda no terminar√° a menos que indique expl√≠citamente el n√∫mero de respuestas y lo rompa.  Por lo tanto, decidieron luchar precisamente con lo incompleto de la b√∫squeda: es mucho m√°s f√°cil concretar que "funciona durante mucho tiempo".  En general, por supuesto, solo quiero acelerar la b√∫squeda, pero es mucho m√°s dif√≠cil de formalizar, as√≠ que comenzamos con una tarea menos ambiciosa. <br><br>  En la mayor√≠a de los casos, cuando la b√∫squeda diverge, ocurre una situaci√≥n que es f√°cil de rastrear.  Si una funci√≥n se llama recursivamente, y en una llamada recursiva, los argumentos son iguales o menos espec√≠ficos, entonces en la llamada recursiva se genera otra subtarea de este tipo y se produce una recursi√≥n infinita.  Formalmente, suena as√≠: hay una sustituci√≥n, aplicando cu√°l a los nuevos argumentos, obtenemos los viejos.  Por ejemplo, en la figura a continuaci√≥n, una llamada recursiva es una generalizaci√≥n del original: puede sustituir <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>c</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.061ex" height="1.696ex" viewBox="0 -520.7 887.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-32" x="613" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> c_2 </script>  = [x, 3] <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.263ex" height="2.298ex" viewBox="0 -780.1 974.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhiz6q7aB3IH0oXBl42puBr7gKmrCw#MJMAIN-32" x="736" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> d_2 </script>  = x y recibe la llamada original. <br><br><img src="https://habrastorage.org/webt/kh/22/mk/kh22mkjyiwzn3as3manr6jftdrm.png"><br><br>  Se puede rastrear que esta situaci√≥n tambi√©n ocurre en los ejemplos de divergencia que ya hemos conocido.  Como escrib√≠ anteriormente, cuando ejecuta appendo en la direcci√≥n opuesta, se realizar√° una llamada recursiva con variables libres en lugar de todas las variables, que, por supuesto, es menos espec√≠fica que la llamada original, en la que se solucion√≥ el tercer argumento. <br><br>  Si corremos reverso con x =?  y xr = [1, 2, 3], se puede ver que la primera llamada recursiva volver√° a suceder con dos variables libres, por lo que, obviamente, los nuevos argumentos pueden transferirse nuevamente a los anteriores. <br><br><pre> <code class="plaintext hljs">reverso x x_r  (* x = ?, x_r = [1, 2, 3] *) fresh (ht t_r) (x === Cons (h, t)) (* x_r = [1, 2, 3] = Cons 1 (Cons 2 (Cons 3 Nil))) x = Cons (h, t) *) (reverso t t_r) (* :   t=x, t_r=[1,2,3],    *)</code> </pre><br>  Usando este criterio, podemos detectar divergencias en el proceso de ejecuci√≥n del programa, entender que todo est√° mal con este orden y cambiarlo din√°micamente a otro.  Gracias a esto, idealmente, se seleccionar√° el orden correcto para cada llamada. <br>  Puede hacerlo ingenuamente: si se encuentra divergencia en el conjunto, entonces ingresamos todas las respuestas que ya encontr√≥ y posponemos su ejecuci√≥n para m√°s adelante, "saltando" el pr√≥ximo conjunto.  Entonces, quiz√°s, cuando continuemos ejecut√°ndolo, ya se conocer√° m√°s informaci√≥n y no surgir√°n divergencias.  En nuestros ejemplos, esto conducir√° a los conjuntos de intercambio deseados. <br><br>  Hay formas menos ingenuas que permiten, por ejemplo, no perder el trabajo ya realizado, posponiendo el rendimiento.  Ya con la variante m√°s est√∫pida de cambiar el orden, la divergencia ha desaparecido en todos los ejemplos simples que sufren de la no conmutatividad de la conjunci√≥n, que sabemos, incluyendo: <br><br><ul><li>  ordenar la lista de n√∫meros (tambi√©n es la generaci√≥n de todas las permutaciones de la lista), <br></li><li>  Aritm√©tica de peano y aritm√©tica binaria, <br></li><li>  generaci√≥n de √°rboles binarios de un tama√±o dado. <br></li></ul><br>  Esta fue una sorpresa inesperada para nosotros.  Adem√°s de la divergencia, la optimizaci√≥n tambi√©n lucha contra la desaceleraci√≥n del programa.  Los diagramas a continuaci√≥n muestran el tiempo de ejecuci√≥n de programas con dos √≥rdenes diferentes en conjunciones (relativamente hablando, uno de los mejores y uno de muchos malos).  Fue lanzado en una computadora con la configuraci√≥n de Intel Core i7 CPU M 620, 2.67GHz x 4, 8GB de RAM con el sistema operativo Ubuntu 16.04. <br><br>  Cuando el <b>orden ya es √≥ptimo</b> (lo seleccionamos a mano), la optimizaci√≥n ralentiza un poco la ejecuci√≥n, pero no es cr√≠tica <br><img src="https://habrastorage.org/webt/3a/si/4z/3asi4zevbggj_7hmjk6j2lilk0u.png"><br><br>  Pero cuando el <b>orden no es √≥ptimo</b> (por ejemplo, adecuado solo para lanzar en la direcci√≥n opuesta), con la optimizaci√≥n resulta mucho m√°s r√°pido.  Las cruces significan que simplemente no pod√≠amos esperar hasta el final, funciona mucho m√°s tiempo <br><img src="https://habrastorage.org/webt/yw/-_/sn/yw-_snesnrnadqet8zmgbbpk3la.png"><br><br><h3>  Como no romper nada </h3><br>  Todo esto se bas√≥ exclusivamente en la intuici√≥n y quer√≠amos demostrarlo estrictamente.  Teor√≠a despu√©s de todo. <br><br>  Para probar algo, necesitamos una sem√°ntica formal del lenguaje.  Describimos la sem√°ntica operativa para miniKanren.  Esta es una versi√≥n simplificada y matematizada de una implementaci√≥n de lenguaje real.  Utiliza una versi√≥n muy limitada (por lo tanto, f√°cil de usar), en la que puede especificar solo la ejecuci√≥n final de los programas (la b√∫squeda debe ser final).  Pero para nuestros prop√≥sitos, esto es exactamente lo que se necesita. <br><br>  Para probar el criterio, primero se formula el lema: la ejecuci√≥n del programa desde un estado m√°s general funcionar√° por m√°s tiempo.  Formalmente: el √°rbol de salida en sem√°ntica tiene una gran altura.  Esto se prueba por inducci√≥n, pero la afirmaci√≥n debe generalizarse con mucho cuidado, de lo contrario la hip√≥tesis inductiva no ser√° lo suficientemente fuerte.  De este lema se desprende que si un criterio funcion√≥ durante la ejecuci√≥n del programa, entonces el √°rbol de salida tiene su propio sub√°rbol de mayor o igual altura.  Esto da una contradicci√≥n, ya que para la sem√°ntica dada inductivamente todos los √°rboles son finitos.  Esto significa que en nuestra sem√°ntica la ejecuci√≥n de este programa es inexpresable, lo que implica que la b√∫squeda en √©l no termina. <br><br>  El m√©todo propuesto es conservador: cambiamos algo solo cuando estamos convencidos de que todo ya es completamente malo e imposible de empeorar, por lo tanto, no rompemos nada en t√©rminos de finalizaci√≥n del programa. <br><br>  La prueba principal contiene muchos detalles, por lo que ten√≠amos el deseo de verificarlo formalmente escribiendo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Coq</a> .  Sin embargo, result√≥ ser bastante dif√≠cil t√©cnicamente, por lo que enfriamos nuestro ardor y nos dedicamos seriamente a la verificaci√≥n autom√°tica solo en la magistratura. <br><br><h3>  Publicar </h3><br>  En el medio del trabajo, presentamos este estudio en la sesi√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√≥sters</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ICFP-2017 en la Competencia de Investigaci√≥n Estudiantil</a> .  All√≠ nos reunimos con los creadores del lenguaje, Will Bird y Daniel Friedman, y dijeron que es significativo y que debemos analizarlo con m√°s detalle.  Por cierto, Will es generalmente amigo de nuestro laboratorio en JetBrains Research.  Toda nuestra investigaci√≥n sobre miniKanren comenz√≥ cuando, en 2015, Will realiz√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escuela de verano</a> en programaci√≥n relacional en San Petersburgo. <br><br>  Un a√±o despu√©s, llevamos nuestro trabajo a una forma m√°s o menos completa y presentamos el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> en Principios y pr√°ctica de la programaci√≥n declarativa 2018. <br><br><h2>  ¬øQu√© hago en la escuela de posgrado? </h2><br>  Quer√≠amos continuar participando en la sem√°ntica formal para miniKanren y una prueba rigurosa de todas sus propiedades.  En la literatura, generalmente las propiedades (a menudo lejos de ser obvias) simplemente se postulan y demuestran mediante ejemplos, pero nadie prueba nada.  Por ejemplo, el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libro principal</a> sobre programaci√≥n relacional es una lista de preguntas y respuestas, cada una de las cuales est√° dedicada a un c√≥digo espec√≠fico.  Incluso para la declaraci√≥n de integridad de la b√∫squeda entrelazada (y esta es una de las ventajas m√°s importantes de miniKanren sobre Prolog est√°ndar), es imposible encontrar una redacci√≥n estricta.  Decidimos que no puedes vivir as√≠ y, despu√©s de recibir una bendici√≥n de Will, nos pusimos a trabajar. <br><br>  Perm√≠tame recordarle que la sem√°ntica que desarrollamos en la etapa anterior ten√≠a una limitaci√≥n significativa: solo se describieron los programas con b√∫squeda finita.  En miniKanren, los programas en ejecuci√≥n tambi√©n son interesantes porque pueden enumerar un n√∫mero infinito de respuestas.  Por lo tanto, necesit√°bamos una sem√°ntica m√°s genial. <br><br>  Hay muchas formas est√°ndar diferentes para definir la sem√°ntica de un lenguaje de programaci√≥n, solo tuvimos que elegir una de ellas y adaptarla a un caso espec√≠fico.  Describimos la sem√°ntica como un sistema de transici√≥n etiquetado: un conjunto de posibles estados en el proceso de b√∫squeda y transiciones entre estos estados, algunos de los cuales est√°n marcados, lo que significa que en la etapa actual de la b√∫squeda, se encontr√≥ otra respuesta.  La ejecuci√≥n de un programa en particular est√° determinada por la secuencia de tales transiciones.  Estas secuencias pueden ser finitas (llegando a un estado terminal) o infinitas, describiendo simult√°neamente la finalizaci√≥n y la no finalizaci√≥n de programas.  Para especificar completamente dicho objeto matem√°ticamente, uno necesita usar una definici√≥n coinductiva. <br><br>     <b></b> ‚Äî     .      <b></b> ,            (,          ,  ‚Äî     ..).          ,   miniKanren'      (   ). <br><br>      ,    ,        ‚Äî        .    .  (  ),       ,       . <br>            (    ):        , ,        ,      . <br><br>           , ,  /     . <br><br>             Coq'a.        ,             ,      ¬´. Qed¬ª.      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441114/">https://habr.com/ru/post/441114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441098/index.html">Profundidades SIEM: correlaciones listas para usar. Parte 4. Modelo del sistema como contexto de reglas de correlaci√≥n</a></li>
<li><a href="../441102/index.html">Kaspersky Mobile Talks: una reuni√≥n para desarrolladores avanzados</a></li>
<li><a href="../441104/index.html">Obtenci√≥n de informaci√≥n y omisi√≥n de la autenticaci√≥n de dos factores en tarjetas bancarias de TOP-10 (Ucrania)</a></li>
<li><a href="../441108/index.html">Ya no es un concepto: Samsung present√≥ el tel√©fono plegable Galaxy Fold por $ 1980</a></li>
<li><a href="../441112/index.html">Fijamos la autorizaci√≥n LDAP a Kubernetes</a></li>
<li><a href="../441116/index.html">KubeSail y su cl√∫ster Kubernetes gratuito para desarrolladores</a></li>
<li><a href="../441118/index.html">Los resultados del experimento con una semana laboral de cuatro d√≠as para trabajadores de oficina en Nueva Zelanda</a></li>
<li><a href="../441122/index.html">EAV de Magento 2: descripci√≥n general de las estructuras de datos</a></li>
<li><a href="../441124/index.html">Positivos falsos en PVS-Studio: cu√°n profundo es la madriguera del conejo</a></li>
<li><a href="../441126/index.html">Falsos positivos en PVS-Studio: qu√© tan profundo es la madriguera del conejo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>