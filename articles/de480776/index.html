<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèø ü§´ üôåüèº Wir stellen Active Directory mit allen m√∂glichen Methoden bereit. üåô ‚¨úÔ∏è üíâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine der wirklich n√ºtzlichen Neuerungen in Windows Server 2019 ist die M√∂glichkeit, Server zu betreten, ohne Sysprep oder eine Neuinstallation durchf√º...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir stellen Active Directory mit allen m√∂glichen Methoden bereit.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ultravds/blog/480776/">  Eine der wirklich n√ºtzlichen Neuerungen in Windows Server 2019 ist die M√∂glichkeit, Server zu betreten, ohne Sysprep oder eine Neuinstallation durchf√ºhren zu m√ºssen.  Die Bereitstellung der Infrastruktur auf virtuellen Servern mit Windows Server war noch nie einfacher. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/832/bb5/ece/832bb5eceeb41372149067c20c1e4961.png"></div><br>  Heute werden wir dar√ºber sprechen, wie einfach es ist, Active Directory √ºber Powershell zu installieren und zu verwalten. <br><a name="habracut"></a><br><h2>  Legen Sie die Rolle fest </h2><br>  <b>RSAT oder lokaler Server mit GUI:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b8/87e/6fa/6b887e6fa363eca9beb473dc1f992526.png"></div><br>  Zuerst m√ºssen Sie den Server zu RSAT hinzuf√ºgen.  Es wird auf der Hauptseite unter Verwendung eines Domainnamens oder einer IP-Adresse hinzugef√ºgt.  Stellen Sie sicher, dass Sie das Login im Format <code>local\Administrator</code> eingeben, sonst akzeptiert der Server das Passwort nicht. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0e/5b7/e62/c0e5b7e627ac9f0ff9c2da7c0cd7fc2c.png"></div><br>  Gehen Sie zum Hinzuf√ºgen von Komponenten und w√§hlen Sie AD DS aus. <br><br>  <b>Powershell:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd6/a61/300/cd6a61300f8bf4a746faee1922d99fda.png"></div><br>  Wenn Sie den Namen der Systemkomponente nicht kennen, k√∂nnen Sie den Befehl ausf√ºhren und eine Liste der verf√ºgbaren Komponenten, ihrer Abh√§ngigkeiten und Namen abrufen. <br><br><pre> <code class="plaintext hljs">Get-WindowsFeature</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1cd/253/2df/1cd2532dfd27b952e5a8ca2592bd8577.png"></div><br>  Kopieren Sie den Namen der Komponente und fahren Sie mit der Installation fort. <br><br><pre> <code class="plaintext hljs">Install-WindowsFeature -Name AD-Domain-Services</code> </pre> <br>  Windows Admin Center: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbe/5f0/0b2/bbe5f00b224a5590bed0a70959e1e433.png"></div><br>  Gehen Sie zu "Rollen und Funktionen" und w√§hlen Sie ADDS (Active Directory Domain Services) aus. <br><br>  Und das ist buchst√§blich alles.  Es ist derzeit nicht m√∂glich, Active Directory √ºber das Windows Admin Center zu verwalten.  Seine Erw√§hnung ist nichts weiter als eine Erinnerung daran, wie nutzlos er bisher ist. <br><br><h2>  Stellen Sie den Server auf einen Dom√§nencontroller hoch </h2><br>  Und daf√ºr schaffen wir einen neuen Wald. <br><br>  <b>RSAT oder lokale GUI-Server:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/960/6ab/cb7/9606abcb74f747172d941f011fbec085.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c3/803/f19/7c3803f19052f098ee5755b9ec476326.png"></div><br>  Wir empfehlen dringend, dass Sie alles als Standardeinstellung belassen, alle Komponenten funktionieren einwandfrei und m√ºssen nicht ohne besondere Notwendigkeit ber√ºhrt werden. <br><br>  <b>Powershell:</b> <br><br>  Zuerst m√ºssen Sie eine Gesamtstruktur erstellen und ein Kennwort daf√ºr festlegen.  Powershell hat einen separaten Variablentyp f√ºr Kennw√∂rter - SecureString, mit dem ein Kennwort sicher im RAM gespeichert und sicher √ºber das Netzwerk √ºbertragen wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a8d/7b6/6e1/a8d7b66e1f1487312d192a673b693d11.png"></div><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString</code> </pre> <br>  Jedes Cmdlet, das das Kennwort eines anderen Benutzers verwendet, muss auf diese Weise eingegeben werden.  Schreiben Sie zuerst das Kennwort in SecureString und geben Sie dann diese Variable im Cmdlet an. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f37/51c/ea7/f3751cea704deceb2ae284068a3aac11.png"></div><br><pre> <code class="plaintext hljs">Install-ADDSForest -DomainName test.domain -SafeModeAdministratorPassword $pass</code> </pre> <br>  Wie bei der Installation √ºber die GUI ist auch die Ausgabe an die Konsole gleich.  Im Gegensatz zu einem Server mit einer grafischen Benutzeroberfl√§che ist f√ºr die Installation einer Rolle und eines Servers als Dom√§nencontroller kein Neustart erforderlich. <br><br>  Die Installation des Controllers mit RSAT dauert l√§nger als mit Powershell. <br><br><h2>  Wir verwalten die Domain </h2><br>  Um zu verstehen, wie stark sich die Active Directory-Verwaltung durch Powershell und AD AC (Active Directory-Verwaltungscenter) unterscheidet, sollten Sie ein paar Arbeitsbeispiele betrachten. <br><br><h3>  Erstellen Sie einen neuen Benutzer </h3><br>  Angenommen, wir m√∂chten einen Benutzer in der Benutzergruppe erstellen und m√∂chten, dass er ein Kennwort f√ºr sich selbst festlegt.  √úber AD AC sieht das so aus: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5bf/f47/caa/5bff47caa8da4678423ccdda37efce15.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f06/58a/b3b/f0658ab3b0c95aa5f64f11d489f3a5cf.png"></div><br><pre> <code class="plaintext hljs">New-ADUser -Name BackdoorAdmin -UserPrincipalName BackdoorAdmin@test Get-ADUser BackdoorAdmin</code> </pre> <br>  Es gibt keine Unterschiede zwischen AD DC und Powershell. <br><br><h3>  Benutzer aktivieren </h3><br>  <b>RSAT oder lokale GUI-Server:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d43/a7d/a27/d43a7da2706e395f85ff16a2168c628a.png"></div><br>  √úber die GUI muss der Benutzer zuerst das dem Gruppenrichtlinienobjekt entsprechende Kennwort festlegen und erst danach kann es aktiviert werden. <br><br>  <b>Powershell:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dca/557/ecc/dca557ecc71b1232c88740da553cefa3.png"></div><br>  PowerShell ist fast dasselbe, nur der Benutzer kann auch ohne Passwort aktiviert werden. <br><br><pre> <code class="plaintext hljs">Set-ADUser -Identity BackdoorAdmin -Enabled $true -PasswordNotRequired $true</code> </pre> <br><h3>  Benutzer zur Gruppe hinzuf√ºgen </h3><br>  <b>RSAT oder lokaler Server mit GUI:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/f8e/f11/b16f8ef1141004fd838325c7c14d12d8.png"></div><br>  In AD DC m√ºssen Sie zu den Eigenschaften des Benutzers gehen, die Spalte mit der Benutzermitgliedschaft in den Gruppen suchen, die Gruppe finden, in der wir sie platzieren m√∂chten, und sie schlie√ülich hinzuf√ºgen und dann auf OK klicken. <br><br>  <b>Powershell:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/599/613/f38/599613f383d7dc2b5c5dac19bbebf025.png"></div><br>  Wenn wir den Namen der Gruppe, die wir ben√∂tigen, nicht kennen, k√∂nnen wir eine Liste dieser Gruppen erstellen. <br><br><pre> <code class="plaintext hljs">(Get-ADGroup -Server localhost -Filter *).name</code> </pre> <br>  Sie k√∂nnen eine Gruppe mit den folgenden Eigenschaften erstellen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/246/ed0/7bb/246ed07bb8d7d5e695627b98b337b568.png"></div><br><pre> <code class="plaintext hljs">Get-ADGroup -Server localhost -Filter {Name -Like "Administrators"}</code> </pre> <br>  Zum Schluss f√ºgen Sie den Benutzer der Gruppe hinzu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9cf/28c/752/9cf28c7525a9d5b527530b4778d3d52a.png"></div><br>  Aufgrund der Tatsache, dass in Powershell alles ein Objekt ist, m√ºssen wir wie bei AD DC zun√§chst eine Benutzergruppe abrufen und dann hinzuf√ºgen. <br><br><pre> <code class="plaintext hljs">$user = Get-ADUser BackdoorAdmin</code> </pre> <br>  F√ºgen Sie dann dieses Objekt der Gruppe hinzu: <br><br><pre> <code class="plaintext hljs">Get-ADGroup -Server localhost -Filter {Name -Like "Administrators"} | Add-ADGroupMember -Members $user</code> </pre> <br>  Und √ºberpr√ºfe: <br><br><pre> <code class="plaintext hljs">Get-ADGroupMember -Identity Administrators</code> </pre> <br>  Wie Sie sehen, gibt es kaum Unterschiede bei der Verwaltung von AD √ºber AD AC und Powershell. <br><br><h2>  Fazit: </h2><br>  Wenn Sie bereits auf die Bereitstellung von AD und anderen Diensten gesto√üen sind, haben Sie m√∂glicherweise die √Ñhnlichkeiten der Bereitstellung √ºber RSAT und Powershell bemerkt und festgestellt, wie sehr alles wirklich aussieht.  Immerhin GUI im Kern. <br><br>  Wir hoffen, der Artikel war n√ºtzlich oder interessant. <br><br>  Und zum Schluss noch ein paar praktische Tipps: <br><br><ol><li>  Installieren Sie keine anderen Rollen auf einem Dom√§nencontroller. </li><li>  Verwenden Sie BPA (Best Practice Analyzer), um den Controller etwas zu beschleunigen </li><li>  Verwenden Sie nicht den eingebauten Enterprice Admin, sondern immer Ihr eigenes Konto. </li><li>  Stellen Sie beim Bereitstellen des Servers auf einer wei√üen IP-Adresse mit weitergeleiteten Ports oder auf VSD sicher, dass Port 389 geschlossen ist. Andernfalls werden Sie zum Angriffspunkt f√ºr DDoS-Angriffe. </li></ol><br>  Wir bieten auch die M√∂glichkeit, unsere fr√ºheren Beitr√§ge zu lesen: eine <a href="https://habr.com/ru/company/ultravds/blog/469549/">Geschichte dar√ºber,</a> wie wir virtuelle Client-Maschinen am Beispiel unseres <a href="https://ultravds.com/">VDS Ultralight-</a> Tarifs mit Server Core f√ºr 99 Rubel vorbereiten, <a href="https://habr.com/ru/company/ultravds/blog/474312/">wie man mit Windows Server 2019 Core arbeitet und wie man eine GUI darauf installiert</a> und wie <a href="https://habr.com/ru/company/ultravds/blog/476416/">man den</a> Server mit Windows Admin verwaltet Stellen Sie fest, wie Exchange 2019 unter Windows Server Core 2019 <a href="https://habr.com/ru/company/ultravds/blog/479850/">installiert wird</a> <br><br>  Wir bieten einen aktualisierten UltraLite <a href="https://ultravds.com/">Windows VDS-</a> Tarif f√ºr 99 Rubel mit installiertem Windows Server 2019 Core an. <br> <a href="https://ultravds.com/"><img src="https://habrastorage.org/webt/ww/d4/ro/wwd4ro5_5a28hvdxyazf3enjxou.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480776/">https://habr.com/ru/post/de480776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480756/index.html">Daten √∂ffnen. Roscosmos. Machen wir es wie in der NASA</a></li>
<li><a href="../de480760/index.html">Arbeiten im Ausland: In welchen L√§ndern ist das schnellste Internet?</a></li>
<li><a href="../de480762/index.html">V & V bedeutet nicht Vendetta</a></li>
<li><a href="../de480772/index.html">Einfache Gr√ºnde f√ºr die Unvermeidlichkeit der technischen Verschuldung</a></li>
<li><a href="../de480774/index.html">Nicht Nginx Unified: Ayhor Hosting - Dash-Scratch Live</a></li>
<li><a href="../de480778/index.html">Gestenverwaltung: Umgang mit visuellen Overlays. Teil 2</a></li>
<li><a href="../de480780/index.html">Wie man eine Illustration aus W√ºrfeln und Piktogrammen zusammensetzt</a></li>
<li><a href="../de480782/index.html">5 Dinge, die ich gerne wissen w√ºrde, als ich mit Angular anfing</a></li>
<li><a href="../de480786/index.html">Unabh√§ngiges Klonen von Objekten in JavaScript</a></li>
<li><a href="../de480788/index.html">Weihnachtsbaum auf der Kommandozeile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>