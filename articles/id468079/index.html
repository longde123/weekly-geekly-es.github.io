<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤  ğŸ“º ğŸš§ Dimensi khusus di Google Analytics yang menyelamatkan kami lebih dari sekali ğŸ˜† ğŸ¾ ğŸ‘§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat menyiapkan analitik melalui Google Analytics (GA), Parameter Pengguna atau CD ( Dimensi Khusus ) sering diabaikan. Hal ini disebabkan oleh kesuli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dimensi khusus di Google Analytics yang menyelamatkan kami lebih dari sekali</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468079/">  Saat menyiapkan analitik melalui Google Analytics (GA), Parameter Pengguna atau CD ( <i>Dimensi Khusus</i> ) sering diabaikan.  Hal ini disebabkan oleh kesulitan dalam memahami ruang lingkup mereka: tidak jelas bagaimana CD dapat membantu dalam mengumpulkan dan menganalisis data dan bagaimana mereka dikonfigurasi.  Artikel ini berbicara tentang CD utama yang kami gunakan di Adventum pada banyak proyek, dan proses pengaturan. <br><br><h1>  Apa opsi pengguna? </h1><br>  Untuk membuat laporan di Google Analytics, tersedia lebih dari 200 parameter dan metrik yang berbeda, seperti "sumber", "kota", "peramban", "sistem operasi" dan banyak lainnya.  Tetapi parameter standar tidak selalu cukup untuk analisis, sehingga Google telah memberi pengguna kemampuan untuk membuat sendiri.  Nilai CD dapat ditransfer dengan klik apa pun dari pengguna.  Misalnya, menggunakan parameter khusus, Anda dapat menganalisis kinerja situs dalam konteks adaptif. <br><br>  Total ada 4 area tindakan CD: <br><br><ul><li>  Hit </li><li>  Sesi </li><li>  Pengguna </li><li>  Produk </li></ul><br>  Misalnya, kami memiliki CD tempat parameter otorisasi pengguna disimpan (0 - tidak diotorisasi, 1 - diotorisasi).  Di awal sesi, semua pengguna tidak diotorisasi.  Mari kita lihat apa yang terjadi ketika parameter ini berubah setelah masuk, tergantung pada ruang lingkup CD. <br><br><img src="https://habrastorage.org/webt/yo/ef/tr/yoeftruoaljptzlnl3xtngigfbq.jpeg"><br><br><ul><li>  untuk CD dengan cakupan Hit, unit ditugaskan ke parameter otorisasi dalam hit di mana otorisasi terjadi; </li><li>  untuk CD dengan ruang lingkup Sesi, parameter otorisasi akan menjadi sama dengan 1 untuk semua klik sesi di mana acara terjadi (menimpa nilai-nilai lama CD dalam sesi ini); </li><li>  untuk CD dengan ruang lingkup Pengguna, parameter otorisasi akan menjadi sama dengan 1 untuk semua sesi pengguna, mulai dari yang di mana login dibuat. </li></ul><a name="habracut"></a><br>  Terkadang Anda perlu menganalisis karakteristik produk yang dukungannya tidak tercantum dalam parameter dasar Google Analytics: misalnya, berat.  Karena informasi tentang beberapa produk dapat ditransmisikan dalam satu hit, kita akan memerlukan ruang lingkup tambahan dengan detail lebih dalam.  Untuk rincian ini, ruang lingkup "Produk" digunakan: <br><br><img src="https://habrastorage.org/webt/me/9m/s4/me9ms4-kjwvsn-pgj1yzdn6uxbi.jpeg"><br><br><h1>  Pengaturan CD </h1><br>  Menyiapkan parameter pengguna terdiri dari dua langkah: membuat parameter dalam GA dan mengirim data dari situs.  Selanjutnya, kami menjelaskan urutan langkah-langkah untuk mengatur CD. <br><br><h2>  Membuat CD di Google Analytics </h2><br><ol><li>  Pergi ke bagian "Administrator" </li><li>  Di pengaturan Sumber Daya di bagian "Parameter Pengguna", pilih sub-bagian "Parameter Khusus": <br><img src="https://habrastorage.org/webt/pc/b3/pp/pcb3ppb_6lwiyyxpe8ctui2qe18.jpeg"></li><li>  Klik pada tombol "+ Parameter khusus" <br><img src="https://habrastorage.org/webt/ak/k8/iy/akk8iyzg0rbrvrq-tawj3u-uwue.jpeg"></li><li>  Formulir terbuka: <br><img src="https://habrastorage.org/webt/82/jf/3o/82jf3oy-kbvheuwjrntj4ooxecw.jpeg"><br>  Pilih cakupan parameter: <br><br><ul><li>  Hit </li><li>  Sesi </li><li>  Pengguna </li><li>  Produk </li></ul><br>  Dan biarkan tanda centang berlawanan "Aktif" sehingga data mulai dikumpulkan dan CD tercermin dalam laporan. </li></ol><blockquote>  <b>Rekomendasi judul CD</b> <br>  Kami telah mengembangkan sistem kami sendiri untuk menamai parameter pengguna. <br>  Di awal setiap CD, kami menambahkan simbol untuk cakupannya.  Untuk hit itu h_ (misalnya, h_hitId), untuk sesi - s_ (misalnya, s_sessionId).  Ini membantu kami menavigasi parameter pengguna dan selalu mengetahui cakupannya, tanpa memeriksa pengaturan penghitung.  Terkadang menjadi perlu untuk membuat dua parameter dengan nama yang sama, tetapi dengan cakupan yang berbeda.  Misalnya, kami melakukan uji A / B dan ingin memeriksa apakah itu dikonfigurasi dengan benar, apakah varian tes berubah selama sesi.  Untuk melakukan ini, buat dua parameter dengan nilai yang sama: nama + versi uji, yang dimasukkan pengguna, tetapi salah satunya terkena, sesi kedua.  Dalam hal ini, penamaan yang diusulkan akan sangat nyaman. <br></blockquote><br><h2>  Menyiapkan Google Pengelola Tag </h2><br>  Ada dua cara untuk mengkonfigurasi parameter pengiriman dari situs: <br><br><ul><li>  langsung melalui kode HTML di situs. </li><li>  melalui Google Tag Manager (GTM). </li></ul><br>  Untuk kedua metode, kita memerlukan indeks CD di Google Analytics.  Anda dapat melihatnya di bagian "Pengaturan Khusus": <br><br><img src="https://habrastorage.org/webt/z3/el/gs/z3elgs7abwc7vnaibkvlssffe08.jpeg"><br><br>  <b>Mengirim melalui HTML di situs</b> <br><br>  Perbarui konfigurasi sumber daya dalam kode pelacakan Google Analytics dengan menambahkan <font color="green">custom_map di</font> sana (Anda perlu menambahkan apa yang disorot di kedua sisi dengan komentar): <br><br><pre><code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-string"><span class="hljs-string">'GA_MEASUREMENT_ID'</span></span> , <span class="hljs-comment"><span class="hljs-comment">//  { 'custom_map': {'dimension&lt;Index&gt;': 'dimension_name'} } //  );</span></span></code> </pre> <br>  di mana <font color="green">GA_MEASUREMENT_ID</font> adalah pengidentifikasi penghitung Analytics Anda.  Ganti <font color="green">&lt;Index&gt;</font> dengan indeks parameter dalam GA, dan alih-alih <font color="green">dimensional_name</font> tentukan namanya. <br><br>  Jika Anda memiliki beberapa parameter Pengguna, maka <font color="green">'dimensional &lt;Index&gt;'</font> : <font color="green">'dimension_name'</font> harus ditentukan dengan koma untuk masing-masing parameter tersebut. <br><br>  Sebagai contoh: <br><br><pre> <code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'config'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-XXXXXXXXX'</span></span>, { <span class="hljs-string"><span class="hljs-string">'custom_map'</span></span>: {<span class="hljs-string"><span class="hljs-string">'dimension1'</span></span>: <span class="hljs-string"><span class="hljs-string">'projectName'</span></span>, <span class="hljs-string"><span class="hljs-string">'dimension2'</span></span>: <span class="hljs-string"><span class="hljs-string">'hitId'</span></span>, <span class="hljs-string"><span class="hljs-string">'dimension3'</span></span>: <span class="hljs-string"><span class="hljs-string">'sessionId'</span></span>, <span class="hljs-string"><span class="hljs-string">'dimension4'</span></span>: <span class="hljs-string"><span class="hljs-string">'screenWindow'</span></span>} });</code> </pre> <br>  Untuk mengirim CD bersama dengan tampilan halaman, Anda perlu menetapkan parameter ini ke nilai yang diinginkan <b>sebelum kode yang ditunjukkan di atas</b> : <br><br><pre> <code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'set'</span></span>, { <span class="hljs-string"><span class="hljs-string">'dimension_name'</span></span>: <span class="hljs-string"><span class="hljs-string">'dimension_value'</span></span>});</code> </pre> <br>  di mana <font color="green">dimensional_name</font> harus cocok dengan yang Anda tentukan di <font color="green">'custom_map'</font> , dan <font color="green">dimensional_value harus</font> menjadi nilai yang ingin Anda transfer ke CD. <br><br>  Sebagai contoh: <br><br><pre> <code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'set'</span></span>, {<span class="hljs-string"><span class="hljs-string">'projectName'</span></span>: <span class="hljs-string"><span class="hljs-string">'shop'</span></span>, <span class="hljs-string"><span class="hljs-string">'hitId'</span></span>: <span class="hljs-string"><span class="hljs-string">'1121243'</span></span>});</code> </pre> <br>  Saat mengirim nilai CD bersama acara, Anda harus mengirim kode: <br><pre> <code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'event'</span></span>, <span class="hljs-string"><span class="hljs-string">'action_value'</span></span>, {<span class="hljs-string"><span class="hljs-string">'event_category'</span></span>: <span class="hljs-string"><span class="hljs-string">'category_value'</span></span>, <span class="hljs-string"><span class="hljs-string">'event_label'</span></span>: <span class="hljs-string"><span class="hljs-string">'label_value'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>: <span class="hljs-string"><span class="hljs-string">'event_value'</span></span>, <span class="hljs-string"><span class="hljs-string">'dimension_name'</span></span>: <span class="hljs-string"><span class="hljs-string">'dimension_value'</span></span>});</code> </pre> <br>  dimana bukannya: <br><br>  <font color="green">action_value</font> - aksi acara <br>  <font color="green">category_value</font> - kategori acara <br>  <font color="green">label_value</font> - label acara <br>  <font color="green">event_value</font> - nilai acara (integer non-negatif) <br>  <font color="green">dimension_name</font> - nama parameter yang kami tentukan dalam kode sebelumnya <br>  <font color="green">dimensional_value</font> - nilai CD <br><br>  Contoh: <br><br><pre> <code class="javascript hljs">gtag(<span class="hljs-string"><span class="hljs-string">'event'</span></span>, <span class="hljs-string"><span class="hljs-string">'clickButton'</span></span>, {<span class="hljs-string"><span class="hljs-string">'event_category'</span></span>: <span class="hljs-string"><span class="hljs-string">'conversion'</span></span>, <span class="hljs-string"><span class="hljs-string">'event_label'</span></span>: <span class="hljs-string"><span class="hljs-string">'registration'</span></span>, <span class="hljs-string"><span class="hljs-string">'projectName'</span></span>: <span class="hljs-string"><span class="hljs-string">'shop'</span></span>, <span class="hljs-string"><span class="hljs-string">'hitId'</span></span>: <span class="hljs-string"><span class="hljs-string">'1121243'</span></span>});</code> </pre> <br>  Pada proyek kami, kami menggunakan opsi kedua - mencari melalui GTM.  Mari kita pertimbangkan lebih terinci. <br><br>  <b>Mengirimkan CD dengan Hits ke GA melalui GTM</b> <br><br>  Menyiapkan pengiriman CD bersama dengan klik (tampilan halaman, acara) di GA dilakukan dalam variabel jenis "Pengaturan Google Analytics".  Jika Anda sudah mengkonfigurasi variabel ini, buka saja.  Jika tidak, maka Anda harus membuatnya.  Pergi ke bagian "Pengaturan Lanjut", subbagian "Pengaturan Khusus".  Di sini Anda harus menambahkan semua parameter pengguna yang Anda buat sebelumnya di GA: <br><br><img src="https://habrastorage.org/webt/v5/u2/jc/v5u2jc6kqqsi7e1zwozl71iy2yc.jpeg"><br><br>  ID pelacakan harus menyertakan nomor penghitung GA.  Di bidang "Indeks", tulis pengenal CD dari GA yang ingin Anda transfer datanya. <br><br>  Di bidang "Nilai Parameter", Anda harus menentukan nilai yang akan ditransfer ke CD dengan indeks yang ditentukan.  Nilai ini dapat ditentukan dengan dua cara: <br><br><ul><li>  secara manual, jika akan sama untuk semua acara; </li><li>  menggunakan variabel tempat nilai parameter ini disimpan (namanya ditulis dalam kurung keriting ganda).  Misalnya, {{SCREEN_WINDOW}} - â€œUkuran jendela browserâ€. </li></ul><br><img src="https://habrastorage.org/webt/ov/we/fi/ovwefildb093dmfjzur0duaxfvk.jpeg"><br><br>  Dengan pengaturan parameter pengguna ini, penting untuk mempertimbangkan: <br><br><ol><li>  Saat tag pertama kali diproses, cookie dengan ID pengguna Google (clientID) belum akan dibuat.  Jika kami ingin mengonfigurasi transfer parameter ini ke CD, kami tidak akan dapat melakukan ini untuk tampilan halaman pertama. </li><li>  Jika kita ingin menggunakan variabel yang sama saat mengirim data ke parameter pengguna yang berbeda, maka variabel ini akan dihitung lagi untuk setiap parameter pengguna.  Misalnya, saat mengirim tag waktu pemrosesan tag ke dua parameter pengguna yang berbeda, Anda mungkin melihat perbedaan dalam nilai beberapa milidetik. </li></ol><br>  Anda dapat menghindari kesulitan ini dengan customTask. <br><br><h3>  Menggunakan customTask </h3><br>  customTask adalah fungsi dengan prioritas tertinggi, kode dan logika yang Anda tentukan sendiri.  Belum lama ini, Google memberi kesempatan untuk menggunakan fitur ini di GTM. <br><br>  customTask menggunakan data dari objek model (yang mencakup semua bidang penghitung pelacakan), cookie, dll.  Prioritas fungsi ini lebih tinggi daripada yang lainnya, dan berfungsi dengan baik pada tag.  Berkat ini, Anda dapat mengonfigurasi pengiriman ID pengguna sejak pertama kali dia melihat halaman. <br><br>  Untuk mengonfigurasi CD melalui customTask, buat variabel GTM dengan nama JS_customTask dan ketik â€œNative JavaScript codeâ€: <br><br><img src="https://habrastorage.org/webt/mt/xt/m3/mtxtm3rarxslutrgoniz_ynobig.jpeg"><br><br>  Sekarang tambahkan JS_customTask yang kami buat ke variabel Pengaturan Google Analytics, di bagian "Fields to Set": <br><br><ul><li>  Di "Nama Bidang" tulis <b>customTask</b> ; </li><li>  Dalam "Nilai" tulis nama variabel yang kita buat di atas.  Semua variabel harus ditulis dalam kurung ganda. </li></ul><br><img src="https://habrastorage.org/webt/qp/tg/pc/qptgpciskueuoh_81xbxicmdjbi.jpeg"><br><br>  Hanya satu customTask yang dapat didefinisikan dalam tag GTM.  Oleh karena itu, semua CD yang dapat ditentukan dengan metode ini akan ditulis dalam variabel JS_customTask yang dibuat sebelumnya. <br><br><h1>  CD yang Sering Digunakan </h1><br><h2>  ID pengguna </h2><br>  <b>Tantangan.</b>  Penghitung telah mencatat lompatan besar dalam jumlah sesi.  Pada saat yang sama, jumlah pengguna sedikit meningkat.  Ada hipotesis tentang lalu lintas bot yang berasal dari beberapa pengguna.  Secara default, tidak mungkin untuk melihat karakteristik pengguna individu dalam GA dalam format yang mudah. <br><br>  <b>Solusi</b>  Google Analytics memberikan pengidentifikasi unik untuk setiap pengunjung ke situs - ID Klien.  Anda dapat melihatnya di antarmuka Google Analytics hanya dalam satu laporan - "Statistik pengguna" (User Explorer).  Tidak nyaman untuk menggunakannya, karena pada satu layar Anda dapat melihat urutan tindakan hanya satu pengguna dan Anda tidak dapat menambahkan parameter tambahan ke laporan. <br><br>  Solusi ideal adalah kemampuan menampilkan clientID sebagai parameter terpisah dalam laporan standar atau pengguna.  Dan ini bisa dilakukan dengan menggunakan GTM. <br><br>  <b>Pengaturan teknik.</b>  Sebagai ClientId, kami menggunakan urutan digit dari ID pengguna di GA (disimpan dalam cookie dengan nama _ga. Misalnya, _ga = GA1.2.1111111111.111111111, di mana ClientId = 111111111.111111111).  Untuk melihat nilai ini, klik kanan pada halaman situs dan pilih "Lihat Kode": <br><br><img src="https://habrastorage.org/webt/e2/fn/ew/e2fnewovy0uvqtij9k4krzez1ve.jpeg"><br><br>  Kemudian, di tab Aplikasi, di menu sebelah kiri, pilih Cookie dan nama situs dan cari variabel _ga dalam tabel: <br><br><img src="https://habrastorage.org/webt/g8/gs/qi/g8gsqiboktqwl0qw0bdmvzabn64.jpeg"><br><br>  Selain cookie, ID pengguna GA disimpan dalam objek model dan dapat diambil menggunakan metode .get ('clientId').  Kami menggunakan customTask untuk mengambil nilai ini dan meneruskannya ke GA.  Tambahkan kode berikut ke variabel bernama JS_customTask: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customDimensionIndex_client = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">model</span></span></span><span class="hljs-function">) </span></span>{ model.set(<span class="hljs-string"><span class="hljs-string">'dimension'</span></span> + customDimensionIndex_client, model.get(<span class="hljs-string"><span class="hljs-string">'clientId'</span></span>)); } }</code> </pre> <br>  Setelah tanda sama dengan variabel customDimensionIndex_client, Anda perlu menentukan indeks CD yang sesuai dengan ClientId di GA.  Dengan cara ini, kami mendapat ID klien dari penghitung dan mengirimkannya ke parameter pengguna. <br><br>  <b>Hasil.</b>  Kami membuat laporan tentang pengguna individu dan menemukan bahwa beberapa dari mereka sebenarnya memiliki seribu sesi.  Semua sesi dengan rasio pentalan 100% dan jelas tidak membawa nilai bagi kami.  Kami menyiapkan segmen untuk mengecualikan pengguna ini dan dapat menganalisis dinamika lalu lintas tanpa kunjungan yang tidak perlu. <br><br><h2>  Hit id </h2><br>  <b>Tantangan.</b>  Anda perlu melihat bagaimana perilaku pengguna di situs, tindakan apa yang dia lakukan dan dalam urutan apa.  Berdasarkan data ini, hipotesis untuk pengembangan bisnis dapat diajukan. <br><br>  <b>Solusi</b>  Buat CD Anda sendiri dengan nomor hit pengguna di setiap sesi.  Mengurutkan dalam urutan peningkatan hit, kita bisa melihat cara pengguna. <br><br>  <b>Pengaturan teknik.</b>  Untuk kenyamanan, sebagai HitId, kami melewati ClientId + hit time dalam format timestamp.  Jadi untuk setiap acara, tampilan halaman, transaksi akan ada nilai.  Parameter ini dapat dikonfigurasi melalui customTask (mirip dengan ClientId). <br><br>  Hanya satu customTask yang dapat didefinisikan dalam satu tag GTM.  Oleh karena itu, kami menambahkan variabel "Custom JavaScript" yang sebelumnya dibuat, kode yang disorot di kedua sisi dengan komentar, di mana indeks CD bernama h_HitId dari GA akan disimpan dalam variabel customDimensionIndex_hit: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customDimensionIndex_client = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    var customDimensionIndex_hit = 2; var now = new Date(); //    return function(model) { model.set('dimension' + customDimensionIndex_client, model.get('clientId')); //    model.set('dimension' + customDimensionIndex_hit, model.get('clientId').concat('_', now.getTime())); //    } }</span></span></code> </pre> <br>  Jenis parameter dipukul.  Karena fakta bahwa itu juga mengandung waktu dalam format timestamp, semua klik pengguna / sesi dapat diurutkan berdasarkan urutan eksekusi mereka, tanpa menggunakan parameter tambahan. <br><br>  Jika Anda membuat pengaturan yang persis sama, hanya di GA yang memilih lingkup parameter - sesi, maka kami mendapatkan CD yang akan menyimpan pengidentifikasi sesi pengguna. <br><br>  <b>Hasil.</b>  Membuat dua laporan: <br><br><ul><li>  Identifier pengguna, hit identifier, kategori acara, tindakan, label acara, tambahkan.  parameter. </li><li>  ID Pengguna, tekan ID, tambahkan.  parameter. </li></ul><br>  Kemudian mereka membongkar data ini dari GA, menggabungkannya ke Excel (atau database).  Jika kami mengurutkan garis berdasarkan ClientId, dan kemudian oleh HitId, kami mendapatkan jalur dari setiap pengguna di situs.  Sekarang kita dapat membuat tabel pivot dan memvisualisasikannya. <br><br><h2>  Tes A / B </h2><br>  <b>Tantangan.</b>  Perusahaan memutuskan untuk melakukan tes AB.  Pengaturan dibuat oleh pengembang, tanpa menggunakan Google Optimize.  Muncul pertanyaan: bagaimana cara mentransfer opsi pengujian ke Google Analytics untuk menganalisis efektivitas percobaan. <br><br>  <b>Solusi</b>  Dalam hal ini, CD akan membantu kami membandingkan hasil tes dalam GA.  Cukup mengonfigurasi parameter pengguna, yang akan mengambil nilai dengan pengidentifikasi tes dan opsi yang digunakan pengguna.  Jadi kami dapat membagi audiens menjadi kelompok sesuai dengan opsi tes dan membandingkan hasilnya. <br><br>  <b>Pengaturan teknik.</b>  Buat parameter khusus di GA, mirip dengan yang kami konfigurasikan sebelumnya.  Kami memilih sebagai "Cakupan" - klik, sehingga dimungkinkan untuk membagi acara menjadi peristiwa yang dilakukan pengguna sebelum dan sesudah mengikuti tes.  Sebut saja, misalnya, h_AB-Test.  Dimungkinkan untuk mentransfer data ke CD dengan beberapa tes sekaligus.  Anda dapat memisahkan mereka dengan simbol yang tidak muncul dalam nama dan versi tes, misalnya, "|". <br><br>  Jika Anda melakukan tes sendiri dan menyimpan data tentang hal itu dalam cookie, Anda akan memerlukan variabel seperti "kode JavaScript Asli" untuk mengekstraknya: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cookie_name =<span class="hljs-string"><span class="hljs-string">'{{test_variant}}'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> matches = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.cookie.match(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>( <span class="hljs-string"><span class="hljs-string">"(?:^|; )"</span></span> + cookie_name.replace(<span class="hljs-regexp"><span class="hljs-regexp">/([\.$?*|{}\(\)\[\]\\\/\+^])/g</span></span>, <span class="hljs-string"><span class="hljs-string">'\\$1'</span></span>) + <span class="hljs-string"><span class="hljs-string">"=([^;]*)"</span></span> )); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> matches ? <span class="hljs-built_in"><span class="hljs-built_in">decodeURIComponent</span></span>(matches[<span class="hljs-number"><span class="hljs-number">1</span></span>]) : <span class="hljs-string"><span class="hljs-string">'(not set)'</span></span>; }</code> </pre> <br>  di mana alih-alih {{test_variant}} Anda harus menentukan nama cookie di mana nama dan varian tes disimpan.  Jangan lupa untuk menambahkannya ke variabel pengaturan GA. <br><br>  Dengan menambahkan parameter h_AB-Test ke laporan, kita akan melihat di Google Analytics opsi tes mana yang dimiliki.  Bergantung pada nilai parameter ini, Anda dapat mengelompokkan pengguna. <br><br>  <b>Hasil.</b>  Kami membuat segmen sebanyak ada kasus uji dengan kondisi h_AB-Test.  Itu harus cocok dengan nilai "nama + test case".  Kami melihat peristiwa yang menarik bagi kami dalam laporan. <br><br><h2>  Alamat halaman penuh </h2><br>  <b>Tantangan.</b>  Manajer iklan kontekstual meluncurkan kampanye iklan di Yandex.Direct.  Beberapa hari kemudian, ia pergi ke laporan sumber GA dan menemukan bahwa jumlah sesi pengguna yang berasal dari kampanye iklan yang ia buat jauh lebih sedikit daripada klik pada iklan di Yandex.Direct. <br><br>  <b>Solusi</b>  Google Analytics memiliki parameter yang diperlukan untuk melacak iklan - utm_source.  Jika ya, maka nilainya akan ditambahkan ke parameter standar "Sumber Kampanye".  Demikian pula, Google melakukannya dengan tag UTM lain untuk merekam dalam parameter yang sesuai. <br><br>  Semua tag UTM secara otomatis dihapus dari laporan pada halaman situs dan Anda tidak dapat menganalisisnya di sana.  Dalam hal ini, jika label utm_source tidak disetel, maka Google hanya akan menghapus semua tag UTM yang ditemukan dari laporan di halaman dan tidak akan merekam kontennya dalam parameter bawaan yang sesuai. <br><br>  Kami akan mengonfigurasikan parameter dengan alamat halaman penuh untuk melihat semua tag, bahkan jika iklan tidak dikonfigurasi dengan benar.  Sebut saja h_fullPage. <br><br>  <b>Pengaturan teknik.</b>  Mari kita buat variabel dengan tipe "variabel JavaScript" di bagian "Nama variabel global" dan tentukan dokumen.URL: <br><br><img src="https://habrastorage.org/webt/bp/pw/ww/bppwwwv7021ewdjqxxhaymypmzs.jpeg"><br><br>  Sebagai ruang lingkup set-hit variabel. <br><br>  <b>Hasil.</b>  Urutan tag UTM berikut digunakan di seluruh kampanye iklan: utm_medium, utm_source, utm_campaign.  Setelah melihat alamat lengkap halaman, kami perhatikan bahwa ampersand dilewati antara iklan antara utm_medium dan utm_source.  Karena utm_source adalah tag utm wajib untuk kampanye iklan apa pun, dan Google Analytics tidak menemukannya setelah karakter khusus (?, &amp;), Klik pada iklan ini dicatat dalam lalu lintas langsung.  Berkat parameter h_fullPage, dimungkinkan untuk mendeteksi masalah dan memperbaikinya dalam pengaturan panel iklan. <br><br><h2>  Opsi Acara </h2><br>  Dua parameter lebih bermanfaat (tanpa uraian pengaturannya): <br><br><ul><li>  <b>Tantangan.</b>  Kami menandai situs kami sendiri melalui GTM.  Ditemukan kesalahan, cepat perbaiki, tetapi acara dengan kesalahan terus tiba di GA. <br><br>  <b>Solusi</b>  Untuk menemukan akar masalah dengan cepat, Anda dapat mentransfer CD dengan setiap peristiwa: <br>  Nama wadah (jika ada beberapa di situs) - variabel bawaan GTM; <br>  Versi kontainer adalah variabel bawaan GTM; <br>  Nama tag - Anda harus mengonfigurasinya sendiri. <br><br>  Anda dapat melewatkan ketiga parameter ini melalui pemisah apa pun dalam variabel tipe â€œConstantâ€: <br><br><img src="https://habrastorage.org/webt/2m/j4/dp/2mj4dpgyy_ierrk8-ndngyd17rk.jpeg"><br><br>  Cakupan parameter dipukul. <br><br>  <b>Hasil.</b>  Menggunakan variabel yang dikonfigurasi, kami menemukan bahwa beberapa pengguna masih memiliki versi wadah yang lama, sehingga acara terus dikirim.  Kemungkinan besar, pengguna tidak menyegarkan halaman atau itu di-cache, jadi Anda perlu menunggu sedikit. </li><li>  <b>Tantangan.</b>  Kami menandai situs melalui pengembang.  Mereka memperkenalkan instruksi baru yang ditulis oleh kami.  Setelah memeriksa, ternyata beberapa acara dikirim dengan kesalahan. <br><blockquote>  <b>Penting:</b> <br><br><ul><li>  Jangan mengirim acara pengujian ke tampilan kerja GA saat kami memeriksa acara di situs uji; </li><li>  jika setelah meluncurkan ke pertempuran kami perhatikan bahwa kami memeriksa peristiwa yang ditandai dengan tidak benar / ada sesuatu yang pecah setelah memperbarui situs, penting untuk segera menghentikan pengiriman acara ke tampilan yang berfungsi. </li></ul><br></blockquote>  <b>Solusi</b>  Kami akan membagi acara menjadi yang baru / berfungsi secara salah dan ditandai dengan benar.  Yang pertama dapat ditandai sebagai tes, yang kedua - prod. <br><br>  Untuk melakukan ini, biarkan pengembang menambahkan data ke dataLayer, dan kami akan mendapatkannya dan mengirimkannya ke GA.  Setiap dorongan akan terlihat seperti ini: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> dataLayer.push({ </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'event'</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'{{ }}'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'event_id'</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'{{id }}'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'eventCategory'</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'{{ }}'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'eventAction'</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'{{  }}'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'eventLabel'</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'{{ }}'</span></span></span><span class="actionscript">, }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  di mana dalam kurung keriting ganda adalah nama-nama variabel di mana data disimpan di sisi pengembang. <br><br>  Kita perlu membuat variabel "Tabel Pencarian" untuk memisahkan peristiwa: <br><br><img src="https://habrastorage.org/webt/uz/ct/9j/uzct9jqlhgg1u0neld1n9zljzao.jpeg"><br><br>  {{event_id}} adalah variabel yang mengambil pengidentifikasi acara dari DataLayer. <br><br>  Kami menempatkan tanda centang di depan "Tetapkan nilai default" dan di kolom "Tes nilai default".  Jadi, awalnya untuk semua acara, variabel ini akan sama dengan tes.  Setelah memastikan bahwa acara tersebut ditandai dengan benar, tambahkan event_id-nya ke sel "Input".  Di bidang "Hasil" kami mengirim prod. <br><br>  Jadi kami membagi semua acara menjadi ditandai dengan benar dan baru / salah ditandai.  Kami menyarankan Anda untuk membuat tampilan terpisah di Google Analytics, di mana akan ada acara hanya dengan label prod (ini dapat dilakukan dengan menggunakan filter Views). Di sana Anda hanya akan melihat acara yang ditandai dengan benar. <br><br>  <b>Hasil.</b>  Karena kesalahan dalam markup acara dari instruksi dihilangkan, kami mengubah nilai parameter untuk peristiwa ini di GTM dari test ke prod.  Berkat parameter ini, kami sertakan dalam laporan hanya peristiwa yang ditandai dengan benar dengan label prod. </li></ul><br>  Fungsionalitas Dimensi Khusus luas dan tidak terbatas pada metode konfigurasi dan aplikasi yang dijelaskan.  Untuk setiap jenis bisnis, analisis, dan hipotesis, Anda dapat menemukan aplikasi Anda sendiri dari parameter yang ditentukan Pengguna, dan metode penyesuaian yang dijelaskan akan membantu membuat proses ini lebih mudah. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id468079/">https://habr.com/ru/post/id468079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id468067/index.html">Cara kerja penggabungan alfa</a></li>
<li><a href="../id468071/index.html">Eduard Medvedev, CTO di Tungsten Labs: "Kami telah berkembang ke titik di mana teknologi dapat menyebabkan kerusakan besar"</a></li>
<li><a href="../id468073/index.html">Andrei Terekhov: "Anda dapat mengatakan sebanyak mungkin bahwa orang Amerika itu lebih baik, tetapi mobil kami tidak pernah mogok"</a></li>
<li><a href="../id468075/index.html">Penggunaan jaringan saraf siam dalam pencarian</a></li>
<li><a href="../id468077/index.html">Posit tes dengan cara dewasa. Analisis spektral</a></li>
<li><a href="../id468081/index.html">â€œData anonimâ€ atau apa yang direncanakan di 152-FZ</a></li>
<li><a href="../id468083/index.html">Android Camera2 API dari ketel</a></li>
<li><a href="../id468085/index.html">Buku "Safe DevOps. Pengoperasian Sistem yang Efisien</a></li>
<li><a href="../id468087/index.html">Metode pembagian dua bagian dalam pengujian</a></li>
<li><a href="../id468089/index.html">Redefinisi Berbasis Edisi: apakah mungkin dalam produksi?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>