<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¶ ü§πüèø ‚§¥Ô∏è Gieriger Ansatz und Spielautomaten. Analyse der Aufgaben der ML-Strecke der Programmiermeisterschaft üåû ‚ôüÔ∏è üöö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir ver√∂ffentlichen weiterhin Analysen der Aufgaben, die bei der letzten Meisterschaft vorgeschlagen wurden. Als n√§chstes folgen Aufgaben aus der Qual...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gieriger Ansatz und Spielautomaten. Analyse der Aufgaben der ML-Strecke der Programmiermeisterschaft</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/461273/"><img src="https://habrastorage.org/webt/sd/i7/yd/sdi7ydyv5yabtpudjamnnmm2dge.jpeg"><br><br>  Wir ver√∂ffentlichen weiterhin Analysen der Aufgaben, die bei der letzten Meisterschaft vorgeschlagen wurden.  Als n√§chstes folgen Aufgaben aus der Qualifikationsrunde f√ºr Spezialisten f√ºr maschinelles Lernen.  Dies ist der dritte von vier Tracks (Backend, Frontend, ML, Analytics).  Die Teilnehmer mussten ein Modell f√ºr die Korrektur von Tippfehlern in Texten erstellen, eine Strategie f√ºr das Spielen an Spielautomaten vorschlagen, ein System von Empfehlungen f√ºr Inhalte in Erinnerung rufen und mehrere weitere Programme erstellen. <br><br><a name="habracut"></a><h2>  A. Tippfehler </h2><br><h4>  Zustand </h4><div class="scrollable-table"><table><tbody><tr><td></td><td>  <b>Alle Sprachen</b> </td><td>  <b>python2.7 + numpy</b> </td><td>  <b>python3.5 + numpy</b> </td></tr><tr><td>  Zeitlimit </td><td>  1 s </td><td>  5 s </td><td>  5 s </td></tr><tr><td>  Speicherlimit </td><td>  64 MB </td><td>  256 MB </td><td>  256 MB </td></tr><tr><td>  Geben Sie ein </td><td colspan="3">  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td colspan="3">  Standardausgabe oder output.txt </td></tr></tbody></table></div>  (Epigraph) (aus einem Forum) <br>  - Wer hat diesen Unsinn komponiert? <br>  - Astrophysiker.  Sie sind auch Menschen. <br>  - Sie haben 10 Fehler im Wort "Journalisten" gemacht. <br><br>  Viele Benutzer machen Tippfehler, einige aufgrund von Tastenanschl√§gen und andere aufgrund ihres Analphabetismus.  Wir m√∂chten pr√ºfen, ob der Benutzer tats√§chlich an ein anderes Wort als das von ihm eingegebene denken kann. <br><br>  Nehmen wir formeller an, dass das folgende Fehlermodell auftritt: Der Benutzer beginnt mit einem Wort, das er schreiben m√∂chte, und macht anschlie√üend eine Reihe von Fehlern.  Jeder Fehler ist eine Ersetzung eines Teilstrings des Wortes durch einen anderen Teilstring.  Ein Fehler entspricht dem Ersetzen nur an einer Position (dh wenn der Benutzer einen einzelnen Fehler durch die Regel "abc" ‚Üí "cba" machen m√∂chte, kann er aus der Zeichenfolge "abcabc" entweder "cbaabc" oder "abccba" erhalten).  Nach jedem Fehler wird der Vorgang wiederholt.  Dieselbe Regel k√∂nnte mehrmals in verschiedenen Schritten verwendet werden (im obigen Beispiel k√∂nnte beispielsweise "cbacba" in zwei Schritten erhalten werden). <br><br>  Es ist erforderlich, die Mindestanzahl von Fehlern zu bestimmen, die ein Benutzer machen kann, wenn er ein bestimmtes Wort im Auge hat und ein anderes schreibt. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate und Beispiel</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Die erste Zeile enth√§lt das Wort, das der Benutzer nach unserer Annahme im Sinn hatte (es besteht aus Buchstaben des lateinischen Alphabets in Kleinbuchstaben, die L√§nge √ºberschreitet 20 nicht). <br><br>  Die zweite Zeile enth√§lt das Wort, das er tats√§chlich geschrieben hat (es besteht auch aus Buchstaben des lateinischen Alphabets in Kleinbuchstaben, die L√§nge √ºberschreitet 20 nicht). <br><br>  Die dritte Zeile enth√§lt eine einzelne Zahl N (N &lt;50) - die Anzahl der Ersetzungen, die verschiedene Fehler beschreiben. <br><br>  Die n√§chsten N Zeilen enthalten m√∂gliche Ersetzungen im Format &amp; lt "korrekte" Buchstabenfolge &amp; gt &lt;Leerzeichen&gt; &lt;"fehlerhafte" Buchstabenfolge&gt;.  Sequenzen d√ºrfen nicht l√§nger als 6 Zeichen sein. <br><br><h4>  Ausgabeformat </h4><br>  Es ist erforderlich, eine Zahl zu drucken - die Mindestanzahl von Fehlern, die der Benutzer machen kann.  Wenn diese Zahl 4 √ºberschreitet oder es unm√∂glich ist, aus einem Wort ein anderes zu erhalten, drucken Sie -1. <br><br><h4>  Beispiel </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td><code>mlax <br> drum <br> 50 <br> lr <br> mlax gtwt <br> md <br> mlax ujoc <br> ml pq <br> mf <br> ml bf <br> mlax aruq <br> mlax nqdd <br> mlax fglm <br> mlax bfit <br> mlax mziq <br> mla hlb <br> au <br> mlax vmpa <br> mw <br> aw <br> ax ok <br> mla kqf <br> me <br> xx <br> ml if <br> ml gk <br> le <br> mla xrh <br> mj <br> ac <br> ab <br> mq <br> ax fr <br> ml sb <br> mlax gxxx <br> xm <br> mlax hczx <br> lq <br> la sv <br> lg <br> ax eh <br> lax mjh <br> la ec <br> la pv <br> ml iq <br> aq <br> lax jrs <br> la qn <br> lax bjo <br> lo <br> az <br> ln <br> ac</code> </td> <td> <code>4</code> </td> </tr></tbody></table></div></div></div><br><h4>  L√∂sung </h4><br>  Versuchen wir, aus der richtigen Schreibweise alle m√∂glichen W√∂rter mit nicht mehr als 4 Fehlern zu generieren.  Im schlimmsten Fall kann O ((LÔπíN) <sup>4</sup> ) vorliegen.  In den Grenzen des Problems ist dies eine ziemlich gro√üe Zahl, daher m√ºssen Sie herausfinden, wie Sie die Komplexit√§t reduzieren k√∂nnen.  Stattdessen k√∂nnen Sie den Meet-in-the-Middle-Algorithmus verwenden: Generieren Sie W√∂rter mit nicht mehr als 2 Fehlern sowie W√∂rter, aus denen Sie ein vom Benutzer geschriebenes Wort mit nicht mehr als 2 Fehlern erhalten k√∂nnen.  Beachten Sie, dass die Gr√∂√üe jedes dieser S√§tze 10 <sup>6</sup> nicht √ºberschreitet.  Wenn die Anzahl der vom Benutzer gemachten Fehler 4 nicht √ºberschreitet, √ºberschneiden sich diese S√§tze.  Ebenso k√∂nnen wir √ºberpr√ºfen, ob die Anzahl der Fehler 3, 2 und 1 nicht √ºberschreitet. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FromTo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> from; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> to; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; applyRule(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; word, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FromTo &amp;fromTo, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pos) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> from = word.find(fromTo.from, pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (from == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>::npos) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>::npos, {}}; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> to = from + fromTo.from.size(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> cpy = word; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = from; i &lt; to; i++) { cpy[i] = fromTo.to[i - from]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {from, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(cpy)}; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inverseRules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;FromTo&gt; &amp;rules)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; rule: rules) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::swap(rule.from, rule.to); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">solve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; wordOrig, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; wordMissprinted, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;FromTo&gt;&amp; replaces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; mapping; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; mappingInverse; mapping.emplace(wordOrig, <span class="hljs-number"><span class="hljs-number">0</span></span>); mappingInverse.emplace(<span class="hljs-number"><span class="hljs-number">0</span></span>, wordOrig); mapping.emplace(wordMissprinted, <span class="hljs-number"><span class="hljs-number">1</span></span>); mappingInverse.emplace(<span class="hljs-number"><span class="hljs-number">1</span></span>, wordMissprinted); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; edges; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> buildGraph = [&amp;edges, &amp;mapping, &amp;mappingInverse](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> startId, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;FromTo&gt;&amp; replaces, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> dir) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; mappingLayer0; mappingLayer0 = {startId}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>; i++) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; mappingLayer1; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; v: mappingLayer0) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; word = mappingInverse.at(v); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; fromTo: replaces) { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> from = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [tmp, wordCpy] = applyRule(word, fromTo, from); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tmp == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>::npos) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } from = tmp + <span class="hljs-number"><span class="hljs-number">1</span></span>; { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> w = mapping.size(); mapping.emplace(wordCpy, w); w = mapping.at(wordCpy); mappingInverse.emplace(w, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(wordCpy)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dir) { edges[v].emplace(w); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { edges[w].emplace(v); } mappingLayer1.emplace(w); } } } } mappingLayer0 = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(mappingLayer1); } }; buildGraph(<span class="hljs-number"><span class="hljs-number">0</span></span>, replaces, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); inverseRules(replaces); buildGraph(<span class="hljs-number"><span class="hljs-number">1</span></span>, replaces, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; q; q.emplace(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; mask(mapping.size(), <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> level{<span class="hljs-number"><span class="hljs-number">0</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (q.size()) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [w, level] = q.front(); q.pop(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask[w]) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } mask[w] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mappingInverse.at(w) == wordMissprinted) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> level; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; v: edges[w]) { q.emplace(v, level + <span class="hljs-number"><span class="hljs-number">1</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; }</code> </pre> <br><h2>  B. Vielarmiger Bandit </h2><br><h4>  Zustand </h4><div class="scrollable-table"><table><tbody><tr><td>  Zeitlimit </td><td>  2 s </td></tr><tr><td>  Speicherlimit </td><td>  64 MB </td></tr><tr><td>  Geben Sie ein </td><td>  Standardeingabe </td></tr><tr><td>  Fazit </td><td>  Standardausgabe </td></tr></tbody></table></div>  Dies ist eine interaktive Aufgabe. <br><br>  Sie selbst wissen nicht, wie es passiert ist, aber Sie befanden sich in einer Halle mit Spielautomaten mit einer ganzen T√ºte Token.  Leider lehnen sie es an der Abendkasse ab, Token zur√ºckzunehmen, und Sie haben beschlossen, Ihr Gl√ºck zu versuchen.  Es gibt viele Spielautomaten in der Halle, die Sie spielen k√∂nnen.  F√ºr ein Spiel mit einem Spielautomaten verwenden Sie einen Token.  Im Falle eines Gewinns gibt Ihnen die Maschine einen Dollar, im Falle eines Verlustes - nichts.  Jede Maschine hat eine feste Gewinnwahrscheinlichkeit (die Sie nicht kennen), die jedoch f√ºr verschiedene Maschinen unterschiedlich ist.  Nachdem Sie die Website des Herstellers dieser Maschinen studiert haben, haben Sie festgestellt, dass die Gewinnwahrscheinlichkeit f√ºr jede Maschine in der Herstellungsphase zuf√§llig aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beta-Verteilung</a> mit bestimmten Parametern ausgew√§hlt wird. <br><br>  Sie m√∂chten Ihre erwarteten Gewinne maximieren. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate und Beispiel</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Eine Ausf√ºhrung kann aus mehreren Tests bestehen. <br><br>  Jeder Test beginnt mit der Tatsache, dass Ihr Programm in der Zeile zwei durch ein Leerzeichen getrennte Ganzzahlen enth√§lt: Die Anzahl N ist die Anzahl der Token in Ihrer Tasche und M ist die Anzahl der Maschinen in der Halle (N ‚â§ 10 <sup>4</sup> , M ‚â§ min (N, 100)). )  Die n√§chste Zeile enth√§lt zwei reelle Zahlen Œ± und Œ≤ (1 ‚â§ Œ±, Œ≤ ‚â§ 10) - die Parameter der Beta-Verteilung der Gewinnwahrscheinlichkeit. <br><br>  Das Kommunikationsprotokoll mit dem Pr√ºfsystem lautet wie folgt: Sie stellen genau N Anforderungen.  Drucken Sie f√ºr jede Anforderung in einer separaten Zeile die Nummer der Maschine aus, die Sie spielen m√∂chten (von 1 bis einschlie√ülich M).  Als Antwort wird in einer separaten Zeile entweder "0" oder "1" angezeigt, was jeweils einen Verlust und einen Gewinn in einem Spiel mit dem angeforderten Spielautomaten bedeutet. <br><br>  Nach dem letzten Test gibt es anstelle der Zahlen N und M zwei Nullen. <br><br><h4>  Ausgabeformat </h4><br>  Die Aufgabe gilt als erledigt, wenn Ihre Entscheidung nicht viel schlimmer ist als die Entscheidung der Jury.  Wenn Ihre Entscheidung erheblich schlechter ist als die Entscheidung der Jury, erhalten Sie das Urteil ‚Äûfalsche Antwort‚Äú. <br><br>  Es ist garantiert, dass die Wahrscheinlichkeit, das Urteil ‚Äûfalsche Antwort‚Äú zu erhalten, <sup>10-6</sup> nicht √ºberschreitet, wenn Ihre Entscheidung nicht schlechter ist als die Entscheidung der Jury. <br><br><h4>  Anmerkungen </h4><br>  Interaktionsbeispiel: <br><br><pre> <code class="cpp hljs">____________________  <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>     <span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span> ____________________ ____________________   <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>   <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>              <span class="hljs-number"><span class="hljs-number">2</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span>              <span class="hljs-number"><span class="hljs-number">1</span></span>    <span class="hljs-number"><span class="hljs-number">0</span></span>              <span class="hljs-number"><span class="hljs-number">1</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span>              <span class="hljs-number"><span class="hljs-number">2</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span>              <span class="hljs-number"><span class="hljs-number">2</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><h4>  L√∂sung </h4><br>  Dieses Problem ist bekannt und kann auf verschiedene Arten gel√∂st werden.  Die Hauptentscheidung der Jury setzte die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Thompson-Stichprobenstrategie um.</a> Da jedoch die Anzahl der Schritte zu Beginn des Programms bekannt war, gibt es optimalere Strategien (z. B. UCB1).  Dar√ºber hinaus k√∂nnte man sogar mit der Epsilon-Greedy-Strategie auskommen: Mit einer bestimmten Wahrscheinlichkeit Œµ eine zuf√§llige Maschine spielen und mit einer Wahrscheinlichkeit (1 - Œµ) eine Maschine mit der besten Siegesstatistik spielen. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SolverFromStdIn</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.regrets = [<span class="hljs-number"><span class="hljs-number">0.</span></span>] self.total_win = [<span class="hljs-number"><span class="hljs-number">0.</span></span>] self.moves = [] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThompsonSampling</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(SolverFromStdIn)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, bandits_total, init_a=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, init_b=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" init_a (int): initial value of a in Beta(a, b). init_b (int): initial value of b in Beta(a, b). """</span></span> SolverFromStdIn.__init__(self) self.n = bandits_total self.alpha = init_a self.beta = init_b self._as = [init_a] * self.n <span class="hljs-comment"><span class="hljs-comment"># [random.betavariate(self.alpha, self.beta) for _ in range(self.n)] self._bs = [init_b] * self.n # [random.betavariate(self.alpha, self.beta) for _ in range(self.n)] self.last_move = -1 random.seed(int(time.time())) def move(self): samples = [random.betavariate(self._as[x], self._bs[x]) for x in range(self.n)] self.last_move = max(range(self.n), key=lambda x: samples[x]) self.moves.append(self.last_move) return self.last_move def set_reward(self, reward): i = self.last_move r = reward self._as[i] += r self._bs[i] += (1 - r) return i, r while True: n, m = map(int, sys.stdin.readline().split()) if n == 0 and m == 0: break alpha, beta = map(float, sys.stdin.readline().split()) solver = ThompsonSampling(m) for _ in range(n): print &gt;&gt; sys.stdout, solver.move() + 1 sys.stdout.flush() reward = int(sys.stdin.readline()) solver.set_reward(reward)</span></span></code> </pre> <br><h2>  C. Ausrichtung der S√§tze </h2><br><h4>  Zustand </h4><div class="scrollable-table"><table><tbody><tr><td>  Zeitlimit </td><td>  2 s </td></tr><tr><td>  Speicherlimit </td><td>  64 MB </td></tr><tr><td>  Geben Sie ein </td><td>  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td>  Standardausgabe oder output.txt </td></tr></tbody></table></div>  Eine der wichtigsten Aufgaben f√ºr das Training eines guten maschinellen √úbersetzungsmodells ist ein guter Fall von parallelen S√§tzen.  In der Regel sind parallele Angebote die Quelle f√ºr parallele Angebote.  Es stellt sich heraus, dass Sie h√§ufig nur ihre L√§nge kennen m√ºssen, um ein bestimmtes Korpus paralleler S√§tze zu bilden.  Insbesondere stellen Sie m√∂glicherweise fest, dass der Satz in der Ausgangssprache umso l√§nger √ºbersetzt wird, je l√§nger er ist.  Einige Schwierigkeiten liegen in der Tatsache, dass sich w√§hrend der √úbersetzung die Anzahl der S√§tze im Text √§ndern kann: Manchmal k√∂nnen zwei benachbarte S√§tze in der √úbersetzung zu einem kombiniert werden oder umgekehrt - ein Satz kann in zwei S√§tze geteilt werden.  In einigen seltenen F√§llen k√∂nnen S√§tze in einer √úbersetzung vollst√§ndig weggelassen werden, oder eine √úbersetzung kann in einer √úbersetzung erscheinen, die nicht im Original enthalten war. <br><br>  Nehmen wir formeller an, dass das folgende generative Modell f√ºr parallele Geh√§use wahr ist.  Bei jedem Schritt f√ºhren wir einen der folgenden Schritte aus: <br><br>  <b>1. <i>Stoppen Sie</i></b> <br><br>  Mit der Wahrscheinlichkeit p <sub>h</sub> endet <sub>die</sub> Erzeugung der R√ºmpfe. <br><br>  <b>2. [1-0] <i>Angebote √ºberspringen</i></b> <br><br>  Mit der Wahrscheinlichkeit p <sub>d</sub> schreiben <sub>wir</sub> dem Originaltext einen Satz zu.  Wir schreiben der √úbersetzung nichts zu.  Die L√§nge des Satzes in der Originalsprache L ‚â• 1 wird aus der diskreten Verteilung ausgew√§hlt: <br><br><img src="https://habrastorage.org/webt/bm/pe/t_/bmpet_y_ksvwgbohazpgctekbks.png" width="350">  . <br><br>  Hier sind <i>Œºs</i> , <i>œÉs</i> die Verteilungsparameter und <i>Œ±s</i> der so gew√§hlte Normalisierungskoeffizient <img src="https://habrastorage.org/webt/fm/ae/ns/fmaensnvy1nauvywiluibhryr6s.png" width="100">  . <br><br>  <b>3. [0-1] <i>Vorschlag einf√ºgen</i></b> <br><br>  Mit der Wahrscheinlichkeit p <sub>i</sub> weisen <sub>wir</sub> der √úbersetzung einen Satz zu.  Wir schreiben dem Original nichts zu.  Die L√§nge eines Satzes in einer √úbersetzungssprache L ‚â• 1 wird aus einer diskreten Verteilung ausgew√§hlt: <br><br><img src="https://habrastorage.org/webt/yl/yn/kr/ylynkr3cs_t7dpedebtzqj3uryk.png" width="350">  . <br><br>  Hier sind <i>Œº <sub>t</sub></i> , <i>œÉ <sub>t</sub></i> die Verteilungsparameter und <i>Œ± <sub>t</sub></i> der so gew√§hlte Normalisierungskoeffizient <img src="https://habrastorage.org/webt/bq/-k/p3/bq-kp37k-c-k5fpq9jrz4r8rkvy.png" width="100">  . <br><br>  <b>4. <i>√úbersetzung</i></b> <br><br>  Mit der Wahrscheinlichkeit (1 - p <sub>d</sub> - p <sub>i</sub> - p <sub>h</sub> ) nehmen wir die L√§nge des Satzes in der Originalsprache L <sub>s</sub> ‚â• 1 aus der Verteilung p <sub>s</sub> (mit Aufrundung).  Als n√§chstes erzeugen wir die L√§nge des Satzes in der √úbersetzungssprache L <sub>t</sub> ‚â• 1 aus der bedingten diskreten Verteilung: <br><br><img src="https://habrastorage.org/webt/ae/b6/mx/aeb6mx4cols1jplbs-di9emhxf8.png" width="500">  . <br><br>  Hier ist <i>Œ± <sub>st</sub></i> der Normalisierungskoeffizient, und die verbleibenden Parameter sind in den vorhergehenden Abs√§tzen beschrieben. <br><br>  Weiter ist ein weiterer Schritt: <br><br>  1. [2-1] Mit der Wahrscheinlichkeit p <sub>split s</sub> teilt sich <sub>der</sub> erzeugte Satz in der Originalsprache in zwei nicht leere auf, so dass sich die Gesamtzahl der W√∂rter <b><i>um genau eins erh√∂ht</i></b> .  Die Wahrscheinlichkeit, dass ein Satz der L√§nge L <sub>s</sub> in Teile der L√§nge L <sub>1</sub> und L <sub>2</sub> zerf√§llt (dh L <sub>1</sub> + L <sub>2</sub> = L <sub>s</sub> + 1), ist proportional zu P <sub>s</sub> (L <sub>1</sub> ) ‚ãÖ P <sub>s</sub> (L <sub>2</sub> ). <br><br>  2. [1-2] Mit der Wahrscheinlichkeit p <sub>split t</sub> teilt sich <sub>der</sub> erzeugte Satz in der Zielsprache in zwei nicht leere S√§tze auf, so dass sich die Gesamtzahl der W√∂rter um genau eins erh√∂ht.  Die Wahrscheinlichkeit, dass ein Satz der L√§nge L <sub>t</sub> in Teile der L√§nge L1 und L2 zerf√§llt (dh L <sub>1</sub> + L <sub>2</sub> = L <sub>t</sub> + 1), ist proportional zu P <sub>t</sub> (L <sub>1</sub> ) ‚ãÖ P <sub>t</sub> (L <sub>2</sub> ). <br><br>  3. 3. [1-1] Mit einer Wahrscheinlichkeit von (1 - p <sub>split s</sub> - p <sub>split t</sub> ) zerf√§llt keiner der generierten S√§tze. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate, Beispiele und Hinweise</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Die erste Zeile der Datei enth√§lt die Verteilungsparameter: p <sub>h</sub> , p <sub>d</sub> , p <sub>i</sub> , p <sub>split s</sub> , p <sub>split t</sub> , Œº <sub>s</sub> , œÉ <sub>s</sub> , Œº <sub>t</sub> , œÉ <sub>t</sub> .  0,1 ‚â§ œÉ <sub>s</sub> &lt;œÉ <sub>t</sub> ‚â§ 3. 0 ‚â§ Œº <sub>s</sub> , Œº <sub>t</sub> ‚â§ 5. <br><br>  Die n√§chste Zeile enth√§lt die Zahlen N <sub>s</sub> und N <sub>t</sub> - die Anzahl der S√§tze im Fall in der Originalsprache bzw. in der Zielsprache (1 ‚â§ N <sub>s</sub> , N <sub>t</sub> ‚â§ 1000). <br><br>  Die n√§chste Zeile enth√§lt N <sub>s</sub> Ganzzahlen - die L√§nge der S√§tze in der Originalsprache.  Die n√§chste Zeile enth√§lt N <sub>t</sub> Ganzzahlen - die L√§nge der S√§tze in der Zielsprache. <br><br>  Die n√§chste Zeile enth√§lt zwei Zahlen: j und k (1 ‚â§ j ‚â§ N <sub>s</sub> , 1 ‚â§ k ‚â§ N <sub>t</sub> ). <br><br><h4>  Ausgabeformat </h4><br>  Es ist erforderlich, die Wahrscheinlichkeit abzuleiten, dass S√§tze mit den Indizes j bzw. k in den Texten parallel sind (dh, dass sie in einem Schritt des Algorithmus erzeugt werden und keiner von ihnen das Ergebnis des Zerfalls ist). <br><br>  Ihre Antwort wird akzeptiert, wenn der absolute Fehler 10 <sup>‚Äì4</sup> nicht √ºberschreitet. <br><br><h4>  Beispiel 1 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>0.05 0.08 0.07 0.15 0.1 1 0.3 3 0.5 <br> 1 1 <br> 4 <br> 20 <br> 1 1</code> </td> <td> <code>0.975037457809</code> </td> </tr></tbody></table></div><h4>  Beispiel 2 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>0.1 0.2 0.3 0.25 0.3 1 0.3 3 0.5 <br> 2 1 <br> 3 4 <br> 20 <br> 2 1</code> </td> <td> <code>0.247705779810</code> </td> </tr></tbody></table></div><h4>  Beispiel 3 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>0.2 0.2 0.2 0.3 0.3 3 0.3 1 1 <br> 5 3 <br> 16 35 24 19 23 <br> 5 6 7 <br> 2 1</code> </td> <td> <code>0.200961101684</code> </td> </tr></tbody></table></div><h4>  Anmerkungen </h4><br>  Im ersten Beispiel kann die anf√§ngliche Folge von Zahlen auf drei Arten erhalten werden: <br><br>  ‚Ä¢ F√ºgen Sie zuerst mit der Wahrscheinlichkeit p <sub>d</sub> einen Satz zum Originaltext hinzu, dann mit der Wahrscheinlichkeit p <sub>i</sub> einen Satz zur √úbersetzung und beenden Sie dann mit der Wahrscheinlichkeit p <sub>h</sub> die Generierung. <br><br>  Die Wahrscheinlichkeit dieses Ereignisses ist P <sub>1</sub> = p <sub>d</sub> * P <sub>s</sub> (4) * p <sub>i</sub> * P <sub>t</sub> (20) * p <sub>h</sub> . <br><br>  ‚Ä¢ F√ºgen Sie zuerst mit der Wahrscheinlichkeit p <sub>d</sub> einen Satz zum Originaltext hinzu, dann mit der Wahrscheinlichkeit p <sub>i</sub> einen Satz zur √úbersetzung und beenden Sie dann mit der Wahrscheinlichkeit p <sub>h</sub> die Generierung. <br><br>  Die Wahrscheinlichkeit dieses Ereignisses ist gleich P <sub>2</sub> = p <sub>i</sub> * P <sub>t</sub> (20) * p <sub>d</sub> * P <sub>s</sub> (4) * p <sub>h</sub> . <br><br>  ‚Ä¢ Mit der Wahrscheinlichkeit (1 - p <sub>h</sub> - p <sub>d</sub> - p <sub>i</sub> ) zwei S√§tze erzeugen, dann mit der Wahrscheinlichkeit (1 - p <sub>split s</sub> - p <sub>split t</sub> ) alles so lassen, wie es ist (dh das Original oder die √úbersetzung nicht in zwei S√§tze teilen ) und beenden Sie danach mit der Wahrscheinlichkeit p <sub>h</sub> die Erzeugung. <br><br>  Die Wahrscheinlichkeit dieses Ereignisses ist <br><img src="https://habrastorage.org/webt/xw/ka/ys/xwkayskmtg4g3tkt9pb3n-ieyoa.png" width="550">  . <br><br>  Als Ergebnis wird die Antwort berechnet als <img src="https://habrastorage.org/webt/zm/tw/xk/zmtwxkdjhhctfrcbiqsc0tur6g0.png" width="100">  . </div></div><br><h4>  L√∂sung </h4><br>  Die Aufgabe ist ein Sonderfall der Ausrichtung mit Hidden-Markov-Modellen (HMM-Ausrichtung).  Die Hauptidee ist, dass Sie die Wahrscheinlichkeit berechnen k√∂nnen, mit diesem Modell und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Vorw√§rtsalgorithmus</a> ein bestimmtes Dokumentpaar zu generieren: In diesem Fall ist der Status ein Paar von Dokumentpr√§fixen.  Dementsprechend kann die erforderliche Wahrscheinlichkeit der Ausrichtung eines bestimmten Paares paralleler S√§tze durch den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorw√§rts-R√ºckw√§rts-</a> Algorithmus berechnet werden. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;iomanip&gt; #include &lt;cmath&gt; #include &lt;vector&gt; double p_h, p_d, p_i, p_tr, p_ss, p_st, mu_s, sigma_s, mu_t, sigma_t; double lognorm_cdf(double x, double mu, double sigma) { if (x &lt; 1e-9) return 0.0; double res = std::log(x) - mu; res /= std::sqrt(2.0) * sigma; res = 0.5 * (1 + std::erf(res)); return res; } double length_probability(int l, double mu, double sigma) { return lognorm_cdf(l, mu, sigma) - lognorm_cdf(l - 1, mu, sigma); } double translation_probability(int ls, int lt) { double res = length_probability(ls, mu_s, sigma_s); double mu = mu_t - mu_s + std::log(ls); double sigma = std::sqrt(sigma_t * sigma_t - sigma_s * sigma_s); res *= length_probability(lt, mu, sigma); return res; } double split_probability(int l1, int l2, double mu, double sigma) { int l_sum = l1 + l2; double total_prob = 0.0; for (int i = 1; i &lt; l_sum; ++i) { total_prob += length_probability(i, mu, sigma) * length_probability(l_sum - i, mu, sigma); } return length_probability(l1, mu, sigma) * length_probability(l2, mu, sigma) / total_prob; } double log_prob10(int ls) { return std::log(p_d * length_probability(ls, mu_s, sigma_s)); } double log_prob01(int lt) { return std::log(p_i * length_probability(lt, mu_t, sigma_t)); } double log_prob11(int ls, int lt) { return std::log(p_tr * (1 - p_ss - p_st) * translation_probability(ls, lt)); } double log_prob21(int ls1, int ls2, int lt) { return std::log(p_tr * p_ss * split_probability(ls1, ls2, mu_s, sigma_s) * translation_probability(ls1 + ls2 - 1, lt)); } double log_prob12(int ls, int lt1, int lt2) { return std::log(p_tr * p_st * split_probability(lt1, lt2, mu_t, sigma_t) * translation_probability(ls, lt1 + lt2 - 1)); } double logsum(double v1, double v2) { double res = std::max(v1, v2); v1 -= res; v2 -= res; v1 = std::min(v1, v2); if (v1 &lt; -30) { return res; } return res + std::log(std::exp(v1) + 1.0); } double loginc(double* to, double from) { *to = logsum(*to, from); } constexpr double INF = 1e25; int main(void) { using std::cin; using std::cout; cin &gt;&gt; p_h &gt;&gt; p_d &gt;&gt; p_i &gt;&gt; p_ss &gt;&gt; p_st &gt;&gt; mu_s &gt;&gt; sigma_s &gt;&gt; mu_t &gt;&gt; sigma_t; p_tr = 1.0 - p_h - p_d - p_i; int Ns, Nt; cin &gt;&gt; Ns &gt;&gt; Nt; using std::vector; vector&lt;int&gt; ls(Ns), lt(Nt); for (int i = 0; i &lt; Ns; ++i) cin &gt;&gt; ls[i]; for (int i = 0; i &lt; Nt; ++i) cin &gt;&gt; lt[i]; vector&lt; vector&lt; double&gt; &gt; fwd(Ns + 1, vector&lt;double&gt;(Nt + 1, -INF)), bwd = fwd; fwd[0][0] = 0; bwd[Ns][Nt] = 0; for (int i = 0; i &lt;= Ns; ++i) { for (int j = 0; j &lt;= Nt; ++j) { if (i &gt;= 1) { loginc(&amp;fwd[i][j], fwd[i - 1][j] + log_prob10(ls[i - 1])); loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + 1][Nt - j] + log_prob10(ls[Ns - i])); } if (j &gt;= 1) { loginc(&amp;fwd[i][j], fwd[i][j - 1] + log_prob01(lt[j - 1])); loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i][Nt - j + 1] + log_prob01(lt[Nt - j])); } if (i &gt;= 1 &amp;&amp; j &gt;= 1) { loginc(&amp;fwd[i][j], fwd[i - 1][j - 1] + log_prob11(ls[i - 1], lt[j - 1])); loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + 1][Nt - j + 1] + log_prob11(ls[Ns - i], lt[Nt - j])); } if (i &gt;= 2 &amp;&amp; j &gt;= 1) { loginc(&amp;fwd[i][j], fwd[i - 2][j - 1] + log_prob21(ls[i - 1], ls[i - 2], lt[j - 1])); loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + 2][Nt - j + 1] + log_prob21(ls[Ns - i], ls[Ns - i + 1], lt[Nt - j])); } if (i &gt;= 1 &amp;&amp; j &gt;= 2) { loginc(&amp;fwd[i][j], fwd[i - 1][j - 2] + log_prob12(ls[i - 1], lt[j - 1], lt[j - 2])); loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + 1][Nt - j + 2] + log_prob12(ls[Ns - i], lt[Nt - j], lt[Nt - j + 1])); } } } int j, k; cin &gt;&gt; j &gt;&gt; k; double rlog = fwd[j - 1][k - 1] + bwd[j][k] + log_prob11(ls[j - 1], lt[k - 1]) - bwd[0][0]; cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(12) &lt;&lt; std::exp(rlog) &lt;&lt; std::endl; }</span></span></span></span></code> </pre> </div></div><br><h2>  D. Band mit Empfehlungen </h2><br><h4>  Zustand </h4><div class="scrollable-table"><table><tbody><tr><td>  Zeitlimit </td><td>  2 s </td></tr><tr><td>  Speicherlimit </td><td>  64 MB </td></tr><tr><td>  Geben Sie ein </td><td>  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td>  Standardausgabe oder output.txt </td></tr></tbody></table></div>  Betrachten Sie einen Feed mit Empfehlungen f√ºr heterogene Inhalte.  Es mischt Objekte verschiedener Typen (Bilder, Videos, Nachrichten usw.).  Diese Objekte sind normalerweise nach Relevanz f√ºr den Benutzer geordnet: Je relevanter (interessanter) das Objekt f√ºr den Benutzer ist, desto n√§her am Anfang der Empfehlungsliste.  Bei einer solchen Reihenfolge treten jedoch h√§ufig Situationen auf, in denen mehrere Objekte desselben Typs in der Liste der Empfehlungen aufgef√ºhrt sind.  Dies verschlechtert die externe Vielfalt unserer Empfehlungen erheblich und daher gef√§llt es den Benutzern nicht.  Es ist erforderlich, einen Algorithmus zu implementieren, der gem√§√ü der Liste der Empfehlungen eine neue Liste erstellt, die frei von diesem Problem ist und am relevantesten ist. <br><br>  Eine erste Liste von Empfehlungen sei a = [a <sub>0</sub> , a <sub>1</sub> , ..., a <sub>n - 1</sub> ] mit der L√§nge n&gt; 0. Ein Objekt mit der Nummer i hat den Typ mit der Nummer b <sub>i</sub> ‚àà {0, ..., m - 1}.  Zus√§tzlich hat ein Objekt unter der Nummer i die Relevanz r (a <sub>i</sub> ) = 2 <sub>‚àíi</sub> .  Betrachten Sie die Liste, die aus der ersten Liste erhalten wird, indem Sie eine Teilmenge von Objekten ausw√§hlen und neu anordnen: x = [a <sub>i <sub>0</sub></sub> , a <sub>i <sub>1</sub></sub> , ..., a <sub>i <sub>k - 1</sub></sub> ] mit der L√§nge k (0 ‚â§ k ‚â§ n).  Eine Liste wird als zul√§ssig bezeichnet, wenn keine zwei aufeinanderfolgenden Objekte in ihrem Typ √ºbereinstimmen, d. H. B <sub>i <sub>j</sub></sub> ‚â† b <sub>i <sub>j + 1</sub></sub> f√ºr alle j = 0, ..., k - 2.  Die Relevanz der Liste wird durch die Formel berechnet <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msubsup><msub><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2212;</mo><mi>j</mi></mrow></msub><mi>r</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>i</mi><mi>j</mi></msub></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.112ex" height="3.503ex" viewBox="0 -987.6 7367.6 1508.3" role="img" focusable="false" style="vertical-align: -1.209ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-75" x="719" y="0"></use><g transform="translate(1292,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-31" x="1300" y="0"></use></g><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-3D" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-30" x="1191" y="0"></use></g></g><g transform="translate(3543,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-6A" x="778" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-72" x="4986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-28" x="5437" y="0"></use><g transform="translate(5827,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMATHI-6A" x="488" y="-213"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhjW0yVgARkzQIXMYn0hHxHTb6K8Lw#MJMAIN-29" x="6978" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>‚àí</mo><mn>1</mn></mrow></msubsup><msub><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mo>‚àí</mo><mi>j</mi></mrow></msub><mi>r</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>i</mi><mi>j</mi></msub></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ sum_ {j = 0} ^ {k-1} 2 _ {- j} r (a_ {i_j}) </script>  .  Sie m√ºssen die Liste der maximalen Relevanz unter allen g√ºltigen finden. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate und Beispiele</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  In der ersten Zeile werden die Zahlen n und m mit einem Leerzeichen geschrieben (1 ‚â§ n ‚â§ 100000, 1 ‚â§ m ‚â§ n).  Die n√§chsten n Zeilen enthalten die Zahlen b <sub>i</sub> f√ºr i = 0, ..., n - 1 (0 ‚â§ b <sub>i</sub> ‚â§ m - 1). <br><br><h4>  Ausgabeformat </h4><br>  Notieren Sie mit einem Leerzeichen die Anzahl der Objekte in der endg√ºltigen Liste: i <sub>0</sub> , i <sub>1</sub> , ..., i <sub>k - 1</sub> . <br><br><h4>  Beispiel 1 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>1 1 <br> 0</code> </td> <td> <code>0</code> </td> </tr></tbody></table></div><h4>  Beispiel 2 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>2 2 <br> 1 <br> 1</code> </td> <td> <code>0</code> </td> </tr></tbody></table></div><h4>  Beispiel 3 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>10 2 <br> 1 <br> 1 <br> 1 <br> 0 <br> 0 <br> 1 <br> 0 <br> 1 <br> 1 <br> 1</code> </td> <td> <code>0 3 1 4 2 6 5</code> </td> </tr></tbody></table></div></div></div><br><h4>  L√∂sung </h4><br>  Mit einfachen mathematischen Berechnungen kann gezeigt werden, dass das Problem durch einen ‚Äûgierigen‚Äú Ansatz gel√∂st werden kann, dh in der optimalen Liste von Empfehlungen hat jeder Punkt das relevanteste Objekt von allen, die am selben Anfang der Liste g√ºltig sind.  Die Implementierung dieses Ansatzes ist einfach: Wir nehmen Objekte in einer Reihe und f√ºgen sie, wenn m√∂glich, der Antwort hinzu.  Wenn ein ung√ºltiges Objekt gefunden wird (dessen Typ mit dem Typ des vorherigen √ºbereinstimmt), legen wir es in einer separaten Warteschlange beiseite, aus der wir es so schnell wie m√∂glich in die Antwort einf√ºgen.  Beachten Sie, dass zu jedem Zeitpunkt alle Objekte in dieser Warteschlange einen √ºbereinstimmenden Typ haben.  Am Ende verbleiben m√∂glicherweise mehrere Objekte in der Warteschlange. Sie werden nicht in die Antwort aufgenommen. <br><br><pre> <code class="cpp hljs"> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; blend(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> m, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&amp; types) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; result; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">queue</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; repeated; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.empty() || types[result.back()] != types[i]) { result.push_back(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!repeated.empty() &amp;&amp; types[repeated.front()] != types[result.back()]) { result.push_back(repeated.front()); repeated.pop(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { repeated.push(i); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><h2>  D. Clusterisierung von Zeichenfolgen </h2><div class="scrollable-table"><table><tbody><tr><td></td><td>  <b>Alle Sprachen</b> </td><td>  <b>python2.7 + numpy</b> </td><td>  <b>python3.5 + numpy</b> </td></tr><tr><td>  Zeitlimit </td><td>  1 s </td><td>  6 s </td><td>  6 s </td></tr><tr><td>  Speicherlimit </td><td>  64 MB </td><td>  64 MB </td><td>  64 MB </td></tr><tr><td>  Geben Sie ein </td><td colspan="3">  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td colspan="3">  Standardausgabe oder output.txt </td></tr></tbody></table></div>  Es gibt ein endliches Alphabet A = {a <sub>1</sub> , a <sub>2</sub> , ..., a <sub>K - 1</sub> , a <sub>K</sub> = S}, a <sub>i</sub> ‚àà {a, b, ..., z}, S ist das Ende der Zeile. <br><br>  Betrachten Sie die folgende Methode zum Generieren von zuf√§lligen Zeichenfolgen √ºber dem Alphabet A: <br><br>  1. Das erste Zeichen x <sub>1</sub> ist eine Zufallsvariable mit der Verteilung P (x <sub>1</sub> = a <sub>i</sub> ) = q <sub>i</sub> (es ist bekannt, dass q <sub>K</sub> = 0 ist). <br>  2. Jedes n√§chste Zeichen wird basierend auf dem vorherigen gem√§√ü der bedingten Verteilung P (x <sub>i</sub> = a <sub>j</sub> || x <sub>i - 1</sub> = a <sub>l</sub> ) = p <sub>jl erzeugt</sub> . <br>  3. Wenn x <sub>i</sub> = S ist, stoppt die Erzeugung und das Ergebnis ist x <sub>1</sub> x <sub>2</sub> ... x <sub>i - 1</sub> . <br><br>  Der Satz von Linien, die aus einer Mischung von zwei beschriebenen Modellen mit unterschiedlichen Parametern erzeugt werden, ist angegeben.  F√ºr jede Zeile muss der Index der Kette angegeben werden, aus der sie generiert wurde. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate, Beispiel und Notizen</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Die erste Zeile enth√§lt zwei Zahlen 1000 ‚â§ N ‚â§ 2000 und 3 ‚â§ K ‚â§ 27 - die Anzahl der Zeilen bzw. die Gr√∂√üe des Alphabets. <br><br>  Die zweite Zeile enth√§lt eine Zeile, die aus K - 1 verschiedenen Kleinbuchstaben des lateinischen Alphabets besteht und die ersten K - 1 Elemente des Alphabets angibt. <br><br>  Jede der folgenden N Zeilen wird gem√§√ü dem in der Bedingung beschriebenen Algorithmus erzeugt. <br><br><h4>  Ausgabeformat </h4><br>  In n Zeilen enth√§lt die i-te Zeile die Clusternummer (0/1) f√ºr die Sequenz in der i + 1-ten Zeile der Eingabedatei.  Die √úbereinstimmung mit der wahren Antwort sollte mindestens 80% betragen. <br><br><h4>  Beispiel </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Geben Sie ein</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>100 3 <br> a <br> a <br> aa <br> a <br> aaa <br> a <br> aaaaaa <br> aa <br> a <br> a <br> a <br> aaa <br> a <br> a <br> aaa <br> aa <br> aaaa <br> aaa <br> a <br> aaaaa <br> aa <br> a <br> aaaa <br> a <br> a <br> a <br> a <br> a <br> a <br> aa <br> aaaa <br> aaa <br> a <br> aa <br> aaaa <br> a <br> a <br> a <br> a <br> a <br> a <br> a <br> a <br> a <br> a <br> aa <br> aaa <br> aaa <br> a <br> a <br> bbb <br> bb <br> bb <br> bbbbbbb <br> bb <br> bbb <br> b <br> bbbbbbb <br> bbbb <br> bbb <br> bb <br> bbb <br> bb <br> bb <br> bbb <br> bbbbbb <br> bbb <br> b <br> bbbbbb <br> b <br> bbbbb <br> b <br> b <br> bb <br> b <br> bb <br> bb <br> b <br> b <br> b <br> b <br> bb <br> bb <br> bb <br> b <br> b <br> b <br> bb <br> b <br> bbb <br> bb <br> b <br> bbbbbb <br> b <br> bb <br> bb <br> bb <br> b <br> bb <br> bbb</code> </td> <td> <code>0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 0 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1 <br> 1</code> </td> </tr></tbody></table></div><h4>  Anmerkungen </h4><br>  Hinweis zum Test aus der Bedingung: Darin werden die ersten 50 Zeilen aus der Verteilung generiert <br>  P (x <sub>i</sub> = a | x <sub>i - 1</sub> = a) = 0,5, P (x <sub>i</sub> = S | x <sub>i - 1</sub> = a) = 0,5, P (x <sub>1</sub> = a) = 1;  zweite 50 - aus der Verteilung <br>  P (x <sub>i</sub> = b | x <sub>i - 1</sub> = b) = 0,5, P (x <sub>i</sub> = S | x <sub>i - 1</sub> = b) = 0,5, P (x <sub>1</sub> = b) = 1. </div></div><br><h4>  L√∂sung </h4><br>  Das Problem wird mithilfe des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">EM-Algorithmus</a> gel√∂st: Es wird angenommen, dass die dargestellte Probe aus einer Mischung von zwei Markov-Ketten generiert wird, deren Parameter w√§hrend der Iterationen wiederhergestellt werden.  Eine Einschr√§nkung von 80% der richtigen Antworten wird vorgenommen, damit die Richtigkeit der L√∂sung nicht durch Beispiele beeintr√§chtigt wird, die in beiden Ketten eine hohe Wahrscheinlichkeit haben.  Diese Beispiele k√∂nnen daher bei ordnungsgem√§√üer Wiederherstellung einer Kette zugewiesen werden, die hinsichtlich der generierten Antwort falsch ist. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math EPS = <span class="hljs-number"><span class="hljs-number">1e-9</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">empty_row</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(size)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-number"><span class="hljs-number">0</span></span>] * size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">empty_matrix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rows, cols)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [empty_row(cols) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(rows)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">normalized_row</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(row)</span></span></span><span class="hljs-function">:</span></span> row_sum = sum(row) + EPS <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [x / row_sum <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> row] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">normalized_matrix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mtx)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [normalized_row(r) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mtx] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restore_params</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(alphabet, string_samples)</span></span></span><span class="hljs-function">:</span></span> n_tokens = len(alphabet) n_samples = len(string_samples) samples = [tuple([alphabet.index(token) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> token <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s] + [n_tokens - <span class="hljs-number"><span class="hljs-number">1</span></span>, n_tokens - <span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string_samples] probs = [random.random() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n_samples)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">200</span></span>): old_probs = [x <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> probs] <span class="hljs-comment"><span class="hljs-comment"># probs fixed p0, A = empty_row(n_tokens), empty_matrix(n_tokens, n_tokens) q0, B = empty_row(n_tokens), empty_matrix(n_tokens, n_tokens) for prob, sample in zip(probs, samples): p0[sample[0]] += prob q0[sample[0]] += 1 - prob for t1, t2 in zip(sample[:-1], sample[1:]): A[t1][t2] += prob B[t1][t2] += 1 - prob A, p0 = normalized_matrix(A), normalized_row(p0) B, q0 = normalized_matrix(B), normalized_row(q0) trans_log_diff = [ [math.log(b + EPS) - math.log(a + EPS) for b, a in zip(B_r, A_r)] for B_r, A_r in zip(B, A) ] # A, p0, B, q0 fixed probs = empty_row(n_samples) for i, sample in enumerate(samples): value = math.log(q0[sample[0]] + EPS) - math.log(p0[sample[0]] + EPS) for t1, t2 in zip(sample[:-1], sample[1:]): value += trans_log_diff[t1][t2] probs[i] = 1.0 / (1.0 + math.exp(value)) if max(abs(x - y) for x, y in zip(probs, old_probs)) &lt; 1e-9: break return [int(x &gt; 0.5) for x in probs] def main(): N, K = list(map(int, input().split())) string_samples = [] alphabet = list(input().strip()) + [''] for _ in range(N): string_samples.append(input().rstrip()) result = restore_params(alphabet, string_samples) for r in result: print(r) if __name__ == '__main__': main()</span></span></code> </pre> <br><hr><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461273/">https://habr.com/ru/post/de461273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461261/index.html">Checkliste n√ºtzlicher RRC-Webinare zu RRC-Produkten</a></li>
<li><a href="../de461265/index.html">√úber den Missbrauch der Verwendung des Betriebssystems in Projekten f√ºr Mikrocontroller</a></li>
<li><a href="../de461267/index.html">Neue Intel-Technologien f√ºr Chip-Verpackungen</a></li>
<li><a href="../de461269/index.html">Die Jobl√∂sung mit pwnable.kr 08 ist leg und 10 ist shellshock. ARM-Assembler. Bash-Schwachstelle</a></li>
<li><a href="../de461271/index.html">So bewerben Sie eine mobile Anwendung im Jahr 2019: 4 praktische M√∂glichkeiten + n√ºtzliche Tools</a></li>
<li><a href="../de461277/index.html">√úbersicht √ºber das kostenlose SQLIndexManager-Tool</a></li>
<li><a href="../de461279/index.html">So erstellen Sie einen einfachen Microservice f√ºr Golang und gRPC und containerisieren ihn mit Docker</a></li>
<li><a href="../de461281/index.html">Exemplarische Vorgehensweise zum Einrichten eines BIND-DNS-Servers in einer Chroot-Umgebung f√ºr Red Hat (RHEL / CentOS) 7</a></li>
<li><a href="../de461283/index.html">Softwarearchitektur und Systemdesign: Das Big Picture and Resource Guide</a></li>
<li><a href="../de461285/index.html">5 Haupt-Sampling-Algorithmen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>