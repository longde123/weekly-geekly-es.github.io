<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😆 🔘 📎 Diffusions Node.js: les ingénieurs de Google ont trouvé une vulnérabilité dans les scripts NPM 🔊 🧙🏽 ➖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Développeurs Node.js, exécutez la commande `npm install` à vos risques et périls et rappelez-vous que le ver à propagation automatique se déplace libr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diffusions Node.js: les ingénieurs de Google ont trouvé une vulnérabilité dans les scripts NPM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392409/"><img align="left" src="https://habrastorage.org/getpro/geektimes/post_images/505/0b8/afb/5050b8afb034d32446c33b1bfedcdb41.jpg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Développeurs Node.js, exécutez la commande `npm install` à vos risques et périls et rappelez-vous que le ver à propagation automatique se déplace librement dans l'écosystème. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous ne pouvez jamais supposer qu'un fichier téléchargé sur Internet est sûr. </font><font style="vertical-align: inherit;">Cela est vrai pour NPM, le gestionnaire de packages Node.js standard. </font><font style="vertical-align: inherit;">Une vulnérabilité dans l'installation de scripts permet à un attaquant de créer un ver à propagation automatique qui peut traverser les paquets NPM.</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Cela est possible du fait qu'un package NPM peut facilement traverser la plupart de l'écosystème à travers lui-même", écrit le développeur de Google Sam Sakoni dans son article "exposant l'hydre NPM." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme dans d'autres gestionnaires de packages, NPM prend en charge les scripts de «cycle de vie» qui peuvent être exécutés par des commandes externes dans le système en tant qu'utilisateur actuel. Bien que ces scripts soient souvent utiles et utilisés pour nettoyer les fichiers après le processus d'installation, compiler des modules binaires et créer automatiquement des fichiers de configuration, ils peuvent être dangereux en même temps, car ils peuvent apporter des modifications au système lors de l'exécution de diverses commandes.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Il est possible que des packages NPM écrits avec une intention malveillante, lors de l'installation, exécutent des scripts qui sont intégrés dans d'autres packages, qui sont à leur tour publiés dans le registre, et d'autres packages créés par l'utilisateur», écrivent-ils dans un article sur le blog officiel de NPM. Cependant, la société signale que les avantages de l'utilisation de ces scripts l'emportent sur les risques d'une menace potentielle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La publication minimise le risque et attire l'attention sur les colis qui sont «propres dès le début», mais tous n'en sont pas «à cent pour cent» sûrs. L'article de Sakoni, à l'exception de quelques solutions de contournement, ne précise pas comment être sûr que les packages que les utilisateurs installent ne seront pas ce qu'ils attendaient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«NPM ne peut garantir la sécurité de leur registre de packages», note l'article. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le ver s'infiltre dans les dépendances de paquets</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le ver tire parti de trois fonctionnalités de NPM: le contrôle de version sémantique (semver), la publication dans un registre centralisé et les privilèges d'un utilisateur qui se connecte automatiquement. Parce que l'utilisateur reste autorisé jusqu'à ce qu'il soit connecté manuellement. Quiconque se connecte et exécute l'installation permet aux autres modules d'exécuter une grande variété de commandes. Tant qu'il n'y a pas de liaison à des versions spécifiques, les packages peuvent être mis à niveau vers de nouvelles versions et chacun d'eux peut exécuter du code. Et enfin, ils peuvent envoyer des packages au serveur de registre central, d'où d'autres peuvent les installer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'attaque du ver repose sur l'ingénierie sociale pour l'infection initiale et les «améliorations» susmentionnées peuvent se déplacer librement dans l'écosystème.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, l'attaquant incite le propriétaire du package NPM à installer le package infecté sur son système. Il peut s'agir de phishing ou de toute autre attaque similaire. Une fois installé, il crée une version «cheval de Troie» du package du propriétaire du module NPM et définit un hook pour lancer le ver où qu'il soit installé. Le module modifié publié sur le compte du propriétaire devient le point de départ de l'infection de tous ses packages, lançant le module cheval de Troie en tant que dépendance. Le ver crée de nouvelles versions de modules dans le compte avec le commentaire «bugfix», et maintenant, quand il est installé, du code auto-propagé peut être exécuté.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un exemple. Phonegap a 463 dépendances intermédiaires. Et 276 comptes NPM individuels peuvent mettre à jour les versions de leurs packages. Maintenant, une seule personne sur ces 276 est suffisante pour que le ver continue à infecter tous ceux qui ont installé le package du projet PhoneGap, explique Sakoni. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPM nie les risques</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bien que le trou n'ait pas été fermé, une note sur la vulnérabilité de l'équipe de préparation aux urgences informatiques des États-Unis met en évidence plusieurs solutions pour contourner le danger. Ils utilisent l'option «-ignore-scripts» lorsqu'ils installent de nouvelles dépendances, ferment des versions avec «npm-shrinkwrap» et encouragent les utilisateurs dont les modules eux-mêmes sont constamment débloqués de NPM.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les organisations qui utilisent NPM dans leur environnement doivent exécuter un miroir de registre NPM local et empêcher les utilisateurs individuels d'installer directement les dépendances à partir du registre principal. Ils doivent vérifier régulièrement le registre local et s'assurer que les fichiers malveillants ne figurent pas dans la liste des dépendances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sakoni a recommandé de définir le délai d'expiration des jetons et de forcer les utilisateurs à quitter NPM après un certain laps de temps. Dans un article de blog, l'entreprise n'a pas décrit ces recommandations, mais a annoncé d'autres solutions pour minimiser les risques.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une idée est de compliquer la publication des modules, si l'utilisateur n'est pas conscient du danger, il peut s'agir d'une authentification à deux facteurs. Vous pouvez toujours travailler avec des entreprises qui offrent une protection, en proposant à ces dernières de vérifier les modules, mais jusqu'à présent, ce n'est pas possible. À l'heure actuelle, la société surveille les packages fréquemment mis à jour, car le ver peut être détecté par des versions très fréquentes de nouvelles versions, mais ils dépendent davantage des utilisateurs qui eux-mêmes notifieront les packages suspects. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Sans aucun doute, si de nombreux utilisateurs tentent de publier massivement des packages malveillants de concert, ils seront disponibles dans le registre NPM", a déclaré le blog. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire confiance mais vérifier</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sera quelques jours difficiles pour NPM. L'identification des packages publiés malveillants est leur «talon d'Achille». Dans le débat actuel sur le thème de la réglementation par le gestionnaire des colis retirés du registre. Suppression par le développeur d'un package de NPM la semaine dernière, interrompant ainsi de nombreux projets qui en dépendent. Il est également assez simple d'enregistrer votre code sous le nom du module distant. Quiconque a attribué le nom d'une autre personne peut définir le code pour n'importe quel utilisateur, ce qui dépend de l'original.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cours des derniers jours, Reddit et GitHub ont beaucoup discuté de la confiance dans les développeurs, du support des packages qu'ils ont créés et de la possibilité de commencer à créer du code malveillant. </font><font style="vertical-align: inherit;">Dans l'écosystème mondial, c'est une hypothèse dangereuse, car si l'un de ces développeurs veut casser beaucoup de code, il devra affronter toute la communauté. </font><font style="vertical-align: inherit;">Cependant, il doit y avoir des moyens d'installer des modules en toute sécurité, il peut s'agir d'une signature numérique ou d'autres méthodes de vérification de la sécurité et de l'exactitude du code. </font><font style="vertical-align: inherit;">En attendant, il ne reste plus qu'à ressentir l'alarme à chaque fois que vous exécutez la commande `npm install`. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Article d'origine: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.infoworld.com/article/3048526/security/nodejs-alert-google-engineer-finds-flaw-in-npm-scripts.html</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr392409/">https://habr.com/ru/post/fr392409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr392399/index.html">Espruino: JavaScript dans le microcontrôleur</a></li>
<li><a href="../fr392401/index.html">La mystérieuse planète X pourrait être capturée par le Soleil à partir d'un autre système stellaire</a></li>
<li><a href="../fr392403/index.html">Likbez sur les gadgets Xiaomi présentés sur AliExpress</a></li>
<li><a href="../fr392405/index.html">Les scientifiques ont pu contrôler la vitesse du scarabée en implantant des électrodes dans ses muscles</a></li>
<li><a href="../fr392407/index.html">Microsoft a commencé à livrer la version HoloLens pour les développeurs et a publié l'émulateur</a></li>
<li><a href="../fr392413/index.html">HyperX présente le nouveau casque de jeu Cloud Revolver</a></li>
<li><a href="../fr392415/index.html">Apple a déposé une demande de brevet pour des montres intelligentes pour Apple Watch</a></li>
<li><a href="../fr392419/index.html">Implémentation de tâches robotiques sur la plateforme KUKA youBot, partie 1</a></li>
<li><a href="../fr392421/index.html">Quadricoptères DJI AliExpress le 1er avril - une blague?</a></li>
<li><a href="../fr392423/index.html">Photos spatiales de la semaine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>