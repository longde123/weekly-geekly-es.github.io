<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍬 🌵 🍭 STM32F103C8T6 - die ersten Schritte. Beginnen Sie mit der Herstellung eines Oszilloskops 💾 🚫 💒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Über die Freuden und Schwierigkeiten der ersten Bekanntschaft mit STM32 nach AVR. Da habe ich die einfachste Aufgabe implementiert - Daten auf einen P...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>STM32F103C8T6 - die ersten Schritte. Beginnen Sie mit der Herstellung eines Oszilloskops</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384723/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über die Freuden und Schwierigkeiten der ersten Bekanntschaft mit STM32 nach AVR. </font><font style="vertical-align: inherit;">Da habe ich die einfachste Aufgabe implementiert - Daten auf einen PC zu übertragen.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/e0c/0e8/b75/e0c0e8b759a64d2db4c8d7569bdb60eb.JPG"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit etwas Erfahrung mit AVR möchte ich die eingetroffenen Controller (die einzeln </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,7 USD / Einheit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kosten </font><font style="vertical-align: inherit;">) mit denen in ihrer Nähe zum Preis von ATMEGA328 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,4 USD / Einheit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) vergleichen.</font></font><br>
<table>
<tbody><tr>
<td></td>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATMEGA328</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32F103C8T6</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gewinnen Sie mal</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash, kB</font></font></th>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM, kB</font></font></th>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwanzig</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximale Frequenz, MHz</font></font></th>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwanzig</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6</font></font></td>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADC-Geschwindigkeit, </font></font><abbr title="Kilosamples pro Sekunde - tausend Samples pro Sekunde"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kSPS</font></font></abbr></th>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fünfzehn</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 * 1000 (kann übertaktet werden)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">133</font></font></td>
</tr>
</tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor dem Hintergrund einer 10-100-fachen Erhöhung der Leistungsindikatoren stieg Flash nur um das 2-fache. </font><font style="vertical-align: inherit;">Darüber hinaus werden diese 64 kB bei AVR fast schneller verbraucht als 32. </font><font style="vertical-align: inherit;">Es ist logisch, solche Steuerungen dort zu verwenden, wo eine hohe Leistung erforderlich ist, aber es gibt keine codeintensiven Algorithmen ... zum Beispiel ein Oszilloskop. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aussehen der Debug-Boards: </font><font style="vertical-align: inherit;">
Von links nach rechts:</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/e26/7c7/c06/e267c7c06c29420b923de0ab69b8b80e.JPG" alt="Bild"></a><br><font style="vertical-align: inherit;"></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino UNO (ATmega328P), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,59 USD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser Board, das wir quälen werden (STM32F103C8T6), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 4,97</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein weiteres Debugboard auf STM32F103C8T6, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,92 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Nano (ATmega328P), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,23</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,56 USD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie man programmiert</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt sehr viele Programmierumgebungen STM32 - IAR, Keil, Coocox ... auf den ersten Blick scheint es gut zu sein und Sie werden auf jeden Fall etwas Passendes finden. Dann kommt das Verständnis, wie ein solcher Zoo entstanden ist. Nur jemand hat eine nicht sehr gute IDE gemacht. Die anderen schauten es sich an und entschieden, was sie besser machen könnten. Und sie taten es. In gewisser Weise stellte sich heraus, dass es besser war, in etwas Schlimmerem. Nachdem ich die Bewertungen gelesen und die IAR ausprobiert hatte, entschied ich mich für Coocox.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt ein anderes Programm - STM32CubeMX. </font><font style="vertical-align: inherit;">Tatsache ist, dass STM32 viel mehr Peripheriegeräte enthält als AVR. </font><font style="vertical-align: inherit;">Die Initialisierung ist viel schwieriger. </font><font style="vertical-align: inherit;">Mit STM32CubeMX können Sie einen Controller auswählen, mit der Maus stochern und einen Initialisierungscode generieren. </font><font style="vertical-align: inherit;">Auch wenn wir diesen generierten Code nicht verwenden möchten, ist es in STM32CubeMX praktisch, das Pinbelegungs- und Taktschema zu betrachten, die Teiler und Faktoren auszuwählen und sie manuell in Ihrem Code zu registrieren! </font><font style="vertical-align: inherit;">Sehr zu empfehlen für alle Anfänger! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STMStudio ist ein Programm, das die Echtzeitüberwachung von Variablenwerten in MK ermöglicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Programmierer habe ich mich für den günstigen ST-Link V2 für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,6 US-Dollar entschieden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist sehr einfach miteinander verbunden. </font><font style="vertical-align: inherit;">Nehmen Sie die JTAG-Pinbelegung, </font></font><br>
<img src="https://habrastorage.org/files/a5f/908/9dc/a5f9089dc1804f7ba79a8dd0fb17a8c4.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sehen Sie sich das Bild auf ST-Link an </font><font style="vertical-align: inherit;">
und schließen </font><font style="vertical-align: inherit;">Sie die Kabel </font><font style="vertical-align: inherit;">an </font><font style="vertical-align: inherit;">(ST-LINK -&gt; JTAG):</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/70f/1e9/1f5/70f1e91f547944d89b761d15eb977082.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GND -&gt; Pin 20; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,3 V -&gt; Pin 1; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RST -&gt; Pin 15; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWCLC -&gt; Pin 9; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWDIO -&gt; Pin 7. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie CoIDE aus und schreiben Sie</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blinken</font></font></b><div class="spoiler_text"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stm32f10x.h"</span></span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
	RCC-&gt;APB2ENR |= RCC_APB2Periph_GPIOC; <span class="hljs-comment">//   </span>
	GPIOC-&gt;CRH |= (<span class="hljs-number">0x3</span> &lt;&lt; <span class="hljs-number">20</span>); <span class="hljs-comment">//   50 </span>
	GPIOC-&gt;CRH &amp;= (~(<span class="hljs-number">0xC</span> &lt;&lt; <span class="hljs-number">20</span>)); <span class="hljs-comment">//      -</span>
	<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">long</span> i = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<font></font>
	{<font></font>
		GPIOC-&gt;BSRR = GPIO_BSRR_BR13;<font></font>
		<span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>*<span class="hljs-number">1000</span>*<span class="hljs-number">5</span>; i++){;};<font></font>
		GPIOC-&gt;BSRR = GPIO_BSRR_BS13;<font></font>
		<span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>*<span class="hljs-number">1000</span>*<span class="hljs-number">5</span>; i++){;};<font></font>
	}<font></font>
}<font></font>
</code></pre><br>
  ,   AVR, ,   2264   Flash…   ,   AVR <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>  .<br>
         — 2176 .<br>
 STDLIB — 1476 .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kompilieren, flashen ... und alles hat sofort funktioniert! </font><font style="vertical-align: inherit;">Ohne mit einem Tamburin zu tanzen! </font><font style="vertical-align: inherit;">Sogar der In-Circuit-Debugger hat funktioniert! </font><font style="vertical-align: inherit;">Wir starten STMStudio - und es funktioniert. </font><font style="vertical-align: inherit;">Erstellt Diagramme von Variablen während des MK-Betriebs! </font><font style="vertical-align: inherit;">Es gibt Jumper auf dem Board, aber Sie müssen nichts umschalten, um den MK zu programmieren / zu starten! </font><font style="vertical-align: inherit;">Genau wie bei einem Arduino! </font><font style="vertical-align: inherit;">Nun, es kann nicht so gut sein ... aber es kann nicht.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beginnen Sie mit der Herstellung eines Oszilloskops</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In meinen Träumen sollte das Oszilloskop wie folgt funktionieren: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beide ADCs verarbeiten das Signal gleichzeitig mit einer Geschwindigkeit von 1-2 MSPS. </font><font style="vertical-align: inherit;">Nächste 2 Optionen:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All dies wird in Echtzeit über USB an den PC übertragen und dort wird entschieden, was damit geschehen soll (denken Sie daran, erstellen Sie ein Diagramm, verarbeiten Sie es irgendwie, ...).</font></font></li>
<li>    .      :       (,         ,    ,     ).               .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beide Optionen konnten nicht implementiert werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste ist, weil ich USB nicht starten konnte. Vielmehr konnte ich das Projekt nur in STM32CubeMX generieren. Nach dem Export nach CoIDE musste der Bootloader jedoch durch Jumper für die Programmierung / Bedienung ersetzt werden, was nicht praktisch ist. Daher habe ich diese Option abgelehnt. Außerdem beträgt die USB-Geschwindigkeit nur 12 Mbit / s. Daten mit hoher Geschwindigkeit in Echtzeit passen immer noch nicht. Um Daten irgendwie auf den Computer zu übertragen, habe ich einen USB-UART-Konverter angeschlossen </font><font style="vertical-align: inherit;">
, der zu der Zeit für die Programmierung des Arduino Pro Mini gekauft wurde. </font><font style="vertical-align: inherit;">
Die zweite Option wurde abgedeckt, weil Der Interrupt-Handler hält länger als der ADC. Die Geschwindigkeit war auf nur 340-500 kSPS begrenzt, was um ein Vielfaches geringer als erwartet ist.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/699/78e/86b/69978e86b4084852813ab740c01b73a5.JPG"></a><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die einzige funktionierende Hochgeschwindigkeitsoption stellte sich als folgende heraus: ADCs arbeiten kontinuierlich, wenn eine Messung erforderlich ist, schalten DMA ein, warten, bis sich der Puffer gefüllt hat, schalten DMA aus und übertragen langsam Daten über USART an den PC. Diese Option hat alle Erwartungen übertroffen. MK kann übertaktet werden, so dass sich 9 MSPS mit zwei ADCs ergeben! Jene. 4,5 mal mehr als laut Dokumentation! Darüber hinaus ist es sehr bequem, ein Signal mit einer Frequenz von bis zu 1 MHz zu beobachten. Im Vergleich zu dem, was wir früher mit Arduino (10 kSPS) erreicht haben, ist das Ergebnis sehr gut - die Geschwindigkeit wurde um das 900-fache erhöht! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Übertakten ist jedoch nicht alles so fröhlich. Damit USB in Zukunft funktioniert, muss die Frequenz um das 16/9 = 1,8-fache reduziert werden, und dann werden nur 5 MSPS erhalten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Versuch, mit USB und anderen Peripheriegeräten umzugehen, stellte ich einen erheblichen Nachteil dieser Controller fest - im Internet gibt es nur sehr wenige Informationen. </font><font style="vertical-align: inherit;">Wenn AVR eine Menge von allem hat, </font><font style="vertical-align: inherit;">stellte sich heraus, dass es nicht so einfach war, </font><font style="vertical-align: inherit;">ein Beispiel für den gleichzeitigen Betrieb von zwei ADCs im </font></font><abbr title="In diesem Fall verarbeiten sie abwechselnd das Signal von einem Kanal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fast Interleaved-</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modus zu finden </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino UNO! Wurde als Signalgenerator für den Oszilloskoptest ausgewählt. </font><font style="vertical-align: inherit;">Nicht weil er gut ist oder so ... es ist nur sehr schnell.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreiben Sie 8 Zeilen:</font></font></b><div class="spoiler_text"><pre><code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {<font></font>
  pinMode(<span class="hljs-number">2</span>, OUTPUT);  
  <span class="hljs-keyword">long</span> d = <span class="hljs-number">10</span>;
  <span class="hljs-keyword">for</span>(;;){<font></font>
    PORTD = <span class="hljs-number">255</span>;<font></font>
    delayMicroseconds(d);<font></font>
    PORTD = <span class="hljs-number">0</span>;  <font></font>
    delayMicroseconds(d);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span>(<span class="hljs-params"></span>)</span> {<font></font>
  <font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schließen Sie die USB + 1-Verkabelung an (damit der 3,3-Volt-STM32 nicht an einem 5-Volt-Signal stirbt, das Signal wird über einen 2-kΩ-Widerstand eingespeist) und fertig! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich Folgendes heraus (unter jedem Bild befindet sich ein Foto des gleichen Signals auf dem Bildschirm eines analogen Oszilloskops): </font><font style="vertical-align: inherit;">
Signalperiode 0,9 μs. </font><font style="vertical-align: inherit;">1 Meter = 10 Pixel. </font><font style="vertical-align: inherit;">Auf dem Oszilloskop ist 1 Teilung = 0,5 μs. </font><font style="vertical-align: inherit;">
Signalperiode 10 μs. </font><font style="vertical-align: inherit;">1 Meter = 5 Pixel. </font><font style="vertical-align: inherit;">Auf dem Oszilloskop ist 1 Division = 2 μs. </font><font style="vertical-align: inherit;">Die Oberseiten werden abgeschnitten, weil das Signal die ADC-Referenzspannung überschreitet.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/20a/a26/37b/20aa2637bd004af795612b816daff450.png"></a><br>
<img src="https://habrastorage.org/files/5c7/650/30d/5c765030d3f84f47bf296b1d5884fb16.JPG"><br><font style="vertical-align: inherit;"></font><br>
<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/cf1/142/f85/cf1142f854b7475c86103aee9e2080f1.png"></a><br>
<img src="https://habrastorage.org/files/ebd/932/6e9/ebd9326e95f94941a67fdb61ec94353b.JPG"><br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was weiter</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Plänen:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besiege USB, um den USB-Konverter zu verlassen. &lt;-&gt; USART;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beenden Sie den analogen Teil so, dass der Eingangsspannungsbereich nicht 0 - 3,3 V beträgt, sondern anständiger ist.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mehrkanalmodus erstellen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementieren Sie die Steuerung von einem PC aus.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Machen Sie ein fertiges Gerät in dem Fall.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammenfassend mache ich auf zwei offenbarte Nachteile von STM32 gegenüber AVR aufmerksam:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erhöhter Verbrauch von Flash-Speicher;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komplexe Initialisierung der Peripherie, die durch Materialmangel noch verstärkt wird.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich weiß nicht wie, aber für eine so einfache Aufgabe waren 31 kB Flash erforderlich. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Schaltung der Debug-Karte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (es war nicht leicht zu finden). </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der zweite Teil des Artikels.</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de384723/">https://habr.com/ru/post/de384723/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de384713/index.html">Energieeinsparung im Unternehmen. Lösungsoption</a></li>
<li><a href="../de384715/index.html">Der Komet Churyumov-Gerasimenko besteht aus zwei miteinander verbundenen Kometen</a></li>
<li><a href="../de384717/index.html">[Fotos und Video] Bericht von EUROMOLD 2015</a></li>
<li><a href="../de384719/index.html">Man erhält einen neuen Typ von Nanomotoren, die mit sichtbarem Licht arbeiten.</a></li>
<li><a href="../de384721/index.html">Laboranalyse von Staubnanopartikeln oder wie kann man herausfinden, wie wir atmen?</a></li>
<li><a href="../de384725/index.html">Neuer Nexus, Chromecast und Android 6.0 Marshmallow: jetzt offiziell</a></li>
<li><a href="../de384727/index.html">Paul Graham: "Was du nicht sagen kannst"</a></li>
<li><a href="../de384729/index.html">Kibbi - das universelle Sicherheitssystem für zu Hause</a></li>
<li><a href="../de384731/index.html">Warum gibt es bei Kickstarter so viele ungewöhnliche Geldbörsen?</a></li>
<li><a href="../de384733/index.html">Überprüfen Sie das ASUS ZenPad S 8.0 Tablet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>