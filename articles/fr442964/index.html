<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🎨 👍🏻 👃🏻 L'art d'analyser ou de bricoler DOM 🧛🏿 🤵🏽 📯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Récemment, j'ai eu l'idée de créer un langage de balisage simple comme le markdown, qui serait parfait pour mes tâches, à savoir l'écri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'art d'analyser ou de bricoler DOM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442964/"> Bonjour, Habr!  Récemment, j'ai eu l'idée de créer un langage de balisage simple comme le markdown, qui serait parfait pour mes tâches, à savoir l'écriture rapide de conférences avec formatage et la possibilité d'insérer des formules mathématiques "à la volée", en utilisant un seul clavier.  Pour traduire un texte écrit dans ce format sous une forme plus compréhensible, par exemple, un document LibreOffice Writer, vous avez besoin d' <i>un analyseur</i> , en d'autres termes, un <i>analyseur</i> .  Depuis que je fabriquais des vélos, je suis allé sur les moteurs de recherche avec les requêtes "parser example", "html to DOM", "how to parse html", etc. par descente, ou des solutions prêtes à l'emploi telles que flex, bison, llvm et yacc ont été utilisées.  Il y avait encore plus de bibliothèques destinées à analyser des langages strictement définis (gumbo, jsoup, rapidjson, outils Qt, etc.) Ni l'un ni l'autre ne faisaient partie de mes plans pour écrire mon propre analyseur de balisage en C ++ en utilisant uniquement la bibliothèque standard, donc mon au lieu de ressources électroniques, les manuels des instituts techniques sont devenus une source de connaissances sur l'art de l'analyse.  Sur la façon de prendre le texte et de construire AST (arbre de syntaxe abstraite) à partir de celui-ci, sur certains des pièges que j'ai rencontrés au cours du processus, je vais vous parler des erreurs possibles aujourd'hui. <br><br>  Je ferai une réservation tout de suite - si votre objectif est votre propre langage de script ou encore plus compliqué, cet article ne sera pas suffisant pour sa mise en œuvre.  Idéalement, vous devez connaître parfaitement la théorie des automates et des structures discrètes.  Mais pour l'instant, comme point de départ, je peux me limiter à mon expérience, que je partage généreusement sous la coupe.  Ce n'est pas exactement ce que je voulais à l'origine, mais c'est idéal comme exemple.  Nous analyserons HTML comme un langage simple et familier. <br><a name="habracut"></a><br>  Tout d'abord, l'analyse, ou l'analyse, n'est pas synonyme du processus complet de transformation du texte en modèle objet.  Le processus lui-même comprend deux étapes: <br><br><ol><li>  <b>L'analyse lexicale du</b> texte en jetons est de petits morceaux de ce texte qui ont une certaine signification syntaxique. </li><li>  <b>L'analyse</b> est la construction de jetons basés sur leurs valeurs d'un <i>arbre de syntaxe abstraite</i> (AST - arbre de syntaxe abstraite) ou d' <i>un modèle d'objet de document</i> (DOM - modèle d'objet de document). </li></ol><br>  Mais mettons-le dans l'ordre.  Avant d'ouvrir votre IDE préféré et d'écrire du code, vous devez développer une grammaire de la future langue.  Parmi les grammaires formelles sans contexte, les plus célèbres sont la <i>forme Backus-Naur (BNF)</i> et la <i>forme étendue Backus-Naur</i> .  J'ai utilisé leur symbiose, prenant le meilleur des deux formes.  Toute expression peut être définie via d'autres expressions comme suit: <br><br><pre><code class="plaintext hljs">&lt;&gt; = &lt;_1&gt; &lt;_&gt; &lt;_2&gt;</code> </pre> <br>  Ici, une expression est définie par trois autres qui se succèdent.  À leur tour, ils doivent également être représentés par des «troisièmes» expressions, etc. <br><br>  Quand arrêter? <br><br>  La description de la syntaxe de n'importe quelle langue dans les grammaires formelles se compose de deux types de jetons: <i>terminaux</i> et <i>non-terminaux</i> .  <b>Les non terminaux</b> sont des expressions qui doivent être définies: <br><br><pre> <code class="plaintext hljs">&lt;_1&gt; = &lt;&gt; (&lt;_&gt; | &lt;_&gt;) &lt;&gt;</code> </pre> <br>  <b>Les terminaux sont</b> autosuffisants, ils n'ont pas besoin d'être définis.  Les exemples ci-dessus peuvent être écrits comme ceci: <br><br><pre> <code class="plaintext hljs">&lt;&gt; = &lt;_1&gt; "+" &lt;_2&gt; &lt;_1&gt; = &lt;&gt; ("*" | "/") &lt;&gt;</code> </pre> <br>  où "+", "*", "/" sont les terminaux. <br>  Vous devez sélectionner les terminaux dans la grammaire tout de suite, vous pouvez même les écrire dans une liste séparée au bas des définitions principales - ils vous seront utiles plus tard. <br><br>  Une description complète de BNF est disponible sur Wikipedia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  La compilation d'une grammaire d'une langue est une étape importante dans la création d'une langue qui ne tolère pas la frivolité.  Une erreur peut entraîner un code complètement inopérant, qui devra être réécrit à partir de zéro.  Par conséquent, avant de passer à l'étape suivante, assurez-vous qu'il n'y a pas de problèmes controversés dans la grammaire compilée.  Si vous avez deux moniteurs, il vous sera utile d'occuper un moniteur avec un document de grammaire pour le reste de votre travail afin de pouvoir rapidement y déplacer vos yeux lorsque vous codez.  Croyez-moi, vous devez le faire tout le temps.  Voici ma grammaire HTML5 BNF compilée: <br><br><pre> <code class="html hljs xml">(* document *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document</span></span></span><span class="hljs-tag">&gt;</span></span> = {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_tag</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">opening_tag</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">closing_tag</span></span></span><span class="hljs-tag">&gt;</span></span> (* tags *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">opening_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list</span></span></span><span class="hljs-tag">&gt;</span></span>] {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">closing_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "/" {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "!" {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list]</span></span></span><span class="hljs-tag"> {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} ["/"] "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "!" "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--</span></span></span><span class="hljs-tag">" &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">comment_text</span></span></span><span class="hljs-tag">&gt;</span></span> "--" "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "?" &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">macro_text</span></span></span><span class="hljs-tag">&gt;</span></span> "?" "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> = "a" | "abbr" | "address" | "article" | "aside" | "audio" | "b" | "bdo" | "blockquote" | "body" | "button" | "canvas" | "caption" | "cite" | "code" | "colgroup" | "data" | "datalist" | "dd" | "del" | "details" | "dfn" | "dialog" | "div" | "dl" | "dt" | "em" | "fieldset" | "figcaption" | "figure" | "footer" | "form" | "h1" | "h2" | "h3" | "h4" | "h5" | "h6" | "head" | "header" | "html" | "i" | "iframe" | "ins" | "kbd" | "label" | "legend" | "li" | "main" | "map" | "mark" | "meter" | "nav" | "noscript" | "object" | "ol" | "optgroup" | "option" | "output" | "p" | "picture" | "pre" | "progress" | "q" | "ruby" | "rb" | "rt" | "rtc" | "rp" | "s" | "samp" | "script" | "section" | "select" | "small" | "span" | "strong" | "style" | "sub" | "summary" | "sup" | "table" | "tbody" | "td" | "template" | "textarea" | "tfoot" | "th" | "thead" | "time" | "title" | "tr" | "track" | "u" | "ul" | "var" | "video" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> = "area" | "base" | "br" | "col" | "embed" | "hr" | "img" | "input" | "link" | "menuitem" | "meta" | "param" | "source" | "track" | "wbr" (* attributes *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "'" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> "'" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "\"" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> "\"" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> = (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} {* attribute values *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^[\s"'=<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>/]/ {/^[\s"'=<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>/]/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^[']/ {/^[']/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^["]/ {/^["]/} (* nonterminals *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> = {/^[<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>]/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment_text</span></span></span><span class="hljs-tag">&gt;</span></span> = ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_text</span></span></span><span class="hljs-tag">&gt;</span></span> = ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> = /[a-zA-Z]/ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> = /[0-9]/ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> = " " | "\t" | "\n" (* terminals *) "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">",</span></span></span><span class="hljs-tag"> "&gt;</span></span>", "/", "!", "?", " ", "\t", "\n"</code> </pre><br>  Lorsque la grammaire est prête, vous pouvez passer à l'analyseur lexical (un autre nom pour l'analyseur lexical, car en plus de l'analyse, il identifie les erreurs lexicales dans le document).  À première vue, tout est simple: absorber des caractères, écrire dans le tampon et lorsqu'un terminal clé est détecté, déterminer le jeton reçu comme un jeton avec un certain type, non?  Oui, seul le type de jeton importe plus que le symbole.  Je vais vous expliquer maintenant.  Bien sûr, la procédure de désassemblage (ifsteam &amp; file) doit contenir une boucle qui lit un caractère du flux d'entrée et l'envoie à la procédure process (const char &amp; c), où ce caractère est traité.  Il semble que la procédure doit contenir le commutateur ©, où chaque symbole de clé a ses propres fonctions, selon le type de jeton actuel.  En fait, l'inverse est vrai: il est préférable d'utiliser le commutateur pour vérifier le type de jeton et définir les fonctions des caractères.  De plus, le jeton actuel a le plus souvent un type indéfini, l'un des nombreux.  Par exemple, après avoir ouvert l'équerre, vous pouvez voir: ouverture, fermeture, balises vides, ainsi qu'un commentaire de style HTML ou une balise macro (script PHP inclus dans "&lt;? ...?&gt;". Et pour toutes ces unions, vous avez besoin de votre propre cas. Comment est-ce à l'aide de drapeaux de bits. Soit un nombre fini de types de jetons (plus c'est mieux, car la tâche de l'analyseur lexical est de laisser le moins de travail possible à la syntaxe). Pour chaque type, un nombre unique de degré deux est donné (1, 2, 4, 8 Ensuite, au format binaire, ils ressembleront à ceci: 0001, 0010, 0  100, etc., et avec l'ajout au niveau du bit de n'importe quel nombre de tout type, un nombre unique sera obtenu. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Token_type { END = <span class="hljs-number"><span class="hljs-number">1</span></span>, TEXT = <span class="hljs-number"><span class="hljs-number">2</span></span>, OPENING_BLOCK_TAG_NAME = <span class="hljs-number"><span class="hljs-number">4</span></span>, CLOSING_BLOCK_TAG_NAME = <span class="hljs-number"><span class="hljs-number">8</span></span>, EMPTY_TAG_NAME = <span class="hljs-number"><span class="hljs-number">16</span></span>, COMMENT = <span class="hljs-number"><span class="hljs-number">32</span></span>, MACRO_TAG = <span class="hljs-number"><span class="hljs-number">64</span></span>, ATTRIBUTE_NAME = <span class="hljs-number"><span class="hljs-number">128</span></span>, UNQUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">256</span></span>, SINGLE_QUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">512</span></span>, DOUBLE_QUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">1024</span></span> };</code> </pre><br>  Processus de procédure tronquée: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Lexer</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::process</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">const</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">char</span></span> &amp;<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>) { switch (curr_token_type) { case <span class="hljs-attribute"><span class="hljs-attribute">END</span></span>: { throw <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected ending!"</span></span>); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">TEXT</span></span>: { if (c == '&gt;') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&gt;\"!"</span></span>); else if (c == '&lt;') { if (!buffer.empty()) { add(buffer, TEXT); buffer.clear(); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">curr_token_type</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">else</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffer</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.push_back</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span>: { throw string("error!"); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span>: { if (c == '&lt;') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&lt;\"!"</span></span>); else if (c == '/') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&lt;\"!"</span></span>); else if (c == '!') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"!\"!"</span></span>); else if (c == '?') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"?\"!"</span></span>); else if (c == ' ') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">" \"!"</span></span>); else if (c == '\t') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"\\t\"!"</span></span>); else if (c == '\n') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"\\n\"!"</span></span>); else if (c == '&gt;') { for (unsigned int i(0); i &lt; BLOCK_TAGS_COUNT; i++) if (buffer == block_tags[i]) { add(buffer, CLOSING_BLOCK_TAG_NAME); buffer.clear(); curr_token_type = TEXT; break; } } <span class="hljs-selector-tag"><span class="hljs-selector-tag">else</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffer</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.push_back</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span>: { throw string("error!"); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ATTRIBUTE_NAME</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ATTRIBUTE_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } } }</code> </pre><br>  Nous vérifions avec le commutateur le type de jeton (ou jetons) attendu, et à l'intérieur de chaque cas, nous déterminons les procédures pour chacun des terminaux clés.  Il n'y a pas tellement de fonctions, tout le monde effectue des actions simples: soit ajouter un caractère au tampon, soit vider le tampon dans le jeton suivant, soit changer le type de jeton (s) attendu (s), soit lever une exception.  Il est facile de déterminer la procédure souhaitée en utilisant la grammaire écrite ci-dessus à l'aide d'un éditeur de texte interrogeable.  Il suffit de rechercher toutes les inclusions du jeton attendu (jetons) dans les définitions d'autres expressions, puis l'inclusion de ces expressions dans la "troisième", etc.  Voici un exemple de balise d'ouverture dans un éditeur de texte gedit: <br><br><img src="https://habrastorage.org/webt/72/fw/tw/72fwtwt_waeie4ulzftkxua356w.png" alt="orientation en grammaire formelle"><br><br>  Au début, naviguer dans la grammaire est difficile, mais avec le temps et l'expérience, cela ne devient pas plus compliqué que de diviser la colonne.  Et voici la procédure de démontage: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Lexer::disassemble (ifstream &amp;file) { tokens_count = <span class="hljs-number"><span class="hljs-number">0</span></span>; curr_token_type = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">line</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pos</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c; curr_token_type = TEXT; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((c = file.get()) != EOF) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) { pos = <span class="hljs-number"><span class="hljs-number">1</span></span>; line++; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> pos++; process(c); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer.size() != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(curr_token_type | TEXT)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"text was expected!"</span></span>); add(buffer, TEXT); buffer.clear(); } add(<span class="hljs-string"><span class="hljs-string">""</span></span>, END); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;error) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"lexer: "</span></span> + to_string(line) + <span class="hljs-string"><span class="hljs-string">","</span></span> + to_string(pos) + <span class="hljs-string"><span class="hljs-string">": "</span></span> + error); } }</code> </pre><br>  Le premier jeton attendu est évidemment nécessaire pour définir le type sur TEXT, et à la fin ajouter le jeton de type END avec n'importe quel texte (ou vide, comme ici). <br><br>  Par exemple, j'ai pris un de mes modèles de document HTML avec un commentaire, y ai ajouté un script pseudo-PHP, l'ai traité avec un lexer et affiché une liste de jetons au format "[" &lt;token_text&gt; ": &lt;token_type&gt;]".  Voici ce qui s'est passé: <br><br><div class="spoiler">  <b class="spoiler_title">Se documenter</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content-type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"author"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Interquadro"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keywords"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"format-detection"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"telephone=no"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"x-rim-auto-match"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"telephone=none"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"referrer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no-referrer"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_suburl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shortcut icon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".ico"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 9]&gt; &lt;script src="http://html5shiv.googlecode.com/svn/trunk/html5-els.js"&gt;&lt;/script&gt; &lt;![endif]--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"intro"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">small</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"copyright"</span></span></span><span class="hljs-tag">&gt;</span></span>Copyright © 2019.   .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">small</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Liste de jetons</b> <div class="spoiler_text"><pre> ["! DOCTYPE": EMPTY_TAG_NAME]
 ["html": ATTRIBUTE_NAME]
 ["
 ": TEXTE]
 ["html": OPENING_BLOCK_TAG_NAME]
 ["lang": ATTRIBUTE_NAME]
 ["en": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
 ": TEXTE]
 ["tête": OPENING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["http-equiv": ATTRIBUTE_NAME]
 ["type de contenu": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["text / html": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["jeu de caractères": ATTRIBUTE_NAME]
 ["utf-8": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["auteur": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["Interquadro": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["description": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["mots-clés": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["fenêtre d'affichage": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["largeur = largeur de l'appareil, échelle initiale = 1": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["détection de format": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["téléphone = non": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["http-equiv": ATTRIBUTE_NAME]
 ["x-rim-auto-match": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["téléphone = aucun": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["référent": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["pas de référence": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["méta": EMPTY_TAG_NAME]
 ["nom": ATTRIBUTE_NAME]
 ["_suburl": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["contenu": ATTRIBUTE_NAME]
 ["": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	
	 ": TEXTE]
 ["titre": OPENING_BLOCK_TAG_NAME]
 ["titre": CLOSING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["lien": EMPTY_TAG_NAME]
 ["rel": ATTRIBUTE_NAME]
 ["icône de raccourci": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["href": ATTRIBUTE_NAME]
 [".ico": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
	 ": TEXTE]
 ["lien": EMPTY_TAG_NAME]
 ["rel": ATTRIBUTE_NAME]
 ["feuille de style": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["type": ATTRIBUTE_NAME]
 ["text / css": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["href": ATTRIBUTE_NAME]
 [".css": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["titre": ATTRIBUTE_NAME]
 ["": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["

	 ": TEXTE]
 ["[si lt IE 9]&gt;
	 &lt;script src = "http://html5shiv.googlecode.com/svn/trunk/html5-els.js"&gt; &lt;/script&gt;
	 &lt;! [endif] ": COMMENT]
 ["
 ": TEXTE]
 ["tête": CLOSING_BLOCK_TAG_NAME]
 ["

 ": TEXTE]
 ["corps": OPENING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["en-tête": OPENING_BLOCK_TAG_NAME]
 ["
		 ": TEXTE]
 ["div": OPENING_BLOCK_TAG_NAME]
 ["id": ATTRIBUTE_NAME]
 ["intro": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["

		 ": TEXTE]
 ["div": CLOSING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["en-tête": CLOSING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["nav": OPENING_BLOCK_TAG_NAME]
 ["
		 ": TEXTE]
 ["ul": OPENING_BLOCK_TAG_NAME]
 ["id": ATTRIBUTE_NAME]
 ["nav": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
			 ": TEXTE]
 ["li": OPENING_BLOCK_TAG_NAME]
 ["classe": ATTRIBUTE_NAME]
 ["nav": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["a": OPENING_BLOCK_TAG_NAME]
 ["href": ATTRIBUTE_NAME]
 ["#": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["Accueil": TEXTE]
 ["a": CLOSING_BLOCK_TAG_NAME]
 ["li": CLOSING_BLOCK_TAG_NAME]
 ["
			 ": TEXTE]
 ["li": OPENING_BLOCK_TAG_NAME]
 ["classe": ATTRIBUTE_NAME]
 ["nav": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["a": OPENING_BLOCK_TAG_NAME]
 ["href": ATTRIBUTE_NAME]
 ["#": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["Review": TEXT]
 ["a": CLOSING_BLOCK_TAG_NAME]
 ["li": CLOSING_BLOCK_TAG_NAME]
 ["
			 ": TEXTE]
 ["li": OPENING_BLOCK_TAG_NAME]
 ["classe": ATTRIBUTE_NAME]
 ["nav": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["a": OPENING_BLOCK_TAG_NAME]
 ["href": ATTRIBUTE_NAME]
 ["": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["Aide": TEXTE]
 ["a": CLOSING_BLOCK_TAG_NAME]
 ["li": CLOSING_BLOCK_TAG_NAME]
 ["
		 ": TEXTE]
 ["ul": CLOSING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["nav": CLOSING_BLOCK_TAG_NAME]
 ["

	 ": TEXTE]
 ["principal": OPENING_BLOCK_TAG_NAME]
 ["id": ATTRIBUTE_NAME]
 ["contenu": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["
		 ": TEXTE]
 ["php": MACRO_TAG]
 ["
	 ": TEXTE]
 ["principal": CLOSING_BLOCK_TAG_NAME]
 ["

	 ": TEXTE]
 ["pied de page": OPENING_BLOCK_TAG_NAME]
 ["
		 ": TEXTE]
 ["h": EMPTY_TAG_NAME]
 ["
		 ": TEXTE]
 ["petit": OPENING_BLOCK_TAG_NAME]
 ["id": ATTRIBUTE_NAME]
 ["copyright": DOUBLE_QUOTED_ATTRIBUTE_VALUE]
 ["Copyright © 2019. Tous droits réservés."  : TEXTE]
 ["petit": CLOSING_BLOCK_TAG_NAME]
 ["
	 ": TEXTE]
 ["pied de page": CLOSING_BLOCK_TAG_NAME]
 ["
 ": TEXTE]
 ["corps": CLOSING_BLOCK_TAG_NAME]
 ["

 ": TEXTE]
 ["html": CLOSING_BLOCK_TAG_NAME]
 ["
 ": TEXTE]
 ["": END]
</pre><br><br></div></div><br>  Nous sommes maintenant prêts à commencer la deuxième partie - la construction d'un arbre de syntaxe.  Puisque nos balises ont des attributs, les nœuds d'arborescence, en plus de la communication avec d'autres nœuds, contiendront des tableaux de paires clé-valeur.  La construction résultante peut à juste titre être appelée le modèle objet du document DOM mentionné dans le titre de l'article. <br><br>  De combien de classes avez-vous besoin pour implémenter toutes les propriétés des éléments HTML? <br><br>  Idéalement, il y a une classe pour chaque élément afin que les feuilles de style en cascade puissent être définies pour eux, mais nous nous limiterons à trois - une balise "Node" vide, un bloc "Block" hérité (contenu entre deux balises appariées) et hérité de lui avec la racine de l'arbre racine.  Nous définissons également dans l'analyseur un tableau de balises pouvant contenir du texte, comme &lt;p&gt;, &lt;li&gt;, &lt;strong&gt;, etc., pour éliminer les jetons avec du texte non placé.  Maintenant, c'est aux petits.  Si vous avez bien travaillé sur l'analyseur lexical, la tâche de l'analyseur syntaxique consiste simplement à absorber les jetons et à effectuer l'une des trois opérations dans le nœud ouvert: ajoutez-y un nœud vide, ouvrez-en un nouveau ou fermez-le vous-même en renvoyant le pointeur au parent.  Pour ce dernier, il est nécessaire que toutes les classes, en commençant par le Node de base, contiennent un tel pointeur obtenu lors de la création de l'élément.  Ce processus est appelé <i>analyse descendante</i> . <br><br>  Procédure d'analyse: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Parser::parse (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Lexer &amp;lexer) { Block * open_block = (Block*) tree; Node * last_node = (Node*) tree; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> size = lexer.count(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> i(<span class="hljs-number"><span class="hljs-number">0</span></span>); i &lt; size<span class="hljs-number"><span class="hljs-number">-2</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (lexer[i].type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::TEXT: { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j(<span class="hljs-number"><span class="hljs-number">0</span></span>); j &lt; TEXT_TAGS_COUNT; j++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_block-&gt;get_name() == text_tags[j]) last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"TEXT"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::OPENING_BLOCK_TAG_NAME: { last_node = open_block = open_block-&gt;open(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::CLOSING_BLOCK_TAG_NAME: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lexer[i].lexeme != open_block-&gt;get_name()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected closing tag: &lt;/"</span></span> + lexer[i].lexeme + <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>); open_block = open_block-&gt;close(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::EMPTY_TAG_NAME: { last_node = open_block-&gt;add(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::COMMENT: { last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"COMMENT"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::MACRO_TAG: { last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"MACRO"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::ATTRIBUTE_NAME: { last_node-&gt;add_attr(lexer[i].lexeme, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::UNQUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::SINGLE_QUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::DOUBLE_QUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::END: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_block-&gt;get_type() != Node::ROOT) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected ending!"</span></span>); open_block-&gt;close(); } } } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;error) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"parser: "</span></span> + error); } }</code> </pre><br>  C'est tout!  Si vous avez tout fait correctement, l'arborescence résultante peut être affichée: <br><br><pre> | 
 + - &lt;ROOT&gt;
   | 
   + - &lt;! DOCTYPE&gt;
   | 
   + - &lt;html&gt;
     | 
     + - &lt;head&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;meta&gt;
     |  | 
     |  + - &lt;titre&gt;
     |  | 
     |  + - &lt;link&gt;
     |  | 
     |  + - &lt;link&gt;
     |  | 
     |  + - &lt;COMMENTAIRE&gt;
     | 
     + - &lt;body&gt;
       | 
       + - &lt;en-tête&gt;
       |  | 
       |  + - &lt;div&gt;
       | 
       + - &lt;nav&gt;
       |  | 
       |  + - &lt;ul&gt;
       |  | 
       |  + - &lt;li&gt;
       |  |  | 
       |  |  + - &lt;a&gt;
       |  | 
       |  + - &lt;li&gt;
       |  |  | 
       |  |  + - &lt;a&gt;
       |  | 
       |  + - &lt;li&gt;
       |  | 
       |  + - &lt;a&gt;
       | 
       + - &lt;main&gt;
       |  | 
       |  + - &lt;MACRO&gt;
       | 
       + - &lt;footer&gt;
         | 
         + - &lt;hr&gt;
         | 
         + - &lt;petite&gt;
</pre><br><br>  Cependant, bien que l'arbre résultant puisse vraiment être appelé le DOM, notre analyseur est loin d'être jQuery complet, Jsoup, beautifulsoup ou Gumbo, en particulier parce qu'il ne peut pas traiter correctement le texte situé entre les balises &lt;style&gt; et &lt;script&gt; appariées, et donc la source jusqu'à ce que je l'apporte.  Mais j'ajouterai certainement si les habitants de Habrovsk expriment un tel désir.  Succès. <br><br>  PS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Codes source remplis</a> en accès public.  À mon humble avis, brut, je vais donc planifier une bibliothèque complète. <br><br>  PSS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La deuxième partie.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442964/">https://habr.com/ru/post/fr442964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442950/index.html">Donnez votre avis sur Cutra Wonder Cutter</a></li>
<li><a href="../fr442952/index.html">Nouveau Hackathon à Tinkoff.ru</a></li>
<li><a href="../fr442954/index.html">Utilisation de SQLite dans Unity (Unity + SQLite)</a></li>
<li><a href="../fr442958/index.html">Nikita Shamgunov a expliqué à The Bell avoir travaillé avec Microsoft et Facebook, parler avec Gates et la base de données MemSQL</a></li>
<li><a href="../fr442962/index.html">Un autre article sur les vies à Rust</a></li>
<li><a href="../fr442966/index.html">Le Bitcoin pour Starbucks Coffee pose d'importants problèmes de déclaration de revenus</a></li>
<li><a href="../fr442968/index.html">Obtention d'un CPE pour prendre en charge les certifications professionnelles (étude de cas ISACA)</a></li>
<li><a href="../fr442970/index.html">Jeu de société pour apprendre les bases des circuits électriques. Pourquoi pas?</a></li>
<li><a href="../fr442974/index.html">Le projet de loi sur la lutte contre les fausses informations adopté en troisième lecture</a></li>
<li><a href="../fr442976/index.html">Situation: un géant informatique achète une startup Wi-Fi pour 405 millions de dollars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>