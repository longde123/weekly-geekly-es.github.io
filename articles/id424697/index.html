<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ»â€ğŸš€ ğŸ™ğŸ» ğŸ•¦ Pergi versus Excel di ratusan ribu baris ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ¹ ğŸ“…</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tahun ini kami sudah menulis di HabrÃ© tentang proyek kami SmartCalls.io - desainer panggilan visual yang dibuat untuk pengguna bisnis. Proyek ini meme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pergi versus Excel di ratusan ribu baris</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/424697/">  Tahun ini kami sudah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menulis di HabrÃ©</a> tentang proyek kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SmartCalls.io</a> - desainer panggilan visual yang dibuat untuk pengguna bisnis.  Proyek ini memecahkan masalah bisnis panggilan pelanggan massal: skrip panggilan visual dibuat, file Excel dengan nomor telepon dimuat, dan kemudian kampanye panggilan dibuat.  Kampanye diluncurkan - panggilan ke pelanggan dimulai;  kapan saja Anda dapat menonton statistik, menjeda kampanye, mengubah pengaturan.  Pelanggan puas sampai menjadi jelas bahwa kadang-kadang perlu untuk menelepon tidak hanya banyak orang, tetapi SANGAT, SANGAT banyak.  Di bawah potongan adalah inti dari masalah dan bagaimana kita mengalahkannya menggunakan bahasa pemrograman HYIP (tidak masuk akal). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fo/uq/tb/fouqtbwyesfm-kepb-dfnpg71ig.png"></div><a name="habracut"></a><br><h3>  Masalah </h3><br>  Awalnya, pemrosesan file diimplementasikan dalam PHP 7.1 - itu adalah pilihan yang jelas, karena seluruh API SmartCalls ditulis di atasnya.  Bekerja dengan daftar panggilan memiliki satu batasan - file tidak boleh mengandung lebih dari 10 ribu baris yang diisi.  Keterbatasan ini sejak awal di SmartCalls dan, bagaimanapun, tidak kritis.  Sampai titik tertentu. <br><br>  Satu bank besar memiliki kebutuhan untuk kampanye menelepon yang sangat besar: diperlukan lebih dari 10 ribu pengguna.  Tentu saja, tidak ada yang mencegah memecah file besar menjadi beberapa yang kecil dan mengunduhnya satu per satu, tetapi membuat klien menderita seperti ini bukan metode kami.  Berbicara tentang unduhan alternatif - jika klien kami telah meluncurkan kampanye panggilan dan tiba-tiba ingin menambahkan pengguna ke dalamnya, maka ia dapat dengan mudah melakukannya.  Ini sangat nyaman karena Anda tidak perlu berhenti menelepon atau menjalankan kampanye terpisah untuk pengguna baru.  Tetapi Anda harus memahami bahwa kemungkinan memuat ulang tidak dipahami sebagai cara untuk memuat file besar secara manual, dalam beberapa bagian. <br><br>  Jadi, tim memiliki tugas - untuk mengimplementasikan unggahan file besar dalam kampanye untuk menelepon. <br><br><h3>  Solusi </h3><br>  Kami sangat kompeten dalam pengembangan Java - misalnya, sebagian Voximplant API diimplementasikan dalam bahasa ini;  kami juga mahir dalam PHP (lihat contoh di atas - Kapten Evidence menyarankan).  Artinya, kami dapat dengan cepat menutup tugas ini menggunakan salah satu dari bahasa ini, tetapi kami berpikir untuk waktu yang lama untuk memperluas tumpukan teknologi kami, dan di sini kami mengingatnya dengan sangat baik: ini cukup cepat (bekerja dengan baik dengan memori), multi-threaded dan tidak perlu runtime karena  Pergi mengkompilasi ke dalam biner yang dapat dieksekusi.  Selain itu, kita dapat mengatakan tentang ukuran wadah, tetapi lebih lanjut tentang itu nanti ... <br><br>  Sebagai hasilnya, kami menulis microservice dalam bahasa Go, yang menerima lembaran ukuran besar (diuji hingga 300 ribu baris) dan format (xls, xlsx dan semua variasinya).  Sekarang saatnya untuk perincian. <br><br><h3>  Implementasi </h3><br>  Ketika klien mengunggah file&gt; 10 ribu baris ke kampanye SmartCalls, layanan mikro akan diambil untuk itu.  Dibutuhkan input pointer: <br><br><ul><li>  ke file yang diunduh ke penyimpanan S3; </li><li>  ke kampanye di mana file ini perlu diunggah. </li></ul><br>  Kemudian microservice menjalankan file, klik dalam potongan 10 ribu baris (maksimum untuk platform) dan memuat setiap potongan sebagai <b>file csv</b> ke dalam penyimpanan S3, membuat catatan dalam database tentang setiap potongan (path ke file, jumlah baris).  Setiap potongan diproses dan dimuat dalam aliran terpisah, yang memberikan peningkatan tambahan dalam kecepatan eksekusi. <br><br>  Untuk membaca file Excel digunakan pustaka sumber terbuka dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tealeg</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">extrame</a> .  Ini bagus karena mereka tidak hanya memiliki banyak bintang, tetapi juga komitmen baru :) <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"github.com/tealeg/xlsx"</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/extrame/xls"</span></span> <span class="hljs-comment"><span class="hljs-comment">//   )</span></span></code> </pre> <br>  Dan semuanya akan baik-baik saja, tetapi tidak tanpa nuansa.  Selama pengembangan, ternyata xlsx dan xls, dibuat di editor yang berbeda, sangat berbeda dalam format dan aturan untuk bekerja dengannya.  Saya harus melakukan banyak tes - OpenOffice, Excel dari berbagai versi, LibreOffice, Google Sheets, untuk mengajarkan layanan microser untuk membawa file ke bentuk tunggal - CSV.  Setelah microservice "mengunyah" file besar dan mengubahnya menjadi CSV, SmartCalls API dihidupkan dan sudah berfungsi dengan file csv ini.  Untuk layanan mikro, kami meninggalkan batas 300 ribu garis, karena sangat memenuhi kebutuhan pelanggan, dan kami tidak menemukan kebutuhan yang lebih besar. <br><br>  Hasilnya, implementasi menunjukkan hasil yang sangat baik dalam tes dan preprod, setelah itu kami meluncurkannya ke dalam prod. <br><br><h3>  Kesimpulan </h3><br>  Tim kami selalu berusaha untuk meluncurkan fitur / peningkatan baru dengan cepat, karena kami ingin pelanggan yang puas tetap seperti itu.  Tugas dengan file besar bukan hanya tantangan bagi kami, tetapi juga alasan yang bagus untuk memperkenalkan Go ke dalam proyek, yang telah lama kami lihat.  Selain perkembangan yang cepat dan kecepatan kerja, Go memberi kita dasar untuk masa depan ketika kita mulai memperkenalkan wadah (untuk membuat pembaruan tanpa batas dan hanya itu saja), yang bahasa ini sangat ringan.  Kami akan menulis tentang kontainer secara terpisah, tetap disini :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424697/">https://habr.com/ru/post/id424697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424687/index.html">Ini adalah lebah yang tepat: adaptasi mekanis terhadap efek dinamis</a></li>
<li><a href="../id424689/index.html">Kontrol situasi membuat Anda bahagia.</a></li>
<li><a href="../id424691/index.html">Kami mengundang Anda ke konferensi Azov Developers Meetup 2018 - 13 Oktober di Taganrog</a></li>
<li><a href="../id424693/index.html">Menambahkan tanda air ke semua gambar situs</a></li>
<li><a href="../id424695/index.html">RedSlerm berubah menjadi ruang dan acara satu kali</a></li>
<li><a href="../id424699/index.html">Selamat datang di lokakarya langsung API Jam</a></li>
<li><a href="../id424701/index.html">Cerita-cerita TI fiksi tentang penipu dan mengapa praktik-praktik tidak jelas ini muncul saat wawancara</a></li>
<li><a href="../id424703/index.html">Dan lagi tentang depersonalisasi</a></li>
<li><a href="../id424709/index.html">Karya konstruksi kolom dunia: 225 W RMS untuk 28.000 rubel</a></li>
<li><a href="../id424711/index.html">Dari hidrogel ke usus babi: bahan yang tidak biasa dalam robotika</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>