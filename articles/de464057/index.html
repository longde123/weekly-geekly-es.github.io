<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚öïÔ∏è üë©üèΩ‚Äçü§ù‚Äçüë®üèº üêü Hilbert, Lebesgue ... und die Leere ü§∑üèø üöª ü§µüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unter dem Schnitt wird die Frage untersucht, wie ein guter mehrdimensionaler Indexierungsalgorithmus angeordnet werden sollte. √úberraschenderweise gib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hilbert, Lebesgue ... und die Leere</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464057/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/fh/qp/fzfhqp64ark_qr2begezr_lvmha.jpeg" width="80%"></div><br>  Unter dem Schnitt wird die Frage untersucht, wie ein guter mehrdimensionaler Indexierungsalgorithmus angeordnet werden sollte.  √úberraschenderweise gibt es nicht so viele M√∂glichkeiten. <br><a name="habracut"></a><br><h4>  Eindimensionale Indizes, B-B√§ume </h4><br>  Das Ma√ü f√ºr den Erfolg des Suchalgorithmus wird als 2 Fakten betrachtet - <br><br><ol><li>  Die Feststellung des Vorhandenseins oder Nichtvorhandenseins eines Ergebnisses erfolgt f√ºr die logarithmische (in Bezug auf die Gr√∂√üe des Index) Anzahl der Lesevorg√§nge von Platten-Seiten </li><li>  Die Kosten f√ºr die Ausgabe eines Ergebnisses sind proportional zu seinem Volumen </li></ol><br>  In diesem Sinne sind B-B√§ume recht erfolgreich und der Grund daf√ºr kann als Verwendung eines ausgeglichenen Baumes angesehen werden.  Die Einfachheit des Algorithmus beruht auf der Eindimensionalit√§t des Schl√ºsselraums. Wenn erforderlich, teilen Sie die Seite, es reicht aus, die H√§lfte der sortierten Elemente dieser Seite zu teilen.  Im Allgemeinen geteilt durch die Anzahl der Elemente, obwohl dies nicht erforderlich ist. <br><br>  Weil  Wenn die Seiten des Baums auf einer Platte gespeichert sind, kann gesagt werden, dass der B-Baum die F√§higkeit hat, einen eindimensionalen Schl√ºsselraum sehr effizient in einen eindimensionalen Plattenraum umzuwandeln. <br><br>  Wenn Sie einen Baum mit mehr oder weniger ‚Äûrichtiger Einf√ºgung‚Äú f√ºllen, und dies ist ein ziemlich h√§ufiger Fall, werden Seiten in der Reihenfolge des Wachstums des Schl√ºssels von Zeit zu Zeit im Wechsel mit h√∂heren Seiten generiert.  Es besteht eine gute Chance, dass sie sich auch auf der Festplatte befinden.  Auf diese Weise wird ohne gro√üen Aufwand eine hohe Datenlokalit√§t erreicht - Daten mit einem nahe Wert befinden sich irgendwo in der N√§he und auf der Festplatte. <br><br>  Nat√ºrlich werden beim Einf√ºgen von Werten in zuf√§lliger Reihenfolge die Schl√ºssel und Seiten zuf√§llig generiert, wodurch die sogenannten  Indexfragmentierung.  Es gibt auch Anti-Fragmentierungs-Tools, die die Datenlokalit√§t wiederherstellen. <br><br>  Es scheint, dass in unserer Zeit der RAID- und SSD-Festplatten die Reihenfolge des Lesens von der Festplatte keine Rolle spielt.  Vielmehr hat es nicht die gleiche Bedeutung wie zuvor.  Es gibt keine physische Weiterleitung der K√∂pfe in der SSD, so dass die zuf√§llige Lesegeschwindigkeit im Vergleich zum soliden Lesen wie bei einer Festplatte nicht hunderte Male abf√§llt.  Und nur einmal alle 10 oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehr</a> . <br><br>  Denken Sie daran, dass B-B√§ume 1970 im Zeitalter der Magnetb√§nder und Trommeln auftauchten.  Wenn der Unterschied in der Direktzugriffsgeschwindigkeit f√ºr das erw√§hnte Band und die Trommel viel dramatischer war als im Vergleich zu HDD und SSD. <br><br>  Dar√ºber hinaus spielt auch das 10-fache eine Rolle.  Und diese 10-fachen beinhalten nicht nur die physischen Merkmale der SSD, sondern auch den grundlegenden Punkt - die Vorhersagbarkeit des Leserverhaltens.  Wenn der Leser sehr wahrscheinlich nach dem n√§chsten Block f√ºr diesen Block fragt, ist es sinnvoll, ihn unter der Annahme proaktiv herunterzuladen.  Und wenn das Verhalten chaotisch ist, sind alle Vorhersageversuche bedeutungslos und sogar sch√§dlich. <br><br><h4>  Mehrdimensionale Indizierung </h4><br>  Weiter werden wir uns mit dem Index zweidimensionaler Punkte (X, Y) befassen, einfach weil es bequem und intuitiv ist, mit ihnen zu arbeiten.  Aber die Probleme sind im Grunde die gleichen. <br><br>  Eine einfache, ‚Äûnicht anspruchsvolle‚Äú Option mit getrennten Indizes f√ºr X und Y entspricht nicht unserem Erfolgskriterium.  Es gibt nicht die logarithmischen Kosten f√ºr das Erhalten des ersten Punktes.  Um die Frage zu beantworten, m√ºssen wir √ºberhaupt etwas im gew√ºnschten Ausma√ü tun <br><br><ul><li>  F√ºhren Sie eine Suche im Index X durch und erhalten Sie alle Bezeichner aus dem X-Intervall-Bereich </li><li>  √§hnlich f√ºr Y. </li><li>  schneiden diese beiden S√§tze von Bezeichnern </li></ul><br>  Bereits der erste Punkt h√§ngt von der Gr√∂√üe des Umfangs ab und garantiert nicht den Logarithmus. <br><br>  Um ‚Äûerfolgreich‚Äú zu sein, muss ein mehrdimensionaler Index als mehr oder weniger ausgeglichener Baum angeordnet werden.  Diese Aussage mag kontrovers erscheinen.  Aber das Erfordernis einer logarithmischen Suche diktiert uns genau ein solches Ger√§t.  Warum nicht zwei oder mehr B√§ume?  Bereits als die "ungek√ºnstelte" und ungeeignete Option mit zwei B√§umen angesehen.  Vielleicht gibt es geeignete.  Aber zwei B√§ume - das sind doppelt so viele (einschlie√ülich gleichzeitiger) Sperren, doppelt so viel Kosten und deutlich h√∂here Chancen, einen Deadlock zu erwischen.  Wenn Sie mit einem Baum auskommen k√∂nnen, sollten Sie ihn auf jeden Fall verwenden. <br><br>  Angesichts all dessen ist der Wunsch, das sehr erfolgreiche B-Tree-Erlebnis als Grundlage f√ºr die Arbeit mit zweidimensionalen Daten zu verwenden und es zu ‚Äûverallgemeinern‚Äú. <br><br>  Also erschien der R-Baum. <br><br><h4>  R-Baum </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der R-Baum</a> ist wie folgt angeordnet: <br>  Anfangs haben wir eine leere Seite, f√ºgen Sie einfach Daten (Punkte) hinzu. <br>  Aber hier ist die Seite voll und muss geteilt werden. <br>  Im B-Baum sind die Seitenelemente auf nat√ºrliche Weise angeordnet, sodass die Frage lautet, wie viel geschnitten werden soll.  Es gibt keine nat√ºrliche Ordnung im R-Baum.  Es gibt zwei M√∂glichkeiten: <br><br><ul><li>  Ordnung bringen, d.h.  F√ºhren Sie eine Funktion ein, die basierend auf X &amp; Y einen Wert ausgibt, nach dem die Seitenelemente geordnet und entsprechend unterteilt werden.  In diesem Fall degeneriert der gesamte Index zu einem regul√§ren B-Baum, der aus den Werten der angegebenen Funktion aufgebaut ist.  Zus√§tzlich zu den offensichtlichen Pluspunkten gibt es eine gro√üe Frage: Nun, wir haben indiziert, aber wie soll man aussehen?  Dazu sp√§ter mehr. Betrachten Sie zun√§chst die zweite Option. </li><li>  Teilen Sie die Seite durch r√§umliche Kriterien.  Zu diesem Zweck sollte jeder Seite die Ausdehnung der darauf / darunter befindlichen Elemente zugewiesen werden.  Das hei√üt,  Die Stammseite hat die Ausdehnung der gesamten Ebene.  Beim Teilen werden zwei (oder mehr) Seiten generiert, deren Umfang im Umfang der √ºbergeordneten Seite enthalten ist (f√ºr die Suche). </li></ul><br>  Es gibt reine Unsicherheit.  Wie genau teilt man die Seite?  Horizontal oder vertikal?  Von der H√§lfte der Fl√§che oder der H√§lfte der Elemente ausgehen?  Was aber, wenn die Punkte zwei Cluster bilden, Sie sie aber nur durch eine diagonale Linie trennen k√∂nnen?  Und wenn es drei Cluster gibt? <br><br><hr><br>  Das blo√üe Vorhandensein solcher Fragen zeigt an, dass der R-Baum kein Algorithmus ist.  Dies ist eine Reihe von Heuristiken, zumindest zum Teilen einer Seite w√§hrend des Einf√ºgens, zum Zusammenf√ºhren von Seiten w√§hrend des L√∂schens / √Ñnderns, zur Vorverarbeitung f√ºr das Einf√ºgen in gro√üen Mengen. <br><br>  Bei der Heuristik wird ein bestimmter Baum auf einen bestimmten Datentyp spezialisiert.  Das hei√üt,  Bei Datens√§tzen einer bestimmten Art irrt sie seltener.  ‚ÄûHeuristiken k√∂nnen nicht v√∂llig falsch sein, weil  In diesem Fall w√§re es ein Algorithmus. ‚Äú¬©. <br><br>  Was bedeutet heuristischer Fehler in diesem Zusammenhang?  Zum Beispiel, dass die Seite erfolglos geteilt / zusammengef√ºhrt wird und die Seiten beginnen, sich teilweise zu √ºberlappen.  Wenn der Suchumfang pl√∂tzlich auf den √úberlappungsbereich der Seiten f√§llt, sind die Kosten f√ºr die Suche bereits nicht ganz logarithmisch.  Mit der Zeit sammelt sich beim Einf√ºgen / L√∂schen die Anzahl der Fehler an und die Leistung des Baums beginnt sich zu verschlechtern. <br><br><img src="https://habrastorage.org/webt/uf/ls/nc/uflsncc4sbgqqokdgf9ofvlyole.png"><br>  <i>Abbildung 1 Hier ist ein Beispiel f√ºr einen R * -Baum, der auf nat√ºrliche Weise erstellt wurde.</i> <br><br><img src="https://habrastorage.org/webt/vw/f0/ic/vwf0icm5lrfl7yapbxzwm0rkipg.png"><br>  <i>Abbildung 2 Und hier wird derselbe Datensatz vorverarbeitet und der Baum durch Masseneinf√ºgung erstellt</i> <br><br>  Wir k√∂nnen sagen, dass sich der B-Baum im Laufe der Zeit ebenfalls verschlechtert, aber dies ist eine etwas andere Verschlechterung.  Die Leistung des B-Baums sinkt aufgrund der Tatsache, dass seine Seiten nicht hintereinander liegen.  Dies kann leicht durch "Begradigen" des Baumes behandelt werden - Defragmentierung.  Im Fall eines R-Baums ist es nicht so einfach, ihn loszuwerden. Die Struktur des Baums selbst ist "Kurve", um die Situation zu korrigieren. Er muss vollst√§ndig neu aufgebaut werden. <br><br>  Verallgemeinerungen des R-Baums auf mehrdimensionale R√§ume sind nicht offensichtlich.  Beim Teilen von Seiten haben wir beispielsweise den Umfang der untergeordneten Seiten minimiert.  Was ist im dreidimensionalen Fall zu minimieren?  Volumen oder Oberfl√§che?  Und im achtdimensionalen Fall?  Der gesunde Menschenverstand ist kein Berater mehr. <br><br>  Der indizierte Raum kann durchaus nicht isotrop sein.  Warum nicht nicht nur Punkte, sondern auch deren zeitliche Positionen indizieren, d.h.  (X, Y, t).  In diesem Fall sind beispielsweise Heuristiken, die auf dem Umfang basieren, seitdem bedeutungslos  stapelt die L√§nge in Zeitintervallen. <br><br>  Der allgemeine Eindruck des R-Baumes ist so etwas wie Krustentiere mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kiemenf√º√üen</a> .  Diese haben ihre eigene √∂kologische Nische, in der es schwierig ist, mit ihnen zu konkurrieren.  Im allgemeinen Fall haben sie jedoch keine Chance im Wettbewerb mit weiter entwickelten Tieren. <br><br><h4>  Quad-Baum </h4><br>  In einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quadtree hat</a> jede Nicht-Blattseite genau vier Nachkommen, die ihren Raum gleichm√§√üig in Quadranten aufteilen. <br><br><img src="https://habrastorage.org/webt/wi/bp/ka/wibpkauhekq5ar01kbafsupfu9c.png" width="500"><br>  <i>Abbildung 3 Beispiel eines konstruierten Quad-Baums</i> <br><br>  Dies ist kein gutes Datenbankdesign. <br><br><ul><li>  Jede Seite schr√§nkt den Suchraum f√ºr jede Koordinate nur zweimal ein.  Ja, dies liefert die logarithmische Komplexit√§t der Suche, aber dies ist der Logarithmus zur Basis 2, nicht die Anzahl der Elemente auf der Seite (sogar 100) wie in einem B-Baum. </li><li>  Jede Seite ist klein, aber dahinter m√ºssen Sie noch auf die Festplatte gehen. </li><li>  Die Tiefe des Quad-Baums muss begrenzt sein, sonst wirkt sich sein Ungleichgewicht auf die Leistung aus.  Infolgedessen kann sich bei stark gruppierten Daten (z. B. H√§usern auf einer Karte - es gibt viele St√§dte in St√§dten, wenige in Feldern) eine gro√üe Datenmenge auf Blattseiten ansammeln.  Ein Index von einem exakten wird blockartig und erfordert eine Nachbearbeitung. <br><br>  Eine schlecht ausgew√§hlte Gittergr√∂√üe (Baumtiefe) kann die Leistung beeintr√§chtigen.  Trotzdem m√∂chte ich, dass die Leistung des Algorithmus nicht kritisch vom menschlichen Faktor abh√§ngt. <br></li><li>  Die Platzkosten f√ºr die Speicherung eines Punktes sind recht hoch. </li></ul><br><h4>  Raumnummerierung </h4><br>  Es bleibt die zuvor zur√ºckgestellte Version mit einer Funktion zu betrachten, die basierend auf einem mehrdimensionalen Schl√ºssel den Wert f√ºr das Schreiben in einen regul√§ren B-Baum berechnet. <br><br>  Die Konstruktion eines solchen Index ist offensichtlich, und der Index selbst hat alle Vorteile des B-Baums.  Die Frage ist nur, ob dieser Index f√ºr eine effektive Suche verwendet werden kann. <br><br>  Es gibt eine gro√üe Anzahl solcher Funktionen, es kann davon ausgegangen werden, dass es unter ihnen eine kleine Anzahl von "gut", eine gro√üe Anzahl von "schlecht" und eine gro√üe Anzahl von "einfach schrecklich" gibt. <br><br>  Es ist nicht schwierig, eine schreckliche Funktion zu finden - wir serialisieren den Schl√ºssel in eine Zeichenfolge, betrachten MD5 daraus und erhalten einen Wert, der f√ºr unsere Zwecke v√∂llig nutzlos ist. <br><br>  Und wie geht man mit dem Guten um?  Es wurde bereits gesagt, dass ein n√ºtzlicher Index die "Lokalit√§t" von Daten bereitstellt - Punkte, die sich im Raum befinden und beim Speichern auf der Festplatte h√§ufig nahe beieinander liegen.  In Bezug auf die gew√ºnschte Funktion bedeutet dies, dass f√ºr r√§umlich nahe Punkte enge Werte erhalten werden. <br><br>  Im Index werden die berechneten Werte auf den "physischen" Seiten in der Reihenfolge ihrer Werte angezeigt.  Unter dem Gesichtspunkt des ‚Äûphysischen Sinns‚Äú sollte der Suchumfang so wenige physische Indexseiten wie m√∂glich betreffen.  Was ist im Allgemeinen offensichtlich.  Unter diesem Gesichtspunkt sind die Nummerierungskurven, die die Daten "ziehen", "schlecht".  Und diejenigen, die ‚Äûin einem Ball verwirren‚Äú - n√§her am ‚ÄûGuten‚Äú. <br><br><h4>  Naive Nummerierung </h4><br>  Ein Versuch, ein Segment in ein Quadrat (Hyperw√ºrfel) zu quetschen, w√§hrend er in der Logik des eindimensionalen Raums bleibt, d.h.  in St√ºcke schneiden und das Quadrat mit diesen St√ºcken f√ºllen.  Das kann sein <br><br><img src="https://habrastorage.org/webt/m6/1z/fp/m61zfp6xf6wfzjkl2617fu1m6-m.png"><br>  <i>4-Zeilen-Scan</i> <br><br><img src="https://habrastorage.org/webt/b9/9p/hc/b99phcgowrxhdvtinm--p4anow0.png"><br>  <i>5 interlaced</i> <br><br><img src="https://habrastorage.org/webt/ym/vh/e-/ymvhe-a64v_evksgfmdyxheuvuw.png"><br>  <i>Abb.6 Spirale</i> <br><br>  oder ... Sie k√∂nnen sich viele Optionen einfallen lassen, die alle zwei Nachteile haben <br><br><ol><li>  Mehrdeutigkeit zum Beispiel: Warum ist die Spirale im Uhrzeigersinn und nicht dagegen gewellt, oder warum erfolgt der horizontale Scan zuerst entlang X und dann entlang Y. <br></li><li>  das Vorhandensein langer gerader Teile, die die Verwendung einer solchen Methode f√ºr die mehrdimensionale Indizierung unwirksam machen (gro√üer Seitenumfang) </li></ol><br><h4>  Direktzugriffsfunktionen </h4><br>  Wenn der Hauptanspruch auf "naive" Methoden darin besteht, dass sie sehr langgestreckte Seiten erzeugen, generieren wir die "richtigen" Seiten selbst. <br><br>  Die Idee ist einfach: Lassen Sie den Raum extern in Bl√∂cke unterteilen, weisen Sie jedem Block eine Kennung zu, und dies ist der Schl√ºssel f√ºr den r√§umlichen Index. <br><br><ul><li>  Lassen Sie die X &amp; Y-Koordinaten 16-Bit sein (zur Verdeutlichung) </li><li>  Wir werden den Raum mit quadratischen Bl√∂cken der Gr√∂√üe 1024X1024 abdecken </li><li>  Vergr√∂bern Sie die Koordinaten, verschieben Sie sie um 10 Bit nach rechts </li><li>  und erhalten Sie die Seiten-ID, kleben Sie die Bits von X &amp; Y.  In der Kennung sind die unteren 6 Ziffern die √§ltesten von X, die n√§chsten 6 Ziffern die √§ltesten von Y. <br></li></ul><br>  Es ist leicht zu erkennen, dass die Bl√∂cke einen Zeilenscan bilden. Um Daten f√ºr den Suchbereich zu finden, m√ºssen Sie daher f√ºr jede Blockreihe, auf die dieser Bereich gelegt wird, im Index suchen / lesen.  Im Allgemeinen funktioniert diese Methode hervorragend, obwohl sie mehrere Nachteile hat. <br><br><ul><li>  Wenn Sie einen Index erstellen, m√ºssen Sie die optimale Blockgr√∂√üe ausw√§hlen, was v√∂llig offensichtlich ist </li><li>  Wenn der Block erheblich gr√∂√üer als eine typische Abfrage ist, ist die Suche seitdem ineffizient  m√ºssen zu viel lesen und filtern (Nachbearbeitung) <br></li><li>  Wenn der Block erheblich kleiner als eine typische Abfrage ist, ist die Suche seitdem ineffizient  m√ºssen viele Abfragen Zeile f√ºr Zeile durchf√ºhren <br></li><li>  Wenn der Block im Durchschnitt zu viele oder zu wenig Daten enth√§lt, ist die Suche ineffektiv <br></li><li>  Wenn die Daten gruppiert sind (z. B. zu Hause auf der Karte), wird die Suche nicht √ºberall wirksam </li><li>  Wenn der Datensatz gewachsen ist, kann sich herausstellen, dass die Blockgr√∂√üe nicht mehr optimal ist. <br></li></ul><br>  Teilweise werden diese Probleme durch den Bau mehrstufiger Bl√∂cke gel√∂st.  F√ºr das gleiche Beispiel: <br><br><ul><li>  will immer noch 1024X1024 Bl√∂cke </li><li>  Aber jetzt werden wir immer noch Bl√∂cke der obersten Ebene der unteren Bl√∂cke der Gr√∂√üe 8X8 haben </li><li>  Die Taste ist wie folgt angeordnet (von niedrig nach hoch): <br>  3 Ziffern - Ziffern 10 ... 12 X-Koordinaten <br>  3 Ziffern - Ziffern 10 ... 12 Y-Koordinaten <br>  3 Ziffern - Ziffern 13 ... 15 X-Koordinaten <br>  3 Ziffern - Ziffern 13 ... 15 Y-Koordinaten </li></ul><br><img src="https://habrastorage.org/webt/az/y5/h6/azy5h6jt0wtephbmp96lcsbs_rm.png"><br>  <i>7 Low-Level-Bl√∂cke bilden High-Level-Bl√∂cke</i> <br><br>  Bei gro√üen Ausma√üen m√ºssen Sie nicht mehr eine gro√üe Anzahl kleiner Bl√∂cke lesen. Dies erfolgt auf Kosten von Bl√∂cken auf hoher Ebene. <br><br>  Interessanterweise war es m√∂glich, die Koordinaten nicht aufzurauen, sondern auf die gleiche Weise in den Schl√ºssel zu dr√ºcken.  In diesem Fall w√§re eine Nachfilterung g√ºnstiger, weil  w√ºrde beim Lesen des Index auftreten. <br><br>  R√§umliche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GRID-Indizes</a> sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in MS SQL</a> auf √§hnliche Weise angeordnet, wobei bis zu 4 Blockebenen zul√§ssig sind. <br><br><img src="https://habrastorage.org/webt/dn/kx/r_/dnkxr_kdijxhpjpggh3sgvoh2lm.png"><br>  <i>Abb.8 GRID-Index</i> <br><br>  Eine weitere interessante M√∂glichkeit der direkten Indizierung besteht darin, einen Quad-Baum f√ºr die externe Aufteilung des Raums zu verwenden. <br><br>  Der Quad-Baum ist insofern n√ºtzlich, als er sich seitdem an die Dichte von Objekten anpassen kann  Wenn der Knoten √ºberl√§uft, wird er aufgeteilt.  Wenn die Dichte der Objekte hoch ist, werden die Bl√∂cke daher klein und umgekehrt.  Dies reduziert die Anzahl leerer Indexaufrufe. <br><br>  Der Quad-Baum ist zwar eine unbequeme Konstruktion f√ºr den schnellen Wiederaufbau, es ist jedoch von Vorteil, dies von Zeit zu Zeit zu tun. <br><br>  Wenn Sie einen Quad-Baum neu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstellen</a> , m√ºssen Sie den Index nicht neu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstellen,</a> wenn die Bl√∂cke durch den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Morton-Code</a> identifiziert und Objekte damit codiert werden.  Hier ist der Trick: Wenn die Koordinaten des Punkts mit einem Morton-Code codiert sind, ist die Seitenkennung ein Pr√§fix in diesem Code.  Bei der Suche nach Seitendaten werden alle Schl√ºssel ausgew√§hlt, die im Bereich von [Pr√§fix] 00 ... 00B bis [Pr√§fix] 11 ... 11B liegen. Wenn die Seite geteilt wird, bedeutet dies, dass nur das Pr√§fix ihrer Nachkommen verl√§ngert wurde. <br><br><h4>  Selbst√§hnliche Funktionen </h4><br>  Das erste, was mir bei der Erw√§hnung selbst√§hnlicher Funktionen einf√§llt, sind ‚ÄûKurvenfeger‚Äú.  "Eine auff√§llige Kurve ist eine kontinuierliche Abbildung, deren Dom√§ne das Einheitensegment [0, 1] und deren Dom√§ne der euklidische (streng topologische) Raum ist."  Ein Beispiel ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Peano-Kurve.</a> <br><br><img src="https://habrastorage.org/webt/if/1t/yo/if1tyoie_5uobqmnznsudpfnoau.png"><br>  <i>Abb. 9 erste Iterationen der Peano-Kurve</i> <br><br>  In der unteren linken Ecke befindet sich der Anfang des Definitionsbereichs (und der Nullwert der Funktion), in der oberen rechten Ecke das Ende (und 1). Jedes Mal, wenn wir einen Schritt verschieben, addieren Sie 1 / (N * N) zum Wert (vorausgesetzt, dass N - Grad 3 nat√ºrlich).  Infolgedessen erreicht der Wert in der oberen rechten Ecke 1. Wenn wir bei jedem Schritt einen hinzuf√ºgen, nummeriert eine solche Funktion einfach das quadratische Gitter nacheinander, was wir wollten. <br><br>  Alle geschwungenen Kurven sind selbst√§hnlich.  In diesem Fall ist der Simplex ein 3x3-Quadrat. Bei jeder Iteration wird jeder Punkt des Simplex zum gleichen Simplex. Um Kontinuit√§t zu gew√§hrleisten, m√ºssen Sie auf Zuordnungen (Flips) zur√ºckgreifen. <br><br>  <b>Selbst√§hnlichkeit</b> ist f√ºr uns eine sehr wichtige Eigenschaft.  Es gibt Hoffnung f√ºr den logarithmischen Wert der Suche.  Beispielsweise liegen bei einem 3x3-Simplex alle Zahlen, die in jedem der 9 Elementarquadrate durch nachfolgende Detailiterationen erzeugt werden, innerhalb desselben Bereichs.  Nur weil die Zahl der von Anfang an zur√ºckgelegte Weg ist.  Das hei√üt,  Wenn Sie die Ausdehnung in 9 Teile teilen, kann der Inhalt jedes einzelnen durch eine Indexdurchquerung erhalten werden.  Und so weiter rekursiv kann jedes der 9 Unterquadrate jedes der Quadrate durch eine einzelne Abfrage des Index erhalten werden (allerdings in einem kleineren Bereich).  So kann der Suchumfang in eine kleine Anzahl quadratischer Unterabfragen unterteilt werden, die entweder vollst√§ndig oder mit Filterung (um den Umfang herum) gelesen werden.  Abbildung 9 zeigt den Suchumfang in Gr√ºn, durch rote Linien in Unterabfragen unterteilt. <br><br>  Selbst√§hnlichkeit macht die Nummerierungskurve jedoch nicht automatisch f√ºr Indexierungszwecke geeignet. <br><br><ul><li>  Die Kurve sollte das quadratische Gitter f√ºllen.  Wir indizieren die Werte in den Knoten des quadratischen Gitters und m√∂chten jedes Mal nicht nach einem geeigneten Knoten auf dem Gitter suchen, beispielsweise nach einem dreieckigen.  Zumindest um Rundungsprobleme zu vermeiden.  Hier zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">solche (Abbildung 10)</a> <br><br><img src="https://habrastorage.org/webt/86/7s/w1/867sw16ik5sqwl5syykidgylzuw.png"><br>  <i>Abbildung 10 tern√§rer See Kokha</i> <br><br>  Die Kurve passt nicht zu uns.  Obwohl es die Oberfl√§che perfekt ‚Äû√ºberbr√ºckt‚Äú. <br></li><li>  Die Kurve sollte den Raum ohne L√ºcken f√ºllen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fraktale Dimension</a> D = 2).  Hier ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">es</a> (Abb. 11): <br><img src="https://habrastorage.org/webt/kt/pi/ag/ktpiaglmp2_ylugv2cosyoyefsy.gif"><br>  <i>11 anonyme fraktale Kurve</i> <br><br>  passt auch nicht. <br></li><li>  Der Wert der Nummerierungsfunktion (der von Anfang an entlang der Kurve zur√ºckgelegte Pfad) sollte leicht zu berechnen sein.  Daraus folgt, dass selbstber√ºhrende Kurven aufgrund der auftretenden Mehrdeutigkeit nicht geeignet sind, wie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sierpinski-Kurve</a> <br><br><img src="https://habrastorage.org/webt/83/p3/ck/83p3ckw6mejy8prdspy7wklo87m.png"><br>  <i>Abb. 12 Sierpinski-Kurve</i> <br><br>  oder, was (f√ºr uns) dasselbe ist, " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Dreieck entlang Cesaro passieren</a> " <br><br><img src="https://habrastorage.org/webt/ja/64/2v/ja642v4mwxfgneoknpnejnwwymc.png"><br>  <i>FIG.</i>  <i>13 Cesaro-Dreieck Aus Gr√ºnden der √úbersichtlichkeit wird der rechte Winkel durch 85 ¬∞ ersetzt</i> </li><li>  Die Nummerierungsfunktion sollte keine Parameter enthalten. Die Kurve sollte gleichm√§√üig sein (symmetrisch genau).         . :       ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ) <br><br><img src="https://habrastorage.org/webt/my/na/py/mynapy6g0pimgnlttggkw6tkjym.png"><br> <i>. 14 ‚ÄúA Plane Filling Curve for the Year 2017‚Äù</i> <br><br>         ,    (  )       . <br>      , ,   ,        . </li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Isotropie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein weiteres wichtiges Merkmal. Es versteht sich, dass die Nummerierungsfunktion leicht auf h√∂here Dimensionen verallgemeinerbar sein sollte. Und es ist gut, wenn f√ºr einen N-dimensionalen W√ºrfel alle N Projektionen auf Dimensionen (N-1) gleich sind. Dies folgt aus der Tatsache, dass wir den isotropen Raum verwenden und es seltsam w√§re, wenn verschiedene Achsen in Funktionen unterschiedlich verwendet w√ºrden. </font></font><br><br><img src="https://habrastorage.org/webt/zp/e8/th/zpe8thfxsdipyiwe5iwwpwo2jfk.png"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 15 Dreidimensionaler Simplex einer 3x3x3-Peano-Kurve Die</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Isotropie ist keine strenge Anforderung, aber ein wichtiger Indikator f√ºr die Qualit√§t einer Nummerierungskurve. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Bezug auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontinuit√§t</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oben haben wir Beispiele f√ºr fortlaufende Nummerierungsfunktionen gesehen, die f√ºr unsere Zwecke nicht geeignet waren. </font><font style="vertical-align: inherit;">Andererseits ist die ziemlich diskontinuierliche Zeilenabtastfunktion mit Bl√∂cken daf√ºr gro√üartig (mit einigen Einschr√§nkungen). </font><font style="vertical-align: inherit;">Nicht nur das, wenn wir einen Blockindex erstellen w√ºrden, der auf kontinuierlichem Interlaced-Scannen basiert, w√ºrde dies nichts an der Leistung √§ndern. </font><font style="vertical-align: inherit;">Denn wenn der Block vollst√§ndig gelesen wird, gibt es keinen Unterschied in der Reihenfolge, in der die Objekte empfangen werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies gilt auch f√ºr selbst√§hnliche Kurven.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nennen wir die Seitengr√∂√üe, den Ausdehnungsbereich aller Objekte auf der Festplattenseite </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die charakteristische Gr√∂√üe ist der durchschnittliche Seitenbereich </font></font></li><li>    (   )          ,         .      ,    .   ‚Äî         .      . </li><li>    ‚Äî   ,        ..            . <br></li><li>        ,       .   ,      ,          .  ,     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ‚Äî  ()     3...10%      () Z-. <br><br>   ‚Äî   ,         . </li></ul><br><h4>  </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aus dem Gesagten folgt, dass zum Zwecke der mehrdimensionalen Indizierung nur quadratische (hyperkubische) Simplexe so oft wie n√∂tig rekursiv angewendet werden (f√ºr eine ausreichende Detaillierung des Gitters). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ja, es gibt andere selbst√§hnliche Wege, um ein quadratisches Gitter zu √ºberbr√ºcken. Es gibt jedoch keinen rechnerisch billigen Weg, um eine solche Transformation durchzuf√ºhren, einschlie√ülich des Gegenteils. Vielleicht existieren solche numerischen Tricks, aber sie sind dem Autor nicht bekannt. Dar√ºber hinaus erm√∂glichen </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quadratische Simplexe die effektive Aufteilung des Suchumfangs in Unterabfragen durch einen Schnitt entlang einer der Koordinaten</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit einer gebrochenen Grenze zwischen Simplexen ist dies unm√∂glich</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum sind die Simplexe quadratisch und nicht rechteckig? Aus Gr√ºnden der Isotropie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es bleibt die Wahl der geeigneten Gr√∂√üe und Nummerierung innerhalb des Simplex (Bypass). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√∂√üe eines Simplex</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu w√§hlen </font><font style="vertical-align: inherit;">, m√ºssen Sie herausfinden, welche Auswirkungen dies hat. Die Anzahl der generierten Unterabfragen, die w√§hrend der Suche erstellt werden m√ºssen. Zum Beispiel wird ein Simplex 3X3 einer Peano-Kurve in 3 Unterabfragen mit fortlaufenden Intervallen von Zahlen geschnitten, zuerst in X und dann jeweils in 3 Teile in Y. Als Ergebnis kehren wir zur n√§chsten Stufe der Rekursion zur√ºck. Wenn wir einen √§hnlichen (Interlaced) Simplex 5X5 h√§tten, m√ºsste er in 5 Teile geschnitten werden. Oder in ungleiche Teile (z. B. 2 + 3), was seltsam ist. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es erinnert in gewisser Weise an einen der Suchb√§ume - Sie k√∂nnen nat√ºrlich sowohl 5-Dezimal- als auch 7-Dezimal-B√§ume verwenden, aber in der Praxis werden nur bin√§re B√§ume verwendet. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dreifaltigkeitsb√§ume</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haben ihre eigene enge Nische f√ºr die Suche nach Pr√§fix. Und das ist nicht genau das, was intuitiv als tern√§re B√§ume verstanden wird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies erkl√§rt sich aus der Effizienz. In einem tern√§ren Knoten m√ºssten zwei Vergleiche durchgef√ºhrt werden, um einen Nachkommen auszuw√§hlen. In einem Bin√§rbaum entspricht dies einer Auswahl unter 4 Optionen. Selbst k√ºrzere Baumtiefen blockieren nicht den Produktivit√§tsverlust aufgrund der erh√∂hten Anzahl von Vergleichen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn 3X3 effektiver w√§re als 2X2, nur weil 3&gt; 2, w√§re 4X4 au√üerdem effektiver als 3X3 und 8X8 effektiver als 5X5. Sie k√∂nnen immer die passende Zweierpotenz finden, die aus mehreren Iterationen von 2X2 besteht ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und was wird durch den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplex-Bypass beeinflusst</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Zun√§chst die Anzahl der durch die Suche generierten Unterabfragen.</font></font> Weil<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist gut, wenn Sie sich mit dem Simplex mit fortlaufenden Zahlenintervallen in St√ºcke schneiden k√∂nnen. Hier erlaubt Peano 3X3, so dass eine Iteration es in 3 Teile schneidet. Und wenn Sie einen 8x8-Simplex mit einem Schachritter nehmen (Abb. 16), besteht die einzige M√∂glichkeit darin, sofort 64 Elemente zu haben. </font></font><br><br><img src="https://habrastorage.org/webt/l7/cf/dc/l7cfdcocdq3oe-xal_wbvc34t74.png"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 16 Eine der Optionen zur Umgehung des 8x8-Simplex</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Da wir also herausgefunden haben, dass der optimale Simplex 2x2 ist, sollten wir √ºberlegen, welche Optionen daf√ºr existieren. </font></font><br><br><img src="https://habrastorage.org/webt/ev/q3/b2/evq3b277yrimcisco3m9iqcksgk.png"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 17 Optionen zur Umgehung eines 2x2-Simplex</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es gibt drei davon, bis zur Symmetrie, die bedingt als ‚ÄûZ‚Äú, ‚ÄûOmega‚Äú und ‚ÄûAlpha‚Äú bezeichnet werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es f√§llt sofort auf, dass sich ‚ÄûAlpha‚Äú kreuzt und daher f√ºr die bin√§re Aufteilung ungeeignet ist. Es m√ºsste sofort in 4 Teile geschnitten werden. Oder 256 im 8-dimensionalen Fall.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die M√∂glichkeit, einen einzelnen Algorithmus f√ºr R√§ume mit unterschiedlichen Dimensionen zu verwenden (was uns bei einer Kurve wie ‚ÄûAlpha‚Äú entzogen ist), sieht sehr attraktiv aus. </font><font style="vertical-align: inherit;">Daher werden wir in Zukunft nur die ersten beiden Optionen in Betracht ziehen. </font></font><br><br><img src="https://habrastorage.org/webt/ij/pk/p2/ijpkp2sneivmayqaie38y91mylc.png"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">18 Z-Kurve von </font></font></i> <br><br><img src="https://habrastorage.org/webt/bo/ar/oq/boaroq7scpwqyvargccwvv6i7li.png"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">19 ‚ÄûOmega‚Äú - Hilbert-Kurve.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sobald diese Kurven eine enge Verwandtschaft haben, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k√∂nnen sie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einem Algorithmus verarbeitet werden. </font><font style="vertical-align: inherit;">Die Hauptspezifit√§t der Kurve ist in der Aufteilung der Unterabfrage lokalisiert.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zuerst finden wir die Startausdehnung. Dies ist das minimale Rechteck, das die Suchausdehnung enth√§lt und ein kontinuierliches Intervall von Schl√ºsselwerten enth√§lt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird wie folgt gefunden -</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Berechnen Sie die Schl√ºsselwerte f√ºr den unteren linken und oberen rechten Punkt des Suchumfangs (KMin, KMax). </font></font><br></li><li>     (    )  KMin, KMax <br></li><li>     ,  SMin,   ,  SMax <br></li><li>           .    , ,           SMin,    .      . </li><li>       ,   ,      ( ). <br></li><li>  Z-         .     z- ‚Äî           ,    ‚Äî  ( ). ,         ,      . </li></ul></li><li>       </li><li>      <ul><li>    </li><li>       ,  ,  .   ,           </li><li>        ,        .      ‚Äî ‚Äú ‚Äù &gt;=   ‚Äú ‚Äù   () ,   ‚Äú ‚Äù <br><br><ul><li>  ‚Äú ‚Äù &gt;    ,   ,   <br></li><li>       ,         ,   <br></li><li>  ‚Äú ‚Äù &gt;    ,         ,        ,   </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> separater Fall "letzter Schl√ºssel" == Maximalwert der aktuellen Unterabfrage, separat durch Vorw√§rtsfahrt verarbeitet </font></font><br></li></ul></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teilen Sie die aktuelle Unterabfrage </font></font><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Addiere 0 und 1 zu seinem Pr√§fix - wir erhalten zwei neue Pr√§fixe </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F√ºllen Sie den Rest des Schl√ºssels 0 oder 1 aus - wir erhalten die minimalen und maximalen Werte neuer Unterabfragen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir schieben sie auf den Stapel, zuerst den, der 1, dann 0 erg√§nzt. Dies dient zum unidirektionalen Lesen des Index. </font></font></li></ul></li></ul><br></li></ul> Auf einer Z-Kurve funktioniert das folgenderma√üen: <br><br><img src="https://habrastorage.org/files/8a1/104/6c5/8a11046c5b1749cc8a5dbd0ef1634eba.png"><br>  <i>FIG.</i>  <i>20 - Aufteilung der Unterabfragen bei Z-Kurve</i> <br><br><img src="https://habrastorage.org/webt/zh/kv/n5/zhkvn5nfyem8jdgvdhbromo9oyq.png"><br>  <i>FIG.</i>  <i>21 Hilbert-Kurve, wenn die Startausdehnung maximal ist</i> <br><br>  Hier wird die erste Stufe gezeigt - das Abschneiden der √ºbersch√ºssigen Schicht von maximaler Ausdehnung. <br><br><img src="https://habrastorage.org/webt/mq/2z/xe/mq2zxetkzhkkpxenqzoxxifkmp8.png"><br>  <i>FIG.</i>  <i>22 Hilbert-Kurve, Suchabfragebereich</i> <br><br>  Und hier ist eine Aufschl√ºsselung in Unterabfragen, gefundene Punkte und Indexaufrufe im Suchabfragebereich.  Dies ist aus Sicht der Hilbert-Kurve immer noch eine sehr erfolglose Anfrage.  Normalerweise ist alles viel weniger blutig. <br><br>  Abfragestatistiken besagen jedoch, dass ein zweidimensionaler Index, der auf einer Hilbert-Kurve basiert, (ungef√§hr) auf denselben Daten durchschnittlich 5% weniger Festplattenseiten liest, aber halb langsamer arbeitet.  Die Verlangsamung wird auch durch die Tatsache verursacht, dass die Berechnung selbst (direkt und umgekehrt) dieser Kurve viel schwieriger ist - 2000 Prozessortakte f√ºr Hilbert im Vergleich zu 50 f√ºr die Z-Kurve. <br><br>  Wenn die Hilbert-Kurve nicht mehr unterst√ºtzt wird, k√∂nnte der Algorithmus vereinfacht werden. Auf den ersten Blick ist eine solche Verlangsamung nicht gerechtfertigt.  Auf der anderen Seite ist dies nur ein zweidimensionaler Fall. Beispielsweise k√∂nnen Statistiken im 8-dimensionalen Raum oder mehr mit v√∂llig neuen Farben funkeln.  Dieses Problem muss noch gekl√§rt werden. <br><br>  <b>PS</b> : Die Z-Kurve wird aufgrund des Algorithmus zur Berechnung des Werts manchmal als Bit-Interleaving-Kurve bezeichnet. Die Ziffern jeder Koordinate fallen durch eins in den Schl√ºsselwert, was sehr technologisch ist.  Schlie√ülich k√∂nnen Sie die Entladungen nicht einzeln, sondern in Packungen mit 2,3 ... 8 ... St√ºcken verschachteln.  Wenn wir nun 8 Bit nehmen, erhalten wir auf einem 32-Bit-Schl√ºssel ein Analogon des 4-Ebenen-GRID-Index von MS SQL.  Und im Extremfall - ein Pack mit jeweils 32 Bit - ein horizontaler Scan-Algorithmus. <br><br>  Ein solcher Index (nat√ºrlich nicht in Kleinbuchstaben) kann sehr effektiv sein und bei einigen Datens√§tzen sogar effizienter als die Z-Kurve.  Leider aufgrund des Verlustes der Allgemeinheit. <br><br>  <b>PPS</b> : Der beschriebene Index ist der Arbeit mit einem Quad-Baum sehr √§hnlich.  Die maximale Ausdehnung ist die Stammseite des Quad-Baums, sie hat 4 Nachkommen ... Daher kann der Algorithmus ‚ÄûDirektzugriffsmethoden‚Äú zugeordnet werden. <br><br>  Unterschiede sind immer noch grundlegend. <br><br>  Der Quad-Baum wird nirgendwo gespeichert, er ist virtuell und in die Natur der Zahlen eingebettet.  Es gibt keine Einschr√§nkungen hinsichtlich der Tiefe des Baums. Wir erhalten Informationen √ºber die Population der Nachkommen aus der Population des Hauptbaums.  Au√üerdem wird der Hauptbaum einmal gelesen, wir gehen vom kleinsten zum √§ltesten Wert.  Es ist lustig, aber die physische Struktur des B-Baums erm√∂glicht es, leere Abfragen zu vermeiden und die Rekursionstiefe zu begrenzen. <br><br>  Eine weitere Sache - bei jeder Iteration erscheinen nur zwei Nachkommen - aus ihnen k√∂nnen 4 Unterabfragen generiert werden, die nicht generiert werden k√∂nnen, wenn keine Daten darunter sind.  Im dreidimensionalen Fall w√ºrden wir √ºber 8 Nachkommen sprechen, im 8-dimensionalen Fall √ºber 256. <br><br>  <b>PPPS</b> : Am Anfang dieses Artikels haben wir √ºber die Dichotomie bei der Suche in einem mehrdimensionalen Index gesprochen. Um den logarithmischen Wert zu erhalten, muss eine endliche Ressource entweder bei der Iteration geteilt werden - entweder beim Schl√ºsselwertraum oder beim Suchraum.  In dem vorgestellten Algorithmus ist diese Dichotomie zusammengebrochen - wir teilen gleichzeitig sowohl den Schl√ºssel als auch den Raum. <br><br>  ‚ÄûIch lebe in beiden H√∂fen und meine B√§ume sind immer h√∂her.‚Äú ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">C</a> ) <br><br>  <b>PPPPS</b> : Sobald sie die Z-Kurve aufrufen, haben Sie hier die Z-Ordnung und die Bitverschachtelung sowie den Morton-Code / die Morton-Kurve.  Es ist auch als Lebesgue-Kurve bekannt. Um das Gleichgewicht aufrechtzuerhalten, betitelte der Autor den Artikel, auch zu Ehren von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Henry Leon Lebesgue</a> . <br><br>  <b>PPPPPS</b> : In der Titelillustration ist der Blick auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Fedchenko-Gletscher</a> einfach wundersch√∂n und es gibt genug Leere.  Tats√§chlich war der Autor beeindruckt davon, wie reibungslos verschiedene Ideen und Methoden ineinander flie√üen und allm√§hlich zu einem Algorithmus verschmelzen.  So wie die vielen kleinen Wasserquellen, aus denen das Einzugsgebiet besteht, einen einzigen Abfluss bilden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464057/">https://habr.com/ru/post/de464057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464041/index.html">Warum die besten Kampfpiloten oft in gro√üe Schwierigkeiten geraten</a></li>
<li><a href="../de464043/index.html">Geschichte des Ethernet-CAN-Konverters</a></li>
<li><a href="../de464045/index.html">Wie ich 1997 fast in Echtzeit Rennstrecken gefahren bin</a></li>
<li><a href="../de464053/index.html">Hinweis: Spurauswahl- und Rotationsalgorithmus</a></li>
<li><a href="../de464055/index.html">Wir untersuchen die von Xiaomi Mi Band f√ºr das Jahr gesammelten Daten</a></li>
<li><a href="../de464063/index.html">Kabel 2019 abschneiden</a></li>
<li><a href="../de464071/index.html">Revolution oder Schmerz? Yandex React Hooks-Bericht</a></li>
<li><a href="../de464075/index.html">Einf√ºhrung in C. Botschaft aus dem letzten Jahrhundert</a></li>
<li><a href="../de464077/index.html">Nein, Sie brauchen kein Delta mit 50 km / s. Sie ben√∂tigen additive Technologien (Teil 1)</a></li>
<li><a href="../de464079/index.html">Wie man ein horizontales Start- und Landungsraumschiff ohne Wundertechnologie baut</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>