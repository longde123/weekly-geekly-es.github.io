<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>#⃣ 🙆🏾 🍃 Iptables dan menyaring lalu lintas dari para pembangkang yang miskin dan malas 🙌🏾 🔝 🦐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Relevansi pemblokiran kunjungan ke sumber daya terlarang memengaruhi admin mana pun yang mungkin secara resmi dinyatakan tidak mematuhi hukum atau per...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Iptables dan menyaring lalu lintas dari para pembangkang yang miskin dan malas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471402/">  Relevansi pemblokiran kunjungan ke sumber daya terlarang memengaruhi admin mana pun yang mungkin secara resmi dinyatakan tidak mematuhi hukum atau perintah dari otoritas terkait. <br><br><img src="https://habrastorage.org/webt/9e/uq/ev/9euqevswnrg1zv6jaq_0nwcdnzu.png"><br><br>  Mengapa menemukan kembali roda ketika ada program khusus dan distribusi untuk tugas-tugas kita, misalnya: Zeroshell, pfSense, ClearOS. <br><br>  Pertanyaan lain diajukan oleh otoritas: Apakah produk yang digunakan memiliki sertifikat keamanan dari negara kita? <br><a name="habracut"></a><br>  Kami memiliki pengalaman bekerja dengan distribusi berikut: <br><br><ul><li>  Zeroshell - para pengembang bahkan memberikan lisensi selama 2 tahun, tetapi ternyata distribusi bunga tidak masuk akal bagi kami untuk memenuhi fungsi penting bagi kami; </li><li>  pfSense - rasa hormat dan kehormatan, pada saat yang sama membosankan, membiasakan diri dengan baris perintah firewall FreeBSD tidak cukup nyaman bagi kami (saya pikir ini masalah kebiasaan, tetapi ternyata tidak menjadi "seperti itu"); </li><li>  ClearOS - ternyata sangat lambat pada perangkat keras kami, kami tidak bisa melakukan pengujian serius, dan mengapa antarmuka yang begitu berat? </li><li>  Ideco SELECTA.  Ada percakapan terpisah tentang produk Aydeko, produk yang menarik, tetapi karena alasan politis itu bukan untuk kita, tetapi saya juga ingin "menggigit" mereka tentang lisensi untuk Linux, Roundcube yang sama, dll.  Mengapa mereka mendapatkan hal itu dengan "memotong" antarmuka <b>Python</b> dan memilih hak pengguna super, mereka dapat menjual produk jadi yang terdiri dari modul yang dikembangkan dan ditingkatkan dari komunitas Internet yang didistribusikan di bawah GPL &amp; dll. </li></ul><br>  Saya mengerti bahwa sekarang tangisan negatif akan mengalir ke arah saya dengan persyaratan untuk membuktikan perasaan subjektif saya secara terperinci, tetapi saya ingin mengatakan bahwa simpul jaringan ini juga merupakan penyeimbang lalu lintas ke 4 saluran eksternal ke Internet, dan setiap saluran memiliki karakteristiknya sendiri.  Landasan lain adalah kebutuhan untuk bekerja pada salah satu dari beberapa antarmuka jaringan di ruang alamat yang berbeda, dan saya <b>siap</b> untuk mengakui bahwa saya <b>tidak siap</b> untuk menggunakan VLAN di mana pun saya <b>perlu</b> .  Saat digunakan ada perangkat seperti TP-Link TL-R480T + - mereka tidak berperilaku sempurna, secara umum dengan nuansa mereka sendiri.  Ternyata bertanggung jawab untuk mengkonfigurasi bagian ini di Linux berkat Ubuntu off <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">-</a> situs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">IP-Balancing: kami menggabungkan beberapa saluran internet menjadi satu</a> .  Selain itu, masing-masing saluran dapat "jatuh" kapan saja, serta naik.  Jika Anda tertarik pada skrip yang berfungsi saat ini (dan ini layak diterbitkan terpisah) - tulis di komentar. <br><br>  Solusi yang dimaksud tidak mengklaim sebagai unik, tetapi saya ingin mengajukan pertanyaan: "Mengapa perusahaan beradaptasi dengan produk pihak ketiga yang dipertanyakan dengan persyaratan perangkat keras yang serius ketika Anda dapat mempertimbangkan alternatifnya?" <br><br>  Jika di Rusia ada daftar Roskomnadzor, di Ukraina - lampiran Keputusan Dewan Keamanan Nasional (mis. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Di sini</a> ), maka para pemimpin juga tidak tidur di tanah.  Misalnya, kami diberi daftar situs terlarang, menurut pendapat manajemen yang memperburuk produktivitas tenaga kerja di tempat kerja. <br><br>  Berkomunikasi dengan kolega di perusahaan lain di mana semua situs dilarang secara default dan hanya atas permintaan dengan izin bos, Anda dapat mengakses situs tertentu, tersenyum penuh hormat, berpikir, dan "merokok masalah", menjadi jelas bahwa kehidupan masih baik dan kami mulai pencarian Anda. <br><br>  Memiliki kesempatan tidak hanya untuk secara analitis melihat apa yang ditulis oleh "buku-buku ibu rumah tangga" tentang penyaringan lalu lintas, tetapi juga untuk melihat apa yang terjadi pada saluran-saluran penyedia yang berbeda, kami memperhatikan resep-resep berikut (screenshot apa pun sedikit dipangkas, harap dipahami dan maafkan): <br><div class="scrollable-table"><table><tbody><tr><td>  Penyedia 1 </td><td>  - Tidak mengganggu dan memaksakan server DNS dan server proxy transparan.  Baiklah? .. tetapi kita memiliki akses ke tempat yang kita butuhkan (jika kita membutuhkannya :)) </td></tr><tr><td>  Penyedia 2 </td><td>  - Dia percaya bahwa penyedia topnya harus memikirkannya, dukungan teknis dari penyedia top bahkan mengakui mengapa saya tidak bisa membuka situs yang tidak dilarang yang diperlukan untuk saya.  Saya pikir gambar akan menghibur Anda :) <br><br><img src="https://habrastorage.org/webt/vm/qh/v2/vmqhv2z15q8rx7wo2hqmd62zlma.png"><br><br>  Ternyata, mereka menerjemahkan nama-nama situs terlarang menjadi alamat IP dan memblokir IP (itu tidak mengganggu mereka bahwa 20 situs dapat di-host pada alamat IP ini). <br></td></tr><tr><td>  Penyedia 3 </td><td>  - Melewati lalu lintas di sana, tetapi tidak mengizinkannya kembali di sepanjang rute. </td></tr><tr><td>  Penyedia 4 </td><td>  - melarang semua manipulasi dengan paket ke arah yang ditentukan. </td></tr></tbody></table></div>  Dan apa yang harus dilakukan dengan VPN (penghormatan browser Opera) dan plug-in browser?  Pertama, bermain dengan hub Mikrotik, kami bahkan memiliki resep intensif sumber daya untuk L7, yang kemudian kami tolak (mungkin ada lebih banyak nama terlarang, menjadi sedih ketika, selain tugas langsungnya pada rute, pada 3 lusin ekspresi, prosesor PPC460GT masuk ke 100 %). <br><br><img src="https://habrastorage.org/webt/mh/aa/5y/mhaa5y8mjctihnqzfcauqq8ctgc.png">  . <br><br>  Apa yang menjadi jelas: <br>  CSN pada 127.0.0.1 sama sekali bukan obat mujarab, versi browser modern masih memungkinkan Anda untuk melewati masalah seperti itu.  Tidak mungkin untuk membatasi semua pengguna dengan hak yang dilucuti, dan orang tidak boleh lupa tentang sejumlah besar DNS alternatif.  Internet tidak statis, dan selain alamat DNS baru, situs yang terlarang membeli alamat baru, mengubah domain tingkat atas, dan dapat menambah / menghapus karakter di alamat mereka.  Namun tetap saja, ia memiliki hak untuk menjalani sesuatu seperti itu (secara subyektif: dalam perlindungan seperti itu saya melihat bagaimana browser, yang masih bingung, masih menunggu jawaban, dan halaman yang berisi elemen konten terlarang membutuhkan waktu lama untuk dimuat): <br><br><pre><code class="bash hljs">ip route add blackhole 1.2.3.4</code> </pre> <br>  Memperoleh daftar alamat IP dari daftar situs yang terlarang akan sangat efektif, tetapi untuk alasan di atas, kami beralih ke pertimbangan Iptables.  Sudah ada penyeimbang langsung pada rilis CentOS Linux 7.5.1804. <br><br>  Internet pengguna harus cepat, dan browser tidak boleh menunggu setengah menit, menyimpulkan bahwa halaman ini tidak tersedia.  Setelah lama mencari opsi penguncian yang berbeda, kami sampai pada model ini: <br>  File 1 -&gt; <b>/ script / deny_host</b> , daftar nama terlarang: <br><br><pre> <code class="plaintext hljs">test.test blablabla.bubu torrent porno</code> </pre> <br>  File 2 -&gt; <b>/ script / deny_range</b> , daftar ruang dan alamat alamat terlarang: <br><br><pre> <code class="plaintext hljs">192.168.111.0/24 241.242.0.0/16</code> </pre> <br>  File skrip 3 -&gt; <b>ipt.sh</b> , yang berfungsi dengan ipables: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#       HOSTS=`cat /script/denied_host | grep -v '^#'` RANGE=`cat /script/denied_range | grep -v '^#'` echo "Stopping firewall and allowing everyone..." #    iptables,      sudo iptables -F sudo iptables -X sudo iptables -t nat -F sudo iptables -t nat -X sudo iptables -t mangle -F sudo iptables -t mangle -X sudo iptables -P INPUT ACCEPT sudo iptables -P FORWARD ACCEPT sudo iptables -P OUTPUT ACCEPT #     (  ) sudo sh rout.sh #          for i in $HOSTS; do sudo iptables -I FORWARD -m string --string $i --algo bm --from 1 --to 600 -p tcp -j REJECT --reject-with tcp-reset; sudo iptables -I FORWARD -m string --string $i --algo bm --from 1 --to 600 -p udp -j DROP; done #          for i in $RANGE; do sudo iptables -I FORWARD -p UDP -d $i -j DROP; sudo iptables -I FORWARD -p TCP -d $i -j REJECT --reject-with tcp-reset; done</span></span></code> </pre><br>  Penggunaan sudo disebabkan oleh fakta bahwa kami memiliki hack kecil untuk dikendalikan melalui antarmuka WEB, tetapi seperti yang ditunjukkan oleh pengalaman dengan model seperti itu selama lebih dari setahun, WEB tidak begitu diperlukan.  Setelah implementasi ada keinginan untuk membuat daftar situs dalam database, dll.  Jumlah host yang diblokir adalah lebih dari 250 + selusin ruang alamat.  Memang, ada masalah ketika beralih ke situs melalui koneksi https, serta administrator sistem, saya punya keluhan tentang browser :), tetapi ini adalah kasus khusus, sebagian besar tanggapan terhadap kurangnya akses ke sumber daya masih di pihak kami, kami juga berhasil memblokir Opera VPN, plugin seperti friGate dan telemetri dari Microsoft. <br><br><img src="https://habrastorage.org/webt/mm/_t/jy/mm_tjyvq1tpwumvwb3pezgfmixe.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471402/">https://habr.com/ru/post/id471402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471380/index.html">Pentester di garis depan keamanan dunia maya</a></li>
<li><a href="../id471384/index.html">Liga Internet Gratis</a></li>
<li><a href="../id471388/index.html">Beberapa fitur pengembangan keterampilan untuk Alice</a></li>
<li><a href="../id471394/index.html">Habr Weekly # 22 / Cara berkomunikasi dalam tim, pajak baru untuk perusahaan besar, TON di jari, Amazon menyalin produk</a></li>
<li><a href="../id471396/index.html">Bagaimana CSS Grid Mengubah Penataan Konten</a></li>
<li><a href="../id471404/index.html">Apakah mungkin mendapatkan lebih banyak dengan bekerja sebagai insinyur di negara lain?</a></li>
<li><a href="../id471408/index.html">Alternatif untuk inverter fase berdengung: saluran transmisi (TQWT, ALT)</a></li>
<li><a href="../id471412/index.html">Posting tentang banyak sampah di desktop</a></li>
<li><a href="../id471414/index.html">Sistem Help Desk terkemuka. Bagaimana kita mendapatkan persyaratan dan mengembangkan layanan cloud?</a></li>
<li><a href="../id471418/index.html">Apa yang bisa diajarkan pasar VR kepada seorang desainer game?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>