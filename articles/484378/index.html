<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ü üïØÔ∏è üÜó SwayWM - UnixPorn usted mismo üö∂üèª üôã üë©üèª‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos En este art√≠culo, describir√© mi experiencia en la configuraci√≥n y el uso de sway, un administrador de ventanas de mosaico para Linux. 
 ¬ø...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SwayWM - UnixPorn usted mismo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484378/"><p>  Hola a todos  En este art√≠culo, describir√© mi experiencia en la configuraci√≥n y el uso de sway, un administrador de ventanas de mosaico para Linux. <a name="habracut"></a></p><br><h1 id="chto-eto-takoe-i-zachem-ono-nuzhno">  ¬øQu√© es y por qu√© se necesita? </h1><br><p>  Oficialmente, sway es un administrador de ventanas de mosaico, un reemplazo transparente de i3wm que se ejecuta sobre Wayland. </p><br><blockquote>  Weiland, tambi√©n conocido como W√∂lund, etc.  - Un personaje de la antigua mitolog√≠a alemana y n√≥rdica antigua, un libro sobre el que fue escrito en un tiempo por el folklorista ingl√©s Jessie Weston.  Ahora ya lo sabes. </blockquote><p>  Sin embargo, en mi opini√≥n, la caracter√≠stica principal de sway es que es un constructor, con todas las ventajas y desventajas de este enfoque.  Si te gusta Vim (la similitud se ve agravada por la orientaci√≥n sobre el uso del teclado), Archlinux y proyectos similares, entonces te aconsejo que eches un vistazo m√°s de cerca a la influencia.  Mi opini√≥n personal es que una vez que pase un poco m√°s de tiempo configur√°ndolo, obtendr√° un entorno muy estable y conveniente para usted personalmente, en el que no suceder√° nada inesperado. </p><br><p>  Si las desventajas de sway y Wayland (como la falta de soporte para los controladores privados de NVidia y la necesidad de buscar an√°logos para muchos programas familiares) le parecen fatales, le aconsejo que preste atenci√≥n al x3 i3wm.  Las partes del constructor all√≠ ser√°n completamente diferentes, tendr√° que instalar xinit, configurar varios .Xauthority, es posible lidiar con el desgarro, pero la l√≥gica general del sistema es exactamente la misma. </p><br><h1 id="ustanovka">  Instalaci√≥n </h1><br><p> Sway est√° probablemente en los repositorios de su distribuci√≥n.  Sin embargo, si desea instalar una versi√≥n m√°s nueva, entonces es muy simple.  La p√°gina del proyecto <a href="https://github.com/swaywm/sway">github</a> tiene una lista escasa de sus dependencias.  Inst√°lelos, clone el repositorio, clone <code>wlroots</code> en la carpeta de <code>subprojects</code> : </p><br><pre> <code class="plaintext hljs">hub clone swaywm/sway hub clone swaywm/wlroots sway/subprojects/wlroots</code> </pre><br><p>  (Aqu√≠ uso un <a href="https://github.com/github/hub">hub</a> . Una herramienta no est√°ndar, pero muy conveniente).  Despu√©s de eso, puede configurar y construir: </p><br><pre> <code class="plaintext hljs">meson setup ./sway-build ./sway --buildtype=minsize ninja -C ./sway-build doas ninja -C ./sway-build install</code> </pre> <br><blockquote>  doas es un reemplazo ligero de sudo de los desarrolladores de OpenBSD.  Linux usualmente usa su bifurcaci√≥n de <a href="https://github.com/Duncaen/OpenDoas">OpenDoas.</a> </blockquote><br><h1 id="zapusk">  Lanzamiento </h1><br><p>  Si desea correr desde la l√≠nea de comando sin usar administradores como SDDM, entonces la √∫nica forma correcta de hacerlo es </p><br><pre> <code class="plaintext hljs">$ exec sway</code> </pre> <br><p>  Si ejecuta sway sin <code>exec</code> , bloquea la pantalla con swaylock y sway se bloquea, volver√° a la l√≠nea de comando.  La cerradura ser√° in√∫til. </p><br><blockquote>  Nota para los fan√°ticos de systemd: sway no requiere systemd-logind ni elogind.  Es cierto que en este caso tendr√° que establecer el bit suid o configurar las capacidades.  Ver la <a href="https://github.com/swaywm/sway/wiki/Running-Sway-without-systemd">wiki</a> . </blockquote><br><h2 id="peremennye-okruzheniya">  Variables de entorno </h2><br><p>  Hay varios lugares donde los prescribo. </p><br><p>  Script de shell en <code>~/.local/bin/sway</code> : para variables espec√≠ficas de sway.  Por ejemplo, quiero que las aplicaciones Qt no muestren el escenario y utilicen el tema de <code>qt5ct</code> : </p><br><pre> <code class="plaintext hljs">#!/bin/bash QT_QPA_PLATFORMTHEME=qt5ct \ QT_WAYLAND_DISABLE_WINDOWDECORATION=1 \ /usr/bin/sway</code> </pre> <br><p>  <code>~/.pam_environment</code> : para las variables que deseo que est√©n disponibles de inmediato en la sesi√≥n del usuario systemd.  Un ejemplo: </p><br><pre> <code class="plaintext hljs">SSH_AUTH_SOCK DEFAULT="${XDG_RUNTIME_DIR}/gnupg/S.gpg-agent.ssh"</code> </pre> <br><p>  Sin embargo, cambie este archivo con precauci√≥n, especialmente si utiliza otros entornos.  Por ejemplo, a KDE Plasma no le gustar√° mucho si detecta <code>$WAYLAND_DISPLAY</code> (ir√≥nicamente, el m√≥dulo <code>pam_env</code> que <code>pam_env</code> este archivo fue creado hace N a√±os principalmente para establecer la variable <code>$DISPLAY</code> ). </p><br><p>  <code>~/.bashrc</code> : para todos los dem√°s casos. </p><br><h1 id="nastroyka-sway">  Configuraci√≥n de balanceo </h1><br><h2 id="vvod">  Entrar </h2><br><p>  Todo es bastante simple en mi sistema: instalamos dise√±os en ruso e ingl√©s y cambiamos entre ellos mediante <code>Alt+Shift</code> .  En la configuraci√≥n de balanceo, se ve as√≠: </p><br><pre> <code class="plaintext hljs">input * { xkb_layout us,ru xkb_options grp:alt_shift_toggle }</code> </pre> <br><p>  Sway usa la biblioteca <code>libinput</code> para entrada, igual que KDE y Gnome.  Entonces, tenemos muchas de sus opciones disponibles.  Configuraci√≥n del panel t√°ctil, desplazamiento natural, aceleraci√≥n del puntero del mouse, etc.  etc.  La lista de opciones se puede examinar en <code>man sway-input</code> y la lista de dispositivos de entrada en la salida del comando </p><br><pre> <code class="plaintext hljs">swaymsg -t get_inputs</code> </pre> <br><p>  Sin embargo, me gustar√≠a llamar la atenci√≥n sobre una oportunidad interesante.  Si se est√° mudando de un entorno X, simplemente puede transferir la configuraci√≥n del teclado desde all√≠.  Ejecute el comando en este entorno </p><br><pre> <code class="plaintext hljs">$ xkbcomp $DISPLAY /path/to/keymap.xkb</code> </pre> <br><p>  y en el registro de configuraci√≥n sway </p><br><pre> <code class="plaintext hljs">input * { xkb_file /path/to/keymap.xkb }</code> </pre> <br><h2 id="hotkei">  Teclas de acceso r√°pido </h2><br><p>  Las teclas de acceso r√°pido, como todo lo dem√°s en Sway, se configuran en la configuraci√≥n.  Hay 3 comandos para definirlos: </p><br><ol><li>  <code>bindswitch</code> .  Se realiza al abrir / cerrar la tapa de la computadora port√°til, cambiar al modo tableta, etc. </li><li>  <code>bindcode</code>  Se ejecuta cuando se presiona una tecla con el c√≥digo especificado.  No depende del dise√±o actual, especialmente √∫til para teclas multimedia. </li><li>  <code>bindsym</code>  El car√°cter actual introducido depende del dise√±o.  Sin embargo, si agrega el par√°metro <code>--to-code</code> , este car√°cter se convertir√° impl√≠citamente al c√≥digo correspondiente para el primer dise√±o desde <code>xkb_layout</code> (consulte la configuraci√≥n de entrada). </li></ol><br><p>  Por ejemplo, dicha tecla de acceso directo superar√° la ventana actual independientemente del dise√±o: </p><br><pre> <code class="plaintext hljs">bindsym --to-code $mod+Shift+q kill</code> </pre> <br><p>  Puedes leer m√°s sobre estos par√°metros en mana: <code>man 5 sway</code> . </p><br><p>  Para determinar f√°cilmente qu√© se presion√≥, el autor de sway escribi√≥ un <a href="https://git.sr.ht/~sircmpwn/wshowkeys">keylogger</a> especial (necesita derechos de root para trabajar, por lo que no hay que preocuparse por la seguridad). </p><br><h2 id="vyvod">  Conclusi√≥n </h2><br><p>  Se puede obtener una lista de dispositivos de salida disponibles con el comando </p><br><pre> <code class="plaintext hljs">swaymsg -t get_outputs</code> </pre> <br><p>  En la configuraci√≥n de cada uno de ellos, puede configurar el modo de video, la escala (incluida la fracci√≥n), la imagen, la rotaci√≥n, etc.  La configuraci√≥n m√°s simple se ve as√≠: </p><br><pre> <code class="plaintext hljs">output HDMI-A-1 mode 1920x1080@60Hz output * bg /path/to/wallpaper.jpg fill</code> </pre> <br><p>  Se puede encontrar una lista completa de opciones en el <code>man sway-output</code> mana. <br>  Tambi√©n hay un programa <a href="https://github.com/emersion/wlr-randr">wlr-randr</a> en el que todo esto se puede configurar desde la l√≠nea de comandos (es decir, es un an√°logo de XRandr para Wayland). </p><br><h2 id="swaybar">  Barra estabilizadora </h2><br><p>  Barra estabilizadora: un panel en el que se muestra la informaci√≥n de estado.  Fecha, hora, bandeja del sistema, etc.  etc.  Por lo general, los fan√°ticos de i3 y sway pasan la mayor parte del tiempo configurando este panel en particular (o paneles, puede haber varios).  Personalmente, tengo suficiente de esto, cerca de la configuraci√≥n m√≠nima: </p><br><pre> <code class="plaintext hljs">bar { position top colors { statusline #ffffff background #282828E6 inactive_workspace #282936BF #282936BF #5c5c5c } font Hack 11 status_command i3blocks }</code> </pre> <br><p>  Hay muchas opciones para ajustar la posici√≥n, los colores, las fuentes, la bandeja, etc.  Puedes <code>man 5 sway-bar</code> sobre ellos en mana - <code>man 5 sway-bar</code> . </p><br><p>  Swaybar se compromete a leer y analizar json en formato i3bar, generado por <code>status_command</code> .  Hay muchos programas que pueden usarse aqu√≠.  <a href="https://i3wm.org/i3status/">i3status</a> , <a href="https://github.com/Alexays/Waybar">waybar</a> , <a href="https://github.com/greshake/i3status-rust">i3status-rs</a> y muchos otros proyectos.  Personalmente, prefiero <a href="https://github.com/vivien/i3blocks">i3blocks</a> debido a la simplicidad de la configuraci√≥n y la facilidad de agregar bloques personalizados. </p><br><h1 id="nastroyka-prikladnyh-programm">  Configuraci√≥n de la aplicaci√≥n </h1><br><h2 id="uvedomleniya">  Notificaciones </h2><br><p>  Esto lo puede <a href="https://github.com/emersion/mako">hacer el</a> demonio <a href="https://github.com/emersion/mako">mako</a> (lo m√°s probable es que haya en su distribuci√≥n).  All√≠ tambi√©n puede ajustar los colores, etc., pero todo esto es opcional.  Solo ejec√∫talo y funcionar√°. </p><br><p>  Mako implementa la especificaci√≥n de notificaciones de escritorio XDG basada en dbus.  Es compatible con muchos programas, incluidos Chromium, Firefox y Telegram. </p><br><h2 id="emulyator-terminala">  Emulador de terminal </h2><br><p>  En entornos como KDE, Plasma generalmente usa emuladores integrados que muestran men√∫s, pesta√±as y muchos otros elementos de dise√±o.  Pero, ¬øpor qu√© todo esto se balancea?  Prefiero <a href="https://github.com/alacritty/alacritty">Alacritty</a> , muy r√°pido gracias al uso del emulador de GPU, por cierto escrito en Rust.  Agregu√© tales teclas de acceso r√°pido a la secci√≥n key_bindings en su configuraci√≥n ( <code>~/.config/alacritty/alacritty.yml</code> ): </p><br><pre> <code class="plaintext hljs">- { key: T, mods: Control|Shift, action: SpawnNewInstance }</code> </pre> <br><p>  abre una nueva ventana con el directorio actual.  Un excelente reemplazo para las pesta√±as, y el balanceo se encargar√° del dise√±o. </p><br><pre> <code class="plaintext hljs">- { key: Up, mods: Control|Shift, action: ScrollLineUp, mode: ~Alt } - { key: Down, mods: Control|Shift, action: ScrollLineDown, mode: ~Alt }</code> </pre> <br><p>  desplazarse hacia arriba / abajo de una l√≠nea. </p><br><p>  Escribimos en la configuraci√≥n de balanceo </p><br><pre> <code class="plaintext hljs">set $term alacritty bindsym $mod+Return exec $term</code> </pre> <br><p>  Alacritty no admite ligaduras, ya que afectan la velocidad de renderizado.  Si a√∫n los necesita, preste atenci√≥n a <a href="https://sw.kovidgoyal.net/kitty/">kitty</a> : este emulador tambi√©n es muy r√°pido y solo hay una cantidad aterradora de caracter√≠sticas y configuraciones debajo del cap√≥. </p><br><h2 id="zapusk-prilozheniy">  Lanzar aplicaciones </h2><br><p>  Las aplicaciones en Sway generalmente se inician utilizando el men√∫ de teclas de acceso r√°pido.  En la configuraci√≥n escriben algo como </p><br><pre> <code class="plaintext hljs">set $menu ... bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  Hay muchos programas para mostrar el men√∫.  Algunos, como <a href="https://tools.suckless.org/dmenu/">dmenu</a> o <a href="https://github.com/davatorium/rofi">rofi</a> , necesitan XWayland.  Entre los que trabajan en Wayland podemos distinguir <a href="https://github.com/Cloudef/bemenu">bemenu</a> e incluso krunner (lo que aparece en KDE por <code>Alt+F2</code> . S√≠, este es un programa independiente). </p><br><p>  Sin embargo, prefiero una soluci√≥n m√°s universal, a saber, <a href="https://github.com/Biont/sway-launcher-desktop">sway-launcher-desktop</a> .  A pesar del nombre, no depende de la influencia y, en general, no es un programa GUI, sino un peque√±o script de shell que funciona en la consola.  Este script forma un men√∫ a partir de programas en <code>$PATH</code> , archivos de escritorio instalados (de acuerdo con la especificaci√≥n XDG Desktop Entry) y posiblemente fuentes adicionales (configuradas en la configuraci√≥n).  La maravillosa utilidad <code>fzf</code> se usa para mostrar y buscar en el men√∫; preste atenci√≥n. </p><br><p>  Por lo tanto, para mostrar el men√∫, necesitamos abrir una ventana de terminal con este programa.  Con alacritty, esto se hace as√≠: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty -e sway-launcher-desktop bindsym --to-code $mod+d exec $menu</code> </pre> <br><p>  Es posible que desee hacer que esta ventana flote de forma predeterminada.  En i3 y sway, tales reglas se configuran en la configuraci√≥n utilizando la directiva <code>for_window</code> .  Para asignar la regla a la ventana <code>sway-launcher-desktop</code> , se le debe asignar una clase √∫nica, para m√≠ es solo <code>Launcher</code> .  Tenga en cuenta que debido al uso de Wayland, los criterios enumerados en el <a href="https://i3wm.org/docs/userguide.html">manual de i3</a> no son adecuados para el balanceo.  Los correctos se pueden encontrar en <code>man 5 sway</code> , secci√≥n <code>CRITERIA</code> .  En este caso, <code>app_id</code> es bastante adecuado, y la configuraci√≥n final se ve as√≠: </p><br><pre> <code class="plaintext hljs">set $menu exec alacritty --class Launcher -e sway-launcher-desktop for_window [app_id="Launcher"] floating enable, border pixel 10, sticky enable bindsym --to-code $mod+d exec $menu</code> </pre> <br><h2 id="avtozapusk-prilozheniy">  Aplicaciones de inicio autom√°tico </h2><br><p>  En principio, para iniciar autom√°ticamente un programa, simplemente puede escribir </p><br><pre> <code class="plaintext hljs">exec /path/to/program</code> </pre> <br><p>  en la configuraci√≥n de balanceo, o incluso crear una unidad systemd personalizada.  Sin embargo, en este art√≠culo utilizar√© la especificaci√≥n XDG Autostart adoptada por KDE y Gnome. </p><br><p>  La especificaci√≥n es ejecutar archivos de escritorio ubicados en los <code>~/.config/autostart</code> <code>/etc/xdg/autostart</code> y <code>~/.config/autostart</code> .  Como regla general, estos archivos vienen en paquetes con programas, pero son f√°ciles de crear usted mismo. </p><br><p>  Aqu√≠ es donde se manifiesta la esencia modular de la influencia.  Sway en s√≠ mismo no sabe nada sobre el inicio autom√°tico XDG, ni la entrada de escritorio XDG.  Adem√°s, a sus desarrolladores les disgustan activamente estas y todas las especificaciones similares.  Sin embargo, la utilidad de consola <a href="https://github.com/jceb/dex">dex</a> puede administrarlos (lo m√°s probable es que est√© en el repositorio de su distribuci√≥n). </p><br><p>  Para verificar qu√© estar√° en ejecuci√≥n autom√°tica, escriba el comando </p><br><pre> <code class="plaintext hljs">$ dex -ade Sway</code> </pre> <br><p>  <code>a</code> significa inicio autom√°tico, <code>d</code> - "ejecuci√≥n en seco", <code>-e Sway</code> establece el nombre del entorno (puede ser cualquiera) y se utiliza para el filtrado. </p><br><p>  Lo m√°s probable es que la lista resultante no le convenga.  Por ejemplo, obtuve <code>kgpg</code> .  Procedemos de la siguiente manera: copie el archivo de escritorio correspondiente desde <code>/etc/xdg/autostart</code> a <code>~/.config/autostart</code> , agregue la l√≠nea all√≠ </p><br><pre> <code class="plaintext hljs">NotShowIn=Sway</code> </pre> <br><p>  y verifique la ejecuci√≥n autom√°tica nuevamente.  Es posible que a muchos programas (especialmente aquellos escritos en Electron) no les guste ejecutar bajo Wayland.  Hacemos lo mismo con ellos.  Copiamos el archivo de escritorio y cambiamos la l√≠nea de lanzamiento all√≠.  Fue: </p><br><pre> <code class="plaintext hljs">Exec=/usr/bin/skypeforlinux</code> </pre> <br><p>  se convirti√≥ en: </p><br><pre> <code class="plaintext hljs">Exec=env GDK_BACKEND=x11 /usr/bin/skypeforlinux</code> </pre> <br><p>  la misma t√©cnica se puede aplicar a sway-launcher-desktop del p√°rrafo anterior.  Cuando se resuelvan todos los problemas, agregue la l√≠nea a la configuraci√≥n de balanceo </p><br><pre> <code class="plaintext hljs">exec dex -ae Sway</code> </pre> <br><p>  O puede hacer lo contrario: copie los archivos de escritorio deseados en alg√∫n directorio no est√°ndar y configure el dex con el comando </p><br><pre> <code class="plaintext hljs">exec dex -as /path/to/your/dir</code> </pre> <br><h2 id="skrinshoty">  Capturas de pantalla </h2><br><p>  Dos de los ata√∫des nos ayudar√°n con esto.  <a href="https://github.com/emersion/slurp">slurp le</a> permite seleccionar un √°rea rectangular arbitraria en la pantalla, y <a href="https://github.com/emersion/grim">Grim</a> hace una captura de pantalla.  En mi configuraci√≥n se ve as√≠: </p><br><pre> <code class="plaintext hljs">bindsym Print exec grim ~/Pictures/screen-"$(date +%s)".png bindsym $mod+Print exec grim -g "$(slurp)" ~/Pictures/screen-"$(date +%s)".png</code> </pre> <br><p>  <code>$mod+PrintScreen</code> : captura de pantalla de un √°rea arbitraria, <code>PrintScreen</code> : captura de pantalla de toda la pantalla. </p><br><h2 id="skrinkasty">  Screencasts </h2><br><p>  Si necesita escribir un screencast en un archivo o transmitirlo a un flujo RTMP (por ejemplo, en Twitch), <a href="https://github.com/ammen99/wf-recorder">wf-recorder</a> lo ayudar√° (tambi√©n es compatible con slurp). </p><br><p>  Si desea utilizar OBS Studio, existe el complemento <a href="https://hg.sr.ht/~scoopta/wlrobs">wlrobs</a> para esto. </p><br><p>  Sin embargo, la soluci√≥n m√°s universal admitida por un lado en KDE y Gnome, y por otro, en particular en los navegadores Chrome y Firefox, es usar Pipewire y la especificaci√≥n XDG Desktop Portal.  Para influir, existe la capa necesaria <a href="https://github.com/emersion/xdg-desktop-portal-wlr">xdg-desktop-portal-wlr</a> , aunque no verifiqu√© su rendimiento. </p><br><h2 id="nochnoy-rezhim">  Modo nocturno </h2><br><p>  El modo nocturno consiste en reemplazar los colores del monitor con colores m√°s c√°lidos en la oscuridad.  Los cient√≠ficos dudan de cu√°n √∫til sea realmente esto, y los desarrolladores de Wayland decidieron que estandarizar el protocolo de correcci√≥n gamma era in√∫til por razones t√©cnicas. </p><br><p>  Sin embargo, me gusta esta caracter√≠stica, y en realidad tambi√©n est√° ah√≠.  Para el modo nocturno, necesitamos esta <a href="https://github.com/minus7/redshift">bifurcaci√≥n de desplazamiento</a> al <a href="https://github.com/minus7/redshift">rojo</a> con soporte para el protocolo espec√≠fico de balanceo. </p><br><p>  Lo instalamos de cualquier manera, en la <code>~/.config/redshift/redshift.conf</code> , seleccionamos el protocolo deseado y especificamos la longitud y latitud. </p><br><pre> <code class="plaintext hljs">[redshift] location-provider=manual adjustment-method=wayland [manual] lat=xx.xx lon=yy.yy</code> </pre> <br><h2 id="blokirovka-i-otklyuchenie-ekrana">  Bloqueo y pantalla apagada </h2><br><p>  Dos de otro ata√∫d vienen al rescate aqu√≠.  <code>swayidle</code> ejecuta los comandos dados en tiempo de espera si no hay actividad (o viceversa, su apariencia), y <code>swaylock</code> bloquea la pantalla y requiere una contrase√±a.  Puede apagar la pantalla (o todas las pantallas, si hay varias) </p><br><pre> <code class="plaintext hljs">swaymsg "output * dpms off"</code> </pre> <br><p>  As√≠ es como se ver√° el demonio, bloqueando la pantalla despu√©s de 300 segundos de inactividad y apag√°ndola despu√©s de 600: </p><br><pre> <code class="plaintext hljs">swayidle -w \ timeout 300 'swaylock -f -c 000000' \ timeout 600 'swaymsg "output * dpms off"' \ resume 'swaymsg "output * dpms on"' \ before-sleep 'swaylock -f -c 000000'</code> </pre> <br><p>  Ejec√∫telo de cualquier manera. </p><br><h2 id="i3blocks">  i3blocks </h2><br><p>  Bloques listos para usar con calendario, red, estado del disco, etc.  etc.  se puede tomar prestado del repositorio <a href="https://github.com/vivien/i3blocks-contrib">i3blocks-contrib</a> .  En i3blocks se agregan en la configuraci√≥n en <code>~/.config/i3blocks/config</code> .  Por ejemplo, un bloque con actualizaciones cada 5 segundos por d√≠a de la semana, fecha y hora: </p><br><pre> <code class="plaintext hljs">[time] command=date +"%a %d/%m %H:%M" interval=5</code> </pre> <br><p>  Pero este era un ejemplo demasiado simple.  De hecho, los entusiastas de i3 y sway tienen un santo grial: mostrar la barra de t√≠tulo de la ventana actual en la barra superior.  Vamos a descubrir c√≥mo lograr esto. </p><br><p>  En primer lugar, comenzamos a leer <code>man sway-ipc</code> y descubrimos que puedes suscribirte a eventos all√≠.  El requerido tiene el c√≥digo <code>0x80000003. WINDOW</code>  <code>0x80000003. WINDOW</code> y devuelve objetos json de esta estructura: </p><br><pre> <code class="plaintext hljs">{ "change" : "focus | title | ...", "container": { focused: true | false, name: "...", ... } }</code> </pre> <br><p>  De hecho, la ventana en s√≠ misma puede cambiar su t√≠tulo ( <code>change == title</code> ), o podemos mover el foco a otra ventana ( <code>change == focus</code> ).  Sin embargo, la ventana puede cambiar el t√≠tulo y desenfocado.  Para filtrar tales eventos, debemos verificar la propiedad <code>container.focused</code> . </p><br><p>  Puede describir toda esta l√≥gica en Python o Go, pero hay una mejor manera.  <code>swaymsg</code> hace que sea f√°cil suscribirse a los eventos deseados y enviarlos a stdout: </p><br><pre> <code class="plaintext hljs">$ swaymsg -m -t SUBSCRIBE "['window']"</code> </pre> <br><p>  y procesaremos el json resultante en <code>jq</code> .  Sin entrar en las sutilezas de la sintaxis de consulta de esta maravillosa utilidad, aqu√≠ est√° el resultado: </p><br><pre> <code class="bash hljs">$ query=<span class="hljs-string"><span class="hljs-string">'select(.change == "focus" or (.change == "title" and .container.focused)) | .container.name'</span></span> $ swaymsg -m -t SUBSCRIBE <span class="hljs-string"><span class="hljs-string">"['window']"</span></span> | jq --unbuffered -r <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$query</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p>  Un script de dos l√≠neas en la fiesta, ¬°y no m√°s c√≥digo!  Se <code>--unbuffered</code> indicador <code>--unbuffered</code> ; de lo contrario, i3blocks no recibir√° nuevas l√≠neas de inmediato, sino solo cuando se borre el b√∫fer. </p><br><p>  Finalmente, agregue el siguiente bloque a la configuraci√≥n de i3blocks: </p><br><pre> <code class="plaintext hljs">[active_window] command=/path/to/our/script.sh interval=persist</code> </pre> <br><p>  Tarea: ens√©√±ele a tomar una captura de pantalla de la ventana actual.  Dicen que tales cosas son imposibles en Wayland, pero los hombres lo dudan. </p><br><p>  Tarea 2: Ense√±e a i3blocks a mostrar la distribuci√≥n actual del teclado como una bandera.  Hay un par de bloques en i3blocks-contrib, pero muestran texto en lugar de una bandera y no funcionan en Wayland. </p><br><h2 id="prochie-programmy">  Otros programas </h2><br><p>  <a href="https://github.com/bugaevc/wl-clipboard">wl-clipboard le</a> permite trabajar con el portapapeles desde la terminal, es decir, reemplaza xclip y xsel.  Es especialmente √∫til para los usuarios de vim, en los que copiar / pegar comienza a usar <code>"+y</code> / <code>"+p</code> (simplemente instale este paquete, no se requiere configuraci√≥n adicional). </p><br><p>  <a href="https://github.com/ReimuNotMoe/ydotool">ydotool</a> - reemplazo de xdotool. </p><br><p>  <a href="https://gitlab.freedesktop.org/mstoeckl/waypipe/">waypipe</a> : proxy para la transparencia de la red.  Para ser sincero, no recuerdo la √∫ltima vez que alguien hizo una pregunta relacionada con esta funci√≥n en foros especializados.  ¬øQuiz√°s no lo usan en absoluto?  Yo definitivamente no. </p><br><p>  KDE Connect  Agregue el archivo <code>org.kde.kdeconnect.nonplasma.desktop</code> a la <code>org.kde.kdeconnect.nonplasma.desktop</code> (consulte las secciones anteriores), instale KDE Connect en su tel√©fono inteligente y configure su conexi√≥n, y puede controlar la reproducci√≥n de m√∫sica y video desde su tel√©fono inteligente en un navegador con el complemento de <a href="https://addons.mozilla.org/ru/firefox/addon/plasma-integration/">integraci√≥n de plasma</a> , en vlc , en cantata, en mpv con <a href="https://github.com/hoyon/mpv-mpris">el plugin mpv-mpris</a> , y tambi√©n recibir notificaciones en mako.  Mi respeto por el proyecto KDE para el desarrollo de programas no clavado en su ecosistema. </p><br><h1 id="zaklyuchenie">  Conclusi√≥n </h1><br><p>  Puede escribir sobre c√≥mo configurar todo esto (especialmente el panel i3blocks) sin fin, pero es mejor detenerse aqu√≠.  Esto es lo que obtuve: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/s9/qy/q0/s9qyq0rrpk9rzv4bamj1qsooceq.png"></a> </p><br><p>  Tambi√©n vaya al subreddit <a href="https://www.reddit.com/r/unixporn/">/ r / unixporn</a> y <a href="https://www.reddit.com/r/unixporn/">admire</a> lo que la gente est√° haciendo.  (Sin embargo, el 95% de todo lo que se presenta all√≠ se ve hermoso, pero categ√≥ricamente no es adecuado para el trabajo diario :)). </p></div></div><p>Source: <a href="https://habr.com/ru/post/484378/">https://habr.com/ru/post/484378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484368/index.html">C√≥mo hice un motor de b√∫squeda para Telegram</a></li>
<li><a href="../484370/index.html">Slurm SRE: aprenda a garantizar la felicidad del usuario</a></li>
<li><a href="../484372/index.html">Casa inteligente con Xiaomi en el ejemplo de una sauna</a></li>
<li><a href="../484374/index.html">Viaje al centro ... imagen del acoplador. O c√≥mo descargar una imagen del registro sin docker</a></li>
<li><a href="../484376/index.html">Samsung Moscow Center for Artificial Intelligence en historias de empleados</a></li>
<li><a href="../484380/index.html">Mudanza - el siglo pasado! Alternativas a std :: mover en "C ++ del futuro"</a></li>
<li><a href="../484382/index.html">Algoritmo de Bellman-Ford</a></li>
<li><a href="../484386/index.html">AWS_Ru Meetup en Raiffeisenbank</a></li>
<li><a href="../484388/index.html">VVVVVV ??? VVVVVV !!! :)</a></li>
<li><a href="../484390/index.html">Glean Insights acerca de los 18 mejores marcos de Java para usar en 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>