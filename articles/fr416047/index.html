<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœ¨ ğŸ¨ ğŸ¤” Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 2: Â«ContrÃ´le des attaques de piratesÂ», partie 2 âš—ï¸ ğŸ‘²ğŸ» ğŸ‘©ğŸ¼â€ğŸŒ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Institut de technologie du Massachusetts. Cours magistral # 6.858. "SÃ©curitÃ© des systÃ¨mes informatiques." Nikolai Zeldovich, James Mickens. 2014 annÃ©e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 2: Â«ContrÃ´le des attaques de piratesÂ», partie 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/416047/"><h3>  Institut de technologie du Massachusetts.  Cours magistral # 6.858.  "SÃ©curitÃ© des systÃ¨mes informatiques."  Nikolai Zeldovich, James Mickens.  2014 annÃ©e </h3><br>  Computer Systems Security est un cours sur le dÃ©veloppement et la mise en Å“uvre de systÃ¨mes informatiques sÃ©curisÃ©s.  Les confÃ©rences couvrent les modÃ¨les de menace, les attaques qui compromettent la sÃ©curitÃ© et les techniques de sÃ©curitÃ© basÃ©es sur des travaux scientifiques rÃ©cents.  Les sujets incluent la sÃ©curitÃ© du systÃ¨me d'exploitation (OS), les fonctionnalitÃ©s, la gestion du flux d'informations, la sÃ©curitÃ© des langues, les protocoles rÃ©seau, la sÃ©curitÃ© matÃ©rielle et la sÃ©curitÃ© des applications Web. <br><br>  Cours 1: Â«Introduction: modÃ¨les de menaceÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 2: Â«ContrÃ´le des attaques de piratesÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <a name="habracut"></a><br><br>  Donc, nous avons un tampon sur lequel nous mettons le Â«canariÂ».  Au-dessus se trouve la valeur <b>EBP enregistrÃ©e du</b> pointeur de point d'arrÃªt et l'adresse de retour est placÃ©e au-dessus.  Si vous vous souvenez, le dÃ©bordement va de bas en haut, donc avant d'arriver Ã  l'adresse de retour, il dÃ©truira d'abord le "canari". <br><br><img src="https://habrastorage.org/webt/va/0q/i_/va0qi_40d-7cknrooq7olqwfbga.jpeg"><br><br>  <b>Public:</b> pourquoi affectera-t-il le "canari"? <br><br>  <b>Professeur:</b> car on suppose que l'attaquant ne sait pas Â«sauterÂ» arbitrairement en mÃ©moire.  Les attaques de dÃ©passement de mÃ©moire traditionnelles commencent par un pirate qui examine la limite de taille de la mÃ©moire tampon, aprÃ¨s quoi le dÃ©bordement commence Ã  partir de la ligne de fond.  Mais vous avez raison - si un attaquant peut accÃ©der directement Ã  la barre d'adresse de retour, aucun Â«canariÂ» ne nous aidera.  Cependant, avec une attaque de dÃ©bordement de tampon traditionnelle, tout devrait se passer exactement de cette faÃ§on - de bas en haut. <br><br>  Ainsi, l'idÃ©e principale d'utiliser un Â«canariÂ» est que nous permettons Ã  un exploit malveillant de dÃ©border la mÃ©moire tampon.  Nous avons un code d'exÃ©cution qui, lors du retour d'une fonction, vÃ©rifie le "canari" pour s'assurer qu'il a la bonne valeur. <br><br>  <b>Public:</b> Un attaquant peut-il rÃ©Ã©crire l'adresse de retour et changer le Â«canariÂ»?  Comment peut-il vÃ©rifier qu'elle a Ã©tÃ© modifiÃ©e, mais continue de remplir sa fonction? <br><br>  <b>Professeur:</b> oui, peut-Ãªtre.  Ainsi, vous devriez avoir un morceau de code qui vÃ©rifiera cela avant le retour de la fonction.  Autrement dit, dans ce cas, il est nÃ©cessaire d'avoir le support d'un compilateur, qui va rÃ©ellement Ã©tendre la <b>convention d'appel convention d'appel</b> .  Donc, une partie de la sÃ©quence de retour se produit avant que nous considÃ©rions la validitÃ© de cette valeur pour nous assurer que le Â«canariÂ» n'a pas Ã©tÃ© dÃ©truit.  Ce n'est qu'aprÃ¨s cela que nous pouvons penser Ã  autre chose. <br><br>  <b>Public:</b> Un attaquant ne peut-il pas savoir ou deviner ce que signifie Â«canariÂ»? <br><br>  <b>Professeur:</b> c'est exactement ce dont je vais parler!  Quel est le problÃ¨me avec ce circuit?  Et si, par exemple, nous mettons la valeur A dans chaque programme?  Ou une branche entiÃ¨re de 4 valeurs de A?  Bien entendu, tout pirate peut connaÃ®tre la taille du tampon, sa capacitÃ©, et ainsi dÃ©terminer la position du "canari" dans n'importe quel systÃ¨me.  Par consÃ©quent, nous pouvons utiliser diffÃ©rents types de quantitÃ©s que nous mettons dans notre Â«canariÂ» pour Ã©viter cela. <br><br>  Il y a une chose que vous pouvez faire avec notre Â«canariÂ».  Ce sera un type de "canari" trÃ¨s drÃ´le, qui utilise les fonctions du programme C et traite des caractÃ¨res spÃ©ciaux, le type dit "canari" dÃ©terministe. <br><br><img src="https://habrastorage.org/webt/ww/nu/7w/wwnu7wtc-tnfgf7iwtux0guvoli.jpeg"><br><br>  Imaginez que vous avez utilisÃ© le caractÃ¨re 0 pour le Â«canariÂ». La valeur binaire de zÃ©ro est l'octet zÃ©ro, le caractÃ¨re zÃ©ro en ASCII.  Une valeur de -1 signifie un retour Ã  la position prÃ©cÃ©dente et ainsi de suite.  De nombreuses fonctions arrÃªtent ou changent de fonctionnement lorsqu'elles rencontrent des caractÃ¨res ou des valeurs telles que 0, CR, LF, -1.  Imaginez que vous, en tant que pirate, utilisiez une fonction de gestion de chaÃ®ne pour remonter le tampon, rencontrez le caractÃ¨re 0 dans le "canari" et le processus s'arrÃªte!  Si vous utilisez la fonction Â«retour chariotÂ» -1, qui est souvent utilisÃ©e comme terminaison de ligne, le processus s'arrÃªte Ã©galement.  -1 est donc un autre signe magique. <br><br>  Il y a encore une chose qui peut Ãªtre utilisÃ©e dans le Â«canariÂ» - ce sont des valeurs alÃ©atoires difficiles Ã  deviner pour l'attaquant.  La puissance de la valeur alÃ©atoire est basÃ©e sur la difficultÃ© pour un attaquant de la deviner.  Par exemple, si un attaquant se rend compte qu'il n'y a que 3 bits d'entropie dans votre systÃ¨me, il pourra alors utiliser une attaque par force brute.  Par consÃ©quent, les possibilitÃ©s d'utiliser des nombres alÃ©atoires pour se protÃ©ger contre les attaques sont assez limitÃ©es. <br><br><img src="https://habrastorage.org/webt/a0/qf/au/a0qfauye6kmbnvhhfifmesgudy0.jpeg"><br><br>  <b>Public: Il</b> arrive gÃ©nÃ©ralement que je lis dans un autre tampon et que j'Ã©crive ce que j'ai lu dans ce tampon de cette pile.  Dans cette situation, il semble que la valeur alÃ©atoire du "canari" soit inutile, car je lis les donnÃ©es d'un autre tampon et je sais oÃ¹ se trouve le "canari".  J'ai un autre tampon que je contrÃ´le et que je ne vÃ©rifie jamais.  Et dans ce tampon, je peux mettre beaucoup de ce que je veux mettre.  Je n'ai pas besoin d'un Â«canariÂ» alÃ©atoire, car je peux le rÃ©Ã©crire en toute sÃ©curitÃ©.  Je ne vois donc pas comment cela fonctionne vraiment - dans le scÃ©nario que vous avez proposÃ©, lorsque la fonction s'arrÃªte lors de la lecture des donnÃ©es du tampon. <br><br>  <b>Professeur:</b> Je comprends votre question - vous voulez dire que nous utilisons un "canari" dÃ©terministe, mais n'utilisez pas l'une des fonctions de la bibliothÃ¨que standard qui peut Ãªtre "trompÃ©e" par nos caractÃ¨res 0, CR, LF, -1.  Alors oui, dans la situation que vous avez dÃ©crite, un Â«canariÂ» n'est pas nÃ©cessaire. <br><br>  L'idÃ©e est que vous pouvez remplir ce tampon avec des octets de n'importe oÃ¹, mais tout ce qui vous permet de deviner ces valeurs ou de les obtenir de maniÃ¨re alÃ©atoire entraÃ®nera un Ã©chec. <br><br>  <b>Public:</b> Est-il possible d'utiliser quelque chose comme le nombre de secondes ou de millisecondes comme nombres alÃ©atoires et de les utiliser dans un Â«canariÂ»? <br><br>  <b>Professeur:</b> Les appels de donnÃ©es ne contiennent pas autant d'accidents que vous le pensez.  Parce que le programme a des journaux ou une fonction que vous pouvez appeler pour savoir quand le programme a Ã©tÃ© tÃ©lÃ©chargÃ© et d'autres choses similaires.  Mais en gÃ©nÃ©ral, vous avez raison - dans la pratique, si vous pouvez utiliser un pÃ©riphÃ©rique matÃ©riel, gÃ©nÃ©ralement de bas niveau, avec de meilleurs temps systÃ¨me, ce type d'approche peut fonctionner. <br><br>  <b>Public:</b> mÃªme si nous parvenons Ã  afficher les journaux sur le dÃ©but du dÃ©bordement de la mÃ©moire tampon, il est toujours important de savoir Ã  quelle heure nous refusons la demande.  Et si nous ne pouvons pas contrÃ´ler le temps que prend la demande dâ€™un ordinateur au serveur, il est douteux que lâ€™heure exacte puisse Ãªtre dÃ©terminÃ©e de maniÃ¨re dÃ©terministe. <br><br>  <b>Professeur:</b> trÃ¨s bien, j'ai dÃ©jÃ  dit que le mal rÃ©side dans les dÃ©tails, c'est juste un tel cas.  En d'autres termes, si vous avez, par exemple, un moyen de dÃ©terminer le type de canal de synchronisation, vous constaterez peut-Ãªtre que la quantitÃ© d'entropie ou le nombre d'alÃ©atoire ne remplit pas un horodatage complet, mais beaucoup moins.  Par consÃ©quent, un attaquant peut dÃ©terminer l'heure et la minute oÃ¹ vous avez fait cela, mais pas une seconde. <br><br>  <b>Public:</b> pour mÃ©moire, essayer de limiter votre propre caractÃ¨re alÃ©atoire est une mauvaise idÃ©e? <br><br>  <b>Professeur:</b> tout Ã  fait raison! <br><br>  <b>Public:</b> c'est-Ã -dire que nous devons gÃ©nÃ©ralement utiliser tout ce que nos systÃ¨mes prennent en charge, non? <br><br>  <b>Professeur:</b> oui, c'est vrai.  C'est comme l'invention de notre propre cryptosystÃ¨me, qui est une autre chose populaire que nos diplÃ´mÃ©s veulent parfois faire.  Mais nous ne sommes pas la NSA, nous ne sommes pas des mathÃ©maticiens, donc cela Ã©choue gÃ©nÃ©ralement.  Vous avez donc tout Ã  fait raison. <br><br>  Mais mÃªme si vous utilisez l'alÃ©atoire du systÃ¨me, vous pouvez toujours obtenir moins d'entropie que vous ne le pensez.  Permettez-moi de vous donner un exemple de randomisation de phase des adresses.  C'est sur ce principe que l'approche des <b>canaris de pile fonctionne</b> .  Puisque nous sommes engagÃ©s dans la sÃ©curitÃ© informatique, vous vous demandez probablement dans quels cas les "canaris" ne peuvent pas faire face Ã  leur tÃ¢che et s'il existe des moyens d'Ã©chouer le "canari". <br><br>  Une telle maniÃ¨re est une attaque en rÃ©Ã©crivant des pointeurs de fonction.  Parce que si un coup est portÃ© sur le pointeur de fonction, le Â«canariÂ» ne peut rien faire. <br><br>  Supposons que vous ayez un code de la forme <b>int * ptr ... ..</b> , le pointeur initiateur, peu importe comment, alors vous avez le <b>tampon char buf [128]</b> , la fonction <b>gets (buf)</b> , et tout en bas un pointeur auquel est affectÃ©e une valeur : <b>* ptr = 5</b> . <br><br>  Je note que nous n'avons pas essayÃ© d'attaquer l'adresse de retour de la fonction contenant ce code.  Comme vous pouvez le voir, lorsque le tampon dÃ©borde, l'adresse du pointeur situÃ©e au-dessus de celui-ci sera endommagÃ©e.  Si un attaquant peut endommager ce pointeur, il peut alors attribuer 5 Ã  l'une des adresses qu'il contrÃ´le.  Est-ce que tout le monde peut voir que le Â«canariÂ» n'aidera pas ici?  Parce que nous n'attaquons pas le chemin par lequel la fonction revient. <br><br><img src="https://habrastorage.org/webt/hz/oq/em/hzoqemqhfljf4w6rzownchcppbc.jpeg"><br><br>  <b>Public:</b> le pointeur peut-il Ãªtre situÃ© sous le tampon? <br><br>  <b>Professeur: c'est</b> possible, mais l'ordre des variables spÃ©cifiques dÃ©pend de beaucoup de choses diffÃ©rentes, de la faÃ§on dont le compilateur organise le contenu, de la taille de la colonne matÃ©rielle, etc.  Mais vous avez raison, si le dÃ©bordement de la mÃ©moire tampon monte et que le pointeur est situÃ© sous la mÃ©moire tampon, le dÃ©bordement ne peut pas l'endommager. <br><br>  <b>Public:</b> pourquoi ne pouvez-vous pas associer le Â«canariÂ» Ã  la fonction Â«canariÂ», comme vous l'avez fait avec l'adresse de retour? <br><br>  <b>Professeur:</b> c'est un moment intÃ©ressant!  Vous pouvez faire de telles choses.  En fait, vous pouvez essayer d'imaginer un compilateur qui chaque fois qu'il a un pointeur, il essaie toujours d'ajouter un module complÃ©mentaire pour certaines choses.  Cependant, vÃ©rifier toutes ces choses sera trop cher.  Parce que chaque fois que vous voulez utiliser un pointeur ou appeler une fonction, vous devez avoir un code qui vÃ©rifiera si ce "canari" est correct.  Fondamentalement, vous pourriez faire quelque chose de similaire, mais cela a-t-il un sens?  Nous voyons que les Â«canarisÂ» n'aident pas dans cette situation. <br><br>  Et une autre chose dont nous avons discutÃ© plus tÃ´t est que si l'attaquant peut deviner le caractÃ¨re alÃ©atoire, alors, en principe, les Â«canarisÂ» alÃ©atoires ne fonctionneront pas.  La crÃ©ation de ressources de sÃ©curitÃ© basÃ©es sur l'alÃ©atoire est un sujet distinct et trÃ¨s complexe, nous n'y allons donc pas. <br><br><img src="https://habrastorage.org/webt/1v/iw/s5/1viws5-axjes3hud4zigpabrxas.jpeg"><br><br>  <b>Public:</b> Donc, le canari contient moins de bits qu'une adresse de retour?  Parce que sinon, vous ne pourriez pas simplement vous souvenir de cette adresse et vÃ©rifier si elle a changÃ©? <br><br>  <b>Professeur:</b> voyons.  Vous parlez de ce schÃ©ma lorsque le Â«canariÂ» est situÃ© au-dessus du tampon, et vous voulez dire que le systÃ¨me ne peut pas Ãªtre sÃ»r s'il est impossible de regarder l'adresse de retour et de vÃ©rifier si elle a Ã©tÃ© modifiÃ©e. <br><br><img src="https://habrastorage.org/webt/xg/nf/1m/xgnf1mj-jvjf1g1lu27xu7di4pm.jpeg"><br><br>  Oui et non.  Veuillez noter que si une attaque de dÃ©passement de tampon se produit, tout ce qui se trouve au-dessus sera Ã©crasÃ©, donc cela peut toujours causer des problÃ¨mes.  Mais en gros, si ces choses Ã©taient immuables d'une certaine maniÃ¨re, alors vous pourriez faire quelque chose comme Ã§a.  Mais le problÃ¨me est que dans de nombreux cas, la manipulation de l'adresse de retour est une chose plutÃ´t compliquÃ©e.  Parce que vous pouvez imaginer qu'une fonction spÃ©ciale peut Ãªtre appelÃ©e Ã  partir de diffÃ©rents endroits, etc.  Dans ce cas, nous avons un peu d'avance, et s'il reste du temps Ã  la fin de la confÃ©rence, nous y reviendrons. <br><br>  Ce sont des situations dans lesquelles un Â«canariÂ» peut Ã©chouer.  Il existe d'autres endroits oÃ¹ l'Ã©chec est possible, par exemple, lors de l'attaque du <b>malloc</b> et <b>des</b> fonctions <b>libres</b> .  La fonction malloc alloue un bloc de mÃ©moire d'une certaine taille en octets et renvoie un pointeur au dÃ©but du bloc.  Le contenu du bloc de mÃ©moire allouÃ© n'est pas initialisÃ©, il reste avec des valeurs non dÃ©finies.  Et la fonction <b>libre</b> libÃ¨re de la mÃ©moire prÃ©cÃ©demment allouÃ©e dynamiquement. <br><br>  Il s'agit d'une attaque unique dans le style de C. Voyons ce qui se passe ici.  Imaginez que vous ayez ici deux pointeurs, p et q, pour lesquels nous utilisons <b>malloc pour</b> allouer 1.024 octets de mÃ©moire Ã  chacun de ces pointeurs.  Supposons que nous <b>crÃ©ons la</b> fonction <b>strcpy</b> pour p Ã  partir d'une sorte d'erreur de tampon contrÃ´lÃ©e par un attaquant.  C'est lÃ  que le dÃ©bordement se produit.  Et puis nous exÃ©cutons la commande <b>free q</b> et <b>free p</b> .  C'est du code assez simple, non? <br><br><img src="https://habrastorage.org/webt/dt/o7/rt/dto7rtltvhx7lcdnytlifp7cvzw.jpeg"><br><br>  Nous avons 2 pointeurs pour lesquels nous avons allouÃ© de la mÃ©moire, nous utilisons l'un d'eux pour une certaine fonction, un dÃ©bordement de tampon se produit et nous libÃ©rons la mÃ©moire des deux pointeurs. <br><br>  Supposons que les lignes de mÃ©moire de p et q soient situÃ©es l'une Ã  cÃ´tÃ© de l'autre dans l'espace mÃ©moire.  Dans ce cas, de mauvaises choses peuvent arriver, non?  Parce que la fonction <b>strcpy</b> est utilisÃ©e pour copier le contenu de <b>str2</b> vers <b>str1</b> .  <b>Str2</b> doit Ãªtre un pointeur sur une chaÃ®ne se terminant par zÃ©ro et <b>strcpy</b> renvoie un pointeur sur <b>str1</b> .  Si les lignes <b>str1</b> et <b>str2</b> se chevauchent, le comportement de la fonction <b>strcpy</b> n'est pas dÃ©fini. <br><br>  Par consÃ©quent, la fonction <b>strycpy</b> qui traite la mÃ©moire <b>p</b> peut en mÃªme temps affecter la mÃ©moire allouÃ©e Ã  <b>q</b> .  Et cela peut causer des problÃ¨mes. <br><br>  Il est possible que vous ayez fait quelque chose comme Ã§a dans votre propre code par inadvertance lorsque vous avez utilisÃ© une sorte de type de pointeurs Ã©tranges.  Et tout semble fonctionner, mais lorsque vous devez appeler la fonction <b>gratuite</b> , une telle nuisance se produit.  Et un attaquant peut en profiter, je vais vous expliquer pourquoi cela se produit. <br><br>  Imaginez qu'Ã  l'intÃ©rieur de l'implÃ©mentation des fonctions <b>free</b> et <b>malloc</b> , le bloc en surbrillance ressemble Ã  ceci. <br><br>  Supposons qu'en haut du bloc, il y a des donnÃ©es d'application visibles, et en dessous, nous avons la taille de la variable.  Cette taille n'est pas celle que voit directement l'application, mais une sorte de Â«comptabilitÃ©Â» menÃ©e par <b>free</b> ou <b>malloc</b> , pour que vous connaissiez la taille du tampon mÃ©moire allouÃ©.  Un bloc libre est situÃ© Ã  cÃ´tÃ© du bloc en surbrillance.  Supposons qu'un bloc libre ait des mÃ©tadonnÃ©es qui ressemblent Ã  ceci: nous avons la taille du bloc au-dessus, il y a de l'espace libre en dessous, le pointeur arriÃ¨re et le pointeur avant en dessous.  Et tout en bas du bloc, la taille est Ã  nouveau affichÃ©e. <br><br><img src="https://habrastorage.org/webt/vx/q5/-w/vxq5-wfiisbatr5dzny9xaqd7vk.jpeg"><br><br>  Pourquoi avons-nous 2 pointeurs ici?  Parce que le systÃ¨me d'allocation de mÃ©moire dans ce cas utilise une liste doublement liÃ©e pour suivre la faÃ§on dont les blocs libres sont liÃ©s les uns aux autres.  Par consÃ©quent, lorsque vous sÃ©lectionnez un bloc libre, vous l'excluez de cette liste doublement liÃ©e.  Et puis, lorsque vous le libÃ©rez, vous allez faire de l'arithmÃ©tique pour le pointeur et mettre ces choses en ordre.  AprÃ¨s cela, vous l'ajoutez Ã  cette liste chaÃ®nÃ©e, non? <br><br>  Chaque fois que vous entendez parler de l'arithmÃ©tique des pointeurs, vous devez penser que c'est votre Â«canariÂ».  Parce qu'il y aura beaucoup de problÃ¨mes.  Permettez-moi de vous rappeler que nous avons eu un dÃ©bordement de tampon <b>p</b> .  Si nous supposons que <b>p</b> et <b>q</b> sont cÃ´te Ã  cÃ´te, ou trÃ¨s proches dans l'espace mÃ©moire, il peut finalement arriver que ce dÃ©bordement de tampon puisse Ã©craser certaines donnÃ©es de taille pour le pointeur allouÃ© <b>q</b> - c'est le bas de notre bloc allouÃ©.  Si vous continuez Ã  suivre ma pensÃ©e depuis le tout dÃ©but, votre imagination vous dira oÃ¹ tout commence Ã  mal tourner.  En effet, en substance, ce qui se passe finalement avec ces opÃ©rations est <b>free q</b> et <b>free p</b> - ils regardent ces mÃ©tadonnÃ©es dans le bloc sÃ©lectionnÃ© pour faire toutes les manipulations nÃ©cessaires avec le pointeur. <br><br><img src="https://habrastorage.org/webt/an/mo/ug/anmouglu2dii_itv9qshxsu4qes.jpeg"><br><br>  Autrement dit, Ã  un certain moment de l'exÃ©cution, les fonctions <b>libres</b> vont obtenir un certain pointeur basÃ© sur la valeur de taille: <b>p = get.free.block (size)</b> , et la taille est ce que l'attaquant contrÃ´le, car il a effectuÃ© un dÃ©bordement de tampon, correctement ? <br><br>  Il a fait un tas de calculs arithmÃ©tiques, a regardÃ© la fonction <b>arriÃ¨re</b> et les pointeurs de ce bloc et va maintenant faire quelque chose comme mettre Ã  jour les pointeurs Â«arriÃ¨reÂ» et Â«avantÂ» - ce sont les deux derniÃ¨res lignes. <br><br><img src="https://habrastorage.org/webt/bv/dt/x_/bvdtx_om6lkusoykjinpssiqro8.jpeg"><br><br>  Mais en rÃ©alitÃ©, cela ne devrait pas vous dÃ©ranger.  Ceci est juste un exemple du code qui a lieu dans ce cas.  Mais le fait est qu'en raison de la taille rÃ©Ã©crite par le pirate, il contrÃ´le maintenant ce pointeur, qui passe par la fonction <b>libre</b> .  Et Ã  cause de cela, les deux Ã©tats ici dans les lignes de fond sont en fait des mises Ã  jour de pointeur.  Et puisque l'attaquant a pu contrÃ´ler ce <b>p</b> , il contrÃ´le en fait ces deux pointeurs.  C'est Ã  cet endroit qu'une attaque peut se produire. <br><br>  Par consÃ©quent, lorsque vous exÃ©cutez <b>gratuitement</b> et essayez de faire quelque chose comme combiner ces deux blocs, vous avez une liste doublement liÃ©e.  Parce que si vous avez deux blocs qui entrent en collision et que les deux sont gratuits, vous voulez les combiner en un seul gros bloc. <br><br>  Mais si nous contrÃ´lons la taille, cela signifie que nous contrÃ´lons l'ensemble du processus Ã  partir des quatre lignes ci-dessus.  Cela signifie que si nous comprenons comment fonctionne le dÃ©bordement, nous pouvons Ã©crire des donnÃ©es dans la mÃ©moire de la maniÃ¨re que nous choisissons.  Comme je l'ai dit, de telles choses se produisent souvent avec votre propre code, si vous n'Ãªtes pas intelligent avec un pointeur.  Lorsque vous faites une double erreur libre comme <b>free q</b> et <b>free p</b> ou autre chose, votre fonction se bloque.  Parce que vous avez gÃ¢chÃ© les mÃ©tadonnÃ©es qui vivent dans chacun de ces blocs sÃ©lectionnÃ©s, et Ã  un moment donnÃ©, ce calcul indiquera une sorte de valeur Â«poubelleÂ», aprÃ¨s quoi vous serez Â«mortÂ».  Mais si vous Ãªtes un attaquant, vous pouvez choisir cette valeur et l'utiliser Ã  votre avantage. <br><br>  Passons Ã  une autre approche pour empÃªcher les attaques par dÃ©bordement de tampon.  Cette approche consiste Ã  vÃ©rifier les limites.  Le but de la vÃ©rification des limites est de s'assurer que lorsque vous utilisez un pointeur spÃ©cifique, il ne fera rÃ©fÃ©rence qu'Ã  ce qui est un objet mÃ©moire.  Et ce pointeur se trouve dans les limites autorisÃ©es de cet objet mÃ©moire.  C'est l'idÃ©e principale de la vÃ©rification.       â€”   .  ,    C,      . ,      : ,         ,    ? <br><br>   ,        â€“    .      1024    ,         : <b>char  [1024]</b> , <b>char *y = &amp;  [108].</b> <br><br><img src="https://habrastorage.org/webt/ms/_z/bq/ms_zbqzotz_bt7ya9dpcfsuftxq.jpeg"><br><br>    ?    ?  C'est difficile Ã  dire.       ,  ,     .      ,  ,   -    . <br>       - , ,      ,   .         .  ,    ,      ,   .  ,   ,      .     ,     ,    . <br><br>    ,     ,      <b>struct</b>   <b>union</b> . ,     .     :     <b>integer</b> ,   <b>struct</b> ,      <b>int</b> . <br><br>  ,  <b>union</b>  ,           .        ,    <b>integer</b>  ,   <b>struct</b> ,    . <br><br> ,     ,   -  : <b>int  p: &amp; (u,s,k)</b> ,      :  u,   s,  k. <br><br><img src="https://habrastorage.org/webt/rp/5p/ph/rp5pphcqpcdmmzhfs6tfy6yhtvg.jpeg"><br><br>  ,    ,    ,     ,    .     ,  ,  <b>union</b>   <b>integer</b> ,   <b>struct</b> .  ,       ,    ,           .      . <br><br>      <b>p'</b> ,     <b>p</b> ,   <b>p'</b>      ,    . <br><br><img src="https://habrastorage.org/webt/_j/hb/d1/_jhbd1twr0i0fex98ytm7bdzfu8.jpeg"><br><br> ,     ,       .          , ,   <b>union</b> .   ,   -    -        <b>union</b> , ,  ,      .        ,        ,   X. ,   ,      ,  ,    .   ,    ,   .        . <br><br>         ,        .      ,      <b>p</b>  <b>p'</b> ,     .        . <br><br>     ?        Electric fencing â€“  .    ,    ,     ,    ,      . <br><br><img src="https://habrastorage.org/webt/eg/c5/bp/egc5bpv_lhcf6c6vgy_i5z5_zgo.jpeg"><br><br>       ,    -    ,    .   ,      ,     .    ,   .       ,   ,        ,    . <br><br>   -     C  C++,    ,     ,      .      - ,  ,  -   .      ,    .    ,   Â«Â» â€”  ,          ,   ,     .    ,      ,       . <br><br>       ,         guard page â€“ !  ,   . <br><br> 59:00  <br><br> : <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> MIT Â«  Â».  2: Â«  Â»,  2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/r4KjHEgg9Wg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La version complÃ¨te du cours est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br> ,    .    ?  Vous voulez voir des matÃ©riaux plus intÃ©ressants?       , <b>30%        entry-level ,      :</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps  $20     ?</a> (   RAID1  RAID10,  24    40GB DDR4). <br><br> <b>Dell R730xd  2  ?</b>    <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2  Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100   $249</a>    !</b>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   .  c   Dell R730xd 5-2650 v4  9000   ?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416047/">https://habr.com/ru/post/fr416047/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416029/index.html">Ordinateur liquide: capture d'ions dans le graphÃ¨ne</a></li>
<li><a href="../fr416035/index.html">Scanner 3D dentaire Shining 3D Autoscan DS EX (Unboxing) by 3Dtool</a></li>
<li><a href="../fr416037/index.html">DÃ©marrage de la journÃ©e (avril-juin 2018)</a></li>
<li><a href="../fr416043/index.html">Les pays en dÃ©veloppement explorent de plus en plus l'espace.</a></li>
<li><a href="../fr416045/index.html">Onduleur en ligne APC Smart-UPS SRC1KI: la fiabilitÃ© avant tout</a></li>
<li><a href="../fr416049/index.html">Codec AV1 nouvelle gÃ©nÃ©ration: filtre de correction directionnelle CDEF</a></li>
<li><a href="../fr416051/index.html">Mitap d'Ã©tÃ© Apache Ignite Ã  Moscou</a></li>
<li><a href="../fr416053/index.html">Modulation d'amplitude d'un signal arbitraire</a></li>
<li><a href="../fr416055/index.html">Affectation et prise en charge du nom de domaine complet du serveur 3QX</a></li>
<li><a href="../fr416059/index.html">Mobio s'entretient avec Daniil Shuleiko (Yandex.Taxi) sur la fusion avec Uber, le marchÃ© des taxis et la concurrence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>