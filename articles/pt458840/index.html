<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèΩ ü•ß üë© Como perfuramos o grande firewall chin√™s (parte 2) üì∑ üíÉ üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi 


 Nikita est√° com voc√™ novamente - um engenheiro de sistema da SEMrush . E com este artigo, continuo a hist√≥ria de como criamos uma solu√ß√£o para ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como perfuramos o grande firewall chin√™s (parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/semrush/blog/458840/"><p>  Oi </p><br><p>  Nikita est√° com voc√™ novamente - um engenheiro de sistema da <strong>SEMrush</strong> .  E com este artigo, continuo a hist√≥ria de como criamos uma solu√ß√£o para contornar o <em>firewall chin√™s</em> para o nosso servi√ßo semrush.com. </p><br><p>  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">parte anterior,</a> eu disse: </p><br><ul><li>  que problemas aparecem depois que uma decis√£o √© tomada "Precisamos fazer nosso servi√ßo funcionar na China" </li><li>  que problemas a Internet chinesa tem </li><li>  por que preciso de uma licen√ßa ICP </li><li>  como e por que decidimos testar nossas bancadas de teste usando o ponto de captura </li><li>  qual foi o resultado de nossa primeira solu√ß√£o baseada na Cloudflare China Network </li><li>  como encontramos um bug no DNS Cloudflare </li></ul><br><img src="https://habrastorage.org/webt/c8/e0/wt/c8e0wt5ps6j4bkc8glimogfgtxg.png"><br><p>  Esta parte √© a mais interessante, na minha opini√£o, porque se concentra em implementa√ß√µes t√©cnicas espec√≠ficas de prepara√ß√£o.  E come√ßaremos, ou melhor, continuaremos com o <strong>Alibaba Cloud</strong> . </p><a name="habracut"></a><br><h2 id="alibaba-cloud">  Nuvem Alibaba </h2><br><p>  <strong>O Alibaba Cloud</strong> √© um provedor de nuvem bastante grande, que possui todos os servi√ßos que lhe permitem honestamente se chamar provedor de nuvem.  √â bom que eles tenham a oportunidade de se registrar com usu√°rios estrangeiros e que a maior parte do site tenha sido traduzida para o ingl√™s (para a China √© um luxo).  Nesta nuvem, voc√™ pode trabalhar com muitas regi√µes do mundo, na China continental e no Oceano da √Åsia (Hong Kong, Taiwan etc.). </p><br><h3 id="ipsec">  IPSEC </h3><br><p>  Come√ßou com a geografia.  Como nosso site de teste estava localizado no Google Cloud, tivemos que "vincular" o Alibaba Cloud ao GCP, por isso abrimos uma lista de locais onde o Google est√° presente.  Naquele momento, eles ainda n√£o tinham seu pr√≥prio data center em Hong Kong. <br>  A regi√£o mais pr√≥xima era a <strong>√Åsia-leste1</strong> (Taiwan).  Ali tinha <strong>cn-shenzhen</strong> (Shenzhen) como a regi√£o mais pr√≥xima da China continental a Taiwan. </p><br><p>  Usando <strong>terraform, eles</strong> descreveram e elevaram toda a infraestrutura no GCP e Ali.  O t√∫nel de 100 Mbps entre as nuvens subiu quase instantaneamente.  No lado de Shenzhen e Taiwan, eles criaram m√°quinas virtuais de proxy.  Em Shenzhen, o tr√°fego do usu√°rio √© encerrado, transferido por proxy para Taiwan e, a partir da√≠, √© direcionado diretamente para o IP externo de nosso servi√ßo no <strong>leste do pa√≠s</strong> (costa leste dos EUA).  Fa√ßa ping entre os <strong>virtuais no</strong> t√∫nel de <strong>24ms</strong> , o que n√£o √© t√£o ruim. </p><br><p>  Ao mesmo tempo, colocamos uma zona de teste no <strong>Alibaba Cloud DNS</strong> .  Ap√≥s delegar a zona ao NS Ali, o tempo de resolu√ß√£o diminuiu de 470 ms para <strong>50 ms</strong> .  Antes disso, a zona tamb√©m estava em Cloudlfare. </p><br><p> Paralelamente ao t√∫nel para o <em>leste asi√°tico1</em> , outro t√∫nel foi erguido de Shenzhen diretamente para <em>o leste4</em> .  L√°, eles criaram mais m√°quinas virtuais de proxy e come√ßaram a medir as duas solu√ß√µes, roteando o tr√°fego de teste usando Cookies ou DNS.  A bancada de testes √© descrita esquematicamente na figura a seguir: </p><br><img src="https://habrastorage.org/webt/r8/c4/gv/r8c4gvhj7_joemea0hznmvo5gxk.png"><br><p>  A lat√™ncia para t√∫neis √© a seguinte: <br>  <em>Ali cn-shenzhen &lt;--&gt; GCP asia-east1 - 24ms</em> <em><br></em>  <em>Ali cn-shenzhen &lt;--&gt; GCP us-east4 - 200ms</em> </p><br><p>  Os testes do navegador Catchpoint relataram excelentes melhorias de desempenho. </p><br><img src="https://habrastorage.org/webt/e0/ku/am/e0kuamjpkkcbj737036tyuirbuk.png"><br><p>  Compare os resultados dos testes para as duas solu√ß√µes: </p><br><div class="scrollable-table"><table><thead><tr><th>  Solu√ß√£o </th><th>  Upime </th><th>  Mediana </th><th>  Percentil 75 </th><th>  Percentil 95 </th></tr></thead><tbody><tr><td>  Cloudflare </td><td>  86,6 </td><td>  18 anos </td><td>  30s </td><td>  Anos 60 </td></tr><tr><td>  <strong>IPsec</strong> </td><td>  <strong>99,79</strong> </td><td>  <strong>18 anos</strong> </td><td>  <strong>21s</strong> </td><td>  <strong>30s</strong> </td></tr></tbody></table></div><br><p>  Estes s√£o os dados da solu√ß√£o usando o t√∫nel IPSEC na <b>√Åsia-Leste1</b> .  Atrav√©s de n√≥s-leste4, os resultados foram piores e houve mais erros, ent√£o n√£o vou dar os resultados. </p><br><p>  De acordo com os resultados desse teste, dois t√∫neis, um dos quais √© terminado na regi√£o mais pr√≥xima da China e o outro no destino final, ficou claro que √© importante "emergir" do firewall chin√™s o mais r√°pido poss√≠vel e usar redes r√°pidas (provedores CDN) , provedores de nuvem etc.).  N√£o √© necess√°rio tentar um toque para atravessar o firewall e chegar ao destino.  Este n√£o √© o caminho mais r√°pido. </p><br><p>  Em geral, os resultados n√£o s√£o ruins, no entanto, o semrush.com tem uma mediana de 8,8s e um percentil 75 de 9,4s (no mesmo teste). <br>  E antes de prosseguir, gostaria de fazer uma digress√£o. </p><br><h2 id="liricheskoe-otstuplenie">  Digress√£o l√≠rica </h2><br><p>  Depois que o usu√°rio visita o site <em>www.semrushchina.cn</em> , que √© resolvido pelos servidores DNS chineses ‚Äúr√°pidos‚Äù, a solicita√ß√£o HTTP passa por nossa solu√ß√£o r√°pida.  A resposta √© retornada da mesma maneira, mas em todos os scripts JS, p√°ginas HTML e outros elementos da p√°gina da web, o dom√≠nio <em>semrush.com √© indicado</em> para recursos adicionais que devem ser carregados ao renderizar a p√°gina.  Ou seja, o cliente resolve o registro ‚Äúprincipal‚Äù do <em>www.semrushchina.c</em> ne entra no t√∫nel r√°pido, recebe rapidamente uma resposta - uma p√°gina HTML que afirma: </p><br><ul><li>  baixe esses e esses js de sso.semrush.com, </li><li>  Pegue arquivos CSS de cdn.semrush.com, </li><li>  e tire mais fotos de dab.semrush.com </li><li>  e assim por diante. </li></ul><br><p>  O navegador come√ßa a acessar a Internet "externa" para esses recursos, cada vez que passa por um firewall, devorando o tempo de resposta. </p><br><p>  Mas no teste anterior, os resultados s√£o apresentados quando n√£o h√° recursos <em>semrush.com</em> na p√°gina, apenas <em>semrushchina.cn</em> e * .semrushchina.cn s√£o resolvidos para o endere√ßo da m√°quina virtual em Shenzhen para entrar no t√∫nel mais tarde. </p><br><p>  Somente dessa maneira, jogando o m√°ximo poss√≠vel de todo o tr√°fego por sua decis√£o de passar rapidamente pelo firewall chin√™s, voc√™ poder√° obter velocidades e indicadores aceit√°veis ‚Äã‚Äãda disponibilidade do site, al√©m de resultados honestos das solu√ß√µes de teste. <br>  Fizemos isso sem uma √∫nica edi√ß√£o de c√≥digo ao lado dos produtos da equipe. </p><br><h3 id="subfilter">  Subfiltro </h3><br><p>  A solu√ß√£o nasceu quase imediatamente depois que esse problema apareceu.  Precis√°vamos de <strong>PoC</strong> (Prova de conceito) para que nossas solu√ß√µes de passagem de firewall realmente funcionassem bem.  Para fazer isso, voc√™ deve maximizar todo o tr√°fego para o site nesta solu√ß√£o.  E n√≥s aplicamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://nginx.org/ru/docs/http/ngx_">subfiltro</a> no nginx. </p><br><p>  <b>Subfiltro</b> √© um m√≥dulo bastante simples no nginx que permite alterar uma linha no corpo de uma resposta para outra linha.  Ent√£o, alteramos todas as ocorr√™ncias de <em>semrush.com</em> para <em>semrushchina.cn</em> em todas as respostas. </p><br><p>  E ... isso n√£o funcionou, porque recebemos conte√∫do compactado dos back-ends; portanto, o subfiltro n√£o conseguiu encontrar a linha necess√°ria.  Eu tive que adicionar outro servidor local ao nginx, que expandiu a resposta e a transmitiu para o pr√≥ximo servidor local, que j√° estava envolvido na substitui√ß√£o, compacta√ß√£o e entrega de linha para a pr√≥xima cadeia de proxies. </p><br><img src="https://habrastorage.org/webt/pb/6m/jd/pb6mjdouldlxlm6hr1ilz9dpck0.png"><br><p>  Como resultado, onde o cliente receberia <strong>&lt;subdomain&gt; .semrush.com</strong> , ele receberia <strong>&lt;subdomain&gt; .semrushchina.cn</strong> e obedeceria a nossa decis√£o. </p><br><p>  No entanto, n√£o basta alterar o dom√≠nio em uma dire√ß√£o, porque os back-end ainda esperam semrush.com em solicita√ß√µes subsequentes do cliente.  Assim, no mesmo servidor em que a substitui√ß√£o √© feita em uma dire√ß√£o, usando uma express√£o regular simples, obtemos o subdom√≠nio da solicita√ß√£o e, em seguida, fazemos <i>proxy_pass</i> com a vari√°vel <i>$ host</i> definida em <b>$ subdomain.semrush.com</b> .  Pode parecer confuso, mas funciona.  E isso funciona bem.  Para dom√≠nios individuais que exigem l√≥gica diferente, eles simplesmente criam seus blocos de servidores e fazem uma configura√ß√£o separada.  Abaixo est√£o as configura√ß√µes reduzidas do nginx para maior clareza e demonstra√ß√£o desse esquema. </p><br><p>  A seguinte configura√ß√£o processa todas as solicita√ß√µes da China para <i>.semrushchina.cn:</i> <br></p><pre><code class="plaintext hljs">listen 80; server_name ~^(?&lt;subdomain&gt;[\w\-]+)\.semrushchina.cn$; sub_filter '.semrush.com' '.semrushchina.cn'; sub_filter_last_modified on; sub_filter_once off; sub_filter_types *; gzip on; gzip_proxied any; gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript; location / { proxy_pass http://127.0.0.1:8083; proxy_set_header Accept-Encoding ""; proxy_set_header Host $subdomain.semrush.com; proxy_set_header X-Accept-Encoding $http_accept_encoding; } }</code> </pre> <br><p>  Essa configura√ß√£o est√° em proxy para o <i>host local</i> na porta 83 e aguarda a seguinte configura√ß√£o: </p><br><pre> <code class="plaintext hljs"> listen 127.0.0.1:8083; server_name *.semrush.com; location / { resolver 8.8.8.8 ipv6=off; gunzip on; proxy_pass https://$host; proxy_set_header Accept-Encoding gzip; } }</code> </pre> <br><p>  Novamente, essas s√£o configura√ß√µes cortadas. </p><br><p>  Algo assim.  Pode parecer complicado, mas est√° em palavras.  Na verdade, tudo √© mais f√°cil do que nabo cozido no vapor :) </p><br><h3 id="konec-liricheskogo-otstupleniya">  O fim da digress√£o l√≠rica </h3><br><p>  Por um tempo, ficamos felizes porque o mito da queda dos t√∫neis IPSEC n√£o foi confirmado.  Mas ent√£o os t√∫neis come√ßaram a cair.  V√°rias vezes ao dia por v√°rios minutos.  Um pouco, mas n√£o nos convinha.  Como os dois t√∫neis foram terminados no lado Ali no mesmo roteador, decidimos que talvez esse seja um problema regional e precisamos aumentar a regi√£o de backup. </p><br><p>  Pegou.  Os t√∫neis come√ßaram a cair em momentos diferentes, mas tivemos um failover ajustado no n√≠vel upstream no nginx.  Mas ent√£o os t√∫neis come√ßaram a cair na mesma √©poca :) E, novamente, come√ßaram o 502 e o 504. O tempo de atividade come√ßou a se deteriorar, ent√£o come√ßamos a elaborar uma op√ß√£o com o <b>Alibaba CEN</b> (Cloud Enterprise Network). </p><br><h2 id="cen">  Cen </h2><br><p>  <b>O CEN</b> √© a conectividade de duas VPCs de diferentes regi√µes na Nuvem Alibaba, ou seja, voc√™ pode conectar redes privadas de qualquer regi√£o na nuvem entre si.  E o mais importante: esse canal possui um <em>SLA</em> bastante rigoroso.  √â muito est√°vel, tanto na velocidade quanto no tempo de atividade.  Mas nunca √© t√£o simples: </p><br><ul><li>  √© MUITO dif√≠cil conseguir se voc√™ n√£o √© um cidad√£o chin√™s ou uma entidade legal, </li><li>  voc√™ precisa pagar por cada megabit de largura de banda. </li></ul><br><p>  Tendo a oportunidade de conectar <em>a China continental</em> e o <em>exterior</em> , criamos um CEN entre duas regi√µes Ali: <b>cn-shenzhen</b> e <b>us-east-1</b> (o ponto mais pr√≥ximo de us-east4).  Em Ali <i>us-east-1, eles</i> criaram outra m√°quina virtual para ter outro <em>salto</em> . </p><br><p>  Aconteceu assim: </p><br><img src="https://habrastorage.org/webt/s5/0s/qs/s50sqsjxzjx0r1fqyx-cjsjkuvq.png"><br><p>  Resultados dos testes do navegador abaixo: </p><br><img src="https://habrastorage.org/webt/9b/p0/oq/9bp0oqtuludsve8g5tlnqfsa75k.png"><br><div class="scrollable-table"><table><thead><tr><th>  Solu√ß√£o </th><th>  Upime </th><th>  Mediana </th><th>  Percentil 75 </th><th>  Percentil 95 </th></tr></thead><tbody><tr><td>  Cloudflare </td><td>  86,6 </td><td>  18 anos </td><td>  30s </td><td>  Anos 60 </td></tr><tr><td>  IPsec </td><td>  99,79 </td><td>  18 anos </td><td>  21s </td><td>  30s </td></tr><tr><td>  <b>Cen</b> </td><td>  <b>99,75</b> </td><td>  <b>16s</b> </td><td>  <b>21s</b> </td><td>  <b>27s</b> </td></tr></tbody></table></div><br><p>  O desempenho √© um pouco melhor que o IPSEC.  Mas, com o IPSEC, √© poss√≠vel fazer o download potencialmente a uma velocidade de 100 Mbps e, atrav√©s do CEN, apenas a uma velocidade de 5 Mbps e mais caro. </p><br><p>  O h√≠brido implora, certo?  Combine velocidade IPSEC e estabilidade CEN. </p><br><p>  Foi o que fizemos ao permitir o tr√°fego atrav√©s do IPSEC e do CEN no caso de uma falha no t√∫nel do IPSEC.  O tempo de atividade se tornou muito maior, mas a velocidade de carregamento do site √© baixa.  Ent√£o desenhei todos os esquemas que j√° usamos e testamos e decidi tentar adicionar um pouco mais de GCP a esse esquema, ou seja, <strong>GLB</strong> . </p><br><h2 id="glb">  GLB </h2><br><p>  <strong>GLB</strong> √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Global Load Balancer</a> (ou Google Cloud Load Balancer).  Ela tem uma vantagem importante: no contexto da CDN, ela possui <strong>anycast IP</strong> , que permite rotear o tr√°fego para o datacenter mais pr√≥ximo do cliente, gra√ßas ao qual o tr√°fego chega √† rede r√°pida do Google com mais rapidez e menos via Internet "normal". </p><br><p>  Sem pensar duas vezes, aumentamos o <em>HTTP / HTTPS LB</em> para o GCP e colocamos nossas m√°quinas virtuais no back-end do subfiltro. </p><br><p>  Havia v√°rios esquemas: </p><br><ul><li>  Use o <em>Cloudflare China Network</em> , mas desta vez a Origin especifica o <strong>GLB IP</strong> global. </li><li>  Encerre os clientes no <em>cn-shenzhen</em> e, a partir da√≠, o tr√°fego proxy imediatamente para o <strong>GLB</strong> . </li><li>  V√° direto da China para o <strong>GLB</strong> . </li><li>  Encerrar clientes em <em>cn-shenzhen</em> , de l√° para proxy para <em>asia-east1</em> via IPSEC (em <em>us-east4</em> via CEN), de l√° para GLB (calmamente, haver√° uma imagem e explica√ß√£o abaixo) </li></ul><br><p>  Testamos todas essas op√ß√µes e mais algumas h√≠bridas: </p><br><ul><li>  <strong>Cloudflare + GLB</strong> </li></ul><br><img src="https://habrastorage.org/webt/aa/-z/5c/aa-z5cpge5r_2qazfvcsvne5loi.png"><br><p>  Esse esquema n√£o nos conv√©m para uptime e erros de DNS.  Mas o teste foi realizado antes de corrigir o erro por parte do CF, talvez agora seja melhor (no entanto, isso n√£o exclui o tempo limite do HTTP). </p><br><ul><li>  <strong>Ali + GLB</strong> </li></ul><br><img src="https://habrastorage.org/webt/mm/ef/id/mmefid6fj_5fwsbvtjwealb6wnu.png"><br><p>  Esse esquema tamb√©m n√£o nos convinha para o tempo de atividade, uma vez que o GLB costumava sair do upstream devido √† impossibilidade de conex√£o em um tempo ou tempo aceit√°vel, porque para um servidor dentro da China, o endere√ßo GLB permanece fora e, portanto, atr√°s do firewall chin√™s.  A m√°gica n√£o aconteceu. </p><br><ul><li>  <strong>Apenas GLB</strong> </li></ul><br><img src="https://habrastorage.org/webt/yg/l9/jc/ygl9jcr4ugsqil_ry6zf4kj4dhy.png"><br><p>  Uma variante semelhante √† anterior, s√≥ que n√£o utilizava servidores na pr√≥pria China: o tr√°fego foi imediatamente para GLB (registros DNS alterados).  Consequentemente, os resultados n√£o foram satisfat√≥rios, pois os clientes chineses comuns que usam os servi√ßos de provedores comuns de Internet t√™m uma situa√ß√£o muito pior ao passar pelo firewall do que a Ali Cloud. </p><br><ul><li>  <strong>Shenzhen -&gt; (CEN / IPSEC) -&gt; Proxy -&gt; GLB</strong> </li></ul><br><img src="https://habrastorage.org/webt/9f/v_/lw/9fv_lwec8yi4-rmuubqypun5mas.png"><br><p>  Aqui decidimos usar a melhor de todas as solu√ß√µes: </p><br><ul><li>  estabilidade e SLA garantido do CEN </li><li>  alta velocidade da IPSEC </li><li>  Rede "r√°pida" do Google e seu anycast. </li></ul><br><p>  O esquema √© mais ou menos assim: o tr√°fego do usu√°rio √© encerrado em uma m√°quina virtual em <em>ch-shenzhen</em> .  As configura√ß√µes de upstream do Nginx s√£o configuradas l√°, algumas das quais se referem a servidores IP privados localizados na outra extremidade do t√∫nel IPSEC e algumas conex√µes upstream a endere√ßos de servidores privados do outro lado do CEN.  O IPSEC foi configurado para a <em>regi√£o √Åsia-Leste1</em> no GCP (era a regi√£o mais pr√≥xima da China no momento em que a solu√ß√£o foi criada. Agora o GCP tamb√©m est√° presente em Hong Kong).  CEN - para a <em>regi√£o leste-leste1</em> em Ali Cloud. </p><br><p>  Al√©m disso, o tr√°fego de ambas as extremidades foi direcionado para <strong>anycast IP GLB</strong> , ou seja, para o ponto mais pr√≥ximo da presen√ßa do Google, e passou por suas redes para a <em>regi√£o leste-leste4</em> do GCP, na qual havia m√°quinas virtuais substitutas (com subfiltro no nginx). </p><br><p>  Essa solu√ß√£o h√≠brida, como esper√°vamos, nos permitiu tirar proveito de cada tecnologia.  Em geral, o tr√°fego passa pelo IPSEC r√°pido, mas se os problemas come√ßarem, lan√ßamos esses servidores rapidamente e por alguns minutos e enviamos o tr√°fego pelo CEN apenas at√© o t√∫nel se estabilizar. </p><br><p>  Tendo implementado a quarta solu√ß√£o da lista acima, alcan√ßamos o que quer√≠amos e o que os neg√≥cios exigiam de n√≥s naquele momento. </p><br><p>  Resultados de teste do navegador para a nova solu√ß√£o em compara√ß√£o com os anteriores: </p><br><div class="scrollable-table"><table><thead><tr><th>  Solu√ß√£o </th><th>  Upime </th><th>  Mediana </th><th>  Percentil 75 </th><th>  Percentil 95 </th></tr></thead><tbody><tr><td>  Cloudflare </td><td>  86,6 </td><td>  18 anos </td><td>  30s </td><td>  Anos 60 </td></tr><tr><td>  IPsec </td><td>  99,79 </td><td>  18 anos </td><td>  21s </td><td>  30s </td></tr><tr><td>  Cen </td><td>  99,75 </td><td>  16s </td><td>  21s </td><td>  27s </td></tr><tr><td>  <strong>CEN / IPsec + GLB</strong> </td><td>  <strong>99,79</strong> </td><td>  <strong>13s</strong> </td><td>  <strong>16s</strong> </td><td>  <strong>25s</strong> </td></tr></tbody></table></div><br><h2 id="cdn">  Cdn </h2><br><p>  Tudo est√° bom na solu√ß√£o que implementamos, mas n√£o h√° CDN que possa acelerar o tr√°fego no n√≠vel das regi√µes e at√© das cidades.  Em teoria, isso deve acelerar o site para os usu√°rios finais atrav√©s do uso de canais de comunica√ß√£o r√°pidos do provedor de CDN.  E pensamos nisso o tempo todo.  E agora chegou a hora da pr√≥xima itera√ß√£o do projeto: pesquisando e testando fornecedores de CDN na China. </p><br><p>  E vou falar sobre isso na pr√≥xima parte final :) </p><br><h3 id="vse-chasti">  Todas as pe√ßas </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458840/">https://habr.com/ru/post/pt458840/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458828/index.html">Por que, por que e quando usar o ValueTask</a></li>
<li><a href="../pt458830/index.html">Webinars da Dell Technologies: todos os detalhes do nosso tutorial</a></li>
<li><a href="../pt458832/index.html">Cinco alunos e tr√™s lojas de valores-chave distribu√≠dos</a></li>
<li><a href="../pt458834/index.html">Lado da personalidade de Paul Allen, sobre o qual poucas pessoas sabiam como eu gostaria</a></li>
<li><a href="../pt458836/index.html">√çndice Borsch. Uma abordagem sistem√°tica para avaliar, comparar, determinar a rela√ß√£o pre√ßo / qualidade</a></li>
<li><a href="../pt458842/index.html">Paci√™ncia e trabalho extrair√£o o texto inteiro</a></li>
<li><a href="../pt458844/index.html">Destrui√ß√£o de silo atrav√©s da abordagem de adapta√ß√£o VeriSM ‚Ñ¢</a></li>
<li><a href="../pt458846/index.html">Como desenvolver outro jogo de plataformas usando o Unity. Outro tutorial</a></li>
<li><a href="../pt458848/index.html">Libera√ß√£o Rust 1.36.0: caracter√≠stica futura, estabiliza√ß√£o de aloca√ß√£o e MaybeUninit <T></a></li>
<li><a href="../pt458850/index.html">Aprenda ingl√™s de maneira barata e eficiente. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>