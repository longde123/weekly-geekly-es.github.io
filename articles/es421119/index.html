<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèûÔ∏è üôÜ üéê Rastrillo submarino Desarrollo de SmartTV üë®üèΩ‚Äçüé® üë©üèΩ‚Äçüè≠ üöû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! 

 Durante mucho tiempo fue una idea escribir un art√≠culo sobre los problemas del desarrollo de SmartTV, pero a medida que nos sumergimos e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rastrillo submarino Desarrollo de SmartTV</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421119/"><img src="https://habrastorage.org/webt/iy/2o/po/iy2opoxjxlendozajpei-1xwvnc.png" alt="imagen"><br><br>  Hola Habr! <br><br>  Durante mucho tiempo fue una idea escribir un art√≠culo sobre los problemas del desarrollo de SmartTV, pero a medida que nos sumergimos en esta √°rea, inventamos nuestra propia bicicleta, que nos ayud√≥ a resolver estos problemas.  Por lo tanto, en este art√≠culo, no solo destacaremos algunos de los aspectos problem√°ticos del desarrollo de SmartTV, sino que tambi√©n hablaremos sobre c√≥mo resolverlos utilizando el <s>pr√≥ximo</s> nuevo marco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PureQML</a> . <br><br>  Todos los que est√©n interesados ‚Äã‚Äãen este tema o simplemente tengan curiosidad por ver el nuevo marco, que tambi√©n puede estar en SmartTV, les pedimos un gato. <br><a name="habracut"></a><br><h2>  El zoologico </h2><br>  Para empezar, en la naturaleza hay muchas plataformas SmartTV y muchas de ellas est√°n dise√±adas para lanzar aplicaciones web.  Esto puede dar la ilusi√≥n de que es suficiente escribir el c√≥digo una vez y usarlo en todas las plataformas.  Pero en realidad, todas las plataformas tienen algunas diferencias que deben tenerse en cuenta.  Entre estas caracter√≠sticas, se pueden distinguir las siguientes: <br><br><ul><li> <i>Manejo de prensas de bot√≥n de control remoto</i> .  No todos los fabricantes usan los mismos c√≥digos de tecla para los mismos botones de control remoto.  Como ejemplo, puede comparar c√≥digos clave para la plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">orsay</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">webos</a> .  Para tizen, es necesario <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">registrar</a> expl√≠citamente algunos botones para uso futuro. </li><li>  <i>Reproductor de video</i>  Muchas plataformas admiten el reproductor de video html5, pero, por ejemplo, tizen usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AVPlay</a> y, por lo tanto, usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">su propia API</a> para trabajar con el reproductor nativo. </li><li>  <i>Informaci√≥n sobre el dispositivo</i> .  La obtenci√≥n de informaci√≥n sobre el dispositivo en cada plataforma tambi√©n se implementa de manera diferente, en NetCast se crea un objeto especial con un id-shnik especial, en otros casos, se utilizan m√©todos espec√≠ficos para cada plataforma. </li><li>  <i>Enfoque</i>  La aplicaci√≥n SmartTV se centra principalmente en el control remoto y, por lo tanto, UI / UX debe implementarse teniendo en cuenta el uso de botones de navegaci√≥n: arriba, abajo, derecha, izquierda, OK y atr√°s, mientras que es importante no perder el foco e indicar claramente d√≥nde est√° ahora . </li></ul><br><h2>  La documentaci√≥n </h2><br>  Adem√°s de la variedad de plataformas y documentaci√≥n para estas plataformas, el problema es que algunos fabricantes lanzan nuevas versiones que, a veces, pierden compatibilidad en algunos lugares, o incluso cambian a nuevas plataformas que son b√°sicamente incompatibles con las anteriores (como la transici√≥n LG con NetCast en WebOS).  Al mismo tiempo, existe una promoci√≥n intensiva de nuevas plataformas, lo que hace que sea dif√≠cil encontrar informaci√≥n en plataformas antiguas, ya que algunas secciones de la documentaci√≥n se eliminan o transfieren, por lo que a veces puede encontrar enlaces muertos en consejos sobre formularios. <br><br><h2>  Instalaci√≥n </h2><br>  Nuevamente, debido a la variedad de plataformas, el proceso de instalaci√≥n de aplicaciones en los dispositivos de depuraci√≥n tambi√©n es diferente.  Por ejemplo, para AndroidTV puede usar adb, tizen tiene su propio an√°logo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sdb</a> , para scripts especiales de WebI CLI, etc.  Cada una de estas herramientas necesita ser instalada y configurada.  Aqu√≠ puede agregar el problema de las actualizaciones intensivas de la plataforma, con la actualizaci√≥n adjunta del SDK e IDE.  Un ejemplo de tal problema es el caso de Tizen Studio.  Despu√©s de descargar la √∫ltima versi√≥n, puede instalar aplicaciones solo en televisores TV-samsung tv4, mientras que no hay una manera f√°cil de instalar la aplicaci√≥n en versiones anteriores de televisores, que son de naturaleza mucho m√°s grande (si de repente encuentra este problema, vea el <a href="">enlace</a> ) e incluso despu√©s baile exitoso con una pandereta, el IDE pierde la capacidad de instalar aplicaciones en televisores TV-samsung tv4 ¬Ø \ _ („ÉÑ) _ / ¬Ø <br><br><h2>  Moderaci√≥n </h2><br>  Para publicar la aplicaci√≥n, es necesario pasar la moderaci√≥n del fabricante respectivo, y cada uno de ellos tiene sus propias reglas y caracter√≠sticas.  En este caso, debes ser paciente, porque  las solicitudes se pueden verificar durante m√°s de una semana y esto debe tenerse en cuenta al planificar los plazos, es decir  la aplicaci√≥n debe publicarse mucho antes del lanzamiento (si de repente le preocupa que las aplicaciones aparezcan antes de cualquier evento de marketing, no tenga miedo, al enviar con moderaci√≥n hay un punto en el que puede especificar una fecha antes de que la aplicaci√≥n no se publique). <br><br>  Tambi√©n debe estar preparado para el hecho de que la causa del rechazo puede ser cualquier cosa, por ejemplo, una respuesta err√≥nea en la lista de verificaci√≥n autom√°tica (una lista de preguntas que el desarrollador debe responder antes de enviar la aplicaci√≥n, por ejemplo: "¬øsu aplicaci√≥n contiene virus", etc.) o debido a un malentendido en la descripci√≥n de la aplicaci√≥n UX.  Puede llegar a situaciones divertidas, por ejemplo, hubo un caso en el que cerraron una aplicaci√≥n con canales de TV en streaming, porque tomaron una l√≠nea progresiva en el aire de uno de los canales como un artefacto de gr√°ficos, tom√°ndolo como parte de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OSD</a> . <br><br><h2>  AndroidTV y tvOS </h2><br>  Tambi√©n debemos mencionar AndroidTV y tvOS, como  Estas plataformas no admiten el lanzamiento expl√≠cito de aplicaciones web.  Para tvOS, se usa su propio lenguaje similar al xml: TVML, y lo que es especialmente interesante, puede componer este idioma, pero solo dentro de un cierto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conjunto de plantillas</a> , es bastante dif√≠cil hacer algo completamente arbitrario.  Con la ayuda de tales restricciones, todas las aplicaciones para tvOS se ven obligadas a adherirse a una sola gu√≠a de estilo, y si no se aleja de ella, entonces el proceso de escribir la aplicaci√≥n ser√° simple. <br><br>  En Android, la situaci√≥n es mejor, porque  Hay formas de ejecutar aplicaciones web, hablaremos de una de ellas un poco m√°s adelante. <br><br><h2>  Como hacemos eso </h2><br>  Frente a la realidad, primero estudiamos las soluciones existentes, pero desafortunadamente no me gust√≥ nada universal y conveniente: el smartbox es inconveniente, la reacci√≥n no resuelve problemas espec√≠ficos de TV, como, de hecho, otros marcos que est√°n m√°s orientados a la web. <br><br>  Ahora veamos c√≥mo trata PureQML con esto (sobre lo que ya escribimos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ).  En resumen, este es un marco js que permite describir declarativamente las IU en un lenguaje similar a qml, lo que ayuda a crear r√°pidamente aplicaciones que abstraen de html, css y otras cosas.  Para resolver problemas espec√≠ficos de SmartTV, se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribi√≥ un</a> m√≥dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">qmlcore-tv</a> separado bajo la licencia CC-BY-4.0, que admite las siguientes plataformas: <br><br><ul><li>  LG webOS </li><li>  LG NetCast </li><li>  Samsung Tizen </li><li>  Samsung Orsay </li><li>  Opera TV </li><li>  Hisense </li><li>  AndroidTV </li></ul><br>  Y as√≠ es como resuelve los problemas anteriores: <br><br><ul><li>  <i>Procesamiento de botones de control remoto</i> .  Para las plataformas compatibles, se implementa la asignaci√≥n de c√≥digos clave y en el c√≥digo del cliente es suficiente simplemente escribir el controlador deseado, por ejemplo, para el bot√≥n de funci√≥n rojo del control remoto, puede escribir un controlador: <br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">onRedPressed</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }</code> </pre> </li><li>  <i>Reproductor de video</i>  Para trabajar con el reproductor, hay un componente especial de VideoPlayer que describe la interfaz para trabajar con video, y la implementaci√≥n de la plataforma se selecciona para la plataforma de destino en la etapa de construcci√≥n.  El siguiente es un ejemplo de uso: reproducir un video en bucle usando un enlace de pantalla completa: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">VideoPlayer</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">autoPlay</span></span>: true; <span class="hljs-attribute"><span class="hljs-attribute">source</span></span>: <span class="hljs-string"><span class="hljs-string">"http://media.w3.org/2010/05/bunny/movie.mp4"</span></span>; }</code> </pre></li><li>  <i>Informaci√≥n sobre el dispositivo</i> .  Para obtener informaci√≥n sobre el dispositivo, es suficiente usar el control del dispositivo, por analog√≠a con el reproductor, describe la interfaz y la implementaci√≥n se toma para la plataforma ensamblada.  El siguiente es un c√≥digo de ejemplo para mostrar texto con la ID del dispositivo en la pantalla: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Device</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: device; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">Text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text</span></span>: ‚ÄúDeviceID: ‚Äù + device.deviceId; }</code> </pre></li><li>  <i>Enfoque</i>  La caracter√≠stica b√°sica del marco en s√≠ ya ayuda aqu√≠, que en un momento hay un solo foco, que existe y no desaparece en ning√∫n lado.  Para trabajar con foco, puede usar propiedades declarativas: <br>  focus - una bandera booleana que indica que este elemento es enfocable o no <br>  activeFocus: un indicador booleano que es verdadero cuando este elemento contiene foco, y falso en caso contrario </li><li>  <i>Instalaci√≥n</i>  Para una instalaci√≥n conveniente de las aplicaciones PureQML en TV, puede usar el script de despliegue smart-tv, simplemente d√≥blelo a la ra√≠z del proyecto PureQML.  Para construir un proyecto, por ejemplo, para un televisor webos con el nombre "myTV" (justo antes de que necesite configurar un televisor, para obtener m√°s detalles sobre c√≥mo configurar un televisor WebOS, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ), debe llamar al comando: <br><br><pre> <code class="bash hljs">./smart-tv-deployer/build -p webos -t myTV</code> </pre> </li><li>  <i>AndroidTV</i> .  Aqu√≠, como para Android, el idioma nativo es java, y para portar la aplicaci√≥n web all√≠ utilizamos el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cordova</a> .  Este marco le permite generar una aplicaci√≥n de Android con un WebView, en el que se inicia la aplicaci√≥n web en s√≠.  Adem√°s, se est√° trabajando activamente para traducir el c√≥digo PureQML al nativo. </li></ul><br><h2>  Ejemplo </h2><br>  Como ejemplo, mostramos c√≥mo portar la aplicaci√≥n de un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior</a> a SmartTV. <br><br>  Como mencionamos anteriormente, UX en TV es diferente de un navegador de escritorio, y tendr√° que agregar algunos cambios al c√≥digo para que funcione con los botones remotos: <br><br><pre> <code class="hljs objectivec">onSelectPressed: { osd.toggleActive() } onBackPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (osd.active) osd.toggleActive() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> _globals.closeApp() }</code> </pre><br>  En este c√≥digo, agregamos procesamiento para presionar los botones "Seleccionar" y "Atr√°s", cuando presiona el primero enciende / apaga el OSD (el que tiene el mapa y el punto de ubicaci√≥n de la estaci√≥n) cuando presiona "Atr√°s", si el OSD est√° abierto, ci√©rrelo, si est√° cerrado, luego cierra la aplicaci√≥n en s√≠. <br>  El resultado final se puede ver en el video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5-ejwuFz84I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Conclusi√≥n </h2><br>  Como resultado, PureQML funcion√≥ bien como una herramienta para desarrollar aplicaciones de SmartTV, y nosotros mismos lo usamos intensamente para estos fines. <br>  Si tiene preguntas o desea m√°s art√≠culos sobre el desarrollo de SmartTV o PureQML, escriba en los comentarios o en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal de telegramas</a> , trataremos de responder todo. <br><br>  Gracias por su atencion!  =) <br><br><h2>  Referencias </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sitio del proyecto</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina de Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes earth-online</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Telegram support channel</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421119/">https://habr.com/ru/post/es421119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421107/index.html">Desmontamos y vemos certificados calificados usando Python / Tkinter</a></li>
<li><a href="../es421109/index.html">(Actualizado) Intel proh√≠be publicar puntos de referencia para actualizaciones de microc√≥digo</a></li>
<li><a href="../es421111/index.html">Sistema de dise√±o en Figma. Una mirada a la interfaz a trav√©s de los componentes.</a></li>
<li><a href="../es421113/index.html">Presentamos DJI Mavic 2 Pro / Zoom</a></li>
<li><a href="../es421115/index.html">Contexto en una aplicaci√≥n de Android</a></li>
<li><a href="../es421121/index.html">Transmisi√≥n de video a trav√©s de un navegador con latencia ultra baja (¬°y WebRTC!)</a></li>
<li><a href="../es421123/index.html">Resumen de eventos de TI para septiembre</a></li>
<li><a href="../es421125/index.html">Segmentamos 600 millones de usuarios en tiempo real todos los d√≠as.</a></li>
<li><a href="../es421127/index.html">Seminarios web de Skillbox Friday: dise√±o y desarrolladores</a></li>
<li><a href="../es421129/index.html">C√≥mo reducir la revisi√≥n de c√≥digo de dos semanas a varias horas. La experiencia del equipo Yandex.Market</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>