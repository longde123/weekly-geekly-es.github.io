<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧢 👐🏼 🏏 摄像机的安装，系统设置和控制 🍢 👩🏿‍🤝‍👩🏾 👨🏾‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="因此，让我们开始吧，我们将使用： 



- 系统：Ubuntu Server 12.04 
- DVR：Zoneminder； 
- 摄像机：模拟和IP dlink； 
- 视频采集卡：PCI桥：Hint Corp HiNT HB4 PCI-PCI桥（PCI6150） 
- 主要要求：提高视频监控...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>摄像机的安装，系统设置和控制</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416125/"> 因此，让我们开始吧，我们将使用： <br><br><ul><li> 系统：Ubuntu Server 12.04 </li><li>  DVR：Zoneminder； </li><li> 摄像机：模拟和IP dlink； </li><li> 视频采集卡：PCI桥：Hint Corp HiNT HB4 PCI-PCI桥（PCI6150） </li><li> 主要要求：提高视频监控服务器的生产能力 </li></ul><br> 在我们的操作方法中使用的IP： <br>  192.168.110.151-DVR本身的地址； <br>  192.168.107.103-摄像机的IP地址。 <br><a name="habracut"></a><br>  1）Ubuntu 12.04服务器的详细安装说明。 包含分步截图。 <br><br> 要安装Ubuntu 12.04 Server，请在页面上下载iso映像，将其刻录到CD上并从中启动。 在第一个窗口中，选择安装语言，在本例中，我选择俄语： <br><br><img src="https://habrastorage.org/storage3/bfb/7c5/3ea/bfb7c53ea988a8c28cead31fdf749dbb.jpeg" alt="图片"><br><br> 我们开始安装Ubuntu 12.04： <br><br><img src="https://habrastorage.org/storage3/e55/e66/f79/e55e66f7956a015005252b125f58313f.jpeg" alt="图片"><br><br> 选择一个国家： <br><br><img src="https://habrastorage.org/storage3/85e/c7d/7bb/85ec7d7bb9cb6ab84493e5e561e28335.jpeg" alt="图片"><br><br> 不赞成自动键盘检测： <br><br><img src="https://habrastorage.org/storage3/30a/c1d/ee6/30ac1dee6d0beb0d28e68b12dd89d7f5.jpeg" alt="图片"><br><br> 选择布局语言： <br><br><img src="https://habrastorage.org/storage3/c34/a9c/54e/c34a9c54e4011b4fc42ee07a7583acca.jpeg"><br><br> 我们选择切换键盘的方式，我更喜欢Ctrl + Shift，在您的情况下可能有所不同： <br><br><img src="https://habrastorage.org/storage3/129/a69/0ce/129a690ce2e684242f008f9f00286a96.jpeg" alt="图片"><br><br> 网络将由dhcp配置： <br><br><img src="https://habrastorage.org/storage3/450/ac5/119/450ac5119c1a39369e2f52babe871213.jpeg"><br><br> 这不适合我们，因此，我们按下“返回”按钮 <br><br><img src="https://habrastorage.org/storage3/370/0eb/987/3700eb98730c66998c8d74e334280a79.jpeg"><br><br> 选择“手动配置网络” <br><br><img src="https://habrastorage.org/storage3/d49/419/8d4/d494198d4d17c2b089e583cf0c92944d.jpeg"><br><br> 在建议的窗口中，进一步编写网络，网关和dns的设置。 在下一个窗口中，将提示您输入计算机名（我是测试人员）。 我们编写用户名： <br><br><img src="https://habrastorage.org/storage3/eae/cc4/15b/eaecc415bd5881c4b9df9567a821d052.jpeg"><br><br> 在笔记本中写入密码后，输入密码： <br><br><img src="https://habrastorage.org/storage3/866/0da/d00/8660dad0091e80677cb98181ae97b638.jpeg"><br><br> 接下来是自动时区设置，并询问这是否是正确的时区： <br><br><img src="https://habrastorage.org/storage3/85a/ca5/4ea/85aca54ea9e90301a11804cdcce7b725.jpeg"><br><br> 今天，我将选择自动磁盘分区： <br><br><img src="https://habrastorage.org/storage3/1c5/238/876/1c52388768ab4e405c33137e215adda7.jpeg"><br><br> 选择一个磁盘： <br><br><img src="https://habrastorage.org/storage3/49b/4dc/d4c/49b4dcd4c2bfbf9dc2e9a90596807cff.jpeg"><br><br> 并记录更改： <br><br><img src="https://habrastorage.org/storage3/b33/1d9/7fb/b331d97fb571802b6c1accab118004c8.jpeg"><br><br> 以下是Ubuntu 12.04 Server本身的安装过程： <br><br> 在安装过程中，如果使用代理，则必须指定代理服务器地址： <br><br><img src="https://habrastorage.org/storage3/70f/8d1/33b/70f8d133bf7f3b516790cc27d6032043.jpeg"><br><br> 禁用更新，因为 它们会导致系统不稳定： <br><br><img src="https://habrastorage.org/storage3/0f9/2ab/ac7/0f92abac77cbc867ef073617c2e1b166.jpeg"><br><br> 好了，我们几乎已经完成了Ubuntu 12.04 Server的安装，并且已经达到选择系统目标位置的阶段。 在此步骤中，项目的选择取决于您的新Ubuntu服务器将扮演什么角色-它可以是数据库服务器或邮件服务器等。 在我们的情况下，您必须确定选择lamp和openssh服务器。 <br><br><img src="https://habrastorage.org/storage3/572/a16/416/572a16416afd1504ac586e0570f86091.jpeg"><br><br> 输入mysql的root密码： <br><br><img src="https://habrastorage.org/storage3/404/217/3c2/4042173c2352d6c2a47a2da3fd015400.jpeg"><br><br> 在最后阶段，安装程序将提供在主引导记录中安装系统引导程序的信息： <br><br><img src="https://habrastorage.org/storage3/0e5/1a5/38b/0e51a538bf86ab93edc973d4711c9b9c.jpeg"><br><br> 几秒钟后，您可以从驱动器中的Ubuntu 12.04 Server中删除磁盘，然后单击“继续”： <br><br><img src="https://habrastorage.org/storage3/8bc/de1/8b2/8bcde18b2c35ee92f25b42abce9487bc.jpeg"><br><br> 成功重启服务器后，您可以使用用户名和密码登录。 <br><br>  2）Zoneminder录像机的安装，设置 <br><br>  Ubuntu 12.04上的Zoneminder 1.25.0 <br> 为了成功完成工作，我们需要安装OpenSSH Server和LAMP Server，就像上一段中所做的那样。 <br><br>  1.以root身份登录： <br><br><pre><code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#sudo su</span></span></code> </pre> <br>  2.安装更新并重新启动： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> update <span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> upgrade <span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> dist<span class="hljs-literal"><span class="hljs-literal">-upgrade</span></span> <span class="hljs-variable"><span class="hljs-variable">$reboot</span></span></code> </pre> <br>  3.我们需要：静态IP <br><br><pre> <code class="hljs perl">$nano /etc/network/interfaces</code> </pre> <br>  4.在这里我们写： <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">auto</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">iface</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">inet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">static</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">address</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.151</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">netmask</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">gateway</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.220</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dns-nameservers</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.110</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span></code> </pre> <br>  5.保存文档。 <br><br>  6.重新启动： <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  7.我们直接进行zoneminder的安装： <br><br><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#sudo</span></span> su <span class="hljs-string"><span class="hljs-string">$a</span></span>pt-get install zoneminder</code> </pre> <br>  8.我们编辑Zoneminder脚本本身，因为 加载时不会自动启动： <br><br><pre> <code class="hljs swift">$nano /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/zoneminder</code> </pre> <br> 我们在文档中的“ zmfix -a”行之前插入，这是sleep 15。 <br><br>  9.保存文档。 <br><br>  10.我们建立一个符号链接： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$ln</span></span> <span class="hljs-literal"><span class="hljs-literal">-s</span></span> /etc/zm/apache.conf /etc/apache2/conf.d/zoneminder.conf</code> </pre> <br>  11.重新启动Web服务器： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span>/etc/init.d/apache2 force<span class="hljs-literal"><span class="hljs-literal">-reload</span></span></code> </pre> <br>  12.添加将要操纵视频的用户： <br><br><pre> <code class="hljs haskell">$adduser www-<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> video</span></span></code> </pre> <br>  13.安装cambozola以支持视频流的播放： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$cd</span></span> /usr/src &amp;&amp; wget http://www.charliemouse.com:<span class="hljs-number"><span class="hljs-number">8080</span></span>/code/cambozola/cambozola<span class="hljs-literal"><span class="hljs-literal">-latest</span></span>.tar.gz <span class="hljs-variable"><span class="hljs-variable">$tar</span></span> <span class="hljs-literal"><span class="hljs-literal">-xzvf</span></span> cambozola<span class="hljs-literal"><span class="hljs-literal">-latest</span></span>.tar.gz <span class="hljs-variable"><span class="hljs-variable">$cp</span></span> cambozola<span class="hljs-literal"><span class="hljs-literal">-0</span></span>.<span class="hljs-number"><span class="hljs-number">92</span></span>/dist/cambozola.jar /usr/share/zoneminder</code> </pre> <br>  14.添加Web服务器的证书： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$make</span></span><span class="hljs-literal"><span class="hljs-literal">-ssl</span></span><span class="hljs-literal"><span class="hljs-literal">-cert</span></span> generate<span class="hljs-literal"><span class="hljs-literal">-default</span></span><span class="hljs-literal"><span class="hljs-literal">-snakeoil</span></span> -<span class="hljs-literal"><span class="hljs-literal">-force</span></span><span class="hljs-literal"><span class="hljs-literal">-overwrite</span></span></code> </pre> <br>  15.激活它们： <br><br><pre> <code class="hljs perl">$a2enmod ssl</code> </pre> <br>  16.我们激活默认的ssl虚拟主机： <br><br><pre> <code class="hljs mel">$a2ensite <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>-ssl</code> </pre> <br>  17.重新启动Web服务器： <br><br><pre> <code class="hljs perl">$service apache2 restart</code> </pre> <br>  18.为了成功使用https，我们执行以下操作： <br><br><pre> <code class="hljs perl">$nano /etc/cron.daily/ntpdate</code> </pre> <br>  19.插入这两行： <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#!/bin/sh ntpdate ntp.ubuntu.com</span></span></code> </pre> <br>  20.我们保存文档。 <br><br>  21.我们赋予它以下权利： <br><br><pre> <code class="hljs perl">$chmod <span class="hljs-number"><span class="hljs-number">755</span></span> /etc/cron.daily/ntpdate</code> </pre> <br>  22.我们编辑sysctl.conf文件，以使内核清楚在zoneminder下将使用多少内存（否则将出现黑屏）： <br><br><pre> <code class="hljs perl">$nano /etc/sysctl.conf</code> </pre> <br>  23.在文档的最底部插入以下两行： <br><br><pre> <code class="hljs">kernel.shmall = 134217728 kernel.shmmax = 134217728</code> </pre> <br>  24.将这些值传输到内核： <br><br><pre> <code class="hljs ruby">$echo <span class="hljs-number"><span class="hljs-number">134217728</span></span> &gt;<span class="hljs-regexp"><span class="hljs-regexp">/proc/sys</span></span><span class="hljs-regexp"><span class="hljs-regexp">/kernel/shmall</span></span> $echo <span class="hljs-number"><span class="hljs-number">134217728</span></span> &gt;<span class="hljs-regexp"><span class="hljs-regexp">/proc/sys</span></span><span class="hljs-regexp"><span class="hljs-regexp">/kernel/shmmax</span></span></code> </pre> <br>  25.重新启动： <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  26.转到Zoneminder： <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//192.168.110.151/zm</span></span></code> </pre> <br>  27.在控制台中，单击“选项”按钮 <br>  LANG_DEFAULT网络界面使用的默认语言，请将值设置为“ ru_ru” <br> 能够查看俄语界面。 <br><br><img src="https://habrastorage.org/storage3/f96/09f/eeb/f9609feebfae5c921ad543de72132fb4.jpeg"><br><br>  28.单击添加监视器。 <br><br>  29.并在两栏中填写选项。 <br><br><img src="https://habrastorage.org/storage3/57d/06b/dd4/57d06bdd4ebc09a0c724b2978cfbaeaa.jpeg"><br><br><img src="https://habrastorage.org/storage3/a77/a4b/145/a77a4b145f77afdbb908830c0e9ec9ae.jpeg"><br><br>  30.观看显示器时，很可能会看到黑屏，使用这些选项后，可以看到图像，但干扰很大。 <br><br>  31.如何解决此问题，我将在下一节中介绍如何安装相机。 <br><br>  32.使用IP摄像机，一切都变得简单一些，我们转到IP摄像机的管理控制台，我们需要三个参数：1）通过http访问摄像机的用户名和密码； 2）摄像机的路径； 3）分辨率。 <br><br>  33.我们通过浏览器进入摄像机控制台： <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">192.168.107.103</a> <br><br>  34.添加一个新用户（例如，使用密码测试进行测试）： <br><br><img src="https://habrastorage.org/storage3/f68/a6d/cc8/f68a6dcc84570b296e16fcb0440eb59e.jpeg"><br><br>  35.我们寻求许可： <br><br><img src="https://habrastorage.org/storage3/b05/3b8/0b6/b053b80b64b1443b0fc5fe8aad03d761.jpeg"><br><br> 是的，我们有320x240。 <br><br>  36.现在我们来看一下相机的路径&gt; <br><br><img src="https://habrastorage.org/storage3/99e/e1a/956/99ee1a95673d3607a3b758c26961a853.jpeg"><br><br>  37.在Zoneminder中，单击“添加监视器”。 我们在“常规”和“来源”标签上输入以下选项： <br><br><img src="https://habrastorage.org/storage3/814/64a/f1f/81464af1f34f04b9284aed1eeafb62e7.jpeg"><br><br><img src="https://habrastorage.org/storage3/0c9/a45/039/0c9a450399eb4d05bd5fc8a57704df17.jpeg"><br><br>  3）在PCI桥视频捕获卡上配置模拟摄像机：Hint Corp HiNT HB4 PCI-PCI桥（PCI6150）。 <br><br>  1.安装以下软件包： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$apt</span></span><span class="hljs-literal"><span class="hljs-literal">-get</span></span> install v4l<span class="hljs-literal"><span class="hljs-literal">-conf</span></span> libv4l<span class="hljs-literal"><span class="hljs-literal">-0</span></span> v4l2ucp v4l<span class="hljs-literal"><span class="hljs-literal">-conf</span></span> v4l<span class="hljs-literal"><span class="hljs-literal">-utils</span></span></code> </pre> <br>  2.我们看一下是否完全定义了我们的视频设备： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$ls</span></span> <span class="hljs-literal"><span class="hljs-literal">-l</span></span> /dev/video*</code> </pre> <br> 必须得出结论 <br><br><pre> <code class="hljs powershell">crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video0 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video1 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video2 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video3 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video4 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video5 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>  <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span> /dev/video6 crw<span class="hljs-literal"><span class="hljs-literal">-rw</span></span>---- <span class="hljs-number"><span class="hljs-number">1</span></span> root video <span class="hljs-number"><span class="hljs-number">81</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>  <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> /dev/video7</code> </pre> <br> 因此，我们的模拟视频输出设备已在系统中定义。 <br><br>  3.我们查看有关设备的信息（所有模拟视频设备都以/ dev / video的形式存储）： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$v4l</span></span><span class="hljs-literal"><span class="hljs-literal">-info</span></span> /dev/video0 | head <span class="hljs-literal"><span class="hljs-literal">-n</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> | grep <span class="hljs-string"><span class="hljs-string">"^card"</span></span></code> </pre> <br> 我们得出以下结论： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">card</span></span> : <span class="hljs-string"><span class="hljs-string">"BT878 video ( *** UNKNOWN/GENER"</span></span></code> </pre> <br> 这就是为什么我们的设备在Zoneminder中无法正确显示的原因。 这不好，因为 我们设备的驱动程序参数未传递给内核，我们进一步研究。 <br><br>  4.我们需要卸载模块： <br><br><pre> <code class="hljs perl">$rmmod bttv</code> </pre> <br>  5.我们得到一个非肯定的答案： <br><br><pre> <code class="hljs vhdl"><span class="hljs-literal"><span class="hljs-literal">Error</span></span>: Module bttv <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span></code> </pre> <br> 我花了很多时间重建内核和其他垃圾，答案很简单。 我们使用了模拟设备，DVR也使用了它，所以我们要做什么。 <br><br>  6.停止zoneminder： <br><br><pre> <code class="hljs swift">$/etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/zoneminder /stop</code> </pre> <br>  7.我们尝试卸载模块： <br><br><pre> <code class="hljs perl">$rmmod bttv</code> </pre> <br>  8.如您所见，他正常吞噬了该命令，因此我们尝试将参数手动传递给内核： <br><br><pre> <code class="hljs powershell">modprobe <span class="hljs-literal"><span class="hljs-literal">-v</span></span> bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  9.我们查看有关设备的信息（所有模拟视频设备都以/ dev / video的形式存储）： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$v4l</span></span><span class="hljs-literal"><span class="hljs-literal">-info</span></span> /dev/video0 | head <span class="hljs-literal"><span class="hljs-literal">-n</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> | grep <span class="hljs-string"><span class="hljs-string">"^card"</span></span></code> </pre> <br> 现在我们得出以下结论： <br><br><pre> <code class="hljs">card: “BT878 video (ProVideo PV143)”</code> </pre> <br> 这意味着一切都很好，并且应用了驱动程序。 <br><br>  10.以防万一，我们授予摄像机使用权： <br><br><pre> <code class="hljs perl">$chmod a+rwx /dev/video*</code> </pre> <br>  11.启动Zoneminder： <br><br><pre> <code class="hljs swift">$/etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.dzoneminder start</code> </pre> <br>  12.转到Zoneminder： <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">192.168.110.151/zm</a> <br><br> 我们检查了模拟摄像机，可以确保图像一切正常，并且可以在DVR中轻松观察到它。 此外，这对我们来说是自动必需的，这样它就可以在内核中上升，而无需手动启动。 <br><br>  13.创建bttv.conf文件： <br><br><pre> <code class="hljs swift">$nano /et <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>/modprobe.d/bttv.conf</code> </pre> <br>  14.将以下内容插入其中： <br><br><pre> <code class="hljs powershell">alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-0</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-2</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-3</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-4</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-6</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-7</span></span> bttv alias char<span class="hljs-literal"><span class="hljs-literal">-major</span></span><span class="hljs-literal"><span class="hljs-literal">-81</span></span><span class="hljs-literal"><span class="hljs-literal">-8</span></span> bttv options bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span> i2c_scan=<span class="hljs-number"><span class="hljs-number">0</span></span> i2c_hw=<span class="hljs-literal"><span class="hljs-literal">-1</span></span> options bttv card=<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69,<span class="hljs-number"><span class="hljs-number">0</span></span>x69 tuner=<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span>,<span class="hljs-literal"><span class="hljs-literal">-1</span></span> autoload=<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  15.重新启动： <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br>  16.我们很欣赏结果： <br><br><img src="https://habrastorage.org/storage3/d0a/688/cbd/d0a688cbd5462eaf808c5e24e971c9cf.jpeg"><br><br>  4）执行我的操作手册时可能会遇到的问题。 <br><br>  1.控制台中的俄语字体： <br><br>  •在具有root用户特权的任何文本编辑器中，将FRAMEBUFFER = Y行添加到/etc/initramfs-tools/initramfs.conf文件中。 您还可以通过运行以下命令来执行此操作： <br><br><pre> <code class="hljs ruby">$sudo -i $echo <span class="hljs-string"><span class="hljs-string">'FRAMEBUFFER=Y'</span></span> <span class="hljs-meta"><span class="hljs-meta">&gt;&gt; </span></span>/etc/initramfs-tools/initramfs.conf $exit</code> </pre> <br>  •更新内核初始化时间段（initrd）的ramdisk映像： <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$update</span></span><span class="hljs-literal"><span class="hljs-literal">-initramfs</span></span> –u</code> </pre> <br>  •由命令进行的这些操作设置的字段： <br><br><pre> <code class="hljs powershell">sudo dpkg<span class="hljs-literal"><span class="hljs-literal">-reconfigure</span></span> console<span class="hljs-literal"><span class="hljs-literal">-setup</span></span></code> </pre> <br>  •终于开始起作用：从一开始，所有内容都将以俄语字体显示- 甚至检查磁盘的请求（在初始化内核的过程中出现）也将以西里尔字母而不是正方形显示。 <br><br>  2. Ubuntu没有看到监视器。 <br><br> 并非所有类型的显示器在安装后都能看到Ubuntu，大多数情况下，您会看到“非最佳1024x768模式”。 最佳模式1240 x 860英寸： <br><br>  •进入/ etc / default / grub <br>  •从行中删除评论 <br><br><pre> <code class="hljs">GRUB_GFXMODE=640x480</code> </pre> <br>  •更新引导程序 <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$update</span></span><span class="hljs-literal"><span class="hljs-literal">-grub</span></span></code> </pre> <br>  •重新启动系统 <br><br><pre> <code class="hljs perl">$reboot</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">3）用于实施该项目的资源</b> <div class="spoiler_text"> 的Ubuntu <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.ithowto.ru/666-ustanovka-ubuntu-12-04-server.html</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">softnastroy.com/content/instrukciya-po-ustanovke-ubuntu-1204-lts-server-c-podrobnymi-skrinshotami.html</a> <br>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">help.ubuntu.ru/wiki/russian_font_in_console</a> <br><br> 相机问题 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4.avreg.net/howto_linux-capture-cards.html</a> <br>  5. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.lecam.ru/articles/avreg</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6.devhead.ru/read/organizaciya-videonablyudeniya-zoneminder-ubuntu</a> <br>  7. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.linuxtv.org/wiki/index.php/Bttv_devices_%28bt848，_bt878％29＃</a>驱动程序 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">8.www.zoneminder.com/wiki/index.php/Ubuntu_9.04_%28Jaunty%29_desktop_with_graphical_interface</a> <br>  9. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">forum.ubuntu.ru/index.php?topic=30146.0</a> <br>  10. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">unixforum.org/index.php?showtopic=117969</a> <br><br>  Zoneminder <br><br>  11. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.zoneminder.com/wiki/index.php/Ubuntu_Server_12.04_64-bit_with_Zoneminder_1.25.0_the_easy_way</a> <br>  12. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">blog.sighworld.com/page/3</a> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416125/">https://habr.com/ru/post/zh-CN416125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416113/index.html">史蒂芬·沃尔夫拉姆：史蒂夫·乔布斯的回忆</a></li>
<li><a href="../zh-CN416115/index.html">我们仍然犯的10个小设计错误</a></li>
<li><a href="../zh-CN416119/index.html">周三的周五帖子：最“必要”的NPM软件包的顶部</a></li>
<li><a href="../zh-CN416121/index.html">富士通人工智能计算磁性材料的几何形状</a></li>
<li><a href="../zh-CN416123/index.html">使用Keras和Tensorflow Object Detection API技术的神经网络识别货架上的商品</a></li>
<li><a href="../zh-CN416127/index.html">CUDA和远程GPU</a></li>
<li><a href="../zh-CN416129/index.html">人工智能如何学习生成猫图像</a></li>
<li><a href="../zh-CN416131/index.html">如何在俄罗斯联邦处理违约概率而不违反法律</a></li>
<li><a href="../zh-CN416133/index.html">国外数据中心：Equinix LD8</a></li>
<li><a href="../zh-CN416135/index.html">小于1 kb的GUI应用程序</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>