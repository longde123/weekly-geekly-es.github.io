<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ––ğŸ½ ğŸ¤¸ ğŸ”¸ å…³äºUnity3Dä¸­åº”ç”¨ç¨‹åºçš„å†…éƒ¨å’Œå¤–éƒ¨è®¾ç½® â˜ï¸ ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¼•è¨€ 
 å°Šæ•¬çš„è¯»è€…æ‚¨å¥½ï¼Œåœ¨ä»Šå¤©çš„æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³è°ˆè°ˆåœ¨Unity3dç¯å¢ƒä¸­åˆ›å»ºçš„æ¸¸æˆåº”ç”¨ç¨‹åºçš„è®¾ç½®å’Œé…ç½®ã€‚ 

 æŒ‰ç…§ä¼ ç»Ÿï¼Œæˆ‘å°†ä»èƒŒæ™¯å¼€å§‹ã€‚ åœ¨æ¸¸æˆè¡Œä¸šå·¥ä½œæœŸé—´ï¼Œæˆ‘å¼€å‘äº†å„ç§å…·æœ‰ä¸åŒå¤æ‚æ€§çš„é¡¹ç›®ï¼Œå¹¶å‚è§‚äº†æ¸¸æˆè®¾è®¡é˜µè¥å’Œç¨‹åºå‘˜é˜µè¥ï¼ˆç›´åˆ°ä»Šå¤©ï¼‰ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œä»»ä½•åº”ç”¨ç¨‹åºéƒ½éœ€è¦å¤§é‡ä¸åŒçš„é…ç½®æ•°æ®å’Œè®¾ç½®ã€‚ åœ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å…³äºUnity3Dä¸­åº”ç”¨ç¨‹åºçš„å†…éƒ¨å’Œå¤–éƒ¨è®¾ç½®</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436634/"><h2> å¼•è¨€ </h2><br> å°Šæ•¬çš„è¯»è€…æ‚¨å¥½ï¼Œåœ¨ä»Šå¤©çš„æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³è°ˆè°ˆåœ¨Unity3dç¯å¢ƒä¸­åˆ›å»ºçš„æ¸¸æˆåº”ç”¨ç¨‹åºçš„è®¾ç½®å’Œé…ç½®ã€‚ <br><br> æŒ‰ç…§ä¼ ç»Ÿï¼Œæˆ‘å°†ä»èƒŒæ™¯å¼€å§‹ã€‚ åœ¨æ¸¸æˆè¡Œä¸šå·¥ä½œæœŸé—´ï¼Œæˆ‘å¼€å‘äº†å„ç§å…·æœ‰ä¸åŒå¤æ‚æ€§çš„é¡¹ç›®ï¼Œå¹¶å‚è§‚äº†æ¸¸æˆè®¾è®¡é˜µè¥å’Œç¨‹åºå‘˜é˜µè¥ï¼ˆç›´åˆ°ä»Šå¤©ï¼‰ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œä»»ä½•åº”ç”¨ç¨‹åºéƒ½éœ€è¦å¤§é‡ä¸åŒçš„é…ç½®æ•°æ®å’Œè®¾ç½®ã€‚ åœ¨ç›¸å¯¹ç»å…¸çš„Unity3dæ ¼å¼ä¸­ï¼Œæ­¤ç±»è®¾ç½®è¢«æ”¾ç½®åœ¨æ£€æŸ¥å™¨çš„å¯è§éƒ¨åˆ†ä¸­ï¼Œåœ¨å…¶ä¸­è¾“å…¥äº†ä¸€äº›æ•°å­—ï¼Œç­‰ç­‰ã€‚ æˆ‘è®¤ä¸ºä¸å€¼å¾—è®¨è®ºè¿™ç§æ–¹æ³•çš„ä¾¿åˆ©æ€§ï¼Œå³ä½¿å®ƒè¢«æ’é™¤åœ¨å¤–ï¼Œåœ¨è°ƒä¼˜æ—¶<b>MonoBehaviour</b>ç±»æ‰€åœ¨çš„åœºæ™¯ä¹Ÿè¢«å…¶ä»–å¼€å‘äººå‘˜æ‰€æ›´æ”¹ï¼Œå› æ­¤è¿™ä¸€äº‹å®æ˜¯ä¸å€¼å¾—çš„ã€‚ å› æ­¤ï¼Œåœ¨ç»å†äº†ä¸€ç³»åˆ—çš„æŠ˜ç£¨ä¹‹åï¼Œæˆ‘å†³å®šç¼–å†™ä¸€äº›ç®€å•æœ‰æ•ˆçš„æ–¹æ³•ï¼Œä½¿æ¯ä¸ªäººçš„ç”Ÿæ´»æ›´åŠ è½»æ¾ï¼Œå¹¶ç®€åŒ–ä¸æˆ‘å…±äº«çš„æ•°æ®çš„ä½¿ç”¨ã€‚ <br><br>  <b>æ³¨æ„</b> ï¼š <i>ä¸‹è¿°æ‰€æœ‰ä»£ç å‡é€‚ç”¨äºUnityç‰ˆæœ¬2018.3+ï¼Œå¹¶ä½¿ç”¨Roslynç¼–è¯‘å™¨ï¼ˆCï¼ƒ7+è¯­è¨€ç‰ˆæœ¬ï¼‰ã€‚</i> <br><a name="habracut"></a><br><h2> å†…éƒ¨è®¾å®š </h2><br> é¦–å…ˆï¼Œè¯·è€ƒè™‘é¡¹ç›®çš„å†…éƒ¨è®¾ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç§å¸¸é‡ï¼Œé“¾æ¥ï¼Œå¤–éƒ¨SDKçš„æ ‡è¯†ç¬¦ï¼Œé”®ç­‰ã€‚ åŒ…æ‹¬å…¨å±€å’Œæœ¬åœ°æ¸¸æˆè®¾ç½®ã€‚ é€šå¸¸ï¼Œæ‰€æœ‰æ­¤ç±»æ•°æ®å¯ä»¥åˆ†ä¸ºå››ç§ç±»å‹ï¼š <br><br><ul><li> å¼¦ä¹ </li><li> æ•´æ•° </li><li> æµ®ç‚¹æ•° </li><li> å¸ƒå°” </li></ul><br> æ‰€æœ‰å…¶ä»–æ•°æ®éƒ½å¯ä»¥è½»æ¾åœ°å­˜å‚¨åœ¨å…¶ä¸­ï¼Œå¹¶ä¸”è€ƒè™‘åˆ°å­—ç¬¦ä¸²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨JSONåºåˆ—åŒ–å­˜å‚¨ä»»ä½•å†…å®¹ã€‚ æˆ‘ä»¬å°†ä»¥<b>ScriptableObject</b>ä¸ºåŸºç¡€ï¼Œå®ƒéå¸¸é€‚åˆè§£å†³è¿™ä¸€ä»»åŠ¡ã€‚ <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Setting</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ParameterTypeEnum { Float, Int, String, Bool } [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ParameterData</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; _name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ParameterTypeEnum ParameterType =&gt; _parameterType; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> DefaultValue =&gt; _defaultValue; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _name; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ParameterTypeEnum _parameterType; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _defaultValue; } [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ParameterData[] Parameters; }</code> </pre> <br> å› æ­¤ï¼Œåœ¨æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼æ•°ç»„ï¼š <br><br><ul><li> å‚æ•°åç§° </li><li> å‚æ•°ç±»å‹ </li><li> å‚æ•°å€¼ä½œä¸ºå­—ç¬¦ä¸² </li></ul><br>  <b>æ³¨æ„</b> ï¼š <i>ä¸ºä»€ä¹ˆè¦è¡Œï¼Ÿ</i>  <i>åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æ¯”å­˜å‚¨4ä¸ªä¸åŒç±»å‹çš„å˜é‡æ›´æ–¹ä¾¿ã€‚</i> <br><br><div class="spoiler">  <b class="spoiler_title">ä¸ºäº†åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬æ·»åŠ äº†è¾…åŠ©æ–¹æ³•å’Œä¸€ä¸ªå­—å…¸ï¼Œè¯¥å­—å…¸å°†ä»¥ç›’è£…å½¢å¼å­˜å‚¨è½¬æ¢åçš„å€¼ã€‚</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">protected</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">readonly</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">IDictionary</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">object</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">settingParameters</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Dictionary</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">object</span></span>&gt;(); <span class="hljs-selector-attr"><span class="hljs-selector-attr">[NonSerialized]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">protected</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bool</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">initialized</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">private</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OnEnable</span></span>() { #if UNITY_EDITOR if (EditorApplication.isPlayingOrWillChangePlaymode) { Initialization(); } <span class="hljs-selector-id"><span class="hljs-selector-id">#else</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Initialization</span></span>(); <span class="hljs-selector-id"><span class="hljs-selector-id">#endif</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">public</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">T</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetParameterValue</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">T</span></span>&gt;(<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span>) { if (settingParameters.ContainsKey(name)) { var parameterValue = (T)settingParameters[name]; return parameterValue; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">else</span></span> { Debug.Log("[Setting]: name not found [{0}]"<span class="hljs-selector-class"><span class="hljs-selector-class">.Fmt</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span>)); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">return</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">protected</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Initialization</span></span>() { if (initialized || Parameters == null) return; for (var i = 0; i &lt; Parameters.Length; i++) { var parameter = Parameters[i]; object parameterValue = null; switch (parameter.ParameterType) { case <span class="hljs-attribute"><span class="hljs-attribute">ParameterTypeEnum.Float</span></span>: { if (!float.<span class="hljs-built_in"><span class="hljs-built_in">TryParse</span></span>(parameter.DefaultValue, out float value)) { value = default; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">parameterValue</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetValue</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">parameter</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Name</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">value</span></span>); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ParameterTypeEnum</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Int</span></span>: { if (!int.TryParse(parameter.DefaultValue, out int value)) { value = default; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">parameterValue</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetValue</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">parameter</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Name</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">value</span></span>); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ParameterTypeEnum</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.String</span></span>: { parameterValue = GetValue(parameter.Name, parameter.DefaultValue); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ParameterTypeEnum</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Bool</span></span>: { if (!bool.TryParse(parameter.DefaultValue, out bool value)) { value = default; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">parameterValue</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetValue</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">parameter</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Name</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">value</span></span>); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">settingParameters</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Add</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">parameter</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Name</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">parameterValue</span></span>); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">initialized</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">true</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">protected</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">object</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">GetValue</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">T</span></span>&gt;(<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">paramName</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">T</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">defaultValue</span></span>) { return defaultValue; }</code> </pre><br></div></div><br> åˆå§‹åŒ–åœ¨<b>OnEnableä¸­</b>å®Œæˆã€‚ ä¸ºä»€ä¹ˆ<b>ä¸é†’ç€å‘¢</b> ï¼Ÿ å¯¹äºå­˜å‚¨ä¸ºèµ„äº§çš„å®ä¾‹ï¼Œä¸ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼ˆå®ƒåœ¨<b>CreateInstance</b>æ—¶è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦ï¼‰ã€‚  <b>å¯åŠ¨</b>èµ„äº§åº”ç”¨ç¨‹åºæ—¶ï¼Œé¦–å…ˆè°ƒç”¨<b>ScriptableObjectï¼Œ</b>é¦–å…ˆè°ƒç”¨<b>OnDisable</b> ï¼ˆä»…åœ¨ç¼–è¾‘å™¨ä¸­ï¼‰ï¼Œç„¶åå†<b>è°ƒç”¨OnEnable</b> ã€‚ å¦å¤–ï¼Œä¸ºäº†ä½¿ç¼–è¾‘å™¨åœ¨æ¯æ¬¡é‡æ–°ç¼–è¯‘å’Œæ‰“å¼€é¡¹ç›®çš„åˆå§‹åŒ–æœŸé—´å‡ä¸èµ·ä½œç”¨ï¼Œæ‚¨éœ€è¦æ·»åŠ é¢„ç¼–è¯‘æŒ‡ä»¤ï¼Œå¹¶åœ¨æ–‡ä»¶çš„å¼€å¤´æ’å…¥ï¼š <br><pre> <code class="cs hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR using UnityEditor; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre><br> æˆ‘ä»¬å°†è¿›ä¸€æ­¥éœ€è¦<b>GetValue</b>æ–¹æ³•ï¼Œå¹¶ä¸”å¯¹äºå†…éƒ¨è®¾ç½®ï¼Œå®ƒä»…è¿”å›é»˜è®¤å€¼ã€‚ <br><br>  <b>GetParameterValue</b>æ–¹æ³•<b>æ˜¯</b>æˆ‘ä»¬è®¿é—®å‚æ•°çš„ä¸»è¦æ–¹æ³•ã€‚ å€¼å¾—è€ƒè™‘çš„æ˜¯ï¼Œå°½ç®¡å–æ¶ˆäº†è£…ç®±å€¼ï¼Œä½†å­˜å‚¨åœ¨<b>Setting</b>ä¸­çš„å‚æ•°åœ¨æŸç§ç¨‹åº¦ä¸Šè¿˜æ˜¯å¸¸é‡ï¼Œå› æ­¤åœ¨åˆå§‹åŒ–åœºæ™¯æ—¶åº”é‡‡ç”¨å®ƒä»¬ã€‚ ä¸è¦åœ¨<b>Updateä¸­</b>è°ƒç”¨è¯¥æ–¹æ³•ã€‚ <br><br> ç”¨æ³•ç¤ºä¾‹ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyLogic</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Setting _localSetting; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _localStrValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _localIntValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _localFloatValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _localBoolValue; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _localStrValue = _localSetting.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyStr"</span></span>); _localIntValue = _localSetting.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyInt"</span></span>); _localFloatValue = _localSetting.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyFloat"</span></span>); _localBoolValue = _localSetting.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyBool"</span></span>); } }</code> </pre><br> æˆ‘ä»¬å†™äº†åŸºç¡€ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œå› ä¸ºå¯¹æˆ‘ä»¬è€Œè¨€ï¼Œä¸»è¦ç›®æ ‡åªæ˜¯ä¸ºé‚£äº›ä½¿ç”¨è¿™äº›è®¾ç½®çš„äººå‘˜æä¾›æ–¹ä¾¿ã€‚ <br><br> è¦æ·»åŠ èœå•é¡¹ä»¥ä¾¿èƒ½å¤Ÿåˆ›å»ºèµ„äº§ï¼Œå¯ä»¥ä½¿ç”¨å±æ€§ï¼š <br><br><pre> <code class="cs hljs">CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"New Setting"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Setting"</span></span>)</code> </pre><br><div class="spoiler">  <b class="spoiler_title">ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰æ£€æŸ¥å™¨ï¼Œä½¿æ‚¨å¯ä»¥åœ¨èµ„äº§ä¸Šæ˜¾ç¤ºæ•°æ®å¹¶å¯åŠ¨å¤–éƒ¨ç¼–è¾‘å™¨ã€‚</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CustomEditor(typeof(Setting), true)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingCustomInspector</span></span> : <span class="hljs-title"><span class="hljs-title">Editor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _paramsStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _paramInfoStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _parameterInfo = <span class="hljs-string"><span class="hljs-string">"&lt;color=white&gt;Name&lt;/color&gt;&lt;color=grey&gt; = &lt;/color&gt;&lt;color=yellow&gt;{0}&lt;/color&gt; &lt;color=white&gt;Type&lt;/color&gt;&lt;color=grey&gt; = &lt;/color&gt;&lt;color=yellow&gt;{1}&lt;/color&gt; &lt;color=white&gt;Defualt Value&lt;/color&gt;&lt;color=grey&gt; = &lt;/color&gt;&lt;color=yellow&gt;{2}&lt;/color&gt;"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnInspectorGUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(<span class="hljs-string"><span class="hljs-string">"Edit Setting"</span></span>)) { SettingEditorWindow.Show(serializedObject.targetObject <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Setting); } EditorGUILayout.LabelField(<span class="hljs-string"><span class="hljs-string">"Parameters:"</span></span>, _parametersStyle, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> paramsProp = serializedObject.FindProperty(<span class="hljs-string"><span class="hljs-string">"Parameters"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; paramsProp.arraySize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> paramProp = paramsProp.GetArrayElementAtIndex(i); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> paramNameProp = paramProp.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_name"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> paramTypeProp = paramProp.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_parameterType"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> paramDefaultValueProp = paramProp.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_defaultValue"</span></span>); EditorGUILayout.BeginHorizontal(); EditorGUILayout.LabelField(_paramInfo.Fmt( paramNameProp.stringValue, paramTypeProp.enumDisplayNames[paramTypeProp.enumValueIndex], paramDefaultValueProp.stringValue), _paramInfoStyle); EditorGUILayout.EndHorizontal(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PrepareGUIStyle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_parametersStyle == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _paramsStyle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIStyle(GUI.skin.label); _paramsStyle.fontStyle = FontStyle.Bold; _paramsStyle.fontSize = <span class="hljs-number"><span class="hljs-number">12</span></span>; _paramsStyle.normal.textColor = Color.green; _paramInfoStyle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIStyle(GUI.skin.label); _paramInfoStyle.richText = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } }</code> </pre><br></div></div><br> å®ƒæ˜¯è¿™æ ·çš„ï¼š <br><br><img src="https://habrastorage.org/webt/jl/ol/8d/jlol8dt8uslasjuultnenljn0dm.png" alt="å›¾ç‰‡"><br><br><div class="spoiler">  <b class="spoiler_title">ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‚æ•°æœ¬èº«åŠå…¶å€¼çš„ç¼–è¾‘å™¨ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çª—å£ã€‚</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingEditorWindow</span></span> : <span class="hljs-title"><span class="hljs-title">EditorWindow</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Setting SelectedAsset; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _currentSelectedAsset = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; _assetNames = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IList&lt;SerializedObject&gt; _settingSerializationObjects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;SerializedObject&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IList&lt;T&gt; _assets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IList&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _editedNames = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIContent _editNameIconContent; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _headerStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _parametersStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _parameterHeaderStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GUIStyle _nameStyle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 _scrollInspectorPosition = Vector2.zero; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Vector2 _scrollAssetsPosition = Vector2.zero; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _SELECTED_ASSET_STR = <span class="hljs-string"><span class="hljs-string">"SettingSelected"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Show</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Setting asset</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instance = GetWindow&lt;Setting&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); instance.title = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIContent(<span class="hljs-string"><span class="hljs-string">"Settings Editor"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); instance.SelectedAsset = asset; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> assetGuids = AssetDatabase.FindAssets(<span class="hljs-string"><span class="hljs-string">"t:{0}"</span></span>.Fmt(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Setting).Name)); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> guid <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> assetGuids) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> path = AssetDatabase.GUIDToAssetPath(guid); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> asset = AssetDatabase.LoadAssetAtPath&lt;T&gt;(path); _assetNames.Add(path.Replace(<span class="hljs-string"><span class="hljs-string">"Assets/"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>).Replace(<span class="hljs-string"><span class="hljs-string">".asset"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)); _assets.Add(asset); _settingSerializationObjects.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SerializedObject(asset)); } _currentSelectedAsset = PlayerPrefs.GetInt(_SELECTED_ASSET_STR, <span class="hljs-number"><span class="hljs-number">-1</span></span>); _editNameIconContent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIContent(EditorGUIUtility.IconContent(<span class="hljs-string"><span class="hljs-string">"editicon.sml"</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDisable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PlayerPrefs.SetInt(_SELECTED_ASSET_STR, _currentSelectedAsset); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PrepareGUIStyle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_headerStyle == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _headerStyle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIStyle(GUI.skin.box); _headerStyle.fontStyle = FontStyle.Bold; _headerStyle.fontSize = <span class="hljs-number"><span class="hljs-number">14</span></span>; _headerStyle.normal.textColor = Color.white; _headerStyle.alignment = TextAnchor.MiddleCenter; _parametersStyle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GUIStyle(GUI.skin.label); _parametersStyle.fontStyle = FontStyle.Bold; _parametersStyle.fontSize = <span class="hljs-number"><span class="hljs-number">12</span></span>; _parametersStyle.normal.textColor = Color.green; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnGUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PrepareGUIStyle(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SelectedAsset != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _currentSelectedAsset = _assets.IndexOf(SelectedAsset); SelectedAsset = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } EditorGUILayout.BeginHorizontal(); EditorGUILayout.BeginVertical(GUI.skin.box, GUILayout.MinWidth(<span class="hljs-number"><span class="hljs-number">350f</span></span>), GUILayout.ExpandHeight(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); _scrollAssetsPosition = EditorGUILayout.BeginScrollView(_scrollAssetsPosition, GUIStyle.none, GUI.skin.verticalScrollbar); _currentSelectedAsset = GUILayout.SelectionGrid(_currentSelectedAsset, _assetNames.ToArray(), <span class="hljs-number"><span class="hljs-number">1</span></span>); EditorGUILayout.EndScrollView(); EditorGUILayout.EndVertical(); EditorGUILayout.BeginVertical(GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> assetSerializedObject = (_currentSelectedAsset &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) ? _settingSerializationObjects[_currentSelectedAsset] : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; EditorGUILayout.Space(); EditorGUILayout.LabelField((_currentSelectedAsset &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) ? _assetNames[_currentSelectedAsset] : <span class="hljs-string"><span class="hljs-string">"Select Asset..."</span></span>, _headerStyle, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); EditorGUILayout.Space(); _scrollInspectorPosition = EditorGUILayout.BeginScrollView(_scrollInspectorPosition, GUIStyle.none, GUI.skin.verticalScrollbar); Draw(assetSerializedObject); EditorGUILayout.EndScrollView(); EditorGUILayout.EndVertical(); EditorGUILayout.EndHorizontal(); assetSerializedObject?.ApplyModifiedProperties(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SerializedObject assetSerializationObject</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (assetSerializationObject == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; EditorGUILayout.BeginHorizontal(); EditorGUILayout.LabelField(<span class="hljs-string"><span class="hljs-string">"Parameters:"</span></span>, _parametersStyle, GUILayout.Width(<span class="hljs-number"><span class="hljs-number">20f</span></span>), GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parametersProperty = assetSerializationObject.FindProperty(<span class="hljs-string"><span class="hljs-string">"Parameters"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(<span class="hljs-string"><span class="hljs-string">"Add"</span></span>, GUILayout.MaxWidth(<span class="hljs-number"><span class="hljs-number">40f</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (parametersProperty != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { parametersProperty.InsertArrayElementAtIndex(parametersProperty.arraySize); } } EditorGUILayout.EndHorizontal(); EditorGUILayout.Space(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (parametersProperty != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; parametersProperty.arraySize; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameterProperty = parametersProperty.GetArrayElementAtIndex(i); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameterNameProperty = parameterProperty.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_name"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameterTypeProperty = parameterProperty.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_parameterType"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameterDefaultValueProperty = parameterProperty.FindPropertyRelative(<span class="hljs-string"><span class="hljs-string">"_defaultValue"</span></span>); EditorGUILayout.BeginHorizontal(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(_editNameIconContent, GUILayout.MaxWidth(<span class="hljs-number"><span class="hljs-number">25f</span></span>), GUILayout.MaxHeight(<span class="hljs-number"><span class="hljs-number">18f</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_editedNames.Contains(i)) { _editedNames.Remove(i); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _editedNames.Add(i); } } EditorGUILayout.LabelField(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>, _parameterHeaderStyle, GUILayout.MaxWidth(<span class="hljs-number"><span class="hljs-number">40f</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_editedNames.Contains(i)) { parameterNameProperty.stringValue = EditorGUILayout.TextField(parameterNameProperty.stringValue, GUILayout.Width(<span class="hljs-number"><span class="hljs-number">175f</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ev = Event.current; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ev.type == EventType.MouseDown || ev.type == EventType.Ignore || (ev.type == EventType.KeyDown &amp;&amp; ev.keyCode == KeyCode.Return)) { _editedNames.Remove(i); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { EditorGUILayout.LabelField(parameterNameProperty.stringValue, _nameStyle, GUILayout.Width(<span class="hljs-number"><span class="hljs-number">175f</span></span>)); } EditorGUILayout.LabelField(<span class="hljs-string"><span class="hljs-string">"Type"</span></span>, _parameterHeaderStyle, GUILayout.MaxWidth(<span class="hljs-number"><span class="hljs-number">40f</span></span>)); parameterTypeProperty.enumValueIndex = EditorGUILayout.Popup(parameterTypeProperty.enumValueIndex, parameterTypeProperty.enumDisplayNames, GUILayout.Width(<span class="hljs-number"><span class="hljs-number">75f</span></span>)); GUILayout.Space(<span class="hljs-number"><span class="hljs-number">20f</span></span>); EditorGUILayout.LabelField(<span class="hljs-string"><span class="hljs-string">"DefaultValue"</span></span>, _parameterHeaderStyle, GUILayout.Width(<span class="hljs-number"><span class="hljs-number">85f</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (parameterTypeProperty.enumValueIndex) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.TryParse(parameterDefaultValueProperty.stringValue, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = EditorGUILayout.FloatField(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); parameterDefaultValueProperty.stringValue = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToString(); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(parameterDefaultValueProperty.stringValue, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = EditorGUILayout.IntField(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); parameterDefaultValueProperty.stringValue = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToString(); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: parameterDefaultValueProperty.stringValue = EditorGUILayout.TextField(parameterDefaultValueProperty.stringValue, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>.TryParse(parameterDefaultValueProperty.stringValue, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = EditorGUILayout.Toggle(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, GUILayout.ExpandWidth(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); parameterDefaultValueProperty.stringValue = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToString(); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(<span class="hljs-string"><span class="hljs-string">"-"</span></span>, GUILayout.MaxWidth(<span class="hljs-number"><span class="hljs-number">25f</span></span>), GUILayout.MaxHeight(<span class="hljs-number"><span class="hljs-number">18f</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_editedNames.Contains(i)) { _editedNames.Remove(i); } parametersProperty.DeleteArrayElementAtIndex(i); } EditorGUILayout.EndHorizontal(); } } } }</code> </pre><br></div></div><br> æˆ‘ä¸ä¼šè§£é‡Šå¤ªå¤šä»£ç ï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚ æˆ‘åªæ³¨æ„åˆ°ç¼–è¾‘å™¨ä½¿æ‚¨å¯ä»¥é€‰æ‹©ç¼–è¾‘<b>Setting</b>ç±»å‹çš„æ‰€æœ‰èµ„äº§ã€‚ ä¸ºæ­¤ï¼Œåœ¨æ‰“å¼€çª—å£æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨<b>AssetDatabase.FindAssets</b>æ–¹æ³•<b>ï¼ˆâ€œ tï¼š{0}â€ã€‚Fmtï¼ˆtypeofï¼ˆSettingï¼‰.Nameï¼‰ï¼‰</b>åœ¨é¡¹ç›®ä¸­æ‰¾åˆ°å®ƒä»¬ã€‚ é€šè¿‡æŒ‰é’®ä¹Ÿå¯ä»¥ç¼–è¾‘å‚æ•°åç§°ï¼Œä»¥æ’é™¤å…¶æ„å¤–æ›´æ”¹ã€‚ <br><br> è¿™æ˜¯ç¼–è¾‘å™¨çš„å¤–è§‚ï¼š <br><br><img src="https://habrastorage.org/webt/x1/5a/d1/x15ad1d3gw0jeza8lzcwfybpyn0.png" alt="å›¾ç‰‡"><br><br> æˆ‘ä»¬æ£€æŸ¥äº†åº”ç”¨ç¨‹åºå†…éƒ¨ä½¿ç”¨çš„è®¾ç½®ï¼Œç°åœ¨æˆ‘ä»¬å°†è€ƒè™‘ä¸€ä¸ªæ›´å…·ä½“çš„æƒ…å†µã€‚ <br><br><h2> å¤–éƒ¨è®¾å®š </h2><br> æƒ³è±¡ä¸€ä¸ªæƒ…å†µï¼Œåœ¨å·²ç»è¿è¡Œçš„æ¸¸æˆä¸­ï¼Œæˆ‘ä»¬çªç„¶éœ€è¦æ›´æ”¹æŸäº›å€¼ä»¥è°ƒæ•´æ¸¸æˆç©æ³•ã€‚ åœ¨åŸå§‹ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„å»ºä¸­è¿›è¡Œæ›´æ”¹ï¼Œç´¯ç§¯æ›´æ”¹ï¼Œè¿›è¡Œæ›´æ–°å¹¶å°†å…¶å‘é€åˆ°å•†åº—ï¼Œç„¶åç­‰å¾…ç¡®è®¤ç­‰ã€‚ ä½†æ˜¯é‚£äº›ä¸æ›´æ–°åº”ç”¨ç¨‹åºçš„äººå‘¢ï¼Ÿ å¦‚æœéœ€è¦ç´§æ€¥è¿›è¡Œæ›´æ”¹æ€ä¹ˆåŠï¼Ÿ ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œå­˜åœ¨è¯¸å¦‚â€œ <b>è¿œç¨‹è®¾ç½®â€ä¹‹</b>ç±»çš„æœºåˆ¶ã€‚ è¿™ä¸æ˜¯ä¸€ä¸ªæ–°å‘æ˜ï¼Œå¹¶ä¸”åœ¨è®¸å¤šç¬¬ä¸‰æ–¹SDKä¸­ç”¨äºåˆ†æç­‰ï¼Œä¾‹å¦‚åœ¨<b>Firebase</b> ï¼Œ <b>GameAnalytics</b>å’Œ<b>Unity Analyticsä¸­ä½¿ç”¨</b> ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨åè€…ã€‚ <br><br>  <b>æ³¨æ„</b> ï¼š <i>é€šå¸¸ï¼Œæ‰€æœ‰è¿™äº›ç³»ç»Ÿä¹‹é—´æ²¡æœ‰åŒºåˆ«ï¼Œå®ƒä»¬æ˜¯ç›¸ä¼¼çš„å¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„åŸç†ã€‚</i> <br><br> è®©æˆ‘ä»¬æ¥è°ˆè°ˆ<b>Unity Analyticsä¸­çš„</b> <b>è¿œç¨‹è®¾ç½®</b> <b>æ˜¯</b>ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥åšä»€ä¹ˆã€‚ <br><br> ä¸ºäº†ä½¿æ­¤åŠŸèƒ½åœ¨é¡¹ç›®ä¸­å¯ç”¨ï¼Œæ‚¨éœ€è¦åœ¨â€œ <b>æœåŠ¡â€</b>é€‰é¡¹å¡ä¸Šçš„é¡¹ç›®ä¸­å¯ç”¨åˆ†æã€‚ <br><br><img src="https://habrastorage.org/webt/ki/eb/pf/kiebpfcyu4b2f53c35qzoxipd2e.png" alt="å›¾ç‰‡"><br><br> ä¹‹åï¼Œæ‚¨éœ€è¦ç™»å½•åˆ°Unity3då¸æˆ·å¹¶åœ¨å…¶ä¸­æ‰¾åˆ°æ‚¨çš„é¡¹ç›®ï¼Œç„¶åå•å‡»é“¾æ¥åˆ°â€œåˆ†æâ€éƒ¨åˆ†ï¼Œåœ¨èœå•çš„å·¦ä¾§é€‰æ‹©â€œ <b>è¿œç¨‹è®¾ç½®â€</b> ã€‚ <br><br><img src="https://habrastorage.org/webt/nj/m_/ww/njm_wwk4dwtmfut-1wdy9gugnp0.png" alt="å›¾ç‰‡"><br><br> æ‰€æœ‰è®¾ç½®éƒ½åˆ†ä¸ºåœ¨å¼€å‘æ¨¡å¼ä¸‹ä½¿ç”¨çš„è®¾ç½®å’Œå°†åœ¨å·²ç»å‘å¸ƒçš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„è®¾ç½®ã€‚ <br><br><img src="https://habrastorage.org/webt/7t/hf/ts/7thftsk8qatbs2cbhy_z6ek1alq.png" alt="å›¾ç‰‡"><br><br> è¦æ·»åŠ å‚æ•°ï¼Œè¯·é€‰æ‹©é€‚å½“çš„é¡¹ç›®ï¼Œç„¶åè¾“å…¥å‚æ•°çš„åç§°ï¼Œç±»å‹å’Œå€¼ã€‚ <br><br><img src="https://habrastorage.org/webt/jo/il/im/joilimonh5653fmucnogp5lck7m.png" alt="å›¾ç‰‡"><br><br> æ·»åŠ å®Œæ‰€æœ‰å¿…éœ€çš„å‚æ•°åï¼Œæˆ‘ä»¬éœ€è¦ä»£ç ä¸­çš„æ”¯æŒæ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚ <br><br>  <b>æ³¨æ„</b> ï¼šâ€œ <i>åŒæ­¥â€æŒ‰é’®å¯å°†è®¾ç½®ä¸åº”ç”¨ç¨‹åºåŒæ­¥ã€‚</i>  <i>è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šç«‹å³å‘ç”Ÿï¼Œä½†æ˜¯ï¼Œå½“åº”ç”¨ç¨‹åºä¸­çš„å‚æ•°æ›´æ–°æ—¶ï¼Œå°†è§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®¨è®º</i> ã€‚ <br><br> è¦ä½¿ç”¨â€œ <b>è¿œç¨‹è®¾ç½®â€ï¼Œæ‚¨</b>ä¸éœ€è¦ä»»ä½•å…¶ä»–SDKï¼Œåªéœ€æ‰“å¼€åˆ†æåŠŸèƒ½å³å¯ï¼Œå¦‚æˆ‘ä¸Šé¢æ‰€è¿°ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç”¨äºè¿œç¨‹è®¾ç½®çš„ç±»ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä¸Šè¿°è®¾ç½®ç±»ç”¨ä½œåŸºç¡€ã€‚</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RemoteSetting</span></span> : <span class="hljs-title"><span class="hljs-title">Setting</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUpdatedParameter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> updatedParameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Parameters.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameter = Parameters[i]; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (parameter.ParameterType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ParameterTypeEnum.Float: { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentValue = Get&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(parameter.Name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newValue = RemoteSettings.GetFloat(parameter.Name, currentValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentValue != newValue) { settingParameters[parameter.Name] = newValue; updatedParameters.Add(parameter.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ParameterTypeEnum.Int: { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentValue = Get&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(parameter.Name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newValue = RemoteSettings.GetInt(parameter.Name, currentValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentValue != newValue) { settingParameters[parameter.Name] = newValue; updatedParameters.Add(parameter.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ParameterTypeEnum.String: { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentValue = Get&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(parameter.Name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newValue = RemoteSettings.GetString(parameter.Name, currentValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Compare(currentValue, newValue, System.StringComparison.Ordinal) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { settingParameters[parameter.Name] = newValue; updatedParameters.Add(parameter.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ParameterTypeEnum.Bool: { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentValue = Get&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(parameter.Name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newValue = RemoteSettings.GetBool(parameter.Name, currentValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentValue != newValue) { settingParameters[parameter.Name] = newValue; updatedParameters.Add(parameter.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> updatedParameters; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> GetValue&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> paramName, T defaultValue) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(defaultValue) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoteSettings.GetFloat(paramName, f); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoteSettings.GetInt(paramName, i); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> s: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoteSettings.GetString(paramName, s); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoteSettings.GetBool(paramName, b); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; } } }</code> </pre><br></div></div><br> å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬é‡æ–°å®šä¹‰äº†<b>GetValue</b>æ–¹æ³•å¹¶æ·»åŠ äº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿æ‚¨å¯ä»¥è·å–å·²æ›´æ”¹å‚æ•°çš„åˆ—è¡¨ï¼Œç¨åæˆ‘ä»¬å°†éœ€è¦å®ƒã€‚ <br><br> ä¸Šé¢ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªåœ¨ä»£ç ä¸­ä½¿ç”¨<b>è®¾ç½®</b>çš„ç¤ºä¾‹ï¼Œè¿™å¾ˆç®€å•ï¼Œä½†æ˜¯æ²¡æœ‰è€ƒè™‘åˆ°è¿œç¨‹è®¾ç½®çš„å­˜åœ¨ï¼Œå› æ­¤ï¼Œä¸ºäº†ç»Ÿä¸€ä½¿ç”¨å•ä¸ªé”®è®¿é—®æ‰€æœ‰è®¾ç½®ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç»ç†æ¥å¸®åŠ©æ‚¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">è®¾ç½®ç®¡ç†å™¨ä»£ç </b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingsManager</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviourSingleton</span></span>&lt;<span class="hljs-title"><span class="hljs-title">SettingsManager</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Setting <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> index] =&gt; GetSetting(index); [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Setting[] _settings; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Setting&gt; _settingsByName = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Setting&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForceUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RemoteSettings.ForceUpdate(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setting <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _settings) { _settingsByName.Add(setting.name, setting); } RemoteSettings.BeforeFetchFromServer += OnRemoteSettingBeforeUpdate; RemoteSettings.Updated += OnRemoteSettingsUpdated; RemoteSettings.Completed += OnRemoteSettingCompleted; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Setting </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSetting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_settingsByName.ContainsKey(name)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _settingsByName[name]; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarningFormat(<span class="hljs-string"><span class="hljs-string">"[SettingManager]: setting name [{0}] not found"</span></span>, name); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRemoteSettingBeforeUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RemoteSettingBeforeUpdate.Call(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRemoteSettingsUpdated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setting <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _settingsByName.Values) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (setting <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> RemoteSetting) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> updatedParameter = remoteSetting.GetUpdatedParameter(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameterName <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> updatedParameter) { RemoteSettingUpdated.Call(parameterName); } } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRemoteSettingCompleted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> wasUpdatedFromServer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> settingsChanged, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> serverResponse</span></span></span><span class="hljs-function">)</span></span> { RemoteSettingsCompleted.Call(wasUpdatedFromServer, settingsChanged, serverResponse); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RemoteSettings.BeforeFetchFromServer -= OnRemoteSettingBeforeUpdate; RemoteSettings.Updated -= OnRemoteSettingsUpdated; RemoteSettings.Completed -= OnRemoteSettingCompleted; } }</code> </pre><br></div></div><br> ç»ç†ä»¥sigletonçš„å½¢å¼å‡ºç°ï¼Œä»–åªä½åœ¨ç°åœºã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä¾¿äºå‚è€ƒï¼Œå¹¶ä¸”ä¸ºäº†è½»æ¾ç®¡ç†æ¯ä¸ªåœºæ™¯ä¸­çš„ä¸€ç»„å‚æ•°ï¼ˆæ’é™¤é€»è¾‘ä¸éœ€è¦çš„å‚æ•°ï¼‰ã€‚ <br><br> å¦‚æ‚¨æ‰€è§ï¼Œ <b>RemoteSettings</b>å…·æœ‰ä¸‰ä¸ªäº‹ä»¶ï¼š <br><br><ol><li> ä»è¿œç¨‹æœåŠ¡å™¨æ¥æ”¶å‚æ•°å€¼ä¹‹å‰å¼•å‘çš„äº‹ä»¶ </li><li> å‚æ•°æ›´æ–°äº‹ä»¶ï¼ˆä»…ç”±æˆ‘ä»¬ä¹‹å‰æåˆ°çš„â€œåŒæ­¥â€æŒ‰é’®è°ƒç”¨ï¼‰ï¼Œä»¥åŠé€šè¿‡ForceUpdateå‡½æ•°å¼ºåˆ¶æ›´æ–°å‚æ•°çš„æƒ…å†µ </li><li> ä»æœåŠ¡å™¨æ”¶åˆ°æœ‰å…³è¿œç¨‹è®¾ç½®çš„æ•°æ®æ—¶è§¦å‘çš„äº‹ä»¶ã€‚ å¦‚æœå‘ç”Ÿä»»ä½•é”™è¯¯ï¼Œä¹Ÿå°†åœ¨æ­¤å¤„å‘å‡ºæœåŠ¡å™¨å“åº”ä»£ç ã€‚ </li></ol><br>  <b>æ³¨æ„</b> ï¼šè¯¥<i>ä»£ç ä½¿ç”¨åŸºäºæ•°æ®ç±»å‹çš„äº‹ä»¶ç³»ç»Ÿï¼Œæœ‰å…³å®ƒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§æˆ‘çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¦ä¸€ç¯‡æ–‡ç« </a> ã€‚</i> <br><br>  <b>æ³¨æ„</b> ï¼šæ‚¨<i>éœ€è¦äº†è§£RemoteSettingsçš„å·¥ä½œæ–¹å¼ã€‚</i>  <i>å¼€å§‹æ—¶ï¼Œå¦‚æœå¯ä»¥è®¿é—®Internetï¼Œå®ƒå°†è‡ªåŠ¨ä¸‹è½½æœ‰å…³å‚æ•°çš„æ•°æ®å¹¶å°†å…¶ç¼“å­˜ï¼Œå› æ­¤ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰Internetï¼Œåˆ™å°†ä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€‚</i>  <i>ä¾‹å¤–æƒ…å†µæ˜¯åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶å…³é—­äº†å¯¹ç½‘ç»œçš„è®¿é—®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨äºè·å–å‚æ•°å€¼çš„åŠŸèƒ½å°†è¿”å›é»˜è®¤å€¼ã€‚</i>  <i>åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œè¿™äº›æ˜¯æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥çš„å†…å®¹ã€‚</i> <br><br> ç°åœ¨ï¼Œè€ƒè™‘åˆ°ä¸Šè¿°æƒ…å†µï¼Œè®©æˆ‘ä»¬æ›´æ”¹ä½¿ç”¨ä»£ç ä¸­çš„è®¾ç½®çš„ç¤ºä¾‹ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyLogic</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> INGAME_PARAMETERS = <span class="hljs-string"><span class="hljs-string">"IngamgeParameters"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> REMOTE_RAPAMETERS = <span class="hljs-string"><span class="hljs-string">"RemoteParamteters"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _localStrValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _localIntValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _localFloatValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _localBoolValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _remoteStrValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _remoteIntValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _remoteFloatValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _remoteBoolValue; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingameParametes = SettingsManager.Instance[INGAME_PARAMETERS]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> remoteParametes = SettingsManager.Instance[REMOTE_RAPAMETERS]; _localStrValue = ingameParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyStr"</span></span>); _localIntValue = ingameParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyInt"</span></span>); _localFloatValue = ingameParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyFloat"</span></span>); _localBoolValue = ingameParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyBool"</span></span>); _remoteStrValue = remoteParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyStr"</span></span>); _remoteIntValue = remoteParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyInt"</span></span>); _remoteFloatValue = remoteParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyFloat"</span></span>); _remoteBoolValue = remoteParametes.GetParameterValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"MyBool"</span></span>); } }</code> </pre><br> å¦‚æ‚¨æ‰€è§ï¼Œä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå†…éƒ¨å’Œå¤–éƒ¨è®¾ç½®ä¹‹é—´çš„å·¥ä½œæ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯ï¼Œå¦‚æœå¿…è¦ï¼Œå¦‚æœé€»è¾‘è¦æ±‚ï¼Œæ‚¨å¯ä»¥è®¢é˜…ä¸è¿œç¨‹è®¾ç½®ç›¸å…³çš„ç®¡ç†å™¨äº‹ä»¶ã€‚ <br><br>  <b>æ³¨æ„</b> ï¼š <i>å¦‚æœåªéœ€è¦è¿œç¨‹å‚æ•°ï¼Œåˆ™å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»AssetStore</a>ä¸‹è½½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‰¹æ®Šçš„æ’ä»¶</a> ï¼Œå®ƒå…è®¸æ‚¨ç«‹å³ä½¿ç”¨å®ƒä»¬ã€‚</i> <br><br><h2> ç»“è®º </h2><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘è¯•å›¾è¯´æ˜å¦‚ä½•ä½¿ç”¨å†…éƒ¨è®¾ç½®å’Œè¿œç¨‹è®¾ç½®ç®€å•åœ°é…ç½®ç”¨Unity3dç¼–å†™çš„åº”ç”¨ç¨‹åºã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¯æ˜äº†å®ƒçš„æœ‰æ•ˆæ€§ã€‚ æˆ‘ä»¬ç”šè‡³è®¾æ³•ä½¿ç”¨è¿œç¨‹è®¾ç½®æ¥å®æ–½<b>A / Bæµ‹è¯•ç³»ç»Ÿ</b> ã€‚ æ­¤å¤–ï¼Œè¿™äº›è®¾ç½®è¢«å¹¿æ³›ç”¨äºå­˜å‚¨ä¸SDKï¼ŒæœåŠ¡å™¨å†…å®¹ä»¥åŠæ¸¸æˆè®¾ç½®ç­‰ç›¸å…³çš„å„ç§å¸¸é‡ã€‚ æ¸¸æˆè®¾è®¡å¸ˆå¯ä»¥é¢„å…ˆåˆ›å»ºä¸€ç»„å‚æ•°ï¼Œå¹¶æè¿°å¦‚ä½•ä½¿ç”¨ï¼Œä½¿ç”¨ä»€ä¹ˆå‚æ•°ä»¥åŠåœ¨ä½•å¤„ä½¿ç”¨å®ƒä»¬ï¼ŒåŒæ—¶ä»–å¯ä»¥è‡ªå®šä¹‰æ¸¸æˆç©æ³•è€Œä¸ä¼šé˜»å¡åœºæ™¯ã€‚ ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†<b>ScriptableObject</b>å¹¶å°†è¿™äº›å‚æ•°å­˜å‚¨ä¸ºèµ„äº§ï¼Œå› æ­¤å¯ä»¥é€šè¿‡<b>AssetBundle</b>åŠ è½½<b>å®ƒä»¬</b> ï¼Œè¿™è¿›ä¸€æ­¥æ‰©å±•äº†æˆ‘ä»¬çš„åŠŸèƒ½ã€‚ <br><br>  <b>æ–‡ç« ä¸­æŒ‡å®šçš„é“¾æ¥</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">habr.com/en/post/282524</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">assetstore.unity.com/packages/add-ons/services/analytics/unity-analytics-remote-settings-89317</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN436634/">https://habr.com/ru/post/zh-CN436634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN436624/index.html">ç ”ç©¶ï¼šå¤§å¤šæ•°ç”¨æˆ·ä¸äº†è§£Facebookå¦‚ä½•å¤„ç†å…¶æ•°æ®ã€‚</a></li>
<li><a href="../zh-CN436626/index.html">Pythonæˆä¸ºä¸–ç•Œä¸Šæœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ã€‚</a></li>
<li><a href="../zh-CN436628/index.html">é€šè¿‡å¢åŠ é‡å¤ç‡å’Œå¥–åŠ±æ¥æ”¹å–„åŸºäºè‚¡ç¥¨çš„Qå­¦ä¹ ä»£ç†</a></li>
<li><a href="../zh-CN436630/index.html">å¾®æœåŠ¡ã€‚ ç»Ÿä¸€åŠå…¶ä¸ºä½•å¦‚æ­¤é‡è¦ã€‚ ç¬¬1éƒ¨åˆ†-é…ç½®</a></li>
<li><a href="../zh-CN436632/index.html">æˆ‘ä»¬å¦‚ä½•æ„å»ºç”¨äºåœ¨SIBURä¸­å¤„ç†ï¼Œå­˜å‚¨å’Œåˆ†ææ•°æ®çš„ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN436636/index.html">æˆ‘å¦‚ä½•åˆ›å»ºVKontakteç¤¾åŒºæ¨èæœåŠ¡</a></li>
<li><a href="../zh-CN436638/index.html">ä»ç¡çœ æ¨¡å¼å”¤é†’åï¼Œåœ¨ç›‘è§†å™¨ä¹‹é—´é‡æ–°åˆ†é…çª—å£</a></li>
<li><a href="../zh-CN436640/index.html">æˆ‘çš„å¹¿å‘Šå’ŒAndroidå’ŒiOSåº”ç”¨ç¨‹åºå¼€å‘ç»éªŒ</a></li>
<li><a href="../zh-CN436642/index.html">æ¬§æ´²ä¹˜è½¦ç¥¨-æ¸¸æˆè¿ç®—ä¸­çš„é€‚åº¦æ­¥éª¤</a></li>
<li><a href="../zh-CN436644/index.html">åˆæˆç¬¦å·å’Œæ¨¡å—ï¼ˆWinDbg / DbgEngï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>