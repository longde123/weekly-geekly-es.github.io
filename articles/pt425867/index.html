<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§æüèΩ üë©üèΩ‚Äç‚úàÔ∏è ü§ûüèø Teste de desempenho de servi√ßo da Web como parte da Integra√ß√£o Cont√≠nua. Experi√™ncia Yandex üí¶ üíÖüèº üëµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quase todos os novos funcion√°rios da Yandex est√£o surpresos com a magnitude do estresse que nossos produtos sofrem. Milhares de hosts com centenas de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Teste de desempenho de servi√ßo da Web como parte da Integra√ß√£o Cont√≠nua. Experi√™ncia Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/425867/"><p>  Quase todos os novos funcion√°rios da Yandex est√£o surpresos com a magnitude do estresse que nossos produtos sofrem.  Milhares de hosts com centenas de milhares de solicita√ß√µes por segundo.  E este √© apenas um dos servi√ßos.  Ao mesmo tempo, devemos responder √†s solicita√ß√µes em uma fra√ß√£o de segundo.  Mesmo uma pequena altera√ß√£o no produto pode ter um impacto significativo no desempenho, por isso √© importante testar e avaliar o impacto do seu c√≥digo no servi√ßo. </p><br><p>  Em nosso servi√ßo de tecnologias de publicidade, o teste funciona dentro da estrutura da metodologia de integra√ß√£o cont√≠nua, que discutiremos em mais detalhes sobre a organiza√ß√£o de 25 de outubro no evento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Yandex por dentro</a> , e hoje compartilharemos com os leitores da Habr a experi√™ncia de automatizar a avalia√ß√£o de m√©tricas importantes de produtos relacionadas ao desempenho do servi√ßo.  Voc√™ aprender√° como confiar a an√°lise em uma m√°quina e n√£o segui-la nos gr√°ficos.  Vamos l√°! </p><br><img src="https://habrastorage.org/webt/iz/tt/0g/iztt0gctohbgmc0liwkarkwteye.jpeg"><br><p><a name="habracut"></a>  N√£o se trata de como testar o site.  Existem muitas ferramentas online para isso.  Hoje falaremos sobre um servi√ßo de back-end interno altamente carregado, que faz parte de um grande sistema e prepara informa√ß√µes para um servi√ßo externo.  No nosso caso, para p√°ginas de resultados de pesquisa e sites parceiros.  Se nosso componente n√£o tiver tempo para responder, as informa√ß√µes dele simplesmente n√£o ser√£o fornecidas ao usu√°rio.  Ent√£o, a empresa vai perder dinheiro.  Portanto, √© muito importante responder a tempo. </p><br><p>  Quais m√©tricas importantes do servidor podem ser destacadas? </p><br><ul><li>  <strong>Solicita√ß√£o por segundo (RPS)</strong> .  A felicidade de um usu√°rio √©, obviamente, importante para n√≥s.  Mas e se n√£o um, mas milhares de usu√°rios vieram at√© voc√™.  Quantas solicita√ß√µes por segundo o servidor pode suportar e n√£o cair? </li><li>  <strong>Tempo por solicita√ß√£o</strong> .  O conte√∫do do site deve ser renderizado o mais r√°pido poss√≠vel, para que o usu√°rio n√£o esteja cansado de esperar e n√£o v√° √† loja para pipoca.  No nosso caso, ele n√£o ver√° uma parte importante das informa√ß√µes na p√°gina. </li><li>  <strong>Tamanho do conjunto residente (RSS)</strong> .  Certifique-se de monitorar quanto seu programa consome mem√≥ria.  Se o servi√ßo consome toda a mem√≥ria, dificilmente √© poss√≠vel falar sobre toler√¢ncia a falhas. </li><li>  <strong>Erros de HTTP</strong> . </li></ul><br><p>  Ent√£o, vamos coloc√°-lo em ordem. </p><br><h3 id="request-per-second">  Solicita√ß√£o por segundo </h3><br><p>  Nosso desenvolvedor, que lida com o teste de carga h√° muito tempo, gosta de falar sobre os recursos cr√≠ticos do sistema.  Vamos ver o que √©. </p><br><p> Cada sistema possui suas pr√≥prias caracter√≠sticas de configura√ß√£o que determinam a opera√ß√£o.  Por exemplo, comprimento da fila, tempo limite de resposta, pool de threads de trabalho, etc.  E assim, pode acontecer que a capacidade do seu servi√ßo esteja em um desses recursos.  Voc√™ pode realizar um experimento.  Aumente cada recurso por vez.  Um recurso, cujo aumento aumentar√° a capacidade do seu servi√ßo, ser√° cr√≠tico para voc√™.  Em um sistema bem configurado, para aumentar a capacidade, voc√™ precisar√° aumentar n√£o um recurso, mas v√°rios.  Mas isso ainda pode ser "sentido".  Ser√° √≥timo se voc√™ puder configurar seu sistema para que todos os recursos funcionem com for√ßa total e o servi√ßo caiba dentro dos prazos fornecidos a ele. </p><br><p>  Para estimar quantas solicita√ß√µes por segundo seu servidor suportar√°, √© necess√°rio direcionar um fluxo de solicita√ß√µes para ele.  Como temos esse processo incorporado no sistema de CI, usamos uma "pistola" muito simples com funcionalidade limitada.  Mas, a partir do software de c√≥digo aberto, o Yandex.Tank √© perfeito para esta tarefa.  Ele possui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> detalhada.  Um presente para o Tank √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">servi√ßo</a> para visualizar os resultados. </p><br><p>  <em>Um pequeno offtop.</em>  O Yandex.Tank possui uma funcionalidade bastante rica, n√£o se limitando a automatizar solicita√ß√µes de descasque.  Tamb√©m ajudar√° a coletar m√©tricas do seu servi√ßo, criar gr√°ficos e fixar o m√≥dulo com a l√≥gica que voc√™ precisa.  Em geral, √© altamente recomend√°vel conhec√™-lo. </p><br><p>  Agora voc√™ precisa enviar solicita√ß√µes ao tanque para que ele possa disparar em nosso servi√ßo.  Os pedidos com os quais voc√™ far√° o shell do servidor podem ser do mesmo tipo, criados e propagados artificialmente.  No entanto, as medi√ß√µes ser√£o muito mais precisas se voc√™ puder coletar um conjunto real de solicita√ß√µes dos usu√°rios por um determinado per√≠odo de tempo. </p><br><p>  A capacidade pode ser medida de duas maneiras. </p><br><p>  <strong>Modelo de carga aberta (teste de estresse)</strong> </p><br><p>  Crie "usu√°rios", ou seja, v√°rios threads que enviar√£o uma solicita√ß√£o ao seu sistema.  A carga que n√£o forneceremos √© constante, mas a acumula ou alimenta em ondas.  Ent√£o nos aproximar√° da vida real.  Aumentamos o RPS e captamos o ponto em que o servi√ßo em shell "rompe" o SLA.  Assim, voc√™ pode encontrar os limites do sistema. </p><br><p>  Para calcular o n√∫mero de usu√°rios, voc√™ pode usar a f√≥rmula Little (voc√™ pode ler sobre isso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ).  Omitindo a teoria, a f√≥rmula fica assim: </p><br><p>  RPS = 1000 / T * trabalhadores, onde </p><br><p>  ‚Ä¢ T - tempo m√©dio de processamento da solicita√ß√£o (em milissegundos); <br>  ‚Ä¢ trabalhadores - o n√∫mero de threads; <br>  ‚Ä¢ Solicita√ß√µes de 1000 / T por segundo - esse valor ser√° gerado por um gerador de thread √∫nico. </p><br><p>  <strong>Modelo de carga fechada (teste de carga)</strong> </p><br><p>  Tomamos um n√∫mero fixo de "usu√°rios".  Voc√™ precisa configur√°-lo para que a fila de entrada correspondente √† configura√ß√£o do seu servi√ßo esteja sempre entupida.  Ao mesmo tempo, n√£o faz sentido aumentar o n√∫mero de encadeamentos al√©m do limite da fila, pois permaneceremos nesse n√∫mero e as solicita√ß√µes restantes ser√£o descartadas pelo servidor com um erro 5xx.  Examinamos quantas solicita√ß√µes por segundo o design poder√° emitir.  Esse esquema, no caso geral, n√£o √© semelhante ao fluxo real de solicita√ß√µes, mas ajudar√° a mostrar o comportamento do sistema em carga m√°xima e avaliar sua taxa de transfer√™ncia atual. </p><br><p>  Para a grande maioria dos sistemas (onde o recurso cr√≠tico n√£o est√° relacionado ao processamento de conex√µes), o resultado ser√° o mesmo.  Ao mesmo tempo, o modelo fechado tem menos ru√≠do, porque o sistema est√° na √°rea de carga de seu interesse o tempo todo do teste. </p><br><p>  Ao testar nosso servi√ßo, usamos um modelo fechado.  Ap√≥s o disparo, a arma nos d√° quantos pedidos por segundo nosso servi√ßo foi capaz de emitir.  Yandex.Toque neste indicador tamb√©m √© f√°cil de dizer. </p><br><h3 id="time-per-request">  Tempo por solicita√ß√£o </h3><br><p>  Se voltarmos ao par√°grafo anterior, torna-se √≥bvio que, com esse esquema, n√£o faz sentido avaliar o tempo de resposta a uma solicita√ß√£o.  Quanto mais forte for o carregamento do sistema, mais ele se degradar√° e mais ele responder√°.  Portanto, para testar o tempo de resposta, a abordagem deve ser diferente. </p><br><p>  Para obter o tempo m√©dio de resposta, usaremos o mesmo Yandex.Tank.  Somente agora definiremos o RPS correspondente ao indicador m√©dio do seu sistema em produ√ß√£o.  Ap√≥s o bombardeio, obtemos tempos de resposta para cada solicita√ß√£o.  Com base nos dados coletados, os percentis dos tempos de resposta podem ser calculados. </p><br><p>  Em seguida, voc√™ precisa entender o percentil que consideramos importante.  Por exemplo, desenvolvemos a produ√ß√£o.  Podemos deixar 1% das solicita√ß√µes de erros, n√£o respostas, solicita√ß√µes de depura√ß√£o que funcionam por um longo tempo, problemas com a rede etc.  Portanto, consideramos significativo o tempo de resposta, que acomoda 99% das solicita√ß√µes. </p><br><h3 id="resident-set-size">  Tamanho do conjunto residente </h3><br><p>  Nosso servidor trabalha diretamente com arquivos atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mmap</a> .  Medindo o √≠ndice RSS, queremos saber quanta mem√≥ria o programa consumiu do sistema operacional durante a opera√ß√£o. </p><br><p>  No Linux, o arquivo / proc / PID / smaps √© gravado - esta √© uma extens√£o baseada em mapa que mostra o consumo de mem√≥ria para cada um dos mapeamentos de processos.  Se o seu processo usar tmpfs, a mem√≥ria an√¥nima e a n√£o an√¥nima entrar√£o em smaps.  A mem√≥ria n√£o an√¥nima inclui, por exemplo, arquivos carregados na mem√≥ria.  Aqui est√° um exemplo de entrada nos smaps.  Um arquivo espec√≠fico √© especificado e seu par√¢metro Anonymous = 0kB. </p><br><pre><code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea65a60000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea65a61000 r--s <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">79169191</span></span> /place/home/.../some.yabs Size: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">0</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd mr me ms</code> </pre> <br><p>  E este √© um exemplo de aloca√ß√£o de mem√≥ria an√¥nima.  Quando um processo (o mesmo mmap) faz uma solicita√ß√£o ao sistema operacional para alocar um determinado tamanho de mem√≥ria, um endere√ßo √© alocado para ele.  Enquanto o processo ocupa apenas mem√≥ria virtual.  Neste ponto, ainda n√£o sabemos qual parte f√≠sica da mem√≥ria ser√° alocada.  Vemos um registro sem nome.  Este √© um exemplo de aloca√ß√£o de mem√≥ria an√¥nima.  Foi solicitado ao sistema o tamanho de 24572 kB, mas eles n√£o o utilizaram e, na verdade, apenas RSS = 4 kB foi obtido. </p><br><pre> <code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea67264000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea68a63000 rw-p <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Size: <span class="hljs-number"><span class="hljs-number">24572</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">4</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd wr mr mw me ac</code> </pre> <br><p>  Como a mem√≥ria n√£o an√¥nima alocada n√£o ir√° a lugar algum ap√≥s a interrup√ß√£o do processo, o arquivo n√£o ser√° exclu√≠do, n√£o estamos interessados ‚Äã‚Äãnesse RSS. </p><br><p>  Antes de come√ßar a filmar no servidor, resumimos o RSS de / proc / PID / smaps, alocado para mem√≥ria an√¥nima e lembre-se dele.  Realizamos bombardeios, semelhante ao tempo de teste por solicita√ß√£o.  Depois de terminar, considere o RSS novamente.  A diferen√ßa entre o estado inicial e o final ser√° a quantidade de mem√≥ria que seu processo usou durante a opera√ß√£o. </p><br><h3 id="http-oshibki">  Erros HTTP </h3><br><p>  N√£o esque√ßa de seguir os c√≥digos de resposta que o servi√ßo retorna durante o teste.  Se algo na configura√ß√£o de teste ou ambiente deu errado, e o servidor retornou erros 5xx e 4xx para todas as suas solicita√ß√µes, n√£o havia muito sentido em tal teste.  Estamos monitorando a propor√ß√£o de respostas ruins.  Se houver muitos erros, o teste ser√° considerado inv√°lido. </p><br><h3 id="nemnogo-o-tochnosti-izmereniy">  Um pouco sobre a precis√£o da medi√ß√£o </h3><br><p>  E agora a coisa mais importante.  Vamos voltar aos par√°grafos anteriores.  Os valores absolutos das m√©tricas calculadas por n√≥s, ao que parece, n√£o s√£o t√£o importantes para n√≥s.  N√£o, √© claro, voc√™ pode alcan√ßar a estabilidade dos indicadores, levando em considera√ß√£o todos os fatores, erros e flutua√ß√µes.  Paralelamente, escreva um trabalho cient√≠fico sobre esse t√≥pico (a prop√≥sito, se algu√©m estava procurando um, essa pode ser uma boa op√ß√£o).  Mas n√£o √© isso que nos interessa. </p><br><p>  √â importante influenciarmos o commit espec√≠fico no c√≥digo em rela√ß√£o ao estado anterior do sistema.  Ou seja, a diferen√ßa entre as m√©tricas de confirma√ß√£o para confirma√ß√£o √© importante.  E aqui √© necess√°rio configurar um processo que compare essa diferen√ßa e, ao mesmo tempo, garanta a estabilidade do valor absoluto nesse intervalo. </p><br><p>  O ambiente, solicita√ß√µes, dados, status do servi√ßo - todos os fatores dispon√≠veis para n√≥s devem ser corrigidos.  √â esse sistema que trabalha para n√≥s como parte da integra√ß√£o cont√≠nua, fornecendo informa√ß√µes sobre todos os tipos de mudan√ßas que ocorreram em cada confirma√ß√£o.  Apesar disso, n√£o ser√° poss√≠vel consertar tudo, haver√° ru√≠do.  Podemos reduzir o ru√≠do, obviamente, aumentando a amostra, ou seja, fazendo v√°rias itera√ß√µes do disparo.  Al√©m disso, depois de gravar, digamos, 15 itera√ß√µes, podemos calcular a mediana da amostra resultante.  Al√©m disso, √© necess√°rio encontrar um equil√≠brio entre o ru√≠do e a dura√ß√£o do disparo.  Por exemplo, resolvemos um erro de 1%.  Se voc√™ deseja escolher um m√©todo estat√≠stico mais complexo e preciso, de acordo com seus requisitos, recomendamos um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">livro</a> que lista as op√ß√µes com uma descri√ß√£o de quando e qual √© usado. </p><br><h3 id="chto-eschyo-mozhno-sdelat-s-shumom">  O que mais pode ser feito com barulho? </h3><br><p>  Observe que o ambiente em que voc√™ realiza os testes desempenha um papel importante nesses testes.  A bancada de testes deve ser confi√°vel, n√£o deve executar outros programas, pois podem levar √† degrada√ß√£o do seu servi√ßo.  Al√©m disso, os resultados podem e depender√£o do perfil de carga, ambiente, banco de dados e v√°rias "tempestades magn√©ticas". </p><br><p>  Como parte de um √∫nico teste de confirma√ß√£o, realizamos v√°rias itera√ß√µes em hosts diferentes.  Em primeiro lugar, se voc√™ usar a nuvem, tudo poder√° acontecer l√°.  Mesmo que a nuvem seja especializada, como a nossa, os processos de servi√ßo ainda funcionam l√°.  Portanto, voc√™ n√£o pode confiar no resultado de um host.  E se voc√™ tem um host de ferro, onde n√£o h√°, como na nuvem, mecanismo padr√£o para elevar o ambiente, pode quebr√°-lo acidentalmente uma vez e deix√°-lo dessa maneira.  E ele sempre mentir√° para voc√™.  Portanto, conduzimos nossos testes na nuvem. </p><br><p>  √â verdade que outra quest√£o surge disso.  Se suas medidas s√£o feitas a cada vez em hosts diferentes, os resultados podem fazer um pouco de barulho e, por causa disso, incluir.  Em seguida, voc√™ pode normalizar as leituras para o host.  Ou seja, de acordo com dados hist√≥ricos, colete o "coeficiente do host" e leve em considera√ß√£o ao analisar os resultados. </p><br><p>  A an√°lise de dados hist√≥ricos mostra que o hardware √© diferente.  A palavra "hardware" aqui inclui a vers√£o do kernel e as conseq√º√™ncias do tempo de atividade (aparentemente, objetos do kernel n√£o m√≥veis na mem√≥ria). </p><br><p>  Assim, para cada "host" (na reinicializa√ß√£o, o host "morre" e um "novo" aparece), associamos uma corre√ß√£o pela qual multiplicamos o RPS antes da agrega√ß√£o. </p><br><p>  Consideramos e atualizamos as emendas de uma maneira extremamente desajeitada, reminiscentemente suspeita de alguma op√ß√£o de treinamento de refor√ßo. </p><br><p>  Para um determinado vetor de corre√ß√µes p√≥s -ost, consideramos a fun√ß√£o objetivo: </p><br><ul><li>  em cada teste, consideramos o desvio padr√£o dos resultados do RPS "corrigido" obtidos </li><li>  tirar a m√©dia deles com pesos iguais <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&amp;#x2212;</mo><mi>a</mi><mi>g</mi><mi>o</mi><mi>r</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="35.344ex" height="2.66ex" viewBox="0 -832 15217.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-78" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-70" x="1039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-28" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-28" x="1932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-74" x="2321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-65" x="2683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-73" x="3149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-74" x="3619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-74" x="3980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-69" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-6D" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-65" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-73" x="6032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-74" x="6502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-61" x="6863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-6D" x="7393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-70" x="8271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-2212" x="8997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-61" x="9997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-67" x="10527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-6F" x="11007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-72" x="11493" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-61" x="11944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-29" x="12474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-2F" x="12863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-74" x="13364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-61" x="13725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMATHI-75" x="14255" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhiA7VVqz68V0z5bpOjRljpR1hH26Q#MJMAIN-29" x="14827" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>‚àí</mo><mi>a</mi><mi>g</mi><mi>o</mi><mi>r</mi><mi>a</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> exp ((testtimestamp - agora) / tau) </script>  , </li><li>  temos tau = 1 semana. </li></ul><br><p>  Em seguida, fixamos uma corre√ß√£o (para o host com a maior soma desses pesos) em 1,0 e procuramos os valores de todas as outras corre√ß√µes que fornecem um m√≠nimo da fun√ß√£o objetivo. </p><br><p>  Para validar os resultados em dados hist√≥ricos, consideramos as corre√ß√µes nos dados antigos, consideramos o resultado corrigido no fresco, comparamos com o n√£o corrigido. </p><br><p>  Outra op√ß√£o para ajustar resultados e reduzir o ru√≠do √© normalizar para "sint√©ticos".  Antes de iniciar o servi√ßo a ser testado, execute um "programa sint√©tico" no host, no qual voc√™ pode avaliar o estado do host e calcular o fator de corre√ß√£o.  Mas, no nosso caso, usamos corre√ß√µes baseadas em host, e essa ideia permaneceu uma ideia.  Talvez um de voc√™s goste dela. </p><br><p>  Apesar da automa√ß√£o e de todas as suas vantagens, n√£o se esque√ßa da din√¢mica de seus indicadores.  √â importante garantir que o servi√ßo n√£o se degrade ao longo do tempo.  Voc√™ pode n√£o perceber pequenos rebaixamentos, eles podem se acumular e, por um longo per√≠odo, seus indicadores podem ceder.  Aqui est√° um exemplo de nossos gr√°ficos que estamos vendo no RPS.  Ele mostra o valor relativo em cada confirma√ß√£o verificada, seu n√∫mero e a capacidade de ver de onde a libera√ß√£o foi alocada. </p><br><img src="https://habrastorage.org/webt/qu/lj/_h/qulj_hvry8sfubkrt285xlzidsq.png"><br><img src="https://habrastorage.org/webt/gp/76/o9/gp76o9rgelvep5u8rrpyoricmfs.png"><br><p>  Se voc√™ ler o artigo, ser√° definitivamente interessante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ver um</a> relat√≥rio sobre o Yandex.Tank e uma an√°lise dos resultados dos testes de carga. </p><br><p>  Tamb√©m lembramos que, com mais detalhes sobre a organiza√ß√£o da integra√ß√£o cont√≠nua, falaremos sobre 25 de outubro no evento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Yandex por dentro</a> .  Venha visitar! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425867/">https://habr.com/ru/post/pt425867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425851/index.html">Infer.NET: Poderoso sistema de aprendizado de m√°quina agora √© de c√≥digo aberto</a></li>
<li><a href="../pt425853/index.html">Todas as IA de conversa√ß√£o na primeira confer√™ncia de conversas</a></li>
<li><a href="../pt425855/index.html">Twitch me fez melhorar e me ajudou a sobreviver aos tr√™s meses mais sombrios da minha vida.</a></li>
<li><a href="../pt425859/index.html">Operadores regionais se op√µem ao cancelamento de roaming</a></li>
<li><a href="../pt425861/index.html">Teste voc√™ mesmo: voc√™ pode proteger a empresa contra ataques cibern√©ticos?</a></li>
<li><a href="../pt425869/index.html">iFixit: Apple ainda n√£o ativou o bloqueio de MacBooks recondicionados</a></li>
<li><a href="../pt425871/index.html">Ecaterimburgo, 11 de outubro - Atlassian encontra estivador</a></li>
<li><a href="../pt425873/index.html">[CppCon 2018] Herb Sutter: em dire√ß√£o a um C ++ mais simples e mais poderoso</a></li>
<li><a href="../pt425875/index.html">Atualiza√ß√£o da matriz do notebook TN-> IPS ou como obter um laptop mais avan√ßado a partir de um laptop econ√¥mico</a></li>
<li><a href="../pt425877/index.html">CEO da Apple diz que chips chineses de espionagem em servidores Supermicro s√£o fic√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>