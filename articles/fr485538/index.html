<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤱 👸🏽 👦🏻 Zabbix: surveillez tout de suite (sur l'exemple de Redis) 🔏 🙆🏻 👩🏻‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zabbix est un excellent produit pour les administrateurs de gros systèmes logiciels et matériels. Il est si bon qu'il peut être utilisé non seulement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zabbix: surveillez tout de suite (sur l'exemple de Redis)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485538/"><p> <a href="https://www.zabbix.com/ru/" rel="nofollow">Zabbix</a> est un excellent produit pour les administrateurs de gros systèmes logiciels et matériels.  Il est si bon qu'il peut être utilisé non seulement par les grandes entreprises, mais aussi par les petites et moyennes entreprises, et même dans un projet pour <code>pet</code> .  En général, j'ai peu d'expérience avec Zabbix et je peux recommander son utilisation en toute sécurité. </p><br><p>  Certes, je ne peux pas dire que je comprends la « <em>philosophie de Zabbix</em> ».  Malgré la vaste documentation détaillée en russe, il m'a été difficile de me plonger dans le monde de Zabbix - j'avais l'impression que les développeurs et moi appelions les mêmes choses sous des noms différents.  Peut-être parce que Zabbix a été créé par des administrateurs pour des administrateurs, mais je suis toujours plus développeur et utilisateur. </p><br><p>  Cependant, pour exécuter Zabbix et surveiller les principaux paramètres des systèmes informatiques (processeur, mémoire, etc.), les compétences d'un utilisateur Linux régulier suffisent.  Il existe un grand nombre de plug-ins de développeurs tiers qui étendent les capacités de Zabbix.  Pour mes besoins, j'avais besoin de configurer la surveillance du serveur Redis.  J'ai fouillé un peu dans le code des plug-ins disponibles et, à l'aide de leur exemple, j'ai découvert que l'architecture de Zabbix vous permet de simplement connecter tous les paramètres du système d'information qui peuvent être exprimés sous forme numérique à la surveillance. </p><br><p>  Sous le chat - un exemple de plugin Zabbix avec mon explication de la terminologie Zabbix.  Pour certains, cet exemple semblera naïf, mais pour certains, il sera plus facile de se familiariser avec les concepts.  Dans tous les cas, Zabbix <a href="http://irinagold.pro/na-kogo-pohozh-slon-pritcha/" rel="nofollow">est suffisamment grand pour</a> le ressentir sous différents angles. </p><a name="habracut"></a><br><h1 id="bazovye-ponyatiya">  Concepts de base </h1><br><p>  En bref sur certains des concepts utilisés dans Zabbix: <em>agents</em> , <em>éléments</em> , <em>déclencheurs</em> , <em>actions</em> , <em>notifications</em> , <em>modèles</em> . </p><br><h2 id="server-i-agenty">  Serveur et agents </h2><br><p>  Du point de vue de l'utilisateur, Zabbix est divisé en deux grandes parties: serveur et agents.  Le serveur est situé sur une machine, qui collecte et stocke des données statistiques, et des agents sur les machines à partir desquelles les données sont collectées: </p><br><p><img src="https://habrastorage.org/webt/22/cc/y2/22ccy2szuqjhs0eprqqxkn29-2e.png" alt="Serveur et agents Zabbix"></p><br><h2 id="parametry-monitoringa">  Options de surveillance </h2><br><p>  Toute quantité qui peut être exprimée sous forme numérique ou chaîne est appelée dans la terminologie de Zabbix - un élément de données (élément).  Chaque élément est associé à une <a href="https://www.zabbix.com/documentation/current/ru/manual/config/items/item/key" rel="nofollow">clé</a> unique (nom).  Voici des exemples d'éléments de données: </p><br><ul><li>  <strong>system.cpu.load [percpu, avg1]</strong> : 0.1167 </li><li>  <strong>system.uname</strong> : "Linux supru 4.15.0-50-generic # 54-Ubuntu SMP lun 6 mai 18:46:08 UTC 2019 x86_64" </li></ul><br><p>  Les valeurs de ces éléments de données (paramètres de surveillance) sont attachées au temps; l'historique des valeurs des paramètres est stocké dans la base de données du serveur. </p><br><h2 id="sobytiya">  Les événements </h2><br><p>  Lorsqu'un événement se produit dans Zabbix, un déclencheur se déclenche.  Par exemple </p><br><ul><li>  <strong>{system.cpu.load [percpu, avg1] .avg (5m)}&gt; 10</strong> - la valeur moyenne du paramètre au cours des 5 dernières minutes a dépassé "10" </li><li>  <strong>{system.uname.diff (0)}&gt; 0</strong> - la valeur actuelle du paramètre n'est pas égale à la valeur précédente </li></ul><br><p>  En fait, les déclencheurs sont des formules dans lesquelles les paramètres de surveillance (actuels et enregistrés) agissent comme des variables et qui produisent <code>true</code> / <code>false</code> en sortie. </p><br><h2 id="deystviya-i-opovescheniya">  Actions et alertes </h2><br><p>  En cas d'événement (déclencheur), le serveur peut effectuer une action.  Par exemple, envoyez une alerte par e-mail à une adresse donnée (" <em>Problème: l'hôte est inaccessible pendant 5 minutes</em> ").  En outre, une action peut être effectuée si le déclencheur revient à son état d'origine (« <em>Résolu: l'hôte est inaccessible pendant 5 minutes</em> »).  Tous les événements (déclenchement de commutation) sont enregistrés côté serveur. </p><br><h2 id="shablony">  Patterns </h2><br><p>  Zabbix permet de configurer des règles de surveillance pour un hôte individuel, ainsi que de créer un modèle de règle (modèle) qui peut être appliqué à différents hôtes: </p><br><p><img src="https://habrastorage.org/webt/4t/yt/qw/4tytqw7tog1do4nsqoizzxjbglw.png" alt="modèles zabbix"></p><br><p>  L'exemple montre que le modèle «Template App SSH Service» décrit une application (Applications), un paramètre de surveillance (Items), un déclencheur (Triggers).  Des descriptions de graphiques, d'écrans, de règles de découverte et de scripts Web sont également disponibles. </p><br><h1 id="postanovka-zadachi-dlya-plagina">  Définition de la tâche pour le plugin </h1><br><h2 id="nachalnoe-polozhenie">  Position de départ </h2><br><p>  Zabbix lui-même propose son <a href="https://www.zabbix.com/ru/integrations/redis" rel="nofollow">propre plugin</a> pour surveiller l'état de Redis, mais sur ma version du serveur (4.2.8) je n'ai pas pu l'utiliser (plugin pour la version 4.4 et supérieure).  <a href="https://www.zabbix.com/ru/integrations/redis" rel="nofollow">Des solutions de tiers</a> sont également proposées (une dizaine d'options pour différentes versions de Zabbix, il n'y a que les trois premières dans l'image): </p><br><p><img src="https://habrastorage.org/webt/bv/pt/tk/bvpttkxf9lkxqn2thcnwwacutyw.png" alt="Plugins redis pour zabbix"></p><br><p>  Chacun d'eux avait ses propres avantages et inconvénients, devait regarder à l'intérieur pour choisir.  Le meilleur, à mon avis, était le <a href="https://github.com/Shakeeljaveed/zabbix-redis-userparamaters" rel="nofollow">plugin Shakeeljaveed / zabbix-redis-userparamaters</a> , qui comprenait deux fichiers: </p><br><ul><li>  README.md </li><li>  redis-userparameter.conf </li></ul><br><p>  Je devais travailler un peu "stylos", mais sur son exemple, il est devenu un peu plus clair comment les données de l'agent vont au serveur.  À la suggestion de l'auteur <a href="https://github.com/Shakeeljaveed" rel="nofollow">Javeed Shakeel, l'</a> état <a href="https://github.com/Shakeeljaveed" rel="nofollow">de Redis a</a> été réinitialisé toutes les 2 minutes par la couronne dans le <code>/tmp/redismetric</code> : </p><br><pre> <code class="plaintext hljs">*/2 * * * * /usr/bin/redis-cli info &gt; /tmp/redismetric</code> </pre> <br><p>  Ensuite, chaque paramètre de surveillance a été extrait par l'agent du <code>/tmp/redismetric</code> à l'aide des outils du système d'exploitation lui-même.  Des instructions ont été placées dans la configuration de l'agent Zabbix <code>/etc/zabbix/zabbix_agent.conf.d/userparameter_redis.conf</code> .  Par exemple, <code>used_memory</code> l'instruction de récupération du paramètre <code>used_memory</code> (utilisation de la mémoire par le serveur Redis): </p><br><pre> <code class="plaintext hljs">UserParameter=used_memory,grep -w 'used_memory' /tmp/redismetric | cut -d: -f2</code> </pre> <br><p>  Autrement dit, dans le <code>/tmp/redismetric</code> avec la sortie de <code>redis-cli INFO</code> , la chaîne ( <code>grep -w ...</code> ) est recherchée par la clé <code>used_memory</code> </p><br><pre> <code class="plaintext hljs">used_memory:7153216</code> </pre> <br><p>  qui est ensuite divisé en colonnes par le séparateur ":" ( <code>cut -d: -f2</code> ).  En sortie, l'agent reçoit le numéro <code>7153216</code> et l'affecte au paramètre <code>used_memory</code> . </p><br><p>  Il reste à configurer le serveur via l'interface Web afin qu'il envoie périodiquement des demandes à l'agent pour recevoir des données en utilisant le paramètre <code>used_memory</code> , après quoi les données commencent à être <code>used_memory</code> sur le serveur, stockées dans la base de données, vous pouvez l'utiliser pour construire des graphiques et créer des déclencheurs qui répondent aux modifications de ce paramètre. </p><br><h2 id="cel">  But </h2><br><p>  La tâche de surveiller l'état de tout système n'est pas seulement la collecte de statistiques, mais aussi un avertissement sur la survenance de situations nécessitant une intervention humaine.  Comme je travaille avec Redis en tant qu'utilisateur très novice, j'ai dû chercher des informations sur les paramètres de "santé" auxquels prêter attention et ce qu'ils signifient.  L'article le plus digne était " <a href="https://scalegrid.io/blog/6-crucial-redis-monitoring-metrics/" rel="nofollow">6 mesures de surveillance Crucial Redis que vous devez surveiller</a> ".  Après l'avoir analysé, je suis arrivé à la conclusion que «pour un bonheur complet», je dois collecter des données pour détecter les événements suivants: </p><br><ul><li>  Fragmentation de la mémoire: used_memory_rss / used_memory&gt; 1.5 </li><li>  Faible taux d'accès au cache: (keyspace_hits) / (keyspace_hits + keyspace_misses) &lt;0,8 </li><li>  Connexions rejetées: rejeté_connexions&gt; 0 </li><li>  Clés expulsées: evicted_keys&gt; 0 </li></ul><br><p>  Je souhaitais également collecter des statistiques sur des paramètres supplémentaires (version Redis, disponibilité, etc.).  En général, ayant une idée générale de la façon dont les données sont collectées par l'agent et transmises au serveur, la liste de souhaits peut être considérablement limitée.  En conséquence, nous avons obtenu une liste de paramètres pour la surveillance à partir de 12 positions. </p><br><h1 id="sozdanie-sobstvennogo-plagina">  Créez votre propre plugin </h1><br><h2 id="parametry-monitoringa-1">  Options de surveillance </h2><br><p>  Le plugin que j'ai analysé a supposé l'exécution d'une commande distincte pour obtenir un paramètre distinct (élément de données, élément): </p><br><pre> <code class="plaintext hljs">grep -w 'used_memory' /tmp/redismetric | cut -d: -f2</code> </pre> <br><p>  Autrement dit, pour obtenir des données sur 12 paramètres, l'agent devra exécuter différents ensembles de commandes 12 fois.  Et si j'ai besoin de surveiller des paramètres difficiles à extraire par une chaîne de commandes et que je dois écrire un script shell séparé ou un programme à part entière?  Pour une telle "liste de souhaits", Zabbix propose une variante avec des éléments de données dépendants.  Son essence est que du côté de l'agent, le script forme un ensemble de données (par exemple, au format JSON), qui est transmis au serveur en tant que paramètre de chaîne.  Ensuite, côté serveur, les données reçues sont analysées et des paramètres élémentaires individuels en sont extraits. </p><br><h3 id="osnovnoy-element-dannyh">  Élément de données principal </h3><br><p>  J'ai décrit l' <code>redis.info</code> données principal <code>redis.info</code> type de chaîne avec une période de mise à jour de 1 min, sans enregistrer l'historique des modifications: </p><br><p><img src="https://habrastorage.org/webt/hz/_m/tn/hz_mtnfj7n2uqzbssnnsdhtpgq4.png" alt="article de base"></p><br><p>  Vraisemblablement, le JSON suivant devrait être généré côté agent: </p><br><pre> <code class="plaintext hljs">{ "version": "4.0.9", "uptime": 1897336, "used_memory": 1054943416, "used_memory_rss": 1138159616, "keyspace_hits": 75810274, "keyspace_misses": 13545949, "connected_clients": 15, "rdb_last_save_time": 1580126954, "total_connections_received": 1258614, "rejected_connections": 0, "expired_keys": 60270, "evicted_keys": 0 }</code> </pre> <br><p>  après quoi ce texte doit être <code>redis.info</code> au serveur en tant <code>redis.info</code> données <code>redis.info</code> , mais pas enregistré, mais servir de base à d'autres éléments de données (paramètres de surveillance). </p><br><h3 id="zavisimyy-element-dannyh">  Élément de données dépendant </h3><br><p>  Le paramètre de test <code>redis.info.version</code> dépend de <code>redis.info</code> et stocke ses valeurs dans la base de données pendant 90 jours.  La fréquence de surveillance des paramètres dépend de l'élément de base ( <code>redis.info</code> ): </p><br><p><img src="https://habrastorage.org/webt/eu/3u/jy/eu3ujyhzzyful-jrh8ceyqxsoz4.png" alt="article dépendant (base)"></p><br><p>  La <code>redis.info.version</code> paramètre <code>redis.info.version</code> est extraite de la valeur redis.info à l'aide des instructions JSONPath: </p><br><p><img src="https://habrastorage.org/webt/pn/3j/ad/pn3jad7k78sxnpq7pl1ubne9btk.png" alt="article dépendant (prétraitement)"></p><br><p>  Un schéma similaire décrit les éléments de données dépendants restants (paramètres de surveillance), qui sont transmis sous forme de JSON.  Voici un exemple de la description du paramètre numérique <code>redis.info.used_memory</code> : </p><br><p><img src="https://habrastorage.org/webt/rh/_t/d8/rh_td8dczrfqa2ejsihinaobiho.png" alt="poste de numéro dépendant (base)"></p><br><p>  Tout est assez transparent, à l'exception des <code>Units</code> et <code>Trend storage period</code> .  Je n'ai pas compris le deuxième point, je l'ai laissé par défaut, et les unités de mesure sont expliquées dans la <a href="https://www.zabbix.com/documentation/current/ru/manual/appendix/suffixes" rel="nofollow">documentation</a> .  Dans ce cas, la valeur de <code>redis.info.used_memory</code> est mesurée en octets et réduite à kilo / mega / giga /...- octets dans l'interface Web. </p><br><p>  La formule pour extraire une valeur de JSON est: <code>JSONPath = $.used_memory</code> </p><br><h3 id="vychislyaemyy-element-dannyh">  Élément de données calculé </h3><br><p>  Pour calculer la fragmentation de la mémoire, la relation <code>used_memory_rss</code> / <code>used_memory</code> est utilisée et, sur sa base, un déclencheur est déterminé qui se déclenche lorsque le rapport dépasse 1,5.  Zabbix a un type d'élément de données calculé: </p><br><p><img src="https://habrastorage.org/webt/iy/sd/4g/iysd4g2bqofdmwrvp9cpbguzvzo.png" alt="élément calc"></p><br><p>  La valeur du paramètre <code>redis.info.used_memory_ratio</code> calculée toutes les minutes sur la base des dernières valeurs de deux autres paramètres ( <code>redis.info.used_memory_rss</code> et <code>redis.info.used_memory</code> ), est stockée dans la base de données pendant 90 jours, etc. </p><br><h2 id="triggery">  Déclencheurs </h2><br><p>  Voici un exemple de déclencheur qui se déclenche lorsque la mémoire est trop fragmentée: </p><br><p><img src="https://habrastorage.org/webt/bl/81/oj/bl81ojowbfvanebjn9nefzoh29w.png"></p><br><p>  Rien d'inhabituel, à l'exception du format d'expression utilisé dans la formule de changement d'état du déclencheur.  Zabbix a un concepteur de formulaire, vous pouvez l'utiliser ou vous référer à la <a href="https://www.zabbix.com/documentation/current/ru/manual/config/triggers/expression" rel="nofollow">documentation</a> / exemples (la liste des déclencheurs est disponible via l'interface web à " <em>Configuration / Templates / $ {TemplateName} / Triggers</em> "). </p><br><p>  Un déclencheur peut être basé sur tous les éléments de données (élément), quel que soit leur type (principal, dépendant, calculé). </p><br><h2 id="nastroyka-agenta">  Configuration de l'agent </h2><br><h3 id="generaciya-jsona">  Génération JSON </h3><br><p>  Pour obtenir les valeurs des paramètres de surveillance et la formation de JSON, j'utilise ce script shell: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ## =========================================================================== # Script to generate Redis monitoring data in JSON format # for 'zabbix-agent'. ## =========================================================================== # collect working variables/data BIN_REDIS=$(whereis -b redis-cli | cut -d" " -f2) # /usr/bin/redis-cli DATA_INFO=$(${BIN_REDIS} INFO | tr -d '\r') # get info and remove trailing '\r' from output ## # Extract stats and save it into env. vars. ## # find lines with 'grep', cut second field after ":" and put it into env. variable: ITEM_VERSION=$(grep "^redis_version:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_UPTIME=$(grep "^uptime_in_seconds:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_USED_MEMORY=$(grep "^used_memory:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_USED_MEMORY_RSS=$(grep "^used_memory_rss:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_KEYSPACE_HITS=$(grep "^keyspace_hits:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_KEYSPACE_MISSES=$(grep "^keyspace_misses:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_CONNECTED_CLIENTS=$(grep "^connected_clients:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_RDB_LAST_SAVE_TIME=$(grep "^rdb_last_save_time:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_TOTAL_CONNECTIONS_RECEIVED=$(grep "^total_connections_received:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_REJECTED_CONNECTIONS=$(grep "^rejected_connections:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_EXPIRED_KEYS=$(grep "^expired_keys:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_EVICTED_KEYS=$(grep "^evicted_keys:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) # compose output JSON for Zabbix server: echo -n "{" echo -n "\"version\": \"${ITEM_VERSION}\"," echo -n "\"uptime\": ${ITEM_UPTIME}," echo -n "\"used_memory\": ${ITEM_USED_MEMORY}," echo -n "\"used_memory_rss\": ${ITEM_USED_MEMORY_RSS}," echo -n "\"keyspace_hits\": ${ITEM_KEYSPACE_HITS}," echo -n "\"keyspace_misses\": ${ITEM_KEYSPACE_MISSES}," echo -n "\"connected_clients\": ${ITEM_CONNECTED_CLIENTS}," echo -n "\"rdb_last_save_time\": ${ITEM_RDB_LAST_SAVE_TIME}," echo -n "\"total_connections_received\": ${ITEM_TOTAL_CONNECTIONS_RECEIVED}," echo -n "\"rejected_connections\": ${ITEM_REJECTED_CONNECTIONS}," echo -n "\"expired_keys\": ${ITEM_EXPIRED_KEYS}," echo -n "\"evicted_keys\": ${ITEM_EVICTED_KEYS}" echo -n "}"</span></span></code> </pre> <br><p>  J'ai placé ce script dans le fichier <code>/var/lib/zabbix/user_parameter/redis/get_info.sh</code> sur le serveur avec Redis, sur lequel l'agent Zabbix est déjà installé.  L'utilisateur sous lequel l'agent Zabbix est <code>zabbix</code> (généralement <code>zabbix</code> ) doit avoir l'autorisation d'exécuter le fichier <code>get_info.sh</code> . </p><br><h2 id="fayl-userparameter_xxxconf">  Fichier <code>userparameter_XXX.conf</code> </h2><br><p>  Côté agent, des paramètres de surveillance supplémentaires sont <code>userparameter_*.conf</code> dans les <code>userparameter_*.conf</code> du répertoire <code>userparameter_*.conf</code> .  Par conséquent, afin que l'agent découvre comment il doit collecter des données sur le paramètre <code>redis.info</code> , j'ai créé le fichier <code>/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf</code> avec le contenu suivant: </p><br><pre> <code class="plaintext hljs">UserParameter=redis.info,/var/lib/zabbix/user_parameter/redis/get_info.sh</code> </pre> <br><p>  Autrement dit, pour obtenir des données sur le paramètre <code>redis.info</code> agent doit exécuter le script <code>/var/lib/zabbix/user_parameter/redis/get_info.sh</code> et transférer le résultat de l'exécution sur le serveur. </p><br><p>  Après avoir redémarré l'agent Zabbix ( <code>sudo service zabbix-agent restart</code> ), il devient possible de collecter des données pour le paramètre <code>redis.info</code> et de les envoyer au serveur. </p><br><h1 id="rezyume">  Résumé </h1><br><p>  Comprendre Zabbix m'est venu (et vient toujours) assez dur.  Néanmoins, je le considère comme un excellent outil, surtout après que la simplicité d'ajouter mes propres paramètres de surveillance (éléments de données) s'est ouverte pour moi.  Dans l'ensemble, il suffit d'ajouter un fichier au serveur avec l'agent ( <code>userparameter_XXX.conf</code> ) avec une commande shell pour collecter des données et configurer le serveur Zabbix pour recevoir ces données via l'interface Web.  Et c'est tout - vous pouvez accumuler des données, créer des graphiques, analyser les changements et créer un déclencheur qui répond à ces changements. </p><br><p>  Le code du modèle, le fichier <code>userparameter_redis.conf</code> et le script <code>get_info.sh</code> peuvent être consultés dans le <a href="https://github.com/flancer32/zabbix_plugin_redis/tree/habr" rel="nofollow">projet flancer32 / zabbix_plugin_redis</a> . </p><br><p>  Merci à tous ceux qui ont lu jusqu'à la fin, et surtout à ceux qui ont trouvé quelque chose d'utile dans la publication. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485538/">https://habr.com/ru/post/fr485538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485528/index.html">Comment conclure un projet de développement logiciel de la bonne façon</a></li>
<li><a href="../fr485530/index.html">Apprentissage guidé</a></li>
<li><a href="../fr485532/index.html">Guide d'entrevue pour les programmeurs qui ne les comprennent pas</a></li>
<li><a href="../fr485534/index.html">HighLoad ++, Mikhail Makurov (Intersvyaz): expérience dans la création d'une sauvegarde et d'un service Zabbix en cluster</a></li>
<li><a href="../fr485536/index.html">Est-il possible de pirater un avion - 2</a></li>
<li><a href="../fr485542/index.html">Ajouter des graphiques à Notion</a></li>
<li><a href="../fr485544/index.html">Les échecs comme système dynamique</a></li>
<li><a href="../fr485546/index.html">L'apocalypse arrive</a></li>
<li><a href="../fr485548/index.html">SwiftUI sur les étagères</a></li>
<li><a href="../fr485550/index.html">Y a-t-il de la vie au-delà du périphérique de Moscou? Comment nous recherchons et préparons les développeurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>