<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏾 🧀 🕺🏻 Wie ist der Frontend-Test in Yandex.Market aufgebaut und warum lehnen wir wöchentliche Releases ab? 💰 🧕🏽 😍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle, mein Name ist Sergey. Ich teste das Yandex.Market-Frontend. Ich weiß, dass es unter den Lesern von Habr viele IT-Spezialisten gibt, die...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ist der Frontend-Test in Yandex.Market aufgebaut und warum lehnen wir wöchentliche Releases ab?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/478862/"><img src="https://habrastorage.org/webt/dh/z6/nh/dhz6nhsvrc4fhyicfnofz4tgizu.png"><br><br>  Hallo an alle, mein Name ist Sergey.  Ich teste das Yandex.Market-Frontend.  Ich weiß, dass es unter den Lesern von Habr viele IT-Spezialisten gibt, die in irgendeiner Weise mit dem Freigabeprozess und dem Testen verbunden sind.  Ich habe eine Frage an Sie.  Ist es in Ihrer Praxis schon einmal vorgekommen, dass die Funktionen in der Produktion für längere Zeit nicht funktionieren?  Kennen Sie aufgeblähte Freisetzungen und deren Volumenprüfungen? <br><br>  Ich denke, jeder hatte das.  Ich bin vor 3 Jahren zu Yandex gekommen, unser Team war sehr jung, die Prozesse waren nicht vollständig etabliert.  Und ich bin diesen Problemen von Angesicht zu Angesicht begegnet. <br><a name="habracut"></a><br><h2>  Wie war </h2><br><img src="https://habrastorage.org/webt/ps/hh/7v/pshh7vfmiswwwmjoznesp1rzrjw.png"><br><br>  Zu diesem Zeitpunkt hatten unsere Produktteams keinen bestimmten Verantwortungsbereich und waren nur mit dem Projekt befasst, für das sie erstellt wurden.  Dann fielen sie auseinander.  Das Testen war auch nicht an Entwicklungsteams gebunden.  Es bestand als Dienst und war bei Bedarf mit dem Projekt verbunden. <br><br>  Die Aufgaben wurden nur von Hand überprüft, die Integrationstests waren instabil, der Prozentsatz der Abdeckung mit Autotests war gering.  Die Überprüfung dauerte sehr lange.  Der Pool kalkulierbarer Aufgaben wuchs stetig und konnte enorme Ausmaße erreichen. <br><br>  Bei den Releases war einer der Manager mit der Montage und Berechnung beschäftigt.  Wir haben mit allen Managern Gespräche geführt und entschieden, was in die nächste Version fällt und was verschoben werden könnte. <br><br>  Sie überprüften die Veröffentlichungen nach dem Zufallsprinzip: Wer auch immer die Zeit hatte, sie zu überprüfen, überprüfte er.  Der Schwerpunkt lag auf manuellen Regressionstests, die mehrere Tage dauern können.  Und das trotz der Tatsache, dass die Veröffentlichung eine Reihe von Autotests lief und es eine Abteilung gab, die sie schrieb und unterstützte. <br><br>  Das gelöste Problem wurde getestet und konnte bis zu 2 Tage lang getestet werden.  Dann stieg sie in die Freilassung ein, es wurde noch 4 Tage nachgeprüft.  Die Aufgabe stellte sich bestenfalls in einer Woche heraus.  Wenigen gefiel es, es musste etwas geändert werden.  Und das Wichtigste, was geändert werden muss, sind die Prozesse. <br><br><h2>  Kontur </h2><br><img src="https://habrastorage.org/webt/v6/wf/hv/v6wfhvlpocaorazppkobsajkmee.png"><br><br>  Als erstes haben wir eine Unterteilung in Konturen eingeführt - Teams von Spezialisten aus verschiedenen Bereichen.  Im Gegensatz zu früheren Teams brechen die Konturen nach Projektende nicht auf.  Sie generieren weiterhin neue Projekte und Ideen in ihrem Verantwortungsbereich. <br><br>  In jedem Stromkreis sind 1 bis 3 Tester für die Prüfung verantwortlich.  Jeder verantwortliche Schaltungstester ist in allen Phasen der Produktentwicklung von der Idee bis zur Nachbesprechung anwesend. <br><br><h2>  Im Dienst </h2><br>  Um die Arbeit von Releases zu strukturieren, haben wir zwei Rollen in unserem Testteam eingeführt: einen Release-Assistenten und einen Release-Tester.  Als Release-Master haben wir 4 Tester gleichzeitig im Dienst, jeder ist am Release-Dienst beteiligt.  Für jede dieser Rollen haben wir einen Dienstplan erstellt. <br><br>  Aufgaben, die während des Betriebs auftreten, haben Vorrang vor dem Testen von Produkteigenschaften in Schaltkreisen.  Damit die Tester nicht lange ohne Unterbrechung warten müssen, ist der Freigabedienst wie folgt geregelt: Eine Schicht ist von Montag bis Mittwoch im Einsatz, die zweite - von Mittwoch bis Ende Freitag.  In jeder Schicht - 4 Personen, 2 Personen pro Plattform. <br><br><h2>  Die Dokumentation </h2><br>  Und was ist mit der Dokumentation?  Wir haben nicht so viel, aber es ist.  Beim Rollout von Features ermitteln wir beispielsweise zusammen mit den Entwicklern und dem Manager die optimale Anzahl von Autotests.  Wenn wir etwas nicht automatisieren können oder wenn ein Feature eine sofortige Veröffentlichung ohne Autotests erfordert, schreiben wir einen Fall in die Testsuite aller Marktüberprüfungsfälle und nehmen ihn gegebenenfalls in die Release-Testsuite der Regressionstests auf. <br><br>  Wenn wir die Fehlerbehebungen überprüfen und feststellen, dass der Autotest nicht für den Fehler geschrieben wurde, stellen wir auch die Aufgabe, ihn zu entwickeln, und die Bearbeitung beginnt sofort mit dem darauf geschriebenen Test. <br><br>  Bei der Zusammenstellung jedes Experiments haben wir eine Checkliste, da wir nicht im Voraus wissen, ob das Experiment erfolgreich sein wird. <br><br><img src="https://habrastorage.org/webt/qv/eg/b7/qvegb7zf6jtgni5am5d5iymv43u.png"><br><br>  Eine Checkliste besteht aus einer Reihe positiver Überprüfungen der Merkmale eines Experiments.  Der Release-Tester verwendet es bei jedem Release, während das Experiment ausgeführt wird.  Diese Checkliste kann auch für zukünftige Automatisierungsaufgaben leer sein, wenn das Experiment erfolgreich ist und wir sie an 100% der Benutzer ausrollen. <br><br>  Bei der Überprüfung von Releases verwenden wir je nach Komplexität und Fülle des Releases verschiedene Testkits.  Wir haben sowohl kleine Testsuiten als auch Suiten mit der maximalen Anzahl von Testfällen.  Welche Testsuite verwendet werden soll, entscheidet der Release-Tester. <br><br>  In einigen Bereichen verwenden wir auch die Checkliste der positiven Prüfungen für Entwickler.  Damit kann der Entwickler die Aufgabe selbst überprüfen und Engpässe bei der Entwicklung von Features vorhersehen.  Wenn der Tester im Projekt gewechselt hat, hilft dies dem neuen Spezialisten, sich dem Projekt schnell anzuschließen.  Checklisten werden vor dem Beginn der Entwicklung unmittelbar nach der Planung der Aufgabe erstellt. <br><br><img src="https://habrastorage.org/webt/gc/7k/8p/gc7k8pst8ctac9kvorihwqoint4.png"><br><br>  Das ist alles für die Docks. <br><br><h2>  Wie wir Aufgaben testen </h2><br>  Wir verwenden verschiedene Testdesign-Techniken: Äquivalenzklassen, Grenzwerte, paarweises Testen, Benutzerszenarien.  Das Fachwissen des Testers ist ebenfalls sehr wichtig.  Der Markt ist eine große Maschine, und Sie müssen wissen, wie alle ihre Teile funktionieren, um etwas zu reparieren oder zu verbessern.  Zum Beispiel haben wir 4 Arten von Warenkarten und 6 Arten von Warenproblemen.  Ohne dies zu wissen, ist es einfach unmöglich, die Aufgabe der Änderung dieser Seiten qualitativ zu testen. <br><br>  Eine wichtige Rolle bei der Überprüfung von Aufgaben spielen Autotests.  Wir führen für jede Aufgabe, die wir implementieren, funktionierende Autotests durch, analysieren Abstürze und melden Fehler. <br><br><img src="https://habrastorage.org/webt/gq/io/vj/gqiovjyxvl0m32wjxtu81weo7wg.png"><br><br>  In besonderen Fällen, wenn die Aufgabe viele Komponenten des Marktes betrifft, führen wir auch Bildschirmtests durch - sie helfen uns, Fehler zu erkennen. <br><br><img src="https://habrastorage.org/webt/d4/5s/fo/d45sfouziah0uw6ndaf2wx-6vyy.png"><br><br>  Wenn die Aufgabenüberprüfung abgeschlossen ist, hinterlassen wir einen Kommentar, dass alles in Ordnung ist und die Aufgabe freigegeben werden kann.  Im Kommentar geben wir an, wie viele Tests geschrieben wurden, oder wir sagen, dass keine Tests erforderlich sind, und wir übersetzen die Aufgabe in den Status "ausstehende Freigabe". <br><br>  Anschließend wird die Aufgabe vom Freigabeassistenten übernommen und zusammen mit anderen bewährten Aufgaben an die Freigabe gesendet.  Wir versuchen, Releases mit Aufgaben zu füllen, damit diese innerhalb von 8 Stunden von 4 Testern überprüft werden können: 2 für die Touch-Version des Market und 2 für die Desktop-Version.  Unser Ziel ist es, mindestens 5 Releases herauszubringen.  Das heißt, die Geschwindigkeit, mit der die Aufgabe an das Produkt übergeben wird, hat sich im Vergleich zu ihrer ursprünglichen Geschwindigkeit um das Fünffache erhöht. <br><br><h2>  So prüfen wir Releases </h2><br>  Wir beginnen die Freigabe zu überprüfen, indem wir die automatischen Tests und Bildschirmtests überprüfen.  Nachdem wir uns die Berichte angesehen haben, können wir sofort bis zu 90% der Probleme beheben.  Wir analysieren den Absturz von Tests: Wenn sie auf einen Fehler zurückzuführen sind oder durch ein Ticket in der Version beschädigt wurden, suchen wir nach der Aufgabe, in der dieser Absturz reproduziert wird, und fordern eine Reparatur an.  Wenn dies nicht getan wird, fällt die Aufgabe nicht in die Freigabe. <br><br>  Tests können auch von selbst sterben.  In diesem Fall deaktivieren wir den Test vom Autotest-Lauf und starten die Aufgabe, ihn zu reparieren und gegebenenfalls den Mox zu erstellen. <br><br>  Abhängig von den Aufgaben in der Version können wir das vollständige Release-Testkit verwenden oder die manuelle Regression vollständig ablehnen.  Die Entscheidung treffen die Release-Tester. <br><br>  Wenn die Version mehrere kleine Änderungen enthält, wird die Aufgabenüberprüfung lokal durchgeführt und die manuelle Regression durch die Überprüfung der automatischen Testberichte ersetzt. <br><br>  Unabhängig von der Vollständigkeit der Freigabe und der Aufgaben überprüft das Team der Freigabeprüfer die Experimente, die derzeit für verschiedene Prozentsätze der Benutzer in der Produktion gezeigt werden.  Es wird eine von einem Testgerät erstellte Checkliste verwendet. <br><br>  Wenn alle Überprüfungen abgeschlossen sind, hinterlässt der Release-Tester einen Kommentar, in dem er alle Release-Aktivitäten auflistet und gegebenenfalls Aufgaben zur Behebung fehlerhafter Tests schreibt. <br><br><img src="https://habrastorage.org/webt/m0/6f/4p/m06f4pyixg0yoliq2bxpwebwqa8.png"><br><br>  Der Freigabestamm analysiert die Feuermeldungen (Lasttests) und startet sie neu, wenn er einen Anstieg der Fehler feststellt.  Wenn dies nicht hilft, sucht er den Täter oder bittet den diensthabenden Entwickler um Hilfe. <br><br>  Wenn mit den Aufnahmeergebnissen alles in Ordnung ist, öffnet der Veröffentlichungsassistent die Charts des Marktes und beginnt mit der Einführung der Veröffentlichung in die Produktion.  Sie müssen den Diagrammen folgen, um das Anwachsen von Fehlern nicht zu verpassen. <br><br><img src="https://habrastorage.org/webt/lm/mv/-t/lmmv-tpvnzoevlhuxtup9g-2wje.png"><br><br>  Wenn das Release für das Anwachsen von Fehlern verantwortlich ist, wird es vom Release-Master zurückgesetzt, und die Gründe werden verstanden.  Wenn die Zeitpläne normal sind, schließt er die Freigabe ab und beginnt, einen neuen von vorgefertigten Aufgaben zu sammeln. <br><br><h2>  Streben nach dem Besten </h2><br>  Trotz der Tatsache, dass alles gut funktioniert, sollten Sie immer das Beste anstreben.  Wir stehen kurz vor einer besseren kontinuierlichen Lieferung, bei der Aufgaben parallel und ohne Zwischenstufe in Form einer Freigabe in der Produktion getestet und ausgerollt werden.  Auf diese Weise können Sie sich bei Veröffentlichungen nicht von der Überwachung ablenken lassen und die Bereitstellung von Funktionen für Benutzer erheblich beschleunigen. <br><br><img src="https://habrastorage.org/webt/s-/vj/hj/s-vjhj21amhpeay9yblz52t0fv8.png"><br><br>  Wir beschlossen, schrittweise auf CD umzusteigen.  Der erste Schritt war die Einführung eines Monorepositorys, bei dem die Funktionalität für beide Plattformen - Touch und Desktop - in einer Version bereitgestellt wird.  Dieser Ansatz hat sowohl für die Entwicklung als auch für das Testen Vorteile.  Wir verbringen viel weniger Zeit mit dem Testen der Komponente.  Aufgaben sind jetzt an einem Ort, was die Navigation erleichtert.  Für den Manager ist die Navigation einfacher, da er den genauen Zeitpunkt für das Ausrollen der Freigabeaufgabe im Produkt kennt und kein Spiel zwischen dem Ausrollen der Plattformen besteht. <br><br>  Der nächste Schritt zur CD ist die Einführung der „grünen Wunde“.  Für jedes vom Tester überprüfte Ticket werden zwei Testtypen für beide Plattformen gestartet: Funktionstests und Bildschirmtests.  Alle Tests müssen Moki haben.  Wenn die Tests für eine der Plattformen fehlschlagen, wird die Aufgabe nicht als verifiziert betrachtet.  Wenn der Test abstürzt, müssen Sie verstehen, warum dies passiert ist.  Nur wenn keine Falltests vorliegen und alle Überprüfungen erfolgreich abgeschlossen wurden, wird die Aufgabe an das Produkt gesendet. <br><br>  Vielen Dank für Ihre Aufmerksamkeit.  Ich hoffe, unsere Erfahrung hat Ihnen geholfen, ich warte in den Kommentaren auf Sie. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de478862/">https://habr.com/ru/post/de478862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de478850/index.html">CSS Grid Naming</a></li>
<li><a href="../de478852/index.html">Einführung in GitOps für OpenShift</a></li>
<li><a href="../de478854/index.html">Der Kampf der Webserver. Teil 1 - HTTP von der Realität getrennt:</a></li>
<li><a href="../de478856/index.html">SD-WAN - aktuelle Trends und Prognosen für 2020</a></li>
<li><a href="../de478858/index.html">Vergleichen von Profilierungssitzungen in XHProf Admin</a></li>
<li><a href="../de478866/index.html">Meet Space - Neues Produkt von JetBrains</a></li>
<li><a href="../de478872/index.html">DIY: Wie wir die Lagerüberwachung automatisieren</a></li>
<li><a href="../de478874/index.html">Toshiba hat zwei neue Festplattenreihen mit einer Kapazität von bis zu 6 TB angekündigt und seine Ausrichtung auf das Unternehmenssegment seit 2020 angekündigt</a></li>
<li><a href="../de478878/index.html">Das beliebteste Stück Code in der Geschichte von StackOverflow hat einen Fehler!</a></li>
<li><a href="../de478884/index.html">Wie man RTSP auf der Baustelle im Jahr 2020 vorbereitet oder warum Eber keine Zeit haben zu entkommen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>