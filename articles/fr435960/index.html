<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∑ ü§≤üèª üë®‚Äçüè≠ Exp√©rience de pens√©e: Flutter on Go ‚ûø ü¶ê üë®üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Plus r√©cemment, j'ai d√©couvert Flutter - un nouveau cadre de Google pour d√©velopper des applications mobiles multiplateformes - et j'ai m√™me eu l'occa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exp√©rience de pens√©e: Flutter on Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435960/"><p>  Plus r√©cemment, j'ai d√©couvert <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flutter</a> - un nouveau cadre de Google pour d√©velopper des applications mobiles multiplateformes - et j'ai m√™me eu l'occasion de montrer les bases de Flutter √† une personne qui n'avait jamais programm√© auparavant.  Flutter lui-m√™me a √©t√© √©crit en Dart - une langue n√©e dans le navigateur Chrome et s'est √©chapp√©e dans le monde de la console - et cela m'a fait penser "hmm, mais Flutter pourrait tr√®s bien √™tre √©crit en Go!". </p><br><p>  Pourquoi pas?  Go et Dart ont tous deux √©t√© cr√©√©s par Google, deux langues compil√©es typ√©es - tourner autour de certains √©v√©nements un peu diff√©remment, Go serait un excellent candidat pour la mise en ≈ìuvre d'un projet √† grande √©chelle comme Flutter.  Quelqu'un dira - il n'y a pas de classes, de g√©n√©riques et d'exceptions dans Go, donc cela ne convient pas. </p><br><p>  Imaginons donc que Flutter soit d√©j√† √©crit en Go.  √Ä quoi ressemblera le code et, en g√©n√©ral, fonctionnera-t-il? </p><br><p><img src="https://habrastorage.org/webt/9r/4y/cv/9r4ycvikoillhjboi5olwnta4nm.png"></p><a name="habracut"></a><br>
<h1 id="chto-ne-tak-s-dart">  Quel est le probl√®me avec Dart? </h1><br><p>  J'ai suivi ce langage depuis sa cr√©ation comme alternative √† JavaScript dans les navigateurs.  Dart a √©t√© int√©gr√© au navigateur Chrome pendant un certain temps et l'espoir √©tait qu'il supplanterait JS.  Il √©tait incroyablement triste de lire en mars 2015 que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prise en charge de Dart avait √©t√© supprim√©e de Chrome</a> . </p><br><p>  Dart lui-m√™me est super!  Eh bien, fondamentalement, apr√®s JavaScript, n'importe quel langage est g√©nial, mais apr√®s, disons, Go, Dart n'est pas si beau.  mais √ßa va.  Il a toutes les fonctionnalit√©s imaginables et inconcevables - classes, g√©n√©riques, exceptions, futurs, asynchrone, boucle d'√©v√©nement, JIT / AOT, garbage collector, surcharge de fonction - nommez toute caract√©ristique connue de la th√©orie des langages de programmation et dans Dart ce sera avec une proportion √©lev√©e probabilit√©s.  Dart a une syntaxe sp√©ciale pour presque toutes les puces - une syntaxe sp√©ciale pour les getters / setters, une syntaxe sp√©ciale pour les constructeurs abr√©g√©s, une syntaxe sp√©ciale pour une syntaxe sp√©ciale et bien plus encore. </p><br><p>  Cela rend Dart d√®s le premier coup d'≈ìil familier aux personnes qui ont d√©j√† programm√© dans n'importe quel langage de programmation auparavant, et c'est g√©nial.  Mais en essayant d'expliquer toute cette abondance de fonctionnalit√©s sp√©ciales dans un simple exemple "Hello, world", j'ai trouv√© que cela, au contraire, le rend difficile √† ma√Ætriser. </p><br><ul><li>  <strong>toutes les caract√©ristiques "sp√©ciales" du langage pr√™taient √† confusion</strong> - "une m√©thode sp√©ciale appel√©e constructeur", "une syntaxe sp√©ciale pour l'initialisation automatique", "une syntaxe sp√©ciale pour les param√®tres nomm√©s", etc. </li><li>  <strong>tout ce qui √©tait "cach√©" pr√™tait √† confusion</strong> - "de quelle importation est cette fonction? elle est cach√©e, en regardant le code que vous ne pouvez pas d√©couvrir", "pourquoi y a-t-il un constructeur dans cette classe, mais pas dans cette classe? il est l√†, mais il est cach√©" et ainsi de suite </li><li>  <strong>tout "ambigu" confondu</strong> - "donc ici pour cr√©er les param√®tres de la fonction avec ou sans noms?", "devrait-il √™tre const ou final?", "utilisez la syntaxe normale de la fonction ici ou '' raccourci avec fl√®che ''", etc. </li></ul><br><p>  En principe, cette trinit√© - "sp√©ciale", "cach√©e" et "ambigu√´" - pas mal capture l'essence de ce que les gens appellent "magie" dans les langages de programmation.  Ce sont des fonctionnalit√©s cr√©√©es pour simplifier l'√©criture du code, mais en fait compliquer sa lecture et sa compr√©hension. </p><br><p>  Et c'est exactement le domaine dans lequel Go prend une position fondamentalement diff√©rente des autres langues et tient farouchement la d√©fense.  Go est une langue avec presque aucune magie - la quantit√© de "cach√©", "sp√©cial" et "ambigu" est minimis√©e.  Mais Go a ses inconv√©nients. </p><br><h1 id="chto-ne-tak-s-go">  Quel est le probl√®me avec Go? </h1><br><p>  √âtant donn√© que nous parlons de Flutter, et qu'il s'agit d'un cadre d'interface utilisateur, consid√©rons Go comme un outil pour d√©crire et travailler avec l'interface utilisateur.  En g√©n√©ral, les cadres d'interface utilisateur repr√©sentent un √©norme d√©fi et n√©cessitent presque toujours des solutions sp√©cialis√©es.  L'une des approches les plus courantes dans l'interface utilisateur est la cr√©ation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DSL</a> - langages sp√©cifiques au domaine - impl√©ment√©s sous la forme de biblioth√®ques ou de cadres adapt√©s sp√©cifiquement aux besoins de l'interface utilisateur.  Et le plus souvent, vous pouvez entendre l'opinion que Go est objectivement un mauvais langage pour DSL. </p><br><p>  En substance, DSL signifie cr√©er un nouveau langage - termes et verbes - sur lequel le d√©veloppeur peut op√©rer.  Le code doit d√©crire clairement les principales caract√©ristiques de l'interface graphique et de ses composants, √™tre suffisamment flexible pour laisser libre cours √† l'imagination du concepteur, et en m√™me temps √™tre suffisamment rigide pour la restreindre conform√©ment √† certaines r√®gles.  Par exemple, vous devriez pouvoir placer les boutons sur un conteneur et placer l'ic√¥ne au bon endroit dans ce bouton, mais le compilateur doit renvoyer une erreur si vous essayez d'ins√©rer le bouton dans, disons, du texte. </p><br><p>  De plus, les langages de description de l'interface utilisateur sont souvent d√©claratifs - donnant la possibilit√© de d√©crire l'interface sous la forme de ¬´ce que j'aimerais voir¬ª, et de laisser le framework lui-m√™me comprendre √† partir de quel code et comment l'ex√©cuter. </p><br><p>  Certaines langues ont √©t√© initialement d√©velopp√©es avec de telles t√¢ches en vue, mais pas Go.  Il semble que l'√©criture de Flutter on Go sera une autre t√¢che! </p><br><h1 id="oda-flutter">  Oda Flutter </h1><br><p>  Si vous ne connaissez pas Flutter, je vous recommande fortement de passer le week-end prochain √† regarder des vid√©os √©ducatives ou √† lire des tutoriels, dont il existe de nombreux.  Car Flutter, sans aucun doute, renverse les r√®gles du jeu dans le d√©veloppement d'applications mobiles.  Et, tr√®s probablement, non seulement mobile - il existe d√©j√† des moteurs de rendu (en termes de Flutter, incorporeurs) pour lancer des applications Flutter en tant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'applications dekstop natives</a> et en tant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'applications Web</a> . </p><br><p> Il est facile √† apprendre, il est logique, il est livr√© avec une √©norme biblioth√®que de beaux widgets sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Material Design</a> (et pas seulement), il a une grande et grande communaut√© et un excellent r√©glage (si vous aimez la facilit√© de travailler avec <code>go build/run/test</code> dans Go, puis dans Flutter vous obtiendrez une exp√©rience similaire). </p><br><p>  Il y a un an, j'avais besoin d'√©crire une petite application mobile (pour iOS et Android, bien s√ªr), et j'ai r√©alis√© que la complexit√© du d√©veloppement d'une application de haute qualit√© pour les deux plates-formes est trop grande (l'application n'√©tait pas la t√¢che principale) - j'ai d√ª externaliser et payer pour cela.  En fait, √©crire une application simple mais de haute qualit√© et travailler sur tous les appareils √©tait une t√¢che impossible, m√™me pour une personne avec pr√®s de 20 ans d'exp√©rience en programmation.  Et cela a toujours √©t√© absurde pour moi. </p><br><p>  Avec Flutter, j'ai r√©√©crit cette application en 15 heures, tout en apprenant le framework lui-m√™me √† partir de z√©ro.  Si quelqu'un me disait que cela pourrait √™tre un peu plus t√¥t, je ne le croirais pas. </p><br><p>  La derni√®re fois que j'ai vu une augmentation similaire de la productivit√© avec la d√©couverte de nouvelles technologies, c'√©tait il y a 5 ans lorsque j'ai d√©couvert Go.  Ce moment a chang√© ma vie. </p><br><p>  Je recommande donc de commencer √† apprendre Flutter et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce tutoriel est tr√®s bon</a> . </p><br><h1 id="hello-world-na-flutter">  "Bonjour, le monde" sur Flutter </h1><br><p>  Lorsque vous cr√©ez une nouvelle application via <code>flutter create</code> , vous obtiendrez exactement un tel programme avec un titre, du texte, un compteur et un bouton qui incr√©mente le compteur. </p><br><p><img src="https://habrastorage.org/webt/_1/iu/9g/_1iu9gibgfkoiyadzl0kb8be_j4.gif"></p><br><p>  Je pense que c'est un excellent exemple.  pour l'√©crire sur notre imaginaire Flutter on Go.  Il contient presque tous les concepts de base du cadre sur lesquels vous pouvez tester l'id√©e.  Regardons le code (c'est un fichier): </p><br><pre> <code class="plaintext hljs">import 'package:flutter/material.dart'; void main() =&gt; runApp(MyApp()); class MyApp extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( title: 'Flutter Demo', theme: ThemeData( primarySwatch: Colors.blue, ), home: MyHomePage(title: 'Flutter Demo Home Page'), ); } } class MyHomePage extends StatefulWidget { MyHomePage({Key key, this.title}) : super(key: key); final String title; @override _MyHomePageState createState() =&gt; _MyHomePageState(); } class _MyHomePageState extends State&lt;MyHomePage&gt; { int _counter = 0; void _incrementCounter() { setState(() { _counter++; }); } @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text(widget.title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text( 'You have pushed the button this many times:', ), Text( '$_counter', style: Theme.of(context).textTheme.display1, ), ], ), ), floatingActionButton: FloatingActionButton( onPressed: _incrementCounter, tooltip: 'Increment', child: Icon(Icons.add), ), ); } }</code> </pre> <br><p>  Analysons le code en plusieurs parties, analysons ce qu'il contient et comment il s'ins√®re sur Go, et examinons les diff√©rentes options dont nous disposons. </p><br><h2 id="perevodim-kod-na-go">  Nous traduisons le code sur Go </h2><br><p>  Le d√©but sera simple et direct - importez la d√©pendance et lancez la fonction <code>main()</code> .  Rien de compliqu√© ou d'int√©ressant ici, le changement est presque syntaxique: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { app := NewApp() flutter.Run(app) }</code> </pre> <br><p>  La seule diff√©rence est qu'au lieu de lancer <code>MyApp()</code> - une fonction qui est un constructeur qui est une fonction sp√©ciale qui est cach√©e dans une classe appel√©e MyApp - nous appelons simplement la fonction explicite et non cach√©e <code>NewApp()</code> .  Elle fait la m√™me chose, mais il est beaucoup plus clair d'expliquer et de comprendre ce que c'est, comment √ßa commence et comment √ßa marche. </p><br><h3 id="klassy-vidzhetov">  Classes de widgets </h3><br><p>  Dans Flutter, tout se compose de widgets.  Dans la version Dart de Flutter, chaque widget est impl√©ment√© comme une classe qui h√©rite des classes sp√©ciales pour les widgets de Flutter. </p><br><p>  Il n'y a pas de classes dans Go, et donc pas de hi√©rarchie de classes, car le monde n'est pas orient√© objet, et encore moins hi√©rarchique.  Pour les programmeurs familiaris√©s uniquement avec le mod√®le OOP orient√© classe, cela peut √™tre une r√©v√©lation, mais ce n'est vraiment pas le cas.  Le monde est un graphique g√©ant entrelac√© de concepts, de processus et d'interactions.  Il n'est pas parfaitement structur√©, mais pas chaotique, et essayer de le presser dans une hi√©rarchie de classes est le moyen le plus fiable de rendre la base de code illisible et maladroite - exactement ce que la plupart des bases de code sont pour l'instant. </p><br><p><img src="https://habrastorage.org/webt/gd/9f/ad/gd9fadtyygideailxszfgw2cs_k.png"></p><br><p>  J'appr√©cie vraiment Go parce que ses cr√©ateurs ont pris la peine de repenser ce concept omnipr√©sent de classes et ont impl√©ment√© dans Go un concept OOP beaucoup plus simple et plus puissant, qui, par hasard, s'est av√©r√© plus proche de ce que le cr√©ateur de OOP, Alan Kay, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avait en t√™te</a> . </p><br><p>  Dans Go, nous repr√©sentons toute abstraction sous la forme d'un type-structure sp√©cifique: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Dans la version Dart de Flutter, <code>MyApp</code> doit h√©riter <code>StatelessWidget</code> et remplacer la m√©thode de <code>build</code> .  Cela est n√©cessaire pour r√©soudre deux probl√®mes: </p><br><ol><li>  donner √† notre widget ( <code>MyApp</code> ) des propri√©t√©s / m√©thodes sp√©ciales </li><li>  permettre √† Flutter d'appeler notre code dans le processus de g√©n√©ration / rendu </li></ol><br><p>  Je ne connais pas les √©l√©ments internes de Flutter, alors disons que l'article num√©ro 1 n'est pas en cause, et nous devons simplement le faire.  Go a une solution unique et √©vidente pour cela: les types d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">int√©gration</a> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Ce code ajoutera toutes les propri√©t√©s et m√©thodes <code>MyApp</code> √† notre type <code>MyApp</code> .  Je l'ai appel√© <code>Core</code> au lieu de <code>Widget</code> , car, d'une part, l'incorporation de type ne fait pas encore de <code>MyApp</code> widget, et d'autre part, ce nom est tr√®s bien utilis√© dans le framework GopherJS Vecty (quelque chose comme React, uniquement pour Go).  J'aborderai le sujet de la similitude entre Vecty et Flutter un peu plus tard. </p><br><p>  Le deuxi√®me point - l'impl√©mentation de la m√©thode <code>build()</code> , qui pourra utiliser le moteur Flutter - est √©galement r√©solu simplement et sans ambigu√Øt√© dans Go.  Nous avons juste besoin d'ajouter une m√©thode avec une signature sp√©cifique qui satisfait une certaine interface d√©finie quelque part dans notre biblioth√®que fictive Flutter sur Go: </p><br><p>  flutter.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Build(ctx BuildContext) Widget }</code> </pre> <br><p>  Et maintenant notre main.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core <span class="hljs-comment"><span class="hljs-comment">// ... } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.MaterialApp() }</span></span></code> </pre> <br><p>  Nous pouvons remarquer quelques diff√©rences ici: </p><br><ul><li>  le code est un peu plus d√©taill√© - <code>BuildContext</code> , <code>Widget</code> et <code>MaterialApp</code> pointent pour <code>flutter</code> importations devant eux. </li><li>  le code est l√©g√®rement moins infond√© - il n'y a pas de mots comme <code>extends Widget</code> <code>@override</code> ou <code>@override</code> </li><li>  La m√©thode <code>Build()</code> commence par une majuscule, car elle signifie la "publicit√©" de la m√©thode dans Go.  Dans Dart, la publicit√© est d√©termin√©e par le fait que le nom commence par un trait de soulignement (_) ou non. </li></ul><br><p>  Donc, pour cr√©er un widget dans notre Flutter on Go, nous devons int√©grer le type <code>flutter.Core</code> et impl√©menter l'interface <code>flutter.Widget</code> .  Nous l'avons compris, creusons plus loin. </p><br><h2 id="sostoyanie">  Condition </h2><br><p>  C'√©tait l'une des choses qui m'ont vraiment d√©rout√© √† Flutter.  Il existe deux classes diff√©rentes - <code>StatelessWidget</code> et <code>StatefulWidget</code> .  Quant √† moi, un "widget sans √©tat" est le m√™me widget, juste sans, hmm, donn√©es, √©tat - pourquoi trouver une nouvelle classe?  Mais d'accord, je peux vivre avec. </p><br><p>  Mais plus loin - plus, vous ne pouvez pas simplement h√©riter d'une autre classe ( <code>StatefulWidget</code> ), mais vous devez √©crire une telle magie (l'EDI le fera pour vous, mais pas le point): </p><br><pre> <code class="plaintext hljs">class MyHomePage extends StatefulWidget { @override _MyHomePageState createState() =&gt; _MyHomePageState(); } class _MyHomePageState extends State&lt;MyHomePage&gt; { int _counter = 0; void _incrementCounter() { setState(() { _counter++; }); } @override Widget build(BuildContext context) { return Scaffold() } }</code> </pre> <br><p>  Hmm, voyons ce qui se passe ici. </p><br><p>  Fondamentalement, la t√¢che est la suivante: ajouter un √©tat au widget - un compteur, dans notre cas - et informer le moteur Flutter lorsque nous avons chang√© d'√©tat pour redessiner le widget.  C'est la vraie complexit√© du probl√®me (complexit√© essentielle en termes de Brooks). </p><br><p>  Tout le reste est une complexit√© accidentelle.  Flutter on Dart propose une nouvelle classe <code>State</code> qui utilise des g√©n√©riques et prend un widget comme param√®tre de type.  Ensuite, la classe <code>_MyHomePageState</code> est <code>_MyHomePageState</code> , qui h√©rite de l' <code>State  MyApp</code> ... d'accord, vous pouvez toujours le dig√©rer d'une mani√®re ou d'une autre.  Mais pourquoi la m√©thode <code>build()</code> d√©finie par la classe State et non par la classe du widget?  Brrr .... </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La r√©ponse √† cette question se</a> trouve dans la FAQ Flutter et la r√©ponse courte est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">consid√©r√©e</a> suffisamment en d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> - pour √©viter une certaine classe de bogues lors de l'h√©ritage de <code>StatefulWidget</code> .  En d'autres termes, il s'agit d'une solution de contournement pour r√©soudre le probl√®me de la conception OOP orient√©e classe.  Chic. </p><br><p>  Comment ferions-nous cela dans Go? </p><br><p>  Premi√®rement, personnellement, je pr√©f√©rerais personnellement ne pas cr√©er une entit√© distincte pour ¬´l'√âtat¬ª - l' <code>State</code> .  Apr√®s tout, nous avons d√©j√† un √©tat dans chaque type particulier - ce ne sont que des champs de la structure.  Le langage nous a d√©j√† donn√© cette essence, pour ainsi dire.  La cr√©ation d'une autre entit√© similaire ne fera que confondre le programmeur. </p><br><p>  Le d√©fi, bien s√ªr, est de donner √† Flutter la capacit√© de r√©pondre aux changements d'√©tat (c'est l'essence de la programmation r√©active, apr√®s tout).  Et si nous pouvons ¬´demander¬ª au d√©veloppeur d'utiliser une fonction sp√©ciale ( <code>setState()</code> ), nous pouvons √©galement demander √† utiliser une fonction sp√©ciale afin de dire au moteur quand redessiner et quand ne pas le faire.  En fin de compte, tous les changements d'√©tat ne n√©cessitent pas d'√™tre redessin√©s, et ici nous aurons encore plus de contr√¥le: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyHomePage <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core counter <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> } <span class="hljs-comment"><span class="hljs-comment">// Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.Scaffold() } // incrementCounter increments widgets's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) // or m.Rerender() // or m.NeedsUpdate() }</span></span></code> </pre> <br><p>  Vous pouvez jouer avec diff√©rentes options de d√©nomination - j'aime <code>NeedsUpdate()</code> pour sa simplicit√© et le fait qu'il s'agit d'une propri√©t√© de widget (obtenue √† partir de <code>flutter.Core</code> ), mais la <code>flutter.Rerender()</code> globale <code>flutter.Rerender()</code> semble √©galement bonne.  Certes, cela donne une fausse impression que le widget sera imm√©diatement redessin√© imm√©diatement, mais ce n'est pas le cas - il sera redessin√© lors de la prochaine mise √† jour de la trame, et la fr√©quence d'appel de m√©thode peut √™tre beaucoup plus √©lev√©e que la fr√©quence de rendu - mais notre moteur Flutter devrait d√©j√† √™tre capable de g√©rer cela. </p><br><p>  Mais l'id√©e est que nous venons de r√©soudre le probl√®me n√©cessaire sans ajouter: </p><br><ul><li>  nouveau type </li><li>  g√©n√©riques </li><li>  r√®gles sp√©ciales pour l'√©tat de lecture / √©criture </li><li>  nouvelles m√©thodes sp√©ciales remplac√©es </li></ul><br><p>  De plus, l'API est beaucoup plus claire et plus compr√©hensible - augmentez simplement le compteur (comme vous le feriez dans n'importe quel autre programme) et demandez √† Flutter de redessiner le widget.  C'est juste ce qui n'est pas tr√®s √©vident si nous appelons simplement <code>setState</code> - qui n'est pas seulement une fonction sp√©ciale pour d√©finir l'√©tat, c'est une fonction qui renvoie une fonction (wtf?) Dans laquelle nous faisons d√©j√† quelque chose avec l'√©tat.  Encore une fois, la magie cach√©e dans les langages et les frameworks rend tr√®s difficile la compr√©hension et la lecture du code. </p><br><p>  Dans notre cas, nous avons r√©solu le m√™me probl√®me, le code est plus simple et deux fois plus court. </p><br><h2 id="vidzhety-s-sostoyaniem-v-drugih-vidzhetah">  Widgets d'√©tat dans d'autres widgets </h2><br><p>  Comme suite logique du sujet, examinons comment le ¬´widget d'√©tat¬ª est utilis√© dans un autre widget de Flutter: </p><br><pre> <code class="plaintext hljs">@override Widget build(BuildContext context) { return MaterialApp( title: 'Flutter Demo', home: MyHomePage(title: 'Flutter Demo Home Page'), ); }</code> </pre> <br><p>  <code>MyHomePage</code> est ici un "widget d'√©tat" (il a un compteur), et nous le cr√©ons en appelant le constructeur <code>MyHomePage()</code> pendant la construction ... Attendez, quoi? </p><br><p>  <code>build()</code> est appel√© pour redessiner le widget, tr√®s probablement plusieurs fois par seconde.  Pourquoi devrions-nous cr√©er un widget, en particulier avec un √©tat, √† chaque fois pendant le rendu?  Cela n'a aucun sens. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Il s'av√®re</a> que Flutter utilise cette s√©paration entre <code>Widget</code> et <code>State</code> afin de cacher cette initialisation / gestion d'√©tat au programmeur (plus de choses cach√©es, plus!).  Il cr√©e un nouveau widget √† chaque fois, mais l'√©tat, s'il a d√©j√† √©t√© cr√©√©, est automatiquement trouv√© et attach√© au widget.  Cette magie se produit de mani√®re invisible et je n'ai aucune id√©e de comment cela fonctionne - vous devez lire le code. </p><br><p>  Je consid√®re comme un v√©ritable mal en programmation de se cacher autant que possible du programmeur, en le justifiant par l'ergonomie.  Je suis s√ªr que le programmeur statistique moyen ne lira pas le code Flutter pour comprendre comment cette magie fonctionne, et il est peu probable qu'il comprenne comment et ce qui est interconnect√©. </p><br><p>  Pour la version Go, je ne voudrais certainement pas une telle sorcellerie cach√©e et pr√©f√©rerais une initialisation explicite et visible, m√™me si cela signifie un code l√©g√®rement plus infond√©.  L'approche de Flutter √† Dart peut √©galement √™tre impl√©ment√©e, mais j'aime Go pour minimiser la magie, et j'aimerais voir la m√™me philosophie dans les frameworks.  Par cons√©quent, j'√©crirais mon code pour les widgets avec l'√©tat dans l'arborescence des widgets comme ceci: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// MyApp is our top application widget. type MyApp struct { flutter.Core homePage *MyHomePage } // NewMyApp instantiates a new MyApp widget func NewMyApp() *MyApp { app := &amp;MyApp{} app.homePage = &amp;MyHomePage{} return app } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx flutter.BuildContext) flutter.Widget { return m.homePage } // MyHomePage is a home page widget. type MyHomePage struct { flutter.Core counter int } // Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.Scaffold() } // incrementCounter increments app's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) }</span></span></code> </pre> <br><p>  Ce code perd la version Dart en ce que si je veux supprimer <code>homePage</code> de l'arborescence des widgets et le remplacer par autre chose, je devrai le supprimer √† trois endroits, au lieu d'un.  Mais en retour, nous obtenons une image compl√®te de quoi, o√π et comment cela se produit, o√π la m√©moire est allou√©e, qui appelle qui, et ainsi de suite - le code dans la paume de votre main est clair et facile √† lire. </p><br><p>  Soit dit en passant, Flutter a √©galement une chose telle que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">StatefulBuilder</a> , qui ajoute encore plus de magie et vous permet de cr√©er des widgets avec √©tat √† la vol√©e. </p><br><h1 id="dsl">  DSL </h1><br><p>  Prenons maintenant la partie amusante.  Comment repr√©senterons-nous l'arbre des widgets sur Go?  Nous voulons qu'il soit concis, propre, facile √† refactoriser et √† changer, d√©crire les relations spatiales entre les widgets (les widgets qui sont visuellement proches, doivent √™tre proches et dans la description), et en m√™me temps suffisamment flexible pour d√©crire arbitraire code comme les gestionnaires d'√©v√©nements. </p><br><p>  Il me semble que l'option sur Dart est assez belle et √©loquente: </p><br><pre> <code class="plaintext hljs">return Scaffold( appBar: AppBar( title: Text(widget.title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text('You have pushed the button this many times:'), Text( '$_counter', style: Theme.of(context).textTheme.display1, ), ], ), ), floatingActionButton: FloatingActionButton( onPressed: _incrementCounter, tooltip: 'Increment', child: Icon(Icons.add), ), );</code> </pre> <br><p>  Chaque widget a un constructeur qui accepte des param√®tres facultatifs, et ce qui rend l'enregistrement vraiment agr√©able, ce sont les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">param√®tres nomm√©s des fonctions</a> . </p><br><h2 id="imenovannye-parametry">  Param√®tres nomm√©s </h2><br><p>  Dans le cas o√π vous n'√™tes pas familier avec ce terme, alors dans de nombreuses langues les param√®tres de la fonction sont appel√©s "positionnels", car leur position est importante pour la fonction: </p><br><pre> <code class="plaintext hljs">Foo(arg1, arg2, arg3)</code> </pre> <br><p>  , et dans le cas de param√®tres nomm√©s, tout est d√©cid√© par leur nom dans l'appel: </p><br><pre> <code class="plaintext hljs">Foo(name: arg1, description: arg2, size: arg3)</code> </pre> <br><p>  Cela ajoute du texte, mais enregistre les clics et se d√©place dans le code, afin de comprendre ce que signifient les param√®tres. </p><br><p>  Dans le cas de l'arborescence des widgets, ils jouent un r√¥le cl√© dans la lisibilit√©.  Comparez le m√™me code que ci-dessus, mais sans param√®tres nomm√©s: </p><br><pre> <code class="plaintext hljs">return Scaffold( AppBar( Text(widget.title), ), Center( Column( MainAxisAlignment.center, &lt;Widget&gt;[ Text('You have pushed the button this many times:'), Text( '$_counter', Theme.of(context).textTheme.display1, ), ], ), ), FloatingActionButton( _incrementCounter, 'Increment', Icon(Icons.add), ), );</code> </pre> <br><p>  Pas √ßa.  non?  Il est non seulement plus difficile √† comprendre (vous devez garder √† l'esprit ce que chaque param√®tre signifie et quel est son type, et c'est une charge cognitive importante), mais ne nous donne pas non plus la libert√© de choisir les param√®tres que nous voulons transf√©rer.  Par exemple, il se peut que vous ne souhaitiez pas un <code>FloatingActionButton</code> pour votre application Material, vous ne le sp√©cifiez donc tout simplement pas dans les param√®tres.  Sans param√®tres nomm√©s, nous devrons soit forcer la sp√©cification de tous les widgets possibles, soit recourir √† la magie avec r√©flexion pour savoir quels widgets ont √©t√© transf√©r√©s. </p><br><p>  Et comme il n'y a pas de surcharge de fonctions et de param√®tres nomm√©s dans Go, ce ne sera pas une t√¢che facile pour Go. </p><br><h1 id="derevo-vidzhetov-v-go">  Aller √† l'arborescence des widgets </h1><br><h2 id="versiya-1">  Version 1 </h2><br><p>  Examinons de plus pr√®s l'objet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scaffold</a> , qui est un wrapper pratique pour une application mobile.  Il a plusieurs propri√©t√©s - appBar, drawe, home, bottomNavigationBar, floatingActionBar - et ce sont tous des widgets.  Lors de la cr√©ation d'une arborescence de widgets, nous devons en fait initialiser en quelque sorte cet objet, en lui passant les propri√©t√©s de widget susmentionn√©es.  Eh bien, ce n'est pas trop diff√©rent de la cr√©ation et de l'initialisation habituelles d'objets. </p><br><p>  Essayons l'approche frontale: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> flutter.NewScaffold( flutter.NewAppBar( flutter.Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), ), <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, flutter.NewCenter( flutter.NewColumn( flutter.MainAxisCenterAlignment, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, []flutter.Widget{ flutter.Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), flutter.Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), flutter.FloatingActionButton( flutter.NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, ), )</code> </pre> <br><p>  Pas le plus beau code d'interface utilisateur, certainement.  Le mot <code>flutter</code> partout et demande.  pour le cacher (en fait, j'aurais d√ª appeler le <code>material</code> du paquet, pas du <code>flutter</code> , mais pas l'essence), les param√®tres anonymes ne sont absolument pas √©vidents, et ces <code>nil</code> sont ouvertement d√©routants partout. </p><br><h2 id="versiya-2">  Version 2 </h2><br><p>  √âtant donn√© que la plupart du code utilisera toujours l'un ou l'autre type / fonction du package <code>flutter</code> , nous pouvons utiliser le format ¬´dot import¬ª pour importer le package dans notre espace de noms et ainsi ¬´masquer¬ª le nom du package: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span></code> </pre> <br><p>  Maintenant, au lieu de <code>flutter.Text</code> nous pouvons √©crire uniquement du <code>Text</code> .  C'est g√©n√©ralement une mauvaise pratique, mais nous travaillons avec le framework, et cette importation se fera litt√©ralement sur chaque ligne.  D'apr√®s ma pratique, c'est exactement le cas pour lequel une telle importation est acceptable - par exemple, comme lors de l'utilisation du merveilleux cadre pour tester <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GoConvey</a> . </p><br><p>  Voyons √† quoi ressemblera le code: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold( NewAppBar( Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), ), <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, NewCenter( NewColumn( MainAxisCenterAlignment, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), FloatingActionButton( NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, ), )</code> </pre> <br><p>  D√©j√† mieux, mais ces param√®tres nuls et sans nom .... </p><br><h2 id="versiya-3">  Version 3 </h2><br><p>  Voyons √† quoi ressemblera le code si nous utilisons la r√©flexion (la capacit√© d'inspecter le code pendant l'ex√©cution du programme) pour analyser les param√®tres pass√©s.  Cette approche est utilis√©e dans plusieurs premiers frameworks HTTP sur Go ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">martini</a> , par exemple), et est consid√©r√©e comme une tr√®s mauvaise pratique - elle n'est pas s√ªre, perd la commodit√© du syst√®me de type, est relativement lente et ajoute de la magie au code - mais pour le plaisir de l'exp√©rience, vous pouvez essayer: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold( NewAppBar( Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>), ), NewCenter( NewColumn( MainAxisCenterAlignment, []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>), Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), FloatingActionButton( NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, ), )</code> </pre> <br><p>  Pas mal, et cela ressemble √† la version originale de Dart, mais le manque de param√®tres nomm√©s fait toujours mal √† l'≈ìil. </p><br><h2 id="versiya-4">  Version 4 </h2><br><p>  Revenons un peu en arri√®re et demandons-nous ce que nous essayons de faire.  Nous n'avons pas √† copier aveugl√©ment l'approche Dart (bien que ce soit un bon bonus - il y en a moins √† enseigner aux personnes qui connaissent d√©j√† Flutter on Dart).  En fait, nous cr√©ons simplement de nouveaux objets et leur assignons des propri√©t√©s. </p><br><p>  Pouvez essayer de cette fa√ßon? </p><br><pre> <code class="go hljs">scaffold := NewScaffold() scaffold.AppBar = NewAppBar(Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>)) column := NewColumn() column.MainAxisAlignment = MainAxisCenterAlignment counterText := Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter)) counterText.Style = ctx.Theme.textTheme.display1 column.Children = []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>), counterText, } center := NewCenter() center.Child = column scaffold.Home = center icon := NewIcon(icons.Add), fab := NewFloatingActionButton() fab.Icon = icon fab.Text = <span class="hljs-string"><span class="hljs-string">"Increment"</span></span> fab.Handler = m.onPressed scaffold.FloatingActionButton = fab <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scaffold</code> </pre> <br><p>    ,         " ",         . -,       ‚Äì   ,      . -,      ,            . </p><br><p> ,       UI   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GTK</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qt</a> . , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>  Qt 5: </p><br><pre> <code class="plaintext hljs"> QGridLayout *layout = new QGridLayout(this); layout-&gt;addWidget(new QLabel(tr("Object name:")), 0, 0); layout-&gt;addWidget(m_objectName, 0, 1); layout-&gt;addWidget(new QLabel(tr("Location:")), 1, 0); m_location-&gt;setEditable(false); m_location-&gt;addItem(tr("Top")); m_location-&gt;addItem(tr("Left")); m_location-&gt;addItem(tr("Right")); m_location-&gt;addItem(tr("Bottom")); m_location-&gt;addItem(tr("Restore")); layout-&gt;addWidget(m_location, 1, 1); QDialogButtonBox *buttonBox = new QDialogButtonBox(QDialogButtonBox::Ok | QDialogButtonBox::Cancel, this); connect(buttonBox, &amp;QDialogButtonBox::rejected, this, &amp;QDialog::reject); connect(buttonBox, &amp;QDialogButtonBox::accepted, this, &amp;QDialog::accept); layout-&gt;addWidget(buttonBox, 2, 0, 1, 2);</code> </pre><br><p>   ,   -      . ,  ,    ,           . </p><br><h2 id="versiya-5">  5 </h2><br><p>   ,     ‚Äì          -.  Par exemple: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Widget</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold(ScaffoldParams{ AppBar: NewAppBar(AppBarParams{ Title: Text(TextParams{ Text: <span class="hljs-string"><span class="hljs-string">"My Home Page"</span></span>, }), }), Body: NewCenter(CenterParams{ Child: NewColumn(ColumnParams{ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text(TextParams{ Text: <span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, }), Text(TextParams{ Text: fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton( FloatingActionButtonParams{ OnPressed: m.incrementCounter, Tooltip: <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, Child: NewIcon(IconParams{ Icon: Icons.add, }), }, ), }) }</code> </pre> <br><p> ! ,   .    <code>...Params</code>    ,          .  , ,       Go    ,       ,     . </p><br><p> -,     <code>...Params</code> ,       .    (proposal)     ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"  "</a> .  ,     <code>FloatingActionButtonParameters{...}</code>  <code>{...}</code>    .     : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Widget</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold({ AppBar: NewAppBar({ Title: Text({ Text: <span class="hljs-string"><span class="hljs-string">"My Home Page"</span></span>, }), }), Body: NewCenter({ Child: NewColumn({ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text({ Text: <span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, }), Text({ Text: fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton({ OnPressed: m.incrementCounter, Tooltip: <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, Child: NewIcon({ Icon: Icons.add, }), }, ), }) }</code> </pre> <br><p>        Dart!         . </p><br><h2 id="versiya-6">  6 </h2><br><p>   ,         .  ,    ,    ,       ,   . </p><br><p>   ,    ,   ,      -,     ‚Äì     : </p><br><pre> <code class="go hljs">button := NewButton(). WithText(<span class="hljs-string"><span class="hljs-string">"Click me"</span></span>). WithStyle(MyButtonStyle1)</code> </pre> <br><p>  ou </p><br><pre> <code class="go hljs">button := NewButton(). Text(<span class="hljs-string"><span class="hljs-string">"Click me"</span></span>). Style(MyButtonStyle1)</code> </pre> <br><p>     Scaffold-    : </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return NewScaffold(). AppBar(NewAppBar(). Text("Flutter Go app")). Child(NewCenter(). Child(NewColumn(). MainAxisAlignment(MainAxisCenterAlignment). Children([]Widget{ Text("You have pushed the button this many times:"), Text(fmt.Sprintf("%d", m.counter)). Style(ctx.Theme.textTheme.display1), }))). FloatingActionButton(NewFloatingActionButton(). Icon(NewIcon(icons.Add)). Text("Increment"). Handler(m.onPressed)) }</span></span></code> </pre> <br><p>        Go ‚Äì       , .      Dart-,       : </p><br><ul><li>    </li><li>  "" </li><li>      </li><li>       </li></ul><br><p>          <code>New...()</code>   ‚Äì  ,   .       ,    ‚Äî <strong>"  ,      ,   ,      ,    ,     ,      ‚Äì        "</strong> . </p><br><p>   ,   , 5-  6-    . </p><br><h1 id="finalnaya-versiya-koda">    </h1><br><p>         "hello, world"   Flutter  Go: </p><br><p> main.go </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { flutter.Run(NewMyApp()) }</code> </pre> <br><p> app.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-comment"><span class="hljs-comment">// MyApp is our top application widget. type MyApp struct { Core homePage *MyHomePage } // NewMyApp instantiates a new MyApp widget func NewMyApp() *MyApp { app := &amp;MyApp{} app.homePage = &amp;MyHomePage{} return app } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx BuildContext) Widget { return m.homePage }</span></span></code> </pre> <br><p> home_page.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> ) <span class="hljs-comment"><span class="hljs-comment">// MyHomePage is a home page widget. type MyHomePage struct { Core counter int } // Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx BuildContext) Widget { return NewScaffold(ScaffoldParams{ AppBar: NewAppBar(AppBarParams{ Title: Text(TextParams{ Text: "My Home Page", }), }), Body: NewCenter(CenterParams{ Child: NewColumn(ColumnParams{ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text(TextParams{ Text: "You have pushed the button this many times:", }), Text(TextParams{ Text: fmt.Sprintf("%d", m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton( FloatingActionButtonParameters{ OnPressed: m.incrementCounter, Tooltip: "Increment", Child: NewIcon(IconParams{ Icon: Icons.add, }), }, ), }) } // incrementCounter increments app's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) }</span></span></code> </pre> <br><p>   ! </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><h4 id="pohozhest-s-vecty">   Vecty </h4><br><p>        ,      ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vecty</a> .  , ,  , ,  Vecty    DOM/CSS/JS,  Flutter            ,        120   .   ,   Vecty  ,     Flutter  Go  Vecty . </p><br><h4 id="luchshee-ponimanie-dizayna-flutter">    Flutter </h4><br><p>         ‚Äì        ,   .            Flutter,         . </p><br><h4 id="nedostatki-go">  Go </h4><br><p>    <strong>"  Flutter    Go?"</strong>    <strong>""</strong> ,  , , ,        ,   Flutter, , ,     ""   .      ,    Go       . </p><br><p>  ,  <strong>   Go    </strong> .                 .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>    Go, , ,    -.    ‚Äì      ,         ,        . </p><br><p>           Go.              ‚Äì       ,      . </p><br><h4 id="mysli-o-buduschem-flutter">    Flutter </h4><br><p>      ,  Flutter  ,     ,       .  "/ "   ,  Dart    ( , ,     ).    Dart,  ,      (,    )    DartVM  V8,  Flutter    ‚Äì   Flutter      -. </p><br><p> ,     .          .  ,           ,  1.0     . , -      . </p><br><p>    game changer,     Flutter ,           ,           . </p><br><p>            UI ‚Äì  Flutter,    . </p><br><h1 id="ssylki">  Les r√©f√©rences </h1><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://flutter.io</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flutter Tutorial for Beginners ‚Äî Build iOS and Android Apps</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Go proposal: An Improved, Golang-Cohesive Design for Named Arguments</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Go proposal: spec: untyped composite literals</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr435960/">https://habr.com/ru/post/fr435960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr435950/index.html">Centre de donn√©es modulaire au service du Grand collisionneur de hadrons</a></li>
<li><a href="../fr435952/index.html">Qui sont les "h√©bergeurs non lav√©s"?</a></li>
<li><a href="../fr435954/index.html">D√©veloppement de modules pour marionnettes avec kit de d√©veloppement de marionnettes</a></li>
<li><a href="../fr435956/index.html">PHP Digest n ¬∞ 147 (1 - 14 janvier 2019)</a></li>
<li><a href="../fr435958/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 347 (7-13 janvier 2019)</a></li>
<li><a href="../fr435962/index.html">25e anniversaire d'Aeron: sensations et impressions de la version mise √† jour d'Aeron Remastered</a></li>
<li><a href="../fr435964/index.html">Ethereum pr√©voit d'√™tre 99% plus √©conomique</a></li>
<li><a href="../fr435968/index.html">Pr√©sentation des algorithmes de Deep Machine Learning pour les robots</a></li>
<li><a href="../fr435970/index.html">Guide du d√©butant pour le d√©veloppement de serveurs Web avec Node.js</a></li>
<li><a href="../fr435972/index.html">Pr√©sentation de la programmation r√©active au printemps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>