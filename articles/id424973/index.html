<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊 🔔 🥪 Deteksi Wajah pada Video: Raspberry Pi dan Neural Compute Stick 👩🏼‍🌾 👩‍👧‍👧 🚬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekitar setahun yang lalu, Intel Movidius merilis perangkat untuk inferensi efisien jaringan saraf convolutional - Movidius Neural Compute Stick (NCS)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deteksi Wajah pada Video: Raspberry Pi dan Neural Compute Stick</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424973/">  Sekitar setahun yang lalu, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Intel Movidius</a> merilis perangkat untuk inferensi efisien jaringan saraf convolutional - Movidius Neural Compute Stick (NCS).  Perangkat ini memungkinkan penggunaan jaringan saraf untuk pengenalan atau deteksi objek dalam kondisi konsumsi energi yang terbatas, termasuk dalam tugas robotika.  NCS memiliki antarmuka USB dan mengkonsumsi tidak lebih dari 1 watt.  Pada artikel ini, saya akan berbicara tentang pengalaman menggunakan NCS dengan Raspberry Pi untuk tugas mendeteksi wajah dalam video, termasuk melatih detektor Mobilenet-SSD dan menjalankannya di Raspberry. <br><br>  Semua kode dapat ditemukan di dua repositori saya: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pelatihan detektor</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">demo deteksi wajah</a> . <br><br><img src="https://habrastorage.org/webt/qu/b_/tj/qub_tj1u6ztw9irfy9ivtaaidcc.jpeg"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dalam artikel pertama saya,</a> saya sudah menulis tentang deteksi wajah menggunakan NCS: kemudian saya berbicara tentang detektor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">YOLOv2</a> , yang saya konversi dari format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Darknet</a> ke format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Caffe</a> , dan kemudian diluncurkan di NCS.  Proses konversi berubah menjadi non-sepele: karena dua format ini mengatur lapisan terakhir detektor dengan cara yang berbeda, output dari jaringan saraf harus diurai secara terpisah, pada CPU, menggunakan sepotong kode dari Darknet.  Selain itu, detektor ini tidak memuaskan saya baik dalam kecepatan (hingga 5,1 FPS di laptop saya) dan dalam akurasi - kemudian saya yakin bahwa karena sensitivitasnya terhadap kualitas gambar, sulit untuk mendapatkan hasil yang baik pada Raspberry Pi. <br><br>  Pada akhirnya, saya memutuskan untuk hanya melatih detektor saya.  Pilihan jatuh pada detektor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SSD</a> dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mobilenet</a> encoder: konvolusi ringan Mobilenet memungkinkan Anda untuk mencapai kecepatan tinggi tanpa kehilangan kualitas, dan detektor SSD tidak kalah dengan YOLO dan bekerja pada NCS di luar kotak. <br><br><div class="spoiler">  <b class="spoiler_title">Bagaimana Detektor Mobilenet-SSD Bekerja</b> <div class="spoiler_text">  Mari kita mulai dengan Mobilenet.  Dalam arsitektur ini selesai <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mn" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-8"><font style="vertical-align: inherit;">3</font></span></font><span class="MJXp-mtext" id="MJXp-Span-3">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-8"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.842ex" height="2.074ex" viewBox="0 -772.3 2946 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="2445" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> 3 \ kali 3 </script>  konvolusi (pada semua saluran) diganti oleh dua konvolusi ringan: pertama <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mn" id="MJXp-Span-10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-16"><font style="vertical-align: inherit;">3</font></span></font><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-16"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.842ex" height="2.074ex" viewBox="0 -772.3 2946 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="2445" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 3 \ kali 3 </script>  secara terpisah untuk setiap saluran dan kemudian selesai <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-17"><span class="MJXp-mn" id="MJXp-Span-18"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;">1</font></span></font><span class="MJXp-mtext" id="MJXp-Span-19">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.842ex" height="2.074ex" viewBox="0 -772.3 2946 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="2445" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> 1 \ kali 1 </script>  konvolusi.  Setelah setiap konvolusi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BatchNorm</a> dan Non-linearitas (ReLU) digunakan.  Konvolusi jaringan pertama yang menerima gambar sebagai input biasanya dibiarkan lengkap.  Arsitektur ini dapat secara signifikan mengurangi kompleksitas perhitungan karena sedikit penurunan kualitas prediksi.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">opsi yang lebih maju</a> , tetapi saya belum mencobanya. <br><br>  SSD (Single Shot Detector) bekerja seperti ini: pada output beberapa encoder konvolusi digantung menjadi dua <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-25"><span class="MJXp-mn" id="MJXp-Span-26"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-32"><font style="vertical-align: inherit;">1</font></span></font><span class="MJXp-mtext" id="MJXp-Span-27">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-32"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.842ex" height="2.074ex" viewBox="0 -772.3 2946 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="2445" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> 1 \ kali 1 </script>  lapisan konvolusional: satu memprediksi probabilitas kelas, yang lain - koordinat kotak pembatas.  Ada lapisan ketiga yang memberikan koordinat dan posisi frame default di level saat ini.  Artinya adalah: output dari setiap lapisan secara alami dibagi menjadi sel-sel;  lebih dekat ke ujung jaringan saraf, mereka menjadi lebih kecil (dalam hal ini, karena konvolusi dengan <code>stride=2</code> ), dan bidang pandang setiap sel meningkat.  Untuk setiap sel pada masing-masing beberapa lapisan yang dipilih, kami menetapkan beberapa bingkai default dengan ukuran yang berbeda dan dengan rasio aspek yang berbeda, dan menggunakan lapisan konvolusional tambahan untuk mengoreksi koordinat dan memprediksi probabilitas kelas untuk setiap bingkai tersebut.  Oleh karena itu, detektor SSD (seperti YOLO) selalu mempertimbangkan jumlah bingkai yang sama.  Objek yang sama dapat dideteksi pada lapisan yang berbeda: selama pelatihan, sinyal dikirim ke semua frame yang bersinggungan dengan objek cukup kuat, dan selama aplikasi, deteksi dikombinasikan menggunakan non maksimum suppression (NMS).  Lapisan terakhir menggabungkan deteksi dari semua lapisan, mempertimbangkan koordinat penuhnya, memotong ambang probabilitas dan menghasilkan NMS. <br></div></div><br><h2>  Pelatihan pendeteksi </h2><br><h3>  Arsitektur </h3><br>  Kode untuk melatih pendeteksi terletak di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Saya memutuskan untuk menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">detektor Mobilenet-SSD siap pakai yang</a> dilatih pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PASCAL VOC0712</a> dan melatihnya untuk mendeteksi wajah.  Pertama, membantu melatih jaring lebih cepat, dan kedua, Anda tidak perlu menemukan kembali roda. <br><br>  Proyek asli termasuk skrip <code>gen.py</code> , yang secara harfiah mengumpulkan file model <code>.prototxt</code> , menggantikan parameter input.  Saya memindahkannya ke proyek saya, sedikit memperluas fungsionalitasnya.  Script ini memungkinkan Anda untuk menghasilkan empat jenis file konfigurasi: <br><br><ul><li>  <b>kereta</b> : di pintu masuk - basis pelatihan LMDB, di output - lapisan dengan perhitungan fungsi kerugian dan gradiennya, ada BatchNorm </li><li>  <b>tes</b> : pada input - basis uji LMDB, pada output - layer dengan perhitungan kualitas (rata-rata presisi), ada BatchNorm </li><li>  <b>menyebarkan</b> : pada input - gambar, pada output - layer dengan prediksi, BatchNorm hilang </li><li>  <b>deploy_bn</b> : pada input - gambar, pada output - layer dengan prediksi, ada BatchNorm </li></ul><br>  Saya menambahkan opsi yang terakhir nanti, sehingga dalam skrip Anda dapat memuat dan mengonversi kisi dari BatchNorm tanpa menyentuh basis data LMDB - jika tidak, dengan tidak adanya basis data, tidak ada yang akan berhasil.  (Secara umum, tampaknya aneh bagi saya bahwa dalam Caffe sumber data diatur dalam arsitektur jaringan - ini setidaknya tidak terlalu praktis). <br><br><div class="spoiler">  <b class="spoiler_title">Seperti apa arsitektur jaringan (pendek)</b> <div class="spoiler_text"><ul><li>  Login: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-33"><span class="MJXp-mn" id="MJXp-Span-34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">300 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-40"><font style="vertical-align: inherit;">300 </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-46"><font style="vertical-align: inherit;">3</font></span></font><span class="MJXp-mtext" id="MJXp-Span-35">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-40"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-46"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.172ex" height="2.074ex" viewBox="0 -772.3 7393.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="1751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="2273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="2802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="3101" y="0"></use><g transform="translate(3446,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="5198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="5719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="6249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="6547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="6893" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> 300 \ kali 300 \ kali 3 </script></li><li>  <b>Konv</b> penuh <b>konv</b> : 32 saluran, <code>stride=2</code> </li><li>  Konvolusi <b>Mobilenet conv1 - conv11</b> : 64, 128, 128, 256, 256, 512 ... 512 saluran, beberapa telah <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-47"><span class="MJXp-mn" id="MJXp-Span-48"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-54"><font style="vertical-align: inherit;">19 </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-60"><font style="vertical-align: inherit;">512</font></span></font><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-54"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-55">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-60"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.172ex" height="2.074ex" viewBox="0 -772.3 7393.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-39" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="2302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2600" y="0"></use><g transform="translate(2946,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-39" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="4197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="4718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="5248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="5546" y="0"></use><g transform="translate(5892,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-6"> 19 \ kali 19 \ kali 512 </script></li><li>  Konvolusi <b>konvoi Mobilenet, conv13</b> : 1024 saluran, <b>conv12</b> telah <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-61"><span class="MJXp-mn" id="MJXp-Span-62"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-68"><font style="vertical-align: inherit;">10 </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;">k </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mn" id="MJXp-Span-74"><font style="vertical-align: inherit;">1024</font></span></font><span class="MJXp-mtext" id="MJXp-Span-63">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-68"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-69">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-74"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.335ex" height="2.074ex" viewBox="0 -772.3 7894 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="2302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2600" y="0"></use><g transform="translate(2946,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="4197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="4718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="5248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="5546" y="0"></use><g transform="translate(5892,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="1501" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> 10 \ kali 10 \ kali 1024 </script></li><li>  Konvolusi penuh <b>conv14_1, conv14_2</b> : 256, 512 saluran, <code>kernel_size=1</code> pertama <code>kernel_size=1</code> , <code>stride=2</code> kedua <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-75"><span class="MJXp-mn" id="MJXp-Span-76">5</span><span class="MJXp-mtext" id="MJXp-Span-77">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">i</span><span class="MJXp-mn" id="MJXp-Span-82">5</span><span class="MJXp-mtext" id="MJXp-Span-83">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">i</span><span class="MJXp-mrow" id="MJXp-Span-88"><span class="MJXp-mo" id="MJXp-Span-89" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-90">51</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.847ex" height="2.211ex" viewBox="0 -831.5 6392.5 952" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35" x="2445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="3196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="3717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="4247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="4545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-24" x="4891" y="0"></use><g transform="translate(5391,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-8"> 5 \ kali 5 \ kali $ 51</script></li><li>  Konvolusi penuh <b>conv15_1, conv15_2</b> : 128, 256 saluran, <code>kernel_size=1</code> pertama <code>kernel_size=1</code> , <code>stride=2</code> kedua <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-91"><span class="MJXp-mn" id="MJXp-Span-92">3</span><span class="MJXp-mtext" id="MJXp-Span-93">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">i</span><span class="MJXp-mn" id="MJXp-Span-98">3</span><span class="MJXp-mtext" id="MJXp-Span-99">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">i</span><span class="MJXp-mn" id="MJXp-Span-104">256</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.847ex" height="2.074ex" viewBox="0 -772.3 6392.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="2445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="3196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="3717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="4247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="4545" y="0"></use><g transform="translate(4891,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-36" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-9"> 3 \ kali 3 \ kali 256 </script></li><li>  Lengkapi <b>conv16_1, konvolusi conv16_2</b> : 128, 256 saluran, <code>kernel_size=1</code> pertama <code>kernel_size=1</code> , <code>stride=2</code> kedua <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-105"><span class="MJXp-mn" id="MJXp-Span-106">2</span><span class="MJXp-mtext" id="MJXp-Span-107">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">i</span><span class="MJXp-mn" id="MJXp-Span-112">2</span><span class="MJXp-mtext" id="MJXp-Span-113">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">i</span><span class="MJXp-mn" id="MJXp-Span-118">256</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.847ex" height="2.074ex" viewBox="0 -772.3 6392.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="2445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="3196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="3717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="4247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="4545" y="0"></use><g transform="translate(4891,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-36" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-10"> 2 \ kali 2 \ kali 256 </script></li><li>  Konvolusi penuh <b>conv17_1, conv17_2</b> : 64, 128 saluran, <code>kernel_size=1</code> pertama <code>kernel_size=1</code> , <code>stride=2</code> kedua <code>stride=2</code> </li><li>  Lapisan deteksi: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-119"><span class="MJXp-mn" id="MJXp-Span-120">1</span><span class="MJXp-mtext" id="MJXp-Span-121">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">i</span><span class="MJXp-mn" id="MJXp-Span-126">1</span><span class="MJXp-mtext" id="MJXp-Span-127">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">i</span><span class="MJXp-mn" id="MJXp-Span-132">128</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.847ex" height="2.074ex" viewBox="0 -772.3 6392.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="1272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="2100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="2445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6B" x="3196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-61" x="3717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-6C" x="4247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-69" x="4545" y="0"></use><g transform="translate(4891,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-38" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-11"> 1 \ kali 1 \ kali 128 </script></li><li>  Output Deteksi lapisan akhir </li></ul><br></div></div><br>  Saya sedikit memperbaiki arsitektur jaringan.  Daftar perubahan: <br><br><ul><li>  Jelas, jumlah kelas telah berubah menjadi 1 (tidak termasuk latar belakang). </li><li>  Keterbatasan rasio aspek tambalan potong selama pelatihan: diubah dari <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-133"><span class="MJXp-mo" id="MJXp-Span-134" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-135">0</span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-137">5</span><span class="MJXp-mo" id="MJXp-Span-138" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-139">2.0</span><span class="MJXp-mo" id="MJXp-Span-140" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.658ex" height="2.66ex" viewBox="0 -832 3727.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-35" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="1724" y="0"></use><g transform="translate(2169,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-5D" x="3449" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> [0,5,2.0] </script>  pada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-141"><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-143">0</span><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-145">7</span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-147">1</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-149">4</span><span class="MJXp-mo" id="MJXp-Span-150" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.045ex" height="2.66ex" viewBox="0 -832 3894.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-37" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-5D" x="3616" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> [0,7,1,4] </script>  (Saya memutuskan untuk menyederhanakan tugas sedikit dan tidak belajar dari gambar yang terlalu melebar). </li><li>  Dari bingkai default, hanya yang persegi yang tersisa, dua untuk setiap sel.  Saya sangat mengurangi ukurannya, karena wajah jauh lebih kecil daripada objek dalam masalah pendeteksian objek klasik. </li></ul><br>  Caffe menghitung ukuran bingkai default sebagai berikut: memiliki ukuran bingkai minimum <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-73" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> s </script>  dan maksimal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> L </script>  , itu menciptakan bingkai kecil dan besar dengan dimensi <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-73" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> s </script>  dan <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-157"><span class="MJXp-mtext" id="MJXp-Span-158">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">t</span><span class="MJXp-mrow" id="MJXp-Span-163"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">L</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.302ex" height="2.419ex" viewBox="0 -780.1 3144 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-4C" x="469" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-17"> \ sqrt {sL} </script>  .  Karena saya ingin mendeteksi wajah sekecil mungkin, saya menghitung <code>stride</code> penuh untuk setiap lapisan deteksi dan menyamakan ukuran bingkai minimum untuk itu.  Dengan parameter ini, frame default kecil akan terletak berdekatan satu sama lain dan tidak akan berpotongan.  Jadi setidaknya kita memiliki jaminan bahwa persimpangan dengan objek akan ada untuk beberapa jenis kerangka kerja.  Saya mengatur ukuran maksimum dua kali lipat.  Untuk layer <b>conv16_2, conv17_2,</b> saya mengatur dimensi pada mata menjadi sama.  Dengan cara ini <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">s</span><span class="MJXp-mo" id="MJXp-Span-168" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.707ex" height="2.419ex" viewBox="0 -780.1 1596.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMATHI-4C" x="914" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> s, L </script>  untuk semua lapisan adalah: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-170"><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-172">16</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-174">32</span><span class="MJXp-mo" id="MJXp-Span-175" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-176" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-177" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-178">32</span><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-180">64</span><span class="MJXp-mo" id="MJXp-Span-181" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-182" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-184">64.128</span><span class="MJXp-mo" id="MJXp-Span-185" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-186" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-187" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-188">128.214</span><span class="MJXp-mo" id="MJXp-Span-189" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-190" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-191" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-192">214.300</span><span class="MJXp-mo" id="MJXp-Span-193" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-195" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-196">214.300</span><span class="MJXp-mo" id="MJXp-Span-197" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="56.717ex" height="2.66ex" viewBox="0 -832 24419.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="1390" y="0"></use><g transform="translate(1835,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="3671" y="0"></use><g transform="translate(4060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="5061" y="0"></use><g transform="translate(5507,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="6508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="6897" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="7342" y="0"></use><g transform="translate(7732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2E" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-38" x="2280" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="10513" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="10902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="11347" y="0"></use><g transform="translate(11737,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-38" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2E" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="2280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="2781" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="15018" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="15408" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="15853" y="0"></use><g transform="translate(16243,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2E" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="2280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="2781" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="19524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2C" x="19914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-28" x="20359" y="0"></use><g transform="translate(20748,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-34" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-2E" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-33" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="2280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-30" x="2781" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/424973/&amp;usg=ALkJrhhSq9tmdcG_3GFy4Ardcnkap6-BiA#MJMAIN-29" x="24030" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> (16,32), (32,64), (64.128), (128.214), (214.300), (214.300) </script><br><br><div class="spoiler">  <b class="spoiler_title">Bagaimana beberapa frame default terlihat (noise for clarity)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j9/ti/gj/j9tigjn9tq7sdz6m3tyxa1v2r9s.png"><br></div></div><br><h3>  Data </h3><br>  Saya menggunakan dua <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dataset</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WIDER Face</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FDDB</a> .  WIDER berisi banyak gambar dengan wajah yang sangat kecil dan buram, dan FDDB lebih cenderung ke gambar wajah yang besar (dan urutan besarnya lebih kecil dari WIDER).  Format anotasi sedikit berbeda di dalamnya, tetapi ini sudah detail. <br><br>  Untuk pelatihan, saya tidak menggunakan semua data: Saya membuang wajah terlalu kecil (kurang dari enam piksel atau kurang dari 2% dari lebar gambar), membuang semua gambar dengan rasio aspek kurang dari 0,5 atau lebih dari 2, membuang semua gambar yang ditandai "buram" dalam dataset WIDER, karena mereka berkorespondensi sebagian besar dengan orang-orang yang sangat kecil, dan aku setidaknya harus menyelaraskan rasio wajah kecil dan besar.  Setelah itu, saya membuat semua bingkai persegi, memperluas sisi terkecil: Saya memutuskan bahwa saya tidak terlalu tertarik pada proporsi wajah, dan tugas untuk jaringan saraf sedikit disederhanakan.  Saya juga membuang semua gambar hitam dan putih, yang ada beberapa, dan di mana database membangun skrip crash. <br><br>  Untuk menggunakannya untuk pelatihan dan pengujian, Anda perlu mengumpulkan basis LMDB dari mereka.  Bagaimana cara melakukannya: <br><br><ul><li>  Untuk setiap gambar, markup dibuat dalam format <code>.xml</code> . </li><li>  File <code>train.txt</code> dengan garis-garis bentuk <code>"path/to/image.png path/to/labels.xml"</code> , yang sama dibuat untuk pengujian. </li><li>  File <code>test_name_size.txt</code> dengan garis-garis bentuk <code>"test_image_name height width"</code> </li><li>  Membuat file <code>labelmap.prototxt</code> dengan kecocokan <code>labelmap.prototxt</code> numerik </li></ul><br><br>  <code>ssd-caffe/scripts/create_annoset.py</code> (contoh dari Makefile): <br><br><pre> <code class="bash hljs">python3 /opt/movidius/ssd-caffe/scripts/create_annoset.py --anno-type=detection \ --label-map-file=$(wider_dir)/labelmap.prototxt --min-dim=0 --max-dim=0 \ --resize-width=0 --resize-height=0 --check-label --encode-type=jpg --encoded \ --redo $(wider_dir) \ $(wider_dir)/trainval.txt $(wider_dir)/WIDER_train/lmdb/wider_train_lmdb ./data</code> </pre><br><div class="spoiler">  <b class="spoiler_title">labelmap.prototxt</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"none_of_the_above"</span></span> label: <span class="hljs-number"><span class="hljs-number">0</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"background"</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">item</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: <span class="hljs-string"><span class="hljs-string">"face"</span></span> label: <span class="hljs-number"><span class="hljs-number">1</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"face"</span></span> }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Contoh markup .xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>348<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>450<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depth</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">size</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>face<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span>161<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span>43<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span>241<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span>123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ymax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bndbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">annotation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Menggunakan dua kumpulan data pada saat yang sama hanya berarti bahwa Anda perlu menggabungkan file yang terkait secara hati-hati berpasangan, tidak lupa untuk mendaftarkan jalur dengan benar, serta mengocok file untuk pelatihan. <br><br>  Setelah itu, Anda bisa memulai pelatihan. <br><br><h3>  Pelatihan </h3><br>  Kode untuk pelatihan model dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Colab Notebook</a> saya. <br><br>  Saya melakukan pelatihan di Google Colaboratory, karena laptop saya hampir tidak melakukan pengujian grid, dan biasanya menutup telepon di pelatihan.  Kolaborasi memungkinkan saya untuk melatih jaring dengan cukup cepat dan gratis.  Satu-satunya hasil adalah bahwa saya harus menulis skrip kompilasi SSD-Caffe untuk Colaboratory (termasuk hal-hal aneh seperti mengkompilasi ulang dorongan dan mengedit sumbernya), yang membutuhkan waktu sekitar 40 menit.  Rincian lebih lanjut dapat ditemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di publikasi saya sebelumnya</a> . <br><br>  Colaboratory memiliki satu fitur lagi: setelah 12 jam, mobil mati, menghapus semua data secara permanen.  Cara terbaik untuk menghindari kehilangan data adalah dengan memasang cakram Google Anda di sistem dan menyimpan bobot jaringan di sana setiap 500-1000 iterasi pelatihan. <br><br>  Adapun detektor saya, dalam satu sesi di Colaboratory ia berhasil melepaskan 4,500 iterasi, dan sepenuhnya terlatih dalam dua sesi. <br><br>  Kualitas prediksi (rata-rata presisi) pada set data uji yang saya sorot (digabung WIDER dan FDDB dengan pembatasan yang tercantum di atas) adalah sekitar 0,87 untuk model terbaik.  Untuk mengukur MAP pada skala yang disimpan selama pelatihan, ada skrip <code>scripts/plot_map.py</code> . <br><br>  Detektor bekerja pada contoh (sangat aneh) dari dataset: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nw/kc/jy/nwkcjyrtsz09v2fivdbs4uny3lc.png" width="60%"></div><br><h2>  Luncurkan di NCS </h2><br>  Demo deteksi wajah ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Untuk mengkompilasi jaringan neural untuk Neural Compute Stick, Anda memerlukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Movidius NCSDK</a> : ini berisi utilitas untuk mengkompilasi dan membuat profil jaringan saraf, serta API C ++ dan Python.  Perlu dicatat bahwa versi kedua, tidak sesuai dengan yang pertama, baru-baru ini dirilis: semua fungsi API diganti nama karena beberapa alasan, format internal jaringan saraf diubah, FIFO ditambahkan untuk berinteraksi dengan NCS, dan (akhirnya) ada konversi otomatis dari float 32 bit ke mengapung 16 bit, yang sangat kurang dalam C ++.  Saya memperbarui semua proyek saya ke versi kedua, tetapi meninggalkan beberapa kruk untuk kompatibilitas dengan yang pertama. <br><br>  Setelah melatih detektor, ada baiknya menggabungkan lapisan BatchNorm dengan konvolusi yang berdekatan untuk mempercepat jaringan saraf.  Script <code>merge_bn.py</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini dari sini</a> , yang saya pinjam dari proyek Mobilenet-SSD. <br><br>  Maka Anda perlu memanggil utilitas <code>mvNCCompile</code> , misalnya: <br><br><pre> <code class="bash hljs">mvNCCompile -s 12 -o graph_ssd -w ssd-face.caffemodel ssd-face.prototxt</code> </pre><br>  Ada target <code>graph_ssd</code> untuk ini di Makefile proyek.  File <code>graph_ssd</code> dihasilkan adalah deskripsi jaringan saraf dalam format yang dipahami oleh NCS. <br><br>  Sekarang tentang cara berinteraksi dengan perangkat itu sendiri.  Prosesnya tidak terlalu rumit, tetapi membutuhkan jumlah kode yang cukup besar.  Urutan tindakan kira-kira sebagai berikut: <br><br><ul><li>  Dapatkan deskriptor perangkat dengan nomor seri </li><li>  Buka perangkat </li><li>  Baca file jaringan saraf yang dikompilasi ke buffer (sebagai file biner) </li><li>  Buat grafik perhitungan kosong untuk NCS </li><li>  Tempatkan grafik pada perangkat menggunakan data dari file dan pilih FIFO untuk itu pada input / output;  buffer dengan konten file sekarang dapat dibebaskan </li><li>  Detektor mulai: <br><ul><li>  Dapatkan gambar dari kamera (atau dari sumber lain mana pun) </li><li>  Memprosesnya: skala ke ukuran yang diinginkan, dikonversi ke float32 dan dilemparkan ke kisaran [-1,1] </li><li>  Unggah gambar ke perangkat dan minta inferensi </li><li>  Minta hasil (program akan diblokir hingga hasilnya diterima) </li><li>  Parsing hasilnya, pilih bingkai objek (tentang format - lebih lanjut) </li><li>  Prediksi tampilan </li></ul><br></li><li>  Bebaskan semua sumber daya: hapus FIFO dan grafik kalkulasi, tutup perangkat dan lepas pegangannya </li></ul><br>  Hampir setiap tindakan dengan NCS memiliki fungsi tersendiri, dan dalam C ++ ini terlihat sangat rumit, dan Anda harus dengan cermat memantau pelepasan semua sumber daya.  Agar tidak membebani kode, saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kelas wrapper untuk bekerja dengan NCS</a> .  Di dalamnya, semua pekerjaan inisialisasi tersembunyi di konstruktor dan fungsi <code>load_file</code> , dan pada rilis sumber daya - di destruktor, dan bekerja dengan NCS dikurangi menjadi memanggil 2-3 metode kelas.  Selain itu, ada fungsi yang mudah untuk menjelaskan kesalahan yang telah terjadi. <br><br>  Buat pembungkus dengan meneruskan ukuran input dan ukuran output (jumlah elemen) ke konstruktor: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">NCSWrapper </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NCS</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NETWORK_INPUT_SIZE*NETWORK_INPUT_SIZE*</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, NETWORK_OUTPUT_SIZE)</span></span></span></span>;</code> </pre><br>  Kami memuat file yang dikompilasi dengan jaringan saraf, secara bersamaan menginisialisasi semua yang kami butuhkan: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!NCS.load_file(<span class="hljs-string"><span class="hljs-string">"./models/face/graph_ssd"</span></span>)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Kami mengonversi gambar ke float32 ( <code>image</code> adalah <code>cv::Mat</code> dalam format <code>CV_32FC3</code> ) dan mengunduhnya ke perangkat: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.load_tensor_nowait((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>*)image.data)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  Kami mendapatkan hasilnya ( <code>result</code> adalah free <code>float</code> pointer, buffer hasil didukung oleh pembungkus);  sampai akhir perhitungan, program diblokir: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!NCS.get_result(result)) { NCS.print_error_code(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  Bahkan, pembungkus juga memiliki metode yang memungkinkan Anda memuat data dan mendapatkan hasilnya pada saat yang bersamaan: <code>load_tensor((float*)image.data, result)</code> .  Saya menolak untuk menggunakannya karena alasan: menggunakan metode terpisah, Anda dapat sedikit mempercepat eksekusi kode.  Setelah memuat gambar, CPU akan diam sampai hasil eksekusi dengan NCS tiba (dalam hal ini sekitar 100 ms), dan saat ini Anda dapat melakukan pekerjaan yang bermanfaat: membaca bingkai baru dan mengonversinya, serta menampilkan deteksi sebelumnya .  Ini persis bagaimana program demo diimplementasikan, dalam kasus saya ini sedikit meningkatkan FPS.  Anda dapat melangkah lebih jauh dan memulai pemrosesan gambar dan detektor wajah secara serempak dalam dua aliran berbeda - ini benar-benar berfungsi dan memungkinkan Anda untuk mempercepat sedikit lagi, tetapi itu tidak diterapkan dalam program demo. <br><br>  Detektor sebagai hasilnya mengembalikan array float ukuran <code>7*(keep_top_k+1)</code> .  Di sini, <code>keep_top_k</code> adalah parameter yang ditentukan dalam file <code>.prototxt</code> model dan menunjukkan berapa banyak deteksi (dalam urutan kepercayaan menurun) yang harus dikembalikan.  Parameter ini, serta parameter yang bertanggung jawab untuk memfilter deteksi dengan nilai kepercayaan minimum, dan parameter penindasan maksimum tidak dapat dikonfigurasi dalam file <code>.prototxt</code> model di lapisan terakhir.  Perlu dicatat bahwa jika Caffe mengembalikan deteksi sebanyak yang ditemukan pada gambar, maka NCS selalu mengembalikan <code>keep_top_k</code> deteksi sehingga ukuran array konstan. <br><br>  Array hasil itu sendiri diatur sebagai berikut: jika kita menganggapnya sebagai matriks dengan <code>keep_top_k+1</code> baris dan 7 kolom, maka di baris pertama, di elemen pertama akan ada jumlah deteksi, dan mulai dari baris kedua akan ada deteksi sendiri dalam format <code>"garbage, class_index, class_probability, x_min, y_min, x_max, y_max"</code> .  Koordinat ditentukan dalam kisaran [0,1], sehingga koordinat tersebut perlu dikalikan dengan tinggi / lebar gambar.  Elemen yang tersisa dari array akan menjadi sampah.  Dalam hal ini, penindasan non maksimum dilakukan secara otomatis, bahkan sebelum hasilnya diperoleh (tampaknya, tepat di NCS). <br><br><div class="spoiler">  <b class="spoiler_title">Parsing Detektor</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_detection_boxes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">* predictions, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> thresh, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;&amp; probs, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;cv::Rect&gt;&amp; boxes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> num = predictions[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cls = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;num+<span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { score = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>]; cls = predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (score&gt;thresh &amp;&amp; cls&lt;=<span class="hljs-number"><span class="hljs-number">1</span></span>) { probs.push_back(score); boxes.push_back(Rect(predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>]*w, predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>]*h, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>])*w, (predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">6</span></span>]-predictions[i*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span>])*h)); } } }</code> </pre><br></div></div><br><h2>  Fitur Peluncuran Raspberry Pi </h2><br>  Program demo itu sendiri dapat dijalankan di komputer atau laptop biasa dengan Ubuntu, atau di Raspberry Pi dengan Raspbian Stretch.  Saya menggunakan Raspberry Pi 2 model B, tetapi demo harus bekerja pada model lain juga.  Makefile proyek berisi dua tujuan untuk beralih mode: <code>make switch_desk</code> untuk komputer / laptop dan <code>make switch_rpi</code> untuk Raspberry Pi.  Perbedaan mendasar dalam kode program adalah bahwa dalam kasus pertama, OpenCV digunakan untuk membaca data dari kamera, dan dalam kasus kedua, perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RaspiCam</a> .  Untuk menjalankan demo di Raspberry, Anda harus mengkompilasi dan menginstalnya. <br><br>  Sekarang poin yang sangat penting: menginstal NCSDK.  Jika Anda mengikuti petunjuk instalasi standar pada Raspberry Pi, tidak ada yang baik akan berakhir: installer akan mencoba untuk menyeret dan mengkompilasi SSD-Caffe dan Tensorflow.  Sebaliknya, NCSDK harus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dikompilasi dalam mode API-only</a> .  Dalam mode ini, hanya C ++ dan Python API yang akan tersedia (artinya, tidak mungkin untuk mengkompilasi dan profil grafik jaringan saraf).  Ini berarti bahwa grafik jaringan syaraf pertama-tama harus dikompilasi pada komputer biasa, dan kemudian disalin ke Raspberry.  Untuk kenyamanan, saya menambahkan dua file yang dikompilasi ke repositori, untuk YOLO dan untuk SSD. <br><br>  Hal lain yang menarik adalah koneksi fisik NCS ke Raspberry.  Tampaknya tidak sulit untuk menghubungkannya ke konektor USB, tetapi Anda harus ingat bahwa kasingnya akan memblokir tiga konektor lainnya (cukup sehat, karena berfungsi sebagai radiator).  Jalan keluar termudah adalah menghubungkannya melalui kabel USB. <br><br>  Perlu juga diingat bahwa kecepatan eksekusi akan bervariasi untuk versi USB yang berbeda (untuk jaringan saraf khusus ini: 102 ms untuk USB 3.0, 92 ms untuk USB 2.0). <br><br>  Sekarang tentang kekuatan NCS.  Menurut dokumentasi, itu mengkonsumsi hingga 1 watt (pada 5 volt pada konektor USB akan sampai 200 ma; untuk perbandingan: kamera Raspberry mengkonsumsi hingga 250 ma).  Ketika ditenagai oleh charger 5 volt reguler, 2 ampere, semuanya bekerja dengan baik.  Namun, mencoba menghubungkan dua atau lebih NCS ke Raspberry dapat menyebabkan masalah.  Dalam hal ini, disarankan untuk menggunakan pembagi USB dengan kemungkinan daya eksternal. <br><br>  Di Raspberry, demo lebih lambat daripada di komputer / laptop: 7,2 FPS dibandingkan 10,4 FPS.  Ini disebabkan oleh beberapa faktor: pertama, tidak mungkin untuk menyingkirkan perhitungan pada CPU, tetapi mereka dilakukan jauh lebih lambat;  kedua, kecepatan transfer data mempengaruhi (untuk USB 2.0). <br><br>  Juga, sebagai perbandingan, saya mencoba menjalankan pendeteksi wajah pada Raspberry YOLOv2 dari artikel pertama saya, tetapi bekerja dengan sangat buruk: pada kecepatan 3,6 FPS, ia kehilangan banyak wajah bahkan pada bingkai sederhana.  Rupanya, sangat sensitif terhadap parameter gambar input, yang kualitasnya dalam kasus kamera Raspberry jauh dari ideal.  SSD berfungsi jauh lebih stabil, meskipun saya harus sedikit mengubah pengaturan video dalam pengaturan RapiCam.  dia juga terkadang merindukan wajah-wajah dalam bingkai, tetapi melakukan ini sangat jarang.  Untuk meningkatkan stabilitas dalam aplikasi nyata, Anda dapat menambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pelacak centroid</a> sederhana. <br><br>  By the way: hal yang sama dapat direproduksi dalam Python, ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tutorial tentang PyImageSearch</a> (Mobilenet-SSD digunakan untuk tugas deteksi objek). <br><br><h4>  Ide lain </h4><br>  Saya juga mencoba beberapa ide untuk mempercepat jaringan saraf itu sendiri: <br><br>  Ide pertama: Anda hanya dapat meninggalkan deteksi lapisan <code>conv11</code> dan <code>conv13</code> , dan menghapus semua lapisan tambahan.  Anda akan mendapatkan detektor yang hanya mendeteksi wajah kecil dan bekerja sedikit lebih cepat.  Semua dalam semua, tidak sepadan. <br><br>  Gagasan kedua menarik, tetapi tidak berhasil: Saya mencoba membuang konvolusi dari jaringan saraf dengan bobot mendekati nol, berharap itu akan menjadi lebih cepat.  Namun, ada beberapa konvolusi seperti itu, dan penghapusannya hanya sedikit memperlambat jaringan saraf (satu-satunya firasat: ini karena fakta bahwa jumlah saluran telah berhenti menjadi kekuatan dua). <br><br><h2>  Kesimpulan </h2><br>  Saya berpikir tentang mendeteksi wajah pada Raspberry untuk waktu yang lama, sebagai subtugas dari proyek robot saya.  Saya tidak suka detektor klasik dalam hal kecepatan dan kualitas, dan saya memutuskan untuk mencoba metode jaringan saraf, pada saat yang sama menguji Neural Compute Stick, sebagai hasilnya ada dua proyek pada GitHub dan tiga artikel tentang Habré (termasuk yang sekarang).  Secara umum, hasilnya cocok untuk saya - kemungkinan besar, saya akan menggunakan detektor ini di robot saya (mungkin akan ada artikel lain tentang itu).  Perlu dicatat bahwa solusi saya mungkin tidak optimal - namun, ini adalah proyek pelatihan, dibuat sebagian karena penasaran NCS.  Meskipun demikian, saya berharap artikel ini bermanfaat bagi seseorang. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424973/">https://habr.com/ru/post/id424973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424963/index.html">Pendanaan Zuckerberg: Alat Bangun untuk Sains Bersama</a></li>
<li><a href="../id424965/index.html">Bereaksi Pengembangan Aplikasi Menggunakan ReasonReact</a></li>
<li><a href="../id424967/index.html">Pintasan JavaScript untuk pemula</a></li>
<li><a href="../id424969/index.html">Panduan Node.js, Bagian 9: Bekerja dengan Sistem File</a></li>
<li><a href="../id424971/index.html">Habrokast "Sunset Manually" # 1. Mencoba mengatur lingkungan untuk mengembangkan mainan untuk Windows</a></li>
<li><a href="../id424975/index.html">Kedalaman SIEM: korelasi out-of-box. Bagian 2. Skema data sebagai refleksi dari model "dunia"</a></li>
<li><a href="../id424977/index.html">Belajar dari kesalahan: mengoptimalkan aplikasi di App Store dan Google Play</a></li>
<li><a href="../id424979/index.html">Elm Nyaman dan canggung. Http, Tugas</a></li>
<li><a href="../id424981/index.html">Teks Telur Paskah RPG dalam Kode Mesin Pencari Google</a></li>
<li><a href="../id424985/index.html">Dalam preseden yudisial yang penting, badan intelijen AS tidak dapat menyadap panggilan di utusan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>