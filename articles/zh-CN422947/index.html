<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♒️ ✋🏿 👨🏼‍🤝‍👨🏻 如何使用StarWind VTL在Microsoft Azure Blob存储中设置存档Veeam备份 ☎️ 🙆🏿 🕺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我提请您注意我的同事Andrew Zhelezko关于基于Veeam，StarWind和Azure产品的集成备份存储解决方案的使用的文章翻译。 

 时至今日，许多公司都使用磁带库来提供服务，但是，确保备份系统可靠且稳定运行的云存储正变得越来越流行。 借助对常见虚拟磁带库的支持，Veeam现在使您可...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何使用StarWind VTL在Microsoft Azure Blob存储中设置存档Veeam备份</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/422947/"> 我提请您注意我的同事Andrew Zhelezko关于基于Veeam，StarWind和Azure产品的集成备份存储解决方案的使用的文章翻译。 <br><br> 时至今日，许多公司都使用磁带库来提供服务，但是，确保备份系统可靠且稳定运行的云存储正变得越来越流行。 借助对常见虚拟磁带库的支持，Veeam现在使您可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">适用于Microsoft Azure Blob存储</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">StarWind VTL</a>库。 对于那些需要便宜而可靠的云存储以将数据备份安全地存储在其中的人来说，这是一个巨大的机会。 使用这种集成解决方案的用户将能够实施灵活的数据存储策略：例如，将备份保留在其通常的基础结构中1-2周，然后将其移至长期的Microsoft Azure Blob存储中。 在本文中，我将简要讨论如何配置集成。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z_/m1/v5/z_m1v5wkrbcqo6p7tvmfnaqz3di.png"></div><br><a name="habracut"></a><br> 我注意到，Veeam用户将需要花费的精力来建立集成。 但是，应该记住，有很多方案可以部署集成解决方案的组件，因此您需要谨慎选择适合自己的配置。 场景可能非常不同-从将Veeam和StarWind解决方案安装到内部部署基础结构中的同一服务器上，再将其安装到Azure云环境中的不同VM上。 <br><br> 在建立集成解决方案的一般过程中，分为三个主要阶段。 <br><br><h1> 阶段1：准备Azure云基础架构 </h1><br> 要准备云基础架构，您需要执行以下操作： <br><br><ol><li> 转到Azure门户，选择“ <b>存储帐户”</b> ，添加一个新的存储（或现有的Blob存储）。 </li><li> 输入所有必要的信息，从“ <b>帐户类型”中</b>选择“ <b>Blob存储”</b> 。 </li><li> 转到新的存储库，复制名称和访问密钥（位于<b>“设置”</b> &gt;“ <b>访问密钥”中</b> ）。 </li><li> 创建一个随后将用于存储数据的<b>容器</b> （ <b>Blob服务</b> &gt; <b>容器</b> &gt; <b>新建</b> ）。 </li></ol><br> 在StarWind VTL中配置云复制时，将需要这些设置。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/9j/nu/yy9jnuaafaojzdiebgcsmexaxk8.png"></div><br><h1> 步骤2：配置StarWind VTL </h1><br> 至此，我们将模拟所选服务器上磁带库的安装。  Veeam Backup＆Replication将数据写入该库中的介质，然后将在此处进行处理并准备将其传输到云中。 这是经典的D2D2C（磁盘到磁盘到云）方案。 <br><br> 必须完成以下步骤： <br><br><ol><li> 在目标服务器上安装最新版本的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">StarWind VTL</a> （在撰写本文时为8.0.0.12248）-它可以是物理机或虚拟机，云服务器甚至Veeam服务器。 </li><li> 在安装过程中，选择<b>VTL和Cloud Replication</b>选项-然后将自动安装相应的StarWind组件。 </li><li> 指定存储池的路径（默认情况下可以保留在驱动器<b>C上</b> ）。 </li><li> 然后转到StarWind控制台，连接到所需的服务器（如果所有内容都在同一台计算机上，则选择localhost或127.0.0.1进行连接），并创建具有所需盒式磁带数量的虚拟磁带设备。 </li></ol><br>  StarWind VTL具有典型的操作原理和一组操作，可以模拟真正的HPE MSL8096磁带库。 <br><br>  <i>注意：您</i>可能需要为服务器安装最新的驱动程序，才能正确识别指定的库。 你可以把它们带到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a> 。 <br><br> 现在，您可以使用标准Windows iSCSI工具包（“ <b>控制面板”</b> &gt;“ <b>管理工具”</b> &gt;“ <b>iSCSI Initiator”</b> ）将库连接到服务器。 转到“ <b>发现”</b> &gt;“ <b>发现门户”</b>以初始化并连接到库（“ <b>目标”</b>选项卡）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tq/qo/zc/tqqozc5ivhapvsjwwq9p2cluh3g.png"></div><br> 之后，您需要使用复制配置到云的归档。 为此，选择“ Microsoft Azure云存储”，然后指定在此阶段保存的数据 <br><br>  1.然后，输入所需的存储期限设置。 <br><br><img src="https://habrastorage.org/webt/ez/ye/lv/ezyelv9okt5iuweeogz48wewziq.png"><br><br><h1> 步骤3：在Veeam备份和复制端进行配置 </h1><br> 对于Veeam备份和复制，您需要将上一步中配置的服务器作为磁带服务器添加到Veeam基础架构中。 您可以在Veeam备份和复制中执行此操作。 您将需要指定IP / DNS和访问帐户。 <br> 当以该角色添加服务器时， <b>传输服务</b>和<b>磁带代理服务</b>将自动安装在其上。 您还可以选择自动磁带清单的选项。 <br><br> 识别所有盒式磁带并将其放入“ <b>空闲媒体池”后</b> ，创建一个包含多个盒式磁带的目标池是有意义的。 稍后我们将需要它。 <br> 因此，我们的Veeam备份和复制已连接到虚拟磁带库并可以在其中写入数据。 为此，您只需要在“ <i>备份到磁带”</i> （或“ <i>文件到磁带”</i> ） <i>磁带</i>上创建一个归档任务，并指定要存档的内容（对于“ <i>备份到磁带”</i> ，您应该已经有计算机的备份副本）。 此任务将从先前准备好的目标池中取出盒带（请参见上文）。 <br> 根据备份\文件的大小，数据将或多或少地进入VTL。 <br><br><img src="https://habrastorage.org/webt/qb/4n/u8/qb4nu8ju2ukabdcy1pljah9kgvu.png"><br><br> 我们转到StarWind管理控制台，并确保备份数据记录在插槽1中的磁带上： <br><br><img src="https://habrastorage.org/webt/wb/jf/ye/wbjfyel4p6etppgnmzumihknka0.png"><br><br> 现在，您可以切换到虚拟磁带库服务器，并从插槽中删除磁带（如果不是通过在作业结束时导出磁带来自动完成的话）。 由于就我而言，复制到云的开始时间是在记录到磁带后立即设置的，因此我可以亲自观察将数据上传到Azure Blob存储上的过程： <br><br><img src="https://habrastorage.org/webt/mm/h2/nx/mmh2nxf2uspnvoclaorigxa3x1k.png"><br><br> 如果下载成功，则相应的指示符将出现在“ <b>云”</b>选项卡上。 为确保复制成功，可以转到Azure Blob存储并检查文件是否已上传到我们的容器。 <br><br><img src="https://habrastorage.org/webt/cz/kl/ky/czklkyf_-46yetmum32fzorflcw.png"><br><br> 然后，您可以使用Azure门户更改这些下载文件中任何一个的访问层。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/mi/ze/kumizeni0hhh8hstrpz8-fov5em.png"></div><br> 可以使用StarWind设置和PowerShell进行类似的更改。 <br><br><h1> 有关将虚拟机从VTL库还原到Azure的一点点 </h1><br>  StarWind用户可以从Azure云存储开始还原操作-为此，您可以打开Veeam备份和复制控制台，并使用文件恢复向导或VM的标准方法。 但是，为什么不直接在Azure基础结构上执行恢复呢？ 实际上，在Azure Marketplace中有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">StarWind设备</a>虚拟机-它可以像Veeam Backup＆Replication一样部署到Azure，然后从存档存储直接还原到Azure中的新VM。 这种方法将节省您的时间，并使应用程序可以在备份基础结构的不同“分区”中运行。 <br> 除了所有内容之外，您还可以通过<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VeeamPN（基于Veeam的网络）提供</a>对Azure中这些新还原的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VM的</a>访问权限-例如，提供与组织的主数据中心的安全连接。 <br><br><h1> 网站连结 </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关于Habré的有关使用磁带的文章。</a> </li><li> 关于集成解决方案的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">网络研讨会</a> （英语）。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN422947/">https://habr.com/ru/post/zh-CN422947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN422937/index.html">惰性计算树的磁盘缓存</a></li>
<li><a href="../zh-CN422939/index.html">《开发人员的Kali Linux》一书</a></li>
<li><a href="../zh-CN422941/index.html">“三只小船，贫穷和狗儿”，或Anti窃如何寻求释义</a></li>
<li><a href="../zh-CN422943/index.html">关于工业采矿的一点</a></li>
<li><a href="../zh-CN422945/index.html">9月27日，莫斯科-Mitap QIWI SERVER PARTY 3.0</a></li>
<li><a href="../zh-CN422949/index.html">关于容器，云原生和Kubernetes的新CNCF统计信息</a></li>
<li><a href="../zh-CN422951/index.html">python的有趣性和实用性。 第三部分</a></li>
<li><a href="../zh-CN422953/index.html">谁说Flabber不是真实的：制造均质的热固性聚合物凝胶</a></li>
<li><a href="../zh-CN422955/index.html">Chrome 69中的画中画模式</a></li>
<li><a href="../zh-CN422957/index.html">轻松赚钱已经结束：2018年ICO市场的主要趋势</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>