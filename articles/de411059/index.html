<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüè≠ üõï üë¶ Wie man ein Zauberer wird (Teil 2). Technische Backstage üë®üèæ‚Äçüè≠ üë©‚Äçüåæ ü•Ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geektimes, hallo! Wie versprochen ist dies eine Fortsetzung des letzten Artikels √ºber unsere kleine Welt der Magie. Heute erz√§hle ich Ihnen von den Ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man ein Zauberer wird (Teil 2). Technische Backstage</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/411059/"><p>  Geektimes, hallo!  Wie versprochen ist dies eine Fortsetzung des letzten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikels</a> √ºber unsere kleine Welt der Magie.  Heute erz√§hle ich Ihnen von den Backstage magischer Quests, welche Entscheidungen getroffen wurden und wie wir zu dem Schluss kamen, dass die Quest genau ein solches Szenario und Erscheinungsbild hat. </p><br><p>  Weil  Bis die Quest erstellt wurde, mochte ich Elektronik, insbesondere das Programmieren von AVR-Mikrocontrollern in C, und es wurde beschlossen, dieses Potenzial zu maximieren, um der Quest maximale Interaktivit√§t, Interesse und Spannung zu verleihen!  Au√üerdem wollte ich die Quest wirklich nicht wie Dutzende anderer aussehen lassen (die zu dieser Zeit in unserer Stadt arbeiteten). </p><br><p>  W√§hrend wir √ºber das neue Szenario nachdachten, entschieden wir klar, dass wir keine Schl√∂sser, keine Schl√ºssel, keine Standardaufgaben haben w√ºrden. Im Allgemeinen schalten Sie die Elektronik so weit wie m√∂glich ein! </p><br><p>  Schauen wir uns den technischen Teil genauer an und jetzt erkl√§re ich Ihnen, wie Sie die Elektronik so <s>kollektiv</s> wie m√∂glich gestalten k√∂nnen. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/dn/vy/th/dnvythtcndsal3tgxf_ia1s_yxk.jpeg"></a> </p><a name="habracut"></a><br><h2>  Allgemeine √úberpr√ºfung </h2><br><p>  Wir werden die anf√§ngliche Implementierung der Quest weglassen (vielleicht werde ich sp√§ter dar√ºber sprechen) und uns auf den Moment des Abschlusses konzentrieren (nach dem die Quest die endg√ºltige Form hat). </p><br><p>  Nachdem wir unsere neue Vision der Suche besprochen hatten, stellte ich fest, dass die Leistung eines Mikrocontrollers bereits gering ist und Sie einen Computer anschlie√üen m√ºssen, um alle Ger√§te in einem einzigen System zu kombinieren.  Um die Integrit√§t des Bildes zu verstehen, wurde ein Diagramm aller Ger√§te und ihrer Wechselwirkungen erstellt: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wh/ef/vm/whefvmw6i3ss9jkjumnxju_veiw.jpeg" width="550"></div><br><p>  Aus dem Diagramm k√∂nnte man meinen, dass der Computer der Hauptcomputer ist, aber dies ist nicht ganz richtig. Er wird die Rolle der Verwaltung und Wiedergabe von Audiospuren √ºbernehmen, die wir, wie Sie bereits im vorherigen Artikel bemerkt haben, sehr oft haben. </p><br><p>  Der Atmega16-Mikrocontroller wurde zum Herzst√ºck des gesamten Systems (das einzige Auswahlkriterium war eine ausreichende Anzahl von GPIOs), das √ºber UART auf einem Computer mit dem Programm kommuniziert.  Alle anderen Ger√§te werden auf dem Atmega8-Mikrocontroller hergestellt (er ist in Bezug auf die Anzahl der GPIOs ausgezeichnet und hat einen erschwinglichen Preis). </p><br><p>  Die meisten Platinen sind auf die coolsten zweiseitigen Steckbretter gel√∂tet, alle Details in den DIP-Geh√§usen.  Einige Bretter blieben von Anfang an bei der Suche. </p><br><div class="spoiler">  <b class="spoiler_title">Programm f√ºr Computer</b> <div class="spoiler_text"><p>  Das Hauptprogrammfenster: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jy/ym/8o/jyym8oqes1h3jybzjf1x-ipqloo.jpeg" width="500"></div><br><p>  Erweitertes Fenster f√ºr Notsituationen: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/gz/is/lpgzisvnnrzbjmd544mjapcd-eg.jpeg" width="500"></div><br><p>  Fehlerfenster: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/_y/x-/zc_yx-mgwz-s08u-leuj7zh5oso.jpeg" width="500"></div></div></div><br><p>  Die Hauptplatine empf√§ngt nur (!) Diskrete Signale von anderen Ger√§ten (√ºber die auf dem Foto sichtbaren Optokoppler), kommuniziert mit dem Computer und steuert die LED in der Speicherschale. </p><br><div class="spoiler">  <b class="spoiler_title">Brettfoto</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/tw/uy/ax/twuyaxztwv4q95ghdpey2fjojfo.jpeg" width="300"><img src="https://habrastorage.org/webt/l_/6e/jz/l_6ejzxjegptdieidedh4w3lq_g.jpeg" width="300"></p></div></div><br><p>  <strong>Prim√§re Zauberkanone: Zauberstab</strong> </p><br><p>  Ein Zauberstab ist ein wenig Magie, ein Neodym-Magnet ist in seine Spitze eingebaut.  Er machte sie f√ºr nur 2 Dollar zu einem guten Gro√üvater f√ºr Holz.  Das Hauptproblem bestand darin, einen Magneten mit maximalem Durchmesser zu schieben, um die Spitze so d√ºnn wie m√∂glich zu halten. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/pu/t5/ouput5svy1t_kylawmvy4z-psf8.jpeg" height="100"></div><br><p>  Schauen wir uns nun jedes Ger√§t genauer an. </p><br><p>  <strong>Roter Zweig</strong> </p><br><p>  <em>Das Buch</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jg/wm/5n/jgwm5nqowqi-snfpqeea6qygdbs.jpeg" width="500"></div><br><p>  Das Audioereignis des Buches wird vom Trailer ausgel√∂st, der in einem Regal montiert ist.  Es ist zun√§chst geschlossen und um es zu √∂ffnen, m√ºssen Sie einen Zauberstab mit einem Magneten mitbringen.  Das Buch ist wie ein Mini-Safe: Es verf√ºgt √ºber Batterien (Li-Ion 3S), einen Reed-Schalter und einen Transistorschl√ºssel, der die elektromechanische Verriegelung steuert (damit nicht der gesamte Strom durch den Reed-Schalter flie√üt. Gleichzeitig k√∂nnen Sie ein sch√∂nes Leuchten im Reed-Schalter sehen, das jedoch nicht lange anh√§lt und die Wahrscheinlichkeit, dass Kontakte ‚Äûh√§ngen bleiben‚Äú).  Hier ist alles einfach - der Stab wird angehoben, der Reed-Schalter leitet Strom, der Transistor ist offen und der Verriegelungsbolzen ist eingefahren.  Das Innere des Zehensafes sieht folgenderma√üen aus: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4p/a3/cs/4pa3csv5uafgtxobfj8ufadhdi8.jpeg" width="500"></div><br><p>  Und die letzte Ansicht: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cv/3n/vq/cv3nvqxj-m6f1ciowre3bxc3vjk.jpeg" width="500"></div><br><p>  <em>Dobby</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gh/ra/7q/ghra7qobwrgesiu4rcqtj9mtxay.jpeg" width="500"></div><br><p>  Weil  Die Aufgabe bestand darin, am interaktivsten darauf zu reagieren, die Socke zu Dobby zu bringen. Die Wahl fiel auf die RFID-Technologie.  Dazu musste ich einen kleinen Schl√ºsselbund in meine Socke n√§hen (wie von einer Gegensprechanlage am Eingang) und auf die Socke das gleiche Zeichen wie bei Dobby in seiner Handfl√§che setzen.  Hinter dem Bild von Dobby steht das RFID-Modul. </p><br><p>  Das Ger√§t basiert auf dem Atmega8-Mikrocontroller und dem beliebten RC522-RFID-Modul.  Nach dem Anheben der Socke (ein Reaktionsradius von bis zu 4 cm ist einfach perfekt) √∂ffnet der Feldeffekttransistor die elektromagnetische Verriegelung in der Box und mit Hilfe einer Feder wird der Deckel angehoben, ein Signal an die Hauptplatine gesendet und ein rotes Licht leuchtet in der Speicherschale auf. </p><br><div class="spoiler">  <b class="spoiler_title">Geb√ºhr</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jq/ql/_7/jqql_7jfi3w6lis3u58ylar3mwi.png" width="450"></div></div></div><br><p>  <strong>Blauer Zweig</strong> </p><br><p>  <em>Kamin</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6w/b0/ej/6wb0ejy-xmt10rrvvknd2emkp_8.jpeg" height="450"></div><br><p>  Der Kamin ist nat√ºrlich falsch.  Hergestellt aus Profil und Trockenbau mit Ziegelfliesen verklebt. </p><br><p>  Elektronik auf Atmega8 montiert.  In jedem Ziegel ist ein Anh√§nger montiert und ein blauer LED-Streifen ist angeschlossen.  Die Ziegel selbst sitzen auf einer Seite der Vorh√§nge, und auf der anderen Seite wird eine primitive F√ºhrung mit einer R√ºckstellfeder hergestellt.  Wenn Sie zum ersten Mal auf einen Stein klicken, leuchten alle Druckkn√∂pfe (es gibt 7 davon) 100 ms lang und das Auge wird mit einem Schrittmotor aus dem Bild entfernt. Das Signal wird an die Hauptplatine gesendet, der Speicher wird eingeschaltet und das blaue Licht in der Speicherschale. </p><br><p>  Der Schrittmotor und der LED-Streifen werden mit der Darlington ULN2003-Transistorbaugruppe gesteuert (f√ºr Neugierige kann der theoretische Teil hier gelesen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> ). </p><br><p>  Jetzt kehrt jeder Klick auf einen Stein seinen Zustand um (ein Dr√ºcken - Ein, das n√§chste - Aus usw.). Wenn Sie zum ersten Mal auf einen Stein klicken, wird der Infrarotsensor im Bild ausgeblendet: Die IR-LED leuchtet, die Strahlung schl√§gt vom sich n√§hernden Spieler weg und es wird getroffen zu einem IR-Transistor, der verwendet <del>  Kollektivfarm </del>  Eine genaue Einstellung durch Widerst√§nde ergibt ein diskretes Signal 0 oder 1 am Ausgang. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j7/vo/vs/j7vovsqzvpecwnnta4ryuuicqzo.jpeg" width="500"></div><br><p>  Es gibt auch eine L√∂sung gegen st√∂rende Beleuchtung (insbesondere dann, wenn Benutzer anfangen, eine Lampe auf den Kamin zu richten). Eine weitere (maskierte) L√∂sung ist im offenen Stromkreis des Haupt-IR-Transistors enthalten, der bei Lichteinwirkung einfach die Reaktion des Mikrocontrollers ausschaltet. </p><br><p>  Sobald der IR-Sensor ausgel√∂st wird, schaltet der Mikrocontroller auch das Blinken der gew√ºnschten Kombination ein, die gedr√ºckt werden muss (Hervorheben), und √ºbrigens spielt auch die Reihenfolge des Dr√ºckens eine Rolle.  Durch Blinken der gew√ºnschten Kombination werden alle zuvor gepressten Steine ‚Äã‚Äãausgeschaltet. </p><br><p>  Wenn die richtige Kombination gedr√ºckt wurde, wird das Bild mit Hilfe eines elektromechanischen Riegels ge√∂ffnet, der gr√∂√üer als in den Schatullen ist.  Dazu musste ich sogar nur f√ºr diesen Riegel einen ziemlich gro√üen Transformator einsetzen. </p><br><p>  (Im Allgemeinen sind diese Latches sehr schwach, obwohl sie in der Spitze viel Strom verbrauchen. Sie m√ºssen sehr vorsichtig mit ihrer Steuerung sein. Wenn Sie sie l√§nger als 5 Sekunden mit Strom versorgen, kann sie einfach durchbrennen. So habe ich einen Latch verbrannt.) </p><br><div class="spoiler">  <b class="spoiler_title">Zugriff auf technische Knoten und Karte</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/3w/d_/3f3wd_pzwkiwc0akv-9gke8ycoy.jpeg" height="450"></div><br><p><img src="https://habrastorage.org/webt/19/y2/z1/19y2z1m4vdnzoakm9r3uurh638u.jpeg" width="350"><img src="https://habrastorage.org/webt/uf/xn/wv/ufxnwv1yklo_njv1hi_q6tf7doy.jpeg" width="350"></p></div></div><br><p>  <strong>Gr√ºner Zweig</strong> </p><br><p>  <em>Sarg</em> </p><br><p>  Auf dem Tisch steht ein unauff√§lliges Glas auf dem Anh√§nger. Wenn Sie es anheben, leuchtet das gr√ºne Licht im Kessel auf und der Sarg √∂ffnet sich, in dem sich ein Hinweis auf die T√ºr befindet. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/bp/g3/dgbpg30xa87pu3vkc8hsuyk_muo.jpeg" width="550"></div><br><p>  (Dies ist das gleiche Glas, das f√ºr das Osterei mit Dobbys Witzen ben√∂tigt wird, das im ersten Artikel beschrieben wird.) </p><br><p>  <em>Die T√ºr</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yj/s4/n1/yjs4n1lzj_ouxjypnurgsiu_vsm.jpeg" width="350"></div><br><p>  Wenn Sie den Griff zum ersten Mal ganz nach oben und unten dr√ºcken (dazu mussten Sie 2 Endschalter an der R√ºckseite der T√ºr anbringen, um auf das vollst√§ndige Dr√ºcken des Griffs zu reagieren), beginnt das Auge der Schlange an der T√ºr zu blinken. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/gs/yq/kigsyq4bpjrb41m3wkeacow0liw.jpeg" width="300"></div><br><p>  Der richtige T√ºr√∂ffnungsalgorithmus kann anhand der Eingabeaufforderung verstanden werden: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jw/rt/nv/jwrtnvq9y7fhpzfylrovjdse5xw.jpeg" height="400"></div><br><div class="spoiler">  <b class="spoiler_title">Sp√§ter stellte sich heraus, dass dieser Hinweis f√ºr die Spieler ziemlich kompliziert ist.</b>  <b class="spoiler_title">Anschlie√üend wurde es durch ein verst√§ndlicheres ersetzt</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/sr/v8/hlsrv8spyrijvnve2rz6fjmqfyi.jpeg" width="500"></div></div></div><br><p>  W√§hrend Pausen (5s) h√§ngt der Mikrocontroller einfach verz√∂gert, und w√§hrend des Dr√ºckens wird die Variable inkrementiert.  Wenn Sie den Griff also lange und fest dr√ºcken, √∂ffnet er sich trotzdem. √úbrigens haben einige Leute die T√ºr auf diese Weise ge√∂ffnet, ohne zu verstehen, wie sie es gemacht haben.  Um f√ºr dieses einfache Unterfangen keine neue Platine mit einem separaten Mikrocontroller herzustellen, wurden mehrere freie Stifte auf der Labyrinthplatine gefunden und alles wurde dort angeschlossen. </p><br><p>  <em>Brustspiegel</em> </p><br><p>  Auf den Deckel der Truhe werden 10 magische Symbole aufgebracht und im Inneren des Schilfs darunter geklebt. <br>  Der Benutzer muss den Zauberstab auf die 3 richtigen Zeichen bringen (die Reihenfolge spielt keine Rolle. Das Foto ist mit H√§kchen markiert). Andere Figuren haben jedoch auch Reed-Schalter, die den Zauberstab halten, auf den vorherige Klicks abgebrochen werden, selbst wenn sie korrekt waren (so dass es unm√∂glich war, die Truhe durch Halten des Zauberstabs zu √∂ffnen alle Zeichen in einer Reihe).  Mit der richtigen Auswahl an Symbolen √∂ffnet sich der Elektromagnet in der Brust (die bevorzugten Atmega8 und ULN2003 befinden sich in der Brust).  In diesem Stadium wird ein Signal an die Labyrinth-W√§hlplatte gesendet (eine √ºbliche Einheit vom Stift eines MK zum Stift eines anderen √ºber einen Transistorschl√ºssel), und die Wirbel beginnen sich im Labyrinth zu drehen. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/mg/va/y4mgva5jwu7of5x1_zt4mtlgaem.jpeg" width="550"></div><br><p>  <em>Labyrinth</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1w/lx/9c/1wlx9czlf4vl6-k_kolx6nrfile.jpeg" width="550"></div><br><p>  Wir haben dieses riesige Design untersch√§tzt.  Die Erstellung hat viel Zeit und M√ºhe gekostet, aber das Ergebnis hat sich gelohnt.  F√ºr die Arbeit des ‚Äûgro√üen schwarzen Objekts an der Wand‚Äú war viel GPIO erforderlich (alles wurde auf primitivste Weise durchgef√ºhrt - keine Multiplexer / Demultiplexer, nur Hardcore!), Also musste ich das Ger√§t in Funktionseinheiten aufteilen - das Zifferblatt und das Labyrinth selbst.  Jeder Knoten wird auf demselben Atmega8 erstellt. </p><br><div class="spoiler">  <b class="spoiler_title">Montageprozess</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ha/kd/n7/hakdn7tbv9q7-3pjscovb9_pgok.gif" width="550"></div></div></div><br><p>  Im Labyrinth ist das Prinzip einfach (obwohl es damals nicht ganz einfach schien :)).  Viele Probleme wurden durch das Vorhandensein eines Balls am Ende seines Weges verursacht.  Zuf√§llige Interferenzen st√∂rten st√§ndig den Betrieb eines offenen Optokopplers. </p><br><div class="spoiler">  <b class="spoiler_title">Brettfoto</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/bv/16/pu/bv16pucrojx_6qpbaq5wmszmfrq.jpeg" width="550"></div></div></div><br><p>  Es sind diese gelben Kondensatoren, die zur L√∂sung des Problems des zuf√§lligen Betriebs von Optokopplern beigetragen haben. </p><br><p>  Durch das Passieren des Labyrinths √∂ffnet sich der Zugang zur gr√ºnen Kugel.  Das System f√ºr den Zugang ist von den Fahrzeugt√ºren aus verriegelt.  (In Bezug auf Preis / R√ºckzugskraft ist er ein Monster!). </p><br><p>  Urspr√ºnglich war nicht geplant, 1 Ball f√ºr das Spiel auszugeben, aber ich musste bereits in der Endphase Anpassungen vornehmen, weil  Bei Magnetkugeln k√∂nnen sie ‚Äûzusammenkleben‚Äú und sie trennen. Dies ist sehr problematisch. Um diese Wahrscheinlichkeit im Spiel so weit wie m√∂glich auszuschlie√üen, wurde beschlossen, nacheinander B√§lle auszugeben.  Die Zuf√ºhrung erfolgt mit einem Schrittmotor und einem improvisierten Verschluss von einer alten Spinnrute. </p><br><div class="spoiler">  <b class="spoiler_title">Foto des Mechanismus</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f0/bu/-p/f0bu-pdwg9bcxbnswdtufo-xgwk.jpeg" width="350"></div></div></div><br><p>  <strong>Kr√§fte b√ºndeln</strong> </p><br><p>  <em>Schach</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/li/sv/bj/lisvbj67_f4538jcwsngoz-6ule.jpeg" width="500"></div><br><p>  Nach langem √úberlegen wurde eine Aufgabe mit einem einzigen Algorithmus durchdacht (unter bestimmten Bedingungen, die die Spieler reservieren).  Das einzige, was noch √ºbrig war, war ein System der Schachbewegung und der Reaktion auf die Aktionen der Spieler zu implementieren :) </p><br><div class="spoiler">  <b class="spoiler_title">Mit Unterst√ºtzung der kollektiven landwirtschaftlichen Produktion wurde das folgende trrrresh-Design implementiert:</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/cb/3n/dc/cb3ndck2a4ge9y2aud1mskzqdyq.jpeg" width="350"><img src="https://habrastorage.org/webt/yz/tx/bj/yztxbjncm7oilb359bslvcvsuvk.jpeg" width="350"></p></div></div><br><p>  Der Mechanismus besteht aus Bolzen und Muttern M8, chinesischen Lagern und Holz.  In jeder Figur ist ein Magnet angebracht, mit dessen Hilfe der Mechanismus sie bewegt.  Die Kupplung zwischen Motor und Bolzen besteht aus einer Komponente der Klebepistole, die wir aufgrund des stark erh√∂hten Verbrauchs an Silikonkleber als Verbrauchsmaterial hatten. </p><br><div class="spoiler">  <b class="spoiler_title">Brettfoto</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jw/hh/ad/jwhhadki6ctudi0tz4dxd_i3cpk.jpeg" width="350"><img src="https://habrastorage.org/webt/g6/yd/rf/g6ydrfrphcnvrigm4uuqf3th5hc.jpeg" width="350"></p></div></div><br><p>  Wer wei√ü, wir haben die Figuren aus dem Harry-Potter-Schachspiel genommen, sie machen immer noch unterschiedliche Ger√§usche, Gl√ºhen usw.  Ich konnte diese Gesichtsz√ºge nicht einfach so lassen, ich schob diese Schals unter das Brett und es stellte sich heraus, dass er, wenn sie zu Pferd gehen, wiehert und am Ende das Ger√§usch des gefallenen K√∂nigs zu h√∂ren ist. <br>  Nach einem Schachsieg √∂ffnet sich die Schrankt√ºr (sie √∂ffnet sich schnell mit Hilfe einer M√∂belgasschiene). </p><br><p>  Bevor ich zu den interessantesten √ºbergehe, m√∂chte ich √ºber einen Kessel (eine Sch√ºssel mit Erinnerungen) und eine Gegensprechanlage f√ºr die Kommunikation zwischen dem Administrator und den Besuchern w√§hrend des Spiels sprechen. </p><br><p>  <em>Sch√ºssel voller Erinnerungen</em> </p><br><p>  Zun√§chst wurde dieser 10-Liter-Aluminiumkessel von meinem Gro√üvater in einer Garage als Attribut der sowjetischen K√ºche gefunden :) Die Idee, eine Sch√ºssel mit Erinnerungen herzustellen, aus denen Rauch (und tats√§chlich Dampf) weht, hing lange Zeit in Gedanken, aber wir kamen zu einer kompetenten Umsetzung sp√§ter. </p><br><p>  Ultraschallbefeuchter in einer Menge von 6 (!!!) Stk. Und mit einer Gesamtleistung von ca. 100 Watt wurden zum Nebelmittel! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4s/rf/yf/4srfyfxjqghpglwjkvin8-fnvdu.png" width="350"></div><br><p>  Leider wurde das Foto nicht erhalten, aber das Ger√§t ist sehr einfach, nach dem Schema hergestellt: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/ly/cz/telycz1hm-xsihi9bstgrn7amiw.png" width="350"></div><br><p>  Die Abmessungen wurden so angepasst, dass dieses System perfekt auf den Tisch passt (Platz f√ºr Schubladen). </p><br><p>  <em>Gegensprechanlage</em> </p><br><p>  Mein d√ºrftiges Wissen √ºber analoge Schaltkreise erm√∂glichte keine schnelle L√∂sung dieses Problems.  Nach langen und erfolglosen Versuchen (aber wie sich sp√§ter herausstellte, war die L√∂sung Chetrov nahe!), Fragte ich meinen Freund aus Cherson, mich zu einem solchen Ger√§t zu machen. </p><br><div class="spoiler">  <b class="spoiler_title">Und nach einer Weile bekam ich so ein Ger√§t</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/wp/3l/gj/wp3lgj8lyrudgr3qay6jwyz9dzq.jpeg" height="350"><img src="https://habrastorage.org/webt/nl/fd/od/nlfdod5gxhlk0yqneatdm7qxye8.jpeg" height="350"></p></div></div><br><p>  Der Vorverst√§rker wird auf einem rauscharmen Operationsverst√§rker NE5532 hergestellt, wonach er TDA2006 kostet. </p><br><div class="spoiler">  <b class="spoiler_title">Vorverst√§rkerschaltung</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/bs/c8/zrbsc8-3bnuu6vmscl3pvhvpugg.jpeg" width="400"></div></div></div><br><p>  Schlie√ülich gehen wir zu einem der komplexesten Systeme im Raum √ºber - dem letzten Kampf mit dem Dunklen Lord! </p><br><p>  <strong><em>K√§mpfe</em></strong> </p><br><p>  Die Idee war, zumindest einen ungef√§hr √§hnlichen ‚ÄûKampf‚Äú des Spielers (Harry Potter) mit Voldemort zu realisieren.  F√ºr eine gr√∂√üere Wirkung wurde Wind hinzugef√ºgt (2 L√ºfter).  Wir haben √ºber viele Optionen nachgedacht, und dann hat mir ein Freund von adressierbaren WS2812-LEDs erz√§hlt.  Jetzt sprechen sogar die faulsten Arduino-Fahrer dar√ºber, was f√ºr coole Dinge sie getan haben, aber dann war WS2812 weniger bekannt, aber sie wurden unsere Rettung!  Ohne sie war es einfach unrealistisch, unsere Idee zu verwirklichen! </p><br><p>  5 m LED-Streifen wurden in zwei H√§lften gefaltet und ein Draht f√ºr einen Reedschalter wurde nach innen gespannt.  Die ersten 5-Meter-B√§nder wurden sicher gebrannt, um die Stromversorgung f√ºr dasselbe Band zu schonen :) </p><br><p>  Wir haben mit der Entwicklung begonnen, indem wir die Timings festgelegt haben: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x4/qo/wh/x4qowhnqimvp4m5c-sdratsqzws.jpeg" width="500"></div><br><p>  Einige Probleme f√ºgten die Einbeziehung von Fans hinzu.  Wenn Sie den Stab oft mitbringen / entfernen, dann das Relais (anfangs habe ich versucht, die L√ºfter √ºber das Relais einzuschalten), der Mikrocontroller hat den Turm einfach abgerissen.  Als Ergebnis lernte ich die F√§higkeit, eine 220-V-Last √ºber einen Optosimmistor zu steuern.  Danach benutze ich kein Relais :) </p><br><p>  Es ist auch erw√§hnenswert, dass ernsthafte Rechenleistung (auf der Atmega8-Skala) erforderlich war, um sich der Steuerung von LED-Streifen zu widmen.  Anfangs hing die Arbeit des Bandes sehr, wir litten lange, wir konnten nicht verstehen warum.  Infolgedessen musste ich im Internet die Person finden, die die Bibliothek f√ºr dieses Band geschrieben hatte, und ihn um Hilfe bitten.  Der Grund war einfach: Der MK hatte keine Zeit, den Code im Interrupt-Handler auszuf√ºhren, und sobald wir ihn behoben hatten, funktionierte alles perfekt! </p><br><div class="spoiler">  <b class="spoiler_title">Brettfoto</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nh/iw/cp/nhiwcpjsdozd8dqie-ur6wk49uk.jpeg" width="350"><img src="https://habrastorage.org/webt/fb/ld/va/fbldvaxsykqrxfhbw3i0c7htiaw.jpeg" width="350"></p></div></div><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programme f√ºr Mikrocontroller</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programm f√ºr Computer</a> </p><br><p>  Nach unserer Idee sollte dies der letzte Artikel sein, aber wir m√∂chten Ihnen noch viele interessante Dinge erz√§hlen. Deshalb m√∂chte ich die Ver√∂ffentlichung von zwei weiteren Artikeln ank√ºndigen, wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">man echte Hogwarts (1) macht</a> und zusammen mit nicht realisierten Ideen (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus dem B√ºro verpr√ºgelt</a> . </p><br><p>  Es wird interessant sein! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de411059/">https://habr.com/ru/post/de411059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de411045/index.html">Stick: der unbesungene Held der menschlichen Evolution</a></li>
<li><a href="../de411049/index.html">Was zu lesen. Wenig bekannte und eingefrorene Sachartikel und Blogs</a></li>
<li><a href="../de411051/index.html">Satelliten von Dauria Aerospace melden sich nicht (leider weiter)</a></li>
<li><a href="../de411055/index.html">Experten: Ein menschlicher Fahrer am Standort des Uber-Autopiloten k√∂nnte eine t√∂dliche Kollision vermeiden</a></li>
<li><a href="../de411057/index.html">Space X und ULA unterzeichnen Vertr√§ge mit Pentagon √ºber 650 Millionen US-Dollar</a></li>
<li><a href="../de411061/index.html">Tats√§chliches Betriebssystem f√ºr einen alten PC oder ein Netbook</a></li>
<li><a href="../de411063/index.html">Den Elefanten lernen (Teil 2)</a></li>
<li><a href="../de411065/index.html">"Stille genie√üen": Was sind die Vor- und Nachteile der ruhigsten Orte auf dem Planeten?</a></li>
<li><a href="../de411067/index.html">Das fr√ºhe Universum 1. Inflationskosmologie: Ist unser Universum ein Teil des Multiversums? Teil 1</a></li>
<li><a href="../de411069/index.html">"Cyborgs und Weltraum"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>