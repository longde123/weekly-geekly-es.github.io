<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëµ üë©üèæ‚Äçüî¨ üïë Juego en WinForms + C # en 16 a√±os (2 partes) üßùüèº ü§∞üèæ üî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antecedentes 
 Ha pasado bastante tiempo desde la redacci√≥n del art√≠culo anterior. Como promet√≠, escrib√≠ la segunda parte. Me gustar√≠a agradecer a tod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Juego en WinForms + C # en 16 a√±os (2 partes)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479864/"><h2>  Antecedentes </h2><br>  Ha pasado bastante tiempo desde la redacci√≥n del <a href="http://habr.com/ru/post/458630/">art√≠culo</a> anterior.  Como promet√≠, escrib√≠ la segunda parte.  Me gustar√≠a agradecer a todos los que dieron consejos en los comentarios, de todos ellos pude aprender algo nuevo.  Bueno, para aquellos que desean ver el proyecto de inmediato, <a href="http://github.com/danilluk1/WForms-Fishing-MVP" rel="nofollow">aqu√≠ hay un enlace</a> al proyecto GitHub. <br><br>  Solo quiero se√±alar que todo lo que se agreg√≥ y cambi√≥ en esta versi√≥n se hizo con un muy <br>  mucho trabajo, muchos errores.  Mi Google se llen√≥ con una gran cantidad de solicitudes, que van desde las caracter√≠sticas de la implementaci√≥n de MVP hasta m√©todos asincr√≥nicos. <br><br><img src="https://habrastorage.org/webt/ze/tc/9o/zetc9o9bylklnr81oeua1ril6yk.png" alt="imagen"><br><a name="habracut"></a><br><br><h2>  Actualizaciones </h2><br><ol><li>  Agreg√≥ su propio editor de mapas (como en el juego original). </li><li>  Sonda implementada. </li><li>  Se agreg√≥ la capacidad de atrapar al donk y al girar. </li><li>  Se agregaron muchos tipos de peces. </li><li>  Gran rendimiento del proyecto mejorado. </li><li>  Se corrigi√≥ una gran cantidad de errores. </li><li>  Adem√°s, una mejora significativa en la arquitectura de la aplicaci√≥n (m√°s precisamente, su apariencia). </li><li>  Se agreg√≥ el perfil del jugador para guardar. </li><li>  Trofeos realizados. </li><li>  Se agreg√≥ un cambio de d√≠a y de noche. </li><li>  Viaje agregado. </li><li>  Implement√© una tienda de abarrotes. </li><li>  Implementado el patr√≥n MVP. </li><li>  Implementado un sistema de eventos en el juego. </li><li>  Cebo implementado, con la capacidad de mezclar ingredientes </li><li>  Actuaci√≥n de voz agregada </li><li>  Animaciones agregadas </li><li>  Se implementa el desgaste de las varillas, dependiendo del tama√±o del pez y el tiempo de supervivencia. </li></ol><br>  Agregar√© m√°s cambios al archivo de proyecto README Git. <br><br><h3>  C√≥mo se equivoc√≥ el c√≥digo de otra persona. </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/402/ae2/357/402ae2357ed10901e1543c1212724317.png" alt="imagen"><br><br>  Vemos en la captura de pantalla el editor de mapas para la pesca, es decir, la cuadr√≠cula de profundidad para cada ubicaci√≥n (estos son elementos de etiqueta con FormBorderStyle = 0, para mostrar el marco).  Por cierto, la captura de pantalla se realiz√≥ con mis propias <a href="https://github.com/danilluk1/ScreenshotManager" rel="nofollow">tijeras.</a>  Cual era el problema <br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo fuente</b> <div class="spoiler_text"><pre><code class="cmake hljs">for (int x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">51</span></span>; x++){ for (int y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; <span class="hljs-number"><span class="hljs-number">18</span></span>; y++){ Point between = new Point(Game.CastPoint.X - LVL.Deeparr[x, y].Location.X, Game.CastPoint.Y - LVL.Deeparr[x, y].Location.Y); float distance = (float)<span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Sqrt(between.X * between.X + between.Y * between.Y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Player.getPlayer().lure != null){ Game.gui.DeepLabel.Text = LVL.Deeparr[x, y].Tag.ToString(); Sounder.setY(x); Sounder.setX(y); } } Game.Deep = Convert.ToInt32(Game.gui.DeepLabel.Text); } }</code> </pre> <br><br></div></div><br>  Aqu√≠ vemos un paso simple a trav√©s de una matriz bidimensional (y no la correcta).  Luego calculamos la hipotenusa por el teorema de Pit√°goras, y si es &lt;20, determinamos la celda deseada.  Pero este m√©todo funciona muy mal incluso con un cuadrado.  Y aqu√≠ est√°n los rect√°ngulos.  Por lo tanto, la c√©lula a menudo se detecta incorrectamente.  En mi defensa, puedo decir que tom√© este c√≥digo de YouTube. <br><br>  Entonces, necesitamos determinar en qu√© celda est√° el cursor.  Para hacer esto, puede usar este c√≥digo fuente: <br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo</b> <div class="spoiler_text"><pre> <code class="cmake hljs">for (var y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; CurLvl.Height; y++) { for (var x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; CurLvl.Widgth; x++) { var r = new Rectangle(CurLvl.DeepArray[x, y].Location, new System.Drawing.Size(LabelInfo.Width, LabelInfo.Height)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.IntersectsWith(new Rectangle(point, new System.Drawing.Size(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)))) { //SomeCode } } }</code> </pre><br></div></div><br>  Aqu√≠ tomamos las coordenadas del cursor, las pegamos en un PointToClient y las pasamos al constructor Rectangle, especificamos los tama√±os 1 y 1. Luego usamos el m√©todo de verificaci√≥n IntersectsWith est√°ndar, la intersecci√≥n del cursor y la etiqueta.  Adem√°s, no podemos procesar simplemente un clic en una etiqueta, ya que no se muestra un formulario con ellos. <br>  Adem√°s, permiti√≥ implementar soporte para 3 ca√±as de pescar. <br><br><h2>  Generaci√≥n de peces </h2><br>  Entonces, la parte principal del juego es la generaci√≥n de peces.  Ocurre en varias etapas: <br>  1. Al ingresar a la ubicaci√≥n, somos de una l√≠nea como: <br>  Goldfish: 25 250-400 [Queso, Gusano, Gusano, Ma√≠z] ¬øD√≥nde est√° el tama√±o del pez como porcentaje del m√°ximo, la profundidad m√≠nima, la profundidad m√°xima y una lista de cebo para obtener el objeto de pez (No olvide comprobar previamente la l√≠nea a trav√©s de expresiones regulares).  Por la belleza del c√≥digo, defin√≠ un operador que lanza una cadena para pescar. <br><br><pre> <code class="cmake hljs">public static explicit operator Fish(FishString fs) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fs.GetFishByStr(); }</code> </pre><br><br>  Como resultado, este enfoque nos permite escribir: <br><br><pre> <code class="cmake hljs">Fish fish = (Fish)new FishString(<span class="hljs-string"><span class="hljs-string">" : 25 250 - 400 [ , , ,  ]"</span></span>);</code> </pre><br>  El c√≥digo se proporciona como ejemplo y no se encuentra en el proyecto en este formulario. <br><br>  2.Ahora tenemos que esperar a que se arrojen las ca√±as de pescar, despu√©s de eso comenzamos el temporizador (el nuestro para cada ca√±a de pescar) con un tiempo de mordida aleatorio, luego seguimos el tictac del temporizador de nuestra lista de peces con tama√±os de 1000 unidades, seleccionamos peces cuya profundidad de h√°bitat incluye profundidad Ca√±as de pescar. <br><br>  3. De esta lista, seleccione al azar un pez.  Verificamos si se puede comer el cebo establecido y tambi√©n que la hora del d√≠a de la actividad del pez corresponde a la hora actual del juego. <br><br>  4. Si el pez puede comer el cebo, atacaremos el cebo.  Calculamos si habr√° un descenso y despu√©s de qu√© hora, en funci√≥n de la posibilidad del descenso del gancho instalado.  Si el pez no puede comer el cebo, entonces pasamos por el cebo actual (si lo hay).  Verificamos si hay un pez cercano que pueda picotear el cebo, y repetimos lo mismo. <br><br>  Gracias al proceso de generaci√≥n, me he convertido en un usuario seguro de LINQ. <br><br><h2>  Juego en s√≠ </h2><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bde/8f4/621/bde8f46210cb712aa08f181d4694cf92.png" alt="Alimentos"><br><br>  Captura de pantalla de la tienda de comestibles. <br><br>  Su fuente se puede ver en el repositorio.  All√≠, los controladores MouseEnter y MouseLeft para modificar im√°genes de alimentos se ejecutan de manera bastante interesante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30f/ad2/471/30fad2471b6900614fd74f66af269583.png" alt="imagen"><br><br>  Captura de pantalla del formulario de viaje.  (Todos los cuerpos de agua son de prueba y sus nombres no son genuinos). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c3/160/568/4c3160568020c3b3d6a2b32473339273.png" alt="imagen"><br><br>  Captura de pantalla del juego <br><br><h2>  Planes </h2><br><ol><li>  Crea un servidor cliente para el juego </li><li>  Desarrollador Junior FPGA (FPGA) </li><li>  Reconocimiento facial a trav√©s de la c√°mara web (estoy buscando literatura que pueda ser √∫til) </li><li>  Reemplazar un ListView normal con un ObjectListView </li></ol><br>  Al final del art√≠culo anterior, escrib√≠ que quiero conseguir un trabajo.  Bueno, en septiembre, cerr√© mi primer TOR por SNMP, aunque en C. <br><br><h2>  Conclusi√≥n </h2><br>  El proyecto se ha vuelto bastante grande, con al menos una base de c√≥digo ideal, pero muy decente, conveniente de mantener. En alg√∫n lugar se pueden violar los principios de SOLID, pero esto se debe al hecho de que el proyecto fue muy largo.  Adem√°s, si usted es un desarrollador principiante y est√° buscando un proyecto en el que pueda participar, puede comprometerse con este repositorio.  La lista de cambios esperados se puede encontrar en el archivo README del proyecto. <br><br>  Tambi√©n me gustar√≠a se√±alar que no veo ninguna perspectiva en la carrera de desarrollador de C #, o m√°s bien me gustar√≠a algo m√°s cercano al hardware, por lo que trato de estudiar idiomas de nivel inferior. <br><br>  Gracias a todos los que leyeron hasta el final, cualquier cr√≠tica al c√≥digo fuente es bienvenida y ser√° considerada de inmediato. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/479864/">https://habr.com/ru/post/479864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479852/index.html">Videollamadas bajo el cap√≥: de millones por d√≠a a 100 participantes en una conferencia</a></li>
<li><a href="../479854/index.html">12 de diciembre ma√±ana resumen de Java</a></li>
<li><a href="../479858/index.html">Buscando LD_PRELOAD</a></li>
<li><a href="../479860/index.html">Una variaci√≥n sobre el tema del modelado de la vida. Parte 2</a></li>
<li><a href="../479862/index.html">C√≥mo ahorrar 15 000 rublos al registrar software</a></li>
<li><a href="../479870/index.html">Cambiamos el marco y el perfil de trabajo sobre la marcha, y no solo. Lo que suceder√° en el segundo mitap de PHP NN</a></li>
<li><a href="../479874/index.html">¬øC√≥mo me met√≠ en ThoughtWorks o en una entrevista ejemplar?</a></li>
<li><a href="../479876/index.html">¬øSe necesitan almohadas en el centro de datos?</a></li>
<li><a href="../479878/index.html">TK universal para Wi-Fi, con explicaciones</a></li>
<li><a href="../479880/index.html">Crea hermosos edificios de tratamiento con Blueprint</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>