<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùì ü§Æ üòº So schlagen Sie den Klick in Y. Direct und AdWords f√ºr 600.000 Rubel pro Monat üë©üèø‚Äçüéì ‚ùï üë©‚Äçüë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In den letzten sechs Monaten ist es uns gelungen, das ‚ÄûKlicken‚Äú unserer kontextbezogenen Werbung mit einem Budget von 1 Million Rubel pro Monat zu ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So schlagen Sie den Klick in Y. Direct und AdWords f√ºr 600.000 Rubel pro Monat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423335/">  In den letzten sechs Monaten ist es uns gelungen, das ‚ÄûKlicken‚Äú unserer kontextbezogenen Werbung mit einem Budget von 1 Million Rubel pro Monat zu verhindern. <br><br>  Der Schl√ºssel zur Bek√§mpfung des Betrugs war die minutengenaue √úberwachung des Datenverkehrs mit Benachrichtigungen √ºber abnormale √Ñnderungen und das Deaktivieren problematischer Ank√ºndigungen durch die API sowie eine Reihe von Berichten, die die Situation in Echtzeit widerspiegeln. <br><br><img src="https://habrastorage.org/webt/ss/cg/tk/sscgtkndx4m1wahkipwk1ozgxwk.png"><br>  <font color="#7c8792">Abbildung 1. Diagramm der Anzahl der Besucher nach Schl√ºsselw√∂rtern nach Dekaminen</font> <br><br><h2>  <font color="#3e6c9a">Woher wei√üt du, dass du angegriffen wirst?</font> </h2><br>  <b>Eines der ersten Anzeichen f√ºr ein "Click-through" der Werbung ist eine Erh√∂hung des Prozentsatzes der R√ºckerstattungen f√ºr Betrug in Yandex.Direct und AdWords.</b> <br><blockquote>  ‚ÄûIn Yandex Direct werden die Kosten f√ºr Betrug automatisch auf den Restbetrag der Werbekampagne zur√ºckgef√ºhrt.  Die Anzahl der vom Betrugsbek√§mpfungssystem beseitigten Klicks wird in den Berichten "T√§gliche Statistik" "Allgemeine Statistik" in der Zeile "Ung√ºltige Klicks f√ºr den gesamten ausgew√§hlten Zeitraum" angezeigt. </blockquote>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Helfen Sie J. Direct bei "ung√ºltigen Klicks".</a> <br><br>  In AdWords kann die Anzeige der Stufe "ung√ºltiger Klicks" auf der Registerkarte "Spalten" aktiviert werden: <br><br><img src="https://habrastorage.org/webt/kf/0y/sp/kf0ysp3nbfkov-ypcrfcc1sbmgw.png"><br>  <font color="#7c8792">Abbildung 2. Benutzerdefinierte Spalten mit einer ung√ºltigen Klickstufe in AdWords</font> <br><br>  In unserem Fall begann Yandex mit einer durchschnittlichen Anzahl von ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ung√ºltigen Klicks</a> ‚Äú in Yandex.Direct ‚âà 10% pl√∂tzlich, 40% des Werbebudgets zur√ºckzugeben, und nach einem Monat √ºberhaupt 54%. <br><a name="habracut"></a><br>  <b>Das n√§chste Anzeichen f√ºr Betrug ist eine unangemessene Zunahme der Anzahl der √úberg√§nge und starke √Ñnderungen der Verhaltensindikatoren f√ºr eine Reihe von Anzeigengruppen.</b> <br><br>  Wir haben festgestellt, dass bei einer Reihe von Keywords, die nie mehr als 200 Besucher pro Tag hatten, pl√∂tzlich Spitzen von bis zu 3.000 Besuchern auftraten.  Tats√§chlich k√∂nnte das Budget in den Tagen solcher Aktivit√§ten f√ºr eine Werbekampagne verwendet werden, wenn es nicht rechtzeitig gestoppt w√ºrde. <br><br><img src="https://habrastorage.org/webt/dy/dj/37/dydj375imemm0ytnqa6ttkesya8.png"><br>  <font color="#7c8792">Abbildung 3. Unangemessenes Traffic-Wachstum f√ºr eine bestimmte Anzeigengruppe in Direct</font> <br><br><h2>  <font color="#3e6c9a">Yandex und Google sch√ºtzen nicht vor Betrug</font> </h2><br>  Es reicht aus, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diskussion √ºber die Betrugsstufe in der Kontextwerbung</a> im offiziellen Direct Club zu lesen, um sicherzustellen, dass viele Werbetreibende aufgrund von Betrug Geld verlieren. <br><br>  Google erkennt die Fehler seines Sicherheitssystems offiziell an und stellt Werbetreibenden "R√ºckerstattungsanspr√ºche" (Return on Budget) zur Verf√ºgung.  Laut Statistiken des ClickSease-Dienstes gibt Google Ads durchschnittlich 12% des Werbebudgets zur√ºck. <br><br><div class="spoiler">  <b class="spoiler_title">So erstatten Sie einen Teil des Geldes f√ºr einen Klick √ºber AdWords</b> <div class="spoiler_text">  Sie m√ºssen eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beschwerde √ºber "ung√ºltige Klicks"</a> an AdWords senden. Danach werden Ihnen 12% des ausgegebenen Geldes erstattet.  Au√üerdem sendet der ClickSease-Dienst automatisch alle zwei Monate √§hnliche Antr√§ge auf R√ºckerstattung an Google. <br><br>  In unserem Fall hat Google AdWords zun√§chst 18% unseres Datenverkehrs als " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ung√ºltig</a> " erkannt und das Geld daf√ºr zur√ºckgegeben. Als wir die Beschwerde "R√ºckerstattungsanspr√ºche" gesendet haben, hat Google weitere 13% des Budgets zur√ºckerstattet. <br></div></div><br>  Yandex erkennt die Schwachstelle seiner eigenen Schutzfilter nicht und beschwert sich √ºber offensichtliche Betrugsf√§lle. Es sendet eine Vorlagenantwort, dass das Problem beim Werbetreibenden und seiner Website liegt. <br><br>  In unserem Fall stieg der Prozentsatz der ‚Äûung√ºltigen Klicks‚Äú in Y. Direct's Bericht selbst in den Tagen der heftigsten Ausbr√ºche, als 80% des Budgets ohne Anrufe in die normalerweise wenig beliebte Anzeigengruppe "verschmolzen" wurden, nie √ºber die begehrten 50% f√ºr eine der Werbekampagnen und Anwendungen. <br><br><img src="https://habrastorage.org/webt/6h/4u/ef/6h4uefov0nkyjh0n3wpuii9qb0q.png"><br>  <font color="#7c8792">Abbildung 4. Die Anzahl der "ung√ºltigen Klicks" in einer der Kampagnen in Direct</font> <br><br><h2>  <font color="#3e6c9a">Welchen Angriffsgrad haben wir erlebt?</font> </h2><br>  Der Betrugsverkehr wurde auf vier Gesch√§ftsbereiche in zwei St√§dten geleitet.  Wenn Sie neue Werbekampagnen verbinden oder lange gestoppte Kampagnen starten, wurde innerhalb weniger Stunden auch der ‚ÄûKlick‚Äú auf diese verteilt. <br><br>  Click Fraud war nicht an die Zeit gebunden, und die Umverteilung des Budgets, beispielsweise nachts, hatte keine Auswirkungen: Wir haben immer noch unser linkes Verkehrsaufkommen.  "Klicken" war im YAN, in der Yandex-Suche und im Google Display-Netzwerk gleicherma√üen aktiv. <br><br>  Auf der Site simulierten Bots das Benutzerverhalten, navigierten durch Abschnitte der Site, w√§hlten Text aus, scrollten auf nat√ºrliche Weise und bewegten den Cursor. <br><br><h2>  <font color="#3e6c9a">Gibt es vorgefertigte Mittel?</font> </h2><br>  Alle Klickbetrugsschutzdienste verf√ºgen nur √ºber ein direktes Kampftool: Dadurch werden verd√§chtige IP-Adressen oder Platzierungsseiten in Ya.Direct- und AdWords-Kampagnen blockiert. <br><br>  Wenn dynamische IPs gegen Sie verwendet werden, ist jeder Klickbetrugsbek√§mpfungsdienst immer einen Schritt hinter Betr√ºgern, wenn er sie durch IP blockiert: Der Bot macht bereits mehrere Klicks auf Ihre Werbung, wenn der Dienst diese IP auf die schwarze Liste setzt und keine Anzeigen mehr darauf schalten.  Nachdem betr√ºgerische Software Ihre Anzeigen nicht sehen kann, √§ndert sie einfach die IP-Adresse und die Hardware-ID und setzt ihre Aktionen fort. <br><br>  Bei Angriffen auf Anzeigen im GDN oder YAN werden normalerweise verschiedene Placements verwendet, und automatische Schutzsysteme k√∂nnen keine verd√§chtigen Websites zum Blockieren erkennen. <br><br>  Kehren wir zur IP-Blockierung zur√ºck - hier kommen wir zum interessantesten Teil: Wenn Sie mit AdWords bis zu 500 IP-Adressen <u>blockieren k√∂nnen, kann Yandex Direct nur 25 eindeutige IP-Adressen</u> pro Werbekampagne <u>blockieren</u> !  Eine so kleine schwarze Liste von IP-Adressen ist nicht mehr relevant, da Sie jetzt sicher 500 IPv4-Adressen f√ºr 10.000 Rubel erwerben und diese Einschr√§nkung umgehen k√∂nnen. <br><br>  Es gibt zwei M√∂glichkeiten, sich vor hochrangigen ‚ÄûKlicks‚Äú zu sch√ºtzen: <br><br><ol><li>  Lernen Sie, betr√ºgerischen Benutzern oder Bots keine Werbung zu zeigen, f√ºr die Sie bestimmte ‚ÄûMuster‚Äú in ihrem Verhalten und ihren Merkmalen finden m√ºssen. <br></li><li>  Stoppen Sie vor√ºbergehend bestimmte Anzeigengruppen und Keywords, auf die abgezielt wird. <br></li></ol><br><h2>  <font color="#3e6c9a">Schneiden Sie einen Teil des Publikums ab, um das meiste davon zu retten</font> </h2><br>  Wenn Sie lernen, Bots oder betr√ºgerischen Benutzern keine Klickwerbung zu zeigen, k√∂nnen diese keinen Schaden anrichten. <br><br>  Sie k√∂nnen jederzeit √§hnliche Verhaltensmuster und Muster verfolgen, z. B. dass Betrug in Moskau normalerweise von 5:00 bis 9:00 Uhr unter Windows 7 ausgef√ºhrt wird, und in allen angegriffenen Werbekampagnen eine Gebotsanpassung von -100% f√ºr ein √§hnliches Publikum festlegen.  Die Funktionalit√§t von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gebotsanpassungen in AdWords ist</a> ziemlich umfangreich, was nicht √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anpassungen in Yandex Direct</a> gesagt werden kann. <br><br><h3>  Wir suchen nach Betrugsmustern durch Sicherheitsdienste </h3><br>  Um eine Vorstellung davon zu bekommen, wie genau sie uns angreifen, und um Muster in betr√ºgerischem Verkehr manuell zu verfolgen, haben wir den russischen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Betrugsbek√§mpfungsdienst ClickFrog</a> angeschlossen.  Das Produkt ist seit langem allen bekannt, beliebt in der CPA-Umgebung und so weiter. <br><br>  ClickFrog erwies sich schnell als vollst√§ndige Behinderung: <br><br><ol><li>  pro Tag nicht mehr als 40 verd√§chtige IP-Adressen zugewiesen, mit einem Datenverkehr von Direct von 3.000.000 Klicks pro Tag und, selbst von Yandex erkannt, 1300 "linken" Klicks pro Tag; <br></li><li>  Das Hauptwerkzeug zum Schutz des Dienstes ist das Blockieren nach IP-Adresse, deren Befehl √ºber die API an J. Direct gesendet wird. Sobald jedoch die schwarze Liste mit 25 IP-Adressen ausgef√ºllt ist, m√ºssen Sie die letzten IPs in jeder Werbekampagne manuell l√∂schen und warten, bis die Liste erneut ausgef√ºllt wird also im Kreis. <br></li></ol><br>  Anschlie√üend haben wir den Code f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ClickSease</a> installiert, einen amerikanischen Dienst, der auf AdWords ausgerichtet ist und noch nicht mit Yandex.Direct zusammenarbeitet.  Der Service hat im Gegensatz zu ClickFrog √ºbrigens eine kostenlose Testphase von 2 Wochen. <br><br>  ClickSease erwies sich als n√ºtzlicher: Es wurden 300 bis 400 eindeutige betr√ºgerische IPs pro Tag abgefangen.  F√ºr jeden blockierten IP-Dienst gibt es Statistiken: <br><br><ul><li>  Internetdienstanbieter </li><li>  die Plattform, von der aus der √úbergang erfolgte; </li><li>  operationssystem; </li><li>  Eindeutige Ger√§te-ID </li><li>  Zeit des ersten und letzten √úbergangs; </li><li>  Region. </li></ul><br>  Aus dem ClickSease-Bericht konnten wir Muster im Betrug identifizieren: <br><ul><li>  In 81% der F√§lle simuliert das Ger√§t ein mobiles Betriebssystem: Android oder iOS; </li><li>  In 59% der F√§lle gilt die Geolokalisierung der IP-Adresse nicht f√ºr Moskau, da der Betrug an Moskau gerichtet ist. </li></ul><br><h3>  Manuelles Suchen nach Betrugsmustern </h3><br>  Selbst solche offensichtlichen Muster reichten jedoch nicht aus, um den durch Betrug verursachten Schaden zu verringern, und ich wollte Handy-Anzeigen nicht deaktivieren.  Services k√∂nnen in der Regel nur Ideen zur Identifizierung √§hnlicher Betrugsmuster liefern. Anschlie√üend m√ºssen Sie den Betrug in Metrica finden (im Falle eines Angriffs auf Direct) und ihn zur weiteren Analyse und Blockierung in einem separaten Yandex Audience-Segment ausw√§hlen. <br><br><img src="https://habrastorage.org/webt/p3/op/ya/p3opya9dpzuhirhhz0_wfdeywf8.png"><br>  <font color="#7c8792">Abbildung 5. Ein Beispiel f√ºr eine Verkehrsanalyse nach Altersgruppen in der Metrik zur Suche nach Betrugsmustern</font> <br><br>  Traffic Slices zur Identifizierung von Betrugsmustern: <br><ul><li>  Publikumsdynamik nach Altersgruppen; </li><li>  Dynamik langfristiger Interessen der Nutzer; </li><li>  Ger√§te- und Betriebssystemdynamik. </li></ul><br>  <b>Bei AdWords sind die Mechanismen der Gegenwirkung klar:</b> <br><br><ol><li>  Wir definieren ein mit Betrug ‚Äûinfiziertes‚Äú Zielgruppensegment. </li><li>  Wir haben Gebotsanpassungen von -100% f√ºr das ausgew√§hlte Segment festgelegt. </li><li>  Wir √ºberwachen √Ñnderungen der Indikatoren: Conversion, Zeit auf der Website, Anzeigetiefe, Absprungrate. </li></ol><br>  <b>In Yandex Direct sind die Mechanismen des Kampfes komplexer und in zwei Optionen unterteilt:</b> <br><br>  a) Sie haben es geschafft, ein offensichtliches Betrugsmuster in Bezug auf Geschlecht, Alter oder Mobilit√§t zu finden: <br><br><ol><li>  Wir haben eine Gebotsanpassung von -50% oder -100% f√ºr das ausgew√§hlte Segment festgelegt. </li><li>  Wir √ºberwachen die Ver√§nderung der Schl√ºsselindikatoren. </li></ol><br>  b) Es wurden keine offensichtlichen Muster gefunden: <br><br><ol><li>  Wir w√§hlen den Betrugsverkehr in einem separaten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex.Audience-</a> Segment aus (Sie wussten beispielsweise, dass vom 1. bis 20. Oktober nicht 5.000 Klicks auf eine Anzeigengruppe m√∂glich waren, die immer nicht mehr als 30 Besuche pro Tag hatte). </li><li>  Durch das √§hnliche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aussehen von Yandex</a> schaffen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wir</a> ein Benutzersegment, das unserem Betrug √§hnelt. </li><li>  Legen Sie eine Gebotsanpassung von -100% f√ºr ein manuell erstelltes Zielgruppensegment fest. </li><li>  Wir testen sorgf√§ltig die Reduzierung der Werbekosten f√ºr von Yandex erstellte Segmente. </li></ol><br><h2>  <font color="#3e6c9a">Erstellen Sie Diagramme, die Betrug anzeigen</font> </h2><br>  <b>Betrug erzeugt immer offensichtliche Schwerpunkte und Spitzen</b> , egal ob es sich um abstruse Software handelt, die das Verhalten eines echten Benutzers nachahmt, oder um eine Gruppe von Freiberuflern, die die technische Aufgabe ausf√ºhren. <br><br><img src="https://habrastorage.org/webt/go/o2/al/goo2alj10gtzlycltq5rje0hoji.png"><br>  <font color="#7c8792">Abbildung 6. Diagramm der Anzahl der Besucher nach Schl√ºsselw√∂rtern nach Dekaminen</font> <br><br>  Betrug tritt aus mehreren Gr√ºnden ungleichm√§√üig auf: <br><ul><li>  Um den Angriff ‚Äûauszugleichen‚Äú, m√ºssen Sie vertrauliche Informationen haben und wissen, wer, wann und wie viele Klicks Ihre Anzeigen machen. </li><li>  Software agiert in Rucken, und in der Minute, 10 Minuten und manchmal auf dem Stunden-Chart werden ihre Aktionen auff√§llig sein. </li><li>  Selbst wenn ‚ÄûSchulkinder‚Äú √ºber Bulletin Boards gegen Sie arbeiten, bearbeiten sie eine bestimmte Aufgabe mit einem Algorithmus, und die von ihnen erzeugten Anomalien sind leicht zu verfolgen. </li></ul><br>  Wenn Sie lernen, die Brennpunkte schnell zu finden und zu beseitigen, k√∂nnen Sie den durch den Betrug verursachten Schaden erheblich reduzieren.  In unserem Fall war ein offensichtliches Zeichen eine abnormale Zunahme der Anzahl der Klicks auf kontextbezogene Werbung in bestimmten 10 Minuten oder einer Minute f√ºr einige Keywords. <br><br>  F√ºr die Visualisierung ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google Data Studio am</a> besten geeignet, da nur Analytics in der Lage ist, zeitlich nach 1 und 10 Minuten aufgeschl√ºsselte Daten korrekt zu erfassen, und Metrika beim Erstellen von Berichten √ºber Dekomints falsche Indikatoren angibt. <br><br><div class="spoiler">  <b class="spoiler_title">Erstellen von Diagrammen in 10 Minuten und nicht st√ºndlich in Google Data Studio</b> <div class="spoiler_text">  Standardm√§√üig k√∂nnen Sie in Analytics oder Data Studio keine Diagramme pro Minute oder 10 Minuten lang erstellen. Dies kann jedoch in Date Studio wie folgt erfolgen: <br><br>  Schritt 1. √ñffnen Sie die Feldbearbeitung <br><br><img src="https://habrastorage.org/webt/sy/y2/1v/syy21vr-evstitegmwu-ivqreh8.png"><br><br>  Schritt 2. Erstellen Sie Kopien der folgenden Felder: Jahr, Monat des Jahres, Tag des Monats, Stunde, Minute und benennen Sie sie, z. B. Jahr (Tag), Monat des Jahres (Tag) usw.  Auch in den kopierten Feldern m√ºssen Sie den Typ vom Zeit- und Datumsformat in "Nummer" √§ndern, wie in der Abbildung gezeigt. <br><br><img src="https://habrastorage.org/webt/zj/3a/a6/zj3aa66qqh0eq42cyc-ajbujxzm.png"><br>  <font color="#7c8792">Schritt 2. √Ñndern Sie den Typ des kopierten Feldes von "Datum" in "Nummer".</font> <br><br>  Schritt 3. Erstellen Sie ein neues Feld, in das wir die folgende Formel schreiben: Jahr (Tag) * 10000000 + Monat des Jahres (Tag) * 100000 + Tag des Monats (Tag) * 1000 + Stunde (Tag) * 10 + BODEN (Minute (Tag) / 10) <br><br><img src="https://habrastorage.org/webt/ud/mm/8o/udmm8oej5cb9ysefk3zpmka2rvs.png"><br>  <font color="#7c8792">Schritt 3. Erstellen Sie ein berechnetes Feld "Zeit f√ºr 10 Minuten".</font> <br><br>  Schritt 4. Wir speichern das erstellte Feld, kehren dann zur Liste aller Felder zur√ºck und finden unser neues Feld "Zeit f√ºr 10 Minuten (Dezamenut)".  Es ist erforderlich, den Typ wie in der Abbildung gezeigt von "Nummer" in "Datum und Uhrzeit" zu √§ndern und diesem Feld dann den Typ "Nummer" zuzuweisen. <br><br><img src="https://habrastorage.org/webt/7f/bi/hh/7fbihh4hc4yss02cqsfra1ljfta.png"><br>  <font color="#7c8792">Schritt 4. Erstellen Sie ein berechnetes Feld "Zeit f√ºr 10 Minuten".</font> <br><br>  Schritt 5. Erstellen Sie ein ‚Äûkombiniertes Diagramm‚Äú und legen Sie unser neues Feld ‚ÄûZeit f√ºr 10 Minuten‚Äú als Parameter fest, wie in der Abbildung gezeigt.  Fertig. <br><br><img src="https://habrastorage.org/webt/rq/o5/hy/rqo5hybxbnptkakzlyrs4rclzqu.png"><br>  <font color="#7c8792">Schritt 5. Erstellen Sie ein Kombinationsdiagramm.</font> <br></div></div><br><br><h2>  <font color="#3e6c9a">Konfigurieren Sie Benachrichtigungen zu Betrugsausbr√ºchen</font> </h2><br>  Um nicht alle Betrugsf√§lle manuell zu verfolgen, habe ich in Google Sheets einen Bericht erstellt, der die Daten jede Minute aktualisiert und den Beginn des Betrugs benachrichtigt. <br><br>  Google Sheets unterst√ºtzt die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Core Reporting API</a> , auf die √ºber den Skripteditor in Sheets zugegriffen werden kann. <br><br>  Schritt 1. Wechseln Sie zum Skripteditor, um auf Analytics zuzugreifen <br><br><img src="https://habrastorage.org/webt/fe/6t/r-/fe6tr-kjvklwxovqwutpmuvbvcc.png"><br>  <font color="#7c8792">Abbildung 7. Skripteditor f√ºr den Zugriff auf die Analytics Core Reporting-API √ºber Google Tables</font> <br><br>  Schritt 2. Wir schreiben eine API-Anfrage an Analytics, um Daten zu den erforderlichen Indikatoren zu erhalten (z. B. die Anzahl der Benutzer, die wie in unserem Fall zu jeder Minute des Tages auf bezahlte Werbung geklickt haben). <br><br><div class="spoiler">  <b class="spoiler_title">Google Script-Code zum Anfordern von Daten von Analytics in Google Sheets</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runDemo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstProfile = getFirstProfile(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = getReportDataForProfile(firstProfile); outputToSpreadsheet(results); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(error) { Browser.msgBox(error.message); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstProfile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> accounts = Analytics.Management.Accounts.list(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (accounts.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstAccountId = accounts.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>].getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webProperties = Analytics.Management.Webproperties.list(firstAccountId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (webProperties.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstWebPropertyId = webProperties.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>].getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> profiles = Analytics.Management.Profiles.list(firstAccountId, firstWebPropertyId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (profiles.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstProfile = profiles.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> firstProfile; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No views (profiles) found.'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No webproperties found.'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No accounts found.'</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getReportDataForProfile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">firstProfile</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> profileId = firstProfile.getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tableId = <span class="hljs-string"><span class="hljs-string">'ga:'</span></span> + profileId; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> startDate = <span class="hljs-string"><span class="hljs-string">"today"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// getLastNdays(14)  2 weeks (a fortnight) ago. var endDate = "today"; //getLastNdays(0)  Today. var optArgs = { 'dimensions': 'ga:date,ga:hour,ga:minute,ga:sourceMedium', // Comma separated list of dimensions. 'sort': 'ga:date,ga:hour,ga:minute', // Sort by sessions descending, then keyword. //'segment': 'dynamic::ga:isMobile==Yes', // Process only mobile traffic. 'filters': 'ga:sourceMedium==yandex / cpc', 'start-index': '1', 'max-results': '10000' // Display the first 250 results. }; // Make a request to the API. var results = Analytics.Data.Ga.get( tableId, // Table id (format ga:xxxxxx). startDate, // Start-date (format yyyy-MM-dd). endDate, // End-date (format yyyy-MM-dd). 'ga:users', // Comma seperated list of metrics. optArgs); if (results.getRows()) { return results; } else { throw new Error('No views (profiles) found'); } } function getLastNdays(nDaysAgo) { var today = new Date(); var before = new Date(); before.setDate(today.getDate() - nDaysAgo); return Utilities.formatDate(before, 'GMT', 'yyyy-MM-dd'); } function outputToSpreadsheet(results) { var sheets = SpreadsheetApp.getActiveSpreadsheet(); var sheet = sheets.getSheetByName("coeff1"); var range = sheet.getRange('A:E'); range.clear(); // Print the headers. var headerNames = []; for (var i = 0, header; header = results.getColumnHeaders()[i]; ++i) { headerNames.push(header.getName()); } sheet.getRange(1, 1, 1, headerNames.length) .setValues([headerNames]); // Print the rows of data. sheet.getRange(2, 1, results.getRows().length, headerNames.length) .setValues(results.getRows()); }</span></span></code> </pre> <br></div></div><br><br>  Schritt 3. Wir setzen den Ausl√∂ser, um Daten jede Minute zu aktualisieren: <br><br><img src="https://habrastorage.org/webt/bu/-f/lq/bu-flq0ftubu0wa1lcqxw1uilz0.png"><br>  <font color="#7c8792">Abbildung 8. Wir fordern jede Minute neue Daten an, um schnell auf Betrug reagieren zu k√∂nnen</font> <br><br>  Schritt 4. Wir erstellen aus dem Blatt eine Pivot-Tabelle, die einmal pro Minute mit den erforderlichen Daten aktualisiert wird, und analysieren diese Indikatoren, um Trigger f√ºr E-Mail-Benachrichtigungen zu konfigurieren oder Anzeigengruppen mithilfe der Yandex.Direct-API oder AdWords zu deaktivieren. <br><br><img src="https://habrastorage.org/webt/ha/ba/-g/haba-goptrqk9xjgxrge_wjqqjs.png" alt="Bild">  <font color="#7c8792">Abbildung 9. Ein Beispiel f√ºr das Festlegen von Formeln f√ºr Anomalie-Benachrichtigungen</font> <br><br><div class="spoiler">  <b class="spoiler_title">Ein Beispiel f√ºr meinen Google Script-Code zum Senden von E-Mail-Benachrichtigungen</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ss = SpreadsheetApp.getActiveSpreadsheet(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sheet = ss.getSheetByName(<span class="hljs-string"><span class="hljs-string">"notification"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> range = sheet.getRange(<span class="hljs-string"><span class="hljs-string">"D2:E4"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// The row and column here are relative to the range // getCell(1,1) in this code returns the cell at B2, B2 var cell = range.getCell(1, 2); Logger.log(cell.getValue()); if (cell.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell.getValue(), "Check me "+range.getCell(1, 1).getValue()); } else { } var cell2 = range.getCell(2, 2); Logger.log(cell2.getValue()); if (cell2.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell2.getValue(), "Check me "+range.getCell(2, 1).getValue()); } else { } var cell3 = range.getCell(3, 2); Logger.log(cell3.getValue()); if (cell3.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell3.getValue(), "Check me "+range.getCell(3, 1).getValue()); } else { } }</span></span></code> </pre> <br></div></div><br><h2>  <font color="#3e6c9a">Fazit: Wie man den Klick schl√§gt</font> </h2><br>  Die Bek√§mpfung von Klickbetrug kann in drei Gruppen unterteilt werden: <br><br>  a) Proaktive Ma√ünahmen: <br><ul><li>  Abschaltung von "verschmutzten Standorten"; </li><li>  Deaktivieren der Werbung f√ºr ein Publikum mit Betrugszeichen f√ºr Sie, z. B. f√ºr Personen auf Tablets aus St. Petersburg (komplexere Parameter f√ºr das Blockieren k√∂nnen √ºber AdWords-Listen und Metriksegmente verwendet werden). </li><li>  Gebotsanpassung f√ºr Zielgruppensegmente √§hnlich wie bei Betrugssegmenten (in Y. Zielgruppen- und Google-Listen werden "Look-Alike" -Segmente erstellt); </li><li>  Blockieren Sie Betrug durch IP-Netzwerkmasken (nur in AdWords verf√ºgbar). </li></ul><br>  b) Vorbeugende Ma√ünahmen: <br><ul><li>  Berichterstattung √ºber Budgetr√ºckerstattungen an AdWords und Direct </li><li>  die Untersuchung von "wer hat den Angriff auf Sie angeordnet"; </li><li>  Gruppierung verd√§chtiger und h√§ufig angegriffener Anzeigengruppen zu einer einzigen Werbekampagne; </li><li>  "Fallen" f√ºr die einfachsten Bots, n√§mlich versteckte Schaltfl√§chen auf der Site, die nur f√ºr den Bot sichtbar sind und beim Klicken in die Liste aufgenommen werden. </li></ul><br>  c) Post-Factum-Aktionen: <br><ul><li>  Blockieren durch IP-Adressen; </li><li>  Schnelle Trennung von Click Centern: Keywords, Anzeigengruppen, Werbekampagnen, Zielgruppensegmente. </li></ul><br><img src="https://habrastorage.org/webt/lh/kt/qu/lhktquoljkgpshxr78ig6mspa4q.png" alt="Bild"><br>  <font color="#7c8792">Abbildung 10. Schutz vor Klickbetrug</font> <br><br>  <b>N√ºtzliche Links:</b> <b><br></b> <br><ul><li>  Core Reporting API- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliothek</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abfrage-Explorer</a> zum bequemen Testen von API-Befehlen; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir schreiben Skripte, um die Arbeit mit Google-Anwendungen zu automatisieren</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google Sheets automatisieren</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Analytics Intelligence</a> , um den Analytics-Bot zu fragen: - "Aber gab es im letzten Jahr Anomalien im bezahlten Verkehr?"  - und eine klare Antwort bekommen. </li></ul><br><div class="spoiler">  <b class="spoiler_title">So finden Sie heraus, wer den Angriff auf Ihre Anzeige angeordnet hat</b> <div class="spoiler_text">  Jeder ad√§quate Konkurrent minimiert seinen Schaden, wenn er andere angreift: <br><br><ol><li>  Erstens wird der Angreifer versuchen, seine Werbung nicht in den Richtungen zu zeigen, in denen der Angriff gerade stattfindet, um seine Klickrate nicht zusammenzuf√ºhren und seinen CPC zu erh√∂hen. <br></li><li>  Zweitens w√§hlt ein skrupelloser Konkurrent solche Keywords f√ºr den Angriff aus, nach denen er die Schaltung seiner Anzeigen einstellen kann, ohne sich selbst gro√üen Schaden zuzuf√ºgen. <br></li></ol><br>  In unserem Fall hat der Konkurrent auch in zwei St√§dten in vier Richtungen auf Betrug geklickt, sodass es nicht schwierig war, ihn zu berechnen. <br><br>  Um die Analyse der Konkurrenten, mit denen Sie sich √ºberschneiden, zu vereinfachen, k√∂nnen Sie alle enthaltenen Mitbewerberanzeigen f√ºr jedes Keyword in der Yandex.Direct-Oberfl√§che anzeigen: <br><br><img src="https://habrastorage.org/webt/w2/_t/4p/w2_t4p4zpj0imyxdogo7saha0sg.png"><br>  <font color="#7c8792">Abbildung 9. Alle Mitbewerberanzeigen nach Keyword</font> <br></div></div><br><br>  <b>Wer auch mit dem kontextuellen Werbeklick konfrontiert war - schreibe in die Kommentare, wir werden versuchen uns gegenseitig zu helfen!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423335/">https://habr.com/ru/post/de423335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423317/index.html">Warum Mann Scala?</a></li>
<li><a href="../de423319/index.html">Vivaldi Code Integration. Unsere Entwickler erz√§hlen</a></li>
<li><a href="../de423321/index.html">Schutz von GitHub-Repositorys vor b√∂swilligen Commits</a></li>
<li><a href="../de423323/index.html">"Sie m√ºssen faul sein, um ein guter Tester zu werden."</a></li>
<li><a href="../de423329/index.html">Vorbereitung auf ein Interview mit einem Big Five-Unternehmen</a></li>
<li><a href="../de423337/index.html">Wie finde ich Freunde PHPstorm, xDebug und Remote-Zweige, die √ºber Docker kompiliert wurden? Zu einfach ...</a></li>
<li><a href="../de423339/index.html">Gibt es Leben unter Windows 98, Teil eins - √ºber Hardware</a></li>
<li><a href="../de423341/index.html">Unter √∂ffentlichem Druck gab Sony zu, dass Bachs Werke nicht ihr geh√∂ren.</a></li>
<li><a href="../de423343/index.html">Kulturelle Werte aus Plastik beginnen zu verfallen</a></li>
<li><a href="../de423345/index.html">Schlinge der Angst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>