<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤­ ğŸ¥ ğŸ• ä½¿ç”¨Tensorflow.jsåº“åœ¨Node.jsä¸Šè¿›è¡Œæœºå™¨å­¦ä¹  ğŸ¹ â†™ï¸ ğŸŒ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ï¼ŒåŒäº‹ä»¬ï¼ 

 Tensorflowåº“çš„ç²‰ä¸ä¹Ÿè®¸å·²ç»åœ¨æˆ‘ä»¬çš„é¢„è´­ä¸­æ³¨æ„åˆ°äº†è¿™æœ¬ä¹¦ ï¼Œä»–ä»¬ä¹Ÿå¯†åˆ‡å…³æ³¨äº†æµè§ˆå™¨ä¸­æœºå™¨å’Œæ·±åº¦å­¦ä¹ çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºFrancois Scholletæœ¬äººå¹¶æ²¡æœ‰å¿½ç•¥è¿™ä¸ªè¯é¢˜ã€‚ æˆ‘ä»¬é‚€è¯·å¯¹çŒ«æ„Ÿå…´è¶£çš„äººï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Tensorflow.jsåº“è¯†åˆ«å›¾åƒã€‚ 

 T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨Tensorflow.jsåº“åœ¨Node.jsä¸Šè¿›è¡Œæœºå™¨å­¦ä¹ </h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/432984/"> å¤§å®¶å¥½ï¼ŒåŒäº‹ä»¬ï¼ <br><br>  Tensorflowåº“çš„ç²‰ä¸ä¹Ÿè®¸å·²ç»åœ¨æˆ‘ä»¬çš„é¢„è´­ä¸­æ³¨æ„åˆ°äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™æœ¬ä¹¦</a> ï¼Œä»–ä»¬ä¹Ÿå¯†åˆ‡å…³æ³¨äº†æµè§ˆå™¨ä¸­æœºå™¨å’Œæ·±åº¦å­¦ä¹ çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯å› ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Francois Schollet</a>æœ¬äºº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¹¶æ²¡æœ‰å¿½ç•¥è¿™ä¸ª</a>è¯é¢˜ã€‚ æˆ‘ä»¬é‚€è¯·å¯¹çŒ«æ„Ÿå…´è¶£çš„äººï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Tensorflow.jsåº“è¯†åˆ«å›¾åƒã€‚ <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TensorFlow.js</a>æ˜¯æµè¡Œçš„å¼€æºåº“çš„æ–°ç‰ˆæœ¬ï¼Œè¯¥åº“é€šè¿‡æ·±åº¦å­¦ä¹ åŠŸèƒ½ä¸°å¯Œäº†JavaScriptã€‚ å¼€å‘äººå‘˜ç°åœ¨å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é«˜çº§åº“API</a>å®šä¹‰ï¼Œè®­ç»ƒå’Œè¿è¡Œæ¨¡å‹ã€‚ <br><br> å€ŸåŠ©<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¢„å…ˆè®­ç»ƒçš„æ¨¡å‹ï¼Œ</a>å¼€å‘äººå‘˜ç°åœ¨å¯ä»¥ä»…ç”¨å‡ è¡ŒJavaScriptå³å¯è½»æ¾è§£å†³å¤æ‚çš„ä»»åŠ¡ï¼Œä¾‹å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨¡å¼è¯†åˆ«</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éŸ³ä¹ç”Ÿæˆ</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¡®å®šäººå‘˜ä½ç½®</a> ã€‚ <br><br>  Tensorflow.jsæœ€åˆæ˜¯ç”¨äºåœ¨æµè§ˆå™¨ä¸­å·¥ä½œçš„å‰ç«¯åº“ï¼Œä½†ä»Šå¹´å·²æ·»åŠ äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹</a> Node.jsçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®éªŒæ€§æ”¯æŒ</a> ã€‚ å› æ­¤ï¼ŒTensorFlow.jsä¹Ÿå¯ä»¥åœ¨JavaScriptåç«¯åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œè¿™å®Œå…¨ä½¿æˆ‘ä»¬å…äºè¯‰è¯¸Pythonã€‚ <br><br>  <i>é˜…è¯»æœ‰å…³æ­¤åº“çš„ä¿¡æ¯åï¼Œæˆ‘å†³å®šå°è¯•æ‰§è¡Œä¸€ä¸ªç®€å•çš„ä»»åŠ¡...</i> <br><blockquote> ä½¿ç”¨æ¥è‡ªNode.jsçš„JavaScriptæ—¶ï¼Œä½¿ç”¨TensorFlow.jsæ¥è§†è§‰è¯†åˆ«å›¾åƒä¸Šçš„å›¾åƒ </blockquote> ä¸å¹¸çš„æ˜¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»£ç ç¤ºä¾‹</a>ä¸»è¦æè¿°äº†è¯¥åº“åœ¨æµè§ˆå™¨ä¸­çš„ä½¿ç”¨ï¼Œæ—¨åœ¨ç®€åŒ–ç¼–å†™æ—¶çš„é¢„è®­ç»ƒæ¨¡å‹çš„åŠ è½½å’Œä½¿ç”¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¹ç›®å®ç”¨ç¨‹åº</a>ä¸æ”¯æŒNode.jsã€‚ æˆ‘ä¸å¾—ä¸èŠ±å¾ˆå¤šæ—¶é—´æ¥å¾ˆå¥½åœ°é˜…è¯»è¯¥åº“çš„Typescriptæºä»£ç ã€‚ <br><br> ä½†æ˜¯ï¼Œç»è¿‡å‡ å¤©çš„è‹¦æˆ˜ï¼Œæˆ‘è¿˜æ˜¯åšåˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†</a> ï¼ ä¸‡å²ï¼ <br><br>  <i>åœ¨ç»§ç»­è¯¦ç»†åˆ†æä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è°ˆè°ˆTensorFlowåº“çš„å…¶ä»–å®ç°ã€‚</i> <br><br>  <b>å¼ é‡æµ</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TensorFlow</a>æ˜¯ä¸€ä¸ªç”¨äºæœºå™¨å­¦ä¹ åº”ç”¨ç¨‹åºçš„å…è´¹è½¯ä»¶åº“ã€‚  TensorFlowå¯ç”¨äºåˆ›å»ºç¥ç»ç½‘ç»œå¹¶å®ç°å…¶ä»–æ·±åº¦å­¦ä¹ ç®—æ³•ã€‚ <br><br> è¿™æ˜¯Googleåœ¨2015å¹´11æœˆå‘å¸ƒçš„åº“ï¼Œæœ€åˆ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ˜¯ç”¨Pythonç¼–å†™çš„</a> ã€‚ ä¸ºäº†è®­ç»ƒå’Œè¯„ä¼°åˆ›å»ºçš„æ¨¡å‹ï¼Œå®ƒä½¿ç”¨CPUæˆ–GPUä¸Šçš„è®¡ç®—ã€‚ æœ€åˆï¼Œåˆ›å»ºè¯¥åº“æ˜¯ä¸ºäº†ä½¿ç”¨èµ„æºå¯†é›†å‹GPUåœ¨é«˜æ€§èƒ½æœåŠ¡å™¨ä¸Šå·¥ä½œã€‚ <br><br> æœ€è¿‘çš„æ›´æ–°ä½¿ä¼˜åŒ–è¯¥åº“å¹¶åœ¨èµ„æºæ›´æœ‰é™çš„ç¯å¢ƒï¼ˆä¾‹å¦‚åœ¨ç§»åŠ¨è®¾å¤‡å’ŒWebæµè§ˆå™¨ä¸Šï¼‰ä¸­ä½¿ç”¨å®ƒæˆä¸ºå¯èƒ½ã€‚ <br><br>  <b>TensorFlow Lite</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Tensorflow Lite</a>æ˜¯è¯¥åº“é’ˆå¯¹ç§»åŠ¨è®¾å¤‡å’ŒåµŒå…¥å¼ç³»ç»Ÿçš„ç²¾ç®€ç‰ˆï¼Œäº2017å¹´5æœˆå‘å¸ƒã€‚ ä¸ä¹‹ä¸€èµ·ï¼Œä¸ºä¸æ¨¡å¼è¯†åˆ«ç›¸å…³çš„ä»»åŠ¡æä¾›äº†ä¸€ç»„æ–°çš„é¢„å…ˆè®­ç»ƒçš„æ·±åº¦æ¨¡å‹ã€‚ è¯¥é›†åˆç§°ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MobileNet</a> ã€‚  MobileNetæ¨¡å‹æ˜¯ä¸“ä¸ºåœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒï¼ˆä¾‹å¦‚ç§»åŠ¨è®¾å¤‡ï¼‰ä¸­é«˜æ•ˆè¿è¡Œè€Œè®¾è®¡çš„ã€‚ <br><br>  TensorFlow.js <br><br> åœ¨Tensorflow Liteä¹‹åï¼ŒTensorFlow.jsäº2018å¹´3æœˆå‘å¸ƒã€‚ è¯¥ç‰ˆæœ¬çš„åº“æ—¨åœ¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶ä¸”åŸºäºä¸€ä¸ªåä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">deeplearn.js</a>çš„æ—©æœŸé¡¹ç›®ã€‚  WebGLæä¾›å¯¹åº“çš„GPUè®¿é—®ã€‚ å¼€å‘äººå‘˜ä½¿ç”¨JavaScript APIè®­ç»ƒï¼ŒåŠ è½½å’Œè¿è¡Œæ¨¡å‹ã€‚ <br><br> åæ¥TensorFlow.jsæ‰©å±•ä¸ºå¯ä¸Node.js <code>tfjs-node</code>ä½¿ç”¨ï¼Œä¸ºæ­¤ä½¿ç”¨äº†<code>tfjs-node</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº“add</a> <code>tfjs-node</code> ã€‚ <br><br>  <b>å°†ç°æœ‰æ¨¡å‹å¯¼å…¥TensorFlow.js</b> <br><br> å¯ä»¥ä½¿ç”¨TensorFlow.jsåº“æ‰§è¡Œç°æˆçš„TensorFlowå’ŒKerasæ¨¡å‹ã€‚ åœ¨æ‰§è¡Œæ¨¡å‹ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å·¥å…·</a>å°†å…¶è½¬æ¢ä¸ºæ–°æ ¼å¼ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Githubä¸Šæä¾›äº†</a>ç”¨äºå›¾åƒåˆ†ç±»ï¼Œå®šä¹‰å§¿åŠ¿å’Œæ£€æµ‹kæœ€è¿‘é‚»çš„é¢„è®­ç»ƒå’Œè½¬æ¢æ¨¡å‹ã€‚ <br><br>  <b>å°†TensorFlow.jsä¸Node.jsç»“åˆä½¿ç”¨</b> <br><br> å®‰è£…TensorFlowåº“ <br><br>  TensorFlow.jså¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NPMæ³¨å†Œè¡¨ä¸­</a>å®‰è£…ã€‚ <br><br><ul><li>  <code>@tensorflow/tfjs</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ¸å¿ƒTensorFlow.js</a>åº“ </li><li>  <code>@tensorflow/tfjs-node</code>æ‰©å±•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TensorFlow.js Node.js</a> </li><li>  <code>@tensorflow/tfjs-node-gpu</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…·æœ‰GPUè®¡ç®—æ”¯æŒçš„TensorFlow.js Node.js</a>æ‰©å±• </li></ul><br><pre> <code class="plaintext hljs">npm install @tensorflow/tfjs @tensorflow/tfjs-node // ... npm install @tensorflow/tfjs @tensorflow/tfjs-node-gpu</code> </pre> <br>  Node.jsçš„ä¸¤ä¸ªæ‰©å±•éƒ½ä½¿ç”¨æœ¬æœºä¾èµ–é¡¹ï¼Œâ€‹â€‹è¿™äº›ä¾èµ–é¡¹å°†æ ¹æ®éœ€è¦è¿›è¡Œç¼–è¯‘ã€‚ <br><br>  <b>ä¸‹è½½TensorFlowåº“</b> <br><br>  Tensorflow <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„JavaScript API</a>æ˜¯ä»æ ¸å¿ƒåº“æä¾›çš„ã€‚ æ”¯æŒNode.jsçš„æ‰©å±•æ¨¡å—ä¸­æ²¡æœ‰æä¾›æ‰©å±•APIã€‚ <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tf = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@tensorflow/tfjs'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   ( CPU) require('@tensorflow/tfjs-node') //    ( GPU) require('@tensorflow/tfjs-node-gpu')</span></span></code> </pre> <br>  <b>ä¸‹è½½TensorFlowæ¨¡å‹</b> <br><br>  TensorFlow.jsæä¾›äº†ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NPMåº“</a> ï¼ˆ <code>tfjs-models</code> ï¼‰ï¼Œè¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº“</a>å¯ç®€åŒ–åŠ è½½é¢„è®­ç»ƒå’Œè½¬æ¢åçš„æ¨¡å‹çš„è¿‡ç¨‹ï¼Œä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹å›¾åƒ</a>è¿›è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ†ç±»</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®šä¹‰å§¿åŠ¿</a>å¹¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ£€æµ‹kä¸ªæœ€è¿‘çš„é‚»å±…</a> ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MobileNet</a>çš„å›¾åƒåˆ†ç±»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨¡å‹</a>æ˜¯ä¸€ä¸ªç»è¿‡æ·±åº¦è®­ç»ƒçš„ç¥ç»ç½‘ç»œï¼Œå¯ä»¥åŒºåˆ†<a href="">1000ç§ä¸åŒç±»åˆ«çš„å›¾åƒ</a> ã€‚ <br><br> åœ¨é¡¹ç›®çš„READMEæ–‡ä»¶ä¸­ï¼Œä»¥ä¸‹ä»£ç ç”¨ä½œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¤ºä¾‹</a> ï¼Œç”¨äºåŠ è½½æ¨¡å‹ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mobilenet <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@tensorflow-models/mobilenet'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   const model = await mobilenet.load();</span></span></code> </pre> <br> æˆ‘ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯è¯¥ä»£ç ä¸é€‚ç”¨äºNode.jsã€‚ <br><br><pre> <code class="plaintext hljs">Error: browserHTTPRequest is not supported outside the web browser.</code> </pre> <br> åœ¨æ£€æŸ¥äº†<a href="">æºä»£ç ä¹‹å</a> ï¼Œæˆ‘ä»¬çœ‹åˆ°mobilenetåº“æ˜¯<code>tf.Model</code>ç±»çš„åŒ…è£…å™¨ã€‚ è°ƒç”¨æ—¶ï¼Œ <code>load()</code>æ–¹æ³•è‡ªåŠ¨ä¸‹è½½ä½äºå¤–éƒ¨HTTPåœ°å€çš„å¿…è¦æ¨¡å‹æ–‡ä»¶ï¼Œå¹¶å®ä¾‹åŒ–TensorFlowæ¨¡å‹ã€‚ <br><br> åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒNode.jsæ‰©å±•å°šä¸æ”¯æŒç”¨äºåŠ¨æ€æ¨¡å‹æ£€ç´¢çš„HTTPè¯·æ±‚ã€‚ å‰©ä¸‹çš„å°±æ˜¯æ‰‹åŠ¨å°†æ¨¡å‹åŠ è½½åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ <br><br>  <i>ä½†æ˜¯ï¼Œé˜…è¯»äº†åº“çš„æºä»£ç åï¼Œæˆ‘å‘ç°äº†ä¸€ç§è§£å†³æ–¹æ³•...</i> <br><br>  <b>ä»æ–‡ä»¶ç³»ç»Ÿä¸‹è½½æ¨¡å‹</b> <br><br> å¦‚æœMobileNetç±»æ˜¯æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œåˆ™æ— æ³•è°ƒç”¨æ¨¡å—çš„<code>load</code>æ–¹æ³•ï¼Œè€Œæ˜¯é‡å†™åŒ…å«æ¨¡å‹çš„HTTPåœ°å€çš„è‡ªåŠ¨ç”Ÿæˆçš„å˜é‡<code>path</code> ï¼Œå¹¶ç”¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æœ¬åœ°è·¯å¾„æ›¿æ¢è¯¥åœ°å€ã€‚ ä¹‹åï¼Œåœ¨ç±»å®ä¾‹ä¸­è°ƒç”¨<code>load</code>æ–¹æ³•æ—¶ï¼Œå°†è§¦å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ä»¶ç³»ç»ŸåŠ è½½å™¨</a>ç±»ï¼› åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‹’ç»ä½¿ç”¨åŸºäºæµè§ˆå™¨çš„HTTPä¸‹è½½å™¨ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-string"><span class="hljs-string">"mobilenet/model.json"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> mobilenet.MobileNet(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); mn.path = <span class="hljs-string"><span class="hljs-string">`file://</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${path}</span></span></span><span class="hljs-string">`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> mn.load()</code> </pre> <br> å¤ªå¥½äº†ï¼Œä¸€åˆ‡æ­£å¸¸ï¼ <br><br> ä½†æ˜¯æ¨¡å‹æ–‡ä»¶ä»å“ªé‡Œæ¥ï¼Ÿ <br><br>  <b>MobileNetæ¨¡å‹</b> <br><br>  TensorFlow.jsçš„æ¨¡å‹åŒ…å«ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ï¼šä»¥JSONæ ¼å¼å­˜å‚¨çš„æ¨¡å‹é…ç½®æ–‡ä»¶å’Œä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨çš„æ¨¡å‹æƒé‡ã€‚ æ¨¡å‹æƒé‡é€šå¸¸åˆ†ä¸ºè®¸å¤šéƒ¨åˆ†ï¼Œä»¥ä¼˜åŒ–æµè§ˆå™¨ç¼“å­˜ã€‚ <br><br> è€ƒè™‘äº†MobileNetæ¨¡å‹çš„<a href="">è‡ªåŠ¨ä¸‹è½½ä»£ç å</a> ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™äº›æ¨¡å‹ï¼Œå®ƒä»¬çš„é…ç½®å’Œæƒé‡ç‰‡æ®µæ˜¯ä»ä»¥ä¸‹åœ°å€çš„å…¬å…±å®¹å™¨ä¸­æå–çš„ã€‚ <br><br><pre> <code class="plaintext hljs">https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v${version}_${alpha}_${size}/</code> </pre> <br>  URLä¸­çš„æ¨¡æ¿å‚æ•°æè¿°äº†<a href="">æ­¤å¤„</a>åˆ—å‡ºçš„æ¨¡å‹ç‰ˆæœ¬ã€‚ æœ€ç»ˆçš„åˆ†ç±»ç²¾åº¦ä¹Ÿæ˜¾ç¤ºåœ¨åŒä¸€é¡µé¢ä¸Šã€‚ <br><br> æºä»£ç è¡¨æ˜ï¼Œåªèƒ½ä½¿ç”¨<code>tensorflow-models/mobilenet</code>ä¸‹è½½MobileNet v1 <code>tensorflow-models/mobilenet</code> ã€‚ <br><br>  HTTPæå–ä»£ç ä»å­˜å‚¨ä½ç½®ä¸‹è½½<code>model.json</code>æ–‡ä»¶ï¼Œç„¶åä»¥å¼•ç”¨çš„æƒé‡é€’å½’é€‰æ‹©æ¨¡å‹çš„æ‰€æœ‰ç‰‡æ®µã€‚ è¿™äº›æ˜¯æ ¼å¼ä¸º<code>groupX-shard1of1</code> ã€‚ <br><br>  <b>æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹</b> <br><br> å¦‚æœè¦å°†æ‰€æœ‰æ¨¡å‹æ–‡ä»¶ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šæå–æ¨¡å‹é…ç½®æ–‡ä»¶ï¼Œè§£æé…ç½®æ–‡ä»¶ä¸­å¼•ç”¨çš„æ‰€æœ‰åŠ æƒæ–‡ä»¶çš„è¯­æ³•ï¼Œç„¶åæ‰‹åŠ¨ä¸‹è½½æ¯ä¸ªåŠ æƒæ–‡ä»¶ã€‚ <br>  <b>æˆ‘æ‰“ç®—ä½¿ç”¨å…·æœ‰1.0çš„alphaå€¼å’Œ224åƒç´ çš„å›¾åƒçš„MobileNet V1æ¨¡å—</b> ã€‚ å› æ­¤ï¼Œæˆ‘è·å¾—äº†æ¨¡å‹é…ç½®æ–‡ä»¶çš„<a href="">ä»¥ä¸‹URL</a> ã€‚ <br><br><pre> <code class="plaintext hljs">https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_1.0_224/model.json</code> </pre> <br> åœ¨æœ¬åœ°ä¸‹è½½æ­¤æ–‡ä»¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>jq</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å·¥å…·</a>è§£ææ‰€æœ‰åŠ æƒæ–‡ä»¶çš„åç§°ã€‚ <br><br><pre> <code class="javascript hljs">$ cat model.json | jq -r <span class="hljs-string"><span class="hljs-string">".weightsManifest[].paths[0]"</span></span> group1-shard1of1 group2-shard1of1 group3-shard1of1 ...</code> </pre> <br> ä½¿ç”¨<code>sed</code>å·¥å…·ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªHTTPå…ƒç´ çš„åç§°åŠ ä¸ŠURLå‰ç¼€ï¼Œä»¥ä¸ºæ¯ä¸ªé‡é‡æ–‡ä»¶ç”ŸæˆURLã€‚ <br><br><pre> <code class="javascript hljs">$ cat model.json | jq -r <span class="hljs-string"><span class="hljs-string">".weightsManifest[].paths[0]"</span></span> | sed <span class="hljs-string"><span class="hljs-string">'s/^/https:\/\/storage.googleapis.com\/tfjs-models\/tfjs\/mobilenet_v1_1.0_224\//'</span></span> https:<span class="hljs-comment"><span class="hljs-comment">//storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_1.0_224/group1-shard1of1 https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_1.0_224/group2-shard1of1 https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_1.0_224/group3-shard1of1 ...</span></span></code> </pre><br> ç„¶åä½¿ç”¨<code>parallel</code>å’Œ<code>curl</code>å‘½ä»¤å°†æ‰€æœ‰è¿™äº›æ–‡ä»¶ä¸‹è½½åˆ°æˆ‘çš„æœ¬åœ°ç›®å½•ä¸­ã€‚ <br><br><pre> <code class="plaintext hljs">cat model.json | jq -r ".weightsManifest[].paths[0]" | sed 's/^/https:\/\/storage.googleapis.com\/tfjs-models\/tfjs\/mobilenet_v1_1.0_224\//' | parallel curl -O</code> </pre> <br>  <b>å›¾ç‰‡åˆ†ç±»</b> <br><br>  TensorFlow.jséšé™„çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤ç¤ºä¾‹ä»£ç </a>æ¼”ç¤ºäº†å¦‚ä½•è¿”å›å›¾åƒåˆ†ç±»çš„ç»“æœã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> img = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'img'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   const predictions = await model.classify(img);</span></span></code> </pre> <br> ç”±äºç¼ºä¹DOMæ”¯æŒï¼Œå› æ­¤åœ¨Node.jsä¸­ä¸èµ·ä½œç”¨ã€‚ <br><br>  <code>classify</code> <a href="">æ–¹æ³•</a>æ¥å—å„ç§DOMå…ƒç´ ï¼ˆ <code>canvas</code> ï¼Œ <code>video</code> ï¼Œ <code>image</code> ï¼‰ï¼Œå¹¶è‡ªåŠ¨ä»è¿™äº›å…ƒç´ ä¸­æå–â€œå›¾ç‰‡â€å­—èŠ‚å¹¶å°†å…¶è½¬æ¢ä¸º<code>tf.Tensor3D</code>ç±»ï¼Œç”¨ä½œæ¨¡å‹è¾“å…¥ã€‚ æˆ–è€…ï¼Œå¯ä»¥ç›´æ¥ä¼ è¾“<code>tf.Tensor3D</code> ã€‚ <br><br>  <b>æˆ‘å†³å®šä¸å°è¯•ä½¿ç”¨å¤–éƒ¨è½¯ä»¶åŒ…æ‰‹åŠ¨æ¨¡æ‹ŸDOMå…ƒç´ ï¼Œä½†å‘ç°<code>tf.Tensor3D</code>æ˜“äºæ‰‹åŠ¨ç»„è£…</b> ã€‚ <br><br>  <b>æˆ‘ä»¬ä»å›¾åƒç”ŸæˆTensor3D</b> <br><br> é˜…è¯»ç”¨äºå°†DOMå…ƒç´ è½¬æ¢ä¸ºTensor3Dç±»<a href="">çš„</a>æ–¹æ³•çš„<a href="">æºä»£ç </a> ï¼Œæˆ‘ä»¬å‘ç°ä»¥ä¸‹è¾“å…¥å‚æ•°ç”¨äºç”ŸæˆTensor3Dç±»ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Int32Array</span></span>(image.height * image.width * numChannels); <span class="hljs-comment"><span class="hljs-comment">//     ,    const outShape = [image.height, image.width, numChannels]; const input = tf.tensor3d(values, outShape, 'int32');</span></span></code> </pre> <br>  <code>pixels</code>æ˜¯ç±»å‹ä¸º<code>(Int32Array)</code>çš„äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ªåƒç´ çš„é€šé“å€¼çš„é¡ºåºåˆ—è¡¨ã€‚  <code>numChannels</code>æ˜¯æ¯ä¸ªåƒç´ çš„é€šé“å€¼æ•°é‡ã€‚ <br><br>  <b>ä¸ºJPEGåˆ›å»ºè¾“å…¥å€¼</b> <br><br>  <code>jpeg-js</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº“</a>æ˜¯ä½¿ç”¨çº¯JavaScriptç¼–å†™çš„Node.jsçš„JPEGç¼–ç å™¨/è§£ç å™¨ã€‚ ä½¿ç”¨æ­¤åº“ï¼Œæ‚¨å¯ä»¥æå–æ¯ä¸ªåƒç´ çš„RGBå€¼ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixels = jpeg.decode(buffer, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br> ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªUint8Arrayï¼Œæ¯ä¸ªåƒç´ ï¼ˆ <code>width * height</code> ï¼‰å…·æœ‰å››ä¸ªé€šé“å€¼ï¼ˆ <code>RGBA</code> ï¼‰ã€‚  MobileNetæ¨¡å‹ä»…ä½¿ç”¨ä¸‰ä¸ªé¢œè‰²é€šé“ï¼ˆ <code>RGB</code> ï¼‰è¿›è¡Œåˆ†ç±»ï¼Œè€Œå¿½ç•¥Alphaé€šé“ã€‚ æ­¤ä»£ç å°†å››é€šé“æ•°ç»„è½¬æ¢ä¸ºçœŸæ­£çš„ä¸‰é€šé“ç‰ˆæœ¬ã€‚ <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> numChannels = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> numPixels = image.width * image.height; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Int32Array</span></span>(numPixels * numChannels); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numPixels; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> channel = <span class="hljs-number"><span class="hljs-number">0</span></span>; channel &lt; numChannels; ++channel) { values[i * numChannels + channel] = pixels[i * <span class="hljs-number"><span class="hljs-number">4</span></span> + channel]; } }</code> </pre> <br>  <b>MobileNetæ¨¡å‹çš„è¾“å…¥è¦æ±‚</b> <br><br> è¿™é‡Œä½¿ç”¨çš„<a href="">MobileNetæ¨¡å‹</a>å°†å›¾åƒåˆ†ä¸ºé«˜å’Œå®½224ä¸ªåƒç´ ã€‚ å¯¹äºæ¯ä¸ªåƒç´ çš„ä¸‰ä¸ªé€šé“å€¼ï¼Œè¾“å…¥å¼ é‡å¿…é¡»åŒ…å«ä»‹äº-1åˆ°1èŒƒå›´å†…çš„æµ®ç‚¹å€¼ã€‚ <br><br> åˆ†ç±»å‰ï¼Œå¿…é¡»å°†å…·æœ‰ä¸åŒå°ºå¯¸çš„å›¾åƒçš„è¾“å…¥å€¼è½¬æ¢ä¸ºæ­£ç¡®çš„å°ºå¯¸ã€‚ å¦å¤–ï¼Œä»JPEGè§£ç å™¨è·å¾—çš„åƒç´ å€¼åœ¨0-255çš„èŒƒå›´å†…ï¼Œè€Œä¸æ˜¯-1-1ã€‚åœ¨åˆ†ç±»ä¹‹å‰è¿˜éœ€è¦è½¬æ¢è¿™äº›å€¼ã€‚ <br><br>  TensorFlow.jså…·æœ‰ç®€åŒ–è¯¥è¿‡ç¨‹çš„åº“æ–¹æ³•ï¼Œä½†æ›´å¥½çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ª<b>ç‰¹æ®Šçš„<code>tfjs-models/mobilenet</code>å¯ä»¥<a href="">è‡ªåŠ¨è§£å†³æ­¤é—®é¢˜</a> ï¼</b> <br><br> å¼€å‘äººå‘˜å¯ä»¥å°†ç±»å‹ä¸º<code>int32</code>è¾“å…¥Tensor3Dä»¥åŠå„ç§å°ºå¯¸ä¼ é€’ç»™<code>classify</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è¾“å…¥å€¼è½¬æ¢ä¸ºåˆ†ç±»ä¹‹å‰çš„æ­£ç¡®æ ¼å¼ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ— äº‹å¯åšã€‚ å¤ªå¥½äº†ï¼ <br><br>  <b>è·å¾—é¢„æµ‹</b> <br><br>  Tensorflowçš„MobileNetæ¨¡å‹å­¦ä¹ ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ImageNet</a>æ•°æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é›†ä¸­</a>çš„<a href="">1000ä¸ªæœ€é‡è¦çš„ç±»ä¸­</a>è¯†åˆ«å¯¹è±¡ã€‚ åœ¨æ¨¡å‹çš„è¾“å‡ºå¤„ï¼Œç»™å‡ºæ¦‚ç‡å€¼ï¼Œè¿™äº›å€¼è¡¨å¾åœ¨åˆ†ç±»å›¾åƒä¸­æ‰¾åˆ°è¿™äº›å¯¹è±¡çš„æœºä¼šã€‚ <br><br>  <i><a href="">æ­¤æ–‡ä»¶ä¸­åŒ…å«</a>ä½¿ç”¨çš„æ¨¡å‹çš„è®­ç»ƒæœ‰ç´ ç±»çš„å®Œæ•´åˆ—è¡¨</i> ã€‚ <br><br>  <code>tfjs-models/mobilenet</code>åœ¨<code>MobileNet</code>ç±»ä¸­æä¾›äº†<code>classify</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ ¹æ®å›¾ç‰‡æ‰€ç¤ºè¿”å›æœ€æœ‰å¯èƒ½çš„ç±»çš„å‰Xä¸ªã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> predictions = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> mn_model.classify(input, <span class="hljs-number"><span class="hljs-number">10</span></span>);</code> </pre> <br>  <code>predictions</code>æ˜¯Xç±»åˆ«å’Œæ¦‚ç‡çš„æ•°ç»„ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚ <br><br><pre> <code class="javascript hljs"> { <span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'panda'</span></span>, <span class="hljs-attr"><span class="hljs-attr">probability</span></span>: <span class="hljs-number"><span class="hljs-number">0.9993536472320557</span></span> }</code> </pre> <br>  <b>ä¾‹å­</b> <br><br> å› æ­¤ï¼Œæˆ‘ä»¬å·²ç»å¼„æ¸…æ¥šäº†å¦‚ä½•åœ¨Node.jsä¸­ä½¿ç”¨TensorFlow.jsåº“å’ŒMobileNetæ¨¡å‹ï¼Œç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹è¯¥è„šæœ¬å¦‚ä½•å°†æŒ‡å®šä¸ºå‘½ä»¤è¡Œå‚æ•°çš„å›¾åƒåˆ†ç±»ã€‚ <br><br>  <i>æºä»£ç </i> <br><br> å°†æ­¤è„šæœ¬æ–‡ä»¶å’Œç¨‹åºåŒ…æè¿°ç¬¦ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ã€‚ <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"tf-js"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"script.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@tensorflow-models/mobilenet"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.2.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"@tensorflow/tfjs"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.12.3"</span></span>, <span class="hljs-string"><span class="hljs-string">"@tensorflow/tfjs-node"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.9"</span></span>, <span class="hljs-string"><span class="hljs-string">"jpeg-js"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.3.4"</span></span> } }</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tf = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@tensorflow/tfjs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mobilenet = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@tensorflow-models/mobilenet'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@tensorflow/tfjs-node'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> jpeg = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jpeg-js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> NUMBER_OF_CHANNELS = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readImage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">path</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> buf = fs.readFileSync(path) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixels = jpeg.decode(buf, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pixels } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageByteArray = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">image, numChannels</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pixels = image.data <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> numPixels = image.width * image.height; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Int32Array</span></span>(numPixels * numChannels); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numPixels; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> channel = <span class="hljs-number"><span class="hljs-number">0</span></span>; channel &lt; numChannels; ++channel) { values[i * numChannels + channel] = pixels[i * <span class="hljs-number"><span class="hljs-number">4</span></span> + channel]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> values } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageToInput = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">image, numChannels</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> values = imageByteArray(image, numChannels) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> outShape = [image.height, image.width, numChannels]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> input = tf.tensor3d(values, outShape, <span class="hljs-string"><span class="hljs-string">'int32'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> loadModel = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> path =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> mobilenet.MobileNet(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); mn.path = <span class="hljs-string"><span class="hljs-string">`file://</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${path}</span></span></span><span class="hljs-string">`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> mn.load() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mn } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> classify = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (model, path) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> image = readImage(path) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> input = imageToInput(image, NUMBER_OF_CHANNELS) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mn_model = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> loadModel(model) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> predictions = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> mn_model.classify(input) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'classification results:'</span></span>, predictions) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (process.argv.length !== <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'incorrect arguments: node script.js &lt;MODEL&gt; &lt;IMAGE_FILE&gt;'</span></span>) classify(process.argv[<span class="hljs-number"><span class="hljs-number">2</span></span>], process.argv[<span class="hljs-number"><span class="hljs-number">3</span></span>])</code> </pre> <br>  <b>æµ‹è¯•ä¸­</b> <br><br> æŒ‰ç…§ä¸Šè¿°è¯´æ˜å°†æ¨¡å‹æ–‡ä»¶ä¸‹è½½åˆ°mobilenetç›®å½•ã€‚ <br> ä½¿ç”¨NPMè®¾ç½®é¡¹ç›®ä¾èµ–é¡¹ <br><br> <code>npm install</code> <br> <br> ä¸‹è½½æ ·æœ¬JPEGæ–‡ä»¶è¿›è¡Œåˆ†ç±» <br><br> <code>wget http://bit.ly/2JYSal9 -O panda.jpg</code> <br> <br><img src="https://habrastorage.org/webt/vt/sm/-2/vtsm-2o5y-t3vhqx5-qaomhxnfw.jpeg"><br><br> è¿è¡Œè„šæœ¬ï¼Œå…¶å‚æ•°å°†æ˜¯æ¨¡å‹æ–‡ä»¶å’Œè¾“å…¥å›¾åƒã€‚ <br><br> <code>node script.js mobilenet/model.json panda.jpg</code> <br> <br> å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™ä»¥ä¸‹è¾“å‡ºåº”å‡ºç°åœ¨æ§åˆ¶å°ä¸­ã€‚ <br><br><pre> <code class="javascript hljs"> classification results: [ { <span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'giant panda, panda, panda bear, coon bear'</span></span>, <span class="hljs-attr"><span class="hljs-attr">probability</span></span>: <span class="hljs-number"><span class="hljs-number">0.9993536472320557</span></span> } ]</code> </pre> <br> å›¾ç‰‡æ­£ç¡®åˆ†ç±»ä¸ºåŒ…å«ç†ŠçŒ«çš„å¯èƒ½æ€§ä¸º99.93ï¼…ï¼ <br><br>  <b>ç»“è®º</b> <br><br>  TensorFlow.jsåº“ä¸ºJavaScriptå¼€å‘äººå‘˜æä¾›äº†æ·±åº¦å­¦ä¹ çš„æœºä¼šã€‚ é€šè¿‡å°†ç»è¿‡é¢„è®­ç»ƒçš„æ¨¡å‹ä¸TensorFlow.jsåº“ä¸€èµ·ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åœ¨JavaScriptåº”ç”¨ç¨‹åºä¸­æ„å»ºæ–°åŠŸèƒ½ï¼Œä»è€Œä»¥æœ€å°‘çš„ç²¾åŠ›å’Œç®€æ´çš„ä»£ç è§£å†³å¤æ‚çš„æœºå™¨å­¦ä¹ é—®é¢˜ã€‚ <br><br>  TensorFlow.jsåº“çš„åˆ›å»ºçº¯ç²¹æ˜¯ä¸ºäº†åœ¨æµè§ˆå™¨ä¸­å·¥ä½œï¼Œä½†ç°åœ¨å®ƒå¯ä»¥ä¸Node.jsäº¤äº’ï¼Œå°½ç®¡å¹¶éæ‰€æœ‰å·¥å…·å’Œå®ç”¨ç¨‹åºéƒ½æ”¯æŒæ­¤æ–°è¿è¡Œæ—¶ã€‚ å¯¹è¯¥åº“è¿›è¡Œäº†å‡ å¤©çš„ä¿®æ”¹åï¼Œæˆ‘å­¦ä¼šäº†å°†å…¶ä¸MobileNetæ¨¡å‹ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å¯è§†æ–¹å¼è¯†åˆ«æœ¬åœ°æ–‡ä»¶ä¸­çš„å›¾åƒã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN432984/">https://habr.com/ru/post/zh-CN432984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN432972/index.html">èµ„æ–™æ¥æºï¼šâ€œåº·éŸ¦å®šå¾‹â€</a></li>
<li><a href="../zh-CN432976/index.html">åŒ¿ååœ£è¯è€äºº2018-2019ï¼šå¹å˜˜æ–°å¹´ç¤¼ç‰©</a></li>
<li><a href="../zh-CN432978/index.html">çº¦ç¿°Â·ç½—æ¢…ç½—ï¼ˆJohn Romeroï¼‰ï¼šã€Šæ¯ç­æˆ˜å£«ã€‹å€’å½±</a></li>
<li><a href="../zh-CN432980/index.html">æœ€å°çš„VMware NSXã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN432982/index.html">ç¼–è¯‘å™¨åˆ›å»ºçš„æœ€ç®€çŸ­ä»‹ç»</a></li>
<li><a href="../zh-CN432986/index.html">C vs Goå¾ªç¯å’Œç®€å•æ•°å­¦</a></li>
<li><a href="../zh-CN432988/index.html">ç¬¬å…«å±Šç½‘ç«™ç®¡ç†å‘˜ã€‚ ä½åœ¨å“ˆå¸ƒé›·</a></li>
<li><a href="../zh-CN432990/index.html">çˆ±è¿ªç”Ÿå£°æ§æœ¨ç¯ã€‚ å‘è¡Œä»·$ 5</a></li>
<li><a href="../zh-CN432992/index.html">ä»–æˆ´ä¸Šè€³æœºæ­»äº†ï¼šæˆ‘ä»¬å¤„ç†äº†æ—å ¡ä¸€ä¸ªç”·ç”Ÿçš„å¥‡æ€ªæ­»äº¡</a></li>
<li><a href="../zh-CN432994/index.html">Vivaldi 2.2-æ•°é‡è½¬æ¢ä¸ºè´¨é‡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>