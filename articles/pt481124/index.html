<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔉 👨🏾‍🚒 👩🏻‍🔬 Dicas para escrever código de auto-documentação 👔 🔘 👊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As palavras "código de auto-documentação" é outra maneira de dizer "código legível". Por si só, não substituirá esta documentação ou bons comentários ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dicas para escrever código de auto-documentação</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481124/"><p>  As palavras "código de auto-documentação" é outra maneira de dizer "código legível".  Por si só, não substituirá esta documentação ou <a href="https://medium.com/%40mikecronin92/what-makes-a-good-code-comment-5267debd2c24">bons comentários</a> , mas com ou sem eles definitivamente tornará sua vida e a vida de seus colegas mais fáceis. </p><br><p>  Vejamos alguns princípios importantes para a criação de código de auto-documentação. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/96e/d3e/5a896ed3e066ce9b9fd826eb74acb6e1.png"></div><a name="habracut"></a><br><h1>  Não use "números mágicos" </h1><br><p>  Diga-me, o que essa linha significa? </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (students.length &gt; <span class="hljs-number"><span class="hljs-number">23</span></span>) {</code> </pre> <br><p>  Verifica se há mais estudantes do que 23 anos?  E o que isso significa?  Por que exatamente 23, e não, digamos, 24? </p><br><p>  Um número mágico é um número sem contexto.  Você precisará gastar tempo e esforço para entender esse contexto.  Livre-se do trabalho desnecessário, imediatamente dê explicitamente ao número a designação: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> maxClassSize = <span class="hljs-number"><span class="hljs-number">23</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (students.length &gt; maxClassSize) {</code> </pre> <br><p>  Tente ler o código agora.  Verificamos não "se há mais alunos do que 23", mas "se há mais alunos do que a classe acomoda". </p><br><h1>  Use nomes claros para variáveis </h1><br><p>  Eu não sei por que, mas antes eu estava constantemente com medo de fazer nomes de variáveis ​​longos.  O que foi estúpido da minha parte, pois <b>rStuNms</b> e <b>fStuNms</b> são terríveis em comparação com <strong>r</strong> <b>awStudentNames</b> e <b>filterStudentNames</b> . </p><br><p>  Os últimos ainda parecem longos?  Então pense sobre isso: após 2 semanas de férias e trabalhando com outro código, você esquecerá boa parte das abreviações.  Ou seja, a capacidade de ler nomes de variáveis ​​em movimento é a capacidade de ler código em tempo real: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fStuNms = stus.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> sn) <span class="hljs-comment"><span class="hljs-comment">//    const filteredStudentNames = students.map(student =&gt; { return student.name; });</span></span></code> </pre> <br><p>  Outra boa dica é usar convenções (convenções de nomenclatura).  Se a variável for booleana, inicie seu nome com <b>is</b> ou <b>has</b> ( <strong>isEnrolled: true</strong> ).  Se a variável for uma matriz, use o plural ( <b>alunos</b> ).  Muitos números devem começar com <strong>mínimo</strong> ou <strong>máximo</strong> .  E os nomes das funções devem conter um verbo, por exemplo, <b>createSchedule</b> ou <b>updateNickname</b> .  Falando de recursos ... </p><br><h1>  Escreva pequenas funções nomeadas </h1><br><p>  Variáveis ​​não são a única maneira de ler código.  Como jovem programador, usei funções apenas para <a href="https://en.wikipedia.org/wiki/Don%2527t_repeat_yourself">evitar duplicação de código</a> .  A verdadeira revelação para mim foi que, antes de tudo, faz sentido criar funções <a href="https://www.amazon.com/Refactoring-Improving-Existing-Addison-Wesley-Signature/dp/0134757599/ref%3Dasc_df_0134757599/%3Ftag%3Dhyprod-20%26amp%3BlinkCode%3Ddf0%26amp%3Bhvadid%3D312125971120%26amp%3Bhvpos%3D1o1%26amp%3Bhvnetw%3Dg%26amp%3Bhvrand%3D12058574021797762441%26amp%3Bhvpone%3D%26amp%3Bhvptwo%3D%26amp%3Bhvqmt%3D%26amp%3Bhvdev%3Dc%26amp%3Bhvdvcmdl%3D%26amp%3Bhvlocint%3D%26amp%3Bhvlocphy%3D9004398%26amp%3Bhvtargid%3Dpla-464425925893%26amp%3Bpsc%3D1%26amp%3Btag%3D%26amp%3Bref%3D%26amp%3Badgrpid%3D61316180839%26amp%3Bhvpone%3D%26amp%3Bhvptwo%3D%26amp%3Bhvadid%3D312125971120%26amp%3Bhvpos%3D1o1%26amp%3Bhvnetw%3Dg%26amp%3Bhvrand%3D12058574021797762441%26amp%3Bhvqmt%3D%26amp%3Bhvdev%3Dc%26amp%3Bhvdvcmdl%3D%26amp%3Bhvlocint%3D%26amp%3Bhvlocphy%3D9004398%26amp%3Bhvtargid%3Dpla-464425925893">para descrever o que está acontecendo</a> . </p><br><p>  Reserve alguns segundos para analisar este código e dizer o que ele faz: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleSubmit = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) =&gt;</span></span> { event.preventDefault(); NoteAdapter.update(currentNote) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { setCurrentAlert(<span class="hljs-string"><span class="hljs-string">'Saved!'</span></span>) setIsAlertVisible(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> setIsAlertVisible(<span class="hljs-literal"><span class="hljs-literal">false</span></span>), <span class="hljs-number"><span class="hljs-number">2000</span></span>); }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasTitleChanged) { context.setRefreshTitles(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); setHasTitleChanged(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } }); };</code> </pre> <br><p>  Agora faça o mesmo para o código: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showSaveAlertFor = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">milliseconds</span></span></span><span class="hljs-function">) =&gt;</span></span> () =&gt; { setCurrentAlert(<span class="hljs-string"><span class="hljs-string">'Saved!'</span></span>) setIsAlertVisible(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); setTimeout( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> setIsAlertVisible(<span class="hljs-literal"><span class="hljs-literal">false</span></span>), milliseconds, ); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateTitleIfNew = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasTitleChanged) { context.setRefreshTitles(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); setHasTitleChanged(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleSubmit = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) =&gt;</span></span> { event.preventDefault(); NoteAdapter.update(currentNote) .then(showSaveAlertFor(<span class="hljs-number"><span class="hljs-number">2000</span></span>)) .then(updateTitleIfNew); };</code> </pre> <br><p>  Parece que há mais personagens, mas quanto mais legível, certo?  Tudo o que era necessário era distribuir as operações lógicas em pequenas funções nomeadas.  Além disso, as próprias funções pequenas não são necessárias para leitura na maioria das situações - esses são detalhes de implementação.  Para entender o código, basta olhar para a função superior, que consiste em uma cadeia de eventos facilmente compreendidos. </p><br><p>  Além disso - um pouco mais tarde, você perceberá que essas funções pequenas são muito fáceis de reutilizar.  A reutilização é uma consequência da legibilidade aprimorada, e não vice-versa. </p><br><h1>  Adicione descrições de teste úteis </h1><br><p>  Provavelmente os menos comentados são testes auto-documentados, mas em vão. </p><br><p>  Digamos que temos uma função como esta: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getDailySchedule = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">student, dayOfWeek</span></span></span><span class="hljs-function">) =&gt;</span></span> {</code> </pre> <br><p>  Imagine que ele contém muitas operações diferentes: recebe um cronograma para um mês;  se hoje é dia de folga, retorna uma matriz vazia;  se o aluno estiver matriculado em aulas adicionais, adicione-os no final do dia etc.  Em geral, você entendeu a idéia: a função é complexa e seria bom anotar o algoritmo de seu trabalho em algum lugar em palavras simples. </p><br><p>  Tentar encaixá-lo em um comentário é uma péssima idéia: um comentário se tornará obsoleto e não o fato de que será corrigido a tempo.  Você sabe onde a gravação do algoritmo de operação é apropriada?  Nos testes: </p><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">'getDailySchedule '</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">"   "</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">'  ,   '</span></span>, () =&gt; { it(<span class="hljs-string"><span class="hljs-string">'     '</span></span>, () =&gt; {</code> </pre> <br><p>  Essa é a maneira mais elegante de comentar o código sem comentar no código. </p><br><h1>  Conclusão: a legibilidade é mais importante que a inteligência </h1><br><p>  Qualquer um pode escrever um código que seja compreensível para si mesmo; um <strong>bom desenvolvedor escreve um código que é compreensível para os outros</strong> .  Raramente é algo importante criado por uma única pessoa, o que significa que mais cedo ou mais tarde outras pessoas lerão seu código.  Porém, mesmo se você tiver certeza de que somente você se debruçará sobre algum código, considere que você, hoje e você, em um mês, são pessoas diferentes em termos da capacidade de se lembrar desse código. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481124/">https://habr.com/ru/post/pt481124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481114/index.html">Seccomp em Kubernetes: 7 coisas que você precisa saber desde o início</a></li>
<li><a href="../pt481116/index.html">Publique automaticamente postagens da comunidade VKontakte no Discord</a></li>
<li><a href="../pt481118/index.html">Anônimo Papai Noel 2019-2020: pós com presentes de Ano Novo</a></li>
<li><a href="../pt481120/index.html">Onde e como os servidores de borda são aplicados?</a></li>
<li><a href="../pt481122/index.html">Antipatterns PostgreSQL: passando conjuntos e seleções para SQL</a></li>
<li><a href="../pt481126/index.html">União de programadores? Não conte aos meus chinelos</a></li>
<li><a href="../pt481130/index.html">TOP12 Descobertas Científicas Interdisciplinares 2019</a></li>
<li><a href="../pt481134/index.html">Como avaliar a capacidade do serviço e não cair sob carga</a></li>
<li><a href="../pt481138/index.html">Essas pessoas criam inteligência artificial - 4 histórias de especialistas em IA e ML</a></li>
<li><a href="../pt481140/index.html">Folha de dicas do formato de arquivo de dados Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>