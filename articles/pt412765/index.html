<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûø üõÖ ‚õëÔ∏è Introdu√ß√£o ao novo sistema de cart√µes lado a lado da Unity üë®üèæ‚Äçüöí üèá üëáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A familiaridade com o sistema de blocos 2D da Unity oferece uma excelente oportunidade para economizar tempo para desenvolvedores independentes e est√∫...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o ao novo sistema de cart√µes lado a lado da Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412765/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  A familiaridade com o sistema de blocos 2D da Unity oferece uma excelente oportunidade para economizar tempo para desenvolvedores independentes e est√∫dios de jogos prototiparem e criarem jogos 2D de alta qualidade. <br><br>  Sem esse sistema, voc√™ pode passar dias, se n√£o semanas, escrevendo seu pr√≥prio sistema de cart√£o ou processando o de outra pessoa.  E isso √© apenas programa√ß√£o, mas e o editor de mapa de blocos? <br><br>  O novo sistema √© gratuito e √© constru√≠do diretamente no editor do Unity.  Ele fornece muitos recursos que abordaremos neste tutorial. <br><br>  Neste artigo, usaremos um jogo 2D de blocos simples para descobrir o seguinte: <br><br><ul><li>  Como cart√µes de telha funcionam. </li><li>  Como habilitar mapas de blocos no Unity e personalizar a grade. </li><li>  Como adicionar sprites a um projeto, convert√™-los em ladrilhos e adicion√°-los √† paleta de ladrilhos. </li><li>  Como usar as ferramentas do editor de blocos para criar n√≠veis. </li><li>  Como classificar pe√ßas e coloc√°-las em diferentes camadas. </li><li>  Como adicionar blocos de f√≠sica do Unity. </li><li>  Como colorir dinamicamente azulejos. </li><li>  Como alterar os blocos pr√©-fabricados usando c√≥digo e l√≥gica nativos. </li><li>  Como adicionar suas pr√≥prias extens√µes e scripts de mapas de mosaico ao projeto. </li></ul><a name="habracut"></a><br>  Sim, a lista foi √≥tima.  Mas n√£o tenha medo - quando come√ßarmos a entender, voc√™ entender√° rapidamente como essas ferramentas s√£o simples. <br><br><blockquote>  <em>Nota:</em> este tutorial assume que voc√™ √© bom em trabalhar com o editor do Unity.  Se voc√™ acha que n√£o est√° familiarizado com isso, o tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Introdu√ß√£o √† Unity</a> tem tudo o que voc√™ precisa para aprender este tutorial.  Al√©m disso, voc√™ precisa do Unity vers√£o 2017.3 ou superior. </blockquote><br><h2>  O que √© um jogo de pe√ßas? </h2><br>  Um jogo de pe√ßas em 2D √© qualquer jogo em que os n√≠veis ou √°reas de jogo consistem em muitas pe√ßas pequenas (pe√ßas) que juntas formam uma grade de pe√ßas.  √Äs vezes, as diferen√ßas entre as pe√ßas podem ser √≥bvias, e √†s vezes parecem s√≥lidas e indistingu√≠veis para os jogadores. <br><br>  A cole√ß√£o de pe√ßas no jogo √© chamada de conjunto de pe√ßas e cada pe√ßa √© geralmente um sprite, parte de uma planilha.  Se voc√™ deseja lidar melhor com as folhas de sprite, temos um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tutorial</a> que descreve as folhas de sprite do Unity. <br><br>  Como voc√™ pode ver neste tutorial, geralmente os blocos s√£o quadrados.  Mas eles podem assumir outra forma - ret√¢ngulos, paralelogramos ou hex√°gonos.  Nos jogos, geralmente √© usada uma vista superior ou lateral, mas √†s vezes nos jogos de pe√ßas, 2.5D tamb√©m √© usado. <br><br>  Talvez voc√™ j√° conhe√ßa os dois jogos mais populares que usam o sistema de cart√µes lado a lado: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Starbound</i></a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Terraria</i></a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aac/428/8ee/aac4288ee7c7868202364a050a82e34a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/650/d2d/db4/650d2ddb41661d2b4ae2b948fccee019.png"></div><br><h2>  Come√ßando a trabalhar </h2><br>  Fa√ßa o download dos <a href="">materiais</a> do projeto para este tutorial e descompacte o arquivo .zip. <br><br>  Inicie o editor Unity e carregue o projeto <em>Rayzor-starter a</em> partir dos materiais descompactados do projeto. <br><br>  Aqui est√° o que voc√™ trabalhar√° neste projeto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e3/ae3/784/2e3ae3784a7e0cda552c51902367eb8a.png"></div><br><ul><li>  Cinemachine / Gizmos: O Unity Cinemachine √© adicionado apenas para implementar uma c√¢mera f√°cil de usar seguindo o player. </li><li>  Paletas: nesta pasta, armazenaremos nossas pr√≥prias paletas de blocos. </li><li>  Pr√©-fabricados: algumas pr√©-fabricadas que usamos mais tarde no jogo. </li><li>  Cenas: aqui vamos abrir e salvar cenas. </li><li>  Scripts: alguns scripts simples para controlar o movimento do jogador, a l√≥gica da colis√£o de armadilhas e ganhar / perder no jogo.  Essa pasta tamb√©m cont√©m scripts do Unity Tilemap do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio do Unity 2D Extras Github</a> , que usaremos mais tarde. </li><li>  Sfx: sons para o jogo. </li><li>  Sprites: sprites 2D a partir dos quais criaremos paletas de azulejos.  Eles s√£o retirados de um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacote de cavernas e masmorras para roguelike</a> .  O autor do pacote √© kenney.nl. </li></ul><br><h2>  Cria√ß√£o de jogos </h2><br>  Abra a cena do <em>jogo</em> na pasta <em>Cenas</em> . <br><br>  Clique no bot√£o <em>Play</em> no editor para iniciar o jogo.  Na janela do <em>jogo</em> , mova o her√≥i com as teclas WASD ou as "setas". <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20e/1a1/8a8/20e1a18a8e44d9eeef984cb19e43527e.gif"></div></div></div><br>  Enquanto o her√≥i vagueia pelo fundo aparentemente intermin√°vel da c√¢mera com a cor # 00000, perdida no vazio. <br><br>  Para consertar isso, precisamos de ferramentas de blocos 2D para criar n√≠veis interessantes e mec√¢nica de jogo. <br><br><h3>  Conhecendo a paleta de azulejos </h3><br>  No editor, clique em <em>Janela -&gt; Paleta de Ladrilhos</em> para abrir a janela Paleta de Ladrilhos 2D. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9c/4c4/681/e9c4c46814518dadf262f42ceab70563.png"></div><br>  Essa janela ser√° sua melhor amiga quando estiver trabalhando em jogos de pe√ßas no Unity. <br><br><ol><li>  Esta s√©rie de √≠cones fornece ferramentas b√°sicas para manipula√ß√£o de blocos, desenho e exclus√£o </li><li>  Este seletor permite criar diferentes paletas que podem ser percebidas como paletas para desenho, nas quais colocamos as "cores" e, neste caso, os ladrilhos. </li><li>  Esse seletor permite criar pinc√©is com comportamentos diferentes.  Voc√™ pode adicionar seus pr√≥prios pinc√©is, cujo comportamento √© diferente do pincel padr√£o (por exemplo, desenhando blocos pr√©-fabricados com funcionalidade adicional) </li></ol><br>  Clique em <em>Criar nova paleta</em> e nomeie a paleta <em>RoguelikeCave</em> .  N√£o altere as op√ß√µes de grade e c√©lula. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab3/a35/339/ab3a35339e71da7a385d6c778abd4f7d.png"></div><br>  Clique em <em>Criar</em> e escolha salvar a nova paleta na <em>pasta Assets \ Palettes do</em> projeto.  Nele, crie uma nova pasta <em>RoguelikeCave</em> . <br><br>  Agora a estrutura de pastas do seu projeto deve ficar assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/362/087/33a/36208733a60c0a788173c9cb199a1423.png"></div><br>  Na janela do editor da <em>paleta lado a lado</em> , <em>RoguelikeCave</em> deve ser selecionado;  neste ponto, ainda n√£o temos nenhum bloco: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/0f3/e89/9f80f3e894a6a3d64c3f9951b03046e5.png"></div><br>  Como um artista pode criar suas obras-primas se n√£o tem materiais? <br><br>  Sem fechar a janela Paleta de pe√ßas, selecione a pasta do projeto <em>Sprites / roguelike-cave-pack</em> e expanda o recurso <em>roguelikeDungeon transparent.png</em> .  Em seguida, selecione todos os sprites nesta folha de sprite: selecione o primeiro sprite, mantenha pressionada a tecla Shift e selecione o √∫ltimo sprite. <br><br>  Arraste todos os sprites selecionados para a janela Tile Palette RoguelikeCave: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/d5b/aae/055d5baae6a8c222f66f0fec36824e05.gif"></div></div></div><br>  Arraste e solte os sprites na janela Paleta de pe√ßas e selecione um local para armazenar ativos no Unity. <br><br>  Crie uma nova pasta <em>Tiles</em> em <em>Assets / Palettes / RoguelikeCave</em> e selecione esta pasta como o local de armazenamento: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16f/609/327/16f6093279a3a3b3c5c728ebdcd07afd.png"></div><br>  O Unity gerar√° um recurso de bloco para cada sprite adicionado a partir da folha de sprite.  Aguarde a conclus√£o do processo, aumente o tamanho da janela Paleta de azulejos e admire as linhas pares de belos novos azulejos localizados na paleta RoguelikeCave: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27d/c87/f36/27dc87f368115a032b42d4b8058bdd1d.png"></div><br>  Repita o processo acima para criar uma paleta de blocos usando a janela <em>Paleta de</em> blocos, mas desta vez nomeie a nova paleta <em>RoguelikeCustom</em> . <br><br>  Coloque a nova paleta em uma nova pasta.  Nomeie a pasta <em>RoguelikeCustom</em> e mova-a para a <em>pasta Assets / Palettes do</em> projeto. <br><br>  Dessa vez, usando o processo descrito acima, use os sprites da <em>folha Assets / Sprites / roguelike-custom / roguelike-normal-cutdown-sheet.png</em> para preencher os blocos da nova paleta.  Crie uma pasta <em>Tiles</em> dentro da pasta da paleta <em>RoguelikeCustom</em> e mova os ativos de tile para l√°: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/402/c0d/fb6/402c0dfb6ca659f755ba63cafa6c288b.png"></div><br>  Alegre-se, agora voc√™ sabe a m√°gica de criar uma paleta de azulejos! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/782/ed3/b0f/782ed3b0f5bc2546c2116c07f9652f7f.png"></div><br><h3>  Tile Map Mesh </h3><br>  Abra o menu <em>GameObject</em> na parte superior do editor do Unity (ou a barra de menus do Unity, se voc√™ estiver usando o MacOS), clique em <em>Objeto 2D</em> e, em seguida, <em>Tilemap</em> para criar uma nova grade do Tilemap: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/99d/e4e/25999de4efb34557bac40669f988fcdd.png"></div><br>  Voc√™ deve ver que uma nova GameObject <em>Grid foi</em> adicionada √† hierarquia da cena.  Expanda-o e selecione o <em>mapa de blocos GameObject interno</em> . <br><br>  <em>Pense</em> neste <em>Tilemap</em> como uma camada (talvez uma de muitas) no seu jogo.  Voc√™ pode adicionar novos objetos para criar camadas adicionais do Tilemap. <br><br>  No inspetor, voc√™ ver√° dois componentes que o Unity adicionou automaticamente a este GameObject: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a0/f58/3fa/1a0f583faa33dfc44002dde103c8d97e.png"></div><br><ul><li> O componente <code>Tilemap</code> usado pelo mecanismo do Unity para armazenar sprites no circuito marcado com o componente <code>Grid</code> - no nosso caso, esse √© o GameObject <em>Grid</em> .  Quando voc√™ cria o Tilemap pela primeira vez, n√£o precisa se preocupar com todos os recursos t√©cnicos de como o Unity se comunica entre todos esses componentes. </li><li>  <code>Tilemap Renderer</code> designa o material que ser√° usado para renderizar blocos no Tilemap.  Tamb√©m permite configurar as propriedades de classifica√ß√£o dessa camada do Tilemap. </li></ul><br>  Renomeie o <em>GameObject Tilemap</em> para <em>BaseLayer</em> . <br><br><h3>  Usando v√°rias ferramentas de desenho da paleta de blocos </h3><br>  Alterne o editor para o modo Cena. <br><br>  Sem fechar a Paleta de pe√ßas, selecione a paleta RoguelikeCave e selecione a ferramenta <em>Pincel</em> (ou pressione <em>B</em> ).  Selecione um ladrilho de areia como mostrado abaixo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcd/44c/cb4/dcd44ccb47904a96bcae52075ea37e3e.png"></div><br>  Na janela Cena, mova o cursor para a grade ao lado do player.  A escova de ladrilhos de areia se encaixa na grade. <br><br>  Mantendo pressionado o bot√£o esquerdo do mouse, desenhe uma √°rea retangular ao redor do player.  Ele ser√° desenhado na camada Tilemap BaseLayer: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c5/6d6/068/3c56d606885a624960d5ed83106893dd.gif"></div></div></div><br>  Desenhar grandes √°reas pode ser uma tarefa mon√≥tona; portanto, h√° um pincel <em>Filled Box</em> que pode ser usado para pintar grandes √°reas.  Na janela Paleta de pe√ßas, clique no <em>√≠cone de pincel quadrado</em> (ou pressione <em>U</em> ). <br><br>  Volte ao editor e desenhe um ret√¢ngulo ainda maior ao redor do player, mantendo pressionado o bot√£o esquerdo do mouse, arrastando o cursor do canto superior esquerdo para o canto inferior direito: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85d/f5f/35c/85df5f35c7f37f325e814568d970553f.gif"></div></div></div><br>  Embora tenhamos adicionado um pouco de cor ao jogo, esta masmorra de areia parece sem gra√ßa.  √â hora de adicionar alguns detalhes! <br><br>  Use a op√ß√£o de menu <em>GameObject -&gt; 2D Object -&gt; Tilemap</em> para criar uma nova camada de Tilemap.  Desta vez, ser√° o √∫nico objeto criado na hierarquia, porque j√° temos uma grade adequada.  Renomeie esta camada para <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/074/4a8/b33/0744a8b330652fe6f4ba7b3939d987ec.png"></div><br>  Na janela Tile Palette, alterne o <em>Active Tilemap</em> para a camada <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/272/dc3/87c/272dc387cdf5f84261eebf6da3dde2a9.png"></div><br>  Selecione a ferramenta <em>Pincel</em> ( <em>B</em> ) e desenhe os objetos espalhados no mapa na janela Cena: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbb/4dd/f6b/bbb4ddf6b3f5ba0393f5a6d3d04254eb.png"></div><br>  Desabilite e reative o <em>DungeonFloorDecoration</em> na hierarquia <em>GameObject</em> para ver como a renderiza√ß√£o no Tilemap ativo altera a camada DungeonFloorDecoration e todos os blocos renderizados caem nessa nova camada: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe3/416/3a0/fe34163a070ac1c85f8d0aee80356a90.gif"></div></div></div><br>  Crie uma nova camada Tilemap usando a <em>op√ß√£o GameObject -&gt; Objeto 2D -&gt; Tilemap novamente</em> .  Chame de <em>colid√≠vel</em> .  No futuro, us√°-lo para criar paredes e bordas. <br><br>  Alterne o Mapa de mosaico ativo na janela Paleta de <em>mosaicos</em> para <em>Colid√≠vel</em> .  Selecione a ferramenta Pincel ( <em>B</em> ) e desenhe os seguintes blocos para construir uma parede ao redor da √°rea de jogo.  As √°reas destacadas em vermelho na imagem abaixo s√£o as novas pe√ßas que precisam ser adicionadas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f0/7e3/004/3f07e30041691b855a4d1870d69f2e34.png"></div><br>  D√™ uma olhada na captura de tela abaixo da janela Paleta de pe√ßas para descobrir onde encontrar as pe√ßas necess√°rias para construir a parede.  N√£o esque√ßa que voc√™ pode usar as combina√ß√µes CTRL-Z ou CMD-Z para desfazer a a√ß√£o ou apagar erros usando o pincel atual (enquanto mant√©m <em>pressionada a</em> tecla <em>Shift</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  Inicie o jogo no editor e tente atravessar a parede: <br><br><div class="spoiler">  <b class="spoiler_title">Quem ativou o modo noclip?</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49d/6fb/e88/49d6fbe88e6368ae9d9d47caa6ed2ece.gif"></div></div></div><br>  Voc√™ n√£o esperava isso? <br><br>  O problema √© que acabamos de desenhar os ladrilhos padr√£o e ainda n√£o aplicamos a unidade f√≠sica m√°gica na camada Tilemap. <br><br>  Selecione <em>GameObject Collideable</em> e adicione um novo componente clicando no bot√£o <em>Add Component</em> na janela <em>Inspector</em> ;  No campo de pesquisa, digite <em>Tilemap Collider 2D</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15e/7ec/614/15e7ec614a110e3de5020f7b5f6a2d4d.png"></div><br>  Este componente foi criado especificamente para jogos de blocos 2D do Unity.  Simplesmente aplica a forma do colisor f√≠sico a todos os blocos na camada √† qual foi adicionado, sem fazer nenhum outro trabalho. <br><br>  Comece o jogo novamente e tente atravessar a parede.  Acesso negado! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/8f1/a3a/2b28f1a3a2f60422649719e084a9fd08.gif"></div></div></div><br><blockquote>  <em>Nota:</em> √†s vezes, ao mover a c√¢mera, voc√™ pode notar pequenas linhas pretas entre alguns ladrilhos.  Parece ser um problema de movimento da c√¢mera em projetos com o sistema 2D Tilemap Unity.  Voc√™ pode se livrar completamente dele desabilitando o Anti-Aliasing nas configura√ß√µes gr√°ficas.  No entanto, mesmo que isso seja feito no projeto de compras, o efeito ainda √© um pouco percept√≠vel.  A solu√ß√£o para esse problema pode ser adicionar seu pr√≥prio script de movimento da c√¢mera com deslocamento de pixel.  Uma boa discuss√£o sobre esse problema pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </blockquote><br>  As colis√µes funcionam bem, e voc√™ pode pensar que isso √© suficiente.  Mas, por enquanto, os coletores n√£o s√£o otimizados com efici√™ncia.  No modo Cena, aumente o zoom em uma parte da parede e observe os contornos dos coletores: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ea/3f8/af3/4ea3f8af32c2e23852a146578a7f9f49.png"></div><br>  H√° um colisor ao redor de cada bloco.  As se√ß√µes da parede do meio n√£o precisam desses dispositivos adicionais. <br><br>  Com <em>GameObject Collideable selecionado</em> , adicione o componente <em>2D Composite Collider</em> a ele.  Isso tamb√©m adicionar√° automaticamente o RigidBody2D. <br><br>  Defina o par√¢metro BodyType RigidBody2D como <em>Est√°tico</em> e marque a caixa de sele√ß√£o <em>Usado por composto</em> no componente <em>2D</em> do <em>Tilemap Collider</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ca/12b/9e0/2ca12b9e01baa5b477288bc06cf546cf.png"></div><br>  Depois disso, voc√™ notar√° que esses coletores quadrados desnecess√°rios no meio das paredes desaparecem. <br><br>  Termine de criar as paredes, construindo-as e fechando na parte superior, com cerca de 16 pe√ßas de altura.  N√£o esque√ßa  que o Collideable deve ser selecionado como o Mapa de mosaico ativo da <em>janela</em> Paleta de mosaicos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e6/33f/81d/7e633f81d090fd304dcee26abb4cf760.png"></div><br>  A se√ß√£o de masmorra n√£o ter√° nenhuma dificuldade para o nosso her√≥i sem obst√°culos.  Agora come√ßaremos a trabalhar na cria√ß√£o da sala da morte, complementada por belos corredores de m√°rmore antigos.  Depois de superar todos esses obst√°culos, o jogador receber√° uma recompensa - uma montanha de ouro. <br><br>  Para desenhar esses corredores, usaremos o pincel especial <em>Tile Rule Tile</em> .  Como voc√™ viu no in√≠cio do tutorial, scripts de bloco adicionais do reposit√≥rio do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Unity 2D Extras</a> Github j√° foram adicionados ao projeto.  Um deles √© o Rule Tile. <br><br>  O Tile Rule permite definir regras sobre quais blocos desenhar, dependendo dos blocos vizinhos que temos. <br><br>  Clique com o bot√£o direito do mouse na pasta <em>Prefabs</em> do projeto e selecione <em>Criar -&gt;</em> <em>Bloco</em> de <em>Regras</em> (este item deve estar na parte superior do menu).  Nomeie o novo elemento <em>MarbleFloorRuleTile</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/702/42b/66c/70242b66c05805fb9a147521da24aa89.png"></div><br>  Selecione esse novo <em>MarbleFloorRuleTile</em> e use o inspetor para definir o <em>Sprite padr√£o</em> como <code>roguelikeDungeon_transparent_335</code> .  Em seguida, adicione uma nova regra de regra de mosaico clicando no √≠cone <em>+</em> .  Selecione o valor de <code>roguelikeDungeon_transparent_339</code> para <em>Sprite</em> desta regra e clique em todos os quadrados externos no esquema de regras para que cada um tenha uma seta verde apontando para fora: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/546/707/124/546707124181cac98c682dfadeb56491.gif"></div></div></div><br>  Usando a ferramenta Pincel de preenchimento da caixa ( <em>B</em> ) na Paleta de azulejos e selecionando o Basemap da <em>Tilemap</em> , desenhe uma se√ß√£o reta da parede de m√°rmore.  √â necess√°rio que cubra todo o espa√ßo livre do piso. <br><br>  Voc√™ pode perceber que, quando fizermos isso, a camada fechar√° os revestimentos com coletores, porque a ordem das camadas ainda n√£o foi definida.  Isso pode ser facilmente corrigido selecionando <em>GameObject Collideable</em> e alterando a <em>ordem na camada</em> do componente <em>Tilemap Renderer</em> para um valor mais alto ( <em>5</em> ser√° suficiente): <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/314/631/467/314631467ec638cad00a0082fae58113.gif"></div></div></div><br>  Volte para a pasta <em>Prefabs</em> do projeto, abra a janela Tile e selecione a paleta RoguelikeCave e arraste <em>MarbleFloorRuleTile</em> para um espa√ßo vazio na paleta: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de3/c7b/15b/de3c7b15b5b9e8531b15824c196d480d.gif"></div></div></div><br>  Use o pincel de preenchimento da caixa e desenhe algumas se√ß√µes do piso de m√°rmore da sala: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/092/120/1ff/0921201ff5eb1be81f34bfebff121079.gif"></div></div></div><br>  Observe que um bloco de regras personalizado, completamente cercado de todos os √¢ngulos e faces, se torna um bloco decorado (o sprite selecionado no editor de regras de bloco). <br><br><h3>  Isso √© uma armadilha! </h3><br>  N√£o, n√£o adicionaremos o almirante Akbar ao jogo como personagem.  Criaremos um pincel de ladrilhos para a pr√©-fabricada da armadilha, que usaremos para desenhar armadilhas que atiram com l√¢minas rotativas! <br><br>  Crie um novo GameObject vazio na hierarquia e chame-o de <em>ShootingTrap</em> .  Crie um filho GameObject vazio no ShootingTrap.  Nomeie-o <em>Sprite</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66e/754/55e/66e75455eda0bbdb02033ebc5cff618f.png"></div><br>  Selecione <em>Sprite</em> e adicione o componente <em>Sprite Renderer</em> a ele.  Defina a <em>Camada de classifica√ß√£o</em> como <em>Player</em> e a <em>Ordem na camada</em> como <em>1,</em> para que seja renderizada em cima do restante das camadas.  Selecione o campo <em>Sprite</em> e defina <em>roguelikeDungeon_transparent_180</em> como o sprite. <br><br>  Agora gire o objeto Transform of <em>Sprite</em> em <em>-90</em> no eixo <em>Z</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/540/666/ded/540666ded98bc99613b7dd5d6c7beeb7.png"></div><br>  Em seguida, volte ao GameObject <em>ShootingTrap</em> e adicione um novo componente usando o inspetor.  No campo de pesquisa, localize <em>Shooting Trap</em> e anexe este script. <br><br>  Este script √© adicionado aos arquivos do projeto que voc√™ baixou;  de fato, ele lan√ßa corutin a cada dois segundos, criando uma inst√¢ncia pr√©-fabricada da l√¢mina de serra rotativa (ou qualquer outra pr√©-fabricada) na posi√ß√£o atual da armadilha. <br><br>  Defina o <em>item como Shoot Prefab</em> par√¢metro do componente Shooting Trap como <em>Projectile</em> (a pr√©-fabricada est√° localizada em <em>/ Assets / Prefabs</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a59/614/6dc/a596146dc4ec7d91eb3f17e9976f5945.png"></div><br>  Inicie o jogo novamente no editor e use o modo Cena para encontrar a armadilha.  Ela trabalha! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef0/771/5ae/ef07715aed64732a12386defeec1b1cb.gif"></div></div></div><br>  Arraste uma c√≥pia do <em>ShootingTrap</em> da hierarquia para a <em>pasta / Assets / Prefabs do</em> projeto para criar uma pr√©-fabricada.  Remova ShootingTrap da hierarquia. <br><br>  Usamos outro script de pincel de bloco chamado <em>PrefabBrush</em> para criar um pincel que pode desenhar prefabs nas camadas Tilemap. <br><br>  Clique com o bot√£o direito do mouse na <em>pasta / Assets / Prefabs do</em> projeto e selecione <em>Create -&gt; Prefab Brush</em> .  Nome do objeto <em>PrefabBrush</em> . <br><br>  Use o inspetor para definir o par√¢metro Prefabs <em>Size</em> PrefabBrush como <em>1</em> e o <em>elemento 0</em> para <em>ShootingTrap</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/58e/0df/c8458e0df00c239708a275d5c17fd25b.png"></div><br>  Crie uma nova camada Tilemap chamada <em>Traps</em> na <em>Grade</em> e abra a janela Paleta de azulejos. <br><br>  Selecione o pincel de ladrilhos comum ( <em>B</em> ) e use o menu suspenso na parte inferior da janela Paleta de ladrilhos para selecionar <em>PrefabBrush</em> .  Selecione <em>Armadilhas</em> ativas de mapa de mosaico como camada e use a janela Cena para desenhar v√°rias armadilhas pr√©-fabricadas ao longo da borda esquerda da sala. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce1/f3a/3b6/ce1f3a3b6fbea97b23f8a388404772e8.gif"></div></div></div><br>  Expanda as <em>armadilhas</em> GameObject na hierarquia e experimente o valor <em>Atraso</em> no in√≠cio da <em>grava√ß√£o</em> para cada valor em cada Gameobject <em>ShootingTrap</em> usando o script Shooting Trap no inspetor.  Adicione 0,25 ao valor de cada armadilha, ou seja: <br><br><ul><li>  Primeiro tiro -&gt; Atraso no in√≠cio da filmagem = 0.1 </li><li>  Segundo tiro -&gt; Atraso no in√≠cio do disparo = 0,35 </li><li>  Terceiro tiro -&gt; Atraso no in√≠cio do disparo = 0,6 </li><li>  E assim por diante ... </li></ul><br>  Inicie o jogo e passe no teste, se tiver coragem. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/809/ea5/02b809ea5ea2b177b3da6d537a447794.gif"></div></div></div><br><h3>  Objetivo final </h3><br>  O objetivo deste mini calabou√ßo √© conseguir uma pilha de ouro.  Fama e fortuna aguardam aqueles que a alcan√ßam, evitando l√¢minas voadoras mortais. <br><br>  Crie uma nova camada Tilemap chamada <em>Objetivo</em> na GameObject <em>Grid</em> .  Selecione <em>Objetivo</em> e altere o valor da ordem do <em>renderizador</em> de <em>mosaico na camada</em> para <em>2</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ece/7bf/f1f/ece7bff1f2eec46dab6974ec9293d8e8.png"></div><br>  Sem fechar a janela Paleta de pe√ßas, verifique se o PrefabBrush ainda est√° selecionado.  Fa√ßa o <em>elemento 0 se</em> referir √† <em>predefini√ß√£o de</em> <em>meta</em> da <em>pasta / Assets / Prefabs do</em> projeto. <br><br>  Esta √© uma casa pr√©-fabricada com uma montanha de sprites de ouro, com o Box Collider 2D com o Is Trigger ativado, uma fonte de som adicional e um script <code>Goal.cs</code> simples que reproduz o som de atingir o alvo e reinicia o n√≠vel quando o jogador cai na √°rea do gatilho. <br><br>  Use o pincel de ladrilhos padr√£o para desenhar um ladrilho pr√©-fabricado alvo na parte superior da sala, atr√°s das armadilhas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/970/1c0/ee49701c003075b4bb2a048b6d2e8039.png"></div><br>  Comece o jogo novamente e tente alcan√ßar a meta.  Quando voc√™ chegar a esse bloco, a l√≥gica <code>OnTriggerEnter2D()</code> do <code>Goal.cs</code> , reproduzindo o efeito sonoro e reiniciando o n√≠vel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c1/736/d0e/2c1736d0e9eb131101cef9c7ee08a18d.png"></div><br><h3>  Toques finais </h3><br>  Agora a masmorra est√° muito clara e livre.  Podemos adicionar estilo alternando para um material de sprite 2D que possa responder √† luz. <br><br>  Selecione os objetos Sprite Player, Goal e ShootingTrap e fa√ßa com que o <em>Material do</em> <em>renderizador</em> Sprite use <em>SpriteLightingMaterial</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e8/7ce/36a/9e87ce36a51b69b514f71cf71992f4b5.png"></div><br>  Este √© um material com um sombreador <em>Sprite / Difuso</em> conectado a ele.  Permite que a ilumina√ß√£o da cena afete os sprites. <br><br>  No GameObject <em>Grid,</em> selecione os <em>objetos BaseLayer, DungeonFloorDecoration, Collideable e Goal</em> e use o inspetor para usar o <em>Renderer Material</em> <em>SpriteLightingMaterial tamb√©m</em> no material <em>Tilemap</em> . <br><br>  Em seguida, selecione <em>Luz direcional</em> no GameObject <em>Lights</em> e reduza a <em>intensidade da</em> luz para <em>0,3</em> . <br><br>  Muito melhor! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fe/cb2/4ed/6fecb24ed773ea4b843e2ee32d3be164.png"></div><br>  Al√©m disso, agora voc√™ notar√° que o jogador carrega uma <em>luz pontual</em> , ou seja, <em>lanterna</em> brilhando ao seu redor. <br><br>  Agora que os sprites da cena usam o material certo, a ilumina√ß√£o do Unity afeta todos os sprites ao redor. <br><br>  Arraste duas c√≥pias da <em>prefab</em> FlickerLight da <em>pasta / Assets / Prefabs do</em> projeto em Scene e coloque-as no GameObject <em>Lights</em> . <br><br>  Defina a primeira posi√ß√£o pr√©-fabricada <em>(X: -11,25, Y: 4, Z: -1,35)</em> e a segunda - <em>(X: 2,75, Y: 4, Z: -1,35)</em> . <br><br>  Crie uma nova camada de Tilemap chamada <em>WallsAndObjects</em> e defina a <em>Ordem</em> do <em>renderizador de Tilemap no</em> inspetor <em>Layer</em> como <em>15</em> .  Lembre-se de que o <em>Material</em> tamb√©m usa <em>SpriteLightingMaterial</em> . <br><br>  Alterne o pincel da paleta de lado a lado novamente para o <em>Pincel padr√£o</em> e o <em>Mapa</em> de <em>lado ativo</em> para <em>WallsAndObjects</em> . <br><br>  Use a ferramenta Pincel ( <em>B</em> ) para desenhar duas pe√ßas de ‚Äúl√¢mpada de luz‚Äù sob cada um dos novos FlickerLight que colocamos nos cantos da √°rea inicial: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a8/2ae/b82/6a82aeb824326ec78184559b0986ef78.png"></div><br><h3>  Tempo de dificuldade </h3><br>  Vamos ver se podemos melhorar a masmorra ainda mais.  Use a camada Tilemap <em>WallsAndObjects</em> para criar estantes de livros na parte superior da sala de masmorra usando outra paleta de <em>blocos</em> chamada <em>RoguelikeCustom</em> .  Tamb√©m desenhe uma ou duas partes da parede rachada. <br><br>  Volte para a camada Tilemap <em>DungeonFloorDecoration</em> e adicione mais alguns detalhes ao piso de m√°rmore, por exemplo, rachaduras em v√°rios ladrilhos: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/611/5d7/f2a/6115d7f2a96969a47b9c262dd215623b.gif"></div></div></div><br>  Parab√©ns, voc√™ completou seu primeiro n√≠vel de mini dungeon!  Como resultado, voc√™ deve obter algo semelhante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f1b/190/063/f1b1900633e1a0fdad59453a238c5a17.png"></div><br><h2>  Para onde ir a seguir? </h2><br>  Se voc√™ perdeu uma etapa, pode ver o resultado final deste tutorial abrindo o projeto <em>final</em> do Unity <em>Rayzor a</em> partir de <a href="">materiais para</a> download. <br><br>  Aprendemos muito neste tutorial, mas como em qualquer outro neg√≥cio, sempre h√° algo mais! <br><br>  Existem scripts interessantes de pincel lado a lado n√£o abordados neste tutorial.  Leia sobre eles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e pense se voc√™ pode us√°-los. <br><br>  Voc√™ tamb√©m pode aprender como criar blocos animados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt412765/">https://habr.com/ru/post/pt412765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt412753/index.html">Inicie a exibi√ß√£o no STM32 via LTDC ... nos registros</a></li>
<li><a href="../pt412755/index.html">O Telegram lan√ßou o servidor MTProto Proxy oficial</a></li>
<li><a href="../pt412757/index.html">L√¢mpadas LED no Jap√£o</a></li>
<li><a href="../pt412759/index.html">Novo servidor proxy MTProto-proxy do Telegram</a></li>
<li><a href="../pt412763/index.html">Usando a placa de recarga Firefly-RK3288 com o SoC RockChip RK3288 Sensor t√©rmico digital Microchip I2C - MCP9808</a></li>
<li><a href="../pt412767/index.html">Revis√£o da confer√™ncia de impacto CMG 2016</a></li>
<li><a href="../pt412769/index.html">Eu fiz o PWA e o coloquei em tr√™s lojas de aplicativos. E aqui est√° o que eu descobri</a></li>
<li><a href="../pt412773/index.html">Astro-aeroespacial de Minsk</a></li>
<li><a href="../pt412775/index.html">Experi√™ncia pessoal: passando do desenvolvimento C de baixo n√≠vel para a programa√ß√£o Java</a></li>
<li><a href="../pt412777/index.html">Obras-primas da constru√ß√£o da coluna mundial: QUAD 11L - as melhores ‚Äúprateleiras‚Äù dos dois mil√©simos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>