<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍⚕️ 😚 👨🏿‍🚀 Dagaz: épisodes (partie 1) 👆🏽 👩‍🎤 🧟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous avons secoué vos filtres mentaux et le résultat a été une réponse. La méthode a fonctionné, elle sera toujours efficace. Il suffit de se débarras...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dagaz: épisodes (partie 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459456/"><img align="left" src="https://habrastorage.org/webt/4i/sc/k4/4isck4toxbws20hsk3nrqghdkoy.png">  <b><i>Nous avons secoué vos filtres mentaux et le résultat a été une réponse.</i></b>  <b><i>La méthode a fonctionné, elle sera toujours efficace.</i></b>  <b><i>Il suffit de se débarrasser du fardeau supplémentaire des préjugés ...</i></b> <b><i><br><br></i></b>  <b><i>Raymond Jones " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Niveau de bruit</a> "</i></b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dagaz</a> n'est pas apparu de toutes pièces.  J'ai toujours aimé les jeux de société et les puzzles, et je fais de la programmation autant que je me souvienne, mais l'idée d'un certain moteur «universel» n'aurait tout simplement pas pu me traverser l'esprit.  J'étais sceptique quant à cette idée.  Jusqu'à ce que je voie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Zillions</a> .  Malheureusement, le produit, à cette époque, ne se développait plus, le code source n'était pas disponible et, en effet, le programme ne fonctionnait que sous Windows.  Après un certain temps, j'ai décidé de me lancer dans un projet ouvert. <br><a name="habracut"></a><br>  Comme je l'ai déjà dit, je n'avais pas de code source, mais j'ai un peu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">touché</a> Zillions et j'ai pris son idée principale - la réutilisation maximale du code d'application, qui permet d'utiliser les mêmes constructions dans différentes, qui sembleraient complètement différentes les unes des autres cas.  Il s'agissait du bon cas d'utilisation.  Et j'ai fait un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plan</a> . <br><br><h2>  Dames </h2><br>  Cette famille de jeux importante mais extrêmement sous-estimée a posé la première pierre du projet.  Tous les jeux de "dames" sont similaires les uns aux autres et ne diffèrent que par les détails.  En termes de conception de jeux, ils sont tous unis par trois idées principales: <br><br><ul><li>  Par chèque </li><li>  Prise prioritaire </li><li>  Mouvement composé </li></ul><br>  Le premier paragraphe ne soulève pas de questions particulières, mais si le développement est axé sur les parties d'échecs, cela peut surprendre.  Pas dans tous les jeux, la capture a lieu sur le même terrain où la pièce complète le mouvement.  Avec les mouvements prioritaires, les choses sont un peu plus intéressantes.  Dans les dames, cette règle vous permet de construire un jeu combinatoire complexe, attirant l'ennemi dans des pièges fonctionnant sur le principe de «donner moins - ramasser plus». <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zMpxcNG2UDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Bien sûr, le mécanisme des mouvements prioritaires a été implémenté dans Zillions (et a migré de là vers Dagaz).  Sans cela, presque tous les jeux de dames (certainement inclus dans le "gentleman's set" de jeux de société obligatoires pour la mise en œuvre) ne pourraient tout simplement pas fonctionner correctement.  Tout est dans les détails.  Voyons comment ce mécanisme a été implémenté: <br><br><div class="spoiler">  <b class="spoiler_title">En zillions</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">move-priorities</span></span> jump-type normal-type) ... (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) <span class="hljs-comment"><span class="hljs-comment">;        add ;   )) (define checker-jump ( $1 (verify enemy?) ;         capture ;   ( capture  -   ) $1 (verify empty?) ;           add ;   )) ... (piece (name Man) (image White "images/stapeldammen/white.bmp" Red "images/stapeldammen/red.bmp") (moves (move-type jump-type) (checker-jump nw) (checker-jump ne) (checker-jump sw) (checker-jump se) (move-type normal-type) (checker-shift nw) (checker-shift ne) ) )</span></span></code> </pre> </div></div><br>  Ceci est une description presque complète du jeu de vérification le plus simple.  Le concept de modes de déplacement ( <b>type de déplacement</b> ) est introduit dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ZRF</a> , et la <b>construction des priorités de déplacement nous</b> permet de dire que s'il y a des déplacements de priorité plus élevée (prises), moins de priorité (mouvements silencieux) ne devrait pas être considérée.  Les niveaux de priorité peuvent être définis et plus de deux, à cet égard, la conception est assez universelle, mais en travaillant sur les jeux dans Dagaz, je suis tombé sur certaines limites de ce mécanisme. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/y6/6-/7r/y66-7rt1ejot9yb-ppoq-wmk98u.png"></a> </div><br>  Dans ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> , inventé par Solomon Golomb, en plus des dames, il y a aussi des pièces d'échecs.  La difficulté réside dans le fait que la prise, tout en restant une priorité pour les pions, n'est pas telle pour les pièces d'échecs (sinon il serait trop facile de les piéger et de les manger).  Une priorisation naïve utilisant le mot <b>-</b> clé <b>move-priorités</b> ne fonctionnera pas dans ce jeu. <br><br>  En fait, si les pièces d'échecs ne sont pas incluses dans les coups prioritaires, s'il y a la possibilité de prendre à la fois une pièce de damier et une pièce d'échecs, nous ne pourrons pas jouer une pièce d'échecs, car une capture de chèque est une priorité.  Si les mouvements d'échecs sont considérés comme tout aussi prioritaires, nous serons obligés de prendre des pièces d'échecs chaque fois que l'occasion se présentera.  Les deux contredisent les règles du jeu. <br><br>  Dans Zillions, ce problème n'est pratiquement pas résolu.  Et c'est la principale raison pour laquelle j'ai pensé à introduire un mécanisme d'extension JavaScript dans Dagaz.  L'idée, en soi, est assez simple: comme certaines mécaniques de jeu sont assez difficiles à exprimer en ZRF, pourquoi ne pas introduire la phase de post-traitement des mouvements?  Le module d'extension, dans ce cas, analyse l'intégralité de la liste des mouvements générés et peut prendre des décisions sur le rejet de certains mouvements.  Voici à quoi cela <a href="">ressemble</a> pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shashmat</a> : <br><br><div class="spoiler">  <b class="spoiler_title">Code simple et compact</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> CheckInvariants = Dagaz.Model.CheckInvariants; Dagaz.Model.CheckInvariants = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> design = Dagaz.Model.design; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> types = []; types.push(design.getPieceType(<span class="hljs-string"><span class="hljs-string">"Bishop"</span></span>)); types.push(design.getPieceType(<span class="hljs-string"><span class="hljs-string">"Camel"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isPriority = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; _.each(board.moves, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">move</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCapturing(board, move)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_.indexOf(types, getType(board, move)) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) isPriority = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPriority) { _.each(board.moves, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">move</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isCapturing(board, move)) { move.failed = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }); } CheckInvariants(board); }</code> </pre></div></div><br>  À l'avenir, l'idée d'extensions s'est développée et s'est épanouie avec une couleur magnifique.  J'ai obtenu un mécanisme pratique et puissant pour coder de nombreux jeux dont la mise en œuvre sur du ZRF pur serait extrêmement problématique, mais cela signifie-t-il que la priorisation dans le style ZRF est obsolète?  Bien sûr que non!  Tout d'abord, écrire une ligne en ZRF est plus facile que cinquante en JavaScript, mais plus important encore, les priorités de style ZRF «dures» fonctionnent de telle manière que les mouvements de faible priorité ne sont même pas générés!  C'est important en termes de performances.  Générer des déménagements à Dagaz est une opération très coûteuse. <br><br><div class="spoiler">  <b class="spoiler_title">Un autre jeu avec des priorités difficiles</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_w/zj/lj/_wzjljuhqpa3qmnfnousdrlkxhq.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dablot</a> est un jeu quelque peu similaire aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">brouillons italiens</a> , mais plus ancien.  En plus des personnages ordinaires, il y a des «princes» et des «rois», et les plus jeunes n'ont pas le droit de battre les anciens.  Mais ce n'est pas la difficulté.  Pour les rois (et dans certaines variétés du jeu pour les princes aussi), la capture est facultative!  Ici, le même problème se pose qu'avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shashmat</a> .  Si nous déclarons que le roi est une priorité, nous violons gravement les règles du jeu, sinon, nous ne pourrons pas battre le roi avec la possibilité d'une bataille alternative avec une simple figure.  Seul le moteur d'extension Dagaz résout ce problème. <br><br>  Au fait, avec "Italian Drafts", tout n'est pas si simple.  Dans de nombreuses variétés de brouillons, une règle stipule que le joueur est obligé de prendre le maximum de pièces.  Autrement dit, il ne peut pas simplement interrompre la chaîne de captures, mais doit choisir le chemin sur lequel il prendra plus de pièces!  Pour des raisons que j'examinerai ci-dessous, cette règle n'a pas pu être implémentée dans Zillions sous une forme universelle et les développeurs ont été obligés de la coder en dur.  Dans les brouillons italiens, la "règle de la majorité" semble encore plus compliquée: "vous devez battre le plus grand nombre possible de brouillons de l'adversaire, et avec des options de combat égales, vous devez battre le nombre maximal de dames". <br></div></div><br>  Les mouvements composés sont le deuxième élément important des jeux de dames.  Tellement important que le <a href="">test</a> pour la capture correcte dans les " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Brouillons turcs</a> " que je lance périodiquement jusqu'à présent.  À quelques reprises, lorsque j'ai cassé le modèle avec les changements suivants, cela a vraiment aidé. <br><br><div class="spoiler">  <b class="spoiler_title">Déménagements - composite et partiel</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title">Voyons comment les mouvements composites sont implémentés dans ZRF</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> checker-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else add ) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jump-type) ) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) add )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jump-type) ))</code> </pre></div></div><br>  C'est aussi simple que cela.  La commande <b>add-partial</b> indique que le mouvement peut être poursuivi (avec la même pièce, c'est important) s'il y a encore des mouvements avec le mode spécifié.  En d'autres termes: "le chiffre doit continuer à prendre, alors qu'il existe une telle opportunité".  Tout semble aller bien, mais il y a une mise en garde.  Zillions voit chacune de ces prises comme un mouvement «partiel» distinct.  Voyons à quoi cela peut conduire. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pr/ff/mu/prffmuzpuk9wv7gks7do1h6djuq.png"></div><br>  Dans ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> , le nombre de "pas" effectués par une pièce est déterminé par l'icône sur laquelle elle se trouve.  Maintenant, le mouvement de White et Damyo marche (un morceau marqué d'une perle rouge).  Dans Zillions, après avoir effectué deux mouvements partiels, elle peut facilement aller dans le coin supérieur gauche, d'où elle ne peut plus effectuer le dernier mouvement restant (vous ne pouvez pas revenir en arrière).  Il est également interdit de prendre la pièce adverse dans le deuxième coup partiel.  Dans Zillions, il n'y a aucun moyen d'interdire la séquence de mouvements menant à une impasse. <br><br>  Chez Dagaz, c'est différent!  Une séquence de mouvements partiels est <b>toujours</b> assemblée en un mouvement composite complet.  Un mouvement qui ne peut pas être accompli ne se produira tout simplement pas!  Il s'agit d'une approche plus gourmande en ressources et, par conséquent, générer une liste de déplacements dans Dagaz est une opération très coûteuse.  Mais ses avantages sont importants.  Par exemple, le bot reçoit le mouvement composé entier dans son intégralité et ne doit pas regarder vers l'avant, effectuant les mouvements partiels restants. <br><br>  Plus important encore, cette approche offre la possibilité de considérer la liste complète des mouvements conditionnellement acceptables, d'effectuer des vérifications plus complexes et d'interdire certains mouvements en fonction de la présence d'autres.  Par exemple, la «règle de la majorité», que j'ai mentionnée ci-dessus, dans Dagaz est mise en œuvre tout <a href="">simplement</a> .  De plus, pour les "Italian Checkers" aussi.  Les développeurs de Zillions ont "résolu" le problème qu'ils connaissaient pour les jeux de dames en codant en dur l'option " <b>captures maximales</b> ", mais il existe un grand nombre de jeux avec d'autres vérifications complexes, qu'ils n'avaient à l'époque aucune idée! <br></div></div><br>  Dans le processus de travail sur de nouveaux jeux, le concept d'un mouvement composé a également été développé.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fanorona</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pasang ont</a> suggéré une mécanique de jeu intéressante, dans laquelle un groupe de pièces retirées du plateau devrait être sélectionné par le joueur effectuant le mouvement: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/w2/zr/xf/w2zrxfku5fs-aklwv3983gcfk4w.gif"></a> </div><br>  De plus, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fanorona</a> est l'un de ces rares jeux dans lesquels un joueur a le droit d'interrompre la chaîne de captures.  La première capture est obligatoire, la suivante, dans le même mouvement - à la discrétion du joueur.  Dans Dagaz, cette option ( <b>passe-partielle</b> ) est implémentée en déplaçant la figure en place.  Missclick peut être ici, et cela n'est apparemment pas très pratique, mais avec l'introduction du <a href="">gestionnaire de session</a> , les mouvements erronés peuvent maintenant être annulés. <br><br>  Un autre développement du sujet a été les mouvements de "tir".  Je les ai d'abord faites à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hanga Roa</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ko Shogi</a> , mais comme il s'est avéré plus tard, je me suis trompé!  L'implémentation erronée n'a pas fonctionné sous le contrôle des bots (et comme je n'ai toujours pas de bots pour ces deux jeux, il n'est pas surprenant que je n'ai rien remarqué).  Beaucoup plus tard, quand j'ai fait des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amazones</a> , j'ai réussi à localiser le problème et à le résoudre.  Cette idée a atteint son apogée dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> inventé par l'un de nos compatriotes en 1957. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/7z/nv/k8/7znvk8vjkevscqukwkvl7qepw88.png"></a> </div><br>  Il existe un autre problème lié à l'implémentation de mouvements composites à Dagaz.  Le fait est que la liste des mouvements autorisés, à partir d'un état de jeu spécifique, est formée immédiatement - le tout.  Dans Zillions, avec ses mouvements partiels, ce n'est pas très critique, mais à Dagaz, si la pièce a la possibilité de «tourner en place», la phase de génération du mouvement ne sera jamais terminée (il est évident qu'il est impossible de résoudre ce problème avec les extensions, car il est facile de les gérer n'atteint pas).  Voici l'un des jeux pour lesquels cela est important: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/jl/sl/n6/jlsln6ekdv4c_y8g4w2cdxtfjzm.png"></a> </div><br>  Ici, les pièces ne sont pas retirées du plateau et la même pièce peut être sautée plusieurs fois de suite.  La solution évidente est d'interdire de visiter le même champ deux fois par tour, mais j'ai dû pénétrer à fond dans le noyau pour implémenter une telle vérification.  Cela ressemblait un peu à la mise en œuvre de l'option de « <a href="">capture différée</a> », mais comme j'ai fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des brouillons russes</a> beaucoup plus tôt, cela posait beaucoup moins de problèmes. <br><br><div class="spoiler">  <b class="spoiler_title">Malheureusement, il existe des jeux dans lesquels même de tels chèques ne sont pas enregistrés</b> <div class="spoiler_text">  Les règles du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stapeldammen</a> (il s'agit d'une sorte de « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">piliers</a> » stipule explicitement que la même pièce peut être touchée plusieurs fois par tour. La pièce effectuant le mouvement revient plusieurs fois à la même position et continue la bataille, tandis qu'en ennemi il y a des chiffres dans les colonnes. Les mouvements composés de Dagaz ne peuvent pas faire face à ce problème. La logique de la bataille des pôles est trop compliquée pour le noyau, et elle n'atteindra pas les extensions, car la génération de la boucle est bouclée. Bien sûr, il existe une issue: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/dw/r0/wqdwr0nl6vz3bentua8vpdiml18.png"></div><br>  Il n'y a pas de mouvements partiels dans Dagaz, mais nous pouvons les émuler en sautant le prochain mouvement de l'adversaire (la même approche est utilisée dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">décalcomanies</a> ).  Et juste cette logique est facilement implémentée par l' <a href="">extension</a> .  Nous interdisons simplement tous les mouvements sous certaines conditions, et l'option <b>pass-turn = forcé</b> génère automatiquement un mouvement vide.  Voici un autre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> avec une émulation similaire. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l3/qg/ze/l3qgzeou6mpibm80fzejdzk5qp8.png"></div><br>  Diviser artificiellement les mouvements composites en mouvements partiels n'est pas très bon pour les robots IA, mais parfois, il n'y a tout simplement pas d'autre issue. <br></div></div><br>  En général, le concept de composé fait bouger des vies et se développe.  Plus récemment, j'ai dû faire une autre nouvelle option ( <b>complète-partielle</b> ) pour un ancien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> égyptien. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ceBXdXL-aXE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  En plus de compléter automatiquement le mouvement des figures le long des flèches, il a également d'autres solutions techniques intéressantes.  Mais à ce sujet une autre fois. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459456/">https://habr.com/ru/post/fr459456/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459444/index.html">Modifications récentes de la pile Linux IO du point de vue DBA</a></li>
<li><a href="../fr459446/index.html">Cinq tendances effrayantes du design moderne</a></li>
<li><a href="../fr459450/index.html">La vulnérabilité du logiciel de téléconférence Zoom permet à n'importe quel site Web d'espionner les utilisateurs via webcam</a></li>
<li><a href="../fr459452/index.html">Un agro-robot avec l'IA a appris à ramasser soigneusement uniquement la salade mûrie du jardin</a></li>
<li><a href="../fr459454/index.html">Comment s'est passé le premier hackathon à The Standoff</a></li>
<li><a href="../fr459458/index.html">ok.tech: Explication des données # 2</a></li>
<li><a href="../fr459460/index.html">Les difficultés de travailler avec Redux et leur solution</a></li>
<li><a href="../fr459462/index.html">SEO pour Yandex. Recherchez tout?</a></li>
<li><a href="../fr459464/index.html">Lua à Moscou 2019: entretien avec Roberto Jérusalem</a></li>
<li><a href="../fr459466/index.html">Lua à Moscou 2019: entretien avec Roberto Ierusalimschy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>