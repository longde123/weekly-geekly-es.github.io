<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈲 👴🏿 🔝 Pemuatan Malas Modul Fitur dari folder "node_modules" 🤭 👩‍🚀 ⛹🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika seseorang dari Anda telah mencoba membuat perpustakaan sudut, ia mungkin menghadapi masalah dengan malas memuat Modul Fitur dari node_modules . M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemuatan Malas Modul Fitur dari folder "node_modules"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442370/"><p>  Jika seseorang dari Anda telah mencoba membuat perpustakaan sudut, ia mungkin menghadapi masalah dengan malas memuat <strong>Modul Fitur</strong> dari <strong>node_modules</strong> .  Mari selami lebih dalam dan pergi melalui air yang gelap. </p><br><h2 id="creating-library-tools">  Membuat alat perpustakaan </h2><br><p><img src="https://habrastorage.org/webt/ok/51/zz/ok51zzworsnlsjydeylkk5ja88k.png" alt="gambar"></p><a name="habracut"></a><br><p>  Jika Anda tidak terbiasa dengan pertanyaan "Bagaimana cara membuat perpustakaan?"  - Setidaknya ada dua alat untuk membuat perpustakaan sudut: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CLI sudut (ng-packagr di bawah tenda)</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Langsung ng-paket</a> ; </li></ol><br><p>  Anda dapat memperoleh detail lebih lanjut dengan mengklik tautan di atas, semua yang lain mari kita bergerak lebih jauh. </p><br><h2 id="lazy-modules-feature-modules">  Modul Malas (Modul Fitur) </h2><br><p><img src="https://habrastorage.org/webt/7t/zz/su/7tzzsujma0aklnraols5xoiq8oi.png" alt="gambar"><br>  Jadi, Jika Anda sudah bekerja dengan Angular, Anda harus tahu tentang modul Angular dan untuk tujuan apa Anda membutuhkannya. </p><br><p>  Modul biasanya harus menyimpan banyak komponen, layanan arahan yang mewakili bagian fungsionalitas swasembada tertentu.  Seringkali pengembang membuat modul terpisah untuk fitur yang belum dimuat ke aplikasi sampai pengguna tidak akan pergi ke halaman tertentu. </p><br><p>  Dan sekarang saatnya untuk Fitur Store (bukan tentang ini untuk saat ini) dan Modul fitur. </p><br><p>  Jika Anda memasukkan modul Lazy Loaded ke beberapa modul induk, mereka tidak akan malas, karena Anda akan mendeklarasikannya ke dalam aplikasi dan pada saat kompilasi TypeScript ke dalam JavaScript Webpack akan menambahkan kode modul-modul tersebut ke dalam kumpulan utama dan aplikasi akan memuat semua kode itu saat startup. </p><br><p>  Hanya satu cara yang benar untuk mendeklarasikan modul malas dalam perutean. </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [ { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'reports'</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-string"><span class="hljs-string">'./reports/reports.module#ReportsModule'</span></span> } ];</code> </pre> <br><p>  Jadi Anda memberikan string khusus yang sebenarnya "#" dan aplikasi akan tahu bahwa modul ini harus dimuat secara terpisah dari aplikasi utama. <br><br></p><h2 id="troubles-begin">  Masalah dimulai </h2><br><p><img src="https://habrastorage.org/webt/z_/wx/2q/z_wx2qbnkvyna6xenwlycs_me_c.png" alt="gambar"><br>  Semua berjalan dengan baik jika Modul Fitur adalah bagian dari kode sumber aplikasi Anda, tetapi bagaimana jika ini adalah perpustakaan yang dikompilasi yang diatur menggunakan npm?  - Itu tidak bekerja dengan cara biasa. </p><br><p>  Masalah utama bahwa ketika Anda mencoba mendaftar Modul Fitur tersebut dengan string biasa Anda akan menghadapi kesalahan. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [ { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'reports'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// will not work loadChildren: 'my-lib#ReportsModule' } ];</span></span></code> </pre> <br><p>  Ini disebabkan karena deklarasi semacam itu tidak kompatibel untuk modul yang dikompilasi. </p><br><p>  Anda dapat membuat pembungkus dan kemudian mendeklarasikannya dalam router. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ReportsModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"my-lib"</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ReportModule], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: [ReportModule] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReportsWrapperModule</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [ { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'reports'</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-string"><span class="hljs-string">'./wrapper.module#ReportsWrapperModule'</span></span> } ];</code> </pre> <br><p>  <strong>NAMUN, siapa yang tertarik untuk membuat 15 bungkus untuk 15 modul?</strong>  <strong>- Bukan saya!</strong> </p><br><h2 id="possible-solutions">  Kemungkinan solusi </h2><br><p><img src="https://habrastorage.org/webt/1v/pu/r7/1vpur7cmaux3qwnf5xmizbtlhs0.png" alt="gambar"></p><br><p>  Saya tidak akan menyembunyikan saya tidak membuang waktu menganalisis mengapa ini terjadi karena Webpack atau CLI Angular.  Saya menemukan dua solusi yang mungkin. </p><br><h3 id="solution-1-library-compiled-and-feature-module-has-no-nested-feature-modules">  Solusi # 1.  Library dikompilasi dan Modul Fitur tidak memiliki modul fitur bersarang </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan untuk contoh yang berfungsi.</a> </p><br><p>  Langkah pertama menentukan tipe atribut <strong>LoadChildren</strong> apa </p><br><pre> <code class="javascript hljs">type LoadChildren = string | LoadChildrenCallback; type LoadChildrenCallback = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> Type&lt;any&gt; | NgModuleFactory&lt;any&gt; | <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;Type&lt;any&gt;&gt; | Observable&lt;Type&lt;any&gt;&gt;;</code> </pre> <br><p>  Menarik!  Jadi, secara teori, dimungkinkan untuk menggunakan <strong>impor ()</strong> untuk mengembalikan janji dengan modul yang diperlukan. <br>  Kode selanjutnya harus baik-baik saja. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [ { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'reports'</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'my-lib'</span></span>).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">) =&gt;</span></span> res.ReportsModule) } ];</code> </pre> <br><p>  Oh, apa yang terjadi?  - Kami melihat kesalahan di konsol ... Ya, ubah saja <strong>tsconfig.json</strong> </p><br><pre> <code class="javascript hljs">{ .. <span class="hljs-string"><span class="hljs-string">"module"</span></span>: <span class="hljs-string"><span class="hljs-string">"esNext"</span></span>, .. }</code> </pre> <br><p>  Sekarang harus bekerja dengan baik. </p><br><h3 id="solution-2-feature-module-have-nested-feature-modules-done-only-for-a-non-compiled-library">  Solusi # 2.  Modul Fitur memiliki modul fitur bersarang (hanya dilakukan untuk perpustakaan yang tidak dikompilasi) </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan untuk contoh yang berfungsi.</a> </p><br><ol><li><p>  Anda tidak harus mengkompilasi perpustakaan sebelum mengemas paket npm; </p><br></li><li><p>  Karena sumber perpustakaan tidak dikompilasi, Anda harus memasukkannya ke dalam proses kompilasi aplikasi Anda.  Cukup ubah <strong>tsconfig.app.json</strong> ; </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"exclude"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"test.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"**/*.spec.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"../node_modules/**/*.spec.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"../node_modules/**/test.ts"</span></span> ], <span class="hljs-string"><span class="hljs-string">"include"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"*.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"./environments"</span></span>, <span class="hljs-string"><span class="hljs-string">"./app"</span></span>, <span class="hljs-string"><span class="hljs-string">"../node_modules/my-lib"</span></span> ]</code> </pre> <br></li><li><p>  Berita baik - tidak perlu menggunakan <strong>impor ()</strong> ; </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [{ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">"reports"</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-string"><span class="hljs-string">"my-lib#ReportsModule"</span></span> }];</code> </pre> <br><p>  Tadam! </p><br></li></ol><br><p>  <strong>PS</strong> Solusi ini diuji dengan Angular 7 saja. </p><br><p>  Terima kasih atas perhatiannya, selamat menikmati. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442370/">https://habr.com/ru/post/id442370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442356/index.html">Masa depan cloud</a></li>
<li><a href="../id442358/index.html">Sejarah pemain kaset Soviet: evolusi Desna, MK-60 yang dibuat di USA dan 70-an tape recorder rakyat</a></li>
<li><a href="../id442362/index.html">Sebagai ketiga kalinya dalam hidup saya, saya melihat imager termal hidup dan memegangnya di tangan saya untuk pertama kalinya</a></li>
<li><a href="../id442364/index.html">Snom M300 Base DECT Station dan M215 Kit Overview</a></li>
<li><a href="../id442366/index.html">Apa saja fitur dan tugas iringan suara game</a></li>
<li><a href="../id442372/index.html">Pemrograman yang andal dalam konteks bahasa. Bagian 2 - Penantang</a></li>
<li><a href="../id442374/index.html">Pengembangan boost converter pada DSP: prinsip operasi, perhitungan, pembuatan prototipe</a></li>
<li><a href="../id442376/index.html">Kepadatan plot eceran</a></li>
<li><a href="../id442378/index.html">Satu klik pada antarmuka Pemesanan com dapat merusak liburan atau mengapa sistem peringkat kerja penting</a></li>
<li><a href="../id442380/index.html">Semacam Kekacauan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>