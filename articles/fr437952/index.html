<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏻 🌒 🕌 Comment tester dans AutoCar: MindMap, analyse de code statique et MockServer 👩🏼 👨🏼‍🚒 👈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut Je veux vous dire comment les tests fonctionnent dans le projet Autotech , un service d'inspection automobile de VIN. Sous la coupe - sur les ou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment tester dans AutoCar: MindMap, analyse de code statique et MockServer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/437952/">  Salut  Je veux vous dire comment les tests <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctionnent</a> dans le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autotech</a> , un service d'inspection automobile de VIN.  Sous la coupe - sur les outils que nous utilisons pour tester les exigences, la planification du sprint, le fonctionnement du processus de test dans notre projet. <br><br><img src="https://habrastorage.org/webt/93/rt/-e/93rt-erujom8mgz5w-1gmrjl2ew.png"><br><a name="habracut"></a><br><h3>  MindMap pour les tâches de toilettage </h3><br>  Nous utilisons Scrum dans l'Auto Center, car c'est la méthodologie la plus efficace pour nos tâches.  Chaque semaine, nous organisons des réunions au cours desquelles nous hiérarchisons, déterminons la complexité, décomposons les tâches du backlog et définissons la définition de prêt et la définition de terminé pour chacune des tâches (vous pouvez en lire plus dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce merveilleux article</a> ).  Ce processus est appelé nettoyage du backlog. <br><br>  Pour un nettoyage efficace, toutes les dépendances doivent être prises en compte.  Savoir comment la mise en œuvre de la tâche peut affecter négativement le projet.  Comprenez quelles fonctionnalités vous devez prendre en charge et lesquelles couper.  Peut-être, dans le processus de mise en œuvre de la tâche, l'API pour les partenaires peut souffrir, ou vous devez simplement vous rappeler d'implémenter des mesures permettant de comprendre l'efficacité de l'entreprise.  Avec le développement de tout projet, il y a de plus en plus de telles dépendances, et leur prise en compte devient de plus en plus difficile.  C'est mauvais: il est important pour l'équipe d'assistance de découvrir toutes les fonctionnalités à temps.  Et parfois, les innovations doivent être coordonnées avec le service marketing. <br><br>  En conséquence, j'ai proposé une solution basée sur MindMap, qui reflétait presque toutes les dépendances pouvant affecter le DoD, le DoR et l'évaluation des tâches. <br><br><img src="https://habrastorage.org/webt/c7/uv/en/c7uvenelsismfmm10p0wamwwwyk.png"><br><br>  L'avantage de cette approche est une représentation visuelle de toutes les dépendances possibles dans un style hiérarchique, ainsi que des chignons supplémentaires sous forme d'icônes, de sélection de texte et de branches multicolores.  Toute l'équipe a accès à cette MindMap, qui vous permet de maintenir la map à jour.  J'ai étendu le blanc d'une telle carte, qui peut être considérée comme un point de repère, ici - le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">melon</a> .  (Je réserverai tout de suite qu'il ne s'agit que d'une ligne directrice, et il est très douteux d'utiliser cette carte pour vos tâches sans finaliser le projet.) <br><br><h3>  Analyse de code statique et linty pour Go </h3><br><br>  Dans notre projet, un assez grand nombre de code golang, et afin que le style de code réponde à certaines normes, il a été décidé d'appliquer une analyse de code statique.  À propos de ce que c'est, il y a un excellent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> sur Habré. <br>  Nous voulions intégrer l'analyseur dans le processus CI, de sorte qu'à chaque build du projet, l'analyseur démarre, et selon les résultats de la vérification, la build se poursuivait ou plantait avec des erreurs.  En général, l'utilisation de gometalinter comme étape de build distincte dans Teamcity serait une bonne solution, mais l'affichage des erreurs dans les journaux de build n'est pas très pratique. <br>  Nous avons continué à rechercher et trouver le Linty Bot, développé dans le cadre du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hackathon</a> Avito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par</a> Artemy <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Flaker</a> Ryabinkov. <br><br><img src="https://habrastorage.org/webt/lb/ji/dx/lbjidxwhrbgc2eouel6bhrty6ma.png"><br><br>  Il s'agit d'un bot qui surveille le code du projet dans notre système de contrôle de version et lance un analyseur de code diff à chaque demande d'extraction.  Si une erreur se produit pendant l'analyse, le bot envoie un commentaire à ce PR à la ligne de code souhaitée.  Ses avantages sont la vitesse de connexion au projet, la vitesse de travail, les commentaires sur les demandes de tirage et l'utilisation du linter Gometalinter plutôt populaire, qui contient déjà par défaut toutes les vérifications nécessaires. <br><br><h3>  MockServer et comment obtenir des services pour donner ce dont ils ont besoin </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/60c/8b9/482/60c8b9482f49c0587ad9aa415ce0e568.png" alt="image"><br><br>  La section suivante concerne la stabilité du test.  Un concessionnaire automobile est extrêmement dépendant des sources de données (elles proviennent de concessionnaires, de services gouvernementaux, de stations-service, de compagnies d'assurance et d'autres partenaires), mais leur inopérabilité ne peut pas être la base pour refuser de réaliser des tests. <br><br>  Nous devons vérifier l'assemblage des rapports à la fois aux sources de travail et à leur inopérabilité.  Jusqu'à récemment, nous utilisions de vraies sources de données dans l'environnement de développement et, en conséquence, dépendions de leur état.  Il s'est avéré que nous avons indirectement vérifié ces sources dans les tests d'interface utilisateur.  En conséquence, ils ont eu des tests instables qui sont tombés avec les sources et attendent une enquête sur les sources de données, ce qui n'a pas contribué à la vitesse de réussite des tests automatiques. <br><br>  J'ai eu l'idée d'écrire ma propre maquette et de remplacer ainsi les sources d'Autotech.  Mais à la fin, une solution plus simple a été trouvée - le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MockServer</a> prêt à l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">emploi</a> , le développement open source en Java. <br><br>  Le principe de son travail: <br><br><ul><li>  créer des attentes </li><li>  correspondre aux demandes entrantes, </li><li>  si une correspondance est trouvée - envoyez une réponse. </li></ul><br>  Un exemple de création d'une attente à l'aide d'un client java: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MockServerClient(<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>, <span class="hljs-number"><span class="hljs-number">1080</span></span>) .when( request() .withMethod(<span class="hljs-string"><span class="hljs-string">"POST"</span></span>) .withPath(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>) .withBody(<span class="hljs-string"><span class="hljs-string">"{username: 'foo', password: 'bar'}"</span></span>) ) .respond( response() .withStatusCode(<span class="hljs-number"><span class="hljs-number">302</span></span>) .withCookie( <span class="hljs-string"><span class="hljs-string">"sessionId"</span></span>, <span class="hljs-string"><span class="hljs-string">"2By8LOhBmaW5nZXJwcmludCIlMDAzMW"</span></span> ) .withHeader( <span class="hljs-string"><span class="hljs-string">"Location"</span></span>, <span class="hljs-string"><span class="hljs-string">"https://www.mock-server.com"</span></span> ) );</code> </pre> <br>  Comme vous pouvez le voir dans l'exemple, nous décrivons la demande que nous enverrons et la réponse que nous voulons recevoir.  MockServer reçoit la demande, essaie de la comparer avec celles qui ont été créées et s'il y a des correspondances, il renvoie une réponse.  Si la demande n'échoue pas, nous obtenons 404. <br><br>  Pour MockServer, il existe des clients pour Java et JavaScript, une excellente documentation et des exemples d'utilisation.  Il y a la possibilité de faire correspondre les demandes sur RegExp, la journalisation détaillée sur le serveur et tout un tas de puces.  Pour nos besoins, c'était un candidat idéal.  Le processus de lancement est décrit en détail sur le site, donc le raconter ici ne voit pas l'intérêt.  Le seul moment, la dernière version était une fuite de mémoire, nous utilisons donc la version 5.2.3.  Soyez prudent.  Un autre inconvénient est que Mockserver n'a pas de prise en charge SOAP prête à l'emploi. <br><br>  À l'heure actuelle, MockServer travaille avec nous depuis environ trois mois.  En conséquence, la stabilité des tests, la vitesse de leur exécution et la capacité de recevoir des données sur un environnement de développement ont augmenté.  Et en conséquence, il y a plus de possibilités de test. <br><br><h3>  Épilogue </h3><br>  Ces technologies sont les principales choses dont je voudrais parler dans cet article.  Sinon, nous utilisons les outils de test habituels: tests d'API avec le paquet Kotlin + JUnit + RestAssured, Postman pour la commodité d'accéder à l'API.  Dans cet article de revue, je n'ai pas parlé de notre approche des tests d'interface utilisateur.  Nous utilisons MBT et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">graphwalker</a> .  Nous prévoyons de préparer un article avec des collègues à ce sujet. <br><br>  Si vous avez des questions, posez-les dans les commentaires, j'essaierai d'y répondre.  J'espère que cet article sera utile aux équipes de développement.  (Soit dit en passant, alors qu'elle se préparait pour la sortie, un travail de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">développeur QA</a> est apparu dans notre équipe, montre à ceux qui pourraient être intéressés). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437952/">https://habr.com/ru/post/fr437952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437942/index.html">Quoi de neuf dans Swift 5?</a></li>
<li><a href="../fr437944/index.html">Mathématiques de la peau: croissance de l'épiderme basée sur la modélisation mathématique</a></li>
<li><a href="../fr437946/index.html">Un compte Admin@kremlin.ru trouvé dans des milliers de bases de données MongoDB</a></li>
<li><a href="../fr437948/index.html">«J'étais très négatif envers les coroutines»: Artyom Zinnatullin sur le développement Android</a></li>
<li><a href="../fr437950/index.html">"Préparez" correctement le prototype. Technologies de prototypage de cas</a></li>
<li><a href="../fr437956/index.html">"Implémentation de Splunk 7" - le premier livre sur Splunk en russe</a></li>
<li><a href="../fr437958/index.html">Autorisation en EIES sur un serveur terminal avec signature numérique conformément à GOST-2012</a></li>
<li><a href="../fr437960/index.html">Conseils du directeur technique d'une entreprise informatique aux diplômés du bootcamp</a></li>
<li><a href="../fr437962/index.html">PVS-Studio ROI</a></li>
<li><a href="../fr437964/index.html">Livre "Machine Learning et TensorFlow"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>