<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♒️ 😙 💃 STM32 + CMSIS + STM32CubeIDE 👩🏼‍⚖️ 👨🏼‍🏭 ↗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di sini saya akan memberi tahu Anda cara membuat proyek minimal pada CMSIS menggunakan "asli" IDE untuk mikrokontroler STM - STM32CubeIDE. 

 Mungkin ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>STM32 + CMSIS + STM32CubeIDE</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481478/">  Di sini saya akan memberi tahu Anda cara membuat proyek minimal pada CMSIS menggunakan "asli" IDE untuk mikrokontroler STM - STM32CubeIDE. <br><br>  Mungkin STM32CubeIDE memiliki sejumlah kelemahan, tetapi menurut saya, memiliki beberapa keunggulan - seperti hak milik dan gratis, yang, setidaknya, Anda harus memperhatikan lingkungan pengembangan ini jika Anda belum melakukan ini sebelumnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dv/qc/r8/dvqcr8nj-bvc6u_45zida8xayd8.jpeg"></div><br><a name="habracut"></a><br>  Mikrokontroler STM32F072 dengan inti ARM Cortex-M0 dipilih sebagai objek firmware untuk STM32F103 yang lebih akrab pada ARM Cortex-M3, disesuaikan dengan intinya, prosesnya identik. <br><br>  Semua sumber daya yang diperlukan dapat diunduh dari <a href="https://www.st.com/content/st_com/en.html">st.com</a> , dan inilah yang Anda butuhkan: <br><br><ul><li>  <a href="https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-ides/stm32cubeide.html">IDE itu sendiri</a> , saya menggunakan versi Windows, tetapi versi untuk Mac dan Linux juga tersedia <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mk/_h/tc/mk_htcjbml8jrszolsfhgexy7eq.jpeg"></div></li><li>  <a href="https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef0.html">Pustaka CMSIS untuk ARM Cortex-M0</a> , terletak di arsip STM32CubeFx, dipecah oleh versi kernel.  Arsip itu sendiri, selain CMSIS, mengandung banyak sumber daya lain mulai dari contoh bekerja dengan periferal ke driver USB, pada kenyataannya, arsip ini digunakan jika Anda membuat proyek menggunakan STM32Cube <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/va/cd/gwvacdr6l5cnwoutcb8_yi1viiq.jpeg"></div></li><li>  <a href="https://www.st.com/content/st_com/en/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-mainstream-mcus/stm32f0-series/stm32f0x2/stm32f072rb.html">Lembar Data dan Referensi Manual</a> tidak <a href="https://www.st.com/content/st_com/en/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-mainstream-mcus/stm32f0-series/stm32f0x2/stm32f072rb.html">akan</a> sakit <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/iz/13/qciz13lpyc6c_9wexiznagpw6nc.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8p/xm/l-/8pxml-fo2n6m8gqlelq9ljuy4io.jpeg"></div></li></ul><br>  Setelah menginstal, memulai dan memilih folder Workspace, Anda dapat mulai membuat proyek.  Saat ini STM32CubeIDE versi 1.1.0, jadi lokasi berbagai pengaturan harus berdasarkan ini. <br><br>  Membuat proyek baru - <em>File / Baru / STM32Project</em> .  Setelah beberapa pemikiran, jendela untuk memilih mikrokontroler muncul, dalam kasus saya itu adalah STM32F072RB dalam paket LQFP64, saya memilih garis yang diinginkan, klik berikutnya.  Lebih lanjut diusulkan untuk memilih nama proyek, lokasi, bahasa pemrograman C / C ++, file executable / perpustakaan statis dan apakah proyek akan dihasilkan menggunakan CubeMX atau dengan kumis.  Pembuatan kubus, dalam hal ini, tidak diperlukan, oleh karena itu tipe proyek <em>Kosong</em> adalah selesai. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/fp/3j/gyfp3j-mz4lkfbrdrelyxutxowe.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n5/o7/wp/n5o7wpxecjf5zhppkvaxqgim5ru.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6l/9h/xq/6l9hxqj1wewf29pmzhofurntiku.jpeg"></div><br>  Di sebelah kiri, di jendela <em>Project Explorer</em> , pohon proyek muncul, meskipun tidak cukup <em>Kosong</em> , seperti yang diperintahkan.  Pada prinsipnya, jika struktur folder yang dihasilkan cocok untuk Anda, Anda dapat menambahkan file dari pustaka CMSIS di sana dan bekerja, tetapi di sini saya akan menunjukkan bagaimana Anda dapat menyelaraskan struktur proyek dengan indra kecantikan saya, jadi semuanya kecuali skrip tautan dihapus misalnya.  file dengan ekstensi .ld - itu akan berguna. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8h/ny/-o/8hny-ox3erjy_uyxcdw7uehosco.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wy/bd/l7/wybdl7b4d7nuunc8qpbaafov1pi.jpeg"></div><br>  Semua manipulasi dengan folder dan file dapat dilakukan baik di Explorer maupun di dalam IDE dengan mengklik kanan pada nama proyek, misalnya: <em>tombol kanan -&gt; baru -&gt; Folder</em> .  Jika struktur proyek telah berubah di luar IDE, maka Anda hanya perlu memperbarui proyek: <em>tombol kanan -&gt; Refresh</em> . <br><br>  Versi saya dari struktur proyek terlihat seperti ini: <br><br><ul><li>  <em>Startup</em> - skrip linker akan disimpan di sini, yang tersisa dari proyek yang dihasilkan, serta file startup yang diambil dari CMSIS </li><li>  <em>CMSIS \ src</em> dan <em>CMSIS \ inc</em> - di sini akan menjadi sumber, file dengan ekstensi .c di folder <em>scr</em> dan file header dengan ekstensi .h di folder <em>inc</em> , masing-masing, terkait dengan perpustakaan CMSIS </li><li>  <em>Core \ src</em> dan <em>Core \ inc</em> - proyek itu sendiri akan berlokasi di sini, sebagai permulaan, letakkan <em>main.c</em> dan <em>main.h di sana</em> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t4/nx/jw/t4nxjw8u631-l7su5nzua6wg_f0.jpeg"></div><br>  Sekarang Anda perlu mentransfer file perpustakaan CMSIS ke proyek.  Perpustakaan terdiri dari file inti dan file periferal.  File kernel dimulai dengan <em>core_</em> atau <em>cmsis_</em> mereka umum untuk semua mikrokontroler yang menggunakan kernel ini.  File periferal berisi nama mikrokontroler <em>stm32</em> dalam nama dan khusus untuk produsen tertentu, dalam hal ini, perusahaan STM. <br><br>  Dalam formulir yang belum dibongkar, arsip berisi folder <em>STM32Cube_FW_F0_V1.11.0</em> , semua jalur relatif terhadap folder ini.  Total, Anda perlu menyalin: <br><br>  Dalam <em>CMSIS \ inc</em> : <br><br><ul><li>  <em>Drivers \ CMSIS \ Include \ cmsis_compiler.h</em> </li><li>  <em>Drivers \ CMSIS \ Include \ cmsis_gcc.h</em> </li><li>  <em>Drivers \ CMSIS \ Include \ cmsis_version.h</em> </li><li>  <em>Drivers \ CMSIS \ Include \ core_cm0.h</em> </li><li>  <em>Drivers \ CMSIS \ Device \ ST \ STM32F0xx \ Sertakan \ stmf0xx.h</em> </li><li>  <em>Drivers \ CMSIS \ Device \ ST \ STM32F0xx \ Termasuk \ stm32f072xb.h</em> </li><li>  <em>Drivers \ CMSIS \ Device \ ST \ STM32F0xx \ Sertakan \ system_stm32f0xx.h</em> </li></ul><br>  Dalam <em>CMSIS \ src</em> : <br><br><ul><li>  <em>Drivers \ CMSIS \ Device \ ST \ STM32F0xx \ Sumber \ Templates \ system_stm32f0xx.c</em> </li></ul><br>  Dalam Startup: <br><br><ul><li>  <em>Drivers \ CMSIS \ Device \ ST \ STM32F0xx \ Sumber \ Templat \ gcc \ startup_stm32f072xb.s</em> </li></ul><br>  Ini adalah bagaimana proyek terlihat dalam bentuk lengkapnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/u5/kf/l9u5kfyx7xbvqsoouzqfyqofkdg.jpeg"></div><br>  Karena beberapa manipulasi dengan folder proyek dilakukan, Anda perlu menampilkan ini di pengaturan. <br><br>  <em>Tombol kanan untuk nama proyek -&gt; Properti -&gt; C / C ++ Build -&gt; Pengaturan -&gt; Pengaturan Alat -&gt; MCU GCC Linker -&gt; Umum</em> - di sini Anda perlu menentukan lokasi baru skrip linker menggunakan tombol <em>Browse ...</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/va/6d/d5/va6dd5qv_-xohabg-hqzffunypu.jpeg"></div><br>  Anda juga harus menentukan path ke file proyek <br><br>  <em>Properti -&gt; C / C ++ Umum -&gt; Termasuk</em> <br>  <em>Properti -&gt; C / C ++ Umum -&gt; Lokasi Sumber</em> <br><br>  Di <em>Termasuk</em> jalur ke folder <em>inc</em> , dan di <em>Lokasi Sumber</em> akan logis untuk folder <em>src</em> , tetapi jika Anda melakukannya, maka folder ini akan ditambahkan ke pohon proyek secara terpisah.  Agar tidak mengacaukan pohon secara visual, di <em>Lokasi Sumber</em> Anda dapat menentukan folder root <em>Core</em> , <em>CMSIS</em> dan <em>Startup</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ba/r9/te/bar9temkumw_ffjxmjz0dc5ehcu.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/_v/pa/wt_vpal_mdt3buqheo5ies8tyym.jpeg"></div><br>  Agar proyek dapat dikompilasi, Anda harus menghapus tanda komentar pada baris dengan nama mikrokontroler di file <em>stm32f0xx.h</em> dan, tentu saja, tambahkan fungsi utama di <em>main.c.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0m/3b/vq/0m3bvqzgvguepvzxghc3w66b4r8.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8n/r2/tl/8nr2tlojommjirdqgc1poowjwq4.jpeg"></div><br>  Sebenarnya semuanya.  Kompilasi bebas kesalahan dan segera menghilang di suatu tempat sebanyak satu setengah kilobyte memori RAM adalah RAM, dan segera tumpukan dan tumpukan diingat, mereka tidak disebutkan di mana pun dalam proses pembuatan proyek.  Ukuran tumpukan dan tumpukan ditunjukkan dalam file skrip linker, yang dengan ekstensi .ld, mereka dapat dan harus diubah sesuai dengan persyaratan proyek.  Nilai-nilai ini terletak di awal file dalam bentuk label <em>_Min_Heap_Size / _Min_Stack_Size</em> dengan ukuran dalam heksadesimal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cj/nt/l3/cjntl3rh8a3zjd7ng4vb-navi_g.jpeg"></div><br><br>  Sebagai contoh, saya akan memberikan <a href="https://github.com/heavyC1oud/simpleCMSIS">proyek kecil</a> LED tradisional yang berkedip. <br><br>  LED akan berkedip pada papan debug STM32F072B-DISCO, clocking dilakukan dari generator HSI48 internal dengan frekuensi 48 MHz, dan timer SysTick digunakan sebagai sumber penundaan, menghasilkan interupsi dengan periode 1 ms, dimana waktu tunda yang tepat dihitung.  LED terhubung ke pin 6 port C, dikonfigurasi untuk output push-pull. <br><br>  Saya harap informasi ini bermanfaat bagi seseorang, karena  Pada suatu waktu, meskipun banyak materi pemrograman STM32, saya harus menyekop banyak manual untuk menyadari hal-hal yang sekarang tampak jelas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481478/">https://habr.com/ru/post/id481478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481466/index.html">Cara membangun proyek di Jenkins, jika Anda membutuhkan banyak lingkungan berbeda</a></li>
<li><a href="../id481470/index.html">Karangan bunga pintar untuk sepanjang tahun</a></li>
<li><a href="../id481472/index.html">Riwayat DNS: Saat Nama Domain Dibayar</a></li>
<li><a href="../id481474/index.html">Kami dari tes lain - kami sedang menguji database di MSTest</a></li>
<li><a href="../id481476/index.html">Bagaimana saya mulai berbicara di konferensi dan tidak bisa berhenti</a></li>
<li><a href="../id481480/index.html">Ini adalah norma: apa itu peta normal dan bagaimana cara kerjanya</a></li>
<li><a href="../id481482/index.html">Posting silang ke halaman Facebook menggunakan PHP SDK</a></li>
<li><a href="../id481484/index.html">AI berusaha menghindari masalah perilaku belajar yang rumit</a></li>
<li><a href="../id481486/index.html">“Tetap hidup, tetap hidup”: protokol baru akan meningkatkan radius kemungkinan penggunaan Wi-Fi hingga 60 meter</a></li>
<li><a href="../id481488/index.html">Bagaimana pejabat Wilayah Moskow mengukur polusi udara</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>