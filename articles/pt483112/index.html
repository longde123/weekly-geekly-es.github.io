<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëö ü§≠ üí™üèº Usando Clickhouse como um substituto para ELK, Big Query e TimescaleDB üï∂Ô∏è üèì üèä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Clickhouse √© um mecanismo de banco de dados de sistema de gerenciamento de banco de dados de consulta anal√≠tica (OLAP) de c√≥digo aberto, criado por Ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usando Clickhouse como um substituto para ELK, Big Query e TimescaleDB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/483112/">  <a href="https://clickhouse.yandex/">Clickhouse</a> √© um mecanismo de banco de dados de sistema de gerenciamento de banco de dados de consulta anal√≠tica (OLAP) de c√≥digo aberto, criado por Yandex.  √â usado pelo Yandex, CloudFlare, VK.com, Badoo e outros servi√ßos em todo o mundo para armazenar grandes quantidades de dados (inserir milhares de linhas por segundo ou petabytes de dados armazenados no disco). <br><br>  Em um DBMS regular de "string", cujos exemplos s√£o MySQL, Postgres, MS SQL Server, os dados s√£o armazenados nesta ordem: <br><br><img src="https://habrastorage.org/webt/op/as/zd/opaszdhxefzryaitjqttg8sk_to.jpeg"><br><br>  Nesse caso, os valores relacionados a uma linha s√£o fisicamente armazenados lado a lado.  Em um DBMS colunar, os valores de diferentes colunas s√£o armazenados separadamente e os dados de uma coluna s√£o armazenados juntos: <br><br><img src="https://habrastorage.org/webt/oj/17/vg/oj17vgwsilwf8mri4-whzqzm31s.jpeg"><a name="habracut"></a><br><br>  Exemplos de DBMSs colunares s√£o Vertica, Paraccel (Actian Matrix, Amazon Redshift), Sybase IQ, Exasol, Infobright, InfiniDB, MonetDB (VectorWise, Actian Vector), LucidDB, SAP HANA, Google Dremel, Google PowerDrill, Druid, kdb +. <br><br>  A empresa de <a href="https://qwintry.com/">encaminhamento de correspond√™ncia Qwintry</a> come√ßou a usar o Clickhouse em 2018 para gerar relat√≥rios e ficou muito impressionada com sua simplicidade, escalabilidade, suporte a SQL e velocidade.  A velocidade desse DBMS foi limitada pela m√°gica. <br><br><h3>  Simplicidade </h3><br>  O Clickhouse √© instalado no Ubuntu com um √∫nico comando.  Se voc√™ conhece SQL, pode come√ßar a usar o Clickhouse imediatamente para suas necessidades.  No entanto, isso n√£o significa que voc√™ possa executar "show create table" no MySQL e copiar e colar o SQL no Clickhouse. <br><br>  Comparado ao MySQL, neste DBMS existem diferen√ßas importantes de tipos de dados nas defini√ß√µes de esquemas de tabela; portanto, para um trabalho confort√°vel, voc√™ ainda precisa de algum tempo para alterar as defini√ß√µes do esquema de tabela e estudar os mecanismos de tabela. <br><br>  O Clickhouse funciona muito bem sem nenhum software adicional, mas se voc√™ quiser usar a replica√ß√£o, precisar√° instalar o ZooKeeper.  A an√°lise de desempenho da consulta mostra excelentes resultados - as tabelas do sistema cont√™m todas as informa√ß√µes e todos os dados podem ser obtidos usando o SQL antigo e chato. <br><br><h3>  Desempenho </h3><br><br><ul><li> <a href="https://clickhouse.yandex/benchmark.html">Refer√™ncia</a> comparativa da Clickhouse com a Vertica e o MySQL em um servidor de configura√ß√£o: dois soquetes de CPU Intel¬Æ Xeon¬Æ E5-2650 v2 a 2.60GHz;  128 GiB de RAM;  md RAID-5 em 8 6 TB SATA HDD, ext4. </li><li>  <a href="https://www.altinity.com/blog/2017/6/20/clickhouse-vs-redshift">Refer√™ncia</a> comparativa da Clickhouse com o armazenamento de dados em nuvem do Amazon RedShift. </li><li>  Trechos do <a href="https://blog.cloudflare.com/how-cloudflare-analyzes-1m-dns-queries-per-second/">Blog de desempenho</a> do <a href="https://blog.cloudflare.com/how-cloudflare-analyzes-1m-dns-queries-per-second/">Cloudflare Clickhouse</a> : </li></ul><br><img src="https://habrastorage.org/webt/oo/2c/0d/oo2c0dfcidwr9fsilydx_b9jilw.jpeg"><br><br>  O banco de dados ClickHouse possui um design muito simples - todos os n√≥s no cluster t√™m a mesma funcionalidade e usam apenas o ZooKeeper para coordena√ß√£o.  Constru√≠mos um pequeno cluster de v√°rios n√≥s e realizamos testes, durante os quais descobrimos que o sistema possui um desempenho bastante impressionante, o que corresponde √†s vantagens declaradas nos benchmarks de DBMSs anal√≠ticos.  Decidimos dar uma olhada no conceito por tr√°s do ClickHouse.  O primeiro obst√°culo √† pesquisa foi a falta de ferramentas e o pequeno tamanho da comunidade ClickHouse. Por isso, investigamos o design desse sistema de gerenciamento de banco de dados para entender como ele funciona. <br><br>  O ClickHouse n√£o suporta o recebimento de dados diretamente do Kafka (no momento, ele j√° sabe como), uma vez que √© apenas um banco de dados, por isso, escrevemos nosso pr√≥prio servi√ßo de adaptador no Go.  Ele leu as mensagens codificadas pelo Cap'n Proto da Kafka, as converteu em TSV e as inseriu no ClickHouse em lotes por meio da interface HTTP.  Mais tarde, reescrevemos este servi√ßo para usar a biblioteca Go em conjunto com nossa pr√≥pria interface ClickHouse para melhorar o desempenho.  Ao avaliar o desempenho dos pacotes recebidos, descobrimos uma coisa importante - verificou-se que na ClickHouse esse desempenho depende muito do tamanho do pacote, ou seja, do n√∫mero de linhas inseridas ao mesmo tempo.  Para entender por que isso est√° acontecendo, examinamos como o ClickHouse armazena dados. <br><br>  O mecanismo principal, ou melhor, a fam√≠lia de mecanismos de tabela usados ‚Äã‚Äãpelo ClickHouse para armazenar dados, √© o MergeTree.  Esse mecanismo √© conceitualmente semelhante ao algoritmo LSM usado pelo Google BigTable ou Apache Cassandra, mas evita a constru√ß√£o de uma tabela de mem√≥ria intermedi√°ria e grava dados diretamente no disco.  Isso proporciona excelente taxa de transfer√™ncia de grava√ß√£o, uma vez que cada pacote inserido √© classificado apenas pela chave prim√°ria "chave prim√°ria", √© compactado e gravado no disco para formar um segmento. <br><br>  A aus√™ncia de uma tabela de mem√≥ria ou qualquer conceito de "atualiza√ß√£o" dos dados tamb√©m significa que eles s√≥ podem ser adicionados; o sistema n√£o suporta alter√°-los ou exclu√≠-los.  Hoje, a √∫nica maneira de excluir dados √© exclu√≠-los por meses, pois os segmentos nunca cruzam o limite do m√™s.  A equipe ClickHouse est√° trabalhando ativamente para tornar esse recurso personaliz√°vel.  Por outro lado, isso torna a grava√ß√£o e a fus√£o de segmentos perfeitas, para que a largura de banda da recep√ß√£o seja escalada linearmente com o n√∫mero de inser√ß√µes paralelas at√© que a E / S ou os n√∫cleos estejam saturados. <br>  No entanto, esse fato tamb√©m significa que o sistema n√£o √© adequado para pacotes pequenos; portanto, os servi√ßos e inser√ß√µes Kafka s√£o usados ‚Äã‚Äãpara buffer.  Al√©m disso, o ClickHouse em segundo plano continua a executar constantemente a mesclagem de segmentos, para que muitas pequenas informa√ß√µes sejam combinadas e registradas mais vezes, aumentando assim a intensidade da grava√ß√£o.  Nesse caso, muitas pe√ßas n√£o relacionadas causar√£o uma acelera√ß√£o agressiva das inser√ß√µes enquanto a fus√£o continuar.  Descobrimos que o melhor compromisso entre a recep√ß√£o de dados em tempo real e o desempenho da recep√ß√£o √© receber um n√∫mero limitado de inser√ß√µes por segundo na tabela. <br><br>  A chave para o desempenho da leitura de tabelas √© indexar e posicionar dados no disco.  Independentemente da velocidade do processamento, quando o mecanismo precisar verificar terabytes de dados do disco e usar apenas parte deles, isso levar√° tempo.  O ClickHouse √© um armazenamento de colunas; portanto, cada segmento cont√©m um arquivo para cada coluna (coluna) com valores classificados para cada linha.  Assim, colunas inteiras que n√£o est√£o na consulta podem ser puladas primeiro e, em seguida, v√°rias c√©lulas podem ser processadas em paralelo com a execu√ß√£o vetorizada.  Para evitar uma verifica√ß√£o completa, cada segmento possui um pequeno arquivo de √≠ndice. <br><br>  Como todas as colunas s√£o classificadas por "chave prim√°ria", o arquivo de √≠ndice cont√©m apenas os r√≥tulos (linhas capturadas) de cada en√©sima linha para poder armazen√°-las na mem√≥ria, mesmo em tabelas muito grandes.  Por exemplo, voc√™ pode definir as configura√ß√µes padr√£o "marcar cada 8192¬™ linha" e, em seguida, a indexa√ß√£o "escassa" da tabela com 1 trilh√£o.  linhas, que se encaixam facilmente na mem√≥ria, ter√£o apenas 122.070 caracteres. <br><br><h3>  Desenvolvimento de sistemas </h3><br>  O desenvolvimento e aprimoramento da Clickhouse podem ser rastreados at√© o reposit√≥rio do <a href="https://github.com/yandex/ClickHouse/pulse">Github</a> e garantir que o processo de "crescimento" esteja ocorrendo em um ritmo impressionante. <br><br><img src="https://habrastorage.org/webt/zl/iw/iz/zliwizhn6we2o5easwfkystr5g0.jpeg"><br><br><h3>  Popularidade </h3><br>  Clickhouse parece estar crescendo exponencialmente, principalmente na comunidade de l√≠ngua russa.  A confer√™ncia do ano passado, High load 2018 (Moscou, 8 a 9 de novembro de 2018) mostrou que monstros como vk.com e Badoo usam o Clickhouse, com o qual colam dados (por exemplo, logs) de dezenas de milhares de servidores ao mesmo tempo.  Em um v√≠deo de 40 minutos, <a href="https://www.youtube.com/watch%3Fv%3DpbbcMcrQoXw">Yuri Nasretdinov, da equipe VKontakte, fala sobre como isso √© feito</a> .  Em breve publicaremos a transcri√ß√£o no Habr para facilitar o trabalho com o material. <br><br><h3>  √Åreas de aplica√ß√£o </h3><br>  Depois de algum tempo pesquisando, acho que h√° √°reas nas quais o ClickHouse pode ser √∫til ou capaz de substituir completamente outras solu√ß√µes mais tradicionais e populares, como MySQL, PostgreSQL, ELK, Google Big Query, Amazon RedShift, TimescaleDB, Hadoop, MapReduce, Pinot e Druid.  A seguir, s√£o apresentados detalhes do uso do ClickHouse para atualizar ou substituir completamente os DBMSs acima. <br><br><h3>  Estendendo o MySQL e o PostgreSQL </h3><br>  Mais recentemente, substitu√≠mos parcialmente o MySQL pelo ClickHouse para a <a href="https://www.mautic.org/">plataforma de boletins informativos</a> da <a href="https://www.mautic.org/">Mautic</a> .  O problema era que o MySQL, devido ao seu design mal concebido, registrou todas as cartas enviadas e todos os links nesta carta com um hash base64, criando uma enorme tabela MySQL (email_stats).  Depois de enviar apenas 10 milh√µes de cartas para os assinantes do servi√ßo, essa tabela ocupou 150 GB de espa√ßo no arquivo e o MySQL come√ßou a "entediar" em consultas simples.  Para corrigir o problema de espa√ßo no arquivo, usamos a compacta√ß√£o de tabela do InnoDB, que reduziu em 4 vezes.  No entanto, ainda n√£o faz sentido armazenar mais de 20 a 30 milh√µes de e-mails no MySQL apenas para ler a hist√≥ria, pois qualquer consulta simples que, por algum motivo, precise executar uma varredura completa, leva a uma troca e uma grande carga de E / S, por sobre as quais recebemos regularmente avisos do Zabbix. <br><br><img src="https://habrastorage.org/webt/t6/h9/3d/t6h93dxzyu7l_ddcmb9g-zhctwk.jpeg"><br><br>  A Clickhouse usa dois algoritmos de compacta√ß√£o que reduzem a quantidade de dados em cerca de <a href="https://www.altinity.com/blog/2017/11/21/compression-in-clickhouse">3</a> a <a href="https://www.altinity.com/blog/2017/11/21/compression-in-clickhouse">4 vezes</a> , mas nesse caso espec√≠fico os dados eram especialmente "compact√°veis". <br><br><img src="https://habrastorage.org/webt/rd/8o/0x/rd8o0xpshmzaqfmbzblzp-cgczm.jpeg"><br><br><h3>  Substitui√ß√£o de ELK </h3><br>  Com base em nossa pr√≥pria experi√™ncia, a pilha ELK (ElasticSearch, Logstash e Kibana, nesse caso em particular, ElasticSearch) requer muito mais recursos para executar do que o necess√°rio para armazenar logs.  O ElasticSearch √© um √≥timo mecanismo, se voc√™ precisar de uma boa pesquisa de log de texto completo (e acho que realmente n√£o precisa disso), mas me pergunto por que, de fato, se tornou o mecanismo de log padr√£o.  Seu desempenho de recep√ß√£o em combina√ß√£o com o Logstash criou problemas para n√≥s, mesmo com cargas bastante pequenas, e exigiu a adi√ß√£o de uma quantidade crescente de RAM e espa√ßo em disco.  Como banco de dados, o Clickhouse √© melhor que o ElasticSearch pelos seguintes motivos: <br><br><ul><li>  Suporte de dialeto SQL; </li><li>  A melhor taxa de compacta√ß√£o dos dados armazenados; </li><li>  Suporte para pesquisas de express√£o regular regex em vez de pesquisas de texto completo; </li><li>  Planejamento de consulta aprimorado e maior desempenho geral. </li></ul><br>  Atualmente, o maior problema que surge ao comparar o ClickHouse com o ELK √© a falta de solu√ß√µes para os logs de remessa, bem como a falta de documenta√ß√£o e aux√≠lios de treinamento sobre este t√≥pico.  Ao mesmo tempo, cada usu√°rio pode configurar o ELK usando o Digital Ocean Guide, que √© muito importante para a r√°pida implementa√ß√£o de tais tecnologias.  Existe um mecanismo de banco de dados aqui, mas ainda n√£o existe o Filebeat for ClickHouse.  Sim, existe um sistema <a href="https://www.fluentd.org/">fluente</a> e um sistema para trabalhar com logs de <a href="https://github.com/flant/loghouse">loghouse</a> , existe uma ferramenta de <a href="https://github.com/Altinity/clicktail">clicktail</a> para inserir dados de arquivos de log no ClickHouse, mas tudo isso leva mais tempo.  No entanto, o ClickHouse ainda lidera devido √† sua simplicidade, portanto, mesmo os iniciantes o instalam elementarmente e come√ßam a us√°-lo totalmente em apenas 10 minutos. <br><br>  Preferindo solu√ß√µes minimalistas, tentei usar o FluentBit, uma ferramenta para enviar logs com uma quantidade muito pequena de mem√≥ria, junto com o ClickHouse, enquanto evitava usar o Kafka.  No entanto, pequenas incompatibilidades, como <a href="https://github.com/fluent/fluent-bit/issues/848">problemas de formato de data</a> , devem ser corrigidas antes que isso possa ser feito sem uma camada proxy que converta dados do FluentBit em ClickHouse. <br><br>  Como alternativa ao Kibana, voc√™ pode usar o <a href="https://github.com/Vertamedia/clickhouse-grafana">Grafana</a> como <a href="https://github.com/Vertamedia/clickhouse-grafana">back-end</a> do ClickHouse.  Pelo que entendi, isso pode causar problemas de desempenho ao renderizar uma quantidade enorme de pontos de dados, especialmente nas vers√µes mais antigas do Grafana.  Na Qwintry, ainda n√£o tentamos isso, mas as queixas sobre isso de tempos em tempos aparecem no canal de suporte do ClickHouse no Telegram. <br><br><h3>  Substituindo o Google Big Query e o Amazon RedShift (solu√ß√£o para grandes empresas) </h3><br>  O caso de uso ideal para o BigQuery √© fazer o download de 1 TB de dados JSON e executar consultas anal√≠ticas neles.  O Big Query √© um √≥timo produto cuja escalabilidade √© dif√≠cil de superestimar.  Este √© um software muito mais complexo que o ClickHouse, executado em um cluster interno, mas do ponto de vista do cliente, ele tem muito em comum com o ClickHouse.  O BigQuery pode subir rapidamente de pre√ßo assim que voc√™ paga por cada SELECT, portanto, essa √© uma solu√ß√£o SaaS real com todos os seus pr√≥s e contras. <br><br>  O ClickHouse √© a melhor op√ß√£o quando voc√™ realiza muitas consultas computacionalmente caras.  Quanto mais consultas SELECT voc√™ executa a cada dia, mais faz sentido substituir o Big Query pelo ClickHouse, porque essa substitui√ß√£o economiza milhares de d√≥lares quando se trata de muitos terabytes de dados processados.  Isso n√£o se aplica aos dados armazenados, o que √© bastante barato para processar no Big Query. <br><br>  O artigo do cofundador da Altinity, Alexander Zaitsev, <a href="https://www.altinity.com/blog/2017/10/23/migration-to-clickhouse">‚ÄúMudando para ClickHouse‚Äù,</a> fala sobre os benef√≠cios dessa migra√ß√£o de DBMS. <br><br><h3>  Substituindo o TimescaleDB </h3><br>  O TimescaleDB √© uma extens√£o do PostgreSQL que otimiza o trabalho com s√©ries temporais de s√©ries temporais em um banco de dados regular ( <a href="https://docs.timescale.com/v1.0/introduction">https://docs.timescale.com/v1.0/introduction</a> , <a href="https://habr.com/ru/company/zabbix/blog/458530/">https://habr.com/en/company/zabbix/blog/458530 /</a> ). <br><br>  Embora o ClickHouse n√£o seja um concorrente s√©rio no nicho da s√©rie temporal, mas a estrutura da coluna e a execu√ß√£o de consultas de vetores, na maioria dos casos de processamento de consultas anal√≠ticas, √© muito mais r√°pido que o TimescaleDB.  Ao mesmo tempo, o desempenho de recebimento de dados do pacote ClickHouse √© cerca de tr√™s vezes maior, al√©m disso, usa 20 vezes menos espa√ßo em disco, o que √© realmente importante para o processamento de grandes quantidades de dados hist√≥ricos: <a href="https://www.altinity.com/blog/ClickHouse-for-time-series">https://www.altinity.com/blog/ClickHouse-for -time-series</a> . <br><br>  Diferentemente do ClickHouse, a √∫nica maneira de economizar espa√ßo em disco no TimescaleDB √© usar o ZFS ou sistemas de arquivos similares. <br><br>  As pr√≥ximas atualiza√ß√µes do ClickHouse provavelmente introduzir√£o a compacta√ß√£o delta, o que o tornar√° ainda mais adequado para o processamento e armazenamento de dados de s√©ries temporais.  O TimescaleDB pode ser uma escolha melhor do que uma ClickHouse nua nos seguintes casos: <br><br><ul><li>  pequenas instala√ß√µes com uma quantidade muito pequena de RAM (&lt;3 GB); </li><li>  um grande n√∫mero de pequenos INSERTs que voc√™ n√£o deseja armazenar em buffer em fragmentos grandes; </li><li>  melhor consist√™ncia, uniformidade e requisitos de ACID; </li><li>  Suporte PostGIS; </li><li>  mesclando com tabelas existentes do PostgreSQL, j√° que o Timescale DB √© essencialmente o PostgreSQL. </li></ul><br><h3>  Concorr√™ncia com os sistemas Hadoop e MapReduce </h3><br>  O Hadoop e outros produtos MapReduce podem executar muitos c√°lculos complexos, mas geralmente trabalham com grandes atrasos.O ClickHouse corrige esse problema processando terabytes de dados e fornecendo resultados quase instantaneamente.  Portanto, o ClickHouse √© muito mais eficiente para realizar pesquisas anal√≠ticas interativas e r√°pidas, o que deve ser interessante para especialistas em processamento de dados. <br><br><h3>  Competi√ß√£o com Pinot e Druida </h3><br>  Os concorrentes mais pr√≥ximos da ClickHouse s√£o o Pinot e o Druid, um produto de c√≥digo aberto colunar linearmente escal√°vel.  Um excelente trabalho comparando esses sistemas foi publicado em um artigo de <a href="https://medium.com/%40leventov/comparison-of-the-open-source-olap-systems-for-big-data-ClickHouse-druid-and-pinot-8e042a5ed1c7">Roman Leventov</a> de 1 de fevereiro de 2018. <br><br><img src="https://habrastorage.org/webt/4c/26/hb/4c26hbndeb9gj0mq86lyfrmpc0e.jpeg"><br><br>  Este artigo requer atualiza√ß√£o - ele afirma que o ClickHouse n√£o oferece suporte √†s opera√ß√µes UPDATE e DELETE, o que n√£o √© totalmente verdadeiro para as vers√µes mais recentes. <br><br>  N√£o temos experi√™ncia suficiente com esses DBMSs, mas n√£o gosto da complexidade da infraestrutura usada para executar o Druid e o Pinot - esse √© um monte de "partes m√≥veis" cercadas por Java por todos os lados. <br><br>  Druid e Pinot s√£o projetos da incubadora Apache, cujo progresso no desenvolvimento √© coberto em detalhes pelo Apache nas p√°ginas de seus projetos GitHub.  Pinot apareceu na incubadora em outubro de 2018 e Druid nasceu 8 meses antes - em fevereiro. <br><br>  A falta de informa√ß√µes sobre como o AFS funciona me d√° algumas, e talvez perguntas tolas.  Gostaria de saber se os autores de Pinot notaram que a Apache Foundation √© mais disposta a Druid, e essa atitude em rela√ß√£o ao concorrente causou inveja?  O desenvolvimento do Druid desacelerar√° e o Pinot acelerar√° se os patrocinadores que apoiam o primeiro de repente se interessarem pelo √∫ltimo? <br><br><h3>  Desvantagens do ClickHouse </h3><br>  Imaturidade: Obviamente, essa ainda n√£o √© uma tecnologia chata, mas, de qualquer forma, nada semelhante √© observado em outros DBMSs colunares. <br><br>  Pastilhas pequenas n√£o funcionam bem em alta velocidade: as pastilhas devem ser divididas em peda√ßos grandes, porque o desempenho de pastilhas pequenas diminui proporcionalmente ao n√∫mero de colunas em cada linha.  √â assim que o ClickHouse armazena dados no disco - cada coluna significa 1 arquivo ou mais; portanto, para inserir 1 linha contendo 100 colunas, voc√™ deve abrir e gravar pelo menos 100 arquivos.  √â por isso que um intermedi√°rio √© necess√°rio para armazenar inser√ß√µes em buffer (a menos que o pr√≥prio cliente forne√ßa buffer) - geralmente √© Kafka ou algum tipo de sistema de gerenciamento de filas.  Voc√™ tamb√©m pode usar o mecanismo de tabela Buffer para copiar posteriormente grandes blocos de dados nas tabelas MergeTree. <br><br>  As jun√ß√µes de tabela s√£o limitadas pela RAM do servidor, mas pelo menos elas est√£o l√°!  Por exemplo, Druid e Pinot n√£o possuem essas conex√µes, uma vez que s√£o dif√≠ceis de implementar diretamente em sistemas distribu√≠dos que n√£o suportam a movimenta√ß√£o de grandes quantidades de dados entre n√≥s. <br><br><h3>  Conclus√µes </h3><br>  Nos pr√≥ximos anos, planejamos fazer uso extensivo do ClickHouse no Qwintry, pois esse DBMS fornece um excelente equil√≠brio de desempenho, baixa sobrecarga, escalabilidade e simplicidade.  Tenho certeza de que ele come√ßar√° a se espalhar rapidamente assim que a comunidade ClickHouse tiver mais maneiras de us√°-lo em instala√ß√µes pequenas e m√©dias. <br><br><h3>  Um pouco de publicidade :) </h3><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando aos seus amigos o <a href="https://ua-hosting.company/cloudvps/nl">VPS baseado em nuvem para desenvolvedores a partir de US $ 4,99</a> , um <b>anal√≥gico exclusivo de servidores</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">b√°sicos</a> <b>que foi inventado por n√≥s para voc√™:</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">Toda a verdade sobre o VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10GB DDR4 480GB SSD 1Gbps de 10GB de US $ 19 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>Dell R730xd 2 vezes mais barato no data center Equinix Tier IV em Amsterd√£?</b>  Somente temos <b><a href="https://ua-hosting.company/serversnl">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</a> na Holanda!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99!</b></b>  Leia sobre <a href="https://habr.com/company/ua-hosting/blog/329618/">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://habr.com/company/ua-hosting/blog/329618/">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483112/">https://habr.com/ru/post/pt483112/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483082/index.html">A ca√ßa √† vulnerabilidade √© 7% mais eficaz</a></li>
<li><a href="../pt483084/index.html">C√¢mera com fun√ß√£o de rastreamento</a></li>
<li><a href="../pt483086/index.html">Resultados de 2019: quais ativos foram os mais rent√°veis ‚Äã‚Äãpara investidores russos</a></li>
<li><a href="../pt483094/index.html">Como realizei meu sonho quando visitei o escrit√≥rio russo da Microsoft</a></li>
<li><a href="../pt483110/index.html">Rostov do Don: empresas, comunidades e eventos de TI em 2019</a></li>
<li><a href="../pt483114/index.html">As janelas modais que merecemos</a></li>
<li><a href="../pt483116/index.html">Fazendo um tubo de telesc√≥pio em casa</a></li>
<li><a href="../pt483118/index.html">O que ser√° adicionado ao JavaScript em 2020</a></li>
<li><a href="../pt483120/index.html">Como conectar cart√µes em uma proje√ß√£o elips√≥ide, se isso n√£o for fornecido?</a></li>
<li><a href="../pt483124/index.html">O gadget mais maci√ßo em um futuro pr√≥ximo (n√£o um smartphone)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>