<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèº ü§≥ üò∂ Introduction au nouveau syst√®me de cartes de tuiles Unity üë§ üë≤üèº üñºÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La familiarit√© avec le syst√®me de tuiles Unity 2D offre une excellente occasion de gagner du temps aux d√©veloppeurs ind√©pendants et aux studios de jeu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introduction au nouveau syst√®me de cartes de tuiles Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412765/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  La familiarit√© avec le syst√®me de tuiles Unity 2D offre une excellente occasion de gagner du temps aux d√©veloppeurs ind√©pendants et aux studios de jeux pour prototyper et cr√©er des jeux 2D de haute qualit√©. <br><br>  Sans ce syst√®me, vous pouvez passer des jours, voire des semaines, √† √©crire votre propre syst√®me de cartes de tuiles ou √† traiter celui de quelqu'un d'autre.  Et ce n'est que de la programmation, mais qu'en est-il de l'√©diteur de carte de tuiles? <br><br>  Le nouveau syst√®me est gratuit et est int√©gr√© directement dans l'√©diteur Unity.  Il fournit de nombreuses fonctionnalit√©s que nous couvrirons dans ce tutoriel. <br><br>  Dans cet article, nous allons utiliser un simple jeu 2D en mosa√Øque pour d√©couvrir ce qui suit: <br><br><ul><li>  Fonctionnement des cartes tuiles. </li><li>  Comment activer les cartes de tuiles dans Unity et personnaliser la grille. </li><li>  Comment ajouter des images-objets √† un projet, les convertir en tuiles, puis les ajouter √† la palette de tuiles. </li><li>  Comment utiliser les outils de l'√©diteur de tuiles pour cr√©er des niveaux. </li><li>  Comment trier les tuiles et les placer dans diff√©rentes couches. </li><li>  Comment ajouter des tuiles de physique Unity. </li><li>  Comment colorer dynamiquement les carreaux. </li><li>  Comment changer les tuiles pr√©fabriqu√©es en utilisant du code et une logique natifs. </li><li>  Comment ajouter vos propres extensions et scripts de cartes de tuiles au projet. </li></ul><a name="habracut"></a><br>  Ouais, la liste √©tait super.  Mais n'ayez pas peur - lorsque nous commencerons √† comprendre, vous comprendrez rapidement √† quel point ces outils sont simples. <br><br><blockquote>  <em>Remarque:</em> ce didacticiel suppose que vous ma√Ætrisez bien l'√©diteur Unity.  Si vous pensez que vous ne le connaissez pas, le didacticiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction √† Unity</a> contient tout ce dont vous avez besoin pour apprendre ce didacticiel.  De plus, vous avez besoin de la version Unity 2017.3 ou sup√©rieure. </blockquote><br><h2>  Qu'est-ce qu'un jeu de tuiles? </h2><br>  Un jeu de tuiles 2D est un jeu dans lequel les niveaux ou les zones de jeu sont constitu√©s de nombreuses petites tuiles (tuiles) qui forment ensemble une grille de tuiles.  Parfois, les diff√©rences entre les tuiles peuvent √™tre √©videntes, et parfois elles semblent solides et indiscernables pour les joueurs. <br><br>  La collection de tuiles dans le jeu est appel√©e un jeu de tuiles, et chaque tuile est g√©n√©ralement un sprite, une partie d'une feuille de sprites.  Si vous souhaitez mieux g√©rer les feuilles de sprites, nous avons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tutoriel</a> qui d√©crit les feuilles de sprites Unity. <br><br>  Comme vous pouvez le voir dans ce tutoriel, les tuiles sont g√©n√©ralement des carr√©s.  Mais ils peuvent prendre une autre forme - des rectangles, des parall√©logrammes ou des hexagones.  Dans les jeux, une vue de dessus ou de c√¥t√© est g√©n√©ralement utilis√©e, mais parfois dans les jeux de tuiles, 2.5D est √©galement utilis√©. <br><br>  Peut-√™tre connaissez-vous d√©j√† les deux jeux les plus populaires qui utilisent le syst√®me de cartes de tuiles: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Starbound</i></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Terraria</i></a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aac/428/8ee/aac4288ee7c7868202364a050a82e34a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/650/d2d/db4/650d2ddb41661d2b4ae2b948fccee019.png"></div><br><h2>  Se rendre au travail </h2><br>  T√©l√©chargez le <a href="">mat√©riel</a> du projet pour ce didacticiel et d√©compressez le fichier .zip. <br><br>  Lancez l'√©diteur Unity et chargez le projet <em>Rayzor-starter √†</em> partir des mat√©riaux de projet d√©ball√©s. <br><br>  Voici avec quoi vous travaillerez dans ce projet: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e3/ae3/784/2e3ae3784a7e0cda552c51902367eb8a.png"></div><br><ul><li>  Cinemachine / Gizmos: Unity Cinemachine est ajout√© uniquement pour impl√©menter une cam√©ra facile √† utiliser qui suit le lecteur. </li><li>  Palettes: dans ce dossier, nous stockons nos propres palettes de tuiles. </li><li>  Pr√©fabriqu√©s: quelques pr√©fabriqu√©s pr√©fabriqu√©s que nous utilisons plus tard dans le jeu. </li><li>  Sc√®nes: ici, nous allons ouvrir et enregistrer des sc√®nes. </li><li>  Scripts: quelques scripts simples pour contr√¥ler le mouvement du joueur, la logique de la collision des pi√®ges et gagner / perdre dans le jeu.  Ce dossier contient √©galement les scripts Unity Tilemap du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel Github Unity 2D Extras</a> , que nous utiliserons plus tard. </li><li>  Sfx: sons pour le jeu. </li><li>  Sprites: sprites 2D √† partir desquels nous allons cr√©er des palettes de tuiles.  Ils sont tir√©s d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pack de grottes et de donjons pour roguelike</a> .  L'auteur du pack est kenney.nl. </li></ul><br><h2>  Cr√©ation de jeux </h2><br>  Ouvrez la sc√®ne du <em>jeu</em> depuis le dossier <em>Sc√®nes</em> . <br><br>  Cliquez sur le bouton <em>Lecture</em> dans l'√©diteur pour lancer le jeu.  Dans la fen√™tre de <em>jeu</em> , d√©placez le h√©ros avec les touches WASD ou les ¬´fl√®ches¬ª. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20e/1a1/8a8/20e1a18a8e44d9eeef984cb19e43527e.gif"></div></div></div><br>  Pendant que le h√©ros se prom√®ne dans le fond apparemment sans fin de la cam√©ra avec la couleur # 00000, perdu dans le vide. <br><br>  Pour r√©soudre ce probl√®me, nous avons besoin d'outils de tuiles 2D pour cr√©er des niveaux et des m√©canismes de jeu int√©ressants. <br><br><h3>  Conna√Ætre la palette de carreaux </h3><br>  Dans l'√©diteur, cliquez sur <em>Fen√™tre -&gt; Palette de tuiles</em> pour ouvrir la fen√™tre Palette de tuiles 2D. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9c/4c4/681/e9c4c46814518dadf262f42ceab70563.png"></div><br>  Cette fen√™tre sera votre meilleur ami lorsque vous travaillerez sur des jeux de tuiles dans Unity. <br><br><ol><li>  Cette s√©rie d'ic√¥nes fournit des outils de base pour manipuler les tuiles, dessiner et supprimer </li><li>  Ce s√©lecteur vous permet de cr√©er diff√©rentes palettes qui peuvent √™tre per√ßues comme des palettes de dessin, dans lesquelles nous pla√ßons les "couleurs", et dans ce cas - des tuiles. </li><li>  Ce s√©lecteur vous permet de cr√©er des pinceaux avec diff√©rents comportements.  Vous pouvez ajouter vos propres pinceaux, dont le comportement est diff√©rent du pinceau par d√©faut (par exemple, dessiner des carreaux pr√©fabriqu√©s avec des fonctionnalit√©s suppl√©mentaires) </li></ol><br>  Cliquez sur <em>Cr√©er une nouvelle palette</em> et nommez la palette <em>RoguelikeCave</em> .  Ne modifiez pas les options de grille et de cellule. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab3/a35/339/ab3a35339e71da7a385d6c778abd4f7d.png"></div><br>  Cliquez sur <em>Cr√©er</em> et choisissez d'enregistrer la nouvelle palette dans le <em>dossier Assets \ Palettes du</em> projet.  Dans ce document, cr√©ez un nouveau dossier <em>RoguelikeCave</em> . <br><br>  Maintenant, la structure des dossiers de votre projet devrait ressembler √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/362/087/33a/36208733a60c0a788173c9cb199a1423.png"></div><br>  Dans la fen√™tre de l'√©diteur de <em>palette de tuiles</em> , <em>RoguelikeCave</em> doit √™tre s√©lectionn√©;  √† ce stade, nous n'avons toujours pas de tuiles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/0f3/e89/9f80f3e894a6a3d64c3f9951b03046e5.png"></div><br>  Comment un artiste peut-il cr√©er ses chefs-d'≈ìuvre s'il n'a pas de mat√©riaux? <br><br>  Sans fermer la fen√™tre Tile Palette, s√©lectionnez le dossier de projet <em>Sprites / roguelike-cave-pack</em> et d√©veloppez l'actif <em>roguelikeDungeon transparent.png</em> .  S√©lectionnez ensuite tous les sprites dans cette feuille de sprites: s√©lectionnez le premier sprite, maintenez la touche Maj et s√©lectionnez le dernier sprite. <br><br>  Faites glisser tous les sprites s√©lectionn√©s dans la fen√™tre RoguelikeCave de la palette de tuiles: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/d5b/aae/055d5baae6a8c222f66f0fec36824e05.gif"></div></div></div><br>  Faites glisser et d√©posez les images-objets dans la fen√™tre de la palette de tuiles et s√©lectionnez un emplacement pour stocker les ressources dans Unity. <br><br>  Cr√©ez un nouveau dossier <em>Tiles</em> dans <em>Assets / Palettes / RoguelikeCave</em> et s√©lectionnez ce dossier comme emplacement de stockage: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16f/609/327/16f6093279a3a3b3c5c728ebdcd07afd.png"></div><br>  Unity g√©n√©rera un √©l√©ment de tuile pour chaque sprite ajout√© √† partir de la feuille de sprite.  Attendez la fin du processus, puis augmentez la taille de la fen√™tre de la palette de tuiles et admirez les rang√©es √©gales de belles nouvelles tuiles situ√©es dans la palette RoguelikeCave: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27d/c87/f36/27dc87f368115a032b42d4b8058bdd1d.png"></div><br>  R√©p√©tez le processus ci-dessus pour cr√©er une palette de tuiles √† l'aide de la fen√™tre <em>Palette de tuiles</em> , mais cette fois nommez la nouvelle palette <em>RoguelikeCustom</em> . <br><br>  Placez la nouvelle palette dans un nouveau dossier.  Nommez le dossier <em>RoguelikeCustom</em> et d√©placez-le dans le <em>dossier Assets / Palettes du</em> projet. <br><br>  Cette fois, en utilisant le processus d√©crit ci-dessus, utilisez les sprites de la <em>feuille Assets / Sprites / roguelike-custom / roguelike-normal-cutdown-sheet.png</em> pour remplir les tuiles de la nouvelle palette.  Cr√©ez un dossier <em>Tuiles</em> dans le dossier de la palette <em>RoguelikeCustom</em> et d√©placez-y les ressources de tuiles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/402/c0d/fb6/402c0dfb6ca659f755ba63cafa6c288b.png"></div><br>  R√©jouissez-vous pour vous-m√™me, maintenant vous connaissez la magie de la cr√©ation d'une palette de carreaux! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/782/ed3/b0f/782ed3b0f5bc2546c2116c07f9652f7f.png"></div><br><h3>  Tile Map Mesh </h3><br>  Ouvrez le menu <em>GameObject</em> en haut de l'√©diteur Unity (ou la barre de menus Unity si vous utilisez MacOS), cliquez sur <em>Objet 2D</em> puis sur <em>Tilemap</em> pour cr√©er une nouvelle grille Tilemap: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/99d/e4e/25999de4efb34557bac40669f988fcdd.png"></div><br>  Vous devriez voir qu'une nouvelle <em>grille</em> GameObject <em>a √©t√©</em> ajout√©e √† la hi√©rarchie des sc√®nes.  D√©veloppez-le et s√©lectionnez le <em>Tilemap</em> GameObject <em>int√©gr√©</em> . <br><br>  <em>Consid√©rez</em> ce <em>Tilemap</em> comme une couche (peut-√™tre l'une des nombreuses) dans votre jeu.  Vous pouvez ajouter de nouveaux objets pour cr√©er des couches Tilemap suppl√©mentaires. <br><br>  Dans l'inspecteur, vous verrez deux composants que Unity a automatiquement ajout√©s √† ce GameObject: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a0/f58/3fa/1a0f583faa33dfc44002dde103c8d97e.png"></div><br><ul><li> Le composant <code>Tilemap</code> utilis√© par le moteur Unity pour stocker les sprites dans le circuit marqu√© avec le composant <code>Grid</code> - dans notre cas, c'est GameObject <em>Grid</em> .  Lorsque vous cr√©ez Tilemap pour la premi√®re fois, vous n'avez pas vraiment √† vous soucier de toutes les caract√©ristiques techniques de la fa√ßon dont Unity communique entre tous ces composants. </li><li>  <code>Tilemap Renderer</code> d√©signe le mat√©riau qui sera utilis√© pour le rendu des tuiles dans Tilemap.  Il vous permet √©galement de configurer les propri√©t√©s de tri de cette couche Tilemap. </li></ul><br>  Renommez GameObject <em>Tilemap</em> en <em>BaseLayer</em> . <br><br><h3>  Utilisation de divers outils de dessin de palette de tuiles </h3><br>  Basculez dans l'√©diteur en mode Sc√®ne. <br><br>  Sans fermer la palette de tuiles, s√©lectionnez la palette RoguelikeCave, puis s√©lectionnez l'outil <em>pinceau</em> (ou appuyez sur <em>B</em> ).  S√©lectionnez une tuile de sable comme indiqu√© ci-dessous: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcd/44c/cb4/dcd44ccb47904a96bcae52075ea37e3e.png"></div><br>  Dans la fen√™tre Sc√®ne, d√©placez le curseur sur la grille √† c√¥t√© du lecteur.  La brosse pour carreaux de sable se fixera sur la grille. <br><br>  En maintenant le bouton gauche de la souris enfonc√©, tracez une zone rectangulaire autour du lecteur.  Il sera dessin√© sur la couche Tilemap BaseLayer: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c5/6d6/068/3c56d606885a624960d5ed83106893dd.gif"></div></div></div><br>  Le dessin de grandes zones peut √™tre une t√¢che monotone, il existe donc un pinceau <em>Bo√Æte remplie</em> qui peut √™tre utilis√© pour peindre de grandes zones.  Dans la fen√™tre Palette de tuiles, cliquez sur l' <em>ic√¥ne de pinceau carr√©</em> (ou appuyez sur <em>U</em> ). <br><br>  Revenez √† l'√©diteur et dessinez un rectangle encore plus grand autour du lecteur en appuyant sur le bouton gauche de la souris et en le maintenant enfonc√©, en faisant glisser le curseur du coin sup√©rieur gauche vers le coin inf√©rieur droit: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85d/f5f/35c/85df5f35c7f37f325e814568d970553f.gif"></div></div></div><br>  Bien que nous ayons ajout√© un peu de couleur au jeu, ce donjon de sable semble terne.  Il est temps d'ajouter quelques d√©tails! <br><br>  Utilisez l'option de menu <em>GameObject -&gt; Objet 2D -&gt; Tilemap</em> pour cr√©er une nouvelle couche Tilemap.  Cette fois, ce sera le seul objet cr√©√© dans la hi√©rarchie, car nous avons d√©j√† une grille appropri√©e.  Renommez cette couche en <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/074/4a8/b33/0744a8b330652fe6f4ba7b3939d987ec.png"></div><br>  Dans la fen√™tre de la palette de tuiles, basculez le <em>Tilmap actif</em> sur la couche <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/272/dc3/87c/272dc387cdf5f84261eebf6da3dde2a9.png"></div><br>  S√©lectionnez l'outil <em>pinceau</em> ( <em>B</em> ), puis dessinez les objets dispers√©s sur la carte dans la fen√™tre Sc√®ne: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbb/4dd/f6b/bbb4ddf6b3f5ba0393f5a6d3d04254eb.png"></div><br>  D√©sactivez puis r√©activez <em>DungeonFloorDecoration</em> dans la hi√©rarchie GameObject pour voir comment le rendu sur le Tilemap actif modifie la couche DungeonFloorDecoration, et toutes les tuiles rendues tombent sur cette nouvelle couche: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe3/416/3a0/fe34163a070ac1c85f8d0aee80356a90.gif"></div></div></div><br>  Cr√©ez √† nouveau une couche Tilemap √† l'aide de l' <em>option GameObject -&gt; Objet 2D -&gt; Tilemap</em> .  Appelez-le <em>Collideable</em> .  √Ä l'avenir, nous l'utilisons pour cr√©er des murs et des bordures. <br><br>  Basculez Active Mapmap dans la fen√™tre de la palette de tuiles sur <em>Collideable</em> .  S√©lectionnez l'outil pinceau ( <em>B</em> ), puis dessinez les tuiles suivantes pour construire un mur autour de la zone de jeu.  Les zones surlign√©es en rouge dans l'image ci-dessous sont les nouvelles pi√®ces √† ajouter: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f0/7e3/004/3f07e30041691b855a4d1870d69f2e34.png"></div><br>  Jetez un ≈ìil √† la capture d'√©cran ci-dessous de la fen√™tre de la palette de tuiles pour savoir o√π trouver les tuiles n√©cessaires pour construire le mur.  N'oubliez pas que vous pouvez utiliser les combinaisons CTRL-Z ou CMD-Z pour annuler l'action ou effacer les erreurs √† l'aide du pinceau actuel (tout en maintenant <em>Shift</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  Lancez le jeu dans l'√©diteur et essayez de traverser le mur: <br><br><div class="spoiler">  <b class="spoiler_title">Qui a activ√© le mode noclip?</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49d/6fb/e88/49d6fbe88e6368ae9d9d47caa6ed2ece.gif"></div></div></div><br>  Vous ne vous attendiez pas √† √ßa? <br><br>  Le probl√®me est que nous venons de dessiner les tuiles standard et n'avons pas encore appliqu√© l'Unit√© de physique magique √† la couche Tilemap. <br><br>  S√©lectionnez GameObject <em>Collideable</em> et ajoutez un nouveau composant en cliquant sur le bouton <em>Ajouter un composant</em> dans la fen√™tre <em>Inspecteur</em> ;  Dans le champ de recherche, entrez <em>Tilemap Collider 2D</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15e/7ec/614/15e7ec614a110e3de5020f7b5f6a2d4d.png"></div><br>  Ce composant a √©t√© cr√©√© sp√©cifiquement pour les jeux de tuiles Unity 2D.  Il applique simplement la forme du collisionneur physique √† toutes les tuiles de la couche √† laquelle il a √©t√© ajout√©, sans effectuer d'autre travail. <br><br>  Red√©marrez le jeu et essayez de traverser le mur.  Acc√®s refus√©! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/8f1/a3a/2b28f1a3a2f60422649719e084a9fd08.gif"></div></div></div><br><blockquote>  <em>Remarque:</em> parfois, lorsque vous d√©placez la cam√©ra, vous pouvez remarquer de petites lignes noires entre certaines tuiles.  Cela semble √™tre un probl√®me de mouvement de cam√©ra dans les projets avec le syst√®me 2D Tilemap Unity.  Vous pouvez vous en d√©barrasser presque compl√®tement en d√©sactivant l'anti-cr√©nelage dans les param√®tres graphiques.  Cependant, m√™me si cela se fait dans le cadre du projet de passation des march√©s, l'effet est encore l√©g√®rement perceptible.  La solution √† ce probl√®me peut √™tre d'ajouter votre propre script de mouvement de cam√©ra avec un d√©calage de pixel.  Une bonne discussion de ce probl√®me peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </blockquote><br>  Les collisions fonctionnent bien et vous pourriez penser que cela suffit.  Mais pour l'instant, les collisionneurs ne sont pas optimis√©s efficacement.  En mode Sc√®ne, effectuez un zoom avant sur une partie du mur et observez les contours des collisionneurs: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ea/3f8/af3/4ea3f8af32c2e23852a146578a7f9f49.png"></div><br>  Il y a un collisionneur autour de chaque tuile.  Les sections de mur centrales n'ont pas besoin de ces collisionneurs suppl√©mentaires. <br><br>  Avec GameObject <em>Collideable s√©lectionn√©</em> , ajoutez-y le composant <em>Composite Collider 2D</em> .  Cela ajoutera √©galement automatiquement RigidBody2D. <br><br>  D√©finissez le param√®tre <em>BodyType</em> RigidBody2D sur <em>Statique</em> , puis cochez la case <em>Utilis√© par composite</em> dans le composant <em>Tilemap Collider 2D</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ca/12b/9e0/2ca12b9e01baa5b477288bc06cf546cf.png"></div><br>  Apr√®s cela, vous remarquerez que ces collisionneurs carr√©s inutiles au milieu des murs disparaissent. <br><br>  Terminez la cr√©ation des murs en les construisant et en les fermant en haut, environ 16 tuiles de haut.  N'oubliez pas.  que Collideable doit √™tre s√©lectionn√© en tant que Tilmap actif de la <em>fen√™tre</em> Palette de tuiles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e6/33f/81d/7e633f81d090fd304dcee26abb4cf760.png"></div><br>  La section du donjon ne sera pas de difficult√© pour notre h√©ros sans obstacles.  Nous allons maintenant commencer √† travailler sur la cr√©ation de la salle de la mort, compl√©t√©e par de magnifiques couloirs de marbre anciens.  Apr√®s avoir surmont√© tous ces obstacles, le joueur recevra une r√©compense - une montagne d'or. <br><br>  Pour dessiner ces couloirs, nous utiliserons le pinceau √† carreaux sp√©cial <em>Rule Tile</em> .  Comme vous l'avez vu au d√©but du didacticiel, des scripts de tuiles suppl√©mentaires du r√©f√©rentiel Github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unity 2D Extras</a> ont d√©j√† √©t√© ajout√©s au projet.  L'un d'eux est Rule Tile. <br><br>  La tuile de r√®gle nous permet de d√©finir des r√®gles sur les tuiles √† dessiner en fonction des tuiles voisines que nous avons. <br><br>  Cliquez avec le bouton droit sur le dossier <em>Prefabs</em> du projet et s√©lectionnez <em>Cr√©er -&gt; Mosa√Øque de r√®gles</em> (cet √©l√©ment doit √™tre en haut du menu).  Nommez le nouvel √©l√©ment <em>MarbleFloorRuleTile</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/702/42b/66c/70242b66c05805fb9a147521da24aa89.png"></div><br>  S√©lectionnez ce nouveau <em>MarbleFloorRuleTile</em> et utilisez l'inspecteur pour d√©finir <em>Sprite par d√©faut</em> sur <code>roguelikeDungeon_transparent_335</code> .  Ajoutez ensuite une nouvelle r√®gle de r√®gle de tuilage en cliquant sur l'ic√¥ne <em>+</em> .  S√©lectionnez la valeur <code>roguelikeDungeon_transparent_339</code> pour <em>Sprite de</em> cette r√®gle et cliquez sur tous les carr√©s ext√©rieurs dans le sch√©ma de r√®gles afin que chacun ait une fl√®che verte pointant vers l'ext√©rieur: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/546/707/124/546707124181cac98c682dfadeb56491.gif"></div></div></div><br>  En utilisant l'outil pinceau de remplissage de bo√Æte ( <em>B</em> ) dans la palette de tuiles et en s√©lectionnant la couche de base <em>Tilemap</em> , dessinez une section droite du mur de marbre.  Il faut qu'il recouvre tout l'espace libre du sol. <br><br>  Vous pouvez remarquer que lorsque nous faisons cela, le calque fermera les carreaux de mur avec des collisionneurs, car l'ordre des calques n'a pas encore √©t√© d√©fini.  Cela peut √™tre facilement r√©solu en s√©lectionnant GameObject <em>Collideable</em> et en modifiant l' <em>ordre dans la couche</em> du composant <em>Tilemap Renderer</em> √† une valeur plus √©lev√©e ( <em>5</em> suffira): <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/314/631/467/314631467ec638cad00a0082fae58113.gif"></div></div></div><br>  Revenez au dossier <em>Prefabs</em> du projet, ouvrez la fen√™tre Tile et s√©lectionnez la palette RoguelikeCave, puis faites glisser <em>MarbleFloorRuleTile</em> vers un emplacement vide sur la palette: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de3/c7b/15b/de3c7b15b5b9e8531b15824c196d480d.gif"></div></div></div><br>  Utilisez le pinceau de remplissage de bo√Æte et dessinez quelques sections du sol en marbre dans la pi√®ce: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/092/120/1ff/0921201ff5eb1be81f34bfebff121079.gif"></div></div></div><br>  Notez qu'une tuile de r√®gle personnalis√©e, compl√®tement entour√©e de tous les angles et faces, devient une tuile d√©cor√©e (l'image-objet s√©lectionn√©e dans l'√©diteur de r√®gles de tuilage). <br><br><h3>  Ceci est un pi√®ge! </h3><br>  Non, nous n'ajouterons pas l'amiral Akbar au jeu en tant que personnage.  Nous allons cr√©er une brosse √† carreaux pour le pr√©fabriqu√© du pi√®ge, que nous utiliserons pour dessiner des pi√®ges qui tireront avec des lames rotatives! <br><br>  Cr√©ez un nouveau GameObject vide dans la hi√©rarchie et nommez-le <em>ShootingTrap</em> .  Cr√©ez un enfant GameObject vide dans ShootingTrap.  Nommez-le <em>Sprite</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66e/754/55e/66e75455eda0bbdb02033ebc5cff618f.png"></div><br>  S√©lectionnez <em>Sprite</em> et ajoutez-y le composant <em>Sprite Renderer</em> .  D√©finissez le <em>calque de tri</em> sur <em>Player</em> et l' <em>ordre dans le calque</em> sur <em>1</em> afin qu'il s'affiche au-dessus du reste des calques.  S√©lectionnez le champ <em>Sprite</em> et d√©finissez <em>roguelikeDungeon_transparent_180</em> comme sprite. <br><br>  Faites maintenant pivoter la transformation de l'objet <em>Sprite</em> de <em>-90</em> dans l'axe <em>Z</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/540/666/ded/540666ded98bc99613b7dd5d6c7beeb7.png"></div><br>  Ensuite, revenez √† GameObject <em>ShootingTrap</em> et ajoutez un nouveau composant √† l'aide de l'inspecteur.  Dans le champ de recherche, recherchez <em>Shooting Trap</em> et joignez ce script. <br><br>  Ce script est ajout√© aux fichiers de projet que vous avez t√©l√©charg√©s;  en fait, il lance la corutine toutes les deux secondes, cr√©ant une instance pr√©fabriqu√©e de la lame de scie rotative (ou de tout autre pr√©fabriqu√©) dans la position actuelle du pi√®ge. <br><br>  D√©finissez le param√®tre <em>Item to Shoot Prefab</em> du composant Shooting Trap sur <em>Projectile</em> (le pr√©fabriqu√© se trouve dans <em>/ Assets / Prefabs</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a59/614/6dc/a596146dc4ec7d91eb3f17e9976f5945.png"></div><br>  Relancez le jeu dans l'√©diteur et utilisez le mode Sc√®ne pour trouver le pi√®ge.  Elle travaille! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef0/771/5ae/ef07715aed64732a12386defeec1b1cb.gif"></div></div></div><br>  Faites glisser une copie de <em>ShootingTrap</em> de la hi√©rarchie vers le <em>dossier / Assets / Prefabs du</em> projet pour cr√©er un pr√©fabriqu√©.  Supprimez ShootingTrap de la hi√©rarchie. <br><br>  Nous utilisons un autre script de pinceau de tuiles appel√© <em>PrefabBrush</em> pour cr√©er un pinceau qui peut dessiner des pr√©fabriqu√©s sur des couches Tilemap. <br><br>  Cliquez avec le bouton droit sur le <em>dossier / Assets / Prefabs du</em> projet et s√©lectionnez <em>Cr√©er -&gt; Pinceau pr√©fabriqu√©</em> .  Nommez l'objet <em>PrefabBrush</em> . <br><br>  Utilisez l'inspecteur pour d√©finir le param√®tre <em>Prefabs Size</em> PrefabBrush sur <em>1</em> et le param√®tre <em>Element 0</em> sur <em>ShootingTrap</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/58e/0df/c8458e0df00c239708a275d5c17fd25b.png"></div><br>  Cr√©ez une nouvelle couche Tilemap appel√©e <em>Pi√®ges</em> dans la <em>grille</em> et ouvrez la fen√™tre Palette de tuiles. <br><br>  S√©lectionnez le pinceau de tuile ordinaire ( <em>B</em> ) et utilisez le menu d√©roulant en bas de la fen√™tre de la palette de tuiles pour s√©lectionner <em>PrefabBrush</em> .  S√©lectionnez <em>Pi√®ges √† plan de</em> mappage actifs comme calque et utilisez la fen√™tre Sc√®ne pour dessiner plusieurs pi√®ges pr√©fabriqu√©s le long du bord gauche de la pi√®ce. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce1/f3a/3b6/ce1f3a3b6fbea97b23f8a388404772e8.gif"></div></div></div><br>  D√©veloppez les <em>pi√®ges</em> GameObject dans la hi√©rarchie et testez la valeur du <em>d√©lai de d√©marrage de la prise de vue</em> pour chaque valeur sur chaque Gameobject <em>ShootingTrap</em> √† l'aide du script Shooting Trap dans l'inspecteur.  Ajoutez 0,25 √† la valeur de chaque pi√®ge, c'est-√†-dire: <br><br><ul><li>  Premier ShootingTrap -&gt; D√©lai de d√©marrage de la prise de vue = 0,1 </li><li>  Second ShootingTrap -&gt; D√©lai de d√©marrage de la prise de vue = 0,35 </li><li>  Troisi√®me ShootingTrap -&gt; Shoot Start Delay = 0.6 </li><li>  Et ainsi de suite ... </li></ul><br>  Lancez le jeu et passez le test, si vous l'osez. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/809/ea5/02b809ea5ea2b177b3da6d537a447794.gif"></div></div></div><br><h3>  Objectif ultime </h3><br>  Le but de ce mini donjon est d'obtenir un tas d'or.  La renomm√©e et la fortune attendent ceux qui l'atteignent, √©vitant les lames volantes mortelles. <br><br>  Cr√©ez une nouvelle couche Tilemap appel√©e <em>Objectif</em> dans la <em>grille</em> GameObject.  S√©lectionnez <em>Objectif</em> et modifiez la valeur de l' <em>ordre de rendu Tilemap dans la couche</em> √† <em>2</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ece/7bf/f1f/ece7bff1f2eec46dab6974ec9293d8e8.png"></div><br>  Sans fermer la fen√™tre Tile Palette, assurez-vous que PrefabBrush est toujours s√©lectionn√©.  Faites en <em>sorte que l'√©l√©ment 0 fasse</em> r√©f√©rence au <em>pr√©r√©glage d'</em> <em>objectif</em> dans le <em>dossier / Assets / Prefabs du</em> projet. <br><br>  Il s'agit d'un pr√©fabriqu√© avec une montagne de sprite or, avec Box Collider 2D avec Is Trigger <code>Goal.cs</code> , une source sonore ajout√©e et un script <code>Goal.cs</code> simple qui reproduit le son de la cible et red√©marre le niveau lorsque le joueur tombe dans la zone de d√©clenchement. <br><br>  Utilisez la brosse √† carreaux standard pour dessiner une tuile pr√©fabriqu√©e cible en haut de la pi√®ce derri√®re les pi√®ges: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/970/1c0/ee49701c003075b4bb2a048b6d2e8039.png"></div><br>  Red√©marrez le jeu et essayez d'atteindre l'objectif.  Lorsque vous arrivez √† cette <code>OnTriggerEnter2D()</code> , la logique <code>OnTriggerEnter2D()</code> de <code>Goal.cs</code> , reproduisant l'effet sonore et red√©marrant le niveau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c1/736/d0e/2c1736d0e9eb131101cef9c7ee08a18d.png"></div><br><h3>  Touche finale </h3><br>  Maintenant, le donjon est trop l√©ger et trop libre.  Nous pouvons y ajouter du style en passant √† un mat√©riau sprite 2D qui peut r√©pondre √† la lumi√®re. <br><br>  S√©lectionnez les objets Sprite Player, Goal et ShootingTrap, et <em>demandez</em> au Sprite Renderer <em>Material d'</em> utiliser <em>SpriteLightingMaterial</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e8/7ce/36a/9e87ce36a51b69b514f71cf71992f4b5.png"></div><br>  C'est un mat√©riau avec un shader <em>Sprite /</em> Diffus attach√©.  Il permet √† l'√©clairage de la sc√®ne d'affecter les sprites. <br><br>  Dans la <em>grille</em> GameObject <em>,</em> s√©lectionnez les <em>objets BaseLayer, DungeonFloorDecoration, Collideable et Goal</em> , puis utilisez l'inspecteur pour utiliser le <em>mat√©riau de</em> <em>rendu Tilemap SpriteLightingMaterial</em> dans le mat√©riau <em>√©galement</em> . <br><br>  S√©lectionnez ensuite la <em>lumi√®re directionnelle</em> dans les <em>lumi√®res</em> GameObject et r√©duisez la lumi√®re d' <em>intensit√©</em> √† <em>0,3</em> . <br><br>  Tant mieux! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fe/cb2/4ed/6fecb24ed773ea4b843e2ee32d3be164.png"></div><br>  De plus, vous remarquerez maintenant que le joueur porte une <em>lumi√®re ponctuelle</em> , c'est-√†-dire une <em>lanterne qui</em> brille autour de lui. <br><br>  Maintenant que les sprites de la sc√®ne utilisent le bon mat√©riau, l'√©clairage Unity affecte tous les sprites environnants. <br><br>  Faites glisser deux copies du <em>pr√©fabriqu√©</em> FlickerLight depuis le <em>dossier / Assets / Prefabs du</em> projet dans Scene et placez-les dans GameObject <em>Lights</em> . <br><br>  D√©finissez la premi√®re position pr√©fabriqu√©e <em>(X: -11,25, Y: 4, Z: -1,35)</em> et la seconde - <em>(X: 2,75, Y: 4, Z: -1,35)</em> . <br><br>  Cr√©ez une nouvelle couche Tilemap appel√©e <em>WallsAndObjects</em> et d√©finissez l‚Äô <em>ordre de rendu Tilemap Renderer Order dans Layer</em> sur <em>15</em> .  N'oubliez pas que <em>Material</em> utilise √©galement <em>SpriteLightingMaterial</em> . <br><br>  Red√©finissez le pinceau de la palette de carreaux sur le pinceau par <em>d√©faut</em> et le <em>tilmap actif</em> sur <em>WallsAndObjects</em> . <br><br>  Utilisez l'outil pinceau ( <em>B</em> ) pour dessiner deux tuiles ¬´lampe lumineuse¬ª sous chacun des nouveaux FlickerLight que nous avons plac√©s aux coins de la zone initiale: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a8/2ae/b82/6a82aeb824326ec78184559b0986ef78.png"></div><br><h3>  Temps de difficult√© </h3><br>  Voyons voir si nous pouvons encore am√©liorer le donjon.  Utilisez la couche Tilemap <em>WallsAndObjects</em> pour cr√©er des biblioth√®ques en haut de la salle du donjon √† l'aide d'une autre palette de tuiles appel√©e <em>RoguelikeCustom</em> .  Dessinez √©galement une ou deux parties du mur fissur√©. <br><br>  Revenez √† la couche Tilemap <em>DungeonFloorDecoration</em> et ajoutez plus de d√©tails au sol en marbre, par exemple, des fissures sur plusieurs tuiles: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/611/5d7/f2a/6115d7f2a96969a47b9c262dd215623b.gif"></div></div></div><br>  F√©licitations, vous avez termin√© votre premier mini-niveau de donjon!  Par cons√©quent, vous devriez obtenir quelque chose de similaire: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f1b/190/063/f1b1900633e1a0fdad59453a238c5a17.png"></div><br><h2>  O√π aller ensuite? </h2><br>  Si vous avez manqu√© une √©tape, vous pouvez regarder le r√©sultat final de ce tutoriel en ouvrant le projet Unity <em>Rayzor-final √†</em> partir de <a href="">mat√©riaux</a> t√©l√©chargeables. <br><br>  Nous avons beaucoup appris dans ce tutoriel, mais comme pour toute autre entreprise, il y a toujours autre chose! <br><br>  Il existe des scripts de pinceau de tuiles int√©ressants non couverts dans ce tutoriel.  Lisez √† leur sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et r√©fl√©chissez si vous pouvez les utiliser. <br><br>  Vous pouvez √©galement apprendre √† cr√©er des tuiles anim√©es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr412765/">https://habr.com/ru/post/fr412765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr412753/index.html">Lancer l'affichage sur STM32 via LTDC ... sur les registres</a></li>
<li><a href="../fr412755/index.html">Telegram a publi√© le serveur proxy MTProto officiel</a></li>
<li><a href="../fr412757/index.html">Ampoules LED au Japon</a></li>
<li><a href="../fr412759/index.html">Nouveau serveur proxy MTProto de Telegram</a></li>
<li><a href="../fr412763/index.html">Utilisation de la carte de rechargement Firefly-RK3288 avec le SoC RockChip RK3288 Capteur thermique num√©rique Microchip I2C - MCP9808</a></li>
<li><a href="../fr412767/index.html">Examen de la conf√©rence CMG Impact 2016</a></li>
<li><a href="../fr412769/index.html">J'ai fait PWA et l'ai mis dans trois app stores. Et voici ce que j'ai d√©couvert</a></li>
<li><a href="../fr412773/index.html">Astro-a√©rospatiale de Minsk</a></li>
<li><a href="../fr412775/index.html">Exp√©rience personnelle: passer du d√©veloppement C de bas niveau √† la programmation Java</a></li>
<li><a href="../fr412777/index.html">Chefs-d'≈ìuvre de la construction de colonnes du monde: QUAD 11L - les meilleures ¬´√©tag√®res¬ª du deux milli√®me</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>