<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòã üí± üåã GeoPuzzle: crea el mundo pieza por pieza ‚¨úÔ∏è üë®‚Äçüè´ ü¶Ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quiero hablar sobre un proyecto que se ha desarrollado en los √∫ltimos a√±os. Se llama GeoPuzzle y es un juego de rompecabezas en el mapa pol√≠tico del m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GeoPuzzle: crea el mundo pieza por pieza</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427209/"><img src="https://habrastorage.org/webt/yi/rt/rr/yirtrrid9bdhlygy86tfho1fg8g.png" alt="imagen"><br><br>  Quiero hablar sobre un proyecto que se ha desarrollado en los √∫ltimos a√±os.  Se llama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GeoPuzzle</a> y es un juego de rompecabezas en el mapa pol√≠tico del mundo.  El objetivo es poner piezas del pa√≠s en su lugar.  La idea se vio en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Rompecabezas de Mercator para expertos en geograf√≠a"</a> , tambi√©n jug√≥ tetris de pa√≠ses (a√∫n bajo DOS) en la infancia, pero no recuerdo el nombre del programa.  La idea me inspir√≥ tanto que quer√≠a hacer un producto completo, interesante no solo para los escolares, sino tambi√©n para los expertos en geograf√≠a.  El desarrollo del proyecto se puede observar en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><a name="habracut"></a><br><h2>  Prototipo </h2><br>  El 8 de febrero de 2013 se public√≥ el art√≠culo "Puzzle Mercator para expertos en geograf√≠a", pero despu√©s de 4 meses ten√≠a listo un prototipo en el que se ensamblaban los pol√≠gonos de todos los pa√≠ses del mundo.  Un poco m√°s tarde, agregu√© las regiones de Rusia y los Estados Unidos e hice la elecci√≥n de la posici√≥n inicial en el mapa para pol√≠gonos al azar.  Describ√≠ el proceso de desarrollo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en mi blog</a> , publiqu√© el c√≥digo fuente en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> .  Y eso es todo, atascado.  Obtuve mucho menos tiempo libre, mi motivaci√≥n desapareci√≥ (no se tom√≥ ninguna decisi√≥n) y la complejidad aument√≥ exponencialmente.  Era un proyecto favorito, y la tarea principal era aprender algo nuevo, as√≠ que estaba un poco pervertido con la tecnolog√≠a.  En el cliente, por supuesto, javascript (con el que no trabaj√© mucho entonces), el script ruby ‚Äã‚Äã(nuevamente, un nuevo lenguaje para m√≠) fue responsable de la preparaci√≥n de los datos, pero en el servidor hab√≠a erlang (quer√≠a probar algo puramente funcional).  Salida completa de la zona de confort: fue dif√≠cil trabajar directamente con objetos PostGIS, el dolor de convertir cadenas a erlang, configurar YAWS fue un problema completamente diferente ... En la siguiente etapa, me di cuenta de que no pod√≠a hacer frente a todo este zool√≥gico para hacer un producto completo, y me fui piensa por un par de a√±os. <br><br><h2>  GeoPuzzle </h2><br><img src="https://habrastorage.org/webt/k3/rp/5d/k3rp5dfmluyjvoqm0tffbva4b_g.gif" alt="imagen"><br><br>  El sitio ha estado funcionando todo este tiempo, la gente incluso fue all√≠, pero realmente quer√≠a agregar un peque√±o detalle m√°s: mostrar al menos algo de informaci√≥n sobre el pol√≠gono reci√©n descubierto.  Por lo tanto, plane√© pasar las vacaciones de A√±o Nuevo en 2017 con beneficio.  Debido a problemas en el prototipo, decid√≠ reescribir todo y hacer que el producto sea algo familiar: Django.  Fuera de la caja hay cosas que han simplificado enormemente mi vida, por ejemplo, el panel de administraci√≥n y trabajar con PostGIS a trav√©s de ORM.  Pero para empezar, era necesario recrear la funcionalidad que ya funcionaba.  Solo tom√≥ un par de tardes, y la mayor√≠a del tiempo se tom√≥ cargando datos de archivos KML.  No tanto el proceso de importaci√≥n en s√≠ como la preparaci√≥n y restauraci√≥n de mi conocimiento sobre c√≥mo trabajar con ellos.  Por cierto, tom√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pol√≠gonos</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gadm.org</a> en ese momento.  Esto funcion√≥ muy bien para los pa√≠ses, pero hubo ciertos problemas con la precisi√≥n de las regiones, as√≠ que tom√© un tiempo de espera para este problema. <br><br><div class="spoiler">  <b class="spoiler_title">Algunas palabras sobre niveles administrativos en geodatos (niveles).</b> <div class="spoiler_text">  Todos los pa√≠ses se dividen en muchas regiones, que se dividen en partes a√∫n m√°s peque√±as.  En total, hay 12 capas en dicha jerarqu√≠a. <br><br>  Por ejemplo, para Rusia: <br><br><ul><li>  Rusia (2) -&gt; Distrito Federal del Sur (3) -&gt; Territorio de Krasnodar (4) -&gt; Distrito de Vyselkovsky (6) -&gt; Art.  Pueblos (8) </li><li>  Rusia (2) -&gt; Distrito Federal del Sur (3) -&gt; Territorio de Krasnodar (4) -&gt; Krasnodar (6) -&gt; Distrito de Prikubansky (9) -&gt; Kopanskaya (10) </li><li>  Francia (2) -&gt; Metr√≥polis de Francia (3) -&gt; Regi√≥n de Normand√≠a (4) -&gt; Departamento de Orne (6) -&gt; cant√≥n de Donfron (7) -&gt; municipio de Donfron-en-Poiret (8) -&gt; Donfron (9) </li></ul><br>  Las unidades territoriales en diferentes pa√≠ses se llaman a su manera, pero para m√≠ deduje esta divisi√≥n: Pa√≠s (2) -&gt; Regi√≥n (4) -&gt; Distrito (6).  M√°s divisi√≥n administrativa se fue para m√°s tarde. <br></div></div><br><h2>  Desarrollo del proyecto </h2><br>  En ese momento, la aplicaci√≥n era solo una colecci√≥n de p√°ginas HTML con un m√≠nimo de CSS.  Quer√≠a comprobar r√°pidamente la idea y no molestarme con el dise√±o.  La idea result√≥ ser realizable, y es hora de hacer una hermosa concha para ella.  Porque  No tengo sentido de la belleza en la interfaz de usuario, luego Bootstrap para ayudarme.  No hay interfaz, pero apareci√≥, e incluso se adapt√≥ para dispositivos m√≥viles.  Pero este fue solo el primer paso para poner la interfaz en orden. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© se siente al aprender JavaScript en 2016</a> ?  Cuando el c√≥digo se compila en otro dialecto, se crea una plantilla, se pega para que luego se pueda cortar en pedazos.  Yo, como backend, ten√≠a miedo, pero la complejidad de la parte del cliente se planific√≥ lo suficientemente grande, lo que implicaba la necesidad de usar un marco o biblioteca.  Me decid√≠ por React por dos razones: no necesitaba SPA, sino un conjunto de componentes para diferentes p√°ginas, y quer√≠a ver r√°pidamente el resultado.  Pero antes de comenzar a programar, ten√≠a que configurar el entorno.  Ahora entiendo el front-end familiar, que dijo que configur√≥ Webpack durante 2 d√≠as.  Resulta que no fue una broma. <br><br>  En ese momento, sucumb√≠ a la persuasi√≥n e implement√© la l√≥gica de la aplicaci√≥n usando Redux.  Quiz√°s esto no fue un error, porque  permitido ingresar r√°pidamente al tema.  Las reglas formales me permitieron escribir c√≥digo y asegurarme de que funcionara sin mirar bajo el cap√≥.  El uso de Redux con su middleware me abstrajo de la interacci√≥n de la red, lo que me permiti√≥ verificar las respuestas al servidor.  S√≠, hasta este punto, el cliente trabaj√≥ por su cuenta: una solicitud de ajax extrajo todos los datos necesarios y verific√≥ las respuestas por su cuenta.  El usuario podr√≠a hacer trampa mirando los datos que provienen del servidor.  Adem√°s, al cargar, los datos volaron, necesarios solo despu√©s de la respuesta correcta.  Despu√©s de implementar la verificaci√≥n a trav√©s de sockets web, el proceso se ha vuelto ideol√≥gicamente m√°s correcto: la respuesta verifica el c√≥digo que no est√° disponible para el cliente.  Para el usuario, esto todav√≠a parec√≠a instant√°neo: enviar los puntos extremos del pol√≠gono al servidor, verificar si ingresaron al cuadrado con un error, empaquetar los datos para el cuadro de informaci√≥n y el pol√≠gono detallado en json y transferirlo al cliente, encajar en ~ 200 ms. <br><br><img src="https://habrastorage.org/webt/va/s_/kz/vas_kzccg7izp3-lys7pztcfktm.png" alt="imagen"><br><br>  Habiendo aprendido todo el poder de javascript, es dif√≠cil de detener.  Inmediatamente surgieron ideas sobre d√≥nde agregar animaciones, bloques plegables, parpadeos y nuevas versiones de juegos.  Uno de ellos es "Quiz", en el que debes adivinar el pa√≠s por su nombre, bandera, escudo de armas o capital.  Es cierto que durante el proceso de prueba result√≥ que algunas regiones no ten√≠an banderas, mientras que otras no ten√≠an una capital, por lo que algunos pa√≠ses tuvieron que ocultarse de la lista de los disponibles.  Al mismo tiempo, apareci√≥ un modo de juego en el mapa f√≠sico del mundo, sin fronteras de pa√≠ses, para verdaderos profesionales. <br><br><h2>  Abrir fuentes de datos </h2><br>  Hay ~ 50,000 pol√≠gonos en el juego en este momento, y quiero agradecer enormemente a proyectos tan grandes como Wikipedia y Open Street Map, sin los cuales habr√≠a sido imposible llenar la base.  El requisito fundamental era recibir y actualizar datos de fuentes abiertas, es decir, sin edici√≥n manual, porque  No quiero hacer una l√≥gica de sincronizaci√≥n compleja.  Como resultado, obtuve 2 scripts que pueden actualizar cuadros de informaci√≥n y pol√≠gonos. <br><br><h3>  Wikipedia y SPARQL </h3><br><img src="https://habrastorage.org/webt/vh/-l/-9/vh-l-9bii6guq-jufnz3lcxtkia.png" alt="imagen"><br><br>  ¬øCu√°l es la base de datos m√°s grande de pa√≠ses y regiones?  Wikipedia!  Inicialmente, quer√≠a mostrar a los usuarios el cuadro de informaci√≥n completo, pero pronto abandon√© esta idea.  S√≠, hab√≠a cosas importantes como nombres, banderas, capitales y otras cosas, pero tambi√©n hab√≠a mucha basura (c√≥digo de tel√©fono, forma de gobierno, PIB ...).  Trat√© de analizar ya recopilados, pero descubr√≠ que tienen una estructura diferente.  Esto result√≥ ser un desastre: los costos laborales para la implementaci√≥n aumentaron muchas veces.  Era hora de detenerse y pensar.  Al d√≠a siguiente aprend√≠ sobre la existencia de un lenguaje de consulta especial: SPARQL.  En apariencia, se parece a SQL, tambi√©n declarativo, con las palabras clave <code>SELECT</code> , <code>WHERE</code> , <code>ORDER BY</code> , pero funciona de una manera completamente diferente.  Un peque√±o ejemplo que devuelve una lista de estados con sus capitales en ingl√©s y ruso: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> ?country ?capital ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> { ?country wdt:P31 wd:Q3624078 . <span class="hljs-keyword"><span class="hljs-keyword">FILTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> {?country wdt:P31 wd:Q3024240} OPTIONAL { ?country wdt:P36/rdfs:label ?capital } . BIND(lang(?capital) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> (?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'ru'</span></span> || ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'en'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> ?capital</code> </pre><br>  Parece salvaje, ¬øno?  Mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Incluso escrib√≠ una peque√±a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nota en mi blog</a> para estructurar de alguna manera mi experiencia y ayudar a entrar en el tema, porque  Hay pocos materiales detallados en Internet.  Puede aprender a leer tales solicitudes con bastante rapidez, pero me tom√≥ todo un fin de semana escribir algo significativo.  Mucha "magia" de <code>wd:Q3624078</code> y otros atributos.  <code>wdt:P31</code> saber que <code>wdt:P31</code> es una "entidad", y <code>wd:Q3624078</code> es un "estado soberano".  Las personas desconocidas comienzan con un signo de interrogaci√≥n, y el cumplimiento de la solicitud consiste en la b√∫squeda de tales triples de hechos que satisfagan las condiciones.  Por ejemplo <code>?country wdt:P31 wd:Q3024240</code> - "encontrar todos los objetos que son estados hist√≥ricos";  y luego el mismo objeto participa en otros triples <code>?country wdt:P36/rdfs:label ?capital</code> - de d√≥nde <code>?country wdt:P36/rdfs:label ?capital</code> el capital. <br><br>  Aproximadamente una semana despu√©s, ten√≠a lista la primera versi√≥n del gui√≥n, que descargaba informaci√≥n regional de Wikipedia.  Y luego qued√≥ claro otro problema, esta vez con los datos.  Algunos svg no comenzaron con <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> Y el navegador no los reconoci√≥ como im√°genes v√°lidas.  Afortunadamente, el archivo fuente se puede editar.  Registrarse en wikipedia.org no tiene nada de complicado, pero inmediatamente te encuentras en una casa de ba√±os por un d√≠a.  Aqu√≠ est√° su protecci√≥n contra los robots.  As√≠ que a la noche siguiente gobern√© XML y me alegr√© de lo simple que result√≥, y aparecieron banderas y emblemas en el mapa. <br><br><h3>  Pol√≠gonos </h3><br><img src="https://habrastorage.org/webt/gd/g7/t-/gdg7t-ssoht6cbt3kifldfm_bvk.png" alt="imagen"><br><br>  Si por hechos vamos a Wikipedia, entonces por geodatos, en el Open Street Map.  Ser√≠a genial recoger una copia local, aprender el idioma de las solicitudes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paso elevado</a> , pero ni siquiera puedo imaginar cu√°nto tiempo tomar√≠a.  Y tambi√©n necesita tomar la jerarqu√≠a de alg√∫n lugar ... Afortunadamente, una persona amable ya ha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">resuelto este problema por m√≠</a> .  El servicio incluso proporciona una API para recuperar informaci√≥n.  Logr√© descargar desde all√≠ todos los pol√≠gonos hasta el nivel 6 inclusive (distrito) y llenar todo en Postgres, salieron un poco m√°s de 2 Gb.  No fue sin aventuras: algunos pol√≠gonos eran tan grandes (por ejemplo, Canad√° pesa m√°s de 100 Mb en un GeoJSON comprimido) que el servidor se bloque√≥ o no respondi√≥.  Tuve que pasar por alto esos momentos manualmente.  Descargu√© a todos los ni√±os y los fusion√© en QGIS.  Por cierto, este es otro ejemplo de un proyecto de c√≥digo abierto que me ha ayudado mucho. <br><br><h2>  Problemas de Big Data </h2><br>  Entonces, tengo una base de datos con datos, inicio el juego y ... y espero ... otra vez espero ... ¬°apareci√≥!  Trat√© de arrastrar el pol√≠gono. ¬°Est√° muerto, Jim!  Chrome no pudo manejar tal volumen de puntos y se cay√≥.  La estrategia de la frente ya no funciona, es hora de pensar.  Lo m√°s obvio es reducir el detalle de los pol√≠gonos.  Deriv√≥ emp√≠ricamente una f√≥rmula que depende del √°rea de la figura: mejor√≥.  En una computadora que funciona, el algoritmo funcion√≥ sobre la marcha, mientras que el servidor est√° severamente limitado en recursos.  Redis conectado, mejor√≥ ya en el servidor.  Pero los pol√≠gonos truncados son buenos para Drag'n'Drop, y cuando se configuran en el lugar correcto, los bordes no coinciden con los que dibujan los mapas de Google.  Bueno, esto se puede evitar aplicando una f√≥rmula no tan agresiva para reducir los detalles.  Como ya hay 2 cach√©s, ¬øpor qu√© no tratar de almacenar todo lo que es posible?  Los cuadros de informaci√≥n (en dos idiomas) volaron a Redis, los bordes por los cuales se calcula la respuesta, el centro del pol√≠gono, as√≠ como las p√°ginas est√°ticas del sitio.  Como resultado, el juego comenz√≥ a funcionar mucho m√°s r√°pido y se elimin√≥ mucha carga de trabajo de Postgres, lo que en teor√≠a podr√≠a ser el cuello de botella.  Menos: la aplicaci√≥n no funciona sin Redis en absoluto. <br><br><h2>  Primer despliegue </h2><br>  Por lo tanto, es hora de mostrar el proyecto a los amigos para recibir comentarios.  Solo quedaba un poco: generar sitemap.xml, agregar robots.txt, conectar m√©tricas, agregar botones sociales.  redes y ... desplegar!  Eleg√≠ AWS como hosting, como  esperaba encajar en los recursos gratuitos proporcionados.  Y esta es una muy buena pila para un proyecto de principiante: <br><br><ul><li>  servidor de aplicaciones (t2.micro: 1xCPU, 1 Gb RAM, 20 Gb SSD) </li><li>  base de datos (db.t2.micro: 1xCPU, 1 Gb RAM, 20 Gb SSD) </li><li>  almacenamiento de archivos con CDN (5 Gb S3, 50 Gb de tr√°fico) </li><li>  servidor de almacenamiento en cach√© (cache.t2.micro: 1xCPU, 0.5 Gb RAM) </li><li>  Elasticsearch + Kibana (t2.small.elasticsearch: 1xCPU, 2 Gb RAM) </li></ul><br>  Esta es solo una lista de lo que logr√© usar.  En el camino, decid√≠ elaborar mi rastrillo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en forma de art√≠culos</a> , pero mor√≠ r√°pidamente.  El tiempo pasa decentemente, pero no est√° claro si alguien lo necesita. <br><br>  Como resultado, por el a√±o de servicio pagu√© algo del orden de $ 10, e incluso eso por estupidez.  Pero aqu√≠ el per√≠odo de prueba lleg√≥ a su fin y tuve que mudarme porque  El costo de poseer toda esta econom√≠a comenz√≥ a acercarse a varios cientos de d√≥lares.  Tarifas comparadas y liquidadas en DigitalOcean.  Por ahora, tengo suficientes m√°quinas con 2 Gb de RAM para todo (servidor de aplicaciones, base de datos y cach√©), sin embargo, dej√© las estad√≠sticas y CDN en AWS.  Ahora descubr√≠ que DO tambi√©n obtuvo un CDN y almacenamiento por $ 5 / mes, por lo que tiene sentido pensar en mover esta parte tambi√©n. <br><br><h2>  Transferencia a c√≥digo abierto </h2><br>  Esta tarde de enero recib√≠ una carta de una escuela danesa.  Su esencia se redujo al hecho de que tienen $ 100 y quieren d√°rmelos.  Pero hay una condici√≥n: el c√≥digo fuente del proyecto debe estar abierto.  Hasta ese momento, ni siquiera hab√≠a pensado en Open Source.  Un par de noches fue a pensar y elegir una licencia.  Como resultado, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cargu√© las fuentes en Github</a> bajo la licencia GPLv3 y recib√≠ los $ 100 prometidos.  Esto aument√≥ enormemente la motivaci√≥n: ¬°mi proyecto fue realmente √∫til!  Y me apresur√© al siguiente objetivo: el editor del juego.  Para que todos puedan crear sus propios rompecabezas.  Por ejemplo, "Pa√≠ses que participan en la Segunda Guerra Mundial", "Distritos del territorio de Krasnodar", "Pa√≠ses sin litoral" ... Pero para esto, se necesitaba el registro y una cuenta personal primitiva.  Como resultado, el desarrollo se prolong√≥ durante 3 largos meses.  Durante este tiempo, escrib√≠ un √°rbol de regiones que extraer√≠a datos a trav√©s de ajax, conectar√≠a la localizaci√≥n, aprender√≠a c√≥mo guardar un mapa de Google como una imagen para generar vistas previas y cortar redux.  S√≠, me ayud√≥ a lidiar con los datos desde el principio, pero ahora es m√°s probable que interfieran.  Tendr√≠a que arrastrar reductores para dibujar pol√≠gonos en el mapa, junto con el c√≥digo que manejar√≠a su movimiento.  Afortunadamente, eliminar el enlace al estado global tom√≥ solo un par de d√≠as, y mover el c√≥digo al estado local incluso simplific√≥ la aplicaci√≥n.  Y, por supuesto, esta es una buena experiencia :) <br><br><h3>  Conexi√≥n de servicio </h3><br>  Resulta que muchos servicios pagos brindan sus servicios de forma gratuita para proyectos de c√≥digo abierto.  Enumerar√© solo aquellos que conect√© con los m√≠os. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Centinela</a> .  Creo que este servicio para detectar errores es familiar para todos.  Cuando acabo de implementar el proyecto, el registro consisti√≥ en enviar un seguimiento de la pila al correo.  Esto funcion√≥ solo para el backend, pero tambi√©n quer√≠a hacer un seguimiento de los errores en la interfaz.  Y no en vano: he agotado el l√≠mite de mensajes gratuitos en solo 2 semanas.  La mayor√≠a de los errores estaban en las entra√±as de la biblioteca de mapas de Google, lo que a primera vista es muy extra√±o.  Durante la investigaci√≥n, result√≥ que todo fue mi culpa.  Las correcciones duraron m√°s de un mes, pero fue una pr√°ctica muy √∫til para el manejo de errores de JavaScript. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">crowdin.com</a> - localizaci√≥n.  Planeo hacer que el proyecto sea accesible para todos.  Incluyendo que los cuadros de informaci√≥n se mostraban en su idioma nativo.  Completarlos desde Wikipedia no es un problema, pero por coherencia tambi√©n me gustar√≠a tener una interfaz en el mismo idioma, y ‚Äã‚Äãhasta ahora solo se ha traducido al ruso y al ingl√©s. <br><br><img src="https://habrastorage.org/webt/rq/c-/e7/rqc-e7xybyag2pgp9iaylqfobp4.png" alt="imagen"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CircleCI</a> .  Ning√∫n proyecto moderno puede prescindir de CI / CD, pruebas y despliegue autom√°tico.  Eleg√≠ CircleCI √∫nicamente porque ya trabajaba con TravisCI cuando escrib√≠ la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">biblioteca para trabajar con Yandex.Disk</a> .  Tengo la impresi√≥n de que es m√°s adecuado para probar bibliotecas, ya que  Es f√°cil establecer la matriz de entornos en los que se debe probar el c√≥digo.  Pero con las pruebas en s√≠, tengo un problema: no hay tantas como quisi√©ramos, aunque la infraestructura ya est√° lista. <br><br><img src="https://habrastorage.org/webt/39/og/14/39og14nvsqwi9mkruslrydqjhh0.png" alt="imagen"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Overoles</a> .  Servicio de visualizaci√≥n de cobertura de c√≥digo.  Capaz de dar tambi√©n una etiqueta para su inserci√≥n en el proyecto README.md. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SonarQube</a> .  Cosechadora para control de calidad de c√≥digo.  Comprueba el c√≥digo de acuerdo con una variedad de reglas, considera la complejidad ciclom√°tica, monitorea la cobertura mediante pruebas e incluso reconoce la duplicaci√≥n de c√≥digo.  Un servicio muy interesante, que a√∫n no tuve tiempo de entender completamente. <br><br><img src="https://habrastorage.org/webt/og/lk/gp/oglkgp9ndcldy3r14m5iojv9_xi.png" alt="imagen"><br><br>  - Github bots.  Hasta ahora, solo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dependabot est√°</a> conectado, lo que actualiza las dependencias. <br><br><img src="https://habrastorage.org/webt/r1/eh/9j/r1eh9jidp-k_nzmyhplghbdpsiq.png" alt="imagen"><br><br>  Sugiero en los comentarios compartir la lista de servicios y bots en sus proyectos. <br><br><h2>  Bichos </h2><br>  El an√°lisis de errores y problemas merece un art√≠culo separado.  Eran divertidos, complejos y dif√≠ciles de arreglar (por lo tanto, Chukotka siempre est√° en su lugar).  Actualmente, hay uno que realmente molesta a los usuarios.  Cuando se recibe una respuesta, los pol√≠gonos se eliminan y se recrean (en la biblioteca react-google-maps), y si en ese momento el usuario arrastr√≥ algunos, el mapa de Google contin√∫a asumiendo que el proceso a√∫n no ha terminado.  Parece que en el proceso de arrastrar y soltar, el pol√≠gono desaparece y ya no puedes tomar ning√∫n otro.  Por supuesto, puede bloquear el procesamiento de la respuesta en el proceso de arrastrar y soltar, pero se garantiza que esto matar√° al juego multijugador, cuya implementaci√≥n estoy trabajando actualmente.  Trat√© de encontrar una manera de interrumpir el arrastrar y soltar mediante programaci√≥n, pero al final <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">plante√© una pregunta sobre StackOverflow</a> y un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">error en Google Maps</a> con la esperanza de que le prestaran atenci√≥n.  Hasta entonces, agreg√≥ un bot√≥n "¬°el juego est√° roto!", Que reinicializa todo el mapa, pero no restablece el resultado. <br><br><h2>  Que sigue </h2><br><ol><li>  Dise√±o.  Admito que con esto, todo es completamente malo.  Es necesario contratar un dise√±ador y un dise√±ador de dise√±o, porque yo mismo no soy amigo del dise√±o y los dise√±os. </li><li>  Monetizaci√≥n  Inicialmente, no plane√© nada.  El proyecto est√° dedicado a la educaci√≥n b√°sica, que en mi opini√≥n deber√≠a ser accesible para todos.  Me inspir√≥ mucho una carta de una escuela danesa, pero pas√≥ casi un a√±o y durante ese tiempo solo hubo una transferencia de $ 5.  Bueno, no cre√≠a que pudiera pagar el servidor.  Sin embargo, comenz√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">campa√±a en Patreon de</a> todos modos.  Al mismo tiempo, probablemente pueda pensar en introducir oportunidades pagas para maestros u organizaciones.  Por ejemplo, tengo experiencia integr√°ndome con Learning Management Systems, un conjunto de plataformas que le permiten crear cursos, y son muy populares en Europa y Estados Unidos.  Seg√∫n tengo entendido, aunque el c√≥digo fuente tambi√©n est√° bajo la GPL en Github, esto no me impide, como autor, desarrollar una versi√≥n comercial paralela. </li><li>  Tel√©fonos m√≥viles.  Quiero lanzar una aplicaci√≥n para iOS / Android.  A juzgar por la m√©trica de Yandex, una cuarta parte de los usuarios intenta jugar desde un tel√©fono o tableta, pero resulta que tienen dificultades. </li><li>  Desarrollo.  Todo el trabajo se realiza en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> .  Quiero seguir desarrollando el proyecto, pero hacerlo solo es dif√≠cil.  Los planes incluyen agregar multijugador, hacer etiquetas, clasificaciones y filtros en el Taller, agregar pol√≠gonos para un mapa f√≠sico (monta√±as, mares, pen√≠nsulas).  Todav√≠a hay muchas cosas interesantes, por lo que uno de los objetivos del art√≠culo es encontrar personas con ideas afines.  Otra opci√≥n es ir a la fundaci√≥n, por ejemplo, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Python Software Foundation</a> y obtener una subvenci√≥n. </li></ol><br>  Aqu√≠ est√° lo que hay en este momento.  ¬°Gracias por leer hasta el final!  Puedes jugar aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">geopuzzle.org</a> , y mira el c√≥digo fuente en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><br><blockquote><img src="https://habrastorage.org/webt/jy/sd/rr/jysdrr7tqgfjt50wtcshw89ctho.png" align="left"><h3>  Minuto de cuidado de ovnis </h3><br>  Este material puede causar sentimientos conflictivos, as√≠ que antes de escribir un comentario, actualice algo importante en su memoria: <br><br><div class="spoiler">  <b class="spoiler_title">C√≥mo escribir un comentario y sobrevivir</b> <div class="spoiler_text"><ul><li>  No escriba comentarios ofensivos, no se ponga personal. </li><li>  Abstenerse de lenguaje obsceno y comportamiento t√≥xico (incluso en forma velada). </li><li>  Para informar comentarios que violen las reglas del sitio, use el bot√≥n "Informar" (si est√° disponible) o el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">formulario de comentarios</a> . </li></ul><br>  Qu√© hacer si: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">menos karma</a> |  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cuenta bloqueada</a> <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥digo de autores Habr</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habraetiket</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Versi√≥n completa de las reglas del sitio</a> </div></div></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427209/">https://habr.com/ru/post/es427209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427195/index.html">Ma√±ana comenzaremos a matarte, o ¬øPor qu√© necesitamos ingenieros?</a></li>
<li><a href="../es427199/index.html">Conocimiento cercano del clasificador electromec√°nico de tarjetas perforadas (excursi√≥n a principios del siglo XX)</a></li>
<li><a href="../es427203/index.html">"M√∫sica ligera": habla sobre cuatro herramientas electr√≥nicas inusuales con fotoc√©lulas</a></li>
<li><a href="../es427205/index.html">Habrakvest en honor del 20 aniversario de Mail.Ru Group: ganadores y respuestas</a></li>
<li><a href="../es427207/index.html">Los empleados de Rockstar defienden a la compa√±√≠a despu√©s de las cr√≠ticas durante 100 horas de trabajo</a></li>
<li><a href="../es427211/index.html">Electron es un flash para escritorio</a></li>
<li><a href="../es427215/index.html">Los microservicios necesitan crecer, no comenzar con ellos.</a></li>
<li><a href="../es427217/index.html">An√°lisis de rendimiento de los servidores WSGI: segunda parte</a></li>
<li><a href="../es427219/index.html">Mensajer√≠a diferida in√∫til no bloqueada en MPI: an√°lisis ligero y tutorial para aquellos que est√°n un poco "en el tema"</a></li>
<li><a href="../es427221/index.html">Lo que me di cuenta de camino a mi sue√±o de inteligencia artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>