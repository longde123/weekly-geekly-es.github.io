<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😾 ☝🏻 👩🏽‍🤝‍👨🏿 Aplikasi Hari Valentine di Libgdx 🕶️ ♉️ 🍂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setiap tahun ada banyak artikel yang didedikasikan untuk Hari Valentine. Saya juga memutuskan untuk terlibat dalam topik ini dan menciptakan sesuatu y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplikasi Hari Valentine di Libgdx</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440298/"><p>  Setiap tahun ada banyak artikel yang didedikasikan untuk Hari Valentine.  Saya juga memutuskan untuk terlibat dalam topik ini dan menciptakan sesuatu yang asli dan tidak biasa.  Idenya adalah untuk membuat aplikasi Android sederhana dengan hati yang akan memiliki model fisik mereka dan berinteraksi satu sama lain.  Kemudian saya menambahkan teks, suara, partikel dan beberapa efek lainnya.  Aplikasi yang dihasilkan bekerja dan sangat asli!  Dalam artikel ini saya akan menjelaskan proses pembuatan, serta kemampuan dan jebakan perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>libgdx</strong></a> . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/gk/-e/-e/gk-e-e7mizsnpdem8tw41jftqcc.png" alt="Hati hari kasih sayang"></a>  . </p><a name="habracut"></a><br><h2 id="contents">  Isi </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Program dan alat</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Halo dunia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Jenderal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tekstur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Font</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fisika</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sistem partikel</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kedengarannya</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesimpulan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode sumber dan file yang dapat dieksekusi</a> </li></ul><br><h2 id="programs-and-tools">  Program dan alat </h2><br><p>  Untuk menerapkan ide ini, saya menggunakan program dan perpustakaan berikut: </p><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>IntelliJ IDEA</strong></a> - IDE untuk aplikasi lintas platform.  Atau Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Android Studio</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Eclipse</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>libgdx</strong></a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>pustaka Java</strong></a> lintas platform (PC, Mac, Linux, Android) untuk mengembangkan game dan aplikasi grafis lainnya.  Perpustakaan ini didistribusikan di bawah Lisensi Apache 2.0.  Beberapa cuplikan kode dioptimalkan menggunakan JNI (misalnya, Box2d). </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>box2d-editor</strong></a> - editor untuk membuat model fisik yang digunakan dalam <code>box2d</code> mesin fisik, yang dibangun ke <code>libgdx</code> .  Di sini akan digunakan untuk mencocokkan gambar hati dengan model fisiknya. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>Hiero bitmap font generator</strong></a> - program untuk mengubah font vektor menjadi raster (karena di <code>libgdx</code> hanya font raster yang didukung). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>Editor Partikel</strong></a> - editor untuk membuat sistem partikel, yang dikembangkan oleh pencipta <code>libgdx</code> .  Ini digunakan untuk partikel dalam efek "ledakan" selama kehancuran jantung. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>Paint.NET</strong></a> - editor gambar, digunakan untuk mengedit gambar hati dan membuat latar belakang. </li></ol><br><p>  Semua program dan komponen ini didistribusikan secara bebas, dan ini merupakan nilai tambah yang besar.  Saya telah memilih <code>libgdx</code> , karena, pertama, saya sudah memiliki pengalaman dengannya, dan, kedua, menggunakan <code>libgdx</code> Anda tidak memerlukan emulator Android yang lambat, karena itu adalah lintas-platform dan memungkinkan pengujian aplikasi di lingkungan asli Java dan kemudian mengkompilasi mereka untuk Android. </p><br><h2 id="hello-world">  Halo dunia </h2><br><p>  Pertama, saya akan memberi tahu Anda dalam beberapa kata cara membuat proyek libgdx.  Menggunakan <code>gdx-setup.jar</code> , buat templat proyek (berdasarkan Gradle), yang menentukan platform target.  Saat ini, <code>Desktop</code> , <code>Android</code> , <code>Ios</code> , <code>Html</code> didukung.  Sejujurnya, saya gagal mencoba dua yang terakhir, karena saya tidak punya perangkat iOS, dan ada beberapa kesulitan dengan HTML yang belum saya selesaikan. </p><br><p><img src="https://habrastorage.org/webt/rv/de/yc/rvdeycxp2rfxx7duxqxnwaognva.png" alt="Pengaturan Proyek"></p><br><p>  Anda juga dapat memilih ekstensi yang akan Anda gunakan.  Dalam kasus kami, ini adalah perpustakaan fisika Box2d. </p><br><p>  Namun, semua ini dijelaskan di wiki: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Membuat proyek libgdx</a> . </p><br><p>  Setelah generasi, tiga folder dibuat: </p><br><ul><li>  inti </li><li>  desktop </li><li>  android </li></ul><br><p>  Di dua yang terakhir, masing-masing <code>DesktopLauncher</code> dan <code>AndroidLauncher</code> ditempatkan, yang terlihat seperti ini: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DesktopLauncher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] arg)</span></span></span><span class="hljs-function"> </span></span>{ LwjglApplicationConfiguration config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplicationConfiguration(); config.width = <span class="hljs-number"><span class="hljs-number">800</span></span>; config.height = <span class="hljs-number"><span class="hljs-number">480</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LwjglApplication(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ValentinesDayHeartsApp(), config); } }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AndroidLauncher</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AndroidApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); AndroidApplicationConfiguration config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidApplicationConfiguration(); initialize(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ValentinesDayHeartsApp(), config); } }</code> </pre> <br><p>  Tidak akan ada lagi kode khusus untuk platform Android, yang merupakan keuntungan besar dari perpustakaan yang dipilih.  Tinggal membiarkan getaran dan menonaktifkan mode tidur (untuk mencegah keadaan aplikasi tidak diatur ulang) dalam konfigurasi <code>AndroidManifest.xml</code> .  Dan juga mengatur orientasi lanskap sehingga dunia tidak akan terbalik: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.VIBRATE"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.WAKE_LOCK"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><p>  dan </p><br><pre> <code class="html hljs xml">android:screenOrientation="landscape"</code> </pre> <br><p>  Kode umum disimpan di folder <code>core</code> .  Kelas utama yang disebut <code>ValentinesDayHeartsApp</code> mengimplementasikan antarmuka <code>ApplicationListener</code> (untuk menangani acara inisialisasi, rendering, finalisasi, dan status lainnya) dan antarmuka <code>InputProcessor</code> (untuk menangani input pengguna). </p><br><p>  Itu saja, kerangka sudah siap!  Sekarang aplikasi kita akan berjalan di PC dan Android. </p><br><h2 id="general">  Jenderal </h2><br><p>  Proyek ini memiliki struktur sederhana: di kelas <code>ValentinesDayHeatsApp</code> , metode <code>create</code> , <code>render</code> , <code>touchDown</code> , <code>touchDown</code> -override.  Metode <code>create</code> menginisialisasi semua sumber daya (tekstur, font, partikel, suara) dan menciptakan dunia fisik.  Dalam metode render, rendering semua objek di dunia terjadi: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ updatePhysics(); updateBackground(); updateSprites(); updateParticles(); refresh(); renderBackground(); renderHearts(); renderFonts(); renderParticles(); }</code> </pre> <br><p>  Dalam metode <code>dispose</code> , semua sumber daya dilepaskan.  Ya, ya, terlepas dari kenyataan bahwa Jawa memiliki pengumpulan sampah otomatis, sumber daya yang tidak dikelola (objek Box2d dan beberapa lainnya) masih perlu dirilis secara manual.  Metode <code>touchDown</code> dipicu oleh sentuhan atau klik mouse.  Ini berfungsi seperti ini: jika titik sentuh bersinggungan dengan hati, hati itu dihapus.  Kalau tidak, hati yang baru tercipta di titik sentuh.  Objek <code>Heart</code> memiliki sifat-sifat berikut: </p><br><ul><li>  <code>Body</code> - model fisik. </li><li>  <code>Sprite</code> - model grafis (sprite). </li><li>  <code>String</code> - teks yang ditampilkan di hati. </li><li>  <code>Font</code> - font. </li><li>  <code>ParticleEffect</code> - partikel yang tercipta saat menghancurkan jantung. </li><li>  <code>BreakSound</code> - suara menghancurkan hati. </li></ul><br><p>  Selanjutnya, saya akan menjelaskan komponen aplikasi secara lebih rinci. </p><br><h2 id="textures">  Tekstur </h2><br><p>  Pertama-tama, saya perlu menemukan atau menarik hati.  Untungnya, saya dengan mudah meng-google-nya dan mengeditnya sedikit: menambahkan cahaya dan latar belakang transparan.  Untuk memuat tekstur dalam <code>libgdx</code> , saya menggunakan kelas <code>Texture</code> .  Karena tekstur yang sama dapat digunakan beberapa kali, objek <code>Sprite</code> tambahan digunakan.  Mereka ditarik menggunakan metode <code>render</code> .  Posisi sprite dan sudut adalah parameter render dan model fisik jantung.  Sebagai gantinya, saya memutuskan untuk menggambar hati dalam nuansa yang berbeda.  Saya menggunakan palet HSL, yang memungkinkan untuk memanipulasi rona, saturasi dan keringanan, bukan komponen warna seperti RGB.  Rumus untuk RGB -&gt; HSL dan HSL -&gt; konversi RGB dapat dengan mudah ditemukan, dan saya menggunakan metode dari artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Memanipulasi warna dalam .NET</a> di Jawa.  Semua konversi ada di <code>prepareHeartsTextures</code> , <code>prepareHslData</code> dan <code>generateHeartTexture</code> <code>prepareHslData</code> .  Berikut ini contohnya: </p><br><pre> <code class="java hljs">Pixmap pixmap = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pixmap(fileHandle); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[][][] result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[pixmap.getWidth()][pixmap.getHeight()][<span class="hljs-number"><span class="hljs-number">4</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pixmap.getWidth(); i++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; pixmap.getHeight(); j++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> color = pixmap.getPixel(i, j); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)((color &gt;&gt; <span class="hljs-number"><span class="hljs-number">24</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> g = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)((color &gt;&gt; <span class="hljs-number"><span class="hljs-number">16</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> b = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)((color &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(color &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) / <span class="hljs-number"><span class="hljs-number">255.0f</span></span>; result[i][j] = ColorUtils.RgbToHsl(r, g, b, a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;</code> </pre> <br><p>  Sayangnya, aplikasi Android dimulai dengan beberapa penundaan karena generasi tekstur dengan nuansa berbeda. </p><br><h2 id="fonts">  Font </h2><br><p>  Karena <code>libgdx</code> hanya dapat bekerja dengan font raster, saya menggunakan <strong>Hiero Bitmap Font Generator</strong> (versi 5), yang membuat gambar semua karakter dalam format PNG, dan file FNT, yang berisi informasi tentang koordinat setiap karakter dalam gambar.  Ini adalah screenshot dari program ini: </p><br><p><img src="https://habrastorage.org/webt/7j/sr/nd/7jsrnd3l69solhirkhq6yriv8he.png" alt="Alat font Bitmap"></p><br><p>  Setelah file yang diperlukan dihasilkan, font dapat digunakan dalam aplikasi libgdx sebagai berikut: </p><br><pre> <code class="java hljs">font = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitmapFont( Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/Jura-Medium.fnt"</span></span>), Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/Jura-Medium.png"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); font.setColor(Color.WHITE);</code> </pre> <br><p>  Dan kemudian membuatnya seperti itu: </p><br><pre> <code class="java hljs">font.draw(spriteBatch, heart.String, screenPosition.x, screenPosition.y);</code> </pre> <br><p>  Saat merender, saya menemui beberapa kesulitan: misalnya, font tidak dapat di-render dari sudut, karena dapat dilakukan dengan sprite.  Untuk mengatasi masalah ini, Anda perlu mengubah matriks proyeksi <code>SpriteBatch</code> , dan kemudian membuat font sebagai berikut: </p><br><pre> <code class="java hljs">Matrix4 projection = spriteBatch.getProjectionMatrix(); projection.setToOrtho2D(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, WorldWidth, WorldHeight); projection.translate(tmpVector1.x, tmpVector1.y, <span class="hljs-number"><span class="hljs-number">0</span></span>); projection.rotate(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, body.getAngle() / (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)Math.PI * <span class="hljs-number"><span class="hljs-number">180</span></span>); projection.translate(-tmpVector1.x, -tmpVector1.y, <span class="hljs-number"><span class="hljs-number">0</span></span>); Vector2 stringSize = heart.getStringSize(); tmpVector1.add(heart.Size.x / PhysWorldWidth * WorldWidth * CenterDisplacement.x - stringSize.x * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, heart.Size.y / PhysWorldHeight * WorldHeight * CenterDisplacement.y + stringSize.y); spriteBatch.begin(); BitmapFont.BitmapFontData fontData = font.getData(); fontData.setScale(heart.Size.x * FontSizeHeartSizeCoef.x, heart.Size.y * FontSizeHeartSizeCoef.y); font.draw(spriteBatch, heart.String, tmpVector1.x, tmpVector1.y); fontData.setScale(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); spriteBatch.end();</code> </pre> <br><h2 id="physics">  Fisika </h2><br><p>  Sebagai mesin fisika, <strong>box2d</strong> digunakan. </p><br><p>  Untuk mencocokkan gambar hati dengan model fisiknya, saya menggunakan <strong>box2d-editor</strong> : </p><br><p><img src="https://habrastorage.org/webt/dp/yc/9r/dpyc9rtyakhh21j38vbtlndnw2a.png" alt="Editor Badan Fisika">  . </p><br><p>  Dengan menggunakan program ini, saya membuat poligon jantung, yang secara otomatis dipecah menjadi poligon cembung.  Model fisik adalah seperangkat koordinat poligon ini dalam format JSON. </p><br><p>  Selanjutnya, file ini digunakan dalam aplikasi kita (memuat terjadi dalam metode <code>addHeart</code> ).  libgdx hanya dapat memuat file dalam format biner.  Untungnya, kelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BodyEditorLoader.java</a> ditemukan, yang dapat digunakan untuk memuat model dari JSON (yaitu representasi tekstual) juga. </p><br><p>  Jangan lupa untuk mengatur kerapatan, gesekan dan elastisitas tubuh: </p><br><pre> <code class="java hljs">FixtureDef fdef = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FixtureDef(); fdef.density = <span class="hljs-number"><span class="hljs-number">0.75f</span></span>; fdef.friction = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; fdef.restitution = <span class="hljs-number"><span class="hljs-number">0.4f</span></span>; bodyLoader.attachFixture(body, <span class="hljs-string"><span class="hljs-string">"Heart"</span></span>, fdef, newWidth); body.resetMassData();</code> </pre> <br><p>  Sekarang hati kita memiliki cangkang fisik! </p><br><p>  Agar hati tidak terbang dari layar, kita dapat menambahkan empat persegi panjang statis di sisi dunia kecil kita.  Pada perangkat seluler, disarankan untuk mengatur gravitasi berdasarkan orientasi perangkat: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Gdx.app.getType() == ApplicationType.Android) { gravity.x = -Gdx.input.getPitch() / <span class="hljs-number"><span class="hljs-number">90.0f</span></span>; gravity.y = Gdx.input.getRoll() / <span class="hljs-number"><span class="hljs-number">90.0f</span></span>; gravity.mul(gravityCoef); world.setGravity(gravity); }</code> </pre> <br><h2 id="particle-system">  Sistem partikel </h2><br><p>  Dalam <code>libgdx</code> , sistem partikel ditentukan menggunakan file khusus yang dapat dihasilkan di editor: </p><br><p><img src="https://habrastorage.org/webt/wn/au/jk/wnaujkjcqosjvqefms78wcxfiqm.png" alt="Editor partikel">  . </p><br><p>  Seperti yang Anda lihat, editor ini memiliki banyak pengaturan: Anda dapat memuat tekstur yang berbeda, mengubah masa pakai, bentuk penyebaran, transparansi dan parameter lainnya.  Saya membuat partikel berbentuk hati, yang akan muncul ketika Anda mengetuk layar dan menghancurkan satu hati fisik besar.  Dalam aplikasi, bekerja dengan partikel terjadi sebagai berikut: </p><br><h3 id="initialization">  Inisialisasi </h3><br><pre> <code class="java hljs">ParticleEffect effect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ParticleEffect(); effect.load(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data/destroy.p"</span></span>), Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"data"</span></span>));</code> </pre> <br><h3 id="beginning-of-the-life-cycle">  Awal dari siklus hidup </h3><br><p>  Penting untuk tidak melupakan <code>start</code> tanpanya partikel tidak akan ditampilkan: </p><br><pre> <code class="java hljs">effect.setPosition(.., ..); effect.start();</code> </pre> <br><h2 id="sounds">  Kedengarannya </h2><br><p>  Suara dimuat sebagai berikut: </p><br><pre> <code class="java hljs">sound = Gdx.audio.newSound(Gdx.files.internal(<span class="hljs-string"><span class="hljs-string">"path/to/file"</span></span>));</code> </pre> <br><p>  Dan kemudian dimainkan seperti ini: </p><br><pre> <code class="java hljs">sound.play(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><p>  Apa yang bisa lebih mudah?  Namun, ada juga jebakan.  Untuk beberapa alasan, file hanya dapat dimuat dalam format OGG dan bitrate <strong>96 kbit / s</strong> . </p><br><h2 id="conclusion">  Kesimpulan </h2><br><p>  Saya berharap bahwa teknik yang dijelaskan dalam artikel ini akan bermanfaat bagi banyak dari Anda untuk mengembangkan game menggunakan <code>libgdx</code> .  Anda dapat menggunakan kode sumber dan sumber daya.  Kirim aplikasi untuk Hari Valentine ke kekasih Anda :) </p><br><p>  Perlu dicatat bahwa teks yang ditampilkan di hati dapat diubah dalam file <code>data/words.txt</code> .  Ia bekerja bahkan tanpa kompilasi ulang. </p><br><h2 id="source-code-and-executables">  Kode sumber dan file yang dapat dieksekusi </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode sumber</a> </li><li>  File JAR yang dapat dieksekusi cross-platform: <a href="">ValentinesDayHearts-1.1.jar</a> </li><li>  File APK untuk Android: <a href="">ValentinesDayHearts-1.1.apk</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440298/">https://habr.com/ru/post/id440298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440286/index.html">Perlin noise, pembuatan konten prosedural, dan ruang yang menarik</a></li>
<li><a href="../id440288/index.html">Keamanan IOT. Masalah 1. Jam tangan pintar, pelacak kebugaran, dan timbangan</a></li>
<li><a href="../id440292/index.html">Buku “Unity in action. Pengembangan lintas platform dalam C #. Int 2. edisi »</a></li>
<li><a href="../id440294/index.html">MIDI-router di Raspberry Pi</a></li>
<li><a href="../id440296/index.html">6 Aplikasi untuk IoT Industri</a></li>
<li><a href="../id440300/index.html">10 perintah konsol untuk membantu memperdebatkan kode JavaScript seperti PRO</a></li>
<li><a href="../id440302/index.html">CRM - biaya kesuksesan, biaya kesalahan, biaya kepemilikan</a></li>
<li><a href="../id440304/index.html">Mengganggu dari perangkat eksternal dalam sistem x86. Bagian 3. Mengkonfigurasi perutean interupsi dalam chipset menggunakan contoh coreboot</a></li>
<li><a href="../id440306/index.html">Penskalaan basis data dalam sistem yang sangat dimuat</a></li>
<li><a href="../id440308/index.html">Bagilah dan taklukkan, atau tulis dengan lambat - baca dengan cepat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>