<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧛🏻 🕐 🍽️ Nous traitons le bitcoin. Comment est organisée la page de paiement B2BinPay? 🎡 👨‍❤️‍👨 👩🏻‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="B2BinPay est un système de paiement de crypto-monnaie avec de nombreux backends associés pour les applications, les analyses, les nœuds, les files d'a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous traitons le bitcoin. Comment est organisée la page de paiement B2BinPay?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/b2broker/blog/447418/"> B2BinPay est un système de paiement de crypto-monnaie avec de nombreux backends associés pour les applications, les analyses, les nœuds, les files d'attente, mais une seule page d'interface utilisateur que l'utilisateur final voit.  Il a des exigences élevées en matière de facilité d'utilisation.  Malgré l'apparente simplicité de la page, l'équipe de développement serait intéressée à partager la façon dont elle est organisée de l'intérieur. <br><br>  Pour comprendre les processus métier, vous devrez vous plonger dans le domaine.  Pour les lecteurs qui ne savent pas encore ce que sont la crypto-monnaie, la blockchain et l'adresse, nous avons fait des définitions courtes et compréhensibles sous la coupe. <br><br><img src="https://habrastorage.org/webt/9l/st/fh/9lstfhjhpe676a3t3e8mj3fdu-q.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Pour comprendre les termes, voici quelques analogies avec le monde fiduciaire des paiements:</b> <div class="spoiler_text">  <b>La blockchain</b> est une base de données décentralisée (dans le cas idéal) qui stocke des informations sur les adresses, les transactions et les soldes.  Il se compose de blocs, chacun d'eux contenant une quantité limitée d'informations.  Les blocs sont générés grâce aux mineurs grâce à des calculs énergivores (PoW) ou à des preuves de participation (PoS).  Chaque bloc suivant contient une liste de nouvelles transactions et un lien vers le précédent.  Chaque crypto-monnaie a sa propre blockchain. <br><br>  <b>Marchand</b> - le même que le propriétaire du magasin, louant un système de paiement pour recevoir les paiements des utilisateurs finaux. <br><br>  <b>Un portefeuille</b> est identique à un compte dans le monde financier traditionnel. <br><br>  <b>Transaction</b> - un enregistrement dans la blockchain que les fonds ont été envoyés d'un portefeuille à un autre.  Le solde du portefeuille est constitué du montant des transactions. <br><br>  <b>L'adresse</b> est la même que les détails du compte.  La différence est que la plupart des chaînes de blocs vous permettent de générer un nombre infini d'adresses pour un portefeuille. <br><br>  <b>Une transaction confirmée</b> est une transaction après laquelle un nombre sûr de blocs a été généré.  Un bloc équivaut à une confirmation.  Si la transaction n'a pas reçu 4 à 8 confirmations, elle n'est pas considérée comme terminée. <br><br>  <b>Système de paiement</b> - logiciel qui permet d'accepter et de traiter les paiements en crypto-monnaie.  Liens et agrège les commandes, paiements, transactions, retours, réapprovisionnement, retraits et autres informations.  Il informe également le système marchand des changements dans le contexte des commandes et des paiements, et non des chaînes de blocs et des transactions. <br><br>  <b>Explorer</b> - un service ou un site de navigateur pour les données entrant dans la blockchain.  En utilisant ce service, vous pouvez facilement obtenir des informations sur les adresses, les transactions et les blocs. <br><br>  <b>Un nœud</b> est un ordinateur sur lequel une copie de la base de données entière (blockchain) est stockée. <br></div></div><br><h3>  Schéma général de travail et exigences relatives au contenu de la page de paiement </h3><br>  Le cycle de paiement se déroule comme suit: sur le site Web du magasin, l'acheteur sélectionne le produit et la devise de paiement.  Le système redirige l'utilisateur vers la page de paiement.  Il contient les informations suivantes: devise, adresse, commentaires d'information.  L'utilisateur envoie le montant requis à l'adresse spécifiée et attend un nombre suffisant de confirmations réseau pour reconnaître le paiement comme réussi.  En attendant, l'acheteur peut suivre l'état du paiement sans quitter la page du site internet de l'explorateur.  Une fois le paiement accepté, l'utilisateur est redirigé vers la page de paiement réussie sur le site Web du vendeur. <br><br><img src="https://habrastorage.org/webt/gz/mu/p8/gzmup8pqrvynkwr7plvc_a3uyqu.png"><br><br>  Le processus de paiement est divisé en plusieurs étapes.  Chacun d'eux ne nécessite aucune action de l'utilisateur, sauf pour le transfert d'argent direct.  Script réussi standard: <br><br><ol><li>  Sur le site Web du vendeur, l'utilisateur sélectionne le mode de paiement et la devise B2BinPay </li><li>  L'IP du vendeur envoie une demande de création d'un nouvel ordre de paiement, en recevant un lien vers la page de paiement en réponse </li><li>  L'utilisateur redirige vers la page de paiement, qui contient des informations: devise, montant, adresse et champs supplémentaires, si nécessaire </li><li>  L'utilisateur paie pour l'achat </li><li>  Le système détecte qu'une nouvelle transaction est arrivée à l'adresse et la page passe en état de suivi </li><li>  L'état de la transaction est surveillé et les informations sont mises à jour sur la page jusqu'à ce qu'un nombre sécurisé de confirmations soit atteint. </li><li>  L'utilisateur est redirigé vers la page de paiement réussie sur le site Web du vendeur </li></ol><br>  En conséquence, la page de paiement peut être dans deux états: afficher les détails et attendre la confirmation.  Lorsque vous affichez les détails, vous pouvez saisir l'adresse de deux manières: scannez le code QR ou copiez l'adresse sous forme de texte.  En plus des informations de base, nous ajouterons une mini-instruction sous forme de texte, qui vous dira comment payer, où télécharger l'application de portefeuille et comment acheter des devises.  En plus de ces champs, il y en a un autre dont la présence dépend de la devise choisie.  Parfois, afin de comparer correctement la transaction, l'ordre de paiement et l'acheteur, il est nécessaire de connaître non seulement l'adresse, mais également des informations supplémentaires.  Par exemple, pour la devise Ripple, lors de l'envoi, vous devez spécifier la balise de destination (commentaire sur la transaction). <br><br>  Pour ceux qui copient l'adresse sous forme de texte et ne scannent pas le code QR, un bouton de copie a été ajouté.  De plus, le logo de la pièce doit être présent sur la page, car de nombreuses personnes identifient visuellement la monnaie, par la forme et la palette de couleurs du logo, et non par la désignation de la lettre. <br><br>  Le changement d'état se produit au moment où une transaction entrante vers l'adresse de facturation est détectée.  À ce moment, les détails disparaissent, car ils ne sont plus nécessaires;  l'utilisateur passe en mode veille et la page a besoin d'un flux constant d'informations sur l'état de la transaction.  Maintenant, sur la page, vous pouvez trouver: le délai avant la fin de la transaction, le nombre actuel de confirmations, un bref commentaire expliquant les actions supplémentaires. <br><br>  La page doit être facile à comprendre, intuitive et en même temps suffisamment informative.  Pour les acheteurs expérimentés, l'accent doit être mis sur l'adresse et le montant. <br><br>  À partir des exigences ci-dessus, une mise en page pour la future page a été obtenue. <br><br><img src="https://habrastorage.org/webt/zb/v3/nv/zbv3nvvp1jnpyu1h1udaydk1vg8.gif"><br><br><h3>  Backend </h3><br>  <b>La première option pour</b> implémenter le backend est de s'en passer!  Lors de la génération de la page de paiement, on sait à l'avance à quelle adresse l'argent sera envoyé.  Vous pouvez recevoir de nouvelles transactions à cette adresse de l'explorateur à l'aide des outils JS.  Ainsi, la tâche consiste à écrire des connecteurs dans l'explorateur et à interroger périodiquement le nécessaire.  Un diagramme de classe statique pourrait ressembler à ceci: <br><br><img src="https://habrastorage.org/webt/eu/h9/k2/euh9k2ahzvxmqe4wyeco836lary.png"><br><br>  <i>Avantages:</i> il n'y a pas de charge sur nos capacités, il est facile à mettre en œuvre, il n'y a pas de menaces de sécurité potentielles. <br><br>  <i>Inconvénients:</i> sources non fiables et réception intempestive de nouvelles informations, difficultés à fournir des mises à jour de base de code aux clients finaux (mise en cache incontrôlée).  Moins décisif - de nombreuses devises n'ont pas d'explorateur stable avec une API développée. <br><br>  <b>La deuxième option</b> (qui fonctionne) est son propre microservice, qui reçoit les informations directement du pool de nœuds, les filtre et les distribue sur les pages de paiement.  L'utilisation d'événements côté serveur sur le client réduira la redondance et économisera le trafic.  Les SSE s'intègrent dans le cas d'utilisation, car la page est passive dans son comportement - elle n'accepte que de nouvelles informations. <br><br>  <i>Inconvénients:</i> beaucoup de coûts de mise en œuvre, charge supplémentaire sur l'équipement. <br><br>  <i>Avantages:</i> haut niveau de fiabilité et d'indépendance par rapport aux services tiers;  Le contexte de la commande, pas la transaction. <br>  Schéma du circuit: <br><br><img src="https://habrastorage.org/webt/fm/cx/p2/fmcxp2z1jvfwu0ugtqviirg1ply.png"><br><br>  Lorsque la page de paiement s'ouvre dans le navigateur du client, une demande de création d'une connexion SSE est envoyée au backend asynchrone du microservice.  La demande indique l'adresse à suivre, le montant du paiement, la durée de vie et d'autres paramètres mineurs.  Sur le backend, cela est stocké dans le stockage noSQL en mémoire.  Chaque fois qu'un nouveau bloc apparaît sur un nœud de la chaîne de blocs, l'application en reçoit et en extrait des informations utiles aux adresses et transactions stockées dans la base de données.  Si le bloc suivant est utile, les mises à jour sont envoyées aux clients.  Les connexions sont fermées à l'initiative du serveur lorsque suffisamment de confirmations sont reçues ou que TTL a expiré. <br><br>  Ainsi, le backend effectue des opérations gourmandes en ressources et génère du trafic uniquement lorsque de nouvelles informations arrivent au nœud, et qu'il n'y a pas d '«interrogation» périodique pour de nouvelles informations.  Grâce à l'asynchronie, nous obtenons une vitesse élevée avec des milliers de connexions simultanées. <br><br>  Sachant que pour les pièces avec PoW, le délai de réception de nouvelles informations en une seconde est négligeable, la mise à l'échelle horizontale minimale d'un tel système entraînera une augmentation importante du débit.  Les jours particulièrement actifs, comme le Black Friday, la charge augmente.  En cas de défaillance du système ou de dysfonctionnement technique, le client a un état de secours dans lequel la page reste dans le mode d'affichage des détails pour toujours.  Pour les pièces PoS, l'étape de surveillance du nombre de confirmations peut être ignorée, car la vitesse de transaction est souvent de 2 à 5 secondes. <br><br>  <b>La troisième option pour la</b> mise en œuvre du backend est hybride, lorsque selon la vitesse de la transaction blockchain et les informations sur la disponibilité actuelle des services tiers, une interaction SSE ou HTTP avec les explorateurs est utilisée.  C'est le plus efficace et le plus long en même temps. <br><br>  La technologie frontale adaptée à la tâche est vue.js avec un rendu déclaratif et la possibilité de créer plusieurs états de composants.  Il s'agit d'une bibliothèque légère avec une structure élégante et une modification réactive du DOM.  La source de données est la connexion SSE qui s'ouvre lorsque le composant est initialisé. <br><br><h3>  La conception </h3><br><img src="https://habrastorage.org/webt/xm/c3/vs/xmc3vsycxf9ocy26iwqne_qofqq.gif"><br><br>  Nous développons le produit et le rendons de haute qualité et fiable afin de rendre les paiements blockchain pratiques, massifs et abordables.  Nous aimons non seulement l'argent, mais aussi les technologies les plus avancées, les tâches complexes et les solutions élégantes. <br><br>  En développant le système de paiement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">B2BinPay,</a> nous résolvons régulièrement des problèmes qui, malgré leur apparente simplicité, nécessitent une approche non standard ou un regard neuf.  Nous serions reconnaissants pour vos commentaires, commentaires et suggestions.  Si vous souhaitez apporter des idées nouvelles et audacieuses au service de paiement utilisé dans le monde entier, consultez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les offres d'emploi actuelles</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447418/">https://habr.com/ru/post/fr447418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447408/index.html">Apprendre l'anglais de l'élémentaire à intermédiaire: ressources utiles et motivation</a></li>
<li><a href="../fr447410/index.html">Feu de joie provincial ou naissance d'une nation</a></li>
<li><a href="../fr447412/index.html">Surveillance des messages dans RabbitMQ</a></li>
<li><a href="../fr447414/index.html">Sortie de ML.NET 1.0 RC. Quoi de neuf</a></li>
<li><a href="../fr447416/index.html">PHP Enchantement parsemé de guillemets</a></li>
<li><a href="../fr447420/index.html">Saut de stratosphère</a></li>
<li><a href="../fr447422/index.html">Expérience vidéo amusante: au lieu de VR - lunettes avec miroirs Ximmerse Visor-X</a></li>
<li><a href="../fr447424/index.html">Reaktive - bibliothèque multi-plateforme pour Kotlin réactif</a></li>
<li><a href="../fr447426/index.html">Comment, à qui et pourquoi consulter? Expérience personnelle avec le Big Data</a></li>
<li><a href="../fr447430/index.html">IntelliJ IDEA 2019.1: personnalisation des thèmes d'interface, passer des expressions à partir de Java 12, débogage à l'intérieur des conteneurs Docker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>