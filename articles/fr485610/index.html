<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåç ‚úäüèª ü¶Ñ Cr√©er une application Qt dans WebAssembly sous Windows üë©üèø‚Äçü§ù‚Äçüë®üèª üñåÔ∏è üíÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comme vous le savez, les applications √©crites en Qt, qui est multiplateforme, s'ex√©cutent depuis le bureau, le mobile, l'Internet des objets , jusqu'a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©er une application Qt dans WebAssembly sous Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485610/"><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br>  Comme vous le savez, les applications √©crites en Qt, qui est <a href="https://doc.qt.io/qt-5/supported-platforms.html" rel="nofollow">multiplateforme,</a> s'ex√©cutent depuis le <a href="https://www.qt.io/use-cases" rel="nofollow">bureau, le mobile, l'Internet des objets</a> , jusqu'aux <a href="https://www.qt.io/blog/2019/08/21/announcing-qt-mcus" rel="nofollow">microcontr√¥leurs</a> . <br><br>  Une option consiste √† cr√©er une application Qt dans WebAssembly - qui vous permettra de l'ex√©cuter dans le navigateur d'un utilisateur.  Ainsi, la mise √† jour de l'application pour l'utilisateur consistera √† t√©l√©charger un nouveau fichier wasm sur le serveur. <br><br>  Pour faciliter le d√©ploiement de l'application, dans le cadre de cet article, assemblons l'application Qt dans WebAssembly pour Windows sur la ligne de commande. <a name="habracut"></a><br><br>  La version Qt 5.13.2 est utilis√©e dans l'article et je pense que l'utilisateur a l'environnement Windows Qt install√©, configur√© et qu'il collecte des applications pour Desktop sans aucun probl√®me. <br><br>  Ex√©cutez l'utilitaire MaintenanceTool.exe et s√©lectionnez "Ajouter ou supprimer des composants" et cochez la case WebAssembly et attendez la fin de l'installation. <br><br><img src="https://habrastorage.org/webt/ed/s9/sa/eds9saafk20p2aq8icyhkz567fa.png"><br><br>  Cr√©ez un projet vide, par exemple dans Qt Creator (Qt Stack-view) et enregistrez-le. <br><br>  Nous allons sur la <a href="https://doc.qt.io/qt-5/wasm.html" rel="nofollow">page de</a> documentation officielle de Qt <a href="https://doc.qt.io/qt-5/wasm.html" rel="nofollow">WASM</a> . <br><br>  Nous commen√ßons √† installer esmdk.  T√©l√©chargez <a href="https://github.com/emscripten-core/emscripten" rel="nofollow">emscripten</a> et d√©compressez, par exemple, dans c: \ wasm <br><br>  Nous d√©marrons la ligne de commande (commencez √† ex√©cuter cmd) et essayons de l'installer: <br><br><pre><code class="plaintext hljs">cd c:\emsdk emsdk.bat install sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Rien ne se passe ici.  Et le curseur est d√©j√† sur la ligne suivante.  Que pourrait-il arriver?  Voyons pourquoi?  Ouvrez le fichier avec le bloc-notes et voyez: <br><br><img src="https://habrastorage.org/webt/zf/em/7g/zfem7g3qowujeln8bnqprb3g2uu.png"><br><br>  Avons-nous besoin d'un python?  V√©rifiez?  Nous √©crivons dans la ligne de commande <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version "python"      ,     .</code> </pre> <br>  Eh bien, nous devons encore installer Python.  <a href="https://www.python.org/downloads/windows/" rel="nofollow">T√©l√©chargez</a> et installez-le.  N'oubliez pas d'ajouter une coche lors de l'installation de ¬´Ajouter Python 3.8 √† PATH¬ª <br><br><img src="https://habrastorage.org/webt/zh/sq/dg/zhsqdg097xt83hk9pd9bjycvjia.png"><br><br>  Apr√®s avoir t√©l√©charg√© et install√©, fermez la ligne de commande et r√©ex√©cutez CMD.  Nous v√©rifions: <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version Python 3.8.1</code> </pre><br>  Installez emsdk et activez l'environnement de g√©n√©ration: <br><br><pre> <code class="plaintext hljs">emsdk.bat install sdk-fastcomp-1.38.27-64bit emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Nous v√©rifions: <br><br><pre> <code class="plaintext hljs">em++</code> </pre> <br>  Le compilateur est pr√™t.  Il est temps de commencer √† cr√©er notre application.  Regardons le dossier o√π Qt wasm est install√©: dans mon cas, il se trouve dans C: \ Qt \ 5.13.2 \ wasm_32 <br><br>  Ex√©cutez la ligne de commande avec l'environnement de construction de Mingw: D√©marrez mingw - s√©lectionnez Qt 5.13.2 (MinGW 7.3.0 32 bits) <br><br>  Nous y activons notre emsdk: <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Nous allons dans le dossier avec l'application de test et essayons de collecter: <br><br><pre> <code class="plaintext hljs">cd c:\Project\test-wasm qmake "qmake"      ,     .</code> </pre> <br><br>  Quelque chose a mal tourn√©?  En quelque sorte, n'ai-je pas correctement activ√© la cha√Æne et l'environnement pour l'assembly?  Fermez la ligne de commande et ex√©cutez-la √† nouveau: D√©marrez mingw - s√©lectionnez Qt 5.13.2 (MinGW 7.3.0 32 bits) et v√©rifiez que nous avons qmake: <br><br><pre> <code class="plaintext hljs">Setting up environment for Qt usage... C:\Qt\5.13.2\mingw73_32&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/mingw73_32/lib</code> </pre> <br>  Tout va bien, l'environnement Qt est activ√© et qmake est fonctionnel.  Nous essayons de r√©activer emsdk et obtenons la m√™me erreur. <br><br>  Eh bien, je pensais, il est possible d'en faire un ami: ex√©cutez d'abord emsdk puis activez l'environnement mingw - pour cela, nous devons regarder le raccourci de lancement de la console avec l'environnement mingw32 (d√©marrer mingw - cliquer avec le bouton droit sur l'emplacement du fichier ouvert - cliquer avec le bouton droit sur "Qt 5.13.2 (MinGW 7.3.0 32 bits) ¬ª- propri√©t√©s. <br><br><img src="https://habrastorage.org/webt/9s/5p/j2/9s5pj2xg81ww4yavpaocmchv1ti.png"><br><br>  Dans l'objet, nous nous int√©ressons au chemin de lancement du fichier bat.  Dans mon cas, c'est C: \ Qt \ 5.13.2 \ mingw73_32 \ bin \ qtenv2.bat <br><br>  Nous recommen√ßons donc.  Lancer ex√©cuter cmd <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit C:\Qt\5.13.2\mingw73_32\bin\qtenv2.bat qmake --version</code> </pre> <br>  fonctionne ... allez dans le dossier avec le code source du projet <br><br><pre> <code class="plaintext hljs">qmake make "make"      ,     .</code> </pre> <br>  Nous rappelons que nous utilisons mingw et la commande pour le construire est diff√©rente en elle: <br>  <b>mingw32-make.exe</b> <br><br><pre> <code class="plaintext hljs">mingw32-make</code> </pre> <br>  L'application s'est assembl√©e, mais v√©rifie qu'elle a bien √©t√© utilis√©e: <br><br><pre> <code class="plaintext hljs">g++ -Wl,-s -Wl,-subsystem,windows -mthreads -o release\test-wasm.exe release/main.o release/qrc_qml.o C:\Qt\5.13.2\mingw73_32\lib\libQt5Quick.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Gui.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Qml.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Network.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Core.a -lmingw32 C:\Qt\5.13.2\mingw73_32\lib\libqtmain.a -LC:\openssl\lib -LC:\Utils\my_sql\mysql-5.7.25-win32\lib -LC:\Utils\postgresql\pgsql\lib -lshell32 mingw32-make.exe[1]: Leaving directory 'c:/Project/test-wasm'</code> </pre> <br><br>  Alors  Arr√™ter  Qu'avons-nous collect√©? <br><br>  <b>Nous avons</b> <b>construit l'</b> application 32 bits habituelle pour le <b>bureau</b> (x86) car nous avons utilis√© l'assembly <u>C: \ Qt \ 5.13.2 \ mingw73_32</u> <br><br>  Et nous avions besoin de construire WASM.  Modifions l'environnement PATH pour qu'il prenne d'abord le chemin et qmake du dossier wasm: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH%</code> </pre> <br>  Nous effa√ßons le dossier des fichiers collect√©s <br><br><pre> <code class="plaintext hljs">mingw32-make.exe clean del .qmake.stash</code> </pre> <br>  Nous commen√ßons l'assemblage <br><br><pre> <code class="plaintext hljs">qmake</code> </pre> <br><img src="https://habrastorage.org/webt/cz/nx/3s/cznx3sfjy_1b4svadrdfr2uac9m.png"><br><br>  Qu'est-ce que  Encore une erreur?  De quel type de DLL avons-nous besoin?  Cherchons-le dans le dossier o√π Qt est install√©: <br>  Comment est-ce possible?  Le WASM 32 bits compil√© (c: \ Qt \ 5.13.2 \ wasm_32 \ bin) utilise-t-il une biblioth√®que de MINGW 64 bits? <br><br><img src="https://habrastorage.org/webt/kd/k_/my/kdk_mydgdcxxqogigkfjbt157wo.png"><br><br>  Eh bien, supposons que vous puissiez tenter votre chance, ajoutez le chemin d'acc√®s √† cette biblioth√®que 64 bits: <br><br><pre> <code class="plaintext hljs">set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% mingw32-make.exe clean qmake mingw32-make.exe</code> </pre><br>  et ... beaucoup d'erreurs <br><br><div class="spoiler">  <b class="spoiler_title">plus de d√©tails</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">release/main.o:main.cpp:(.text+0x1bc): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x1c6): undefined reference to `_imp___ZN11QMetaObject10ConnectionD1Ev' release/main.o:main.cpp:(.text+0x1d7): undefined reference to `_imp___ZN21QQmlApplicationEngine4loadERK4QUrl' release/main.o:main.cpp:(.text+0x1e0): undefined reference to `_imp___ZN15QGuiApplication4execEv' release/main.o:main.cpp:(.text+0x1ef): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x1f8): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x225): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x249): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x252): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x276): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x28f): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x2aa): undefined reference to `_imp___ZN4QUrlD1Ev' release/qrc_qml.o:qrc_qml.cpp:(.text+0x23): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x53): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x83): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text.startup+0x23): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)'</code> </pre> <br></div></div><br><pre> <code class="plaintext hljs">C:/Qt/Tools/mingw730_32/bin/../lib/gcc/i686-w64-mingw32/7.3.0/../../../../i686-w64-mingw32/lib/../lib/libmingw32.a(lib32_libmingw32_a-crt0_c.o):crt0_c.c:(.text.startup+0x39): undefined reference to `WinMain@16' collect2.exe: error: ld returned 1 exit status mingw32-make[1]: *** [Makefile.Release:66: release/test-wasm.exe] Error 1 mingw32-make[1]: Leaving directory 'c:/Project/test-wasm' mingw32-make: *** [Makefile:38: release] Error 2</code> </pre><br>  Pourquoi tant d'erreurs?  Pourquoi pas toi?  J'ai nettoy√© les fichiers temporaires, j'ai commenc√© la construction et j'ai eu tellement d'erreurs. <br><br>  Donc, vous devez penser, versez une tasse de th√© / caf√© ... <br><br>  Ok!  L'id√©e!  Parce que  apparemment, nous avons √©crit le dernier chemin d'acc√®s aux biblioth√®ques 64 bits comme le dernier, puis lors de la construction d'un WASM 32 bits, il n'a pas compris comment et quoi lier, et a essay√© d'utiliser le chemin d'acc√®s √† la biblioth√®que 64 bits, ce qui signifie que je devais sp√©cifier le chemin vers la biblioth√®que 32 bits plus t√¥t qu'auparavant. 64 bits.  Je vais essayer de le r√©parer: <br><br>  Fermez la console.  Nous ouvrons √† nouveau mingw 32 bits et ici la pens√©e me rend visite:  nous avons d√©j√† lanc√© la ligne de commande pour mingw 32 bits, puis en rempla√ßant le chemin d'acc√®s aux biblioth√®ques par 64 bits, nous prendrons √† nouveau la priorit√© lors de la construction de l'environnement de bureau Qt sur des composants 64 bits, et nous avons besoin d'un vice versa (car PATH sera utilis√© jusqu'√† 64 bits en premier, puis jusqu'√† 32 biblioth√®ques au total).  Eh bien, notre algorithme final sera comme ceci: <br><br><pre> <code class="plaintext hljs">cmd c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/qt/5.13.2/mingw73_64/lib</code> </pre> <br>  ajoutez le chemin au wasm et allez collecter: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH% cd c:\Project\test-wasm c:\Project\test-wasm&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/wasm_32/lib qmake mingw32-make "mingw32-make"      ,     .</code> </pre> <br>  25 encore!  Maintenant, qu'est-ce qui ne va pas avec moi?  O√π est ce fichier?  O√π aller?  Les recherches dans l'Explorateur indiquent qu'il se trouve dans <u>C: \ Qt \ Tools \ mingw730_32 \ bin</u> <br><br>  Eh bien, mingw32-make.exe sera maintenant d√©finitivement trouv√© avec nous: <br><br><pre> <code class="plaintext hljs">set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Nous commen√ßons √† collecter: <br><br><pre> <code class="plaintext hljs">c:\Project\test-wasm&gt;mingw32-make c:\Qt\5.13.2\wasm_32\bin\qmake.exe -o Makefile test-wasm.pro Info: creating stash file C:\Project\test-wasm\.qmake.stash sed -es/@APPNAME@/test-wasm/g C:/Qt/5.13.2/wasm_32/plugins/platforms/wasm_shell.html &gt; C:/Project/test-wasm/test-wasm.html "sed"      ,     . mingw32-make: *** [Makefile:424: apphtml] Error 1</code> </pre> <br>  <b>sed</b> ??  Ce n'est pas Linux, Mac, * nix, * BSD.  O√π l'obtenir?  Rechercher (sed.exe)? .. Et nous ne trouvons pas. <br><br>  Nous prenons Internet, recherchons (fen√™tres de t√©l√©chargement sed) et constatons qu'il peut √™tre t√©l√©charg√© pour <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">Windows</a> : <br><br>  T√©l√©chargez les binaires Zip, d√©compressez √† partir du dossier bin / sed.exe et ex√©cutez: <br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br>  Deux erreurs sur les composants dll manquants.  Avons-nous encore besoin de sed pour collecter √† partir de la source ou rechercher ces DLL manquantes?  Non, je ne voudrais pas faire √ßa ... Encore une fois, nous regardons attentivement le site Web <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">GNU</a> et le voyons dans les t√©l√©chargements: <b>‚Ä¢ Package complet, √† l'exception de la configuration des sources</b> <br><br>  T√©l√©chargez, d√©compressez et installez.  Essayez d'ex√©cuter: <br><br><pre> <code class="plaintext hljs">"c:\Program Files (x86)\GnuWin32\bin\sed.exe"</code> </pre> <br>  √áa marche !!!  Il reste √† l'ajouter √† nouveau au chemin: <br><br><pre> <code class="plaintext hljs">set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% mingw32-make</code> </pre> <br>  Le processeur a d√©marr√©, l'assemblage a commenc√©.  Eh bien, j'esp√®re que maintenant nous r√©ussirons! <br><br>  Cela a pris ... minutes <br><br><pre> <code class="plaintext hljs">emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv() emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv.30589() c:\Project\test-wasm&gt;dir ... 25.01.2020 17:42 2 922 test-wasm.html 25.01.2020 17:55 355 725 test-wasm.js 25.01.2020 14:59 461 test-wasm.js_plugin_import.cpp 25.01.2020 16:23 4 384 test-wasm.js_plugin_import.obj 25.01.2020 15:49 601 test-wasm.js_qml_plugin_import.cpp 25.01.2020 16:23 4 668 test-wasm.js_qml_plugin_import.obj 25.01.2020 14:52 1 099 test-wasm.pro 25.01.2020 15:25 22 523 test-wasm.pro.user 25.01.2020 17:55 20 759 738 test-wasm.wasm</code> </pre><br>  Hourra!  Cela s'est av√©r√©.  Notre application de test est assembl√©e.  Le binar Wasm prend 20 Mo.  Pas un peu.  Essayons d'ouvrir notre fichier test-wasm.htm dans un navigateur et ... <br><br><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br><h2>  Pour r√©sumer comment cr√©er une application Qt pour 5.13.2 sous Windows: </h2><br><br>  1. Vous devez installer Python.  GNU SED et installer les assemblys binaires WebAssembly via Qt install√© en ligne <br><br>  2. <pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Mais Habr ne serait pas Habr si je n'avais pas essay√© <b>de construire</b> l'application <b>WebAssembly √†</b> partir de la derni√®re version de Qt, qui est actuellement la <b>5.14.0</b> .  J'esp√®re que je ne m'attendrai pas √† la fin de la m√™me qu√™te que lors de la construction dans la version 5.13.2. <br><br>  Gr√¢ce au programme d'installation en ligne (MaintenanceTool.exe), nous installons Qt WebAssembly pour la version 5.14.0.  Nous configurons l'environnement et ex√©cutons l'assemblage. <br><br>  Le processus continue et ... <br><br><img src="https://habrastorage.org/webt/zt/zh/b0/ztzhb07vfti-eekm3krpb5v-u1q.png"><br><br>  Rien n'est clair.  Comment est-ce?  Pour la version 5.13.2, apr√®s avoir dans√© avec un tambourin, j'ai pu assembler l'application, mais pour 5.14.0 √ßa n'a pas march√©?  Mais comment l'ont-ils (Qt) assembl√©? <br><br>  ... Mais pouvons-nous √©galement construire WASM Qt 5.14.0 √† partir des sources?  Et pourquoi pas.  Pour ce faire, nous avons besoin de beaucoup d'espace sur le disque dur, ainsi que d'une bonne charge / charge pour le processeur: <br><br><pre> <code class="plaintext hljs">echo PATH=c:\qtwasm514\bin;"C:\Program Files (x86)\GnuWin32\bin";c:\qt\Tools\mingw730_32\bin;%PATH% c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit cd c:\Qt\5.14.0\Src configure.bat -no-warnings-are-errors -xplatform wasm-emscripten -platform win32-g++ -nomake examples -prefix c:\qtwasm</code> </pre><br>  Dans ce cas, apr√®s l'assemblage, nous aurons install√© wasm dans le dossier c: \ qtwasm, et pourtant nous n'avons pas besoin de collecter d'exemples. <br><br><div class="spoiler">  <b class="spoiler_title">Sortie de configuration</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Building on: win32-g++ (i386, CPU features: none) Building for: wasm-emscripten (wasm, CPU features: none) Target compiler: clang 6.0.1 Configuration: cross_compile largefile release c++11 no-pkg-config reduce_exports static stl Build options: Mode ................................... release Optimize release build for size ........ no Building shared libraries .............. no Using C standard ....................... C11 Using C++ standard ..................... C++11 Using ccache ........................... no Using precompiled headers .............. no Using LTCG ............................. no Target compiler supports: Build parts ............................ libs Qt modules and options: Qt Concurrent .......................... no Qt D-Bus ............................... no Qt D-Bus directly linked to libdbus .... no Qt Gui ................................. yes Qt Network ............................. yes Qt Sql ................................. no Qt Testlib ............................. yes Qt Widgets ............................. yes Qt Xml ................................. yes Support enabled for: Using pkg-config ....................... no udev ................................... no Using system zlib ...................... no Zstandard support ...................... no Qt Core: DoubleConversion ....................... yes Using system DoubleConversion ........ no GLib ................................... no iconv .................................. yes ICU .................................... no Built-in copy of the MIME database ..... yes Tracing backend ........................ none Logging backends: journald ............................. no syslog ............................... no slog2 ................................ no Using system PCRE2 ..................... no Qt Network: getifaddrs() ........................... no IPv6 ifname ............................ no libproxy ............................... no OpenSSL ................................ no Qt directly linked to OpenSSL ........ no OpenSSL 1.1 ............................ no DTLS ................................... no OCSP-stapling .......................... no SCTP ................................... no Use system proxies ..................... yes Qt Gui: Accessibility .......................... yes FreeType ............................... yes Using system FreeType ................ no HarfBuzz ............................... yes Using system HarfBuzz ................ no Fontconfig ............................. no Image formats: GIF .................................. yes ICO .................................. yes JPEG ................................. yes Using system libjpeg ............... no PNG .................................. yes Using system libpng ................ no EGL .................................... yes OpenVG ................................. no OpenGL: Desktop OpenGL ....................... no OpenGL ES 2.0 ........................ yes OpenGL ES 3.0 ........................ no OpenGL ES 3.1 ........................ no OpenGL ES 3.2 ........................ no Vulkan ................................. no Session Management ..................... yes Features used by QPA backends: evdev .................................. no libinput ............................... no INTEGRITY HID .......................... no mtdev .................................. no tslib .................................. no xkbcommon .............................. no X11 specific: XLib ................................. no XCB Xlib ............................. no EGL on X11 ........................... no QPA backends: DirectFB ............................... no EGLFS .................................. no LinuxFB ................................ no VNC .................................... yes Mir client ............................. no Qt Sql: SQL item models ........................ yes Qt Widgets: GTK+ ................................... no Styles ................................. Fusion Windows Qt PrintSupport: CUPS ................................... no Qt Sql Drivers: DB2 (IBM) .............................. no InterBase .............................. no MySql .................................. no OCI (Oracle) ........................... no ODBC ................................... no PostgreSQL ............................. no SQLite2 ................................ no SQLite ................................. yes Using system provided SQLite ......... no TDS (Sybase) ........................... no Qt Testlib: Tester for item models ................. yes Qt SerialBus: Socket CAN ............................. no Socket CAN FD .......................... no SerialPort Support ..................... no Further Image Formats: JasPer ................................. no MNG .................................... no TIFF ................................... yes Using system libtiff ................. no WEBP ................................... yes Using system libwebp ................. no Qt QML: QML network support .................... yes QML debugging and profiling support .... yes QML tracing JIT support ................ no QML sequence object .................... yes QML list model ......................... yes QML XML http request ................... yes QML Locale ............................. yes QML delegate model ..................... yes Qt Quick: Direct3D 12 ............................ no AnimatedImage item ..................... yes Canvas item ............................ yes Support for Qt Quick Designer .......... yes Flipable item .......................... yes GridView item .......................... yes ListView item .......................... yes TableView item ......................... yes Path support ........................... yes PathView item .......................... yes Positioner items ....................... yes Repeater item .......................... yes ShaderEffect item ...................... yes Sprite item ............................ yes Qt Scxml: ECMAScript data model for QtScxml ...... yes Qt Gamepad: SDL2 ................................... no Qt 3D GeometryLoaders: Autodesk FBX ........................... no Qt Wayland Client ........................ no Qt Wayland Compositor .................... no Qt Bluetooth: BlueZ .................................. no BlueZ Low Energy ....................... no Linux Crypto API ....................... no WinRT Bluetooth API (desktop &amp; UWP) .... no WinRT advanced bluetooth low energy API (desktop &amp; UWP) . no Qt Sensors: sensorfw ............................... no Qt Quick Controls 2: Styles ................................. Default Fusion Imagine Material Universal Qt Quick Templates 2: Hover support .......................... yes Multi-touch support .................... yes Qt Positioning: Gypsy GPS Daemon ....................... no WinRT Geolocation API .................. no Qt Location: Qt.labs.location experimental QML plugin . yes Geoservice plugins: OpenStreetMap ........................ no HERE ................................. yes Esri ................................. yes Mapbox ............................... yes MapboxGL ............................. no Itemsoverlay ......................... yes QtXmlPatterns: XML schema support ..................... yes Qt Multimedia: ALSA ................................... no GStreamer 1.0 .......................... no GStreamer 0.10 ......................... no Video for Linux ........................ no OpenAL ................................. no PulseAudio ............................. no Resource Policy (libresourceqt5) ....... no Windows Audio Services ................. no DirectShow ............................. no Windows Media Foundation ............... no Qt Tools: QDoc ................................... no Qt WebEngineCore: Qt WebEngine Widgets ................... yes Qt WebEngine Qml ....................... yes Embedded build ......................... yes Full debug information ................. no Pepper Plugins ......................... no Printing and PDF ....................... no Proprietary Codecs ..................... no Spellchecker ........................... yes Native Spellchecker .................... no WebRTC ................................. no Use System Ninja ....................... no Geolocation ............................ yes WebChannel support ..................... yes Use v8 snapshot ........................ yes Kerberos Authentication ................ no Extensions ............................. no Support qpa-xcb ........................ no Building v8 snapshot supported ......... yes Use ALSA ............................... no Use PulseAudio ......................... no Optional system libraries used: re2 .................................. no icu .................................. no libwebp, libwebpmux and libwebpdemux . no opus ................................. no ffmpeg ............................... no libvpx ............................... no snappy ............................... no glib ................................. no zlib ................................. no minizip .............................. no libevent ............................. no jsoncpp .............................. no protobuf ............................. no libxml2 and libxslt .................. no lcms2 ................................ no png .................................. no JPEG ................................. no harfbuzz ............................. no freetype ............................. no Required system libraries: fontconfig ........................... no dbus ................................. no nss .................................. no khr .................................. no glibc ................................ no Required system libraries for qpa-xcb: x11 .................................. no libdrm ............................... no xcomposite ........................... no xcursor .............................. no xi ................................... no xtst ................................. no Qt WebEngineQml: UI Delegates ........................... yes Test Support ........................... no Note: Using static linking will disable the use of dynamically loaded plugins. Make sure to import all needed static plugins, or compile needed modules into the library. Note: No wayland-egl support detected. Cross-toolkit compatibility disabled. Note: The following modules are not being compiled in this configuration: serialport 3dcore 3drender WARNING: QDoc will not be compiled, probably because libclang could not be located. This means that you cannot build the Qt documentation. Either ensure that llvm-config is in your PATH environment variable, or set LLVM_INSTALL_DIR to the location of your llvm installation. On Linux systems, you may be able to install libclang by installing the libclang-dev or libclang-devel package, depending on your distribution. On macOS, you can use Homebrew's llvm package. On Windows, you must set LLVM_INSTALL_DIR to the installation path. WARNING: host pkg-config not found Qt is now configured for building. Just run 'mingw32-make'. Once everything is built, you must run 'mingw32-make install'. Qt will be installed into 'c:\qtwasm'. Prior to reconfiguration, make sure you remove any leftovers from the previous build.</code> </pre> <br></div></div><br>  Nous assemblons et installons: <br><br><pre> <code class="plaintext hljs">mingw32-make mingw32-make install</code> </pre> <br>  Apr√®s avoir reconstruit WASM Qt 5.14.0 et install√© c: \ qtwasm dans le dossier et utilis√© ce chemin, j'ai pu cr√©er WebAssembly √† partir de la version 5.14.0 de Qt. <br><br><h2>  Conclusion 2. </h2><br>  Si vous souhaitez utiliser Qt 5.14.0 WebAssembly, vous devrez le reconstruire √† partir des sources et utiliser la version que vous avez d√©j√† construite. <br><br><h2>  Conclusion </h2><br>  Qt WebAssembly est une technologie assez int√©ressante qui est apparue dans Qt depuis la version <a href="https://www.qt.io/blog/2018/11/19/getting-started-qt-webassembly" rel="nofollow">5.12</a> . <br><br>  Des <a href="https://www.qt.io/blog/2018/05/22/qt-for-webassembly-examples" rel="nofollow">exemples de</a> WebAssembly peuvent √™tre consult√©s en <a href="https://www.qt.io/qt-examples-for-webassembly" rel="nofollow">ligne</a> sur le site Web de Qt. <br><br>  Cependant, lorsque j'ai essay√© de cr√©er mon propre projet, j'ai eu des erreurs: <br><br><img src="https://habrastorage.org/webt/gl/in/tm/glintm9_aahtojefsodha0ntaz4.png"><br><br>  Par cons√©quent, lors de l'utilisation de cette technologie, il est n√©cessaire d'√©tudier ses <a href="https://wiki.qt.io/Qt_for_WebAssembly" rel="nofollow">limites</a> . <br><br>  Modules non pris en charge actuellement: qtmultimedia, qtwebview. <br><br>  Actuellement, WebAssembly fonctionne principalement dans les navigateurs de bureau, et lorsque la prise en charge compl√®te appara√Æt sur les appareils mobiles n'est pas connue. <br><br>  Pour ceux qui ont lu cet article jusqu'au bout, mais qui n'ont jamais essay√© Qt, vous pouvez t√©l√©charger le programme d' <a href="https://www.qt.io/download" rel="nofollow">installation en ligne</a> , s√©lectionner les options MinGW et la version requise de Qt WebAssmbly.  <a href="https://www.qt.io/development-tools" rel="nofollow">QtCreator sera</a> install√© par d√©faut et vous pourrez cr√©er votre premi√®re application. <br><br>  √Ä la fin de cet article, je voudrais recommander aux utilisateurs d'essayer de collecter des exemples √† partir des sources Qt, du dossier Src \ qtcharts \ examples et de les ex√©cuter dans un navigateur. <br><br>  Pour d√©marrer le serveur Web, vous pouvez utiliser Python et ex√©cuter: <br>  <code>python -m http.server 8000 --bind 192.168.0.10</code> si vous avez une adresse dans le r√©seau local de l'ordinateur 192.168.0.10.  N'oubliez pas non plus d'ouvrir le port dans le pare-feu, puis vous pouvez essayer d'ouvrir l'application via un navigateur √† partir d'un autre ordinateur / appareil / smartphone. <br><br>  Votez et donnez vos exemples d'utilisation du meilleur framework GUI pour C ++ Qt dans les commentaires. <br><br>  <i><b>Bonne chance avec votre cr√©ativit√© et vos nouvelles r√©alisations!</b></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485610/">https://habr.com/ru/post/fr485610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485596/index.html">Entrevues d'algorithmes: th√©orie vs pratiquer</a></li>
<li><a href="../fr485598/index.html">√âv√©nements num√©riques √† Moscou du 27 janvier au 2 f√©vrier</a></li>
<li><a href="../fr485600/index.html">√âv√©nements num√©riques √† Saint-P√©tersbourg du 27 janvier au 2 f√©vrier</a></li>
<li><a href="../fr485606/index.html">Op√©rations de filtrage des pilotes dans le registre. Pratique</a></li>
<li><a href="../fr485608/index.html">Microservices avec Spring Boot. Partie 4. Utilisation du ruban pour l'√©quilibrage de charge</a></li>
<li><a href="../fr485612/index.html">Qu'est-ce qu'un accident spatial m'a appris en tant que d√©veloppeur</a></li>
<li><a href="../fr485614/index.html">La culture d'entreprise rouge est le principal probl√®me des entreprises russes (partie 3)</a></li>
<li><a href="../fr485618/index.html">Automatisation pour les plus petits. Remarques. API RESTful</a></li>
<li><a href="../fr485620/index.html">Yoshkar-Ola, en g√©n√©ral, une ville informatique?</a></li>
<li><a href="../fr485622/index.html">Outils de sauvegarde PostgreSQL. Andrey Salnikov (Data Egret)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>