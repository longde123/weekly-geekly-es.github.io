<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌥️ 👩🏼‍🚒 🗻 Erstellen einer lokalen Cross-Country-Karte des Roboters ⬇️ 👣 🤒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! 

 In dieser Veröffentlichung möchte ich darüber sprechen, wie ich eine lokale Cross-Country-Karte für den Roboter erstellt habe. Diese Au...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer lokalen Cross-Country-Karte des Roboters</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418585/"> Hallo Habr! <br><br>  In dieser Veröffentlichung möchte ich darüber sprechen, wie ich eine lokale Cross-Country-Karte für den Roboter erstellt habe.  Diese Aufgabe war sowohl notwendig, um die Kenntnisse in der Programmierung und Beherrschung von Sensoren zu verbessern, als auch für die anschließende Implementierung unserer eigenen Algorithmen in der Arbeit von echten Robotern an Robotertests wie Robocross und Robofest. <br><a name="habracut"></a><br>  Dieser Artikel richtet sich an Personen, die gerade erst in die Welt der Robotik einsteigen oder herausfinden möchten, wie eine Cross-Country-Karte erstellt wird.  Ich habe versucht, alles in der einfachsten und verständlichsten Sprache zu erklären, die für die meisten Menschen verständlich ist. <br><br><h3>  Was ist eine lokale Langlaufkarte? </h3><br>  Eine <i>lokale Cross-Country-Karte</i> sieht der Roboter also zu einem bestimmten Zeitpunkt. <br>  Dies sind die Informationen, die aus den "Augen" des Roboters stammen und anschließend verarbeitet und in einer für uns geeigneten Form angezeigt werden. <br><br>  Wenn der Roboter stillsteht, bleibt seine lokale Karte unter konstanten Umgebungsbedingungen konstant. <br><br>  Wenn sich der Roboter bewegt, ändert sich zu jedem Zeitpunkt auch seine Umgebung, und auch die lokale Karte ändert sich. <br><br>  Die lokale Karte hat normalerweise konstante Größen.  Die Größe wird basierend auf der maximalen Länge der vom Entfernungsmesser emittierten Strahlen berechnet.  In meinem Fall beträgt diese Länge 6 Meter. <br><br>  Um die Aufgabe zu vereinfachen, wurde beschlossen, die Karte quadratisch zu machen. Es wurde auch beschlossen, dass sich der bedingte Entfernungsmesser genau in der Mitte der Karte befindet (dieser Ort ist der Punkt, an dem x = y = 0 ist).  Das Zentrum wurde auf diese Weise ausgewählt, weil der von mir verwendete Entfernungsmesser Strahlen in der Ebene von mehr als 180 ° aussendet (er sendet Strahlen bei 240 ° aus, aber dazu später mehr), das heißt, einige Strahlen werden sicherlich hinter den Scanner und Wenn Sie das falsche Zentrum wählen, können Sie diese verlieren.  Bei richtiger Wahl des Zentrums werden alle Strahlen korrekt angezeigt.  Auf dieser Grundlage habe ich die Kartengröße zweimal größer gemacht als die maximale Länge der emittierten Strahlen. <br>  Die Größe meiner Karte beträgt 12 * 12 Meter. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/635/1f0/86a/6351f086a9603d43504dedf13cf7bcd7.jpg" alt="Bild"><br><br><h3>  Der Sensor, den ich benutzt habe </h3><br>  Um diese Art von Problem zu lösen, können Sie einen beliebigen Entfernungsmesser verwenden. <br>  <i>Der Entfernungsmesser</i> ist ein Gerät zur Bestimmung der Entfernung zu etwas (in meinem Fall zu einem potenziellen Hindernis). <br><br>  In der Robotik werden hauptsächlich zwei Arten von Entfernungsmessern verwendet: Ultraschall und Laser. <br>  <i>Ultraschall-</i> Entfernungsmesser sind viel billiger, aber Ultraschallstrahlen sind breit genug und nicht für genaue Messungen geeignet. <br><br>  <i>Laser-</i> Entfernungsmesser sind teurer, aber genauer, da ihre Strahlen eng fokussiert sind. <br><br>  Um mein Problem zu lösen, habe ich einen Hokuyo URG-04LX-UG01 Laserscanner verwendet.  Dieser Sensor kann Strahlen mit 240 ° emittieren und liefert ziemlich genaue Informationen über die Hindernisse, die den Strahlen im Weg standen.  Die maximale Reichweite beträgt 5-6 Meter.  Es ist erwähnenswert, dass dieser Entfernungsmesser Strahlen nur in der 2D-Ebene aussendet.  Diese Tatsache zwingt Sie dazu, den Sensor an einer bestimmten Stelle am Roboter anzubringen, normalerweise vor der Unterseite des Roboters, um ein genaueres Bild zu erhalten.  Auch hier können Sie 3D-Scanner verwenden, die viel genauere und vollständigere Informationen über die Umgebung liefern, aber auch viel mehr kosten. <br><br>  Ich glaube, dass dieser spezielle Scanner perfekt für das Training im Preis-Leistungs-Verhältnis geeignet ist. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/376/7c9/d3d/3767c9d3df64dcd9322c6ef25bfec28d.jpg" alt="Bild"><br>  <i>Hokuyo URG-04LX-UG01</i> <br><br>  <b><i>Kurz zum Prinzip des Laserscanners:</i></b> <br>  Der Entfernungsmesser sendet Strahlen entlang der Ebene aus.  Ein Strahl, der auf seinem Weg auf ein Hindernis gestoßen ist, wird von diesem reflektiert und kommt zurück.  Anhand der Phasendifferenz zwischen den gesendeten und empfangenen Signalen kann man beurteilen, wie weit sich das Hindernis befindet. <br><br>  Wenn der emittierte Strahl nicht zurückkehrte, gab es dementsprechend bei 5 bis 6 Metern entlang der geraden Linie seiner Emission entweder keine Hindernisse oder der Strahl konnte nicht richtig reflektieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f3/5c2/d32/7f35c2d32d35e2357c53b8a87c12b88a.jpg" alt="Bild"><br><br>  <i>Die folgenden Daten können von einem Laserscanner erhalten werden:</i> <br><br>  Für jeden emittierten Strahl: <br><br><ul><li>  Entfernung zu einem Hindernis </li><li>  Emissionswinkel </li></ul><br>  <i>* Jeder der Parameter wird in einem separaten Array gespeichert und entspricht den Daten für einen der Strahlen.</i> <br><br><h4>  Über das Erstellen von Karten </h4><br>  Um die Karte zu erstellen und zu zeichnen, habe ich die ROS-Tools (Robot Operating System) verwendet, nämlich das Programm Rviz und den Datentyp nav_msgs :: OccupancyGrid.  Ich habe einen Herausgeber der lokalen Karte mit dem Nachrichtentyp nav_msgs :: OccupancyGrid unter dem entsprechenden Thema local_map erstellt.  In Rviz, das dieses Thema abonniert hat, wurden Daten zur Karte empfangen und in Form des Typs Karte angezeigt. <br><br>  In Übereinstimmung mit einem solchen Algorithmus war es notwendig, die Verarbeitung von Daten von einem Laserscanner programmgesteuert zu konfigurieren und sie in dem für die Übertragung erforderlichen Format aufzuzeichnen.  In OccupancyGrid wird eine Karte in einem eindimensionalen Array gespeichert und übertragen. <br><br><div class="spoiler">  <b class="spoiler_title">Was ist hier los?</b> <div class="spoiler_text">  Für diejenigen, die zum ersten Mal mit dieser Art von ROS-Daten konfrontiert sind: Dies ist ungewöhnlich, da die Karte herkömmlicherweise als zweidimensionales Array mit einer bestimmten Anzahl von Spalten und Zeilen dargestellt wird. <br><br>  So war es bei mir.  Ich speichere die Karte basierend auf den Daten des Scanners in einem zweidimensionalen Array. Wenn ich eine Nachricht zum Senden an Rviz verfasse, konvertiere ich das zweidimensionale Array in das eindimensionale Array, das für OccupancyGrid benötigt wird. <br><br>  Tatsächlich wird eine Karte in OccupancyGrid nur in einem eindimensionalen Array gespeichert und übertragen.  Beim Entschlüsseln der Daten wird automatisch eine quadratische zweidimensionale Karte erstellt. <br>  Damit dies jedoch korrekt geschieht, müssen Sie dieses eindimensionale Array auf eine bestimmte Weise schreiben. <br><br>  <i>Nämlich:</i> Zeile für Zeile aus dem zweidimensionalen Speicher, um in eine Zeile zu schreiben. <br><br>  <b>Voila!</b>  <b>Das ist das ganze Geheimnis.</b> <br></div></div><br>  Eine Berufung auf ein Element eines solchen eindimensionalen Arrays erfolgt wie folgt: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>M</mi><mi>a</mi><mi>p</mi><mo stretchy=&quot;false&quot;>[</mo><mi>m</mi><mi>a</mi><mi>p</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>&amp;#x2217;</mo><mi>j</mi><mo>+</mo><mi>i</mi><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.595ex" height="2.66ex" viewBox="0 -832 11450.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-6F" x="298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-63" x="784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-61" x="1217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-6C" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-4D" x="2045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-61" x="3097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-70" x="3626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMAIN-5B" x="4130" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-6D" x="4408" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-61" x="5287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-70" x="5816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-53" x="6320" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-69" x="6965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-7A" x="7311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-65" x="7779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMAIN-2217" x="8468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-6A" x="9190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMAIN-2B" x="9825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMATHI-69" x="10826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/418585/&amp;usg=ALkJrhg9biwCriEUkbDhcrNPEh1j26EtNA#MJMAIN-5D" x="11171" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>M</mi><mi>a</mi><mi>p</mi><mo stretchy="false">[</mo><mi>m</mi><mi>a</mi><mi>p</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>∗</mo><mi>j</mi><mo>+</mo><mi>i</mi><mo stretchy="false">]</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> localMap [mapSize * j + i] </script></p><br>  <i>mapSize - lokale Kartengröße</i> <i><br></i>  <i>j ist die Spaltennummer</i> <i><br></i>  <i>i - Zeilennummer</i> <br><br>  Kartenzellen (wiederum entsprechend dem Datentyp des OccupancyGrid) müssen Werte von 0 bis 100 haben. Je niedriger der Wert, desto größer ist die Wahrscheinlichkeit, dass die Zelle passierbar ist und umgekehrt. <br><br>  Um die Aufgabe zu vereinfachen, habe ich <i>3 Primärfarben zum Färben von Zellen ausgewählt.</i> <br><br><ul><li>  Weiß - Passierbarer Bereich = 0 </li><li>  Schwarz - unpassierbarer Bereich = 100 </li><li>  Grau - unbekannte Zone = 50 </li></ul><br>  <b>Ein wichtiger Punkt!</b> <br><br>  Bevor die Daten vom Scanner eintreffen, ist die Karte vollständig unbekannt (Werte aller Zellen = 50) und wird jedes Mal nach dem Zeichnen erneut in einen unbekannten Zustand aktualisiert.  Dies geschieht, damit die Karte keine überflüssigen vorherigen Werte überlagert.  Schließlich spiegelt eine lokale Karte den Zustand der Umgebung nur zu einem bestimmten Zeitpunkt wider. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8cf/4d8/e9f/8cf4d8e9fcd8b2ce7f46f9a6f1117520.jpg" alt="Bild"><br>  <i>Unbekannte Karte</i> <br><br>  Strahlen werden unter Verwendung einer Transformation aus dem Polarkoordinatensystem (UCS) konstruiert. <br>  zum kartesischen Koordinatensystem (DSC). <br><p><math> </math> $$ display $$ \ left \ {\ begin {collect} x = r * cos φ \\ y = r * sin φ \ end {collect} \ right. $$ display $$ </p><br>  <i>x, y - neue Koordinaten in DSC</i> <i><br></i>  <i>r ist der Abstand zum Hindernis</i> <i><br></i>  <i>φ ist der Winkel, in dem der Strahl fallen gelassen wurde</i> <i><br></i>  <i>r, φ - alte Koordinaten in UCS</i> <i><br></i> <br><h3>  Algorithmus zur Verarbeitung von Sensordaten: </h3><br>  Wir durchlaufen die Anordnungen der Abstände r und Winkel φ der Strahlen vollständig (UCS-Daten).  Gehen Sie für jeden Artikel wie folgt vor: <br><br><ol><li>  Wir transformieren die Koordinaten von UCS zu DSC für endliches r und φ.  Malen Sie die resultierende Zelle schwarz.  Dies ist ein Hindernis. </li><li>  Wir gehen in einer geraden Linie von der Position des Scanners zur Zelle mit einem Hindernis mit einem bestimmten Schritt, im einfachsten Fall gleich der Zellengröße. </li><li>  Wir konvertieren erneut die Daten vom BKS zum DSC und malen die neue Zelle in Weiß.  Dies ist eine begehbare Gegend. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/19d/0b0/958/19d0b0958c7c0b9b243a4863e60c7ed0.jpg" alt="Bild"><br>  <i>Das einfachste Beispiel dafür, wie man einen begehbaren Weg zu einem Hindernis baut</i> <br><br><div class="spoiler">  <b class="spoiler_title">Was aber, wenn der emittierte Strahl nicht zurückkehrt?</b> <div class="spoiler_text">  In diesem Fall könnte dies Folgendes bedeuten: <br><br><ul><li>  Der Strahl ist „verloren“, dh er wird nicht vollständig reflektiert oder in die andere Richtung reflektiert </li><li>  Es gab keine Hindernisse im Weg des Strahls und aus diesem Grund hatte er einfach nichts zu reflektieren </li></ul><br>  <i>* Ein Strahl kann normalerweise „verloren gehen“, weil er nicht in einem Winkel von 180 ° reflektiert wurde (dh unter einem Winkel, der nicht nach hinten reicht), da das Hindernis senkrecht zum Strahl stehen könnte.</i>  <i>Und wie Sie aus der Physik wissen: Der Einfallswinkel ist gleich dem Reflexionswinkel.</i> <i><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b53/356/1e4/b533561e47b3b99c198f5fe2a0196ceb.png" alt="Bild"><br><br></i>  <i>Oder weil das Hindernis zu schwarz war und den größten Teil der Energie des Strahls absorbierte und der Strahl nicht genug Energie hatte, um zurück zu gehen.</i> <i><br></i> <br>  Daher ist es unmöglich, völlig sicher zu sein, was passiert ist, wenn der Strahl nicht zurückgekehrt ist. <br><br>  <b>Was tun in solchen Situationen?</b> <br><br>  Wir machen folgendes: <br><br><ol><li>  Wir betrachten den Abstand zum Hindernis eines solchen Strahls für den Scanner als möglich (in unserem Fall sind es 6 Meter). </li><li>  Wir betrachten alle Zellen in einer geraden Linie zum Hindernis als halbpassierbar und weisen ihnen eine Zwischenzahl von 25 zu. Dies sind passierbare Zellen, aber wir sind uns ihrer nicht ganz sicher. </li></ol><br>  Wir verlieren nichts, wenn die Strahlen wirklich nicht auf Hindernisse treffen und wenn dennoch ein Hindernis aus den „Augen“ des Roboters entweicht, wird es mit Sicherheit sehr schnell erkannt. <br></div></div><br><h3>  Kartenauflösung </h3><br>  Endlich der letzte Schliff! <br><br>  Jede Karte hat eine Erlaubnis.  Einfach ausgedrückt ist dies die Anzahl der Zellen, die in eine Zelle passen können. <br><br>  <i>Zum Beispiel</i> <br>  <i>Wenn es 1 Zelle in 1 Zelle gibt (der einfachste Fall), dann Auflösung 1.</i> <i><br></i>  <i>Wenn eine Zelle 5 Zellen enthält, beträgt die Auflösung 0,2.</i> <i><br></i> <br>  Die Auflösung meiner Karte beträgt 0,04.  Das heißt, in jeder Zelle gibt es 25 Zellen.  Somit beträgt mein Mindestschritt 4 cm. Und 1 Zelle ist 1 m. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/219/7d1/8ba/2197d18ba5635075a0ab1adc5a63e1a7.jpg" alt="Bild"><br>  <i>Zelle und Zellunterschied auf meiner Karte</i> <br><br><h3>  Was ist das Ergebnis? </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/1f7/6be/9f0/1f76be9f0fbb8891273bec4c7d1cea99.jpg" alt="Bild"><br>  <i>Ein Beispiel für die Erstellung einer lokalen Cross-Country-Karte</i> <i><br></i>  <i>* Gelbe Farbe zeigt Zellfarben an</i> <br><br>  Ich glaube, dass die Arbeit, die ich geleistet habe, im Allgemeinen erfolgreich war, aber ich verstehe, dass der Algorithmus unvollkommen ist und Verfeinerung und Verfeinerung erfordert. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418585/">https://habr.com/ru/post/de418585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418573/index.html">Waterius: Übertragen Sie die Wasserwerte über WLAN auf ein Telefon (4 Jahre im Akkubetrieb).</a></li>
<li><a href="../de418575/index.html">"Nicht abheben": 6 ungewöhnliche Audio-Gadgets</a></li>
<li><a href="../de418577/index.html">Verwalten Sie Ihre Lesezeichen mit Tags - zur Freude Ihrer selbst und Ihrer Kollegen</a></li>
<li><a href="../de418579/index.html">Funktionsweise von Bibliotheken für virtuelle Umgebungen</a></li>
<li><a href="../de418581/index.html">React Basics (Lehrbuch, 2. Auflage)</a></li>
<li><a href="../de418587/index.html">Neue 3CX-Clients für Android und iOS mit OPUS- und PUSH-Codec für mehrere Geräte</a></li>
<li><a href="../de418589/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 324 (23. - 29. Juli 2018)</a></li>
<li><a href="../de418591/index.html">Bug Bounty Kyivstar: Belohnung für Administratorzugriff auf Jira-, AWS-, Apple-, Google Developer- und Bitbucket-Dienste - 50 US-Dollar</a></li>
<li><a href="../de418593/index.html">Nicht alle drahtlosen Kopfhörer sind gleichermaßen nützlich oder ein paar Worte zum Codec-Problem</a></li>
<li><a href="../de418597/index.html">Funktionen zum Dokumentieren von PostgreSQL-Datenbanken. Teil drei</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>