<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíø üå∫ ü§∑üèΩ Preparando-se para combinar üé± ü•ñ üñäÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° um ano e meio, cantei os louvores do RxSwift . Demorei um pouco para descobrir, mas quando isso aconteceu, n√£o havia como voltar atr√°s. Agora eu ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Preparando-se para combinar</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/470117/"><img src="https://habrastorage.org/webt/km/8-/uo/km8-uov-j3m2rfjjsxscoyeh9bc.jpeg"><br><br>  H√° um ano e meio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cantei os louvores do</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RxSwift</a> .  Demorei um pouco para descobrir, mas quando isso aconteceu, n√£o havia como voltar atr√°s.  Agora eu tinha o melhor martelo do mundo e me amaldi√ßoasse se tudo ao meu redor n√£o parecesse um prego. <br><br>  A Apple apresentou a estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Combine</a> na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WWDC</a> Summer Conference.  √Ä primeira vista, parece uma vers√£o um pouco melhor do RxSwift.  Antes que eu possa explicar o que gosto e o que n√£o, precisamos entender qual problema o Combine foi projetado para resolver. <br><a name="habracut"></a><br><h2>  Programa√ß√£o reativa?  E da√≠? </h2><br>  A comunidade ReactiveX - da qual a comunidade RxSwift faz parte - explica sua ess√™ncia da seguinte maneira: <br><br><blockquote>  API para programa√ß√£o ass√≠ncrona com threads observ√°veis. </blockquote><br>  E tamb√©m: <br><br><blockquote>  O ReactiveX √© uma combina√ß√£o das melhores id√©ias dos padr√µes de design do Observer e Iterator, al√©m de programa√ß√£o funcional. </blockquote><br>  Bem ... tudo bem. <br><br>  E o que isso <i>realmente</i> significa? <br><br><h2>  O b√°sico </h2><br>  Para realmente entender a ess√™ncia da programa√ß√£o reativa, acho √∫til entender como chegamos a ela.  Neste artigo, descreverei como voc√™ pode examinar os tipos existentes em qualquer linguagem OOP moderna, alter√°-los e chegar √† programa√ß√£o reativa. <br><br>  Neste artigo, mergulharemos rapidamente na selva, o que n√£o √© <i>absolutamente</i> necess√°rio para entender a programa√ß√£o reativa. <br><br>  No entanto, considero isso um curioso exerc√≠cio acad√™mico, especialmente em termos de qu√£o fortemente tipadas as l√≠nguas podem nos levar a novas descobertas. <br><br>  Ent√£o, aguarde meus pr√≥ximos posts, se voc√™ estiver interessado em novos detalhes. <br><br><h2>  Enumer√°vel </h2><br>  A ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">programa√ß√£o reativa</a> ‚Äù conhecida por mim se originou na linguagem em que escrevi uma vez - C #.  A premissa em si √© bastante simples: <br><br>  <i>E se, em vez de extrair valores de enumer√°veis, eles enviarem os valores por voc√™?</i> <br><br>  Essa id√©ia, "empurrar em vez de puxar", foi melhor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">descrita por</a> Brian Beckman e Eric Meyer.  Os primeiros 36 minutos ... eu n√£o entendi nada, mas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a partir do 36¬∫ minuto</a> isso se torna <i>realmente</i> interessante. <br><br>  Em resumo, vamos reformular a id√©ia de um grupo linear de objetos no Swift, bem como um objeto que pode interagir com esse grupo linear.  Voc√™ pode fazer isso definindo estes protocolos Swift falsos: <br><br><pre><code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//   ;     //    Array. protocol Enumerable { associatedtype Enum: Enumerator associatedtype Element where Self.Element == Self.Enum.Element func getEnumerator() -&gt; Self.Enum } // ,       . protocol Enumerator: Disposable { associatedtype Element func moveNext() throws -&gt; Bool var current: Element { get } } //          // Enumerator,         .   . protocol Disposable { func dispose() }</span></span></code> </pre> <br><h2>  Duplas </h2><br>  Vamos virar tudo e fazer <i>duplas</i> .  Enviaremos dados para onde eles vieram.  E obtenha os dados de onde eles sa√≠ram.  Parece absurdo, mas aguente um pouco. <br><br><h3>  Enumer√°vel Duplo </h3><br>  Vamos come√ßar com Enumerable: <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,  . protocol Enumerable { associatedtype Element where Self.Element == Self.Enum.Element associatedtype Enum: Enumerator func getEnumerator() -&gt; Self.Enum } protocol DualOfEnumerable { //  Enumerator : // getEnumerator() -&gt; Self.Enum //    : // getEnumerator(Void) -&gt; Enumerator // //  , : // : Void; : Enumerator // getEnumerator(Void) ‚Üí Enumerator // //     Void   Enumerator. //   -      Enumerator,   Void. // :  Enumerator; : Void func subscribe(DualOfEnumerator) }</span></span></code> </pre> <br>  Como <code>getEnumerator()</code> pegou o <code>Void</code> e deu o <code>Enumerator</code> , agora aceitamos o [double] <code>Enumerator</code> e fornecemos o <code>Void</code> . <br><br>  Eu sei que isso √© estranho.  N√£o saia. <br><br><h3>  Enumerador duplo </h3><br>  E ent√£o o que √© <code>DualOfEnumerator</code> ? <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,  . protocol Enumerator: Disposable { associatedtype Element // : Void; : Bool, Error func moveNext() throws -&gt; Bool // : Void; : Element var current: Element { get } } protocol DualOfEnumerator { // : Bool, Error; : Void //   Error    func enumeratorIsDone(Bool) // : Element, : Void var nextElement: Element { set } }</span></span></code> </pre> <br>  Existem v√°rios problemas aqui: <br><br><ul><li>  N√£o h√° conceito de uma propriedade somente de conjunto no Swift. <br></li><li>  O que aconteceu com os <code>throws</code> em <code>Enumerator.moveNext()</code> ? <br></li><li>  O que acontece com <code>Disposable</code> ? <br></li></ul><br>  Para corrigir o problema com a propriedade set-only, podemos trat√°-lo como o que realmente √© - uma fun√ß√£o.  Vamos <code>DualOfEnumerator</code> nosso <code>DualOfEnumerator</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// : Bool; : Void, Error //   Error    func enumeratorIsDone(Bool) // : Element, : Void func next(Element) }</span></span></code> </pre> <br>  Para resolver o problema com <code>throws</code> , vamos separar o erro que pode ocorrer em <code>moveNext()</code> e trabalhar com ele como uma fun√ß√£o <code>error()</code> separada: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// : Bool, Error; : Void func enumeratorIsDone(Bool) func error(Error) // : Element, : Void func next(Element) }</span></span></code> </pre> <br>  Podemos fazer outra coisa: d√™ uma olhada na assinatura da conclus√£o da itera√ß√£o: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bool)</span></span></span></span></code> </pre> <br>  Provavelmente algo semelhante acontecer√° com o tempo: <br><br><pre> <code class="swift hljs">enumeratorIsDone(<span class="hljs-literal"><span class="hljs-literal">false</span></span>) enumeratorIsDone(<span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-comment"><span class="hljs-comment">//     enumeratorIsDone(true)</span></span></code> </pre> <br>  Agora, vamos simplificar as coisas e chamar <code>enumeratorIsDone</code> somente quando ... tudo estiver realmente pronto.  Guiados por essa id√©ia, simplificamos o c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h3>  Cuide-se </h3><br>  E quanto ao <code>Disposable</code> ?  O que fazer com isso?  Como <code>Disposable</code> faz parte <i>do tipo</i> <code>Enumerator</code> , quando obtemos o <code>Enumerator</code> <i>dobro</i> , provavelmente n√£o deveria estar no <code>Enumerator</code> .  Em vez disso, ele deve fazer parte do <code>DualOfEnumerable</code> .  Mas onde exatamente? <br><br>  <code>DualOfEnumerator</code> aqui: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span></code> </pre> <br>  Se aceitarmos o <code>DualOfEnumerator</code> , o <code>Disposable</code> n√£o deve ser <i>retornado</i> ? <br><br>  Aqui est√° o tipo de dobro que voc√™ recebe no final: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h2>  Chame de rosa, embora n√£o </h2><br>  Ent√£o, mais uma vez, eis o que temos: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre> <br>  Vamos brincar um pouco com os nomes agora. <br><br>  Vamos come√ßar com o <code>DualOfEnumerator</code> .  Criaremos nomes melhores para as fun√ß√µes para descrever com mais precis√£o o que est√° acontecendo: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre> <br>  Muito melhor e mais compreens√≠vel. <br><br>  E os nomes dos tipos?  Eles s√£o simplesmente terr√≠veis.  Vamos mudar um pouco. <br><br><ul><li>  <code>DualOfEnumerator</code> - algo que segue o que acontece com um grupo linear de objetos.  Podemos dizer que ele <i>observa</i> um grupo linear. <br></li><li>  <code>DualOfEnumerable</code> √© um assunto de observa√ß√£o.  O que estamos assistindo.  Portanto, pode ser chamado de <i>observ√°vel</i> . <br></li></ul><br>  Agora fa√ßa as altera√ß√µes finais e obtenha o seguinte: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observer)</span></span></span></span> ‚Üí <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h2>  Uau </h2><br>  Acabamos de criar dois objetos fundamentais no RxSwift.  Voc√™ pode ver suas vers√µes reais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Observe que, no caso do Observer, as tr√™s fun√ß√µes <code>on()</code> s√£o combinadas em uma <code>on(Event)</code> , onde <code>Event</code> √© uma enumera√ß√£o que determina qual √© o evento - conclus√£o, pr√≥ximo valor ou erro. <br><br>  Esses dois tipos est√£o subjacentes ao RxSwift e √† programa√ß√£o reativa. <br><br><h2>  Sobre protocolos falsos </h2><br>  Os dois protocolos "falsos" que mencionei acima n√£o s√£o realmente falsos.  Estes s√£o an√°logos de tipos existentes no Swift: <br><br><ul><li>  Enumer√°vel √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sequ√™ncia</a> <br></li><li>  O enumerador √© uma sequ√™ncia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iterador</a> <br></li></ul><br><h2>  E da√≠? </h2><br>  Ent√£o, com o que se preocupar? <br><br>  Tanto no desenvolvimento moderno - <i>especialmente no</i> desenvolvimento de aplicativos - est√° associado √† assincronia.  O usu√°rio clicou de repente em um bot√£o.  O usu√°rio selecionou repentinamente uma guia no UISegmentControl.  O usu√°rio selecionou repentinamente uma guia na UITabBar.  De repente, o soquete da Web nos deu novas informa√ß√µes.  Este download de repente - e finalmente - terminou.  Essa tarefa em segundo plano terminou abruptamente.  Esta lista continua e continua. <br><br>  No mundo moderno do CocoaTouch, existem muitas maneiras de lidar com esses eventos: <br><br><ul><li>  notifica√ß√µes <br></li><li>  retornos de chamada <br></li><li>  Observa√ß√£o de valor-chave (KVO), <br></li><li>  mecanismo de alvo / a√ß√£o. <br></li></ul><br>  Imagine se <i>tudo</i> pudesse ser refletido em uma √∫nica interface.  O que poderia funcionar com <i>qualquer</i> tipo de dados ou eventos ass√≠ncronos em todo o aplicativo. <br><br>  Agora imagine se houvesse todo um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjunto de fun√ß√µes</a> que permita modificar esses <i>fluxos</i> , convert√™-los de um tipo para outro, extrair informa√ß√µes dos Elements ou at√© combin√°-las com outros fluxos. <br><br>  De repente, em nossas m√£os est√° um novo conjunto <i>universal</i> de ferramentas. <br>  E assim, voltamos ao come√ßo: <br><br><blockquote>  API para programa√ß√£o ass√≠ncrona com threads observ√°veis. </blockquote><br>  √â isso que faz do RxSwift uma ferramenta t√£o poderosa.  Como Combinar. <br><br><h2>  O que vem a seguir? </h2><br>  Se voc√™ quiser ler mais sobre o RxSwift <i>na pr√°tica</i> , recomendo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meus cinco artigos escritos em 2016</a> .  Eles descrevem a cria√ß√£o de um aplicativo CocoaTouch simples, seguido por uma convers√£o em fases para o RxSwift. <br><br>  Em um dos artigos a seguir, explicarei por que muitas das t√©cnicas descritas em minha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">s√©rie de artigos para iniciantes</a> n√£o s√£o aplic√°veis ‚Äã‚Äãno Combine e tamb√©m comparo o Combine ao RxSwift. <br><br><h1>  Combinar: qual √© o objetivo? </h1><br>  A discuss√£o do Combine tamb√©m inclui uma discuss√£o das principais diferen√ßas entre ele e o RxSwift.  Para mim, existem tr√™s deles: <br><br><ul><li>  a possibilidade de usar classes n√£o reativas, <br></li><li>  tratamento de erros <br></li><li>  contrapress√£o. <br></li></ul><br>  Vou dedicar um artigo separado para cada item.  Vou come√ßar com o primeiro. <br><br><h2>  Recursos do RxCocoa </h2><br>  Em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um post anterior,</a> eu disse que o RxSwift √© mais do que ... RxSwift.  Ele oferece in√∫meras possibilidades para o uso de controles do UIKit no subprojeto de tipo mas n√£o muito do RxCocoa.  Al√©m disso, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RxSwiftCommunity</a> foi al√©m e implementou muitas liga√ß√µes para ruas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">secund√°rias</a> ainda mais isoladas do UIKit, al√©m de outras classes CocoaTouch que o RxSwift e o RxCocoa ainda n√£o cobrem. <br><br>  Portanto, √© muito f√°cil obter um fluxo <code>Observable</code> clicando, por exemplo, no UIButton.  Vou dar este exemplo novamente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disposeBag = <span class="hljs-type"><span class="hljs-type">DisposeBag</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = <span class="hljs-type"><span class="hljs-type">UIButton</span></span>() button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }) .disposed(by: disposeBag)</code> </pre> <br>  Peso leve. <br><br><h2>  Vamos (finalmente) ainda falar sobre Combinar </h2><br>  Combinar √© muito semelhante ao RxSwift.  Como a documenta√ß√£o diz: <br><br><blockquote>  A estrutura Combine fornece uma API Swift declarativa para manipular valores ao longo do tempo. </blockquote><br>  Parece familiar: lembre-se da descri√ß√£o do ReactiveX (o projeto pai do RxSwift): <br><br><blockquote>  API para programa√ß√£o ass√≠ncrona com threads observ√°veis. </blockquote><br>  Nos dois casos, a mesma coisa √© dita.  √â apenas que termos espec√≠ficos s√£o usados ‚Äã‚Äãna descri√ß√£o do ReactiveX.  Pode ser reformulado da seguinte maneira: <br><br><blockquote>  Uma API para programa√ß√£o ass√≠ncrona com valores ao longo do tempo. </blockquote><br>  Quase o mesmo que para mim. <br><br><h2>  O mesmo de antes </h2><br>  Quando comecei a analisar a API, ficou √≥bvio imediatamente que a maioria dos tipos que conhe√ßo do RxSwift tem op√ß√µes semelhantes no Combine: <br><br><ul><li>  Observ√°vel ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Editor</a> <br></li><li>  Observador ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Assinante</a> <br></li><li>  Descart√°vel ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cancel√°vel</a> .  Este √© um triunfo do marketing.  Voc√™ n√£o pode imaginar quantos olhares surpresos recebi de desenvolvedores mais imparciais quando comecei a descrever o Disposable no RxSwift. <br></li><li>  SchedulerType ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scheduler</a> <br></li></ul><br>  At√© agora tudo bem.  Mais uma vez, gosto muito mais do cancel√°vel do que do descart√°vel.  Um √≥timo substituto, n√£o apenas em termos de marketing, mas tamb√©m em termos de uma descri√ß√£o precisa da ess√™ncia do objeto. <br><br>  Mais √© ainda melhor! <br><br><ul><li>  Driver do RxCocoa -&gt; Este √© o BindableObject da SwiftUI <br></li></ul><br>  Isso n√£o est√° claro de imediato, mas espiritualmente eles servem a um prop√≥sito, e nenhum deles pode gerar erros. <br><br><ul><li>  Single ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Futuro</a> <br></li><li>  SubjectType ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Assunto</a> <br></li><li>  PublishSubject ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PassagemSubject</a> <br></li></ul><br><h2>  "Pausa para coc√¥" </h2><br>  Tudo muda assim que voc√™ come√ßa a se aprofundar no RxCocoa.  Lembre-se do exemplo acima, no qual desejamos obter um fluxo Observable que represente cliques no UIButton?  Aqui est√°: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disposeBag = <span class="hljs-type"><span class="hljs-type">DisposeBag</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = <span class="hljs-type"><span class="hljs-type">UIButton</span></span>() button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }) .disposed(by: disposeBag)</code> </pre> <br>  Combinar exige ... muito mais trabalho para fazer o mesmo. <br><br>  <b>Combinar n√£o fornece nenhum recurso para liga√ß√£o a objetos UIKit.</b> <br><br>  Isso √© ... apenas uma chatice irreal. <br><br>  Aqui est√° uma maneira comum de obter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UIControl.Event</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UIControl</a> usando Combine: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlPublisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIControl</span></span></span><span class="hljs-class">&gt;: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">ControlEvent</span></span> = (control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, event: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Output</span></span> = <span class="hljs-type"><span class="hljs-type">ControlEvent</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Failure</span></span> = <span class="hljs-type"><span class="hljs-type">Never</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subject = <span class="hljs-type"><span class="hljs-type">PassthroughSubject</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Output</span></span>, <span class="hljs-type"><span class="hljs-type">Failure</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">convenience</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, event: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: control, events: [event]) } <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, events: [<span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> event <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> events { control.addTarget(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: #selector(controlAction), <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: event) } } <span class="hljs-meta"><span class="hljs-meta">@objc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controlAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sender: UIControl, forEvent event: UIControl.Event)</span></span></span></span> { subject.send(<span class="hljs-type"><span class="hljs-type">ControlEvent</span></span>(control: sender, event: event)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function">&lt;S&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(subscriber: S)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">S</span></span> : <span class="hljs-type"><span class="hljs-type">Subscriber</span></span>, <span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>.<span class="hljs-type"><span class="hljs-type">Failure</span></span> == <span class="hljs-type"><span class="hljs-type">S</span></span>.<span class="hljs-type"><span class="hljs-type">Failure</span></span>, <span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>.<span class="hljs-type"><span class="hljs-type">Output</span></span> == <span class="hljs-type"><span class="hljs-type">S</span></span>.<span class="hljs-type"><span class="hljs-type">Input</span></span> { subject.receive(subscriber: subscriber) } }</code> </pre> <br>  Aqui ... <i>muito</i> mais trabalho.  Pelo menos a liga√ß√£o se parece com: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>(control: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.button, event: .touchUpInside) .sink { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }</code> </pre> <br>  Para compara√ß√£o, o RxCocoa fornece um cacau agrad√°vel e saboroso na forma de liga√ß√µes a objetos UIKit: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) })</code> </pre> <br>  Por si mesmos, esses desafios s√£o realmente muito semelhantes.  A √∫nica coisa frustrante √© que eu tive que escrever o <code>ControlPublisher</code> para chegar a esse ponto.  Al√©m disso, o RxSwift e o RxCocoa s√£o muito bem testados e s√£o usados ‚Äã‚Äãem projetos muito mais que os meus. <br><br>  Para compara√ß√£o, meu <code>ControlPublisher</code> apareceu apenas ... agora.  Somente por causa do n√∫mero de clientes (zero) e do tempo de uso no mundo real (quase zero em compara√ß√£o com o RxCocoa) meu c√≥digo pode ser considerado infinitamente mais perigoso. <br><br>  Que chatice. <br><br><h2>  Ajuda da comunidade? </h2><br>  Honestamente, nada impede a comunidade de criar seu pr√≥prio c√≥digo aberto ‚ÄúCombineCocoa‚Äù, o que preencheria a lacuna do RxCocoa, assim como a Comunidade RxSwift. <br><br>  No entanto, considero isso uma grande desvantagem do Combine.  N√£o quero reescrever o RxCocoa inteiro, apenas para obter liga√ß√µes aos objetos UIKit. <br><br>  Se eu decidir apostar no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SwiftUI</a> , acho que isso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eliminar√° o</a> problema da falta de v√≠nculos.  At√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meu pequeno aplicativo</a> cont√©m um <i>monte de</i> c√≥digo <i>de</i> interface <i>do</i> usu√°rio.  Jogar tudo isso apenas para pular no trem Combine seria pelo menos est√∫pido ou at√© perigoso. <br><br>  A prop√≥sito, o artigo na documenta√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Recebendo e manipulando eventos com Combine</i></a> descreve brevemente como receber e processar eventos no Combine.  A introdu√ß√£o √© boa, mostra como extrair um valor de um campo de texto e salv√°-lo em um objeto de modelo personalizado.  A documenta√ß√£o tamb√©m demonstra o uso de operadores para realizar algumas modifica√ß√µes mais avan√ßadas no fluxo em quest√£o. <br><br><h2>  Exemplo </h2><br>  Vamos para o final da documenta√ß√£o, onde o exemplo de c√≥digo √©: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-type"><span class="hljs-type">NotificationCenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> .publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">NSControl</span></span>.textDidChangeNotification, object: filterField) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>( { ($<span class="hljs-number"><span class="hljs-number">0</span></span>.object <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">NSTextField</span></span>).stringValue } ) .assign(to: \<span class="hljs-type"><span class="hljs-type">MyViewModel</span></span>.filterString, on: myViewModel)</code> </pre> <br>  Eu tenho ... muitos problemas com isso. <br><br><h2>  Notific√°-lo que eu n√£o gosto </h2><br>  As duas primeiras linhas me causam mais perguntas: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-type"><span class="hljs-type">NotificationCenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> .publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">NSControl</span></span>.textDidChangeNotification, object: filterField)</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O NotificationCenter</a> √© como um barramento de aplicativos (ou mesmo um barramento do sistema) no qual muitos podem lan√ßar dados ou coletar informa√ß√µes que passam rapidamente.  Esta solu√ß√£o √© da categoria tudo para todos, conforme pretendido pelos criadores.  E realmente existem muitas situa√ß√µes em que voc√™ pode precisar descobrir, digamos, que o teclado acabou de ser mostrado ou oculto.  O NotificationCenter √© uma √≥tima maneira de distribuir essa mensagem pelo sistema. <br><br>  Mas para mim o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NotificationCenter</a> √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo com um estrangulamento</a> .  H√° momentos (como obter uma notifica√ß√£o sobre o teclado) quando o NotificationCenter √© realmente a <i>melhor</i> solu√ß√£o <i>poss√≠vel</i> para o problema.  Mas muitas vezes para mim o NotificationCenter √© a solu√ß√£o <i>mais conveniente</i> .  √â realmente muito conveniente soltar algo no NotificationCenter e busc√°-lo em outro lugar do aplicativo. <br><br>  Al√©m disso, o NotificationCenter √© do tipo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"string"</a> , ou seja, voc√™ pode facilmente cometer o erro de qual notifica√ß√£o est√° tentando publicar ou ouvir.  Swift est√° fazendo todo o poss√≠vel para melhorar a situa√ß√£o, mas ainda assim o mesmo NSString ainda est√° oculto. <br><br><h2>  Sobre a KVO </h2><br>  Na plataforma da Apple, existe uma maneira popular de receber notifica√ß√µes de altera√ß√µes em diferentes partes do c√≥digo: observa√ß√£o de valor-chave (KVO).  A Apple descreve assim: <br><br><blockquote>  Este √© um mecanismo que permite que objetos recebam notifica√ß√µes de altera√ß√µes nas propriedades especificadas de outros objetos. </blockquote><br>  Gra√ßas a um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tweet de Gui Rambo,</a> notei que a Apple adicionou as liga√ß√µes do KVO ao Combine.  Isso poderia significar que eu poderia me livrar das muitas decep√ß√µes com a falta de um an√°logo do RxCocoa no Combine.  Se eu puder usar o KVO, isso provavelmente eliminar√° a necessidade do CombineCocoa, por assim dizer. <br><br>  Tentei descobrir um exemplo de uso do KVO para obter um valor de um <code>UITextField</code> e envi√°-lo para o console: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.textField.publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: \<span class="hljs-type"><span class="hljs-type">UITextField</span></span>.text) .sink(receiveCompletion: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Completed"</span></span>) }, receiveValue: { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Text field is currently \"\($0)\""</span></span>) })</code> </pre> <br>  Parece bom, seguir em frente? <br><br>  N√£o √© t√£o r√°pido, amigos. <br><br>  Eu esqueci a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">verdade desconfort√°vel</a> : <br><br>  O UIKit, em geral, n√£o √© compat√≠vel com o KVO. <br><br>  E sem o suporte da KVO, minha ideia n√£o funcionar√°.  Minhas verifica√ß√µes confirmaram o seguinte: o c√≥digo n√£o gera nada para o console quando insiro texto no campo. <br><br>  Portanto, minhas esperan√ßas de se livrar da necessidade de liga√ß√µes do UIKit eram lindas, mas n√£o por muito tempo. <br><br><h2>  Limpeza </h2><br>  Outro problema da Combine √© que ainda n√£o est√° claro onde e como liberar recursos em objetos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cancel√°veis</a> .  <i>Parece</i> que devemos armazen√°-los em vari√°veis ‚Äã‚Äãde inst√¢ncia.  Mas n√£o me lembro que na documenta√ß√£o oficial algo foi dito sobre a limpeza. <br><br>  O RxSwift possui um DisposeBag terrivelmente nomeado, mas incrivelmente conveniente.  N√£o √© menos f√°cil criar o CancelBag no Combine, mas n√£o tenho certeza de que, nesse caso, seja a melhor solu√ß√£o. <br><br>  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pr√≥ximo artigo</a> , falaremos sobre o tratamento de erros no RxSwift e Combine, sobre as vantagens e desvantagens de ambas as abordagens. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt470117/">https://habr.com/ru/post/pt470117/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt470105/index.html">oktech Data Sense # 3: Sistemas Recomendadores</a></li>
<li><a href="../pt470107/index.html">Dicas e truques do meu canal Telegram @pythonetc, setembro de 2019</a></li>
<li><a href="../pt470109/index.html">@Pythonetc setembro de 2019</a></li>
<li><a href="../pt470113/index.html">Como a tecnologia na mem√≥ria mudou a intelig√™ncia comercial</a></li>
<li><a href="../pt470115/index.html">O seu navegador m√≥vel dificulta a condu√ß√£o</a></li>
<li><a href="../pt470121/index.html">Escolas de programa√ß√£o da empresa ou como ingressar em TI</a></li>
<li><a href="../pt470123/index.html">Armadilha financeira Yandex.Money</a></li>
<li><a href="../pt470125/index.html">N√£o julgue estritamente o c√≥digo de outra pessoa</a></li>
<li><a href="../pt470127/index.html">Compositor com mem√≥ria de longo prazo</a></li>
<li><a href="../pt470129/index.html">Gerenciamento de mem√≥ria declarativa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>