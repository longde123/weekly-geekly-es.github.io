<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👌🏼 📬 👃 Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 5: API Asli 🛫 🧗🏿 🤚🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam posting tutorial Python sebelumnya, saya telah memperkenalkan Kontrak Cerdas Ontology di 
 Bagian 1: Blockchain & Block API dan 
 Bagian 2: API ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 5: API Asli</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474970/"><img src="https://habrastorage.org/getpro/habr/post_images/a4a/df3/d06/a4adf3d06081f8a1b01c79140d5474f9.png" alt="gambar"><br><br>  Dalam posting tutorial Python sebelumnya, saya telah memperkenalkan Kontrak Cerdas Ontology di <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1: Blockchain &amp; Block API</a> dan <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2: API Penyimpanan</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3: Runtime API</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 4: API Asli</a> dan menjelaskan cara menggunakan kontrak pintar untuk transfer ONT / ONG. <br><br>  Hari ini kita akan berbicara tentang cara menggunakan <b>API Peningkatan</b> untuk meningkatkan kontrak pintar.  Ada 2 API: <b>Hancurkan</b> dan <b>Migrasikan</b> . <br><a name="habracut"></a><br>  Mereka digunakan sebagai berikut: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/692/e4a/eca/692e4aeca613e998625704e765b92e83.png" alt="gambar"><br><br>  Sekarang mari kita masuk ke detail lebih lanjut tentang cara menggunakan 2 API ini.  Sebelum itu, Anda dapat membuat kontrak baru di alat pengembangan kontrak pintar Ontology, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SmartX,</a> dan ikuti petunjuk di bawah ini.  Seperti biasa, di akhir artikel, saya akan melampirkan tautan ke kode sumber. <br><br><h2>  Cara Menggunakan API Peningkatan </h2><br>  Seperti biasa, Anda perlu mengimpor 2 fungsi sebagai berikut sebelum menggunakannya. <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.Ontology.Contract <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Migrate <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.System.Contract <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Destroy</code> </pre> <br><h3>  Hancurkan API </h3><br>  Hancurkan API digunakan untuk menghancurkan dan menghapus kontrak pintar pada rantai.  Di bawah ini adalah contoh kode API. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.System.Contract <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Destroy <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.System.Runtime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Notify <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(operation, args)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> operation == <span class="hljs-string"><span class="hljs-string">"destroy_contract"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> destroy_contract() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">destroy_contract</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> Destroy() Notify([<span class="hljs-string"><span class="hljs-string">"The contract has been destoryed"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><h3>  Migrasikan API </h3><br>  API Migrasi digunakan untuk memigrasi kontrak pintar.  Kontrak yang ada akan diganti oleh kontrak yang baru dimigrasi.  Data yang disimpan oleh kontrak lama juga akan dimigrasi ke kontrak baru.  Kontrak lama akan dihapus setelah migrasi. <br><blockquote>  Harap perhatikan bahwa aset dalam kontrak pintar tidak akan dimigrasi secara otomatis sehingga Anda harus mentransfernya terlebih dahulu.  Jika tidak, Anda tidak akan dapat mengambil aset Anda. </blockquote><br>  Daftar parameter fungsi Migrasi adalah sebagai berikut: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/91f/821/2b8/91f8212b879e93f4dc2eaa01f95fe985.png" alt="gambar"><br><br>  Lihat di bawah contoh kode fungsi Migrasi: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.Ontology.Contract <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Migrate <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.System.Runtime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Notify <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.libont <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AddressFromVmCode <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(operation, args)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> operation == <span class="hljs-string"><span class="hljs-string">"migrate_contract"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(args) != <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> avm_code = args[<span class="hljs-number"><span class="hljs-number">0</span></span>] need_storage = args[<span class="hljs-number"><span class="hljs-number">1</span></span>] name = args[<span class="hljs-number"><span class="hljs-number">2</span></span>] version = args[<span class="hljs-number"><span class="hljs-number">3</span></span>] author = args[<span class="hljs-number"><span class="hljs-number">4</span></span>] email = args[<span class="hljs-number"><span class="hljs-number">5</span></span>] description = args[<span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> migrate_contract(avm_code, need_storage, name, version, author, email, description) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">migrate_contract</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(avm_code, need_storage, name, version, author, email, description)</span></span></span><span class="hljs-function">:</span></span> res = Migrate(avm_code, need_storage, name, version, author, email, description) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> res: Notify([<span class="hljs-string"><span class="hljs-string">"Migrate successfully"</span></span>]) new_contract_hash=AddressFromVmCode(avm_code) Notify(new_contract_hash) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre> <br>  <u>Anda dapat mengikuti langkah-langkah di bawah ini untuk melihat hasil eksekusi sampel kode pada SmartX:</u> <br><br>  <b>1.</b> Salin dan tempel kode di atas ke SmartX dan kompilasi sebelum memasukkan parameter.  Perhatikan dua masalah saat memasukkan parameter: <br><br><ul><li>  Pastikan avm_code tidak ada pada rantai, jika tidak kesalahan akan dikembalikan; </li><li>  Migrasi memerlukan batas gas tinggi, jadi Anda harus menyesuaikan batas gas saat menjalankan fungsi. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/9d6/3a8/5d8/9d63a85d82d31e63da2085c5b46ee041.png" alt="gambar"><br><br>  <b>2.</b> Setelah penerapan, Anda bisa mendapatkan hash kontrak baru dari dasbor.  Dalam contoh ini, hash kontrak baru adalah be4606c4663081b70f745ed9fc64d4c3b0d9c183. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/03d/2f4/b4f/03d2f4b4fb3eebae4d6165bec3cd7239.png" alt="gambar"><br><br><h2>  Ringkasan </h2><br>  Pada artikel ini, kami memperkenalkan API Peningkatan pada blockchain Ontology.  Pengembang dapat menggunakan API ini untuk meningkatkan kontrak pintar.  Hancurkan API digunakan untuk menghancurkan kontrak pintar pada rantai dan Migrasi API adalah untuk migrasi kontrak pintar.  Pada artikel selanjutnya, kami akan memperkenalkan Static &amp; Dynamic API untuk mengeksplorasi cara menerapkan panggilan statis dan dinamis dari kontrak pintar Ontology dengan Python. <br><br>  Temukan tutorial tentang GitHub di <a href="">sini</a> . <br><br>  Apakah Anda seorang pengembang?  Pastikan Anda telah bergabung dengan komunitas teknologi kami di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Discord</a> .  Juga, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pusat Pengembang</a> di situs web kami, di sana Anda dapat menemukan alat pengembang, dokumentasi, dan banyak lagi. <br><br><hr><br><h4>  Temukan ontologi di tempat lain </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Situs web ontologi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perselisihan</a> <br>  Telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bahasa Inggris</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rusia</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Twitter</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Reddit</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id474970/">https://habr.com/ru/post/id474970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id474960/index.html">Demo pengembangan untuk NES - HEOHdemo</a></li>
<li><a href="../id474962/index.html">Platform Developers Conf by Miro: siaran langsung</a></li>
<li><a href="../id474964/index.html">Mock sinkronisasi dengan implementasi nyata</a></li>
<li><a href="../id474966/index.html">Cara menulis kontrak Python yang cerdas di jaringan Ontology. Bagian 1: Blockchain & Block API</a></li>
<li><a href="../id474968/index.html">RxDart untuk ... proyek terkecil</a></li>
<li><a href="../id474976/index.html">Kota Berperahu: Bagaimana Venesia Ada Tanpa Mobil</a></li>
<li><a href="../id474978/index.html">IBM Watson Visual Recognition: Pengakuan Objek Sekarang Tersedia di IBM Cloud</a></li>
<li><a href="../id474982/index.html">Tutorial JavaFX: FXML dan SceneBuilder</a></li>
<li><a href="../id474984/index.html">RabbitMQ vs Kafka: Kegagalan dan Ketersediaan Tinggi</a></li>
<li><a href="../id474988/index.html">Selamat Datang di Mitap: Karier di Ilmu Data untuk Pemula</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>