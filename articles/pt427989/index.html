<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏪ 🧙🏿 🙌🏾 Prólogo divertido # 3 🙌🏾 🚵 🚻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Então, comunidade, peço que você me dê uma chance de surpreendê-lo pela terceira vez. Na decisão anterior , usei python, pensei em chamar a atenção do...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prólogo divertido # 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427989/"><p>  Então, comunidade, peço que você me dê uma chance de surpreendê-lo pela terceira vez. Na decisão <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anterior</a> , usei python, pensei em chamar a atenção dos <em>especialistas aqui</em> e eles imediatamente me diziam por que fazer isso, em geral existem expressões regulares - eu fiz e tudo está certo vai funcionar, isso nosso python pode dar e mais velocidade. </p><br><p>  O próximo tópico do artigo deve ser outra tarefa, por sua vez, mas não, o primeiro não me deixou, o que pode ser feito para obter uma solução ainda mais rápida, uma vez que a vitória no site foi coroada com outra competição. </p><br><p>  Eu escrevi uma implementação que, em média, era desse tipo de velocidade, o que significa que ainda existem 90% das soluções que eu não percebi que alguém sabe como resolvê-lo ainda mais rápido e <em>ele fica em silêncio</em> . Depois de examinar os dois artigos anteriores, eu não disse: ah, se problema de desempenho, tudo fica claro - aqui o prólogo não se encaixa.  Mas agora tudo está normal com o desempenho, não é possível imaginar um programa que funcione com hardware fraco ", no final, por que pensar nisso?" </p><br><h1 id="vyzov">  Desafio </h1><br><p>  Para resolver o problema ainda mais rápido, havia um python e houve tempo, e existe uma solução mais rápida no python? </p><br><p><img src="https://habrastorage.org/webt/rf/mp/jh/rfmpjh9fpqvn6lai90cq5poumny.png"><br>  Fui informado "Tempo de execução: 2504 ms, mais rápido que 1,55% dos envios online do Python3 para correspondência de caracteres curinga". </p><a name="habracut"></a><br><p>  Eu aviso, mais ainda há um fluxo de pensamentos on-line. </p><br><h1 id="1-regulyarkoy">  1 Regular? </h1><br><p>  Talvez aqui esteja a opção de escrever um programa mais rápido, simplesmente usando uma expressão regular. </p><br><p>  Obviamente, o python pode criar um objeto de expressão regular que verificará a linha de entrada e funcionará exatamente na caixa de areia do site para testar programas. <br>  Basta <strong>importar re</strong> , eu posso importar esse módulo, é interessante, eu tenho que tentar. </p><br><p>  Não é fácil entender que criar uma solução rápida não é fácil.  Teremos que pesquisar, tentar criar uma implementação semelhante a esta: </p><br><p>  1. faça um objeto dessa regularidade, <br>  2. entregar a ela um modelo corrigido pelas regras das regras da biblioteca selecionada, <br>  3. Compare e a resposta está pronta <br>  Voila: </p><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s,p)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> re.match(s,pat_format(p))!=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pat_format</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pat)</span></span></span><span class="hljs-function">:</span></span> res=<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pat: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'*'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"(.)*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'?'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: res+=ch <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res</code> </pre> <br><p>  Aqui está uma solução muito curta, como se estivesse correta. </p><br><p>  Estou tentando executar, mas não estava aqui, não está totalmente certo, alguma opção não se encaixa. Você precisa testar a conversão no modelo. </p><br><p><img src="https://habrastorage.org/webt/r2/uv/s0/r2uvs0jmx_cdaloxbjvavxyd9jy.png"></p><br><p>  A verdade é engraçada, misturei o modelo e a string, mas a solução veio junto, passei em 1058 testes e falhei, só aqui. </p><br><p>  Repito mais uma vez, neste site eles estão trabalhando com cuidado nos testes, como aconteceu, todos os anteriores são bons, mas aqui dois parâmetros principais são misturados e isso apareceu, aqui estão as vantagens do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TDD</a> ... </p><br><p>  E em um texto tão maravilhoso, ainda recebo um erro </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s,p)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> re.match(pat_format(p),s)==<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pat_format</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pat)</span></span></span><span class="hljs-function">:</span></span> res=<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pat: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'*'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"(.)*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'?'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:res+=ch <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res</code> </pre> <br><p><img src="https://habrastorage.org/webt/dq/ct/xo/dqctxohozdihwqre2nqhhlkl7t4.png"></p><br><h1 id="slozhno">  Difícil </h1><br><p>  Parece que esta tarefa foi especialmente sobreposta a testes, para que aqueles que desejam usar expressões regulares tenham mais dificuldades, eu tinha antes desta solução, não havia erros lógicos no programa, mas aqui temos que levar em consideração muitas coisas. </p><br><p>  Portanto, a expressão regular corresponde e o primeiro resultado deve ser igual à nossa linha. </p><br><p>  <strong>Vitória</strong> <br>  Não foi fácil fazê-lo usar a expressão regular, mas a tentativa falhou, não é uma decisão tão simples de fazer quimicamente os regulares.  A primeira solução de pesquisa funcionou mais rapidamente. </p><br><p>  Aqui está essa implementação, </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s,p)</span></span></span><span class="hljs-function">:</span></span> res=re.match(pat_format(p),s) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.group(<span class="hljs-number"><span class="hljs-number">0</span></span>)==s <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pat_format</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pat)</span></span></span><span class="hljs-function">:</span></span> res=<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pat: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'*'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"(.)*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'?'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:res+=ch <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res</code> </pre> <br><p>  leva a isso: </p><br><p><img src="https://habrastorage.org/webt/py/rf/p2/pyrfp2vykzwaqbw74szpmhgwr9q.png"></p><br><h1 id="obraschenie">  Recurso </h1><br><p>  Caros residentes, tente verificar isso, e ele faz do <strong>python três</strong> , ele não pode concluir rapidamente esta tarefa: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s,p)</span></span></span><span class="hljs-function">:</span></span> res=re.match(pat_format(p),s) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res[<span class="hljs-number"><span class="hljs-number">0</span></span>]==s <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pat_format</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pat)</span></span></span><span class="hljs-function">:</span></span> res=<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pat: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'*'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"(.)*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'?'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:res+=ch <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res <span class="hljs-comment"><span class="hljs-comment">##test 940 import time pt=time.time() print(isMatch("aaaabaaaabbbbaabbbaabbaababbabbaaaababaaabbbbbbaabbbabababbaaabaabaaaaaabbaabbbbaababbababaabbbaababbbba","*****b*aba***babaa*bbaba***a*aaba*b*aa**a*b**ba***a*a*")) print(time.time()-pt)</span></span></code> "***** b * aba *** babaa * bbaba *** a * aaba * b * aa ** a * b ** ba *** a * a *") <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s,p)</span></span></span><span class="hljs-function">:</span></span> res=re.match(pat_format(p),s) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res[<span class="hljs-number"><span class="hljs-number">0</span></span>]==s <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pat_format</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pat)</span></span></span><span class="hljs-function">:</span></span> res=<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pat: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'*'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"(.)*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ch==<span class="hljs-string"><span class="hljs-string">'?'</span></span>:res+=<span class="hljs-string"><span class="hljs-string">"."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:res+=ch <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res <span class="hljs-comment"><span class="hljs-comment">##test 940 import time pt=time.time() print(isMatch("aaaabaaaabbbbaabbbaabbaababbabbaaaababaaabbbbbbaabbbabababbaaabaabaaaaaabbaabbbbaababbababaabbbaababbbba","*****b*aba***babaa*bbaba***a*aaba*b*aa**a*b**ba***a*a*")) print(time.time()-pt)</span></span></code> </pre> <br><p>  Você pode experimentá-lo em casa.  Milagres, não demora muito para resolver, congela, oooh. </p><br><p>  As expressões regulares são um subconjunto da aparência declarativa enfraquecida no desempenho? <br>  A afirmação é estranha, eles estão presentes em todas as linguagens da moda; portanto, a produtividade deve ser impressionante, mas aqui não é realista que não exista uma máquina de estados finitos ?, o que acontece em um ciclo interminável? </p><br><h1 id="go">  Go </h1><br><p>  Eu li em um livro, mas foi há muito tempo ... A linguagem mais recente do Go funciona muito rapidamente, mas e a expressão regular? </p><br><p>  Vou testá-lo: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, p </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { res:=strings.Replace(p, <span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"(.)*"</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) res2:=strings.Replace(res, <span class="hljs-string"><span class="hljs-string">"?"</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) r, _ := regexp.Compile(res2) fr:=r.FindAllString(s,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(fr)==<span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(fr)!=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; fr[<span class="hljs-number"><span class="hljs-number">0</span></span>]!=s) }</code> </pre> <br><p>  Eu admito, não foi fácil obter um texto tão conciso, a sintaxe não é trivial, mesmo com o conhecimento de si, não é fácil descobrir isso ... </p><br><p>  Esse é um resultado maravilhoso, a velocidade realmente cai, totalizando ~ 60 milissegundos, mas é surpreendente que essa solução seja mais rápida que apenas <strong>15% das</strong> respostas no mesmo site. </p><br><p><img src="https://habrastorage.org/webt/ul/mp/o9/ulmpo9isqpkfrql2vzbxtffwp_o.png"></p><br><h1 id="a-gde-prolog">  E onde está o prólogo </h1><br><p>  Acho que essa linguagem esquecida para trabalhar com expressões regulares nos fornece uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">biblioteca</a> baseada na Expressão Regular Compatível com Perl. </p><br><p>  É assim que pode ser implementado, mas pré-processe a sequência de modelos com um predicado separado. </p><br><pre> <code class="hljs powershell">pat([],[]). pat([<span class="hljs-string"><span class="hljs-string">'*'</span></span>|<span class="hljs-type"><span class="hljs-type">T</span></span>],[<span class="hljs-string"><span class="hljs-string">'.*'</span></span>|<span class="hljs-type"><span class="hljs-type">Tpat</span></span>]):<span class="hljs-literal"><span class="hljs-literal">-pat</span></span>(T,Tpat),!. pat([<span class="hljs-string"><span class="hljs-string">'?'</span></span>|<span class="hljs-type"><span class="hljs-type">T</span></span>],[<span class="hljs-string"><span class="hljs-string">'.'</span></span>|<span class="hljs-type"><span class="hljs-type">Tpat</span></span>]):<span class="hljs-literal"><span class="hljs-literal">-pat</span></span>(T,Tpat),!. pat([<span class="hljs-type"><span class="hljs-type">Ch</span></span>|<span class="hljs-type"><span class="hljs-type">T</span></span>],[<span class="hljs-type"><span class="hljs-type">Ch</span></span>|<span class="hljs-type"><span class="hljs-type">Tpat</span></span>]):<span class="hljs-literal"><span class="hljs-literal">-pat</span></span>(T,Tpat). isMatch(S,P):- atom_chars(P,Pstr),pat(Pstr,PatStr),!, atomics_to_string(PatStr,Pat), term_string(S,Str), re_matchsub(Pat, Str, re_match{<span class="hljs-number"><span class="hljs-number">0</span></span>:Str},[<span class="hljs-type"><span class="hljs-type">bol</span></span>(<span class="hljs-type"><span class="hljs-type">true</span></span>),<span class="hljs-type"><span class="hljs-type">anchored</span></span>(<span class="hljs-type"><span class="hljs-type">true</span></span>)]).</code> </pre><br><p>  E o tempo de execução é bom: </p><br><pre> <code class="hljs erlang-repl">isMatch(aa,a)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.08794403076171875</span></span>/sec isMatch(aa,*)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(cb,?a)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(adceb,*a*b)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(acdcb,a*c?b)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(aab,c*a*b)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(mississippi,m??*ss*?i*pi)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(abefcdgiescdfimde,ab*cd?i*de)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(zacabz,*a?b*)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(leetcode,*e*t?d*)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0009980201721191406</span></span>/sec isMatch(aaaa,***a)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(b,*?*?*)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0</span></span>/sec isMatch(aaabababaaabaababbbaaaabbbbbbabbbbabbbabbaabbababab,*ab***ba**b*b*aaab*b)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.26383304595947266</span></span>/sec isMatch(abbbbbbbaabbabaabaa,*****a*ab)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.0009961128234863281</span></span>/sec isMatch(babaaababaabababbbbbbaabaabbabababbaababbaaabbbaaab,***bba**a*bbba**aab**b)-&gt;ok:<span class="hljs-number"><span class="hljs-number">0.20287489891052246</span></span>/sec</code> </pre> <br><p>  MAS, existem algumas limitações, o próximo teste trouxe: </p><br><pre> <code class="hljs markdown">Not enough resources: match<span class="hljs-emphasis"><span class="hljs-emphasis">_limit Goal (directive) failed: user:assert_</span></span>are_equal(isMatch(aaaabaaaabbbbaabbbaabbaababbabbaaaababaaabbbbbbaabbbabababbaaabaabaaaaaabbaabbbbaababbababaabbbaababbbba,'<span class="hljs-strong"><span class="hljs-strong">*****</span></span>b<span class="hljs-emphasis"><span class="hljs-emphasis">*aba*</span></span><span class="hljs-strong"><span class="hljs-strong">**babaa*bbaba**</span></span><span class="hljs-emphasis"><span class="hljs-emphasis">*a*</span></span>aaba<span class="hljs-emphasis"><span class="hljs-emphasis">*b*</span></span>aa<span class="hljs-strong"><span class="hljs-strong">**a*b**</span></span>ba<span class="hljs-emphasis"><span class="hljs-emphasis">***</span></span>a<span class="hljs-emphasis"><span class="hljs-emphasis">*a*</span></span>'),false)</code> </pre> <br><h1 id="kak-vyvod">  Como conclusão </h1><br><p>  Restavam apenas perguntas.  Tudo pode ser implementado, mas a velocidade é péssima. <br>  Soluções transparentes não são eficazes? </p><br><p>  Alguém implementou expressões regulares declarativas, que tipo de mecanismos existem? </p><br><p>  E como você gosta desses desafios, existe um problema que pode ser resolvido, mas onde está a solução perfeita? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427989/">https://habr.com/ru/post/pt427989/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427979/index.html">Escrevendo um jogo no LWJGL</a></li>
<li><a href="../pt427981/index.html">Como sobreviver a um desenvolvedor independente. Parte 1</a></li>
<li><a href="../pt427983/index.html">Messengers vs redes sociais vs ... - anúncio de um novo projeto</a></li>
<li><a href="../pt427985/index.html">Onkyo ISCP / eISCP: Gerenciando dispositivos Onkyo pela rede</a></li>
<li><a href="../pt427987/index.html">O Google lançou domínios para criar documentos rapidamente</a></li>
<li><a href="../pt427993/index.html">Winamp está de volta - discutindo se ele tem uma chance na era dos serviços de streaming</a></li>
<li><a href="../pt427995/index.html">Memorando sobre espécies de phishing</a></li>
<li><a href="../pt427997/index.html">Áudio via Bluetooth: maximize detalhes sobre perfis, codecs e dispositivos</a></li>
<li><a href="../pt427999/index.html">Analista de dados de pilha cheia</a></li>
<li><a href="../pt428001/index.html">Problemas conhecidos, bugs e correções nas atualizações do Windows 10 para outubro de 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>