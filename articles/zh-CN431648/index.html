<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍘 🕠 👩🏾‍🤝‍👩🏻 NB-IoT：它如何工作？ 第二部分 👩🏼‍🔬 👷🏻 🖇️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="上次我们从无线电接入网络的架构方面谈论了新标准NB-IoT的功能。 今天，我们将讨论NB-IoT在核心网络（Core Network）中发生了什么变化。 所以走吧 
 



 网络核心发生了重大变化。 首先，出现了一个新元素，以及标准定义为“ CIoT EPS优化”或蜂窝物联网核心网络优化的许多机...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NB-IoT：它如何工作？ 第二部分</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/431648/">  <b>上次我们从无线电接入网络的架构方面谈论了新标准NB-IoT的功能。</b>  <b>今天，我们将讨论NB-IoT在核心网络（Core Network）中发生了什么变化。</b>  <b>所以走吧</b> <b><br></b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/02e/574/8bd02e574b24c9955dc693bb5a5f3642.jpg" alt="图片"><br><br> 网络核心发生了重大变化。 首先，出现了一个新元素，以及标准定义为“ CIoT EPS优化”或蜂窝物联网核心网络优化的许多机制。 <br><br> 如您所知，在移动网络中，有两个主要的通信通道，称为控制平面（CP）和用户平面（UP）。 控制平面旨在在各种网络元素之间交换服务消息，并用于提供移动性（移动性管理）设备（UE）并建立/维护数据传输会话（会话管理）。 实际上，用户平面是用于传输用户流量的通道。 在传统的LTE中，CP和UP在接口上的分布如下： <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/f57/257/e6af5725701496cca134e7fde45de5d5.png" alt="图片"><br><br>  NB-IoT的CP和UP优化机制是在MME，SGW和PGW节点上实现的，它们有条件地组合为一个称为C-SGN（蜂窝物联网服务网关节点）的元素。 此外，该标准还假定出现了一个新的网络元素-SCEF（服务能力暴露功能）。  MME和SCEF之间的接口称为T6a，是基于DIAMETER协议实现的。 尽管DIAMETER是一种信令协议，但在NB-IoT中，它仍然适用于少量非IP数据的传输。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d9/a36/d53/7d9a36d53e5fa359b1e7d02da98a0cfc.png" alt="图片"><br><br> 基于名称，SCEF是用于公开服务功能的站点。 换句话说，SCEF隐藏了运营商网络的复杂性，也消除了应用程序开发人员对移动设备标识和认证（UE）的需要，从而使应用程序服务器（Application Server，以下简称AS）能够通过单个API接收数据并管理设备。 <br><br>  UE的标识符不是电话号码（MSISDN）或IP地址，就像在传统的2G / 3G / LTE网络上那样，而是所谓的“外部ID”，由标准以&lt;本地标识符&gt; @ &lt;应用程序开发人员熟悉的域格式定义标识符&gt;“。 这是一个单独的大主题，需要单独的材料，因此，我们现在不再详细讨论。 <br><br> 现在，我们将处理最重要的创新。  “ CIoT EPS优化”是流量传输机制和订户会话管理的优化。 这里是主要的： <br><br><ul><li>  DoNAS </li><li> 尼德 </li><li>  PSM和eDRX节能机制 </li><li> 鸿通 </li></ul><br>  <b>DoNAS（NAS上的数据）：</b> <br><br> 这是一种旨在优化少量数据传输的机制。 <br><br> 在传统的LTE中，用户单元在网络中注册时，经由eNodeB建立到MME-SGW-PGW的PDN连接（以下称为PDN）。  UE-eNodeB-MME连接是所谓的“信令无线承载”（SRB）。 如果需要发送/接收数据，则UE与eNodeB建立另一个连接-“数据无线电承载”（DRB），用于将用户业务传输到SGW并进一步传输到PGW（分别为接口S1-U和S5）。 在交换结束时，并且在一段时间（通常5-20秒）内没有通信时，这些连接断开，设备进入待机模式或“空闲模式”。 如有必要，将重新安装新的数据交换SRB和DRB。 <br><br> 在NB-IoT中，用户流量可以通过NAS协议消息（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://www.3gpp.org/more/96-nas</a> ）中的信令通道（SRB）进行传输。 不再需要安装DRB。 这样可以大大减少信号负载，节省网络无线电资源，最重要的是，可以延长设备的电池寿命。 <br><br> 在eNodeB-MME部分中，用户数据开始通过S1-MME接口传输，这在传统LTE技术中不是这种情况，为此使用了NAS协议，其中出现了“用户数据容器”。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/3ca/091/b383ca091aff5634b77f798c124ea537.png" alt="图片"><br><br> 要将“用户平面”从MME传输到SGW，将出现一个新的S11-U接口，该接口旨在传输少量用户瓜数据。  S11-U协议基于GTP-U v1，该协议用于在3GPP体系结构网络的其他接口上传输用户平面。 <br><img src="https://habrastorage.org/getpro/habr/post_images/291/414/312/2914143120918a42d83230b40eb7f4e1.png" alt="图片"><br>  <b>NIDD（非IP数据传输）：</b> <br><br> 作为进一步优化传输少量数据的机制的一部分，除了现有的PDN类型（例如IPv4，IPv6和IPv4v6）之外，还出现了另一种类型-非IP。 在这种情况下，没有为UE分配IP地址，并且在不使用IP协议的情况下发送数据。 这有几个原因： <br><br><ol><li> 物联网设备（例如传感器）可以传输非常少的数据（20字节甚至更少）。 假设IP标头的最小大小为20个字节，则IP中的封装有时可能会非常昂贵。 </li><li> 无需在芯片中实现IP堆栈，从而降低了成本（评论中的讨论问题）。 </li></ol><br> 总体而言，IoT设备需要IP地址才能通过Internet传输数据。 在NB-IoT的概念中，SCEF充当AS的单点连接，并且设备和应用程序服务器之间的数据交换通过API进行。 在没有SCEF的情况下，可以从PGW通过点对点（PtP）隧道向AS传输非IP数据，并且已经在IP上进行了封装。 <br><br> 所有这些都适合NB-IoT范例-设备的最大程度简化和廉价化。 <br><br>  <b>PSM和eDRX节能机制：</b> <br><br>  LPWAN网络的主要优势之一是能效。 声明单个电池的最长电池寿命为10年。 让我们看看如何实现这些价值。 <br><br> 设备何时消耗最少的电量？ 关机时更正。 如果无法完全使设备断电，请在不需要时使无线电模块断电。 只有首先，您需要与网络进行协调。 <br><br>  <b>PSM（省电模式）：</b> <br><br>  PSM省电模式使设备可以长时间关闭无线电模块，同时保持在网络上的注册状态，而不必在每次需要传输数据时都重新安装PDN。 <br><br> 为了使网络知道设备仍然可用，它会定期启动更新过程-跟踪区域更新（TAU）。 该过程的频率由网络使用T3412计时器设置，该计时器的值在“连接”过程或下一个TAU期间传输到设备。 在传统LTE中，此计时器的默认值为54分钟，最大值为186分钟。 但是，为了确保高能效，每186分钟进行一次空中飞行的需求实在是太昂贵了。 为了解决这个问题，开发了PSM机制。 <br><br> 设备通过发送消息“附加请求”或“跟踪区域请求”中扩展的两个计时器T3324和T3412-的值来激活PSM模式。 首先确定在切换到“空闲模式”后设备可用的时间。 第二个是必须生产TAU的时间，仅现在它的值可以达到35712000秒或413天。 根据设置，MME可以接受从设备接收的计时器值，也可以通过在“附加接受”或“跟踪区域更新接受”消息中发送新值来更改它们。 现在，该设备可能在413天之内无法打开无线电模块，并在网络上保持注册状态。 结果，我们在网络资源和设备能效方面获得了巨大的节省！ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/454/acd/f5b/454acdf5be7596292b607513eeacaac7.png" alt="图片"><br><br> 但是，在此模式下，该设备不仅仅可用于传入通信。 如有必要，将某物传输到应用服务器端，设备可以随时退出PSM并发送数据，此后T3324计时器将保持激活状态，以从AS接收信息消息（如果有）。 <br><br>  <b>eDRX（扩展的不连续接收）：</b> <br><br>  eDRX，高级间歇接收。 要将数据传输到处于“空闲模式”的设备，网络将执行通知过程-“寻呼”。 一旦接收到寻呼设备，就开始建立SRB以用于与网络的进一步通信。 但是为了不丢失发给他的寻呼消息，设备必须不断监视无线电广播，这也非常耗能。 <br><br>  eDRX是一种模式，在该模式下，设备从网络接收的消息不是恒定的，而是周期性的。 在“附加”或“ TAU”过程中，设备与网络协商“监听”广播的时间间隔。 因此，分页过程将以相同的间隔执行。 在eDRX模式下，设备分为多个周期（eDRX周期）。 在每个周期的开始，就是所谓的“寻呼时间窗”（PTW）-这是设备收听无线电信道的时间。 在PTW结束时，设备将关闭无线电模块，直到周期结束。 <br><img src="https://habrastorage.org/getpro/habr/post_images/6db/904/b06/6db904b06c01b940885b43683cc8c905.png" alt="图片"><br>  <b>HLCOM（高延迟通信）：</b> <br><br> 如果有必要将数据传输到上行链路，则设备可以退出这两种节能模式中的任何一种，而无需等待PSM或eDRX周期的结束。 但是在这里，只有当设备处于活动状态时，才可以将数据传输到设备。 <br><br>  HLCOM功能或具有高延迟的通信是在设备处于省电模式且不可访问以进行通信时在SGW上缓冲下行链路数据包。 当设备通过进行TAU或传输上行链路流量而退出PSM时，或在PTW到达时，将立即发送缓冲的数据包。 <br><br> 当然，这需要物联网产品开发人员的意识，因为与设备的通信不是实时获得的，并且需要某种方法来设计应用程序的业务逻辑。 <br><br> 总而言之，可以说：新产品的推出总是令人兴奋，现在我们正在处理的标准甚至没有被沃达丰和Telefonica之类的世界“野牛”进行全面测试-因此，令人倍感兴奋。 我们对材料的介绍并不要求绝对的完整性，但是我们希望它对技术有足够的了解。 反馈将不胜感激。 <br><br>  <i>作者：融合解决方案和多媒体服务专家Alexey Lapshin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">aslapsh</a></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN431648/">https://habr.com/ru/post/zh-CN431648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN431636/index.html">如何庆祝信息安全日</a></li>
<li><a href="../zh-CN431638/index.html">我们如何进入一家大公司的信息安全部门并开始工作的。 两位年轻有为的专家的日记</a></li>
<li><a href="../zh-CN431642/index.html">养蜂人与微控制器或错误的好处</a></li>
<li><a href="../zh-CN431644/index.html">与TM的直线。 v4.0</a></li>
<li><a href="../zh-CN431646/index.html">DataGrip 2018.3：支持Cassandra，从对象生成SQL文件，对自动完成功能进行了许多改进等</a></li>
<li><a href="../zh-CN431650/index.html">学习潜伏期：排队论</a></li>
<li><a href="../zh-CN431652/index.html">储层采样算法</a></li>
<li><a href="../zh-CN431654/index.html">编程语言趋势2019</a></li>
<li><a href="../zh-CN431656/index.html">CraSSh：使用CSS计算打破所有现代浏览器</a></li>
<li><a href="../zh-CN431660/index.html">使用ECS的游戏功能：向射手添加急救箱</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>