<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦀 🌮 🙅 Tambahkan Segarkan Token 🦎 💲 🤙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya, saya berbicara tentang dasar-dasar JWT . Jika dengan jari Anda, maka ini hanya kunci yang kami gunakan untuk membuka pintu k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tambahkan Segarkan Token</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466929/"><p><img src="https://habrastorage.org/webt/ri/mn/p_/rimnp_slilvwggqus7dvmlbnepu.jpeg"></p><br><p> Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> saya berbicara tentang dasar-dasar <code>JWT</code> .  Jika dengan jari Anda, maka ini hanya kunci yang kami gunakan untuk membuka pintu ke sumber daya pribadi.  Tetapi bagaimana jika kunci ini dicuri (lebih tepatnya, mereka akan membuat duplikat).  Maka orang lain akan dapat masuk ke server dengan nama Anda, dan kami mungkin bahkan tidak mengetahuinya.  Kami tidak ingin mengizinkan skenario seperti itu.  Tetapi apa yang harus dilakukan? </p><a name="habracut"></a><br><h2 id="povyshaem-bezopasnost">  Tingkatkan keamanan </h2><br><p>  Saya menyarankan pembaca, sebelum melanjutkan secara mandiri, untuk memikirkan apa yang dapat kita lakukan dengan keamanan. </p><br><p>  Berikut adalah beberapa pendekatan yang dapat meningkatkan keamanan.  Anda dapat menulis di komentar apa pendekatan lain yang ada - saya akan menambahkannya. </p><br><ol><li>  Menggunakan protokol <code>https</code> , yang melindungi saluran data melalui Internet.  Bahkan, ini adalah pembungkus lebih dari <code>http</code> , yang memberlakukan protokol kriptografi tambahan - <code>SSL</code> dan <code>TLS</code> </li><li>  Menambahkan informasi <code>IP</code> ke <code>payload</code> .  Maka token dari <code>IP</code> lain tidak akan lulus verifikasi.  Tetapi <code>IP</code> dapat dipalsukan, dan apa yang harus dilakukan dengan alamat <code>IP</code> dinamis atau ketika pengguna terhubung dari telepon di kafe atau metro.  Karena itu, kami tidak akan menggunakan pendekatan ini. </li><li>  Gunakan <code>RS256</code> .  Ini memastikan keamanan kunci privat itu sendiri.  Tetapi dengan token, semuanya tetap seperti biasa.  Kami membutuhkan <code>RS256</code> ketika kami takut untuk memberikan kunci rahasia ke server lain, yang mungkin tidak dapat diandalkan.  Kami hanya memberi mereka alat otentikasi token, yang sama sekali tidak berguna bagi penyerang. </li><li>  Gunakan token berumur pendek.  Tetapi kemudian pengguna harus login ulang setiap kali ia kedaluwarsa.  Pengguna cepat atau lambat akan bosan dan dia akan meninggalkan sumber daya kami. </li><li>  Tetapi bagaimana jika Anda menggunakan token berumur pendek, tetapi berikan token lain, yang tujuannya hanya untuk mendapatkan token berumur pendek baru tanpa otorisasi baru?  Token seperti itu disebut token Segarkan dan dimungkinkan untuk menggunakannya hanya sekali.  Ini akan menjadi artikel saya. </li></ol><br><h2 id="vspomnim-chto-takoe-jwt">  Ingat Apa JWT Itu </h2><br><p>  <code>JWT</code> mengambil keuntungan dari <code>JWE</code> pengkodean <code>JWS</code> (Tanda Tangan) dan <code>JWE</code> (Enkripsi).  Tanda tangan tidak memungkinkan seseorang memalsukan token tanpa informasi tentang kunci rahasia, dan pengodean melindungi terhadap pembacaan data oleh pihak ketiga. </p><br><p>  Mari kita lihat bagaimana mereka dapat membantu kami untuk mengotentikasi dan mengotorisasi pengguna di situs. </p><br><blockquote>  <strong>Otentikasi</strong> (otentikasi bahasa Inggris; dari bahasa Yunani. Αὐθεντικός [authentikos] - nyata, asli; dari αὐθέντης [otentikasi] - penulis) - prosedur otentikasi.  Dalam kasus kami, kami memeriksa login + kata sandi untuk kecocokan dengan entri dalam database data pengguna. <br><br>  <strong>Otorisasi</strong> ( <strong>Otorisasi</strong> Bahasa Inggris - izin, otorisasi) - memberi pengguna hak untuk melakukan tindakan tertentu;  dan juga proses memeriksa (mengonfirmasi) hak-hak ini ketika mencoba melakukan tindakan ini. <br><br>  Dengan kata lain, otentikasi memeriksa legalitas pengguna, dan kemudian, jika semuanya baik-baik saja, pengguna menjadi diotorisasi, yaitu, ia dapat melakukan tindakan yang diizinkan dengan database.  Biasanya, kedua proses ini digabungkan, dan karena itu ada kebingungan yang terkenal. </blockquote><br><h2 id="vidy-tokenov">  Jenis Token </h2><br><ul><li>  <strong>Access Tokens (JWTs)</strong> adalah token yang dapat digunakan untuk mengakses sumber daya yang dilindungi.  Mereka berumur <strong>pendek</strong> , tetapi <strong>dapat digunakan kembali</strong> .  Mereka mungkin berisi informasi tambahan, seperti masa pakai, atau alamat <code>IP</code> dari mana permintaan itu berasal.  Itu semua tergantung keinginan pengembang. </li><li>  <strong>Refresh Token (RT)</strong> - token ini hanya melakukan satu tugas khusus - mendapatkan token akses baru.  Dan kali ini Anda tidak dapat melakukannya tanpa server otorisasi.  Mereka berumur <strong>panjang</strong> , tetapi <strong>sekali pakai</strong> . </li></ul><br><p>  Kasus penggunaan utama adalah ini: begitu <code>JWT</code> lama kedaluwarsa, kami tidak dapat lagi menerima data pribadi dengannya, lalu kami mengirim <code>RT</code> dan kami menerima sepasang <code>JWT+RT</code> .  Dengan <code>JWT</code> baru <code>JWT</code> kita dapat kembali beralih ke sumber daya pribadi.  Tentu saja, token penyegaran juga bisa menjadi buruk, tetapi itu tidak akan terjadi segera, karena dia hidup lebih lama daripada saudaranya. </p><br><p><img src="https://habrastorage.org/webt/s7/q4/sm/s7q4smfprz_ktx6odq-vnqcb_pm.jpeg"></p><br><p>  Gagasan kunci pemisahan token adalah bahwa, <strong>di satu sisi</strong> , token otorisasi memungkinkan kami untuk dengan mudah memverifikasi pengguna tanpa server otorisasi, hanya dengan membandingkan tanda tangan. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> validateToken = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">token</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [ header, payload, signature ] = token.split(<span class="hljs-string"><span class="hljs-string">'.'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> signature === HS256(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${header}</span></span></span><span class="hljs-string">.</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${payload}</span></span></span><span class="hljs-string">`</span></span>, SECRET_KEY); }</code> </pre> <br><p>  <strong>Di sisi lain</strong> , kami memiliki <code></code> yang memungkinkan kami untuk memperbarui token akses tanpa memasukkan kata sandi dari pengguna, tetapi dalam hal ini, kami masih perlu melakukan operasi mahal untuk mengakses server otorisasi. </p><br><h2 id="v-zaklyuchenie">  Kesimpulannya </h2><br><p>  Berkat pendekatan ini, kami mengurangi waktu tunda untuk mengakses server <code>latency</code> , dan logika server itu sendiri menjadi jauh lebih sederhana.  Dan dari sudut pandang keamanan, jika token akses dicuri dari kami, hanya waktu yang terbatas yang akan dapat menggunakannya - tidak lebih dari masa pakainya.  Agar penyerang dapat menggunakan lebih lama, ia juga perlu mencuri penyegaran, tetapi kemudian pengguna yang sebenarnya akan tahu bahwa ia telah diretas karena ia akan dikeluarkan dari sistem.  Dan sekali pengguna tersebut masuk lagi, ia akan menerima sepasang <code>JWT+RT</code> diperbarui, dan yang dicuri akan berubah menjadi labu. </p><br><h2 id="poleznye-ssylki">  Tautan yang bermanfaat </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengapa saya perlu Segarkan Token jika saya memiliki Akses Token?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Segarkan Token: Kapan Menggunakan Mereka dan Bagaimana Mereka Berinteraksi dengan JWT</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lebih Banyak Kejutan OAuth 2.0: The Refresh Token</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466929/">https://habr.com/ru/post/id466929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466915/index.html">Cara membuat SFINAE ramping dan dapat diandalkan</a></li>
<li><a href="../id466917/index.html">Ketika standar HTTP tidak cukup. Micronaut melakukan</a></li>
<li><a href="../id466921/index.html">5 masalah dari setiap perusahaan jasa dan solusinya menggunakan platform otomatisasi</a></li>
<li><a href="../id466923/index.html">Bagaimana cara IT pro di bank asing untuk membuktikan asal dana</a></li>
<li><a href="../id466925/index.html">Bagaimana menjalankan VDS Hi-CPU untuk Bitrix, bubarkan burung beo dan jangan sampai bangkrut</a></li>
<li><a href="../id466931/index.html">Optimalisasi Kinerja untuk Aplikasi .NET (C #)</a></li>
<li><a href="../id466933/index.html">Cara berteman industri dan data besar</a></li>
<li><a href="../id466937/index.html">Bagaimana kami melakukan Olimpiade online All-Rusia dalam bahasa Inggris, matematika, dan ilmu komputer</a></li>
<li><a href="../id466941/index.html">Mengapa Windows membaca satu file seratus ribu kali untuk membuka menu?</a></li>
<li><a href="../id466949/index.html">Prospek untuk jaringan kuantum: siapa yang terlibat di dalamnya dan mengapa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>