<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧙🏿 ▪️ 🕧 xonsh - python sebagai pengganti shell 👂🏿 🤴🏾 📃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anehnya, di hub masih belum ada posting tentang penggantian shell yang sangat menarik seperti xonsh ( github ), dari sudut pandang saya, sintaksis sem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>xonsh - python sebagai pengganti shell</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429892/"><p>  Anehnya, di hub masih belum ada posting tentang penggantian shell yang sangat menarik seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">xonsh</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> ), dari sudut pandang saya, sintaksis semua shell sangat mengerikan dan saya tidak melihat alasan untuk menyimpannya di abad ke-21, dan Python, di saya ia memiliki sintaks yang sangat baik dan banyak keuntungan lainnya, oleh karena itu, menurut pendapat saya, itu harus menjadi bahasa otomasi default, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yang merupakan apa yang coba dicapai oleh xonsh</a> . </p><br><p>  Saya sudah menggunakan xonsh selama beberapa waktu, jadi saya pikir saya bisa membicarakannya cukup untuk mulai menggunakannya. </p><a name="habracut"></a><br><p>  Pemesanan: </p><br><ul><li>  xonsh hanya tentang Python 3, tapi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">itu norma</a> . </li><li>  xonsh belum dirilis (versi 0.8.3 pada saat penulisan), tampaknya, menurut pengembang, belum semua fitur yang diinginkan telah diimplementasikan, tetapi menurut perasaan saya, semuanya berfungsi (jika Anda melihat perbedaannya, kira-kira di bawah). </li></ul><br><p>  Fitur utama xonsh adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"secara ajaib"</a> menebak apa yang Anda masukkan - perintah python atau shell, dan ini bekerja dengan cukup baik. </p><br><p> Anda dapat memasukkan kode python ke perintah shell menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">anjing</a> . </p><br><p>  Saya tidak akan memikirkan fitur apa saja di xonsh, ini dijelaskan dengan jelas dan jelas dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> dan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> apa pun, dari sudut pandang saya, cukup bahwa Anda bisa mendapatkan sintaks loop normal di shell: </p><br><pre><code class="plaintext hljs">worldmind@x ~ $ for i in range(3): ............... echo $SHELL</code> </pre> <br><p>  Karena itu, saya akan mencoba untuk fokus pada apa yang tidak dijelaskan atau digambarkan dengan buruk. </p><br><h2 id="ustanovka">  Instalasi </h2><br><p>  Saya akan menjelaskan instalasi (untuk Debian / Ubuntu) yang tidak memerlukan hak akses superuser, meskipun saya baru saja beralih ke skema seperti itu, saya memasukkannya ke folder sistem sebelumnya, menulisnya di <code>/etc/shells</code> dan mengganti shell dengan perintah <code>chsh</code> , tetapi pada awalnya semuanya berfungsi juga dengan metode baru, dan menurut saya lebih tepat, saya tidak ingin menyumbat sistem dengan paket bukan dari repositori, tetapi di sini semua orang memutuskan untuk dirinya sendiri. </p><br><p>  Kami memberikan pip jika belum: </p><br><pre> <code class="plaintext hljs">sudo apt-get install python3-pip</code> </pre> <br><p>  Kami meletakkan xonsh (tanpa sudo), saya memberikan perintah yang menginstal semua dependensi opsional untuk mendapatkan semua roti yang dikandung oleh penulis, jika seseorang menginginkan instalasi minimal, maka Anda dapat menghapus tanda kurung siku dengan konten: </p><br><pre> <code class="plaintext hljs">pip3 install --user xonsh[ptk,pygments,proctitle,linux]</code> </pre> <br><p>  Kemungkinan besar Anda sudah memiliki suatu tempat di. <code>.profile</code> di PATH path ke folder lokal dengan binari <code>$HOME/.local/bin</code> ditambahkan, tetapi mereka ditambahkan hanya jika ada, jadi Anda perlu me-restart terminal agar kode ini berfungsi dan biner xonsh harus lari dan melihat. <br>  Pembaruan adalah standar: </p><br><pre> <code class="plaintext hljs">pip3 install --user xonsh --upgrade</code> </pre> <br><h3 id="venv">  venv </h3><br><p>  Kami menempatkan venv jika kami ingin menggunakan fungsionalitas yang sesuai (lihat lebih lanjut di vox): </p><br><pre> <code class="plaintext hljs">sudo apt-get install python3-venv</code> </pre> <br><p>  Semua venv ditajamkan untuk cangkang tertentu, jadi xonsh menawarkan pembungkusnya sendiri yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vox</a> , tetapi untuk penggunaan yang nyaman perlu menginstal ekstensi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">avox</a> : </p><br><pre> <code class="plaintext hljs">pip3 install --user xontrib-avox</code> </pre> <br><h3 id="ustanovka-pyenv">  Instalasi Pyenv </h3><br><p>  Jika ada kebutuhan untuk lingkungan virtual dengan versi python sewenang-wenang, maka Anda perlu mengkloning pyenv dengan terlebih dahulu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menginstal dependensi untuk membangun python</a> : </p><br><pre> <code class="plaintext hljs">git clone https://github.com/pyenv/pyenv.git ~/.pyenv</code> </pre> <br><p>  Lebih lanjut dalam contoh konfigurasi, Anda dapat melihat instalasi sepasang variabel lingkungan untuk menggunakan pyenv. </p><br><h3 id="zapusk">  Luncurkan </h3><br><p>  Sekarang kita telah menginstal semuanya dan masih membuat xonsh menjadi shell, agar tidak mengubah apa pun di luar folder pengguna, saya menggunakan kode berikut (berdasarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SO</a> ) untuk bash (jika Anda memiliki shell lain, maka Anda tahu apa yang harus dilakukan, tetapi jangan gunakan .profile sejak xonsh membacanya juga) ditambahkan ke <code>.bashrc</code> : </p><br><pre> <code class="plaintext hljs"># set default shell without editing /etc/shells if [ "${XONSH_VERSION:-unset}" = "unset" ] ; then export SHELL=$HOME/.local/bin/xonsh exec $HOME/.local/bin/xonsh -l fi</code> </pre> <br><p>  Kami me-restart shell dan, jika semuanya berjalan dengan baik, Anda sudah di xonsh i.e.  pada kenyataannya, di konsol python dan Anda dapat, misalnya, melakukan perhitungan langsung pada baris perintah, misalnya, mencari tahu berapa banyak <code>2+2</code> akan. </p><br><h2 id="nastroyka">  Kustomisasi </h2><br><p>  Sebelum mulai menggunakannya, Anda harus membuat file konfigurasi <code>.xonshrc</code> : </p><br><pre> <code class="plaintext hljs">aliases['g'] = 'git' import os local_bin = '{}/.local/bin'.format($HOME) if os.path.isdir(local_bin): $PATH.append(local_bin) $PYENV_ROOT = '%s/.pyenv' % $HOME $PATH.insert(0, '%s/bin' % $PYENV_ROOT) xontrib load vox $PROJECT_DIRS = ["~/projects"] xontrib load avox</code> </pre> <br><p>  Mulai ulang shell untuk menerapkan pengaturan baru. </p><br><p>  Perlu memperhatikan model data manusia - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alias</a> adalah kamus, cara daftar, tampaknya jelas, tetapi untuk beberapa alasan tidak selalu seperti itu. <br>  Kami juga mengimpor modul <code>os</code> di konfigurasi, yang berarti sudah tersedia di shell kami, sehingga Anda dapat mengimpor modul yang diperlukan dan mendapatkan lingkungan Anda sendiri yang nyaman. </p><br><p>  Awal dari file di atas lebih untuk menunjukkan kemampuan, tetapi tiga baris terakhir memungkinkan Anda untuk dengan mudah menggunakan lingkungan virtual, contoh yang digunakan nanti. </p><br><h2 id="ispolzovanie-virtualnyh-okruzheniy">  Menggunakan lingkungan virtual </h2><br><p>  Buat folder proyek (avox mengharapkan bahwa semua proyek dalam <code>$PROJECT_DIRS</code> ): </p><br><pre> <code class="plaintext hljs">mkdir -p projects/test</code> </pre> <br><p>  Buat lingkungan virtual untuk proyek ini: </p><br><pre> <code class="plaintext hljs">vox new test</code> </pre> <br><p>  Berkat add- <code>avox</code> dikonfigurasi <code>avox</code> kita hanya perlu pergi ke folder proyek untuk mengaktifkan lingkungan virtual, <code>source ./bin/activate</code> tidak perlu melakukan <code>source ./bin/activate</code> aneh <code>source ./bin/activate</code> : </p><br><pre> <code class="plaintext hljs">worldmind@x ~ $ cd projects/test/ (test) worldmind@x ~/projects/test $ pip install see ... (test) worldmind@x ~/projects/test $ python -c 'import see'</code> </pre> <br><p>  Setelah keluar dari folder, lingkungan virtual dinonaktifkan: </p><br><pre> <code class="plaintext hljs">(test) worldmind@x ~/projects/test $ cd worldmind@x ~ $ python3 -c 'import see' err&gt;out | fgrep 'NotFound' ModuleNotFoundError: No module named 'see'</code> </pre> <br><p>  Pada saat yang sama, Anda dapat melihat lebih banyak pekerjaan manusia dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengarahkan ulang aliran I / O</a> , yang tidak pernah lupa bagaimana melakukan ini di semua jenis pesta, biarkan mereka menjadi yang pertama memberikan komentar kepada saya. </p><br><p><del>  Demi kelengkapan, saya ingin itu di lingkungan virtual ini akan mungkin untuk menggunakan versi python sewenang-wenang, misalnya, diinstal melalui pyenv, tetapi sejauh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini belum tumbuh bersama</a> , dan tangan belum mencapai untuk mengeraskan diri. </del><br>  UPD: Belum lama ini, xonsh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diajari untuk</a> menggunakan versi python sewenang-wenang dalam lingkungan virtual. <br>  Instal versi python yang diinginkan (daftar <code>pyenv install --list</code> tersedia <code>pyenv install --list</code> ): </p><br><pre> <code class="plaintext hljs">pyenv install 3.7.2</code> </pre> <br><p>  Buat lingkungan virtual bersamanya: </p><br><pre> <code class="plaintext hljs">mkdir projects/projectwith3.7 vox new -p $PYENV_ROOT/versions/3.7.2/bin/python projectwith3.7</code> </pre> <br><p>  Kami memeriksa: </p><br><pre> <code class="plaintext hljs">(projectwith3.7) worldmind@x ~/projects/projectwith3.7 $ python --version Python 3.7.2</code> </pre> <br><h2 id="grabli">  Menyapu </h2><br><p>  Satu-satunya hal yang saya temukan adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perbedaan dalam melarikan diri</a> : </p><br><pre> <code class="plaintext hljs">find . -name data.txt -exec echo {} \;</code> </pre> <br><p>  tidak akan bekerja, karena pelarian backslash tidak bekerja di xonsh dan kurung kurawal memiliki arti khusus, Anda perlu menggunakan tanda kutip, misalnya seperti ini: </p><br><pre> <code class="plaintext hljs">find . -name .xonshrc -exec echo '{}' ';'</code> </pre> <br><p>  Beberapa perbedaan dari bash adalah dalam bentuk tabel dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> . </p><br><h2 id="vyvod">  Kesimpulan </h2><br><p>  Sepertinya saya bahwa xonsh adalah penantang yang baik untuk cangkang normal di masa depan untuk semua, dan terutama itu harus menarik bagi pythonists.  Mulai menggunakan (instalasi tanpa sudo memudahkan untuk memutar kembali, Anda cukup menghapus folder) untuk memahami jika semuanya ada untuk Anda secara pribadi, mungkin ini yang Anda cari, tetapi takut untuk menginstal. </p><br><h2 id="dopolneniya-v-kommentariyah">  Penambahan di komentar </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengatur variabel lingkungan untuk folder</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kait Aktivasi Lingkungan Virtual</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429892/">https://habr.com/ru/post/id429892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429880/index.html">Pix4D - dari foto ke pengukuran</a></li>
<li><a href="../id429882/index.html">Mengontrol LED RGB melalui Cypress UDB Microcontrollers PSoC</a></li>
<li><a href="../id429884/index.html">PROSTOR 2018 Conference: pertanyaan dan jawaban tentang masa depan penyimpanan</a></li>
<li><a href="../id429888/index.html">Kalkulator berbasis tumpukan pada papan FPGA Cyclone IV</a></li>
<li><a href="../id429890/index.html">Buka webinar "Jaringan permusuhan generatif"</a></li>
<li><a href="../id429894/index.html">Menggunakan mata Ikan pada Raspberry Pi 3 dengan ROS - Bagian 2</a></li>
<li><a href="../id429898/index.html">DMS (Sistem Manajemen Dealer) - Implementasi Sistem Informasi Eco untuk mengelola jaringan Dealer</a></li>
<li><a href="../id429902/index.html">Page Rank di Era Web 2.0 - Bagian 1</a></li>
<li><a href="../id429904/index.html">Cerita lucu dan sedih tentang perkembangan game komputer</a></li>
<li><a href="../id429908/index.html">Cara menggunakan coroutine dalam makanan dan tidur nyenyak di malam hari</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>