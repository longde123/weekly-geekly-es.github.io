<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🅾️ 🌑 👨🏽‍🍳 Projektion von Unternehmenskonflikten auf die Netzwerkkonnektivität 👧🏾 🤦🏻 ✌🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ein Unternehmenskonflikt entstand am 10.06.2019 aufgrund eines Anstiegs der Kosten für die SMS-Zustellung an Benutzer des Vimpelcom-Netzwerks durch di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Projektion von Unternehmenskonflikten auf die Netzwerkkonnektivität</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cp/8x/ty/cp8xty7ejmoaj8gl7q7uhikmku0.png" alt="Bild"></div><br>  Ein Unternehmenskonflikt entstand am 10.06.2019 aufgrund eines Anstiegs der Kosten für die SMS-Zustellung an Benutzer des Vimpelcom-Netzwerks durch die Mail.RU Group.  Als Reaktion darauf stellte die Mail.RU Group die direkten russischen IP-Kanäle für das Vimpelcom-Netzwerk ein. <br><br>  Nachfolgend finden Sie eine kurze Analyse der Situation aus Sicht eines Netzwerktechnikers. <br><br>  <b>Update</b> : 14.06.2019 18:45 - Betonung der russischen Routen zum VimpelCom-Netzwerk, angepasste Schlussfolgerungen, Erklärung von <b>Sergey Kubasov (CIO Vkontakte)</b> . <br>  <b>Update</b> : 14.06.2019 19:48 - Eine Beschreibung der Methode zur Einschränkung der Verteilung von Routen entlang der „kurzen“ russischen Route über Rostelecom, MTS, RETN.NET wurde hinzugefügt. <br>  <b>Update</b> : 15.06.2019 09:39 - Mail.ru hat seinen Spiegel blockiert. <br>  <b>Update</b> : 18.06.2019 10:10 - Depyning ist vorbei.  VimpelCom und Mail.RU Group haben direkte BGP-Sitzungen ausgelöst. <br><br><a name="habracut"></a><br>  Einführung: <br>  VimpelCom verfügt über ein autonomes System AS3216, der Rest (8402 - Home Internet, 16345 - Mobile Internet) befindet sich in 3216. <br><br>  Mail.RU Group - autonome Systeme AS47541, AS47542 und AS47764.  Der Hauptinhaltsgenerator ist 47542, der sogenannte  CDN VKONTAKTE (Filme, Musik).  Alle autonomen Systeme sind unabhängig voneinander (von der Position eines externen autonomen Systems). <br><br>  Schauen wir uns zunächst die Situation im Vimpelcom-Netzwerk an.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Looking Glass Vimpelcom</a> hilft uns dabei. <br><br>  Wir betrachten das erste autonome System - AS47541. <br><br><pre><code class="perl hljs"><span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394342</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br>  AS-PATH enthält zwei autonome Systeme - 2914 (NTT) und 47541 (VKONTAKTE-SPB-AS). <br>  Die localpref-Metrik ist auf 87 festgelegt, was, wie in der RIPE-Datenbank für das AS3216-Objekt beschrieben, internationalem Peering entspricht. <br><blockquote>  ... <br>  Anmerkungen: Internationale Peer-Routen werden in der Region bevorzugt <br>  Anmerkungen: Bereich von 81-89. <br>  ... </blockquote>  Die Community 3216: 3000 und 3216: 3103 (Quelle - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RIPE DB für AS3216</a> ) bestätigt dieselben Informationen: <br><blockquote>  ... <br>  Anmerkungen: 3216: 3000 Von einem internationalen Uplink oder Peer empfangen, insbesondere: <br>  ... <br>  Anmerkungen: 3216: 3103 AMS-IX <br>  ... </blockquote>  Das heißt, Vimpelcom sieht die Route nach VKontakte über die europäische Kreuzung. <br><br>  Sehen wir uns eine weitere Autonomie von VKontakte an - 47542 (VKONTAKTE-MSK-CDN-AS). <br><br><div class="spoiler">  <b class="spoiler_title">Alles ist ähnlich.</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394338</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br></div></div><br>  Was ist mit Mail.ru selbst?  Werfen wir einen Blick auf AS47764 (mailru-as). <br><br><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">3356</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span> <span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span> (metric <span class="hljs-number"><span class="hljs-number">10501</span></span>) (<span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">0</span></span>, localpref <span class="hljs-number"><span class="hljs-number">77</span></span>, valid, internal, best, group-best, import-candidate Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2867605667</span></span> Community: <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3007</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">519</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2094</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">50077</span></span></code> </pre> <br>  VimpelCom sieht Mail.ru über as3356 (Uplink Level3, Tier1-Operator).  Diese Information wird von localpref 77 bestätigt: <br><blockquote>  ... <br>  Anmerkungen: Die Routen von Uplink werden vor Ort im Bereich von 71 bis 79 bevorzugt. <br>  Anmerkungen: Letzte Aktualisierung: Februar 2012 ... </blockquote>  und Gemeinschaft (3216: 3000 und 3216: 3007): <br><blockquote>  ... <br>  Anmerkungen: 3216: 3000 Von einem internationalen Uplink oder Peer empfangen, insbesondere: <br>  ... <br>  Anmerkungen: 3216: 3007 Level 3 Communications <br>  ... </blockquote><br>  Aus den empfangenen Informationen ist ersichtlich, dass der Verkehr vom Vimpelcom-Netzwerk auf VKontakte und MailRu über europäische Verbindungen gemäß den über das BGP-Protokoll empfangenen Routen verteilt wird.  Bei Looking Glass gibt es keine alternativen Routen durch russische Verbindungen.  Es wurden keine Maßnahmen gefunden, um den Verkehr auf wissentlich schlechteren Strecken künstlich umzuleiten. <br><br>  Und wie sieht die Mail.ru-Gruppe das VimpelCom-Netzwerk? <br>  Wir werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Looking Glass from Mail verwenden</a> .  <b>Update</b> : Ab dem Morgen des 15.06.2019 funktioniert Looking Glass nicht, wenn der 500. Fehler angefordert wird: <img src="https://habrastorage.org/getpro/habr/post_images/515/c79/93c/515c7993ccd0f3d6bd9a5a20d3078ee9.png" alt="Bild"><br><br>  Von Routern von AS47764 (mailru-as): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#6: Received by speaker 0 Advertised to peers (in unique update groups): 188.93.60.188 1299 1299 1273 3216 3216 217.20.147.250 (metric 100) from 217.20.147.250 (217.20.147.253) Origin IGP, metric 500, localpref 200, valid, internal, best, group-best Received Path ID 0, Local Path ID 0, version 1172721494 Community: 1299:20000 47764:701 47764:41100 47764:41108 47764:50077</span></span></code> </pre> <br><br>  AS-PATH enthält AS1299 (Telia, Tier1-Betreiber, Uplink Mail.RU) und as1273 (Vodafon, Tier1-Betreiber, Uplink Vimpelcom). <br><br>  LocalPreference 200 ist der Standard für externe Mail.ru-Schnittstellen (https://net.mail.ru/bgp.html), und der MED 500 entspricht allem, was nicht von einer direkten Schnittstelle empfangen wird, nicht von IX-s, nicht von Peer-to-Peer-Schnittstellen. <br><br>  Aber warum gibt es keine lokalen Strecken durch russische Telekommunikationsbetreiber? <br>  Sie sind es, aber ihre Priorität ist "nicht Standard"! <br>  Hier ist die Route durch Rostelecom (as12389): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#1: Received by speaker 0 Not advertised to any peer 12389 3216 46.61.178.149 from 46.61.178.149 (213.59.207.79) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 12389:5 12389:6 12389:1100 12389:1105 12389:1277 47764:701 47764:41100 47764:41104 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Hier ist durch das Megaphon (as31133): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#2: Received by speaker 0 Not advertised to any peer 31133 3216 78.25.77.41 from 78.25.77.41 (10.222.253.97) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 31133:300 31133:46170 47764:701 47764:41100 47764:41105 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Hier ist durch RET.NO: <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#3: Received by speaker 0 Not advertised to any peer 9002 9002 3216 87.245.253.24 from 87.245.253.24 (87.245.225.1) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 9002:9002 9002:64667 47764:701 47764:41100 47764:41101 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Und sogar durch MTS! <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#5: Received by speaker 0 Not advertised to any peer 8359 3216 212.188.61.105 from 212.188.61.105 (195.34.52.77) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 8359:200 8359:609 8359:5012 47764:701 47764:41100 47764:41103 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Die lokale Präferenzmetrik für diese russischen Routen wird unterschätzt, dh die Routen sind im Vergleich zu ausländischen Routen verschlechtert! <br><br>  Darüber hinaus hat die <b>Mail.Ru Group Verbote</b> , ihre Präfixe über russische Betreiber an VimpelCom <b>zu</b> verteilen! <br><br>  RET.NO (http://lg.retn.net/): <br>  Die Ankündigungen der Mail.RU Group umfassen die 3216-Community: 65535. <br><div class="spoiler">  <b class="spoiler_title">Fazit von LG RET.NO.</b> <div class="spoiler_text">  inet.0: 762737 Ziele, 1734826 Routen (762708 aktiv, 222780 Holddown, 277 versteckt) <br>  94.100.176.0/20 (1 Eintrag, 1 angekündigt) <br>  * BGP-Präferenz: 170 / -201 <br>  ... <br>  ... <br>  AS-Pfad: 47764 I. <br>  AS-Pfad: Aufgenommen <br>  Communities: 3216: 65535 9002: 64667 9002: 65530 <br>  ... <br></div></div><br>  Vimpelcom akzeptiert keine Routen, die von einer solchen Community in seinem Netzwerk markiert wurden.  Auszug aus RIPE DB von AS3216: <br><blockquote>  ... <br>  Anmerkungen: Interne Comminuties werden nur intern zugewiesen. <br>  Anmerkungen: Sie liegen im Bereich 3216: 0000-3216: 4999 und 3216: 6000-3216: 65535 <br>  Anmerkungen: und werden immer aus eingehenden Aktualisierungen an der Grenze gelöscht <br>  Anmerkungen: Router. <br>  ... </blockquote><br>  In Richtung Rostelecom (http://lg.ip.rt.ru) Mail.RU Group bietet ähnliche Routen mit der Community 12389: 8350. <br><div class="spoiler">  <b class="spoiler_title">Fazit von LG Rostelecom</b> <div class="spoiler_text">  94.100.176.0/20 über 217.107.65.1 auf eth0.9 [sr2 2019-06-13] * (100 /?) [AS47764i] <br>  Typ: BGP Unicast Univ <br>  BGP.origin: IGP <br>  BGP.as_path: 47764 <br>  BGP.next_hop: 213.59.207.78 <br>  BGP.med: 0 <br>  BGP.local_pref: 850 <br>  BGP.community: (12389.1) (12389.1100) (12389.1105) (12389.1277) (12389.8350) (12389.8380) (47764.1) (47764,40000) (47764,50077) <br>  BGP.originator_id: 213.59.207.78 <br>  BGP.cluster_list: 95.167.88.79 95.167.88.49 95.167.88.17 <br></div></div><br>  Gemäß den Einträgen in der RIPE-Datenbank für das as12389-Objekt bedeutet diese Community "Nicht im as3216-Netzwerk ankündigen": <blockquote>  ... <br>  Anmerkungen: |  12389: 835y Bei Werbung für GoldenTelecom (AS3216) | <br>  ... <br>  Anmerkungen: |  ... y = 0 - nicht werben | <br>  ... </blockquote><br>  Ebenso in Richtung MTS (http://lg.mtu.ru): <div class="spoiler">  <b class="spoiler_title">Fazit von LG MTS</b> <div class="spoiler_text">  BGP-Routing-Tabelleneintrag für 94.100.176.0/20, Version 161717219 <br>  Pfade: (2 verfügbar, beste Nr. 1, Tabellenstandard) <br>  Multipath: eBGP <br>  In Update-Gruppen beworben: <br>  6 <br>  47764, (erhalten &amp; verwendet) <br>  195.34.52.77 (Metrik 16) von 195.34.52.181 (195.34.52.181) <br>  Origin IGP, Metrik 0, localpref 140, gültig, intern, am besten <br>  Community: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Urheber: 195.34.52.77, Clusterliste: 83.59.83.59 <br>  47764, (erhalten &amp; verwendet) <br>  195.34.52.77 (Metrik 16) von 195.34.52.182 (195.34.52.182) <br>  Origin IGP, Metrik 0, localpref 140, gültig, intern <br>  Community: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Urheber: 195.34.52.77, Clusterliste: 83.59.2.77 <br></div></div><br>  Community 8359: 2120 bedeutet: <blockquote>  ... <br>  Anmerkungen: 8359: 212x bei der Ankündigung an Sovam (Beeline) <br>  ... <br>  Anmerkungen: x = 0 - nicht ankündigen <br>  ... </blockquote><br>  Sie können sich die Ankündigungen der Mail.RU Group in Richtung Megafon nicht ansehen - letztere hat keinen Spiegel. <br><br>  Sehen wir uns AS47541 (VKONTAKTE-SPB-AS) an. <br><br><div class="spoiler">  <b class="spoiler_title">Die Schlussfolgerung ist zu groß.</b> <div class="spoiler_text"><pre> <code class="perl hljs"> Router: a9922-e-<span class="hljs-number"><span class="hljs-number">5</span></span> Command: show ip bgp <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> Last switch-over Thu Apr <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:09 <span class="hljs-number"><span class="hljs-number">2018</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> year, <span class="hljs-number"><span class="hljs-number">10</span></span> weeks, <span class="hljs-number"><span class="hljs-number">6</span></span> hours, <span class="hljs-number"><span class="hljs-number">9</span></span> minutes ago Fri Jun <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span>:<span class="hljs-number"><span class="hljs-number">20.791</span></span> MSK BGP routing table entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">17</span></span> Versions: Process bRIB/RIB SendTblVer Speaker <span class="hljs-number"><span class="hljs-number">913059757</span></span> <span class="hljs-number"><span class="hljs-number">913059757</span></span> Last Modified: May <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">38.536</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>y03w Paths: (<span class="hljs-number"><span class="hljs-number">6</span></span> available, best <span class="hljs-comment"><span class="hljs-comment">#4) Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 Path #1: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.235 (metric 31) from 87.240.191.235 (87.240.191.235) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #2: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.248 (metric 31) from 87.240.191.248 (87.240.191.248) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #3: Received by speaker 0 Not advertised to any peer 174 6762 3216 3216 87.240.191.249 (metric 31) from 87.240.191.249 (87.240.191.249) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Path #4: Received by speaker 0 Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 174 6762 3216 3216 149.6.169.113 from 149.6.169.113 (38.28.1.236) Origin IGP, metric 5000, localpref 150, valid, external, best, group-best Received Path ID 0, Local Path ID 0, version 913059757 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Origin-AS validity: not-found Path #5: Received by speaker 0 Not advertised to any peer 1273 1273 3216 3216 195.89.114.197 from 195.89.114.197 (195.2.1.107) Origin IGP, metric 5005, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41110 47541:50078 Origin-AS validity: not-found Path #6: Received by speaker 0 Not advertised to any peer 3356 3356 3216 3216 3216 213.242.69.69 from 213.242.69.69 (4.69.177.130) Origin IGP, metric 5000, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 3356:2 3356:22 3356:100 3356:123 3356:503 3356:2067 47541:701 47541:41100 47541:41107 47541:50078 Origin-AS validity: not-found</span></span></code> </pre> </div></div><br>  AS-PATH zeigt auf AS174 - Cogent (Uplink Mail.RU, Tier1), dann auf AS6762 - Telecom Italia (Uplink Vimpelcom).  Lokale Präferenz überall 150, aber so weiter alle äußeren Gelenke, unabhängig von den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schriftlichen Richtlinien</a> . <br><br>  Sehen wir uns den AS47542 (VKONTAKTE-MSK-CDN-AS) an. <br><pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">0</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.222</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.251</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Und vom zweiten Router: <pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">1</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.224</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.250</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Nur Standardrouten (0.0.0.0/0).  Diese Situation wurde von einem Mitarbeiter der Mail.RU Group erklärt, für den er sich bedankt.  Kurz gesagt: Das Moskauer Segment des VKontakte-Netzwerks speichert (anstatt zu generieren), dessen Aufgabe es ist, die Download-Geschwindigkeit beliebter, nachgefragter Inhalte zu optimieren.  Fürsorge für Benutzer, ja. <br><br>  Wenn es keine Route zu einem Netzwerk gibt, wird dieses Netzwerk nicht von Caching-Servern bedient.  Die Optimierung der Download-Geschwindigkeit funktioniert also nicht und die Benutzer leiden darunter.  Aber hier ist zu betonen - Benutzer sind nicht nur ihre eigenen, sondern auch VimpelCom. <br><br>  <b>Schlussfolgerungen:</b> <br><br><ol><li>  Von Vimpelcom aus wird der Datenverkehr zur Mail.RU Group auf natürliche Weise verteilt.  Es wurden keine künstlichen Weiterleitungen durch Manipulationen mit lokalen Einstellungen erkannt </li><li>  <b>In der Mail.RU-Gruppe gibt es Manipulationen mit Vimpelcom-Präfixen</b> .  Auf bestehenden Strecken zum Vimpelcom-Netz durch russische Betreiber werden die Prioritäten im Vergleich zu Strecken durch ausländische Tier1-Betreiber unterschätzt. </li><li>  Manager der BGP-Community wurden zu den Routen hinzugefügt, die von der Mail.RU-Gruppe an russische Betreiber (MTS, Rostelecom, RETN.NET) übertragen wurden, um deren Verteilung auf Vimpelcom zu beschränken </li></ol><br>  Warum priorisiert die Mail.RU Group Routen durch Europa?  Warum verbietet die Mail.RU Group eine kurze Inlandsverbindung mit Vimpelcom? <br><br>  Ist es billiger für sie?  Verkehr über ausländische Kanäle fahren und Tirvans Geld bezahlen? <br>  Oder besteht der Wunsch, den Verkehr so ​​zu vertreiben, dass es nicht so bequem ist, ihn zu nehmen? <br>  Dies ist dem Netzwerktechniker unbekannt ... <br><br>  <b>Depyring Ergebnisse:</b> <br>  17.06.2019 BGP-Sitzungen zwischen Vimpelcom und Mail.RU Group wurden durchgeführt: <br>  AS47764 (Mail.RU): <br><img src="https://habrastorage.org/webt/8s/pl/gk/8splgktg26dnwc_4ihehoprx8-k.png" alt="Bild"><br><br>  AS47541 (Vk): <br><img src="https://habrastorage.org/getpro/habr/post_images/867/0b4/829/8670b482948ddb6df8d498e43d9dbd73.png" alt="Bild"><br><br>  AS47542 (Vk CDN): <br><img src="https://habrastorage.org/webt/vm/fc/8z/vmfc8zpjdbimpe1eox2qi7ojndi.png" alt="Bild"><br><br>  Wer das Aufheben der Sitzungen initiiert hat, ist unbekannt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456078/">https://habr.com/ru/post/de456078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456060/index.html">Überprüfen Sie die Informationen zur Unzuverlässigkeit in Auszügen aus dem Register. Kleben Sie pdf in Python</a></li>
<li><a href="../de456068/index.html">5 Fehler Anfänger führen</a></li>
<li><a href="../de456070/index.html">So locken Sie Benutzer zum Self-Service-Portal</a></li>
<li><a href="../de456072/index.html">Dav1d - standardmäßig der schnellste AV1-Decoder in Firefox</a></li>
<li><a href="../de456076/index.html">PyDaCon-Treffen bei Mail.ru Group: 22. Juni</a></li>
<li><a href="../de456082/index.html">Wie wir personalisierte Produktempfehlungen entwickeln</a></li>
<li><a href="../de456084/index.html">Kubernetes 1.15: Highlights Übersicht</a></li>
<li><a href="../de456086/index.html">iOS Storyboards: Analyse der Vor- und Nachteile, Best Practices</a></li>
<li><a href="../de456088/index.html">Probleme bei der Big Data-Analyse</a></li>
<li><a href="../de456090/index.html">Einführung in Unit Testing in Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>