<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍇 🍂 🕴🏼 JavaScript: champs de classes publics et privés 🧕🏽 🏷️ 🧒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Plusieurs suggestions étendent la syntaxe de classe existante en JavaScript avec de nouvelles fonctionnalités. Cet article explique la nouvelle syntax...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaScript: champs de classes publics et privés</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438202/"><p>  Plusieurs suggestions étendent la syntaxe de classe existante en JavaScript avec de nouvelles fonctionnalités.  Cet article explique la nouvelle syntaxe des champs de classe publique dans V8 v7.2 et Chrome 72, ainsi que les prochains champs privés. </p><br><p>  Voici un exemple de code qui instancie la classe <em>IncreasingCounter</em> : </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.value; <span class="hljs-comment"><span class="hljs-comment">// logs 'Getting the current value!' // → 0 counter.increment(); counter.value; // logs 'Getting the current value!' // → 1</span></span></code> </pre> <br><p>  Notez que l'accès à la <em>valeur</em> exécute du code (sortie d'un message dans le journal) avant de renvoyer la valeur.  Maintenant, demandez-vous: comment implémenteriez-vous cette classe en JavaScript? </p><a name="habracut"></a><br><h3 id="klassy-es2015">  Classes ES2015 </h3><br><p>  Voici un exemple de la façon dont la classe <em>IncreasingCounter</em> peut être implémentée à l'aide de la syntaxe ES2015: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count = <span class="hljs-number"><span class="hljs-number">0</span></span>; } get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count++; } }</code> </pre> <br><p>  La classe fournit une <em>valeur</em> getter et une méthode pour incrémenter une valeur dans un prototype.  Plus curieusement, la classe a un constructeur qui initie la propriété <em>_count</em> et définit sa valeur initiale à 0. Maintenant, nous utilisons le préfixe de soulignement pour indiquer que <em>_count</em> ne doit pas être utilisé directement en dehors de la classe, mais ce n'est qu'une convention;  en réalité, ce n'est pas une propriété privée, et cette sémantique n'est pas définie dans le langage lui-même. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.value; <span class="hljs-comment"><span class="hljs-comment">// logs 'Getting the current value!' // → 0 // Nothing stops people from reading or messing with the // `_count` instance property. counter._count; // → 0 counter._count = 42; counter.value; // logs 'Getting the current value!' // → 42</span></span></code> </pre> <br><h3 id="publichnye-polya-klassov">  Champs publics de classe </h3><br><p>  Une nouvelle syntaxe pour les champs publics simplifie la définition de classe: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ _count = <span class="hljs-number"><span class="hljs-number">0</span></span>; get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._count++; } }</code> </pre> <br><p>  La propriété <em>_count est</em> maintenant déclarée de manière concise au début de la classe.  Nous n'avons plus besoin d'un constructeur juste pour définir certains champs.  Super! </p><br><p>  Cependant, <em>_count</em> est toujours une propriété publique.  Et dans cet exemple spécifique, nous voulons empêcher l'accès direct à ce champ. </p><br><h3 id="privatnye-polya-klassov">  Champs de cours privés </h3><br><p>  C'est là que les champs privés viennent à la rescousse.  La nouvelle syntaxe des champs privés est similaire à la syntaxe des champs publics, sauf que <a href="">vous les marquez comme privés à l'aide du symbole <em>#</em></a> .  Vous pensez peut-être que <em>#</em> n'est qu'une partie du nom du champ: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IncreasingCounter</span></span></span><span class="hljs-class"> </span></span>{ #count = <span class="hljs-number"><span class="hljs-number">0</span></span>; get value() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Getting the current value!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#count; } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#count++; } }</code> </pre> <br><p>  Les champs privés ne sont pas disponibles en dehors du corps de classe: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IncreasingCounter(); counter.#count; <span class="hljs-comment"><span class="hljs-comment">// → SyntaxError counter.#count = 42; // → SyntaxError</span></span></code> </pre> <br><h3 id="staticheskie-svoystva">  Propriétés statiques </h3><br><p>  La syntaxe des champs de classe peut être utilisée pour créer des propriétés et des méthodes statiques publiques et privées, comme indiqué ci-dessous: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeMath</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// `PI` is a static public property. static PI = 22 / 7; // Close enough. // `#totallyRandomNumber` is a static private property. static #totallyRandomNumber = 4; // `#computeRandomNumber` is a static private method. static #computeRandomNumber() { return FakeMath.#totallyRandomNumber; } // `random` is a static public method (ES2015 syntax) // that consumes `#computeRandomNumber`. static random() { console.log('I heard you like random numbers…') return FakeMath.#computeRandomNumber(); } } FakeMath.PI; // → 3.142857142857143 FakeMath.random(); // logs 'I heard you like random numbers…' // → 4 FakeMath.#totallyRandomNumber; // → SyntaxError FakeMath.#computeRandomNumber(); // → SyntaxError</span></span></code> </pre> <br><h3 id="uproschenie-raboty-s-podklassami">  Simplifiez le travail avec les sous-classes </h3><br><p>  Les avantages de la nouvelle syntaxe de champ de classe deviennent plus apparents lorsque vous travaillez avec des sous-classes qui introduisent des champs supplémentaires.  Imaginez la classe de base <em>animale</em> suivante: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } }</code> </pre> <br><p>  Pour créer une sous-classe de <em>Cat</em> qui ajoute une nouvelle propriété à l'instance, vous deviez auparavant appeler <em>super ()</em> pour appeler le constructeur de la classe de base <em>Animal</em> avant de créer cette propriété: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(name); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.likesBaths = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } meow() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Meow!'</span></span>); } }</code> </pre> <br><p>  Il y a beaucoup de code passe-partout pour indiquer que les chats n'aiment pas vraiment prendre un bain.  Heureusement, la nouvelle syntaxe de champ de classe élimine le besoin de définir ce constructeur avec un appel maladroit à <em>super ()</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ likesBaths = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; meow() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Meow!'</span></span>); } }</code> </pre> <br><h3 id="itogo">  Total </h3><br><p>  Les champs de classe publique sont disponibles à partir de V8 v7.2 et Chrome 72. Il est prévu de publier bientôt des champs de classe privée. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438202/">https://habr.com/ru/post/fr438202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438182/index.html">L'étude a révélé les avantages du piratage modéré pour les producteurs et les distributeurs de contenu</a></li>
<li><a href="../fr438184/index.html">Rapport de la Bank of America: 700 quintillions de dollars depuis l'espace</a></li>
<li><a href="../fr438192/index.html">Dell Inspiron 14 (5482): 2-en-1 économique avec de bonnes options de mise à niveau</a></li>
<li><a href="../fr438196/index.html">Si le projet est «Théâtre», utilisez des acteurs ...</a></li>
<li><a href="../fr438198/index.html">Entrons dans l'histoire: où poussent les jambes des quadrocoptères</a></li>
<li><a href="../fr438204/index.html">Dispositif de compilateur Swift. Partie 1</a></li>
<li><a href="../fr438206/index.html">26 recommandations pour l'utilisation du type var en Java</a></li>
<li><a href="../fr438210/index.html">Civilisation des ressorts, 2/5</a></li>
<li><a href="../fr438212/index.html">Preuve de concept: comment vérifier que la mise en œuvre du ML en vaut la chandelle</a></li>
<li><a href="../fr438214/index.html">Les startups technologiques américaines feront face à de nouveaux contrôles gouvernementaux en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>