<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸšµğŸ» ğŸ› ğŸ§œ Comment le commerce Ã©lectronique survit aux promotions Ã  grande Ã©chelle. Se prÃ©parer aux pics de charge sur le Web [Partie 1] ğŸ» ğŸ¤ ğŸš¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour Ã  tous, je suis en contact avec Alexey Pristavko, directeur du projet Web DataLine. 
 Le Black Friday, le plus grand Ã©vÃ©nement de commerce Ã©le...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment le commerce Ã©lectronique survit aux promotions Ã  grande Ã©chelle. Se prÃ©parer aux pics de charge sur le Web [Partie 1]</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/418755/"><img src="https://habrastorage.org/webt/xo/km/zi/xokmzi3k5y0axobkc_okaweyr3s.png"><br><br>  Bonjour Ã  tous, je suis en contact avec Alexey Pristavko, directeur du projet Web DataLine. <br>  Le Black Friday, le plus grand Ã©vÃ©nement de commerce Ã©lectronique au monde, a lieu chaque annÃ©e dans les derniers jours de novembre.  C'est le moment des remises records, les magasins ouvrent presque Ã  minuit et les sites participant Ã  l'action chutent, malgrÃ© la forte augmentation du trafic. <br><br>  Par consÃ©quent, en utilisant son exemple, nous analyserons comment se prÃ©parer Ã  une augmentation sÃ©rieuse de la charge sur un site Web ou une application Web. <br>  Sous le chat, nous parlerons en dÃ©tail de la maniÃ¨re dont les responsables informatiques, les dÃ©veloppeurs et les administrateurs de boutiques en ligne peuvent survivre Ã  des Ã©vÃ©nements Ã  grande Ã©chelle. <br><a name="habracut"></a><br>
<h2>  Ce qui menace le Black Friday </h2><br>  Comme je l'ai Ã©crit ci-dessus, le Black Friday est une journÃ©e qui cause beaucoup de problÃ¨mes Ã  tous ceux qui sont impliquÃ©s dans la maintenance des sites de commerce Ã©lectronique. <br><br>  Pour le ressentir, considÃ©rez le tableau ci-dessous.  Il reflÃ¨te l'augmentation du nombre de demandes sur le site lors du Black Friday. <br><br><img src="https://habrastorage.org/webt/ro/hz/3h/rohz3h6wrf481mhayxaie3jm0ia.png"><br><br>  Par rapport aux pics quotidiens normaux, lorsqu'aucune action n'est dÃ©tenue, le trafic du Black Friday augmente de 100 Ã  200%, et ce n'est pas la limite. <br><br>  Si un grand site a dÃ©jÃ  beaucoup de trafic, une modeste boutique en ligne pendant la pÃ©riode de la campagne recevra facilement autant de visiteurs et s'Ã©touffera.  Pour paraphraser un peu la vieille blague: Â«les affaires ont rendu tous les magasins diffÃ©rents, et le Black Friday en ligne a Ã©galisÃ© tout le monde.Â» <br><br>  GagnÃ© le Black Friday Â«nourritÂ» le vendeur toute l'annÃ©e prochaine.  L'entreprise est extrÃªmement intÃ©ressÃ©e Ã  attirer le nombre maximum de nouveaux clients qui reviendront sur le site pour acheter encore et encore.  Mais pour cela, leur premiÃ¨re expÃ©rience avec le site doit se dÃ©rouler sans encombre, et pour s'assurer que c'est la tÃ¢che des informaticiens. <br><br>  Plus il y a de clients simultanÃ©ment sur le site, plus les exigences de stabilitÃ© et de vitesse de rÃ©ponse sont Ã©levÃ©es.  Vous avez sÃ»rement remarquÃ© que le site Web du magasin, vers lequel vous Ãªtes passÃ© de la page de destination de blackfridaysales, fonctionnait extrÃªmement lentement ou ne fonctionnait pas du tout.  Je doute que vous soyez restÃ© en attente du tÃ©lÃ©chargement, mais que vous n'Ãªtes pas reparti aprÃ¨s quelques secondes. <br><br>  Nous expliquerons ci-dessous comment protÃ©ger les clients contre les expÃ©riences nÃ©gatives et le site contre les plantages dus Ã  une surcharge.  Cependant, d'autres conseils sont valables pour toute charge de pointe attendue. <br><br>  En gÃ©nÃ©ral, il y a deux Ã©tapes de prÃ©paration d'un site pour une circulation accrue: <b>technique</b> et <b>organisationnelle.</b>  Dans cet article, nous discuterons de la phase technique, et je dÃ©crirai les dÃ©tails organisationnels en dÃ©tail dans la deuxiÃ¨me partie, qui sera publiÃ©e dans une semaine. <br><br><h2>  PrÃ©paration technique du site </h2><br><img src="https://habrastorage.org/webt/bs/7p/o3/bs7po31te56sxn9utnni3txekqm.png"><br><br>  <i><b>Un petit avertissement:</b> ne vous attendez pas Ã  trouver ici des instructions dÃ©taillÃ©es sur quoi, oÃ¹ et comment le resserrer pour que Â«le bonheur pour tous vienne en vain, et que personne ne soit offensÃ©Â».</i>  <i>Tout d'abord, les sites et les projets sont diffÃ©rents pour chacun.</i>  <i>DeuxiÃ¨mement, des conseils techniques spÃ©cifiques sur un logiciel particulier sont plus que suffisants.</i>  <i>Y compris sur HabrÃ©.</i>  <i>Tout d'abord, je veux transmettre aux lecteurs les principes fondamentaux du travail avec des projets Web et montrer les points de dÃ©part, introduire des techniques de base et des nuances indÃ©pendantes de la plate-forme.</i> <br><br>  CommenÃ§ons par l'axiome: l'utilisateur n'aime pas attendre, il est donc extrÃªmement important de travailler avec les timings et la vitesse de rÃ©ponse.  Le Black Friday, il y aura beaucoup plus de demandes sur le site que d'habitude, et vous pouvez rencontrer non seulement une baisse des conversions en raison d'une longue charge, mais Ã©galement un excÃ¨s de dÃ©lais d'attente HTTP (le site ne rÃ©pond pas). <br><br>  Le plus souvent, les sites subissent une charge non pas en raison de pannes physiques, mais parce que le temps de rÃ©ponse a commencÃ© Ã  dÃ©passer les dÃ©lais d'attente en raison d'une surcharge sur un nÅ“ud.  Cela ressemble Ã  un embouteillage et pendant un certain temps, vous devrez prendre le contrÃ´le de vos propres mains: Ã©tendre (mettre Ã  l'Ã©chelle) l'Ã©quipement, ajuster, couper et configurer (dÃ©lais), optimiser la charge sur les vÃ©hicules (colis et demandes) et travailler avec des exceptions. <br><br>  Ã‰tant donnÃ© que dans le contexte de la performance du site a deux aspects - la vitesse de rÃ©ponse et le nombre de demandes traitÃ©es simultanÃ©ment, nous allons amÃ©liorer ces paramÃ¨tres. <br><blockquote>  Le plus souvent, une entreprise reprÃ©sente la vitesse de rÃ©ponse comme la vitesse du site selon Google Analytics, et le nombre de demandes simultanÃ©es comme le nombre d'utilisateurs simultanÃ©ment sur le site. <br><br>  Dans les travaux techniques, il n'est pas trÃ¨s pratique d'opÃ©rer avec ces paramÃ¨tres. <br>  Ensuite, je proposerai une mÃ©trique plus appropriÃ©e pour les calculs. </blockquote><h3>  Nous optimisons la vitesse de rÃ©ponse </h3><br><img src="https://habrastorage.org/webt/j4/do/3l/j4do3lxf6g5ycfmttgtobr16wfq.png"><br><br>  Lors de l'optimisation de la vitesse de rÃ©ponse, nous nous intÃ©ressons Ã  deux indicateurs: la <b>vitesse de rÃ©ponse du serveur</b> et <b>le temps de chargement des pages.</b> <br><br>  Le temps de chargement de la page comprend les liens suivants: <br><br><ul><li>  Temps de gÃ©nÃ©ration de page du serveur; </li><li>  Temps de transfert de page du serveur au client; </li><li>  Le temps de traitement des pages dans le navigateur du client. </li></ul><br>  Lorsque tout fonctionne comme d'habitude, le facteur dÃ©cisif pour le temps de chargement de la page n'est pas l'heure Ã  laquelle la page a Ã©tÃ© gÃ©nÃ©rÃ©e par le serveur et l'heure Ã  laquelle la page a Ã©tÃ© livrÃ©e sur le rÃ©seau, mais la qualitÃ© de l'interface et la vitesse du site dans le navigateur.  Comme ce dernier est entiÃ¨rement du cÃ´tÃ© de l'utilisateur, vous ne pouvez pas avoir peur des freins du Black Friday.  Cependant, des problÃ¨mes peuvent survenir en raison de surcharges sur votre canal Internet ou de la livraison d'un composant externe (compteurs affiliÃ©s, chats en ligne, plugins CRM, etc.). <br>  Comment y faire face?  Voici quelques conseils pratiques: <br><br><ol><li>  VÃ©rifiez la charge du canal Internet.  Comptez la croissance estimÃ©e.  En cas de doute, agrandissez le canal.  Certains fournisseurs, en plus des extensions coÃ»teuses sur une base continue, peuvent vous offrir une extension temporaire pour la pÃ©riode de pointe (beaucoup moins cher) ou mÃªme vous permettre de dÃ©passer briÃ¨vement la vitesse maximale. </li><li>  Vous utilisez un CDN?  Contactez le support technique et avertissez de la croissance prÃ©vue du trafic.  Ils se prÃ©parent Ã©galement pour le pic gÃ©nÃ©ral, et vos prÃ©visions vous seront utiles.  Si le CDN promet que tout ira bien, mais, malgrÃ© tout, Â«se coucheraÂ», la prÃ©sence de correspondance contribuera Ã  faire valoir des demandes d'indemnisation. </li><li>  Ã€ l'avance, Ã©laborez un script pour dÃ©sactiver temporairement les composants externes en cas de problÃ¨me.  Alignez le scÃ©nario avec l'entreprise.  Il ne sera pas superflu de communiquer avec le support technique des services utilisÃ©s, de toute faÃ§on il est gÃ©nÃ©ralement impossible de les influencer d'une maniÃ¨re ou d'une autre. </li><li>  Sur de nombreux sites, la statique est rendue Ã  l'aide du serveur d'applications.  Sous une charge Ã©levÃ©e, le nombre de demandes Ã  la statique augmente plusieurs fois et elles commencent Ã  rivaliser pour les ressources avec l'application elle-mÃªme.  Assurez-vous de configurer le retour statique directement depuis Nginx.  PremiÃ¨rement, cela fonctionnera beaucoup mieux avec cela, et deuxiÃ¨mement, il y aura un travail beaucoup plus utile pour vos threads Apache, Tomcat ou Jetty. </li></ol><br><h3>  AmÃ©lioration de la vitesse de rÃ©ponse </h3><br><img src="https://habrastorage.org/webt/fg/s3/tf/fgs3tfdn9y_uw4e0i2bqg5lhzlc.png"><br><br>  L'optimisation de la vitesse de rÃ©ponse en soi fait rÃ©fÃ©rence Ã  l'amÃ©lioration globale des performances du site.  En thÃ©orie, cela permet de rÃ©duire la quantitÃ© de travail effectuÃ©e par l'application et, de ce fait, amÃ©liore la mise Ã  l'Ã©chelle - car si chaque demande devient Â«moins chÃ¨reÂ», vous pouvez traiter plus de demandes avec les mÃªmes ressources. <br><br>  Mais en pratique, l'optimisation de la vitesse de rÃ©ponse nÃ©cessite une grande quantitÃ© de travail indÃ©pendant.  Il est impossible d'optimiser tout Ã  la fois, mais casser quelque chose dans le processus est facile. <br><blockquote>  Astuce: pensez systÃ©matiquement.  Disons que les performances du code ont augmentÃ© et que l'application a commencÃ© Ã  effectuer davantage de requÃªtes de base de donnÃ©es simultanÃ©ment.  Mais voici le problÃ¨me: les performances de la base de donnÃ©es ne permettent pas de traiter un tel nombre de demandes, et le site dans son ensemble n'a fait qu'empirer, et un temps prÃ©cieux a Ã©tÃ© consacrÃ© avant le dÃ©but de l'action. </blockquote>  Il est donc prÃ©fÃ©rable de se concentrer sur la mise Ã  l'Ã©chelle et l'Ã©volutivitÃ©, et d'effectuer une optimisation gÃ©nÃ©rale sÃ©parÃ©ment de la prÃ©paration du Black Friday, afin de ne pas gÃ¢cher en raison de dÃ©lais serrÃ©s.  Rappelez-vous, maintenant notre tÃ¢che est de nous assurer qu'au plus fort des charges, le site ne fonctionne pas pire qu'Ã  l'extÃ©rieur. <br><br>  La vitesse de gÃ©nÃ©ration de page ne nous intÃ©ressera qu'en conjonction avec un autre indicateur - la quantitÃ© de charge entrante. <br><br>  <b>Attention:</b> pour le site, seul le nombre de demandes simultanÃ©es crÃ©Ã©es par les utilisateurs est important, et non le nombre d'utilisateurs en ligne sur le site.  Et pour calculer avec une prÃ©cision acceptable le <b>nombre de demandes par seconde</b> par le <b>nombre de visiteurs est</b> assez difficile (j'ai Ã©crit Ã  ce sujet ci-dessus).  Il est prÃ©fÃ©rable de demander Ã  l'entreprise d'autres statistiques: pages vues par heure et temps du serveur. <br><br>  En consÃ©quence, nous obtenons un objectif comprÃ©hensible: garantir la gÃ©nÃ©ration de pages pour le temps X avec le nombre de demandes par seconde Y. Avec des mesures numÃ©riques spÃ©cifiques en main, il est beaucoup plus facile d'Ã©valuer le niveau de prÃ©paration et le rÃ©sultat actuel. <br><br>  Voici un plan gÃ©nÃ©ral de formation technique: <br><br><ol><li>  ConnaÃ®tre les indicateurs actuels (effectuer des tests de charge de la version actuelle du site); </li><li>  Pour comprendre ce qui manque exactement et combien de ressources sont nÃ©cessaires pour commander; </li><li>  Ajouter des ressources; </li><li>  RÃ©pÃ©tez les tests de rÃ©sistance et voyez si cela aide. </li></ol><br>  Ã‡a a l'air trop facile?  Vous avez raison, chaque point est semÃ© d'embÃ»ches. <br><br>  TrÃ¨s souvent, l'ajout de ressources amÃ©liore partiellement la situation, mais ne sauve pas le tout.  Ou dans un environnement de test, le site fonctionne comme une horloge, et sur la prod - encore une fois les freins. <br><br>  Ensuite, je vais vous montrer comment identifier les problÃ¨mes potentiels et corriger les faiblesses.  CommenÃ§ons par comment effectuer des tests de rÃ©sistance et obtenir un rÃ©sultat rÃ©aliste. <br><br><h3>  Nous effectuons correctement les tests de charge </h3><br><img src="https://habrastorage.org/webt/t9/mf/fe/t9mffe4gx1ujdnadqnyvplep6sa.png"><br><br><h4>  OÃ¹ tester? </h4><br>  Souvent, les tests de rÃ©sistance sont effectuÃ©s sur un systÃ¨me productif.  Cela peut Ãªtre utile pour contrÃ´ler la situation dans son ensemble, mais pas pour rÃ©soudre de maniÃ¨re itÃ©rative des problÃ¨mes spÃ©cifiques.  N'oubliez pas, gÃ©nÃ©ralement aprÃ¨s de nouveaux problÃ¨mes dÃ©couverts aprÃ¨s l'Ã©limination, de nouveaux peuvent apparaÃ®tre.  Les balles d'argent atteignent rarement la cible. <br><br>  Un Ã©chec du test de charge peut gÃªner les utilisateurs du site ou mÃªme le Â«casserÂ» pendant un certain temps.  Il est prÃ©fÃ©rable d'utiliser une zone dÃ©diÃ©e comme lapin expÃ©rimental. <br><br>  Il doit rÃ©pondre aux exigences suivantes: <br><br><ul><li>  La zone dÃ©diÃ©e doit Ãªtre complÃ¨tement indÃ©pendante et isolÃ©e du productif; <br></li><li>  IdÃ©alement, une zone dÃ©diÃ©e doit correspondre Ã  la taille du produit.  Un modÃ¨le Ã  grande Ã©chelle convient Ã©galement, mais il rÃ©duira la qualitÃ© et l'importance des tests.  Si la charge sur une ressource croÃ®t de faÃ§on non linÃ©aire (comme cela arrive gÃ©nÃ©ralement), votre modÃ¨le ne montrera pas qu'en pleine charge, la ressource est Ã©puisÃ©e Ã  l'avance; <br></li><li>  Il est prÃ©fÃ©rable d'utiliser exactement le mÃªme (mais pas le mÃªme!) Ã‰quipement pour les tests comme sur prod.  Sinon, mÃªme si les valeurs quantitatives des ressources sont respectÃ©es, il ne sera pas possible de fournir de la qualitÃ©.  Il peut jouer une blague cruelle au moment crucial.  Si cela n'est pas possible, testez les performances de l'Ã©quipement sous votre charge et dÃ©terminez le coefficient de rÃ©glage. <br></li></ul><br>  Parlons maintenant des moyens de gÃ©nÃ©rer une charge de test.  Je vais vous donner quelques techniques de base, chacune ayant ses avantages et ses inconvÃ©nients. <br><br><h4>  Comment gÃ©nÃ©rer une charge? </h4><br>  <b>1. Test des demandes des journaux</b> <br><br>  Il est possible d'Ã©muler le flux de trafic via les journaux du serveur de combat.  Un avantage Ã©vident de cette approche est que vous n'avez pas Ã  vous soucier de l'analyse, de la modÃ©lisation statistique et d'un profil de trafic synthÃ©tique. <br><br>  Mais vous devez toujours nettoyer les journaux des demandes qui ne peuvent pas Ãªtre effectuÃ©es ou qui ne sont pas nÃ©cessaires. <br>  Par exemple, vous n'avez pas besoin Â«d'acheterÂ» des biens sur le site de production, cela entraÃ®nera des problÃ¨mes avec le contenu du produit de la base de donnÃ©es. <br><br>  Il sera difficile de reproduire des dÃ©lais rÃ©alistes entre les demandes. <br>  L'Ã©mulation de sessions utilisateur est Ã©galement extrÃªmement difficile, cette mÃ©thode est trÃ¨s proche des tests basÃ©s sur les rÃ©sultats. <br><br>  <b>2. Utilisation de Yandex.Tank et Phantom</b> <br><br>  Le rÃ©servoir en conjonction avec Phantom est un outil trÃ¨s pratique et populaire pour les tests basÃ©s sur les coups.  Il a une interface rÃ©flÃ©chie et vous permet de gÃ©rer la charge.  Pour commencer Ã  dÃ©cortiquer Ã  partir d'un rÃ©servoir, vous devez prÃ©parer des Â«cartouchesÂ» - des fichiers spÃ©ciaux contenant des demandes pour un gÃ©nÃ©rateur. <br><br>  Mais, malgrÃ© toute la commoditÃ©, le Tank a un inconvÃ©nient majeur: il ne sait pas utiliser les sessions utilisateurs. <br><br>  Vous pouvez oublier l'autorisation, le travail complet avec les cookies et les dÃ©lais variables.  Un rÃ©servoir ne peut Â«picorerÂ» les demandes qu'Ã  partir d'une seule adresse. <br><br>  Il vous conviendra si: <br><br><ul><li>  Il n'y a aucune diffÃ©rence dans le temps de rÃ©ponse du serveur pour les utilisateurs autorisÃ©s et non autorisÃ©s, ou il est nÃ©gligeable; </li><li>  Test de l'API sans sessions HTTP explicitement; </li><li>  Cette approche est gÃ©nÃ©ralement cohÃ©rente avec la logique de votre site (gÃ©nÃ©ralement pas adaptÃ©e aux boutiques en ligne). </li></ul><br><img src="https://habrastorage.org/webt/c4/nh/em/c4nhemg4hescy14wza4hbwsfmfg.png"><br><br>  <b>3. Utilisation d'Apache JMeter</b> <br><br>  Il s'agit de l'outil le plus flexible qui vous permet d'Ã©muler des sessions utilisateur en dÃ©tail.  Ainsi, avec son aide, vous pouvez toujours rÃ©pondre Ã  la question de l'entreprise "combien d'utilisateurs le site peut-il supporter?"  De plus, JMeter peut fonctionner en tandem avec Yandex.Tank. <br>  Son principal inconvÃ©nient est la consommation de ressources et la complexitÃ© de la prÃ©paration des tests. <br><br>  Le principal conseil directement sur JMeter: essayez d'Ã©viter d'analyser les corps de page avec ses forces, il est prÃ©fÃ©rable d'utiliser des jeux de donnÃ©es prÃ©-prÃ©parÃ©s pour reproduire la logique de session.  En principe, il est prÃ©fÃ©rable de minimiser le travail effectuÃ© par JMeter en gÃ©nÃ©ral.  Comme Tank, il est possible d'y attacher des "cartouches" prÃ©-gÃ©nÃ©rÃ©es.  C'est lÃ  qu'ils doivent prendre en compte la distribution de pages spÃ©cifiques au sein d'un mÃªme type, la variabilitÃ© des demandes et tout ce jazz. <br><br>  Dans JMeter lui-mÃªme, les modÃ¨les de comportement des utilisateurs doivent Ãªtre programmÃ©s.  Si la tÃ¢che consiste Ã  tester non seulement la partie serveur, mais Ã©galement le retour du contenu statique, exÃ©cutez ce test sÃ©parÃ©ment Ã  l'aide de Phantom, si nÃ©cessaire simultanÃ©ment avec le test JMeter.  Cela contribuera Ã  rÃ©duire considÃ©rablement la consommation de ressources du gÃ©nÃ©rateur de charge et Ã  augmenter la reproductibilitÃ© du test. <br><br>  <b>Recommandations en matiÃ¨re de tests de rÃ©sistance</b> <br><br>  Un bon test de charge est basÃ© sur une analyse de trafic compÃ©tente et la prÃ©paration de haute qualitÃ© d'un modÃ¨le statistique et de profils d'Ã©mulation. <br><br>  Mettez en surbrillance 5-7 principaux types de pages (n'oubliez pas Ã©galement les pages de destination pour les stocks), calculez le pourcentage du trafic total rÃ©parti entre eux.  N'oubliez pas qu'il peut y avoir plusieurs demandes de contenu dynamique par page.  Pour vous, la page est l'ensemble du groupe de ces demandes.  Analysez le temps que les utilisateurs passent sur chaque type de page: moyenne, minimum moyen, maximum moyen. <br><br>  Si la page est construite sur plusieurs requÃªtes, tenez compte du dÃ©lai entre elles.  Voyez combien de pages un utilisateur visite habituellement par session, quelle est la distribution de ce nombre.  Mettez en surbrillance 5 Ã  10 des chemins utilisateur les plus courants par type de page. <br><br>  En utilisant les donnÃ©es obtenues, construisez les scÃ©narios de maniÃ¨re Ã  reproduire tous les paramÃ¨tres statistiques dÃ©crits avec une extrÃªme prÃ©cision.  N'oubliez pas la variabilitÃ© des scÃ©narios, ils doivent varier Ã  la fois en nombre et en composition de clics. <br><br>  Dans chaque type de page, mettez en surbrillance des adresses individuelles.  Le plus, le mieux, mais quelques milliers des adresses les plus populaires seront dÃ©jÃ  sous les yeux.  Vous pouvez en prÃ©parer des listes de requÃªtes en ajoutant chaque adresse Ã  la liste autant de fois que nÃ©cessaire. <br><br>  S'il y a trop de pages, divisez-les en plusieurs groupes en fonction du pourcentage de trafic. <br><br>  Les profils ne jouent un rÃ´le que pour JMeter, mais en crÃ©ant des listes de requÃªtes, vous pouvez Ã©quiper des cartouches "tank". <br><blockquote>  Et encore: lorsque vous utilisez JMeter en mode d'Ã©mulation utilisateur, n'oubliez pas les dÃ©lais entre les requÃªtes.  Si vous ne les ajoutez pas, votre charge gÃ©nÃ©rÃ©e sera beaucoup plus Ã©levÃ©e que prÃ©vu! </blockquote>  AprÃ¨s un essai, assurez-vous de vÃ©rifier les journaux du serveur Web pour voir si le trafic Ã©mulÃ© est productif. <br><br>  La voltige prÃ©parera les scripts Ã  l'avance pour amener la base de donnÃ©es du site Ã  l'Ã©tat dont vous avez besoin.  Habituellement, les donnÃ©es prÃ©parÃ©es de la maniÃ¨re dÃ©crite ci-dessus ne fonctionnent qu'avec l'Ã©tat de la base de donnÃ©es pour laquelle des informations sur les marchandises ont Ã©tÃ© collectÃ©es.  Il peut Ãªtre extrÃªmement long de recharger le vidage SQL Ã  chaque fois.  De plus, il est trÃ¨s souhaitable d'apprendre Ã  gÃ©rer les stocks en cours Ã  l'aide de scripts dans la zone de test.  Souvent, ils sont importants pour le fonctionnement du systÃ¨me, et vous devez comprendre <b>avec quel ensemble</b> et <b>comment exactement</b> les stocks de travail sont testÃ©s. <br><br>  Tout est-il prÃªt?  Super, allez-y! <br><br><h3>  Nous utilisons la surveillance dans les tests </h3><br><img src="https://habrastorage.org/webt/tg/f0/3c/tgf03cquqgwujw_gyjflqij1s5c.png"><br><br>  Nous avons donc effectuÃ© des tests compÃ©tents et obtenu les rÃ©sultats.  Si tout va bien et que votre site fait face Ã  une charge Ã©levÃ©e, aucun Black Friday ne vous fait peur.  Mais cet article serait incomplet si l'on ne considÃ©rait pas un <s>triste</s> scÃ©nario rÃ©aliste. <br><br>  Imaginez qu'un site puisse rÃ©sister Ã  une vitesse acceptable ... enfin, mÃªme si seulement un cinquiÃ¨me de ce que l'entreprise souhaite obtenir.  Est-il vraiment nÃ©cessaire d'appeler l'hÃ©bergeur dans la panique et de commander cinq fois plus de capacitÃ©? <br><br>  En principe, l'hÃ´te apprÃ©ciera cette approche.  Vous pourriez mÃªme obtenir le statut de client d'or. <br><br>  Mais avant d'agir prÃ©cipitamment, essayons de comprendre ce qui s'est exactement passÃ©. <br><br>  Votre bouÃ©e de sauvetage en mer de causes possibles est un systÃ¨me de surveillance. <br><br><img src="https://habrastorage.org/webt/sp/kt/og/spktoglx5xwtzcea9x6itlmzcfs.png"><br><br>  Par consÃ©quent, nous prenons du recul et installons autant d'Ã©chantillons que possible avant de tester.  IdÃ©alement, toutes les ressources Ã©puisables devraient Ãªtre surveillÃ©es. <br><br>  Voici une liste pour vous aider Ã  dÃ©marrer: <br><br><ul><li>  Charge CPU (utilisation CPU, charge CPU); </li><li>  Chargement RAM; </li><li>  Chargement de disque (IOPS, latence); </li><li>  Nombre de connexions rÃ©seau (attente de temps, attente de fin, attente de fermeture, Ã©tablie); </li><li>  Le nombre de prises ouvertes; </li><li>  Le nombre de processus utilisateur; </li><li>  Le nombre de fichiers ouverts; </li><li>  Trafic rÃ©seau (en mÃ©gabits et en paquets, plus erreurs et baisses). </li></ul><br>  Et aussi: <br><br><ul><li>  Le nombre de requÃªtes, de rÃ©ponses et de connexions Ã  la base de donnÃ©es et aux autres composants; </li><li>  Vitesse de rÃ©ponse des composants (base de donnÃ©es, serveur de recherche, caches, etc.); </li><li>  Tous les journaux disponibles pour les erreurs. </li></ul><br>  Pour tous ces paramÃ¨tres, vous devez connaÃ®tre les limites disponibles.  Cela nous permettra de comprendre exactement oÃ¹ le Â«goulot d'Ã©tranglementÂ» s'est formÃ© lors des tests de rÃ©sistance.  N'oubliez pas que la plupart de ces Â«ressourcesÂ» sont configurables, certaines sont gÃ©nÃ©ralement gÃ©rÃ©es par des paramÃ¨tres. <br><br>  Peut-Ãªtre quelques modifications mineures seront suffisantes et les performances s'amÃ©lioreront. <br><br>  Quelque part, des changements non quantitatifs mais qualitatifs seront nÃ©cessaires: par exemple, remplacer un disque dur par un SSD.  Quelques conseils sur l'optimisation et la mise Ã  l'Ã©chelle des applications Web, ainsi que l'amÃ©lioration de la tolÃ©rance aux pannes, peuvent Ãªtre trouvÃ©s dans mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> prÃ©cÃ©dent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.</a> <br><br>          <b> </b>      <b>.</b>       . <br><br> <b>  :</b> ,  ,      ?     ,    , ,  2-         ,  - (,  0,5 )      1,5    .              - Â«,   Â». <br><br>          1 ,   .        ,    . ,              .   ,     (      )    ,   . <br><br><h3>   </h3><br>  ,    ,   ,   . <br><br>     Â«Â» ,     .    2-3 ,      ,    . <br><br>     , :        .     ,     . , , ,      ,   . <br><br>           .          .  ,   SLA, ,  ,  ,      ,      Â«Â» . <br><br>       .        ,     .      . <br><br>     ,  ,           .       ,      ,        . <br><br>       ,    . <br> -,       (   ),  -,      .            . <br><br> ,   .       -    ,            . <br><br>     ,       ,   ,    Â«   e-commerce.  Â»,   16   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418755/">https://habr.com/ru/post/fr418755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418741/index.html">Ajoutez le chiffrement et passez au SIP standard</a></li>
<li><a href="../fr418743/index.html">PremiÃ¨re place au ML Boot Camp VI</a></li>
<li><a href="../fr418747/index.html">RÃ©solution de problÃ¨mes: comment rÃ©soudre efficacement les problÃ¨mes en Ã©quipe?</a></li>
<li><a href="../fr418751/index.html">Dex impudent espion chinois</a></li>
<li><a href="../fr418753/index.html">vSAN dans le cloud VMware</a></li>
<li><a href="../fr418757/index.html">DÃ©lais d'Ã©claircissement (crypto-monnaies, forex, Ã©changes)</a></li>
<li><a href="../fr418759/index.html">Combien coÃ»te un Ã©tudiant pour Ã©mettre une puce?</a></li>
<li><a href="../fr418761/index.html">Le livre Â«Pure Python. Les subtilitÃ©s de la programmation pour les pros Â»</a></li>
<li><a href="../fr418763/index.html">Moyen / senior: comment sortir du marais?</a></li>
<li><a href="../fr418765/index.html">Les conseils Dadata aident Ã  remplir tout formulaire de saisie. Maintenant guÃ©ris</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>