<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ¥Ô∏è üë®üèø‚Äçüåæ üôçüèª Interplanetares Dateisystem - trivialer Hash (Identit√§t), DAG-Block und Protokollpuffer üê≤ üë± ‚úäüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="K√ºrzlich hat IPFS die Unterst√ºtzung f√ºr einen trivialen (Identit√§ts-) Hash hinzugef√ºgt. In meinem Artikel werde ich dar√ºber sprechen und zeigen, wie e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Interplanetares Dateisystem - trivialer Hash (Identit√§t), DAG-Block und Protokollpuffer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423073/"><p>  K√ºrzlich hat IPFS die Unterst√ºtzung f√ºr einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">trivialen (Identit√§ts-) Hash</a> hinzugef√ºgt.  In meinem Artikel werde ich dar√ºber sprechen und zeigen, wie es verwendet werden kann. </p><br><blockquote>  Ich m√∂chte Sie daran erinnern: InterPlanetary File System ist ein neues dezentrales Filesharing-Netzwerk (HTTP-Server, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Content Delivery Network</a> ).  Ich habe die Geschichte dar√ºber im Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Interplanetary File System IPFS" begonnen</a> . </blockquote><p>  Wenn Hashing eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hash-Funktion</a> durchl√§uft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, werden die</a> Daten normalerweise irreversibel "komprimiert", und als Ergebnis wird eine kurze Kennung erhalten.  Mit dieser Kennung k√∂nnen Sie Daten im Netzwerk finden und deren Integrit√§t √ºberpr√ºfen. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein trivialer Hash</a> sind die Daten selbst.  Die Daten √§ndern sich in keiner Weise und dementsprechend entspricht die Gr√∂√üe des "Hash" der Gr√∂√üe der Daten. </p><br><p> Ein trivialer Hash hat dieselbe Funktion wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Data: URL</a> .  Die Inhaltskennung enth√§lt in diesem Fall die Daten selbst anstelle eines Hashs.  Auf diese Weise k√∂nnen Sie untergeordnete Bl√∂cke im √ºbergeordneten Element verschachteln und diese sofort nach Erhalt des √ºbergeordneten Elements verf√ºgbar machen.  Sie k√∂nnen Standortdaten auch direkt in den DNS-Eintrag aufnehmen. </p><br><p>  Codieren Sie beispielsweise die Textzeichenfolge "Hello World" in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kennung des Inhalts</a> (CID) mit einem trivialen Hash. <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/fd3/316/1e3/fd33161e38ad164adb32a3e384cd2f5d.svg" alt="Bild"></a> </p><a name="habracut"></a><br><p>  <u>ID-Struktur:</u> </p><br><pre><code class="hljs markdown">[<span class="hljs-string"><span class="hljs-string"> </span></span>][<span class="hljs-symbol"><span class="hljs-symbol">varint  CID</span></span>][<span class="hljs-string"><span class="hljs-string">varint  </span></span>][<span class="hljs-symbol"><span class="hljs-symbol">varint ID </span></span>][<span class="hljs-string"><span class="hljs-string">varint  </span></span>][<span class="hljs-symbol"><span class="hljs-symbol"></span></span>]</code> </pre> <br><p>  Beginnen wir am Ende. </p><br><h3 id="hesh">  [Hash] </h3><br><p>  Der triviale Hash in unserem Fall ist der String selbst.  Lassen Sie es uns in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HEX √ºbersetzen</a> . </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">" "</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Dies ist der HEX dieser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">utf-8-</a> codierten Zeichenfolge.  Damit der Browser jedoch sicher wei√ü, dass es sich um eine utf-8-Zeile handelt, f√ºgen Sie sie am Anfang hinzu: <code>0xEFBBBF</code> .  Dies ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Byte Sequence Marker</a> (BOM). </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-dlinna-hesha">  [Varint Hash L√§nge] </h3><br><p>  Jetzt k√∂nnen wir die L√§nge des "Hash" berechnen.  Alle zwei HEX-Zeichen sind ein Byte.  Dementsprechend ist die resultierende Zeichenfolge 22 Byte lang.  In HEX ist es <code>0x16</code> . </p><br><p>  F√ºgen Sie <code>0x16</code> am Zeilenanfang hinzu. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-id-hesha">  [varint hash id] </h3><br><p>  Jetzt brauchen wir die Hash-ID.  Der triviale Hash oder die Identit√§t in <a href="">der Hash-Tabelle</a> hat den Bezeichner <code>0x00</code> . </p><br><p>  F√ºgen Sie <code>0x00</code> am Zeilenanfang hinzu. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Dies ist bereits ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Multi-Hash-</a> Teil der Kennung. Sie k√∂nnen HEX in Base58 umcodieren und der Multi-Hash ist bereit.  Ipfs erkennt es jedoch nicht au√üerhalb der Inhaltskennung (CID). </p><br><p>  Lass uns weitermachen. </p><br><h3 id="varint-tip-kontenta">  [varint Inhaltstyp] </h3><br><p>  Schauen Sie sich nun die <a href="">Multicodec-</a> Tabelle an, um den Inhaltstyp zu erhalten.  In unserem Fall handelt es sich um Rohdaten, und der Bezeichner ist <code>0x55</code> . </p><br><p>  F√ºgen Sie <code>0x55</code> am Zeilenanfang hinzu. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><h3 id="varint-versiya-cid">  [Varint-Version von CID] </h3><br><p>  Wir codieren das Format der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Version der Inhaltskennung</a> .  F√ºgen Sie daher 0x01 hinzu. </p><br><p>  F√ºgen Sie am <code>0x01</code> hinzu. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span></code> </pre> <br><p>  Und so sind wir schon am Ziel. </p><br><h3 id="prefiks-osnovaniya">  [Basispr√§fix] </h3><br><p>  Es gibt an, welche Option zum Codieren von Bin√§rdaten in Text verwendet wird. </p><br><h4 id="hex-f">  HEX (F) </h4><br><p>  Wir k√∂nnen den HEX-Begriff direkt verwenden, indem wir das "F" -Symbol am Anfang des HEX-Basispr√§fixes hinzuf√ºgen </p><br><pre> <code class="hljs">F01550016EFBBBFD09FD180D0B8D0B2D0B5D18220D0BCD0B8D180</code> </pre> <br><p>  Wir haben eine HEX-Kennung f√ºr den Inhalt, der die Zeile utf-8 enth√§lt: "Hallo Welt" </p><br><p>  Testen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/ ipfs / F01550016EFBBBFD09FD180D0B8D0B2D0B5D18220D0BCD0B8D180</a> </p><br><h4 id="base58btc-z">  Base58btc (z) </h4><br><p>  Base58btc wird daher k√ºrzer sein </p><br><p>  Wir √ºbersetzen unseren HEX-String in base58btc.  Sie k√∂nnen den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Online-Konverter verwenden</a> . </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 55 00 16 EFBBBF D09F D180 D0B8 D0B2 D0B5 D182 20 D0BC D0B8 D180"</span></span> = <span class="hljs-string"><span class="hljs-string">"3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P"</span></span> (<span class="hljs-name"><span class="hljs-name">base58btc</span></span>)</code> </pre> <br><p>  F√ºgen Sie das Basispr√§fixzeichen base58btc "z" am Zeilenanfang hinzu </p><br><pre> <code class="hljs">z3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P</code> </pre> <br><p>  Wir haben base58btc eine Inhaltskennung, die eine utf-8-Zeile enth√§lt: "Hallo Welt" </p><br><p>  Testen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/ ipfs / z3NDGAEgXCxbPucFFCQc9s5ScqZjqVFNr56P</a> </p><br><h3 id="dag-blok">  DAG-Block </h3><br><p>  Der Text ist gut, aber um eine HTML-Seite zu codieren, m√ºssen wir ihre Daten in den DAG-Verzeichnisblock einbetten. </p><br><p>  Hier ist unser HTML: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">u</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">u</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In √§hnlicher Weise erhalten wir gem√§√ü den obigen Anweisungen die Inhaltskennung in base58btc f√ºr diesen Text: </p><br><pre> <code class="hljs">zeExnPvBXdTRwCBhfkJ1fHFDaXpdW4ghvQjfaCRHYxtQnd3H4w1MPbLczSqyCqVo</code> </pre> <br><p>  Schreiben Sie nun die JSON-Datei: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"links"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"Cid"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"/"</span></span>: <span class="hljs-string"><span class="hljs-string">"zeExnPvBXdTRwCBhfkJ1fHFDaXpdW4ghvQjfaCRHYxtQnd3H4w1MPbLczSqyCqVo"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Name"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.html"</span></span> }], <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: <span class="hljs-string"><span class="hljs-string">"CAE="</span></span> }</code> </pre> <br><ol><li>  Die "Daten" geben den Typ des DAG-Blocks an - das Verzeichnis. </li><li>  "links" ist ein Array von Dateilinks. </li><li>  "Name" ist der Name der Datei. </li><li>  "Cid" enth√§lt die Inhaltskennung </li></ol><br><p>  Konvertieren Sie JSON mit dem <code>ipfs dag put -f"protobuf"</code> √ºber IPFS in einen DAG-Block. </p><br><p>  Ich habe einen Multihash: <code>QmXXixn4rCzGguhxQPjXQ8Mr5rdqwZfJTKkeB6DfZLt8EZ</code> </p><br><p>  Zu diesem Zeitpunkt haben wir einen Block erhalten, in dem ein Verzeichnis mit einer Datei in den Block eingeschrieben ist. </p><br><p>  Entladen Sie anschlie√üend mit diesem Multicash den fertigen Block </p><br><pre> <code class="hljs vhdl">ipfs <span class="hljs-keyword"><span class="hljs-keyword">block</span></span> get QmXXixn4rCzGguhxQPjXQ8Mr5rdqwZfJTKkeB6DfZLt8EZ &gt; <span class="hljs-keyword"><span class="hljs-keyword">block</span></span>.dag</code> </pre> <br><p>  Wir √ºbersetzen den Inhalt von block.dag in HEX: </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  Hinzuf√ºgen: </p><br><ol><li>  CID-Version (0x01) </li><li>  DAG-Inhaltstyp (0x70) </li><li>  trivialer Hash (0x00) </li><li>  Datengr√∂√üe 69 Bytes (0x45) </li></ol><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"01 70 00 45 123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  In Base58btc konvertieren und das Pr√§fix "z" hinzuf√ºgen </p><br><pre> <code class="hljs">z6S3Z3W1zuRxio8AJC41jRTdyU9pZWnU6sNbvyGyypEdD8JVNdW42ZmGYWKWGbVDELLvJNWcMspaZMUPZKt7JQmhdyXCqq7j37GL</code> </pre> <br><p>  So haben wir eine Inhaltskennung mit einem Verzeichnis erhalten, in dem sich die HTML-Seite index.html mit dem Text "Hello World" befindet. </p><br><p>  Testen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/ ipfs / z6S3Z3W1zuRxio8AJC41jRTdyU9pZWnU6sNbvyGyypEdD8JVNdW42ZmGYWKWGbVDELLvJNWcMspaZMUPZKt7JQmhdyXCqqjj37gL</a> </p><br><p>  Ferner kann dieser Hash auch in einen anderen Block eingebettet oder im DNS-DNS-Link-Eintrag aufgezeichnet werden.  So k√∂nnen Sie in einem Block eine kleine einfache Site einf√ºgen. </p><br><h3 id="dag-blok-i-protocol-buffers">  DAG-Block- und Protokollpuffer </h3><br><p>  Der DAG-Block kann auch manuell zusammengebaut werden.  Ein DAG-Block besteht aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protokollpufferdaten</a> .  Die oberste Ebene ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">merkledag.proto</a> mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unixfs.proto</a> in Data. </p><br><h4 id="protocol-buffers">  Protokollpuffer </h4><br><p>  Jeder Protobuffer beginnt mit der varint-Feldkennung.  Oft nimmt ein Bezeichner ein Byte ein, da sein Gesamtwert kleiner als 0x80 ist.  In unserem Fall ist das erste Byte 0x12.  Die unteren 3 Bits dieses Feldes sind vom Typ.  Der Rest ist die in der Protodatei angegebene ID. </p><br><h5 id="length-delimited">  L√§ngenbegrenzt </h5><br><p>  Wir entschl√ºsseln die Kennung: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x12 &amp; <span class="hljs-number"><span class="hljs-number">0</span></span>x07 = <span class="hljs-number"><span class="hljs-number">2</span></span> (: Length-delimited) <span class="hljs-number"><span class="hljs-number">0</span></span>x12 &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">ID</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  L√§ngenbegrenzt bedeutet, dass auf varint die Gr√∂√üe des Feldes in Bytes und dessen Inhalt direkt folgt.  Dieser Typ wird sowohl f√ºr verschiedene verschachtelte Strukturen als auch f√ºr Rohdaten (Zeichenfolge, Bytes, eingebettete Nachrichten, gepackte wiederholte Felder) verwendet.  Was die Proto-Datei bereits darin definiert. </p><br><h5 id="varint">  Varint </h5><br><p>  Entschl√ºsseln Sie die Kennung eines anderen Typs: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">0</span></span>x18 &amp; <span class="hljs-number"><span class="hljs-number">0</span></span>x07 = <span class="hljs-number"><span class="hljs-number">0</span></span> (: Varint) <span class="hljs-number"><span class="hljs-number">0</span></span>x12 &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">ID</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p>  Varint bedeutet, dass unmittelbar auf den Wert in varint folgt.  Dieser Container wird zum Schreiben vieler Arten von Werten verwendet (int32, int64, uint32, uint64, sint32, sint64, bool, enum).  Was darin auch die Protodatei definiert. </p><br><h4 id="razberyom-blockdag-kotoryy-my-pereveli-v-hex-vyshe">  Wir werden block.dag analysieren, das wir oben in HEX √ºbersetzt haben </h4><br><p>  Um einen Block zu analysieren, k√∂nnen Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Site verwenden, die automatisch jeden Protokollpuffer analysiert, ohne Protodateien</a> zu verwenden. </p><br><pre> <code class="hljs objectivec"><span class="hljs-number"><span class="hljs-number">0</span></span>x<span class="hljs-string"><span class="hljs-string">"123F0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E120A696E6465782E68746D6C18000A020801"</span></span></code> </pre> <br><p>  Wir zerlegen den Block und ordnen die Bezeichner den Protodateien zu. </p><br><div class="spoiler">  <b class="spoiler_title">merkledag.proto</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">// An IPFS MerkleDAG Link message PBLink { // multihash <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the target <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional bytes Hash = <span class="hljs-number"><span class="hljs-number">1</span></span>; // utf string <span class="hljs-type"><span class="hljs-type">name</span></span>. should be <span class="hljs-keyword"><span class="hljs-keyword">unique</span></span> per <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional string <span class="hljs-type"><span class="hljs-type">Name</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>; // cumulative size <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> target <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> optional uint64 Tsize = <span class="hljs-number"><span class="hljs-number">3</span></span>; } // An IPFS MerkleDAG Node message PBNode { // refs <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> other objects repeated PBLink Links = <span class="hljs-number"><span class="hljs-number">2</span></span>; // <span class="hljs-type"><span class="hljs-type">opaque</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> data optional bytes Data = <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">unixfs.proto</b> <div class="spoiler_text"><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">message</span></span> Data { <span class="hljs-attribute"><span class="hljs-attribute">enum</span></span> DataType { <span class="hljs-attribute"><span class="hljs-attribute">Raw</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Directory</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">File</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Metadata</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">Symlink</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">HAMTShard</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">required</span></span> DataType Type = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> bytes Data = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 filesize = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">repeated</span></span> uint64 blocksizes = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 hashType = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">optional</span></span> uint64 fanout = <span class="hljs-number"><span class="hljs-number">6</span></span>; }</code> </pre> </div></div><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links (<span class="hljs-name"><span class="hljs-name">merkledag</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">3</span></span>F (: <span class="hljs-number"><span class="hljs-number">63</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">10</span></span> ) <span class="hljs-number"><span class="hljs-number">696E6465782</span></span>E68746D6C = <span class="hljs-string"><span class="hljs-string">"index.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBNode</span></span>.Data = Data (<span class="hljs-name"><span class="hljs-name">unixfs</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">02</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> ) <span class="hljs-number"><span class="hljs-number">08</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">Data</span></span>.Type)) <span class="hljs-number"><span class="hljs-number">01</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> == Data.DataType.Directory)</code> </pre> <br><p>  Dementsprechend sieht ein Block mit zwei Dateien folgenderma√üen aus: </p><br><pre> <code class="hljs lisp"><span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links (<span class="hljs-name"><span class="hljs-name">merkledag</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">3</span></span>B (: <span class="hljs-number"><span class="hljs-number">59</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">06</span></span> (: <span class="hljs-number"><span class="hljs-number">6</span></span> ) <span class="hljs-number"><span class="hljs-number">312E68746</span></span>D6C = <span class="hljs-string"><span class="hljs-string">"1.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span> PBNode.Links)) <span class="hljs-number"><span class="hljs-number">3</span></span>B (: <span class="hljs-number"><span class="hljs-number">59</span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Hash)) <span class="hljs-number"><span class="hljs-number">2</span></span>F (: <span class="hljs-number"><span class="hljs-number">47</span></span> ) <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>B (<span class="hljs-name"><span class="hljs-name">CIDv1</span></span> Raw Identity <span class="hljs-number"><span class="hljs-number">43</span></span> ) EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E = <span class="hljs-string"><span class="hljs-string">"Ôªø&lt;b&gt;&lt;i&gt;&lt;u&gt; &lt;/u&gt;&lt;/i&gt;&lt;/b&gt;"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Name)) <span class="hljs-number"><span class="hljs-number">06</span></span> (: <span class="hljs-number"><span class="hljs-number">6</span></span> ) <span class="hljs-number"><span class="hljs-number">322E68746</span></span>D6C = <span class="hljs-string"><span class="hljs-string">"2.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-name"><span class="hljs-name">PBLink</span></span>.Size)) <span class="hljs-number"><span class="hljs-number">00</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">0</span></span>A (: <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">Length-delimited</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">PBNode</span></span>.Data = Data(<span class="hljs-name"><span class="hljs-name">unixfs</span></span>.proto))) <span class="hljs-number"><span class="hljs-number">02</span></span> (: <span class="hljs-number"><span class="hljs-number">2</span></span> ) <span class="hljs-number"><span class="hljs-number">08</span></span> (: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-name"><span class="hljs-name">Varint</span></span>). ID: <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">Data</span></span>.Type)) <span class="hljs-number"><span class="hljs-number">01</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> == Data.DataType.Directory)</code> </pre> <br><p>  Das hei√üt, das Feld PBNode.Links (0x12) wird so oft wiederholt wie die Anzahl der Dateien, die in den Block eingef√ºgt werden sollen. </p><br><p>  F√ºgen Sie zur √úberpr√ºfung am Anfang von "F 01 70 00" (HEX CIDv1-DAG-Identit√§t) und der Gr√∂√üe des DAG-Blocks "7E" (126 Byte) hinzu. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">F</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">70</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 7E <span class="hljs-number"><span class="hljs-number">12</span></span> 3B 0A 2F <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 2B EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span> 312E68746D6C <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> 3B 0A 2F <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 2B EFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span> 322E68746D6C <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 0A <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span></code> </pre> <br><p>  Check: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">/ ipfs / F0170007E123B0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E1206312E68746D6C1800123B0A2F0155002BEFBBBF3C623E3C693E3C753ED09FD180D0B8D0B2D0B5D18220D0BCD0B8D1803C2F753E3C2F693E3C2F623E1206322E68746D6C18000A020801</a> </p><br><h3 id="zaklyuchenie">  Fazit </h3><br><p>  Ich hoffe, ich habe gen√ºgend Informationen gegeben, damit die Erstellung von Bl√∂cken und Bezeichnern implementiert werden kann. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423073/">https://habr.com/ru/post/de423073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423063/index.html">Epson WorkForce Pro: Chroniken dar√ºber, wie ein Inkjet-B√ºrodruck eine Decke aus einem Laser gezogen hat und wie es heute dazu kam</a></li>
<li><a href="../de423065/index.html">Der Experte von Positive Technologies entdeckte die M√∂glichkeit, Verschl√ºsselungsschl√ºssel in Intel ME offenzulegen</a></li>
<li><a href="../de423067/index.html">Python Developer Tools von Microsoft. Erste Schritte</a></li>
<li><a href="../de423069/index.html">Apple Special Event, September 2018 [Text√ºbersetzungsarchiv]</a></li>
<li><a href="../de423071/index.html">Ich habe keine Angst vor deiner NDA</a></li>
<li><a href="../de423075/index.html">Warum sind CFOs so bem√ºht, IT-Investitionen in Betrieb umzusetzen?</a></li>
<li><a href="../de423077/index.html">X86 Assembler-Handbuch f√ºr Anf√§nger</a></li>
<li><a href="../de423079/index.html">Wichtige Punkte aus einem Interview mit Elon Musk bei Joe Rogan</a></li>
<li><a href="../de423083/index.html">Wie ich Entwickler bei ABBYY wurde</a></li>
<li><a href="../de423085/index.html">Feineinstellung des Lastausgleichs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>