<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¶ğŸ¿ ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ» ğŸš Lida waspada: Otomatisasi Tes Keamanan ğŸ™ğŸ» ğŸ¤²ğŸ¿ âœï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat siang, para pembaca yang budiman. Nama saya Victor Burov, saya seorang pengembang di ISPsystem. Dalam posting terakhir saya berbicara tentang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lida waspada: Otomatisasi Tes Keamanan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/426969/">  Selamat siang, para pembaca yang budiman.  Nama saya Victor Burov, saya seorang pengembang di ISPsystem.  Dalam posting terakhir saya berbicara tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alat untuk membuat autotests</a> , hari ini saya akan berbagi pengalaman saya dalam mengotomatisasi pengujian keamanan. <br><br><img src="https://habrastorage.org/webt/9t/xm/uy/9txmuy_rzmrhxjp0mbe4hfobvq8.jpeg"><br><br>  Pada awalnya, kerentanan dalam produk dicari oleh karyawan yang terpisah.  Pengujian manual membutuhkan banyak waktu dan tidak menjamin bahwa semua kerentanan akan ditemukan.  Setelah memastikan hukum dasar pengujian, kami sampai pada kesimpulan bahwa itu bisa otomatis.  Kemudian kami memutuskan untuk menulis utilitas yang akan memudahkan masa pakai tester, menghemat waktu dan memungkinkan Anda untuk memeriksa produk setelah setiap perubahan.  Karena penguji bernama Lida, kami menamai aplikasi baru itu untuk menghormatinya.  Secara umum, di perusahaan kami sudah menjadi tradisi untuk memanggil alat pengujian dengan nama penguji. <br><a name="habracut"></a><br>  Setelah menganalisis utilitas pencarian kerentanan, saya sampai pada kesimpulan bahwa mereka semua perlu menentukan fungsi untuk memanggil dan parameter yang digunakan.  Kami kembali memutuskan untuk memanfaatkan antarmuka terpadu dan merumuskan persyaratan untuk Lida. <br><br><h4>  Persyaratan Startup: </h4><br><ol><li>  Secara otomatis membangun daftar fungsi. </li><li>  Opsi pelengkapan otomatis. </li><li>  Membuat permintaan API. </li><li>  Analisis output data setelah melakukan fungsi. </li><li>  Cari kerentanan dalam data. </li><li>  Pembentukan laporan. </li><li>  Pengaturan fleksibel. </li></ol><br>  Untuk menyadari semua ini tidak mudah. <br><br><h2>  Implementasi </h2><br><h3>  Lewati formulir dan daftar </h3><br>  Untuk menemukan kerentanan dalam suatu fungsi, itu harus dijalankan dengan melewati parameter yang diperlukan.  Antarmuka kami dibangun berdasarkan daftar dan formulir, sehingga Anda dapat mengotomatiskan pengumpulan data dengan memproses xml-dokumen yang menggambarkan struktur elemen antarmuka. <br><br>  Saya memutuskan untuk mulai merangkak dari menu utama, secara rekursif masuk ke semua daftar bersarang.  "Lida" membuka daftar level pertama.  Sebagai aturan, ia memiliki beberapa tombol yang memanggil beberapa fungsi. <br><br>  Jika tombol membuka formulir, hasil panggilan akan menjadi dokumen-xml dengan node yang berisi informasi tentang bidang: nama, validator, rentang nilai yang valid.  Berdasarkan informasi ini, nilai bidang dihasilkan.  Misalnya, angka akan dihasilkan untuk int.  Jika tidak ada validator, string acak dihasilkan.  Setelah mengisi semua bidang formulir, permintaan dikirim. <br><br>  Jika fungsi adalah daftar, maka akan terbuka dan fungsi yang terkait dengan tombol akan dipanggil untuk elemen-elemennya. <br><br>  Saat memeriksa daftar, muncul masalah - semua daftar harus memiliki satu set catatan yang akan memastikan bahwa semua tombol dalam daftar dapat diklik. <br><br><h3>  Pencarian injeksi SQL </h3><br>  Injeksi SQL mungkin merupakan salah satu masalah paling umum untuk aplikasi, termasuk masalah kita.  Banyak panggilan fungsi menghasilkan berbagai permintaan DBMS.  Kesalahan terjadi ketika parameter yang berasal dari luar diganti ke badan permintaan "apa adanya".  Konsekuensi dari kesalahan tersebut bisa menyedihkan: dari penerimaan data tanpa izin ke menghapus tabel. <br><br>  Untuk memulai pencarian injeksi SQL, saya mengatur output dari semua query SQL ke file.  Setelah fungsi dieksekusi, aplikasi mencari nilai-nilai parameter yang dikirimkan dalam query SQL yang dihasilkan. <br><br>  <i>Anda bisa menggunakan log dari server SQL itu sendiri.</i>  <i>Namun dalam kasus kami, hanya ada satu metode untuk mengeksekusi kueri dan menambahkan logging ke itu tidak sulit.</i>  <i>Berkat ini, kami tahu persis tantangan apa yang menghasilkan permintaan ini atau itu.</i> <br><br>  Ketika nilai parameter yang diteruskan ditemukan, utilitas meneruskan nilai yang berisi kutipan tunggal ke parameter ini.  Jika kutipan ditemukan dalam urutan yang sama, maka parameter tidak lolos - kami menemukan tempat untuk injeksi SQL. <br><br><h3>  Analisis Panggilan Sistem </h3><br>  Masalah serupa terjadi ketika kita melakukan panggilan sistem apa pun.  Saya memutuskan untuk mencari mereka dengan strace dan memilih parameter peluncuran optimal untuknya.  Contoh memulai ISPmanager: <br><br><pre><code class="xml hljs">strace -f -s 1024 -e trace=file,process bin/core ispmgr</code> </pre> <br>  Seperti halnya dengan injeksi SQL, Lida melakukan fungsi dan menganalisis output strace untuk menentukan apakah nilai-nilai parameter dilewatkan untuk <i>membuka, membatalkan tautan, rmdir, chmod chown, chflags, mknod, mkfifo, fcntl, symlink, tautan, jalankan, mkdir disertakan</i> . <br><br>  Jika parameter ditemukan, utilitas meneruskan nilai yang berisi, misalnya, jalur dengan transisi ke direktori di atas.  Jika mendapat apa adanya, maka kerentanan potensial ditemukan. <br><br>  Analisis fungsi execve ternyata sangat berguna.  Ini memungkinkan Anda untuk menentukan di mana argumen fungsi untuk menjalankan file yang dapat dieksekusi tidak lolos.  Kesalahan ini sangat mahal, karena melaluinya Anda bisa mendapatkan akses root ke server hanya dengan mengubah kata sandi. <br><br><blockquote>  Ketika pengguna menemukan kerentanan dalam produk kami, perusahaan membayar hadiah uang tunai, yang jumlahnya tergantung pada kategori kerentanan.  Pendekatan ini bisa lebih murah daripada mencari kesalahan sendiri (penguji mungkin tidak menemukan kesalahan dan mendapatkan gaji). </blockquote><br>  <i>Tes lain yang menarik: memeriksa urutan fungsi panggilan stat dan lainnya.</i>  <i>Seringkali, akses diperiksa terlebih dahulu melalui stat, dan kemudian beberapa tindakan tidak aman, yang meninggalkan peluang untuk substitusi.</i>  <i>Tapi kami tidak mengotomatiskan ini.</i> <br><br><h3>  Memeriksa akses ke objek asing </h3><br>  Kami memeriksa akses ke objek asing dari bawah pengguna untuk entitas pengguna dan administrator lain.  Dalam mode ini, kami memeriksa kemampuan membaca, memodifikasi, dan melihat daftar elemen pengguna asing. <br><br>  Lida mem-bypass semua fungsi yang tersedia atas nama pemilik atau administrator dan mengingat elemen-elemennya.  Kemudian ia memanggil fungsi yang sama dengan elemen dari bawah pengguna lain.  Dalam situasi yang ideal, jawabannya harus berupa kesalahan seperti Access atau Missed.  Oleh karena itu, jika kesalahan semacam itu tidak diterima, kemungkinan besar Anda dapat membaca data pengguna orang lain. <br><br>  Dalam beberapa kasus, tidak adanya kesalahan tidak berarti bahwa Anda dapat langsung mengakses objek pengguna lain.  Di awal fungsi tersebut, kami menambahkan pemeriksaan izin elemen.  Ini memeriksa tidak hanya keamanan, tetapi juga kebenaran tanggapan server. <br><br><h3>  Validasi API </h3><br>  Validasi API kami adalah bonus tambahan untuk fungsi pemeriksaan kerentanan.  Menganalisis laporan tentang pekerjaan Lida, kami belajar untuk mengembalikan jenis kesalahan yang benar, membuat API kami lebih nyaman dan logis.  Akibatnya, seperti halnya dengan tape recorder, kami menerima tidak hanya pemeriksaan keamanan, tetapi juga sekali lagi memeriksa API kami untuk "konsistensi". <br><br><h2>  Kesulitan </h2><br><h4>  Positif palsu </h4><br>  Utilitas dapat bekerja dengan semua produk kami, oleh karena itu, ia memeriksa banyak fungsi yang berbeda.  Pada dasarnya, false positive muncul dalam mode pemeriksaan akses ke objek asing.  Ini karena fitur tombol dan fungsi. <br><br>  Positif palsu adalah masalah terbesar Lida.  Tampaknya itu benar-benar debugged, tetapi ketika memeriksa panel yang berbeda, positif palsu baru muncul.  Akibatnya, ada beberapa tahap koreksi mereka. <br><br><h4>  Penciptaan Entitas </h4><br>  Sebagian besar tindakan di panel dilakukan pada entitas apa pun (nama domain, database, dll.).  Untuk mencapai otomatisasi maksimum, Lida harus membuat entitas ini secara otomatis.  Namun dalam praktiknya hal ini ternyata sulit diimplementasikan.  Terkadang validasi dilakukan dalam kode, sehingga tidak selalu mungkin untuk mengganti nilai parameter secara otomatis.  Alasan kedua adalah entitas dependen.  Misalnya, untuk membuat kotak surat, Anda perlu membuat domain surat. <br><br>  Karena itu, kami memutuskan untuk tidak memperjuangkan otomatisasi penuh.  Sebelum memulai, tester membuat entitas secara manual dan mengambil snapshot dari mesin, karena entitas akan berubah setelah verifikasi.  Ini memungkinkan Anda untuk tidak melewati memeriksa sekelompok fungsi jika terjadi kegagalan pembuatan entitas. <br><br><h4>  Memanggil fungsi yang merusak </h4><br>  Hampir setiap daftar memiliki fungsi untuk menghapus atau mematikan suatu entitas.  Jika Anda menjalankannya secara berurutan, maka entitas akan dihapus sebelum melakukan fungsi lainnya.  Saya mendefinisikan fungsi-fungsi tersebut dan melakukan setelah yang lain.  Selain itu ditambahkan kunci yang melarang eksekusi fungsi-fungsi tersebut. <br><br>  Beberapa fungsi me-reboot server.  Mereka harus dilacak dan ditambahkan ke daftar diabaikan. <br><br>  Karena sifat logika operasi, beberapa fungsi memulai ulang panel.  Selama pengujian keamanan, ini menyebabkan panel untuk memulai tanpa melacak permintaan SQL atau strace - verifikasi lebih lanjut menjadi tidak berarti.  Anda harus melacak ini dan memulai ulang panel dalam mode lacak. <br><br><h4>  Memeriksa parameter dependen </h4><br>  Pada formulir ada bidang untuk memasukkan teks, kotak centang, daftar drop-down, pada nilai-nilai yang ketersediaan nilai-nilai bidang lain bergantung.  Setiap nilai bidang dependen dapat memiliki bagian kode yang terpisah, oleh karena itu, bagian ketika mereka tetap tidak diverifikasi. <br><br>  Untuk mengatasi masalah ini, saya menambahkan algoritma untuk menganalisis bidang dependen dan memeriksa semua kombinasi kontrol dependen. <br><br><h4>  Memeriksa fitur yang tidak tersedia di antarmuka </h4><br>  Fungsi layanan tidak tersedia untuk transisi, tetapi mungkin mengandung kerentanan.  Untuk mengidentifikasi dan memverifikasinya, kami memiliki fungsi khusus yang mengembalikan daftar semua fungsi yang terdaftar.  Kami membandingkan daftar ini dengan daftar fungsi yang diuji.  Tidak ada metadata untuk fungsi layanan, oleh karena itu tidak mungkin untuk memverifikasi parameter yang diproses di dalamnya. <br><br><h2>  Kesimpulan </h2><br>  Kami menyertakan Lida di setiap bangunan malam di Jenkins.  Berdasarkan hasil kerjanya, laporan verifikasi dihasilkan, informasi tentang fungsi yang mencurigakan ditampilkan dengan semua parameter. <br><br>  Tugas yang ditutup oleh pengembang sekarang diperiksa tidak hanya oleh tester, tetapi juga oleh Lida.  Penguji memproses laporan yang diterima: menyalin parameter fungsi mencurigakan ke browser dan menganalisis perilaku dan panel log.  Jika kerentanan dikonfirmasi, kesalahan dicatat ke pengembang. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426969/">https://habr.com/ru/post/id426969/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426959/index.html">Instal kubernetes melalui kubespray (penyimpanan lokal, instal Elasticsearch + Fluentd + Kibana, prometheus)</a></li>
<li><a href="../id426961/index.html">Bagaimana Microsoft menulis ulang kompiler C # menjadi C # dan membuatnya terbuka</a></li>
<li><a href="../id426963/index.html">Apakah aplikasi Flutter memimpikan widget berbasis platform?</a></li>
<li><a href="../id426965/index.html">Apa yang akan terjadi pada penanganan kesalahan di C ++ 2a</a></li>
<li><a href="../id426967/index.html">Generator kode ABAP online</a></li>
<li><a href="../id426971/index.html">Fatalisme dalam penanganan kesalahan</a></li>
<li><a href="../id426973/index.html">Sandwich perusahaan</a></li>
<li><a href="../id426975/index.html">Joker 2018: yang mustahil itu mungkin</a></li>
<li><a href="../id426977/index.html">LibreOffice: mimpi buruk akuntan</a></li>
<li><a href="../id426979/index.html">Cara belajar bahasa Inggris secara gratis: 3 alat umum dan instruksi terperinci untuk masing-masingnya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>