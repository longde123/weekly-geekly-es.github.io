<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏻 🉑 🍼 Pengantar singkat untuk Kustomize 🏇🏽 👨🏽‍💼 👩‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Catatan perev. : Artikel ini ditulis oleh Scott Lowe, seorang insinyur senior TI yang menulis / ikut menulis tujuh buku cetak (terutama untuk VMware v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengantar singkat untuk Kustomize</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/469179/"> <i><b>Catatan</b></i>  <i><b>perev.</b></i>  <i>: Artikel ini ditulis oleh Scott Lowe, seorang insinyur senior TI yang menulis / ikut menulis tujuh buku cetak (terutama untuk VMware vSphere).</i>  <i>Dia saat ini bekerja di anak perusahaan VMware, Heptio (diakuisisi pada 2016), yang berspesialisasi dalam komputasi awan dan Kubernetes.</i>  <i>Teks itu sendiri berfungsi sebagai pengantar yang luas dan mudah dipahami untuk manajemen konfigurasi untuk Kubernetes menggunakan teknologi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kustomize</a> , baru-baru ini disertakan dengan K8s.</i> <br><br><img src="https://habrastorage.org/webt/3k/3j/if/3k3jifu6nisnqt_nghi6iitekoy.png"><br><br>  Kustomize adalah alat yang memungkinkan pengguna untuk "menyesuaikan file YAML yang sederhana dan bebas-templat untuk berbagai keperluan, membuat YAML asli tetap dapat digunakan" (deskripsi dipinjam langsung dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori kustomize di GitHub</a> ).  Kustomize dapat dijalankan secara langsung atau, dimulai dengan Kubernetes 1.14, gunakan <code>kubectl -k</code> untuk mengakses fungsinya (meskipun pada Kubernetes 1.15, biner terpisah lebih baru daripada fitur yang dibangun dalam kubectl).  <i>( <b>Catatan</b> : Dengan rilis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kubernetes 1.16</a> baru-baru ini, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kustomize</a> juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">didukung</a> di utilitas kubeadm.)</i> Dalam posting ini, saya ingin memperkenalkan pembaca pada dasar-dasar kustomisasi. <a name="habracut"></a><br><br>  Dalam bentuk / aplikasinya yang paling sederhana, kustomize hanyalah kumpulan sumber daya (file YAML yang mendefinisikan objek Kubernetes: Penyebaran, Layanan, dll.) Ditambah daftar instruksi tentang perubahan yang perlu dilakukan pada sumber daya ini.  Sama seperti make menggunakan set instruksi yang terdapat dalam <code>Makefile</code> , dan Docker <code>Dockerfile</code> wadah berdasarkan instruksi dari <code>Dockerfile</code> , kustomisasi menggunakan <code>kustomization.yaml</code> untuk menyimpan instruksi tentang perubahan apa yang ingin dilakukan pengguna ke set sumber daya. <br><br>  Berikut ini contoh file <code>kustomization.yaml</code> : <br><br><pre> <code class="plaintext hljs">resources: - deployment.yaml - service.yaml namePrefix: dev- namespace: development commonLabels: environment: development</code> </pre> <br>  Saya tidak akan mencoba membicarakan semua bidang yang mungkin ada dalam file <code>kustomization.yaml</code> (ini ditulis dengan baik di <a href="">sini</a> ), tetapi saya akan memberikan penjelasan singkat tentang contoh spesifik: <br><br><ul><li>  Bidang <code>resources</code> menunjukkan perubahan (sumber daya) mana yang akan diubah.  Dalam hal ini, ia akan mencari sumber daya di file <code>deployment.yaml</code> dan <code>service.yaml</code> dalam direktori-nya (jika perlu, Anda dapat menentukan path lengkap atau relatif). </li><li>  Bidang <code>namePrefix</code> menginstruksikan kustomisasi untuk menambahkan awalan spesifik (dalam hal ini, <code>dev-</code> ) ke atribut <code>name</code> semua sumber daya yang ditentukan dalam bidang <code>resources</code> .  Jadi, jika ada <code>name</code> di Deployment dengan nilai <code>nginx-deployment</code> , kustomize akan membuat <code>dev-nginx-deployment</code> . </li><li>  Bidang <code>namespace</code> menginstruksikan kustomisasi untuk menambahkan namespace yang ditentukan untuk semua sumber daya.  Dalam hal ini, Penyebaran dan Layanan akan jatuh ke dalam namespace <code>development</code> . </li><li>  Terakhir, bidang <code>commonLabels</code> berisi serangkaian label yang akan ditambahkan ke semua sumber daya.  Dalam contoh kami, kustomisasi akan memberikan label ke sumber daya dengan <code>environment</code> nama dan <code>development</code> nilai. </li></ul><br>  Jika pengguna menjalankan <code>kustomize build .</code>  dalam direktori dengan file <code>kustomization.yaml</code> dan sumber daya yang diperlukan (mis. <code>deployment.yaml</code> dan file <code>service.yaml</code> ), maka pada output akan menerima teks dengan perubahan yang terdaftar di <code>kustomization.yaml</code> . <br><br><img src="https://habrastorage.org/webt/nv/sf/uy/nvsfuyar7x570ia_zrcp_v4lohi.jpeg"><br>  <i><b>Catatan</b></i>  <i><b>perev.</b></i>  <i>: Ilustrasi dari dokumentasi proyek untuk penggunaan "sederhana" kustomisasi</i> <br><br>  Output dapat diarahkan jika Anda perlu melakukan perubahan: <br><br><pre> <code class="bash hljs">kustomize build . &gt; custom-config.yaml</code> </pre> <br>  Outputnya deterministik (dengan input yang sama, output yang sama akan diperoleh), sehingga Anda tidak dapat menyimpan hasilnya ke file.  Sebagai gantinya, Anda dapat langsung meneruskannya ke perintah lain: <br><br><pre> <code class="bash hljs">kustomize build . | kubectl apply -f -</code> </pre> <br>  Fungsi Kustomize juga dapat diakses melalui <code>kubectl -k</code> (sejak versi 1.14 dari Kubernetes).  Namun, perlu diingat bahwa paket kustomisasi terpisah diperbarui lebih cepat daripada yang terintegrasi di kubectl (setidaknya demikian halnya dengan rilis Kubernetes 1.15). <br><br>  Pembaca mungkin bertanya: "Mengapa semua kesulitan ini, apakah Anda dapat mengedit file secara langsung?".  Pertanyaan yang bagus  Dalam contoh kita, sangat <i>mungkin untuk</i> memodifikasi file <code>deployment.yaml</code> dan <code>service.yaml</code> secara langsung, tetapi bagaimana jika mereka adalah fork proyek orang lain?  Mengubah file secara langsung membuat sulit (jika bukan tidak mungkin sama sekali) melakukan rebase pada garpu ketika perubahan dilakukan pada sumber / sumber.  Menggunakan kustomize memungkinkan Anda untuk memusatkan perubahan ini dalam file <code>kustomization.yaml</code> , membiarkan file asli tetap utuh dan dengan demikian membuatnya lebih mudah untuk melakukan rebase pada file sumber jika perlu. <br><br>  Manfaat kustomisasi menjadi jelas dalam kasus penggunaan yang lebih kompleks.  Dalam contoh di atas, <code>kustomization.yaml</code> dan sumber daya berada di direktori yang sama.  Namun, kustomisasi mendukung skenario penggunaan ketika ada konfigurasi dasar dan banyak variasinya, juga dikenal sebagai <i>overlay</i> .  Sebagai contoh, seorang pengguna ingin mengambil Deployment dan Layanan untuk nginx, yang saya gunakan sebagai contoh, dan membuat versi pengembangan, staging, dan produksi (atau varian) dari file-file itu.  Untuk melakukan ini, ia akan memerlukan overlay yang disebutkan di atas dan, pada kenyataannya, sumber daya dasar sendiri. <br><br>  Untuk menggambarkan ide overlay dan <i>sumber daya dasar</i> , misalkan direktori memiliki struktur berikut: <br><br><pre> <code class="plaintext hljs">- base - deployment.yaml - service.yaml - kustomization.yaml - overlays - dev - kustomization.yaml - staging - kustomization.yaml - prod - kustomization.yaml</code> </pre> <br>  Di file <code>base/kustomization.yaml</code> pengguna cukup menggunakan bidang <code>resources</code> untuk mendeklarasikan sumber daya yang harus diaktifkan. <br><br>  Di masing-masing file <code>overlays/{dev,staging,prod}/kustomization.yaml</code> pengguna merujuk ke konfigurasi dasar di bidang <code>resources</code> , dan kemudian menunjukkan perubahan spesifik untuk <i>lingkungan ini</i> .  Misalnya, file <code>overlays/dev/kustomization.yaml</code> mungkin terlihat seperti contoh yang diberikan sebelumnya: <br><br><pre> <code class="plaintext hljs">resources: - ../../base namePrefix: dev- namespace: development commonLabels: environment: development</code> </pre> <br>  Pada saat yang sama, file <code>overlays/prod/kustomization.yaml</code> mungkin sangat berbeda: <br><br><pre> <code class="plaintext hljs">resources: - ../../base namePrefix: prod- namespace: production commonLabels: environment: production sre-team: blue</code> </pre> <br>  Ketika pengguna mulai <code>kustomize build .</code>  di <code>overlays/dev</code> , kustomize akan menghasilkan opsi pengembangan.  Jika Anda menjalankan <code>kustomize build .</code>  di direktori <code>overlays/prod</code> - Anda mendapatkan opsi produksi.  Dan semua ini - tanpa membuat perubahan pada file asli <i>(basis)</i> , dan semua ini - dengan cara deklaratif dan deterministik.  Anda dapat melakukan konfigurasi dasar dan overlay direktori langsung ke sistem kontrol versi, mengetahui bahwa berdasarkan file-file ini Anda dapat mereproduksi konfigurasi yang diinginkan setiap saat. <br><br><img src="https://habrastorage.org/webt/ou/3-/f1/ou3-f1faejz5z8fnho8hmtlcfoy.jpeg"><br>  <i><b>Catatan</b></i>  <i><b>perev.</b></i>  <i>: Ilustrasi dari dokumentasi proyek untuk menggunakan overlay di kustomisasi</i> <br><br>  Kustomize dapat melakukan lebih dari yang dijelaskan dalam artikel ini.  Namun, saya berharap ini akan menjadi pengantar yang bagus. <br><br><h2>  Sumber Daya Tambahan </h2><br>  Ada banyak artikel dan publikasi bagus tentang menyesuaikan.  Berikut adalah beberapa yang saya temukan sangat berguna: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ubah konfigurasi YAML dasar untuk berbagai lingkungan / uji menggunakan Kustomize</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kustomize - Cara yang tepat untuk melakukan templating di Kubernetes</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Manajemen Deklaratif Obyek Kubernetes Menggunakan Kustomize</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menyesuaikan Grafik Helm Hulu dengan Kustomize</a> . </li></ul><br>  <i><b>Catatan</b></i>  <i><b>perev.</b></i>  <i>: Anda juga dapat menyarankan blok tautan yang diterbitkan sebagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumberdaya</a> di situs web utilitas, dan koleksi video berikutnya dengan laporan terbaru tentang menyesuaikan.</i> <br><br>  Jika Anda memiliki pertanyaan atau saran untuk meningkatkan materi ini, saya selalu terbuka untuk umpan balik.  Anda dapat menghubungi saya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Twitter</a> atau di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saluran Kubernetes Slack</a> .  Bersenang-senang memodifikasi manifes Anda dengan menyesuaikan! <br><br><h2>  PS dari penerjemah </h2><br>  Baca juga di blog kami: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alat untuk pengembang aplikasi yang berjalan di Kubernetes</a> "; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kubernetes 1.14: Tinjauan Umum tentang Inovasi Kunci</a> ”; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lima Hasil Utama dari Helm Summit 2019 di Amsterdam</a> ”; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengantar praktis untuk manajer paket untuk Kubernetes - Helm</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id469179/">https://habr.com/ru/post/id469179/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id469163/index.html">Runet history: ingat bagaimana jaringan di-temper</a></li>
<li><a href="../id469165/index.html">Kami mengundang Anda untuk pelatihan dari pengembang Perangkat Lunak Intel dan Yandex "Pengembangan Perangkat Lunak di Cloud"</a></li>
<li><a href="../id469167/index.html">Cinta dan burung hantu: apa gunanya shift malam</a></li>
<li><a href="../id469171/index.html">Produk terbaik mulai dari masalah nyata: Interkom tentang Pekerjaan yang akan Dilakukan. Bagian 2</a></li>
<li><a href="../id469173/index.html">Kesendirian online</a></li>
<li><a href="../id469181/index.html">Kami menggunakan tautan statis ke properti objek menggunakan lambdas</a></li>
<li><a href="../id469183/index.html">AMA dengan Habr, # 12. Masalah kusut</a></li>
<li><a href="../id469187/index.html">Buku "Swift. Dasar-dasar pengembangan aplikasi untuk iOS, iPadOS dan macOS. Edisi ke-5. ditambah dan direvisi "</a></li>
<li><a href="../id469189/index.html">Mengapa MS-DOS menyimpan buffer baca floppy selama tepat dua detik?</a></li>
<li><a href="../id469193/index.html">Kinerja PHP backend. Video dari Badoo PHP Meetup # 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>