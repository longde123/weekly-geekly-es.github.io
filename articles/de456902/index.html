<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏿 ☠️ 💸 Sichere Push-Benachrichtigungen: von der Theorie zur Praxis 💃🏻 📮 👩🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! 

 Heute werde ich darüber sprechen, was meine Kollegen und ich seit mehreren Monaten tun: über Push-Benachrichtigungen für mobile Instant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sichere Push-Benachrichtigungen: von der Theorie zur Praxis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456902/">  Hallo Habr! <br><br>  Heute werde ich darüber sprechen, was meine Kollegen und ich seit mehreren Monaten tun: über Push-Benachrichtigungen für mobile Instant Messenger.  Wie gesagt, in unserer Anwendung liegt der Schwerpunkt auf der Sicherheit.  Daher haben wir herausgefunden, ob Push-Benachrichtigungen „Schwachstellen“ aufweisen und wenn ja, wie wir sie ausgleichen können, um diese nützliche Option zu unserem Service hinzuzufügen. <br><br>  Ich veröffentliche eine Übersetzung unseres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikels mit Medium</a> mit einigen Ergänzungen von mir.  Es enthält die Ergebnisse der „Untersuchung“ und eine Geschichte darüber, wie das Problem gelöst wurde. <br><br><h2>  Entdecken Sie das Material </h2><br>  Im klassischen Modell machen Push-Benachrichtigungen Messenger anfällig für MITM-Angriffe (Man-in-the-Middle, Man-in-the-Middle).  Bei Google, Microsoft und in der alten Version von iMessage sendet die Anwendung beispielsweise Verschlüsselungsschlüssel an Apple-Server. Benutzer werden auf dem Server authentifiziert und der Nachrichtenkopf (oder sein Inhalt) wird entschlüsselt. <br><br><img src="https://habrastorage.org/webt/x3/tk/qk/x3tkqkg9njh3uigx5-xuaytkqqs.png"><br><br>  Infolgedessen besteht die Möglichkeit, die Korrespondenz zu lesen, indem Sie Zugriff auf den Push-Benachrichtigungsserver erhalten.  Und das bedeutet, dass jede Verschlüsselung der Korrespondenz nutzlos ist: Push-Benachrichtigungen bieten weiterhin die Möglichkeit, von Dritten gelesen zu werden.  Die Autoren des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Encrypt Wisely“</a> auf Xaker.ru, der sich mit Methoden zur Nachrichtenverschlüsselung befasst, haben diese Möglichkeit ausführlicher erörtert. <br><br>  Wenn Sie der Meinung sind, dass die Server von Apple und Google keinen 100% igen Verlust von Benutzerverschlüsselungsschlüsseln zulassen, sollten Sie berücksichtigen, dass ihre Mitarbeiter Zugriff darauf haben.  Und die Mitarbeiter sind Menschen. <br>  Bei all den Schwachstellen des Pushings verwenden viele "sichere" Messenger, einschließlich Signal und Telegramm, diese.  Andernfalls müssen Benutzer neue Nachrichten "manuell" überwachen, indem sie ständig in die Anwendung eintreten.  Was sehr unpraktisch ist und konkurrierende Boten einen Vorteil erhalten. <br><br><h2>  Paranoia und gesunder Menschenverstand </h2><a name="habracut"></a><br>  In unserem Projekt haben wir uns vor einigen Monaten mit diesem Thema auseinandergesetzt.  Wir mussten Push-Benachrichtigungen zu einer Option machen, um wettbewerbsfähig zu sein.  Machen Sie jedoch gleichzeitig keine Sicherheitslücke, da Datenlecks die Glaubwürdigkeit des Projekts beeinträchtigen. <br><br>  Wir haben jedoch bereits einen wichtigen Vorteil: Unser Messenger ist dezentralisiert (Daten werden in der Blockchain gespeichert), während Mitarbeiter keinen Zugriff auf Konten haben.  Nur Benutzer haben Verschlüsselungsschlüssel, und die öffentlichen Schlüssel des Gesprächspartners sind in der Blockchain verfügbar, um sich vor MITM-Angriffen zu schützen. <br><br>  In der ersten Version des Push haben wir beschlossen, so viel wie möglich auf Nummer sicher zu gehen und den Text der Nachricht überhaupt nicht zu übertragen.  Der Push-Dienst empfing vom Knoten nicht den Nachrichtentext, sondern nur ein Signal über die Tatsache seines Empfangs.  Daher sah der Benutzer die Benachrichtigung "Eine neue Nachricht ist eingetroffen."  Es konnte nur im Messenger gelesen werden. <br><br><img src="https://habrastorage.org/webt/rb/nt/pq/rbntpqxwckdv65t1vj8cvgry_d8.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie es funktioniert hat: Video</a> . <br><br>  Danach haben wir erfahren, dass die neueste Version von Benachrichtigungen von Apple neue Sicherheitsfunktionen enthält.  Sie haben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> UNNotificationServiceExtension veröffentlicht, mit der Entwickler vollständig verschlüsselte Benachrichtigungsdaten über APNS senden können.  Anschließend entschlüsselt die Anwendung auf dem Endbenutzergerät (oder lädt zusätzliche Daten herunter) und zeigt eine Benachrichtigung an.  Wir haben es als Grundlage für die zweite Version des Push genommen. <br><br>  Jetzt haben wir die zweite Version von Push-Benachrichtigungen für iOS entwickelt, mit der Sie Nachrichtentext ohne Sicherheitsrisiko anzeigen können.  Im neuen Konzept sieht die Logik folgendermaßen aus: <br><br><ul><li>  Der Push-Dienst sendet eine Push-Benachrichtigung mit einer Transaktionsnummer (die verschlüsselte Nachricht kann sehr groß sein und die Anzahl der Benachrichtigungen ist sehr begrenzt). </li><li>  Nach Erhalt einer Benachrichtigung startet das Gerät unsere NotificationServiceExtension - eine Mikroanwendung, die eine Transaktion vom Knoten anhand ihrer ID anfordert, sie mit der gespeicherten Passphrase entschlüsselt und dem System eine neue Benachrichtigung gibt.  Die Passphrase wird in einem sicheren Lager gespeichert. </li><li>  Das System zeigt eine Benachrichtigung mit einer entschlüsselten Nachricht oder Übersetzung an. </li><li>  Die Schlüssel gehen nirgendwo hin, ebenso wie eine einfache Textnachricht.  Der Push-Dienst kann die Nachricht nicht entschlüsseln. </li></ul><br><img src="https://habrastorage.org/webt/ov/6b/vm/ov6bvmzcuxsss8msqe10gktynri.jpeg"><br><br>  Wir haben diese Version als funktionsfähig angesehen und im neuesten Update der iOS-Anwendung implementiert. <br>  Interessenten an der technischen Seite können den Quellcode einsehen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/Adamant-im/adamant-notificationService</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456902/">https://habr.com/ru/post/de456902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456890/index.html">IR-Fernbedienung auf stm32</a></li>
<li><a href="../de456892/index.html">So suchen Sie nach Schwachstellen in Webanwendungen: Vergleichen Sie acht gängige Scanner</a></li>
<li><a href="../de456894/index.html">Docker und Authentifizierung über Nginx</a></li>
<li><a href="../de456896/index.html">Identifizierung realer IP-Adressen von Benutzern des Tor-Netzwerks durch einen verzerrten Cache</a></li>
<li><a href="../de456898/index.html">Schnelle ganzzahlige Multiplikation mit Tabellen</a></li>
<li><a href="../de456904/index.html">Lasttest eines Webprojekts - kein Geld</a></li>
<li><a href="../de456908/index.html">Wie Telegramm Sie zu Rostelecom zusammenführt</a></li>
<li><a href="../de456910/index.html">Internetprojekt security.txt - Kennenlernen einer anderen bekannten Datei</a></li>
<li><a href="../de456912/index.html">So erstellen Sie Websites im Jahr 2019</a></li>
<li><a href="../de456916/index.html">Cross Compilation im Docker. Warum nicht?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>