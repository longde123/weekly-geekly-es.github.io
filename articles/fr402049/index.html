<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé™ üõ∂ üßîüèø La voie difficile d'une id√©e √† un syst√®me de surveillance industriel commercial üòå üîç üë©üèª‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je veux partager mon exp√©rience et parler du chemin que nous avons parcouru, en d√©veloppant le complexe industriel de logiciels et d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La voie difficile d'une id√©e √† un syst√®me de surveillance industriel commercial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402049/">  Dans cet article, je veux partager mon exp√©rience et parler du chemin que nous avons parcouru, en d√©veloppant le complexe industriel de logiciels et de mat√©riel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebHMI</a> pour la surveillance des syst√®mes d'ing√©nierie.  Sous la coupe, beaucoup de photos. <br><br><img src="https://habrastorage.org/files/4b6/ae5/6c5/4b6ae56c56d6490a84c99e3617454089.jpg"><br><br>  L'histoire de WebHMI a commenc√© au printemps 2013.  Ensuite, je me suis enthousiasm√© par l'id√©e d'une maison intelligente et j'ai fabriqu√© √† loisir toutes sortes de jouets pour allumer automatiquement les lumi√®res des toilettes, collecter les lectures des compteurs d'eau, etc.  Une fois que mon ami a regard√© le syst√®me r√©sultant et a pens√© qu'il pouvait √™tre vendu, nous avons commenc√© √† r√©fl√©chir √† comment et √† qui.  Mais il s'est av√©r√© en quelque sorte pas √©l√©gant.  Un peu plus tard, il a eu une id√©e diff√©rente: il a trouv√© une niche vacante sur le march√© des syst√®mes d'automatisation industrielle.  Et nous l'avons impl√©ment√©. <br><a name="habracut"></a><br><h3>  Prologue </h3><br>  La situation √©tait telle que les solutions existantes sur le march√© de l'automatisation √©taient bien adapt√©es aux grandes usines avec des budgets de plusieurs millions de dollars, mais √©tant donn√© l'encombrement et le co√ªt √©lev√©, elles √©taient totalement inacceptables pour les moyennes et petites entreprises.  Les solutions classiques pour la surveillance des processus technologiques, les syst√®mes SCADA, co√ªtent beaucoup d'argent, n√©cessitent un puissant PC industriel, des licences OS et DB, n√©cessitent de nombreuses heures de travail d'un ing√©nieur qualifi√© pour configurer le logiciel et cr√©er un projet.  Si vous avez, par exemple, une petite serre, vous ne pourrez probablement pas investir des dizaines de milliers de dollars dans un syst√®me de surveillance de plusieurs dizaines de param√®tres.  Et si ces serres, disons, 10-20?  Et s'ils sont g√©ographiquement espac√©s?  Le co√ªt de tels syst√®mes s'envole imm√©diatement au paradis, mais en m√™me temps, ils r√©solvent encore mal les ¬´petits¬ª probl√®mes.  Et totalement inadapt√© aux syst√®mes distribu√©s. <br><br>  De l'autre c√¥t√© de l'√©chelle, il y avait des panneaux IHM.  Ils ont un co√ªt relativement faible (√† partir de quelques centaines d'euros) et vous permettent de cr√©er une interface op√©rateur locale pour tout petit syst√®me.  En r√®gle g√©n√©rale - une installation.  Cependant, ces panneaux ont des fonctionnalit√©s tr√®s limit√©es et ne r√©pondent pas aux besoins des clients modernes. <br><br>  Nous visons la niche entre les grands syst√®mes SCADA et les panneaux IHM.  Nous avons commenc√© √† chercher des options pour ce qui peut √™tre utilis√© comme plate-forme logicielle et mat√©rielle.  Il est rapidement devenu √©vident que tout devrait √™tre fait par nous-m√™mes, sinon cela ne fonctionnerait pas pour gagner de l'argent sur la solution.  Un PC industriel pr√™t √† l'emploi rendra la solution trop ch√®re et sans int√©r√™t pour le client, ou ne rapportera pas d'argent.  Il n'y avait pas non plus de logiciel fini. <br><br><img src="https://habrastorage.org/files/c5a/29e/082/c5a29e082be94f258af66e0e502cf7e6.jpg"><br>  PC industriel que nous n'avons pas utilis√© <br><br>  Pour l'avenir, je dirai que nous avons r√©ussi √† cr√©er un produit dont la valeur est comparable √† celle du panneau IHM, mais qui offre des fonctionnalit√©s incomparablement plus importantes.  En fait, un syst√®me SCADA complet a √©t√© obtenu.  De plus, pour le d√©veloppement de projets bas√©s sur celui-ci, aucun logiciel suppl√©mentaire n'est requis - le d√©veloppement, ou plut√¥t la configuration, s'effectue directement dans le navigateur.  Tous les logiciels n√©cessaires sont inclus et fonctionnent √† bord. <br><br>  Le processus de d√©veloppement de tout appareil, et plus encore industriel, est fondamentalement diff√©rent du d√©veloppement logiciel.  Ici, le prix d'erreur est incomparablement plus √©lev√©.  Le cycle de ¬´faire des changements - v√©rifier le r√©sultat¬ª dure des semaines car  la modification de la carte n√©cessite de la commander en production, en assemblage et en mise en service.  Et c'est un long temps de production, un d√©lai de livraison (depuis la Chine), de l'argent pour la logistique, l'assemblage, l'installation, le d√©bogage.  Mais heureusement, au d√©but de notre voyage, nous ne le savions pas.  Sinon, je ne sais pas s'ils d√©cideraient de jouer √† ce jeu ou non. <br><br><h3>  Premiers pas </h3><br>  Nous n'avons pas entrepris de d√©velopper notre propre PC.  Pour cela, il n'y avait pas d'exp√©rience banale, pas d'argent, pas de personnel adapt√©.  De plus, les PC classiques sont mal adapt√©s √† notre application.  Nous avons imagin√© notre appareil comme une petite bo√Æte qui peut √™tre plac√©e dans l'armoire d'automatisation sur un rail DIN et aliment√©e √† partir de celles d√©j√† disponibles dans l'armoire 24V.  Pour ce faire, nous avons d√©cid√© de prendre un System-On-Module (SOM) pr√™t √† l'emploi et d'assembler une ¬´carte m√®re¬ª avec une source d'alimentation et tous les p√©riph√©riques dont nous avons besoin.  La t√¢che semblait assez simple et r√©alisable en quelques semaines, un maximum de mois. <br><br>  Comme il s'est av√©r√© plus tard, ces termes √©taient l√©g√®rement optimistes.  Assembler un prototype sur une table et obtenir un appareil industriel fonctionnant de mani√®re stable sont, comme on dit, deux grandes diff√©rences.  Le premier plan de travail peut √™tre assembl√© sur le genou d'une semaine en deux.  Mais pour finaliser cette mise en page en un produit de s√©rie commercial, il nous a fallu un an et demi. <br><br>  Pour la premi√®re version du logiciel, nous nous sommes fix√© une t√¢che minimale: travailler avec les protocoles Siemens PPI et Modbus ASCII / RTU.  Parce que  J'avais beaucoup d'exp√©rience dans le d√©veloppement web, l'interface √©tait √† l'origine bas√©e sur les technologies web.  Cela est devenu par la suite une caract√©ristique cl√© du produit. <br><br>  Pourquoi exactement ces protocoles?  Nous avons trouv√© un client potentiel - un client qui nous √©tait assez fid√®le et qui √©tait pr√™t √† tester notre produit pour surveiller son installation d'emballage.  Dans son parc d'√©quipements, il y avait des automates des familles Siemens S7 200 et Delta DVP.  Maintenant, bien s√ªr, la liste des protocoles pris en charge est beaucoup plus large.  Vous pouvez m√™me √©crire vos propres protocoles en Lua si n√©cessaire.  Mais nous n'en avons pas r√™v√©. <br><br>  Ainsi, apr√®s avoir obtenu le soutien d'un client potentiel, nous avons commenc√© √† d√©velopper notre produit.  Je crois que nous avons pris le bon d√©part - nous avons r√©solu un probl√®me sp√©cifique (suivre le nombre de produits fabriqu√©s) et n'avons pas invent√© de solution universelle √† un probl√®me abstrait.  Sinon, nous serions certainement embourb√©s dans des d√©sirs sans fin pour ajouter ¬´une autre¬ª fonctionnalit√© de tueur tr√®s importante, qui ne serait pas claire si elle serait utile √† au moins quelqu'un dans la vie r√©elle. <br><br>  √Ä l'avenir, toutes les nouvelles ¬´fonctionnalit√©s¬ª ont √©t√© ajout√©es uniquement en tant que besoin r√©el.  Quand il fait d√©j√† tr√®s chaud.  De plus, si une fonctionnalit√© n'est n√©cessaire que par un client sp√©cifique et qu'elle ne peut en aucun cas √™tre utile √† d'autres clients, nous ne l'ajoutons pas.  Nous ne faisons que ce que nous pouvons ¬´vendre¬ª √† quelqu'un d'autre. <br><br>  Pour le d√©bogage, une carte de d√©bogage du fabricant SOM et un tas de cartes maison avec divers sous-syst√®mes ont √©t√© utilis√©es.  Il s'est donc av√©r√© d√©boguer le travail des principaux syst√®mes p√©riph√©riques sans alt√©ration constante de la totalit√© de la carte de base.  Cela avait d√©j√† √©t√© fait lorsque tous les composants √©taient pr√™ts et fonctionnaient selon les besoins. <br><br>  Le logiciel a √©t√© √©crit en parall√®le avec le d√©veloppement de la premi√®re r√©vision de la carte.  Je ne parlerai probablement pas en d√©tail du processus de d√©veloppement logiciel.  de nombreux lecteurs de Giktayms connaissent ce processus.  Je dirai seulement que je devais: <br><br><ul><li>  r√©viser tant d'approches de d√©veloppement logiciel </li><li>  repenser le C / C ++ et se faire des amis avec </li><li>  ma√Ætriser le d√©bogage des bugs les plus mystiques qui surviennent une fois par mois √† des moments al√©atoires sur des syst√®mes distants et conduire √† un plantage du syst√®me </li><li>  apprendre √† consommer les ressources syst√®me de mani√®re tr√®s √©conomique </li><li>  optimiser tout ce qui est possible et encore plus </li><li>  apprendre √† √©crire des logiciels qui fonctionnent pendant des mois sans red√©marrer </li></ul><br>  Cela est principalement d√ª aux ressources tr√®s limit√©es du processeur SOM s√©lectionn√© - 400 MHz, 64 Mo de RAM, 16 Mo de m√©moire Flash.  Pour cr√©er des sites Web h√©berg√©s sur un tel ¬´serveur¬ª - oh, c'est difficile.  N√©anmoins, nous avons √† bord PHP, une base de donn√©es, Nginx et de nombreux autres goodies.  Et tandis que le syst√®me peut fonctionner avec une r√©activit√© incroyable - par exemple, vous pouvez dessiner des tendances qui sont mises √† jour 20 fois par seconde. <br><br>  La premi√®re version du logiciel n'√©tait, disons, qu'un test de l'id√©e.  Nous avons v√©rifi√© plus que sur cette plate-forme en g√©n√©ral, il est possible de r√©aliser ce que nous visons.  Apr√®s 3-4 mois de d√©veloppement, √† tout le moins, mais le logiciel a ¬´pris vie¬ª.  Nous avons maintenant une interface Web o√π vous pouvez cr√©er vous-m√™me des √©crans pour afficher et visualiser les donn√©es de l'automate.  Les donn√©es √©taient lues en arri√®re-plan et le navigateur mettait constamment √† jour les informations sur un ordinateur, une tablette ou un t√©l√©phone en temps r√©el.  L'orientation vers le Web est devenue la pierre angulaire de notre produit - elle vous permet d'utiliser presque n'importe quel syst√®me d'exploitation et n'importe quel appareil pour afficher l'interface op√©rateur, du t√©l√©phone √† la Smart TV.  Il vous permet √©galement de vous int√©grer de mani√®re flexible dans l'infrastructure r√©seau, de travailler √† distance via Internet, etc. <br><br>  Notre premier projet consistait en deux douzaines de registres (variables lues depuis l'automate).  Ensuite, nous avons pr√©vu que WebHMI serait utilis√© uniquement pour surveiller les petits syst√®mes isol√©s.  Comme nous √©tions humbles et peu s√ªrs alors!  Maintenant, nos clients ont des projets d'automatisation pour les magasins et les complexes sportifs, o√π il y a deux mille registres chacun.  Mais entre la premi√®re version alpha et la version actuelle du logiciel, il y a eu plus de trois ans de d√©veloppement, de d√©bogage et d'optimisation minutieux. <br><br>  √Ä peu pr√®s au moment o√π la premi√®re version alpha du logiciel √©tait pr√™te, notre ing√©nieur mat√©riel a con√ßu et fabriqu√© la premi√®re version du circuit imprim√© de l'appareil.  Nous √©tions heureux de pouvoir enfin tenir notre id√©e dans nos mains pour la premi√®re fois!  C'est un sentiment indescriptible.  Nous √©clations de fiert√© du fait que c'est nous qui avons fabriqu√© cet appareil.  C'√©tait alors encore comme un vilain petit canard - effrayant.  Mais le sien, cher. <br><br><img src="https://habrastorage.org/files/ead/f95/4b5/eadf954b59444060ad24bf0ffad054ea.jpg" width="800"><br>  La premi√®re planche.  Fabriqu√© √† la maison.  Maintenant, elle travaille dans notre bureau. <br><br><h3>  Apr√®s assemblage - fichier </h3><br>  Nous n'avons pas commenc√© √† faire l'affaire √† partir de z√©ro.  C'est cher, long et difficile.  Nous avons d√©cid√© d'utiliser l'un des bo√Ætiers standard disponibles sur le march√©.  La carte a √©t√© initialement con√ßue pour un cas sp√©cifique.  L'affaire a √©t√© choisie "plus jolie" - italienne.  Oh, comme nous nous tourmentions alors avec cette Italie!  Mais plus √† ce sujet plus tard. <br><br>  Le corps du tout premier ¬´produit¬ª, en fait un prototype, nous avons frais√© manuellement avec un dremel, apport√© avec une lime.  Il s'est av√©r√©, bien s√ªr, pas tr√®s pr√©cis.  Et le pas des trous pour les LED "flottait", et les trous rectangulaires √©taient compl√®tement in√©gaux.  Mais pour comprendre √† quoi cela ressemblera et, plus important encore, pour mettre la carte dans le bo√Ætier, il s'est av√©r√©. <br><br><img src="https://habrastorage.org/files/f6d/6b3/5df/f6d6b35dfb0c453790407cc1c8d0f3cd.jpg" height="450"><br>  Premier b√¢timent <br><br>  Nous avions peur que les connecteurs n'arrivent pas l√† o√π on en avait besoin, que nous fassions quelque part.  En g√©n√©ral, il y a eu quelques erreurs, mais √©tonnamment, il n'y a rien de fatal.  Ici et l√†, il √©tait n√©cessaire de d√©placer les connecteurs 1-2 mm et tout.  Nous avons d√©plac√© les connecteurs, les LED et les ouvertures du bo√Ætier vers le suivant, probablement les r√©visions 10-15.  Tout le temps, il y avait quelque chose √† am√©liorer.  Imm√©diatement pour tout faire parfaitement n'a pas fonctionn√©.  Le connecteur Wi-Fi devait g√©n√©ralement √™tre remplac√© par un connecteur non standard et plus long.  Parce que  certaines antennes ne voulaient pas s'enrouler sur des fils courts. <br><br><h3>  Ventes </h3><br>  Que faire lorsque le premier prototype est pr√™t?  Vendez-le tout de suite!  Mais est-il facile de montrer au client un appareil industriel qui interagit avec d'autres appareils?  Nous avons assembl√© une valise de d√©monstration dans laquelle nous avons plac√© le jeu de gentleman minimum - PLC, alimentation, panneau IHM et bien s√ªr WebHMI. <br><br><img src="https://habrastorage.org/files/5d8/21d/b6b/5d821db6b73f4d9dab633472c60c407b.jpg" width="580"><br>  Valise de d√©monstration <br><br>  Cette valise a permis des d√©monstrations ¬´sur le terrain¬ª - dans les locaux du client, et en m√™me temps, elle avait une mobilit√© qui lui permettait de se d√©placer d'un endroit √† l'autre, de s'allumer et s'√©teindre rapidement.  Soit dit en passant, presque inchang√©, il est utilis√© par nous √† ce jour. <br><br>  Apr√®s avoir pr√©sent√© le prototype au client et re√ßu l'approbation de lui, nous avons d√©cid√© de fabriquer le premier lot de 5 √† 10 appareils.  Comme c'est difficile et injustifiable dans notre pays! <br><br><h3>  Aller √† la s√©rie </h3><br>  Le panneau prototype a √©t√© fabriqu√© √† la maison.  Mais la fabrication de 12 cartes simples √† deux couches en galvanoplastie a co√ªt√© de l'argent √† l'√©poque (plus de 100 $, semble-t-il).  Mais la qualit√© des planches et surtout de la soie m'a fait pleurer - presque artisanal.  Ensuite, ils ont essay√© de commander √† l'usine d'Etal.  Ont √©galement √©t√© d√©√ßus. <br><br><img src="https://habrastorage.org/files/03a/a33/0c7/03aa330c70b443d9a005e4c0377618bf.jpg"><br>  √Ä gauche, le panneau de production de l'usine d'Etal.  √Ä droite, la Chine. <br><br>  Bien plus tard, lorsque nous avons command√© les planches d√©j√† en Chine, nous avons de nouveau pleur√©.  La qualit√© √©tait compar√©e au domestique comme le ciel et la terre!  Soie transparente, trous exactement au centre des coussinets, masque de soudure dense et uniforme.  La qualit√© est de deux ordres de grandeur sup√©rieure √† la production locale √† un prix trois fois inf√©rieur ... Alors qui soutiendra le producteur national apr√®s cela? <br><br><img src="https://habrastorage.org/files/ee7/101/f47/ee7101f47463423f9b8305d928dfa416.jpg"><br>  Planches de Chine.  Aurix est le nom de code du projet. <br><br>  Des accessoires ont √©t√© achet√©s.  Les panneaux sont assembl√©s, v√©rifi√©s.  Mais les b√¢timents √©taient en difficult√©. <br><br>  Nous avions environ 5 √©chantillons de caisses sous la main, que nous voulions fraiser sur CNC et y inscrire.  Mais depuis  nous avons une petite diffusion, et le produit est beaucoup plus compliqu√© que le souverain qui est familier aux annonceurs, il √©tait difficile de trouver ceux qui voulaient honorer notre commande.  Presque irr√©aliste.  Le bo√Ætier que nous avons est de forme complexe, pour imprimer dessus, vous devez utiliser une tampographie.  Et c'est bien quand il y a une grande circulation car  l'ajustement et l'ajustement du processus est une entreprise complexe et d√©sagr√©able.  Nous avons obtenu beaucoup d'impressions sur seulement 5 b√¢timents.  Personne ne voulait occuper un poste aussi ingrat parce que vous ne gagneriez pas d'argent avec.  Avec CNC, l'histoire est similaire. <br><br>  Avec un deuil de moiti√©, il s'est av√©r√© √™tre d'accord avec quelques gars et en quelques semaines, nous avons eu 4 ensembles de cas dans lesquels il y avait des ouvertures au besoin et des inscriptions au besoin.  Que les inscriptions soient d'une couleur terrible et loin d'√™tre parfaitement imprim√©es, mais elles l'√©taient. <br><br><img src="https://habrastorage.org/files/570/7f9/9e4/5707f99e457344c58c82831b7cf18126.jpg" width="800"><br>  Les premiers produits commerciaux dans le cas. <br><br>  Mais alors que l'√©pop√©e avec les b√¢timents a dur√©, nous avons d√©j√† pu vendre le premier appareil!  Besoin urgent de mettre quelque chose au client sur l'objet.  Il n'y avait pas de b√¢timents pr√™ts √† l'emploi.  Ainsi, le premier appareil commercial a √©galement √©t√© frais√© manuellement sur le balcon et √©tait sans inscription.  Le corps n'√©tait disponible que d'un vert extravagant.  Mais tout cela n'√©tait pas important.  Il est important qu'ils nous paient - cela signifie que nous faisons ce dont les gens ont besoin. <br><br><img src="https://habrastorage.org/files/ef0/4a8/b0b/ef04a8b0b6994200b3f515c702978dec.jpg" width="800"><br>  Bapt√™me de bataille <br><br><h3>  Travailler en milieu industriel </h3><br>  Dans cette installation, nous avons rencontr√© pour la premi√®re fois ce qu'on appelle industriel - le bruit, la poussi√®re, les micros.  Organiser une connexion stable via le bus RS-485 ¬´sur la table¬ª n'est pas un exemple plus facile que sur un objet r√©el.  Notre connexion √©tait constamment bogu√©e.  Combien nous avons tourment√© avec ce pneu!  Mais, comme il s'est av√©r√© plus tard, la faute √©tait ... une pointe sur le c√¢ble.  Entre la terre et les lignes de signaux A et B, une diff√©rence de potentiel allant jusqu'√† 40 V est apparue, puis√©e de fa√ßon al√©atoire.  Et c'est sur un c√¢ble de 50 cm de long!  De plus, la pointe n'√©tait visible que sur l'oscilloscope.  Sur le voltm√®tre, tout √©tait dans les limites normales.  Apr√®s avoir √©limin√© la cause de l'interf√©rence, nous avons stabilis√© la connexion et obtenu un syst√®me de travail.  Nous avons pu remettre le travail et obtenir la prochaine commande. <br><br>  Presque imm√©diatement, nous avons r√©alis√© que la vente de l'appareil nous-m√™mes √©tait une t√¢che impossible.  Vous devez conna√Ætre le client, avoir une relation avec lui, comprendre ses besoins.  Il est si facile d'entrer et de vendre un produit nouveau et unique.  Nous ne vendrons pas grand-chose.  Beaucoup de gens ne comprennent toujours pas imm√©diatement ce qu'est WebHMI lorsque nous essayons de leur parler du syst√®me.  Par cons√©quent, nous avons d√©cid√© de faire des ventes par le biais de revendeurs int√©grateurs - c'est ainsi que le produit sera propos√© directement par l'int√©grateur.  Et il conna√Æt d√©j√† ses clients, il a une grande base de donn√©es de contacts, il peut non seulement vendre du mat√©riel, mais aussi r√©aliser un projet sur cette base.  Et le client satisfera et gagnera. <br><br>  Par cons√©quent, nous avons commenc√© √† n√©gocier avec des partenaires potentiels.  Et tr√®s rapidement, nous avons pu entrer dans un projet int√©ressant.  Dans une usine m√©tallurgique, un syst√®me √©tait n√©cessaire pour surveiller les param√®tres de fonctionnement des fours dans lesquels la contrainte est supprim√©e des tuyaux lamin√©s.  Litt√©ralement, d√®s que les premiers b√¢timents ont √©t√© pr√™ts, deux d'entre eux ont √©t√© vendus dans ce projet. <br><br>  Sur ce projet, nous avons d√©tect√© tout un tas de probl√®mes.  Et ceux qui n'√©taient pas suspect√©s.  Le logiciel a d√ª √™tre consid√©rablement modifi√© pour optimiser le syst√®me.  Nous avons ressenti ce qu'est une fuite de m√©moire, ce qui d√©bogue un syst√®me dans une autre ville.  La plate-forme mat√©rielle a √©galement d√ª √™tre refaite presque √† partir de z√©ro!  Initialement, nous supposions que WebHMI serait aliment√© par une alimentation √©lectrique industrielle 24V de bonne qualit√©.  Par cons√©quent, ils ne se pr√©occupaient pas particuli√®rement de l'immunit√© au bruit.  Mais dans les conditions industrielles, tout ne fonctionne pas du tout, comme dans la vie quotidienne. <br><br>  L'une des WebHMI vendues sur place s'est √©cras√©e en quelques minutes de fonctionnement.  Ce que nous n'avons tout simplement pas essay√©, et diff√©rents blocs d'alimentation et filtres, et anneaux de ferrite, blind√©s et mis √† la terre tout ce qu'ils pouvaient.  Rien n'a aid√©.  De plus, le deuxi√®me WebHMI sur un autre four fonctionnait de mani√®re stable.  En cons√©quence, nous avons compl√®tement refait les circuits de WebHMI, en ajoutant des filtres tr√®s puissants contre les interf√©rences d'entr√©e sur l'alimentation. <br><br><h3>  Deuxi√®me g√©n√©ration </h3><br>  En outre, de nombreux autres composants ont √©t√© remplac√©s, de nombreux autres ont √©t√© ajout√©s.  La m√©moire n'√©tait pas sous la forme d'un module USB, mais sous la forme d'une carte SD.  Il y avait une batterie Li-Po pour pouvoir terminer correctement le travail et, si d√©sir√©, pouvoir travailler jusqu'√† deux heures de mani√®re autonome.  Cela vous permet de survivre √† de courtes coupures de courant sans arr√™ter ni red√©marrer.  Vous pouvez √©galement envoyer un signal de d√©tresse √† des syst√®mes de niveau sup√©rieur.  Ils ont ajout√© la possibilit√© de couper l'alimentation du connecteur USB externe pour r√©initialiser les modems 3G externes qui aiment se bloquer p√©riodiquement.  Nous avons essay√© diff√©rents concentrateurs, des formateurs de bus RS-485. <br><br>  Le bus RS-485 a rencontr√© de nombreuses difficult√©s.  Habituellement, ils sont dus au fait que les int√©grateurs n'aiment vraiment pas acheter un c√¢ble sp√©cial pour RS-485.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu d'un c√¢ble sp√©cial co√ªteux, ils utilisent un c√¢ble √† paire torsad√©e ordinaire, consid√©rant qu'il s'agit d'un remplacement √©gal. </font><font style="vertical-align: inherit;">La confusion apporte √©galement un malentendu de leur part sur les bases de ce pneu. </font><font style="vertical-align: inherit;">Le mythe est r√©pandu que pour le fonctionnement de ce bus, seuls deux fils suffisent - A et B. Mais ce n'est pas le cas. </font><font style="vertical-align: inherit;">Lorsque vous travaillez dans un environnement industriel, sur un bus long et lorsque tous les appareils sont aliment√©s par diff√©rentes alimentations ou m√™me phases, des diff√©rences de potentiel se produisent et un troisi√®me fil commun est essentiel pour √©galiser les potentiels. </font><font style="vertical-align: inherit;">En outre, un √©cran est hautement souhaitable. </font><font style="vertical-align: inherit;">Maintenant, nous utilisons un conformateur √† isolation galvanique RS-485. </font><font style="vertical-align: inherit;">Cela am√©liore la fiabilit√©. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s la sortie de la version mise √† jour du mat√©riel, nous avons remplac√© tous les appareils pr√©c√©demment install√©s par de nouvelles versions pour notre propre tranquillit√© d'esprit.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fiabilit√© </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebHMI peut survivre √† de nombreuses erreurs d'√©dition √† faible taux sanguin. Mais certains d'entre eux n√©cessitent de contacter notre ing√©nieur de service. Le divertissement pr√©f√©r√© des int√©grateurs est de fournir 230 V √† RS-485. Soit dit en passant, ce sont les seules raisons de contacter pour des r√©parations! Si vous ne violez pas notre √©quipement avec une mauvaise installation, alors tout fonctionne comme une horloge depuis de nombreuses ann√©es. </font></font><br><br><img src="https://habrastorage.org/files/797/f86/950/797f86950fed4b489f8848d68660e605.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les cons√©quences de la connexion de 230V au bus RS-485. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec les lecteurs flash, nous avons √©galement rencontr√© de nombreux probl√®mes diff√©rents. Il est utilis√© pour stocker des images et des bases de donn√©es avec des journaux, des graphiques et toutes les autres donn√©es accumul√©es. Le DOM USB (Disk-On-Module) que nous avons utilis√© initialement √©tait rare, de qualit√© et de vitesse instables, de petit volume et de disponibilit√© impr√©visible. En cons√©quence, nous sommes pass√©s aux cartes m√©moire industrielles. Avec les cartes m√©moire, il y avait une saga distincte.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebHMI est d√©sormais livr√© sans carte m√©moire, comme chacun a besoin d'un montant diff√©rent. Les cartes industrielles sont nettement plus ch√®res que les cartes commerciales. Par cons√©quent, nous laissons le choix de la carte au client - un trop gros plug dans le prix et le volume de la carte. 1 Go est suffisant pour quelqu'un et donne 32 Go √† quelqu'un. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous recommandons √† tous d'utiliser des cartes industrielles. Mais de nouveaux clients, apparemment d√©sireux d'√©conomiser de l'argent, essaient d'utiliser des cartes commerciales provenant d'un √©tal voisin. Il n'y a aucune diff√©rence pour eux - s'il est √©crit qu'il s'agit d'une carte SD, cela devrait fonctionner.</font></font> Est-ce logique?  Non.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces cartes ne durent pas longtemps. </font><font style="vertical-align: inherit;">Et tant que le client n'a pas perdu ses donn√©es, il ne veut pas croire que toutes les cartes ne sont pas identiques. </font><font style="vertical-align: inherit;">Les cartes commerciales peuvent "mourir" en quelques semaines seulement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä la recherche d'une solution, nous sommes arriv√©s √† la conclusion que, avec l'appareil, nous proposons de nous acheter imm√©diatement une carte industrielle, pour ainsi dire ¬´d'une seule source¬ª. </font><font style="vertical-align: inherit;">Pour proposer un produit en qui nous avons confiance, j'ai d√ª faire beaucoup de recherches. </font><font style="vertical-align: inherit;">Comparez de nombreuses cartes diff√©rentes de diff√©rents fabricants, testez la vitesse d'enregistrement, conduisez-les longtemps dans des conditions industrielles. </font><font style="vertical-align: inherit;">Essayez diff√©rents fournisseurs. </font></font><br><br><img src="https://habrastorage.org/files/1df/50a/cb3/1df50acb30904af0beb5056f015701ea.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transcendez les repr√©sentants dans notre bureau. </font><font style="vertical-align: inherit;">Nous discutons de leurs produits.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jouons √† Tetris? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Une nouvelle r√©vision de la carte a exig√© un endroit pour installer des composants encombrants suppl√©mentaires. </font></font> Parce que<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme il n'y avait plus d'espace dans le bo√Ætier, j'ai d√ª r√©fl√©chir √† la fa√ßon de mettre tout cela √† l'int√©rieur d'un endroit d√©sign√©. Nous avons trouv√© un sandwich √† trois plats. Cela a permis d'utiliser la totalit√© du volume corporel. Mais cela a √©galement apport√© des probl√®mes suppl√©mentaires √† la logistique et √† l'emballage.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il √©tait n√©cessaire de trouver des racks de longueur rare, de comprendre comment transf√©rer beaucoup de signaux entre les cartes (les en-t√™tes standard de 2,54 mm prennent trop de place). Pour comprendre comment transf√©rer une autre tonne de signaux sur le panneau avant, sur lesquels des LED suppl√©mentaires pour indiquer la pr√©sence de la connexion Internet et VPN, et un bouton de r√©initialisation pour les param√®tres r√©seau ont √©t√© ajout√©s. Tout cela a n√©cessit√© la recherche de divers composants, de leurs fournisseurs, la coordination des dispositions, des mesures de toutes les dimensions avec un √©trier et des raccords dans le bo√Ætier, la production de lots d'essai et la reprise. Les planches sont devenues multicouches. Ce processus a pris beaucoup de force, de nerfs et de temps. Probablement six mois.</font></font><br><br><img src="https://habrastorage.org/files/623/e1c/654/623e1c6548dc47418ef5b910879bbcc4.jpg" width="800"><br><br><img src="https://habrastorage.org/files/18b/314/c9c/18b314c9c1bc4a959b54083ec4012f01.jpg" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici vous pouvez voir le num√©ro de r√©vision interne de la carte V05.34L4. Il est d√©crypt√© simplement - la 5e g√©n√©ration de conception, la 34e r√©vision. Pensez-y, nous avons dessin√©, r√©alis√© et test√© 34 modifications des planches avant d'arriver √† ce stade! C‚Äôest un excellent moyen. Soit dit en passant, apr√®s cela, il n'y a eu que deux petites modifications. </font></font><br><br><img src="https://habrastorage.org/files/41b/43a/53c/41b43a53cdb8491a98168213dae99912.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparence de l'appareil</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ext√©rieurement, WebHMI a √©galement anobli. La couleur des inscriptions est devenue grise, nous avons appris √† appliquer les inscriptions nous-m√™mes. Nous n'avons pu r√©soudre le probl√®me du broyage dans notre pays en petits lots pour de l'argent suffisant que temporairement. Nous avons frais√© des pi√®ces de 50 caisses, puis le magasin a ferm√©. Maintenant, les √©tuis sont usin√©s chez nous en Italie par le fabricant d'√©tuis. Mais les inscriptions que nous avons appris √† faire nous-m√™mes. Nous avons achet√© une machine de tampographie, ma√Ætrisant la technologie d'impression. √áa se passe tr√®s bien, encore mieux que les Italiens. C'est compr√©hensible - nous pouvons nous permettre de l√©cher le processus d'impression sur notre bo√Ætier √† l'id√©al. nous avons un produit. Nous avons modifi√© la presse √† imprimer, fait nos propres ajustements - en g√©n√©ral, nous nous sommes tromp√©s. Mais √ßa valait le coup. Rencontre - sur les v√™tements. </font></font><br><br><img src="https://habrastorage.org/files/f41/c0c/f64/f41c0cf643c942b2be0bb5b4c1923abe.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre machine au moment de l'achat</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En g√©n√©ral, il nous est tr√®s difficile de travailler avec des Italiens. Ils sont lents, r√©fl√©chissent bien, r√©pondent aux exigences au fil du temps. Constamment, quelque part, oui, ils vont foirer. Nous avons d√©j√† accumul√© une montagne de b√¢timents d√©fectueux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, la plate-forme mat√©rielle est d√©bogu√©e et stable depuis longtemps. Il est assembl√© sur une cha√Æne de montage automatique. Depuis environ deux ans, nous n'y apportons plus de modifications. Mais des logiciels se d√©veloppent chaque jour. Habituellement, nous publions un nouveau firmware une fois par mois avec des changements, des am√©liorations et des probl√®mes de correction trouv√©s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s raffinement du ¬´fer¬ª pour un fonctionnement stable dans les conditions de l'atelier m√©tallurgique, nous dormons paisiblement. </font><font style="vertical-align: inherit;">Maintenant, toutes les autres applications nous semblent un jardin d'enfants - WebHMI survivra presque partout. </font><font style="vertical-align: inherit;">Maintenant, il est utilis√© dans des endroits divers et inattendus - des entreprises de boulangerie aux brasseries, des usines m√©tallurgiques aux chemins de fer et aux ports, des magasins aux complexes sportifs. </font><font style="vertical-align: inherit;">Et, bien s√ªr, des objets distribu√©s - serres, chaufferies au gaz et √©lectriques, stations de pompage, stations d'√©change, syst√®mes d'irrigation. </font><font style="vertical-align: inherit;">La seule limitation significative est la plage de temp√©rature de 0 √† + 50 ¬∞ C. </font><font style="vertical-align: inherit;">Elle est limit√©e par la pr√©sence d'une batterie Li-Po et ses param√®tres de fonctionnement.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Emballage </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Une t√¢che int√©ressante a √©t√© la cr√©ation d'emballages. </font></font> Parce que<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme notre produit n'√©tait pas fabriqu√© en tr√®s gros lots, nous ne voulions pas commander plusieurs milliers de colis √† la fois - c'√©tait de l'argent gel√© et un endroit mort pour le stockage au bureau. Par cons√©quent, l'emballage a √©t√© fait par nous-m√™mes. Nous avons command√© la d√©coupe de mousse sur un laser et coll√© le logement en tant que vente. Nous le mettons dans des bo√Ætes en carton appropri√©es de taille standard. L'image sur les bo√Ætes nous est appliqu√©e par la soie par le ma√Ætre familier. Cela se r√©v√®le magnifiquement et pratiquement. Bien que couper la mousse soit une occupation d√©sagr√©able. Il s'efforce toujours de s'enflammer, fume, pue. Cela s'av√®re co√ªteux, beaucoup de mariage. Mais le r√©sultat final est g√©nial. √áa a l'air cher. Rencontre, apr√®s tout, sur les v√™tements. Et l'appareil est prot√©g√© de mani√®re fiable pendant le transport. </font></font><br><br><img src="https://habrastorage.org/files/a60/eee/2cf/a60eee2cf0be4c968228af4f14ae858d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparence de l'emballage</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous avons trouv√© quelques bons revendeurs et int√©grateurs, et nous travaillons toujours avec beaucoup. Nous ne sommes pas engag√©s dans la vente directe, mais nous travaillons au d√©veloppement d'un r√©seau de concessionnaires. Nous aidons les revendeurs, si n√©cessaire, √† participer √† des s√©minaires, des expositions, √† former leur personnel √† travailler avec WebHMI. D√©velopper un r√©seau de concessionnaires est √©galement une t√¢che int√©ressante et fascinante. Les concessionnaires s'efforcent constamment de voler les clients les uns des autres, se querellent. Et nous devons reconstruire le syst√®me afin qu'il soit int√©ressant pour les concessionnaires de travailler et que les clients soient satisfaits. </font></font><br><br><img src="https://habrastorage.org/files/fb2/381/677/fb2381677faf4edbb0774319421c3135.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atelier WebHMI</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les s√©minaires posent beaucoup de questions int√©ressantes. Certains d'entre eux conduisent √† une am√©lioration du firmware. Mais il y a des choses dr√¥les. Je me souviens d'un homme qui, lors d'un s√©minaire, essayait de comprendre d'o√π nous avions ¬´l√©ch√©¬ª l'appareil. Il a essay√© d'aller au fond de tout ce qui pouvait nous convaincre de plagiat. Son argument le plus fort √©tait qu'√† cette √©poque, nous n'avions que l'anglais dans l'interface - suppos√©ment parce que nous avons pris des logiciels √©trangers et les avons pass√©s pour les n√¥tres. Nous avons maintenant plusieurs langues d'interface, dont l'anglais et le russe. Et puis nous avons m√™me √©t√© un peu surpris par sa pression et sa m√©fiance. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä titre exp√©rimental, il y a quelques ann√©es, nous avons pr√©sent√© un stand de d√©monstration avec WebHMI au d√©partement d'automatisation de la National Mining University. Il n'a pas encore apport√© beaucoup de fruits, mais nous ne sommes pas f√¢ch√©s - que se passe-t-il s'il ¬´tire¬ª soudainement plus tard?</font></font><br><img src="https://habrastorage.org/files/77f/d25/52b/77fd2552b8a440d498bedf1d1248ef96.jpg" height="400"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stand universitaire </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √âpilogue </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour r√©sumer, je veux dire que la fa√ßon de d√©velopper un appareil industriel est passionnante, √©pineuse et impr√©visible. </font><font style="vertical-align: inherit;">Assembler un prototype est une affaire de plusieurs semaines. </font><font style="vertical-align: inherit;">Mais cr√©er un appareil complexe fonctionnant de mani√®re stable commercialement n'est m√™me pas une question d'un an. </font><font style="vertical-align: inherit;">Si vous ressentez la force de marcher dessus - avec plus d'audace.</font></font> La route sera domin√©e par la marche.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais soyez patient - tout n'est pas aussi simple qu'il y para√Æt √† premi√®re vue. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©solvez de vrais probl√®mes - il est alors beaucoup plus facile de vendre vos produits. </font><font style="vertical-align: inherit;">Nous avons maintenant d√©velopp√© plusieurs produits satellites suppl√©mentaires qui compl√®tent avec succ√®s WebHMI et r√©solvent certains probl√®mes urgents lors de la construction de syst√®mes de surveillance et de r√©partition. </font><font style="vertical-align: inherit;">Les prototypes ont √©t√© vendus tr√®s rapidement m√™me sans inscriptions et dans des b√¢timents technologiques. </font><font style="vertical-align: inherit;">Et derri√®re les premiers lots un petit, mais n√©anmoins une file de personnes souhaitant les acheter √©tait d√©j√† align√©e.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr402049/">https://habr.com/ru/post/fr402049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr402039/index.html">Google √©limine les Chromebooks Pixel</a></li>
<li><a href="../fr402041/index.html">L'avenir radieux de l'√©nergie solaire</a></li>
<li><a href="../fr402043/index.html">Comprendre Virtual 7.1 avec HyperX Cloud Revolver S</a></li>
<li><a href="../fr402045/index.html">Syst√®me de refroidissement bricolage pour routeur CNC</a></li>
<li><a href="../fr402047/index.html">Fraisage de PCB √† domicile</a></li>
<li><a href="../fr402051/index.html">La NASA propose de restaurer l'atmosph√®re de Mars avec un bouclier magn√©tique</a></li>
<li><a href="../fr402055/index.html">Petits r√©acteurs comme alternative aux centrales de r√©acteurs modernes</a></li>
<li><a href="../fr402057/index.html">FiiO X3 II: un bon son dans votre poche peut se permettre</a></li>
<li><a href="../fr402059/index.html">Robert Sheckley et moi testons une imprimante 3D START modulaire - partie 1</a></li>
<li><a href="../fr402061/index.html">Les chercheurs ont d√©velopp√© une technologie pour d√©congeler rapidement les tissus cryoconserv√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>