<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎪 🛶 🧔🏿 La voie difficile d'une idée à un système de surveillance industriel commercial 😌 🔍 👩🏻‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je veux partager mon expérience et parler du chemin que nous avons parcouru, en développant le complexe industriel de logiciels et d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La voie difficile d'une idée à un système de surveillance industriel commercial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402049/">  Dans cet article, je veux partager mon expérience et parler du chemin que nous avons parcouru, en développant le complexe industriel de logiciels et de matériel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebHMI</a> pour la surveillance des systèmes d'ingénierie.  Sous la coupe, beaucoup de photos. <br><br><img src="https://habrastorage.org/files/4b6/ae5/6c5/4b6ae56c56d6490a84c99e3617454089.jpg"><br><br>  L'histoire de WebHMI a commencé au printemps 2013.  Ensuite, je me suis enthousiasmé par l'idée d'une maison intelligente et j'ai fabriqué à loisir toutes sortes de jouets pour allumer automatiquement les lumières des toilettes, collecter les lectures des compteurs d'eau, etc.  Une fois que mon ami a regardé le système résultant et a pensé qu'il pouvait être vendu, nous avons commencé à réfléchir à comment et à qui.  Mais il s'est avéré en quelque sorte pas élégant.  Un peu plus tard, il a eu une idée différente: il a trouvé une niche vacante sur le marché des systèmes d'automatisation industrielle.  Et nous l'avons implémenté. <br><a name="habracut"></a><br><h3>  Prologue </h3><br>  La situation était telle que les solutions existantes sur le marché de l'automatisation étaient bien adaptées aux grandes usines avec des budgets de plusieurs millions de dollars, mais étant donné l'encombrement et le coût élevé, elles étaient totalement inacceptables pour les moyennes et petites entreprises.  Les solutions classiques pour la surveillance des processus technologiques, les systèmes SCADA, coûtent beaucoup d'argent, nécessitent un puissant PC industriel, des licences OS et DB, nécessitent de nombreuses heures de travail d'un ingénieur qualifié pour configurer le logiciel et créer un projet.  Si vous avez, par exemple, une petite serre, vous ne pourrez probablement pas investir des dizaines de milliers de dollars dans un système de surveillance de plusieurs dizaines de paramètres.  Et si ces serres, disons, 10-20?  Et s'ils sont géographiquement espacés?  Le coût de tels systèmes s'envole immédiatement au paradis, mais en même temps, ils résolvent encore mal les «petits» problèmes.  Et totalement inadapté aux systèmes distribués. <br><br>  De l'autre côté de l'échelle, il y avait des panneaux IHM.  Ils ont un coût relativement faible (à partir de quelques centaines d'euros) et vous permettent de créer une interface opérateur locale pour tout petit système.  En règle générale - une installation.  Cependant, ces panneaux ont des fonctionnalités très limitées et ne répondent pas aux besoins des clients modernes. <br><br>  Nous visons la niche entre les grands systèmes SCADA et les panneaux IHM.  Nous avons commencé à chercher des options pour ce qui peut être utilisé comme plate-forme logicielle et matérielle.  Il est rapidement devenu évident que tout devrait être fait par nous-mêmes, sinon cela ne fonctionnerait pas pour gagner de l'argent sur la solution.  Un PC industriel prêt à l'emploi rendra la solution trop chère et sans intérêt pour le client, ou ne rapportera pas d'argent.  Il n'y avait pas non plus de logiciel fini. <br><br><img src="https://habrastorage.org/files/c5a/29e/082/c5a29e082be94f258af66e0e502cf7e6.jpg"><br>  PC industriel que nous n'avons pas utilisé <br><br>  Pour l'avenir, je dirai que nous avons réussi à créer un produit dont la valeur est comparable à celle du panneau IHM, mais qui offre des fonctionnalités incomparablement plus importantes.  En fait, un système SCADA complet a été obtenu.  De plus, pour le développement de projets basés sur celui-ci, aucun logiciel supplémentaire n'est requis - le développement, ou plutôt la configuration, s'effectue directement dans le navigateur.  Tous les logiciels nécessaires sont inclus et fonctionnent à bord. <br><br>  Le processus de développement de tout appareil, et plus encore industriel, est fondamentalement différent du développement logiciel.  Ici, le prix d'erreur est incomparablement plus élevé.  Le cycle de «faire des changements - vérifier le résultat» dure des semaines car  la modification de la carte nécessite de la commander en production, en assemblage et en mise en service.  Et c'est un long temps de production, un délai de livraison (depuis la Chine), de l'argent pour la logistique, l'assemblage, l'installation, le débogage.  Mais heureusement, au début de notre voyage, nous ne le savions pas.  Sinon, je ne sais pas s'ils décideraient de jouer à ce jeu ou non. <br><br><h3>  Premiers pas </h3><br>  Nous n'avons pas entrepris de développer notre propre PC.  Pour cela, il n'y avait pas d'expérience banale, pas d'argent, pas de personnel adapté.  De plus, les PC classiques sont mal adaptés à notre application.  Nous avons imaginé notre appareil comme une petite boîte qui peut être placée dans l'armoire d'automatisation sur un rail DIN et alimentée à partir de celles déjà disponibles dans l'armoire 24V.  Pour ce faire, nous avons décidé de prendre un System-On-Module (SOM) prêt à l'emploi et d'assembler une «carte mère» avec une source d'alimentation et tous les périphériques dont nous avons besoin.  La tâche semblait assez simple et réalisable en quelques semaines, un maximum de mois. <br><br>  Comme il s'est avéré plus tard, ces termes étaient légèrement optimistes.  Assembler un prototype sur une table et obtenir un appareil industriel fonctionnant de manière stable sont, comme on dit, deux grandes différences.  Le premier plan de travail peut être assemblé sur le genou d'une semaine en deux.  Mais pour finaliser cette mise en page en un produit de série commercial, il nous a fallu un an et demi. <br><br>  Pour la première version du logiciel, nous nous sommes fixé une tâche minimale: travailler avec les protocoles Siemens PPI et Modbus ASCII / RTU.  Parce que  J'avais beaucoup d'expérience dans le développement web, l'interface était à l'origine basée sur les technologies web.  Cela est devenu par la suite une caractéristique clé du produit. <br><br>  Pourquoi exactement ces protocoles?  Nous avons trouvé un client potentiel - un client qui nous était assez fidèle et qui était prêt à tester notre produit pour surveiller son installation d'emballage.  Dans son parc d'équipements, il y avait des automates des familles Siemens S7 200 et Delta DVP.  Maintenant, bien sûr, la liste des protocoles pris en charge est beaucoup plus large.  Vous pouvez même écrire vos propres protocoles en Lua si nécessaire.  Mais nous n'en avons pas rêvé. <br><br>  Ainsi, après avoir obtenu le soutien d'un client potentiel, nous avons commencé à développer notre produit.  Je crois que nous avons pris le bon départ - nous avons résolu un problème spécifique (suivre le nombre de produits fabriqués) et n'avons pas inventé de solution universelle à un problème abstrait.  Sinon, nous serions certainement embourbés dans des désirs sans fin pour ajouter «une autre» fonctionnalité de tueur très importante, qui ne serait pas claire si elle serait utile à au moins quelqu'un dans la vie réelle. <br><br>  À l'avenir, toutes les nouvelles «fonctionnalités» ont été ajoutées uniquement en tant que besoin réel.  Quand il fait déjà très chaud.  De plus, si une fonctionnalité n'est nécessaire que par un client spécifique et qu'elle ne peut en aucun cas être utile à d'autres clients, nous ne l'ajoutons pas.  Nous ne faisons que ce que nous pouvons «vendre» à quelqu'un d'autre. <br><br>  Pour le débogage, une carte de débogage du fabricant SOM et un tas de cartes maison avec divers sous-systèmes ont été utilisées.  Il s'est donc avéré déboguer le travail des principaux systèmes périphériques sans altération constante de la totalité de la carte de base.  Cela avait déjà été fait lorsque tous les composants étaient prêts et fonctionnaient selon les besoins. <br><br>  Le logiciel a été écrit en parallèle avec le développement de la première révision de la carte.  Je ne parlerai probablement pas en détail du processus de développement logiciel.  de nombreux lecteurs de Giktayms connaissent ce processus.  Je dirai seulement que je devais: <br><br><ul><li>  réviser tant d'approches de développement logiciel </li><li>  repenser le C / C ++ et se faire des amis avec </li><li>  maîtriser le débogage des bugs les plus mystiques qui surviennent une fois par mois à des moments aléatoires sur des systèmes distants et conduire à un plantage du système </li><li>  apprendre à consommer les ressources système de manière très économique </li><li>  optimiser tout ce qui est possible et encore plus </li><li>  apprendre à écrire des logiciels qui fonctionnent pendant des mois sans redémarrer </li></ul><br>  Cela est principalement dû aux ressources très limitées du processeur SOM sélectionné - 400 MHz, 64 Mo de RAM, 16 Mo de mémoire Flash.  Pour créer des sites Web hébergés sur un tel «serveur» - oh, c'est difficile.  Néanmoins, nous avons à bord PHP, une base de données, Nginx et de nombreux autres goodies.  Et tandis que le système peut fonctionner avec une réactivité incroyable - par exemple, vous pouvez dessiner des tendances qui sont mises à jour 20 fois par seconde. <br><br>  La première version du logiciel n'était, disons, qu'un test de l'idée.  Nous avons vérifié plus que sur cette plate-forme en général, il est possible de réaliser ce que nous visons.  Après 3-4 mois de développement, à tout le moins, mais le logiciel a «pris vie».  Nous avons maintenant une interface Web où vous pouvez créer vous-même des écrans pour afficher et visualiser les données de l'automate.  Les données étaient lues en arrière-plan et le navigateur mettait constamment à jour les informations sur un ordinateur, une tablette ou un téléphone en temps réel.  L'orientation vers le Web est devenue la pierre angulaire de notre produit - elle vous permet d'utiliser presque n'importe quel système d'exploitation et n'importe quel appareil pour afficher l'interface opérateur, du téléphone à la Smart TV.  Il vous permet également de vous intégrer de manière flexible dans l'infrastructure réseau, de travailler à distance via Internet, etc. <br><br>  Notre premier projet consistait en deux douzaines de registres (variables lues depuis l'automate).  Ensuite, nous avons prévu que WebHMI serait utilisé uniquement pour surveiller les petits systèmes isolés.  Comme nous étions humbles et peu sûrs alors!  Maintenant, nos clients ont des projets d'automatisation pour les magasins et les complexes sportifs, où il y a deux mille registres chacun.  Mais entre la première version alpha et la version actuelle du logiciel, il y a eu plus de trois ans de développement, de débogage et d'optimisation minutieux. <br><br>  À peu près au moment où la première version alpha du logiciel était prête, notre ingénieur matériel a conçu et fabriqué la première version du circuit imprimé de l'appareil.  Nous étions heureux de pouvoir enfin tenir notre idée dans nos mains pour la première fois!  C'est un sentiment indescriptible.  Nous éclations de fierté du fait que c'est nous qui avons fabriqué cet appareil.  C'était alors encore comme un vilain petit canard - effrayant.  Mais le sien, cher. <br><br><img src="https://habrastorage.org/files/ead/f95/4b5/eadf954b59444060ad24bf0ffad054ea.jpg" width="800"><br>  La première planche.  Fabriqué à la maison.  Maintenant, elle travaille dans notre bureau. <br><br><h3>  Après assemblage - fichier </h3><br>  Nous n'avons pas commencé à faire l'affaire à partir de zéro.  C'est cher, long et difficile.  Nous avons décidé d'utiliser l'un des boîtiers standard disponibles sur le marché.  La carte a été initialement conçue pour un cas spécifique.  L'affaire a été choisie "plus jolie" - italienne.  Oh, comme nous nous tourmentions alors avec cette Italie!  Mais plus à ce sujet plus tard. <br><br>  Le corps du tout premier «produit», en fait un prototype, nous avons fraisé manuellement avec un dremel, apporté avec une lime.  Il s'est avéré, bien sûr, pas très précis.  Et le pas des trous pour les LED "flottait", et les trous rectangulaires étaient complètement inégaux.  Mais pour comprendre à quoi cela ressemblera et, plus important encore, pour mettre la carte dans le boîtier, il s'est avéré. <br><br><img src="https://habrastorage.org/files/f6d/6b3/5df/f6d6b35dfb0c453790407cc1c8d0f3cd.jpg" height="450"><br>  Premier bâtiment <br><br>  Nous avions peur que les connecteurs n'arrivent pas là où on en avait besoin, que nous fassions quelque part.  En général, il y a eu quelques erreurs, mais étonnamment, il n'y a rien de fatal.  Ici et là, il était nécessaire de déplacer les connecteurs 1-2 mm et tout.  Nous avons déplacé les connecteurs, les LED et les ouvertures du boîtier vers le suivant, probablement les révisions 10-15.  Tout le temps, il y avait quelque chose à améliorer.  Immédiatement pour tout faire parfaitement n'a pas fonctionné.  Le connecteur Wi-Fi devait généralement être remplacé par un connecteur non standard et plus long.  Parce que  certaines antennes ne voulaient pas s'enrouler sur des fils courts. <br><br><h3>  Ventes </h3><br>  Que faire lorsque le premier prototype est prêt?  Vendez-le tout de suite!  Mais est-il facile de montrer au client un appareil industriel qui interagit avec d'autres appareils?  Nous avons assemblé une valise de démonstration dans laquelle nous avons placé le jeu de gentleman minimum - PLC, alimentation, panneau IHM et bien sûr WebHMI. <br><br><img src="https://habrastorage.org/files/5d8/21d/b6b/5d821db6b73f4d9dab633472c60c407b.jpg" width="580"><br>  Valise de démonstration <br><br>  Cette valise a permis des démonstrations «sur le terrain» - dans les locaux du client, et en même temps, elle avait une mobilité qui lui permettait de se déplacer d'un endroit à l'autre, de s'allumer et s'éteindre rapidement.  Soit dit en passant, presque inchangé, il est utilisé par nous à ce jour. <br><br>  Après avoir présenté le prototype au client et reçu l'approbation de lui, nous avons décidé de fabriquer le premier lot de 5 à 10 appareils.  Comme c'est difficile et injustifiable dans notre pays! <br><br><h3>  Aller à la série </h3><br>  Le panneau prototype a été fabriqué à la maison.  Mais la fabrication de 12 cartes simples à deux couches en galvanoplastie a coûté de l'argent à l'époque (plus de 100 $, semble-t-il).  Mais la qualité des planches et surtout de la soie m'a fait pleurer - presque artisanal.  Ensuite, ils ont essayé de commander à l'usine d'Etal.  Ont également été déçus. <br><br><img src="https://habrastorage.org/files/03a/a33/0c7/03aa330c70b443d9a005e4c0377618bf.jpg"><br>  À gauche, le panneau de production de l'usine d'Etal.  À droite, la Chine. <br><br>  Bien plus tard, lorsque nous avons commandé les planches déjà en Chine, nous avons de nouveau pleuré.  La qualité était comparée au domestique comme le ciel et la terre!  Soie transparente, trous exactement au centre des coussinets, masque de soudure dense et uniforme.  La qualité est de deux ordres de grandeur supérieure à la production locale à un prix trois fois inférieur ... Alors qui soutiendra le producteur national après cela? <br><br><img src="https://habrastorage.org/files/ee7/101/f47/ee7101f47463423f9b8305d928dfa416.jpg"><br>  Planches de Chine.  Aurix est le nom de code du projet. <br><br>  Des accessoires ont été achetés.  Les panneaux sont assemblés, vérifiés.  Mais les bâtiments étaient en difficulté. <br><br>  Nous avions environ 5 échantillons de caisses sous la main, que nous voulions fraiser sur CNC et y inscrire.  Mais depuis  nous avons une petite diffusion, et le produit est beaucoup plus compliqué que le souverain qui est familier aux annonceurs, il était difficile de trouver ceux qui voulaient honorer notre commande.  Presque irréaliste.  Le boîtier que nous avons est de forme complexe, pour imprimer dessus, vous devez utiliser une tampographie.  Et c'est bien quand il y a une grande circulation car  l'ajustement et l'ajustement du processus est une entreprise complexe et désagréable.  Nous avons obtenu beaucoup d'impressions sur seulement 5 bâtiments.  Personne ne voulait occuper un poste aussi ingrat parce que vous ne gagneriez pas d'argent avec.  Avec CNC, l'histoire est similaire. <br><br>  Avec un deuil de moitié, il s'est avéré être d'accord avec quelques gars et en quelques semaines, nous avons eu 4 ensembles de cas dans lesquels il y avait des ouvertures au besoin et des inscriptions au besoin.  Que les inscriptions soient d'une couleur terrible et loin d'être parfaitement imprimées, mais elles l'étaient. <br><br><img src="https://habrastorage.org/files/570/7f9/9e4/5707f99e457344c58c82831b7cf18126.jpg" width="800"><br>  Les premiers produits commerciaux dans le cas. <br><br>  Mais alors que l'épopée avec les bâtiments a duré, nous avons déjà pu vendre le premier appareil!  Besoin urgent de mettre quelque chose au client sur l'objet.  Il n'y avait pas de bâtiments prêts à l'emploi.  Ainsi, le premier appareil commercial a également été fraisé manuellement sur le balcon et était sans inscription.  Le corps n'était disponible que d'un vert extravagant.  Mais tout cela n'était pas important.  Il est important qu'ils nous paient - cela signifie que nous faisons ce dont les gens ont besoin. <br><br><img src="https://habrastorage.org/files/ef0/4a8/b0b/ef04a8b0b6994200b3f515c702978dec.jpg" width="800"><br>  Baptême de bataille <br><br><h3>  Travailler en milieu industriel </h3><br>  Dans cette installation, nous avons rencontré pour la première fois ce qu'on appelle industriel - le bruit, la poussière, les micros.  Organiser une connexion stable via le bus RS-485 «sur la table» n'est pas un exemple plus facile que sur un objet réel.  Notre connexion était constamment boguée.  Combien nous avons tourmenté avec ce pneu!  Mais, comme il s'est avéré plus tard, la faute était ... une pointe sur le câble.  Entre la terre et les lignes de signaux A et B, une différence de potentiel allant jusqu'à 40 V est apparue, puisée de façon aléatoire.  Et c'est sur un câble de 50 cm de long!  De plus, la pointe n'était visible que sur l'oscilloscope.  Sur le voltmètre, tout était dans les limites normales.  Après avoir éliminé la cause de l'interférence, nous avons stabilisé la connexion et obtenu un système de travail.  Nous avons pu remettre le travail et obtenir la prochaine commande. <br><br>  Presque immédiatement, nous avons réalisé que la vente de l'appareil nous-mêmes était une tâche impossible.  Vous devez connaître le client, avoir une relation avec lui, comprendre ses besoins.  Il est si facile d'entrer et de vendre un produit nouveau et unique.  Nous ne vendrons pas grand-chose.  Beaucoup de gens ne comprennent toujours pas immédiatement ce qu'est WebHMI lorsque nous essayons de leur parler du système.  Par conséquent, nous avons décidé de faire des ventes par le biais de revendeurs intégrateurs - c'est ainsi que le produit sera proposé directement par l'intégrateur.  Et il connaît déjà ses clients, il a une grande base de données de contacts, il peut non seulement vendre du matériel, mais aussi réaliser un projet sur cette base.  Et le client satisfera et gagnera. <br><br>  Par conséquent, nous avons commencé à négocier avec des partenaires potentiels.  Et très rapidement, nous avons pu entrer dans un projet intéressant.  Dans une usine métallurgique, un système était nécessaire pour surveiller les paramètres de fonctionnement des fours dans lesquels la contrainte est supprimée des tuyaux laminés.  Littéralement, dès que les premiers bâtiments ont été prêts, deux d'entre eux ont été vendus dans ce projet. <br><br>  Sur ce projet, nous avons détecté tout un tas de problèmes.  Et ceux qui n'étaient pas suspectés.  Le logiciel a dû être considérablement modifié pour optimiser le système.  Nous avons ressenti ce qu'est une fuite de mémoire, ce qui débogue un système dans une autre ville.  La plate-forme matérielle a également dû être refaite presque à partir de zéro!  Initialement, nous supposions que WebHMI serait alimenté par une alimentation électrique industrielle 24V de bonne qualité.  Par conséquent, ils ne se préoccupaient pas particulièrement de l'immunité au bruit.  Mais dans les conditions industrielles, tout ne fonctionne pas du tout, comme dans la vie quotidienne. <br><br>  L'une des WebHMI vendues sur place s'est écrasée en quelques minutes de fonctionnement.  Ce que nous n'avons tout simplement pas essayé, et différents blocs d'alimentation et filtres, et anneaux de ferrite, blindés et mis à la terre tout ce qu'ils pouvaient.  Rien n'a aidé.  De plus, le deuxième WebHMI sur un autre four fonctionnait de manière stable.  En conséquence, nous avons complètement refait les circuits de WebHMI, en ajoutant des filtres très puissants contre les interférences d'entrée sur l'alimentation. <br><br><h3>  Deuxième génération </h3><br>  En outre, de nombreux autres composants ont été remplacés, de nombreux autres ont été ajoutés.  La mémoire n'était pas sous la forme d'un module USB, mais sous la forme d'une carte SD.  Il y avait une batterie Li-Po pour pouvoir terminer correctement le travail et, si désiré, pouvoir travailler jusqu'à deux heures de manière autonome.  Cela vous permet de survivre à de courtes coupures de courant sans arrêter ni redémarrer.  Vous pouvez également envoyer un signal de détresse à des systèmes de niveau supérieur.  Ils ont ajouté la possibilité de couper l'alimentation du connecteur USB externe pour réinitialiser les modems 3G externes qui aiment se bloquer périodiquement.  Nous avons essayé différents concentrateurs, des formateurs de bus RS-485. <br><br>  Le bus RS-485 a rencontré de nombreuses difficultés.  Habituellement, ils sont dus au fait que les intégrateurs n'aiment vraiment pas acheter un câble spécial pour RS-485.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu d'un câble spécial coûteux, ils utilisent un câble à paire torsadée ordinaire, considérant qu'il s'agit d'un remplacement égal. </font><font style="vertical-align: inherit;">La confusion apporte également un malentendu de leur part sur les bases de ce pneu. </font><font style="vertical-align: inherit;">Le mythe est répandu que pour le fonctionnement de ce bus, seuls deux fils suffisent - A et B. Mais ce n'est pas le cas. </font><font style="vertical-align: inherit;">Lorsque vous travaillez dans un environnement industriel, sur un bus long et lorsque tous les appareils sont alimentés par différentes alimentations ou même phases, des différences de potentiel se produisent et un troisième fil commun est essentiel pour égaliser les potentiels. </font><font style="vertical-align: inherit;">En outre, un écran est hautement souhaitable. </font><font style="vertical-align: inherit;">Maintenant, nous utilisons un conformateur à isolation galvanique RS-485. </font><font style="vertical-align: inherit;">Cela améliore la fiabilité. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après la sortie de la version mise à jour du matériel, nous avons remplacé tous les appareils précédemment installés par de nouvelles versions pour notre propre tranquillité d'esprit.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fiabilité </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebHMI peut survivre à de nombreuses erreurs d'édition à faible taux sanguin. Mais certains d'entre eux nécessitent de contacter notre ingénieur de service. Le divertissement préféré des intégrateurs est de fournir 230 V à RS-485. Soit dit en passant, ce sont les seules raisons de contacter pour des réparations! Si vous ne violez pas notre équipement avec une mauvaise installation, alors tout fonctionne comme une horloge depuis de nombreuses années. </font></font><br><br><img src="https://habrastorage.org/files/797/f86/950/797f86950fed4b489f8848d68660e605.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les conséquences de la connexion de 230V au bus RS-485. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec les lecteurs flash, nous avons également rencontré de nombreux problèmes différents. Il est utilisé pour stocker des images et des bases de données avec des journaux, des graphiques et toutes les autres données accumulées. Le DOM USB (Disk-On-Module) que nous avons utilisé initialement était rare, de qualité et de vitesse instables, de petit volume et de disponibilité imprévisible. En conséquence, nous sommes passés aux cartes mémoire industrielles. Avec les cartes mémoire, il y avait une saga distincte.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebHMI est désormais livré sans carte mémoire, comme chacun a besoin d'un montant différent. Les cartes industrielles sont nettement plus chères que les cartes commerciales. Par conséquent, nous laissons le choix de la carte au client - un trop gros plug dans le prix et le volume de la carte. 1 Go est suffisant pour quelqu'un et donne 32 Go à quelqu'un. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous recommandons à tous d'utiliser des cartes industrielles. Mais de nouveaux clients, apparemment désireux d'économiser de l'argent, essaient d'utiliser des cartes commerciales provenant d'un étal voisin. Il n'y a aucune différence pour eux - s'il est écrit qu'il s'agit d'une carte SD, cela devrait fonctionner.</font></font> Est-ce logique?  Non.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces cartes ne durent pas longtemps. </font><font style="vertical-align: inherit;">Et tant que le client n'a pas perdu ses données, il ne veut pas croire que toutes les cartes ne sont pas identiques. </font><font style="vertical-align: inherit;">Les cartes commerciales peuvent "mourir" en quelques semaines seulement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À la recherche d'une solution, nous sommes arrivés à la conclusion que, avec l'appareil, nous proposons de nous acheter immédiatement une carte industrielle, pour ainsi dire «d'une seule source». </font><font style="vertical-align: inherit;">Pour proposer un produit en qui nous avons confiance, j'ai dû faire beaucoup de recherches. </font><font style="vertical-align: inherit;">Comparez de nombreuses cartes différentes de différents fabricants, testez la vitesse d'enregistrement, conduisez-les longtemps dans des conditions industrielles. </font><font style="vertical-align: inherit;">Essayez différents fournisseurs. </font></font><br><br><img src="https://habrastorage.org/files/1df/50a/cb3/1df50acb30904af0beb5056f015701ea.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transcendez les représentants dans notre bureau. </font><font style="vertical-align: inherit;">Nous discutons de leurs produits.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jouons à Tetris? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Une nouvelle révision de la carte a exigé un endroit pour installer des composants encombrants supplémentaires. </font></font> Parce que<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme il n'y avait plus d'espace dans le boîtier, j'ai dû réfléchir à la façon de mettre tout cela à l'intérieur d'un endroit désigné. Nous avons trouvé un sandwich à trois plats. Cela a permis d'utiliser la totalité du volume corporel. Mais cela a également apporté des problèmes supplémentaires à la logistique et à l'emballage.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il était nécessaire de trouver des racks de longueur rare, de comprendre comment transférer beaucoup de signaux entre les cartes (les en-têtes standard de 2,54 mm prennent trop de place). Pour comprendre comment transférer une autre tonne de signaux sur le panneau avant, sur lesquels des LED supplémentaires pour indiquer la présence de la connexion Internet et VPN, et un bouton de réinitialisation pour les paramètres réseau ont été ajoutés. Tout cela a nécessité la recherche de divers composants, de leurs fournisseurs, la coordination des dispositions, des mesures de toutes les dimensions avec un étrier et des raccords dans le boîtier, la production de lots d'essai et la reprise. Les planches sont devenues multicouches. Ce processus a pris beaucoup de force, de nerfs et de temps. Probablement six mois.</font></font><br><br><img src="https://habrastorage.org/files/623/e1c/654/623e1c6548dc47418ef5b910879bbcc4.jpg" width="800"><br><br><img src="https://habrastorage.org/files/18b/314/c9c/18b314c9c1bc4a959b54083ec4012f01.jpg" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici vous pouvez voir le numéro de révision interne de la carte V05.34L4. Il est décrypté simplement - la 5e génération de conception, la 34e révision. Pensez-y, nous avons dessiné, réalisé et testé 34 modifications des planches avant d'arriver à ce stade! C’est un excellent moyen. Soit dit en passant, après cela, il n'y a eu que deux petites modifications. </font></font><br><br><img src="https://habrastorage.org/files/41b/43a/53c/41b43a53cdb8491a98168213dae99912.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparence de l'appareil</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extérieurement, WebHMI a également anobli. La couleur des inscriptions est devenue grise, nous avons appris à appliquer les inscriptions nous-mêmes. Nous n'avons pu résoudre le problème du broyage dans notre pays en petits lots pour de l'argent suffisant que temporairement. Nous avons fraisé des pièces de 50 caisses, puis le magasin a fermé. Maintenant, les étuis sont usinés chez nous en Italie par le fabricant d'étuis. Mais les inscriptions que nous avons appris à faire nous-mêmes. Nous avons acheté une machine de tampographie, maîtrisant la technologie d'impression. Ça se passe très bien, encore mieux que les Italiens. C'est compréhensible - nous pouvons nous permettre de lécher le processus d'impression sur notre boîtier à l'idéal. nous avons un produit. Nous avons modifié la presse à imprimer, fait nos propres ajustements - en général, nous nous sommes trompés. Mais ça valait le coup. Rencontre - sur les vêtements. </font></font><br><br><img src="https://habrastorage.org/files/f41/c0c/f64/f41c0cf643c942b2be0bb5b4c1923abe.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre machine au moment de l'achat</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En général, il nous est très difficile de travailler avec des Italiens. Ils sont lents, réfléchissent bien, répondent aux exigences au fil du temps. Constamment, quelque part, oui, ils vont foirer. Nous avons déjà accumulé une montagne de bâtiments défectueux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, la plate-forme matérielle est déboguée et stable depuis longtemps. Il est assemblé sur une chaîne de montage automatique. Depuis environ deux ans, nous n'y apportons plus de modifications. Mais des logiciels se développent chaque jour. Habituellement, nous publions un nouveau firmware une fois par mois avec des changements, des améliorations et des problèmes de correction trouvés.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après raffinement du «fer» pour un fonctionnement stable dans les conditions de l'atelier métallurgique, nous dormons paisiblement. </font><font style="vertical-align: inherit;">Maintenant, toutes les autres applications nous semblent un jardin d'enfants - WebHMI survivra presque partout. </font><font style="vertical-align: inherit;">Maintenant, il est utilisé dans des endroits divers et inattendus - des entreprises de boulangerie aux brasseries, des usines métallurgiques aux chemins de fer et aux ports, des magasins aux complexes sportifs. </font><font style="vertical-align: inherit;">Et, bien sûr, des objets distribués - serres, chaufferies au gaz et électriques, stations de pompage, stations d'échange, systèmes d'irrigation. </font><font style="vertical-align: inherit;">La seule limitation significative est la plage de température de 0 à + 50 ° C. </font><font style="vertical-align: inherit;">Elle est limitée par la présence d'une batterie Li-Po et ses paramètres de fonctionnement.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Emballage </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Une tâche intéressante a été la création d'emballages. </font></font> Parce que<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme notre produit n'était pas fabriqué en très gros lots, nous ne voulions pas commander plusieurs milliers de colis à la fois - c'était de l'argent gelé et un endroit mort pour le stockage au bureau. Par conséquent, l'emballage a été fait par nous-mêmes. Nous avons commandé la découpe de mousse sur un laser et collé le logement en tant que vente. Nous le mettons dans des boîtes en carton appropriées de taille standard. L'image sur les boîtes nous est appliquée par la soie par le maître familier. Cela se révèle magnifiquement et pratiquement. Bien que couper la mousse soit une occupation désagréable. Il s'efforce toujours de s'enflammer, fume, pue. Cela s'avère coûteux, beaucoup de mariage. Mais le résultat final est génial. Ça a l'air cher. Rencontre, après tout, sur les vêtements. Et l'appareil est protégé de manière fiable pendant le transport. </font></font><br><br><img src="https://habrastorage.org/files/a60/eee/2cf/a60eee2cf0be4c968228af4f14ae858d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparence de l'emballage</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous avons trouvé quelques bons revendeurs et intégrateurs, et nous travaillons toujours avec beaucoup. Nous ne sommes pas engagés dans la vente directe, mais nous travaillons au développement d'un réseau de concessionnaires. Nous aidons les revendeurs, si nécessaire, à participer à des séminaires, des expositions, à former leur personnel à travailler avec WebHMI. Développer un réseau de concessionnaires est également une tâche intéressante et fascinante. Les concessionnaires s'efforcent constamment de voler les clients les uns des autres, se querellent. Et nous devons reconstruire le système afin qu'il soit intéressant pour les concessionnaires de travailler et que les clients soient satisfaits. </font></font><br><br><img src="https://habrastorage.org/files/fb2/381/677/fb2381677faf4edbb0774319421c3135.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atelier WebHMI</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les séminaires posent beaucoup de questions intéressantes. Certains d'entre eux conduisent à une amélioration du firmware. Mais il y a des choses drôles. Je me souviens d'un homme qui, lors d'un séminaire, essayait de comprendre d'où nous avions «léché» l'appareil. Il a essayé d'aller au fond de tout ce qui pouvait nous convaincre de plagiat. Son argument le plus fort était qu'à cette époque, nous n'avions que l'anglais dans l'interface - supposément parce que nous avons pris des logiciels étrangers et les avons passés pour les nôtres. Nous avons maintenant plusieurs langues d'interface, dont l'anglais et le russe. Et puis nous avons même été un peu surpris par sa pression et sa méfiance. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À titre expérimental, il y a quelques années, nous avons présenté un stand de démonstration avec WebHMI au département d'automatisation de la National Mining University. Il n'a pas encore apporté beaucoup de fruits, mais nous ne sommes pas fâchés - que se passe-t-il s'il «tire» soudainement plus tard?</font></font><br><img src="https://habrastorage.org/files/77f/d25/52b/77fd2552b8a440d498bedf1d1248ef96.jpg" height="400"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stand universitaire </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Épilogue </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour résumer, je veux dire que la façon de développer un appareil industriel est passionnante, épineuse et imprévisible. </font><font style="vertical-align: inherit;">Assembler un prototype est une affaire de plusieurs semaines. </font><font style="vertical-align: inherit;">Mais créer un appareil complexe fonctionnant de manière stable commercialement n'est même pas une question d'un an. </font><font style="vertical-align: inherit;">Si vous ressentez la force de marcher dessus - avec plus d'audace.</font></font> La route sera dominée par la marche.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais soyez patient - tout n'est pas aussi simple qu'il y paraît à première vue. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Résolvez de vrais problèmes - il est alors beaucoup plus facile de vendre vos produits. </font><font style="vertical-align: inherit;">Nous avons maintenant développé plusieurs produits satellites supplémentaires qui complètent avec succès WebHMI et résolvent certains problèmes urgents lors de la construction de systèmes de surveillance et de répartition. </font><font style="vertical-align: inherit;">Les prototypes ont été vendus très rapidement même sans inscriptions et dans des bâtiments technologiques. </font><font style="vertical-align: inherit;">Et derrière les premiers lots un petit, mais néanmoins une file de personnes souhaitant les acheter était déjà alignée.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr402049/">https://habr.com/ru/post/fr402049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr402039/index.html">Google élimine les Chromebooks Pixel</a></li>
<li><a href="../fr402041/index.html">L'avenir radieux de l'énergie solaire</a></li>
<li><a href="../fr402043/index.html">Comprendre Virtual 7.1 avec HyperX Cloud Revolver S</a></li>
<li><a href="../fr402045/index.html">Système de refroidissement bricolage pour routeur CNC</a></li>
<li><a href="../fr402047/index.html">Fraisage de PCB à domicile</a></li>
<li><a href="../fr402051/index.html">La NASA propose de restaurer l'atmosphère de Mars avec un bouclier magnétique</a></li>
<li><a href="../fr402055/index.html">Petits réacteurs comme alternative aux centrales de réacteurs modernes</a></li>
<li><a href="../fr402057/index.html">FiiO X3 II: un bon son dans votre poche peut se permettre</a></li>
<li><a href="../fr402059/index.html">Robert Sheckley et moi testons une imprimante 3D START modulaire - partie 1</a></li>
<li><a href="../fr402061/index.html">Les chercheurs ont développé une technologie pour décongeler rapidement les tissus cryoconservés</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>