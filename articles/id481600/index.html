<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦🏿 🙂 🌆 Mesin Wiki Keluarga Bonsai: Hasil 2019 🚟 👍🏽 🌂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada awal tahun lalu, saya berbicara tentang proyek Bonsai , sebuah mesin untuk membuat wiki keluarga dan album foto open source. Sejak itu, proyek in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mesin Wiki Keluarga Bonsai: Hasil 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481600/">  Pada awal tahun lalu, saya berbicara tentang proyek <a href="https://habr.com/ru/post/438622/">Bonsai</a> , sebuah mesin untuk membuat wiki keluarga dan album foto open source.  Sejak itu, proyek ini terus berkembang.  Sepanjang tahun, beberapa fitur telah dibuat, berkat mesin yang sekarang jauh lebih mudah untuk dicoba sendiri dan lebih menyenangkan untuk digunakan di masa depan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/425/0d5/55a/4250d555a35d58e5d0db8e2e03492d94.jpg" width="400"></div><br><br>  Di bawah cut - details, rencana untuk masa depan dan sedikit hadiah. <a name="habracut"></a><br><br><h3>  Gambar buruh pelabuhan </h3><br>  Menginstal Bonsai versi pertama adalah proses yang sangat melelahkan karena banyaknya dependensi: memerlukan .NET Core, PostgreSQL, runtime Elasticsearch (yang berarti Java Runtime dan plug-in untuk mendukung morfologi Rusia), perakitan juga memerlukan .NET Core SDK, dan NodeJS untuk membangun depan ... Bahkan dengan latar belakang kompleksitas global pengembangan web modern, ini adalah tugas hanya untuk yang berkemauan keras dan banyak pengguna yang awalnya tertarik melemparkannya di tengah jalan. <br><br>  Hentikan itu! <br><br>  Sekarang Bonsai meningkat dalam tiga aksi dasar per menit: <br><br><ol><li>  Unduh <a href="">docker-compose.yml</a> . </li><li> Masukkan <code>@@YOUR_EMAIL@@</code> dan <code>@@YOUR_IP@@</code> diperlukan. </li><li>  Jalankan <code>docker-compose up -d</code> </li></ol><br><h3>  Otorisasi Kata Sandi </h3><br>  Di versi pertama, hanya satu jenis otorisasi yang digunakan - melalui jejaring sosial.  Ada banyak alasan untuk ini: <br><br><ul><li>  Login dengan satu klik </li><li>  Di luar kotak diberikan 2FA, pemulihan kata sandi, dan pemeriksaan keamanan lainnya </li><li>  Hanya pertahankan kode bonsai </li><li>  Anda bisa mendapatkan beberapa data dari profil selama pendaftaran </li></ul><br>  Sayangnya, ini menyebabkan sejumlah masalah: <br><br><ul><li>  Langkah ekstra rumit selama instalasi awal </li><li>  Anda tidak dapat memberikan akses ke orang yang tidak memiliki jejaring sosial (misalnya, kerabat lanjut usia) <br></li><li>  Untuk beberapa data (jenis kelamin, usia) jejaring sosial memerlukan verifikasi manual aplikasi Anda </li></ul><br>  Oleh karena itu, jenis otorisasi kedua ditambahkan - dengan login dan kata sandi, yang diaktifkan secara default. <br><br>  Sekarang Anda dapat melewati langkah membuat aplikasi otorisasi di jejaring sosial.  Setelah mulai, Bonsai akan menawarkan untuk mendaftarkan akun administrator, di mana Anda harus memasukkan kata sandi yang diinginkan - dan itu akan berhasil. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c62/57a/a33/c6257aa33f3232de3aa2ddcbbb4e47af.png" width="600"></div><br>  Anda dapat membuat akun baru dengan kata sandi di panel admin: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/643/b8a/2b2643b8a5ff1eb6c39de7838c766175.png" width="600"></div><br>  Ada beberapa hal yang perlu diingat ketika menggunakan otentikasi kata sandi: <br><br><ul><li>  Pengguna tidak dapat mengembalikan kata sandi sendiri - hanya administrator yang dapat melakukan ini.  Jika hanya ada satu administrator, ia diotorisasi dengan kata sandi dan lupa kata sandi ini - Anda harus menggunakan <a href="https://github.com/impworks/bonsai/issues/108">skrip</a> untuk mengatur ulang, yang harus dijalankan langsung dalam database. </li><li>  Setelah 10 upaya gagal berturut-turut, akun juga diblokir.  Untuk membuka kunci, Anda harus mengubah kata sandi.  Selain tindakan Anda sendiri, bot perayap jahat dapat secara otomatis memblokir kata sandi Anda. </li><li>  Satu akun hanya dapat memiliki satu jenis otorisasi per waktu.  Pertama, Anda tidak dapat membuat akun dengan kata sandi, dan kemudian <i>menambahkan</i> login tambahan ke sana melalui jejaring sosial atau Anda tidak dapat menggantinya dengan cara biasa sama sekali - hanya melalui manipulasi manual dengan database. </li></ul><br><h3>  Render pohon keluarga sisi server </h3><br>  Secara otomatis membangun pohon keluarga adalah salah satu fitur terpenting Bonsai, tetapi juga yang paling sulit. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bef/291/791/bef29179101157b26aad9e9c66d91e74.png" width="600"></div><br>  Seperti yang saya katakan di artikel sebelumnya, secara otomatis mengatur blok secara optimal adalah tugas yang sangat sulit.  Orang-orang menulis makalah ilmiah tentang hal itu, menginvestasikan ribuan jam manusia dan menjual komponen rak untuk uang gila.  Untungnya, saya berhasil menemukan perpustakaan <a href="https://github.com/OpenKieler/elkjs">ELK.js</a> gratis, yang memberikan hasil yang cukup baik. <br><br>  Masalah dengan ELK.js adalah ia bekerja untuk pustaka klien untuk waktu yang sangat lama.  Anda dapat menyesuaikan hasilnya melalui properti <code>thoroughness</code> - semakin besar nilainya, semakin baik jadwal, tetapi semakin lama.  Untuk membuat pohon yang dapat dimengerti untuk 50 orang, saya harus menunggu sekitar 30-40 detik untuk setiap halaman yang dibuka dengan pohon! <br><br>  Sekarang rendering tidak terjadi pada klien setiap kali dibuka, tetapi pada server setiap kali itu berubah.  Pertama kali setelah memperbarui konten harus menunggu seperti sebelumnya, tetapi kemudian halaman terbuka secara instan. <br><br>  Dari sudut pandang teknis, transfer perhitungan dari klien ke server menyebabkan beberapa kesulitan.  Bagaimana menjalankan kode JS di dalam .NET Core?  <a href="https://habr.com/ru/users/taritsyn/" class="user_link">Pikiran</a> pertama <a href="https://habr.com/ru/users/taritsyn/" class="user_link">saya</a> adalah menggunakan perpustakaan <a href="https://github.com/Taritsyn/JavaScriptEngineSwitcher">Javascript Engine Switcher yang</a> ditulis oleh <a href="https://habr.com/ru/users/taritsyn/" class="user_link">Taritsyn</a> .  Sayangnya, itu tidak sesuai dengan tugas saya: tidak ada mesin yang bisa mencerna ELK.js.  Alih-alih, mekanisme <code>NodeServices</code> digunakan, di mana semuanya langsung bekerja seperti jam. <br><br>  Ya, sekarang Bonsai membutuhkan dua runtime, tapi terima kasih kepada buruh pelabuhan, itu tidak begitu menakutkan.  Ya, <code>NodeServices</code> <a href="https://github.com/aspnet/AspNetCore/issues/12890">akan pensiun</a> di salah satu versi ASP.NET Core berikutnya, tetapi komunitas akan mendukungnya.  Dan ke mana harus pergi?  Pengembangan web modern seluruhnya terdiri dari pertukaran semacam itu.  Yang utama adalah ini memberikan hasil. <br><br><h3>  Unduh Dokumen </h3><br>  Sekarang, selain foto dan video, Bonsai mendukung pengunduhan file PDF.  Hal ini sesuai untuk dokumen - khususnya, akte kelahiran, pernikahan atau kematian. <br><br>  Awalnya dimaksudkan untuk membuat pratinjau kecil untuk dokumen.  Sayangnya, ide ini menabrak tebing realitas yang keras: tidak ada perpustakaan yang ada yang cocok dengan satu kriteria atau yang lain.  Telah diperiksa: <br><br><ul><li>  <a href="https://github.com/itext/itext7-dotnet">iText7</a> - ketidakcocokan lisensi dengan MIT </li><li>  <a href="">PDF.js</a> - sejumlah besar dependensi, wadahnya berlipat ganda </li><li>  Pembungkus GhostScript juga masalah lisensi, ditambah hampir semua ditinggalkan dan tidak mendukung .NET Core </li></ul><br>  Jika saya melewatkan sesuatu dan grail suci konversi PDF ke gambar masih ada - silakan tulis di komentar! <br><br><h3>  Berita utama </h3><br>  Pada halaman utama di bawah kalender, halaman terakhir yang dimodifikasi dan file media yang diunduh sekarang ditampilkan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f89/9bd/203/f899bd203cf087f48b2ffe96565f91e3.png" width="600"></div><br><br><h3>  Penafian Wajib </h3><br>  Proyek ini bersifat nirlaba dan disediakan "apa adanya".  Ada bug di dalamnya.  Suatu ketika, melalui pengawasan dangkal di master, kode tergelincir yang <i>hampir</i> membersihkan database.  Oleh karena itu, jika Anda menghargai data yang Anda masukkan di Bonsai, maka secara berkala, dan <i>terutama</i> dengan setiap pembaruan: <br><br>  Buat cadangan. <br>  MEMBUAT CADANGAN! <br>  D E L A T E B E K A P S!  !  ! <br><br><h3>  Apa selanjutnya </h3><br>  Masih ada banyak tugas menarik yang ingin saya lakukan di tahun berikutnya: <br><br><ul><li>  <i>Pemeringkatan halaman</i> : satu metrik otomatis yang memungkinkan Anda untuk mengurutkan halaman berdasarkan kelengkapan data mereka.  Ini akan membuatnya mudah untuk menjawab pertanyaan "halaman mana yang dapat ditampilkan sebagai standar" dan, sebaliknya, "halaman mana yang masih perlu dikerjakan." </li><li>  <i>Mendesain ulang halaman utama panel admin</i> : perubahan akan ditampilkan dalam bentuk yang mirip dengan "umpan berita" di jejaring sosial. </li><li>  <i>Tugas teknis</i> : transisi ke .NET Core 3, berbagai refactoring </li></ul><br>  Ada juga tugas yang ingin saya lakukan, tetapi saya tidak punya cukup waktu dan kompetensi untuk itu.  Saya berharap bantuan dari komunitas - jika tidak gratis, maka setidaknya untuk hadiah simbolis.  Jika Anda yakin dengan kemampuan Anda dan ingin berpartisipasi - silakan menulis kepada saya di telegram dan berdiskusi. <br><br><ul><li>  <i>Komponen kalender</i> : standar digunakan, tetapi sedikit bengkok dan tidak mendukung nilai yang tidak akurat ( <code>2019.??.??</code> ): Anda perlu menulis yang lengkap. </li><li>  <i>Peningkatan Pencarian</i> : Pencarian di ElasticSearch terkadang memberikan hasil yang <a href="https://github.com/impworks/bonsai/issues/104">aneh</a> .  Kemungkinan besar, saya hanya tidak tahu cara menggunakan elastis - Anda perlu menulis ulang <a href="">konfigurasi infernal</a> dengan pengetahuan tentang masalah ini. </li><li>  <i>Pengenalan wajah</i> : alangkah baiknya jika secara otomatis mengenali wajah pada foto yang diunggah dan memotretnya ke halaman.  Saya belum menemukan solusi pada .NET Core yang terbuka dan memberikan hasil yang waras. </li></ul><br>  Repositori proyek tersedia di: <br><br>  <b><a href="https://github.com/impworks/bonsai">https://github.com/impworks/bonsai</a></b> . <br><br>  Jika Anda menggunakan Bonsai - silakan beri tahu kami tentang hal itu di komentar.  Saya akan senang menerima kritik dan saran. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481600/">https://habr.com/ru/post/id481600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481588/index.html">Latihan untuk mengisolasi Runet dimulai. Akankah kita memantau?</a></li>
<li><a href="../id481592/index.html">Enam pilihan hadiah Tahun Baru untuk pengendara dengan diskon yang bagus</a></li>
<li><a href="../id481594/index.html">Pengembangan “generator tegangan sederhana” sesuai dengan GOST R IEC 61508 (IEC 61508)</a></li>
<li><a href="../id481596/index.html">Parsing ELK 7.5 pengaturan untuk analisis log Mikrotik</a></li>
<li><a href="../id481598/index.html">Kontribusi kecil untuk perang melawan platform kebun binatang UI Avalonia</a></li>
<li><a href="../id481604/index.html">Bagaimana pengembang Chelyabinsk keras membuat game untuk Google Play dan jejaring sosial</a></li>
<li><a href="../id481606/index.html">Berlangganan statis menggunakan template Pengamat menggunakan C ++ dan mikrokontroler Cortex M4</a></li>
<li><a href="../id481610/index.html">PostgreSQL Antipatterns: memperbarui tabel besar yang sedang dimuat</a></li>
<li><a href="../id481612/index.html">Kontribusi Kecil Kami untuk Platform Avalonia UI's Fight for Fewer</a></li>
<li><a href="../id481616/index.html">Kubah geodesik. Tentang perangkat dan pengalaman perhitungan saya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>