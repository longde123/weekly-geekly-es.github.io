<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö£üèø ü§µüèΩ üëµ Criando componentes personalizados para o Bootstrap 4 üç∑ üå¥ üèùÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A opini√£o p√∫blica traduziu o Bootstrap na categoria de estruturas lend√°rias do passado, mas ainda vale a pena assistir. O Bootstrap 4 √© um excelente n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando componentes personalizados para o Bootstrap 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416235/"><p><img src="https://habrastorage.org/webt/gm/os/o0/gmoso05v9ay78e90jed0lo0jqz4.jpeg"></p><br><p>  A opini√£o p√∫blica traduziu o Bootstrap na categoria de estruturas lend√°rias do passado, mas ainda vale a pena assistir.  O Bootstrap 4 √© um excelente navegador para layout seguro e, mais importante, uma amostra de abordagem <strong>HTML sobre JS</strong> para criar aplicativos da Web, revela totalmente os recursos existentes do HTML para descri√ß√£o declarativa da interface do usu√°rio. </p><br><p> E como o c√≥digo da estrutura JavaScript est√° desenvolvendo tamb√©m √© √∫til ter uma id√©ia.  A arquitetura dos plug-ins do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jQuery</a> ainda est√° em uso, mas a partir da vers√£o 4 √© envolvida pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rollup</a> nas classes do pacote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ES6 transformadas</a> usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Babel6</a> .  O jQuery provavelmente n√£o ser√° em breve - mais sobre isso mais tarde - mas, por enquanto, usando o exemplo da cria√ß√£o de seu pr√≥prio plug- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">in BsMultiSelect</a> , na mesma pilha do <strong>Boostrap 4</strong> , os recursos de desenvolvimento da estrutura ser√£o revelados. </p><a name="habracut"></a><br><h2 id="pochemu-kazhdyy-programmist-dolzhen-napisat-svoy-">  Por que " <em>todo programador deve escrever o seu pr√≥prio ...</em> " </h2><br><p> " <em>Melhorar o bem s√≥ estraga</em> ."  A necessidade de entender o que o novo Bootstrap obteve foi a transfer√™ncia de seus componentes para a nova pilha e como √© mais f√°cil agora criar componentes de alta ordem.  Tudo parecia simples: combine <code>.form-control</code> , <code>.badge</code> e <code>.dropdown-menu</code> e voc√™ pode facilmente obter uma <code>.dropdown-menu</code> m√∫ltipla ... </p><br><p><img src="https://habrastorage.org/webt/tu/-9/mu/tu-9munyxhcouzrd0vjvzvfzlg0.png"></p><br><h2 id="konflikt-arhitektur-s-poroga">  Conflito de arquitetura da porta </h2><br><p>  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-</a> in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BsMultiSelect</a> resultante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> usa diretamente o c√≥digo JS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bootstrap.js</a> , mas usa sua depend√™ncia, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">popper.js</a> (estrutura pop-up vanilla).  Isso ocorre porque o <a href="">componente suspenso do bootstrap.js</a> precisa encontrar o chamado elemento de altern√¢ncia durante a inicializa√ß√£o no DOM (no caso espec√≠fico, √© um bot√£o que abre o menu), se n√£o o encontrar, ele trava com um erro (desde que eu criei diretamente a partir de js, tenho "bot√µes" claro que n√£o).  Conclus√£o: os componentes afiados em "HTML sobre JS" n√£o podem (ou desvantajosamente) ser criados diretamente a partir de JS.  Conclus√£o n√∫mero dois: voc√™ precisa programar componentes personalizados para que, no componente "HTML sobre JS", sempre haja um componente mais leve de "JS puro".  Eu tenho esse <a href="">MulitSelect.js</a> completamente limpo n√£o apenas do c√≥digo, mas tamb√©m dos estilos do Bootstrap.  O MulitSelect.js desempenha o mesmo papel no BsMulitSelect.js, assim como o popper.js no dropdown.js. </p><br><h2 id="dva-slova-o-popperjs">  Duas palavras sobre popper.js </h2><br><p>  √ìtima biblioteca - uma fun√ß√£o.  O DropDown.js se repete, mas fornece uma interface completamente limitada a ele (novamente, porque em "HTML sobre JS" toda a API n√£o √© necess√°ria).  Popper tem uma quest√£o mais aberta do que gostar√≠amos.  Fiquei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desapontado ao publicar no IE11 eventos que n√£o s√£o do Chrome</a> . </p><br><h2 id="o-perehode-ot-iife-k-classam">  Sobre a transi√ß√£o do IIFE para as classes </h2><br><p>  <a href="">O padr√£o do plugin do jQuery</a> √© definir a fun√ß√£o do construtor dentro do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IIFE</a> .  Agora esta √© uma classe dentro do IIFE.  Abertura: antigas formas funcionais de executar m√©todos particulares entram em conflito com o ES6 lambda, portanto foram "abandonadas" no Bootstrap.  Todos os m√©todos s√£o p√∫blicos, enquanto os m√©todos pseudo-privados s√£o prefixados com _ i.e.  underscrore.  Entendo que estou errado, mas sigo minhas conven√ß√µes - "m√©todos p√∫blicos com letra mai√∫scula".  Em todo o resto, o BsMultiSelect criou a ado√ß√£o do contrato do DropDown.js "padr√£o", ou seja,  Eu gostaria de represent√°-lo como uma esp√©cie de clich√™ com carne. </p><br><div class="spoiler">  <b class="spoiler_title">no entanto, outra diferen√ßa, como h√° rollup, eu clico nos arquivos ..</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> $ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'jquery'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AddToJQueryPrototype <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./AddToJQueryPrototype'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MultiSelect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./MultiSelect'</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... ( (window, $) =&gt; { AddToJQueryPrototype('BsMultiSelect', (element, optionsObject, onDispose) =&gt; { // ... return new MultiSelect(element, optionsObject, onDispose, facade, window, $); }, $); } )(window, $)</span></span></code> </pre> </div></div><br><p>  Novo acordo: o plugin <a href="">deve publicar o Construtor</a> - para n√£o perder o construtor no IIFE.  Sim, um IIFE deve permanecer - ningu√©m removeu a tarefa de definir a janela, as depend√™ncias $ e Popper (para aqueles que "n√£o podem entrar nos m√≥dulos") de maneira padr√£o. </p><br><h2 id="konfiguracii-linterov-eslint-i-stylelint">  Configura√ß√µes de Eslint e Stylelint Linter </h2><br><p>  N√£o me senti obrigado a seguir as regras draconianas para definir o c√≥digo do Bootstrap.  Certamente eles escrevem em um ambiente que os ajuda a definir espa√ßos e a controlar o c√≥digo-fonte √© muito bom, mas √© dif√≠cil para mim ouvir a cada segundo a tristeza do linter no VS Code.  Ao escrever seu pr√≥prio plugin, as regras podem e devem ser bastante relaxadas. </p><br><p>  Eslint, stylelint pode n√£o sair com muita frequ√™ncia, mas n√£o h√° desejo de examinar as novas regras.  Em todos os aspectos, essa conquista me irrita mais. </p><br><h2 id="organizaciya-koda-i-rollup">  C√≥digo e pacote cumulativo de organiza√ß√£o </h2><br><p>  O c√≥digo redistribu√≠vel ES6 do Bootstrap √© empacotado por pacote cumulativo em duas vers√µes: <strong>bootstrap.js</strong> independente e pacote <strong>bootstrap.bundle.js</strong> - o √∫ltimo inclui popper.js. </p><br><p>  O autor do rollup.config.js tem instintos estranhos para mim.  <a href="">Toda essa transforma√ß√£o de configura√ß√£o</a> por push e pop, dependendo da vers√£o exigida de aut√¥nomo ou de pacote <a href="">configur√°vel</a> , parece elaborada e intimidadora, felizmente, para escrever um plug-in, voc√™ s√≥ precisa de um tipo de pacote "aut√¥nomo" e n√£o preciso provar que posso fazer melhor. </p><br><p>  A vers√£o aut√¥noma do Bootstrap tamb√©m √© indicada no campo principal do pacote, ou seja,  As depend√™ncias do npm s√£o resolvidas para o mesmo arquivo que os usu√°rios carregam via <code>&lt;script&gt;</code> .  Esta n√£o √© uma solu√ß√£o inequ√≠voca, mas meu plug <strong>-</strong> in <strong>BsMultiSelect</strong> seguiu o mesmo caminho.  Nesse caso, os <a href="">auxiliares da babel</a> podem ser inclu√≠dos no <a href="">plug</a> - <a href="">in</a> , apesar de tamb√©m estarem inclu√≠dos no bootsrap.js.  Duplica√ß√£o de alguma forma n√£o est√° certa ... </p><br><p>  O interessante √© que o Bootstrap possui uma configura√ß√£o paralela sob <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jspm - o carregador de m√≥dulo ES do navegador nativo</a> e seu campo principal j√° s√£o c√≥digos remotos limpos, 12 componentes que n√£o s√£o inclu√≠dos no pacote, mas armazenados separadamente no diret√≥rio js / dist.  Aqui, cada arquivo inclui auxiliares de babel.  O Jspm agora est√° em uma encruzilhada, portanto, ao criar o BsMultiselect, ignore-o. </p><br><blockquote>  E, no entanto, √© interessante perguntar aos conhecedores, o jspm levar√° todos os 12 vezes auxiliares duplicados para o navegador? </blockquote><p>  Uma grande vantagem do pacote foi descoberta - seus pacotes s√£o leg√≠veis, ao contr√°rio dos webpack. </p><br><h2 id="bootsrap-4-ispolzuet-babel-6-a-plagin-bsmultiselect--babel-7">  O Bootsrap 4 usa o Babel 6 e o ‚Äã‚Äãplug-in BsMultiSelect Babel 7 </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O BsMultiSelect</a> migrou facilmente para o Babel 7 beta usando o plug-in rollup-babel atualizado (tamb√©m em beta).  <strong>Agora, vale a pena mudar para o Babel 7</strong> por causa do novo <code>@babel/preset-env</code> (a configura√ß√£o do transpiler "em que navegadores o c√≥digo ser√° executado").  Usando apenas a Internet, ficou bastante dif√≠cil entender como as predefini√ß√µes do ES6 funcionam, elas passaram por uma longa evolu√ß√£o e muitas configura√ß√µes desatualizadas foram acumuladas.  Melhor apostar Babel 7 + <code>@babel/preset-env</code> imediatamente </p><br><p>  No entanto, os erros beta de babel n√£o precisaram esperar muito: [... nodeList] foi digitado em nodeList.concat ().  Eu n√£o entendi por um longo tempo, traduzir o c√≥digo em chamadas jquery (isso ainda √© necess√°rio, mas mais sobre isso mais tarde) resolveu o problema.  Pergunte: ‚ÄúPor que, ent√£o, Babel, se voc√™ n√£o lida com ele?‚Äù, A resposta: ‚Äúimporta√ß√µes e lambda‚Äù. </p><br><h2 id="prakticheskie-aspekty">  Aspectos pr√°ticos </h2><br><p>  O Bootstrap 4 e seu plug-in (como qualquer c√≥digo js) t√™m duas op√ß√µes para fazer o download no navegador: <strong>atrav√©s de script / estilo</strong> (crie uma "p√°gina") e <strong>atrav√©s do n√≥ de montagem / webpack</strong> (crie um "aplicativo", por isso continuarei com esses dois em princ√≠pio, situa√ß√µes muito diferentes e denotam: ‚Äúp√°gina‚Äù e ‚Äúaplica√ß√£o‚Äù). <br>  Para a p√°gina e o aplicativo, o mesmo "arquivo de distribui√ß√£o" do Bootstrap ser√° usado.  Esta n√£o √© uma solu√ß√£o √≥bvia e n√£o √© a √∫nica (por exemplo, c√≥digo diferente √© usado para <code>jspm</code> e para testes <code>mocha</code> ), mas ao criar seu pr√≥prio plug-in, n√£o h√° mais nada a fazer al√©m de seguir esta conven√ß√£o, esperando sua otimiza√ß√£o. </p><br><p>  <strong>Encontrar um equil√≠brio entre satisfazer duas necessidades usando o mesmo c√≥digo para duas op√ß√µes de download diferentes: ‚Äúp√°ginas‚Äù e ‚Äúaplicativos‚Äù √© a principal tarefa de arquitetura que o desenvolvedor de plug-ins enfrenta.</strong> </p><br><p>  Afinal, o plug-in Bootstrap tamb√©m pode ser criado <em>ad hoc</em> , diretamente no seu aplicativo.  Nesse caso, voc√™ pode escrever o c√≥digo do plug-in com todos os prazeres: polyphiles e acesso √†s vari√°veis ‚Äã‚ÄãSASS do esquema.  No entanto, ao confiar na reutiliza√ß√£o, ser√° necess√°rio transferir o plug-in para seu pr√≥prio pacote npm, os prazeres acima entram na categoria de problemas: voc√™ perde o acesso √†s vari√°veis ‚Äã‚Äãdo SASS e precisa ter em mente os criadores das "p√°ginas" que conectam o plug-in por meio de um script (onde est√£o meus polyfiles?). </p><br><h2 id="dostup-k-sass-peremennym-stilya-bootstrap-4">  Acesso √†s vari√°veis ‚Äã‚Äãde estilo SASS Bootstrap 4 </h2><br><p>  Eu gostaria de escrever classes / seletores de CSS do Bootstrap para escrever o plugin.  Nesse caso, ao personalizar o tema do Bootstrap, voc√™ pode esperar que o plug-in se adapte sem esfor√ßo adicional. </p><br><p>  Para um plug-in auto-publicado, n√£o h√° acesso √†s vari√°veis ‚Äã‚Äãdo SASS. </p><br><p>  Classes / seletores css existentes - n√£o cobrem todos os estilos necess√°rios para BsMutliSelect, por exemplo, voc√™ precisa de <code>min-height</code> para <code>ul.form-control</code> , quando no bootstrap.css existe apenas um seletor de css com altura para <code>input.form-control</code> - voc√™ n√£o pode aplic√°-lo para <code>ul</code> .  Outras classes / seletores existentes trazem muitos estilos sup√©rfluos: e se voc√™ quiser atribuir, por exemplo, cores de .form-control a um elemento sem atribuir uma classe <code>.form-control</code> ?  Isso n√£o funcionar√° porque n√£o existe uma classe como <code>.input-color</code> na qual a vari√°vel <a href="">$ input-color</a> seria publicada "separadamente" de tudo. </p><br><p>  Al√©m disso, n√£o √© poss√≠vel seguir as decis√µes da equipe do Bootstrap: eles n√£o t√™m esse problema, se necess√°rio - eles criam uma classe / seletor de CSS com a vari√°vel desejada e operam nela.  Se voc√™ quiser debater, precisar√° explicar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mark Otto</a> , na equipe da BS, h√° um n√≠vel anormalmente alto de tomada de decis√£o, mesmo para mudan√ßas cosm√©ticas nos seletores de CSS, se as solicita√ß√µes se enquadrarem na categoria "oferta". </p><br><p>  Eu proponho a seguinte solu√ß√£o. </p><br><p>  Para uma p√°gina (gerando um plug-in por meio de um <code>script</code> ), √© necess√°rio aturar a inacessibilidade das vari√°veis.  Mas n√£o √© necess√°rio oferecer-se para lidar com CSS - vari√°veis ‚Äã‚Äãinacess√≠veis podem ser oferecidas para serem personalizadas atrav√©s de par√¢metros js, pois n√£o existem muitas (e nem todas s√£o alteradas por qualquer esquema).  Para o BsMultiSelect, os problem√°ticos eram: cor desativada, cor de entrada, sombra de controle focada (etc. apenas 10 estilos, a maioria deles raramente muda de esquema) ... </p><br><div class="spoiler">  <b class="spoiler_title">Por um lado, esta √© uma declara√ß√£o de todos os estilos dos quais o plugin depende ...</b> <div class="spoiler_text"><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">"select[multiple='multiple']"</span></span>).bsMultiSelect({ <span class="hljs-attr"><span class="hljs-attr">selectedPanelDefMinHeight</span></span>: <span class="hljs-string"><span class="hljs-string">'calc(2.25rem + 2px)'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// default size selectedPanelLgMinHeight: 'calc(2.875rem + 2px)', // LG size selectedPanelSmMinHeight: 'calc(1.8125rem + 2px)', // SM size selectedPanelDisabledBackgroundColor: '#e9ecef', // disabled background selectedPanelFocusBorderColor: '#80bdff', // focus border selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)', // foxus shadow selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)', // valid foxus shadow selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)', // invalid foxus shadow inputColor: '#495057', // color of keyboard entered text selectedItemContentDisabledOpacity: '.65' // btn disabled opacity used });</span></span></code> </pre> </div></div><br><p>  Por√©m, para um aplicativo que usa o SASS e o coletor, voc√™ pode copiar <a href="">BsMultiSelect.scss</a> para si mesmo e corrigir o caminho para suas _variables.scss nele.  Assim, o plugin "receber√°" as vari√°veis ‚Äã‚Äãvari√°veis. </p><br><div class="spoiler">  <b class="spoiler_title">Tudo atrav√©s de CSS ...</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> $(<span class="hljs-string"><span class="hljs-string">"select[multiple='multiple']"</span></span>).bsMultiSelect({ <span class="hljs-attr"><span class="hljs-attr">useCss</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre> </div></div><br><p>  Esses dois m√©todos s√£o escritos explicitamente no meu c√≥digo JS, atrav√©s de dois "adaptadores".  BsMultiSelect √© realmente dois plugins em um.  <a href="">Um</a> que trabalha com estilos atrav√©s de vari√°veis ‚Äã‚Äãjs, o <a href="">outro</a> delega esse trabalho css. </p><br><p>  Ao mesmo tempo, devo dizer diretamente que trabalhar com CSS pode ser necess√°rio, mesmo que a transfer√™ncia de estilos personalizados por meio de par√¢metros JS tenha sido usada, simplesmente porque os autores dos esquemas costumam fazer seu trabalho de maneira muito grosseira.  Ou estranho.  Por exemplo, o esquema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Skethy</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">por</a> algum motivo, decidiu que o menu n√£o precisa de um efeito de foco.  Os recursos devem ser arquivados. </p><br><p>  Mas, com o exemplo, espero que voc√™ possa ver como o plug-in se adaptou ao circuito pesado com relativa facilidade (foi necess√°rio sobrecarregar os valores de apenas tr√™s estilos atrav√©s dos par√¢metros js). </p><br><div class="spoiler">  <b class="spoiler_title">adapta√ß√£o ao esquema atrav√©s de js</b> <div class="spoiler_text"><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">"select[multiple='multiple']"</span></span>).bsMultiSelect({ <span class="hljs-attr"><span class="hljs-attr">selectedPanelFocusBoxShadow</span></span>:<span class="hljs-string"><span class="hljs-string">"0px 0px 0px 0.2rem rgba(51,51,51,0.25)"</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectedPanelFocusBorderColor</span></span>:<span class="hljs-string"><span class="hljs-string">"#333"</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectedPanelDisabledBackgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">"#f7f7f9"</span></span> });</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/ez/tg/0y/eztg0yrp2tdyhkbsgxzw2_rtyqw.png"></p><br><p>  Esse √© o m√°ximo que pode ser alcan√ßado usando as classes CSS "padr√£o" <code>.bage</code> , <code>.form-control</code> , <code>.close</code> , etc.  Quase tudo se adaptou ao esquema, mas n√£o tudo. </p><br><p>  √â uma pena, √© claro, que voc√™ n√£o consiga se livrar desses tr√™s par√¢metros, nem todas as vari√°veis ‚Äã‚Äãde estilo de esquema s√£o acess√≠veis por meio de seletores / classes css (estou mentindo, voc√™ pode sair se puder copiar BsMultiSelect.scss para si mesmo e trazer as vari√°veis ‚Äã‚Äãde circuito para ele, mas isso n√£o satisfaz completamente , como todas as decis√µes que come√ßam com as palavras "copiar para si mesmo"). </p><br><p>  Clique aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://dashboardcode.github.io/BsMultiSelect/indexsketchy.html</a> </p><br><h2 id="polyfilly">  Polyfill's </h2><br><p>  No cen√°rio ‚ÄúEstou escrevendo um plug-in ad hoc dentro do aplicativo‚Äù - voc√™ usar√° <code>@babel/polyfill</code> sem problemas e corrigir√° o DOM do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">polyfill.io</a> porque, dentro do aplicativo, ele j√° est√° l√°. </p><br><p>  Quando um plug-in √© movido para um m√≥dulo npm externo, toda a alegria desaparece porque os usu√°rios do Bootstrap n√£o decidiram agradar as longas listas de polyfills necess√°rios na documenta√ß√£o. </p><br><p>  Solu√ß√£o: tudo o que o babel n√£o transp√µe, mas deixa para os polyphiles, impede que fa√ßa isso, rangendo os dentes, para converter em chamadas jQuery (por exemplo, Node.closest em $ .closest).  Essa abordagem √© adotada no pr√≥prio Bootstrap 4 e, obviamente, √© uma luta contra o incha√ßo.  Surpresa  O jQuery √© um polyfill. </p><br><p>  Concordo que programar com Babel de olho no CanIUse.com e no MDN.com n√£o √© divertido.  E o c√≥digo √© estranho (para mim). </p><br><p>  Aqui √© necess√°rio destacar a situa√ß√£o de cima novamente.  O Bootstrap usa duas bibliotecas jQuery e popper.js.  O Popper.js √© uma estrutura de baunilha dupla, n√£o possui bf, jQuery ou polyfills externos, por si s√≥.  O JQuery √© empacotado pelo grunhido que j√° usa o babel, mas de alguma forma magicamente sem seus polyfills e auxiliares.  Um plug-in Bootstrap de terceiros (como o BsMultiSelct) usa o Babel 7. Seu produto ainda pode usar outra coisa.  N√£o existe uma √∫nica plataforma polif√≠lica, espera-se duplica√ß√£o m√∫ltipla de c√≥digo, existem quatro implementa√ß√µes das mesmas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mais pr√≥ximas</a> carregadas no navegador.  Mas nada pode ser feito sobre isso. </p><br><p>  No entanto, se voc√™ usou polyfiles ao criar seu pr√≥prio plugin, lembre-se de que, se o aplicativo tiver scripts embutidos (por exemplo, <code>&lt;script&gt;$( function() {/*..*/}) &lt;/script&gt;</code> ), voc√™ s√≥ precisar√° baixar os polyfiles de forma s√≠ncrona (caso contr√°rio, o c√≥digo embutido poder√° iniciar a execu√ß√£o antes do momento em que o plug-in for carregado).  I.e.  por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">webpack-polyfill-injector</a> (o injetor de polifil mais rico que eu j√° conheci) preciso control√°-lo para que ele n√£o decida carregar polifiles de forma ass√≠ncrona (comportamento padr√£o). </p><br><h2 id="no-jquery">  Sem jQuery </h2><br><p>  O jQuery parece um pouco t√≥xico, competindo e obscurecendo o Babel / ES6, mas n√£o √© para sempre.  Existe o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ramo v4-whithout-jquery</a> , ele j√° est√° na solicita√ß√£o de pool, planeja lan√ßar o <strong><code>bootstrap-nojquery</code> c vers√£o 4.3</strong> .  Anteriormente, o espa√ßo para nome dos eventos era chamado de maior problema de rejei√ß√£o de jquery, embora seja √≥bvio que voc√™ pode escrever sem eles (BsMultiSelect sem).  Aparentemente decidido. </p><br><p>  Tamb√©m foi anunciado que a partir da <strong>vers√£o 4.3,</strong> ser√° poss√≠vel carregar os componentes originais no navegador separadamente (apenas para o cen√°rio "aplicativo").  Os componentes originais se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tornar√£o</a> "como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BsMultiSelect</a> "?  N√£o.  Se a equipe do BS precisar de algumas vari√°veis ‚Äã‚Äãdo SASS, eles criar√£o classes / seletores de CSS para eles pr√≥prios e operar√£o com eles a partir do JS ("CSS funcional").  Os criadores de recursos personalizados n√£o est√£o dispon√≠veis. </p><br><p>  A poss√≠vel transi√ß√£o do sass para o <strong>p√≥s-css</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/twbs/bootstrap/projects/11</a> <strong>na 5¬™ vers√£o</strong> fundamentalmente n√£o muda nada.  Ou muda tudo: "JS sobre HTML". </p><br><p>  <strong>O Bootstrap 5</strong> precisar√° configurar recomenda√ß√µes sobre como integrar os polifiles Babel e como corrigir o DOM.  Aqui a previs√£o √© mais ou menos clara: montagens completamente diferentes ser√£o oferecidas aos criadores de p√°ginas e criadores de aplicativos. </p><br><h2 id="itogi">  Sum√°rio </h2><br><p>  Enquanto voc√™ escreve os componentes do Bootstrap 4 no Babel usando o m√©todo <em>ad hoc</em> sem pensar em reutilizar, o que significa polifiles e onde obter as vari√°veis ‚Äã‚Äãde estilo, voc√™ n√£o conhece o luto. </p><br><p>  Mas se voc√™ tornar o plug-in um pacote npm separado - e com o desejo de tomar uma decis√£o no esp√≠rito do pr√≥prio Bootstrap 4, o prazer ser√° menor, voc√™ pensa com mais frequ√™ncia e mais tempo.  Voc√™ provavelmente precisa decidir imediatamente quem s√£o seus usu√°rios e oferecer compila√ß√µes diferentes, uma para quem criar√° o aplicativo em pacotes e a outra para escrever p√°ginas, ou seja,  carregando o script do plugin. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt416235/">https://habr.com/ru/post/pt416235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt416215/index.html">Food Design Digest Junho 2018</a></li>
<li><a href="../pt416217/index.html">Como conectei computadores e usu√°rios a portas de dispositivos de rede no programa de monitoramento Network MACMonitor</a></li>
<li><a href="../pt416219/index.html">Yandex come√ßou a indexar o Google Docs com senhas</a></li>
<li><a href="../pt416229/index.html">10 livros sobre marketing e t√≥picos relacionados que um designer deve ler</a></li>
<li><a href="../pt416231/index.html">Monitorando salas Zadarma Zabbix</a></li>
<li><a href="../pt416237/index.html">Como se tornar um designer: do freelancer de um albergue ao trabalho com as principais empresas e ao lan√ßamento do seu produto</a></li>
<li><a href="../pt416239/index.html">O papel e as fun√ß√µes do PMO em empresas de design</a></li>
<li><a href="../pt416241/index.html">Recuperando n√≠veis do Super Mario Bros usando Python</a></li>
<li><a href="../pt416243/index.html">Alternativas ao cobalto, este diamante sangrento das baterias</a></li>
<li><a href="../pt416245/index.html">Criamos um bot no Aimylogic para automatizar a loja online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>