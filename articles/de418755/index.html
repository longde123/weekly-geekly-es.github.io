<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèº üç• ü§≤ Wie E-Commerce gro√ü angelegte Werbeaktionen √ºberlebt. Vorbereitung auf Spitzenlasten im Web [Teil 1] üö¥üèæ üê© ü¶å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits, ich bin mit Alexey Pristavko, DataLine-Webprojektleiter, in Kontakt. 
 Der Black Friday, die gr√∂√üte E-Commerce-Veranstaltung der Wel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie E-Commerce gro√ü angelegte Werbeaktionen √ºberlebt. Vorbereitung auf Spitzenlasten im Web [Teil 1]</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/418755/"><img src="https://habrastorage.org/webt/xo/km/zi/xokmzi3k5y0axobkc_okaweyr3s.png"><br><br>  Hallo allerseits, ich bin mit Alexey Pristavko, DataLine-Webprojektleiter, in Kontakt. <br>  Der Black Friday, die gr√∂√üte E-Commerce-Veranstaltung der Welt, findet j√§hrlich in den letzten Novembertagen statt.  Dies ist die Zeit f√ºr Rekordrabatte, Gesch√§fte, die fast um Mitternacht ge√∂ffnet sind, und die Standorte, die an der Aktion teilnehmen, fallen, ungeachtet des starken Anstiegs des Verkehrsflusses. <br><br>  Aus diesem Grund werden wir anhand ihres Beispiels analysieren, wie Sie sich auf eine ernsthafte Erh√∂hung der Belastung einer Website oder Webanwendung vorbereiten k√∂nnen. <br>  Unter der Katze werden wir ausf√ºhrlich dar√ºber sprechen, wie IT-Manager, Entwickler und Administratoren von Online-Shops Gro√üereignisse √ºberstehen k√∂nnen. <br><a name="habracut"></a><br><h2>  Was den Schwarzen Freitag bedroht </h2><br>  Wie ich oben geschrieben habe, ist der Schwarze Freitag ein Tag, der allen, die an der Wartung von E-Commerce-Websites beteiligt sind, gro√üe Probleme bereitet. <br><br>  Um es zu f√ºhlen, betrachten Sie die Tabelle unten.  Dies spiegelt die Zunahme der Anzahl der Anfragen auf der Website w√§hrend des Black Friday wider. <br><br><img src="https://habrastorage.org/webt/ro/hz/3h/rohz3h6wrf481mhayxaie3jm0ia.png"><br><br>  Im Vergleich zu normalen t√§glichen Spitzenwerten, wenn keine Aktien gehalten werden, w√§chst der Verkehr am Black Friday um 100-200%, und dies ist nicht die Grenze. <br><br>  Wenn eine gro√üe Website bereits viel eigenen Traffic hat, kann ein bescheidener Online-Shop w√§hrend des Kampagnenzeitraums problemlos so viele Besucher empfangen und ersticken.  Um den alten Witz ein wenig zu paraphrasieren: "Das Gesch√§ft hat alle Gesch√§fte anders gemacht, und der Online-Black Friday hat alle ausgeglichen." <br><br>  Am Black Friday verdient "f√ºttert" den Verk√§ufer das ganze n√§chste Jahr.  Das Unternehmen ist sehr daran interessiert, die maximale Anzahl neuer Kunden zu gewinnen, die auf die Website zur√ºckkehren, um immer wieder zu kaufen.  Daf√ºr sollten ihre ersten Erfahrungen mit der Site reibungslos verlaufen, und dies sicherzustellen, ist die Aufgabe von IT-Spezialisten. <br><br>  Je mehr Kunden gleichzeitig vor Ort sind, desto h√∂her sind die Anforderungen an Stabilit√§t und Reaktionsgeschwindigkeit.  Sicherlich haben Sie bemerkt, dass die Website des Gesch√§fts, zu der Sie von der Zielseite von blackfridaysales gewechselt haben, extrem langsam oder gar nicht funktioniert hat.  Ich bezweifle, dass Sie auf den Download warten mussten, aber nach einigen Sekunden nicht gegangen sind. <br><br>  Im Folgenden wird erl√§utert, wie Kunden vor negativen Erfahrungen und die Website vor Abst√ºrzen aufgrund von √úberlastung gesch√ºtzt werden k√∂nnen.  Weitere Tipps gelten jedoch f√ºr jede erwartete Spitzenlast. <br><br>  Im Allgemeinen gibt es zwei Phasen der Vorbereitung eines Standorts f√ºr mehr Verkehr: <b>technische</b> und <b>organisatorische.</b>  In diesem Artikel werden wir die technische Phase diskutieren und die organisatorischen Details im zweiten Teil, der in einer Woche ver√∂ffentlicht wird, ausf√ºhrlich beschreiben. <br><br><h2>  Technische Vorbereitung der Website </h2><br><img src="https://habrastorage.org/webt/bs/7p/o3/bs7po31te56sxn9utnni3txekqm.png"><br><br>  <i><b>Ein kleiner Haftungsausschluss:</b> Erwarten Sie hier keine detaillierten Anweisungen, was, wo und wie Sie es festziehen k√∂nnen, damit ‚ÄûGl√ºck f√ºr alle umsonst ist und niemand beleidigt bleibt‚Äú.</i>  <i>Erstens sind Websites und Projekte f√ºr jeden unterschiedlich.</i>  <i>Zweitens ist eine spezifische technische Beratung zu einer bestimmten Software mehr als ausreichend.</i>  <i>Einschlie√ülich auf Habr√©.</i>  <i>Zun√§chst m√∂chte ich den Lesern die Grundprinzipien der Arbeit mit Webprojekten vermitteln und die Ausgangspunkte aufzeigen, grundlegende Techniken und plattformunabh√§ngige Nuancen einf√ºhren.</i> <br><br>  Beginnen wir mit dem Axiom: Der Benutzer wartet nicht gern, daher ist es √§u√üerst wichtig, mit Timings und Reaktionsgeschwindigkeit zu arbeiten.  Am Black Friday werden viel mehr Anfragen an die Site gestellt als gew√∂hnlich, und es kann nicht nur zu einem R√ºckgang der Conversions aufgrund einer langen Auslastung kommen, sondern auch zu einem √úberma√ü an HTTP-Zeit√ºberschreitungen (die Site reagiert nicht). <br><br>  In den meisten F√§llen werden Standorte nicht aufgrund physischer Ausf√§lle belastet, sondern weil die Antwortzeit aufgrund von √úberlastung einiger Knoten die Zeit√ºberschreitungen zu √ºberschreiten begann.  Dies √§hnelt einem Stau, und f√ºr eine Weile m√ºssen Sie die Kontrolle √ºber Ihre eigenen H√§nde √ºbernehmen: Ger√§te erweitern (skalieren), anpassen, abschneiden und konfigurieren (Timeouts), die Belastung von Fahrzeugen (Pakete und Anforderungen) optimieren und mit Ausnahmen arbeiten. <br><br>  Da die Leistung der Site im Zusammenhang mit der Site zwei Aspekte hat - die Antwortgeschwindigkeit und die Anzahl der gleichzeitig verarbeiteten Anforderungen, werden wir diese Parameter verbessern. <br><blockquote>  In den meisten F√§llen gibt ein Unternehmen die Antwortgeschwindigkeit als Website-Geschwindigkeit gem√§√ü Google Analytics und die Anzahl gleichzeitiger Anfragen als Anzahl der Benutzer gleichzeitig auf der Website an. <br><br>  In der technischen Arbeit ist es nicht sehr bequem, mit diesen Parametern zu arbeiten. <br>  Als n√§chstes werde ich eine geeignetere Metrik f√ºr Berechnungen vorschlagen. </blockquote><h3>  Wir optimieren die Reaktionsgeschwindigkeit </h3><br><img src="https://habrastorage.org/webt/j4/do/3l/j4do3lxf6g5ycfmttgtobr16wfq.png"><br><br>  Bei der Optimierung der Antwortgeschwindigkeit interessieren uns zwei Indikatoren: <b>Serverantwortgeschwindigkeit</b> und <b>Seitenladezeit.</b> <br><br>  Die Ladezeit der Seite besteht aus folgenden Links: <br><br><ul><li>  Generierungszeit f√ºr Serverseiten; </li><li>  Seiten√ºbertragungszeit vom Server zum Client; </li><li>  Die Seitenverarbeitungszeit im Browser des Clients. </li></ul><br>  Wenn alles wie gewohnt funktioniert, ist der entscheidende Faktor f√ºr die Ladezeit der Seite nicht die Zeit, zu der die Seite vom Server generiert wurde, und die Zeit, zu der die Seite √ºber das Netzwerk geliefert wurde, sondern die Qualit√§t des Frontends und die Geschwindigkeit der Site im Browser.  Da letzteres vollst√§ndig auf der Benutzerseite liegt, haben Sie keine Angst vor den Bremsen am Black Friday.  Probleme k√∂nnen jedoch aufgrund von √úberlastungen Ihres Internetkanals oder der Bereitstellung einer externen Komponente (Partnerz√§hler, Online-Chats, CRM-Plugins usw.) auftreten. <br>  Wie gehe ich damit um?  Hier sind einige Arbeitstipps: <br><br><ol><li>  √úberpr√ºfen Sie die Auslastung des Internetkanals.  Z√§hlen Sie das gesch√§tzte Wachstum.  Erweitern Sie im Zweifelsfall den Kanal.  Einige Anbieter bieten Ihnen zus√§tzlich zu den laufenden teuren Verl√§ngerungen m√∂glicherweise eine vor√ºbergehende Verl√§ngerung f√ºr die Spitzenzeit an (viel billiger) oder erlauben Ihnen sogar, die H√∂chstgeschwindigkeit kurzzeitig zu √ºberschreiten. </li><li>  Verwenden Sie ein CDN?  Wenden Sie sich an den technischen Support und warnen Sie vor geplantem Verkehrswachstum.  Sie bereiten sich auch auf den allgemeinen H√∂hepunkt vor, und Ihre Prognose wird sich als n√ºtzlich erweisen.  Wenn das CDN verspricht, dass alles in Ordnung sein wird, sich aber trotz allem ‚Äûhinlegt‚Äú, hilft das Vorhandensein von Korrespondenz, Schadensersatzanspr√ºche geltend zu machen. </li><li>  Erstellen Sie im Voraus ein Skript, um externe Komponenten bei Problemen vor√ºbergehend zu deaktivieren.  Richten Sie das Szenario am Unternehmen aus.  Es wird nicht √ºberfl√ºssig sein, mit dem technischen Support der verwendeten Dienste zu kommunizieren, es ist jedoch normalerweise unm√∂glich, sie anderweitig irgendwie zu beeinflussen. </li><li>  Auf vielen Websites wird statisch √ºber den Anwendungsserver gerendert.  Unter hoher Last steigt die Anzahl der Anforderungen an die Statik um ein Vielfaches und sie beginnen mit der Anwendung selbst um Ressourcen zu konkurrieren.  Stellen Sie sicher, dass Sie die statische R√ºckgabe direkt von Nginx aus konfigurieren.  Erstens wird es viel besser damit umgehen, und zweitens wird es viel n√ºtzlichere Arbeit f√ºr Ihre Apache-, Tomcat- oder Jetty-Threads geben. </li></ol><br><h3>  Reaktionsgeschwindigkeit verbessern </h3><br><img src="https://habrastorage.org/webt/fg/s3/tf/fgs3tfdn9y_uw4e0i2bqg5lhzlc.png"><br><br>  Die Optimierung der Reaktionsgeschwindigkeit an sich bezieht sich auf die allgemeine Verbesserung der Standortleistung.  Theoretisch hilft es, den Arbeitsaufwand der Anwendung zu reduzieren und dadurch die Skalierung zu verbessern. Wenn jede Anforderung ‚Äûbilliger‚Äú wird, k√∂nnen Sie mehr Anforderungen mit denselben Ressourcen verarbeiten. <br><br>  In der Praxis erfordert die Optimierung der Reaktionsgeschwindigkeit jedoch viel unabh√§ngige Arbeit.  Es ist unm√∂glich, alles auf einmal zu optimieren, aber es ist einfach, dabei etwas zu zerbrechen. <br><blockquote>  Tipp: Systematisch denken.  Angenommen, die Codeleistung hat zugenommen, und die Anwendung hat begonnen, gleichzeitig mehr Datenbankabfragen durchzuf√ºhren.  Aber hier ist das Problem: Die Datenbankleistung erlaubt es nicht, eine solche Anzahl von Anforderungen zu verarbeiten, und die Site insgesamt wurde nur schlechter, und vor Beginn der Aktion wurde wertvolle Zeit aufgewendet. </blockquote>  Es ist daher besser, sich auf Skalierung und Skalierbarkeit zu konzentrieren und die allgemeine Optimierung getrennt von der Vorbereitung auf den Black Friday durchzuf√ºhren, um nicht aufgrund harter Fristen durcheinander zu kommen.  Denken Sie daran, jetzt ist es unsere Aufgabe sicherzustellen, dass die Baustelle in der Spitze der Lasten nicht schlechter funktioniert als drau√üen. <br><br>  Die Geschwindigkeit der Seitengenerierung ist f√ºr uns nur in Verbindung mit einem anderen Indikator von Interesse - der Menge der eingehenden Last. <br><br>  <b>Bitte beachten Sie:</b> F√ºr die Site ist nur die Anzahl der gleichzeitigen Anforderungen von Bedeutung, die von Benutzern erstellt werden, und nicht die Anzahl der Online-Benutzer auf der Site.  Und mit akzeptabler Genauigkeit die <b>Anzahl der Anfragen pro Sekunde</b> anhand der <b>Anzahl der Besucher</b> zu berechnen, <b>ist</b> ziemlich schwierig (dar√ºber habe ich oben geschrieben).  Fragen Sie das Unternehmen besser nach anderen Messdaten - Seitenaufrufen pro Stunde und Serverzeit. <br><br>  Als Ergebnis erhalten wir ein verst√§ndliches Ziel: die Seitengenerierung f√ºr die Zeit X mit der Anzahl der Anforderungen pro Sekunde Y sicherzustellen. Mit bestimmten numerischen Metriken ist es viel einfacher, den Bereitschaftsgrad und das aktuelle Ergebnis zu bewerten. <br><br>  Hier ist ein allgemeiner technischer Trainingsplan: <br><br><ol><li>  Finden Sie die aktuellen Indikatoren heraus (f√ºhren Sie Lasttests der aktuellen Version der Site durch); </li><li>  Zu verstehen, was genau fehlt und wie viel Ressourcen f√ºr die Bestellung erforderlich sind; </li><li>  Ressourcen hinzuf√ºgen; </li><li>  Wiederholen Sie den Stresstest und pr√ºfen Sie, ob dies hilft. </li></ol><br>  Sieht zu einfach aus?  Sie haben Recht, jeder Punkt ist mit vielen √úberraschungen behaftet. <br><br>  Sehr oft verbessert das Hinzuf√ºgen von Ressourcen die Situation teilweise, spart aber nicht das Ganze.  Oder in einer Testumgebung funktioniert die Site wie eine Uhr und auf dem Prod - wieder die Bremsen. <br><br>  Als N√§chstes zeige ich Ihnen, wie Sie potenzielle Probleme identifizieren und Schwachstellen beheben k√∂nnen.  Beginnen wir mit der Durchf√ºhrung von Stresstests und erhalten ein realistisches Ergebnis. <br><br><h3>  Wir f√ºhren Lasttests korrekt durch </h3><br><img src="https://habrastorage.org/webt/t9/mf/fe/t9mffe4gx1ujdnadqnyvplep6sa.png"><br><br><h4>  Wo testen? </h4><br>  Oft werden Stresstests an einem produktiven System durchgef√ºhrt.  Dies kann gut sein, um die Situation als Ganzes zu kontrollieren, aber nicht, um bestimmte Probleme iterativ zu l√∂sen.  Denken Sie daran, dass normalerweise nach neu entdeckten Problemen nach der Beseitigung neue auftreten k√∂nnen.  Silberkugeln treffen selten das Ziel. <br><br>  Ein fehlgeschlagener Auslastungstest kann f√ºr Site-Benutzer zu Unannehmlichkeiten f√ºhren oder ihn sogar f√ºr eine Weile ‚Äûunterbrechen‚Äú.  Es ist am besten, einen speziellen Bereich als Versuchskaninchen zu verwenden. <br><br>  Es muss folgende Anforderungen erf√ºllen: <br><br><ul><li>  Der dedizierte Bereich sollte v√∂llig unabh√§ngig und vom Produktiven isoliert sein. <br></li><li>  Idealerweise sollte ein dedizierter Bereich mit der Gr√∂√üe des Produkts √ºbereinstimmen.  Ein Modell in gro√üem Ma√üstab ist ebenfalls geeignet, verringert jedoch die Qualit√§t und Bedeutung von Tests.  Wenn die Belastung einer Ressource nicht linear zunimmt (wie dies normalerweise der Fall ist), zeigt Ihr Modell nicht an, dass die Ressource unter Volllast vorzeitig ersch√∂pft ist. <br></li><li>  Es ist am besten, genau die gleiche (aber nicht die gleiche!) Ausr√ºstung f√ºr Tests wie auf dem Produkt zu verwenden.  Andernfalls ist es nicht m√∂glich, Qualit√§t bereitzustellen, selbst wenn die quantitativen Werte der Ressourcen eingehalten werden.  Es kann im entscheidenden Moment einen grausamen Witz spielen.  Wenn dies nicht m√∂glich ist, testen Sie die Leistung des Ger√§ts unter Ihrer Last und bestimmen Sie den Einstellkoeffizienten. <br></li></ul><br>  Lassen Sie uns nun √ºber M√∂glichkeiten zum Generieren einer Testlast sprechen.  Ich werde einige grundlegende Techniken nennen, von denen jede ihre Vor- und Nachteile hat. <br><br><h4>  Wie erstelle ich eine Last? </h4><br>  <b>1. Testen auf Anforderungen aus den Protokollen</b> <br><br>  Es ist m√∂glich, den Verkehrsfluss durch die Battle Server-Protokolle zu emulieren.  Ein offensichtliches Plus dieses Ansatzes ist, dass Sie sich nicht mit Analysen, statistischen Modellen und einem synthetischen Verkehrsprofil befassen m√ºssen. <br><br>  Sie m√ºssen die Protokolle jedoch noch von Anforderungen bereinigen, die nicht ausgef√ºhrt werden k√∂nnen oder nicht ben√∂tigt werden. <br>  Sie m√ºssen beispielsweise keine produktiven Waren kaufen, da dies zu Problemen mit dem Produktinhalt der Datenbank f√ºhrt. <br><br>  Es wird schwierig sein, realistische Verz√∂gerungen zwischen Anfragen zu reproduzieren. <br>  Das Emulieren von Benutzersitzungen ist ebenfalls √§u√üerst schwierig. Diese Methode kommt dem hitbasierten Testen sehr nahe. <br><br>  <b>2. Verwenden von Yandex.Tank und Phantom</b> <br><br>  Der Panzer in Verbindung mit Phantom ist ein sehr praktisches und beliebtes Werkzeug f√ºr Treffer-basierte Tests.  Es hat eine durchdachte Oberfl√§che und erm√∂glicht es Ihnen, die Last zu verwalten.  Um mit dem Sch√§len aus einem Tank zu beginnen, m√ºssen Sie ‚ÄûPatronen‚Äú vorbereiten - spezielle Dateien, die Anforderungen f√ºr einen Generator enthalten. <br><br>  Trotz aller Bequemlichkeit hat der Tank einen gro√üen Nachteil: Er wei√ü nicht, wie man Benutzersitzungen verwendet. <br><br>  Sie k√∂nnen die Autorisierung, die vollst√§ndige Arbeit mit Cookies und variable Verz√∂gerungen vergessen.  Ein Tank kann nur Anfragen von einer einzigen Adresse ‚Äûpicken‚Äú. <br><br>  Es wird Ihnen passen, wenn: <br><br><ul><li>  Es gibt keinen Unterschied in der Serverantwortzeit f√ºr autorisierte und nicht autorisierte Benutzer oder sie ist vernachl√§ssigbar. </li><li>  API ohne HTTP-Sitzungen explizit testen; </li><li>  Dieser Ansatz entspricht im Allgemeinen der Logik Ihrer Website (normalerweise nicht f√ºr Online-Shops geeignet). </li></ul><br><img src="https://habrastorage.org/webt/c4/nh/em/c4nhemg4hescy14wza4hbwsfmfg.png"><br><br>  <b>3. Verwenden von Apache JMeter</b> <br><br>  Dies ist das flexibelste Tool, mit dem Sie Benutzersitzungen detailliert emulieren k√∂nnen.  Mit seiner Hilfe k√∂nnen Sie also immer noch die Frage des Unternehmens beantworten: "Wie viele Benutzer h√§lt die Website aus?"  Dar√ºber hinaus kann JMeter mit Yandex.Tank zusammenarbeiten. <br>  Das entscheidende Minus ist der Ressourcenverbrauch und die Komplexit√§t der Vorbereitung von Tests. <br><br>  Der wichtigste Ratschlag direkt zu JMeter: Vermeiden Sie es, die Seitenk√∂rper mit ihren Kr√§ften zu analysieren. Verwenden Sie besser vorbereitete Datens√§tze, um die Sitzungslogik zu reproduzieren.  Grunds√§tzlich ist es besser, die von JMeter geleistete Arbeit im Allgemeinen zu minimieren.  Wie bei Tank ist es m√∂glich, vorgenerierte "Patronen" daran anzubringen.  Hier m√ºssen sie die Verteilung bestimmter Seiten innerhalb eines Typs, die Variabilit√§t der Anforderungen usw. ber√ºcksichtigen. <br><br>  In JMeter selbst m√ºssen Benutzerverhaltensmodelle programmiert werden.  Wenn die Aufgabe darin besteht, nicht nur den Serverteil, sondern auch die R√ºckgabe von statischem Inhalt zu testen, f√ºhren Sie diesen Test separat mit Phantom aus, falls erforderlich, gleichzeitig mit dem JMeter-Test.  Dies wird dazu beitragen, den Ressourcenverbrauch des Lastgenerators erheblich zu reduzieren und die Reproduzierbarkeit des Tests zu erh√∂hen. <br><br>  <b>Empfehlungen f√ºr Stresstests</b> <br><br>  Gute Lasttests basieren auf einer kompetenten Verkehrsanalyse und einer qualitativ hochwertigen Erstellung eines statistischen Modells und von Profilen f√ºr die Emulation. <br><br>  Markieren Sie 5-7 Haupttypen von Seiten (vergessen Sie nicht auch die Zielseiten f√ºr Best√§nde) und berechnen Sie den Prozentsatz des gesamten zwischen ihnen verteilten Datenverkehrs.  Beachten Sie, dass pro Seite m√∂glicherweise mehrere Anforderungen an dynamischen Inhalt gestellt werden.  F√ºr Sie ist die Seite die gesamte Gruppe solcher Anfragen.  Analysieren Sie, wie viel Zeit Benutzer f√ºr jeden Seitentyp aufwenden: Durchschnitt, durchschnittliches Minimum, durchschnittliches Maximum. <br><br>  Wenn die Seite auf mehreren Anforderungen basiert, ber√ºcksichtigen Sie die Verz√∂gerung zwischen diesen.  Sehen Sie, wie viele Seiten ein Benutzer normalerweise pro Sitzung besucht und wie diese Nummer verteilt ist.  Markieren Sie 5-10 der h√§ufigsten Benutzerpfade nach Seitentyp. <br><br>  Konstruieren Sie die Szenarien anhand der erhaltenen Daten so, dass alle beschriebenen statistischen Parameter √§u√üerst genau wiedergegeben werden.  Vergessen Sie nicht die Variabilit√§t der Szenarien, sie sollten sowohl in der Anzahl als auch in der Zusammensetzung der Klicks variieren. <br><br>  Markieren Sie innerhalb jedes Seitentyps einzelne Adressen.  Je mehr, desto besser, aber ein paar Tausend der beliebtesten Adressen werden bereits √ºber den Augen liegen.  Sie k√∂nnen daraus Abfragelisten erstellen, indem Sie jede Adresse so oft zur Liste hinzuf√ºgen, wie Sie m√∂chten. <br><br>  Wenn zu viele Seiten vorhanden sind, teilen Sie sie entsprechend dem Prozentsatz des Datenverkehrs in mehrere Gruppen auf. <br><br>  Profile spielen nur f√ºr JMeter eine Rolle. Durch das Erstellen von Abfragelisten k√∂nnen Sie jedoch "Tank" -Patronen ausr√ºsten. <br><blockquote>  Und noch einmal: Wenn Sie JMeter im Benutzeremulationsmodus verwenden, vergessen Sie nicht die Verz√∂gerungen zwischen den Anforderungen.  Wenn Sie sie nicht hinzuf√ºgen, ist Ihre generierte Last um ein Vielfaches h√∂her als geplant! </blockquote>  √úberpr√ºfen Sie nach einem Testlauf unbedingt die Webserver-Protokolle, um festzustellen, ob der emulierte Datenverkehr produktiv ist. <br><br>  Kunstflug erstellt im Voraus Skripte, um die Standortdatenbank in den gew√ºnschten Zustand zu bringen.  Normalerweise funktionieren die auf die oben beschriebene Weise aufbereiteten Daten nur mit dem Status der Datenbank, f√ºr die Informationen zu Waren gesammelt wurden.  Es kann unerschwinglich lang sein, den SQL-Speicherauszug jedes Mal neu zu laden.  Dar√ºber hinaus ist es sehr w√ºnschenswert zu lernen, wie laufende Best√§nde mithilfe von Skripten im Testbereich verwaltet werden.  Oft sind sie wichtig f√ºr den Betrieb des Systems, und Sie m√ºssen verstehen, <b>mit welchem ‚Äã‚ÄãSatz</b> und <b>wie genau die</b> Arbeitsbest√§nde getestet werden. <br><br>  Alles ist fertig?  Gro√üartig, mach weiter! <br><br><h3>  Wir verwenden die √úberwachung in Tests </h3><br><img src="https://habrastorage.org/webt/tg/f0/3c/tgf03cquqgwujw_gyjflqij1s5c.png"><br><br>  Also haben wir kompetente Tests durchgef√ºhrt und die Ergebnisse erhalten.  Wenn alles in Ordnung ist und Ihre Website mit einer hohen Auslastung fertig wird, ist kein Black Friday f√ºr Sie be√§ngstigend.  Dieser Artikel w√§re jedoch unvollst√§ndig, wenn wir kein <s>trauriges</s> realistisches Szenario betrachten w√ºrden. <br><br>  Stellen Sie sich vor, eine Site kann einer akzeptablen Geschwindigkeit standhalten ... auch wenn nur ein F√ºnftel dessen, was das Unternehmen erreichen m√∂chte.  Ist es wirklich notwendig, den Hoster in Panik zu rufen und f√ºnfmal mehr Kapazit√§t zu bestellen? <br><br>  Im Prinzip wird der Host diesen Ansatz m√∂gen.  M√∂glicherweise erhalten Sie sogar den Status eines Goldkunden. <br><br>  Aber bevor wir vorschnell handeln, versuchen wir herauszufinden, was genau schief gelaufen ist. <br><br>  Ihre Rettungsboje auf See f√ºr m√∂gliche Ursachen ist ein √úberwachungssystem. <br><br><img src="https://habrastorage.org/webt/sp/kt/og/spktoglx5xwtzcea9x6itlmzcfs.png"><br><br>  Daher treten wir einen Schritt zur√ºck und installieren vor dem Testen so viele Beispiele wie m√∂glich.  Idealerweise sollten alle ersch√∂pfbaren Ressourcen √ºberwacht werden. <br><br>  Unten finden Sie eine Liste, die Ihnen den Einstieg erleichtert: <br><br><ul><li>  CPU-Auslastung (CPU-Auslastung, CPU-Auslastung); </li><li>  RAM laden; </li><li>  Laden der Festplatte (IOPS, Latenz); </li><li>  Anzahl der Netzwerkverbindungen (Wartezeit, Fin-Wartezeit, Wartezeit schlie√üen, hergestellt); </li><li>  Die Anzahl der offenen Steckdosen; </li><li>  Die Anzahl der Benutzerprozesse; </li><li>  Die Anzahl der ge√∂ffneten Dateien; </li><li>  Netzwerkverkehr (in Megabit und in Paketen sowie Fehler und Abbr√ºche). </li></ul><br>  Und auch: <br><br><ul><li>  Die Anzahl der Abfragen, Antworten und Verbindungen zur Datenbank und zu anderen Komponenten. </li><li>  Antwortgeschwindigkeit der Komponenten (Datenbank, Suchserver, Caches usw.); </li><li>  Alle verf√ºgbaren Protokolle f√ºr Fehler. </li></ul><br>         .       ,    ¬´ ¬ª.  ,    ¬´¬ª  ,    . <br><br> ,    ,   . <br><br> -   ,   : ,  HDD  SSD.       -,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a> <br><br>          <b> </b>      <b>.</b>       . <br><br> <b>  :</b> ,  ,      ?     ,    , ,  2-         ,  - (,  0,5 )      1,5    .              - ¬´,   ¬ª. <br><br>          1 ,   .        ,    . ,              .   ,     (      )    ,   . <br><br><h3>   </h3><br>  ,    ,   ,   . <br><br>     ¬´¬ª ,     .    2-3 ,      ,    . <br><br>     , :        .     ,     . , , ,      ,   . <br><br>           .          .  ,   SLA, ,  ,  ,      ,      ¬´¬ª . <br><br>       .        ,     .      . <br><br>     ,  ,           .       ,      ,        . <br><br>       ,    . <br> -,       (   ),  -,      .            . <br><br> ,   .       -    ,            . <br><br>     ,       ,   ,    ¬´   e-commerce.  ¬ª,   16   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418755/">https://habr.com/ru/post/de418755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418741/index.html">F√ºgen Sie die Verschl√ºsselung hinzu und dr√ºcken Sie auf regul√§res SIP</a></li>
<li><a href="../de418743/index.html">Geschichte des ersten Platzes im ML Boot Camp VI</a></li>
<li><a href="../de418747/index.html">Probleml√∂sung: Wie k√∂nnen Probleme in einem Team effektiv gel√∂st werden?</a></li>
<li><a href="../de418751/index.html">Dex frecher chinesischer Spion</a></li>
<li><a href="../de418753/index.html">vSAN in der VMware Cloud</a></li>
<li><a href="../de418757/index.html">Ausd√ºnnende Zeitrahmen (Kryptow√§hrungen, Devisen, B√∂rsen)</a></li>
<li><a href="../de418759/index.html">Wie viel kostet es f√ºr einen Studenten, einen Chip auszustellen?</a></li>
<li><a href="../de418761/index.html">Das Buch ‚ÄûPure Python. Die Feinheiten der Programmierung f√ºr Profis ¬ª</a></li>
<li><a href="../de418763/index.html">Mittel / Senior: Wie kann man aus dem Sumpf ausbrechen?</a></li>
<li><a href="../de418765/index.html">Dadata-Tipps helfen beim Ausf√ºllen von Eingabeformularen. Jetzt heile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>