<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ ๐คด๐ป ๐ ุชุทููุฑ ูุดุบู Kubernetes ูุน ุฅุทุงุฑ ุงููุดุบู โพ๏ธ ๐ง๐ผ โ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุง ูู ูุฐููุฑ ูู ููุงู Radar Technology ุ ูุฅู Lamoda ุชุชุญุฑู ุจูุดุงุท ูุญู ุจููุฉ ุงูุฎุฏูุงุช ุงููููุฑููุฉ. ูุชู ุญุฒู ูุนุธู ุฎุฏูุงุชูุง ุจุงุณุชุฎุฏุงู ูููู ููุดุฑูุง ุนูู Kubernetes. ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทููุฑ ูุดุบู Kubernetes ูุน ุฅุทุงุฑ ุงููุดุบู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lamoda/blog/446648/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/352/5c8/f16/3525c8f16510afa2b61b0ff9b8434a02.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ููุง ูู ูุฐููุฑ ูู ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Radar Technology</a> ุ ูุฅู Lamoda ุชุชุญุฑู ุจูุดุงุท ูุญู ุจููุฉ ุงูุฎุฏูุงุช ุงููููุฑููุฉ.  ูุชู ุญุฒู ูุนุธู ุฎุฏูุงุชูุง ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู</a> ููุดุฑูุง ุนูู Kubernetes.  ูุฐุง ุงูููุฌ ููุจู ุงุญุชูุงุฌุงุชูุง ุจุงููุงูู ูู 99 ูช ูู ุงูุญุงูุงุช.  ูุจูู 1ูช ุนูุฏูุง ูุง ุชููู ูุธููุฉ Kubernetes ุงูููุงุณูุฉ ูุงููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชูููู ุชุญุฏูุซ ูููุณุฎ ุงูุงุญุชูุงุทู ุฃู ุงูุฎุฏูุฉ ูุญุฏุซ ูุนูู.  ูุญู ูุฐู ุงููุดููุฉ ุ ูุณุชุฎุฏู ููุท ุงููุดุบู.  ูู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช ุ ุณูู ุฃุชุญุฏุซ ุฃูุง - ุบุฑูุบูุฑู ููุฎุงูููู ุ ูุทูุฑ ูุฑูู ุงูุจุญุซ ูุงูุชุทููุฑ ูู ูุงููุฏุง - ุนู ุงูุฏุฑูุณ ุงูุชู ุชุนููุชูุง ูู ุชุฌุฑุจุชู ูู ุชุทููุฑ ูุดุบูู ุทุงุฆุฑุงุช K8 ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุทุงุฑ ุนูู ุงููุดุบู</a> . </p><a name="habracut"></a><br><h2 id="chto-takoe-operator" style=";text-align:right;direction:rtl">  ูุง ูู ุงููุดุบูุ </h2><br><p style=";text-align:right;direction:rtl">  ุชุชูุซู ุฅุญุฏู ุทุฑู ุชูุณูุน ูุธููุฉ Kubernetes ูู ุฅูุดุงุก ูุญุฏุงุช ุงูุชุญูู ุงูุฎุงุตุฉ ุจู.  ุงูุชุฌุฑูุฏุงุช ุงูุฑุฆูุณูุฉ ูู Kubernetes ูู ุงูุฃุดูุงุก ูุฃุฌูุฒุฉ ุงูุชุญูู.  ุชุตู ุงููุงุฆูุงุช ุงูุญุงูุฉ ุงููุทููุจุฉ ูููุชูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุตู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Pod</a> ูุง ูู ุงูุญุงููุงุช ุงูุชู ูุฌุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฏุกูุง</a> ููุนููุงุช ุจุฏุก ุงูุชุดุบูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฎุจุฑ</a> ูุงุฆู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ReplicaSet</a> ุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ููุฐุง Pod ุงูุชู ูุฌุจ ุชุดุบูููุง.  ุชุชุญูู ูุญุฏุงุช ุงูุชุญูู ูู ุญุงูุฉ ุงููุชูุฉ ุจูุงุกู ุนูู ูุตู ุงููุงุฆูุงุช ุ ูู ุงูุญุงูุฉ ุงูููุถุญุฉ ุฃุนูุงู ุ ุณุชุฏุนู ูุญุฏุฉ ุงูุชุญูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุณุฎ ุงููุชูุงุซู</a> ุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ูู Pod ุงููุญุฏุฏุฉ ูู ReplicaSet.  ุจูุณุงุนุฏุฉ ูุญุฏุงุช ุงูุชุญูู ุงูุฌุฏูุฏุฉ ุ ููููู ุชูููุฐ ููุทู ุฅุถุงูู ุ ูุซู ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุฃุญุฏุงุซ ุฃู ุงูุชุนุงูู ูู ุงููุดู ุฃู ุฅุฏุงุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุฑุฏ</a> ุงูุฌูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฎุงุฑุฌูุฉ</a> . </p><br><p style=";text-align:right;direction:rtl"> ุงููุดุบู ูู ุชุทุจูู kubernetes ูุชุถูู ูุงุญุฏ ุฃู ุฃูุซุฑ ูู ูุญุฏุงุช ุงูุชุญูู ุงูุชู ุชุฎุฏู ููุฑุฏ ุทุฑู ุซุงูุซ.  ุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชุฑุงุน</a> ูุฐุง ุงูููููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุจู ูุฑูู CoreOS</a> ูู ุนุงู 2016 ุ ููุคุฎุฑุงู ุ ุชุฒุงูุฏุช ุดุนุจูุฉ ุงููุดุบููู ุจุณุฑุนุฉ.  ููููู ูุญุงููุฉ ุงูุนุซูุฑ ุนูู ุงููุดุบู ุงููุทููุจ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงุฆูุฉ ุนูู kubedex</a> ุ (ุฃูุซุฑ ูู 100 ูุดุบู ูุชุงุญ ููุฌูููุฑ ูุฏุฑุฌุฉ ููุง) ุ ููุฐูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">OperatorHub</a> .  ููุงู 3 ุฃุฏูุงุช ุดุงุฆุนุฉ ูุชุทููุฑ ุงููุดุบู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Kubebuilder</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Operator SDK</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Metacontroller</a> .  ูู Lamoda ูุณุชุฎุฏู Operator SDK ุ ูุฐูู ุณูุชุญุฏุซ ุนูู ูุงุญููุง. </p><br><h2 id="operator-sdk" style=";text-align:right;direction:rtl">  ูุดุบู SDK </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f7e/56d/194/f7e56d1948a2f5291ef189e7a03df9be.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุงููุดุบู SDK ุฌุฒุกูุง ูู ุฅุทุงุฑ ุนูู ุงููุดุบู ุ ูุงูุฐู ูุชุถูู ุฌุฒุฃูู ููููู: ูุฏูุฑ ุฏูุฑุฉ ุญูุงุฉ ุงููุดุบู ูููุงุณ ุงููุดุบู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุนุฏ ุงููุดุบู SDK</a> ุนุจุงุฑุฉ ุนู ุบูุงู ูุจุฑูุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุช ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู</a> ุ ููู ููุชุจุฉ ุดุงุฆุนุฉ ูุชุทููุฑ ูุญุฏุงุช ุงูุชุญูู (ูุงูุชู ุจุฏูุฑูุง ุนุจุงุฑุฉ ุนู ุบูุงู ูุจุฑูุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนููู</a> ) ุ ููู ุนุจุงุฑุฉ ุนู ูููุฏ ุฑูุฒ + ุฅุทุงุฑ ุนูู ููุชุงุจุฉ ุงุฎุชุจุงุฑุงุช E2E. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุบู ุฏูุฑุฉ ุญูุงุฉ ุงููุดุบู</a> - ุฅุทุงุฑ ุนูู ูุฅุฏุงุฑุฉ ุงููุดุบููู ุงูุญุงูููู ุ  ูุญู ุงูููุงูู ุนูุฏูุง ูุฏุฎู ุงููุดุบู ูุถุน ุงูุฒููุจู ุฃู ูุชู ุทุฑุญ ุฅุตุฏุงุฑ ุฌุฏูุฏ. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุณ ุงููุดุบู</a> - ููุง ููุญู ุงูุงุณู ุ ูุฅูู ูุฌูุน ุงูุจูุงูุงุช ุนู ุนูู ุงููุดุบู ุ ูููููู ุฃูุถูุง ุฅูุดุงุก ุชูุงุฑูุฑ ุจูุงุกู ุนูููุง. </li></ul><br><h2 id="sozdanie-novogo-proekta" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ </h2><br><p style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ุฐูู ูู ุงููุดุบู ุงูุฐู ูุฑุงูุจ ููููุง ุจุงุณุชุฎุฏุงู ุงูุชููููุงุช ูู ุงููุณุชูุฏุน ุ ูุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญุฏูุซ ุ ูููู ุจุฅุนุงุฏุฉ ุชุดุบูู ูุดุฑ ุงูุฎุฏูุฉ ุจุชููููุงุช ุฌุฏูุฏุฉ.  ุฑูุฒ ุนููุฉ ูุงูู ูุชุงุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4c0/e84/ebc/4c0e84ebcba8cad49b2bea8506f79d32.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑูุน ูุน ูุดุบู ุฌุฏูุฏ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">operator-sdk new config-monitor</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณููุดุฆ ูููุดุฆ ุงูููุฏ ุฑูุฒูุง ูููุดุบู ุงูุฐู ูุนูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุงุญุฉ ุงูุงุณู</a> ุงููุฎุตุตุฉ.  ูุฐุง ุงูููุฌ ุฃูุถู ูู ููุญ ุญู ุงููุตูู ุฅูู ุงููุฌููุนุฉ ุจุฃููููุง ุ ูุฃูู ูู ุญุงูุฉ ุญุฏูุซ ุฃุฎุทุงุก ุ ุณูุชู ุนุฒู ุงููุดุงูู ุฏุงุฎู ููุณ ูุณุงุญุฉ ุงูุงุณู.  ูููู ุฅูุดุงุก ุนุงูู ุงูุชุดุบูู ุนูู <code>cluster-wide</code> ุนู ุทุฑูู ุฅุถุงูุฉ <code>--cluster-scoped</code> .  ุณุชููู ุงูุฏูุงุฆู ุงูุชุงููุฉ ููุฌูุฏุฉ ุฏุงุฎู ุงููุดุฑูุน ุงูุฐู ุชู ุฅูุดุงุคู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  cmd - ูุญุชูู ุนูู <code>main package</code> ุ ุญูุซ <code>Manager</code> ุชููุฆุฉ <code>Manager</code> ูุฅุทูุงููุง ุ </li><li style=";text-align:right;direction:rtl">  ูุดุฑ - ูุญุชูู ุนูู ุฅุนูุงูุงุช ูููุดุบู ู CRD ูุงูุฃุดูุงุก ุงูุถุฑูุฑูุฉ ูุฅุนุฏุงุฏ ูุดุบู RBAC ุ </li><li style=";text-align:right;direction:rtl">  pkg - ููุง ุณูููู ุฑูุฒูุง ุงูุฑุฆูุณู ูููุงุฆูุงุช ุงูุฌุฏูุฏุฉ ูุฃุฌูุฒุฉ ุงูุชุญูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ููุฌุฏ ููู <a href=""><code>cmd/manager/main.go</code></a> ูุงุญุฏ ููุท ูู <a href=""><code>cmd/manager/main.go</code></a> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุชุทู ุงูุดูุฑุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// Become the leader before proceeding err = leader.Become(ctx, "config-monitor-lock") if err != nil { log.Error(err, "") os.Exit(1) } // Create a new Cmd to provide shared dependencies and start components mgr, err := manager.New(cfg, manager.Options{ Namespace: namespace, MetricsBindAddress: fmt.Sprintf("%s:%d", metricsHost, metricsPort), }) ... // Setup Scheme for all resources if err := apis.AddToScheme(mgr.GetScheme()); err != nil { log.Error(err, "") os.Exit(1) } // Setup all Controllers if err := controller.AddToManager(mgr); err != nil { log.Error(err, "") os.Exit(1) } ... // Start the Cmd if err := mgr.Start(signals.SetupSignalHandler()); err != nil { log.Error(err, "Manager exited non-zero") os.Exit(1) }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูู ุงูุณุทุฑ ุงูุฃูู: <code>err = leader.Become(ctx, "config-monitor-lock")</code> - ูุชู ุชุญุฏูุฏ ุฒุนูู.  ูู ูุนุธู ุงูุณููุงุฑูููุงุช ุ ููุฒู ูุฌูุฏ ูุซูู ูุดุท ูุงุญุฏ ููุท ูุจูุงู ุนูู ูุณุงุญุฉ ุงูุงุณู / ุงููุชูุฉ.  ุงูุชุฑุงุถููุง ุ ูุณุชุฎุฏู ุงููุดุบู SDK ุงุณุชุฑุงุชูุฌูุฉ <a href="">Leader for life</a> - ุฃูู ูุซูู ูููุดุบู ุณูุจูู ูู ุงูุฑุงุฆุฏ ุญุชู ูุชู ุฅุฒุงูุชู ูู ุงููุฌููุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุนููู ูุซูู ุนุงูู ุงูุชุดุบูู ูุฐุง ููุงุฆุฏ ุ ุชุชู ุชููุฆุฉ <code>Manager</code> ุฌุฏูุฏ - <code>mgr, err := manager.New(...)</code> .  ุชุดูู ูุณุคูููุงุชู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>err := apis.AddToScheme(mgr.GetScheme())</code> - ุชุณุฌูู ุฃูุธูุฉ ุงูููุงุฑุฏ ุงูุฌุฏูุฏุฉ ุ </li><li style=";text-align:right;direction:rtl">  <code>err := controller.AddToManager(mgr)</code> - ุชุณุฌูู ูุญุฏุงุช ุงูุชุญูู ุ </li><li style=";text-align:right;direction:rtl">  <code>err := mgr.Start(signals.SetupSignalHandler())</code> - ุฅุทูุงู ูุงูุชุญูู ูู ูุญุฏุงุช ุงูุชุญูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ููุณ ูุฏููุง ููุงุฑุฏ ุฌุฏูุฏุฉ ููุง ูุญุฏุงุช ุชุญูู ููุชุณุฌูู.  ููููู ุฅุถุงูุฉ ููุฑุฏ ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">operator-sdk add api --api-version=services.example.com/v1alpha1 --kind=MonitoredService</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุถูู ูุฐุง ุงูุฃูุฑ ุชุนุฑูู ูุฎุทุท ููุฑุฏ <code>MonitoredService</code> ุฅูู ุฏููู <code>pkg/apis</code> ุ ุจุงูุฅุถุงูุฉ ุฅูู yaml ูุน ุชุนุฑูู <code>CRD</code> ูู <code>deploy/crds</code> .  ูู ุจูู ุฌููุน ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุ ูุฌุจ ุชุบููุฑ ุชุนุฑูู ุงููุฎุทุท ูุฏูููุง ููุท ูู <a href=""><code>monitoredservice_types.go</code></a> .  ูุญุฏุฏ ููุน <code>MonitoredServiceSpec</code> ุงูุญุงูุฉ ุงููุทููุจุฉ ููููุฑุฏ: ูุง ูุญุฏุฏู ุงููุณุชุฎุฏู ูู yaml ูุน ุชุนุฑูู ุงูููุฑุฏ.  ูู ุณูุงู ุงููุดุบู ุงูุฎุงุต ุจูุง ุ ูุญุฏุฏ ุญูู <code>Size</code> ุงูุนุฏุฏ ุงููุทููุจ <code>ConfigRepo</code> ุงููุชูุงุซูุฉ ุ ูุดูุฑ <code>ConfigRepo</code> ุฅูู ุงูููุงู ุงูุฐู ูููู ุณุญุจ ุงูุชููููุงุช ุงูุญุงููุฉ ููู.  ูุญุฏุฏ <code>MonitoredServiceStatus</code> ุงูุญุงูุฉ ุงููุฑุตูุฏุฉ ููููุฑุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฅูู ูุฎุฒู ุฃุณูุงุก ุงููุฑูู ุงูุชู ุชูุชูู ุฅูู ูุฐุง ุงูููุฑุฏ <code>spec</code> ุงูุญุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุญุฑูุฑ ุงููุฎุทุท ุ ุชุญุชุงุฌ ุฅูู ุชุดุบูู ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">operator-sdk generate k8s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชุญุฏูุซ ุชุนุฑูู <code>CRD</code> ูู <code>deploy/crds</code> . </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููู ุจุฅูุดุงุก ุงูุฌุฒุก ุงูุฑุฆูุณู ูู ุงููุดุบู ูุฏููุง ุ ูุญุฏุฉ ุงูุชุญูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">operator-sdk add controller --api-version=services.example.com/v1alpha1 --kind=Monitor</code> </pre> <br><p style=";text-align:right;direction:rtl">  <a href=""><code>monitor_controller.go</code></a> ููู <a href=""><code>monitor_controller.go</code></a> ูู ุฏููู <code>pkg/controller</code> ุ ุงูุฐู ูุถูู ุฅููู ุงูููุทู ุงูุฐู ูุญุชุงุฌ ุฅููู. </p><br><h2 id="razrabotka-kontrollera" style=";text-align:right;direction:rtl">  ุชุทููุฑ ุงููุฑุงูุจ ุงููุงูู </h2><br><p style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงูุชุญูู ูู ูุญุฏุฉ ุงูุนูู ุงูุฑุฆูุณูุฉ ูููุดุบู.  ูู ุญุงูุชูุง ุ ููุงู ุฌูุงุฒู ุชุญูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุงูุจ ุงููุฑุงูุจ ุชุฑุงูุจ ุชุบููุฑุงุช ุชูููู ุงูุฎุฏูุฉ. </li><li style=";text-align:right;direction:rtl">  ุชููู ูุญุฏุฉ ุงูุชุญูู ุจุงูุชุฑููุฉ ุจุชุญุฏูุซ ุงูุฎุฏูุฉ ูุงูุญูุงุธ ุนูููุง ูู ุงูุญุงูุฉ ุงููุทููุจุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงูุชุญูู ูู ุฌููุฑูุง ุนุจุงุฑุฉ ุนู ุญููุฉ ุชุญูู ุ ูุชููู ุจูุฑุงูุจุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุงูุฃุญุฏุงุซ ุงูุชู ุงุดุชุฑูุช ูููุง ููุนุงูุฌุชูุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/220/2e6/a09/2202e6a0931df3e5b87c4442dd839615.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ูุญุฏุฉ ุชุญูู ุฌุฏูุฏุฉ ูุชุณุฌูููุง ุจูุงุณุทุฉ ุงููุฏูุฑ ูู ุทุฑููุฉ <code>add</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">c, err := controller.New("monitor-controller", mgr, controller.Options{Reconciler: r})</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>Watch</code> ุ ูุดุชุฑู ูู ุงูุฃุญุฏุงุซ ุงููุชุนููุฉ ุจุฅูุดุงุก ููุฑุฏ ุฌุฏูุฏ ุฃู ุชุญุฏูุซ <code>Spec</code> ูููุฑุฏ <code>MonitoredService</code> ููุฌูุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">err = c.Watch(&amp;source.Kind{Type: &amp;servicesv1alpha1.MonitoredService{}}, &amp;handler.EnqueueRequestForObject{}, common.CreateOrUpdateSpecPredicate)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุชูููู ููุน ุงูุญุฏุซ ุจุงุณุชุฎุฏุงู <code>src</code> ูุงููุนููุงุช <code>predicates</code> .  <code>src</code> ููุจู ุงููุงุฆูุงุช ูู ุงูููุน <code>Source</code> . </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>Informer</code> - ูุณุชูุตู ุจุดูู ุฏูุฑู <code>apiserver</code> ููุฃุญุฏุงุซ ุงูุชู <code>apiserver</code> ูุน ุนุงูู ุงูุชุตููุฉ ุ ุฅุฐุง ูุงู ููุงู ูุซู ูุฐุง ุงูุญุฏุซ ุ ูุถุนู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุญุฏุฉ ุงูุชุญูู.  ูู <code>controller-runtime</code> ูุนุฏ ูุฐุง ุจุฑูุงูุฌ ุงูุชูุงู ุนูู <code>SharedIndexInformer</code> ูู <code>client-go</code> . </li><li style=";text-align:right;direction:rtl">  ุชุนุฏ <code>Kind</code> ุฃูุถูุง <code>SharedIndexInformer</code> ุนูู <code>SharedIndexInformer</code> ุ ูููููุง ุ ุนูู ุนูุณ <code>Informer</code> ุ ุชููู ุจุฅูุดุงุก ูุซูู ูุฎุจุฑ ุจุดูู ูุณุชูู ุงุณุชูุงุฏูุง ุฅูู ุงููุนููุงุช ุงูุชู ุชู ุชูุฑูุฑูุง (ูุฎุทุท ุงูููุฑุฏ ุงููุฑุงูุจุฉ). </li><li style=";text-align:right;direction:rtl">  <code>Channel</code> - ุชูุจู <code>chan event.GenericEvent</code> ููุนููุฉ ุ ูุชู ูุถุน ุงูุฃุญุฏุงุซ ุงููุงุฏูุฉ ูู ุฎูุงูู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูุญุฏุฉ ุงูุชุญูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ุชุชููุน ุชุชููุน ุงููุงุฆูุงุช ุงูุชู ุชูุจู ูุงุฌูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Predicate</code></a> .  ูู ุงููุงูุน ุ ูุนุฏ ูุฐุง ูุฑุดุญูุง ุฅุถุงูููุง ููุฃุญุฏุงุซ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชุตููุฉ <code>UpdateEvent</code> ููููู ุฃู ุชุฑู ุจุงูุถุจุท ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง ูู <code>spec</code> ุงูููุฑุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุตู ุญุฏุซ ูุง ุ ููุจู <code>EventHandler</code> ุฐูู - ุงููุณูุทุฉ ุงูุซุงููุฉ ูุทุฑููุฉ <code>Watch</code> - ุงูุชู ุชูุชู ุงูุญุฏุซ ุจุชูุณูู ุงูุทูุจ ุงูุฐู ูุชููุนู <code>Reconciler</code> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>EnqueueRequestForObject</code> - ุจุฅูุดุงุก ุทูุจ ุจุงุณู ููุณุงุญุฉ ุงุณู ุงููุงุฆู ุงูุฐู ุชุณุจุจ ูู ุญุฏูุซ ุงูุญุฏุซ ุ </li><li style=";text-align:right;direction:rtl">  <code>EnqueueRequestForOwner</code> - ุจุฅูุดุงุก ุทูุจ ูุน ุจูุงูุงุช ุฃุตู ุงููุงุฆู.  ูุนุฏ ุฐูู ุถุฑูุฑููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู <code>Pod</code> ุชู ุญุฐู <code>Pod</code> ุงูุชุญูู ูู ุงูููุงุฑุฏ ุ ูุชุญุชุงุฌ ุฅูู ุงูุจุฏุก ูู ุงุณุชุจุฏุงููุง ุ </li><li style=";text-align:right;direction:rtl">  ูุฃุฎุฐ <code>EnqueueRequestsFromMapFunc</code> - ููุนููุฉ ุ ูุธููุฉ <code>map</code> ุงูุชู ุชุชููู ุญุฏุซูุง (ููููููุง ูู <code>MapObject</code> ) ูุชูุฑุฌุน ูุงุฆูุฉ ุจุงูุทูุจุงุช.  <a href="">ูุซุงู ุนูู ุฐูู ุนูุฏูุง</a> ุชููู <a href="">ููุงู ุญุงุฌุฉ ุฅูู ูุฐุง ุงููุนุงูุฌ</a> - ููุงู ุฌูุงุฒ ุชูููุช ุ ููู ุนูุงูุฉ ุชุญุชุงุฌ ุฅูู ุณุญุจ ุชููููุงุช ุฌุฏูุฏุฉ ูุฌููุน ุงูุฎุฏูุงุช ุงููุชุงุญุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุชู ูุถุน ุงูุทูุจุงุช ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฌูุงุฒ ุงูุชุญูู ุ ูุณุญุจ ุฃุญุฏ ุงูุนูุงู (ุจุดูู ุงูุชุฑุงุถู ูุญุฏุฉ ุงูุชุญูู ูุงุญุฏ) ุงูุญุฏุซ ุฎุงุฑุฌ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุชูุฑูุฑู ุฅูู <code>Reconciler</code> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ูููู Reconciler</strong> ุจุชูููุฐ ุทุฑููุฉ ูุงุญุฏุฉ ููุท - <code>Reconcile</code> ุ ูุงูุชู ุชุญุชูู ุนูู ุงูููุทู ุงูุฃุณุงุณู ููุนุงูุฌุฉ ุงูุฃุญุฏุงุซ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุทุฑููุฉ ุงูุชูููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">func (r *ReconcileMonitor) Reconcile(request reconcile.Request) (reconcile.Result, error) { reqLogger := log.WithValues("Request.Namespace", request.Namespace, "Request.Name", request.Name) reqLogger.Info("Checking updates in repo for MonitoredService") // fetch the Monitor instance instance := &amp;servicesv1alpha1.MonitoredService{} err := r.client.Get(context.Background(), request.NamespacedName, instance) if err != nil { if errors.IsNotFound(err) { // Request object not found, could have been deleted after reconcile request. // Owned objects are automatically garbage collected. For additional cleanup logic use finalizers. // Return and don't requeue return reconcile.Result{}, nil } // Error reading the object - requeue the request. return reconcile.Result{}, err } // check if service's config was updated // if it was, send event to upgrade controller if podSpec, ok := r.isServiceConfigUpdated(instance); ok { // Update instance Spec instance.Status.PodSpec = *podSpec instance.Status.ConfigChanged = true err = r.client.Status().Update(context.Background(), instance) if err != nil { reqLogger.Error(err, "Failed to update service status", "Service.Namespace", instance.Namespace, "Service.Name", instance.Name) return reconcile.Result{}, err } r.eventsChan &lt;- event.GenericEvent{Meta: &amp;servicesv1alpha1.MonitoredService{}, Object: instance} } return reconcile.Result{}, nil }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุชูุจู ุงูุทุฑููุฉ ูุงุฆู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Request</code></a> ุจุญูู <code>NamespacedName</code> ุ ูููู ูู ุฎูุงูู ุณุญุจ ุงูููุฑุฏ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช: <code>r.client.Get(context.TODO(), request.NamespacedName, instance)</code> .  ูู ุงููุซุงู ุ ูุชู ุชูุฏูู ุทูุจ ุฅูู ุงูููู ูุน ุชูููู ุงูุฎุฏูุฉ ุงููุดุงุฑ ุฅููู ุจูุงุณุทุฉ ุญูู <code>ConfigRepo</code> ูู <code>spec</code> ุงูููุฑุฏ.  ุฅุฐุง ุชู ุชุญุฏูุซ ุงูุชูููู ุ ูุชู ุฅูุดุงุก ุญุฏุซ ุฌุฏูุฏ ูู ููุน <code>GenericEvent</code> ูุฅุฑุณุงูู ุฅูู ุงูููุงุฉ ุงูุชู ูุณุชูุน ุฅูููุง ุฌูุงุฒ ุงูุชุญูู ูู <code>Upgrade</code> . </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูุนุงูุฌุฉ ุงูุทูุจ ุ ุชุฑุฌุน <code>Reconcile</code> ูุงุฆููุง ูู ุงูููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Result</code></a> and <code>error</code> .  ุฅุฐุง ูุงู ุงูุญูู " <code>Result</code> ูู <code>Requeue: true</code> ุฃู <code>error != nil</code> ุ ูุณูู ุชูุฑุฌุน ูุญุฏุฉ ุงูุชุญูู ุงูุทูุจ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฑุฉ ุฃุฎุฑู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>queue.AddRateLimited</code> .  ุณูุชู ุฅุฑุฌุงุน ุงูุทูุจ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุน ุชุฃุฎูุฑ ุ ูุงูุฐู ูุชู ุชุญุฏูุฏู ุจูุงุณุทุฉ <code>RateLimiter</code> .  ุจุดูู ุงูุชุฑุงุถู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>ItemExponentialFailureRateLimiter</code></a> ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>ItemExponentialFailureRateLimiter</code></a> ุ ููุง ูุฒูุฏ ูู ููุช ุงูุชุฃุฎูุฑ ุฃุถุนุงูุง ูุถุงุนูุฉ ูุน ุฒูุงุฏุฉ ูู ุนุฏุฏ "ุฅุฑุฌุงุน" ุงูุทูุจ.  ุฅุฐุง ูู <code>Requeue</code> ุชุนููู ุญูู <code>Requeue</code> ุ ููู ูุญุฏุซ ุฃู ุฎุทุฃ ุฃุซูุงุก ูุนุงูุฌุฉ ุงูุทูุจ ุ <code>Queue.Forget</code> ูุญุฏุฉ ุงูุชุญูู <code>Queue.Forget</code> ุ ููุง ูุคุฏู ุฅูู ุฅุฒุงูุฉ ุงูุทูุจ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช <code>RateLimiter</code> (ูุจุงูุชุงูู ุฅุนุงุฏุฉ ุชุนููู ุนุฏุฏ ุงููุฑุชุฌุนุงุช).  ูู ููุงูุฉ ูุนุงูุฌุฉ ุงูุทูุจ ุ ุชููู ูุญุฏุฉ ุงูุชุญูู ุจุฅุฒุงูุชู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุงุณุชุฎุฏุงู ุงูุฃุณููุจ <code>Queue.Done</code> . </p><br><h2 id="zapusk-operatora" style=";text-align:right;direction:rtl">  ุฅุทูุงู ุงููุดุบู </h2><br><p style=";text-align:right;direction:rtl">  ุชู ูุตู ููููุงุช ุงููุดุบู ุฃุนูุงู ุ ูุธู ุณุคุงู ูุงุญุฏ: ููู ูุจุฏุฃ ุชุดุบููู.  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุฃูุฏ ูู ุชุซุจูุช ุฌููุน ุงูููุงุฑุฏ ุงููุงุฒูุฉ (ููุงุฎุชุจุงุฑ ุงููุญูู ุ ุฃูุตู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฅุนุฏุงุฏ minikube</a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Setup Service Account kubectl create -f deploy/service_account.yaml # Setup RBAC kubectl create -f deploy/role.yaml kubectl create -f deploy/role_binding.yaml # Setup the CRD kubectl create -f deploy/crds/services_v1alpha1_monitoredservice_crd.yaml # Setup custom resource kubectl create -f deploy/crds/services_v1alpha1_monitoredservice_cr.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุฌุฑุฏ ุงุณุชููุงุก ุงูุดุฑูุท ุงููุณุจูุฉ ุ ููุงู ุทุฑููุชุงู ุณููุชุงู ูุชุดุบูู ุงูุนุจุงุฑุฉ ููุงุฎุชุจุงุฑ.  ุงูุฃุณูู ูู ุชุดุบููู ุฎุงุฑุฌ ุงููุชูุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">operator-sdk up local --namespace=default</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุทุฑููุฉ ุงูุซุงููุฉ ูู ูุดุฑ ุนุงูู ุงูุชุดุบูู ูู ุงููุชูุฉ.  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ุตูุฑุฉ Docker ูุน ุงููุดุบู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">operator-sdk build config-monitor-operator:latest</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ููู <code>REPLACE_IMAGE</code> <code>deploy/operator.yaml</code> ุ <code>REPLACE_IMAGE</code> ุจู <code>config-monitor-operator:latest</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sed -i "" 's|REPLACE_IMAGE|config-monitor-operator:latest|g' deploy/operator.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑ ูุน ุจูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl create -f deploy/operator.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ูุงุฆูุฉ <code>Pod</code> ุนูู ุงููุฌููุนุฉ ูุฌุจ ุฃู ุชุธูุฑ <code>Pod</code> ูุน ุฎุฏูุฉ ุงุฎุชุจุงุฑ ุ ููู ุงูุญุงูุฉ ุงูุซุงููุฉ - ูุงุญุฏุฉ ุฃุฎุฑู ูุน ูุดุบู. </p><br><h2 id="vmesto-zaklyucheniya-ili-best-practices" style=";text-align:right;direction:rtl">  ุจุฏูุง ูู ุงูุงุณุชูุชุงุฌ ุฃู ุฃูุถู ุงูููุงุฑุณุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุชุชูุซู ุงููุดููุงุช ุงูุฑุฆูุณูุฉ ูุชุทููุฑ ุงููุดุบู ูู ุงูููุช ุงูุญุงูู ูู ุงูุชูุซูู ุงูุถุนูู ููุฃุฏูุงุช ูุงูุงูุชูุงุฑ ุฅูู ุฃูุถู ุงูููุงุฑุณุงุช ุงููุนููู ุจูุง.  ุนูุฏูุง ูุจุฏุฃ ูุทูุฑ ุฌุฏูุฏ ูู ุชุทููุฑ ูุดุบู ุ ูุง ููุฌุฏ ูุฏูู ููุงู ูุจุญุซ ููู ุนูููุงู ุนู ุฃูุซูุฉ ูุชูููุฐ ูุชุทูุจุงุช ูุนููุฉ ุ ูุฐูู ูุง ููุฑ ูู ุงูุฃุฎุทุงุก.  ูููุง ููู ุจุนุถ ุงูุฏุฑูุณ ุงูุชู ุชุนูููุงูุง ูู ุฃุฎุทุงุฆูุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ุชุทุจููุงู ูุฑุชุจุทุงู ุ ููุฌุจ ุนููู ุชุฌูุจ ุงูุฑุบุจุฉ ูู ุฏูุฌููุง ูุน ูุดุบู ูุงุญุฏ.  ุฎูุงู ุฐูู ุ ูุชู ุงูุชูุงู ูุจุฏุฃ ุฎุฏูุงุช ุงูุชุฑุงู ูุถูุงุถุฉ. </li><li style=";text-align:right;direction:rtl">  ุนููู ุฃู ุชุชุฐูุฑ ุงููุตู ุจูู ุงููุฎุงูู: ูุฌุจ ุฃูุง ุชุญุงูู ุชูููุฐ ูู ุงูููุทู ูู ูุญุฏุฉ ุชุญูู ูุงุญุฏุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุฏุฑ ูุดุฑ ูุธุงุฆู ูุฑุงูุจุฉ ุงูุชููููุงุช ูุฅูุดุงุก / ุชุญุฏูุซ ููุฑุฏ. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุชุฌูุจ ุญุธุฑ ุงูููุงููุงุช ูู ุทุฑููุฉ <code>Reconcile</code> .  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุณุญุจ ุงูุชููููุงุช ูู ูุตุฏุฑ ุฎุงุฑุฌู ุ ูููู ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุฃุทูู ุ ููู ุจุฅูุดุงุก ูุฌููุนุฉ goroutine ูุฐูู ุ ูุฃุฑุณู ุงูุทูุจ ูุฑุฉ ุฃุฎุฑู ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุน ุงูุฅุดุงุฑุฉ ุฅูู ุงูุงุณุชุฌุงุจุฉ <code>Requeue: true</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูุชุนูููุงุช ุ ุณูููู ูู ุงููุซูุฑ ููุงูุชูุงู ูุนุฑูุฉ ุฎุจุฑุชู ูู ุชุทููุฑ ุงููุดุบููู.  ููู ุงูุฌุฒุก ุงูุชุงูู ุณูุชุญุฏุซ ุนู ุงุฎุชุจุงุฑ ุงููุดุบู. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar446648/">https://habr.com/ru/post/ar446648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar446632/index.html">ูู ุงููุงููู ุฅูู ุชุทููุฑ ุงูุจูุงูุงุช ุงููุจูุฑุฉ</a></li>
<li><a href="../ar446634/index.html">SDN Digest - ุณุชุฉ ุจุฑุงูุฌ ูุญุงูุงุฉ ููุชูุญุฉ ุงููุตุฏุฑ</a></li>
<li><a href="../ar446638/index.html">Cisco HyperFlex vs. ุงูููุงูุณูู: ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก</a></li>
<li><a href="../ar446640/index.html">20 ูุดุฑูุนูุง ุ 20 ูุบุฉ ุ ุงูููุนุฏ ุงูููุงุฆู ุฃูุณ. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar446642/index.html">ูุงุฆูุฉ ูุฑุฌุนูุฉ ูุฅูุดุงุก ููุดุฑ ุชุทุจููุงุช ุงูููุจ</a></li>
<li><a href="../ar446650/index.html">ูู ุชูููุฉ ุงุฎุชุจุงุฑ ููุง ุฑูุงุชุจูู ุชุนุชูุฏ ุนููุ ุจูุงุก ุตูุฑุฉ ููุชุฎุตุต ุถูุงู ุงูุฌูุฏุฉ ุงููุงุฌุญ</a></li>
<li><a href="../ar446652/index.html">MVCC-4. ููุทุงุช ุงูุจูุงูุงุช</a></li>
<li><a href="../ar446654/index.html">ููู ุญูุธูุง ูุฑุงุฌุนุฉ ุงูููุฏุ</a></li>
<li><a href="../ar446658/index.html">ููุงุจูุฉ ูุน ุฃูุฏุฑูู ุณุชุงููููุชุด ุญูู ุงูุจุฑูุฌุฉ ุงูุฑูุงุถูุฉ</a></li>
<li><a href="../ar446660/index.html">ููุธูุฉ ุงูุนูู ุงูุฏูููุฉ ุ ุทุงูุจ ูุฌุงุฆุฒุฉ ูุจูุฑุฉ: ููููุฉ ุงูููุงู ุจุงูุชุนูู ุงูุขูู ูู ุงูุตู ุงูุซุงูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>