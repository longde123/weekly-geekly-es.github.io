<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏿 🍌 👩🏾‍🎓 Animations Flash à faire soi-même dans Unity3D. Première partie, Lyrique 🌾 🎞️ 👡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette série d'articles, je parlerai de comment et pourquoi nous avons décidé de créer notre propre solution pour importer des animations flash da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Animations Flash à faire soi-même dans Unity3D. Première partie, Lyrique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443524/"><p>  Dans cette série d'articles, je parlerai de comment et pourquoi nous avons décidé de créer notre propre solution pour importer des animations flash dans Unity, des optimisations et de la cuisine interne du plug-in résultant.  Et aussi dans le programme: une histoire sur l'intérieur du format swf, les fonctionnalités de l'extension de l'éditeur Unity et généralement sur les animations en général.  Je demande une coupe! </p><br><img src="https://habrastorage.org/webt/q3/4s/r_/q34sr_45c9c6d5lygnzixa7jhwy.png"><br><a name="habracut"></a><br><h2>  Présentation </h2><br><p> Au début de tout projet se trouvent les affres du choix technologique pour bon nombre de ses pièces.  Une de ces parties est le système d'animation.  Il y a plusieurs variables dont dépend ce choix.  Premièrement, avec quels outils vos animateurs peuvent-ils (ou peuvent-ils) travailler ou quels outils de ces animateurs sont plus faciles à trouver.  Il est clair que choisir un produit extrêmement spécifique n'a aucun sens, car si les employés actuels partent pour une raison ou une autre (un bus soudain?), Il sera extrêmement difficile de les remplacer, une partie du projet s'arrêtera tout simplement indéfiniment, ce qui, dans le cas d'un produit commercial peut être très coûteux.  La deuxième variable est plus technique: l'intégration dans votre moteur.  Existe-t-il des solutions tierces et la qualité de ces solutions, existe-t-il une force et une capacité à créer les miennes, ainsi que la productivité et la commodité de tout ce qui précède.  Eh bien, la troisième variable concerne les capacités de cet outil, car si vous, les saignements de nez, avez besoin d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une cinématique inverse</a> , il est absolument étrange de choisir une animation non squelettique. </p><br><h2>  Types d'animations 2D </h2><br><p>  Considérez les options les plus populaires pour implémenter des animations dans les jeux.  Je ne parlerai que des animations 2D, des animations 3D - c'est le sujet d'une conversation, d'approches et d'outils complètement différents.  Vous pouvez ignorer une section en toute sécurité si vous êtes averti dans ces domaines (il n'y aura pas de révélations et pas de pannes du voile), ou si vous avez l'intention d'aller voir les fonctionnalités des animations flash uniquement, elles sont ci-dessous. </p><br><h3>  Animations d'images </h3><br><p>  Notre mini-revue s'ouvre sur le type d'animation le plus simple et le plus ancien: l'animation image par image.  Chaque image d'une telle animation est représentée par une image distincte, avec un changement rapide dont surgit une illusion de mouvement. </p><br><p>  <strong>Avantages:</strong> </p><br><p>  Une implémentation élémentaire, généralement dans n'importe quel moteur.  Toute complexité et style d'animation, au moins disposer et insérer un film dans des images (en théorie, bien sûr).  Tous les outils: presque tout peut vous donner une séquence de cadres qui peuvent, si nécessaire, être collés dans un seul atlas de texture. </p><br><p>  <strong>Inconvénients:</strong> </p><br><p>  Le principal inconvénient est, bien sûr, la taille de ces éléments en mémoire.  Naturellement, il existe toutes sortes d'astuces telles que la découpe de cadres en blocs et la réutilisation ultérieure de blocs répétitifs, le chargement en arrière-plan des cadres à partir du disque et la libération déjà indiqués, etc.  Mais ces astuces ont leurs inconvénients.  Le découpage en blocs - adapté uniquement au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pixel art</a> , au chargement en arrière-plan - crée une charge supplémentaire sur le disque, occupe beaucoup d'espace sur ce disque lui-même, et la taille de votre jeu augmente, ainsi que la quantité de données téléchargées à démarrer ou à mettre à jour. </p><br><p>  <strong>Total:</strong> </p><br><p>  Convient uniquement aux animations de petite taille et nombre d'images, idéalement pour le pixel art et le style des jeux rétro à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NES</a> . </p><br><h3>  Animations vidéo </h3><br><p>  Comme l'apothéose de la folie des animations image par image, des animations vidéo apparaissent.  Et oui, il est utilisé et même occasionnellement à l'endroit.  Nous l'avons implémenté pour les jeux du genre " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Objets Cachés</a> " pour les animations grandes et complexes, ainsi que pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les scènes coupées</a> avec une touche de réalisme.  Avec l'aide de codecs comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">theora</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vp8,</a> vous pouvez implémenter vous-même des animations vidéo assez tolérables (et même avec un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">canal alpha</a> ). </p><br><p>  Les avantages ici, bien sûr, sont que vous pouvez montrer dans de telles animations tout ce que votre cœur désire, des scènes dirigées avec la participation de vrais acteurs aux batailles en rendu 3D.  Les inconvénients sont la charge sauvage sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CPU</a> lors du décodage et, bien sûr, la qualité d'image.  Vous pouvez trouver un compromis entre qualité et performance dans des cas très limités et spécifiques, comme dans les jeux indiqués ci-dessus pour Hidden Object, par exemple. </p><br><p>  En général, c'est loin de convenir à tout le monde et loin de toujours, ou plutôt presque jamais, si nous ne considérons pas les scènes coupées rendues - où est la place pour de telles «animations».  Une bonne implémentation de telles animations ne peut pas non plus se vanter de simplicité, il y a beaucoup de nuances et d'astuces, à la fois en termes de qualité de l'image de sortie et des charges reçues sur le processeur central.  En raison de la spécificité, il existe peu d'implémentations prêtes à l'emploi, elles ne diffèrent pas non plus en qualité, ou elles coûtent beaucoup d'argent (salut, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bink_Video</a> ), donc beaucoup écrivent la leur. </p><br><h3>  Animations squelettiques </h3><br><p>  Nous sommes donc passés aux types populaires et modernes d'animations 2D.  Les animations squelettiques capturent de plus en plus le cœur et l'esprit des développeurs dans le domaine du 2D, devenant ainsi l'animation standard pour les jeux.  C'est drôle qu'ils soient venus si largement en 2d relativement récemment, contrairement à 3d, où ils sont apparus à l'époque de King Peas, lorsque les pères ont écrit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Half-Life</a> .  L'essence des animations squelettiques, curieusement, se trouve dans le squelette, qui crée un animateur à partir d'os reliés les uns aux autres par une structure arborescente.  Des fragments sont attachés aux os sous forme d'images distinctes.  Toute la structure est mise en mouvement par les déplacements et les rotations des os les uns par rapport aux autres.  Les déplacements et les rotations des os dans le squelette suivent la chronologie d'animation générale. </p><br><p>  Les avantages sont évidents: nous n'avons pas besoin de stocker chaque image de l'animation sous forme d'images distinctes, uniquement des fragments (les bras et les jambes du personnage, par exemple), dont nous déplacerons les os du squelette.  Il existe d'excellentes implémentations de ce type d'animation avec des temps d'exécution pour les plates-formes et moteurs nécessaires, avec un prix d'utilisation raisonnable ou même gratuit: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spine</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spriter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Anima2D</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DragonBones</a> et autres.  Grâce au squelette et à ses fonctionnalités, il est possible d'obtenir une fluidité colossale des animations en interpolant les positions de ses os, ainsi qu'en mélangeant les transitions de l'animation à l'animation et même en mélangeant deux animations différentes: prise de vue en fuite, prise de vue furtive, etc.  Je ne vais pas énumérer toutes les possibilités d'animation squelettique, il y en a vraiment beaucoup et elles sont très cool.  Je ferais mieux de donner un lien où ils sont clairement affichés avec des photos et des descriptions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site Web de Spine</a> . </p><br><p>  Cela ressemble à une balle d'argent, mais non.  Il y avait quelques inconvénients.  Faites immédiatement une réservation pour de nombreux projets et animations - ces inconvénients peuvent ne pas exister.  Si les animations squelettiques vous conviennent - c'est génial, utilisez-les, elles sont belles et modernes. </p><br><p>  Revenons aux inconvénients.  Une étape supplémentaire dans la création d'animation est le rig (ou le rigging, comme beaucoup de termes dans notre industrie, a également été russifié).  La création même du squelette et la liaison des os aux fragments.  Si l'objet a une animation, et non plusieurs, comme, par exemple, le personnage du jeu dans le genre " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Platformer</a> ", alors la scène est complètement superflue.  Toutes les animations ne sont pas commodément animées avec des os.  Il existe de nombreuses animations où les os gênent et sans eux, c'est plus pratique et plus rapide, à la fois en termes de création et en termes de performances de jeu.  Un article séparé, je vais sortir des spécialistes du marché.  Leur nombre augmente avec la popularité de l'animation squelettique, mais ce n'est toujours pas une tâche facile de les trouver dans votre équipe.  La dispersion des outils et des outils affecte également, quelqu'un est habitué et en utilise un, quelqu'un d'autre, il est nécessaire de réapprendre en déplacement, ce qui crée des difficultés supplémentaires pour trouver et former des employés. </p><br><h3>  Animations de la chronologie </h3><br><p>  J'ai poussé ce type d'animation à la toute fin, non pas parce qu'il est meilleur que tout le monde, mais parce que ce sont exactement les mêmes animations flash sur l'intérieur dont nous discuterons dans la partie technique de l'article.  Flash n'est pas le seul représentant de ce type d'animation, mais certainement leur leader, donc tout sera décrit par rapport à lui.  Les animations de la chronologie sont constituées de fragments qui sont animés dans des calques séparés sur une chronologie.  Presque la même chose que nous avons vue dans l'animation squelettique, mais sans squelette.  Selon les images clés de la chronologie, nous pouvons déplacer, faire pivoter, remplacer, dessiner de nouveaux fragments dans ces images et, bien sûr, interpoler la césure, la mise à l'échelle et la rotation entre elles.  Autrement dit, nous ne déplaçons pas les os avec les fragments attachés, mais les fragments eux-mêmes.  Bien sûr, nous perdons de nombreuses opportunités que nous offrent les animations squelettiques, mais tout le monde n'en a pas besoin.  En échange, nous en acquérons d'autres, tels que: </p><br><ul><li>  la possibilité de dessiner et d'insérer de nouveaux fragments au milieu de l'animation; </li><li>  pas de gréement, pas d'os qui n'interfèrent parfois que; </li><li>  Adobe Flash (maintenant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Adobe Animate</a> ) est l'outil d'animation le plus ancien et le plus éprouvé depuis des années, un très grand nombre d'animateurs, d'une manière ou d'une autre, en sont propriétaires; </li><li>  la possibilité d'utiliser d'anciennes animations lors de la traduction de vos projets flash vers Unity, y compris des animations faites dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des graphiques vectoriels</a> , et pas seulement dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">images</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">raster</a> . </li></ul><br><p>  Le flash est-il mort?  En tant que joueur dans les navigateurs - certainement, en tant qu'outil d'animation - bien vivant, il n'y a pas d'alternative et n'est pas attendu.  Contre?  Bien sûr.  Le principal inconvénient est que ce n'est pas une animation squelettique, hein.  Nous sommes privés de la possibilité de mélanger les animations les uns avec les autres, nous n'avons pas de cinématique inverse et de capacités similaires inhérentes uniquement au squelette.  Mais nous avons des chronologies imbriquées les unes dans les autres, ainsi que des masques raster et vectoriels!  Tous les animateurs adorent les masques!  Ici, il convient de mentionner que dans Spine, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> capacités d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">écrêtage</a> sont apparues trop récemment, mais jusqu'à présent uniquement géométriques et très limitées par rapport aux masques flash. </p><br><h3>  Résumé du type d'animation </h3><br><p>  Naturellement, je n'ai pas répertorié tous les types d'animations, seulement les principales.  Par exemple, les soi-disant animations procédurales ont été laissées de côté, lorsque les objets ou leurs fragments ne sont mis en mouvement que par du code, mais il n'est pas possible de les mettre en contraste avec d'autres, et je ne voulais pas vraiment gonfler l'article, il vaut mieux voir quelque chose de plus spécialisé dans les animations pour compléter l'image. </p><br><p>  Pour résumer.  Il n'y a pas de solution miracle, comme toujours et dans presque tout.  Vous devez choisir le projet, les tâches et les personnes.  Après tout, personne n'empêche quiconque d'utiliser un seul type d'animation.  Partout il y a des projets où tous les types d'animations sont utilisés en même temps et tout le monde est content.  Scènes coupées - vidéo, personnages - squelette, décors - chronologie, vols d'émetteurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de systèmes de particules</a> - procéduraux, les particules elles-mêmes dans leurs systèmes - image par image.  Nous tirons le meilleur parti de chaque type. </p><br><h2>  L'agonie du choix et la décision d'écrire la vôtre </h2><br><p>  Eh bien, pour des raisons objectives, nous avons décidé que nous avions besoin d'animations flash pour notre projet.  La question s'est posée de les intégrer dans le moteur.  Après avoir essayé plusieurs options pour les plugins, nous nous sommes installés sur celui qui nous convenait avec ses capacités, était vivant et support, et avait également un prix complètement impudique pour une licence inter-licence, mais vous pouvez tolérer un bon produit.  Je ne donnerai intentionnellement aucun nom, afin de ne faire de publicité ou d'anti-publicité à personne. </p><br><p>  Avec ce plugin, nous avons vécu près d'un an de développement, au cours duquel les détails ont été clarifiés, que nous ne pouvions plus utiliser.  A savoir, la qualité de son intégration dans Unity.  Tout cela a entraîné des bogues franchement graves qui ne pouvaient pas être considérés comme faciles, rapides et sans combat réparé du côté des développeurs, et des performances terribles sur les appareils cibles, et nous avons toujours le niveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iPad 2</a> .  Cela s'est produit en raison de l'intégration analphabète dans un moteur spécifique, de l'ignorance de ses spécificités et de ses pièges, nous étions plus que satisfaits des possibilités, mais les codes sources, même dans un ordre personnel, ont refusé de s'ouvrir, et il a été décidé d'écrire notre décision. </p><br><p>  J'ai eu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une</a> expérience assez réussie dans l'écriture d'extensions pour Unity et j'avais peu d'expérience dans la conversion d'animations flash à mes formats.  Ce dernier était il y a longtemps, mais quelque chose a été rappelé.  Au même endroit, il a été décidé de tout écrire comme un projet à domicile, afin de ne pas dépendre du projet ou de l'entreprise où je travaille, et pour être honnête, je voulais aussi avoir mon propre produit.  Alors, armé d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">spécification de</a> 250 pages au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">format swf</a> , je me suis lancé dans la bataille. </p><br><h2>  Options d'exportation </h2><br><p>  Pour commencer, il vaut la peine de discuter des options d'exportation des animations à partir de l'éditeur flash.  Il y en a plusieurs, naturellement avec ses avantages et ses inconvénients.  Passons en revue les principaux. </p><br><h3>  Format .xfl </h3><br><p>  Dans l'éditeur d'animation flash, il est possible d'enregistrer la source d'animation dans un format .xfl non compressé au lieu du format .fla fermé, qui est proposé par défaut.  Le format est assez simple mais non documenté.  Il se compose de plusieurs répertoires imbriqués et d'un tas de fichiers .xml, où tous les états des clips stockés à l'intérieur sont décrits.  Le format de description est également simple et clair, voici un exemple: </p><br><p>  <strong>static_clip.xml</strong> </p><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f28-00000051"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950184"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9728"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMBitmapInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bitmap.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Lien vers la source</i></a> <br><blockquote><p>  Nous avons ici un clip statique <code>static_clip</code> avec un calque <code>Layer_1</code> et une image, dans lequel il y a un bitmap nommé <code>bitmap.png</code> . </p></blockquote><p>  <strong>movie_clip.xml</strong> </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f30-00000053"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950713"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DX</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"128.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DY</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"127.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Lien vers la source</i></a> <br><blockquote><p>  Nous décrivons ici le clip d'animation <code>movie_clip</code> , qui contient deux images clés avec les indices 0 et 4, respectivement.  Les images contiennent notre clip statique <code>static_clip</code> aux coordonnées <code>(-50;-50)</code> et <code>(100;100)</code> .  Entre les images, il y a une interpolation de mouvement (animation procédurale, dans notre cas, il ne s'agit que d'un transfert, sans mise à l'échelle ni rotation), respectivement, la position d'un clip statique entre les images clés peut être obtenue par interpolation linéaire des coordonnées de ces images. </p></blockquote><p>  Naturellement, tout sera en véritable animation, ahem ... un peu plus compliqué et plus volumineux, mais vous pouvez tout comprendre sans documentation.  Il semblerait qu'ici c'est le bonheur.  Et je connais plusieurs projets et entreprises qui ont réussi avec succès, mais avec quelques limites et difficultés.  Ces difficultés sont la mouche dans la pommade .xfl, à savoir: </p><br><ol><li>  Les interpolations (interpolations, russifiées comme il le pouvait) sont très différentes, à la fois simples: avec interpolation linéaire et plus complexes: avec les fonctions définies par l'utilisateur et les graphiques de cette interpolation, morphing des graphiques vectoriels sur les jumeaux, avec leurs propres règles uniquement pour macromedia et adobe; </li><li>  Les graphiques vectoriels, comme toutes les animations, à l'exception des graphiques raster, sont décrits sous forme de texte, par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple</a> .  En conséquence, il est nécessaire d'écrire votre propre rasterizer, ce qui, en raison de la complexité et des caractéristiques du vecteur en flash, n'est pas possible dans la pratique; </li><li>  Les règles de lecture des animations, y compris celles qui sont imbriquées, vous devez vous imaginer à partir de zéro, il n'y a pas de documentation pour cela et quand quelle image doit être affichée, quoi modifier dans quelles situations et quoi laisser sans interpolation - cela reste à déterminer par de longues expériences, essayant de couvrir tous les cas possibles dans tests, ce qui est un exercice très simple pour une solution générale plutôt que privée. </li></ol><br><p>  Ce ne sont pas toutes les difficultés de cette approche, mais elles suffisent à comprendre que pour une solution générale elle ne convient qu'avec de fortes réserves.  Il était une fois, j'ai emprunté cette voie pour l'un des projets auxquels j'ai participé.  Il y avait des scènes coupées au flash, avec des jumeaux classiques (sans règles d'interpolation personnalisées et fonctions spéciales de cette interpolation), uniquement des graphiques bitmap et sans autres fonctionnalités avancées fournies par l'éditeur flash.  La solution privée a été écrite assez rapidement et efficacement, mais les animateurs ont dû être sévèrement limités pour qu'ils n'utilisent rien de plus ou moins compliqué.  L'approche a le droit à la vie et il existe plusieurs bibliothèques, à des degrés divers de négligence, basées sur elle, mais, comme je l'ai dit, avec beaucoup de réserves et de limitations. </p><br><h3>  scripts .jsfl </h3><br><p>  Une autre option, presque fonctionnelle, consiste à obtenir des informations sur nos animations.  jsfl-scripts vous permet d'agrandir l'éditeur flash, d'interagir avec son environnement, de modifier l'animation et, bien sûr, d'y obtenir toutes les informations nécessaires sur les lignes de temps, les calques, les clips et les images.  Et il est également utilisé par les animateurs pour automatiser diverses actions, mais il s'agit d'une histoire d'un livre voisin.  En général, l'approche est dotée de tous les inconvénients de l'approche précédente, donc je ne m'y attarderai pas, je peux seulement dire qu'avec elle, vous pouvez décharger toute notre animation sous la forme, par exemple, d'une animation image par image, et ce n'est pas la manière d'un vrai Jedi (mais, naturellement, a lieu dans certains projets).  Nous reviendrons sur ces scripts dans l'approche que j'ai choisie: pixelliser les graphiques vectoriels et optimiser l'animation paginée. </p><br><h3>  Application AIR </h3><br><p>  Mais cette approche fonctionne déjà très bien et peut être utilisée comme il se doit.  Je ne l'ai pas choisi, mais pour référence je donnerai cette option.  L'essence de l'approche est que nous créons une application AIR sur flash lui-même ou, pour les esthètes, sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Haxe</a> , par exemple, qui obtiendra toutes les informations d'une animation déjà compilée au format swf.  Nous lisons l'animation image par image dans notre application, obtenons toutes les informations sur l'image et l'enregistrons au format dont nous avons besoin pour notre exécution.  Ici, tous les problèmes ci-dessus sont résolus: </p><br><ul><li>  pas besoin de pixelliser les graphiques vectoriels, le runtime flash le fera pour nous, il ne reste plus qu'à obtenir ces informations et enregistrer le résultat raster des fragments vectoriels; </li><li>  pas besoin de trouver des règles de jeu et de gérer l'interpolation double personnalisée, le lecteur flash dans l'application AIR sait exactement comment faire et fera presque tout pour nous; </li></ul><br><p>  En prime, nous avons la possibilité d'utiliser des scripts de trame dans les animations (toutes sortes de <code>play()</code> , <code>stop()</code> et autres <code>gotoAndPlay()</code> , certains animateurs les aiment beaucoup).  L'inconvénient est l'impossibilité d'exporter les animations en boucle dans le flash lui-même, mais cela n'a pas d'importance, car vous pouvez les boucler déjà dans votre runtime et demander aux animateurs de tout préparer pour cela. </p><br><p>  Il convient de mentionner que je suis sûr que tout sera un peu plus compliqué qu'il n'y paraît dans ma description, car personnellement je ne suis pas allé là-bas, donc je ne peux pas vous dire les détails.  Que ceux qui ont franchi ce chemin partagent leurs expériences, avec plaisir nous lisons leurs joies et leurs tribulations! </p><br><h3>  Propre lecteur flash </h3><br><p>  C'est probablement l'option la plus honnête, la plus évidente et la plus simple de toutes, mais aussi la plus difficile.  En fin de compte, c'est ce que fait un vrai lecteur flash, que la plupart d'entre nous ont dans notre navigateur préféré en complément.  Représentants populaires de ce genre: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gameswf</a> et, développé à partir du précédent, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">scaleform</a> .  Les deux sont maintenant morts.  Il est intéressant de noter qu'ils ont été utilisés principalement pour la mise en œuvre de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interface graphique</a> dans divers projets, y compris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AAA</a> .  Mais nous nous intéressons à la structure interne, pas aux applications spécifiques des bibliothèques mortes. </p><br><p>  Tout lecteur flash qui se respecte a au moins les éléments suivants à bord: </p><br><ul><li>  analyseur de format swf; </li><li>  graphiques vectoriels rasterizer; </li><li>  implémentation d'une machine virtuelle pour exécuter du code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ActionScript</a> ; </li><li>  mise en place d'une bibliothèque standard pour le code utilisateur; </li></ul><br><p>  Chacun de ces points crie s'il est possible de l'implémenter, alors vous devrez changer plus d'une équipe pour cette tâche et échanger plusieurs années de développement vers la version minimale.  Même la mise en œuvre d'une petite partie, suffisante pour jouer quelque chose, prendra beaucoup de temps, et des difficultés supplémentaires, sous la forme de nombreuses parties non documentées de tout ce pipeline, doubleront cette période déjà énorme. </p><br><p>  Oui, le réseau regorge de tentatives de mise en œuvre de chacune de ces parties, à des degrés divers de négligence et d'aggravation.  Mais il n'est même pas possible de prendre ces développements comme base, mais il faudra des années pour en détecter les bogues et écrire des tests unitaires non écrits avant de réaliser qu'il ne sera pas possible de tout réaliser.  Ceux qui ont essayé de compléter gameswf avec les capacités nécessaires comprennent de quoi je parle.  Un lecteur flash honnête doit également pixelliser les graphiques vectoriels non à l'avance, mais en cours d'exécution, ce qui affectera un tel impact sur les performances que tous les projets ne pourront pas survivre.  J'en profite pour transmettre mes salutations aux survivants qui ont utilisé scaleform sur les appareils mobiles.  En général, la façon la plus sombre et désespérée, pas notre choix. </p><br><h3>  Nous combinons des approches </h3><br><p>  Alors finalement, je suis venu à mon option.  Après avoir étudié les voies possibles, une combinaison intéressante a été tirée pour moi.  Relativement simple à mettre en œuvre, réalisable pour une seule personne en volume et en même temps suffisamment fonctionnel pour couvrir les besoins de la plupart des animations de chronologie 2D. </p><br><p>  Premièrement, nous utiliserons l'animation compilée dans swf afin de ne pas proposer diverses options de lecture et de ne presque jamais deviner comment fonctionne le lecteur flash de l'intérieur, car nous ne pouvons pas couvrir tous les cas possibles, mais nous essayons d'écrire une solution générale.  De plus, l'éditeur flash se débarrasse de tous les jumeaux utilisés dans l'animation, représentant intelligemment, dans le swf compilé, les positions nues des fragments. </p><br><p>  Deuxièmement, nous interdisons l'utilisation de scripts dans les animations.  Oui, c'est une exigence très difficile et triste, mais je n'ai pas d'équipe de programmeurs pour implémenter une machine virtuelle honnête et une bibliothèque standard que je devrais écrire presque aveuglément.  Ici, bien sûr, le moins de mon approche est visible par rapport à l'approche où l'application AIR a été utilisée, car dans cette dernière, certains scripts pour la lecture d'animation interne pouvaient être utilisés.  D'un autre côté, cela n'interfère pas avec la création de bonnes animations.  Pour transférer des informations personnalisées de l'animation vers le jeu, vous pouvez utiliser les soi-disant <code>frame labels</code> , qui seront visibles dans le code, ainsi que suspendre des événements personnalisés sur des cadres spécifiques sous la forme de fonctions de rappel utilisant déjà le runtime. </p><br><p>  Troisièmement, nous nous débarrassons de l'écriture de notre propre rasterizer de graphiques vectoriels, pour l'impossibilité d'en écrire un pour le cas général, pour couvrir toutes les options et capacités du vecteur en flash.  Au lieu de cela, nous allons pixelliser les graphiques en (!) Compilation en utilisant un script jsfl.  Dans le même temps, à l'aide de ce script, nous optimiserons nos graphiques vectoriels en fusionnant des clips statiques en une seule image, réduirons ou augmenterons les images bitmap résultantes pour nos besoins: qualité et / ou performances.  Ici, il convient également de rappeler les différentes options de qualité / résolution de l'art pour les appareils avec différentes densités de pixels à l'écran (par exemple, l'art HD et SD). </p><br><h2>  La conclusion de la partie lyrique </h2><br><p>  Ceci conclut la première partie de l'article.  Dans la deuxième partie, il y aura des détails d'implémentation technique, des morceaux de code, des images (!), Des optimisations, des astuces et des astuces.  Bientôt sur vos écrans, ne manquez pas!  En fin de compte, je vais vous donner quelques liens intéressants avec des informations sur l'utilisation des animations flash de collègues, heureusement de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ZeptoLab</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Playrix</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443524/">https://habr.com/ru/post/fr443524/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443514/index.html">Écrire votre couche réseau dans Swift: approche orientée protocole</a></li>
<li><a href="../fr443516/index.html">Hacker Geohot a décidé de libérer les gens de la simulation de l'IA</a></li>
<li><a href="../fr443518/index.html">RBKmoney Payments sous le capot - microservices, protocoles et configuration de la plateforme</a></li>
<li><a href="../fr443520/index.html">Choisir une voiture pour un spécialiste informatique ou des conseils pour des théières à partir d'une théière</a></li>
<li><a href="../fr443522/index.html">Hébergement: options, comparaisons, statistiques utilisateurs</a></li>
<li><a href="../fr443526/index.html">Des algorithmes au cancer: conférences de l'École de bioinformatique</a></li>
<li><a href="../fr443530/index.html">Évolution de l'infrastructure de base de données: de la base de données et des applications sur un serveur à la réplication en streaming</a></li>
<li><a href="../fr443532/index.html">5 caractéristiques des poudres métalliques pour l'impression 3D</a></li>
<li><a href="../fr443534/index.html">Compute Express Link - Interconnexion pour le Big Data</a></li>
<li><a href="../fr443544/index.html">Profilage de la mémoire sur STM32 et autres microcontrôleurs: analyse de la taille de la pile statique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>