<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎼 🤝 👩🏼‍🔬 Le paradoxe du temps d'attente, ou pourquoi mon bus est-il toujours en retard? ⛽️ 👨🏽‍🎓 🕍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Source : Wikipedia License CC-BY-SA 3.0 

 Si vous voyagez souvent en transports en commun, vous êtes probablement tombé sur cette situation: 

 Vous ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le paradoxe du temps d'attente, ou pourquoi mon bus est-il toujours en retard?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428610/"><img src="https://habrastorage.org/getpro/habr/post_images/349/844/4f8/3498444f856e32a0b6fbdb7877ac5610.jpg"><br>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Source</a> : Wikipedia License CC-BY-SA 3.0</font></i> <br><br>  Si vous voyagez souvent en transports en commun, vous êtes probablement tombé sur cette situation: <br><br><blockquote>  Vous arrêtez.  Il est écrit que le bus circule toutes les 10 minutes.  Notez l'heure ... Enfin, après 11 minutes, le bus arrive et la pensée: pourquoi suis-je toujours malchanceux? </blockquote><br>  En théorie, si les bus arrivent toutes les 10 minutes et que vous arrivez à une heure aléatoire, l'attente moyenne devrait être d'environ 5 minutes.  Mais en réalité, les bus n'arrivent pas à l'heure, vous pouvez donc attendre plus longtemps.  Il s'avère que, avec quelques hypothèses raisonnables, on peut arriver à une conclusion surprenante: <br><br>  <b>Lorsque vous attendez un bus qui arrive en moyenne toutes les 10 minutes, votre temps d'attente moyen sera de 10 minutes.</b> <br><br>  C'est ce que l'on appelle parfois <font color="red">le paradoxe du temps d'attente</font> . <br><a name="habracut"></a><br>  J'avais une idée avant, et je me suis toujours demandé si c'était vraiment vrai ... dans quelle mesure ces «hypothèses raisonnables» correspondent-elles à la réalité?  Dans cet article, nous examinons le paradoxe de la latence en termes de modélisation et d'arguments probabilistes, puis examinons certaines des données de bus réelles à Seattle pour (espérons-le) résoudre le paradoxe une fois pour toutes. <br><br><h1>  Inspection Paradox </h1><br>  Si les bus arrivent exactement toutes les dix minutes, le temps d'attente moyen sera de 5 minutes.  On peut facilement comprendre pourquoi l'ajout de variations à l'intervalle entre les bus augmente le temps d'attente moyen. <br><br>  Le paradoxe du temps d’attente est un cas particulier d’un phénomène plus général - <i>le paradoxe de l’inspection</i> , qui est examiné en détail dans l’article sensible d’Allen Downey, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Le paradoxe de l’inspection partout autour de nous»</a> . <br><br>  Bref, le paradoxe de l'inspection se pose chaque fois que la probabilité d'observer une quantité est liée à la quantité observée.  Allen donne un exemple d'enquête auprès des étudiants universitaires sur la taille moyenne de leurs classes.  Bien que l'école parle honnêtement du nombre moyen de 30 élèves par groupe, la taille moyenne du groupe <i>du point de vue des élèves est</i> beaucoup plus grande.  La raison en est que dans les grandes classes (naturellement) il y a plus d'élèves, ce qui est révélé lors de leur enquête. <br><br>  Dans le cas d'un horaire de bus avec un intervalle déclaré de 10 minutes, parfois l'intervalle entre les arrivées est supérieur à 10 minutes, et parfois plus court.  Et si vous vous arrêtez à un moment aléatoire, vous êtes plus susceptible de rencontrer un intervalle plus long qu'un intervalle plus court.  Il est donc logique que l'intervalle de temps moyen entre <i>les</i> intervalles d' <i>attente soit</i> plus long que l'intervalle de temps moyen entre les bus, car les intervalles plus longs sont plus courants dans l'échantillon. <br><br>  Mais le paradoxe de la latence fait une déclaration plus forte: si l'espacement moyen des bus est <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> N </script>  minutes, le temps d'attente moyen <i>des passagers</i> est <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.226ex" height="2.057ex" viewBox="0 -780.1 1389 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-4E" x="500" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 2N </script>  minutes.  Serait-ce vrai? <br><br><h1>  Simulation de latence </h1><br>  Pour nous convaincre du caractère raisonnable de cela, nous simulons d'abord le flux des bus qui arrivent en moyenne 10 minutes.  Pour plus de précision, prenez un grand échantillon: un million de bus (soit environ 19 ans de trafic continu pendant 10 minutes): <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np N = <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-comment"><span class="hljs-comment"># number of buses tau = 10 # average minutes between arrivals rand = np.random.RandomState(42) # universal random seed bus_arrival_times = N * tau * np.sort(rand.rand(N))</span></span></code> </pre> <br>  Vérifier que l'intervalle moyen est proche de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-6"><span class="MJXp-mtext" id="MJXp-Span-7">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">u</span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-12">10</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.403ex" height="1.937ex" viewBox="0 -728.2 4048.6 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-61" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-75" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-3D" x="1991" y="0"></use><g transform="translate(3047,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ tau = 10 </script>  : <br><br><pre> <code class="python hljs">intervals = np.diff(bus_arrival_times) intervals.mean()</code> </pre> <br> <code>9.9999879601518398</code> <br> <br>  Maintenant, nous pouvons simuler l'arrivée d'un grand nombre de passagers à un arrêt de bus pendant cette période et calculer le temps d'attente que chacun d'eux connaît.  Encapsulez le code dans une fonction pour une utilisation ultérieure: <br><br><pre> <code class="hljs vhdl">def simulate_wait_times(arrival_times, rseed=<span class="hljs-number"><span class="hljs-number">8675309</span></span>, # Jenny<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> random seed n_passengers=<span class="hljs-number"><span class="hljs-number">1000000</span></span>): rand = np.random.RandomState(rseed) arrival_times = np.asarray(arrival_times) passenger_times = arrival_times.max() * rand.rand(n_passengers) # find the index <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bus</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> each simulated passenger i = np.searchsorted(arrival_times, passenger_times, <span class="hljs-literal"><span class="hljs-literal">side</span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'right</span></span>') <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arrival_times[i] - passenger_times</code> </pre> <br>  Ensuite, nous simulons le temps d'attente et calculons la moyenne: <br><br><pre> <code class="python hljs">wait_times = simulate_wait_times(bus_arrival_times) wait_times.mean()</code> </pre> <br> <code>10.001584206227317</code> <br> <br>  Le temps d'attente moyen est proche de 10 minutes, comme le prédit le paradoxe. <br><br><h1>  Creuser plus profondément: probabilités et processus de Poisson </h1><br>  Comment simuler une telle situation? <br><br>  En fait, il s'agit d'un exemple de paradoxe d'inspection, où la probabilité d'observer une valeur est liée à la valeur elle-même.  Désigner par <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">p</span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">T</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.704ex" height="2.66ex" viewBox="-38.5 -832 2025.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-29" x="1597" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> p (T) </script>  espacement <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-18"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> T </script>  entre les bus lorsqu'ils arrivent à l'arrêt de bus.  Dans un tel enregistrement, la valeur attendue de l'heure d'arrivée sera: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-20"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">E</span><span class="MJXp-mo" id="MJXp-Span-22" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">T</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-26">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">n</span><span class="MJXp-msubsup" id="MJXp-Span-29"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-32">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-31">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">T</span><span class="MJXp-mtext" id="MJXp-Span-39">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">p</span><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">T</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.211ex" height="2.901ex" viewBox="0 -832 12146.5 1249" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-5D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-3D" x="2303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-69" x="3610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-6E" x="3955" y="0"></use><g transform="translate(4556,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-69" x="5371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-6E" x="5716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-66" x="6317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-74" x="6867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-79" x="7229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="7726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-70" x="8681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-28" x="9184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="9574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-29" x="10278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-64" x="10918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="11441" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> E [T] = \ int_0 ^ \ infty T ~ p (T) ~ dT </script></p><br>  Dans la simulation précédente, nous avons sélectionné <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-47"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">E</span><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">T</span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-53">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">u</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-58">10</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.207ex" height="2.66ex" viewBox="0 -832 7408.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-54" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-5D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-3D" x="2303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-74" x="3610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-61" x="3971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMATHI-75" x="4501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-3D" x="5351" y="0"></use><g transform="translate(6407,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhi5lZGcDgwlgQuNF2oWDvK-WSD_gw#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> E [T] = \ tau = 10 </script>  minutes. <br><br>  Lorsqu'un passager arrive à un arrêt de bus à tout moment, la probabilité de temps d'attente dépend non seulement de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">p</span><span class="MJXp-mo" id="MJXp-Span-61" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">T</span><span class="MJXp-mo" id="MJXp-Span-63" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> p (T) </script>  mais aussi de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> T </script>  : plus l'intervalle est grand, plus il y a de passagers. <br><br>  Ainsi, nous pouvons écrire la distribution de l'heure d'arrivée du point de vue des passagers: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-66"><span class="MJXp-msubsup" id="MJXp-Span-67"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-69" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-73" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">T</span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">T</span><span class="MJXp-mtext" id="MJXp-Span-84">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">p</span><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">T</span><span class="MJXp-mo" id="MJXp-Span-88" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> p_ {exp} (T) \ propto T ~ p (T) </script></p><br>  La constante de proportionnalité est dérivée de la normalisation de la distribution: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-89"><span class="MJXp-msubsup" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-92" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-96" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">T</span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-100">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">c</span><span class="MJXp-mrow" id="MJXp-Span-105"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">T</span><span class="MJXp-mtext" id="MJXp-Span-107">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">p</span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">T</span><span class="MJXp-mo" id="MJXp-Span-111" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-112"><span class="MJXp-mtext" id="MJXp-Span-113">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">n</span><span class="MJXp-msubsup" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-119">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-118">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">T</span><span class="MJXp-mtext" id="MJXp-Span-126">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">p</span><span class="MJXp-mo" id="MJXp-Span-128" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">T</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-131">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">T</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> p_ {exp} (T) = \ frac {T ~ p (T)} {\ int_0 ^ \ infty T ~ p (T) ~ dT} </script></p><br>  Il simplifie <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-134"><span class="MJXp-msubsup" id="MJXp-Span-135"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-137" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-141" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">T</span><span class="MJXp-mo" id="MJXp-Span-143" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-145">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">c</span><span class="MJXp-mrow" id="MJXp-Span-150"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">T</span><span class="MJXp-mtext" id="MJXp-Span-152">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">p</span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">T</span><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">E</span><span class="MJXp-mo" id="MJXp-Span-159" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">T</span><span class="MJXp-mo" id="MJXp-Span-161" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> p_ {exp} (T) = \ frac {T ~ p (T)} {E [T]} </script></p><br>  Puis le temps d'attente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-162"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">E</span><span class="MJXp-mo" id="MJXp-Span-164" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">W</span><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> E [W] </script>  sera la moitié de l'intervalle prévu pour les passagers, afin que nous puissions enregistrer <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-167"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">E</span><span class="MJXp-mo" id="MJXp-Span-169" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">W</span><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-172" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">c</span><span class="MJXp-mrow" id="MJXp-Span-178"><span class="MJXp-mn" id="MJXp-Span-179">1</span></span><span class="MJXp-mrow" id="MJXp-Span-180"><span class="MJXp-mn" id="MJXp-Span-181">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-182"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-184" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-188" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">T</span><span class="MJXp-mo" id="MJXp-Span-190" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-191" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-192">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">c</span><span class="MJXp-mrow" id="MJXp-Span-197"><span class="MJXp-mn" id="MJXp-Span-198">1</span></span><span class="MJXp-mrow" id="MJXp-Span-199"><span class="MJXp-mn" id="MJXp-Span-200">2</span></span><span class="MJXp-mtext" id="MJXp-Span-201">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">n</span><span class="MJXp-msubsup" id="MJXp-Span-204"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-207">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-206">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">T</span><span class="MJXp-mtext" id="MJXp-Span-214">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-215"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-217" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-221" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">T</span><span class="MJXp-mo" id="MJXp-Span-223" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-224">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> E [W] = \ frac {1} {2} E_ {exp} [T] = \ frac {1} {2} \ int_0 ^ \ infty T ~ p_ {exp} (T) ~ dT </script></p><br>  qui peut être réécrit de manière plus compréhensible: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-227"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">E</span><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">W</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-232" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-233">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">c</span><span class="MJXp-mrow" id="MJXp-Span-238"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">E</span><span class="MJXp-mo" id="MJXp-Span-240" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-241"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-243" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-244" style="margin-left: 0em; margin-right: 0em;">]</span></span><span class="MJXp-mrow" id="MJXp-Span-245"><span class="MJXp-mn" id="MJXp-Span-246">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">E</span><span class="MJXp-mo" id="MJXp-Span-248" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">T</span><span class="MJXp-mo" id="MJXp-Span-250" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> E [W] = \ frac {E [T ^ 2]} {2E [T]} </script></p><br>  et maintenant il ne reste plus qu'à choisir une forme pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">p</span><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">T</span><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> p (T) </script>  et calculer les intégrales. <br><br><h3>  Le choix de <i>p (T)</i> </h3><br>  Ayant reçu un modèle formel, quelle est une distribution raisonnable pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-256"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">p</span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">T</span><span class="MJXp-mo" id="MJXp-Span-260" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> p (T) </script>  ?  Nous allons dessiner une image de la distribution <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">p</span><span class="MJXp-mo" id="MJXp-Span-263" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">T</span><span class="MJXp-mo" id="MJXp-Span-265" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> p (T) </script>  au sein de nos arrivées simulées en traçant un histogramme des intervalles entre les arrivées: <br><br><pre> <code class="python hljs">%matplotlib inline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt plt.style.use(<span class="hljs-string"><span class="hljs-string">'seaborn'</span></span>) plt.hist(intervals, bins=np.arange(<span class="hljs-number"><span class="hljs-number">80</span></span>), density=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.axvline(intervals.mean(), color=<span class="hljs-string"><span class="hljs-string">'black'</span></span>, linestyle=<span class="hljs-string"><span class="hljs-string">'dotted'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Interval between arrivals (minutes)'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Probability density'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ht/ed/mh/htedmhiish0h3xwpaggpgbfqr30.png"><br><br>  Ici, la ligne pointillée verticale montre un intervalle moyen d'environ 10 minutes.  Ceci est très similaire à une distribution exponentielle, et non par accident: notre simulation de l'heure d'arrivée du bus sous forme de nombres aléatoires uniformes est très proche du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus de Poisson</a> , et pour un tel processus, la distribution des intervalles est exponentielle. <br><br>  (Remarque: dans notre cas, il ne s'agit que d'un exposant approximatif; en fait, les intervalles <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> T </script>  entre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> N </script>  points uniformément sélectionnés dans un laps de temps <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">N</span><span class="MJXp-mtext" id="MJXp-Span-272">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">u</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> N \ tau </script>  correspondre à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la distribution bêta</a> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">T</span><span class="MJXp-mrow" id="MJXp-Span-278"><span class="MJXp-mo" id="MJXp-Span-279" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-280" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">N</span><span class="MJXp-mtext" id="MJXp-Span-282">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">u</span><span class="MJXp-mo" id="MJXp-Span-286" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-287">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">m</span><span class="MJXp-mtext" id="MJXp-Span-291">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">m</span><span class="MJXp-mrow" id="MJXp-Span-298"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">a</span></span><span class="MJXp-mo" id="MJXp-Span-303" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-304">1</span><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">N</span><span class="MJXp-mo" id="MJXp-Span-307" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> T / (N \ tau) \ sim \ mathrm {Beta} [1, N] </script>  qui est dans la grande limite <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-308"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> N </script>  approchant <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-310"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">T</span><span class="MJXp-mtext" id="MJXp-Span-312">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">m</span><span class="MJXp-mtext" id="MJXp-Span-316">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">m</span><span class="MJXp-mrow" id="MJXp-Span-323"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">p</span></span><span class="MJXp-mo" id="MJXp-Span-327" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-328">1</span><span class="MJXp-mrow" id="MJXp-Span-329"><span class="MJXp-mo" id="MJXp-Span-330" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-331">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">u</span><span class="MJXp-mo" id="MJXp-Span-335" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> T \ sim \ mathrm {Exp} [1 / \ tau] </script>  .  Pour plus d'informations, vous pouvez lire, par exemple, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article sur StackExchange</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fil</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Twitter</a> ). <br><br>  La distribution exponentielle des intervalles implique que l'heure d'arrivée suit le processus de Poisson.  Pour vérifier ce raisonnement, nous vérifions la présence d'une autre propriété du processus de Poisson: que le nombre d'arrivées sur une période de temps fixe est une distribution de Poisson.  Pour ce faire, nous divisons les arrivées simulées en blocs de temps: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.stats <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> poisson <span class="hljs-comment"><span class="hljs-comment"># count the number of arrivals in 1-hour bins binsize = 60 binned_arrivals = np.bincount((bus_arrival_times // binsize).astype(int)) x = np.arange(20) # plot the results plt.hist(binned_arrivals, bins=x - 0.5, density=True, alpha=0.5, label='simulation') plt.plot(x, poisson(binsize / tau).pmf(x), 'ok', label='Poisson prediction') plt.xlabel('Number of arrivals per hour') plt.ylabel('frequency') plt.legend();</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/pv/y8/re/pvy8re5_x-m7h7rhivve1gbesaw.png"><br><br>  La correspondance étroite des valeurs empiriques et théoriques nous convainc de la justesse de notre interprétation: pour les grands <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-336"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> N </script>  L'heure d'arrivée simulée est bien décrite par le processus de Poisson, qui implique des intervalles distribués exponentiellement. <br><br>  Cela signifie que la distribution de probabilité peut s'écrire: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-338"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">p</span><span class="MJXp-mo" id="MJXp-Span-340" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">T</span><span class="MJXp-mo" id="MJXp-Span-342" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-343" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-344">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">c</span><span class="MJXp-mrow" id="MJXp-Span-349"><span class="MJXp-mn" id="MJXp-Span-350">1</span></span><span class="MJXp-mrow" id="MJXp-Span-351"><span class="MJXp-mtext" id="MJXp-Span-352">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">u</span></span><span class="MJXp-msubsup" id="MJXp-Span-356"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-358" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-359">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">T</span><span class="MJXp-mrow" id="MJXp-Span-361"><span class="MJXp-mo" id="MJXp-Span-362">/</span></span><span class="MJXp-mtext" id="MJXp-Span-363">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">u</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> p (T) = \ frac {1} {\ tau} e ^ {- T / \ tau} </script></p><br>  Si nous substituons le résultat dans la formule précédente, nous trouverons le temps d'attente moyen pour les passagers à l'arrêt: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-367"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">E</span><span class="MJXp-mo" id="MJXp-Span-369" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">W</span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-372" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-373">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">c</span><span class="MJXp-mrow" id="MJXp-Span-378"><span class="MJXp-mtext" id="MJXp-Span-379">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">n</span><span class="MJXp-msubsup" id="MJXp-Span-382"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-385">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-384">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">y</span><span class="MJXp-msubsup" id="MJXp-Span-391"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-393" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-394">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-395"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-397" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-398">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">T</span><span class="MJXp-mrow" id="MJXp-Span-400"><span class="MJXp-mo" id="MJXp-Span-401">/</span></span><span class="MJXp-mtext" id="MJXp-Span-402">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">u</span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-406"><span class="MJXp-mn" id="MJXp-Span-407">2</span><span class="MJXp-mtext" id="MJXp-Span-408">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">n</span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-414">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-413">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">T</span><span class="MJXp-mtext" id="MJXp-Span-421">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-422"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-424" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-425">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">T</span><span class="MJXp-mrow" id="MJXp-Span-427"><span class="MJXp-mo" id="MJXp-Span-428">/</span></span><span class="MJXp-mtext" id="MJXp-Span-429">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">u</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-433" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-434">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">c</span><span class="MJXp-mrow" id="MJXp-Span-439"><span class="MJXp-mn" id="MJXp-Span-440">2</span><span class="MJXp-mtext" id="MJXp-Span-441">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">a</span><span class="MJXp-msubsup" id="MJXp-Span-444"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-446" style="vertical-align: 0.5em;">3</span></span></span><span class="MJXp-mrow" id="MJXp-Span-447"><span class="MJXp-mn" id="MJXp-Span-448">2</span><span class="MJXp-mo" id="MJXp-Span-449" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-450">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">a</span><span class="MJXp-msubsup" id="MJXp-Span-453"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-455" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-457" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-458">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">u</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-27"> E [W] = \ frac {\ int_0 ^ \ infty T ^ 2 ~ e ^ {- T / \ tau}} {2 \ int_0 ^ \ infty T ~ e ^ {- T / \ tau}} = \ frac {2 \ tau ^ 3} {2 (\ tau ^ 2)} = \ tau </script></p><br>  Pour les vols avec arrivées via le processus de Poisson, le temps d'attente attendu est identique à l'intervalle moyen entre les arrivées. <br><br>  Ce problème peut être argumenté comme suit: le processus de Poisson est un processus <i>sans mémoire</i> , c'est-à-dire que l'histoire des événements n'a rien à voir avec l'heure attendue de l'événement suivant.  Par conséquent, à l'arrivée à un arrêt de bus, le temps d'attente moyen pour un bus est toujours le même: dans notre cas, il est de 10 minutes, quel que soit le temps écoulé depuis le bus précédent!  Peu importe combien de temps vous avez attendu: le temps prévu pour le prochain bus est toujours exactement 10 minutes: dans le processus de Poisson, vous n'obtenez pas de «crédit» pour le temps passé à attendre. <br><br><h1>  Expiration de la réalité </h1><br>  Ce qui précède est bon si les arrivées réelles de bus sont réellement décrites par le processus de Poisson, mais est-ce le cas? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/779/e4c/2c7/779e4c2c71ede6d1e7708035d37b3fd4.png"><br>  <i><font color="gray">Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Régime de transports publics de Seattle</a></font></i> <br><br>  Essayons de déterminer comment le paradoxe du temps d'attente est cohérent avec la réalité.  Pour ce faire, nous <a href="">allons</a> examiner certaines des données disponibles en téléchargement ici: <a href="">Arrival_times.csv</a> (fichier CSV de 3 Mo).  L'ensemble de données contient les heures d'arrivée prévues et réelles pour les bus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RapidRide</a> C, D et E à la 3e et Pike Bus Stop au centre-ville de Seattle.  Les données ont été enregistrées au deuxième trimestre de 2016 (un grand merci à Mark Hallenback du Washington State Transportation Center pour ce fichier!). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd df = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'arrival_times.csv'</span></span>) df = df.dropna(axis=<span class="hljs-number"><span class="hljs-number">0</span></span>, how=<span class="hljs-string"><span class="hljs-string">'any'</span></span>) df.head()</code> </pre> <br><table border="1"><thead><tr><th></th><th>  OPD_DATE </th><th>  VEHICLE_ID </th><th>  RTE </th><th>  DIR </th><th>  TRIP_ID </th><th>  STOP_ID </th><th>  STOP_NAME </th><th>  SCH_STOP_TM </th><th>  ACT_STOP_TM </th></tr></thead><tbody><tr><th>  0 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908177 </td><td>  431 </td><td>  3E AVE ET PIKE ST (431) </td><td>  01:11:57 </td><td>  01:13:19 </td></tr><tr><th>  1 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908033 </td><td>  431 </td><td>  3E AVE ET PIKE ST (431) </td><td>  23:19:57 </td><td>  23:16:13 </td></tr><tr><th>  2 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908028 </td><td>  431 </td><td>  3E AVE ET PIKE ST (431) </td><td>  21:19:57 </td><td>  21:18:46 </td></tr><tr><th>  3 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908019 </td><td>  431 </td><td>  3E AVE ET PIKE ST (431) </td><td>  19:04:57 </td><td>  19:01:49 </td></tr><tr><th>  4 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908252 </td><td>  431 </td><td>  3E AVE ET PIKE ST (431) </td><td>  16:42:57 </td><td>  16:42:39 </td></tr></tbody></table><br>  J'ai choisi les données RapidRide, notamment parce que pour la plupart de la journée, les bus circulent à intervalles réguliers de 10 à 15 minutes, sans parler du fait que je suis un passager fréquent de l'itinéraire C. <br><br><h3>  Nettoyage des données </h3><br>  Tout d'abord, nous ferons un petit nettoyage des données pour les convertir en une vue pratique: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># combine date and time into a single timestamp df['scheduled'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['SCH_STOP_TM']) df['actual'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['ACT_STOP_TM']) # if scheduled &amp; actual span midnight, then the actual day needs to be adjusted minute = np.timedelta64(1, 'm') hour = 60 * minute diff_hrs = (df['actual'] - df['scheduled']) / hour df.loc[diff_hrs &gt; 20, 'actual'] -= 24 * hour df.loc[diff_hrs &lt; -20, 'actual'] += 24 * hour df['minutes_late'] = (df['actual'] - df['scheduled']) / minute # map internal route codes to external route letters df['route'] = df['RTE'].replace({673: 'C', 674: 'D', 675: 'E'}).astype('category') df['direction'] = df['DIR'].replace({'N': 'northbound', 'S': 'southbound'}).astype('category') # extract useful columns df = df[['route', 'direction', 'scheduled', 'actual', 'minutes_late']].copy() df.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th>  Parcours </th><th>  Direction </th><th>  Graphique </th><th>  Fait  arrivée </th><th>  Retard (min) </th></tr></thead><tbody><tr><th>  0 </th><td>  C </td><td>  sud </td><td>  2016-03-26 01:11:57 </td><td>  2016-03-26 01:13:19 </td><td>  1,366667 </td></tr><tr><th>  1 </th><td>  C </td><td>  sud </td><td>  2016-03-26 23:19:57 </td><td>  2016-03-26 23:16:13 </td><td>  -3,733333 </td></tr><tr><th>  2 </th><td>  C </td><td>  sud </td><td>  2016-03-26 21:19:57 </td><td>  2016-03-26 21:18:46 </td><td>  -1.183333 </td></tr><tr><th>  3 </th><td>  C </td><td>  sud </td><td>  2016-03-26 19:04:57 </td><td>  2016-03-26 19:01:49 </td><td>  -3.133333 </td></tr><tr><th>  4 </th><td>  C </td><td>  sud </td><td>  2016-03-26 16:42:57 </td><td>  2016-03-26 16:42:39 </td><td>  -0,300000 </td></tr></tbody></table><br><h1>  À quelle heure sont les bus? </h1><br>  Ce tableau contient six ensembles de données: les directions nord et sud pour chaque itinéraire C, D et E. Pour avoir une idée de leurs caractéristiques, construisons un histogramme de l'heure d'arrivée réelle réelle moins pour chacun de ces six: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> seaborn <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sns g = sns.FacetGrid(df, row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"minutes_late"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">-10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'minutes late'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/0o/2e/rn/0o2ernq4wvnrkfbmz3si2ryup7q.png"><br><br>  Il est logique de supposer que les bus sont plus proches de l'horaire au début de l'itinéraire et s'en écartent davantage vers la fin.  Les données le confirment: notre arrêt sur la route sud C, ainsi que sur le nord D et E est proche du début de la route, et en sens inverse, non loin de la destination finale. <br><br><h3>  Intervalles planifiés et observés </h3><br>  Jetez un œil aux intervalles de bus observés et prévus pour ces six itinéraires.  Commençons par la fonction <code>groupby</code> dans Pandas pour calculer ces intervalles: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute_headway</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scheduled)</span></span></span><span class="hljs-function">:</span></span> minute = np.timedelta64(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'m'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scheduled.sort_values().diff() / minute grouped = df.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>]) df[<span class="hljs-string"><span class="hljs-string">'actual_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].transform(compute_headway) df[<span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'scheduled'</span></span>].transform(compute_headway)</code> </pre> <br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">50</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ke/ny/ao/kenyaoyjnxeppoyligelobkrud8.png"><br><br>  Il est déjà évident que les résultats ne sont pas très similaires à la distribution exponentielle de notre modèle, mais cela ne dit toujours rien: les distributions peuvent être affectées par des intervalles incohérents dans le graphique. <br><br>  Répétons la construction des diagrammes en prenant les intervalles d'arrivée prévus plutôt que les observés: <br><br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">20</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'scheduled interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'frequency'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/sy/fl/78/syfl78sw0-kq5yvdddbhiquueyi.png"><br><br>  Cela montre que pendant la semaine, les bus circulent à différents intervalles, nous ne pouvons donc pas estimer la précision du paradoxe du temps d'attente à partir des informations réelles de l'arrêt. <br><br><h3>  Construire des horaires uniformes </h3><br>  Bien que l'horaire officiel ne donne pas d'intervalles uniformes, il existe plusieurs intervalles de temps spécifiques avec un grand nombre de bus: par exemple, près de 2 000 bus de l'itinéraire E en direction du nord avec un intervalle prévu de 10 minutes.  Pour savoir si le paradoxe de latence est applicable, regroupons les données en itinéraires, directions et intervalle prévu, puis ré-empilons-les comme si elles s'étaient produites séquentiellement.  Cela devrait préserver toutes les caractéristiques pertinentes des données sources, tout en facilitant la comparaison directe avec les prédictions du paradoxe de latence. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stack_sequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># first, sort by scheduled time data = data.sort_values('scheduled') # re-stack data &amp; recompute relevant quantities data['scheduled'] = data['scheduled_interval'].cumsum() data['actual'] = data['scheduled'] + data['minutes_late'] data['actual_interval'] = data['actual'].sort_values().diff() return data subset = df[df.scheduled_interval.isin([10, 12, 15])] grouped = subset.groupby(['route', 'direction', 'scheduled_interval']) sequenced = grouped.apply(stack_sequence).reset_index(drop=True) sequenced.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th>  Parcours </th><th>  Direction </th><th>  Horaire </th><th>  Fait  arrivée </th><th>  Retard (min) </th><th>  Fait  intervalle </th><th>  Intervalle planifié </th></tr></thead><tbody><tr><th>  0 </th><td>  C </td><td>  au nord </td><td>  10,0 </td><td>  12.400000 </td><td>  2 400 000 </td><td>  NaN </td><td>  10,0 </td></tr><tr><th>  1 </th><td>  C </td><td>  au nord </td><td>  20,0 </td><td>  27.150000 </td><td>  7.150000 </td><td>  0,183333 </td><td>  10,0 </td></tr><tr><th>  2 </th><td>  C </td><td>  au nord </td><td>  30,0 </td><td>  26.966667 </td><td>  -3.033333 </td><td>  14.566667 </td><td>  10,0 </td></tr><tr><th>  3 </th><td>  C </td><td>  au nord </td><td>  40,0 </td><td>  35.516667 </td><td>  -4.483333 </td><td>  8.366667 </td><td>  10,0 </td></tr><tr><th>  4 </th><td>  C </td><td>  au nord </td><td>  50,0 </td><td>  53,583333 </td><td>  3,583333 </td><td>  18.066667 </td><td>  10,0 </td></tr></tbody></table><br>  Sur les données effacées, vous pouvez faire un graphique de la distribution de l'apparence réelle des bus le long de chaque itinéraire et direction avec une fréquence d'arrivée: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> route <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">'C'</span></span>, <span class="hljs-string"><span class="hljs-string">'D'</span></span>, <span class="hljs-string"><span class="hljs-string">'E'</span></span>]: g = sns.FacetGrid(sequenced.query(<span class="hljs-string"><span class="hljs-string">f"route == '</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string">'"</span></span>), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">40</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{row_name} ({col_name:.0f} min)'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (min)'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>) g.fig.set_size_inches(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) g.fig.suptitle(<span class="hljs-string"><span class="hljs-string">f'</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string"> line'</span></span>, y=<span class="hljs-number"><span class="hljs-number">1.05</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>)</code> </pre> <br><img src="https://habrastorage.org/webt/mb/ag/op/mbagopldum2pixrhjwxcphdhpyg.png"><br><br><img src="https://habrastorage.org/webt/6k/xv/fv/6kxvfv4xzngoy2rhphq71rcpgei.png"><br><br><img src="https://habrastorage.org/webt/vq/nh/wp/vqnhwpza9or7dnazjcd07zjcm40.png"><br><br>  On voit que pour chaque route la distribution des intervalles observés est presque gaussienne.  Il culmine près de l'intervalle prévu et présente un écart-type moins important au début de l'itinéraire (sud pour C, nord pour D / E) et plus à la fin.  Même à vue, les intervalles d'arrivée réels ne correspondent certainement pas à la distribution exponentielle, qui est l'hypothèse principale sur laquelle se fonde le paradoxe du temps d'attente. <br><br>  Nous pouvons utiliser la fonction de simulation du temps d'attente que nous avons utilisée ci-dessus pour trouver le temps d'attente moyen pour chaque ligne de bus, direction et horaire: <br><br><pre> <code class="python hljs">grouped = sequenced.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>, <span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>]) sims = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].apply(simulate_wait_times) sims.apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> times: <span class="hljs-string"><span class="hljs-string">"{0:.1f} +/- {1:.1f}"</span></span>.format(times.mean(), times.std()))</code> </pre> <br><pre>  Intervalle programmé de direction d'itinéraire
 C nord 10,0 7,8 +/- 12,5
                       12,0 7,4 +/- 5,7
                       15,0 8,8 +/- 6,4
          sud 10,0 6,2 +/- 6,3
                       12,0 6,8 +/- 5,2
                       15,0 8,4 +/- 7,3
 D nord 10,0 6,1 +/- 7,1
                       12,0 6,5 +/- 4,6
                       15,0 7,9 +/- 5,3
          sud 10,0 6,7 +/- 5,3
                       12,0 7,5 +/- 5,9
                       15,0 8,8 +/- 6,5
 E nord 10,0 5,5 +/- 3,7
                       12,0 6,5 +/- 4,3
                       15,0 7,9 +/- 4,9
          sud 10,0 6,8 +/- 5,6
                       12,0 7,3 +/- 5,2
                       15,0 8,7 +/- 6,0
 Nom: réel, dtype: objet </pre><br>  Le temps d'attente moyen, peut-être une minute ou deux, représente plus de la moitié de l'intervalle prévu, mais n'est pas égal à l'intervalle prévu, comme l'indique le paradoxe du temps d'attente.  En d'autres termes, le paradoxe d'inspection est confirmé, mais le paradoxe du temps d'attente n'est pas vrai. <br><br><h1>  Conclusion </h1><br>  Le paradoxe de la latence était un point de départ intéressant pour une discussion qui comprenait la modélisation, la théorie des probabilités et la comparaison des hypothèses statistiques avec la réalité.  Bien que nous ayons confirmé que dans le monde réel, les lignes de bus obéissent à une sorte de paradoxe d'inspection, l'analyse ci-dessus montre de manière assez convaincante: l'hypothèse principale sous-jacente au paradoxe du temps d'attente - que l'arrivée des bus suit les statistiques du processus de Poisson - n'est pas justifiée. <br><br>  Rétrospectivement, cela n'est pas surprenant: le processus de Poisson est un processus sans mémoire, qui suppose que la probabilité d'arrivée est complètement indépendante du temps par rapport au moment de l'arrivée précédente.  En effet, un système de transports publics bien géré a des horaires spécialement structurés pour éviter ce comportement: les bus ne démarrent pas leurs itinéraires à des moments aléatoires de la journée, mais démarrent selon l'horaire choisi pour le transport le plus efficace des passagers. <br><br>  La leçon la plus importante est de faire attention aux hypothèses que vous faites sur toute tâche d'analyse de données.  Parfois, le processus de Poisson est une bonne description des données d'heure d'arrivée.  Mais ce n'est pas parce qu'un type de données ressemble à un autre type de données que les hypothèses admises pour l'un sont nécessairement valables pour l'autre.  Souvent, des hypothèses qui semblent correctes peuvent conduire à des conclusions qui ne sont pas vraies. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428610/">https://habr.com/ru/post/fr428610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428600/index.html">SSD d'effets spéciaux ou ce qui manquait pour le modding - Examen du lecteur HyperX FURY RGB</a></li>
<li><a href="../fr428602/index.html">Apprenez les tactiques, techniques et connaissances communes contradictoires (ATT @ CK). Tactiques d'entreprise. Partie 4</a></li>
<li><a href="../fr428604/index.html">Championnat de science des données en ligne</a></li>
<li><a href="../fr428606/index.html">«Comprendre le fonctionnement du système a permis beaucoup de piratage»: Roy Beniosef sur le développement Android</a></li>
<li><a href="../fr428608/index.html">Les médias détiennent un accord avec Yandex pour retirer les documents piratés</a></li>
<li><a href="../fr428612/index.html">Fonctions d'ordre supérieur en JavaScript: qu'est-ce que c'est?</a></li>
<li><a href="../fr428614/index.html">Vendredi. Les délires du programmeur 4.2</a></li>
<li><a href="../fr428616/index.html">Convertissez des fichiers XLS en feuille de calcul Google à l'aide de Google Apps Script</a></li>
<li><a href="../fr428620/index.html">Comment créer Roguelike</a></li>
<li><a href="../fr428624/index.html">Jeffrey Richter, Pavel Yosifovich, Greg Young et tout-tout. Hardcore et architecture à DotNext 2018 Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>