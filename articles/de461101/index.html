<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔🏼 🛀 🏵️ Android Jetpack Compose First Impression 🖕🏻 🧗🏽 👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nachdem ich auf Google IO 2019 einen Vortrag über Android Jetpack Compose gesehen hatte , wollte ich ihn sofort ausprobieren. Darüber hinaus erinnerte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android Jetpack Compose First Impression</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461101/"><p>  Nachdem ich auf Google IO 2019 einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vortrag über Android Jetpack Compose gesehen hatte</a> , wollte ich ihn sofort ausprobieren.  Darüber hinaus erinnerte der darin implementierte Ansatz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flutter</a> sehr, an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem ich früher interessiert war</a> . </p><br><p><img src="https://habrastorage.org/webt/i1/-6/fz/i1-6fzjfxbzx-ajpwg-5y7ey7cq.png"></p><a name="habracut"></a><br><p> Die Compose-Bibliothek selbst befindet sich in der Pre-Alpha-Phase, sodass nicht viele Dokumentationen und Artikel darüber verfügbar sind.  Als nächstes werde ich mich auf mehrere Ressourcen stützen, die ich gefunden habe, sowie auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Open-Source-Bibliothek</a> . </p><br><p>  Diese Ressourcen sind: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Android-Entwickler Backstage: Episode 115: Jetpack Compose</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Komponieren Sie nach ersten Prinzipien</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tauchen in Jetpack komponieren</a> </li></ul><br><h1 id="chto-takoe-android-jetpack-compose">  Was ist Android Jetpack Compose? </h1><br><p>  Bisher basierte die gesamte Android-Benutzeroberfläche auf der View-Klasse.  Dies ist seit den Anfängen von Android der Fall.  In dieser Hinsicht haben sich viele Vermächtnisse und architektonische Mängel angesammelt, die verbessert werden könnten.  Dies zu tun ist jedoch ziemlich schwierig, ohne den gesamten Code zu brechen, der auf ihrer Basis geschrieben wurde. </p><br><p>  In den letzten Jahren sind in der Welt der Clientanwendungen (einschließlich Frontend-Trends) viele neue Konzepte aufgetaucht. Daher hat das Google-Team einen radikalen Weg eingeschlagen und die gesamte UI-Ebene in Android von Grund auf neu geschrieben.  So erschien die Android Jetpack Compose-Bibliothek, die konzeptionelle Tricks von React, Litho, Vue, Flutter und vielen anderen enthält. </p><br><p>  Lassen Sie uns einige der Funktionen der vorhandenen Benutzeroberfläche durchgehen und sie mit Compose vergleichen. </p><br><h3 id="1--nezavisimost-ot-relizov-android">  1. Unabhängigkeit von Android-Versionen </h3><br><p>  Die vorhandene Benutzeroberfläche ist eng mit der Plattform verbunden.  Als die ersten Komponenten von Material Design erschienen, funktionierten sie nur mit Android 5 (API21) und höher.  Um an älteren Versionen des Systems arbeiten zu können, müssen Sie die Support-Bibliothek verwenden. </p><br><p>  Compose ist Teil von Jetpack, wodurch es unabhängig von den Systemversionen ist und auch in älteren Android-Versionen (zumindest mit API21) verwendet werden kann. </p><br><h3 id="2-ves-api-na-kotlin">  2. Die gesamte Kotlin-API </h3><br><p>  Zuvor mussten Sie sich mit verschiedenen Dateien befassen, um eine Benutzeroberfläche zu erstellen.  Wir haben das Markup in XML beschrieben und dann den Java / Kotlin-Code verwendet, damit es funktioniert.  Dann kehrten wir zu anderen XML-Dateien zurück, um Themen, Animationen, Navigation usw. festzulegen. Und versuchten sogar, Code in XML (Datenbindung) zu schreiben. </p><br><p>  Mit Kotlin können Sie Benutzeroberflächen im deklarativen Stil direkt in Code anstelle von XML schreiben. </p><br><h3 id="3-composable--kompozitnyy-ispolzovanie-kompozicii-vmesto-nasledovaniya">  3. Composable = Composite: Verwenden von Komposition anstelle von Vererbung </h3><br><p>  Das Erstellen von benutzerdefinierten UI-Elementen kann ziemlich umständlich sein.  Wir müssen von View oder seinem Nachkommen erben und uns um viele wichtige Eigenschaften kümmern, bevor es richtig gestartet wird.  Beispielsweise enthält die TextView-Klasse ungefähr 30.000 Zeilen Java-Code.  Dies liegt an der Tatsache, dass es eine Menge unnötiger Logik in sich enthält, die von untergeordneten Elementen geerbt wird. </p><br><p>  Compose tauchte dagegen auf und ersetzte die Vererbung durch Komposition. </p><br><p> <code>Padding</code> eignet sich am besten, um zu veranschaulichen, worum es geht: </p><br><p>  Um in der vorhandenen Benutzeroberfläche die mit <code>TextView</code> eingerückte <code>30dp</code> zu <code>30dp</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="Bild" width="500"></div><br><p>  Wir müssen den folgenden Code schreiben: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Dies bedeutet, dass irgendwo in TextView.java oder seinen Oberklassen eine Logik vorhanden ist, die weiß, wie Einrückungen gezählt und gezeichnet werden. </p><br><p>  Mal sehen, wie Sie dasselbe in Compose tun können: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// note: the cyan background color is omitted for now to keep it simple Padding(30.dp) { Text("Drag or tap on the seek bar") }</span></span></code> </pre> <br><p>  <strong>Änderungen</strong> <br>  <code>TextView</code> nur noch <code>Text()</code> .  Die <code>android:padding</code> Eigenschaft wurde in ein <code>Padding</code> , das <code>Text</code> umschließt. </p><br><p>  <strong>Die Vorteile</strong> <br>  Daher ist <code>Text</code> nur für das Rendern des Textes selbst verantwortlich.  Er weiß nicht, wie man Einrückungen zählt.  <code>Padding</code> hingegen ist nur für das Auffüllen verantwortlich und nicht mehr.  Es kann um jedes andere Element verwendet werden. </p><br><h3 id="4-odnonapravlennyy-potok-dannyh">  4. Unidirektionaler Datenstrom </h3><br><p>  Der unidirektionale Datenfluss ist ein wichtiges Konzept, wenn wir beispielsweise über die Steuerung des Status einer <code>CheckBox</code> in einem vorhandenen UI-System <code>CheckBox</code> .  Wenn der Benutzer auf das <code>CheckBox</code> , wird sein Status <code>checked = true</code> : Die Klasse aktualisiert den <code>CheckBox</code> und ruft einen Rückruf von dem Code auf, der die <code>CheckBox</code> überwacht. </p><br><p>  Dann müssen Sie im Code selbst, beispielsweise in <code>ViewModel</code> , die entsprechende Statusvariable aktualisieren.  Sie haben jetzt zwei Kopien des gedrückten Status, was zu Problemen führen kann.  Wenn Sie beispielsweise den Wert der Statusvariablen im <code>ViewModel</code> <code>CheckBox</code> wird die <code>CheckBox</code> aktualisiert, was in einer Endlosschleife enden kann.  Um dies zu vermeiden, müssen wir uns eine Art Krücke einfallen lassen. </p><br><p>  Die Verwendung von Compose hilft bei der Lösung dieser Probleme, da es auf dem Prinzip der Einseitigkeit basiert.  Die Zustandsänderung wird innerhalb des Frameworks verarbeitet: Wir geben das Datenmodell einfach nach innen.  Außerdem ändert die Komponente in Compose jetzt ihren Status nicht mehr von selbst.  Stattdessen wird nur ein Rückruf aufgerufen, und jetzt ist es die Aufgabe der Anwendung, die Benutzeroberfläche zu ändern. </p><br><h3 id="5-uluchshenie-otladki">  5. Verbessern des Debuggens </h3><br><p>  Da die gesamte Benutzeroberfläche jetzt in Kotlin geschrieben ist, können Sie die Benutzeroberfläche jetzt debuggen.  Ich habe das nicht selbst versucht, aber im Podcast wurde gesagt, dass Debugger und Haltepunkte in Compose funktionieren. </p><br><h1 id="hvatit-slov-pokazhite-kod">  Genug Wörter, zeigen Sie den Code </h1><br><p>  Ich weiß, ich möchte schnell sehen, wie die Benutzeroberfläche im Code aussieht (Spoiler: sehr ähnlich zu Flutter, wenn Sie versucht haben, darauf zu schreiben). </p><br><p>  Zunächst erstellen wir einige einfache <code>View</code> und vergleichen dann, wie sie in der vorhandenen Benutzeroberfläche und in Compose aussehen. </p><br><h3 id="1-framelayout-vs-wrap--padding--background">  1. <code>FrameLayout</code> vs <code>Wrap + Padding + Background</code> </h3><br><p>  Wir verwenden unser Beispiel oben erneut und versuchen, diese <code>TextView</code> mit <code>30dp</code> und türkisfarbenem Hintergrund <code>30dp</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="`TextView` wird bearbeitet in` 30dp` und türkisfarbenem Hintergrund" width="500"></div><br><p>  Bestehende Benutzeroberfläche: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AND</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Schauen Sie sich nun den Code an, der in Compose dasselbe tut: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Wrap { Padding(<span class="hljs-number"><span class="hljs-number">30</span></span>.dp) { DrawRectangle(color = Color.Cyan) Text(<span class="hljs-string"><span class="hljs-string">"Drag or tap on the seek bar"</span></span>) } } }</code> </pre> <br><p>  Hier sind ein paar neue Dinge.  Da <code>Text</code> nur das Rendern von Text kennt, sind Auffüllen und Hintergrund nicht wichtig.  Um sie hinzuzufügen, müssen wir daher drei separate Funktionen verwenden: </p><br><ul><li>  <code>DrawRectangle</code> Hintergrund </li><li>  <code>Padding</code> auffüllen </li><li>  <code>Wrap</code> ist eine Funktion, die Parameter wie <code>FrameLayout</code> überlagert. </li></ul><br><p>  Einfach.  Es unterscheidet sich jedoch geringfügig von dem bestehenden UI-System, an das wir alle gewöhnt sind. </p><br><h3 id="2-vertikalnyy-linearlayout-vs-column">  2. Vertikales <code>LinearLayout</code> gegen <code>Column</code> </h3><br><p>  Versuchen wir nun, etwas zu tun, das unserem guten alten <code>LinearLayout</code> . <br>  Um zwei Elemente wie im Bild unten untereinander zu platzieren, können Sie <code>Column</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32c/9e9/29e/32c9e929e70b2f811aad977075a79e87.png" alt="Zwei elemente untereinander" width="500"></div><br><p>  Der Code sieht folgendermaßen aus: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) Button(text = <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) } }</code> </pre> <br><p>  Das im <code>Column</code> Element <code>Column</code> Element befindet sich vertikal untereinander. </p><br><h3 id="2a-otstupy">  2a.  Einrückung </h3><br><p>  Sie haben wahrscheinlich bemerkt, dass sich Text und Schaltfläche zu nahe am Rand befinden.  <code>Padding</code> daher <code>Padding</code> . </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">//   Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text("Click the button below: ") Button(text = "Next") } } }</span></span></code> </pre> <br><p>  Es sieht besser aus: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d83/053/4d1d83053a411a9858b0feedab75de4a.png" alt="Zwei elemente untereinander besorgten sich" width="500"></div><br><h3 id="2b-intervaly">  2b.  Intervalle </h3><br><p>  Wir können auch einige Einrückungen zwischen <code>Text</code> und <code>Button</code> hinzufügen: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) <span class="hljs-comment"><span class="hljs-comment">//    Button(text = "Next") } } }</span></span></code> </pre> <br><p>  Wie unser Bildschirm jetzt aussieht: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/3d8/709/2be3d8709c5f83c72f15ab9b450e0ba6.png" alt="Zwei Elemente untereinander, Vertrauensstellungen und beabstandet" width="500"></div><br><h3 id="2c-gorizontalnyy-linearlayout-vs-row">  2c.  Horizontales <code>LinearLayout</code> gegen <code>Row</code> </h3><br><p>  Platzieren Sie den zweiten Knopf neben dem ersten: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/351/842/b31/351842b31ea3fd8ec51a7585ea8efcad.png" alt="Eine zweite schaltfläche wurde hinzugefügt" width="500"></div><br><p>  Code dafür: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) Row { <span class="hljs-comment"><span class="hljs-comment">//   Button(text = "Back") //   WidthSpacer(10.dp) //    Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Innerhalb der <code>Row</code> beiden Schaltflächen horizontal.  <code>WidthSpacer</code> fügt den Abstand zwischen ihnen hinzu. </p><br><h3 id="2d-gravity-vs-alignment">  2d.  <code>Gravity</code> gegen <code>Alignment</code> </h3><br><p>  Richten Sie unsere Elemente in der Mitte aus, wie es die <code>gravity</code> in der aktuellen Benutzeroberfläche tut.  Um diff zu zeigen, werde ich die alten Zeilen auskommentieren und durch neue ersetzen: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">// Column(crossAxisAlignment = CrossAxisAlignment.Start) { Column(crossAxisAlignment = CrossAxisAlignment.Center) { //  Text("Click the button below: ") HeightSpacer(10.dp) // Row { Row(mainAxisSize = FlexSize.Min) { //    Button(text = "Back") WidthSpacer(10.dp) Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Wir werden Erfolg haben: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/e5c/ad7/346e5cad7f27352c91076001d2bf5cf0.png" alt="Zentrale ausrichtung" width="500"></div><br><p>  Mit <code>crossAxisAlignment = CrossAxisAlignment.Center</code> verschachtelte Elemente horizontal zentriert.  Wir sollten den <code>Row</code> Parameter auch auf <code>mainAxisSize = FlexSize.Min</code> , ähnlich wie <code>layout_width = wrap_content</code> damit er sich aufgrund des Standardwerts <code>mainAxisSize = FlexSize.Max</code> , der sich wie <code>layout_width = match_parent</code> verhält, nicht über den Bildschirm <code>layout_width = match_parent</code> . </p><br><h3 id="2d-zamechanie">  2d.  Bemerkung </h3><br><p>  Anhand der obigen Beispiele können Sie erkennen, dass alle Elemente aus separaten Funktionen zusammengesetzt sind: <code>padding</code> ist eine separate Funktion, <code>spacer</code> ist eine separate Funktion, anstatt Eigenschaften in <code>Text</code> , <code>Button</code> oder <code>Column</code> . </p><br><p>  Komplexere Elemente wie <code>RecyclerView</code> oder <code>ConstraintLayout</code> befinden sich in der Entwicklung. Daher konnte ich in den Demoquellen kein Beispiel dafür finden. </p><br><h3 id="3stili-i-temy">  3. Stile und Themen </h3><br><p>  Sie haben wahrscheinlich bemerkt, dass die obigen Schaltflächen standardmäßig lila sind.  Dies liegt daran, dass sie Standardstile verwenden.  Mal sehen, wie Stile in Compose funktionieren. </p><br><p>  In den obigen Beispielen ist <code>FormDemo</code> mit der Annotation <code>@Composable</code> .  Jetzt werde ich zeigen, wie dieses Element in <code>Activity</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ MaterialTheme { FormDemo() } } } }</code> </pre> <br><p>  Anstelle der Funktion <code>setContentView()</code> verwenden wir <code>setContent()</code> , eine Erweiterungsfunktion aus der <code>Compose.kt</code> Bibliothek. </p><br><p>  <code>CraneWrapper</code> enthält den Compose-Baum und bietet Zugriff auf <code>Context</code> , <code>Density</code> , <code>FocusManager</code> und <code>TextInputService</code> . </p><br><p>  <code>MaterialTheme</code> können Sie das Thema für Elemente anpassen. </p><br><p>  Zum Beispiel kann ich die Primärfarbe des Themas wie folgt in Braun ändern: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ <span class="hljs-comment"><span class="hljs-comment">// MaterialTheme { MaterialTheme(colors = MaterialColors(primary = Color.Maroon)) { FormDemo() } } } }</span></span></code> </pre> <br><p>  Jetzt sieht unser Bildschirm folgendermaßen aus: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f1/783/c01/8f1783c0159c45c314c05724969d7000.png" alt="Kastanienbraun als Grundfarbe" width="500"></div><br><p>  Andere Farben und Schriftarten, die geändert werden können: <a href="">MaterialTheme.kt # 57</a> </p><br><p>  Die Rallye-Aktivität bietet ein gutes Beispiel für das Anpassen eines Themas: <a href="">Quellcode an RallyTheme.kt</a> </p><br><h1 id="chto-posmotretpochitat">  Was zu sehen / zu lesen </h1><br><p>  Wenn Sie mehr möchten, können Sie das Beispielprojekt gemäß den <a href="">Anweisungen hier zusammenstellen</a> . </p><br><p>  Wie Windows-Benutzer schreiben, gibt es jetzt keine offizielle Möglichkeit, Compose zu starten, aber es gibt eine inoffizielle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anleitung von kotlinlang Slack</a> . </p><br><p>  Fragen zu Compose können Entwicklern im Kanal <code>#compose</code> kotlinlang Slack gestellt werden. </p><br><p>  Lassen Sie andere Links in den Kommentaren - die nützlichsten werden hier hinzugefügt. </p><br><h1 id="vyvody">  Schlussfolgerungen </h1><br><p>  Die Entwicklung dieser Bibliothek ist in vollem Gange, daher können sich die hier gezeigten Schnittstellen ändern.  Es gibt noch viele Dinge, die Sie im Quellcode lernen können, wie z. B. <code>@Model</code> und unidirektionaler Datenfluss (unidirektionaler Datenstrom).  Vielleicht ist dies ein Thema für zukünftige Artikel. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461101/">https://habr.com/ru/post/de461101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461087/index.html">Dungeons und Höhlen für mein Spiel generieren</a></li>
<li><a href="../de461091/index.html">LED Camelion Lampen</a></li>
<li><a href="../de461093/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 469 (07/09/2019 - 07/07/2019)</a></li>
<li><a href="../de461095/index.html">Apollo Guidance Computer - Architektur und Systemsoftware. Teil 1</a></li>
<li><a href="../de461099/index.html">Spiel AirAttack! - unsere erste VR-Entwicklungserfahrung</a></li>
<li><a href="../de461105/index.html">5 nützliche Webpack-Plugins</a></li>
<li><a href="../de461107/index.html">Dosimeter für Seryozha. Teil II Hundertjährige Röhren gegen friedliches Atom</a></li>
<li><a href="../de461113/index.html">Fünf Jahre C ++ für Projekte für Mikrocontroller in der Produktion</a></li>
<li><a href="../de461121/index.html">Kleine Multitasking-Experimente in einem Mikrocontroller</a></li>
<li><a href="../de461125/index.html">Die Aufgabe, sequentielle numerische Codes zum Nummerieren von Nachrichten im Quellcode in Visual Studio zu erstellen (z. B. C #)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>