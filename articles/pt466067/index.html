<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèº üêøÔ∏è üë©üèø‚Äçüç≥ Protetor de tela encantador para Kodi üë®üèΩ‚Äçüè≠ ü§úüèø üëåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Atribuindo um protetor de tela ao Kodi 
 O projeto foi criado para criar um protetor de tela "Encantador" com uma quantidade m√≠nima de c√≥digo fonte em...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Protetor de tela encantador para Kodi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466067/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/ao/xp/obaoxpyes3hokgu9-el2ra488ya.png" alt="imagem alt"></div><br><h2>  Atribuindo um protetor de tela ao Kodi </h2><br>  O projeto foi criado para criar um protetor de tela <strong>"Encantador"</strong> com uma quantidade m√≠nima de c√≥digo fonte em Python.  O projeto √© o plugin mais simples para o centro multim√≠dia Kodi. <br><br>  O projeto mostra como voc√™ pode criar um protetor de tela muito bonito, inteiramente baseado no trabalho da comunidade "OpenSource".  Um projeto de integra√ß√£o, este √© um exemplo de grava√ß√£o de dois componentes independentes, cada um com cerca de 80 linhas de c√≥digo.  O primeiro componente √© um gerador de conte√∫do, script de shell, o segundo componente √© um plug-in do centro multim√≠dia Kodi, respons√°vel pela exibi√ß√£o do conte√∫do. <br><br>  E, finalmente, se voc√™ √© um programador e usa o sistema de controle de vers√£o Git, pode visualizar seu trabalho, grav√°-lo em um arquivo de v√≠deo e apreciar o resultado em uma TV ou tela de computador, recostando-se na cadeira com uma x√≠cara de caf√©.  E nas noites frias de outono, voc√™ pode dormir tranquilamente sob o protetor de tela, sem esquecer de desligar o dispositivo no Kodi. <br><a name="habracut"></a><br><h2>  Pre√¢mbulo </h2><br>  <strong>Voc√™ pode olhar infinitamente para tr√™s coisas:</strong> <strong><br></strong>  <strong>como o fogo queima, como a √°gua flui e como as outras pessoas trabalham.</strong> <br><br>  Como o plugin foi escrito para o ‚ÄúKodi Multimedia Center‚Äù, visualizarei o trabalho da super equipe de ‚ÄúKodi Programmers‚Äù. <br><br><h2>  Usando plugins no Kodi </h2><br>  O Kodi Multimedia Center √© um programa muito poderoso e flex√≠vel, trabalhando em conjunto com a biblioteca externa ffmpeg, para decodificar arquivos de √°udio e v√≠deo. <br><br>  Para criar um aplicativo de terceiros, o Kodi usa o mecanismo de extens√£o "addons" ou simplesmente plug-ins.  Para criar meu pr√≥prio plugin, preciso de algumas habilidades e um pouco de conhecimento da linguagem de programa√ß√£o Python. <br><br>  O mecanismo de plug-in do Kodi √© extremamente flex√≠vel e conveniente.  Python √© uma linguagem interpretada, o que significa que n√£o preciso compilar nada, compil√°-lo em um pacote de software separado, sofrer com arquivos de compila√ß√£o como "makefile" etc. <br><br>  Para a distribui√ß√£o final do plug-in Kodi, basta compact√°-lo no arquivo Zip, observando algumas regras na estrutura de diret√≥rios.  Tendo o arquivo Zip final em m√£os, ele pode ser instalado em qualquer dispositivo em que o Kodi funcione: um computador, tablet e, finalmente, uma TV (o que significa um monte de TV + placa √∫nica), especificando o arquivo como fonte de plug-in. <br><br><h2>  Estrutura do plugin Kodi </h2><br><pre> ‚îî‚îÄ‚îÄ screensaver.kodi.universe
     ‚îú‚îÄ‚îÄ README.md
     Add‚îÄ‚îÄ addon.xml
     ‚îú‚îÄ‚îÄ changelog.txt
     Create‚îÄ‚îÄ create.sh
     ‚îú‚îÄ‚îÄ fanart.jpg
     ‚îú‚îÄ‚îÄ icon.png
     ‚îú‚îÄ‚îÄ recursos
     ‚îÇ ‚îú‚îÄ‚îÄ idioma
     ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ingl√™s
     ‚îÇ ‚îÇ ‚îÇ ‚îÄ‚îÄ‚îÄ strings.po
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ russo
     ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ strings.po
     ‚îÇ ‚îú‚îÄ‚îÄ settings.xml
     ‚îÇ ‚îî‚îÄ‚îÄ peles
     ‚îÇ ‚îî‚îÄ‚îÄ padr√£o
     720p ‚îú‚îÄ‚îÄ 720p
     K ‚îÇ ‚îî‚îÄ‚îÄ kodi-universe.xml
     ‚îÇ ‚îú‚îÄ‚îÄ 1080i
     K ‚îÇ ‚îî‚îÄ‚îÄ kodi-universe.xml
     ‚îÇ ‚îî‚îÄ‚îÄ m√≠dia
     Black ‚îú‚îÄ‚îÄ black.jpg
     ‚îÇ ‚îú‚îÄ‚îÄ buran.jpg
     K ‚îî‚îÄ‚îÄ kodi-universe.mkv
     ‚îî‚îÄ‚îÄ screensaver.py
</pre><br><br><ul><li>  README.md - arquivo opcional, cont√©m uma descri√ß√£o do projeto para github.com </li><li>  addon.xml - um arquivo com uma descri√ß√£o do plug-in, que cont√©m o tipo, codifica√ß√£o, vers√£o, depend√™ncias, nome do autor, etc. </li><li>  changelog.txt - um arquivo opcional com uma lista de altera√ß√µes no projeto </li><li>  create.sh √© um arquivo opcional, um script bash √© projetado para criar um protetor de tela de arquivo Zip (a) e gerar um arquivo de v√≠deo do hist√≥rico do Git usando a ferramenta Gource, o arquivo n√£o tem uma rela√ß√£o com o pr√≥prio plug-in Kodi, √© necess√°rio para uma distribui√ß√£o conveniente do plug-in.  √â totalmente aut√¥nomo, ou seja,  tendo apenas esse arquivo, voc√™ sempre pode criar um arquivo Zip completo do plug-in (se voc√™ tiver uma conex√£o com a Internet). </li><li>  fanart.jpg - imagem de fundo do plugin </li><li>  icon.png - o √≠cone principal </li><li>  resources - diret√≥rio com recursos de plug-in </li><li>  screensaver.py - o arquivo principal do plugin, cont√©m todo o c√≥digo-fonte do plugin em Python, o nome do arquivo pode ser qualquer coisa, o principal √© que esse nome esteja escrito no arquivo addon.xml </li></ul><br><h3>  Descri√ß√£o dos recursos do plugin </h3><br>  O diret√≥rio de recursos cont√©m os seguintes arquivos: <br><br><ul><li>  language / English / strings.po - strings da interface do plugin original em ingl√™s </li><li>  language / Russian / strings.po - tradu√ß√£o para o russo, o arquivo est√° inclu√≠do no mecanismo padr√£o Kodi para traduzir o conte√∫do para os idiomas nacionais dos pa√≠ses, o in√≠cio do arquivo cont√©m um cabe√ßalho de texto padr√£o de v√°rias linhas (um exemplo pode ser encontrado no site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kodi.wiki</a> , se√ß√£o plug-ins) , existem feeds de linha compostos por tr√™s campos: <br><br><ul><li>  <strong>msgctxt</strong> - link para um n√∫mero de linha exclusivo </li><li>  <strong>msgid</strong> - identificador de string de texto original em ingl√™s </li><li>  <strong>msgstr</strong> - tradu√ß√£o do valor <strong>msgid</strong> para o idioma nacional, neste caso, para russo (diret√≥rio russo) </li></ul><br></li><li>  settings.xml - o arquivo principal das configura√ß√µes do plug-in, descreve o menu gr√°fico das propriedades do plug-in, cujos par√¢metros de string podem ser alterados, em que: <br><br><ul><li>  <strong>id</strong> - identificador de recurso de texto </li><li>  <strong>label</strong> - um r√≥tulo num√©rico exclusivo para o campo de texto (corresponde ao campo msgctxt no arquivo de tradu√ß√µes strings.po) </li><li>  <strong>type</strong> - um tipo de recurso predefinido (todos os tipos poss√≠veis s√£o descritos no site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kodi.wiki</a> , se√ß√£o de plugins) </li><li>  <strong>default</strong> - o valor <strong>padr√£o</strong> do par√¢metro (voc√™ pode redefinir o par√¢metro para esse valor usando o menu Kodi com o mesmo nome) </li></ul><br></li><li>  resources / skins / default / 1080i / kodi-universe.xml - arquivo de configura√ß√£o xml </li><li>  resources / skins / default / 720p / kodi-universe.xml - arquivo xml de configura√ß√£o que descreve a localiza√ß√£o dos controles de plug-in (controles), sua geometria, tamanhos gerais, posi√ß√£o dos elementos, tipo de visibilidade etc.  O nome da configura√ß√£o √© determinado dependendo do modo do adaptador de v√≠deo (por exemplo, 1080i ou 720p) <br></li></ul><br><div class="spoiler">  <b class="spoiler_title">conte√∫do de Russian / strings.po</b> <div class="spoiler_text"><pre><code class="xml hljs"># Kodi Media Center language file # Addon Name: Screensaver Kodi Universe # Addon id: screensaver.kodi.universe # Addon Provider: berserktv msgid "" msgstr "" "Project-Id-Version: Kodi Addons\n" "Report-Msgid-Bugs-To: alanwww1@kodi.org\n" "POT-Creation-Date: YEAR-MO-DA HO:MI+ZONE\n" "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" "Last-Translator: Kodi Translation Team\n" "Language-Team: English \ (http://www.transifex.com/projects/p/xbmc-addons/language/en/)\n" "MIME-Version: 1.0\n" "Content-Type: text/plain; charset=UTF-8\n" "Content-Transfer-Encoding: 8bit\n" "Language: en\n" "Plural-Forms: nplurals=2; plural=(n != 1);\n" msgctxt "#32001" msgid "Screensaver" msgstr " " msgctxt "#32002" msgid "Video file" msgstr "" msgctxt "#32003" msgid "Not Video" msgstr "  "</code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">conte√∫do de settings.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"800"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32001"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videofile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32002"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"not-video"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bool"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32003"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  <strong>Recursos de m√≠dia do plug-in:</strong> <br><br><ul><li>  resources / skins / default / media / black.jpg - fundo preto que preenche a tela antes de iniciar o v√≠deo </li><li>  resources / skins / default / media / buran.jpg - imagem futurista da nave espacial "Buran, nas asas de um sonho" </li><li>  resources / skins / default / media / kodi-universe.mkv - o principal arquivo de v√≠deo que √© reproduzido ciclicamente pelo plug-in at√© o evento de despertar </li></ul><br><h2>  Arquivo de configura√ß√£o raiz do plug-in - addon.xml </h2><br>  Addon.xml - √© o principal arquivo de configura√ß√£o do plug-in, do qual o Kodi obt√©m todas as informa√ß√µes necess√°rias para iniciar o plug-in e integr√°-lo ao centro multim√≠dia. <br><br><div class="spoiler">  <b class="spoiler_title">conte√∫do addon.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.kodi.universe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Kodi Universe"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.1.2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserktv"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.7"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.ui.screensaver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.py"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/berserktv/screensaver.kodi.universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Kodi Universe<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Screensaver - Kodi Universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span>  -  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span>GNU GENERAL PUBLIC LICENSE. Version 2, June 1991<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Os principais par√¢metros do plugin s√£o: <br><br><ul><li>  <strong>Se√ß√£o Addon</strong> <br><ul><li>  <strong>id</strong> - identificador de texto exclusivo do plug-in </li><li>  <strong>name</strong> - nome do plugin </li><li>  <strong>version</strong> - vers√£o do plugin </li><li>  nome do provedor - nome do provedor do plug-in </li></ul><br></li><li>  <strong>Requer se√ß√£o</strong> - depend√™ncias <br>  Nesta se√ß√£o, os m√≥dulos dos quais a opera√ß√£o deste plug-in depende <br></li><li>  <strong>Se√ß√£o de</strong> extens√£o - extens√µes <br>  nesta se√ß√£o (pode haver v√°rios), o tipo do plug-in √© indicado, <br>  principal ponto de entrada para o plug-in: <br>  point = "xbmc.ui.screensaver" library = "screensaver.py" <br><br>  no nosso caso, o plugin √© o ‚ÄúProtetor de Tela‚Äù ao qual √© transmitido <br>  controle chamando um script python chamado "screensaver.py" <br><br>  point = ‚Äúxbmc.addon.metadata‚Äù tamb√©m pode ser especificado na se√ß√£o de extens√µes <br>  com o tipo de plataforma na qual o plug-in pode funcionar, o nome e a descri√ß√£o do plug-in <br>  em um idioma / idiomas espec√≠ficos, bem como o tipo de plug-in LICENSE <br>  A quantidade total de metadados que pode ser especificada nesta se√ß√£o de extens√£o pode ser <br>  Voc√™ pode encontrar informa√ß√µes grandes e mais detalhadas suficientes no site <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kodi.tv</a> <br></li></ul><br><h2>  Implementa√ß√£o de plugins </h2><br>  Como o plug-in deve ser extremamente simples e direto, em sua implementa√ß√£o vou me limitar a um arquivo de origem principal screensaver.py localizado no diret√≥rio raiz do screensaver (a) <br><br>  Para que o script python seja chamado, eu o registrei no arquivo addon.xml, consulte a se√ß√£o acima <br><br>  A linguagem de programa√ß√£o Python √© bastante flex√≠vel, permite executar a mesma a√ß√£o de v√°rias maneiras e, para maior clareza, usarei a abordagem orientada a objetos com classes. <br><br><div class="spoiler">  <b class="spoiler_title">conte√∫do screensaver.py</b> <div class="spoiler_text"><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Plugin for Kodi mediacenter # Kodi Universe - Very Simple Screensaver # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 import os import sys import xbmc import urllib import xbmcgui import xbmcaddon __id__ = 'screensaver.kodi.universe' __addon__ = xbmcaddon.Addon(id=__id__) __path__ = __addon__.getAddonInfo('path') def_video_url = __path__+'/resources/skins/default/media/kodi-universe.mkv' class BsPlaylist: def __init__(self,): pass def getPlaylist(self,): try: xbmc.PlayList(1).clear() except: pass self.playlist = xbmc.PlayList(1) item = xbmcgui.ListItem("item1") self.playlist.add(__addon__.getSetting("videofile"),item) return self.playlist class BsPlayer(xbmc.Player): def __init__(self,): pass def onPlayBackStarted(self): xbmc.executebuiltin("PlayerControl(RepeatAll)") def onPlayBackStopped(self): return class Screensaver(xbmcgui.WindowXMLDialog): def __init__( self, *args, **kwargs ): pass def onInit(self): video_url = __addon__.getSetting("videofile") if (video_url == ""): video_url = def_video_url __addon__.setSetting("videofile", video_url) if (__addon__.getSetting("not-video") == "true" \ or not os.path.isfile(video_url) ): return li = BsPlaylist() self.vpl = li.getPlaylist() if self.vpl: xbmc.sleep(2000) self.getControl(1).setImage("black.jpg") self.player = BsPlayer() if not xbmc.getCondVisibility("Player.HasMedia"): self.player.play(self.vpl,windowed=True) def onAction(self,action): try: xbmc.PlayList(1).clear() except: pass try: xbmc.Player().stop() except: pass try: self.close() except: pass if __name__ == '__main__': scr = Screensaver( 'kodi-universe.xml', __path__, 'default', '', ) scr.doModal() del scr</span></span></code> </pre><br></div></div><br><h4>  Protetor de tela de classe (xbmcgui.WindowXMLDialog) </h4><br>  A classe principal do protetor de tela <br><br>  A API do Python Kodi inclui v√°rios m√≥dulos principais: <strong>xbmc, xbmcgui, xbmcplugin, xbmcaddon e xbmcvfs</strong> .  Para trabalhar com a GUI do Kodi, usarei o m√≥dulo xbmcgui.  Este m√≥dulo cont√©m classes respons√°veis ‚Äã‚Äãpor diferentes elementos da interface. <br><br>  Para criar uma caixa de di√°logo de plug-in com sua interface descrita no arquivo de configura√ß√£o xml, a classe <strong>xbmcgui</strong> √© <strong>usada.</strong> <br><br><div class="spoiler">  <b class="spoiler_title">conte√∫do de kodi-universe.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"window"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Background image<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span>FF555555<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">scalediffuse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aligny</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag">&gt;</span></span>scale<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span>buran.jpg<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videowindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>VideoWindow<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  O arquivo XML de configura√ß√£o descreve dois elementos de controle: <br><br>  O primeiro com o identificador - <strong>1</strong> , √© uma imagem de fundo - "Tempestade de neve, nas asas de um sonho", de certos tamanhos, alinhada ao centro da tela. <br><br>  O segundo elemento com o identificador - <strong>2</strong> , √© uma janela para reproduzir o v√≠deo, com um sinal de visibilidade e certas dimens√µes geom√©tricas. <br><br>  A classe Screensaver herda da classe WindowXMLDialog e possui tr√™s m√©todos: <br><br><ul><li>  O construtor <strong>__init__</strong> m√©todo √© chamado automaticamente quando o objeto √© criado </li><li>  <strong>OnInit</strong> - m√©todo de inicializa√ß√£o gr√°fica, chamado antes da primeira janela de exibi√ß√£o </li><li>  O m√©todo <strong>onAction</strong> √© um m√©todo de processamento de eventos que √© chamado quando certos eventos ocorrem, nesse caso, quando ocorre um evento de despertar, ou seja,  clicando no bot√£o do mouse, teclado, movendo o ponteiro do mouse ou a chegada de qualquer evento no painel de controle. </li></ul><br>  A classe Screensaver usa duas classes auxiliares: <br><br><ul><li>  Classe <strong>BsPlayer</strong> - herdada da classe padr√£o do player de v√≠deo XBMC <strong>xbmc.Player</strong> , a classe cont√©m tr√™s m√©todos: <br><ol><li>  O construtor <strong>__init__</strong> m√©todo √© chamado automaticamente quando o objeto √© criado </li><li>  Substituindo o <strong>m√©todo de in√≠cio de</strong> v√≠deo <strong>onPlayBackStarted</strong> </li><li>  Substituindo o m√©todo final de v√≠deo <strong>onPlayBackStopped</strong> <br><br>  Nota: desde que redefini o m√©todo de parar a reprodu√ß√£o e ele est√° vazio, <br>  ent√£o a regra funcionar√°: n√£o pare, vamos l√° <br></li></ol><br></li><li>  Classe <strong>BsPlaylist</strong> - uma classe de lista projetada para retornar um objeto <strong>xbmc.PlayList</strong> <br>  a classe cont√©m dois m√©todos: <br><br><ol><li>  O construtor <strong>__init__</strong> m√©todo √© chamado automaticamente quando o objeto √© criado </li><li>  O m√©todo <strong>getPlaylist</strong> para definir uma lista de reprodu√ß√£o usando a lista XBMC padr√£o - xbmc.PlayList </li></ol></li></ul><br>  O algoritmo geral do Screensaver (a) √© o seguinte: <br><br><ol><li>  Quando o evento de chamada Screensaver ocorre (a) - a inatividade do usu√°rio pelo n√∫mero especificado de minutos e a aus√™ncia de reprodu√ß√£o ativa de v√≠deo / √°udio, o Kodi transfere o controle para o script screensaver.py </li><li>  Com base no arquivo de configura√ß√£o xml, a janela gr√°fica principal do plug-in √© criada.  Quando a janela gr√°fica √© inicializada, os recursos de string das configura√ß√µes do plugin s√£o carregados (o menu √© "settings"). </li></ol><br>  Se o arquivo de v√≠deo n√£o for especificado <br>  <strong>__addon __. getSetting ("videofile")</strong> <br><br>  √© preenchido com um par√¢metro padr√£o <br>  <strong>video_url = def_video_url</strong> <br>  <strong>__addon __. setSetting ("videofile", video_url)</strong> <br><br>  se n√£o houver sinalizador - "desativar a reprodu√ß√£o de v√≠deo" <br>  <strong>__addon __. getSetting ("n√£o v√≠deo")</strong> <br><br>  a imagem futurista ‚ÄúTempestade de neve nas asas do sonho‚Äù √© mostrada por dois segundos <br>  <strong>xbmc.sleep (2000)</strong> <br><br>  ainda pelo identificador do controle 1, uma imagem de fundo preta √© definida <br>  <strong>self.getControl (1) .setImage ("black.jpg")</strong> <br><br>  e o player de v√≠deo XBMC come√ßa com uma lista de reprodu√ß√£o de arquivo √∫nico <br>  <strong>self.player.play (self.vpl, windowed = True)</strong> <br><br>  O arquivo de v√≠deo √© reproduzido em c√≠rculo at√© o momento em que chega <br>  evento de vig√≠lia, ou seja,  qualquer a√ß√£o do usu√°rio ativa <br><br><h2>  Criando visualiza√ß√µes para o plugin Kodi no Ubuntu </h2><br>  <strong>Nota:</strong> <strong><br></strong>  <strong>Todas as instru√ß√µes descritas abaixo ser√£o executadas no sistema operacional Linux, a saber, a distribui√ß√£o Ubuntu</strong> <br><br>  Tamb√©m √© poss√≠vel executar as etapas descritas abaixo em um sistema operacional compat√≠vel com Debian - a principal condi√ß√£o para o lan√ßamento ser√° a presen√ßa do gerenciador de pacotes <strong>Apt</strong> no sistema, ou seja,  um gerente que permite instalar o software <strong>Deb</strong> no sistema.  Obviamente, voc√™ pode executar as seguintes etapas em qualquer sistema Linux, mas isso exigir√° a√ß√µes adicionais de voc√™ e √© poss√≠vel alterar a sequ√™ncia de alguns comandos (como exemplo: instala√ß√£o de pacotes RPM em vez de Deb, etc.) <br><br>  Gource √© um projeto muito interessante e fascinante.  <strong>Gource</strong> √© nomeado ap√≥s origem, ou seja,  c√≥digo fonte + G (gr√°ficos).  Esta aplica√ß√£o permite visualizar o hist√≥rico de altera√ß√µes no sistema de controle de vers√£o.  O Gource entende nativamente o Git, para outros sistemas como SVN, Mercurial existem conversores que permitem converter a base de armazenamento no formato Git. <br><br>  <strong>Gource</strong> - <strong>torna</strong> incrivelmente bonito com o OpenGL e possui um grande n√∫mero de par√¢metros para seu trabalho.  Essa ferramenta incrivelmente poderosa para gerar a visualiza√ß√£o "Encantadora" ser√° usada. <br><br>  Para criar uma visualiza√ß√£o, preciso de uma sequ√™ncia de comandos descritos em um script <strong>bash</strong> <br><br>  Para gerar o v√≠deo, preciso de dois programas principais: <br>  <strong>Gource</strong> - para criar o arquivo de v√≠deo de origem para o hist√≥rico Git de qualquer projeto especificado <br>  <strong>FFmpeg</strong> - uma biblioteca para codifica√ß√£o e decodifica√ß√£o de v√≠deo e √°udio <br><br><h2>  Script para gerar um arquivo de v√≠deo de plug-in </h2><br><div class="spoiler">  <b class="spoiler_title">conte√∫do create.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # This is script of the generation video from "Gource". # # project: Screensaver Kodi Universe (https://berserk.tv) # This script creates a ZIP archive of a Kodi screensaver. # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 # #     , #        # git zip ffmpeg gource    sudo OUT_DIR="output" OUT="kodi-universe.mkv" NAME_PROJ="screensaver.kodi.universe" MEDIA_PATH="${NAME_PROJ}/resources/skins/default/media" NAME_REP="https://github.com/berserktv/${NAME_PROJ}.git" GSFILE="output.ppm" SECONDS_PER_DAY="1" GOURCE_FRAME_RATE="30" RESOLUTION="-1920x1080" CODEC_OUT_FRAME_RATE="25" # -vcodec -     , # libx264         (h.264) # -profile -    (baseline, main, high, # high10, high422, high444) # -pix_fmt -    (yuv420p, yuv422p, yuv444p) FFPARAM="-vcodec libx264 -profile:v high422 -pix_fmt yuv420p" GSPARAM1="--camera-mode track ${RESOLUTION} --stop-position 1.0 \ --seconds-per-day ${SECONDS_PER_DAY}" GSPARAM2="--git-branch origin/master --multi-sampling \ --stop-at-end --hide-filenames" GSPARAM3="--highlight-users --file-idle-time 13 --max-files 0 --hide date" GSPARAM4="--title Kodi --bloom-multiplier 1.0 --bloom-intensity 1.0" VIS="visualize" # GIT         GIT_REP="https://github.com/xbmc/xbmc.git" # arg1 -   git , #         # example: ./create.sh "https://github.com/facebook/react.git" if [ -n "$1" ]; then GIT_REP="$1"; fi #   git zip ffmpeg  gource packages="git zip ffmpeg gource" for i in $packages; do if ! dpkg -s $i | grep -q "install ok installed"; then sudo apt-get install -y $i; fi done #    test -d ${OUT_DIR} &amp;&amp; rm -rf ${OUT_DIR} test -d ${OUT_DIR} || mkdir -p ${OUT_DIR} cd ${OUT_DIR} #  Screensaver  GIT ,   if ! git clone ${NAME_REP} ${NAME_PROJ}; then echo "Error, not load ${NAME_REP}, exit ..."; exit 1; fi if ! git clone ${GIT_REP} ${VIS}; then echo "Error, not load ${GIT_REP}, exit ..."; exit 2; fi #    Screensaver(a) gource ${VIS} ${GSPARAM1} ${GSPARAM2} ${GSPARAM3} ${GSPARAM4} \ --output-framerate ${GOURCE_FRAME_RATE} --output-ppm-stream ${GSFILE} ffmpeg -y -r ${GOURCE_FRAME_RATE} -f image2pipe -vcodec ppm \ -i ${GSFILE} ${FFPARAM} -r ${CODEC_OUT_FRAME_RATE} ${OUT} &amp;&amp; sync mv -f ${OUT} ${MEDIA_PATH} rm -f ${GSFILE} #     #   GIT    screensaver() test -d ${NAME_PROJ}/.git &amp;&amp; rm -fr ${NAME_PROJ}/.git zip -r ${NAME_PROJ}.zip ${NAME_PROJ}</span></span></code> </pre><br></div></div><br>  O script deve ser executado como um usu√°rio comum, mas durante a inicializa√ß√£o, o script requer a instala√ß√£o dos seguintes programas <strong>git zip ffmpeg gource</strong> <br><br>  Se eles estiverem ausentes, o script tentar√° instal√°-los usando o <strong>comando de</strong> escalonamento de privil√©gios - <strong>sudo</strong> . <br><br>  Em resumo, o script faz o seguinte: <br><br><ul><li>  Ele baixa dois projetos da Internet com o Github. <br>  O primeiro projeto √© o pr√≥prio Screensaver <br>  Segundo projeto - XBMC (Kodi) <br><br>  se voc√™ especificar um argumento na linha de comando que representa um caminho Git, poder√° carregar qualquer projeto Git para visualiza√ß√£o, um exemplo de carregamento de outro projeto Git: <br><br><pre> <code class="bash hljs">./create.sh https://github.com/facebook/react.git</code> </pre> <br>  neste caso, eu uso o renomado mecanismo do Facebook para visualiza√ß√£o - React <br></li><li>  Executa o programa <strong>Gource</strong> com argumentos de linha de comando para gerar fragmentos de v√≠deo no formato PPM n√£o compactado. <br>  O v√≠deo ser√° gerado at√© que o usu√°rio feche a janela Gource com o mouse (clicando na cruz) ou at√© que o usu√°rio pressione a tecla <strong>ESC</strong> <br><br><div class="spoiler">  <b class="spoiler_title">Nota:</b> <div class="spoiler_text"><blockquote>  N√£o recomendo que voc√™ gere um v√≠deo com dura√ß√£o superior a <strong>tr√™s minutos</strong> , pois isso pode levar um longo tempo e exigir√° que voc√™ armazene mais de <strong>30 GB de</strong> espa√ßo livre no disco r√≠gido.  Um minuto de imagens com uma resolu√ß√£o de 1920 √ó 1080 (FullHD) e uma frequ√™ncia de 30 quadros por segundo requer cerca de 10 GB de espa√ßo em disco r√≠gido.  Este √© um arquivo tempor√°rio e, ap√≥s gerar o cont√™iner de v√≠deo MKV correto (codec h.264) usando o FFmpeg, esse arquivo √© exclu√≠do e o arquivo resultante permanece, o que leva 20 MB por um minuto de v√≠deo FullHD a 25 quadros por segundo. <br><br>  Com as configura√ß√µes do Gource usadas pelo script, voc√™ tem a oportunidade de selecionar qualquer se√ß√£o de tempo desde o in√≠cio do desenvolvimento do projeto at√© o presente, a escala linear na parte inferior da janela do Gource √© respons√°vel por isso.  Voc√™ pode usar o mouse para selecionar a qualquer momento, e a visualiza√ß√£o come√ßa a partir deste momento, ou seja,  todos os objetos anteriores na tela desaparecem, isso torna o v√≠deo mais din√¢mico. <br></blockquote><br></div></div><br></li><li>  Inicia o programa FFmpeg com uma lista de argumentos para criar um cont√™iner MKV a partir do conjunto de imagens Gource original; </li><li>  Cria o arquivo Zip final com o projeto Screensaver (a) e o arquivo de v√≠deo gerado; </li></ul><br><h2>  Op√ß√µes de origem </h2><br><ul><li>  01 <strong>- modo de</strong> c√¢mera de <strong>trilha no</strong> modo c√¢mera <br>  (rastreia usu√°rios ativos atuais) <br></li><li>  02 <strong>- posi√ß√£o</strong> final <strong>1.0</strong> posi√ß√£o final <br>  (define a posi√ß√£o final da reprodu√ß√£o, varia de 0,0 a 1,0) <br></li><li>  03 <strong>- segundo de dia 1</strong> n√∫mero de dias por segundo de v√≠deo <br>  (o par√¢metro determina quanto trabalho voc√™ ver√° no intervalo de um segundo do v√≠deo) <br></li><li>  04 <strong>- origem do ramo de git /</strong> ramo de trabalho do projeto <strong>principal</strong> </li><li>  05 - <strong>parada no fim</strong> ap√≥s o <strong>t√©rmino do</strong> log do git </li><li>  06 <strong>- a</strong> suaviza√ß√£o de <strong>v√°rias amostras</strong> permite </li><li>  07 <strong>--hide-filenames</strong> remove nomes de arquivos </li><li>  08 <strong>--highlight-users</strong> destacar nomes de usu√°rio </li><li>  09 <strong>- tempo de</strong> inatividade do arquivo <strong>13 tempo</strong> ocioso do arquivo <br>  (a quantidade de tempo ap√≥s a qual o nome do arquivo √© removido da exibi√ß√£o) <br></li><li>  10 <strong>--max-files 0</strong> n√∫mero m√°ximo de arquivos <br>  (um valor 0 remove o limite do n√∫mero de nomes de arquivos exibidos) <br></li><li>  11 <strong>--hide date</strong> remove a data em que o quadro atual √© exibido </li><li>  12 - <strong>t√≠tulo Kodi, o</strong> nome que <strong>aparece</strong> no canto inferior esquerdo do v√≠deo </li><li>  13 <strong>--bloom-multiplicator 1.0</strong> controla o efeito de "light bloom" usando o raio. </li><li>  14 - <strong>Bloom-Intensity 1.0</strong> controla o efeito de "light bloom" usando intensidade. </li><li>  15 <strong>- taxa de quadros de</strong> sa√≠da <strong>30 quadros de</strong> sa√≠da por segundo </li><li>  16 <strong>--output-ppm-stream name nome do</strong> arquivo de sa√≠da no formato PPM </li></ul><br>  nota: alguns par√¢metros podem ser mutuamente exclusivos, <br>  Uma lista completa de par√¢metros pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h4>  Breve tutorial em v√≠deo para Screensaver (a) </h4><br><br><div class="spoiler">  <b class="spoiler_title">1) Fa√ßa o download do projeto no github:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/berserktv/screensaver.kodi.universe.git</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2) Gere um v√≠deo e crie um arquivo Zip do plug-in:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> screensaver.kodi.universe chmod u+x create.sh ./create.sh</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3) Tempo de gera√ß√£o de v√≠deo e uso de espa√ßo livre em disco:</b> <div class="spoiler_text"><pre> <code class="bash hljs">      .           -    20      Gource (PPM)   MKV      FFmpeg. (  h.264)  ,   Git  XBMC (Kodi)   700            .       PPM   10     ( FullHD, 30   ).</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">4) Instale o protetor de tela no Kodi</b> <div class="spoiler_text"><pre> <code class="bash hljs">    <span class="hljs-string"><span class="hljs-string">""</span></span>   Kodi (        )   Kodi - <span class="hljs-string"><span class="hljs-string">""</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" Zip "</span></span>   ,     Kodi Universe    Screensaver(),     .  Settings ( ) =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466067/">https://habr.com/ru/post/pt466067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466049/index.html">De copiar e colar para componentes: reutilizando c√≥digo em diferentes aplicativos</a></li>
<li><a href="../pt466051/index.html">Automatize a cria√ß√£o de perfil em Java 10/09</a></li>
<li><a href="../pt466053/index.html">Representa√ß√£o de empresas de TI russas em Cingapura: por que n√£o?</a></li>
<li><a href="../pt466059/index.html">Livro ‚ÄúDesign Thinking. Do insight a novos produtos e mercados ‚Äù</a></li>
<li><a href="../pt466065/index.html">Resumo de not√≠cias do PostgreSQL. Edi√ß√£o No.17</a></li>
<li><a href="../pt466069/index.html">Como levar a equipe a procurar id√©ias mais produtivas</a></li>
<li><a href="../pt466071/index.html">10,3 segundos por hash: minera√ß√£o no computador de controle a bordo da espa√ßonave Apollo</a></li>
<li><a href="../pt466075/index.html">Como deixei a ci√™ncia b√°sica em uma startup</a></li>
<li><a href="../pt466077/index.html">Broadcast Techdir Day em S√£o Petersburgo</a></li>
<li><a href="../pt466081/index.html">3 de setembro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>