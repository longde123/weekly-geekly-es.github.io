<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍💼 🤹🏿 👰🏻 培训Cisco 200-125 CCNA v3.0。 第18天。路由基础 🧘🏼 📉 🤰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今天我们将开始研究路由器。 如果您从第一堂课到第十七堂课学习了我的视频课程，那么您已经学习了开关的基础知识。 现在我们移到下一个设备-路由器。 从上一视频教程中可以知道，CCNA课程的主题之一称为思科交换与路由。 

 在本系列中，我们将不研究Cisco路由器，而是从整体上考虑路由的概念。 我们将讨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>培训Cisco 200-125 CCNA v3.0。 第18天。路由基础</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/463559/">今天我们将开始研究路由器。 如果您从第一堂课到第十七堂课学习了我的视频课程，那么您已经学习了开关的基础知识。 现在我们移到下一个设备-路由器。 从上一视频教程中可以知道，CCNA课程的主题之一称为思科交换与路由。 <br><br> 在本系列中，我们将不研究Cisco路由器，而是从整体上考虑路由的概念。 我们将讨论三个主题。 首先是对您已经了解的关于路由器的知识的回顾，以及关于如何将其与您在研究交换机的过程中获得的知识一起应用的对话。 我们必须了解交换机和路由器的联合工作由什么组成。 <br><br><img src="https://habrastorage.org/webt/jb/y8/dg/jby8dgnlbyixxtltjwi7gezkwsm.jpeg"><br><br> 接下来，我们看一下路由是什么，它意味着什么以及它如何工作，然后继续介绍路由协议的类型。 今天，我使用上一课中已经看到的拓扑。 <a name="habracut"></a><br><br> 我们研究了数据如何在网络上传输以及如何进行三步TCP握手。 通过网络发送的第一条消息是SYN数据包。 让我们看看当IP地址为10.1.1.10的计算机要与服务器30.1.1.10联系时，即试图建立FTP连接时，如何发生三阶段握手。 <br> 为了开始连接，计算机会创建一个带有随机数25113的源端口。如果您忘记了这种情况，建议您查看以前解决此问题的视频教程。 <br><br><img src="https://habrastorage.org/webt/dh/cm/cp/dhcmcp806ovdnz5ezywa46pet4u.jpeg"><br><br> 然后，他将目标端口号放入帧中，因为他知道需要连接到端口21，然后添加了第三级OSI信息，即他自己的IP地址和目标IP地址。 到达终点之前，点分数据不会更改。 到达服务器后，它们也没有改变，但是服务器将第二级的帧信息即MAC地址添加到了服务器。 这是由于交换机仅接受OSI二级信息这一事实。 在这种情况下，路由器是唯一考虑第三级信息的网络设备，当然，计算机也可以处理此信息。 因此，交换机仅适用于第二级信息，而路由器仅适用于第三级信息。 <br><br> 交换机知道源MAC地址XXXX：XXXX：1111，并且想知道计算机正在访问的服务器的MAC地址。 他将源IP地址与目的地址进行比较，了解这些设备位于不同的子网中，并决定使用网关访问另一个子网。 <br><br> 经常有人问我，谁来决定网关的IP地址。 首先，由网络管理员来创建网络并为每个设备提供IP地址。 作为管理员，您可以为路由器分配子网允许的地址范围内的任何地址，通常这是第一个或最后一个有效地址，但是对于其用途没有严格的规定。 在本例中，管理员将网关或路由器的地址分配为10.1.1.1，并将其分配给端口F0 / 0。 <br><br> 在静态IP地址为10.1.1.10的计算机上配置网络时，请分配子网掩码255.255.255.0和默认网关10.1.1.1。 如果不使用静态地址，则计算机将使用DHCP，DHCP将分配一个动态地址。 无论计算机使用哪个IP地址（静态或动态），都必须提供网关地址才能访问另一个网络。 <br><br> 因此，计算机10.1.1.10知道它必须将帧发送到路由器10.1.1.1。 这种传输是在本地网络内部进行的，这里的IP地址无关紧要，此处仅MAC地址很重要。 假设计算机从未接触过路由器并且不知道其MAC地址，那么它必须首先发送ARP请求，该请求询问子网上的所有设备：“嘿，你们中哪个人的地址为10.1.1.1？ 请告诉我您的MAC地址！” 由于ARP是广播消息，因此它到达所有设备（包括路由器）的所有端口。 <br><br> 收到ARP的计算机10.1.1.12认为：“不，我的地址不是10.1.1.1”，并拒绝该请求，计算机10.1.1.13进行了同样的操作。 接收到请求的路由器知道他们正在请求该请求，并将端口F0 / 0的MAC地址（所有端口都有不同的MAC地址）发送给计算机10.1.1.10。 现在，在知道网关地址XXXX：AAAA（在本例中为目标地址）的情况下，计算机会将其添加到寻址到服务器的帧的末尾。 与此同时，它设置FCS / CRC帧的标头，这是一种检查传输错误的机制。 <br><br><img src="https://habrastorage.org/webt/px/uw/ht/pxuwhtqppalqe_l5chqlho39hiy.jpeg"><br><br> 之后，将计算机10.1.1.10的帧通过电线发送到路由器10.1.1.1。 路由器接收到帧后，将使用与计算机相同的算法删除FCS / CRC。 数据不过是零和一的集合。 如果数据已损坏，即1变为0或0变为1，或者使用集线器时经常发生数据泄漏，则设备必须再次转发该帧。 <br><br> 如果FCS / CRC检查成功，则路由器将查看源和目标MAC地址并删除它们，因为这是2级信息，然后转到包含3级信息的帧主体。 从中，他了解到该帧包含的信息适用于IP地址为30.1.1.10的设备。 <br><br> 路由器以某种方式知道此设备的位置。 当我们考虑开关的操作时，我们没有讨论此问题，因此我们现在将考虑它。 路由器有4个端口，因此我向它添加了更多连接。 那么，路由器如何知道IP地址为30.1.1.10的设备的数据需要通过端口F0 / 1发送呢？ 他为什么不通过端口F0 / 3或F0 / 2发送它们？ <br><br> 事实是路由器与路由表一起使用。 每个路由器都有一个表格，可让您决定通过哪个端口传输特定帧。 <br><br><img src="https://habrastorage.org/webt/o7/tp/f6/o7tpf6nkd5iniclvajhvvqzpw5u.jpeg"><br><br> 在这种情况下，端口F0 / 0被配置为IP地址10.1.1.1，这意味着它已连接到网络10.1.1.10/24。 同样，端口F0 / 1被配置为地址20.1.1.1，即，它已连接到网络20.1.1.0/24。 路由器知道这两个网络，因为它们直接连接到其端口。 因此，默认情况下，有关10.1.10 / 24网络的流量应通过F0 / 0端口以及20.1.1.0/24网络的流量应通过F0 / 1端口的信息是已知的。 路由器如何知道通过哪个端口与其他网络一起工作？ <br><br> 我们看到网络40.1.1.0/24连接到端口F0 / 2，网络50.1.1.0/24连接到端口F0 / 3，网络30.1.1.0/24将第二台路由器连接到服务器。 第二个路由器也有一个路由表，说网络30连接到它的端口，我们用0/1表示，它通过端口0/0连接到第一个路由器。 该路由器知道其端口0/0连接到网络20，并且端口0/1连接到网络30，并且仅此而已。 <br><br> 同样，第一个路由器知道连接到端口0/2和0/3的网络40和50.，但不知道有关网络30的任何信息。路由协议向路由器提供默认情况下不拥有的信息。 这些路由器彼此交互的机制是路由的基础，并且存在动态和静态路由。 <br><br> 静态路由是为第一个路由器提供信息：如果需要连接到网络30.1.1.0/24，则需要使用端口F0 / 1。 但是，当第二个路由器从为计算机10.1.1.10设计的服务器接收流量时，他不知道如何处理它，因为在他的路由表中只有关于网络30和20的信息。因此，该路由器还需要注册静态路由：如果接收到网络10的流量，则应通过端口0/0发送。 <br><br> 静态路由的问题在于，我必须手动配置第一个路由器才能与网络30配合使用，第二个路由器才能与网络10配合使用。如果我只有2个路由器，那么这很简单，但是当我只有10个路由器时，设置静态路由需要很多时间。 在这种情况下，使用动态路由是有意义的。 <br> 因此，在从计算机接收到帧之后，第一个路由器查看其路由表，并决定通过端口F0 / 1发送它。 同时，它将源MAC地址XXXX.BBBB和目标MAC地址XXXX.SSCC添加到帧中。 <br><br><img src="https://habrastorage.org/webt/zf/ue/yg/zfueygka2ioa7csij5leupwh4pc.jpeg"><br><br> 在接收到该帧之后，第二路由器“切断”与第二级OSI有关的MAC地址，并且进行到第三级的信息。 他发现目标IP地址30.1.1.10与路由器的端口0/1属于同一网络，将源MAC地址和目标设备的MAC地址添加到帧中并将该帧发送到服务器。 <br><br><img src="https://habrastorage.org/webt/tw/4h/-o/tw4h-oouecat_yq4568dgisula4.jpeg"><br><br> 正如我已经说过的，然后在相反的方向上重复类似的过程，即执行第二个握手阶段，在该阶段中服务器将发送回SYN ACK消息。 在此之前，它将丢弃所有不必要的信息，仅保留SYN数据包。 <br><br><img src="https://habrastorage.org/webt/ba/ki/my/bakimy_lojii5shhhtgw0tlj-9i.jpeg"><br><br> 收到此数据包后，第二个路由器会考虑收到的信息，对其进行补充并进一步发送。 <br><br> 因此，在上一课中，我们研究了交换机的工作原理，现在我们学习了路由器的工作原理。 让我们回答什么是全局意义上的路由的问题。 假设您遇到了在回旋处安装的路标。 您会看到第一个分支通往皇家空军费尔法克斯基地，第二个分支通往机场，第三个分支通往南部。 如果选择第四个出口，您将陷入死胡同，在第五个出口之后，您可以开车穿越市中心到达布拉克斯比城堡。 <br><br><img src="https://habrastorage.org/webt/wv/ya/24/wvya24lrq4i_ddnmrflggy_uk08.jpeg"><br><br> 通常，路由决定了路由器决定将流量定向到何处的原因。 在这种情况下，作为驾驶员，您必须确定需要从十字路口驶出的出口。 在网络中，路由器必须决定将数据包或帧发送到何处。 您必须了解，路由允许您根据哪个路由器做出这些决定来创建表。 <br><br> 如我所说，有静态和动态路由。 考虑静态路由，为此，我将绘制3个相互连接的设备，第一个和第三个设备连接到网络。 假设一个网络10.1.1.0要连接到网络40.1.1.0，并且在路由器之间存在网络20.1.1.0和30.1.1.0。 <br><br><img src="https://habrastorage.org/webt/gt/ua/t1/gtuat1qujcp3ck7s7gaftctvsco.jpeg"><br><br> 在这种情况下，路由器的端口应属于不同的子网。 默认情况下，路由器1仅了解网络10和20。对其他网络一无所知。 路由器2只知道网络20和30。因为它们已连接到网络，而路由器3只知道网络30和40。如果网络10要连接到网络40，我必须告诉路由器1网络30。并且如果他想传输网络40.的帧，则他必须使用网络20的接口，并通过同一网络20发送帧。 <br><br> 我必须为第二个路由器分配2条路由：如果他想将数据包从网络40传输到网络10，我必须使用网络端口20，并且必须从网络10传输数据包。网络40。-网络端口30。类似地，我必须提供路由器3，其中包含有关网络10和20的信息。 <br><br> 如果网络较小，则静态路由很容易设置。 但是，网络增长得越多，静态路由就会出现更多的问题。 假设您创建了一个直接连接第一台和第三台路由器的新连接。 在这种情况下，动态路由协议将自动更新路由器1的路由表，指示如下：“如果需要联系路由器3，请使用直接路由”！ <br><br><img src="https://habrastorage.org/webt/jg/sp/cn/jgspcn_c5nlc_-e91rbyknbkode.jpeg"><br><br> 路由协议有两种类型：IGP内部网关协议和EGP外部网关协议。 第一个协议与称为路由域的单独的自治系统一起工作。 假设您有一个只有5个路由器的小型组织。 如果我们仅在谈论这些路由器之间的连接，则是指IGP，但是如果您像ISP提供商那样使用网络连接到Internet，则应使用EGP。 <br><br><img src="https://habrastorage.org/webt/gg/ot/uc/ggotuchtprrj_lfnovx_p0fefz8.jpeg"><br><br>  IGP使用3种流行的协议：RIP，OSPF和EIGRP。 由于不推荐使用RIP，因此CCNA课程仅提及最后两个协议。 这是最简单的路由协议，在某些情况下仍会使用，但不能提供必要的网络安全性。 这是思科将RIP排除在课程之外的原因之一。 但是，我仍然会告诉您，因为学习它有助于理解路由的基础。 <br><br><img src="https://habrastorage.org/webt/-w/yd/00/-wyd00ggywretxv6t3drxrgal0i.jpeg"><br><br>  EGP协议的分类使用两种协议：BGP和实际的EGP协议。 在学习CCNA课程时，我们将仅考虑BGP，OSPF和EIGRP。 您可以考虑有关RIP奖金信息的故事，该故事将反映在视频教程之一中。 <br> 路由协议还有2种类型：距离矢量距离矢量协议和链接状态链接状态路由协议。 <br><br><img src="https://habrastorage.org/webt/md/x7/ff/mdx7ffe6zakej1nn1e3w_qwgama.jpeg"><br><br> 第一次穿刺考虑了距离和方向向量。 例如，我可以直接在R1和R4之间建立连接，也可以沿着路径R1-R2-R3-R4建立连接。 如果我们在谈论使用远程矢量方法的路由协议，那么在这种情况下，连接将始终沿最短路径进行。 此连接的速度最低并不重要。 在我们的情况下，它是128 kbit / s，这比沿速度为100 Mbps的R1-R2-R3-R4路由的连接要慢得多。 <br><br> 考虑距离矢量协议RIP。 我将在R1前面完成网络10，在R4后面完成网络40。假设这些网络中有很多计算机。 如果要在网络10，R1和网络40.R4之间建立连接，那么我将为R1分配以下类型的静态路由：“如果需要连接至网络40，请使用与路由器R4的直接连接”。 在这种情况下，必须在所有4个路由器上手动配置RIP。 然后，路由表R1将自动报告，如果网络10要连接到网络40，则必须使用直接连接R1-R4。 即使解决方法更快，距离矢量协议仍将选择传输距离最小的最短路径。 <br><br>  OSPF是一种通道状态路由协议，始终查看网络部分的状态。 在这种情况下，他估算了信道的速度，并且如果他发现信道R1-R4上的业务传输速率非常低，则即使其长度超过了最短路径，他也会选择具有较高速度R1-R2-R3-R4的路径。 因此，如果我在所有路由器上都配置了OSPF协议，则当我尝试将网络40连接到网络10时，流量将沿着路由R1-R2-R3-R4发送。 因此，RIP是距离矢量协议，而OSPF是信道状态路由协议。 <br><br> 还有另一种协议-EIGRP，思科的专有路由协议。 如果我们谈论来自其他制造商（例如瞻博网络）的网络设备，则它们不支持EIGRP。 这是一种出色的路由协议，比RIP和OSPF效率更高，但只能在基于Cisco设备的网络上使用。 稍后我将告诉您更多有关此协议为何如此出色的信息。 到目前为止，我注意到EIGRP结合了距离矢量协议和信道状态路由协议的功能，代表了一种混合协议。 <br><br> 在下一个视频教程中，我们将接近检查Cisco路由器，我将向您介绍有关Cisco IOS操作系统的知识，该系统是为交换机和路由器设计的。 我希望在第19天或第20天的课程中，我们将开始对路由协议进行详细研究，并以小型网络为例，展示如何配置Cisco路由器。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/mJgPcB7ndbk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 感谢您与我们在一起。 你喜欢我们的文章吗？ 想看更多有趣的资料吗？ 通过下订单或将其推荐给您的朋友来支持我们， <b>为我们为您发明的入门级服务器的独特模拟，为Habr用户</b>提供<b>30％的折扣：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关于VPS（KVM）E5-2650 v4（6核）的全部真相10GB DDR4 240GB SSD 1Gbps从$ 20还是如何划分服务器？</a>  （RAID1和RAID10提供选件，最多24个内核和最大40GB DDR4）。 <br><br>  <b>戴尔R730xd便宜2倍？</b> 仅<b>在荷兰，</b>我们有<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2台Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100电视</a> ！</b>  <b><b>戴尔R420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99起！</b></b> 阅读有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如何构建基础架构大厦的信息。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用价格为9000欧元的Dell R730xd E5-2650 v4服务器的上等课程？</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN463559/">https://habr.com/ru/post/zh-CN463559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN463535/index.html">通过PVS-Studio静态分析器检查.NET Core库源代码</a></li>
<li><a href="../zh-CN463537/index.html">通过PVS-Studio静态分析器验证.NET Core库的源代码</a></li>
<li><a href="../zh-CN463541/index.html">培训Cisco 200-125 CCNA v3.0。 第17天。CCNA课程摘要和路线图</a></li>
<li><a href="../zh-CN463551/index.html">如何与员工联系并组织大型IT公司的工作流程</a></li>
<li><a href="../zh-CN463553/index.html">“你是谷歌人吗？” 或我们录用时做的5件事（但不再）</a></li>
<li><a href="../zh-CN463563/index.html">培训Cisco 200-125 CCNA v3.0。 第19天。路由器入门</a></li>
<li><a href="../zh-CN463567/index.html">根据显示时间精确调整上下文出价[+模板]</a></li>
<li><a href="../zh-CN463569/index.html">培训Cisco 200-125 CCNA v3.0。 第20天。静态路由</a></li>
<li><a href="../zh-CN463571/index.html">培训Cisco 200-125 CCNA v3.0。 第21天。RIP远程矢量路由</a></li>
<li><a href="../zh-CN463573/index.html">首款基于Zen 2架构的数据中心芯片</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>