<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê≤ üíáüèø üèÇüèª Speedran Legend of Zelda en manipulant la m√©moire du jeu üë©üèΩ‚Äçüç≥ üö≥ üßîüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La premi√®re partie de Legend of Zelda est un classique immortel. Un joueur ordinaire a besoin de quelques jours pour le terminer, mais pour les coureu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Speedran Legend of Zelda en manipulant la m√©moire du jeu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398171/"><img src="https://habrastorage.org/files/701/c03/116/701c03116f934cefae40e022f041694b.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re partie de Legend of Zelda est un classique immortel. </font><font style="vertical-align: inherit;">Un joueur ordinaire a besoin de quelques jours pour le terminer, mais pour les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coureurs de vitesse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les plus exp√©riment√©s, </font><font style="vertical-align: inherit;">c'est une question d'une demi-heure. </font><font style="vertical-align: inherit;">Cependant, le bogue tr√®s d√©routant et complexe ouvert par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sockfolder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permet √† l'utilisateur d'ex√©cuter du code arbitraire directement √† partir du jeu afin de terminer le jeu en moins de trois minutes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En bref, cela se produit comme suit:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saisissez le code sur l'√©cran de saisie du nom.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous entrons dans le deuxi√®me donjon, prenons le sifflet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous passons au cimeti√®re, nous appelons dix fant√¥mes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous attendons les conditions n√©cessaires, mettons le jeu en pause lorsque les cr√©atures sont √† certains endroits.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faites une pause, appuyez sur A et B en m√™me temps, et c'est tout!</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est g√©nial. </font><font style="vertical-align: inherit;">Examinons maintenant de plus pr√®s ce qui se passe dans le jeu et comment cet incroyable bug Legend of Zelda est ex√©cut√©.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/files/e6c/f8f/4a2/e6cf8f4a2d224bf7aa42b38aa3eb5f35.jpg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment provoquer une erreur</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous entrons d'abord le code sur l'√©cran de saisie du nom. </font><font style="vertical-align: inherit;">Les noms de fichiers sont stock√©s en m√©moire et chaque caract√®re correspond √† un octet sp√©cifique en m√©moire. </font><font style="vertical-align: inherit;">Nous donnons des noms √©tranges aux fichiers, car en fait nous √©crivons les octets n√©cessaires en m√©moire, qui deviendront alors du code assembleur. </font><font style="vertical-align: inherit;">Il n'y a que deux limitations:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous pouvons travailler avec seulement trois fichiers, c'est-√†-dire que le programme ne peut contenir que 3 * 8 caract√®res = 24 octets;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous devons saisir les cinq premiers caract√®res de l'un des fichiers ZELDA si nous voulons commencer par la deuxi√®me qu√™te.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/d13/582/f86/d13582f8628f4c6791a8ee3e6a9df874.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons commencer par la deuxi√®me qu√™te pour une raison que j'expliquerai plus tard. Nous appelons le premier fichier ZELDA car ce nom est le mieux adapt√©. Commen√ßons maintenant le jeu. Avant d'arriver au cimeti√®re, notre comportement n'est pratiquement pas diff√©rent du jeu habituel. La principale chose que nous devons faire est d'essayer de ne pas mourir deux fois. Par "mourir", on entend √† la fois la mort elle-m√™me et le passage fr√©quent au menu. Vous comprendrez pourquoi il en est ainsi, √† partir d'autres explications.</font></font><br>
<br>
<img src="https://habrastorage.org/files/3ff/108/e9c/3ff108e9cef14482b369868acd4dd11b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir siffl√©, nous allons sur cet √©cran de cimeti√®re pour terminer le bug. L'erreur est d√©clench√©e ici, car lors de l'utilisation du sifflet, un objet est cr√©√© √† partir de la pierre tombale, ce qui ouvre un escalier cach√©. Cela est n√©cessaire pour l'apparition d'un bug. Et tout cela est d√ª aux limitations des sprites. Dans Legend of Zelda, l'√©cran peut contenir jusqu'√† 11 sprites √† la fois. Si vous essayez de cr√©er un 12e sprite, le jeu ne vous permettra pas de le faire. Pour reproduire l'erreur, nous cassons la limite de d√©bordement et cr√©ons le 12e sprite. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ae4/55b/976/ae455b97608e4b89b6c3aa31230bc126.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous cr√©ez l'objet sifflet, le jeu oublie de v√©rifier combien de sprites √©taient √† l'√©cran auparavant. Par cons√©quent, lorsque nous avons cr√©√© le nombre maximal de sprites, le sprite est cr√©√© en dehors de la table de sprites, la m√©moire est remplac√©e et un √©tat inattendu se produit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe un petit fragment en m√©moire √† partir du d√©calage 350 qui stocke les identifiants de onze sprites. Un sprite est cr√©√© lorsque l'√©cran se charge, √† partir d'une position avec le plus petit d√©calage possible du sprite. Cela signifie que les sprites recherchent une position avec un d√©calage minimum, √† partir du d√©calage 350 et au-del√†. Lorsqu'un sprite doit √™tre cr√©√©, le jeu recherche une valeur vide dans la table des sprites pour le remplacer par l'identifiant du sprite, le cr√©ant ainsi. Contrairement √† la cr√©ation de sprites lors du chargement de l'√©cran, lorsque vous essayez de cr√©er un sprite, le jeu recherche une position avec un d√©calage maximum pour le sprite. Cela signifie qu'elle v√©rifie d'abord s'il est possible de cr√©er un sprite √† la position 10 (0A). Sinon, elle v√©rifie la position 9 (09), c'est-√†-dire d√©calage 359, et ainsi de suite. Si toutes les positions de sprite sont occup√©es, le jeu ¬´se rend¬ª et ne cr√©e pas de sprite.</font></font><br>
<br>
<img src="https://habrastorage.org/files/2bd/a89/ca6/2bda89ca604647a7ad65f130afd841f7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, les d√©veloppeurs ont oubli√© d'effectuer des v√©rifications de bordures afin que le jeu puisse ¬´abandonner¬ª en essayant de cr√©er un objet ¬´sifflet¬ª, et le jeu continue de rechercher des octets avec la valeur 00 √† un endroit en dehors de la table des sprites afin d'y √©crire l'identifiant de l'objet. Mais o√π cherche-t-elle d'abord ce sens? En fait, cette table fait partie d'un tableau plus large qui stocke des informations sur les sprites. Lorsque le sifflet trouve un endroit √† cr√©er au d√©but du tableau, il commence √† rechercher des positions avec la valeur 00 √† la fin du tableau.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur l'√©cran du cimeti√®re, ce fragment de la matrice contient des informations sur l'√©tat actuel des actions fant√¥mes. Parlons maintenant des √©tats d‚Äôaction des fant√¥mes. Les fant√¥mes cr√©√©s dans le cimeti√®re se d√©placent au hasard. En effet, leurs actions sont contr√¥l√©es par un comportement d√©termin√© par leur √©tat d'action. Ces √©tats d'action peuvent avoir n'importe quelle valeur de 0 (00) √† 5 (05), selon les actions du fant√¥me. Ils sont √©crits √† la fin d'un tableau contenant des informations sur les sprites.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, tous ces √©tats d'action correspondent √† une position dans la table des fonctions qui d√©finit les actions des fant√¥mes. √âtant donn√© que les √©tats ne peuvent avoir que 6 valeurs, la table a la taille n√©cessaire pour stocker les six actions. Ici, l'√©tat d'action 0 (00) correspond √† l'acc√©l√©ration du fant√¥me. Ceci est important car lorsque le sifflet commence √† chercher un endroit pour cr√©er son sprite, il remplira la premi√®re position trouv√©e en m√©moire avec la valeur 00. L'acc√©l√©ration fant√¥me correspond √† l'action 0, enregistr√©e dans le code avec la valeur 00, donc le jeu la consid√®re comme une position vide et lui √©crit l'identifiant. sifflet 5E.</font></font><br>
<br>
<img src="https://habrastorage.org/files/a66/b0b/338/a66b0b33886142cdb68b035318a742d8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, le jeu essaie d'ex√©cuter le code √† la position 5E de la table, mais comme la table ne contient que des valeurs allant jusqu'√† 05, le jeu ex√©cute les donn√©es ¬´ordures¬ª sous forme de code bien au-del√† de la table. </font><font style="vertical-align: inherit;">Si vous faites tout correctement, les donn√©es ¬´ind√©sirables¬ª nous m√®neront au code que nous avons enregistr√© avec les symboles de fichiers, le jeu ira √† Zelda et nous passerons par le jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, pour que le bogue fonctionne, nous devons endommager le troisi√®me √©tat de l'action dans le tableau. </font><font style="vertical-align: inherit;">Ainsi, le troisi√®me fant√¥me cr√©√© doit √™tre acc√©l√©r√©, et tous les fant√¥mes suivants doivent effectuer d'autres actions (dont le code n'est pas √©gal √† 00). </font><font style="vertical-align: inherit;">Ce sont des informations importantes. </font><font style="vertical-align: inherit;">Voyons maintenant ce qui se passe lorsque nous ex√©cutons un bogue.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ex√©cution de bogues</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous avons tout fait correctement, le jeu essaie d'ex√©cuter les donn√©es en position 5E de la table. Il commence √† √™tre lu sous forme de donn√©es de code commen√ßant √† l'offset 602. Les informations associ√©es √† l'√©tat de l'action Link sont stock√©es en m√©moire √† l'offset 602 et 603, afin que nous puissions les contr√¥ler. Lorsque Link est debout, les valeurs des d√©calages 602 et 603 seront 00. Mais lorsque nous appuyez sur le bouton B pour utiliser le sifflet, la valeur √† 602 sera 10 et lorsque nous appuyez sur A pour utiliser l'√©p√©e, la valeur √† 603 sera 01.</font></font><br>
<br>
<img src="https://habrastorage.org/files/70f/db8/afa/70fdb8afafeb4a0da50b16d5b18ea403.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, lorsque nous appuyons simultan√©ment sur ces deux boutons, les donn√©es voisines seront 10 01. Le jeu interpr√®te ces donn√©es comme une commande de branche BPL pour passer √† l'offset 605 et ex√©cuter les donn√©es qu'il contient sous forme de code. Les valeurs de 605 et 606 seront 00 si notre sant√© n'est pas trop faible et 40 si notre sant√© est faible. Pour passer rapidement le jeu, ces valeurs doivent √™tre √©gales √† 00, vous devez donc essayer de maintenir la sant√© jusqu'√† la fin du bug. La valeur 00 correspond √† l'instruction BRK (break). Puisqu'il ne fait rien ici, nous avons besoin que les valeurs soient 00 et que le jeu continue √† ex√©cuter le code.</font></font><br>
<br>
<img src="https://habrastorage.org/files/6da/549/8cb/6da5498cbfb1481aa243bf1dfa7bfc88.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis que nous avons utilis√© l'√©p√©e, le jeu continuera √† ex√©cuter des instructions dans le prochain octet impair. L'instruction suivante, qui n'est pas BRK, est √† l'offset 08, mais puisque nous avons utilis√© l'√©p√©e, le jeu la saute et ex√©cute le code √† 09 et 0A. La valeur dans l'octet 09 est toujours 10, ce qui signifie que nous avons √† nouveau affaire √† l'instruction de branche BPL. Les octets au d√©calage 623 (62E) concernent la musique. Elle essaie d'augmenter dans le processus de lecture de musique, mais saute parfois √† des valeurs plus basses.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie que pour terminer le bug, nous devons l'appliquer √† un morceau de musique sp√©cifique. Si la valeur est petite, nous avons une chance de sauter en m√©moire dans une zone dont les valeurs changent consid√©rablement. Ils changent de mani√®re si al√©atoire que nous ne pouvons pas les contr√¥ler en temps r√©el pour recevoir des instructions que le jeu doit suivre. Par cons√©quent, la transition ici risque d'entra√Æner un blocage du jeu.</font></font><br>
<br>
<img src="https://habrastorage.org/files/d2c/07d/e94/d2c07de947d649ef8804edf104e81ef1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, apr√®s ces donn√©es chaotiques, il y a une zone de donn√©es s√ªres. </font><font style="vertical-align: inherit;">Par cons√©quent, nous allons essayer de sauter l√†-bas. </font><font style="vertical-align: inherit;">Nous avons besoin de plus de donn√©es dans le 60A pour ignorer avec pr√©cision la zone dangereuse et acc√©der aux donn√©es permanentes et s√ªres. </font><font style="vertical-align: inherit;">Si nous y sommes all√©s, alors tout est en ordre. </font><font style="vertical-align: inherit;">Mais au d√©calage 630, il y a un compteur pour les morts de Link. </font><font style="vertical-align: inherit;">Si Link est mort deux fois, cette valeur sera 02, ce qui forme une instruction et arr√™te la partie. </font><font style="vertical-align: inherit;">C'est pourquoi il est important de ne pas mourir deux fois. </font><font style="vertical-align: inherit;">Par cons√©quent, nous passons au d√©calage 638, qui est le d√©but du tableau stockant les noms de fichiers. </font><font style="vertical-align: inherit;">Si nous arrivons ici, le jeu ex√©cutera le code que nous avons entr√© sur l'√©cran du fichier. </font><font style="vertical-align: inherit;">Et ici commence ...</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les noms de fichiers sont stock√©s en m√©moire dans l'ordre. Cela signifie que les premiers octets que nous ex√©cutons sont un fichier appel√© ZELDA. Heureusement, le code ex√©cut√© par ces octets est s√ªr, afin que nous puissions passer au reste. Puisque le nom ZELDA n'est pas important, regardons ce que fait le reste du code. Tout d'abord, nous ex√©cutons trois commandes PLP (pull from stack, pull from stack). Lorsque nous appelons une fonction, elle √©crit deux valeurs dans la pile. Ces valeurs correspondent √† l'endroit o√π vous vous trouviez dans le code lorsque vous avez ex√©cut√© la fonction. Ainsi, le jeu peut savoir o√π y retourner apr√®s avoir ex√©cut√© la fonction.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commen√ßons par extraire trois valeurs de la pile, puis nous effectuons la fonction de retour. Nous le faisons afin de retourner √† l'endroit o√π nous nous trouvions avant l'ex√©cution du bogue. Sinon, le jeu ne terminera pas l'ex√©cution des donn√©es sous forme de code et se figera en cons√©quence. Mais avant d'arriver au code qui endommage la m√©moire et termine le jeu, nous devons parler de quelques valeurs suppl√©mentaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les valeurs au d√©calage de m√©moire 10 correspondent au nombre de monde dans lequel nous sommes. Si nous sommes dans le monde en surface, la valeur est 00. Pour le premier donjon, la valeur est 01, pour le second - 02, et ainsi de suite. Puisque Zelda est dans le neuvi√®me donjon, nous avons besoin que cette valeur soit 09. Cependant, nous effectuons un bogue dans le monde en surface et la valeur est 00. Nous devons donc trouver un moyen de l'assimiler √† 09. La valeur √† l'offset 11 correspond √† certaines donn√©es sur l'√©tat du jeu. Lorsque le jeu se charge, la valeur est 00, lorsque le jeu ne se charge pas - 01. Nous devons charger le neuvi√®me donjon, cette valeur doit donc √™tre 00.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La valeur √† l'offset 12 correspond √† une partie de l'√©tat. Lorsque l'√©cran se charge, la valeur est g√©n√©ralement 02, lorsqu'il ne se charge pas - g√©n√©ralement 05. Puisque nous voulons charger le donjon, cette valeur doit √™tre 02. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La derni√®re valeur que nous voulons modifier correspond √† la qu√™te dans laquelle nous nous trouvons. La valeur √† l'offset 62D correspond √† la premi√®re ou √† la deuxi√®me qu√™te, et a la valeur 00 ou 01. Nous sommes partis de la deuxi√®me qu√™te, mais nous voulons terminer dans la premi√®re qu√™te, car c'est ainsi que nous confondons le jeu. Par cons√©quent, nous devons changer cette valeur √† 00. Cela nous mettra dans un √©trange hybride des premi√®re et deuxi√®me qu√™tes. Nous avons besoin de cet √©tat hybride pour ex√©cuter du code dans un but sp√©cifique. Nous l'examinerons lorsque nous expliquerons ce que fait le code.</font></font><br>
<br>
<img src="https://habrastorage.org/files/c88/682/03d/c8868203deac4c1e9d23b52a2e4fa6f2.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, nous nous fixons des objectifs, passons au code. Premi√®rement, nous avons la fonction LSR (d√©calage logique vers la droite) pour le d√©calage 11. Cette fonction divise la valeur en deux et √©crit le reste dans le report. 11 est un endroit en m√©moire qui stocke la valeur correspondant √† l'√©tat du jeu, et avant cette instruction sa valeur est 01. Lorsque nous divisons par deux, nous obtenons 00 avec le reste 01, car la division est enti√®re. Au d√©calage 11, la valeur 00 est √©crite, et dans le transfert, 01.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons la fonction ROX pour d√©caler 0D (tourner √† gauche, √† gauche) avec l'index X. Puisque nous avons √©cras√© l'√©tat d'action du troisi√®me fant√¥me que nous avons cr√©√©, X est √©gal √† trois. 0D + X est 0D + 03, ce qui est hexad√©cimal 10. Par cons√©quent, cette fonction tourne √† gauche au d√©calage 10. Cette fonction multiplie la valeur au d√©calage 10 par 2 et ajoute √† la c√©sure. La valeur commence √† 0. Z√©ro fois 2 est √©gal √† 0 et 0 + 1 est √©gal √† 1, donc la valeur est √©crite sur le d√©calage 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, l'op√©ration ROX est r√©p√©t√©e √† nouveau pour compenser 0D avec l'index X. La valeur de X n'a ‚Äã‚Äãpas chang√©, elle est toujours de trois, par cons√©quent, c'est un autre virage √† gauche au d√©calage 10. 1 * 2 = 2, et puisque nous avons d√©j√† utilis√© le transfert, sa valeur est 0. 2 + 0 = 2, donc la valeur 2 est √©crite dans le d√©calage 2.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons la troisi√®me op√©ration ROX pour le d√©calage 0D. 2 * 2 = 4 et 4 + 0 = 4, donc la valeur 4 est √©crite au d√©calage 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'instruction suivante est LSR au d√©calage 12. Nous commen√ßons par la valeur 5, donc la division par deux nous donne le reste 1. 2 est √©crit au d√©calage 12 , et 1 - dans le transfert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis le dernier ROX tourne √† gauche √† l'offset 10. 4 * 2 = 8. La valeur de transfert est 1, nous l'ajoutons au produit, obtenant 9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La derni√®re instruction avant de revenir est un d√©calage logique √† droite √† l'offset 62D. La valeur ici est 1, car nous sommes dans la deuxi√®me qu√™te. Et puisque nous avons divis√© par 2, la valeur sera √©gale √† 0. Nous sommes donc entr√©s dans le mode de qu√™te hybride.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous effectuons la fonction de retour et le jeu met √† jour les valeurs de son √©tat avec les valeurs enregistr√©es dans notre code. </font><font style="vertical-align: inherit;">Ceci termine le bug et nous entrons dans la chambre de Zelda. </font><font style="vertical-align: inherit;">Nous y arrivons car la qu√™te hybride confond le jeu. </font><font style="vertical-align: inherit;">Elle ne sait pas exactement o√π mettre Link. </font><font style="vertical-align: inherit;">Et donc on se retrouve dans la chambre de Zelda, ayant ainsi pass√© le match. </font></font><br>
<br>
<img src="https://habrastorage.org/files/700/fc3/4fb/700fc34fbe9e4701ad6e918329b55e52.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'esp√®re que cela vous aide √† comprendre ce qui se passe dans le jeu Legend of Zelda lors de l'ex√©cution de code arbitraire et de l'ex√©cution d'un bug de jeu rapide.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr398171/">https://habr.com/ru/post/fr398171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr398161/index.html">Mozilla et Apple interdiront les autorit√©s de certification WoSign et StartCom</a></li>
<li><a href="../fr398163/index.html">Casque Pimax P1 4K VR - plus qu'une simple image</a></li>
<li><a href="../fr398165/index.html">Guide pour cr√©er des tentacules m√©caniques √† la maison: Partie 1</a></li>
<li><a href="../fr398167/index.html">L'impression 3D comme outil de prototypage et de mod√©lisation</a></li>
<li><a href="../fr398169/index.html">Les physiciens ont cr√©√© le premier "cristal du temps" au monde</a></li>
<li><a href="../fr398173/index.html">SHENZHEN I / O - un nouveau simulateur de programmation de microcontr√¥leur</a></li>
<li><a href="../fr398175/index.html">75 000 contrats √† terme</a></li>
<li><a href="../fr398177/index.html">Refaire un microphone √©conomique pour un usage professionnel</a></li>
<li><a href="../fr398181/index.html">Adafruit et la Russie - pourquoi acheter sans interm√©diaire est impossible</a></li>
<li><a href="../fr398183/index.html">Boeing est s√ªr qu'il d√©passera Ilon Mask sur la route de Mars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>