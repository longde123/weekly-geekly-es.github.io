<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ® ğŸ˜‹ ğŸ æ–¯ç»´å°”ç‰¹ï¼ˆSvelteï¼‰ä¸€ç”Ÿ ğŸ¤½ ğŸ’­ ğŸ“¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‹‰è¿ªæ–¯æ‹‰å¤«Â·ç”˜è¾¾å¸•æ–¯ï¼ˆRadislav Gandapasï¼‰æ‹¥æœ‰ä¸€æœ¬å‡ºè‰²çš„è‘—ä½œã€Š å®Œå…¨J å®ƒè®¨è®ºäº†å¦‚ä½•è¯„ä¼°æ‚¨çš„ç”Ÿæ´»æ–¹å‘ï¼Œä»¥åŠå¦‚ä½•åˆ¶å®šå‘å±•è®¡åˆ’ã€‚ 


 æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥åœ¨æˆ‘çš„æ™ºèƒ½æ‰‹æœºä¸­ä½¿ç”¨çš„å·¥å…·ï¼Œå¹¶å¸®åŠ©ç»„æˆé›·è¾¾ã€‚ 



  1.å‡†å¤‡ 


 æ•™ç¨‹å’Œæ¼”ç¤ºçš„æºä»£ç å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ã€‚ 


 è¿™ä¸ªé¡¹ç›®å¾ˆå°ï¼Œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ–¯ç»´å°”ç‰¹ï¼ˆSvelteï¼‰ä¸€ç”Ÿ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458974/"><p> æ‹‰è¿ªæ–¯æ‹‰å¤«Â·ç”˜è¾¾å¸•æ–¯ï¼ˆRadislav Gandapasï¼‰æ‹¥æœ‰ä¸€æœ¬å‡ºè‰²çš„è‘—ä½œã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®Œå…¨J</a> å®ƒè®¨è®ºäº†å¦‚ä½•è¯„ä¼°æ‚¨çš„ç”Ÿæ´»æ–¹å‘ï¼Œä»¥åŠå¦‚ä½•åˆ¶å®šå‘å±•è®¡åˆ’ã€‚ </p><br><p> æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥åœ¨æˆ‘çš„æ™ºèƒ½æ‰‹æœºä¸­ä½¿ç”¨çš„å·¥å…·ï¼Œå¹¶å¸®åŠ©ç»„æˆé›·è¾¾ã€‚ </p><br><p><img src="https://habrastorage.org/webt/bl/aw/i9/blawi9ngwx-qfqecqvpodfr23ky.gif" alt="å›¾ç‰‡"></p><a name="habracut"></a><br>
<h2 id="1-podgotovka">  1.å‡†å¤‡ </h2><br><p> æ•™ç¨‹å’Œæ¼”ç¤ºçš„æºä»£ç å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>æŸ¥çœ‹ã€‚ </p><br><p> è¿™ä¸ªé¡¹ç›®å¾ˆå°ï¼Œå› æ­¤æˆ‘ä»¬å°†ç«‹å³ä½¿ç”¨åœ¨çº¿Svelteç¼–è¾‘å™¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">REPLè¿›è¡Œ</a>ç¼–å†™ã€‚ å¦‚æœæ‚¨å–œæ¬¢æœ¬åœ°å¼€å‘ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">webpack</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ±‡æ€»</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Svelte</a>æ¨¡æ¿ã€‚ </p><br><p> æˆ‘å¯ä»¥åœ¨çº¿æ¨è<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">codesandbox</a>å·¥å…·ï¼Œä»¥ä»£æ›¿æœ¬åœ°å¼€å‘ã€‚ </p><br><p> å¦‚æœæ‚¨ä½¿ç”¨VScodeï¼Œåˆ™å»ºè®®å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">svelte-vscodeæ’ä»¶</a> </p><br><p> å› æ­¤ï¼Œæˆ‘ä»¬æ‰“å¼€<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">REPL</a> ï¼Œæˆ‘ä»¬å¼€å§‹ </p><br><h2 id="2-karkas">  2.æ¡†æ¶ </h2><br><p> ç°åœ¨æˆ‘ä»¬æœ‰äº†<strong>App.svelte</strong>æ–‡ä»¶ï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚  Svelteç»„ä»¶åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ·å¼</a>æ ‡ç­¾ä¸­è¿›è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ·å¼è®¾ç½®</a> ï¼Œå°±åƒåœ¨å¸¸è§„htmlä¸­ä¸€æ ·ã€‚ è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥åœ¨ç»„ä»¶çº§åˆ«å®ç°æ ·å¼éš”ç¦»ã€‚ å¦‚æœéœ€è¦æ·»åŠ å¯åœ¨å¯¹è±¡â€œå¤–éƒ¨â€è®¿é—®çš„å…¨å±€æ ·å¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨æŒ‡ä»¤<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>ï¼šglobalï¼ˆï¼‰</strong></a> ã€‚ æ·»åŠ æ ·å¼å¹¶ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªå®¹å™¨ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ç˜¦èº«</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(body)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overscroll-behavior</span></span></span><span class="css">: none; </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*  pull to refresh*/</span></span></span><span class="css"> </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">user-select</span></span></span><span class="css">: none; </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*      */</span></span></span><span class="css"> </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-family</span></span></span><span class="css">: -apple-system, BlinkMacSystemFont, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Segoe UI"</span></span></span><span class="css">, Roboto, Oxygen, Ubuntu, Cantarell, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Open Sans"</span></span></span><span class="css">, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Helvetica Neue"</span></span></span><span class="css">, sans-serif; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">rgb</span></span></span><span class="css">(35, 41, 37); } </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(html)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.container</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">flex-grow</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">flex-direction</span></span></span><span class="css">: column; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">justify-content</span></span></span><span class="css">: center; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> åˆ›å»º<strong>Radar.svelte</strong>ç»„ä»¶ã€‚ è¿™å°†æ˜¯æˆ‘ä»¬å°†åœ¨å…¶ä¸­ç»˜åˆ¶è½®å­çš„SVGå…ƒç´ ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">é›·è¾¾</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-115 -110 230 220"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Svelteç»„ä»¶ä¸­çš„Javascriptä»£ç ä½äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>script</strong></a>æ ‡è®°ä¸­ã€‚ æˆ‘ä»¬å°†<strong>Radar.svelte</strong>å¯¼å…¥<strong>App.svelte</strong>å¹¶è¿›è¡Œç»˜åˆ¶ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ç˜¦èº«</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Radar </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Radar.svelte'</span></span></span><span class="javascript"> </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">/*    */</span></span></span><span class="javascript"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(body)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overscroll-behavior</span></span></span><span class="css">: none; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">user-select</span></span></span><span class="css">: none; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-family</span></span></span><span class="css">: -apple-system, BlinkMacSystemFont, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Segoe UI"</span></span></span><span class="css">, Roboto, Oxygen, Ubuntu, Cantarell, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Open Sans"</span></span></span><span class="css">, </span><span class="hljs-string"><span class="css"><span class="hljs-string">"Helvetica Neue"</span></span></span><span class="css">, sans-serif; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">rgb</span></span></span><span class="css">(35, 41, 37); } </span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:global(html)</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.container</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">flex-grow</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">flex-direction</span></span></span><span class="css">: column; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">justify-content</span></span></span><span class="css">: center; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Radar</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   Radar --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> é›·è¾¾æœ¬èº«å°†åŒ…æ‹¬ä¸ç”Ÿæ´»æ–¹é¢ç›¸å¯¹åº”çš„æ‰‡åŒºã€‚ æ¯ä¸ªéƒ¨é—¨éƒ½æœ‰è‡ªå·±çš„ç´¢å¼•ã€‚ </p><br><p><img src="https://habrastorage.org/webt/ga/x2/kx/gax2kxliv91cya0dxrazy6zpftq.png" alt="å›¾ç‰‡"></p><br><p> æ¯ä¸ªæ‰‡åŒºç”±ä¸€ä¸ªç½‘æ ¼ç»„æˆï¼Œè€Œç½‘æ ¼åˆæ˜¯ä¸€ä¸ªè¾ƒå°çš„æ‰‡åŒºã€‚ </p><br><p><img src="https://habrastorage.org/webt/hc/mc/5f/hcmc5frhglrbwbgwjtv6-xil4n8.png" alt="å›¾ç‰‡"></p><br><p> è¦ç»˜åˆ¶ä¸€ä¸ªæ‰‡å½¢ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸‰ä¸ªé¡¶ç‚¹çš„åæ ‡ã€‚ </p><br><p><img src="https://habrastorage.org/webt/kg/zw/nn/kgzwnnd7qbauzvayu_lgw_6kt74.png" alt="å›¾ç‰‡"></p><br><p> é¡¶ç‚¹Aå§‹ç»ˆå…·æœ‰åæ ‡[0ï¼Œ0]ï¼Œå› ä¸ºåŸç‚¹ä½äºé›·è¾¾çš„ä¸­å¿ƒã€‚ ä¸ºäº†æ‰¾åˆ°é¡¶ç‚¹Bå’ŒCï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…³äºå…­è§’å½¢ç½‘æ ¼<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„ä¼˜ç§€æ•™ç¨‹ä¸­</a>çš„å‡½æ•°ã€‚ åœ¨è¾“å…¥å¤„ï¼Œè¯¥å‡½æ•°æ¥æ”¶æ‰‡åŒºå¤§å°å’Œæ–¹å‘ï¼Œå¹¶è¿”å›åæ ‡ä¸º'xï¼Œy'çš„å­—ç¬¦ä¸²ã€‚ <br> åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<strong>getHexCorner.js</strong> ï¼Œåœ¨å…¶ä¸­æ”¾ç½®æˆ‘ä»¬çš„å‡½æ•°<strong>getHexCornerï¼ˆå¤§å°ï¼Œæ–¹å‘ï¼‰</strong> </p><br><div class="spoiler">  <b class="spoiler_title">getHexCorner.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHexCorner</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">size, direction</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> angleDeg = <span class="hljs-number"><span class="hljs-number">60</span></span> * direction - <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> angleRad = (<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">180</span></span>) * angleDeg; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${size * </span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.cos(angleRad)}</span></span></span><span class="hljs-string">,</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${size * </span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.sin(angleRad)}</span></span></span><span class="hljs-string">`</span></span>; }</code> </pre> </div></div><br><p> ç°åœ¨åˆ›å»ºæ‰‡åŒºç»„ä»¶<strong>Sector.svelte</strong> ï¼Œä»¥ç»˜åˆ¶ç½‘æ ¼ã€‚ æˆ‘ä»¬éœ€è¦10ä¸ªæ­¥éª¤çš„å‘¨æœŸã€‚ åœ¨ç»„ä»¶çš„ä¸»ä½“ä¸­ï¼Œsvelteæ— æ³•å®ç°forå¾ªç¯ï¼Œå› æ­¤æˆ‘åªæ˜¯åˆ¶ä½œäº†ä¸€ä¸ªç½‘æ ¼æ•°ç»„ï¼Œå°†åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>#each</strong></a>æŒ‡ä»¤ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>è¿›è¡Œè¿­ä»£</strong></a> ã€‚ å¦‚æœæ‚¨æœ‰ä»»ä½•æƒ³æ³•ä½¿å®ƒå˜å¾—æ›´ä¼˜é›…ï¼Œè¯·åœ¨è¯„è®ºä¸­å†™ä¸‹ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æ‰‡å½¢</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> getHexCorner </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./getHexCorner.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> direction = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> grid = [</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">9</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">8</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">7</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">6</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">5</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">4</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">3</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">polygon</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#293038</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">stroke</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#424a54</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> {#each grid as gridValue, i} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polygon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">`${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">)}, ${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag"> + </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">)}, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">`} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">strokeLinejoin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"miter-clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-dasharray</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.5"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {/each}</code> </pre> </div></div><br><p> åœ¨<strong>Radar.svelte</strong>ç»„ä»¶ä¸­å¯¼å…¥å¹¶ç»˜åˆ¶ä¸€ä¸ªæ‰‡åŒºã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">é›·è¾¾</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Sector </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Sector.svelte'</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-115 -110 230 220"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sector</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜¾ç¤º1ä¸ªæ‰‡åŒºã€‚ </p><br><p><img src="https://habrastorage.org/webt/ne/eb/kz/neebkzmbdlu7oyppro795dty6gi.png" alt="å›¾ç‰‡"></p><br><h2 id="3-hranenie-dannyh">  3.æ•°æ®å­˜å‚¨ </h2><br><p> è¦ç»˜åˆ¶æ•´ä¸ªé›·è¾¾ï¼Œæ‚¨éœ€è¦çŸ¥é“æ‰‡åŒºåˆ—è¡¨ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªçŠ¶æ€å­˜å‚¨ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªå®šä¹‰é—¨ï¼Œ</a>åœ¨å…¶ä¸­å®ç°æ›´æ–°çŠ¶æ€çš„é€»è¾‘ã€‚ é€šå¸¸ï¼Œè¿™æ˜¯é€šå¸¸çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Svelteå­˜å‚¨åº“</a> ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ã€‚ é€šè¿‡æä¾›ä¸€ç»„å¯ç”¨çš„æ“ä½œï¼Œå¯ä»¥ä¿æŠ¤å­˜å‚¨åº“å…äºæ›´æ”¹ã€‚ æˆ‘å–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºæ•°æ®ç»“æ„å’Œä½¿ç”¨å®ƒä»¬çš„é€»è¾‘éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ </p><br><p> åˆ›å»ºä¸€ä¸ª<strong>store.js</strong>æ–‡ä»¶ </p><br><p> æˆ‘ä»¬å°†éœ€è¦ä¸¤ä¸ªå­˜å‚¨ï¼š </p><br><ul><li>  <strong>é›·è¾¾</strong>å­˜å‚¨å½“å‰å€¼ </li><li>  <strong>activeSectorï¼Œ</strong>ç”¨äºåœ¨å‘ç”Ÿtouchmoveå’Œmousemoveäº‹ä»¶æ—¶å­˜å‚¨æ´»åŠ¨æ‰‡åŒºã€‚ </li></ul><br><div class="spoiler">  <b class="spoiler_title">store.js</b> <div class="spoiler_text"><pre> <code class="html hljs xml">import { writable } from "svelte/store"; const defaultStore = ["hobby", "friendship", "health", "job", "love", "rich"]; function Radar() { /*      */ const { subscribe, update } = writable(defaultStore.map(item=&gt;({name:item, value:0}))); /*         */ return { subscribe, set: (id, value) =&gt; update(store =&gt; store.map(item =&gt; (item.name === id ? { ...item, value } : item)) ) }; } export const radar = Radar(); export const activeSector = writable(null);</code> </pre> </div></div><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ›å»ºçš„storå¯¼å…¥<strong>Radar.svelte</strong>ç»„ä»¶ï¼Œå¹¶æ·»åŠ æ¸²æŸ“æ•´ä¸ªé›·è¾¾çš„é€»è¾‘ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">é›·è¾¾</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { radar } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./store.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Sector </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./Sector.svelte"</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-115 -110 230 220"</span></span></span><span class="hljs-tag">&gt;</span></span> {#each $radar as sector, direction (sector.name)} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sector</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...sector</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/each} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>#each</strong></a>æŒ‡ä»¤çš„ä¸€äº›ç»†èŠ‚ã€‚ æˆ‘ä»¬ä½¿ç”¨å˜é‡åç§°<strong>$ radar</strong> ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">$æŒ‡ä»¤</a>ä½¿Svelteç¼–è¯‘å™¨æ¸…æ¥šæˆ‘ä»¬çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå­˜å‚¨åº“ï¼Œå¹¶ä¸”å®ƒåˆ›å»ºæ›´æ”¹çš„é¢„è®¢ã€‚  <strong>æ–¹å‘</strong>å˜é‡å­˜å‚¨å½“å‰è¿­ä»£çš„ç´¢å¼•ï¼Œæ ¹æ®å®ƒæˆ‘ä»¬å°†è®¾ç½®æ‰‡åŒºçš„æ–¹å‘ã€‚ è¡¨è¾¾å¼<strong>ï¼ˆsector.nameï¼‰</strong>æŒ‡å‘svelteæŒ‡å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿­ä»£ä¸­å¯¹è±¡</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ID</a> ã€‚  Reactä¸­çš„æ¨¡æ‹Ÿé”®ã€‚ </p><br><p> ç°åœ¨æˆ‘ä»¬çš„ç½‘æ ¼çœ‹èµ·æ¥åƒè¿™æ · </p><br><p><img src="https://habrastorage.org/webt/ms/ch/ob/mschob_ztl00tnu88rtm3lyyles.png" alt="å›¾ç‰‡"></p><br><p> ä»éœ€è¦ä¸ºè¯¥éƒ¨é—¨åšå¥½å‡†å¤‡ä»¥å¤„ç†å•å‡»å’Œæ‹–åŠ¨äº‹ä»¶ã€‚ <br> ä¸mousemoveä¸åŒï¼Œtouchmoveäº‹ä»¶ä»…åœ¨å…¶å¯åŠ¨çš„å…ƒç´ ä¸Šè§¦å‘ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•æ•æ‰åˆ°æŒ‡é’ˆç§»åˆ°å¦ä¸€ä¸ªæ‰‡åŒºçš„é‚£ä¸€åˆ»ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å…ƒç´ çš„æ ‡è®°ä¸­ï¼Œæˆ‘ä»¬å°†å­˜å‚¨æ‰‡åŒºçš„å½“å‰åç§°åŠå…¶å€¼ã€‚ åœ¨äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å°†ç¡®å®šå…‰æ ‡æ‰€åœ¨çš„æ‰‡åŒºå¹¶æ›´æ”¹å…¶å€¼ã€‚ <br></p><p> è¯·æ³¨æ„ï¼ŒSvelteå¯ä»¥å°†<strong>{varName}</strong>æ„é€ æ‰©å±•ä¸º<strong>varName = {varName}</strong> ã€‚ è¿™ä½¿å¾—æ»šåŠ¨ç‰¹æ€§éå¸¸å®¹æ˜“ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æ‰‡å½¢</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> getHexCorner </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./getHexCorner.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> direction = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> name; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> value; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> grid = [</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">9</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">8</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">7</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">6</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">5</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">4</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">3</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">polygon</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#293038</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">stroke</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#424a54</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.rich</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#469573</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.hobby</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#7c3f7a</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.friendship</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#5c6bc0</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.health</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e5b744</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.job</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e16838</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.love</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e23f45</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> {#each grid as gridValue, i} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polygon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">`${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">)}, ${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag"> + </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">)}, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">`} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">strokeLinejoin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"miter-clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-dasharray</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{value</span></span></span><span class="hljs-tag"> &gt;</span></span>= gridValue ? name : ''} {name} value={gridValue} /&gt; /&gt; {/each}</code> </pre> </div></div><br><p> å¦‚æœæˆ‘ä»¬åœ¨å•†åº—ï¼ˆstore.jsï¼‰ä¸­æ·»åŠ éé›¶å€¼ï¼Œåˆ™ç»“æœåº”ä¸ºï¼š <br><img src="https://habrastorage.org/webt/kk/tn/_o/kktn_o68cgbftxtsqnfz7w716du.png"></p><br><h2 id="4-sobytiya">  4.æ´»åŠ¨ </h2><br><p> ç°åœ¨æ˜¯æ—¶å€™å……å®æˆ‘ä»¬çš„é›·è¾¾ï¼Œåˆ›å»ºä¸€ä¸ªåœ¨è¾“å…¥ç«¯å¸¦æœ‰èŠ‚ç‚¹çš„å¤„ç†ç¨‹åºï¼Œå¹¶åœ¨å…¶å†…éƒ¨å¤„ç†è§¦æ‘¸å’Œé¼ æ ‡äº‹ä»¶çš„æ—¶å€™äº†ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">handleRadar.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { radar, activeSector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./store.js"</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*  get            */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { get } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"svelte/store"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleRadar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getRadarElementAtPoint = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*   :    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> event = e.touches ? e.touches[<span class="hljs-number"><span class="hljs-number">0</span></span>] : e; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.elementFromPoint(event.pageX, event.pageY); <span class="hljs-comment"><span class="hljs-comment">/*       html  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> score = element.getAttribute(<span class="hljs-string"><span class="hljs-string">"value"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = element.getAttribute(<span class="hljs-string"><span class="hljs-string">"name"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { id, score, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: event.type }; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> start = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { id } = getRadarElementAtPoint(e); <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> activeSector.set(id); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> end = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> activeSector.set(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> move = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*   requestAnimationFrame       */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestAnimationFrame(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { id, score, type } = getRadarElementAtPoint(e); <span class="hljs-comment"><span class="hljs-comment">/* ,      , ..    ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!id || (id !== get(activeSector) &amp;&amp; type !== <span class="hljs-string"><span class="hljs-string">"click"</span></span>) || !score) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> radar.set(id, score); }); }; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> node.addEventListener(<span class="hljs-string"><span class="hljs-string">"mousedown"</span></span>, start); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"touchstart"</span></span>, start); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"mouseup"</span></span>, end); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"touchend"</span></span>, end); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"mousemove"</span></span>, move); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"touchmove"</span></span>, move); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"touch"</span></span>, move); node.addEventListener(<span class="hljs-string"><span class="hljs-string">"click"</span></span>, move); <span class="hljs-comment"><span class="hljs-comment">/*     destroy,          DOM */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { destroy() { node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"mousedown"</span></span>, start); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"touchstart"</span></span>, start); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"mouseup"</span></span>, end); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"touchend"</span></span>, end); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"mousemove"</span></span>, move); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"touchmove"</span></span>, move); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"touch"</span></span>, move); node.removeEventListener(<span class="hljs-string"><span class="hljs-string">"click"</span></span>, move); } }; }</code> </pre> </div></div><br><p> ç°åœ¨ï¼Œåªéœ€é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">use</a>æŒ‡ä»¤å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°svgé›·è¾¾å…ƒç´ ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼š</a> </p><br><div class="spoiler">  <b class="spoiler_title">é›·è¾¾</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { radar } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./store.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Sector </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./Sector.svelte"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> handleRadar </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./handleRadar.js"</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-115 -110 230 220"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">use:handleRadar</span></span></span><span class="hljs-tag">&gt;</span></span> {#each $radar as sector, direction (sector.name)} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sector</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...sector</span></span></span><span class="hljs-tag">} {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/each} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> é›·è¾¾ç°åœ¨å“åº”å•å‡»å’Œæ‹–åŠ¨ã€‚ <br><img src="https://habrastorage.org/webt/1-/vp/kv/1-vpkvqnfolcdalsviozvy0cn9i.gif"></p><br><h2 id="6-finalnye-shtrihi">  6.æœ€åçš„æ¶¦è‰² </h2><br><p> æ·»åŠ æ‰‡åŒºæ ‡é¢˜å’Œæè¿° </p><br><div class="spoiler">  <b class="spoiler_title">æ‰‡å½¢</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> getHexCorner </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"./getHexCorner.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> name; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> value; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> direction; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> grid = [</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">10</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">9</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">8</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">7</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">6</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">5</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">4</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">3</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> flip = direction === </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript"> || direction === </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> radarTranslation = { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">hobby</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">friendship</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">health</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">job</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">love</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">rich</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript"> }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">polygon</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#293038</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">stroke</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#424a54</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">text</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">8px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: white; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.value</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">: bold; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">12px</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.rich</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#469573</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.hobby</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#7c3f7a</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.friendship</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#5c6bc0</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.health</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e5b744</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.job</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e16838</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.love</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">fill</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#e23f45</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> {#each grid as gridValue, i} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polygon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">`${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">)}, ${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gridValue</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag"> + </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">)}, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">`} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">strokeLinejoin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"miter-clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-dasharray</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{value</span></span></span><span class="hljs-tag"> &gt;</span></span>= gridValue ? name : ''} {name} value={gridValue} /&gt; {/each} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">transform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">`</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">translate</span></span></span><span class="hljs-tag">(${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">getHexCorner</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">105</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">flip</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag"> + </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag">)}) </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rotate</span></span></span><span class="hljs-tag">(${</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">60</span></span></span><span class="hljs-tag"> + (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">flip</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-90</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">90</span></span></span><span class="hljs-tag">)})`}&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{flip</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">5</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text-anchor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"middle"</span></span></span><span class="hljs-tag">&gt;</span></span> {radarTranslation[name]} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{flip</span></span></span><span class="hljs-tag"> ? </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">18</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-10</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text-anchor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"middle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag">&gt;</span></span> {value} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p> é›·è¾¾åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ã€‚ </p><br><p><img src="https://habrastorage.org/webt/47/e-/rv/47e-rvraqscplz3oucfyxtmwvcg.png" alt="å›¾ç‰‡"></p><br><h2 id="5-bonus">  5.å¥–é‡‘ </h2><br><p> æˆ‘ç¨å¾®æ‰©å±•äº†é›·è¾¾åŠŸèƒ½ï¼Œåœ¨localStorageä¸­æ·»åŠ äº†æ•°æ®å­˜å‚¨å¹¶åˆ¶å®šäº†è¡ŒåŠ¨è®¡åˆ’ã€‚ æ‚¨å¯ä»¥å°è¯•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¿å‘½æ£€æŸ¥åº”ç”¨ç¨‹åº</a> ï¼Œæºä»£ç å¯åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gitlab</a>ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è·å¾—</a> ã€‚ </p><br><p><img src="https://habrastorage.org/webt/mi/pq/d6/mipqd6kwnnzflsvo3d1txviisro.png"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458974/">https://habr.com/ru/post/zh-CN458974/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458962/index.html">å°†å›¾åƒè½¬æ¢ä¸ºå£°éŸ³-æ‚¨ä¼šå¬åˆ°ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN458964/index.html">TestMaceã€‚ å¿«é€Ÿä¸Šæ‰‹</a></li>
<li><a href="../zh-CN458966/index.html">ç§‘å­¦å®¶å’ŒæŠ€æœ¯å…¬å¸è´Ÿè´£äººè®¤ä¸ºå°†å·¥ä¸šä¼ä¸šå‘å°„åˆ°å¤ªç©ºæ˜¯ç°å®</a></li>
<li><a href="../zh-CN458970/index.html">ä½¿ç”¨UIViewPropertyAnimatoråˆ›å»ºè‡ªå®šä¹‰åŠ¨ç”»</a></li>
<li><a href="../zh-CN458972/index.html">æœ¬å‘¨æ–°é—»ï¼šYandexå’Œè¥¿æ–¹æƒ…æŠ¥æœºæ„ï¼ŒFASæ‰“å‡»åœ¨çº¿èµŒåœºï¼Œäº¤é€šéƒ¨ç›‘ç®¡BlaBlaCar</a></li>
<li><a href="../zh-CN458982/index.html">Nginxé£Ÿè°±ï¼šä»HTMLå’ŒURLè½¬æ¢ä¸ºPDFå’ŒPS</a></li>
<li><a href="../zh-CN458984/index.html">å¦‚ä½•åˆ›å»ºç¬¬ä¸€ä¸ªäº¤æ˜“æ‰€äº¤æ˜“åº”ç”¨ç¨‹åºï¼š3ä¸ªåˆå§‹æ­¥éª¤</a></li>
<li><a href="../zh-CN458986/index.html">PostgreSQLé£Ÿè°±ï¼šä»HTMLå’ŒURLè½¬æ¢ä¸ºPDFå’ŒPS</a></li>
<li><a href="../zh-CN458988/index.html">çº¹ç†ï¼Œæˆ–æˆä¸ºSurface Artistæ‰€éœ€è¦äº†è§£çš„çŸ¥è¯†ã€‚ ç¬¬4éƒ¨åˆ†ã€‚æ¨¡å‹ï¼Œæ³•çº¿å’Œæ‰«æ</a></li>
<li><a href="../zh-CN458990/index.html">ä¸å†çƒ­è¡·äºä»£ç ä¸­çš„æ³¨é‡Š</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>