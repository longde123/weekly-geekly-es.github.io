<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßùüèø üôéüèø üà¥ Syst√®me de fichiers Apple (APFS) ü•õ üñ®Ô∏è üìå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inodes 64 bits, transactions atomiques, horodatages en nanosecondes, clonage d'annuaire, cryptage int√©gr√©
 Lors de la pr√©sentation d' hier √† la WWDC 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Syst√®me de fichiers Apple (APFS)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395253/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inodes 64 bits, transactions atomiques, horodatages en nanosecondes, clonage d'annuaire, cryptage int√©gr√©</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√©sentation d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hier √† la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">WWDC 2016</font></a><font style="vertical-align: inherit;"> , Apple a pr√©sent√© de nouvelles versions de macOS (Sierra) 10.12, iOS 10, tvOS 10, watchOS 3, une application Swift Playgrounds pour l'enseignement de la programmation pour enfants et de nouveaux emojis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne semble rien d'int√©ressant. Cependant, Apple a toujours d√©ploy√© quelque chose de fondamental. Le d√©veloppement le plus significatif de tout ce qui a √©t√© mentionn√© lors de la pr√©sentation est le syst√®me de fichiers de nouvelle g√©n√©ration Apple File System (APFS) dans macOS (Sierra) 10.12. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le site pour les d√©veloppeurs, peu de temps apr√®s la pr√©sentation, une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation a √©t√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publi√©e </font><font style="vertical-align: inherit;">avec les principales caract√©ristiques et une description du syst√®me de fichiers, qui r√©p√®te les fonctions individuelles du puissant syst√®me de fichiers ZFS gratuit.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ordinateurs Apple utilisent d√©sormais le syst√®me de fichiers HFS +, une version √©tendue du HFS (Hierarchical File System, cr√©√© il y a plus de 30 ans). Comme son pr√©d√©cesseur, HFS + utilise une structure arborescente appel√©e arbre B * pour stocker la plupart des m√©tadonn√©es. D'o√π le nom de ¬´syst√®me de fichiers hi√©rarchique¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'introduction officielle de HFS + a eu lieu le 19 janvier 1998, avec MacOS 8.1. Depuis 2002, le syst√®me a mis en place une journalisation pour augmenter la fiabilit√© du stockage des informations. Depuis OS X 10.3, la journalisation est activ√©e par d√©faut, il est d√©sormais possible de travailler en mode sensible √† la casse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'√† OS X 10.7, les d√©veloppeurs continuaient d'affiner HFS + et d'impl√©menter de nouvelles fonctions pour OS X au niveau du syst√®me de fichiers. Mais le fait demeure: HFS a √©t√© initialement d√©velopp√© sur des disquettes et des disques durs en rotation, lorsque la taille des fichiers √©tait mesur√©e en kilo-octets ou en m√©gaoctets. Aujourd'hui, beaucoup fonctionnent avec des disques SSD, qui stockent des millions de fichiers - gigaoctets ou t√©raoctets de donn√©es. Le syst√®me de fichiers a des exigences compl√®tement diff√©rentes. Au lieu de finaliser l'ancien code, Apple a finalement d√©cid√© d'√©crire un nouveau syst√®me de fichiers √† partir de z√©ro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Syst√®me de fichiers APFS de nouvelle g√©n√©ration toujours dans l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aper√ßu du d√©veloppeur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est-√†-dire qu'il n'est pas pr√©vu de le d√©ployer √† grande √©chelle dans un avenir proche. Vous ne pouvez pas utiliser le volume APFS comme disque de d√©marrage pour le moment, ni l'utiliser dans le syst√®me de sauvegarde Time Machine, dans Fusion Drive ou avec le cryptage File Vault. Mais c'est possible pour un volume normal sans d√©marrage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a encore un long raffinement et des tests, mais alors seulement APFS deviendra le principal syst√®me de fichiers d'Apple pour les d√©cennies √† venir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS, contrairement √† HFS +, distingue initialement la casse des caract√®res dans les noms des fichiers et des dossiers, et cette fonction ne peut pas √™tre d√©sactiv√©e. Cela doit √™tre gard√© √† l'esprit par toute personne qui d√©cide d'utiliser APFS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principe, Apple recommande d'abord d'exp√©rimenter APFS sur un disque externe, qui ne stocke rien d'important. Pour cela, il est propos√© d'utiliser l'utilitaire</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hdiutil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caract√©ristiques cl√©s</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentation officielle r√©pertorie les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caract√©ristiques g√©n√©rales</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du syst√®me de fichiers APFS par rapport √† HFS +.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conteneurs et volumes</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un conteneur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est l'objet principal pour stocker des donn√©es dans APFS. </font><font style="vertical-align: inherit;">Les conteneurs sont g√©n√©ralement exactement les m√™mes que les entr√©es de la table de partition GUID (GPT); ils ont leur propre sch√©ma de protection contre les pannes et d'allocation d'espace disque. </font><font style="vertical-align: inherit;">Chaque conteneur contient un ou plusieurs </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volumes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou syst√®mes de fichiers, chacun ayant son propre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace de noms</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire un ensemble de fichiers et de r√©pertoires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS ne prend pas directement en charge le RAID logiciel, mais il peut √™tre utilis√© avec les volumes RAID Apple pour prendre en charge le striping (RAID 0), la mise en miroir (RAID 1) et la concat√©nation (JBOD).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inodes 64 bits</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les inodes 64 bits augmentent consid√©rablement l'espace de noms par rapport aux identificateurs 32 bits dans HFS +. </font><font style="vertical-align: inherit;">Le syst√®me de fichiers APFS 64 bits prend en charge plus de 9 quintillions de fichiers sur chaque volume. </font><font style="vertical-align: inherit;">Cela devrait suffire √† tout le monde, comme l'a dit Bill Gates.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horodatages en nanosecondes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS a consid√©rablement augment√© la pr√©cision des horodatages (horodatages). </font><font style="vertical-align: inherit;">APFS prend en charge l'horodatage pr√©cis √† la nanoseconde. </font><font style="vertical-align: inherit;">√Ä titre de comparaison, les horodatages HFS + ont √©t√© d√©finis √† la seconde pr√®s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les horodatages en nanosecondes sont tr√®s importants dans les syst√®mes de fichiers modernes, car ils aident √† impl√©menter l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atomicit√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les transactions atomiques - l'une des principales exigences ACID pour un syst√®me de transaction (par exemple, un SGBD). </font><font style="vertical-align: inherit;">Atomicity garantit qu'aucune transaction n'est partiellement valid√©e dans le syst√®me. </font><font style="vertical-align: inherit;">Soit toutes ses sous-op√©rations seront termin√©es, soit aucune ne sera termin√©e.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protection contre les collisions</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS impl√©mente un sch√©ma de m√©tadonn√©es innovant de copie sur √©criture, que Apple appelle ¬´Crash Protection¬ª. </font><font style="vertical-align: inherit;">Il garantit que les modifications apport√©es au syst√®me de fichiers et √† la journalisation sont synchronis√©es si quelque chose se produit pendant l'enregistrement - par exemple, une panne de courant. </font></font><br>
<br>
<img src="https://habrastorage.org/files/036/c0f/7e1/036c0f7e1f9447a5af5ea02b717588c2.png"><br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√©ma de copie sur √©criture ZFS</font></font></sup></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichiers √©pars</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un fichier avec l'attribut ¬´clairsem√©¬ª suppose le contenu de blocs de z√©ro octet, non stock√©s sur le lecteur, mais implicites. </font><font style="vertical-align: inherit;">HFS + ne prend pas en charge les fichiers clairsem√©s.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributs √©tendus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS a un support int√©gr√© pour les attributs de fichier √©tendus, qui dans HFS + a √©t√© impl√©ment√© via le fichier Attributes, c'est-√†-dire via l'arborescence B.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cryptage</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple affirme que le chiffrement est une propri√©t√© fondamentale int√©gr√©e √† APFS au niveau du syst√®me de fichiers. </font><font style="vertical-align: inherit;">Pour chaque volume du conteneur APFS, l'un des mod√®les de chiffrement est install√©: sans chiffrement, chiffrement avec une cl√©, chiffrement avec plusieurs cl√©s. </font><font style="vertical-align: inherit;">Dans ce dernier cas, des cl√©s individuelles sont utilis√©es pour chiffrer les fichiers et les m√©tadonn√©es. </font><font style="vertical-align: inherit;">Selon le mat√©riel, APFS utilise le mode de chiffrement AES-XTS ou AES-CBC.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clonage de fichiers et de r√©pertoires</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clonage - copie presque instantan√©e d'un fichier ou d'un r√©pertoire, qui ne n√©cessite pas d'espace suppl√©mentaire pour le stockage des donn√©es. </font><font style="vertical-align: inherit;">Lorsqu'un clone est modifi√©, le syst√®me de fichiers enregistre uniquement les modifications de donn√©es. </font><font style="vertical-align: inherit;">Ainsi, le nouveau syst√®me de fichiers peut stocker de nombreuses versions de fichiers volumineux, consommant moins d'espace disque.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instantan√©s</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instantan√©s - "instantan√©s" en lecture seule du syst√®me de fichiers dans le volume. Le syst√®me d'exploitation peut utiliser des instantan√©s pour une proc√©dure de sauvegarde plus efficace. Autrement dit, Time Machine fonctionnera bien (rapidement).</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, dans ses capacit√©s, APFS est nettement inf√©rieur au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syst√®me de fichiers ZFS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 128 bits </font><font style="vertical-align: inherit;">, qui est pris en charge par Linux, FreeBSD et d'autres syst√®mes d'exploitation gratuits, mais pour Apple, c'est un pas dans la bonne direction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est √©trange que la documentation pr√©liminaire ne mentionne pas la fonction de compression prise en charge par HFS +. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple essayait depuis longtemps de porter ZFS sur OS X, il y avait une discussion active sur les listes de diffusion ZFS, des instantan√©s pr√©liminaires ont √©t√© publi√©s pour la prochaine version d'OS X. Plus tard, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenZFS a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© impl√©ment√© </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">pour OS X</font></a><font style="vertical-align: inherit;"> (O3X) et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacZFX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me de fichiers ZFS est open source et Apple pourrait bien emprunter quelques id√©es pour le syst√®me de fichiers APFS. </font><font style="vertical-align: inherit;">L'impl√©mentation open source pour APFS n'est pas encore pr√™te, Apple pr√©voit de publier des documents et de publier le format APFS en 2017. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re session formelle se tiendra aujourd'hui √† la WWDC ce soir, o√π les d√©veloppeurs verront plus en d√©tail les nouvelles fonctionnalit√©s d'APFS.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr395253/">https://habr.com/ru/post/fr395253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr395243/index.html">L'IA g√©n√®re des sons r√©alistes dans les images</a></li>
<li><a href="../fr395245/index.html">Les d√©veloppeurs du jeu No Man's Sky d√©fendent le nom de Sky</a></li>
<li><a href="../fr395247/index.html">Talk Show: comment les podcasts cr√©ent, d√©veloppent et √©coutent</a></li>
<li><a href="../fr395249/index.html">√âquipement de mobilisation estivale</a></li>
<li><a href="../fr395251/index.html">Casque √† conduction osseuse Aftershokz Bluez 2 et malentendants</a></li>
<li><a href="../fr395255/index.html">Cr√©er une imprimante 3D par un jeune ing√©nieur - qu'est-ce que c'est?</a></li>
<li><a href="../fr395257/index.html">Le terrain d'entra√Ænement virtuel de Synthia changera qualitativement l'efficacit√© de la formation aux robots IA</a></li>
<li><a href="../fr395259/index.html">Comment utiliser le DVR: une autre FAQ la plus d√©taill√©e sur Internet</a></li>
<li><a href="../fr395261/index.html">Serveurs Dell Project Triton et leurs syst√®mes de refroidissement</a></li>
<li><a href="../fr395263/index.html">Yuneec Typhoon Q500 4k</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>