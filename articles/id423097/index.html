<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèπ üïäÔ∏è üë©üèæ‚Äçü§ù‚Äçüë©üèº Tugas dan solusi untuk pejuang PostgreSQL üöò üë®üèº‚Äçüé® üë§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salam untuk semua pecinta SQL! 

 Di Internet, saya jarang melihat artikel yang mencakup berbagai titik kerja dan seluk beluk yang terkait dengan pemr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tugas dan solusi untuk pejuang PostgreSQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423097/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/x3/ee/eo/x3eeeo65jv-nyf7mh9ks2dordqg.jpeg"></div><br>  Salam untuk semua pecinta SQL! <br><br>  Di Internet, saya jarang melihat artikel yang mencakup berbagai titik kerja dan seluk beluk yang terkait dengan <b>pemrosesan data dalam SQL</b> . <br>  Saya suka ketika Anda bisa belajar banyak hal dari satu artikel sekaligus, bahkan secara umum. <br>  Karena itu, saya memutuskan untuk menulis artikel saya yang berisi berbagai tugas dan jawaban dengan penjelasan untuknya. <br>  Cocok untuk mereka yang telah menguasai semua keterampilan dasar dengan baik dan ingin mengembangkan lebih lanjut. <br><br>  Jawaban yang diberikan cocok untuk <b>PostgreSQL</b> ( <u>sebagian besar tugas akan cocok untuk DBMS lainnya</u> , tetapi hasil dan solusinya mungkin berbeda. Bahkan menarik ketika ada perbedaan) <br><br>  <i><u>Coba jawab sendiri</u> sebelum membuka spoiler.</i> <i><br></i> <br>  Ayo pergi! <br><a name="habracut"></a><br><br>  Saya akan mencoba menandai dengan tanda bintang sesuatu murni untuk PostgreSQL * (tidak ada banyak momen seperti itu) <br><br><h4>  1. Sedikit tentang operasi numerik </h4><br>  <b>1.1</b> Apakah permintaan ini dapat dipenuhi?  Hasil apa yang akan mereka kembalikan? <br><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- )     SELECT 3/2; -- ) SELECT min('- '::TEXT), avg('- '::TEXT); -- )*      FALSE,     ? SELECT 7.2 = (3.8::FLOAT + 3.4) -- ) SELECT (20/25)*25.0;</span></span></code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">Jawaban untuk 1.1</b> <div class="spoiler_text">  A) Jawab: <b>1</b> <br>  Hanya seluruh bagian yang akan ditampilkan, karena  operasi menggunakan bilangan bulat.  Ini sering ditemukan dalam bahasa lain. <br><br>  B) Jawab: permintaan <b>tidak akan dieksekusi</b> . <br><br>  <b>avg</b> akan memberikan kesalahan sejak itu  hanya menerima angka dan interval waktu * <br><br>  Namun, fungsi <b>min / maks</b> dapat dieksekusi pada data teks (sesuai dengan pengurutan alfabetis dalam basis data). <br>  Terkadang ini berguna ketika Anda setidaknya harus melihat kolom yang tidak tercantum dalam <i>GROUP BY</i> <br>  Atau ketika Anda perlu menerapkan penyortiran alfabet ke angka, di mana '10' &lt;'2' <br><br>  B) Jawab: <b>SALAH</b> <br><br>  Mungkin terlihat aneh, tetapi ini <u>dapat diterima</u> , karena  ini adalah fitur komputer yang mewakili beberapa angka floating-point, suatu angka dapat berbentuk 7.1 (9) <br>  Saya ingat bagaimana saya pernah menangani permintaan untuk waktu yang lama tanpa menyadarinya. <br><br>  D) Jawab: <b>0</b> .  tangkapannya adalah ekspresi dalam tanda kurung akan = 0 <br><br>  SELECT (20 / 25.0) * 25 akan bekerja lebih benar </div></div><br><br>  <b>1.2</b> Diberikan tabel " <i>table_2</i> " (dengan satu kolom " <i>nilai</i> " (INTEGER)) yang terdiri dari 5 baris berikut: <br><table border="1" cellpadding="1"><tbody><tr><th width="120">  nilai </th></tr><tr><td>  5 </td></tr><tr><td>  5 </td></tr><tr><td>  Tidak </td></tr><tr><td>  5 </td></tr><tr><td>  5 </td></tr></tbody></table><br>  Hasil apa yang akan mengembalikan kueri: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">avg</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)*<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*)) - <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_2;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Opsi jawaban</b> <div class="spoiler_text"><ul><li>  -4 </li><li>  0 </li><li>  Tidak </li><li>  5 </li><li>  Ini akan menyebabkan kesalahan karena  tidak ditentukan GROUP BY </li><li>  Tidak ada yang terdaftar </li></ul><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Jawab 1.2</b> <div class="spoiler_text">  jawaban: <b>5</b> <br><br>  Fungsi agregat yang diterapkan pada kolom tertentu mengabaikan <i>NULL</i> , namun hitungan <b>(*) akan</b> menghitung semua baris <br>  5 * 5 - 20 </div></div><br><br><h4>  2. Masalah umum </h4><br>  <b>2.1</b> Dalam kasus apa permintaan dapat mengembalikan tidak semua konten tabel?  ( <i>parent_id</i> INTEGER, tabel diisi dengan berbagai data) <br><br><pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> any_table <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> parent_id = parent_id;</code> </pre><br>  Bagaimana perilaku permintaan di bawah ini?  Data apa yang akan dikeluarkannya?  <i>* PostgreSQL</i> <br><br><pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> any_table <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> parent_id <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> parent_id;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Jawaban untuk 2.1</b> <div class="spoiler_text">  Kueri pertama akan menampilkan semua entri kecuali yang <i>parent_id</i> adalah <b>NULL</b> <br><br>  Kueri kedua akan menampilkan semua entri tabel.  <u>IS DISTINCT FROM</u> secara logika mirip dengan operator <b>! =</b> Di mana NULL identik dengan NULL <br>  <u><b>BUKAN</b> MENDAPATKAN DARI</u> logis mengubah ketidaksetaraan menjadi kesetaraan <br></div></div><br>  <b>2.2.</b>  Apa yang akan menjadi hasil dari permintaan? <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ) SELECT * FROM ( SELECT 1 UNION ALL SELECT 1 ) x(y) UNION ( SELECT 2 UNION ALL SELECT 2 );</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Balas ke 2.2</b> <div class="spoiler_text">  Hasilnya akan menjadi 2 baris dengan nilai <b>1</b> dan <b>2</b> , <i>UNION</i> akan menghapus semua duplikat dalam pilihan yang <u>dihasilkan</u> , dan tidak hanya antara dua tabel yang digabungkan.  Saya perhatikan bahwa ini tidak jelas bagi semua orang. </div></div><br>  <b>2.3</b> Tulis kueri yang menunjukkan tanggal besok. <br><br><div class="spoiler">  <b class="spoiler_title">Jawaban untuk 2.3</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">now</span></span>()+ <span class="hljs-built_in"><span class="hljs-built_in">INTERVAL</span></span> <span class="hljs-string"><span class="hljs-string">'1 DAY'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span>)</code> </pre> <br>  Tidak semua orang sering bekerja dengan tanggal, tetapi ada baiknya menguasai beberapa minimum <br>  * Solusi Postgres, tapi saya rasa DBMS lain tidak jauh berbeda <br><br>  Jika bekerja dengan tanggal adalah hal baru bagi Anda, saya sarankan Anda untuk bereksperimen dengan permintaan tersebut <br>  Sebagai contoh: <br>  - ganti HARI dengan (minggu, bulan, tahun, dll.) <br>  - ganti +1 dengan -9000 <br>  - ganti DATE dengan TIME <br>  - hapus CAST <br>  - hanya menyisakan SEKARANG () <br>  dll. <br><br>  Dan, terinspirasi oleh beberapa hasil, bacalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MANUAL</a> , semua topik di sana dijelaskan secara rinci <br><br></div></div><br>  <b>2.4</b> Pernyataan <b>UPDATE</b> , <b>DELETE</b> , <b>INSERT,</b> dan <b>MERGE</b> dirancang untuk memanipulasi data dalam tabel.  Apakah <b>SELECT ..</b> eksekusi "aman"?  Bisakah kueri memengaruhi data dalam tabel? <br><div class="spoiler">  <b class="spoiler_title">Jawaban untuk 2.4</b> <div class="spoiler_text">  Pertanyaannya mungkin tampak primitif, namun ... <br><br>  Pada awal belajar SQL, saya berpendapat bahwa pernyataan ini hanya dapat menampilkan data, tetapi: <br><br>  Selain fakta bahwa SELECT dapat mengunci tabel untuk perubahan (MULAI; PILIH ... UNTUK PEMBARUAN) * <br>  SELECT dapat memanggil fungsi yang dapat melakukan hampir semua manipulasi. <br><br>  Pemula perlu segera memahami hal ini, dan tidak setelah menyelesaikan permintaan "informasi kecil" di server <s>Produksi</s> </div></div><br><br><h4>  3. Hanya PostgreSQL </h4><br>  <b>3.1</b> Jelaskan apa yang terjadi ketika kueri ini dieksekusi dalam dialog SQL: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> wtf <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Balas ke 3.1</b> <div class="spoiler_text">  Biasanya, SELECT INTO digunakan dalam fungsi <i>plpgsql</i> untuk menulis nilai ke variabel. <br><br>  Di luar plpgsql, efek dari perintah akan mirip dengan permintaan di bawah ini: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> wtf <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity;</code> </pre> <br></div></div><br>  <b>3.2</b> apa yang akan ditampilkan permintaan "sederhana" ini <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> wtf_ <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> wtf_ ;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Balas ke 3.2</b> <div class="spoiler_text">  pg_stat_activity system view (VIEW) dari proses aktif dalam database. <br><br>  Keunikan kueri adalah bahwa satu kolom dengan baris (ROW) yang memiliki TYPE pg_stat_activity (atau tabel lain) akan ditampilkan.  Anda harus mengetahui hal ini lebih cepat bagi mereka yang menulis fungsi. Anda dapat membaca lebih lanjut di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">manual.</a> <br>  Pertanyaan itu ditambahkan karena seorang pemula dapat dengan mudah mendapatkan hasil seperti itu secara tidak sengaja, dan tidak mengerti apa masalahnya </div></div><br><h4>  4. Bekerja dengan teks.  Ekspresi reguler </h4><br>  Saya pikir Anda harus dapat tidak hanya membangun kueri, tetapi juga menyajikan hasilnya dengan cara yang benar. <br>  Ekspresi reguler adalah topik besar yang terpisah, dengan banyak artikel berkualitas.  Karena itu, saya hanya akan menunjukkan contoh, tanpa penjelasan rinci. <br><br>  <b>4.1.</b>  Misalkan ada tabel " <i>table_5</i> " dengan kolom teks " <i>X</i> " dan banyak baris berbeda.  Permintaan apa yang bisa mendapatkan 10 karakter terakhir dari setiap baris? <br><br><div class="spoiler">  <b class="spoiler_title">Balas ke 4.1</b> <div class="spoiler_text">  SQL memungkinkan Anda menemukan banyak solusi untuk masalah yang sama, misalnya: <br>  hal paling sederhana yang terlintas dalam pikiran adalah <b>benar (X, 10)</b> <br>  regex dapat digunakan: <b>substring (X, '. {0,10} $')</b> <br>  Anda bahkan dapat <s>nakostylyat</s> "menghindar" (dalam semua pengertian) seperti ini: <b>mundur (substring (mundur (X) selama 10))</b> </div></div><br><br>  <b>4.2</b> Ada tabel ‚Äútable_6‚Äù dengan kolom teks ‚ÄúX‚Äù.  Tabel berisi satu baris (semua teks dalam bahasa Inggris dan Rusia saja): <br><pre> <code class="sql hljs">'Lorem 3 Ipsum 23 standard 7 dummy 17 text Ultimate Answer of Life ?? 777'</code> </pre> <br>  A) Tulis kueri yang akan mengembalikan karakter ke-42 ke 68 dari string ini <br>  B) Bagaimana cara mengekstrak hanya huruf kapital (Rusia atau Inggris) dalam sebuah string menggunakan SQL? <br>  C) Cara menghitung jumlah angka ( <u>bukan angka</u> ) dalam suatu string menggunakan SQL <br><br><div class="spoiler">  <b class="spoiler_title">Sketsa SQL</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> table_6(X) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">'Lorem 3 Ipsum 23 standard 7 dummy 17 text Ultimate Answer of Life ?? 777'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_6</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Jawaban untuk 4.2</b> <div class="spoiler_text"><pre> <code class="sql hljs"> <span class="hljs-comment"><span class="hljs-comment">--    WITH  "SQL " -- ) SELECT SUBSTRING(LEFT(X,68) FROM 42 ) FROM table_6 -- 1  SELECT SUBSTRING(X, 42, (68-42)+1) FROM table_6 -- 2  -- 3    -- )  ,        SELECT regexp_replace(X,'[^A-Z-]', '','g') FROM table_6 --  ''      - --   'g'    1  -- )        --   regexp_matches   **     ,      SELECT sum(x[1]::INT) FROM ( SELECT regexp_matches(X,'[0-9]+','g') FROM table_6 ) AS y(x) -- *        -- **   +,     (   1 ,     )</span></span></code> </pre> </div></div><br><br>  <b>4.3</b> Bagaimana cara mengganti semua spasi ganda (tiga kali lipat atau lebih) dengan satu spasi dalam teks (sel tabel)?  (berdasarkan tradisi: tabel " <i>table_7</i> " dengan kolom " <i>X</i> ") (PS itu akan cukup untuk menulis <i>SELECT</i> mengembalikan hasil yang diinginkan, dan bukan <i>UPDATE table_7 ...</i> ) <br><br><div class="spoiler">  <b class="spoiler_title">Balas ke 4.3</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> table_7(X) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">'Lorem 3 Ipsum 23 standard 7 dummy 11 text'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>) <span class="hljs-comment"><span class="hljs-comment">-- 1 .    (2   ) SELECT regexp_replace(X, '( ){2,}', ' ', 'g') FROM table_7 -- 2 .     (,  ,    ..)   ,      SELECT regexp_replace(X, '\s+', ' ', 'g') FROM table_7 --  !  ,  -    ,    "" .    .. --   ,    , ,        --    ,      ,    SELECT replace(replace(replace(X, ' ', '&lt;&gt;'), '&gt;&lt;', ''), '&lt;&gt;', ' ') FROM table_7</span></span></code> </pre><br></div></div><br>  <b>4.4</b> Ada string " <i>X</i> " di mana kesalahan ketik diizinkan.  Alih-alih huruf Rusia (e, o, s, C), karakter luar yang mirip dari alfabet Inggris digunakan.  Ganti karakter ini dengan SQL. <br><br>  PS Baris harus hanya berisi karakter Rusia, dan Anda tidak perlu khawatir tentang kemungkinan perubahan kata-kata bahasa Inggris. <br><br>  (Jika Anda mengalami kesulitan mengganti semua karakter, ganti setidaknya satu) <br><br>  Baris contoh: <br><br> <code>X = 'Coeo  eoc oe'</code> <br> <br><div class="spoiler">  <b class="spoiler_title">Balas ke 4.4</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- , Replace(Replace(Replace(..  ,  --        (1   1 ) SELECT TRANSLATE('Coeo  eoc oe', 'Cceo', '')</span></span></code> </pre> </div></div><br>  <b>4.5</b> Tulis kueri yang mengonversi string: <br>  <b>'</b> <b>Ivan Ivanov dan Ivanovich'</b> untuk spesies <b>'Ivan Ivanov</b> <br><br><div class="spoiler">  <b class="spoiler_title">Balas ke 4.5</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--  ,     SELECT initcap('  ') *     </span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Pencarian bonus untuk mereka yang mengatasinya</b> <div class="spoiler_text">  <s>Hebat jika ada fungsi yang sudah jadi</s> <br>  Bisakah Anda mengonversi sebaliknya?  (lebih disukai tanpa kehilangan bantalan). <br>  Mungkin tugasnya tidak khas, tetapi akan berguna untuk pengembangan. <br><br>  <b>'IVANOV IVAN IVANOVICH'</b> dikonversi menjadi <b>'IVANOV IVAN IVANOVICH'</b> <br>  <s>dan membalikkan kasus?</s> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Respon Tantangan Bonus</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> string_agg(<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(x,<span class="hljs-number"><span class="hljs-number">1</span></span>)) || <span class="hljs-keyword"><span class="hljs-keyword">UPPER</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(x <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> rn) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> regexp_split_to_table(<span class="hljs-string"><span class="hljs-string">'    4 TesT'</span></span>, <span class="hljs-string"><span class="hljs-string">'\y'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDINALITY</span></span> y(x, rn) ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> z <span class="hljs-comment"><span class="hljs-comment">-- *  PostgreSQL,      --    ,     --      ,      --      . -- WITH ORDINALITY      (   9.4) --      --          -- ..</span></span></code> </pre> </div></div><br><h4>  5. Sedikit tentang transaksi </h4><br>  Transaksi adalah hal yang sangat penting dalam DBMS, penting untuk memahami poin utama. <br><br>  Saya akan mencoba mensimulasikan contoh: <br><br>  Misalkan ada tabel "barang" dengan dua pengguna yang akan bekerja. <br>  Ini memiliki kolom <i>diskon</i> integer sama dengan <u>10</u> untuk semua baris. <br>  Pengaturan basis data adalah standar (READ COMMITTED - read data berkomitmen). <br><br>  Pengguna <i>User_1</i> membuka transaksi, menjalankan permintaan berikut: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> discount = discount + <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre><br>  <i>Sedetik</i> kemudian, pengguna lain ( <i>User_2</i> ) <br>  Ia melakukan permintaan yang hampir sama tanpa membuka transaksi: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> discount = discount + <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre><br>  Menurut Anda apa yang akan terjadi dalam situasi berikut: <br><br>  <b>A)</b> Apa hasil yang akan diperoleh User_2 jika User_1 membiarkan transaksi terbuka (mis. Tidak mengkonfirmasi transaksi / tidak mengembalikan perubahan)? <br>  Apa yang User_1 akan lihat berdasarkan permintaan: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> discount <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> goods <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  <b>B)</b> Apa yang terjadi jika User_1 melakukan ROLLBACK?  Apa hasil yang akan diperoleh User_2? <br><br>  <b>T)</b> Apa yang terjadi jika User_1 melakukan COMMIT?  Apa hasil yang akan diperoleh User_2? <br><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text">  Sejauh yang saya tahu, READ <b>UN</b> COMMITTED tidak didukung di PostgreSQL, dan data kotor (tidak dikonfirmasi) tidak dapat dibaca <br><br>  Jawabannya adalah sebagai berikut: <br><br>  A) Permintaan <u>User_2</u> akan menunggu COMMIT atau ROLLBACK dari User_1.  (permintaan tampaknya membeku) <br>  <u>User_1</u> dalam transaksinya akan melihat snapshot database versi miliknya, di mana <i>diskon</i> sudah sama dengan <b>15</b> <br><br>  B) Jika User_1 melakukan ROLLBACK, maka nilai <i>diskon</i> akan tetap sama, dan kemudian User_2 akan dieksekusi, yang akan menambahkan 10 ke <i>diskon</i> dan diskon akan menjadi <b>20</b> <br><br>  C) Jika User_1 melakukan KOMIT, maka nilai <i>diskon</i> akan meningkat sebesar 5, dan kemudian User_2 akan dieksekusi, yang akan menambahkan 10 ke <i>diskon</i> dan diskon akan menjadi <b>25</b> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Versi lain dari tugas ini</b> <div class="spoiler_text">  Versi tugas 13 yang sedikit berbeda dari pengguna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">kirill_petrov</a> pada READ COMMITTED <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--      CREATE TABLE goods (discount) AS (SELECT 10::INT UNION ALL SELECT 15); -- 1. User_1   (  ): BEGIN; UPDATE goods SET discount = discount + 5; --2. User_2  : UPDATE goods SET discount = discount + 100 WHERE discount = 15 --3. User_1  COMMIT;</span></span></code> </pre>  Data apa yang akan ada dalam tabel? <br></div></div><br><h4>  Kesimpulan </h4><br>  Saya pikir itu menyentuh poin yang cukup menarik. <br><br>  Saya berharap tugas-tugas ini akan membantu memotivasi pemula, karena membosankan mempelajari sesuatu tanpa tujuan / sasaran / arah tertentu. <br><br>  Saya bisa senang untuk mereka yang mudah menjawab semua pertanyaan.  Dan mereka yang memiliki kesulitan, saya harap, mendapat <s>tendangan ke</s> arah pembangunan.  Mereka yang tidak mengerti banyak, tetapi ingin belajar SQL, saya mengundang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kursus pejuang muda PostgreSQL</a> ke artikel terakhir saya. <br><br>  Saya menantikan penambahan, solusi untuk masalah yang sangat menarik (Anda dapat menambang) dan komentar lainnya! <br><br>  Terima kasih atas perhatian anda!  Semoga sukses dalam belajar SQL! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423097/">https://habr.com/ru/post/id423097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423087/index.html">Jangan mendorong mata saya</a></li>
<li><a href="../id423089/index.html">Programmer di MBLT DEV 2018</a></li>
<li><a href="../id423091/index.html">Bergetar untuk pengembang Android. Cara membuat UI untuk Aktivitas menggunakan Flutter</a></li>
<li><a href="../id423093/index.html">Kami meningkatkan keacakan fakta bahwa [mungkin] [hampir] secara tidak sengaja</a></li>
<li><a href="../id423095/index.html">Apa yang Baru di Presentasi Apple</a></li>
<li><a href="../id423101/index.html">Menyebarkan Penyimpanan LINSTOR untuk Proxmox</a></li>
<li><a href="../id423103/index.html">Python Podcasts: Hanya Itu yang Kami Temukan</a></li>
<li><a href="../id423105/index.html">System.IO.Pipelines: IO Kinerja Tinggi dalam .NET</a></li>
<li><a href="../id423107/index.html">Kami mengundang Anda ke pertemuan Go in Production</a></li>
<li><a href="../id423109/index.html">Apa yang diperkenalkan Apple dan apa yang dipikirkan pengembang iOS tentang hal itu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>