<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ˜… âœğŸ¾ Arsitektur Penagihan Generasi Selanjutnya: Transisi ke Tarantool ğŸ° ğŸ‘¦ ğŸ‘¼ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mengapa perusahaan seperti MegaFon, Tarantool dalam penagihan? Dari luar tampaknya vendor biasanya datang, membawa beberapa kotak besar, colokkan colo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arsitektur Penagihan Generasi Selanjutnya: Transisi ke Tarantool</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/455694/">  Mengapa perusahaan seperti MegaFon, Tarantool dalam penagihan?  Dari luar tampaknya vendor biasanya datang, membawa beberapa kotak besar, colokkan colokan ke soket - inilah tagihannya!  Dulu, tapi sekarang kuno, dan dinosaurus seperti itu telah punah atau punah.  Awalnya, penagihan adalah sistem penagihan - pembaca atau kalkulator.  Dalam telekomunikasi modern, ini adalah <b>sistem untuk mengotomatisasi seluruh siklus interaksi dengan pelanggan dari akhir kontrak hingga pemutusan</b> , termasuk penagihan real-time, penerimaan pembayaran, dan banyak lagi.  Penagihan di perusahaan telekomunikasi mirip dengan robot tempur - besar, kuat, dan digantung dengan senjata. <br><br><img src="https://habrastorage.org/webt/fm/qq/n0/fmqqn0374oz43yleqaghmzfmh3i.jpeg"><br><br>  Dan ini Tarantool?  <b>Oleg Ivlev</b> dan <b>Andrey Knyazev</b> akan membicarakan hal ini.  Oleg adalah kepala arsitek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MegaFon</a> dengan pengalaman luas bekerja di perusahaan asing, Andrey adalah direktur sistem bisnis.  Dari transkrip laporan mereka di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tarantool Conference 2018,</a> Anda akan belajar mengapa R&amp;D diperlukan di perusahaan, seperti apa Tarantool, bagaimana jalan buntu untuk penskalaan vertikal dan globalisasi menjadi prasyarat munculnya database ini di perusahaan, tentang tantangan teknologi, transformasi arsitektur, dan bagaimana technostek MegaFon menyerupai Netflix, Google dan Amazon. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/bW24mJwSllQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Proyek Penagihan Tunggal </h2><br>  Proyek yang akan dibahas disebut "Penagihan Tunggal."  Di dalam dirinya itulah Tarantool menunjukkan kualitas terbaiknya. <br><br><img src="https://habrastorage.org/webt/gz/zv/uz/gzzvuztrluedxrko5az64xmlqs4.jpeg"><br><br>  Pertumbuhan kinerja peralatan Hi-End tidak mengimbangi dengan pertumbuhan basis pelanggan dan peningkatan jumlah layanan, pertumbuhan lebih lanjut dalam jumlah pelanggan dan layanan karena M2M, IoT diharapkan, dan fitur-fitur cabang menyebabkan penurunan waktu-ke-pasar.  Perusahaan memutuskan untuk membuat sistem bisnis terpadu dengan arsitektur modular kelas dunia yang unik, alih-alih 8 sistem penagihan berbeda saat ini. <br><br>  <b>MegaFon adalah delapan perusahaan dalam satu</b> .  Pada tahun 2009, reorganisasi selesai: cabang di seluruh Rusia bergabung menjadi satu perusahaan MegaFon OJSC (sekarang PJSC).  Dengan demikian, perusahaan memiliki 8 sistem penagihan dengan solusi "kebiasaan" sendiri, fitur cabang dan struktur organisasi yang berbeda, TI dan pemasaran. <br><br>  Semuanya baik-baik saja sampai saya harus meluncurkan satu produk federal yang umum.  Banyak kesulitan muncul di sini: untuk beberapa, penetapan tarif dengan pembulatan, untuk yang lain pada tingkat lebih rendah, dan untuk yang lain - sesuai dengan rata-rata aritmatika.  Ada ribuan momen seperti itu. <br><br>  Terlepas dari kenyataan bahwa versi sistem penagihan adalah sama, satu pemasok, pengaturannya berbeda sehingga lem untuk waktu yang lama.  Kami mencoba mengurangi jumlah mereka, dan menemukan masalah kedua yang akrab bagi banyak perusahaan. <br><br>  <b>Penskalaan vertikal</b> .  Bahkan besi paling keren saat itu tidak memenuhi kebutuhan.  Kami menggunakan peralatan Hewlett-Packard, jalur Hi-End Superdome, tetapi tidak menarik bahkan untuk dua cabang.  Saya ingin penskalaan horizontal tanpa biaya transaksi besar dan investasi modal. <br><br>  <b>Ekspektasi pertumbuhan jumlah pelanggan dan layanan</b> .  Para konsultan telah lama membawa cerita tentang IoT dan M2M ke dunia telekomunikasi: akan tiba saatnya ketika setiap telepon dan besi memiliki kartu SIM, dan dua di lemari es.  Hari ini kami memiliki satu jumlah pelanggan, dan dalam waktu dekat akan ada urutan lebih besar. <br><br><h2>  Tantangan teknologi </h2><br>  Keempat alasan ini mendorong kami untuk melakukan perubahan besar.  Ada pilihan antara meningkatkan sistem dan mendesain dari awal.  Mereka berpikir untuk waktu yang lama, membuat keputusan serius, bermain tender.  Akibatnya, mereka memutuskan untuk merancang sejak awal, dan mengambil tantangan menarik - tantangan teknologi. <br><br><h3>  Skalabilitas </h3><br>  Jika sebelumnya ada, katakanlah, <b>8 akun penagihan untuk 15 juta pelanggan</b> , dan sekarang <b>100 juta pelanggan dan lebih</b> seharusnya berubah - bebannya adalah urutan besarnya lebih tinggi. <br><br><blockquote>  Kami telah menjadi sebanding dalam skala dengan pemain Internet utama seperti Mail.ru atau Netflix. </blockquote><br>  Namun pergerakan lebih lanjut untuk meningkatkan beban dan basis pelanggan merupakan tantangan serius bagi kami. <br><br><h3>  Geografi negara kita yang luas </h3><br>  Antara Kaliningrad dan Vladivostok <b>7500 km dan 10 zona waktu</b> .  Kecepatan cahaya terbatas dan pada jarak tunda seperti itu sudah signifikan.  150 ms pada saluran optik modern paling keren agak banyak untuk penagihan real-time, terutama seperti sekarang di telekomunikasi di Rusia.  Selain itu, Anda perlu memperbarui dalam satu hari kerja, dan dengan zona waktu yang berbeda - ini merupakan masalah. <br><br>  Kami tidak hanya menyediakan layanan dengan biaya bulanan, kami memiliki tarif yang kompleks, paket, berbagai pengubah.  Kita tidak hanya perlu mengizinkan atau melarang pelanggan untuk berbicara, tetapi untuk memberinya kuota tertentu - untuk menghitung panggilan dan tindakan secara real time sehingga dia tidak menyadarinya. <br><br><h3>  Toleransi kesalahan </h3><br><blockquote>  Ini adalah sisi lain dari sentralisasi. </blockquote><br>  Jika kami mengumpulkan semua pelanggan dalam satu sistem, maka setiap peristiwa darurat dan bencana adalah bencana bagi bisnis.  Oleh karena itu, kami merancang sistem sedemikian rupa untuk mengecualikan efek kecelakaan pada seluruh basis pelanggan. <br><br>  Sekali lagi ini adalah konsekuensi dari penolakan penskalaan vertikal.  Ketika kami masuk ke penskalaan horizontal, kami meningkatkan jumlah server dari ratusan menjadi ribuan.  Mereka perlu dikelola dan dipertukarkan, secara otomatis didukung infrastruktur TI dan sistem terdistribusi yang dipulihkan. <br><br>  Tantangan menarik seperti itu menghadang kami.  Kami merancang sistem, dan pada saat itu kami mencoba menemukan praktik terbaik dunia untuk memeriksa seberapa banyak kami dalam tren, seberapa banyak kami mengikuti teknologi canggih. <br><br><h2>  Pengalaman dunia </h2><br><blockquote>  Anehnya, di dunia telekomunikasi kami tidak menemukan satu pun referensi. </blockquote><br>  Eropa jatuh oleh jumlah pelanggan dan skala, Amerika Serikat - oleh pesawat tarifnya.  Kami melihat sesuatu di Cina, tetapi menemukan sesuatu di India dan mengambil spesialis dari Vodafone India. <br><br>  Untuk menganalisis arsitektur, Tim Impian berkumpul, dipimpin oleh IBM, arsitek dari berbagai bidang.  Orang-orang ini dapat secara memadai mengevaluasi apa yang kami lakukan dan membawa pengetahuan tertentu ke arsitektur kami. <br><br><h2>  Skala </h2><br>  Beberapa angka untuk diilustrasikan. <br><br>  Kami merancang sistem untuk <b>80 juta pelanggan dengan cadangan satu miliar</b> .  Jadi kami menghapus ambang batas masa depan.  Ini bukan karena kita akan mengambil alih Cina, tetapi karena tekanan dari IoT dan M2M. <br><br>  <b>300 juta dokumen diproses secara real time</b> .  Meskipun kami memiliki 80 juta pelanggan, kami bekerja dengan pelanggan potensial dan mereka yang telah meninggalkan kami jika kami perlu menagih piutang.  Karena itu, volume nyata jauh lebih besar. <br><br>  <b>2 miliar transaksi</b> setiap hari mengubah saldo - ini adalah pembayaran, biaya, panggilan dan acara lainnya.  <b>200 TB perubahan data aktif</b> , <b>8 PB</b> perubahan <b>data</b> sedikit lebih lambat, dan ini bukan arsip, tetapi data langsung dalam satu tagihan.  Skala <b>pusat</b> data adalah <b>5 ribu server di 14 situs</b> . <br><br><h2>  Tumpukan teknologi </h2><br>  Ketika kami merencanakan arsitektur dan mulai merakit sistem, kami mengimpor teknologi yang paling menarik dan canggih.  Hasilnya adalah tumpukan teknologi yang akrab bagi setiap pemain Internet dan perusahaan yang membuat sistem yang sangat dimuat. <br><br><img src="https://habrastorage.org/webt/cq/km/ys/cqkmyscpadcxt7nokj1_y_fwlny.jpeg"><br><br>  Tumpukan ini mirip dengan tumpukan pemain utama lainnya: Netflix, Twitter, Viber.  Ini terdiri dari 6 komponen, tetapi kami ingin mengurangi dan menyatukannya. <br><br><blockquote>  Fleksibilitas itu baik, tetapi di perusahaan besar tidak ada jalan tanpa penyatuan. </blockquote><br>  Kami tidak akan mengubah Oracle yang sama ke Tarantool.  Dalam realitas perusahaan besar, ini adalah utopia, atau perang salib selama 5-10 tahun dengan hasil yang tidak dapat dipahami.  Tapi Cassandra dan Couchbase dapat diganti dengan Tarantool, dan kami berkomitmen untuk ini. <br><br><h2>  Mengapa Tarantool? </h2><br>  Ada 4 kriteria sederhana mengapa kami memilih basis data ini. <br><br>  <b>Kecepatan</b> .  Kami melakukan stress test pada sistem industri MegaFon.  Tarantool menang - ini menunjukkan kinerja terbaik. <br><br>  Ini bukan untuk mengatakan bahwa sistem lain tidak memenuhi kebutuhan MegaFon.  Solusi memori saat ini sangat produktif sehingga stok perusahaan ini lebih dari cukup.  Tapi kami tertarik berurusan dengan pemimpin, dan bukan dengan orang yang menjalin ekor, termasuk uji beban. <br><br><blockquote>  Tarantool memenuhi kebutuhan perusahaan bahkan dalam jangka panjang. </blockquote><br>  <b>Biaya TCO</b> .  Dukungan untuk Couchbase pada volume MegaFon membutuhkan uang ruang, dengan Tarantool situasinya jauh lebih baik, dan dalam hal fungsionalitas mereka dekat. <br><br>  Fitur bagus lain yang sedikit memengaruhi pilihan kami - Tarantool berfungsi lebih baik daripada basis data lainnya dengan memori.  Ini menunjukkan <b>efisiensi maksimum</b> . <br><br>  <b>Keandalan</b>  MegaFon diinvestasikan dalam keandalan, mungkin tidak seperti yang lain.  Karena itu, ketika kami melihat Tarantool, kami menyadari apa yang perlu dilakukan agar memenuhi persyaratan kami. <br><br>  Kami menginvestasikan waktu dan keuangan kami, dan bersama dengan Mail.ru kami membuat versi perusahaan, yang sekarang digunakan oleh beberapa perusahaan lain. <br><br><blockquote>  Tarantool-enterprise sepenuhnya memuaskan kami dengan keamanan, keandalan, dan pencatatan. </blockquote><br><h3>  Kemitraan </h3><br>  Yang paling penting bagi saya adalah <b>kontak langsung dengan pengembang</b> .  Inilah yang disuap orang-orang Tarantool. <br><br>  Jika Anda datang ke pemain, terutama yang bekerja dengan anchor client, dan mengatakan bahwa Anda memerlukan database untuk dapat melakukan ini, ini dan itu, biasanya jawabannya: <br><br>  <i>- Nah, letakkan persyaratan di bawah tumpukan itu - suatu hari nanti, mungkin, kita akan mendapatkannya.</i> <br><br>  Banyak yang memiliki peta jalan untuk 2-3 tahun ke depan, dan hampir mustahil untuk berintegrasi di sana, dan pengembang Tarantool menyuap dengan keterbukaan, dan tidak hanya dengan MegaFon, dan menyesuaikan sistem mereka dengan pelanggan.  Ini keren dan kami sangat menyukainya. <br><br><h2>  Di mana kami menerapkan Tarantool </h2><br>  Di AS, Tarantool digunakan dalam beberapa elemen.  <b>Yang pertama ada di pilot</b> , yang kami buat pada sistem direktori alamat.  Pada suatu waktu, saya ingin itu menjadi sistem yang mirip dengan Yandex.Maps dan Google Maps, tetapi ternyata sedikit berbeda. <br><br>  Misalnya, direktori alamat di antarmuka penjualan.  Di Oracle, menemukan alamat yang Anda butuhkan memakan waktu 12-13 s.  - angka tidak nyaman.  Ketika kami beralih ke Tarantool, ganti Oracle dengan database lain di konsol, dan melakukan pencarian yang sama, kami mendapatkan akselerasi 200 kali!  Kota muncul setelah huruf ketiga.  Sekarang kami mengadaptasi antarmuka sehingga ini terjadi setelah yang pertama.  Namun, kecepatan responsnya sangat berbeda - sudah milidetik alih-alih detik. <br><br>  <b>Aplikasi kedua adalah topik trendi yang disebut IT dua kecepatan</b> .  Ini karena konsultan dari masing-masing besi mengatakan bahwa perusahaan harus pergi ke sana. <br><br><img src="https://habrastorage.org/webt/3j/mb/oc/3jmboctdb2q3n6iwdlf1auvf_x0.jpeg"><br><br>  Ada lapisan infrastruktur, domain di atasnya, misalnya, sistem penagihan, seperti telekomunikasi, sistem perusahaan, pelaporan perusahaan.  Inilah inti yang tidak perlu disentuh.  Itu, tentu saja, mungkin, tetapi paranoid dalam memberikan kualitas, karena membawa uang kepada perusahaan. <br><br>  Berikutnya adalah lapisan layanan microser - yang membedakan operator atau pemain lain.  Layanan Microsoft dapat dengan cepat dibuat berdasarkan cache tertentu, mengangkat data dari domain yang berbeda di sana.  Ini adalah <b>bidang percobaan</b> - jika ada yang tidak berhasil, tutup satu microservice, buka lainnya.  Ini memberikan waktu ke pasar yang benar-benar ditingkatkan dan meningkatkan keandalan dan kecepatan perusahaan. <br><br><blockquote>  Microservices mungkin adalah peran utama Tarantool di MegaFon. </blockquote><br><h2>  Di mana kami berencana untuk menerapkan Tarantool </h2><br>  Jika kami membandingkan proyek penagihan kami yang sukses dengan program transformasi di Deutsche Telekom, Svyazkome, Vodafone India, ini sangat dinamis dan kreatif.  Dalam proses pelaksanaan proyek ini, tidak hanya MegaFon dan strukturnya diubah, tetapi juga Tarantool-enterprise muncul di Mail.ru, dan vendor kami Nexign (sebelumnya Peter-Service) memiliki BSS Box (solusi penagihan kotak). <br><br>  Dalam arti tertentu, ini adalah proyek historis untuk pasar Rusia.  Ini dapat dibandingkan dengan apa yang dijelaskan dalam buku Frederick Brooks â€œMythical Man-Monthâ€.  Kemudian, di tahun 60an, IBM menarik 5.000 orang untuk mengembangkan sistem operasi OS / 360 baru untuk mainframe.  Kami memiliki kurang - 1.800, tetapi kami berada dalam rompi, dan dengan mempertimbangkan penggunaan open source dan pendekatan baru, kami bekerja lebih produktif. <br><br>  Domain penagihan atau, yang lebih luas, sistem bisnis ditampilkan di bawah ini.  Orang-orang di perusahaan mengenal CRM dengan sangat baik.  Setiap orang seharusnya sudah memiliki sistem lain: API Terbuka, API Gateway. <br><br><img src="https://habrastorage.org/webt/lj/g1/ec/ljg1ecnbyprze3f4js1j7899h9e.jpeg"><br><br><h3>  API terbuka </h3><br>  Mari kita lihat lagi angka-angkanya dan bagaimana Open API bekerja sekarang.  Bebannya adalah <b>10.000 transaksi per detik</b> .  Karena kami berencana untuk secara aktif mengembangkan lapisan layanan-mikro dan membangun API publik MegaFon, kami mengharapkan lebih banyak pertumbuhan di masa depan di bagian khusus ini.  <b>100.000 transaksi pasti akan terjadi</b> . <br><br>  Saya tidak tahu apakah SSO sebanding dengan Mail.ru - orang-orang, seperti, memiliki 1.000.000 transaksi per detik.  Kami sangat tertarik dengan solusi mereka dan kami berencana untuk belajar dari pengalaman mereka - misalnya, untuk membuat cadangan SSO fungsional menggunakan Tarantool.  Sekarang pengembang dari Mail.ru melakukan ini bersama kami. <br><br><h2>  CRM </h2><br>  CRM - ini adalah 80 juta pelanggan yang ingin kami bawa ke satu miliar, karena sudah ada 300 juta dokumen yang mencakup sejarah tiga tahun.  Kami benar-benar menantikan layanan baru, dan di sini <b>titik pertumbuhannya adalah layanan yang terhubung</b> .  Ini adalah bola yang akan tumbuh, karena akan ada semakin banyak layanan.  Oleh karena itu, sebuah cerita akan dibutuhkan, kami tidak ingin tersandung pada ini. <br><br>  Penagihan itu sendiri dalam hal penagihan, bekerja dengan piutang pelanggan <b>diubah menjadi domain terpisah</b> .  Untuk memaksimalkan kinerja, <b>template arsitektur arsitektur domain diterapkan</b> . <br><br><blockquote>  Sistem ini dibagi menjadi beberapa domain, beban didistribusikan dan toleransi kesalahan disediakan.  Selain itu, kami bekerja dengan arsitektur terdistribusi. </blockquote><br>  Yang lainnya adalah solusi tingkat perusahaan.  Di toko panggilan - <b>2 miliar per hari</b> , 60 miliar per bulan.  Kadang-kadang Anda harus menghitung ulang selama sebulan, dan lebih cepat lebih baik.  <b>Pemantauan keuangan</b> adalah persis 300 juta yang terus tumbuh dan berkembang: pelanggan sering berjalan di antara operator, meningkatkan bagian ini. <br><br>  Komponen komunikasi seluler yang paling telekomunikasi adalah <b>tagihan online</b> .  Ini adalah sistem yang memungkinkan Anda untuk menelepon atau tidak menelepon, membuat keputusan secara real time.  Di sini, bebannya adalah 30.000 transaksi per detik, tetapi dengan mempertimbangkan pertumbuhan transfer data, kami merencanakan <b>250.000 transaksi</b> , dan oleh karena itu kami sangat tertarik dengan Tarantool. <br><br>  Gambar sebelumnya adalah domain tempat kita akan menggunakan Tarantool.  CRM itu sendiri, tentu saja, lebih luas dan kami akan menerapkannya dalam inti itu sendiri. <br><br>  Perkiraan TTX 100 juta pelanggan kami membingungkan saya sebagai arsitek - bagaimana jika 101 juta?  Untuk mengulang semuanya lagi?  Untuk mencegah hal ini, kami menggunakan cache, sekaligus meningkatkan aksesibilitas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/167/a80/b0e/167a80b0e38db7f135407b097284a3ff.jpg"><br><br>  Secara umum, ada dua pendekatan untuk menggunakan Tarantool.  Yang pertama adalah <b>membangun semua cache di tingkat layanan-mikro</b> .  Seperti yang saya pahami, VimpelCom mengikuti jalur ini, membuat cache klien. <br><br>  Kami kurang tergantung pada vendor, kami mengubah inti BSS, jadi kami memiliki indeks kartu klien tunggal di luar kotak.  Tapi kami ingin menyulamnya.  Oleh karena itu, kami menggunakan pendekatan yang sedikit berbeda - <b>kami membuat cache di dalam sistem</b> . <br><br><blockquote>  Jadi ada kurang dari rassynchron - satu sistem bertanggung jawab atas cache dan sumber master utama. </blockquote><br>  Metode ini sangat cocok dengan pendekatan kerangka transaksional Tarantool, ketika hanya bagian yang terkait dengan pembaruan, mis. Perubahan data, yang diperbarui.  Segala sesuatu yang lain dapat disimpan di tempat lain.  Tidak ada danau data besar, cache global tidak dikelola.  Cache dirancang untuk sistem, baik untuk produk, atau untuk pelanggan, atau untuk membuat hidup lebih mudah untuk layanan ini.  Ketika seorang pelanggan merasa kesal dengan kualitas, saya ingin melayaninya secara kualitatif. <br><br><h2>  RTO dan RPO </h2><br>  Ada dua istilah dalam IT - <b>RTO</b> dan <b>RPO</b> . <br><br>  <b>Sasaran waktu pemulihan</b> adalah waktu untuk memulihkan layanan setelah kegagalan.  RTO = 0 berarti bahwa bahkan jika sesuatu jatuh, layanan tetap berfungsi. <br><br>  <b>Tujuan titik pemulihan</b> adalah waktu untuk memulihkan data, berapa banyak data yang bisa hilang selama periode waktu tertentu.  RPO = 0 berarti kita tidak kehilangan data. <br><br><h2>  Tantangan Tarantool </h2><br>  Mari kita coba selesaikan masalah untuk Tarantool. <br><br>  <b>Diberikan</b> : semua orang memahami keranjang aplikasi, misalnya, di Amazon atau di tempat lain.  Keranjang <b>diharuskan</b> untuk bekerja 24 jam 7 hari seminggu, atau 99,99% dari waktu.  Pesanan yang datang kepada kami harus tetap tertib, karena kami tidak dapat mengaktifkan atau menonaktifkan komunikasi untuk pelanggan secara acak - semuanya harus sangat konsisten.  Langganan sebelumnya mempengaruhi berikutnya, sehingga datanya penting - tidak ada yang harus hilang. <br><br>  <b>Solusi</b>  Anda dapat mencoba menyelesaikannya langsung dan bertanya kepada pengembang database, tetapi masalahnya tidak terpecahkan secara matematis.  Seseorang dapat mengingat teorema, hukum konservasi, fisika kuantum, tetapi mengapa - itu tidak dapat diselesaikan pada tingkat DB. <br><br>  Pendekatan arsitektur lama yang baik bekerja di sini - Anda perlu mengetahui area subjek dengan baik dan dengan biayanya menyelesaikan rebus ini. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/944/6e3/d25/9446e3d25815306bbe9dce45df4350ab.jpg"><br><br>  <b>Solusi kami: buat daftar aplikasi terdistribusi untuk Tarantool - sebuah cluster yang didistribusikan secara geografis</b> .  Dalam diagram, ini adalah tiga pusat data yang berbeda - dua ke Ural, satu di luar Ural, dan kami mendistribusikan semua aplikasi ke pusat ini. <br><br>  Netflix, yang sekarang dianggap sebagai salah satu pemimpin di bidang TI, hanya memiliki satu pusat data hingga 2012.  Menjelang Natal Katolik pada 24 Desember, pusat data ini runtuh.  Pengguna Kanada dan Amerika Serikat dibiarkan tanpa film favorit mereka, sangat kesal dan menulis tentang ini di jejaring sosial.  Netflix sekarang memiliki tiga pusat data di pantai barat-timur dan satu di Eropa barat. <br><br><blockquote>  Kami awalnya membangun solusi geo-didistribusikan - toleransi kesalahan penting bagi kami. </blockquote><br>  Jadi, kami memiliki cluster, tetapi bagaimana dengan RPO = 0 dan RTO = 0?  Solusinya sederhana, yang tergantung pada subjek. <br><br>  Apa yang penting dalam aplikasi?  Dua bagian: melempar keranjang <b>SEBELUM</b> membuat keputusan pembelian, dan <b>SETELAH</b> .  Bagian dari DO dalam telekomunikasi biasanya disebut <b>perintah penangkapan</b> atau <b>negosiasi pesanan</b> .  Dalam telekomunikasi, ini bisa jauh lebih rumit daripada di toko online, karena di sana Anda perlu melayani klien, menawarkan 5 opsi, dan ini semua terjadi untuk sementara waktu, tetapi keranjangnya penuh.  Pada titik ini, kegagalan adalah mungkin, tetapi itu tidak menakutkan, karena itu terjadi dalam mode interaktif di bawah pengawasan seseorang. <br><br>  Jika pusat data Moskow tiba-tiba gagal, maka secara otomatis beralih ke pusat data lain, kami akan terus bekerja.  Secara teoritis, satu produk dalam keranjang mungkin hilang, tetapi Anda melihat ini, menambah keranjang lagi dan terus bekerja.  Dalam hal ini, RTO = 0. <br><br>  Pada saat yang sama, ada opsi kedua: ketika kami mengklik "kirim", kami ingin data tidak hilang.  Mulai saat ini, otomatisasi mulai berfungsi - ini sudah RPO = 0. Aplikasi dari dua pola yang berbeda ini dalam satu kasus dapat menjadi hanya sebuah cluster yang didistribusikan secara geografis dengan satu master yang dapat dialihkan, dalam kasus lain semacam entri kuorum.  Pola dapat bervariasi, tetapi kami menyelesaikan masalahnya. <br><br>  Selain itu, dengan memiliki daftar aplikasi yang terdistribusi, kami juga dapat mengatur skala semuanya - untuk memiliki banyak operator dan kontraktor yang mengakses registri ini. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28f/ab6/da3/28fab6da317b89510738c9b2497fe529.jpg"><br><br><h2>  Cassandra dan Tarantool bersama </h2><br>  Ada kasus lain - <b>"showcase of balance</b> . <b>"</b>  Ini hanya kasus menarik dari penggunaan bersama Cassandra dan Tarantool. <br><br>  Kami menggunakan Cassandra, karena 2 miliar panggilan per hari bukan batasnya, dan akan ada lebih banyak.  Pemasar suka mewarnai lalu lintas berdasarkan sumber, ada semakin banyak detail di jejaring sosial, misalnya.  Ini semua menambah cerita. <br><br><blockquote>  Cassandra memungkinkan Anda untuk skala secara horizontal ke volume apa pun. </blockquote><br>  Kami merasa nyaman dengan Cassandra, tetapi ia memiliki satu masalah - ia tidak pandai membaca.    , 30 000     â€” <b>  </b> . <br><br>     ,      :    ,      -   ,     Cassandra.        ,     IBM manager file transfer â€”   ,     ,   UDP, ,   TCP.  ,    ,       ,   -    ,       â€”  . <br><br>    ,  <b>   </b> .      Kafka  Tarantool,     , ,  ,   <b> </b> ,       , , 100        2 . <br><br>   ,       2         ,    ,   . <br><br><h2>  Kesimpulan </h2><br>     Tarantool.     Mail.ru,     . <br><br>   BCG  McKinsey, Accenture  IBM     -  â€”   ,   ,    ,  ,   . ,  Tarantool             .       . <br><br><blockquote>     â€”     Tarantool Conference  ,   17      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">T+ Conference 2019</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Â« Tarantool  EnterpriseÂ»</a> .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Â« Tarantool    OracleÂ»</a> . ,  ,    .  â€”  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>    :  ,    Tarantool, , ,   . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id455694/">https://habr.com/ru/post/id455694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id455678/index.html">Di jalan Sergey Pavlovich Korolev. Proyek berawak Rusia modern. Bagian 1. "Federasi"</a></li>
<li><a href="../id455682/index.html">Berapa banyak yang Anda habiskan untuk infrastruktur? Dan bagaimana cara menghemat ini?</a></li>
<li><a href="../id455684/index.html">Mengapa kami melakukan hackathon untuk penguji</a></li>
<li><a href="../id455686/index.html">Bagaimana Memilih Alat Manajemen Proyek Terbaik Jika Anda Seorang Milenial?</a></li>
<li><a href="../id455692/index.html">ASZP: restyling atau teater dimulai dengan gantungan</a></li>
<li><a href="../id455696/index.html">Keadaan elektronik masa depan. Bagian 2</a></li>
<li><a href="../id455698/index.html">Buku "Bagaimana JavaScript Bekerja"</a></li>
<li><a href="../id455700/index.html">4 trik yang membantu kami mengoptimalkan frontend</a></li>
<li><a href="../id455702/index.html">Pembuatan angka efektif dalam interval yang diberikan</a></li>
<li><a href="../id455710/index.html">Mengapa kita di Leroy Merlin membutuhkan departemen pengembangan Rusia kita sendiri untuk 200 orang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>