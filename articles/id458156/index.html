<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÑ üé± ‚è¨ Benchmarking PostgreSQL dengan FreeBSD, CentOS, Ubuntu Debian, dan openSUSE üëÉüèª üë®üèª‚Äçüè´ ‚òùüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Saya mempersembahkan kepada Anda terjemahan artikel asli ‚ÄúTolok ukur PostgreSQL di FreeBSD, CentOS, Ubuntu Debian, dan openSUSE‚Äù oleh Mart...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Benchmarking PostgreSQL dengan FreeBSD, CentOS, Ubuntu Debian, dan openSUSE</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458156/"><img src="https://habrastorage.org/getpro/habr/post_images/29e/dac/902/29edac902beac8c11b5a6355f66d0564.png" alt="gambar" align="left">  Halo, Habr!  Saya mempersembahkan kepada Anda terjemahan artikel asli <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">‚ÄúTolok ukur PostgreSQL di FreeBSD, CentOS, Ubuntu Debian, dan openSUSE‚Äù</a> oleh Martin Kov√°ƒçik.  Ini memeriksa tes DBMS PostgreSQL 10.1 di lingkungan yang dekat dengan kondisi nyata pada berbagai sistem unix. <br><br><h3>  Terjemahan </h3><br>  Dalam posting ini, saya akan menunjukkan hasil tes PostgreSQL 10.1 yang baru dirilis.  Saya memeriksa DB pada OS ini (semua 64-bit): <br><br><ul><li>  <b>Ubuntu 16.04</b> , kernel 4.10.0-38-generik </li><li>  <b>openSUSE 42.3,</b> kernel 4.4.87-25-default </li><li>  <b>CentOS 7.4</b> , kernel 3.10.0-693.2.2.el7.x86_64 </li><li>  <b>Debian 9.2</b> , kernel 4.9.0-4-amd64 </li><li>  <b>FreeBSD 11.1</b> </li></ul><a name="habracut"></a><br><h3>  Metodologi uji </h3><br>  Tujuan dari tes ini adalah untuk mengukur kinerja PostgreSQL dalam kondisi yang mirip dengan penyebaran produksi (khas): <br><br><ul><li>  klien terhubung melalui kolam koneksi untuk memastikan bahwa tidak ada koneksi ulang permanen ke database (saya tidak menggunakan kolam koneksi, saya tidak menggunakan flag -C pgbench sebagai gantinya) </li><li>  klien terhubung melalui jaringan, bukan melalui soket unix </li><li>  Direktori data PostgreSQL terletak di mirror RAID 1 </li></ul><br>  Untuk masing-masing OS yang diuji, basis data kontrol ~ 74 GB dibuat: <br><br><pre><code class="bash hljs">pgbench -i -s 5000 pgbench</code> </pre> <br>  Infrastruktur pengujian terdiri dari dua server khusus yang terhubung ke jaringan 1 Gbps: <br><br><ul><li>  EX41-SSD: Intel i7-6700, 4 core, 8 thread, 32 GB DDR4 RAM, digunakan untuk menghasilkan query SQL menggunakan pgbench </li><li>  PX121-SSD: Intel Xeon E5-1650 v3, 6 core, 12 threads, 256 GB RAM DDR4 ECC, 2 x 480 GB SATA 6 Gb / s, pusat data dari seri SSD, digunakan sebagai server PostgreSQL </li></ul><br>  Saya tertarik pada kombinasi tes ini: <br><br><ul><li>  <b>Hanya baca 32 GB</b> : uji baca-saja (hanya sampel tanpa mengubah data), kumpulan data tidak masuk ke dalam cache PostgreSQL </li><li>  <b>200 GB read-only</b> : read-only test, kumpulan data di-cache dalam PostgreSQL </li><li>  <b>32 GB TCP-B</b> : baca-tulis, kumpulan data tidak sesuai dengan cache PostgreSQL </li><li>  <b>TCP-B 200 GB</b> : baca, tulis, kumpulan data di-cache dalam PostgreSQL </li></ul><br><h3>  pengaturan pgbench </h3><br>  Program pgbench versi 10.1, berjalan pada komputer FreeBSD 11.1 yang terpisah, digunakan untuk menghasilkan beban.  Script tes terdiri dari tiga bagian: vakum + pemanasan, tes baca-saja dan tes baca-tulis.  Sebelum setiap tes baca-tulis, tabel pgbench dihapus (flag -v digunakan).  Selama pengujian, saya secara bertahap meningkatkan jumlah klien yang mengakses database. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh THREADS=8 DURATION=1800 PGIP=192.168.1.120 # warmup pgbench -h ${PGIP} -U pgbench -j ${THREADS} -c 10 -T ${DURATION} -S -v pgbench for clients in 1 10 20 30 40 50 60 70 80 90 100 110 120 do echo "RO ${clients}" pgbench -h ${PGIP} -U pgbench -j ${THREADS} -c ${clients} -T ${DURATION} -S pgbench &gt; pgbench_ro_${clients}.log done for clients in 1 10 20 30 40 50 60 70 80 90 100 110 120 do echo "RW ${clients}" pgbench -h ${PGIP} -U pgbench -j ${THREADS} -c ${clients} -T ${DURATION} -v pgbench &gt; pgbench_rw_${clients}.log done</span></span></code> </pre> <br><h3>  Pengaturan Server PostgreSQL </h3><br>  Untuk distribusi Linux, PostgreSQL diinstal pada sistem file ext4 dalam pengaturan RAID1 (perangkat lunak RAID menggunakan mdraid) pada dua SSD dengan <i>atime</i> dinonaktifkan.  Dalam kasus FreeBSD, sistem file OpenZFS digunakan pada dua SSD ketika mengkonfigurasi RAID1.  Dataset ZFS dengan data PostgreSQL dibuat dengan parameter berikut: <br><br><pre> <code class="plaintext hljs">zfs get recordsize,logbias,primarycache,atime,compression zroot/var/db/postgres NAME PROPERTY VALUE SOURCE zroot/var/db/postgres recordsize 8K local zroot/var/db/postgres logbias throughput local zroot/var/db/postgres primarycache all default zroot/var/db/postgres atime off inherited from zroot zroot/var/db/postgres compression lz4 local</code> </pre> <br>  Konfigurasi server PostgreSQL sama pada semua sistem operasi kecuali jalur file (setiap sistem operasi menggunakan struktur direktori sendiri).  Isi file <i>postgresql.conf</i> (pengaturan dasar) untuk instance 32 GB: <br><br><pre> <code class="plaintext hljs">autovacuum = off default_statistics_target = 100 maintenance_work_mem = 1GB checkpoint_completion_target = 0.9 effective_cache_size = 24GB work_mem = 104MB wal_buffers = 16MB shared_buffers = 8GB max_connections = 300</code> </pre> <br>  Isi file <i>postgresql.conf</i> untuk instance 200 GB: <br><br><pre> <code class="plaintext hljs">autovacuum = off default_statistics_target = 100 maintenance_work_mem = 2GB checkpoint_completion_target = 0.9 effective_cache_size = 144GB work_mem = 640MB wal_buffers = 16MB shared_buffers = 48GB max_connections = 300</code> </pre> <br><h3>  Benchmarking </h3><br>  Saya menguji PostgreSQL pada lima sistem operasi yang berbeda dalam dua mode - read-only dan TCP-B (read-write) dengan dua profil memori yang berbeda.  Pengujian setiap OS memakan waktu sekitar 30 jam (tidak termasuk waktu yang diperlukan untuk mengkonfigurasi OS).  Hasil dari setiap menjalankan pgbench disimpan untuk evaluasi nanti. <br><br><h3>  Hasil - Hanya Baca </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/824/093/baf/824093baf0425d13d761f0c901355647.jpg" width="600" height="259" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/397/b43/ac1/397b43ac1ef442bebefcf9aab1ddd5be.jpg" width="600" height="252" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/3d9/3f7/fde/3d93f7fde6f666aabf8d4e48e7c28bd7.jpg" width="600" height="250" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/ef8/5d3/99a/ef85d399a427083671324d38331279ee.jpg" width="600" height="244" title="Hosting gambar PicShare.ru"></a> <br><br><h3>  Hasil - TCP-B </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/e26/652/1ce/e266521ce29563daaa26991c14ce0cc8.jpg" width="600" height="261" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/675/e47/7e7/675e477e7089abb997b36d77b7810343.jpg" width="600" height="260" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/75a/d68/eb3/75ad68eb35fa35230db8e446a09565ad.jpg" width="600" height="257" title="Hosting gambar PicShare.ru"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/d3b/0e7/b9e/d3b0e7b9ea92d20bd1231379b71b4b14.jpg" width="600" height="248" title="Hosting gambar PicShare.ru"></a> <br><br><h3>  Ringkasan </h3><br>  Tes menunjukkan bahwa perbedaan antara berbagai distribusi GNU / Linux tidak terlalu signifikan.  OpenSUSE 42.3 adalah sistem operasi terbaik dalam pengujian read-only, sementara FreeBSD berlari sekitar 40% lebih lambat.  Sayangnya, saya tidak tahu apa yang menyebabkan kinerja FreeBSD biasa-biasa saja. <br><br>  Gambaran yang lebih realistis tentang kinerja PostgreSQL diperoleh dalam uji baca-tulis (TCP-B).  Di antara distribusi GNU / Linux, Centos 7.4 adalah yang tercepat dan Debian 9.2 yang paling lambat.  Saya sangat terkejut dengan FreeBSD 11.1, yang berjalan lebih dari dua kali lebih cepat dari Linux terbaik, terlepas dari kenyataan bahwa FreeBSD menggunakan ZFS, yang merupakan sistem file copy-on-write.  Saya berasumsi bahwa perbedaan ini disebabkan oleh biaya perangkat lunak RAID di Linux, jadi saya melakukan tiga tes TCP-B lagi untuk 100 klien secara bersamaan, kali ini tanpa perangkat lunak RAID: <br><br><ul><li>  <b>FreeBSD 11.1 + UFS</b> : 5623.86 TPS </li><li>  <b>FreeBSD 11.1 + ZFS</b> : 8331.85 TPS </li><li>  <b>CentOS 7.4 + ext4</b> : 8987.65 TPS </li></ul><br>  Hasilnya menunjukkan inefisiensi Linux SW RAID (atau efisiensi ZFS RAID).  Performa CentOS 7.4 tanpa SW RAID hanya sedikit lebih tinggi dari FreeBSD 11.1 dengan ZFS RAID (untuk TCP-B dan 100 klien bersamaan). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458156/">https://habr.com/ru/post/id458156/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458134/index.html">Komputasi kuantum dapat mengubah segalanya, dan IBM bersaing dengan Microsoft, Intel, dan Google untuk mengendalikannya.</a></li>
<li><a href="../id458136/index.html">GitLab 12.0 baru dengan ulasan visual dan daftar dependensi</a></li>
<li><a href="../id458142/index.html">Mengembangkan Breakout on Svelte</a></li>
<li><a href="../id458150/index.html">Peoptimasi mikro optimasi dalam kompiler C ++ dan C #</a></li>
<li><a href="../id458154/index.html">Kisah luar biasa tentang asal port USB yang mengubah segalanya</a></li>
<li><a href="../id458158/index.html">Mencari asteroid - proyek Hubble Asteroid Hunter</a></li>
<li><a href="../id458160/index.html">Kunci Prioritas di .NET</a></li>
<li><a href="../id458168/index.html">Juni Machine Learning dan Intelijen Berita Buatan Intisari</a></li>
<li><a href="../id458170/index.html">Perendaman dalam jaringan saraf convolutional. Bagian 5/10 - 18</a></li>
<li><a href="../id458176/index.html">Penghalang exaflops akan diatasi pada 2021</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>