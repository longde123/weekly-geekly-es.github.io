<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔋 🦐 🧕🏿 Analisis statis di Go: bagaimana kita menghemat waktu saat memeriksa kode 🕊️ 🚬 🎶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, Habr. Nama saya Sergey Rudachenko, saya seorang ahli teknis di Roistat. Selama dua tahun terakhir, tim kami telah menerjemahkan berbagai bagian p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analisis statis di Go: bagaimana kita menghemat waktu saat memeriksa kode</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/roistat/blog/413175/"><p><img src="https://habrastorage.org/webt/ax/ky/rf/axkyrfxrmccrmh-vbn83run9wpe.jpeg"></p><br><p> Hai, Habr.  Nama saya Sergey Rudachenko, saya seorang ahli teknis di Roistat.  Selama dua tahun terakhir, tim kami telah menerjemahkan berbagai bagian proyek ke dalam layanan microser on Go.  Mereka dikembangkan oleh beberapa tim, jadi kami perlu menetapkan bar kualitas kode keras.  Untuk melakukan ini, kami menggunakan beberapa alat, dalam artikel ini kami akan fokus pada salah satunya - pada analisis statis. </p><br><p>  Analisis statis adalah proses pengecekan kode sumber secara otomatis menggunakan utilitas khusus.  Artikel ini akan berbicara tentang manfaatnya, menjelaskan secara singkat alat-alat populer dan memberikan instruksi untuk implementasi.  Perlu dibaca jika Anda belum menemukan alat yang sama sekali atau menggunakannya secara tidak sistematis. </p><br><p>  Dalam artikel tentang topik ini, istilah "linter" sering ditemukan.  Bagi kami, ini adalah nama yang tepat untuk alat sederhana untuk analisis statis.  Tugas linter adalah mencari kesalahan sederhana dan desain yang salah. </p><a name="habracut"></a><br><h2 id="zachem-nuzhny-lintery">  Mengapa linter dibutuhkan? </h2><br><p> Saat bekerja dalam tim, Anda kemungkinan besar akan melakukan tinjauan kode.  Kesalahan yang dilewati dalam ulasan adalah bug potensial.  Terjawab <code>error</code> tidak tertangani - jangan menerima pesan informatif dan Anda akan mencari masalah secara membabi buta.  Keliru dalam tipe casting atau berubah menjadi nihil peta - bahkan lebih buruk, biner akan jatuh dari panik. </p><br><p>  Kesalahan yang dijelaskan di atas dapat ditambahkan ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konvensi Kode</a> , tetapi untuk menemukannya saat membaca permintaan tarik tidak begitu sederhana, karena peninjau harus membaca kode.  Jika tidak ada kompiler di kepala Anda, beberapa masalah tetap akan pergi ke pertempuran.  Selain itu, pencarian untuk kesalahan kecil mengalihkan perhatian dari memeriksa logika dan arsitektur.  Di kejauhan, mendukung kode semacam itu akan menjadi lebih mahal.  Kami menulis dalam bahasa yang diketik secara statis, aneh untuk tidak menggunakannya. </p><br><h2 id="populyarnye-instrumenty">  Alat populer </h2><br><p>  Sebagian besar alat untuk analisis statis menggunakan paket <code>go/ast</code> dan <code>go/parser</code> .  Mereka menyediakan fungsi untuk mem-parsing sintaks file .go.  Utas eksekusi standar (misalnya, untuk utilitas golint) adalah sebagai berikut: </p><br><ul><li>  daftar file dari paket yang diperlukan dimuat </li><li>  <code>parser.ParseFile(...) (*ast.File, error)</code> dijalankan untuk setiap file </li><li>  memeriksa aturan yang didukung untuk setiap file atau paket </li><li>  verifikasi melewati setiap instruksi, misalnya, seperti ini: </li></ul><br><pre> <code class="go hljs">f, err := parser.ParseFile(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>) ast.Walk(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n *ast.Node)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> v := node.(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> *ast.FuncDecl: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> strings.Contains(v.Name, <span class="hljs-string"><span class="hljs-string">"_"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(<span class="hljs-string"><span class="hljs-string">"wrong function naming"</span></span>) } } }, f)</code> </pre> <br><p>  Selain AST, ada Single Static Assignment (SSA).  Ini adalah cara parsing kode yang lebih kompleks yang berfungsi dengan utas eksekusi daripada konstruksi sintaks.  Pada artikel ini, kami tidak akan mempertimbangkannya secara rinci, Anda dapat membaca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> dan melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh</a> utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">stackcheck</a> . </p><br><p>  Berikutnya, hanya utilitas populer yang melakukan pemeriksaan yang bermanfaat bagi kami yang akan dipertimbangkan. </p><br><h3 id="gofmt">  gofmt </h3><br><p>  Ini adalah utilitas standar dari paket go yang memeriksa kecocokan gaya dan secara otomatis dapat memperbaikinya.  Kepatuhan terhadap gaya adalah persyaratan wajib bagi kami, oleh karena itu verifikasi gofmt termasuk dalam semua proyek kami. </p><br><h3 id="typecheck">  ketik cek </h3><br><p>  Typecheck memeriksa pencocokan jenis dalam kode dan mendukung vendor (tidak seperti gotype).  Peluncurannya diperlukan untuk memeriksa kompilasi, tetapi tidak memberikan jaminan penuh. </p><br><h3 id="go-vet">  pergi dokter hewan </h3><br><p>  Utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">go vet</a> adalah bagian dari paket standar dan direkomendasikan untuk digunakan oleh tim Go.  Memeriksa sejumlah kesalahan umum, misalnya: </p><br><ul><li>  penyalahgunaan printf dan fungsi serupa </li><li>  tag build salah </li><li>  membandingkan fungsi dan nihil </li></ul><br><h3 id="golint">  golint </h3><br><p>  Golint dikembangkan oleh tim Go dan memvalidasi kode berdasarkan pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Go Efektif</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CodeReviewComments</a> .  Sayangnya, tidak ada dokumentasi terperinci, tetapi <a href="">kode ini menunjukkan</a> bahwa yang berikut ini dicentang: </p><br><pre> <code class="go hljs">f.lintPackageComment() f.lintImports() f.lintBlankImports() f.lintExported() f.lintNames() f.lintVarDecls() f.lintElses() f.lintRanges() f.lintErrorf() f.lintErrors() f.lintErrorStrings() f.lintReceiverNames() f.lintIncDec() f.lintErrorReturn() f.lintUnexportedReturn() f.lintTimeNames() f.lintContextKeyTypes() f.lintContextArgs()</code> </pre> <br><h3 id="staticcheck">  cek statis </h3><br><p>  Pengembang sendiri menghadirkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemeriksaan statis</a> sebagai go go dokter hewan yang ditingkatkan.  Ada banyak cek, mereka dibagi menjadi beberapa kelompok: </p><br><ul><li>  penyalahgunaan perpustakaan standar </li><li>  masalah multithreading </li><li>  masalah dengan tes </li><li>  kode tidak berguna </li><li>  masalah kinerja </li><li>  desain yang meragukan </li></ul><br><h3 id="gosimple">  sederhana </h3><br><p>  Ia berspesialisasi dalam menemukan struktur yang layak disederhanakan, misalnya: </p><br><p>  <strong>Sebelumnya</strong> ( <a href="">kode sumber golint</a> ) </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f *file)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ffName.Name == <span class="hljs-string"><span class="hljs-string">"main"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><p>  <strong>Setelah</strong> </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f *file)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isMain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ffName.Name == <span class="hljs-string"><span class="hljs-string">"main"</span></span> }</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi ini</a> mirip dengan pemeriksaan statis dan menyertakan contoh terperinci. </p><br><h3 id="errcheck">  errcheck </h3><br><p>  Kesalahan yang dikembalikan oleh fungsi tidak dapat diabaikan.  Alasannya dijelaskan secara rinci dalam dokumen yang mengikat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Efektif Go</a> .  Errcheck tidak akan melewatkan kode berikut: </p><br><pre> <code class="go hljs">json.Unmarshal(text, &amp;val) f, _ := os.OpenFile(<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>)</code> </pre> <br><h3 id="gas">  gas </h3><br><p>  Menemukan kerentanan dalam kode: akses hardcoded, injeksi sql dan penggunaan fungsi hash tidak aman. </p><br><p>  Contoh kesalahan: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//    IP  l, err := net.Listen("tcp", ":2000") //  sql  q := fmt.Sprintf("SELECT * FROM foo where name = '%s'", name) q := "SELECT * FROM foo where name = " + name //     import "crypto/md5"</span></span></code> </pre> <br><h2 id="maligned">  difitnah </h2><br><p>  Di Go, urutan bidang dalam struktur memengaruhi konsumsi memori.  Memfitnah menemukan penyortiran tidak optimal.  Dengan urutan bidang ini: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { a <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> }</code> </pre> <br><p>  Struktur akan menempati 32 bit dalam memori karena penambahan bit kosong setelah bidang a dan c. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9b9/3e3/b67/9b93e3b6777d84459548ac9247b4e76f.jpg" alt="gambar"></p><br><p>  Jika kita mengubah penyortiran dan menyatukan dua bidang bool, maka struktur hanya akan mengambil 24 bit: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ec5/557/62b/ec555762b87fc61b410675ad4fbd8ac2.jpg" alt="gambar"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gambar asli di stackoverflow</a> </p><br><h3 id="goconst">  goconst </h3><br><p>  Variabel magis dalam kode tidak mencerminkan makna dan menyulitkan membaca.  Goconst menemukan literal dan angka yang muncul dalam kode 2 kali atau lebih.  Harap dicatat, sering kali penggunaan tunggal dapat menjadi kesalahan. </p><br><h3 id="gocyclo">  gocyclo </h3><br><p>  Kami menganggap <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kompleksitas</a> kode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">siklomatik</a> sebagai metrik penting.  Gocycle menunjukkan kompleksitas untuk setiap fungsi.  Hanya fungsi yang melebihi nilai yang ditentukan yang dapat ditampilkan. </p><br><pre> <code class="hljs pgsql">gocyclo -<span class="hljs-keyword"><span class="hljs-keyword">over</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> package/<span class="hljs-type"><span class="hljs-type">name</span></span></code> </pre> <br><p>  Kami memilih nilai ambang 7 untuk diri kami sendiri, karena kami tidak menemukan kode dengan kompleksitas lebih tinggi yang tidak memerlukan refactoring. </p><br><h3 id="mertvyy-kod">  Kode mati </h3><br><p>  Ada beberapa utilitas untuk menemukan kode yang tidak digunakan, fungsinya sebagian mungkin tumpang tindih. </p><br><ul><li>  ineffassign: memeriksa tugas yang tidak berguna </li></ul><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} log.Println(res) res, err := loadData() <span class="hljs-comment"><span class="hljs-comment">//  res    return err }</span></span></code> </pre> <br><ul><li>  deadcode: menemukan fungsi yang tidak digunakan </li><li>  tidak digunakan: menemukan fungsi yang tidak digunakan, tetapi apakah itu lebih baik daripada deadcode </li></ul><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unusedFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { formallyUsedFunc() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formallyUsedFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { }</code> </pre> <br><p>  Akibatnya, yang tidak terpakai akan mengarah ke kedua fungsi sekaligus, dan deadcode hanya ke unusedFunc.  Berkat ini, kode tambahan dihapus dalam satu pass.  Juga tidak digunakan menemukan variabel yang tidak digunakan dan bidang struktur. </p><br><ul><li>  varcheck: menemukan variabel yang tidak digunakan </li><li>  batalkan konversi: menemukan konversi jenis yang tidak berguna </li></ul><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(res) <span class="hljs-comment"><span class="hljs-comment">// unconvert error</span></span></code> </pre> <br><p>  Jika tidak ada tugas untuk menghemat waktu yang diperlukan untuk meluncurkan cek, lebih baik menjalankan semuanya bersama-sama.  Jika optimasi diperlukan, saya sarankan menggunakan yang tidak terpakai dan tidak bertobat. </p><br><h2 id="kak-eto-vse-udobno-nastroit">  Betapa nyamannya mengkonfigurasi </h2><br><p>  Menjalankan alat-alat di atas secara berurutan tidak nyaman: kesalahan dikeluarkan dalam format yang berbeda, eksekusi membutuhkan banyak waktu.  Memeriksa salah satu layanan kami dengan ukuran ~ 8000 baris kode membutuhkan waktu lebih dari dua menit.  Anda juga harus menginstal utilitas secara terpisah. </p><br><p>  Ada utilitas agregasi untuk menyelesaikan masalah ini, misalnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">goreporter</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gometalinter</a> .  Goreporter membuat laporan dalam html, dan gometalinter menulis ke konsol. </p><br><p>  Gometalinter masih digunakan di beberapa proyek besar (mis. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Buruh pelabuhan</a> ).  Dia tahu cara menginstal semua utilitas dengan satu perintah, menjalankannya secara paralel, dan memformat kesalahan sesuai dengan templat.  Waktu eksekusi dalam layanan di atas dikurangi menjadi satu setengah menit. </p><br><p>  Agregasi hanya bekerja dengan kebetulan yang tepat dari teks kesalahan, oleh karena itu, kesalahan berulang tidak bisa dihindari pada output. </p><br><p>  Pada bulan Mei 2018, proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">golangci-lint</a> muncul di github, yang jauh melampaui kenyamanan pengguna logam: </p><br><ul><li>  waktu pelaksanaan pada proyek yang sama dikurangi menjadi 16 detik (8 kali) </li><li>  hampir tidak ada kesalahan rangkap </li><li>  hapus yaml config </li><li>  output kesalahan yang bagus dengan garis kode dan pointer ke masalah <br><img src="https://habrastorage.org/webt/nu/ro/vi/nuroviwafnlgpzkyijvsucjwzme.png"></li><li>  tidak perlu menginstal utilitas tambahan </li></ul><br><p>  Sekarang peningkatan kecepatan disediakan dengan menggunakan kembali SSA dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">loader</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Program</a> , di masa depan juga direncanakan untuk menggunakan kembali pohon AST, yang saya tulis di awal bagian Tools. </p><br><p>  Pada saat menulis artikel ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hub.docker.com</a> tidak ada gambar dengan dokumentasi, jadi kami membuat sendiri, disesuaikan sesuai dengan ide-ide kami tentang kenyamanan.  Di masa depan, konfigurasi akan berubah, jadi untuk produksi kami sarankan menggantinya dengan milik Anda.  Untuk melakukan ini, cukup tambahkan file .golangci.yaml ke direktori root proyek ( <a href="">contohnya</a> ada di repositori golangci-lint). </p><br><pre> <code class="bash hljs">PACKAGE=package/name docker run --rm -t \ -v $(GOPATH)/src/$(PACKAGE):/go/src/$(PACKAGE) \ -w /go/src/$(PACKAGE) \ roistat/golangci-lint</code> </pre> <br><p>  Perintah ini dapat menguji seluruh proyek.  Misalnya, jika ada di <code>~/go/src/project</code> , maka ubah nilai variabel menjadi <code>PACKAGE=project</code> .  Validasi bekerja secara rekursif pada semua paket internal. </p><br><p>  Harap dicatat bahwa perintah ini hanya berfungsi dengan benar saat menggunakan vendor. </p><br><h1 id="vnedrenie">  Implementasi </h1><br><p>  Semua layanan pengembangan kami menggunakan buruh pelabuhan.  Setiap proyek berjalan tanpa lingkungan go diinstal.  Untuk menjalankan perintah, gunakan Makefile dan tambahkan perintah lint ke sana: </p><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">lint:</span></span> @docker run --rm -t -v $(GOPATH)/src/$(PACKAGE)<span class="hljs-symbol"><span class="hljs-symbol">:/go/src/</span></span>$(PACKAGE) -w /go/src/$(PACKAGE) roistat/golangci-lint</code> </pre> <br><p>  Sekarang cek dimulai dengan perintah ini: </p><br><pre> <code class="bash hljs">make lint</code> </pre> <br><p>  Ada cara mudah untuk memblokir kode dengan kesalahan saat memasuki master - buat pre-accept-hook.  Sangat cocok jika: </p><br><ol><li>  Anda memiliki proyek kecil dan beberapa dependensi (atau mereka berada di repositori) </li><li>  Tidak masalah bagi Anda untuk menunggu perintah <code>git push</code> selesai selama beberapa menit </li></ol><br><p>  Petunjuk konfigurasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hook</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gitlab</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bitbucket Server</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github Enterprise</a> . </p><br><p>  Dalam kasus lain, lebih baik menggunakan CI dan melarang menggabungkan kode yang setidaknya ada satu kesalahan.  Kami melakukan hal itu, menambahkan peluncuran linter sebelum tes. </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Pengenalan ulasan sistematis telah secara signifikan mengurangi periode ulasan.  Namun, hal lain yang lebih penting: sekarang kita dapat mendiskusikan gambaran besar dan arsitektur sebagian besar waktu.  Ini memungkinkan Anda untuk memikirkan pengembangan proyek alih-alih memasukkan lubang. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413175/">https://habr.com/ru/post/id413175/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413165/index.html">Penjelasan SRTP</a></li>
<li><a href="../id413167/index.html">Bagaimana cara mengintegrasikan Zimbra dengan sistem DLP?</a></li>
<li><a href="../id413169/index.html">Array dan Metode Objek yang Berguna dalam JavaScript</a></li>
<li><a href="../id413171/index.html">Tokamak JET Meluncurkan Kampanye Deuterium Tritium Baru</a></li>
<li><a href="../id413173/index.html">Memantau kesalahan JavaScript dengan window.onerror</a></li>
<li><a href="../id413177/index.html">Acara digital di Moskow dari 4 hingga 10 Juni</a></li>
<li><a href="../id413181/index.html">Ketika panggilan fungsi eksternal lebih cepat dari panggilan C asli</a></li>
<li><a href="../id413183/index.html">Optane DC Persistent Memory - Optane dalam format DIMM</a></li>
<li><a href="../id413185/index.html">Bermain curang, atau bagaimana penyelenggara undian menipu kita</a></li>
<li><a href="../id413189/index.html">Koleksi css eyeshadows Box-shadows.css</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>