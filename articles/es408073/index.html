<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÅ üë¶üèª üï∫ C√≥mo desarrollamos la plataforma de joyer√≠a electr√≥nica. üë©üèΩ‚Äçü§ù‚Äçüë®üèø üöµüèº üìÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La idea de cruzar productos electr√≥nicos y joyas es muy antigua. Por lo tanto, cuando la recordamos, la b√∫squeda arroj√≥ una gran cantidad de trabajos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo desarrollamos la plataforma de joyer√≠a electr√≥nica.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408073/"> La idea de cruzar productos electr√≥nicos y joyas es muy antigua.  Por lo tanto, cuando la recordamos, la b√∫squeda arroj√≥ una gran cantidad de trabajos sobre este tema.  Es cierto, a menudo, la joyer√≠a electr√≥nica significaba joyer√≠a hecha de electr√≥nica: piezas de un tablero revestido de epoxi, elementos, colgantes, microcircuitos.  Quer√≠amos hacer decoraciones LED.  No es como en los juguetes chinos que se venden en cada esquina, porque todo es poco interesante en ellos: hay varios programas de flasheo que se pueden cambiar con un bot√≥n, pero algo m√°s complicado e interesante.  Por ejemplo, las luces de marcha que responden a la luz ambiental, se iluminan m√°s en la oscuridad y se aten√∫an en la luz.  O parpadeando al ritmo de la m√∫sica circundante.  O cambiando de color dependiendo de la temperatura alrededor.  O mostrar la frecuencia card√≠aca del usuario.  En otras palabras, quer√≠amos alg√∫n tipo de reacci√≥n activa.  Debo decir de inmediato: result√≥ algo como esto: <br><br><img src="https://habrastorage.org/webt/uz/qz/rx/uzqzrxdscialsafiiwgbicm2rqu.jpeg"><br><a name="habracut"></a><br>  <i>Advertencia: este art√≠culo fue escrito principalmente para especialistas no t√©cnicos, por lo tanto, tiene algunas simplificaciones que pueden causar la desaprobaci√≥n de los ingenieros.</i>  <i>Si√©ntase libre de expresarlos.</i> <br><br>  Por lo tanto, se formaron los requisitos para la parte electr√≥nica: <br><br><ul><li>  debe haber varios LED controlados (controlados, esto significa que no solo podemos encender y apagar su brillo, sino tambi√©n controlar su brillo y, lo que es m√°s importante, su color); </li><li>  se requiere al menos un sensor: un sensor de luz, un sensor de temperatura o un micr√≥fono.  Los sensores de frecuencia card√≠aca se han pospuesto hasta ahora: requieren un acercamiento directo al cuerpo (por lo tanto, su brazalete de ejercicio es in√∫til a este respecto si lo coloca encima de la camisa); </li><li>  El control debe ser programable.  Esto significa que en cualquier momento podemos cambiar la l√≥gica de control de los LED a una m√°s adecuada para el entorno de la decoraci√≥n terminada, por ejemplo, si los colores fr√≠os prevalecen en la decoraci√≥n, entonces hacer que el brillo sea apropiado; </li><li>  el dispositivo debe ser compacto y liviano, porque los objetos pesados ‚Äã‚Äãlimitan en gran medida la posibilidad de su uso; </li><li>  El circuito debe ser alimentado por bater√≠as o bater√≠as que se pueden comprar en cualquier esquina, para la comodidad del consumidor. </li></ul><br>  Habiendo arreglado estos requisitos, comenzamos a pensar seriamente.  Como cualquier tarea t√©cnica, esta ten√≠a muchas soluciones. <br><br>  Por ejemplo, podr√≠amos tomar un constructor est√°ndar como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LiliPad</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adafruit GEMMA</a> , creado solo para estos fines.  Si observa ejemplos de GEMMA, puede ver una gran cantidad de proyectos similares con LED, incluso hay pendientes.  Desafortunadamente, el dise√±ador se adapta muy bien en la etapa de prototipo, cuando el dispositivo debe ensamblarse a partir de tierra y palos para verificar si funciona, pero, por desgracia, no es absolutamente adecuado para ninguna serie peque√±a: los conectores adicionales, las conexiones y la construcci√≥n en general interfieren .  Bueno, el costo del dise√±ador y sus partes (y recordamos que todav√≠a necesitamos LED y sensores) tambi√©n juega desagradablemente con el costo del producto final, no en la direcci√≥n m√°s interesante para el comprador.  Por lo tanto, los dise√±adores son una buena opci√≥n, pero dan lugar a una gran cantidad de preguntas. <br><br>  Una alternativa es desarrollar la parte electr√≥nica como un todo e independientemente.  Este camino es m√°s simple (ya que podemos dejar solo lo que se necesita) y dif√≠cil (porque crear un dispositivo programable incluso para nuestra tarea aparentemente simple tiene muchas trampas y soluciones de compromiso).  Por supuesto, al ver una oportunidad tan maravillosa para estirar algunas partes del cuerpo, no pudimos pasar. <br><br>  Aqu√≠, probablemente, vale la pena hacer una breve excursi√≥n a la fabricaci√≥n de productos electr√≥nicos y c√≥mo sucede esto. <br><br><div class="spoiler">  <b class="spoiler_title">C√≥mo hacer electr√≥nica en tus dedos</b> <div class="spoiler_text">  Primero, se forman la idea y los requisitos para el dispositivo (bueno, lo que ya hemos hecho).  Luego, estos requisitos se discuten con especialistas en electr√≥nica y se aclaran conjuntamente: el proyecto est√° repleto de detalles y matices. <br><br>  Se dibuja un diagrama esquem√°tico del dispositivo: c√≥mo se deben conectar los componentes electr√≥nicos entre s√≠ para poder trabajar juntos.  El esquema se verifica en la pr√°ctica: a partir de los medios disponibles y el primer dispositivo se ensambla en el cableado.  Si funciona, significa que el esquema original era correcto y puede seguir adelante. <br><br>  Una vez que tenemos un diagrama de circuito probado del dispositivo, comienza la parte m√°s interesante: el dise√±o de la PCB, es decir  una pieza de PCB con pistas en las que se sueldan componentes electr√≥nicos.  Por supuesto, puede hacer todo en el cableado, pero ser√° lento, aburrido y extremadamente poco confiable.  Adem√°s, la tecnolog√≠a moderna ha alcanzado tal proliferaci√≥n que es posible producir una placa de circuito impreso con calidad industrial por muy poco dinero.  Sin embargo, todav√≠a lo veremos.  Dise√±ar una placa de circuito impreso es mostrar c√≥mo organizaremos los elementos y c√≥mo se interconectar√°n.  O, simplemente, necesitamos volver a dibujar el diagrama del circuito maravillosamente y teniendo en cuenta las dimensiones f√≠sicas reales de las partes. <br><br>  Simplemente dise√±ar una placa de circuito impreso (en jerga profesional - "diluir") no es suficiente, todav√≠a necesita prepararla para la producci√≥n, es decir  generar el conjunto correcto de documentos, que incluye la apariencia del resultado, el esquema de pistas conductoras, el esquema de perforaci√≥n y metalizaci√≥n.  Por lo general, incluso los ingenieros experimentados no lo obtienen de inmediato, especialmente cuando el dispositivo no es simple.  Estos archivos (en formato Gerber) se transfieren a producci√≥n.  Mientras se libera la placa de circuito impreso, hay una compra de elementos que se le soldar√°n.  En un lenguaje profesional, la lista de dichos elementos se llama BoM (de la Lista de materiales en ingl√©s, una lista de componentes). <br><br>  Despu√©s de recibir la placa de circuito impreso y comprar todos los componentes necesarios, los elementos se montan en la placa, que puede ser manual (generalmente utilizada para tiradas peque√±as de hasta mil copias) o autom√°tica (con m√°quinas especiales para lotes grandes).  La instalaci√≥n manual se parece a un ingeniero con un soldador, que simplemente suelda los elementos a la placa de acuerdo con el esquema que se le proporcion√≥. <br><br>  Una vez completada la instalaci√≥n, el dispositivo se programa (si contiene microchips que lo permiten) y se prueba, es decir,  Se verifica su operatividad y resistencia a diversas influencias externas.  Si el dispositivo ha pasado todas las pruebas, se reconoce que est√° operativo y se transfiere m√°s al paquete (es decir, a su colocaci√≥n en una caja) o para su posterior procesamiento (como en nuestro caso).  Si no, diagnostican las causas, reparan, vuelven a probar y lo rechazan permanentemente o lo transmiten. <br><br>  En general, el proceso de fabricaci√≥n de productos electr√≥nicos no es el m√°s simple y trivial.  Si est√° decidido a seguir esta ruta, le recomendamos encarecidamente que obtenga el apoyo de ingenieros calificados en esta √°rea, preferiblemente con experiencia en este asunto. <br></div></div><br>  Entonces, tenemos una idea y hay requisitos.  Queda por encarnarlos "en la gl√°ndula". <br><br>  Las reflexiones sobre la cuesti√≥n dieron lugar a una gran cantidad de dudas: <br><br><ul><li>  Los LED son elementos bastante "glotones", ya que son fuentes de luz.  Los LED controlados son tres veces "hambrientos", porque en esencia son tres LED diferentes combinados en una carcasa (componentes de color rojo, verde y azul).  Y, como recordamos, quer√≠amos un dispositivo compacto, es decir,  para una bater√≠a grande, simplemente no tenemos espacio; </li><li>  La bater√≠a y la energ√≠a son el cuello de botella del proyecto en su conjunto.  Perm√≠tame recordarle que, de acuerdo con el plan, adem√°s de los LED, debe haber sensores y un circuito de control de incandescencia que tambi√©n consuman energ√≠a el√©ctrica.  Y es poco probable que el comprador est√© satisfecho si sus joyas funcionar√°n durante varios minutos y luego requieren un cambio de bater√≠as; </li><li>  el dispositivo debe ser programable, es decir  debemos poder controlar el brillo en el nivel del programa.  Que autom√°ticamente requiere un dispositivo microprocesador llamado microcontrolador.  Este es un chip al que puede conectar tanto LED como sensores.  En su interior hay un simple microprocesador y memoria, que le permite escribir un programa para controlar todos los dispositivos conectados.  Y este microcontrolador, como se desprende de los p√°rrafos anteriores, debe consumir muy poca energ√≠a el√©ctrica, para no condenar al usuario a un cambio constante de bater√≠as; </li><li>  Como hay tantos sensores diferentes, se decidi√≥ centrarse en uno solo: el sensor de luz.  Se utiliza un fotorresistor como tal sensor, que funciona de acuerdo con este principio: si la luz cae sobre √©l, entonces su resistencia disminuye, si est√° en la oscuridad, aumenta.  Este es un sensor simple, al conectarlo a la entrada del microcontrolador, obtenemos un dispositivo para medir la iluminaci√≥n.  Mirando hacia el futuro, dir√© que hay sensores de temperatura y sonido que funcionan de acuerdo con los mismos principios y pueden reemplazar la fotorresistencia sin hacer cambios significativos en el circuito final; </li><li>  la placa de circuito impreso en la que se realizar√° la instalaci√≥n debe ser redonda o con esquinas biseladas; nuevamente, por razones est√©ticas, no hay tantas decoraciones rectangulares y cuadradas. </li></ul><br>  Entonces, profundizamos en la b√∫squeda, clasificamos las combinaciones y como resultado obtenemos una soluci√≥n que nos satisface: <br><br><ol><li>  potencia: una bater√≠a CR2032 est√°ndar, tambi√©n es una "tableta", del tama√±o de una moneda de diez rublos.  Proporciona 3 voltios, se almacena durante mucho tiempo, funciona en una amplia gama de temperaturas, es barato, se vende en cualquier supermercado.  El soporte para tal bater√≠a es terriblemente simple y tambi√©n muy econ√≥mico; </li><li>  microcontrolador - Atmel Attiny85, compacto, de baja potencia, f√°cilmente programable, barato.  Una ventaja adicional es que este chip tiene una entrada anal√≥gica (es decir, puede conectar un sensor all√≠ sin circuitos adicionales) y una peque√±a cantidad de patas (que en nuestro deseo de compacidad es una gran ventaja); </li><li>  Los LED son SK6812 mini, que son de 3,5 mm por 3,5 mm.  Nos pareci√≥ que los LED ordinarios de cinco mil√≠metros ser√°n muy generales y muy glotones para este circuito.  Adem√°s, generalmente se suministran con un voltaje de 5 voltios, y nuestra bater√≠a proporciona solo 3 voltios, es decir,  para trabajar, necesitar√≠a usar un convertidor, que no quer√≠a </li><li>  un fotorresistor es un sensor de luz, uno tradicional, que se utiliza en c√°maras e intercomunicadores para determinar el inicio de la noche. </li></ol><br>  Una vez que hayamos decidido los componentes, descargue la documentaci√≥n del controlador y los LED y sum√©rjase en el estudio.  Aparecen matices: los LED est√°n conectados en serie, "por tren" y controlados por un cable, en el que el controlador debe formar una se√±al de una manera especial, en t√©rminos generales, enviar una cierta secuencia de n√∫meros, cada uno de los cuales significar√° con qu√© intensidad se enciende cada uno de los LED incorporados (y nosotros recuerda que en un caso tenemos tres de ellos: rojo, verde y azul).  Es decir  necesitamos enviar secuencialmente el brillo de rojo, verde y azul para el primer LED, luego para el segundo, luego para el tercero y as√≠ sucesivamente, dependiendo de cu√°ntos de ellos est√©n encendidos en serie.  Si vio tiras de LED en tiendas de construcci√≥n que brillan con todos los rayos del arco iris, entonces sepa que funcionan aproximadamente por el mismo principio. <br><br>  Adem√°s de controlar estos LED, se requiere protecci√≥n contra interferencias, que requerir√° un condensador para cada LED.  Adem√°s, se requiere el mismo condensador de interferencia para el microcontrolador. <br><br>  Adem√°s, los LED, incluso en un dise√±o tan compacto, siguen siendo codiciosos de energ√≠a.  Por lo tanto, su codicia debe ser limitada, y tenemos un limitador: la resistencia.  Es decir  Cada LED requiere una resistencia limitadora de corriente adicional.  Es curioso que durante el desarrollo del producto result√≥ que estas resistencias no ayudan mucho, pero cu√°nto da√±an: con el n√∫mero de LED m√°s de cuatro, hubo una falta de corriente y tuve que cambiarlos a cero ohmios, es decir.  puentes comunes para que los LED funcionen correctamente.  En versiones posteriores del esquema, los eliminamos por completo. <br><br>  La fotorresistencia tambi√©n requer√≠a una resistencia adicional que actuara como un divisor de voltaje.  Puede encontrar ejemplos completos de esquemas de conexi√≥n si conduce en el motor de b√∫squeda "conexi√≥n arduino de un fotorresistor". <br><br>  Por separado, vale la pena mencionar para programar el microcontrolador: para cargar el firmware (c√≥digo de programa en forma binaria) en Attiny85, se requiere un dispositivo especial: un "programador".  Afortunadamente, se ensambla sobre la base del dise√±ador electr√≥nico Arduino (que incluye a su hermano mayor, tambi√©n un microcontrolador Atmel, pero m√°s serio), que se puede comprar en cualquier tienda electr√≥nica o en China por poco dinero. <br><br>  Y, por √∫ltimo, el cambio: no queremos que el usuario inserte y extraiga constantemente la bater√≠a. <br><br>  Sin embargo, a pesar de todo lo anterior, el diagrama del circuito result√≥ ser simple en comparaci√≥n con la mayor√≠a de los dispositivos dom√©sticos (lo m√°s probable es que su flujo t√©rmico sea m√°s complicado en electr√≥nica que nuestro circuito): <br><br><img src="https://habrastorage.org/webt/hg/ts/p7/hgtsp7br6z-gthfvr0cbgyeonzy.png"><br><br>  Como resultado, obtuvimos un dispositivo que tiene dimensiones ligeramente m√°s grandes que una bater√≠a de tableta normal.  En realidad, la bater√≠a y el interruptor se colocan en un lado, los LED, el microcontrolador y el sensor de luz en el otro.  Dado que los LED tambi√©n pueden afectar el sensor de luz ubicado cerca (por ejemplo, enci√©ndalo para que suponga que el c√≠rculo es ligero, aunque de hecho todav√≠a puede haber esa oscuridad), se decidi√≥ montarlo con la capacidad de doblarlo en un plano perpendicular a la direcci√≥n resplandor <br><br>  Como resultado del cableado, obtuvimos una placa de circuito impreso bastante simple.  Antes de realizar el cableado, verificamos el circuito y result√≥ que funcionaba, aunque con una advertencia: lo probamos en una fuente de alimentaci√≥n constante, no en una bater√≠a, por lo que el temor de que una bater√≠a tan peque√±a dure por un corto tiempo se mantuvo hasta el momento en que soldamos los primeros dispositivos. <br><br>  Entonces, el circuito est√° hecho, la junta est√° divorciada.  Y luego el primer compromiso: el hecho es que los microcontroladores Attiny85 est√°n disponibles en dos tipos de casos: DIP (estos son microcircuitos cl√°sicos con patas de clavija que probablemente vio al comienzo de la propagaci√≥n de la electr√≥nica y los dispositivos simples) y SO (estos son microcircuitos planos, peque√±o y compacto, que no requiere agujeros adicionales para soldar y montado en la parte superior de la placa mediante soldadura).  En el momento del dise√±o, el componente SO de nuestro proveedor era m√°s costoso y, lo m√°s importante, no estaba disponible.  Por lo tanto, tomamos la versi√≥n DIP, pero con la expectativa de que primero la programemos, y luego muerdamos suavemente las patas y la sueldemos como SO, directamente a la placa.  Esto introdujo un riesgo tecnol√≥gico adicional: cambiar el firmware de esta opci√≥n despu√©s de soldar el microcontrolador en la placa no ser√≠a una tarea muy trivial, pero ¬øa qui√©n no le gustan las dificultades? <br><br><img src="https://habrastorage.org/webt/fl/6a/xf/fl6axfi3kxuermcoedmtb-l6o4u.jpeg" alt="Attiny85 DIP / SO"><br><br>  Pedimos tableros en China, all√≠ se depur√≥ este proceso y comenzamos a ensamblar los componentes.  Los LED y los soportes de la bater√≠a tambi√©n se pidieron en China, o no estaban en el mercado local o costaban dinero indecente.  El resto fue comprado en el supermercado electr√≥nico m√°s cercano.  Los microcontroladores tambi√©n se pod√≠an pedir en China, pero una gran cantidad de comentarios negativos y nuestra propia experiencia triste (cuando los componentes enviados no proporcionaron una calidad lo suficientemente buena) nos impidieron dar ese paso.  Por lo tanto, cuando recibimos las placas de circuito impreso terminadas, todo el BoM estaba en nuestras manos.  Incluso queda tiempo para soldar lentamente el programador para microcontroladores. <br><br><img src="https://habrastorage.org/webt/ni/go/qo/nigoqohjskm-xouftocvfrydfwa.jpeg"><br><br>  Despu√©s de recibir las placas, soldamos un dispositivo de prueba.  Dado que el programa para el microcontrolador se pospuso hasta que se recibi√≥ el dispositivo terminado (y eso fue correcto, explicar√© por qu√© un poco m√°s tarde), no soldamos el microcontrolador "para siempre", sino que hicimos una almohadilla de transici√≥n en la que el microcircuito se puede insertar en el cartucho como una bombilla.  Como se esperaba, el dispositivo no funcion√≥.  Al observar de cerca el dispositivo (durante un par de horas), encontramos un error: los LED no estaban soldados correctamente.  El hecho es que al instalar microchips y elementos con una gran cantidad de patas, es muy importante no confundir estas patas y colocar el elemento correctamente.  Para hacer esto, los ingenieros en la marca en la placa de circuito impreso usan una llave, una imagen de un punto que debe coincidir con la misma en el cuerpo del chip.  Como resultado, el proceso de soldadura de un elemento as√≠ se ve as√≠: combinamos las teclas, soldamos una pata y soldamos todas las dem√°s.  Confundir la clave generalmente est√° lleno de consecuencias negativas: el autor de estas l√≠neas empuj√≥ de alguna manera el microcontrolador hacia el programador en el lado equivocado, despu√©s de cinco segundos ol√≠a a frito en el aire, y el dedo que toc√≥ el chip recibi√≥ una quemada en forma de caja.  Afortunadamente, nadie m√°s result√≥ herido y, despu√©s de enfriarse, el microcontrolador tambi√©n sigui√≥ funcionando. <br><br>  Entonces, al dise√±ar nuestra placa, aplicamos una descripci√≥n propia para los LED (los SK6812 de tres mil√≠metros son bastante raros que WS2812) y se confundi√≥ con una llave de manera segura.  Como resultado, durante la instalaci√≥n, la tecla LED debe estar en el otro lado en relaci√≥n con la tecla marcada en la placa.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El tablero de prueba fue con seguridad a la chatarra. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda muestra de prueba ya se cre√≥ teniendo en cuenta este error. </font><font style="vertical-align: inherit;">Ahora est√°bamos seguros de que nuestro circuito estaba operativo y empezamos a programar el firmware. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se ve√≠a as√≠:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el microcontrolador se insert√≥ en el programador; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el firmware fue vertido en √©l; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el chip fue removido e insertado en el dispositivo; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se encendi√≥ la alimentaci√≥n y se comprob√≥ la operabilidad; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> todo se repiti√≥ al principio. </font></font></li></ul><br><img src="https://habrastorage.org/webt/bi/ng/bd/bingbd5ygulzpskw2ej_qcfjlxu.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observo que a veces durante el d√≠a esta operaci√≥n tuvo que repetirse varias docenas de veces. </font><font style="vertical-align: inherit;">Fue posible soldar el programador directamente al chip de la placa, pero, como recordar√°, no estamos buscando formas f√°ciles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n en la etapa de programaci√≥n, se revelaron muchas cosas interesantes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todo comenz√≥ con el hecho de que ninguna de las bibliotecas est√°ndar para trabajar con LED controlados funcion√≥. La raz√≥n no estaba en un lugar, sino en dos. En primer lugar, los intervalos de tiempo para codificar las se√±ales de control estaban destinados a otros tipos de LED y no coincid√≠an ligeramente con los indicados en la documentaci√≥n para los nuestros. En segundo lugar, result√≥ que el microcontrolador en el caso de la energ√≠a de la bater√≠a funciona a una frecuencia m√°s baja y, de forma predeterminada, puede reducirlo a√∫n m√°s para ahorrar energ√≠a (que lo hace cuando est√° en la bater√≠a), lo que nuevamente conduce a un cambio en los intervalos de tiempo para controlar los LED. Un par de horas en un abrazo con un osciloscopio ayud√≥ a ajustar la biblioteca a los intervalos deseados, y media hora y algunos experimentos nos permitieron encontrar un comando que proh√≠be que el microcontrolador cambie la frecuencia del trabajo.Como resultado de una batalla de mediano a largo, pudimos controlar normalmente los LED, ilumin√°ndolos con los colores que necesit√°bamos, y no en un orden completamente al azar.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda sorpresa present√≥ un sensor de luz. Despu√©s de programarlo, durante mucho tiempo no pudimos entender por qu√© no hubo reacci√≥n al cerrarlo con un dedo (es decir, atenuarlo completamente) de la palabra "completamente". La respuesta lleg√≥ despu√©s de unos d√≠as de mirar de cerca ejemplos de trabajo con tales sensores. Result√≥ que al configurar el puerto anal√≥gico al que se deb√≠a conectar el sensor, era necesario usar una numeraci√≥n y al leer las lecturas, otra (s√≠, tambi√©n record√© la broma "¬°Guau, hay un error en un d√≠gito, pero qu√© diferencia!") . Despu√©s de esta realizaci√≥n, todo funcion√≥ como deber√≠a. El firmware fue escrito. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como nos enviaron no una, y no dos placas de circuito impreso, sino diez a la vez (una, como recordamos, fue eliminada), soldamos con alegr√≠a todas las dem√°s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Result√≥ que la ley de los grandes n√∫meros tambi√©n funciona en peque√±os lotes (aparecieron fallas de producci√≥n en dos de cada diez tableros), nuestros colegas chinos no hicieron suficientes conexiones el√©ctricas entre las capas frontal y posterior del tablero, y como resultado, nada funcion√≥ debido a la falta de energ√≠a. Afortunadamente, esto se elimina f√°cilmente soldando los agujeros de la capa intermedia con el conductor. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los dispositivos se ensamblan, prueban y transfieren para su posterior procesamiento para dar la apariencia de una decoraci√≥n terminada. De hecho, no pasamos m√°s de una semana en todo el desarrollo, pero debido a distracciones para otras tareas y expectativas (tiempo libre, componentes, placas de circuito impreso), todo este proceso se extendi√≥ durante un intervalo de medio a√±o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si alguien est√° interesado, el c√≥digo fuente y los materiales del proyecto se publican en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La historia no termina ah√≠. Despu√©s de la primera experiencia instructiva, hicimos varias versiones m√°s del tablero. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda versi√≥n estaba en dos versiones: con seis LED en un c√≠rculo y cuatro (uno en el centro) y difer√≠a en que aqu√≠ usamos la codificaci√≥n SO del chip. Pero aqu√≠, hubo algunos excesos: al cablear la placa debido a la confusi√≥n en los nombres, se eligi√≥ el √°rea de contacto incorrecta y, como resultado, las patas del chip para la instalaci√≥n tuvieron que empujarse debajo de la carcasa. Adem√°s, sacaron los contactos para el firmware y los tres "tierra de se√±al de alimentaci√≥n" para separar los sitios, para poder agregar m√°s LED como elemento externo.</font></font><br><br><img src="https://habrastorage.org/webt/r9/lj/lc/r9ljlchh7gttw_jiyfdhzhcylq4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, se revel√≥ otro inconveniente desagradable: el maestro me pidi√≥ que hiciera el tablero perfectamente redondo (en nuestra versi√≥n, se parec√≠a m√°s a un rect√°ngulo con esquinas redondeadas). Lo hicieron al verificar simult√°neamente la industria china para la producci√≥n de placas de circuito m√°s delgadas de un mil√≠metro de espesor. El resultado fue completamente satisfactorio: al reemplazar los soportes con los dise√±ados para las bater√≠as CR2016, obtuvimos una plataforma a√∫n m√°s liviana, de la que ya puede hacer, por ejemplo, aretes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para el firmware de estos dispositivos, se utiliz√≥ el programador a la "granja colectiva" en el pin pogo. Al final result√≥ que, el procedimiento de carga de firmware segu√≠a siendo no trivial: era necesario presionar la placa firmemente contra los pines, lo que no fue posible de inmediato la primera vez.</font></font><br><br><img src="https://habrastorage.org/webt/dv/vd/u6/dvvdu6vhiegubulmejwyl220wec.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La apoteosis del desarrollo de esta rama de la plataforma fue la tercera y √∫ltima versi√≥n. </font><font style="vertical-align: inherit;">En √©l, los contactos para el firmware se mostraban en un cable flexible separado, se orden√≥ una placa adicional para el programador. </font><font style="vertical-align: inherit;">En esta iteraci√≥n, evaluamos el servicio Seeedstudio PCBA, que fabricaba placas de circuito impreso para nosotros: la industria china vino con las placas instaladas con la mayor√≠a de los elementos, soldamos el conector de contacto para el programador, el soporte de la bater√≠a, el fotorresistor y los LED en su lugar; no se encontraron (excepto el fotorresistor) en Componentes disponibles para la instalaci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado se parece a esto: </font></font><br><br><img src="https://habrastorage.org/webt/c8/fq/gj/c8fqgjh5buzgycilsgtg2l2lwxq.jpeg"><br><br><img src="https://habrastorage.org/webt/hh/xb/gz/hhxbgz7hpzidjydb0mskpxyrjl4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en general, el proyecto result√≥ ser interesante. </font><font style="vertical-align: inherit;">Al final result√≥ que, incluso las cosas aparentemente simples pueden ocultar matices bastante complejos en el interior, lo que se demostr√≥ claramente.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es408073/">https://habr.com/ru/post/es408073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es408061/index.html">Fuga de sonido en auriculares de conducci√≥n √≥sea con Aftershokz Trekz Titanium como ejemplo</a></li>
<li><a href="../es408063/index.html">Revisi√≥n de Honor 6A: el empleado de presupuesto es diferente</a></li>
<li><a href="../es408065/index.html">Los m√©dicos alemanes han cultivado piel transg√©nica en el 80% del cuerpo de un ni√±o.</a></li>
<li><a href="../es408067/index.html">De SimCity a Real Girlfriend: A Story of Simulation Games, Part 1</a></li>
<li><a href="../es408071/index.html">Ya 2.500 tiendas en l√≠nea est√°n minando en las computadoras de los visitantes</a></li>
<li><a href="../es408075/index.html">10 nuevas empresas cient√≠ficas prometedoras de 2017 seg√∫n C&EN</a></li>
<li><a href="../es408077/index.html">Por qu√© el iPhone 8 es mejor que el iPhone X</a></li>
<li><a href="../es408079/index.html">Nueva versi√≥n del motor Merlin para Falcon 9 explot√≥ durante las pruebas</a></li>
<li><a href="../es408081/index.html">A veces no funciona</a></li>
<li><a href="../es408083/index.html">Observaci√≥n dependiente de sat√©lites en aviaci√≥n civil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>