<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêú üé• üêë M√©thodes d'optimisation de code pour Redd. Partie 2: m√©moire non cache et fonctionnement sur bus parall√®le üîç üë©üèΩ‚ÄçüöÄ üòê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le dernier article, nous avons d√©couvert que le cache est certainement une chose utile, mais en ce qui concerne la logique du contr√¥leur, cela cr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>M√©thodes d'optimisation de code pour Redd. Partie 2: m√©moire non cache et fonctionnement sur bus parall√®le</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468027/">  Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dernier article,</a> nous avons d√©couvert que le cache est certainement une chose utile, mais en ce qui concerne la logique du contr√¥leur, cela cr√©e parfois des difficult√©s.  En particulier, il introduit l'impr√©visibilit√© des dur√©es d'impulsion ou d'autres retards dans la formation programmatique des chronogrammes.  Eh bien, et dans le plan "programmatique g√©n√©ral", le mauvais emplacement de la fonction peut r√©duire √† n√©ant le gain du cache, le provoquant constamment √† red√©marrer √† partir d'une m√©moire lente.  J'ai mentionn√© qu'il y a 15 ans, nous devions faire un pr√©processeur sp√©cial qui corrigeait les probl√®mes qui se posaient pour le processeur SPARC-8, et j'ai promis de dire √† quel point il serait facile de r√©soudre ces difficult√©s lors du d√©veloppement d'un processeur Nios II synth√©tis√© recommand√© pour une utilisation dans le package Redd.  Le moment est venu de tenir la promesse. <br><br><img src="https://habrastorage.org/webt/pr/sx/ix/prsxixkamqwdpusqqagnx0xnh1q.png"><br><a name="habracut"></a><br><h4>  Articles pr√©c√©dents de la s√©rie: </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement du ¬´firmware¬ª le plus simple pour les FPGA install√©s dans Redd, et d√©bogage en utilisant le test de m√©moire comme exemple.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement du ¬´firmware¬ª le plus simple pour les FPGA install√©s dans Redd.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2. Code de programme.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement de son propre noyau pour l'int√©gration dans un syst√®me de processeur FPGA.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement de programmes pour le processeur central Redd sur l'exemple d'acc√®s au FPGA.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les premi√®res exp√©riences utilisant le protocole de streaming sur l'exemple de la connexion du CPU et du processeur dans le FPGA du complexe Redd.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Joyeux Quartusel, ou comment le processeur est arriv√© √† une telle vie.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">M√©thodes d'optimisation de code pour Redd.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1: effet de cache.</a> </li></ol><br>  Aujourd'hui, notre livre de r√©f√©rence sera le <b>Manuel de conception int√©gr√©e</b> , ou plut√¥t sa section <b>7.5.</b>  <b>Utilisation de la m√©moire √©troitement coupl√©e avec le didacticiel du processeur Nios II</b> .  La section elle-m√™me est color√©e.  Aujourd'hui, nous concevons des syst√®mes de processeur pour les FPGA Intel dans le programme Platform Designer.  √Ä l'√©poque d'Altera, il s'appelait QSys (d'o√π l'extension <b>.qsys</b> du fichier projet).  Mais avant l'apparition de QSsys, tout le monde utilisait son anc√™tre, SOPC Builder (en m√©moire duquel l'extension de fichier <b>.sopcinfo</b> √©tait <b>rest√©e</b> ).  Donc, bien que le document soit marqu√© du logo Intel, mais les images qu'il contient sont des captures d'√©cran de ce SOPC Builder.  Il a √©t√© clairement r√©dig√© il y a plus de dix ans et, depuis lors, seuls des termes y ont √©t√© corrig√©s.  Certes, les textes sont assez modernes, donc ce document est tr√®s utile comme manuel de formation. <br><br><h2>  Pr√©paration de l'√©quipement </h2><br>  Alors.  Nous voulons ajouter de la m√©moire √† notre syst√®me de processeur Spartan, qui n'est jamais mis en cache et fonctionne en m√™me temps √† la vitesse la plus √©lev√©e possible.  Bien s√ªr, ce sera la m√©moire FPGA interne.  Nous ajouterons de la m√©moire pour le code et les donn√©es, mais ce seront des blocs diff√©rents.  Commen√ßons par la m√©moire de donn√©es comme la plus simple.  Nous <b>ajoutons la m√©moire OnChip</b> d√©j√† connue au syst√®me. <br><br><img src="https://habrastorage.org/webt/4g/vv/nx/4gvvnxooo_8rfteiku1wm4l6yr8.png"><br><br>  Eh bien, disons que son volume sera de 2 kilo-octets (le principal probl√®me avec la m√©moire interne du FPGA est qu'elle est petite, vous devez donc la sauvegarder).  Le reste est une m√©moire ordinaire, que nous avons d√©j√† ajout√©e. <br><br><img src="https://habrastorage.org/webt/jd/et/sj/jdetsj-2tvd6ou6xdr_rzggote4.png"><br><br>  Mais nous ne le connecterons pas au bus de donn√©es, mais √† un bus sp√©cial.  Pour le faire appara√Ætre, on va dans les propri√©t√©s du processeur, on va dans l'onglet <b>Caches et Interfaces m√©moire</b> et dans la liste de s√©lection <b>Nombre de ports ma√Ætre de donn√©es √©troitement coulp√©s</b> s√©lectionner la valeur 1. <br><br><img src="https://habrastorage.org/webt/bt/rj/m4/btrjm4ihtix-btomqh6ttgyjifs.png"><br><br>  Voici un nouveau port pour le processeur: <br><br><img src="https://habrastorage.org/webt/lm/j7/xu/lmj7xu6jk4lofwv9kdmdi1m4--u.png"><br><br>  Nous y avons r√©cemment connect√© le bloc de m√©moire nouvellement ajout√©! <br><br><img src="https://habrastorage.org/webt/ea/vf/t_/eavft_i05i9qb9sn5duyrxvgyda.png"><br><br>  Une autre astuce consiste √† attribuer des adresses √† cette nouvelle m√©moire.  Le document a une longue ligne de raisonnement sur l'optimalit√© du d√©codage d'adresse.  Il indique que la m√©moire non mise en cache doit √™tre distingu√©e de tous les autres types de m√©moire par un bit clairement exprim√© de l'adresse.  Par cons√©quent, dans le document, toute la m√©moire non-cache appartient √† la plage 0x2XXXXXXX.  Entrez donc manuellement l'adresse 0x2000000 et verrouillez-la afin qu'elle ne change pas avec les affectations automatiques suivantes. <br><br><img src="https://habrastorage.org/webt/nf/l3/qn/nfl3qn1zegllimprcc6xtol3yim.png"><br><br>  Eh bien, et purement pour l'esth√©tique, renommer le bloc ... Appelons-le, disons, <b>NonCachedData</b> . <br><br><img src="https://habrastorage.org/webt/7z/l-/8p/7zl-8pvknmn3thqgvx7cahpzzw8.png"><br><br>  Avec du mat√©riel pour la m√©moire de donn√©es non mise en cache, c'est tout.  Nous passons en m√©moire pour le stockage du code.  Tout est presque le m√™me ici, mais un peu plus compliqu√©.  En fait, tout peut √™tre fait de fa√ßon compl√®tement identique, seul le port ma√Ætre du bus s'ouvre dans la liste <b>Nombre de ports ma√Ætres d'instruction √©troitement coulp√©s</b> , cependant, il ne sera pas possible de d√©boguer un tel syst√®me.  Lorsque le programme est rempli avec le d√©bogueur, il y circule via le bus de donn√©es.  A l'arr√™t, le code d√©sassembl√© est √©galement lu par le d√©bogueur via le bus de donn√©es.  Et m√™me si le programme est charg√© depuis un chargeur externe (nous n'avons pas encore envisag√© une telle m√©thode, d'autant plus que dans la version gratuite de l'environnement de d√©veloppement nous sommes oblig√©s de travailler uniquement avec le d√©bogueur JTAG connect√©, mais en g√©n√©ral, personne n'interdit de le faire), le remplissage passe √©galement par le bus les donn√©es.  Par cons√©quent, la m√©moire devra faire double port.  √Ä un port, connectez un assistant d'instructions non mis en cache qui fonctionne en temps principal, et √† l'autre - un bus de donn√©es auxiliaire √† temps plein.  Il sera utilis√© pour t√©l√©charger le programme de l'ext√©rieur, ainsi que pour obtenir le contenu de la RAM par le d√©bogueur.  Le reste du temps, ce pneu sera inactif.  Voici √† quoi cela ressemble dans la partie th√©orique du document: <br><br><img src="https://habrastorage.org/webt/ks/sv/vt/kssvvtij9hdnujtgehodhaqwjmu.png"><br><blockquote>  Notez que le document n'explique pas pourquoi, mais il est √† noter que m√™me avec une m√©moire √† deux ports, un seul port peut √™tre connect√© √† un ma√Ætre non mis en cache.  Le second doit √™tre connect√© √† l'habituel. </blockquote>  Ajoutons 8 kilo-octets de m√©moire, faisons-en double port, laissons le reste par d√©faut: <br><br><img src="https://habrastorage.org/webt/kl/1q/_k/kl1q_kgyv67kvcjjzyiw-obrrm4.png"><br><br>  Ajoutez un port d'instructions non-cache au processeur: <br><br><img src="https://habrastorage.org/webt/tk/ib/2y/tkib2ydvc6f_lfi9nprwkzai0cu.png"><br><br>  Nous appelons la m√©moire <b>NonCachedCode</b> , connectons la m√©moire aux bus, lui attribuons l'adresse 0x20010000 et la verrouillons (pour les deux ports).  Total, nous obtenons quelque chose comme ceci: <br><br><img src="https://habrastorage.org/webt/84/1d/o_/841do_ssmf-r_a4ibqdyr2kksly.png"><br><br>  C‚Äôest tout.  Nous sauvegardons et g√©n√©rons le syst√®me, collectons le projet.  Le mat√©riel est pr√™t.  Nous passons √† la partie logiciel. <br><br><h2>  Pr√©paration du BSP dans la partie logicielle </h2><br>  Habituellement, apr√®s avoir chang√© le syst√®me de processeur, il suffit de s√©lectionner l'√©l√©ment de menu <b>G√©n√©rer BSP</b> , mais aujourd'hui, nous devons ouvrir l'√©diteur BSP.  Comme nous le faisons rarement, permettez-moi de vous rappeler o√π se trouve l'√©l√©ment de menu correspondant: <br><br><img src="https://habrastorage.org/webt/x4/nk/ub/x4nkubzhbxq26krtzce8nhuxmcw.png"><br><br>  L√†, nous allons √† l'onglet <b>Script</b> de l' <b>√©diteur de liens</b> .  Nous voyons que nous avons ajout√© des r√©gions qui h√©ritent des noms des blocs de RAM: <br><br><img src="https://habrastorage.org/webt/qs/_t/af/qs_taf1wiql9vccnl_7s_frbqci.png"><br><br>  Je vais montrer comment ajouter une section dans laquelle le code sera plac√©.  Dans la section section, cliquez sur Ajouter: <br><br><img src="https://habrastorage.org/webt/qa/8o/lu/qa8olur0jjxjhj2oz-dqwzmf3iy.png"><br><br>  Dans la fen√™tre qui appara√Æt, donnez le nom de la section (afin d'√©viter toute confusion dans l'article, je vais l'appeler tr√®s diff√©rent du nom de la r√©gion, √† savoir nccode) et l'associer √† la r√©gion (j'ai s√©lectionn√© <b>NonCachedCode</b> dans la liste): <br><br><img src="https://habrastorage.org/webt/ji/eo/to/jieotoad61gc1i-xarabcynmqyy.png"><br><br>  Voil√†, g√©n√©rez le BSP et fermez l'√©diteur. <br><br><h2>  Placer du code dans une nouvelle section m√©moire </h2><br>  Permettez-moi de vous rappeler que nous avons deux fonctions dans le programme h√©rit√© de l'article pr√©c√©dent: <b>MagicFunction1 ()</b> et <b>MagicFunction2 ()</b> .  Au premier passage, les deux ont charg√© leur corps dans la cache, visible sur l'oscilloscope.  De plus - selon la situation dans l'environnement, ils travaillaient √† vitesse maximale ou se frottaient constamment avec leur corps, provoquant des t√©l√©chargements constants de la SDRAM. <br><br>  D√©pla√ßons la premi√®re fonction vers un nouveau segment non mis en cache, laissons la seconde en place, puis effectuons quelques ex√©cutions. <br><blockquote>  Pour placer une fonction dans une nouvelle section, ajoutez-lui l'attribut de <b>section</b> . </blockquote>  Avant de d√©finir la fonction <b>MagicFunction1 ()</b> , <b>nous pla√ßons</b> √©galement sa d√©claration avec cet attribut: <br><br><pre><code class="plaintext hljs">void MagicFunction1()__attribute__ ((section("nccode"))); void MagicFunction1() { IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); ...</code> </pre> <br>  Nous effectuons la premi√®re ex√©cution d'une it√©ration de la boucle (j'ai mis un point d'arr√™t sur la ligne while): <br><pre> <code class="plaintext hljs"> while (1) { MagicFunction1(); MagicFunction2(); }</code> </pre><br>  Nous voyons le r√©sultat suivant: <br><br><img src="https://habrastorage.org/webt/vh/1q/jx/vh1qjxzrvwbudd99po6eerz47ja.png"><br><br>  Comme vous pouvez le voir, la premi√®re fonction est vraiment ex√©cut√©e √† vitesse maximale, la seconde est charg√©e depuis la SDRAM.  Ex√©cutez la deuxi√®me ex√©cution: <br><br><img src="https://habrastorage.org/webt/l9/ce/iv/l9ceivh_xyn8ip_xtyqv18u4i2a.png"><br><br>  Les deux fonctions fonctionnent √† vitesse maximale.  Et la premi√®re fonction ne d√©charge pas la seconde du cache, malgr√© le fait qu'entre eux se trouve l'insert que j'ai laiss√© apr√®s avoir √©crit le dernier article: <br><br><pre> <code class="plaintext hljs">volatile void FuncBetween() { Nops256 Nops256 Nops256 Nops64 Nops64 Nops64 Nops16 Nops16 }</code> </pre><br>  Cette insertion n'affecte plus la position relative des deux fonctions, car la premi√®re d'entre elles est partie dans une zone de m√©moire compl√®tement diff√©rente. <br><br><h2>  Quelques mots sur les donn√©es </h2><br>  De m√™me, vous pouvez cr√©er une section de donn√©es non mises en cache et y placer des variables globales, en leur attribuant le m√™me attribut, mais pour √©conomiser de l'espace, je ne donnerai pas de tels exemples. <br><br>  Nous avons cr√©√© une r√©gion pour une telle m√©moire, le mappage √† la section peut √™tre fait de la m√™me mani√®re que pour la section de code.  Il ne reste plus qu'√† comprendre comment affecter l'attribut correspondant √† une variable.  Voici le premier exemple de d√©claration de telles donn√©es trouv√©es dans les entrailles du code g√©n√©r√© automatiquement: <br><br><pre> <code class="plaintext hljs">volatile alt_u32 alt_log_boot_on_flag \ __attribute__ ((section (".sdata"))) = ALT_LOG_BOOT_ON_FLAG_SETTING;</code> </pre><br><h2>  Qu'est-ce que cela nous donne </h2><br>  Eh bien, en fait, √† partir de choses √©videntes: maintenant nous pouvons placer la partie principale du code dans SDRAM, et dans la section non cacheable, nous pouvons mettre en place ces fonctions qui forment des diagrammes de temps par programme, ou dont les performances devraient √™tre maximales, ce qui signifie qu'elles ne devraient pas ralentir en raison de qu'une autre fonction vide constamment le code correspondant du cache. <br><br><h2>  Examinez de pr√®s les pneus. </h2><br>  Examinez maintenant de pr√®s les pneus du syst√®me de processeur r√©sultant.  Nous en avons eu pr√®s de quatre.  J'ai encercl√© en rouge le bus principal (qui est l'union des deux, c'est pourquoi j'ai √©crit ¬´presque¬ª: physiquement - il y a deux pneus, mais logiquement - un).  J'ai mis en √©vidence en vert le bus menant √† la m√©moire d'instructions non mise en cache, en bleu - √† la m√©moire de donn√©es non mise en cache.  <b>Ces trois pneus fonctionnent en parall√®le et ind√©pendamment les uns des autres!</b> <br><br><img src="https://habrastorage.org/webt/kg/rv/wf/kgrvwfw1kncypo4x6mn4uehagng.png"><br><br>  Rappelez-vous, dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article sur le DMA,</a> j'ai soutenu que l'un des facteurs limitant les performances est que les donn√©es sont transmises sur le m√™me bus?  Le bloc DMA lit les donn√©es du bus, y √©crit des donn√©es et, en m√™me temps, le c≈ìur du processeur utilise le m√™me bus.  Comme vous pouvez le voir, cet inconv√©nient des syst√®mes ferm√©s est compl√®tement √©limin√© dans le FPGA.  Dans les contr√¥leurs pr√™ts √† l'emploi, les fabricants, lorsqu'ils √©tablissent des connexions, sont oblig√©s de d√©chirer entre les besoins et les capacit√©s.  Le programmeur peut avoir besoin de cette option.  Et tel.  Et tel.  Et donc ... Beaucoup de choses peuvent √™tre n√©cessaires.  Mais les ressources co√ªtent de l'argent, et il n'y a pas toujours assez d'espace pour elles sur le cristal s√©lectionn√©.  Vous ne pouvez pas tout publier.  Nous devons choisir ce dont tout le monde a vraiment besoin et ce qui est n√©cessaire dans des cas isol√©s.  Et quels cas isol√©s devraient √™tre introduits et lesquels devraient √™tre oubli√©s.  Et puis des solutions de compromis apparaissent, toutes les subtilit√©s dont, s'il y a un d√©sir de les utiliser, le programmeur doit garder √† l'esprit.  Dans notre cas, nous pouvons agir sans plus attendre.  Ce dont nous avons besoin aujourd'hui est pos√© aujourd'hui.  Notre ressource est flexible.  Nous le d√©pensons pour que l'√©quipement soit optimal pour notre t√¢che d'aujourd'hui.  Pour les t√¢ches de demain et d'hier, les ressources n'ont pas besoin d'√™tre r√©serv√©es.  Mais dans le cadre d'aujourd'hui, nous mettrons tout en place pour que le programme fonctionne aussi efficacement que possible, sans n√©cessiter de d√©lices de programmation sp√©ciaux. <br><br>  Il √©tait une fois, dans une universit√©, dans un cours sur les processeurs de signaux, nous avons appris l'art d'utiliser deux bus en parall√®le avec une √©quipe.  Pour autant que je sache, dans les contr√¥leurs ARM modernes, une connaissance d√©taill√©e de la matrice de bus permet √©galement une optimisation.  Mais tout cela est bien quand un d√©veloppeur travaille avec le m√™me syst√®me depuis des ann√©es.  Si vous devez piloter des pi√®ces de mat√©riel compl√®tement diff√©rentes d'un projet √† l'autre, vous ne pouvez pas tout m√©moriser.  Dans le cas des FPGA, nous n'√©tudions pas les caract√©ristiques de l'environnement, nous sommes libres de personnaliser l'environnement pour nous-m√™mes. <br><blockquote>  En ce qui concerne l'approche ¬´nous ne consacrons pas beaucoup de temps au d√©veloppement¬ª, cela ressemble √† ceci: <br>  Nous n'avons pas besoin de faire des efforts pour optimiser l'utilisation de pneus standard pr√™ts √† l'emploi, nous pouvons rapidement les poser de la mani√®re la plus optimale pour la t√¢che √† r√©soudre, terminer rapidement ce d√©veloppement auxiliaire et assurer rapidement le processus de d√©bogage ou de test du projet principal. </blockquote>  Jetons un coup d'≈ìil √† un exemple d'inclusion d'un bloc DMA du <b>guide de l'utilisateur IP des p√©riph√©riques int√©gr√©s</b> pour consolider le mat√©riel. <br><br><img src="https://habrastorage.org/webt/ww/hw/yg/wwhwygxdtfoxpuyftp00h2p_xde.png"><br><br>  Nous voyons trois connexions ind√©pendantes.  Donn√©es d'entr√©e (sur cette figure, il s'agit d'un bus projet√© sur la m√©moire), donn√©es de sortie (sur cette figure, il s'agit d'un type de bus compl√®tement diff√©rent - une interface de flux) et de communication avec le processeur de contr√¥le.  Personne ne se soucie de tout connecter √† diff√©rents bus, alors le travail se fera en parall√®le.  Les donn√©es d'entr√©e (par exemple, √† partir de la SDRAM) iront dans un flux, auquel personne n'interf√®re;  la sortie ira dans un flux diff√©rent, par exemple, vers le canal FT245-FIFO, que nous avons d√©j√† consid√©r√©;  et le processeur central ne rongera pas ces bus d'horloge, car le bus principal est isol√©.  Bien que dans ce cas, bien s√ªr, la m√©moire en SDRAM, se trouvant sur un bus s√©par√©, ne sera pas disponible par programme.  Mais personne ne l'emp√™chera d'√™tre lu par DMA.  Si l'objectif est d'atteindre des performances √©lev√©es avec le tampon, il doit √™tre atteint √† tout prix.  √Ä moins que l'ensemble du programme ne doive tenir dans la m√©moire int√©gr√©e au FPGA, car il n'y a pas d'autres unit√©s de stockage dans le mat√©riel Redd. <br><br>  Pour parall√©liser les pneus, vous pouvez √©galement utiliser des pneus non mis en cache, car nous avons vu qu'il peut y en avoir plusieurs.  Un certain nombre de restrictions sont impos√©es aux esclaves connect√©s √† ces bus: <br><br><ul><li>  l'esclave est toujours un sur le bus; </li><li>  l'esclave n'utilise pas le m√©canisme de retard du bus; </li><li>  la latence d'√©criture est toujours nulle; la latence de lecture est toujours une. </li></ul><br>  Si ces conditions sont remplies, un tel appareil esclave peut √™tre connect√© √† un bus non mis en cache.  Bien s√ªr, ce sera probablement un bus de donn√©es. <br><br>  En g√©n√©ral, connaissant ces principes de base, vous pouvez certainement les utiliser dans des t√¢ches r√©elles.  Mais, en g√©n√©ral, vous le pouvez.  Vous pouvez vous en passer si le r√©sultat est obtenu par des moyens conventionnels.  Mais gardez cela √† l'esprit.  Parfois, l'optimisation d'un syst√®me √† travers ces m√©canismes est plus simple que le r√©glage fin du programme. <br><br><h2>  Conclusion </h2><br>  Nous avons examin√© une technique pour transf√©rer des sections de code essentielles aux performances ou √† la pr√©visibilit√© de l'ex√©cution du traitement dans la m√©moire non-cache.  En cours de route, nous avons examin√© la possibilit√© d'optimiser les performances gr√¢ce √† l'utilisation de plusieurs pneus fonctionnant en parall√®le et ind√©pendamment les uns des autres. <br><br>  Pour terminer le sujet, nous devons encore apprendre √† augmenter la fr√©quence d'horloge du syst√®me (maintenant elle est limit√©e au composant g√©n√©rant des impulsions d'horloge pour la puce SDRAM).  Mais comme les articles suivent le principe ¬´une chose - un article¬ª, nous le ferons la prochaine fois. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468027/">https://habr.com/ru/post/fr468027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468017/index.html">La monade peut-√™tre via async / attendre en C # (sans t√¢che ov!)</a></li>
<li><a href="../fr468019/index.html">D√©veloppement de sites Web sur WebAssembly avec NetCore 3 et Blazor</a></li>
<li><a href="../fr468021/index.html">PHP, combien d'abstraction pour les gens?</a></li>
<li><a href="../fr468023/index.html">L'intelligence artificielle dans le jeu de combat Shadow Fight 3</a></li>
<li><a href="../fr468025/index.html">Comment configurer SNI dans Zimbra OSE?</a></li>
<li><a href="../fr468031/index.html">Nous portons un jeu multijoueur de C ++ sur le Web avec Cheerp, WebRTC et Firebase</a></li>
<li><a href="../fr468039/index.html">Meetup Moscou Kubernetes # 6 √† Acronis (Fiztehpark) 10/03/2019</a></li>
<li><a href="../fr468041/index.html">Annonce de l'interface Web de Kubernetes Web View (et un bref aper√ßu des autres interfaces Web pour Kubernetes)</a></li>
<li><a href="../fr468043/index.html">Comment cr√©er un kit d'interface utilisateur √† vendre. √âtapes de d√©veloppement d'un syst√®me de conception commerciale</a></li>
<li><a href="../fr468047/index.html">Utilisation des hi√©rarchies dans lsFusion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>