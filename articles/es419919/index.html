<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÇ ü§òüèø ‚ö†Ô∏è Control de versiones dentro de SQL Server „Ä∞Ô∏è ü§û ‚ôøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Julia : Entonces, ¬øqui√©n cambi√≥ mi procedimiento ayer? 
 Lesha : no yo 
 Maxim : no yo 
 - Chicos, ¬øpodemos traer a Git? 
 Seryozha : ya es hora! 
 Ha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Control de versiones dentro de SQL Server</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419919/">  <b>Julia</b> : <i>Entonces, ¬øqui√©n cambi√≥ mi procedimiento ayer?</i> <br>  <b>Lesha</b> : <i>no yo</i> <br>  <b>Maxim</b> : <i>no yo</i> <br>  - <i>Chicos, ¬øpodemos traer a Git?</i> <br>  <b>Seryozha</b> : <i>ya es hora!</i> <br>  Han pasado 2 semanas ... <br><br>  <b>Julia</b> : <i>chicos?</i> <br>  - <i>Yul, ¬øno te comprometiste?</i> <br>  <b>Julia</b> : <s><i>maldita sea</i></s> <i>no (...</i> <br><br>  As√≠ empez√≥ todo.  Bueno, ¬øqu√©, cada personaje y cada l√≠nea se comprometen? <br><br>  ¬øO tal vez todo esto suceder√° solo?) En este punto, comienzan a venir a la mente <br>  Se agregan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">disparadores DDL</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla temporal</a> e imagen.  Resuelto, almacenaremos versiones dentro <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SQL Server'a</a> !) <br><br><img src="https://habrastorage.org/webt/dn/fe/f3/dnfef3bqd49qysawcaxvuuiasdi.jpeg"><br><br><a name="habracut"></a><br>  Primero, cree tablas en las que se almacenar√°n las versiones <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">master</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span> <span class="hljs-comment"><span class="hljs-comment">--     IF NOT EXISTS ( SELECT 1 FROM sys.objects WHERE name = 'VersionControlHistory' AND type = 'U' ) CREATE TABLE dbo.VersionControlHistory( Id INT NOT NULL, Event sysname NOT NULL, Db sysname NOT NULL, Sch sysname NOT NULL, Object sysname NOT NULL, Sql XML NOT NULL, Login sysname NOT NULL, StartDate DATETIME2(0) NOT NULL, EndDate DATETIME2(0) NOT NULL ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] GO --      IF NOT EXISTS ( SELECT 1 FROM sys.objects WHERE name = 'VersionControl' AND type = 'U' ) CREATE TABLE dbo.VersionControl( Id INT IDENTITY(1,1) NOT NULL CONSTRAINT PK_VersionControl PRIMARY KEY NONCLUSTERED, Event sysname NOT NULL, Db sysname NOT NULL, Sch sysname NOT NULL, Object sysname NOT NULL, Sql XML NOT NULL, Login sysname NOT NULL, StartDate DATETIME2(0) GENERATED ALWAYS AS ROW START NOT NULL, EndDate DATETIME2(0) GENERATED ALWAYS AS ROW END NOT NULL, PERIOD FOR SYSTEM_TIME (StartDate, EndDate) ) WITH ( SYSTEM_VERSIONING = ON ( HISTORY_TABLE = dbo.VersionControlHistory ) ) GO</span></span></code> </pre> <br>  Es importante tener en cuenta las limitaciones de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla temporal.</a> <br><br><ol><li>  Despu√©s de crearlos, no puede aplicar comandos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DDL</a> a las tablas principal o hist√≥rica.  Y no puedes eliminar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla Temporal</a> </li><li>  No puede cambiar datos en la tabla hist√≥rica </li></ol><br>  La segunda restricci√≥n nos conviene, pero ¬øqu√© hacer con la primera? <br><br>  El algoritmo es el siguiente: <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--        ALTER TABLE dbo.VersionControl SET ( SYSTEM_VERSIONING = OFF ); /* -  */ --    : ALTER TABLE dbo.VersionControl SET ( SYSTEM_VERSIONING = ON ( HISTORY_TABLE = dbo.VersionControlHistory, DATA_CONSISTENCY_CHECK = OFF );</span></span></code> </pre><br>  Si bien a√∫n no hay √≠ndices en la tabla, compl√©telo con nuestros procedimientos, funciones, etc. marcados como <b>INIT</b> , lo que en nuestro caso significar√° la colocaci√≥n inicial <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">query</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">MAX</span></span>), @<span class="hljs-keyword"><span class="hljs-keyword">template</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">MAX</span></span>) = N<span class="hljs-string"><span class="hljs-string">' USE [db] INSERT INTO MASTER.dbo.VersionControl WITH (TABLOCKX) ( Event, Db, Sch, Object, Sql, Login ) SELECT ''INIT'' AS Event, DB_NAME(), ss.name AS Sch, so.name AS Object, CONCAT(''&lt;query&gt;&lt;![CDATA['', sasm.definition, '']]&gt;&lt;/query&gt;'' ), SUSER_SNAME() AS Login FROM sys.objects AS so JOIN sys.schemas AS ss ON ss.schema_id = so.schema_id JOIN sys.all_sql_modules AS sasm ON sasm.object_id = so.object_id WHERE so.is_ms_shipped = 0 AND NOT EXISTS ( SELECT 1 FROM MASTER.dbo.VersionControl AS vc WHERE vc.Db = ''[db]'' AND vc.Sch = ss.name AND vc.Object = so.name ); '</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (rn <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> sysname); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span> (rn, <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ROW_NUMBER() <span class="hljs-keyword"><span class="hljs-keyword">OVER</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rn, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> sys.databases <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> owner_sid != <span class="hljs-number"><span class="hljs-number">0x01</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @i <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>, @<span class="hljs-keyword"><span class="hljs-keyword">max</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MAX</span></span>(rn) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>), @<span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">128</span></span>), @db sysname; WHILE @i &lt; @max <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">query</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span>(@<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>, <span class="hljs-string"><span class="hljs-string">'[db]'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>), @db = <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> rn = @i; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> TRY <span class="hljs-keyword"><span class="hljs-keyword">EXECUTE</span></span> sp_executesql @<span class="hljs-keyword"><span class="hljs-keyword">query</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @i += <span class="hljs-number"><span class="hljs-number">1</span></span>; CONTINUE; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> TRY <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> CATCH <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">error</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">CONCAT</span></span>( <span class="hljs-string"><span class="hljs-string">'XML Parsing error. In this case that''s mean one of ['</span></span>, @db, <span class="hljs-string"><span class="hljs-string">'] object is invalid for convert to XML'</span></span> ); PRINT @error; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @i += <span class="hljs-number"><span class="hljs-number">1</span></span>; CONTINUE; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> CATCH; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>; GO</code> </pre><br>  Porque  los cambios en los objetos se producir√°n con la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instrucci√≥n UPDATE</a> , y con frecuencia veremos las versiones por clave: la base de datos, el esquema y el nombre del objeto, ¬°el √≠ndice pide! <br><br><pre> <code class="sql hljs">IF NOT EXISTS ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> sys.indexes <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> = <span class="hljs-string"><span class="hljs-string">'IX_VersionControl_upd_key'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> NONCLUSTERED <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> IX_VersionControl_upd_key <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> MASTER.dbo.VersionControl (Db, Sch, <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">INCLUDE</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">Sql</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Event</span></span>, Login);</code> </pre><br>  Todo est√° listo para comenzar a almacenar versiones y nos ayudar√° con este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DDL Trigger</a> <br><br>  <b>Importante!</b>  Porque  las tablas para las versiones est√°n en la base de datos <b>maestra</b> , despu√©s de crear un desencadenador, todos los que no tienen derechos sobre esta base de datos no pueden modificar, crear o eliminar objetos <br><br><pre> <code class="sql hljs">IF EXISTS ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> sys.server_triggers <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> = <span class="hljs-string"><span class="hljs-string">'tr_VersionControl'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> tr_VersionControl <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ALL <span class="hljs-keyword"><span class="hljs-keyword">SERVER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> tr_VersionControl <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ALL <span class="hljs-keyword"><span class="hljs-keyword">SERVER</span></span> <span class="hljs-comment"><span class="hljs-comment">--WITH ENCRYPTION --   /*      : https://docs.microsoft.com/ru-ru/sql/relational-databases/triggers/ddl-events?view=sql-server-2017 */ FOR CREATE_TABLE, ALTER_TABLE, DROP_TABLE, CREATE_VIEW, ALTER_VIEW, DROP_VIEW, CREATE_FUNCTION, ALTER_FUNCTION, DROP_FUNCTION, CREATE_PROCEDURE, ALTER_PROCEDURE, DROP_PROCEDURE, CREATE_ASSEMBLY, ALTER_ASSEMBLY, DROP_ASSEMBLY, CREATE_INDEX, ALTER_INDEX, DROP_INDEX, CREATE_TRIGGER, ALTER_TRIGGER, DROP_TRIGGER, RENAME AS BEGIN SET NOCOUNT ON; UPDATE vs SET vs.Event = ev.EventType, vs.Sql = CONCAT('&lt;query&gt;&lt;!CDATA', ev.Sql, '&gt;&lt;/query&gt;' ), vs.Login = ev.Login FROM MASTER.dbo.VersionControl AS vs JOIN ( SELECT * FROM ( VALUES ( EVENTDATA().value( '(/EVENT_INSTANCE/EventType)[1]', 'NVARCHAR(128)' ), EVENTDATA().value( '(/EVENT_INSTANCE/SchemaName)[1]', 'NVARCHAR(128)' ), EVENTDATA().value( '(/EVENT_INSTANCE/ObjectName)[1]', 'NVARCHAR(128)' ), EVENTDATA().value( '(/EVENT_INSTANCE/TSQLCommand/CommandText)[1]', 'NVARCHAR(MAX)' ), EVENTDATA().value( '(/EVENT_INSTANCE/LoginName)[1]', 'NVARCHAR(128)' ) )) AS Event (EventType, Sch, Object, Sql, Login ) ) ev ON vs.Db = DB_NAME() AND vs.Sch = ev.Sch AND vs.Object = ev.Object ; END GO</span></span></code> </pre><br>  Y para la conveniencia de usar este sistema, se propone el siguiente procedimiento. <br><br>  Es f√°cil de usar  El prefijo <b>sp_</b> nos ayudar√° a acceder al procedimiento sin especificar la base de datos y el esquema.  Los par√°metros se llenan intuitivamente.  Puede especificar solo la base de datos y veremos objetos asociados solo con ella durante todo el tiempo, pero tambi√©n puede usar el esquema, el objeto en s√≠ mismo y, por supuesto, el rango de tiempo para el que se realizaron los cambios. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> dbo.sp_Vc @db sysname = <span class="hljs-string"><span class="hljs-string">'%'</span></span>, @sch sysname = <span class="hljs-string"><span class="hljs-string">'%'</span></span>, @obj sysname = <span class="hljs-string"><span class="hljs-string">'%'</span></span>, @<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> DATETIME2(<span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, @<span class="hljs-keyword"><span class="hljs-keyword">to</span></span> DATETIME2(<span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> NOCOUNT <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>; IF @from IS NULL AND @to IS NULL <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> master.dbo.VersionControl <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Db <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @db <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> Sch <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @sch <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @obj <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> StartDate <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> master.dbo.VersionControl <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> SYSTEM_TIME <span class="hljs-keyword"><span class="hljs-keyword">BETWEEN</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Db <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @db <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> Sch <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @sch <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @obj <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> StartDate <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span></code> </pre><br>  A continuaci√≥n se presentan ejemplos del uso del procedimiento. <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--        sp_Vc; /*          */ sp_Vc 'dwh'; /*            */ sp_Vc 'dwh', 'dbo'; /*      ,        */ sp_Vc 'dwh', 'dbo', 'MyObject'; /*      , ,       1-  9-  */ sp_Vc 'dwh', 'dbo', 'MyObject', '20180501 00:00:00', '20180509 00:00:00';</span></span></code> </pre><br>  Puede instalar este microframework desde mi <a href="">repositorio</a> , y si su versi√≥n de SQL Sever es anterior a 2016, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠ est√°</a> .  Por cierto, estamos usando esta versi√≥n ahora, pero no es tan genial. <br><br><h3>  En conclusi√≥n </h3><br>  Nunca logr√© vencer la conclusi√≥n <b>&amp; _gt;</b>  y <b>&amp; _lt;</b>  en lugar de los signos <b>&gt;</b> y <b>&lt;</b> de la tabla <b>master.dbo.VersionControl</b> por el campo <b>SQL</b> .  Si puede ayudar con esto o tiene alguna idea, estoy esperando una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">solicitud de extracci√≥n</a> . <br><br>  Gracias por su tiempo, ponga estrellas, corazones y flechas hacia arriba. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419919/">https://habr.com/ru/post/es419919/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419907/index.html">Consejos para el lanzamiento de juegos m√≥viles: Parte 2, Lanzamiento global</a></li>
<li><a href="../es419911/index.html">Construyendo √≥rbitas de cuerpos celestes usando Python</a></li>
<li><a href="../es419913/index.html">IKEA y casa inteligente. Parte 2</a></li>
<li><a href="../es419915/index.html">Servidor de enlaces y SSH en initramfs</a></li>
<li><a href="../es419917/index.html">Redes neuronales: implementaci√≥n de la tarea sobre hongos en Tensor Flow y Python</a></li>
<li><a href="../es419921/index.html">C√≥mo soltar 10 millones de paquetes por segundo</a></li>
<li><a href="../es419923/index.html">Mi trabajo temporal, relojes de placa base</a></li>
<li><a href="../es419925/index.html">Control de versiones de archivos individuales usando GitHub Gist</a></li>
<li><a href="../es419927/index.html">[DotNetBook] Excepciones: Arquitectura de sistema de tipo</a></li>
<li><a href="../es419929/index.html">[DotNetBook] Eventos de excepci√≥n y c√≥mo obtener StackOverflow y ExecutionEngineException desde cero</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>