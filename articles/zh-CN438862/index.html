<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤½ ğŸ¤³ ğŸ‘´ğŸ» ä»¥Nuxt.jsä¸ºä¾‹ï¼Œéƒ¨ç½²åŒæ„Webåº”ç”¨ç¨‹åºã€‚ ğŸ‘ğŸ½ ğŸ—¯ï¸ ğŸ–ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨å¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œç«™ç‚¹ä¸é™äºä¸€ç§æœåŠ¡-ä¾‹å¦‚ï¼Œä»…ä¸€ä¸ªç«™ç‚¹ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªAPIï¼Œä¸€ä¸ªå°†è¯·æ±‚è·¯ç”±åˆ°æ‰€æœ‰è¿™äº›æœåŠ¡çš„æœåŠ¡å™¨ã€‚ åœ¨æ²¡æœ‰ä»»ä½•æ ‡å‡†åŒ–çš„æƒ…å†µä¸‹æ¨å‡ºå’Œæ›´æ–°æ‰€æœ‰è¿™äº›å†…å®¹å¹¶ä¸å®¹æ˜“ï¼Œå¹¶ä¸”æ‰©å±•åˆ°è®¸å¤šæœåŠ¡å™¨ç”šè‡³æ›´åŠ å›°éš¾ã€‚ 

 Dockerå·²ç»æˆä¸ºåŒ…è£…ï¼Œäº¤ä»˜å’Œå‘å¸ƒåº”ç”¨ç¨‹åºä¸–ç•Œä¸­çš„äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä»¥Nuxt.jsä¸ºä¾‹ï¼Œéƒ¨ç½²åŒæ„Webåº”ç”¨ç¨‹åºã€‚</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438862/"><img src="https://habrastorage.org/webt/sa/ge/qb/sageqbm3jftmbtbdkftowwvwb3o.jpeg"><br> åœ¨å¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œç«™ç‚¹ä¸é™äºä¸€ç§æœåŠ¡-ä¾‹å¦‚ï¼Œä»…ä¸€ä¸ªç«™ç‚¹ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªAPIï¼Œä¸€ä¸ªå°†è¯·æ±‚è·¯ç”±åˆ°æ‰€æœ‰è¿™äº›æœåŠ¡çš„æœåŠ¡å™¨ã€‚ åœ¨æ²¡æœ‰ä»»ä½•æ ‡å‡†åŒ–çš„æƒ…å†µä¸‹æ¨å‡ºå’Œæ›´æ–°æ‰€æœ‰è¿™äº›å†…å®¹å¹¶ä¸å®¹æ˜“ï¼Œå¹¶ä¸”æ‰©å±•åˆ°è®¸å¤šæœåŠ¡å™¨ç”šè‡³æ›´åŠ å›°éš¾ã€‚ <br><a name="habracut"></a><br>  Dockerå·²ç»æˆä¸ºåŒ…è£…ï¼Œäº¤ä»˜å’Œå‘å¸ƒåº”ç”¨ç¨‹åºä¸–ç•Œä¸­çš„äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ <br><br>  Dockerå…è®¸æˆ‘ä»¬å°†å…·æœ‰æ‰€æœ‰ä¾èµ–é¡¹å’Œè®¾ç½®çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡åŒ…è£…åœ¨ä¸€ä¸ªéš”ç¦»çš„å®¹å™¨ä¸­ï¼Œä»è€Œç¡®ä¿ä»»ä½•å¹³å°ä¸Šå†…å®¹çš„ä¸€è‡´æ€§ã€‚ <br><br> ä½œä¸ºåŒæ„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç”±Vue.jså’ŒNode.jsç»„æˆçš„Nuxt.jsæ¡†æ¶ï¼Œä»è€Œä½¿æˆ‘ä»¬èƒ½å¤Ÿç¼–å†™å…·æœ‰æœåŠ¡å™¨ç«¯å‘ˆç°ï¼ˆSSRï¼‰çš„é€šç”¨Webåº”ç”¨ç¨‹åºã€‚ <br><br> è¯¥é€‰æ‹©æ˜¯ç”±äºä¸ªäººå–œå¥½ï¼Œä½†æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼ï¼Œæ‚¨å¯ä»¥é‡‡ç”¨ä»»ä½•å…¶ä»–æ¡†æ¶ï¼Œä¾‹å¦‚Next.jsã€‚ <br><br><h3> æˆ‘ä»¬æ”¶é›†å¹¶å‘å¸ƒç¬¬ä¸€å¼ å›¾ç‰‡ã€‚ </h3><br> é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨é…ç½®ç«¯å£å’Œä¸»æœºã€‚ æœ‰å‡ ç§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–¹æ³•</a>å¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Œæˆ‘ä»¬å°†é€šè¿‡æ·»åŠ ä¸€ä¸ªæ–°éƒ¨åˆ†æ¥ä½¿ç”¨package.jsonä¸­çš„è®¾ç½®ï¼š <br><br><pre><code class="json hljs"><span class="hljs-string"><span class="hljs-string">"config"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"nuxt"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"host"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } }</code> </pre> <br> è¦æ‰§è¡Œè¿›ä¸€æ­¥çš„æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­å®‰è£…dockerï¼Œdocker-composeå’Œå¸¦æœ‰æ‰“å¼€é¡¹ç›®çš„ç¼–è¾‘å™¨ã€‚ <br><br> åˆ›å»ºä¸€ä¸ªæ”¾ç½®åœ¨æ ¹ç›®å½•ä¸‹çš„Dockerfileå¹¶æè¿°æ„å»ºæ˜ åƒçš„è¯´æ˜ã€‚ <br><br> æˆ‘ä»¬éœ€è¦åŸºäºNode.jsç‰ˆæœ¬10æ˜ åƒæ„å»ºæ˜ åƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨è½»é‡çº§çš„alpineç‰ˆæœ¬ï¼š <br><br><pre> <code class="plaintext hljs">FROM node:10-alpine</code> </pre> <br> ç„¶åä½¿ç”¨ç›®å½•åç§°è®¾ç½®ç¯å¢ƒå˜é‡ï¼š <br><br><pre> <code class="plaintext hljs">ENV APP_ROOT /web</code> </pre> <br> è®¾ç½®ä¸ºå·¥ä½œç›®å½•å¹¶æ·»åŠ æºï¼š <br><br><pre> <code class="plaintext hljs">WORKDIR ${APP_ROOT} ADD . ${APP_ROOT}</code> </pre><br> å®‰è£…ä¾èµ–é¡¹å¹¶æ„å»ºåº”ç”¨ç¨‹åºï¼š <br><br><pre> <code class="plaintext hljs">RUN npm ci RUN npm run build</code> </pre><br> ç„¶ååœ¨å›¾åƒä¸­ç¼–å†™åº”ç”¨ç¨‹åºå¯åŠ¨å‘½ä»¤ï¼š <br><br><pre> <code class="plaintext hljs">CMD ["npm", "run", "start"]</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Dockeræ–‡ä»¶</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">FROM node:10-alpine ENV APP_ROOT /web ENV NODE_ENV production WORKDIR ${APP_ROOT} ADD . ${APP_ROOT} RUN npm ci RUN npm run build CMD ["npm", "run", "start"]</code> </pre><br></div></div><br> ä¹‹åï¼Œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€å½“å‰æ–‡ä»¶å¤¹å¹¶æ”¶é›†å›¾åƒï¼š <br><br><pre> <code class="plaintext hljs">docker build -t registry.gitlab.com/vik_kod/nuxtjs_docker_example .</code> </pre><br> åœ¨æœ¬åœ°è¿è¡Œæ˜ åƒä»¥éªŒè¯ä¸€åˆ‡æ­£å¸¸ï¼š <br><br><pre> <code class="plaintext hljs">docker run -p 3000:3000 registry.gitlab.com/vik_kod/nuxtjs_docker_example</code> </pre><br> è½¬åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">localhostï¼š3000ï¼Œ</a>æˆ‘ä»¬åº”è¯¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š <br><br><img src="https://habrastorage.org/webt/3m/8m/4e/3m8m4epncpbjdw0hxwfptw7rqh4.png"><br><br> å¤ªå¥½äº†ï¼ æˆ‘ä»¬æˆåŠŸå¯åŠ¨äº†åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ„å»ºåº”ç”¨ç¨‹åºçš„ç”Ÿäº§ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å°†æ˜ åƒå‘å¸ƒåˆ°dockerå­˜å‚¨åº“ï¼Œä»¥ä¾¿åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šä½¿ç”¨å®Œæˆçš„ç»„è£…æ˜ åƒã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è‡ªæ‰˜ç®¡å­˜å‚¨åº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ä»»ä½•å­˜å‚¨åº“ï¼Œä¾‹å¦‚ï¼Œå®˜æ–¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">hub.docker.com</a> ã€‚ <br><br> æˆ‘å°†åœ¨gitlabä¸­ä½¿ç”¨å­˜å‚¨åº“ï¼Œå…¶ä¸­åŒ…å«dockerä»“åº“çš„é€‰é¡¹å¡ç§°ä¸ºæ³¨å†Œè¡¨ã€‚ ä»¥å‰ï¼Œæˆ‘å·²ç»ä¸ºé¡¹ç›®åˆ›å»ºäº†ä¸€ä¸ªå­˜å‚¨åº“ï¼Œå› æ­¤ç°åœ¨æ‰§è¡Œå‘½ä»¤ï¼š <br><br><pre> <code class="plaintext hljs">docker push registry.gitlab.com/vik_kod/nuxtjs_docker_example</code> </pre><br> æ˜ åƒæˆåŠŸå¯åŠ¨åï¼Œæ‚¨å¯ä»¥å¼€å§‹é…ç½®VPSæœåŠ¡å™¨ï¼Œ <br> æˆ‘çš„å¦‚ä¸‹ï¼š <br><br><ul><li>  1 GBå†…å­˜ </li><li>  4èŠ¯ </li><li>  30 GBé©±åŠ¨å™¨ </li></ul><br> æˆ‘è¿˜è¶æœºåœ¨åˆ›å»ºæœåŠ¡å™¨æ—¶ç«‹å³å®‰è£…äº†dockerï¼Œå› æ­¤ï¼Œå¦‚æœæœªåœ¨VPSä¸Šå®‰è£…dockerï¼Œåˆ™å¯ä»¥é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹ç½‘ç«™</a>ä¸Šçš„è¯´æ˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€‚</a> <br><br> åˆ›å»ºæœåŠ¡å™¨åï¼Œè½¬åˆ°å®ƒå¹¶ç™»å½•åˆ°dockerå­˜å‚¨åº“ï¼Œåœ¨æˆ‘çš„æƒ…å†µä¸‹ä¸ºgitlabï¼š <br><br><pre> <code class="plaintext hljs">docker login registry.gitlab.com</code> </pre><br> æˆæƒåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥å‰çœ‹åˆ°çš„å‘½ä»¤å¯åŠ¨åº”ç”¨ç¨‹åºï¼š <br><br><pre> <code class="plaintext hljs">docker run -p 3000:3000 registry.gitlab.com/vik_kod/nuxtjs_docker_example</code> </pre><br><img src="https://habrastorage.org/webt/8z/qh/su/8zqhsuvrva9zi4mgqhutiq4nwrk.png"><br><br> å›¾åƒå·²ä¸‹è½½å¹¶å¯åŠ¨ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e4/609/85a/1e460985a476590d13d1a344c9a1a90b.png"><br><br> æˆ‘ä»¬çœ‹åˆ°äº†ä¸€å¼ ç†Ÿæ‚‰çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬ä½¿ç”¨åº”ç”¨ç¨‹åºå¯åŠ¨äº†å®¹å™¨ï¼Œä½†æ˜¯å·²ç»åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚ <br><br> æœ€åçš„æ¥è§¦ä»ç„¶å­˜åœ¨ï¼Œç°åœ¨å½“ç»ˆç«¯å…³é—­æ—¶ï¼Œå›¾åƒå°†åœæ­¢ï¼Œå› æ­¤æˆ‘ä»¬å°†æ·»åŠ -då±æ€§ä»¥åœ¨åå°å¯åŠ¨å®¹å™¨ã€‚ <br> åœæ­¢å¹¶é‡æ–°å¯åŠ¨ï¼š <br><br><pre> <code class="plaintext hljs">docker run -d -p 3000:3000 registry.gitlab.com/vik_kod/nuxtjs_docker_example</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­ç»ˆç«¯å¹¶ç¡®ä¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œã€‚ <br><br> æˆ‘ä»¬å®ç°äº†æ‰€éœ€çš„å·¥ä½œ-æˆ‘ä»¬åœ¨dockerä¸­å¯åŠ¨äº†è¯¥åº”ç”¨ç¨‹åºï¼Œç°åœ¨å®ƒæ—¢é€‚åˆä½œä¸ºç‹¬ç«‹æ˜ åƒåˆå¯ä»¥ä½œä¸ºè¾ƒå¤§åŸºç¡€æ¶æ„çš„ä¸€éƒ¨åˆ†é€‚åˆéƒ¨ç½²ã€‚ <br><br><h3> æ·»åŠ åå‘ä»£ç† </h3><br> åœ¨å½“å‰é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒç®€å•çš„é¡¹ç›®ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦å°†åº”ç”¨ç¨‹åºå’ŒAPIæ”¾åœ¨åŒä¸€åŸŸä¸Šï¼Œå¹¶ä¸”é™¤äº†æ­¤ä»¥å¤–ï¼Œè¿˜ä¸é€šè¿‡Node.jsæä¾›é™æ€ä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ <br><br> å› æ­¤ï¼Œéœ€è¦æ‰€è°“çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å°†æ¥æ”¶åˆ°è¯¥åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®è¯¥è¯·æ±‚é‡å®šå‘åˆ°ç›¸å…³æœåŠ¡ã€‚ <br><br> ä½œä¸ºè¿™æ ·çš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨nginxã€‚ <br><br> å¦‚æœå•ç‹¬ç®¡ç†å¤šä¸ªå®¹å™¨ï¼Œåˆ™ç®¡ç†å®¹å™¨ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨docker-composeä½œä¸ºç»„ç»‡å’Œç®¡ç†å®¹å™¨çš„æ–¹æ³•ã€‚ <br><br> åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºé¡¹ç›®ï¼Œåœ¨è¯¥é¡¹ç›®çš„æ ¹ç›®å½•ä¸­æ·»åŠ docker-compose.ymlæ–‡ä»¶å’Œnginxæ–‡ä»¶å¤¹ã€‚ <br><br> åœ¨docker-compose.ymlä¸­ï¼Œæˆ‘ä»¬ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="plaintext hljs">version: "3.3" #      services: #  , nginx nginx: image: nginx:latest #   80  http  443  https ports: - "80:80" - "443:443" #      container_name: proxy_nginx volumes: #   nginx ,      - ./nginx:/etc/nginx/conf.d #            - ./logs:/var/log/nginx/ #   Nuxt.js  nuxt: #     image: registry.gitlab.com/vik_kod/nuxtjs_docker_example container_name: nuxt_app #        ports: - "3000:3000"</code> </pre><br> åœ¨nginxæ–‡ä»¶å¤¹ä¸­ï¼Œæ·»åŠ é…ç½®ï¼ˆè¿™æ˜¯å®˜æ–¹ç½‘ç«™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nuxt.jsçš„</a>å»ºè®®ï¼‰ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›å°çš„æ›´æ”¹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">nginx.conf</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">map $sent_http_content_type $expires { "text/html" epoch; "text/html; charset=utf-8" epoch; default off; } server { root /var/www; listen 80; #    nginx server_name localhost; #   ip  gzip on; gzip_types text/plain application/xml text/css application/javascript; gzip_min_length 1000; location / { expires $expires; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_read_timeout 1m; proxy_connect_timeout 1m; #   ,       # docker-compose        ,    nuxt_app proxy_pass http://nuxt_app:3000; } }</code> </pre><br></div></div><br> æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œï¼š <br><br><pre> <code class="plaintext hljs">docker-compose up</code> </pre> <br><img src="https://habrastorage.org/webt/_e/nm/rt/_enmrtzkskhzce0dsha44ihxyde.png"><br><br> ä¸€åˆ‡éƒ½æ­£ç¡®å¯åŠ¨ï¼Œç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è½¬åˆ°ä¾¦å¬nginxçš„åœ°å€localhostï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œä¸ä¼šæœ‰è§†è§‰å·®å¼‚ï¼Œä½†æ˜¯ç°åœ¨æ‰€æœ‰è¯·æ±‚éƒ½é¦–å…ˆåˆ°è¾¾nginxï¼Œæ ¹æ®æŒ‡å®šçš„è§„åˆ™å°†å®ƒä»¬é‡å®šå‘ã€‚ <br><br> ç°åœ¨æˆ‘ä»¬æ²¡æœ‰å…¶ä»–æœåŠ¡æˆ–é™æ€å˜é‡ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé™æ€æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ”¾ç½®ä¸€äº›å›¾åƒã€‚ <br><br> é€šè¿‡åœ¨docker-composeä¸­æ·»åŠ ä¸€è¡Œæ¥å°†å…¶å®‰è£…åœ¨nginxå®¹å™¨ä¸­ï¼š <br><br><pre> <code class="plaintext hljs">... container_name: proxy_nginx volumes: #     - ./static:/var/www/static ...</code> </pre><br><div class="spoiler">  <b class="spoiler_title">æ›´æ–°äº†docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">version: "3.3" #      services: #  , nginx nginx: image: nginx:latest #   80  http  443  https ports: - "80:80" - "443:443" #      container_name: proxy_nginx volumes: #   nginx ,      - ./nginx:/etc/nginx/conf.d #            - ./logs:/var/log/nginx/ #     - ./static:/var/www/static #   Nuxt.js  nuxt: #     image: registry.gitlab.com/vik_kod/nuxtjs_docker_example container_name: nuxt_app #         ports: - "3000:3000"</code> </pre><br></div></div><br> ç„¶åå°†æ–°ä½ç½®æ·»åŠ åˆ°nginx.confä¸­ï¼š <br><br><pre> <code class="plaintext hljs">location /static/ { try_files $uri /var/www/static; }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">æ›´æ–°äº†nginx.conf</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">map $sent_http_content_type $expires { "text/html" epoch; "text/html; charset=utf-8" epoch; default off; } server { root /var/www; listen 80; #    nginx server_name localhost; #   ip  gzip on; gzip_types text/plain application/xml text/css application/javascript; gzip_min_length 1000; location / { expires $expires; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_read_timeout 1m; proxy_connect_timeout 1m; #   ,       # docker-compose        ,    nuxt_app proxy_pass http://nuxt_app:3000; } location /static/ { try_files $uri /var/www/static; } }</code> </pre><br></div></div><br> é‡æ–°å¯åŠ¨docker-composeï¼š <br><br><pre> <code class="plaintext hljs">docker-compose up --build</code> </pre><br> è½¬åˆ°<a href="">localhost / static / demo.jpg</a> <a href=""><br></a> <br><br><img src="https://habrastorage.org/webt/op/fv/op/opfvopehymnscgtysqtoxjcjzdw.png"><br><br> ç°åœ¨é€šè¿‡Nginxç»™å‡ºäº†é™æ€å˜é‡ï¼Œä»è€Œæ¶ˆé™¤äº†ä¸»åº”ç”¨ç¨‹åºä¸­Node.jsçš„è´Ÿè½½ã€‚ <br><br> ç¡®ä¿ä¸€åˆ‡æ­£å¸¸åï¼Œæ‚¨å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šå‘å¸ƒæˆ‘ä»¬çš„ç¨‹åºé›†ã€‚ ä¸ºæ­¤ï¼Œæˆ‘å°†åœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå­˜å‚¨åº“ã€‚ å…ˆå‰å·²å°†æ—¥å¿—å’Œé™æ€æ–‡ä»¶å¤¹æ·»åŠ åˆ°.gitignoreã€‚ <br><br> ä¹‹åï¼Œæˆ‘ä»¬è½¬åˆ°æœåŠ¡å™¨ï¼Œåœæ­¢å…ˆå‰å¯åŠ¨çš„dockeræ˜ åƒå¹¶å…‹éš†å­˜å‚¨åº“ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ec/a7d/da4/9eca7dda43a5ed7623eb5fd12f41cdd6.png"><br><br> åœ¨å¼€å§‹ç»„è£…ä¹‹å‰ï¼Œæ‚¨éœ€è¦å°†åŒ…å«é™æ€å˜é‡çš„æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°æœåŠ¡å™¨ï¼Œè½¬åˆ°æœ¬åœ°è®¡ç®—æœºä¸Šçš„ç»ˆç«¯ï¼Œç„¶åä½¿ç”¨scpå‘½ä»¤è¡Œå®ç”¨ç¨‹åºå°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°æœåŠ¡å™¨ï¼š <br><br><pre> <code class="plaintext hljs">scp -r /Users/vik_kod/PhpstormProjects/nuxtjs_docker_proxy_example/static root@5.101.48.172:/root/example_app/</code> </pre><br> å¦‚æœé™ç”µé‡å¾ˆå¤§ï¼Œæœ€å¥½å…ˆå‹ç¼©è¯¥æ–‡ä»¶å¤¹å¹¶å°†å…¶ä½œä¸ºå­˜æ¡£å‘é€ï¼Œç„¶ååœ¨æœåŠ¡å™¨ä¸Šå°†å…¶è§£å‹ç¼©ã€‚ å¦åˆ™ï¼Œä¸‹è½½å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚ <br><br> æˆ‘ä»¬è¿”å›åˆ°æœåŠ¡å™¨ä¸Šçš„ç»ˆç«¯ï¼Œç„¶åè½¬åˆ°å…‹éš†çš„æ–‡ä»¶å¤¹ï¼Œè¿è¡Œå‘½ä»¤ï¼š <br><br><pre> <code class="plaintext hljs">docker-compose up -d</code> </pre><br> å…³é—­ç»ˆç«¯å¹¶è½¬åˆ°ç«™ç‚¹ï¼š <br><br><img src="https://habrastorage.org/webt/au/3l/yq/au3lyqjf74cr99zabxraau073m0.png"><br><br><img src="https://habrastorage.org/webt/hm/pv/id/hmpvidrp494pdol1dzf-lebt9vs.png"><br> å¤ªå¥½äº†ï¼ ä½¿ç”¨åå‘ä»£ç†ï¼Œæˆ‘ä»¬ä»åº”ç”¨ç¨‹åºä¸­åˆ†ç¦»äº†é™æ€å˜é‡ã€‚ <br><br><h3> è¿›ä¸€æ­¥çš„æ­¥éª¤ </h3><br> ä¸Šé¢æˆ‘ä»¬æ‰€åšçš„åªæ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„é€‰æ‹©ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæ‚¨éœ€è¦è€ƒè™‘æ›´å¤šäº‹æƒ…ï¼Œä»¥ä¸‹æ˜¯æ‚¨ä¸‹ä¸€æ­¥å¯ä»¥åšçš„ç®€çŸ­æ¸…å•ã€‚ <br><br><ul><li> é™æ€ç®¡ç†åŒºåŸŸï¼ŒSPAåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“çš„ä»…æ•°æ®å®¹å™¨ </li><li> ç”¨äºå›¾åƒå¤„ç†å’Œä¼˜åŒ–çš„é™„åŠ æœåŠ¡ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¤ºä¾‹</a> </li><li> é›†æˆCI / CDï¼Œåœ¨æ¨é€åˆ°æ‰€é€‰åˆ†æ”¯æ—¶è¿›è¡Œæ˜ åƒç»„è£…ï¼Œä»¥åŠè‡ªåŠ¨æ›´æ–°å’Œé‡æ–°å¯åŠ¨æœåŠ¡ </li><li> å¦‚æœæœåŠ¡å™¨å¤šäº1ä¸ªï¼Œåˆ™åˆ›å»ºä¸€ä¸ªKubernetesæˆ–Swarmé›†ç¾¤ï¼Œä»¥å®ç°è´Ÿè½½å¹³è¡¡å’Œè½»æ¾çš„æ°´å¹³æ‰©å±• </li></ul><br><h3> åˆè®¡ </h3><br><ul><li> æˆ‘ä»¬å·²ç»åœ¨æœåŠ¡å™¨ä¸ŠæˆåŠŸå‘å¸ƒäº†è¯¥åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸ºè¿›ä¸€æ­¥æ‰©å±•åšå¥½äº†å‡†å¤‡ã€‚ </li><li> æˆ‘ä»¬è®¤è¯†äº†dockerï¼Œå¹¶äº†è§£äº†å¦‚ä½•å°†åº”ç”¨ç¨‹åºåŒ…è£…åœ¨å®¹å™¨ä¸­ã€‚ </li><li> æˆ‘ä»¬äº†è§£äº†å¯ä»¥é‡‡å–å“ªäº›è¿›ä¸€æ­¥æªæ–½æ¥æ”¹å–„åŸºç¡€æ¶æ„ã€‚ </li></ul><br><h3> æºä»£ç  </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº”ç”¨ç¨‹å¼</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®¾å®šæ¡£</a> <br><br>  <i>æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438862/">https://habr.com/ru/post/zh-CN438862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438850/index.html">Moscow JS 44-å…¬å‘Š</a></li>
<li><a href="../zh-CN438852/index.html">OpenVoxçš„æ–°GSMç½‘å…³</a></li>
<li><a href="../zh-CN438854/index.html">åœ¨ä¸ä½¿ç”¨ä¼¯åŠªåˆ©æ–¹ç¨‹çš„æƒ…å†µä¸‹è§£é‡Šâ€œæå‡åŠ›â€ç°è±¡çš„ç‰©ç†æ€§è´¨</a></li>
<li><a href="../zh-CN438856/index.html">ä»ç”Ÿæ´»ä¸­è·Œè½</a></li>
<li><a href="../zh-CN438858/index.html">åœ¨åˆ¶å®šè¥é”€ç­–ç•¥æ—¶å¦‚ä½•ä½¿ç”¨ç»†åˆ†ï¼Œå®šä½å’Œå®šä½ï¼ˆSTPï¼‰</a></li>
<li><a href="../zh-CN438864/index.html">åŠŸèƒ½å†»ç»“C ++ 20ã€‚ åç¨‹ï¼Œæ¨¡å—ç­‰</a></li>
<li><a href="../zh-CN438866/index.html">ç”Ÿæˆå™¨ä¸Javaè¯­æ³•</a></li>
<li><a href="../zh-CN438868/index.html">å®‰å…¨å‘¨06ï¼šç›´æ’­FaceTime</a></li>
<li><a href="../zh-CN438870/index.html">é¾™ç›®å²›å›å½’Javaçš„ä¼Ÿå¤§</a></li>
<li><a href="../zh-CN438874/index.html">ä¸VkNetå»ºç«‹å‹è°Š</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>