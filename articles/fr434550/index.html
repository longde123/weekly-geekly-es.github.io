<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ§ üëü ü§ë Les entrailles des jeux r√©tro: Punch-Out pour NES üåó üíê ü§±üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Partie 1. Mots de passe 
 Le jeu NES Punch-Out de Mike Tyson utilise un syst√®me de mot de passe qui permet aux joueurs de continuer le jeu √† partir d'...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Les entrailles des jeux r√©tro: Punch-Out pour NES</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434550/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0b/41b/4f2/b0b41b4f285c002424e55b62ff530362.png" alt="image"></div><br><h2>  Partie 1. Mots de passe </h2><br>  Le jeu NES Punch-Out de Mike Tyson utilise un syst√®me de mot de passe qui permet aux joueurs de continuer le jeu √† partir d'un point sp√©cifique.  Chaque mot de passe se compose de 10 chiffres, qui peuvent aller de 0 √† 9. Le jeu peut accepter deux types de mots de passe, que j'appelle des mots de passe ¬´normaux¬ª et ¬´sp√©ciaux¬ª.  Les mots de passe sp√©ciaux sont certaines combinaisons de 10 chiffres, dont l'entr√©e r√©agit de mani√®re unique au jeu.  Une liste compl√®te des mots de passe sp√©ciaux ressemble √† ceci: <br><br><ul><li>  075541 6113 - signal occup√© 1 </li><li>  800422 2602 - signal occup√© 2 </li><li>  206 882 2040 - signal occup√© 3 </li><li>  135 792 4680 - jeu dans un tournoi cach√©: ¬´Another World Circuit¬ª (pour que le mot de passe soit accept√©, vous devez maintenir le bouton Select enfonc√© et appuyer sur A + B) </li><li>  106113 0120 - affichage des titres (pour que le mot de passe soit accept√©, vous devez maintenir le bouton Select enfonc√© et appuyer sur A + B) </li><li>  007373 5963 - transf√®re le joueur √† la bataille avec Mike Tyson </li></ul><br>  Le deuxi√®me type de mots de passe accept√©s par le jeu sont les mots de passe normaux.  Dans les mots de passe normaux, la progression du joueur dans le jeu est cod√©e.  Les donn√©es de jeu suivantes sont encod√©es dans un mot de passe normal: <br><br><ul><li>  Nombre de victoires en carri√®re </li><li>  Nombre de pertes de carri√®re </li><li>  Knockout gagne </li><li>  Adversaire suivant </li></ul><br><h2>  Encodage du mot de passe </h2><br>  √Ä titre d'exemple, pour √©tudier la g√©n√©ration de mots de passe, nous utilisons un jeu avec 24 victoires, 1 d√©faite, 19 KO et commen√ßant dans le tournoi mondial avec une bataille contre Super Macho Man. <br><a name="habracut"></a><br>  Le processus d'encodage de l'√©tat d'un jeu dans un mot de passe commence par la collecte du nombre de victoires, de pertes et de KO dans le tampon.  Le jeu pr√©sente chaque nombre sous la forme d'un <a title="D√©cimal cod√© en binaire" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code d√©cimal binaire</a> form√© de 8 bits par chiffre et de 2 chiffres pour chaque valeur.  C'est-√†-dire que pour 24 victoires, vous avez besoin d'un octet d'une valeur de 2 et d'un deuxi√®me octet d'une valeur de 4. La m√™me chose se produit avec des paires d'octets pour les pertes et les KO, c'est-√†-dire que 6 octets de donn√©es sont obtenus au total.  Dans le diagramme ci-dessous, ces 6 octets sont indiqu√©s avec des valeurs √† la fois d√©cimales et binaires. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/489/fab/198/489fab1987ec36a598e9f53353ddab14.png"></div><br>  L'√©tape suivante consiste √† g√©n√©rer une somme de contr√¥le pour ces 6 octets.  L'octet de somme de contr√¥le est calcul√© en ajoutant 6 octets distincts et en soustrayant le r√©sultat de 255. Dans notre cas, 2 + 4 + 0 + 1 + 1 + 9 = 17, c'est-√†-dire 255 - 17 = 238. <br><br>  Ensuite, nous √©crivons quelques bits de 6 octets dans un nouveau tampon.  Ce tampon peut √™tre interpr√©t√© comme une valeur interm√©diaire de 28 bits, que nous remplirons √©tape par √©tape.  Les bits du premier tampon sont divis√©s en groupes de deux et sont d√©plac√©s vers diff√©rentes positions cod√©es en dur du second tampon.  Il s'agit de la premi√®re de plusieurs √©tapes dont la seule t√¢che est de simplement brouiller les donn√©es afin de compliquer le processus de g√©n√©ration de mots de passe pour les joueurs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/369/41d/366/36941d366047379b7279a42b1305ea86.png"></div><br>  Notez que tous les bits du tampon d'origine ne sont pas transf√©r√©s vers le nouveau tampon interm√©diaire.  Ces bits sont ignor√©s, car on sait qu'ils sont toujours √† 0. Gr√¢ce aux r√®gles du jeu, il suffit de transmettre le nombre de pertes dans le mot de passe avec seulement 2 bits d'information.  Si le montant total des pertes atteint 3, la partie se termine et le joueur ne re√ßoit pas de mot de passe.  Par cons√©quent, il suffit de d√©crire le nombre de pertes avec les nombres 0, 1 et 2, et pour cela, seuls 2 bits suffisent. <br><br>  Ensuite, nous √©crivons d'autres paires de bits dans le tampon interm√©diaire.  Les quatre premi√®res paires sont extraites de la valeur de somme de contr√¥le pr√©c√©demment calcul√©e.  Une autre paire est prise de la valeur de l'ennemi.  La valeur d'un adversaire est un nombre indiquant quel adversaire un joueur combattra apr√®s avoir entr√© un mot de passe.  Trois valeurs ennemies possibles peuvent √™tre utilis√©es: <br><br>  0 - DON FLAMENCO (premier combat du tournoi majeur) <br><br>  1 - PISTON HONDA (premier combat du tournoi mondial) <br><br>  2 - SUPER MACHO MAN (dernier combat du tournoi mondial) <br><br>  Puisque nous voulions g√©n√©rer un mot de passe qui nous confronte √† Super Macho Man, nous utilisons 2 comme valeur de l'adversaire. Ensuite, les bits de somme de contr√¥le et les valeurs de l'adversaire sont √©crits dans les bits interm√©diaires comme suit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e5/e6c/b30/0e5e6cb30922b23fc4f27cb10edfa383.png"></div><br>  L'√©tape suivante consiste √† effectuer plusieurs permutations cycliques des bits interm√©diaires √† gauche.  Une permutation cyclique vers la gauche signifie que tous les bits sont d√©cal√©s d'une position vers la gauche, et le bit qui √©tait le plus √† gauche se d√©place et devient le plus √† droite.  Pour calculer le nombre de permutations √† gauche, nous prenons la somme de la valeur de l'adversaire et du nombre de pertes, ajoutons 1 et prenons le reste de la division par 3 de ce r√©sultat.  Dans notre cas, il s'av√®re 2 + 1 + 1 = 4. Ensuite, le reste de 4/3 est 1, donc nous d√©calons cycliquement les bits interm√©diaires vers la gauche une fois. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b6/877/748/9b68777488be3ba29882276e1bb9f3be.png"></div><br>  √Ä ce stade, les bits interm√©diaires sont d√©j√† compl√®tement m√©lang√©s et il est temps de commencer √† les casser pour obtenir les chiffres qui composent le mot de passe.  Les mots de passe doivent √™tre compos√©s de 10 chiffres, nous allons donc diviser 28 bits interm√©diaires en 10 nombres distincts, que nous appellerons les valeurs de mot de passe P0, P1, P2, etc.  Chacune des neuf premi√®res valeurs de mot de passe re√ßoit 3 bits de donn√©es, et la derni√®re n'obtient qu'un seul des bits interm√©diaires.  Pour compl√©ter la valeur finale du mot de passe, nous inclurons √©galement des bits indiquant le nombre de permutations effectu√©es √† l'√©tape pr√©c√©dente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/afe/071/3ee/afe0713eea345b68c5a429b804b146c5.png"></div><br>  Enfin, nous ajoutons √† chaque valeur de mot de passe un d√©calage unique et cod√© en dur.  Le chiffre de mot de passe fini sera le reste de cette somme de la division par 10. Par exemple, dans la septi√®me position, nous utilisons le d√©calage 1, c'est-√†-dire que nous obtenons 5 + 1 = 6, et le dernier chiffre est le reste de 6/10, c'est-√†-dire 6. Dans la quatri√®me position que nous utilisons d√©calage 7, c'est-√†-dire que nous obtenons 5 + 7 = 12, et le chiffre final est √©gal au reste 12/10, soit 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f08/767/d3f/f08767d3fb4dff169947863869e2d7db.png"></div><br>  Nous avons donc obtenu des chiffres de mot de passe pr√™ts √† l'emploi qui peuvent √™tre v√©rifi√©s dans le jeu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70f/3df/4d4/70f3df4d44e3dee701740b7d1408a8c4.png"></div><br><h2>  D√©codage de mot de passe </h2><br>  Le processus de d√©codage des mots de passe vers le nombre de victoires / pertes / KO et la valeur de l'adversaire est une impl√©mentation simple dans l'ordre inverse de toutes les √©tapes d√©crites ci-dessus.  Je vais laisser cela comme t√¢che aux lecteurs.  Cependant, le jeu comporte deux erreurs notables qu'il commet lors du d√©codage et de la v√©rification des mots de passe saisis par le joueur. <br><br>  La premi√®re erreur se produit lors de la toute premi√®re √©tape de d√©codage du mot de passe, c'est-√†-dire lors de la soustraction des d√©calages pour revenir aux valeurs du mot de passe.  Les valeurs de mot de passe initiales contenaient chacune 3 bits de donn√©es, c'est-√†-dire que leurs valeurs avant d'appliquer les d√©calages devraient √™tre comprises entre 0 et 7.  Cependant, le joueur peut entrer un mot de passe qui, apr√®s avoir soustrait le d√©calage, donne une valeur de mot de passe de 8 ou 9 (en divisant par 10 le reste).  Au lieu de rejeter imm√©diatement un tel mot de passe, le jeu ne v√©rifie pas ce cas par erreur et vous permet d'ajouter un bit de donn√©es suppl√©mentaire √† la valeur du mot de passe qui peut polluer l'ensemble de bits interm√©diaires de telle sorte que les mots de passe ne seront plus uniques.  √âtant donn√© que certains bits interm√©diaires peuvent √™tre d√©finis soit avec le chiffre correspondant du mot de passe, soit avec un bit suppl√©mentaire de la valeur de mot de passe voisine, il existe de nombreux mots de passe qui peuvent √™tre convertis en le m√™me ensemble de bits interm√©diaires.  C'est pourquoi vous pouvez trouver diff√©rents mots de passe qui donnent le m√™me r√©sultat dans le jeu, bien qu'ils auraient d√ª √™tre uniques. <br><br>  La deuxi√®me erreur est un bug dans la logique que le jeu utilise pour v√©rifier les donn√©es apr√®s avoir d√©cod√© le mot de passe.  Le jeu essaie d'appliquer les conditions suivantes: <br><br><ul><li>  la somme de contr√¥le stock√©e dans le mot de passe correspond √† la somme de contr√¥le qui doit √™tre obtenue en tenant compte du nombre de victoires / pertes / KO stock√© dans le mot de passe </li><li>  la valeur de perte est 0, 1 ou 2 </li><li>  la valeur ennemie est 0, 1 ou 2 </li><li>  le nombre de permutations cycliques stock√©es dans le mot de passe est le nombre correct en tenant compte de la valeur des pertes et de la valeur de l'adversaire stock√©e dans le mot de passe </li><li>  tous les num√©ros de gain / perte / KO stock√©s dans le mot de passe sont compris entre 0 et 9 </li><li>  gagne&gt; = 3 </li><li>  gagne&gt; = KO </li></ul><br>  Si l'une de ces conditions n'est pas remplie, le jeu doit rejeter le mot de passe.  Cependant, il y a un bug dans l'impl√©mentation de la v√©rification finale (√† savoir, lors de la v√©rification des nombres encod√©s par BCD.) Au lieu de v√©rifier la victoire&gt; = KO, le jeu autorise les cas o√π le nombre sup√©rieur de victoires est 0, le nombre inf√©rieur de victoires&gt; = 3 et le nombre sup√©rieur de KO est inf√©rieur au nombre inf√©rieur. gagne.  Par exemple, un record avec 3 victoires, 0 d√©faite et 23 KO sera accept√© par le jeu (ce qui prouve le mot de passe 099 837 5823), bien qu'il doive √™tre rejet√© (car il est impossible de gagner 23 combats par KO si vous avez gagn√© en seulement 3 combats). <br><br><h2>  Conclusion </h2><br>  Les d√©tails particuliers d'un tel sch√©ma de codage sont uniques √† Punch-Out, mais l'id√©e g√©n√©rale d'obtenir des bits importants de l'√©tat du jeu, de les convertir avec la possibilit√© de restauration pour obscurcir l'√©tat initial, puis de les utiliser pour g√©n√©rer un certain nombre de caract√®res √† d√©montrer au joueur comme mot de passe est une approche assez universelle.  Vous pouvez utiliser des sommes de contr√¥le pour que les modifications accidentelles du mot de passe (par exemple, si un joueur fait une erreur) conduisent le plus souvent √† son rejet, plut√¥t que de cr√©er un autre mot de passe avec un √©tat de jeu al√©atoire. <br><br><h2>  Partie 2. Pr√©sentation du Punch-Out </h2><br>  Chaque combattant au Punch-Out de Mike Tyson !!!  contr√¥l√© par un ou plusieurs scripts de bytecode interpr√©t√©s.  Le personnage du joueur, Little Mac, ex√©cute un script simple qui contient la logique de chaque action disponible pour le joueur (esquive, blocs, coups de poing, etc.) Les personnages des adversaires sont contr√¥l√©s par 3 niveaux de scripts ind√©pendants qui cr√©ent ensemble le comportement du personnage. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0b/c1e/911/d0bc1e9118006e13ce453f7ed991cead.png"></div><br><h2>  Script de correspondance </h2><br>  Le script ennemi de plus haut niveau est ex√©cut√© tout au long des 3 rounds de bataille et contr√¥le les changements les plus ambitieux dans le comportement de l'adversaire.  J'appellerai ce script ¬´script de correspondance¬ª.  Sa t√¢che principale consiste √† choisir les comportements que l'ennemi adoptera en r√©ponse √† divers √©v√©nements au cours de la bataille.  Par exemple, un certain comportement sera d√©clench√© instantan√©ment apr√®s que l'adversaire se l√®ve apr√®s un renversement, ou lorsque le joueur manque de c≈ìur et se fatigue.  Ces comportements sont √©crits dans la table et sont appel√©s par le moteur de jeu en r√©ponse aux √©v√©nements correspondants.  Le script de match d√©finit √©galement les valeurs initiales des options de configuration li√©es √† la complexit√© de la bataille (par exemple, la dur√©e pendant laquelle l'adversaire reste vuln√©rable apr√®s une frappe manqu√©e.) Enfin, le script de match commence √† attendre certains marqueurs temporaires pendant la bataille pour apporter des modifications aux valeurs pr√©c√©demment d√©finies. . <br><br><h2>  Script de comportement </h2><br>  Le script d'un adversaire de niveau inf√©rieur est un ¬´script de comportement¬ª.  Ce niveau est responsable de la s√©quence de certains coups et attaques que l'adversaire doit effectuer dans le cadre du comportement actuel (d√©fini par le script de match.) Les scripts de comportement ex√©cutent des commandes comme ¬´appliquer le jab droit, faire une pause de 28 images, appliquer au hasard l'uppercut gauche ou droit, r√©p√©ter tout c'est 5 fois. "  Le script a √©galement des commandes pour lire et √©crire √† n'importe quelle adresse en m√©moire √† partir du moteur de jeu, donc le comportement peut √™tre tr√®s dynamique. <br><br><h2>  Script d'animation </h2><br>  Le script adversaire de niveau le plus bas est un ¬´script d'animation¬ª.  Ces scripts ex√©cutent les d√©tails de chaque coup, bloc ou attaque sp√©ciale dans le cadre du comportement (d√©fini par le script de comportement). √Ä ce niveau, des commandes telles que ¬´attribuer l'image-objet 23 √† l'image actuelle de l'animation de l'ennemi, la d√©placer vers le bas et vers la droite de 1 pixel toutes les deux images dans pour les 10 images suivantes, changez l'image d'animation en image-objet 24, jouez l'effet sonore 7 ".  En plus des commandes d'animation, les scripts d'animation effectuent √©galement des s√©quences de divers changements dans les √©tats de jeu qui sont √©troitement li√©s aux mouvements ennemis.  Par exemple, dans une longue animation d'une attaque sp√©ciale, un script d'animation peut ins√©rer des commandes qui rendent l'ennemi vuln√©rable aux renversements d'un coup sur une tr√®s courte p√©riode de temps.  Comme les scripts de comportement, les scripts d'animation peuvent lire et √©crire des adresses m√©moire arbitraires dans le moteur de jeu afin d'obtenir des effets plus dynamiques. <br><br><h2>  Script Little Mac </h2><br>  Le script ex√©cut√© par le personnage du joueur Little Mac est le plus similaire aux scripts d'animation ennemis.  Il modifie l'image actuelle de l'animation r√©fl√©chie et d√©place le joueur sur l'√©cran.  Comme les scripts d'animation, le script Little Mac ex√©cute des s√©quences de certains √©v√©nements de gameplay, par exemple, √† quel moment particulier le Mac doit frapper l'ennemi, ou quand il doit ex√©cuter un blocage ou une √©vasion.  Le script Little Mac contr√¥le l'entr√©e du joueur, de la m√™me mani√®re que les scripts comportementaux contr√¥lent les scripts d'animation ennemis. <br><br>  Chacun de ces quatre scripts est trait√© par son propre interpr√®te.  Bien que beaucoup d'entre eux aient les m√™mes fonctionnalit√©s, par exemple, un contr√¥le de contr√¥le de base et un acc√®s direct √† la m√©moire, chaque syst√®me impl√©mente sa propre version et ne partage pas le code commun (ou l'espace opcode) avec d'autres syst√®mes.  Cela permet √† chaque type de script d'√™tre tr√®s sp√©cifique et d'utiliser efficacement un petit ensemble de commandes cibles.  Les donn√©es de script repr√©sentent environ 22% des donn√©es non graphiques de la cartouche de jeu (le code machine du moteur de jeu lui-m√™me ne repr√©sente que 17%), il √©tait donc tr√®s important que les scripts aient un aspect compact. <br><br><h2>  Partie 3. Script de correspondance Punch-Out </h2><br>  Le script du match contr√¥le le comportement de l'adversaire au plus haut niveau.  L'op√©ration principale qu'il ex√©cute encore et encore attend un certain temps du tour et apporte des modifications aux donn√©es de configuration de l'adversaire √† ce moment.  La vid√©o montre le premier tour de la premi√®re bataille contre Bald Bull, ainsi qu'un script de match qui contr√¥le son comportement g√©n√©ral. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/99DN0sM9ep8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Il existe trois op√©rations principales qu'un script de correspondance peut effectuer.  La premi√®re consiste √† attendre que la minuterie ronde atteigne une certaine valeur.  La seconde consiste √† se demander si le comportement actuel de l'adversaire a chang√©.  Les comportements sont enregistr√©s dans la table de configuration du combat en m√©moire, puis appel√©s √† diff√©rents moments par les scripts de match et le moteur de jeu lui-m√™me.  Le tableau comporte deux segments de comportement utilis√©s par les scripts de correspondance.  Je les appelle un comportement ¬´de base¬ª et un comportement ¬´sp√©cial¬ª.  Les comportements sp√©ciaux sont, par exemple, une frappe Bull Charge d'un adversaire de Bald Bull ou Honda Rush d'un adversaire de Piston Honda, et les principaux comportements sont les coups habituels que l'adversaire d√©livre pour le reste du temps.  Les scripts de comportement sp√©cifiques utilis√©s pour impl√©menter ces types de comportements peuvent √™tre modifi√©s par le script de match directement pendant la bataille, de sorte que les combattants peuvent commencer avec un comportement principal et passer ensuite √† un autre (comme on le voit dans la vid√©o, Bald Bull le fait lorsque le chronom√®tre atteint 0). : 20.) <br><br>  Une caract√©ristique du changement des comportements effectu√©s par les scripts de correspondance est qu'ils peuvent √™tre remplac√©s par des changements de comportement demand√©s par le moteur de jeu.  Le moteur de jeu utilise quatre segments comportementaux pour demander de nouveaux comportements lorsque le Mac perd tout son c≈ìur et se fatigue, ainsi que lorsque l'adversaire se l√®ve apr√®s un renversement.  Si le script de match a r√©pondu √† la demande de changement de comportement, mais l'un de ces quatre √©v√©nements du moteur de jeu se produit avant le traitement de la demande (les requ√™tes ne peuvent pas √™tre trait√©es tant que l'adversaire n'est pas en attente), le moteur de jeu d√©finit le comportement souhait√© et la demande de script de match est rejet√©e.  Certains combattants, comme Bald Bull, demandent plusieurs fois un comportement sp√©cial sur une courte p√©riode.  Il semble que cela ne soit n√©cessaire que pour r√©duire la probabilit√© que l'une de ces demandes soit abandonn√©e accidentellement. <br><br>  La troisi√®me op√©ration principale du script de correspondance est l'application de correctifs de m√©moire.  La plupart des correctifs de m√©moire affectent la table de configuration de combat, o√π les scripts de comportement sont enregistr√©s.  En plus des ensembles de comportements, le tableau contient des donn√©es li√©es √† la complexit√© de la bataille.  Par exemple, lorsque le minuteur de la vid√©o atteint 0h30, Bald Bull modifie ses param√®tres de s√©curit√©.  Cela conduit au fait que le joueur ne peut plus le tromper en appuyant dessus, puis en frappant le corps.  De plus, les scripts de match ont la possibilit√© de patcher des adresses m√©moire arbitraires, mais cette fonction n'est utilis√©e qu'une seule fois - au d√©but du deuxi√®me tour avec Mike Tyson, afin que le joueur re√ßoive une √©toile pour la premi√®re fois lorsqu'il la frappe, ce qui est en mode veille. <br><br><h2>  Partie 4. Script de comportement de perforation </h2><br>  Nous examinons maintenant les scripts de comportement directement impliqu√©s dans l'impl√©mentation des comportements. <br><br>  La vid√©o montre une interpr√©tation de ce √† quoi pourrait ressembler le script de comportement du rival Piston Honda 1 dans les √©quipes anglaises. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_Q9_7vSLndQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Commandes d'animation </h2><br>  Les scripts comportementaux sont responsables du lancement s√©quentiel des animations de la m√™me mani√®re que les scripts de correspondance √©taient responsables du lancement des animations.  La commande <code>anim</code> joue une animation sp√©cifique et la commande <code>anim_rnd</code> ex√©cute une animation s√©lectionn√©e au hasard dans une liste de 8 options.  Dans la vid√©o ci-dessus, lors d'une s√©lection al√©atoire dans une liste d'options, l'option s√©lectionn√©e est momentan√©ment surlign√©e en rouge.  Lorsque Piston Honda applique ses deux premiers jabs, <code>anim</code> utilis√© pour chacun d'eux.  Apr√®s cela, il utilise <code>anim_rnd</code> pour s√©lectionner au hasard dans un ensemble contenant 6 animations de crochet et 2 animations vides.  √Ä la suite de cela, il accroche √† 75% du temps et ne fait rien √† 25% du temps. <br><br>  Du point de vue du script, le comportement des animations est jou√© de mani√®re synchrone, car lorsque le syst√®me d'animation n'est pas en mode veille, l'interpr√©teur de script est suspendu. <br><br><h2>  Commandes de contr√¥le d'ex√©cution </h2><br>  Il existe plusieurs commandes qui modifient l'ex√©cution du script de comportement lui-m√™me.  <code>pause</code> commandes de pause peuvent suspendre l'ex√©cution du script pour un certain nombre d'images ou pour le nombre d'images s√©lectionn√©es au hasard dans une liste de 2 options. <br><br>  Il existe diff√©rentes commandes de branchement qui, dans certaines conditions, basculent √©ventuellement vers diff√©rentes parties du script de comportement.  La <code>branch_rnd</code> a une probabilit√© donn√©e qu'une branche se produise √† chaque ex√©cution.  Un cas particulier de branchement probabiliste est la commande <code>branch_always</code> , qui a une probabilit√© de branchement de 100%. <br><br>  Un m√©canisme de boucle simple est int√©gr√© √† l'interpr√©teur de script de comportement.  La commande <code>set_loop_count</code> d√©finit la valeur actuelle du compteur de boucle.  Chaque fois que la commande <code>branch_while_loop</code> est <code>branch_while_loop</code> elle diminue la valeur du compteur de boucle de un et n'effectue de branchement que si la valeur du compteur est sup√©rieure √† z√©ro. <br><br>  Le dernier type de branchement v√©rifie le contenu de la m√©moire pour prendre une d√©cision sur le branchement.  Piston Honda utilise cette commande <code>branch_mem_test</code> pour v√©rifier si son dernier coup dans un comportement particulier a r√©ussi.  Si le coup atteint la cible, il se ramifie pour le coup suivant.  Si le hit n'a pas r√©ussi, il utilise la commande <code>branch_while_loop</code> pour continuer √† frapper uniquement lorsque 5 hits ont √©chou√©. <br><br><h2>  Commandes de comportement </h2><br>  Il existe deux commandes par lesquelles les scripts de comportement peuvent contr√¥ler le syst√®me de comportement lui-m√™me.  La commande <code>begin_behavior_main</code> utilis√©e pour mettre fin au comportement ex√©cutable actuel et d√©marrer le comportement principal.  Cela diff√®re de la ramification dans le script de comportement, car la partie du script consid√©r√©e comme le comportement ¬´principal¬ª actuel peut √™tre modifi√©e pendant la correspondance par le script de correspondance (voir la partie pr√©c√©dente de l'article sur les scripts de correspondance). <br><br>  Une autre commande li√©e au comportement est <code>enable_behavior_change</code> .  Lorsqu'un nouveau comportement est lanc√©, il commence par un √©tat de verrouillage, lorsque toutes les autres demandes de changement de comportement sont bloqu√©es.  √Ä l'aide de la commande <code>enable_behavior_change</code> script signale qu'il est pr√™t √† autoriser d'autres comportements.  Par exemple, dans le comportement sp√©cial Piston Honda, la commande <code>enable_behavior_change</code> jamais ex√©cut√©e, donc si le Mac est fatigu√© pendant ce temps, le comportement sp√©cial continue.  Cependant, les √©v√©nements de renversement contournent ce syst√®me, donc si pendant le comportement sp√©cial de Piston Honda le personnage principal est renvers√©, le comportement sera chang√© dans tous les cas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434550/">https://habr.com/ru/post/fr434550/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434538/index.html">La lutte pour l'espace: ce qui se passe sur le march√© de l'Internet par satellite</a></li>
<li><a href="../fr434540/index.html">Que faire des gens qui seront remplac√©s par des robots?</a></li>
<li><a href="../fr434542/index.html">Automatisation du processus de contr√¥le de la qualit√© des donn√©es de stockage d'entreprise</a></li>
<li><a href="../fr434544/index.html">¬´Nous ne voulons pas de guerre¬ª - Entretien avec Ben Williams, directeur d'Adblock Plus</a></li>
<li><a href="../fr434548/index.html">Le Patriote du Zimbabwe d√©pense 5 000 $ pour num√©riser son pays natal sur Google Street View</a></li>
<li><a href="../fr434552/index.html">GDG SPb. Ce que nous avons r√©ussi √† faire en un an</a></li>
<li><a href="../fr434558/index.html">Communaut√© de soutien sib√©rienne: commencer</a></li>
<li><a href="../fr434560/index.html">Qu'est-ce que 2018 a enseign√© ou √©tapes pratiques pour commencer √† mettre en ≈ìuvre les technologies num√©riques en 2019</a></li>
<li><a href="../fr434562/index.html">Samsung SSD 860 QVO 1 TB et 4 TB: le premier consommateur SATA QLC (1 partie)</a></li>
<li><a href="../fr434564/index.html">Le dessin repr√©sente 10% du travail du concepteur UX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>