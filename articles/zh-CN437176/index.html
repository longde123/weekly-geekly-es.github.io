<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ• ğŸ¤µğŸ» ğŸ‘¨ğŸ½â€ğŸ­ Kotlin + Flutter UIä¸Šçš„iOSå’ŒAndroidåº”ç”¨ç¨‹åº ğŸˆ¹ ğŸ§œ ğŸ•¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‚èµ›ä½œå“ 
 å¤§å®¶å¥½ å‰æ®µæ—¶é—´ï¼Œæˆ‘å†³å®šåŒæ—¶ä¸ºAndroidå’ŒiOSåˆ›å»ºæˆ‘çš„é¡¹ç›®ã€‚ è‡ªç„¶åœ°ï¼Œå‡ºç°äº†å…³äºæŠ€æœ¯é€‰æ‹©çš„é—®é¢˜ã€‚ å‡ å‘¨åï¼Œæˆ‘æŸ¥çœ‹äº†æµè¡Œçš„å †æ ˆï¼Œç„¶åé€‰æ‹©äº†Kotlin / Nativeã€‚ è‡ªä»æˆ‘æ˜¯ä¸€åAndroidå¼€å‘äººå‘˜ä»¥æ¥ï¼Œæˆ‘å°±å¾ˆç†Ÿæ‚‰Kotlinäº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¯¹Swiftçš„äº†è§£å¹¶ä¸å¤šï¼Œæˆ‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kotlin + Flutter UIä¸Šçš„iOSå’ŒAndroidåº”ç”¨ç¨‹åº</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437176/"><img src="https://habrastorage.org/webt/tn/n5/ey/tnn5eyx2-qajug1osnh-iduaoss.png" alt="å›¾ç‰‡"><br><br><h2> å‚èµ›ä½œå“ </h2><br> å¤§å®¶å¥½ å‰æ®µæ—¶é—´ï¼Œæˆ‘å†³å®šåŒæ—¶ä¸ºAndroidå’ŒiOSåˆ›å»ºæˆ‘çš„é¡¹ç›®ã€‚ è‡ªç„¶åœ°ï¼Œå‡ºç°äº†å…³äºæŠ€æœ¯é€‰æ‹©çš„é—®é¢˜ã€‚ å‡ å‘¨åï¼Œæˆ‘æŸ¥çœ‹äº†æµè¡Œçš„å †æ ˆï¼Œç„¶åé€‰æ‹©äº†Kotlin / Nativeã€‚ è‡ªä»æˆ‘æ˜¯ä¸€åAndroidå¼€å‘äººå‘˜ä»¥æ¥ï¼Œæˆ‘å°±å¾ˆç†Ÿæ‚‰Kotlinäº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¯¹Swiftçš„äº†è§£å¹¶ä¸å¤šï¼Œæˆ‘æƒ³è®©å¤§å¤šæ•°ä»£ç éƒ½é€‚ç”¨äºè¿™ä¸¤ä¸ªå¹³å°ã€‚ å› æ­¤ï¼Œè¿™ä¸ªé—®é¢˜ç«‹å³å‡ºç°ï¼Œä½†æ˜¯å¦‚ä½•ä¸ºiOSç¼–å†™UIã€‚ å¿«é€Ÿæµè§ˆä¸€ä¸‹å¸‚åœºï¼Œå‘ç°é‚£é‡Œæœ‰Flutterï¼Œå®ƒå…è®¸æ‚¨åŒæ—¶ä¸ºä¸¤ä¸ªå¹³å°ç¼–å†™UIã€‚ å®é™…ä¸Šï¼Œè¿™ä¸ªæ•…äº‹å¼€å§‹äº†ã€‚ <br><br> æœ¬æ–‡ä»‹ç»Flutterä½œä¸ºUIå’ŒKotlinè¿›è¡Œæ ¸å¿ƒé€»è¾‘æ„å»ºçš„ç»éªŒã€‚  <b>é‡è¦æç¤ºï¼š</b>çŒ«ä¸‹æœ‰å¾ˆå¤šå›¾ç‰‡å’Œæœ‰å…³å¦‚ä½•ç»„è£…é¡¹ç›®çš„è¯´æ˜ <br><a name="habracut"></a><br><h3> ç›®å½• </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨Kotlinä¸Šåˆ›å»ºå…±äº«åº“</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»ºä¸€ä¸ªAndroidåº”ç”¨ç¨‹åº</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»ºä¸€ä¸ªiOSé¡¹ç›®</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†Flutteræ·»åŠ åˆ°Androidåº”ç”¨</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†Flutteræ·»åŠ åˆ°iOSé¡¹ç›®</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»“è®º</a> </li></ul><br><h2> ç¬¬ä¸€éƒ¨åˆ† </h2><a name="Part1"></a><br><h3> åœ¨Kotlinä¸Šåˆ›å»ºå…±äº«åº“ </h3><br><ol><li> é€‰æ‹©Kotlin Mobileå…±äº«åº“ <br><br><img src="https://habrastorage.org/webt/9v/ih/vf/9vihvf3lnf6ppc1lppe_mpsqjxm.png" alt="å›¾ç‰‡"></li><li> ä¸‹ä¸€ä¸ª <br><br><img src="https://habrastorage.org/webt/sm/xm/i1/smxmi1x1g3ru3qaiy8l8knekwsm.png" alt="å›¾ç‰‡"></li><li> æŒ‡å®šæˆ‘ä»¬çš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæˆ‘ä¸ºé¡¹ç›®åˆ›å»ºäº†ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹ã€‚ ç”±äºæˆ‘å°†æœ‰4ä¸ªä¸åŒçš„é¡¹ç›®ï¼Œå› æ­¤å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªä½ç½®æ›´æ–¹ä¾¿ <br><br><img src="https://habrastorage.org/webt/gg/cm/p7/ggcmp7a-lfkfykiahtf8fmr26bu.png" alt="å›¾ç‰‡"></li><li>ä»ç„¶éœ€è¦åœ¨<code>sdk.dir</code>ä¸­æŒ‡å®š<code>sdk.dir</code>çš„è·¯å¾„ï¼Œ <code>sdk.dir</code>å¼€å§‹æ„å»ºé¡¹ç›®ï¼Œæˆ‘çš„è·¯å¾„æ˜¯<code>/Users/vlad/Library/Android/sdk</code> <br><br><img src="https://habrastorage.org/webt/s1/qs/ma/s1qsmae_reifkslk0t94n1waibq.png" alt="å›¾ç‰‡"></li><li> é¡¹ç›®ç»“æ„ï¼Œå°†åŒ…åç§°ä»<code><code>sample  habr.example</code></code>æ›´æ”¹<code><code>sample </code> habr.example</code> <br><br><img src="https://habrastorage.org/webt/tx/xa/sp/txxaspup0aj21roktmzrse3wpre.png" alt="å›¾ç‰‡"></li><li> æ˜¯æ—¶å€™å¼€å§‹å‘å¸ƒäº†ï¼Œè°ƒç”¨<code>wrapper</code> ã€‚ ä¹‹åï¼Œ.gradlew <code>.gradlew</code>å°†å‡ºç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç»ˆç«¯ä¸Šä½¿ç”¨å®ƒã€‚ <br><br><img src="https://habrastorage.org/webt/hq/tt/ex/hqttexr0kbmajyia4nb-_bm7zvy.png" alt="å›¾ç‰‡"></li><li> ä»ç»ˆç«¯<code>./gradlew publishToMavenLocal</code> <br><br><img src="https://habrastorage.org/webt/2l/zz/q3/2lzzq3aic0tvmactva-ckfyijgg.png" alt="å›¾ç‰‡"></li><li> ä¹‹åï¼Œåœ¨æœ¬åœ°Mavenå­˜å‚¨åº“ä¸­ï¼Œæˆ‘ä»¬å°†æœ‰4ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™äº›æ–‡ä»¶å¤¹å°†ä½äºæˆ‘ä»¬çš„åº“ä¸­ <br><br><img src="https://habrastorage.org/webt/tx/j9/hu/txj9hupusxcluuq-xl8zxmms7m8.png" alt="å›¾ç‰‡"></li></ol><br><h2> ç¬¬äºŒéƒ¨åˆ† </h2><a name="Part2"></a><br><h3> åˆ›å»ºä¸€ä¸ªAndroidåº”ç”¨ç¨‹åº </h3><br> åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›® <br><br><div class="spoiler">  <b class="spoiler_title">è¿™é‡Œçš„ä¸€åˆ‡éƒ½æ˜¯æ ‡å‡†çš„ã€‚</b> <div class="spoiler_text"><br><img src="https://habrastorage.org/webt/6z/i4/yl/6zi4yli8ggxwaheqsrt9rqeyiqg.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/dx/ay/at/dxayatfq4rdaxi0yfn0yuakepoa.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/ae/nm/lp/aenmlp8jhosi8tjthkiqq2wpd1k.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/05/ic/nc/05icncf4al2slfyas4kbcsgp4my.png" alt="å›¾ç‰‡"><br></div></div><br><ol><li> åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¯¥é¡¹ç›®çš„ç”Ÿæˆå…·æœ‰â€œä¸­æ–­çš„â€ä¾èµ–å…³ç³»ï¼Œå› æ­¤æˆ‘ä»¬åœ¨<code>jre7</code>çš„æœ«å°¾å°†å…¶åˆ é™¤ï¼Œæˆ‘ä»¬å¾—åˆ°<code>koltin-stdlib</code> ï¼Œä¹‹åè¯¥é¡¹ç›®å¼€å§‹æ„å»º <br><br><img src="https://habrastorage.org/webt/4m/jy/vv/4mjyvvguzs20la2elbcxvprwxda.png" alt="å›¾ç‰‡"></li><li> æ‰“å¼€<code>build.gradle</code>å¹¶å°†<code>mavenLocal</code>æ·»åŠ <code>mavenLocal</code> <code>repositories</code>éƒ¨åˆ†ã€‚  <b>é‡è¦ï¼</b>  <code>repositories</code>éƒ¨åˆ†åº”è¯¥åœ¨<code>allprojects</code>è€Œä¸æ˜¯åœ¨<code>allprojects</code>ä¸­ <br><br><img src="https://habrastorage.org/webt/_p/az/7w/_paz7wevjbjnt_qclsoniuqlbpw.png" alt="å›¾ç‰‡"></li><li> ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„åº“æ·»åŠ ä¸ºä¾èµ–é¡¹ <br> <code>implementation 'habr.example:commonLibrary-jvm:0.0.1'</code> <br> <br><img src="https://habrastorage.org/webt/yu/fw/2s/yufw2sv7ujhsfkta0pxx655jbaq.png" alt="å›¾ç‰‡"></li><li> æˆ‘ä»¬æ‰“å¼€<code>activity_main.xml</code>å¹¶åœ¨<code>main_activity_text</code> <code>TextView</code> IDä¸­æŒ‡å®š<code>main_activity_text</code> <br><br><img src="https://habrastorage.org/webt/fu/io/_h/fuio_hytjxh69uzbhcn794n8wsg.png" alt="å›¾ç‰‡"></li><li> åœ¨<code>MainActivity.kt</code>åªéœ€åœ¨æ­¤<code>TextView</code>è®¾ç½®æ–‡æœ¬ <br><br><img src="https://habrastorage.org/webt/xb/a2/ko/xba2kofenukufnaiy5dyukz1wzq.png" alt="å›¾ç‰‡"></li><li> å¤ªå¥½äº†ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯ä»¥ä½¿ç”¨æˆ‘ä»¬åº“ä¸­çš„<code>hello()</code>å‡½æ•°çš„Androidåº”ç”¨ç¨‹åº <div class="spoiler">  <b class="spoiler_title">æ¨¡æ‹Ÿå™¨ä¸Šçš„helloï¼ˆï¼‰</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hx/np/hn/hxnphnn6gcund5pwchqsupx9py4.png" alt="å›¾ç‰‡"></div></div></li></ol><br><h2> ç¬¬ä¸‰éƒ¨åˆ† </h2><a name="Part3"></a><br><h3> åˆ›å»ºä¸€ä¸ªiOSé¡¹ç›® </h3><br><ol><li> é€‰æ‹©å•è§†å›¾åº”ç”¨ <br><br><img src="https://habrastorage.org/webt/wh/sm/rd/whsmrdovqwginog3ork9m-ixl6e.png" alt="å›¾ç‰‡"></li><li> å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œç„¶åé€‰æ‹©æ–‡ä»¶å¤¹ã€‚ é€‰æ‹©æˆ‘ä»¬å…¶ä»–é¡¹ç›®çš„æ–‡ä»¶å¤¹æ ¹ç›®å½•å¾ˆé‡è¦ï¼Œå› ä¸ºXcodeå°†åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é¡¹ç›®åç§°çš„å­æ–‡ä»¶å¤¹ã€‚ <br><br><img src="https://habrastorage.org/webt/dm/0n/ek/dm0nekavglxijkgxn2aqevqzewu.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/zz/ar/l3/zzarl3w00bmqb5_trebibfdys_s.png" alt="å›¾ç‰‡"></li><li> é¦–å…ˆï¼Œæ·»åŠ <code>CocoaPods</code> ã€‚ ä¸ºæ­¤ï¼Œè¯·åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¿è¡Œ<code>pod init</code> ï¼Œåœ¨<code>Xcode</code>å…³é—­é¡¹ç›®<code>Xcode</code>ç„¶åè¿è¡Œ<code>pod install</code> ã€‚ æˆ‘ä»¬çœ‹åˆ°å®‰è£…æˆåŠŸå®Œæˆ <br><br><img src="https://habrastorage.org/webt/-u/gs/yl/-ugsylzq2r2dynkhhf-oiao60t8.png" alt="å›¾ç‰‡"></li><li>  <b>é‡è¦ï¼</b>  <code>CocoaPods</code>ä¸å»ºè®®å°†<code>/Pods</code>æ–‡ä»¶å¤¹æ·»åŠ åˆ°<code>.gitignore</code> ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ã€‚ ç”±äºæ·»åŠ äº†<code>flutter</code> ï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ª<code>build</code>é‡æ–°é…ç½®ä¾èµ–é¡¹ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘æ›´å–œæ¬¢è¿™ç§è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯é˜»å¡<code>.git</code> </li><li> é€šè¿‡æ–‡ä»¶<code>Awesome App.xcworkspace</code>æ‰“å¼€é¡¹ç›® <br><br><img src="https://habrastorage.org/webt/op/lc/tb/oplctbpukazz8zvqmk5joh9__l0.png" alt="å›¾ç‰‡"></li><li> æˆ‘ä»¬æ‰“å¼€ç»ˆç«¯ï¼Œåœ¨å…¶ä¸­è½¬åˆ°æˆ‘ä»¬çš„<code>./gradlew linkDebugFrameworkIos</code>æ–‡ä»¶å¤¹ï¼Œç„¶åè¿è¡Œ<code>./gradlew linkDebugFrameworkIos</code> ã€‚ ä¹‹åï¼Œ <code>iOSFramework</code>å‡ºç°åœ¨æˆ‘ä»¬çš„<code>build</code>æ–‡ä»¶å¤¹ä¸­<code>iOSFramework</code> <br><br><img src="https://habrastorage.org/webt/js/wa/60/jswa60y2wu1kjt6sjgeqtjc6rsm.png" alt="å›¾ç‰‡"></li><li> é€‰æ‹©ç›®æ ‡ <br><br><img src="https://habrastorage.org/webt/ib/df/mk/ibdfmkvpdousduhvyhkudid0jke.png" alt="å›¾ç‰‡"></li><li> å¯¹äºè¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬æ·»åŠ äºŒè¿›åˆ¶ <br><br><img src="https://habrastorage.org/webt/ca/z8/86/caz8860hcerj6i9viyftgsv8emo.png" alt="å›¾ç‰‡"></li><li> é€‰æ‹©æ·»åŠ å…¶ä»– <br><br><img src="https://habrastorage.org/webt/xq/5a/xj/xq5axjattke900eciiyfck5uxky.png" alt="å›¾ç‰‡"></li><li> æŒ‡å®šæ‚¨åœ¨æ­¥éª¤6ä¸­æ”¶åˆ°çš„<code>framework</code>çš„è·¯å¾„ï¼ˆ <code>commonLibrary.framework</code> ï¼‰ <br><br><img src="https://habrastorage.org/webt/5-/8w/wd/5-8wwdjjm2ydn-5xtjoox7ayn7i.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/kb/3-/rn/kb3-rn2dsfenbg6m6hycwljqrjo.png" alt="å›¾ç‰‡"></li><li> ç°åœ¨åœ¨é¡¹ç›®ä¸­åº”æ˜¾ç¤ºæ­¤<code>framework</code> <br><br><img src="https://habrastorage.org/webt/07/0m/0y/070m0yvsht6bwx-spupgst_oe1i.png" alt="å›¾ç‰‡"></li><li> è½¬åˆ°<code>Build Settings</code>å¹¶ç¦ç”¨<code>Enable Bitcode</code> <br><br><img src="https://habrastorage.org/webt/qv/f8/me/qvf8meu7dhulzmhyjxbwjs_mvrw.png" alt="å›¾ç‰‡"></li><li> ç°åœ¨ï¼Œæ‚¨éœ€è¦æŒ‡å®šç¡®åˆ‡çš„ä½ç½®æ¥æŸ¥æ‰¾æˆ‘ä»¬çš„<code>framework</code> ï¼Œæ‰“å¼€â€œ <code>Framework Search Path</code> <br><br><img src="https://habrastorage.org/webt/mm/er/qn/mmerqn5fmpnbb18rtl1xqroa3uu.png" alt="å›¾ç‰‡"></li><li> æŒ‡å®šè·¯å¾„<code>"${PODS_ROOT}/../../commonLibrary"</code> ã€‚ ç¡®ä¿é€‰æ‹©<code>recursive</code> ã€‚ å½“ç„¶ï¼Œå¦‚æœæ‚¨æ›´å‡†ç¡®åœ°é…ç½®è·¯å¾„ï¼Œåˆ™å¯ä»¥ä¸è¿™æ ·åšã€‚ ä½†æ˜¯ï¼Œç”±äºè¿™ä»…ä»…æ˜¯é¡¹ç›®çš„å¼€å§‹ï¼Œå› æ­¤å¯¹äºæˆ‘ä»¬æ¥è¯´ç¡®ä¿æ•´ä¸ªå·¥ä½œéƒ½èƒ½æ­£å¸¸è¿›è¡Œå¾ˆé‡è¦ã€‚ ç„¶åæˆ‘ä»¬å¯ä»¥æ”¹å˜æ–¹å¼ <br><br><img src="https://habrastorage.org/webt/nr/t6/4h/nrt64hosrv4amzwaggq21z2czk4.png" alt="å›¾ç‰‡"></li><li> æˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨<code>Xcode</code>æ¯ä¸ª<code>build</code>ä¸­<code>Xcode</code>æˆ‘ä»¬çš„<code>framework</code>ä½¿ç”¨<code>gradle</code> ã€‚ å¼€æ”¾<code>Build Phases</code> <br><br><img src="https://habrastorage.org/webt/v_/fw/tp/v_fwtptscjajeguglhiagdr3jke.png" alt="å›¾ç‰‡"></li><li> æ·»åŠ ä¸€ä¸ªæ–°çš„<code>Script Phase</code> <br><br><img src="https://habrastorage.org/webt/lu/qi/gi/luqigim-6ssgxd-vmy_3kstef6s.png" alt="å›¾ç‰‡"></li><li> æ·»åŠ è„šæœ¬ä»£ç ã€‚ <br><br><pre> <code class="ruby hljs">cd <span class="hljs-string"><span class="hljs-string">"${PODS_ROOT}/../../commonLibrary"</span></span> echo $(pwd) ./gradlew linkIos</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªéœ€è½¬åˆ°åº“çš„é¡¹ç›®æ–‡ä»¶å¤¹å¹¶è¿è¡Œ<code>./gradlew linkIos</code> ã€‚ ä»…åœ¨æ§åˆ¶å°ä¸­éœ€è¦æ˜¾ç¤º<code>echo $(pwd)</code>è°ƒç”¨ï¼Œæ‰èƒ½æ˜¾ç¤ºæˆ‘ä»¬åˆ°å“ªä¸ªç‰¹å®šæ–‡ä»¶å¤¹ <br><br><img src="https://habrastorage.org/webt/li/-c/yd/li-cydckaogxfa66p5n9cmebbwg.png" alt="å›¾ç‰‡"></li><li> åœ¨<code>target dependencies</code>ä¹‹åï¼Œæˆ‘ä»¬å°†<code>build phase</code>æ¨åˆ°äº†æœ€é¡¶å±‚ <br><br><img src="https://habrastorage.org/webt/v4/kw/yz/v4kwyzblhw49ukhiazvvm_3yk3i.png" alt="å›¾ç‰‡"></li><li> ç°åœ¨æ‰“å¼€<code>ViewController</code>å¹¶ä»åº“ä¸­æ·»åŠ å¯¹æˆ‘ä»¬å‡½æ•°çš„è°ƒç”¨ <br><br><img src="https://habrastorage.org/webt/ru/r6/03/rur603vthj9viihpxh2k8mvscmg.png" alt="å›¾ç‰‡"></li><li> æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬çš„é¡¹ç›®ï¼Œçœ‹çœ‹ <br><br><img src="https://habrastorage.org/webt/g0/r5/_v/g0r5_v0jincaisukye4vixbcbya.png" alt="å›¾ç‰‡"></li></ol><br> å¤ªå¥½äº†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å·²å°†Kotlinåº“æ­£ç¡®è¿æ¥åˆ°iOSé¡¹ç›®ã€‚ <br> å‰©ä¸‹çš„å°±æ˜¯åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æ·»åŠ é¢¤åŠ¨ï¼ˆä½œä¸ºç¼–å†™UIçš„æ¡†æ¶ï¼‰ï¼Œç„¶åæ‚¨å°±å¯ä»¥å¼€å§‹å¼€å‘äº§å“äº† <br><br><h2> ç¬¬4éƒ¨åˆ† </h2><a name="Part4"></a><br><h3> å°†Flutteræ·»åŠ åˆ°Androidåº”ç”¨ </h3><br> ç„¶ååœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>ä¸Šçš„ä¸€ç¯‡æ–‡ç« å¯¹æˆ‘æœ‰å¾ˆå¤§å¸®åŠ© <br><br><ol><li> è½¬åˆ°æˆ‘ä»¬æ‰€æœ‰é¡¹ç›®æ‰€åœ¨çš„æ ¹æ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œ<code>flutter create -t module flutter_ui</code> <br><br><img src="https://habrastorage.org/webt/7h/m2/hb/7hm2hbcpuh0l9i5acnr6jmkpjk0.png" alt="å›¾ç‰‡"><br></li><li> æ‰“å¼€<code>settings.gradle</code>å¹¶å°†flutter-moduleå¯ç”¨ä¸ºå­é¡¹ç›® <br><br><img src="https://habrastorage.org/webt/qo/cn/od/qocnodbi3qtq4cjjfdw7bdtkn40.png" alt="å›¾ç‰‡"><br></li><li> æ‰“å¼€build.gradleæ–‡ä»¶å¹¶æ·»åŠ æˆ‘ä»¬çš„é¡¹ç›®ï¼Œå…·ä½“å–å†³äº <br><br><img src="https://habrastorage.org/webt/-6/c_/ez/-6c_ezkjqkqc_zdvdrw8snv1kdi.png" alt="å›¾ç‰‡"><br></li><li>  <code>MainActivity.kt</code>ä¸º<code>FlutterActivity</code> <br><br><img src="https://habrastorage.org/webt/sg/ji/th/sgjith4j4y16zlsa9mwchkudjae.png" alt="å›¾ç‰‡"><br></li><li> æ·»åŠ <code>App.kt</code> ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆå§‹åŒ–<code>Flutter</code> <br><br><img src="https://habrastorage.org/webt/ox/nx/mf/oxnxmfhqw1mdir99e3pcd-pny7g.png" alt="å›¾ç‰‡"><br></li><li> æ›´æ”¹æ¸…å•å¹¶è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ª<code>Application</code>ç±» <br><br><img src="https://habrastorage.org/webt/mx/zm/an/mxzman7erwk9r7kqbybzcppeo94.png" alt="å›¾ç‰‡"><br></li><li> ç¡®ä¿æ·»åŠ <code>java8</code> ï¼Œå¦åˆ™å°†æ— æ³•å¯åŠ¨ <br><br><img src="https://habrastorage.org/webt/lu/ha/t4/luhat4wsecwx0zsuenocq4fkbc0.png" alt="å›¾ç‰‡"><br></li><li> æˆ‘ä»¬åœ¨<u>JVM</u>æ—¥å¿—çš„<u>Helloä¸­</u>çœ‹åˆ°äº†UIï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†UIæ”¾åœ¨Flutterä¸Šï¼Œå¹¶å°†ä¸»åº“æ”¾åœ¨Kotlin / Nativeä¸Š <br><br> <a href=""><img src="https://habrastorage.org/webt/rb/-0/2u/rb-02uakaz1-62vubrmax6g0bso.png"></a> <br><br><img src="https://habrastorage.org/webt/3g/bm/az/3gbmazzp7tktkmgsutsgrdpjih8.png" alt="å›¾ç‰‡"><br></li><li> åœ¨<code>MainActivity.kt</code>ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä»Flutterä¸­è°ƒç”¨è¯¥æ–¹æ³•ã€‚ åœ¨è¿™é‡Œï¼Œåœ¨Flutterçš„äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬ä»kotlin-libraryè¿”å›äº†<code>hello()</code> <br><br><img src="https://habrastorage.org/webt/ai/uq/hp/aiuqhpmvl823rrhvjj8yhlsvymc.png" alt="å›¾ç‰‡"><br></li><li> å¹¶å°†ä»£ç æ·»åŠ åˆ°<code>main.dart</code> ï¼Œè¯¥ä»£ç å°†<code>iOS/Android-</code>åº”ç”¨ç¨‹åºçš„<code>iOS/Android-</code>è°ƒç”¨è¯¥æ–¹æ³• <br><br><img src="https://habrastorage.org/webt/vc/lp/rz/vclprz5zjtbqdczannng6t_teoi.png" alt="å›¾ç‰‡"><br></li><li> æˆ‘ä»¬å¾—åˆ° <br> <a href=""><img src="https://habrastorage.org/webt/1i/49/8v/1i498vcqirringj5rr8sz1cbmyw.png"></a> <br></li></ol><br><h2> ç¬¬5éƒ¨åˆ† </h2><a name="Part5"></a><br><h3> å°†Flutteræ·»åŠ åˆ°iOS App </h3><br><ol><li> æ›´æ–°æˆ‘ä»¬çš„<code>Podfile</code> <br><pre> <code class="ruby hljs">flutter_application_path = File.expand_path(<span class="hljs-string"><span class="hljs-string">"../flutter_ui"</span></span>, File.dirname(path)) eval(File.read( File.join( flutter_application_path, <span class="hljs-string"><span class="hljs-string">'.ios'</span></span>, <span class="hljs-string"><span class="hljs-string">'Flutter'</span></span>, <span class="hljs-string"><span class="hljs-string">'podhelper.rb'</span></span>)), binding)</code> </pre><br><img src="https://habrastorage.org/webt/62/tp/zl/62tpzluojshpo3s1ctpgio55dos.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/8h/le/_z/8hle_zsuchlejqtqob8ddse39k8.png" alt="å›¾ç‰‡"></li><li>  <b>è¿™å¾ˆé‡è¦</b> ã€‚ å°†<code>$(inherited)</code>æ·»åŠ åˆ°<code>framework search paths</code>çš„ç¬¬ä¸€è¡Œã€‚ ç¡®ä¿æ£€æŸ¥<code>framework search paths</code>ç©º <br><br><img src="https://habrastorage.org/webt/kb/yi/n-/kbyin-eec4jk_jpypglbhnmkonw.png" alt="å›¾ç‰‡"><br><br> å½“æ‚¨åœ¨<code>some/path/my_flutter/pubspec.yaml</code>æ›´æ”¹ä¾èµ–<code>some/path/my_flutter/pubspec.yaml</code> ï¼Œæ‚¨éœ€è¦è¿è¡Œä»<code>some/path/my_flutter</code> <code>flutter packages get</code>ä»¥æ›´æ–°<code>some/path/my_flutter</code>ä¸­çš„ä¾èµ–<code>podhelper.rb</code> ã€‚ ä¹‹åï¼Œä»<code>some/path/MyApp</code>è¿è¡Œ<code>pod install</code> </li><li> ä»…é’ˆå¯¹Flutterå¢åŠ 1ä¸ª<code>Build Phase</code> ã€‚  <b>åœ¨</b> <code>Script phase</code> <b>ç¬¬3éƒ¨åˆ†ä¸­æ·»åŠ çš„å†…å®¹ä¹‹ä¸Š</b> <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh"</span></span> build <span class="hljs-string"><span class="hljs-string">"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh"</span></span> embed</code> </pre><br><img src="https://habrastorage.org/webt/qn/cu/ae/qncuaeb_4nit-13xc-0dzdlobu4.png" alt="å›¾ç‰‡"></li><li> ç”¨<code>FlutterAppDelegate</code> <code>AppDelegate</code>æˆ‘ä»¬çš„<code>AppDelegate</code> <br><br><img src="https://habrastorage.org/webt/x6/qd/oy/x6qdoylgfgde0jzsryehlfi4nt0.png" alt="å›¾ç‰‡"></li><li> æ›´æ–°<code>ViewController</code> <br><br><img src="https://habrastorage.org/webt/7y/oi/x5/7yoix508vlyhyvgzx-dlcnklvwk.png" alt="å›¾ç‰‡"></li><li> å°†<code>ViewController</code>åŒ…è£¹åœ¨<code>NavigatorController</code> <br><br><img src="https://habrastorage.org/webt/xb/kg/5h/xbkg5hxwfttdgo3vlihibgwtzya.png" alt="å›¾ç‰‡"> <a href=""><img src="https://habrastorage.org/webt/ul/yf/wu/ulyfwu_khrnskwnggz4-aeianma.png"></a> </li><li> ç°åœ¨ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨ã€‚ ä½†æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨åº“å’Œé¢¤æŒ¯ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³» <a href=""><img src="https://habrastorage.org/webt/4x/wl/gz/4xwlgzn-gdy5ejb4s3kxcawtpio.png"></a> </li><li> ä½¿ç”¨<code>FlutterMethodChannel</code>æ·»åŠ æ­¤é“¾æ¥ <br><br><img src="https://habrastorage.org/webt/is/ah/3s/isah3stvmthus7why381vaikabq.png" alt="å›¾ç‰‡"><br></li><li> å¤ªå¥½äº†ï¼Œç°åœ¨iOSåº”ç”¨ç¨‹åºå°†<code>flutter</code>ç”¨äº<code>UI</code> ï¼Œå°†<code>kotlin</code>ç”¨äºä¸»è¦é€»è¾‘ã€‚ <br><br> <a href=""><img src="https://habrastorage.org/webt/mq/ss/jg/mqssjg0c9ln11i-_vik9qxjwejc.png"></a> <br></li></ol><br><h2> ç»“è®º <a name="Conclusion"></a></h2><br> è¿™é‡Œè¦è¯´çš„å¾ˆé‡è¦ï¼šæˆ‘ä¸å‡è£…æ‚¨å·²ç»å­¦åˆ°äº†æ–°çš„ä¸œè¥¿æˆ–ç‹¬ç‰¹çš„ä¸œè¥¿ã€‚ æˆ‘åªæ˜¯åˆ†äº«äº†æˆ‘çš„ç»éªŒï¼Œå› ä¸ºä¸ºäº†ä½¿æ‰€æœ‰è¿™äº›ååŒå·¥ä½œï¼Œæˆ‘èŠ±äº†å¤§çº¦4ä¸ªå·¥ä½œæ—¥ã€‚ è€Œä¸”æˆ‘æ‰¾ä¸åˆ°åŒæ—¶ä½¿ç”¨Kotlin / Nativeå’ŒFlutterçš„é¡¹ç›®ä»£ç ç¤ºä¾‹ <br><br> æœ€ç»ˆé¡¹ç›® <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¹ç›®ç»„</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">flutter-ui</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ios</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®‰å“</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ™®é€šå›¾ä¹¦é¦†</a> </li></ol><br> é“¾æ¥åˆ—è¡¨å¯¹æˆ‘æœ‰å¸®åŠ©ï¼Œä½†ä¸æ˜¯ç«‹å³ <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªå·±æ‰‘</a> </li><li> æœ¬æœºä»£ç ä¸UI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Flutterå¹³å°é€šé“</a>ä¹‹é—´çš„å…³ç³» </li><li> å°†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Flutter</a>æ·»åŠ åˆ°ç°æœ‰çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>åº”ç”¨ä¸­ </li><li>  Kotlin Native <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æœºæ¦‚è¿°</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN437176/">https://habr.com/ru/post/zh-CN437176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN437164/index.html">ï¼ƒå¯¹ç¨‹åºå‘˜çš„10å¹´æŒ‘æˆ˜</a></li>
<li><a href="../zh-CN437166/index.html">åœ¨Meteor-eä¸Šè¿›è¡Œæˆ˜æ–—é£è¡Œ</a></li>
<li><a href="../zh-CN437170/index.html">Facebookå»ºè®®ä½¿ç”¨å¤ªç©ºæ¿€å…‰å™¨è¿›è¡Œå…¨çƒäº¤æµ</a></li>
<li><a href="../zh-CN437172/index.html">IBM MQå’ŒJMeterï¼šé¦–æ¬¡è”ç³»</a></li>
<li><a href="../zh-CN437174/index.html">.NETï¼ŒTensorFlowå’ŒKaggleçš„é£è½¦-æ—…ç¨‹å¼€å§‹</a></li>
<li><a href="../zh-CN437180/index.html">ä¸¥è‹›çš„è¥¿ä¼¯åˆ©äºšJVMï¼šå…³äºExcelsior JETçš„ç²¾å½©é‡‡è®¿</a></li>
<li><a href="../zh-CN437182/index.html">Linuxå†…æ ¸æ¨¡å—ä¸­çš„ç³»ç»Ÿè°ƒç”¨æ‹¦æˆª</a></li>
<li><a href="../zh-CN437184/index.html">Nikolay Durov 90ï¼…å®Œæˆäº†Telegramå¼€æ”¾ç½‘ç»œå¹³å°çš„å¼€å‘</a></li>
<li><a href="../zh-CN437186/index.html">æ•´ä½“åˆ°å¾®æœåŠ¡ã€‚ åŸºç¡€è®¾æ–½è§‚ç‚¹</a></li>
<li><a href="../zh-CN437190/index.html">å…³äºç›‘æ§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>