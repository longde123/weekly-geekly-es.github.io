<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> 达  隆No duermas! C贸mo aprendimos a lanzar 12,000 ofertas de boletos por noche け  </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La operaci贸n ininterrumpida de miles de tiendas Pyaterochka depende en gran medida de un software confiable y personalizado. Ahora la red usa el produ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>隆No duermas! C贸mo aprendimos a lanzar 12,000 ofertas de boletos por noche</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/483800/">  La operaci贸n ininterrumpida de miles de tiendas Pyaterochka depende en gran medida de un software confiable y personalizado.  Ahora la red usa el producto de GK SOFTWARE, que ha mejorado desde la versi贸n en caja hasta el desarrollo de c贸digo dentro de X5.  En nuestro art铆culo, le diremos qu茅 camino hemos tomado en la instalaci贸n de lanzamientos, asegurando el crecimiento comercial de la compa帽铆a desde tiendas individuales en software nuevo hasta los 15,000 actuales. <br><br><img src="https://habrastorage.org/webt/ps/qh/vf/psqhvf_lkkljsaixaki1r0svy2w.jpeg"><br><a name="habracut"></a><br><h3>  Casos de tiempos pasados, una profunda tradici贸n </h3><br>  El per铆odo de diez a帽os para TI en el mundo moderno es historia.  En 2009, las primeras cadenas de tiendas Pyaterochka se cambiaron a GK, aparecieron las primeras tareas de actualizaci贸n de software.  El proceso se parec铆a a esto: trabajo completamente manual, an谩lisis de los registros con los "ojos" en cada tienda, problemas constantes al iniciar el software: al finalizar la compra, el equipo deja de inicializarse, luego los servicios GK no se inician en el servidor. <br><br>  A medida que el sistema GK se estabiliz贸 y se desarrollaron las herramientas de actualizaci贸n, fuimos a implementar a trav茅s del componente central del sistema GK, Storemanager, en una cantidad de 100 a 200 tiendas por noche (por empleado).  Entonces se consider贸 un gran logro.  Para garantizar la velocidad de actualizaci贸n en 1000 tiendas, ya se requer铆a un personal externo; solo con un equipo de 6 personas por noche podr铆amos alcanzar el n煤mero requerido de puntos de venta.  Para crear una tarea de actualizaci贸n, era necesario "hacer clic" en cada tienda con sus manos.  Cada trabajo conten铆a solo 50 objetos, ya que hab铆a una posibilidad debido a un error interno de perder todos los estados despu茅s de la actualizaci贸n, y luego se necesitar铆a una verificaci贸n manual completa. <br><br><img src="https://habrastorage.org/webt/bw/dj/d4/bwdjd4nesmm3ton16-fuufagn-e.jpeg"><br><br>  En ese momento, el control de salud de la tienda se realiz贸 inicialmente por el estado de la tarea, finalmente a trav茅s de la conexi贸n al escritorio del cajero y el an谩lisis visual de la pantalla del cajero. <br><br>  Para 2014, la intensidad laboral de la actualizaci贸n para 1 persona por noche fue de 150 tiendas. <br><br><h3>  Primer avance </h3><br>  Tal situaci贸n con la velocidad y el costo de la actualizaci贸n no podr铆a satisfacernos ni a nosotros ni a la empresa.  El 谩rea de trabajo m谩s importante fue el proceso de mejora y automatizaci贸n del proceso para garantizar una "entrega" r谩pida y de alta calidad de los cambios a las tiendas con el fin de ayudar a las empresas a resolver las tareas de manera efectiva. <br><br>  Como el c贸digo GK no pertenec铆a a X5, no pod铆amos hacer las mejoras de Storemanager por nuestra cuenta, cambiar el proceso o corregir errores.  Por lo tanto, junto con los contratistas, comenzamos a trabajar en el desarrollo desde cero de una herramienta alternativa tecnol贸gica, que llamamos "Booster". <br><br>  Abordamos exhaustivamente el an谩lisis del proceso de actualizaci贸n, lo miramos desde todos los lados.  Y obtuvieron una comprensi贸n del proceso, que se convirti贸 en la base de todos los cambios futuros.  El 茅xito de la implementaci贸n de los cambios depende de qu茅 tan r谩pido entreguemos las distribuciones de la nueva versi贸n a las tiendas, c贸mo los preparemos para la actualizaci贸n, c贸mo se organizar谩 el proceso de instalaci贸n y c贸mo se realizar谩 la verificaci贸n de rendimiento posterior. <br><br>  "Booster" tiene una lista 煤nica de todas las tiendas en el tablero, verificaciones previas y estados para cada etapa, y la primera verificaci贸n autom谩tica primitiva despu茅s de la actualizaci贸n. <br><br><img src="https://habrastorage.org/webt/an/lp/ve/anlpvezxubaxpa0eif_er0izpii.jpeg"><br><br>  La implementaci贸n del proyecto "Booster" permiti贸 reducir los costos laborales en 6 veces y actualizar aproximadamente 1000 tiendas por noche con la ayuda de un empleado (para fines de 2016).  En ese momento fue un avance sin precedentes. <br><br><h3>  Desarrollo exitoso </h3><br>  La siguiente etapa fue consolidar y desarrollar nuestro 茅xito.  Lanzamos un conjunto de mejoras llamado "Booster2". <br><br>  La plataforma se movi贸 a un nuevo hardware, la interfaz de usuario se redise帽贸 por completo, nos deshicimos del frenado.  Introdujo nuevos controles y estados para cada etapa. <br><br><img src="https://habrastorage.org/webt/le/ya/we/leyawey9njbhy9dapfs_t9dfnh0.jpeg"><br><br>  Hemos proporcionado al empleado que realiza las actualizaciones todas las noches con toda la informaci贸n para identificar problemas y solucionarlos r谩pidamente.  El efecto m谩ximo para la prevenci贸n de accidentes nos lo proporcion贸 una verificaci贸n autom谩tica de la operatividad de la taquilla basada en capturas de pantalla.  El sistema determin贸 d贸nde la condici贸n de la pantalla difiere del est谩ndar, y fueron estas tiendas las que los empleados vieron primero. <br><br>  El "Booster" actualizado permiti贸 actualizar 1,500 tiendas por empleado por noche a fines de 2017 y principios de 2018. <br><br><h3>  Reenviar a nuevas alturas </h3><br>  1,500 tiendas por noche son buenas, podemos administrar f谩cilmente el calendario de lanzamiento, realizar sprints adicionales para la instalaci贸n, estamos listos para proporcionar correcci贸n de errores e instalar hasta 6 ensamblajes en la caja y la oficina administrativa, pero la tarea de nuestra empresa es construir la pr贸xima generaci贸n de ventas minoristas hoy. .  El proceso, la base t茅cnica y tecnol贸gica de la digitalizaci贸n de nuestro negocio es, entre otras cosas, la velocidad de desarrollo y distribuci贸n de nuevas versiones de software.  Y en marzo de 2019, se estableci贸 una tarea ambiciosa: para el oto帽o, alcanzar la actualizaci贸n de 3000 servidores y 12000 cajas en una noche.  Nos abstraemos de nuestras realidades actuales, una vez m谩s realizamos un gran trabajo anal铆tico para identificar cuellos de botella en el proceso.  Se identificaron tareas que requieren automatizaci贸n, mejoras t茅cnicas, el desarrollo de un nuevo software especializado, as铆 como un replanteamiento general.  Adem谩s, hemos formado un grupo de tareas organizativas. <br><br>  Como resultado, naci贸 un proyecto interno de TI, se elabor贸 una hoja de ruta, se calcul贸 un presupuesto, se determinaron los hitos y se defini贸 claramente el c铆rculo de divisiones y contratistas para la interacci贸n interna y externa. <br><br>  <b>Hoja de ruta</b> <br><br>  Deteng谩monos en las tareas formadas con m谩s detalle.  Hemos identificado 3 谩reas: <br><br><ul><li>  objetivos de reducci贸n de riesgos; </li><li>  tareas administrativas y organizacionales; </li><li>  tareas para aumentar las tiendas actualizadas por d铆a. </li></ul><br>  <b>Reducci贸n de riesgos.</b>  Nuestra tarea, independientemente del 茅xito o el fracaso de la actualizaci贸n, para garantizar el funcionamiento del nodo de efectivo y la capacidad de servir a los clientes, es decir  abrir una tienda en la ma帽ana  Con el aumento en el n煤mero de puntos de venta, los riesgos aumentan muchas veces de que algo salga mal. <br><br>  Un empleado en el grupo de distribuci贸n de liberaci贸n es como un piloto de avi贸n o controlador de tr谩nsito a茅reo que tiene mucha responsabilidad.  En tales condiciones, es necesario desarrollar herramientas simples y automatizadas que minimicen el factor de error humano. <br>  Dentro de esta 谩rea, se formularon tareas para desarrollar un nuevo sistema de inspecciones de tiendas, automatizar la preparaci贸n de instalaciones para la actualizaci贸n, crear mecanismos para registrar el trabajo en la infraestructura de red y la recuperaci贸n autom谩tica. <br><br>  La nueva herramienta de verificaci贸n le permite determinar r谩pidamente el estado de la tienda en su conjunto, generar un informe sobre una mayor cantidad de par谩metros e inmediatamente mostrar al empleado de soporte aquellos objetos que no pueden abrirse en la ma帽ana despu茅s de la actualizaci贸n.  Analizamos tanto el lanzamiento del software como los pasos para descargarlo.  Verificamos la formaci贸n de la base para el cajero en el lado de la oficina administrativa, la inicializaci贸n del equipo, la salida del software de la caja registradora al modo de registro del cajero, etc.  El proceso se basa en lo 煤ltimo en el sistema de nuestra empresa: "Monitoreo de negocios" utilizando una pila de tecnolog铆a moderna (Filebeat, Kafka, ClickHouse, Grafana). <br><br>  <u>En la herramienta (sistema) para la preparaci贸n integral de las tiendas para la actualizaci贸n,</u> combinamos todos los scripts de verificaci贸n dispersos que incluso podr铆an estar en diferentes servidores.  Conectamos scripts autom谩ticos para corregir errores t铆picos (poco espacio, sin derechos necesarios, etc.) y enviarlos por correo a empleados responsables en diferentes direcciones, si el problema no se soluciona autom谩ticamente.  Agregamos un robot que solicita solicitudes "incansablemente" en MFSM y excluye a las cajas registradoras de las tiendas de conveniencia de actualizar la caja.  Tal robot todos los d铆as ahorra m谩s de tres horas de tiempo de los empleados. <br><br>  <u>Herramienta rob贸tica para el trabajo de contabilidad en la infraestructura de red</u> : proporciona el an谩lisis de cartas de proveedores completamente dispersas, identificando c贸digos de tienda en las direcciones SAP indicadas y cargando datos en la fecha y hora del trabajo en la base de datos.  Adem谩s, seg煤n esta informaci贸n, se actualiza el calendario de circulaci贸n.  Esto elimina gradualmente los momentos en que quedan 300 tiendas sin comunicaci贸n, y no podemos obtener el estado de las actualizaciones o comprobaciones. <br><br>  <u>Mecanismo de recuperaci贸n autom谩tica</u> : en el lado de la tienda, permitir谩 el autodiagn贸stico del nodo de efectivo, determinar谩 la imposibilidad de iniciar el pago y restablecer谩 el sistema desde la copia de seguridad, permitiendo as铆 que la tienda abra en la ma帽ana en la mayor铆a de los casos, incluso si el personal de soporte no puede conectarse remotamente a la soluci贸n del problema. <br><br>  <b>Tareas administrativas y organizativas.</b>  El trabajo efectivo del sistema es la mitad de la batalla; para el 茅xito es necesario asegurar el trabajo efectivo del equipo. <br><br>  <b>La soluci贸n es capacitaci贸n adicional, fines de semana agregados al horario de trabajo, configuraci贸n de interacci贸n con todas las l铆neas.</b>  <b>Implementar el fin de semana.</b> <br><br>  Llevamos a cabo una capacitaci贸n interna para los empleados, asegurando la intercambiabilidad y la posibilidad de redistribuir cualquier tarea.  El horario de trabajo del equipo tambi茅n fue revisado: todos los empleados fueron transferidos al trabajo por turnos por la noche, lo que cre贸 la oportunidad de garantizar actualizaciones continuas.  Esta opci贸n la hemos implementado este a帽o.  Ahora las actualizaciones de GK tienen lugar los 7 d铆as de la semana sin la participaci贸n de personal adicional. <br><br>  <b>Tareas para aumentar el n煤mero de tiendas por noche.</b>  Aqu铆 resolvemos el problema de la entrega r谩pida y garantizada de distribuciones para garantizar la actualizaci贸n de cualquier n煤mero de tiendas, sin importar cu谩n r谩pido se produzcan los cambios.  Esto tambi茅n incluye, de hecho, mejoras en el sistema mismo. <br><br>  En primer lugar, comenzamos a usar la herramienta de actualizaci贸n actual "Booster" de la manera m谩s eficiente posible.  Las pruebas de carga revelaron las operaciones m谩s dif铆ciles, determinamos el l铆mite de posibilidades, encontramos opciones para el escalado horizontal de instancias de actualizaci贸n. <br><br>  Adem谩s, en el marco del proyecto, decidimos qu茅 herramienta deber铆a ser destinada para la actualizaci贸n y cu谩l deber铆a desarrollarse m谩s.  Se eligi贸 Storemanager como la herramienta de destino, ya que con la adquisici贸n del c贸digo fuente de GK, pudimos desarrollar y mejorar de manera independiente las herramientas est谩ndar. <br><br>  Desde el lanzamiento del proyecto, hemos identificado pasos para implementar toda la funcionalidad "Booster" en Storemanager y este a帽o formamos requisitos adicionales para mejoras para garantizar la actualizaci贸n del n煤mero requerido de tiendas. <br><br>  Tambi茅n elaboramos opciones para usar las herramientas actuales, las mejoramos, portamos la infraestructura de destino a Linux exclusivamente para el servidor de descarga.  Y junto con sus colegas, presentaron una nueva herramienta adicional que expandi贸 significativamente nuestras capacidades. <br><br><h3>  Lo que ya ha pasado </h3><br>  Por el momento, la mayor铆a de las tareas de nuestro plan ya se han implementado: <br><br><ul><li>  Actualizaci贸n y mejora del sistema de bombeo. </li><li>  Reducci贸n del tama帽o de las distribuciones GK. </li><li>  Tareas administrativas y organizativas en equipo. </li><li>  Automatizaci贸n de preparaci贸n de tiendas para actualizaci贸n. </li><li>  Contabilidad para el trabajo en red. </li></ul><br>  La tarea sigue siendo introducir una nueva verificaci贸n de tiendas y refinar la herramienta de actualizaci贸n de destino. <br><br><img src="https://habrastorage.org/webt/ef/xr/oa/efxroa1tpnmsyc6jwoobgehdf6e.jpeg"><br><br><h3>  Que sigue </h3><br>  M谩s m谩s.  Ahora nuestros esfuerzos apuntan a actualizar 20,000 (+) tiendas por noche, pero ya estar谩 en una nueva plataforma diferente, con nuevas herramientas y m茅todos.  Definitivamente hablaremos de esto en el futuro. <br><br>  <b>Los autores</b> <br><br>  Vasily Golubev, Jefe del Grupo de Distribuci贸n de Lanzamiento de Software # ITX5 <br>  Evgeny Lapshin, Jefe del Departamento de Soporte para Soluciones de Tienda # ITX5 </div></div><p>Source: <a href="https://habr.com/ru/post/483800/">https://habr.com/ru/post/483800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483788/index.html">La peque帽a naci贸n isle帽a gana gracias a Twitch</a></li>
<li><a href="../483790/index.html">Notas del proveedor de IoT. Tecnolog铆a y econom铆a LoRaWAN en alumbrado urbano</a></li>
<li><a href="../483794/index.html">Dejando ir: por qu茅 no deber铆as tomar kontroffer</a></li>
<li><a href="../483796/index.html">Par谩metros opcionales en repositorios de datos de Spring</a></li>
<li><a href="../483798/index.html">C贸mo automatizar la redacci贸n de anuncios en Google Ads</a></li>
<li><a href="../483802/index.html">C贸mo lanzar un producto solo si es desarrollador: Consejos del creador de Laravel, Taylor Otvel. Parte 1: audiencia</a></li>
<li><a href="../483804/index.html">Richard Hamming "Cap铆tulo inexistente": como sabemos lo que sabemos (11-20 minutos de 40)</a></li>
<li><a href="../483818/index.html">Motor, lenguaje de script y novela visual: en 45 horas</a></li>
<li><a href="../483820/index.html">Lo que afecta la emisi贸n de cr茅dito. Descripci贸n general de la competencia de riesgo de incumplimiento de cr茅dito de vivienda</a></li>
<li><a href="../483822/index.html">5 caracter铆sticas de JavaScript sin las cuales no podr铆a escribir c贸digo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>