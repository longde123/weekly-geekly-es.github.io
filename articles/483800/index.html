<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙅🏿 ⛴️ 💌 ¡No duermas! Cómo aprendimos a lanzar 12,000 ofertas de boletos por noche 🤱🏻 🏮 🏡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La operación ininterrumpida de miles de tiendas Pyaterochka depende en gran medida de un software confiable y personalizado. Ahora la red usa el produ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¡No duermas! Cómo aprendimos a lanzar 12,000 ofertas de boletos por noche</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/483800/">  La operación ininterrumpida de miles de tiendas Pyaterochka depende en gran medida de un software confiable y personalizado.  Ahora la red usa el producto de GK SOFTWARE, que ha mejorado desde la versión en caja hasta el desarrollo de código dentro de X5.  En nuestro artículo, le diremos qué camino hemos tomado en la instalación de lanzamientos, asegurando el crecimiento comercial de la compañía desde tiendas individuales en software nuevo hasta los 15,000 actuales. <br><br><img src="https://habrastorage.org/webt/ps/qh/vf/psqhvf_lkkljsaixaki1r0svy2w.jpeg"><br><a name="habracut"></a><br><h3>  Casos de tiempos pasados, una profunda tradición </h3><br>  El período de diez años para TI en el mundo moderno es historia.  En 2009, las primeras cadenas de tiendas Pyaterochka se cambiaron a GK, aparecieron las primeras tareas de actualización de software.  El proceso se parecía a esto: trabajo completamente manual, análisis de los registros con los "ojos" en cada tienda, problemas constantes al iniciar el software: al finalizar la compra, el equipo deja de inicializarse, luego los servicios GK no se inician en el servidor. <br><br>  A medida que el sistema GK se estabilizó y se desarrollaron las herramientas de actualización, fuimos a implementar a través del componente central del sistema GK, Storemanager, en una cantidad de 100 a 200 tiendas por noche (por empleado).  Entonces se consideró un gran logro.  Para garantizar la velocidad de actualización en 1000 tiendas, ya se requería un personal externo; solo con un equipo de 6 personas por noche podríamos alcanzar el número requerido de puntos de venta.  Para crear una tarea de actualización, era necesario "hacer clic" en cada tienda con sus manos.  Cada trabajo contenía solo 50 objetos, ya que había una posibilidad debido a un error interno de perder todos los estados después de la actualización, y luego se necesitaría una verificación manual completa. <br><br><img src="https://habrastorage.org/webt/bw/dj/d4/bwdjd4nesmm3ton16-fuufagn-e.jpeg"><br><br>  En ese momento, el control de salud de la tienda se realizó inicialmente por el estado de la tarea, finalmente a través de la conexión al escritorio del cajero y el análisis visual de la pantalla del cajero. <br><br>  Para 2014, la intensidad laboral de la actualización para 1 persona por noche fue de 150 tiendas. <br><br><h3>  Primer avance </h3><br>  Tal situación con la velocidad y el costo de la actualización no podría satisfacernos ni a nosotros ni a la empresa.  El área de trabajo más importante fue el proceso de mejora y automatización del proceso para garantizar una "entrega" rápida y de alta calidad de los cambios a las tiendas con el fin de ayudar a las empresas a resolver las tareas de manera efectiva. <br><br>  Como el código GK no pertenecía a X5, no podíamos hacer las mejoras de Storemanager por nuestra cuenta, cambiar el proceso o corregir errores.  Por lo tanto, junto con los contratistas, comenzamos a trabajar en el desarrollo desde cero de una herramienta alternativa tecnológica, que llamamos "Booster". <br><br>  Abordamos exhaustivamente el análisis del proceso de actualización, lo miramos desde todos los lados.  Y obtuvieron una comprensión del proceso, que se convirtió en la base de todos los cambios futuros.  El éxito de la implementación de los cambios depende de qué tan rápido entreguemos las distribuciones de la nueva versión a las tiendas, cómo los preparemos para la actualización, cómo se organizará el proceso de instalación y cómo se realizará la verificación de rendimiento posterior. <br><br>  "Booster" tiene una lista única de todas las tiendas en el tablero, verificaciones previas y estados para cada etapa, y la primera verificación automática primitiva después de la actualización. <br><br><img src="https://habrastorage.org/webt/an/lp/ve/anlpvezxubaxpa0eif_er0izpii.jpeg"><br><br>  La implementación del proyecto "Booster" permitió reducir los costos laborales en 6 veces y actualizar aproximadamente 1000 tiendas por noche con la ayuda de un empleado (para fines de 2016).  En ese momento fue un avance sin precedentes. <br><br><h3>  Desarrollo exitoso </h3><br>  La siguiente etapa fue consolidar y desarrollar nuestro éxito.  Lanzamos un conjunto de mejoras llamado "Booster2". <br><br>  La plataforma se movió a un nuevo hardware, la interfaz de usuario se rediseñó por completo, nos deshicimos del frenado.  Introdujo nuevos controles y estados para cada etapa. <br><br><img src="https://habrastorage.org/webt/le/ya/we/leyawey9njbhy9dapfs_t9dfnh0.jpeg"><br><br>  Hemos proporcionado al empleado que realiza las actualizaciones todas las noches con toda la información para identificar problemas y solucionarlos rápidamente.  El efecto máximo para la prevención de accidentes nos lo proporcionó una verificación automática de la operatividad de la taquilla basada en capturas de pantalla.  El sistema determinó dónde la condición de la pantalla difiere del estándar, y fueron estas tiendas las que los empleados vieron primero. <br><br>  El "Booster" actualizado permitió actualizar 1,500 tiendas por empleado por noche a fines de 2017 y principios de 2018. <br><br><h3>  Reenviar a nuevas alturas </h3><br>  1,500 tiendas por noche son buenas, podemos administrar fácilmente el calendario de lanzamiento, realizar sprints adicionales para la instalación, estamos listos para proporcionar corrección de errores e instalar hasta 6 ensamblajes en la caja y la oficina administrativa, pero la tarea de nuestra empresa es construir la próxima generación de ventas minoristas hoy. .  El proceso, la base técnica y tecnológica de la digitalización de nuestro negocio es, entre otras cosas, la velocidad de desarrollo y distribución de nuevas versiones de software.  Y en marzo de 2019, se estableció una tarea ambiciosa: para el otoño, alcanzar la actualización de 3000 servidores y 12000 cajas en una noche.  Nos abstraemos de nuestras realidades actuales, una vez más realizamos un gran trabajo analítico para identificar cuellos de botella en el proceso.  Se identificaron tareas que requieren automatización, mejoras técnicas, el desarrollo de un nuevo software especializado, así como un replanteamiento general.  Además, hemos formado un grupo de tareas organizativas. <br><br>  Como resultado, nació un proyecto interno de TI, se elaboró ​​una hoja de ruta, se calculó un presupuesto, se determinaron los hitos y se definió claramente el círculo de divisiones y contratistas para la interacción interna y externa. <br><br>  <b>Hoja de ruta</b> <br><br>  Detengámonos en las tareas formadas con más detalle.  Hemos identificado 3 áreas: <br><br><ul><li>  objetivos de reducción de riesgos; </li><li>  tareas administrativas y organizacionales; </li><li>  tareas para aumentar las tiendas actualizadas por día. </li></ul><br>  <b>Reducción de riesgos.</b>  Nuestra tarea, independientemente del éxito o el fracaso de la actualización, para garantizar el funcionamiento del nodo de efectivo y la capacidad de servir a los clientes, es decir  abrir una tienda en la mañana  Con el aumento en el número de puntos de venta, los riesgos aumentan muchas veces de que algo salga mal. <br><br>  Un empleado en el grupo de distribución de liberación es como un piloto de avión o controlador de tránsito aéreo que tiene mucha responsabilidad.  En tales condiciones, es necesario desarrollar herramientas simples y automatizadas que minimicen el factor de error humano. <br>  Dentro de esta área, se formularon tareas para desarrollar un nuevo sistema de inspecciones de tiendas, automatizar la preparación de instalaciones para la actualización, crear mecanismos para registrar el trabajo en la infraestructura de red y la recuperación automática. <br><br>  La nueva herramienta de verificación le permite determinar rápidamente el estado de la tienda en su conjunto, generar un informe sobre una mayor cantidad de parámetros e inmediatamente mostrar al empleado de soporte aquellos objetos que no pueden abrirse en la mañana después de la actualización.  Analizamos tanto el lanzamiento del software como los pasos para descargarlo.  Verificamos la formación de la base para el cajero en el lado de la oficina administrativa, la inicialización del equipo, la salida del software de la caja registradora al modo de registro del cajero, etc.  El proceso se basa en lo último en el sistema de nuestra empresa: "Monitoreo de negocios" utilizando una pila de tecnología moderna (Filebeat, Kafka, ClickHouse, Grafana). <br><br>  <u>En la herramienta (sistema) para la preparación integral de las tiendas para la actualización,</u> combinamos todos los scripts de verificación dispersos que incluso podrían estar en diferentes servidores.  Conectamos scripts automáticos para corregir errores típicos (poco espacio, sin derechos necesarios, etc.) y enviarlos por correo a empleados responsables en diferentes direcciones, si el problema no se soluciona automáticamente.  Agregamos un robot que solicita solicitudes "incansablemente" en MFSM y excluye a las cajas registradoras de las tiendas de conveniencia de actualizar la caja.  Tal robot todos los días ahorra más de tres horas de tiempo de los empleados. <br><br>  <u>Herramienta robótica para el trabajo de contabilidad en la infraestructura de red</u> : proporciona el análisis de cartas de proveedores completamente dispersas, identificando códigos de tienda en las direcciones SAP indicadas y cargando datos en la fecha y hora del trabajo en la base de datos.  Además, según esta información, se actualiza el calendario de circulación.  Esto elimina gradualmente los momentos en que quedan 300 tiendas sin comunicación, y no podemos obtener el estado de las actualizaciones o comprobaciones. <br><br>  <u>Mecanismo de recuperación automática</u> : en el lado de la tienda, permitirá el autodiagnóstico del nodo de efectivo, determinará la imposibilidad de iniciar el pago y restablecerá el sistema desde la copia de seguridad, permitiendo así que la tienda abra en la mañana en la mayoría de los casos, incluso si el personal de soporte no puede conectarse remotamente a la solución del problema. <br><br>  <b>Tareas administrativas y organizativas.</b>  El trabajo efectivo del sistema es la mitad de la batalla; para el éxito es necesario asegurar el trabajo efectivo del equipo. <br><br>  <b>La solución es capacitación adicional, fines de semana agregados al horario de trabajo, configuración de interacción con todas las líneas.</b>  <b>Implementar el fin de semana.</b> <br><br>  Llevamos a cabo una capacitación interna para los empleados, asegurando la intercambiabilidad y la posibilidad de redistribuir cualquier tarea.  El horario de trabajo del equipo también fue revisado: todos los empleados fueron transferidos al trabajo por turnos por la noche, lo que creó la oportunidad de garantizar actualizaciones continuas.  Esta opción la hemos implementado este año.  Ahora las actualizaciones de GK tienen lugar los 7 días de la semana sin la participación de personal adicional. <br><br>  <b>Tareas para aumentar el número de tiendas por noche.</b>  Aquí resolvemos el problema de la entrega rápida y garantizada de distribuciones para garantizar la actualización de cualquier número de tiendas, sin importar cuán rápido se produzcan los cambios.  Esto también incluye, de hecho, mejoras en el sistema mismo. <br><br>  En primer lugar, comenzamos a usar la herramienta de actualización actual "Booster" de la manera más eficiente posible.  Las pruebas de carga revelaron las operaciones más difíciles, determinamos el límite de posibilidades, encontramos opciones para el escalado horizontal de instancias de actualización. <br><br>  Además, en el marco del proyecto, decidimos qué herramienta debería ser destinada para la actualización y cuál debería desarrollarse más.  Se eligió Storemanager como la herramienta de destino, ya que con la adquisición del código fuente de GK, pudimos desarrollar y mejorar de manera independiente las herramientas estándar. <br><br>  Desde el lanzamiento del proyecto, hemos identificado pasos para implementar toda la funcionalidad "Booster" en Storemanager y este año formamos requisitos adicionales para mejoras para garantizar la actualización del número requerido de tiendas. <br><br>  También elaboramos opciones para usar las herramientas actuales, las mejoramos, portamos la infraestructura de destino a Linux exclusivamente para el servidor de descarga.  Y junto con sus colegas, presentaron una nueva herramienta adicional que expandió significativamente nuestras capacidades. <br><br><h3>  Lo que ya ha pasado </h3><br>  Por el momento, la mayoría de las tareas de nuestro plan ya se han implementado: <br><br><ul><li>  Actualización y mejora del sistema de bombeo. </li><li>  Reducción del tamaño de las distribuciones GK. </li><li>  Tareas administrativas y organizativas en equipo. </li><li>  Automatización de preparación de tiendas para actualización. </li><li>  Contabilidad para el trabajo en red. </li></ul><br>  La tarea sigue siendo introducir una nueva verificación de tiendas y refinar la herramienta de actualización de destino. <br><br><img src="https://habrastorage.org/webt/ef/xr/oa/efxroa1tpnmsyc6jwoobgehdf6e.jpeg"><br><br><h3>  Que sigue </h3><br>  Más más.  Ahora nuestros esfuerzos apuntan a actualizar 20,000 (+) tiendas por noche, pero ya estará en una nueva plataforma diferente, con nuevas herramientas y métodos.  Definitivamente hablaremos de esto en el futuro. <br><br>  <b>Los autores</b> <br><br>  Vasily Golubev, Jefe del Grupo de Distribución de Lanzamiento de Software # ITX5 <br>  Evgeny Lapshin, Jefe del Departamento de Soporte para Soluciones de Tienda # ITX5 </div></div><p>Source: <a href="https://habr.com/ru/post/483800/">https://habr.com/ru/post/483800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483788/index.html">La pequeña nación isleña gana gracias a Twitch</a></li>
<li><a href="../483790/index.html">Notas del proveedor de IoT. Tecnología y economía LoRaWAN en alumbrado urbano</a></li>
<li><a href="../483794/index.html">Dejando ir: por qué no deberías tomar kontroffer</a></li>
<li><a href="../483796/index.html">Parámetros opcionales en repositorios de datos de Spring</a></li>
<li><a href="../483798/index.html">Cómo automatizar la redacción de anuncios en Google Ads</a></li>
<li><a href="../483802/index.html">Cómo lanzar un producto solo si es desarrollador: Consejos del creador de Laravel, Taylor Otvel. Parte 1: audiencia</a></li>
<li><a href="../483804/index.html">Richard Hamming "Capítulo inexistente": como sabemos lo que sabemos (11-20 minutos de 40)</a></li>
<li><a href="../483818/index.html">Motor, lenguaje de script y novela visual: en 45 horas</a></li>
<li><a href="../483820/index.html">Lo que afecta la emisión de crédito. Descripción general de la competencia de riesgo de incumplimiento de crédito de vivienda</a></li>
<li><a href="../483822/index.html">5 características de JavaScript sin las cuales no podría escribir código</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>