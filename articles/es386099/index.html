<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåî ü§ûüèΩ üêê Desarrollo de un banco de energ√≠a para una computadora port√°til. Desde el dise√±o hasta el producto terminado. Parte uno üë∞üèª üëåüèª ‚è∏Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quer√≠a hacerme una bater√≠a de computadora port√°til externa por mucho tiempo, hace 3-4 a√±os, para trabajar en el parque. Aunque no cumpl√≠ el sue√±o de d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de un banco de energ√≠a para una computadora port√°til. Desde el dise√±o hasta el producto terminado. Parte uno</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386099/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quer√≠a hacerme una bater√≠a de computadora port√°til externa por mucho tiempo, hace 3-4 a√±os, para trabajar en el parque. </font><font style="vertical-align: inherit;">Aunque no cumpl√≠ el sue√±o de dibujar diagramas y trazar tablas en Gorky Park o el Bosque de Bitsevsky (por ahora), hice una bater√≠a externa (llam√©mosla moderna - PowerBank). </font><font style="vertical-align: inherit;">Acerca de c√≥mo este dispositivo pas√≥ de un modelo de placa de pruebas a un producto final y por qu√© hice lo que ya est√° en el mercado con un gato.</font></font><br>
<br>
<img src="https://habrastorage.org/files/420/e68/56d/420e6856df5a40de8a10c07a32d91245.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, quer√≠a escribir un breve art√≠culo sobre el desarrollo de PowerBank, pero cuando comenc√©, me di cuenta de que una parte era indispensable. </font><font style="vertical-align: inherit;">Por lo tanto, lo divid√≠ en 4 partes y ahora les traigo a la atenci√≥n la primera de ellas: dise√±o (circuitos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, el desarrollo de cualquier dispositivo electr√≥nico comienza con una especificaci√≥n t√©cnica (TOR), por lo que describ√≠ una serie de par√°metros que mi PowerBank deber√≠a proporcionar:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltaje de entrada de 19 V (para la posibilidad de cargar desde una memoria port√°til est√°ndar)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltaje de salida de 19 V (como con una memoria est√°ndar)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corriente de salida m√°xima 3.5A (como con una memoria est√°ndar)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacidad de la celda al menos 60 W * h (+1 bater√≠a interna)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de los requisitos b√°sicos, agregu√© algunos m√°s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La eficiencia del convertidor y la memoria no es inferior al 94%, sin radiadores.</font></font></li>
<li>    300 ‚Äî     .</li>
<li>USB       PowerBank    , ,   , ,       ..</li>
<li>  (Windows)      PowerBank.</li>
<li>   ,     5   USB .</li>
<li>      PowerBank.</li>
<li>()   PowerBank    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar el desarrollo, hice un diagrama de bloques del dispositivo futuro: </font></font><br>
<br>
<img src="https://habrastorage.org/files/252/309/39a/25230939af09479795e5d74a3f2fbf7e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al comentar sobre el esquema, puedo decir que podr√≠a tomar el director gerente de USB, pero ten√≠a miedo de las dificultades de desarrollar software USB (m√°s tarde me di cuenta de que era en vano), as√≠ que instal√© el convertidor USART - USB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el dispositivo se desarroll√≥ originalmente para s√≠ mismo, se decidi√≥ hacer el dise√±o principalmente de las partes que ten√≠a en mi poder y con las que ya hab√≠a trabajado (para evitar dificultades). </font><font style="vertical-align: inherit;">Sin embargo, la optimizaci√≥n de precios en esta etapa no se llev√≥ a cabo. </font><font style="vertical-align: inherit;">Por lo tanto, eleg√≠ los siguientes componentes para PowerBank:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK - STM32F051K4U6 con una mira reemplazada por STM32F042K4U6.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convertidor USART &lt;-&gt; USB a CP2102. </font><font style="vertical-align: inherit;">No es costoso, funciona bien, ocupa poco espacio, una soluci√≥n de ejecuci√≥n.</font></font></li>
<li>   ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LTC3780IG</a>.    / ,  -,  400,   ,  .     LM5175  TI     .</li>
<li>  ‚Äî LP2951ACD-3.3.    ,   .     120     MCP1703T-3302E/CB      5.</li>
<li>     0805. </li>
<li>   SMD.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por separado, tocamos la elecci√≥n de un cargador (cargador) y un sistema de control y gesti√≥n para bater√≠as de iones de litio (Sistema de gesti√≥n de bater√≠as de iones de litio o BMS). Hace unos a√±os, estaba reparando computadoras port√°tiles y a menudo ve√≠a BMS de Texas Instruments en bater√≠as. Por lo tanto, en primer lugar, comenc√© a buscar una soluci√≥n para mi dispositivo de este fabricante. Vale la pena se√±alar que, en general, no hay alternativa, ya que solo unas pocas oficinas producen tales microcircuitos (TI, Maxim, algunos LT, ST abandonados, Intersil es ex√≥tico para nosotros, tal vez haya m√°s, pero no lo s√©). As√≠ que deambulando por las extensiones de ti.com me encontr√© con un chip muy interesante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60RHBR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estos son memoria y BMS en un chip. </font><font style="vertical-align: inherit;">Realmente me gust√≥ porque reemplaz√≥ 2 microcircuitos. </font><font style="vertical-align: inherit;">Esta soluci√≥n es claramente m√°s barata que si hace la memoria y el BMS por separado y ocupa menos espacio. </font><font style="vertical-align: inherit;">Principales caracter√≠sticas de rendimiento del chip BQ40Z60:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corriente de carga: hasta 4A</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de celdas: hasta 4x</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frecuencia de conversi√≥n: 1 MHz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltaje de entrada: hasta 25 V</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacidad de la celda: hasta 65 A * h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funci√≥n de equilibrio</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED configurables para indicaci√≥n (carga, capacidad)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El chip es bastante nuevo (lanzamiento a fines de 2014), por lo que hay poca informaci√≥n y estaba un poco preocupado por esto, sabiendo que BI de TI es bastante dif√≠cil de programar, y esto tambi√©n es un combo (memoria + BMS). Tambi√©n me preocup√© un poco por las posibles jambas en el cristal, pero sabiendo que usar√≠a solo la funcionalidad b√°sica, esperaba que no hubiera problemas. Sin embargo, mirando hacia el futuro, dir√© que sucedi√≥. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, no fue en vano que no dije pr√°cticamente nada sobre las celdas y la configuraci√≥n de la bater√≠a, solo que ahora ha llegado el momento de pasar a la elecci√≥n. Existen varios criterios para la selecci√≥n √≥ptima de la configuraci√≥n de la bater√≠a:</font></font><br>
<br>
<ol>
<li>          .      4    (  4s1p  4-serial 1-parallel) ,  4   (1s4p) . .<br>
<br>
<img src="https://habrastorage.org/files/557/071/877/557071877b66477184a284235e89034e.png"><br>
<br>
</li>
<li>   ,   ,    ( )      .      4s1p.</li>
<li>          .       MP2307DN.<br>
<br>
<img src="https://habrastorage.org/files/32c/de4/fd7/32cde4fd79374c4eb930e56e24b98b1a.png"></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el voltaje de salida del dispositivo de 19V, nuevamente, la configuraci√≥n 4s1p es m√°s ventajosa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora calcularemos algunos par√°metros de la bater√≠a bajo la condici√≥n de 60W * h de capacidad, configuraci√≥n 4s1p (voltaje 14.8V): </font></font><br>
<br>
<img src="https://habrastorage.org/files/188/9aa/6ee/1889aa6ee65f4ecd91016d25ce126159.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la cifra que encontr√© era demasiado peque√±a (bueno, o el apetito vino con una comida) y decid√≠ cambiar a la configuraci√≥n 4s2p en las celdas LP 5558115 3500mAh, que estaban en stock Total que tenemos: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Capacidad de la bater√≠a: 7A * h (103W * h) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voltaje: 14.8V </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este resultado me vino bastante bien: eran m√°s de dos bater√≠as internas de mi computadora port√°til (ASUS S451L, 46W * h). El desarrollo del dise√±o comenz√≥ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la etapa de dise√±o, quer√≠a establecer algunas caracter√≠sticas adicionales:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conectado los LED BQ40Z60. </font><font style="vertical-align: inherit;">Tienen una indicaci√≥n funcional del nivel de carga con umbrales ajustables, as√≠ como del proceso de carga.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se agreg√≥ la capacidad de ajustar la frecuencia / modo de operaci√≥n (corrientes discontinuas o inextricables) del convertidor (usando un filtro PWM MK + RC).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibuj√© el circuito de enlace BQ40Z60 de la placa de depuraci√≥n BQ40Z60EVM-578, el enlace LTC3780IG de su documentaci√≥n, hice el resto yo mismo. </font><font style="vertical-align: inherit;">El resultado es el siguiente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esquema</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El esquema se divide en 3 bloques:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidad de convertidor de voltaje</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidad de almacenamiento + BMS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidad de control MK</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comentarios sobre el esquema: la unidad de conversi√≥n y el cargador + BMS se realizan de acuerdo con los esquemas de la documentaci√≥n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la unidad de control se realiz√≥ para implementar un modo de suspensi√≥n para el consumo m√≠nimo de corriente en modo apagado. Mirando hacia el futuro, dir√© que en un par de momentos lo hice, pero con la ayuda de un cuchillo y un soldador pude hacer que el dise√±o funcionara como deber√≠a. El tablero resultante se muestra a continuaci√≥n: El </font></font><br>
<br>
<img src="https://habrastorage.org/files/9b5/082/691/9b5082691a0b4f1d82fbfd9c4925c2bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tablero contiene 4 capas de 18 Œºm, el espesor total de 1 mm, ordenado en seeedstudio.com.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora es el momento de tocar el indicador principal de la calidad del hierro: esta es la eficiencia de todo el sistema en su conjunto. M√°s precisamente, tenemos 2 eficiencia: al cargar la bater√≠a y al descargar. Estrictamente hablando, la eficiencia de la carga debe optimizarse solo para reducir el calentamiento del dispositivo (suponiendo que tengamos mucha energ√≠a para la carga), mientras que la p√©rdida de eficiencia durante la descarga en realidad reduce la capacidad real del PowerBank. Hagamos una lista de los elementos que afectan directamente la eficiencia durante la carga: </font></font><br>
<br>
<img src="https://habrastorage.org/files/eb5/be0/cf4/eb5be0cf43cd481a914999684e06cd5c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET: un transistor que evita la aparici√≥n de voltaje en el conector de alimentaci√≥n externo al usar PowerBank de la bater√≠a. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighSideFET: el transistor superior del convertidor reductor del cargador. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowSideFET: transistor inferior del convertidor de memoria. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor: el acelerador del convertidor de memoria. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - resistencia del sensor de corriente de memoria.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET - transistor de carga de bater√≠a. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSGFET - descarga la bater√≠a del transistor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS es una resistencia de sensor de corriente de bater√≠a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los transistores ACFET, CHGFET y DSGFET durante la operaci√≥n solo tienen p√©rdidas est√°ticas ya que est√°n constantemente abiertos y son resistencias con una resistencia igual a la resistencia de canal abierto del transistor Rds_on, por lo que estos transistores deber√≠an tener el Rds_on m√°s bajo. Eleg√≠ las cajas de transistores pqfn3.3x3.3 como adecuadas en potencia y que tienen un tama√±o m√°s peque√±o en comparaci√≥n con mi pqfn5x6 favorito. Con la resistencia de canal m√°s peque√±a de las de f√°cil acceso fueron IRFHM830D (Rds_on = 5mOhm + diodo Schottky). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los transistores HighSideFET y LowSideFET funcionan en modo pulsado, su selecci√≥n es complicada y se considerar√° m√°s adelante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tratemos de estimar las p√©rdidas en el voltaje de entrada 19V, corriente de carga de la bater√≠a 4A, configuraci√≥n 4s1p: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS - la corriente a trav√©s de ella es igual a la corriente de carga, resistencia es 5mOhm, p√©rdidas: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c8c/b36/4c2/c8cb364c241647aa8b8e747fe265488c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - la corriente a trav√©s de ella es igual a la corriente de carga, resistencia 10mOhm, p√©rdidas: </font></font><br>
<br>
<img src="https://habrastorage.org/files/341/b1d/cf1/341b1dcf1f4149aeb20446bcfbe9d474.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET y DSGFET - corriente a trav√©s de de ellos es igual a la corriente de carga, resistencia de 5 mOhm, p√©rdidas totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/533/bc7/90f/533bc790f0934780a5d7ba2d1df02b71.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET: la corriente a trav√©s de ella es igual a la corriente de entrada (tome la corriente de entrada m√°xima posible 3.5A es el m√°ximo que puede proporcionar una memoria de computadora port√°til normal), resistencia de 5 mOhm, p√©rdidas: </font></font><br>
<br>
<img src="https://habrastorage.org/files/384/bc9/449/384bc944932f4e46aa631cb6db1f5ea6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aqu√≠ puede agregar p√©rdidas en la resistencia de los cables de la placa celular, y t </font><font style="vertical-align: inherit;">Tambi√©n pistas del tablero en s√≠. </font><font style="vertical-align: inherit;">Los calcul√© midiendo la ca√≠da de voltaje a una corriente en el circuito de la bater√≠a de 4A, fue de 36 mV, que corresponde a la potencia:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ba/ae1/023/2baae1023b854ac19c4a3eb4b897cb4a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor: las p√©rdidas en el acelerador se pueden dividir en 2 componentes:</font></font><br>
<br>
<ul>
<li>     (DCR ‚Äî dc winding resistance).    IHLP2525CZER2R2M01   DCR = 18,     4  :<br>
<br>
<img src="https://habrastorage.org/files/be2/820/516/be282051603b42c8b0c0f2272b740891.png"><br>
<br>
</li>
<li>          ,    Vishay     ,          20%,      .</li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las p√©rdidas totales de carga total en componentes est√°ticos son: </font></font><br>
<br>
<img src="https://habrastorage.org/files/2a2/602/245/2a2602245bac45a69f665dba1b35badf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener p√©rdidas de carga total, es necesario estimar las p√©rdidas en los transistores HighSideFET y LowSideFET. El ap√©ndice </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN-6005</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de fairchildsemi </font><font style="vertical-align: inherit;">me ayud√≥ con esto </font><font style="vertical-align: inherit;">. En resumen, en la pesta√±a ControllerDriver, agregue nuestro controlador a la base de datos e ingrese los par√°metros requeridos en la tabla: </font></font><br>
<br>
<img src="https://habrastorage.org/files/6fe/c39/ed7/6fec39ed7e97465094baf63964ced647.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomamos los datos de la documentaci√≥n para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Luego, complete la tabla con los par√°metros de los transistores HighSideFET y LowSideFET en la pesta√±a MOSFETDatabase:</font></font><br>
<br>
<img src="https://habrastorage.org/files/3cd/e7f/32e/3cde7f32ed8e49b6bbd0974d215dc922.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n tomamos datos de la documentaci√≥n para transistores. Experiment√© con muchos transistores (vistos desde la base) porque la frecuencia de conversi√≥n en 1 MHz es bastante alta. De todos los transistores que pude obtener r√°pidamente, el CSD17308 de TI result√≥ ser el mejor. Sin embargo, estos son solo los transistores recomendados de la ballena </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60EVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Los mejores c√°lculos fueron los transistores eGaN de EPC (Efficient Power Conversion), pero el precio de 500r, un mes de espera y un caso espec√≠fico jugaron en su contra. Un par de comentarios m√°s de la pesta√±a MOSFETDatabase: La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
columna derecha - Fig. Merit (Figura de m√©rito - Nivel de calidad) es el producto de Rds_on y la carga del obturador Qgsw. En general, cuanto m√°s bajo es el Fig. Merit, mejor es el transistor, pero debe comprender que este es un indicador bastante emp√≠rico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la pesta√±a EfficiencySummary, seleccione el controlador, los transistores utilizados y su n√∫mero, establezca los par√°metros de origen y haga clic en el bot√≥n Ejecutar. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4f5/03e/8cf/4f503e8cf0344b908a9764aa13d7c8af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para una corriente de carga de 4A y un voltaje de entrada de 19V, las p√©rdidas ser√°n de 1.17W. P√©rdidas totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/47b/799/26e/47b79926ef324c1ba614710ff41f49f5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
despu√©s de ensamblar el dise√±o, med√≠ el circuito de carga con los mismos par√°metros que en los c√°lculos estimados: la </font></font><br>
<br>
<img src="https://habrastorage.org/files/89e/245/9fb/89e2459fbd234dcd830dfd6f64488ed0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eficiencia del circuito es del 97.1%, mientras que la p√©rdida de potencia fue de 1.908W en el 2.07W calculado. Bueno, result√≥ muy cercano para estimar la p√©rdida. Un termograma de un dispositivo de trabajo se muestra en la figura.</font></font><br>
<br>
<img src="https://habrastorage.org/files/c99/15a/3b3/c9915a3b3b3940aea987f4f5d3a6248b.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temperatura ambiente 23 grados, tabla sin carcasa. 58 grados en el punto m√°s caliente (el sobrecalentamiento es 58-23 = 35 grados) con una l√°mina de 18 Œºm, este es un muy buen indicador. El acelerador al mismo tiempo se calent√≥ a 40, lo m√°s probable es que sea calentado por transistores. El controlador mismo se calent√≥ hasta 52 grados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora pasamos a estimar la eficiencia del sistema durante la descarga. Desde el principio evaluaremos las p√©rdidas en el convertidor mismo. Para hacer esto, compilamos una lista de elementos que afectan directamente la eficiencia: </font></font><br>
<br>
<img src="https://habrastorage.org/files/443/647/555/44364755599542c6bde459eeb3048433.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A es el transistor superior del brazo inferior del convertidor LTC3780. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B - brazo de bajada del transistor inferior. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C es el transistor inferior del hombro creciente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D es el transistor superior del hombro creciente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L - acelerador. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RS es la resistencia del sensor de corriente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y, por supuesto, el consumo del controlador LTC3780 en s√≠. No me detendr√© en el funcionamiento del microcircuito en detalle, solo puedo decir que en realidad representa un convertidor reductor de pie despu√©s de un convertidor elevador con un inductor com√∫n. Dependiendo de los voltajes de entrada y salida, una parte, la segunda, o ambas funcionan (con una igualdad aproximada de los voltajes de entrada y salida). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calcular la eficiencia del convertidor, utilizaremos los siguientes par√°metros:</font></font><br>
 <br>
<img src="https://habrastorage.org/files/997/573/2a6/9975732a646145419d17e7b7cc104c80.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acordemos que una computadora port√°til siempre consume al m√°ximo. En realidad, esto est√° cerca de la verdad, porque al conectar una fuente externa, adem√°s de energ√≠a, tambi√©n consume energ√≠a para cargar la bater√≠a interna y, en general, si hay energ√≠a externa, no rechaza el consumo. Los voltajes corresponden al voltaje nominal de las celdas - 3.7V y bajo - 3.3V. Es importante tener en cuenta que el convertidor en el dispositivo actual siempre funciona en modo de refuerzo (el voltaje de entrada nunca excede el voltaje de salida), pero esto no significa que los transistores A y B no cambien. Para cargar el condensador de arranque, apague brevemente el transistor A y encienda B (lo mismo suceder√° cuando opere en un modo inferior para los transistores C y D). Para LTC3780, esto sucede a una frecuencia de 40 kHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para estimar las p√©rdidas, utilizamos el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo xls para LTC3780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del paquete LTpowerCAD2. El principio de funcionamiento es similar al trabajo anterior con xls para el BQ40Z60. Ingresamos todos los valores del voltaje y la corriente de salida, el voltaje de entrada, la frecuencia de conversi√≥n deseada, los par√°metros de los transistores clave (decid√≠ usar CSD17308 como en la memoria). El inductor fue seleccionado IHLP5050EZER3R3M01 que tiene un DCR t√≠pico = 7.7mOhm. Para 3.5A, la inductancia es peque√±a, sucedi√≥ porque cuando compr√© componentes, contaba con una corriente de salida de 4.5A. Para la configuraci√≥n actual, el IHLP5050EZER4R7M01 con un DCR t√≠pico = 12.8mOhm ser√≠a una opci√≥n ideal. Sensor de corriente - resistencia del tama√±o 2512 con una resistencia de 5mOhm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de ingresar todos los datos en los campos Desglose de p√©rdida de potencia de MOSFET y Eficiencia estimada, habr√° gr√°ficos circulares de la distribuci√≥n de p√©rdida de componentes y la estimaci√≥n de eficiencia para el voltaje de entrada / salida especificado y la corriente de carga. </font></font><br>
<br>
<img src="https://habrastorage.org/files/92d/a9b/83a/92da9b83afb74badb50bb7bccb0c5d3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La estimaci√≥n de eficiencia es muy optimista: 98.79% a un voltaje de entrada de 14.8V y 98.51% a 13.2V (cifras que excluyen p√©rdidas en el n√∫cleo del inductor). Los principales elementos en los que se producen p√©rdidas son el inductor / sensor de corriente (23%), el transistor A (25%) y D (38% de las p√©rdidas totales). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de medir la eficiencia real. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c46/54c/cce/c4654ccce20b4c438e3f4a5a76484386.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La eficiencia medida es de 96.93% a un voltaje de entrada de 14.8V y 96.35% a 13.2V. Analicemos los datos obtenidos. Para hacer esto, traducimos el porcentaje de eficiencia en la p√©rdida de energ√≠a:</font></font><br>
<br>
<img src="https://habrastorage.org/files/874/10a/190/87410a19014047c9b39518c9cd32d78f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, la discrepancia es m√°s significativa en comparaci√≥n con la estimaci√≥n de p√©rdidas en el convertidor de memoria y asciende a 1,48 W. Pero si tenemos en cuenta las p√©rdidas en el n√∫cleo del inductor (que no se puede descuidar con una inductancia no seleccionada de manera √≥ptima), la imagen no ser√° tan deprimente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculemos la eficiencia promedio (a 13.2V) de PowerBank en la descarga. Consiste en la eficiencia del convertidor en s√≠, as√≠ como: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS: la corriente a trav√©s de √©l es igual a la corriente de entrada del convertidor, la resistencia es de 5 mOhm, las p√©rdidas: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c87/4a7/de6/c874a7de6a9c4122ad2d1b1205728e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET y DSGFET: la corriente a trav√©s de ellos es igual a la corriente de entrada del convertidor, la resistencia es de 5 mOhm, las p√©rdidas totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/44d/03f/42e/44d03f42ef754e1e8a22e6ba8d0695cf.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
luego la eficiencia del PowerBank durante la descarga: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c52/0d0/86c/c520d086ced0477c82879639830d5631.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
termograma El convertidor con un voltaje de entrada de 14,4 V y una corriente de salida de 3,5 A se muestra a continuaci√≥n:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e77/cfa/f9a/e77cfaf9a7ce45ae966e0c327896893f.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El transistor C result√≥ ser el punto m√°s caliente, pero su calentamiento (a una temperatura ambiente de 21 grados) fue de solo 41,1 grados despu√©s de 30 minutos de funcionamiento. Est√° claro que en el caso estos n√∫meros ser√°n m√°s altos, pero la reserva de sobrecalentamiento es enorme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y en conclusi√≥n de la primera parte del art√≠culo, me gustar√≠a decir que el trabajo fue muy grande, y en la segunda parte del art√≠culo analizaremos los rastrillos de hardware y software al comenzar el dise√±o, configurando el BQ40Z60 y el software para STM32F0. Espero que haya sido interesante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PD: El archivo con el borrador del tablero y el c√≥digo fuente se publicar√°n en las siguientes partes del art√≠culo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PPS not√≥ que olvid√≥ casi lo m√°s importante para esta parte del art√≠culo: una foto del dise√±o. Correcto</font></font><br>
<img src="https://habrastorage.org/files/729/50a/878/72950a8786ee4aa59dc105e8449bd800.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el tablero puede ver rastros de correcciones, as√≠ como rastros de uso abierto en una mochila (huellas quemadas en el √°rea donde est√° conectada la bater√≠a). </font><font style="vertical-align: inherit;">El dise√±o ciertamente no es el m√°s elegante, pero incluso de esta forma se puede usar.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es386099/">https://habr.com/ru/post/es386099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es386083/index.html">La Comisi√≥n Europea permitir√° que los autom√≥viles di√©sel superen a la mitad los l√≠mites de emisiones</a></li>
<li><a href="../es386085/index.html">¬øQu√© quadrocopter deber√≠a elegir si quiero ...? Preguntas frecuentes de Dronk.Ru</a></li>
<li><a href="../es386087/index.html">–í—ã–ø—É—â–µ–Ω –Ω–æ–≤—ã–π –±–∏–ª–¥ –¥–ª—è –∏–Ω—Å–∞–π–¥–µ—Ä–æ–≤ –º–æ–±–∏–ª—å–Ω–æ–π Windows 10</a></li>
<li><a href="../es386093/index.html">La tecnolog√≠a RF-Capture te permite "ver" a trav√©s de las paredes</a></li>
<li><a href="../es386095/index.html">Google –∏ Amazon –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Å–≤–æ–µ –¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–¥—É—à–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –Ω–∞ –∑–æ–Ω—ã –¥–ª—è –ø–æ–ª—ë—Ç–æ–≤ –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–æ–≤</a></li>
<li><a href="../es386101/index.html">Un robot derrota a una persona, y luego una persona conduce un robot: video. ADF: el robot se bloquea</a></li>
<li><a href="../es386103/index.html">Microsoft reduce los l√≠mites de OneDrive, y para Rusia aumenta los precios de software y suscripciones</a></li>
<li><a href="../es386105/index.html">Despu√©s de la compilaci√≥n m√≥vil lleg√≥ el ensamblaje para PC: Windows 10 Insider Preview 10576</a></li>
<li><a href="../es386107/index.html">La historia de c√≥mo Beeline se relaciona con la seguridad de sus servicios.</a></li>
<li><a href="../es386109/index.html">El submarino "Stonehenge" frente a las costas del mar Mediterr√°neo est√° reescribiendo la historia de la humanidad nuevamente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>