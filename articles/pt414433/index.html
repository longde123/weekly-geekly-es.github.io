<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçª ‚è© üßó Andamos pela cidade com sabedoria: como eu fiz o servi√ßo para construir percursos pedestres interessantes üë®üèª‚Äç‚öïÔ∏è üëáüèº üñ±Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD: como o t√≥pico correu bem e mostrou que existe uma demanda por esse servi√ßo, vou desenvolv√™-lo ainda mais. Iniciei um p√∫blico do VKontakte para co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Andamos pela cidade com sabedoria: como eu fiz o servi√ßo para construir percursos pedestres interessantes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414433/">  <b>UPD:</b> como o t√≥pico correu bem e mostrou que existe uma demanda por esse servi√ßo, vou desenvolv√™-lo ainda mais.  Iniciei um p√∫blico do VKontakte para coletar feedback e publicar informa√ß√µes de atualiza√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://vk.com/sightsafari</a> <br><br>  Uma √°rea desconhecida da cidade, uma pequena quantidade de tempo livre e a necessidade (ou desejo) de chegar a p√© da esta√ß√£o de metr√¥ / hotel / trem - provavelmente todos pelo menos uma vez entraram nessa situa√ß√£o.  Ao mesmo tempo, por um lado, quero ver alguns lugares bonitos e interessantes, mas, por outro lado, o tempo limitado n√£o me permite desviar muito da rota direta. <br><br>  A situa√ß√£o √© ainda mais complicada se n√£o houver grandes atra√ß√µes nas proximidades que todos conhe√ßam e que possam ser inclu√≠das no seu percurso ap√≥s uma breve pesquisa na Internet.  O que fazer se voc√™ estiver preso em algum Kupchino, sobre o qual voc√™ ouviu apenas que √© melhor n√£o ficar preso l√°?  Temos que seguir o navegador, esperando que no caminho haja algo interessante.  No entanto, os navegadores populares apenas consideram a dist√¢ncia e o tempo de viagem, mas n√£o levam em considera√ß√£o a interessante do percurso.  Me deparei com mais projetos tentando levar em conta a conveni√™ncia de uma rota a p√© (contornando estradas barulhentas), mas quero ir n√£o apenas confortavelmente, mas tamb√©m para ver um pouco de beleza. <br><br><img src="https://habrastorage.org/webt/_b/-b/fl/_b-bflyvxlr6x2jswq-njjc8o9s.jpeg"><br><br>  Pensando um pouco, decidi assumir essa tarefa pessoalmente.  Como sempre, a id√©ia geral do algoritmo √© bastante simples, mas o diabo est√° nos detalhes.  E, no caso da navega√ß√£o, as pequenas coisas podem ser bastante significativas e com risco para a sa√∫de, porque √© improv√°vel que qualquer turista fique feliz quando o navegador o levar at√© a natureza de uma zona industrial semi-abandonada para um pequeno sinal em mem√≥ria (trabalho, uma vez que aconteceu) . <br><br>  Descri√ß√£o do algoritmo e exemplos de trabalho sob o corte, link no final. <br><a name="habracut"></a><br><h2>  Ideia principal </h2><br>  Minha id√©ia inicial foi a seguinte: fa√ßa o download do mapa do Open Street Map, analise-o, retire informa√ß√µes sobre todos os objetos potencialmente interessantes para os pedestres (ainda tivemos que decidir sobre a lista deles), desenhe algumas zonas de amortecimento em volta deles.  Estamos procurando maneiras com alguma estrutura padr√£o, um pouco do processo de constru√ß√£o de um gr√°fico de navega√ß√£o, para que nessas √°reas os pesos das bordas se tornem mais baixos e, assim, organizem a atra√ß√£o de rotas de pedestres para elas. <br><br>  Mal disse o que fez.  Para encontrar o caminho, usamos a biblioteca GraphHopper, que pode ler mapas OSM da caixa, criar rotas para diferentes tipos de transporte (carro, pedestre, bicicleta), possui v√°rios algoritmos diferentes para encontrar o caminho (pesquisa simples, pesquisa de rotas alternativas, todos os tipos de op√ß√µes otimizadas e aceleradas) ) e pode pr√©-processar o gr√°fico de navega√ß√£o para acelerar a pesquisa (a pesquisa b√°sica na cidade funciona muito rapidamente, em alguns milissegundos).  Para o meu exemplo de trabalho, minha cidade natal de S√£o Petersburgo foi escolhida - aqui eu pude avaliar a qualidade e o interesse das rotas constru√≠das. <br><br>  Como resultado, a vers√£o b√°sica do algoritmo ficou presa no joelho por algumas noites e, em seguida, uma emocionante jornada come√ßou ao longo do rake e pequenas coisas, nas quais o diabo √© conhecido e mente, que discutirei mais adiante. <br><br><h2>  Objetos para turistas e problemas com OSM </h2><br>  No Open Street Map, cada objeto √© uma geometria (N√≥, Caminho ou Rela√ß√£o) mais um n√∫mero de pares de cadeias de valores-chave. <br><br>  Aqui est√° o Pal√°cio de Inverno em OSM: <br><br><img src="https://habrastorage.org/webt/tq/fn/u3/tqfnu3oazgejzzpy_isave3t-d8.png"><br><br>  O problema √© que, como o OSM √© um mapa aberto e edit√°vel pelos participantes, a padroniza√ß√£o √© esfarrapada nas duas pernas.  Para designar o mesmo tipo de objetos, um conjunto diferente de tags e uma combina√ß√£o diferente de objetos podem ser usados, algumas das tags s√£o consideradas "can√¥nicas" e descritas no wiki, mas ainda existem v√°rias op√ß√µes, simplesmente alternativas e francamente err√¥neas, mas usadas .  Como resultado, qualquer c√≥digo que funcione com o OSM (especialmente navegadores e renderizadores) √© for√ßado a levar tudo isso em conta e conter um monte de c√≥digo para lidar com casos especiais. <br><br>  Por exemplo, a tag highway = n√£o especificada n√£o significa ‚Äúalgum tipo de estrada de um tipo desconhecido‚Äù, como muitos mapeadores pensam, mas um tipo muito espec√≠fico de estrada de acordo com a classifica√ß√£o europ√©ia, mas eles a moldam em qualquer lugar por causa do nome.  Al√©m disso, esse tipo de estrada assume a presen√ßa de uma cal√ßada ou cal√ßada de pedestres; portanto, o navegador constr√≥i rotas de pedestres ao longo dela, enquanto os pedestres n√£o v√£o para uma estrada t√£o real em S√£o Petersburgo (essa √© a faixa de rodagem da rua).  Ou outro exemplo: addr: housename √†s vezes usamos uma tag para o nome dos edif√≠cios; por exemplo, por algum motivo, a ala oeste do edif√≠cio da Casa Geral na Palace Square recebe esse nome.  Enquanto os guias OSM dizem que ele deve ser usado apenas em pa√≠ses onde nomes s√£o usados ‚Äã‚Äãem vez de n√∫meros de casas (no Jap√£o, parece ser o caso), e para nomes oficiais de edif√≠cios, use o crach√° e similares. <br><br>  Outro momento que me irrita √© a marca√ß√£o de √°reas verdes.  Existem duas tags diferentes para esse fim: lazer = parque e uso da terra = grama.  No mapa, eles t√™m a mesma apar√™ncia: apenas uma zona verde, um pouco diferente na cor.  Como resultado, eles s√£o misturados, como querem.  Por esse motivo, muitas vezes o gramado que divide as faixas de rodagem da rua se torna um "parque" e come√ßa a atrair trilhas para caminhadas. <br><br>  Todas essas nuances tiveram que ser descobertas por n√≥s mesmos quando constru√≠mos e analisamos rotas. <br>  Como um conjunto de objetos de interesse dos pedestres, a seguinte lista foi finalmente selecionada: <br><br><ul><li>  Atra√ß√µes tur√≠sticas etiquetadas turismo </li><li>  √Åreas verdes.  lazer = parque, jardim.  Ap√≥s alguma delibera√ß√£o, foram adicionados cemit√©rios landuse = cemetry.  Por um lado, h√° uma atra√ß√£o mais ou menos, por outro lado, na Ilha Vasilievsky em S√£o Petersburgo, a √∫nica grande zona verde √© o cemit√©rio, que os habitantes locais usam em vez do parque, mas n√£o h√° parques reais l√°. </li><li>  √Ågua: rios, lagos, lagoas.  H√° uma mistura de √°gua, tags de cursos d'√°gua e v√°rios valores duplicados.  √â t√£o bom caminhar ao longo da avenida em um dia quente.  De qualquer forma, pensei assim at√© tentar processar Smolensk - de repente, descobriu-se que nas profundezas da margem do rio n√£o era um aterro bonito como o nosso em S√£o Petersburgo, mas um terreno baldio cheio de vegeta√ß√£o e cheio de lixo, do qual os pedestres preferiam ficar longe.  Mas at√© agora n√£o foi poss√≠vel distinguir essas situa√ß√µes apenas do mapa. </li><li>  Edif√≠cios e estruturas hist√≥ricos, com a tag hist√≥rico.  Eles geralmente s√£o apenas bonitos </li><li>  Quaisquer outras pequenas coisas na cidade marcadas com etiqueta de cortesia.  Tem muitos significados, escolhi apenas alguns, por exemplo, um rel√≥gio de rua (rel√≥gio) - geralmente √© bonito, edif√≠cios religiosos (local_de_ adora√ß√£o), arte de rua para todos (grafite) e outros </li><li>  Ruas e pra√ßas de pedestres rodovia = pedestre </li></ul><br>  No decorrer do estudo, percebi que, al√©m das √°reas positivas que atraem os pedestres, √© necess√°rio adicionar as negativas que os repelem.  Esta lista at√© agora inclui: <br><br><ul><li>  Landuse de edif√≠cios = constru√ß√£o.  Os pe√µes n√£o t√™m muito prazer em andar sob andaimes, em p√≥ que voa de um canteiro de obras </li><li>  √Åreas industriais e garagens landuse = industrial, garages.  Naquele momento, essa nuance com a institui√ß√£o de um pedestre aconteceu (e n√≥s, no Instituto de Design e Urbanismo do ITMO, testamos em estudantes que percorreram rotas estabelecidas e depois escrevemos cr√≠ticas como parte de um estudo sobre o conforto de caminhar na regi√£o de Petrogrado) na selva da √°rea industrial de Lenpolygraphmash.  Aconteceu que l√°, nem todo o trimestre √© marcado com essa tag (como √© normalmente feito para marcar grandes zonas industriais), mas cada edif√≠cio √© separado. </li><li>  Idealmente, tamb√©m quero afastar os pedestres das grandes rodovias da cidade, onde √© poeirento, barulhento, muitos carros e, geralmente, n√£o h√° nada para olhar.  Mas at√© agora n√£o foi poss√≠vel detect√°-los sem ambiguidade.  No OSM, existe essencialmente apenas o n√∫mero de faixas de carros, mas esse crit√©rio n√£o √© suficiente (muitas ruas tur√≠sticas importantes, como a Nevsky Prospect, tamb√©m s√£o de v√°rias faixas) </li></ul><br>  O mesmo Lenpolygraphmash, contendo em algum lugar um monumento √† imprensa e onde meu algoritmo arrastou o pobre aluno <br><br><img src="https://habrastorage.org/webt/yy/di/ai/yydiaik86aloogncpomcsobrjum.png"><br><br><h2>  A import√¢ncia das atra√ß√µes </h2><br>  Obviamente, as vistas s√£o diferentes.  Existem objetos grandes e mundialmente famosos - como a Torre Eiffel ou a Catedral de Santo Isaac em S√£o Petersburgo, que atraem um grande n√∫mero de turistas e para visitar quais pessoas podem fazer um gancho decente.  E h√° algumas pequenas decora√ß√µes de cidades pequenas - alguma arte de rua, uma pequena escultura no p√°tio que as pessoas est√£o prontas para ver apenas ao longo do caminho e n√£o querem arrast√°-las de longe.  Para a correta constru√ß√£o de rotas interessantes e convenientes, foi necess√°rio aprender a separar diferentes categorias de atra√ß√µes, e tudo o que temos no OSM √© uma determinada geometria e um conjunto de tags.  Eu tive que criar um conjunto de regras pr√°ticas para atribuir a ‚Äúimport√¢ncia‚Äù de um ponto de interesse que determina ainda mais as mudan√ßas de peso no gr√°fico. <br><br>  Inicialmente, a import√¢ncia √© zero e aumenta se as seguintes condi√ß√µes forem verdadeiras: <br><br><ul><li>  +3 se houver uma etiqueta hist√≥rica - apenas os edif√≠cios hist√≥ricos importantes a possuem e, mesmo assim, nem todas </li><li>  +3 pela presen√ßa de tags da wikipedia ou da wikidata.  Somente objetos importantes geralmente t√™m suas pr√≥prias p√°ginas wiki. </li><li>  +1 pela presen√ßa de um link ou URL - novamente, nem todo mundo tem seu pr√≥prio site, mas geralmente essa tag leva a uma p√°gina de algum cat√°logo e pequenos objetos </li><li>  +1 para cada crach√°.  O nome pode ser definido de v√°rias maneiras; pode haver todos os tipos de old_name para nomes hist√≥ricos ou nomes traduzidos para outros idiomas.  Novamente, a presen√ßa de muitos nomes indica a import√¢ncia suficiente do objeto (j√° que algu√©m estava cansado de colocar todos eles no ch√£o) </li><li>  edif√≠cio: arquitetura - estilo arquitet√¥nico, geralmente usado em todos os tipos de belos monumentos arquitet√¥nicos </li></ul><br>  Essa lista √© determinada empiricamente e, no m√≠nimo, permite que voc√™ separe o Pal√°cio de Inverno dos grafites sem nome nos arredores.  Como resultado, uma import√¢ncia de 0 significa algum objeto pequeno e sem nome local (um peda√ßo de vegeta√ß√£o, grafite), cerca de 3-4 j√° s√£o algo interessante (uma igreja, uma pra√ßa onde voc√™ pode sentar e relaxar), perto de 10, come√ßam as atra√ß√µes no n√≠vel da cidade, o mesmo pal√°cio de inverno. <br><br>  A lista n√£o √© perfeita e depende muito de dados OSM, que geralmente s√£o incompletos.  Por exemplo, o Port√£o Narva inicialmente tinha apenas uma unidade de import√¢ncia, uma vez que nada, exceto o nome, era afixado a eles.  Eu tive que ir ao OSM e adicionar nomes, estilo, anos de constru√ß√£o, altura (para determinar corretamente a visibilidade, o que vem a seguir) etc.  Em geral, tamb√©m h√° um benef√≠cio p√∫blico nisso - para melhorar a qualidade das rotas, eu vou ao OSM de tempos em tempos e coloco tags ausentes l√°, que podem ser usadas por outros navegadores ou programas. <br><br><h2>  √Åreas de influ√™ncia </h2><br>  Atra√ß√µes v√™m em tamanhos diferentes.  Uma pequena escultura deve ser vista a uma dist√¢ncia n√£o superior a 5-7 metros.  O Cavaleiro de Bronze √© bem vis√≠vel de 20 a 30.  A Catedral de Santo Isaac, um dos edif√≠cios mais altos do centro da cidade, √© decentemente vis√≠vel de 200 a 300 (por isso entendo que n√£o √© necess√°rio que um turista se aproxime, mas √© bastante confort√°vel apreciar a vista a essa dist√¢ncia, pois pode ser vista a um quil√¥metro do outro lado do Neva , mas sem detalhes).  Como determinar a que dist√¢ncia a atra√ß√£o deve afetar as rotas dos pedestres? <br><br>  O Cavaleiro de Bronze e a c√∫pula da Catedral de Santo Isaac √† dist√¢ncia <br><br><img src="https://habrastorage.org/webt/qf/mt/ac/qfmtachakldz_hek0cft9da_vkc.jpeg"><br><br>  Primeiro, criei raios emp√≠ricos de visibilidade.  Eles dependem de todas as informa√ß√µes dispon√≠veis sobre a atra√ß√£o e a transformam em um dos quatro raios: pequenos 30 metros, m√©dio 100, grande 250 e enormes 350 metros. <br><br>  Um pouco distante √© a visibilidade de rios e parques.  Para eles, defino 30 metros, ou seja,  corresponde aproximadamente √† largura do passeio ou da rua ao redor do parque.  Como olhar para o parque de longe √© um tanto in√∫til, voc√™ precisa ir ao lado dele. <br><br>  O tipo de visibilidade √© determinado pelas regras: <br><br><ul><li>  Objetos de ponto (ou seja, especificados pelo tipo OSM de ponto) t√™m pequena visibilidade, geralmente s√£o pequenos monumentos e arte de rua </li><li>  Mas aponte e com a tag hist√≥rica √© M√©dio, porque  geralmente s√£o grandes monumentos em pedestais altos, como o mesmo cavaleiro de bronze </li><li>  √Åreas com menos de 20 * 20 metros (caminho ou rela√ß√£o) s√£o M√©dias </li><li>  Mais - Grande </li><li>  Se o objeto tem uma altura de tag (altura em metros) ou pr√©dio: n√≠veis (n√∫mero de andares), a uma altura de mais de 50 metros √© considerado Enorme - isso foi feito especificamente para Isaac e outras grandes catedrais e edif√≠cios vis√≠veis √† dist√¢ncia </li></ul><br>  Mas surgiu um problema: nas condi√ß√µes de desenvolvimento denso do centro hist√≥rico de S√£o Petersburgo, a abordagem ing√™nua com raios n√£o funcionou, uma vez que a √°rea real de visibilidade de algum templo localizado no quintal era muito menor, na verdade, era vis√≠vel apenas a partir da se√ß√£o da rua diretamente √† sua frente.  Eu tive que come√ßar a construir pol√≠gonos honestos (bem, quase) de visibilidade. <br><br>  A Igreja de Santa Catarina fica nos fundos do p√°tio, cercada por casas por todos os lados: <br><br><img src="https://habrastorage.org/webt/i1/v9/7x/i1v97xyfbvptyyalot5aegbmjp0.png"><br><br>  Primeiro, foi necess√°rio determinar os obst√°culos.  Bem, tudo √© simples, tirei e li dos dados do OSM todos os pol√≠gonos com a tag de constru√ß√£o.  Estes ser√£o pol√≠gonos que bloqueiam nossa visibilidade.  Em seguida, ele escreveu um algoritmo simples e ing√™nuo para a constru√ß√£o de um pol√≠gono para a visibilidade de um ponto usando o tra√ßado de raios.  N√£o preciso de alta precis√£o l√°, uma d√∫zia de raios por ponto foi suficiente.  No come√ßo, peguei o centr√≥ide da geometria do ponto de refer√™ncia sem mais delongas, mas isso n√£o deu os melhores resultados para edif√≠cios longos (longos e estreitos).  Portanto, no futuro, para grandes atra√ß√µes, comecei a ter tr√™s pontos - o centr√≥ide e os dois pontos mais distantes e um do outro na fronteira externa.  Por que n√£o constru√≠ visibilidade honestamente?  Como se o algoritmo para construir a regi√£o de visibilidade de um ponto √© trivial (deixe os raios irem do ponto em todas as dire√ß√µes, veja onde eles cruzaram os obst√°culos mais pr√≥ximos, conectem esses pontos), ser√° muito mais dif√≠cil criar visibilidade honesta de uma aresta (e, finalmente, de um pol√≠gono) (o primeiro trata de decis√£o principal - construir a visibilidade das duas extremidades das costelas e combinar - obviamente errado). <br><br>  O resultado √© uma boa aproxima√ß√£o.  Constr√≥i imperfeitamente, mas para as necessidades de navega√ß√£o de pedestres, essa precis√£o √© suficiente para n√≥s.  O √∫nico problema √© que ele n√£o leva em considera√ß√£o a altura dos edif√≠cios, ou seja,  qualquer pequeno estande bloquear√° nossa vis√£o da torre sineira de cinco andares.  Mas n√£o h√° nada a ser feito - os dados do OSM nem sempre cont√™m v√°rios andares e √© muito mais dif√≠cil criar volumes de visibilidade em 3D.  Embora talvez eu volte a isso. <br><br>  Pol√≠gonos de visibilidade constru√≠dos para esta e igrejas vizinhas <br><br><img src="https://habrastorage.org/webt/u3/nn/d1/u3nnd1avv5rxery--jfkrhtawpq.png"><br><br><h2>  A beleza da rota e como aument√°-la </h2><br>  Assim, aprendemos a considerar a import√¢ncia e a visibilidade das atra√ß√µes e parece que come√ßamos a construir boas rotas.  De qualquer forma, foi o que aconteceu enquanto eu estava testando nas regi√µes centrais de S√£o Petersburgo, que t√™m uma densidade muito alta de belezas por quil√¥metro quadrado. <br><br>  No entanto, valeu a pena se afastar um pouco do centro, quando de repente o algoritmo come√ßou a reconhecer sua impot√™ncia.  E a rota que ele construiu come√ßou a coincidir com a mais curta.  Como o gato exibe muitos pontos de vista nessas √°reas, eles est√£o localizados distantes um do outro, portanto, ao procurar um caminho usando a m√©trica combinada "beleza + dist√¢ncia", a contribui√ß√£o do primeiro termo acabou por ser quase zero, como resultado, o algoritmo construiu simplesmente as rotas mais curtas. <br><br>  √â claro que sempre se pode dizer: "N√£o somos assim, s√£o nossas cidades chatas", mas isso n√£o seria muito correto.  Portanto, eu me perguntava como avaliar a rota constru√≠da e como melhor√°-la.  A solu√ß√£o mais simples que vem imediatamente √† mente √© estender a rota for√ßando um gancho at√© qualquer ponto de interesse deixado de fora. <br><br>  Agora, nos casos em que a) a import√¢ncia total de todas as atra√ß√µes da rota √© um quil√¥metro a menos que um determinado valor, ou b) o pr√≥prio usu√°rio optou por construir a rota mais interessante, meu algoritmo tenta aprimor√°-la.  Para fazer isso, a rota inicial √© constru√≠da, um buffer √© contornado (sua espessura √© determinada pelo comprimento, quanto mais longa a rota - quanto mais o gancho √© permitido), v√°rias novas vistas (ainda n√£o inclu√≠das na rota) com pontua√ß√£o&gt; 2 s√£o pesquisadas dentro dessa reserva (n√£o queremos fazer ganchos por quil√¥metro para jardins p√∫blicos que n√£o sejam o mesmo) e novas rotas s√£o estabelecidas desde o ponto de partida at√© esse destino intermedi√°rio e at√© o ponto de destino.  Ao mesmo tempo, o comprimento √© controlado adicionalmente, como resultado, devemos obter uma rota n√£o mais do que o dobro do caminho mais curto entre os pontos inicial e final. <br><br>  A primeira vers√£o do algoritmo (√† esquerda) foi impotente para encontrar algo interessante e construiu a rota mais curta.  Mas a vers√£o com a adi√ß√£o de uma atra√ß√£o intermedi√°ria (√† direita) inclu√≠a o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DOT KV-19</a> , est√° no canto inferior direito da rota (nesse n√≠vel de zoom, n√£o √© vis√≠vel, mas o servi√ßo o mostrar√° na lista e permitir√° encontr√°-lo no mapa clicando no nome) . <br><br><img src="https://habrastorage.org/webt/-a/xs/v9/-axsv9ra4o2tcvhthknqhqumwws.jpeg"><br><br>  O mesmo bunker.  Em geral, em Kupchino existem objetos suficientes relacionados √† defesa de Leningrado, pois foi l√° que as linhas defensivas da cidade passaram: <br><br><img src="https://habrastorage.org/webt/gh/vv/an/ghvvanixv70ulqi2m45sgcipbtm.jpeg"><br><br>  √â claro que, longe de qualquer pedestre, concordar√° em fazer um desvio em nome de algu√©m insignificante em sua opini√£o.  √â por isso que o servi√ßo mostra a extens√£o da rota em compara√ß√£o com a menor e a lista de atra√ß√µes, e apenas o usu√°rio pode decidir se est√° interessado nessa rota.  Al√©m disso, existe um controle deslizante que permite reduzir (ou vice-versa aumentar) o gancho m√°ximo permitido. <br><br>          . -        ¬´¬ª    .               .  ,        ,       .        ,            .   ¬´¬ª        (       ),           ,               . <br><br>          .    ,         ,    .     .           .      .       ,    ( ),        ,          .        ,         ‚Äî        .              .        .         ,    ,             . <br><br><h2>   </h2><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sightsafari.city</a> <br>      ( OSM-,     ),       ,     .     :     ,   ,     ,   ‚Äî          . <br><br>   .             ,       : <br><br><img src="https://habrastorage.org/webt/br/fh/9g/brfh9gm8tff7duh4f5pmngdmlmu.jpeg"><br><br>       .     ,   ,     ,          . <br><br><img src="https://habrastorage.org/webt/ij/s3/sg/ijs3sgj22wuqs5amlzwo1hange0.jpeg"><br><br>  .            ,       . <br><br><img src="https://habrastorage.org/webt/4h/1x/ll/4h1xlltxfkpj22i2-h0zrtwsxlw.jpeg"><br><br>   :     (   )    ¬´ ¬ª    .   ,   ,    ,      . <br><br><img src="https://habrastorage.org/webt/nn/qo/0e/nnqo0etvaljjcuoycvb9-rky83c.png"><br><br><h2>  Conclus√£o </h2><br>      -,    (      ).    ,        .   ,     (     ),   -    . <br><br>       ‚Äî , , ,   (   ,   , ),  -  .       -   OSM,     - ,          (   ,        ,     2-3  ,        ). <br><br> <b>UPD:</b>     , , ,  , , , --, , , , , , ,      .         ,        . <br><br> <b>UPD 2:</b>  OSM,    ,   (  ,     ),       ,    .   -     ,     (  )     - ,         (         ). <br><br> <b>UPD 3:</b>          ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://vk.com/public168028574</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt414433/">https://habr.com/ru/post/pt414433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt414423/index.html">Este dia chegamos o mais perto poss√≠vel ... Foi lan√ßada uma nova vers√£o do SBM 11.4</a></li>
<li><a href="../pt414425/index.html">Algoritmo de reconhecimento de padr√µes de aprendizado</a></li>
<li><a href="../pt414427/index.html">O que uma impressora 3D pode fazer? Relat√≥rio da exposi√ß√£o Maker Faire Bay Area 2018</a></li>
<li><a href="../pt414429/index.html">Como aprender uma l√≠ngua estrangeira sem professor. Parte 1. "Minha experi√™ncia"</a></li>
<li><a href="../pt414431/index.html">Mitap JavaJam. Debate Javista, rafting, experimentos e microsservi√ßos</a></li>
<li><a href="../pt414437/index.html">O bloqueio de telegrama provocou um aumento no custo de startups dom√©sticas</a></li>
<li><a href="../pt414441/index.html">Experimente 1440 migra√ß√µes de banco de dados</a></li>
<li><a href="../pt414443/index.html">Recursos de chamadas de fun√ß√£o em C ++</a></li>
<li><a href="../pt414445/index.html">Melhorando o Zimbra com o Zextras Suite</a></li>
<li><a href="../pt414447/index.html">Tipos de todos os tempos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>