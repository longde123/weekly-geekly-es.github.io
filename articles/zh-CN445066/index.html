<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐄 👠 🚃 我如何在Vim中的LaTeX上写数学笔记 👩‍🍳 😮 🤚🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前段时间，我在Quora回答了一个问题： 如何跟上LaTeX上的数学讲义 。 在那里，我使用Vim和Inkscape（用于图纸）在LaTeX中解释了我的笔记工作流程。 但是自那时以来，发生了很多变化，因此我想发布一些博客文章，并描述新过程。 这是文章的第一篇。 

 我在数学课程的第二学期开始使用L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我如何在Vim中的LaTeX上写数学笔记</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445066/"> 前段时间，我在Quora回答了一个问题： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如何跟上LaTeX上的数学讲义</a> 。 在那里，我使用Vim和Inkscape（用于图纸）在LaTeX中解释了我的笔记工作流程。 但是自那时以来，发生了很多变化，因此我想发布一些博客文章，并描述新过程。 这是文章的第一篇。 <br><br> 我在数学课程的第二学期开始使用LaTeX做笔记，从那时起我写了1700多页。 以下是摘要显示的一些示例： <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9b2/6a1/c4d/9b26a1c4dcac70227b229935ae06599d.png"></a> <br><a name="habracut"></a><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9e3/6dc/cef/9e36dccef8c096640212a3755d9ef2ec.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/793/760/039/79376003910994dc579e0ccf3da4f690.png"></a> <br><br> 这些笔记（包括图纸）直接在讲座上制作，以后不再编辑。 为了在LaTeX中有效地编写摘要，必须遵循四个规则： <br><br><ul><li> 在LaTeX中编写文本和公式的速度应与讲师在黑板上书写的速度一样快：延迟是不可接受的。 <br></li><li> 绘图插图应几乎与讲师的插图一样快。 <br></li><li> 管理便笺，即添加便笺，安排所有便笺，最后两节讲座，搜索便笺等，应该快速简便。 <br></li><li> 如果我想用pdf文档写注释，应该可以使用LaTeX注释pdf文档。 </li></ul><br> 本文是关于第一点的：在LaTeX上做笔记。 <br><br><h1>  Vim和LaTeX </h1><br> 要在LaTeX上编写文本和数学公式，我使用Vim。 这是一个功能强大的通用文本编辑器，具有高度可扩展性。 我用它来编写代码，LaTeX，Markdown文本……一般来说，任何文本。 他的学习曲线相当陡峭，但是如果您掌握了基础知识，那么如果没有通常的热键就很难返回编辑器。 这是我编辑LaTeX文档时的屏幕外观： <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/eb5/999/261/eb5999261b4ba963fd49f999477731eb.png"></a> <br><br> 左边是Vim，右边是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Zathura</a> PDF查看器，它也支持Vim样式的键盘快捷键。 我在Ubuntu中使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bspwm</a>窗口管理器。  LaTeX作为插件安装了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">vimtex</a> 。 它提供语法高亮显示，目录，synctex等。使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">vim-plug，</a>我将其配置如下： <br><br> <code>Plug 'lervag/vimtex' <br> let g:tex_flavor='latex' <br> let g:vimtex_view_method='zathura' <br> let g:vimtex_quickfix_mode=0 <br> set conceallevel=1 <br> let g:tex_conceal='abdmg'</code> <br> <br> 最后两行调整伪装。 此功能是当光标不在此行上时，LaTeX代码将被替换或变得不可见的功能。 如果您隐藏<code>\ [</code> ， <code>\]</code> ， <code>$</code> ，那么它们并不那么显眼，可以更好地浏览文档。 该函数还用<code>\bigcap</code>替换<code>\bigcap</code> ，用<code>∈</code>替换<code>\bigcap</code> <code>\in</code> ，等等，如动画所示： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/2e0/b83/d362e0b837be308b0f8897482a331ec6.gif"><br><br> 使用此设置，您可以完成任务：在LaTeX上书写的速度与讲师在黑板上书写的速度相同。 片段在这里起作用。 <br><br><h1> 片段 </h1><br><h3> 什么是摘要？ </h3><br> 摘录是一小段可重用的文本，被其他文本调用。 例如，当键入sign并按Tab时，sign单词变成签名： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ab/28b/1ad/5ab28b1ad6114b68f4ce459d4f89eeae.gif"><br><br> 代码段可以是动态的：当我<code>today</code>输入并按<code>Tab</code> ， <code>today</code>一词将替换为当前日期，并且<code>box</code> <code>Tab</code>变为自动增加大小的字段。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b6/301/a65/1b6301a6561d104b4bc79654cb75470d.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b7/cae/fc4/8b7caefc472eae0941f41365d16e8d2d.gif"><br><br> 您甚至可以在另一个代码段中使用一个代码段： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/1fd/ed4/cdd1fded48947d163c2e5e6b974cfec0.gif"><br><br><h3> 使用UltiSnips创建片段 </h3><br> 为了控制代码片段，我使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">UltiSnips</a>插件。 这是它的配置： <br><br><pre> <code class="plaintext hljs">Plug 'sirver/ultisnips' let g:UltiSnipsExpandTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpForwardTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpBackwardTrigger = '&lt;s-tab&gt;'</code> </pre> <br> 代码段<code>sign</code>的代码： <br><br><pre> <code class="plaintext hljs">snippet sign "Signature" Yours sincerely, Gilles Castel endsnippet</code> </pre> <br> 对于动态代码段，您可以将代码放在反引号之间，当代码段扩展时，将运行该代码。 在这里，我使用bash格式化当前日期： <code>date + %F</code> <br><br><pre> <code class="plaintext hljs">snippet today "Date" `date +%F` endsnippet</code> </pre> <br> 在<code>`!p ... `</code>块中，您可以用Python编写。 查看<code>box</code>摘要的代码： <br><br><pre> <code class="python hljs">snippet box <span class="hljs-string"><span class="hljs-string">"Box"</span></span> `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'┌'</span></span> + <span class="hljs-string"><span class="hljs-string">'─'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'┐'</span></span>` │ $<span class="hljs-number"><span class="hljs-number">1</span></span> │ `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'└'</span></span> + <span class="hljs-string"><span class="hljs-string">'─'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'┘'</span></span>` $<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br> 代替此代码， <code>snip.rv</code>变量的值将插入到文档中。 在块内部，您可以访问代码段的当前状态，例如， <code>t[1]</code>对应于第一个选项卡的位置， <code>fn</code>当前文件名，等等。 <br><br><h1> 乳胶片段 </h1><br> 片段显着加快了工作速度，尤其是一些较复杂的片段。 让我们从最简单的开始。 <br><br><h3> 环境 </h3><br> 要插入环境，只需在行首输入<code>beg</code> 。 然后是环境名称，该名称反映在<code>\end{}</code>命令中。 按<code>Tab</code>将光标放在其中。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5e/d64/1a9/d5ed641a9cb568d13dd56d98fec6376b.gif"><br><br> 代码如下： <br><br><pre> <code class="plaintext hljs">snippet beg "begin{} / end{}" bA \begin{$1} $0 \end{$1} endsnippet</code> </pre> <br>  <code>b</code>符号表示这样的代码段仅在行的开头起作用， <code>A</code>表示自动扩展，即不需要按<code>Tab</code> 。 通过按<code>Tab</code>和<code>Shift</code> + <code>Tab</code>转到的<code>Tab</code> <code>Tab</code>表示为<code>$1</code> ， <code>$2</code> ，...，后者表示为<code>$0</code> 。 <br><br><h3> 内联和显示公式 </h3><br> 两个最常用的代码段是<code>mk</code>和<code>dm</code> ，它们会触发数学模式。 第一个用于内联公式，第二个用于显示公式。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12a/16b/6a9/12a16b6a90c4d85a887c7cde0f18bb8c.gif"><br><br> 聪明的公式摘要：他知道何时在美元符号后插入空格。 当我在$结束后立即开始输入单词时，它会添加一个空格。 但是，如果我键入另一个字符，则不会添加空格，例如'$ p $ -value'。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/2a1/f55/1172a1f556fd36b42f7c3642b3952e2c.gif"><br><br> 此代码段的代码为： <br><br><pre> <code class="plaintext hljs">snippet mk "Math" wA $${1}$`!p if t[2] and t[2][0] not in [',', '.', '?', '-', ' ']: snip.rv = ' ' else: snip.rv = '' `$2 endsnippet</code> </pre> <br> 第一行末尾<code>W</code>表示该代码段仅在单词边界处扩展。 因此，例如， <code>hellomk</code>将不起作用，而<code>hello mk</code>将起作用。 <br><br> 显示公式的代码段比较简单，但也很方便。 它总是使方程式以点结尾。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a68/2e9/736/a682e97365ecfe19fe0c5bc08bacfec6.gif"><br><br><pre> <code class="plaintext hljs">&lt;snippet dm "Math" wA \[ $1 .\] $0 endsnippet</code> </pre> <br><h3> 下标和上标字符 </h3><br> 另一个有用的代码段是用于索引。 它将<code>a1</code>更改为<code>a_1</code> ，将<code>a_12</code>为<code>a_{12}</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/633/cb8/f26633cb822c6b52d346dfbba6e1a1bd.gif"><br><br> 此代码段的代码使用正则表达式作为触发器。 当您输入一个字符后跟一个编码为<code>[A-Za-z]\d</code>的字符，或一个字符后接<code>_</code>和两个数字时，它将扩展该片段。 <code>[A-Za-z]_\d\d</code> 。 <br><br><pre> <code class="plaintext hljs">snippet '([A-Za-z])(\d)' "auto subscript" wrA `!p snip.rv = match.group(1)`_`!p snip.rv = match.group(2)` endsnippet snippet '([A-Za-z])_(\d\d)' "auto subscript2" wrA `!p snip.rv = match.group(1)`_{`!p snip.rv = match.group(2)`} endsnippet</code> </pre> <br> 当您使用括号将正则表达式的各个部分组合成一个组时，例如<code>(\d\d)</code> ，则可以通过Python中的<code>match.group(i)</code>在代码段扩展中使用它们。 <br><br> 对于上标字符，我使用<code>td</code> ，它变成<code>^{}</code> 。 尽管对于最常见的（正方形，立方体和其他几个），打算使用单独的代码段，例如<code>sr</code> ， <code>cb</code>和<code>comp</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/da8/55c/d9e/da855cd9e67c48f508fab5ddc8c877fe.gif"><br><br><pre> <code class="plaintext hljs">snippet sr "^2" iA ^2 endsnippet snippet cb "^3" iA ^3 endsnippet snippet compl "complement" iA ^{c} endsnippet snippet td "superscript" iA ^{$1}$0 endsnippet</code> </pre> <br><h3> 分数 </h3><br> 最便捷的片段之一适用于分数。 他进行了以下替换： <br><br>  <code>//</code> → <code>\frac{}{}</code> <br>  <code>3/</code> → <code>\frac{3}{}</code> <br>  <code>4\pi^2/</code> → <code>\frac{4\pi^2}{}</code> <br>  <code>(1 + 2 + 3)/</code> → <code>\frac{1 + 2 + 3}{}</code> <br>  <code>(1+(2+3)/)</code> → <code>(1 + \frac{2+3}{})</code> <br>  <code>(1 + (2+3))/</code> → <code>\frac{1 + (2+3)}{}</code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f8/3f1/bdc/3f83f1bdc3078aa16382e80a276f199f.gif"><br><br> 首先，一个简单的代码： <br><br><pre> <code class="plaintext hljs">snippet // "Fraction" iA \\frac{$1}{$2}$0 endsnippet</code> </pre> <br> 在与表达式<code>3/</code> ， <code>4ac/</code> ， <code>6\pi^2/</code> ， <code>a_2/</code>等对应的正则表达式的帮助下，进行第二和第三次替换。 <br><br><pre> <code class="plaintext hljs">snippet '((\d+)|(\d*)(\\)?([A-Za-z]+)((\^|_)(\{\d+\}|\d))*)/' "Fraction" wrA \\frac{`!p snip.rv = match.group(1)`}{$1}$0 endsnippet</code> </pre> <br> 如您所见，正则表达式可能会变得很长，但是下面的图应该解释了所有内容： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/908/df5/ec2/908df5ec254f9cd5b08b99b8a54318d0.svg"><br><br> 在第四和第五种情况下，代码段尝试查找相应的括号。 由于UltiSnips正则表达式引擎不知道如何执行此操作，因此我不得不使用Python： <br><br><pre> <code class="python hljs">priority <span class="hljs-number"><span class="hljs-number">1000</span></span> snippet <span class="hljs-string"><span class="hljs-string">'^.*\)/'</span></span> <span class="hljs-string"><span class="hljs-string">"() Fraction"</span></span> wrA `!p stripped = match.string[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] depth = <span class="hljs-number"><span class="hljs-number">0</span></span> i = len(stripped) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">')'</span></span>: depth += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">'('</span></span>: depth -= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> depth == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; i -= <span class="hljs-number"><span class="hljs-number">1</span></span> snip.rv = stripped[<span class="hljs-number"><span class="hljs-number">0</span></span>:i] + <span class="hljs-string"><span class="hljs-string">"\\frac{"</span></span> + stripped[i+<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-string"><span class="hljs-string">"}"</span></span> `{$<span class="hljs-number"><span class="hljs-number">1</span></span>}$<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br> 最后，我想分享一个片段，将当前选择片段化。 选择文本，按<code>Tab</code> ，输入<code>/</code>然后再次按<code>Tab</code> <code>Tab</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0da/01b/956/0da01b9566dc437fabf0c563ed14941f.gif"><br><br> 该代码使用<code>${VISUAL}</code>变量，它反映了您的选择。 <br><br><pre> <code class="plaintext hljs">snippet / "Fraction" iA \\frac{${VISUAL}}{$1}$0 endsnippet</code> </pre> <br><h3>  Sympy和Mathematica </h3><br> 另一个很酷但使用较少的代码段运行<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">sympy</a>来评估数学表达式。 例如： <code>sympy</code> <code>Tab</code>扩展为<code>sympy | sympy</code>  <code>sympy | sympy</code>和<code>sympy 1 + 1 sympy</code> <code>Tab</code>变为<code>2</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c8/f14/3fd/8c8f143fdcdc2f3e6de9853cf7ea3def.gif"><br><br><pre> <code class="plaintext hljs">snippet sympy "sympy block " w sympy $1 sympy$0 endsnippet priority 10000 snippet 'sympy(.*)sympy' "evaluate sympy" wr `!p from sympy import * x, y, z, t = symbols('xyz t') k, m, n = symbols('km n', integer=True) f, g, h = symbols('fg h', cls=Function) init_printing() snip.rv = eval('latex(' + match.group(1).replace('\\', '') \ .replace('^', '**') \ .replace('{', '(') \ .replace('}', ')') + ')') ` endsnippet</code> </pre> <br> 对于Mathematica，类似的事情也是可能的： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82f/7f1/87a/82f7f187a685a52ed7665fded563f936.gif"><br><br><pre> <code class="plaintext hljs">priority 1000 snippet math "mathematica block" w math $1 math$0 endsnippet priority 10000 snippet 'math(.*)math' "evaluate mathematica" wr `!p import subprocess code = 'ToString[' + match.group(1) + ', TeXForm]' snip.rv = subprocess.check_output(['wolframscript', '-code', code]) ` endsnippet</code> </pre> <br><h3>  Postfix片段 </h3><br> 在我看来，值得一提的是后缀代码段，这些后缀代码段在输入某些字符后插入了适当的文本。 例如， <code>phat</code> → <code>\hat{p}</code>和<code>zbar</code> → <code>\overline{z}</code> 。 类似的代码段会插入一个向量，例如<code>v,.</code>  → <code>\vec{v}</code>和<code>v.,</code> → <code>\vec{v}</code> 。 句号和分号的顺序无关紧要，因此我可以同时单击它们。 这些摘要确实可以节省时间，因为您以与讲师在黑板上相同的速度输入它们。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c2/e62/aae/7c2e62aae292bc4d65eae363c816e206.gif"><br><br> 请注意， <code>bar</code>和<code>hat</code>前缀仍然可以使用，但是优先级较低。 这些代码段的代码是： <br><br><pre> <code class="plaintext hljs">priority 10 snippet "bar" "bar" riA \overline{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])bar" "bar" riA \overline{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">priority 10 snippet "hat" "hat" riA \hat{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])hat" "hat" riA \hat{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">snippet "(\\?\w+)(,\.|\.,)" "Vector postfix" riA \vec{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><h3> 其他片段 </h3><br> 我仍然有大约一百个常用片段。 所有这些都可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里找到</a> 。 其中大多数都很简单。 例如， <code>!&gt;</code>变成<code>\mapsto</code> ， <code>-&gt;</code>变成<code>\to</code> ，等等。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/36e/f41/4ee36ef41c17f1ded1fffe13ba32b60d.gif"><br><br>  <code>fun</code>转换为<code>f: \R \to \R :</code> , <code>!&gt;</code> → <code>\mapsto</code> ， <code>cc</code> → <code>\subset</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/092/c95/a45092c95d91059b779f74cedda840e1.gif"><br><br>  <code>lim</code>变为<code>\lim_{n \to \infty}</code> ， <code>sum</code> → <code>\sum_{n = 1}^{\infty}</code> ， <code>ooo</code> → <code>\infty</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2be/9c9/9e6/2be9c99e6ab5787fc5196bbf4ce525a7.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3be/522/f5e/3be522f5e6e5ca7f871138732ba1b14d.gif"><br><br><h3> 课程特定片段 </h3><br> 除了常用的片段外，我还提供了一些特定的片段。 它们在<code>.vimrc</code>作为单行加载： <br><br><pre> <code class="plaintext hljs">set rtp+=~/current_course</code> </pre> <br> 这里<code>current_course</code>是到当前课程的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">符号链接</a> （另一篇文章中有更多关于此课程的信息）。 这个文件夹中的文件是<code>~/current_course/UltiSnips/tex.snippets</code> ，在其中添加课程摘要。 例如，对于量子力学，有一些片段可以记录壁式和酮式量子态。 <br><br> <code>&lt;a|</code>  → <code>\bra{a}</code> <br> <code>&lt;q|</code>  → <code>\bra{\psi}</code> <br>  <code>|a&gt;</code> → <code>\ket{a}</code> <br>  <code>|q&gt;</code> → <code>\ket{\psi}</code> <br>  <code>\braket{a}{b}</code> → <code>\braket{a}{b}</code> <br><br> 由于量子力学经常使用<code>\psi</code> ，因此我自动用<code>\psi</code>替换了brake中的所有<code>q</code> 。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/d33/1fd/268d331fdb83b6fa3563b6f2b0baac66.gif"><br><br><pre> <code class="plaintext hljs">snippet "\&lt;(.*?)\|" "bra" riA \bra{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "\|(.*?)\&gt;" "ket" riA \ket{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "(.*)\\bra{(.*?)}([^\|]*?)\&gt;" "braket" riA `!p snip.rv = match.group(1)`\braket{`!p snip.rv = match.group(2)`}{`!p snip.rv = match.group(3).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet</code> </pre> <br><h3> 语境 </h3><br> 编写这些摘要时，应考虑是否可以在纯文本中找到它们。 例如，根据我的词典，带sr的英语大约72个单词，荷兰语的大约2000个单词。 因此，当我键入<code>disregard</code> ， <code>sr</code>更改为<code>^2</code> ，并且得到<code>di^2egard</code> 。 <br><br> 解决此问题的方法是向片段添加上下文。  Vim的语法高亮显示确定UltiSnips是否应使用代码段，具体取决于您是处于公式模式还是文本模式。 我想出了这个选项： <br><br><pre> <code class="plaintext hljs">global !p texMathZones = ['texMathZone'+x for x in ['A', 'AS', 'B', 'BS', 'C', 'CS', 'D', 'DS', 'E', 'ES', 'F', 'FS', 'G', 'GS', 'H', 'HS', 'I', 'IS', 'J', 'JS', 'K', 'KS', 'L', 'LS', 'DS', 'V', 'W', 'X', 'Y', 'Z']] texIgnoreMathZones = ['texMathText'] texMathZoneIds = vim.eval('map('+str(texMathZones)+", 'hlID(v:val)')") texIgnoreMathZoneIds = vim.eval('map('+str(texIgnoreMathZones)+", 'hlID(v:val)')") ignore = texIgnoreMathZoneIds[0] def math(): synstackids = vim.eval("synstack(line('.'), col('.') - (col('.')&gt;=2 ? 1 : 0))") try: first = next( i for i in reversed(synstackids) if i in texIgnoreMathZoneIds or i in texMathZoneIds ) return first != ignore except StopIteration: return False endglobal</code> </pre> <br> 现在，您可以将<code>context "math()"</code>添加到只想在数学上下文中应用的那些片段。 <br><br><pre> <code class="plaintext hljs">context "math()" snippet sr "^2" iA ^2 endsnippet</code> </pre> <br> 请注意，数学上下文是微妙的事情。 有时在公式模式下，我们也使用<code>\text{...}</code>编写文本。 在这种情况下，我们不想使用片段。 但是，在以下情况下： <code>\[ \text{$...$} \]</code> ， <i>必须</i>应用它们。 这就是为什么<code>math</code>上下文的代码不是那么简单。 以下动画说明了这些细微之处。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/3ca/2dd/e1b3ca2dd4fc1f5fe39679fb6ba38aad.gif"><br><br><h3> 即时进行拼写校正 </h3><br> 尽管公式是摘要的重要组成部分，但我大部分时间都是用英语打印的。 每分钟大约80个单词，我的打字技巧非常好，但我经常打错字。 这就是为什么我在Vim上添加了一个绑定，该绑定可以纠正拼写错误而不干扰工作。 在输入过程中<code>Ctrl+L</code>时，先前的拼写错误已得到纠正。 看起来像这样： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d70/568/0add705683b79cb94498104251a6d5b8.gif"><br><br> 我的拼写检查设置： <br><br><pre> <code class="plaintext hljs">setlocal spell set spelllang=nl,en_gb inoremap &lt;Cl&gt; &lt;cg&gt;u&lt;Esc&gt;[s1z=`]a&lt;cg&gt;u</code> </pre> <br> 在这里，转到上一个拼写错误<code>[s</code> ，然后选择第一个选项<code>1z=</code>并返回<code>`]a</code> 。 中间的<code>&lt;cg&gt;u</code>命令可让您快速撤消更正。 <br><br><h3> 总结 </h3><br> 感谢Vim片段，编写LaTeX代码不再烦人，而是一种乐趣。 结合动态拼写，这使您可以方便快捷地概述数学讲座。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在下一篇文章中，我</a>将讨论其他主题，例如以数字方式绘制插图并将其嵌入LaTeX文档中。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN445066/">https://habr.com/ru/post/zh-CN445066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN445056/index.html">Web开发课程概述</a></li>
<li><a href="../zh-CN445058/index.html">特斯拉自动驾驶学习了如何确定相邻汽车的车道变化</a></li>
<li><a href="../zh-CN445060/index.html">使用Spring Data键值存储库组织数据搜索</a></li>
<li><a href="../zh-CN445062/index.html">现代演示格式？</a></li>
<li><a href="../zh-CN445064/index.html">网络中立性之战-回归的机会</a></li>
<li><a href="../zh-CN445070/index.html">291号移动开发人员的有趣材料摘要（3月18日至3月24日）</a></li>
<li><a href="../zh-CN445072/index.html">Telegraff：用于电报的Kotlin DSL</a></li>
<li><a href="../zh-CN445074/index.html">编程LibreOffice Base。 第一部分</a></li>
<li><a href="../zh-CN445076/index.html">IT巨头推出了服务定义的防火墙</a></li>
<li><a href="../zh-CN445078/index.html">量子物理学可能会保护美国的网络免受黑客攻击</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>