<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍨 👨‍👨‍👧‍👦 🤵 Huawei Dorado V6: Panas Sichuan 🎖️ 🖕🏾 🖱️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Musim panas di Moskow tahun ini, jujur ​​saja, tidak terlalu baik. Itu dimulai terlalu dini dan cepat, tidak semua orang berhasil bereaksi, dan itu su...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Huawei Dorado V6: Panas Sichuan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467975/"><p><img src="https://habrastorage.org/webt/yj/u8/io/yju8iodu0czpy6vqf4esj-rbyio.png"><br>  Musim panas di Moskow tahun ini, jujur ​​saja, tidak terlalu baik.  Itu dimulai terlalu dini dan cepat, tidak semua orang berhasil bereaksi, dan itu sudah berakhir pada akhir Juni.  Karena itu, ketika Huawei menyarankan agar saya pergi ke Cina, ke kota Chengdu, tempat pusat RnD mereka berada, sambil melihat ramalan cuaca di +34 derajat di bawah naungan, saya langsung setuju.  Meski begitu, umur saya tidak sama dan tulang saya perlu sedikit dipanaskan.  Tetapi saya ingin mencatat bahwa adalah mungkin untuk menghangatkan tidak hanya tulang, tetapi juga bagian dalam, karena provinsi Sichuan, di mana, pada kenyataannya, Chengdu terkenal dengan kecintaannya pada makanan pedas.  Tapi tetap saja, blog ini bukan tentang perjalanan, jadi kembali ke tujuan utama perjalanan kami - jalur baru sistem penyimpanan - Huawei Dorado V6.  Artikel ini akan sedikit memberi Anda gelombang dari masa lalu, seperti  Itu ditulis sebelum pengumuman resmi, tetapi diterbitkan hanya setelah rilis.  Jadi, hari ini kita melihat segala sesuatu yang menarik dan lezat yang telah disiapkan Huawei untuk kita. </p><a name="habracut"></a><br><p><img src="https://habrastorage.org/webt/tq/ev/b4/tqevb4qfcfc3zadjk1texasfy94.png"><br>  Baris baru akan memiliki 5 model.  Semua model kecuali 3000V6 dapat dalam dua versi - SAS dan NVMe.  Antarmuka disk yang dapat Anda gunakan dalam sistem ini, port back-end dan jumlah disk drive yang dapat Anda instal dalam sistem tergantung pada pilihan.  NVMe menggunakan SSD ukuran Palm, yang lebih tipis dari SSD SAS 2.5 "klasik dan dapat menampung hingga 36 unit.  Baris baru adalah Semua Flash dan tidak ada konfigurasi disk. </p><br><p><img src="https://habrastorage.org/webt/gg/f3/px/ggf3pxgpby4hojmgmepncvwgwli.jpeg"><br>  <i>Palm NVMe SSD</i> </p><br><p>  Menurut pendapat saya, Dorado 8000 dan 18000 tampaknya menjadi model yang paling menarik, Huawei memposisikan mereka sebagai sistem kelas atas, dan karena kebijakan penetapan harga Huawei, ia membedakan model-model Kelas Menengah ini dengan segmen pesaingnya.  Pada model-model inilah saya akan berkonsentrasi hari ini dalam ulasan saya.  Segera, saya perhatikan bahwa karena fitur desainnya, sistem dual-controller yang lebih muda memiliki arsitektur yang sedikit berbeda, berbeda dari Dorado 8000 dan 18000, jadi tidak semua yang akan saya bicarakan hari ini berlaku untuk model yang lebih muda. </p><br><p>  Salah satu fitur utama dari sistem baru adalah penggunaan beberapa chip dari desain mereka sendiri, yang masing-masing memungkinkan untuk membawa beban logis dari prosesor pusat controller dan menambah fungsionalitas ke komponen yang berbeda. <br><img src="https://habrastorage.org/webt/v0/qf/hn/v0qfhnmuwftjqbjywytee5qrypq.png"></p><br><p>  Inti dari sistem baru ini adalah prosesor Kunpeng 920, yang dikembangkan dengan teknologi ARM dan diproduksi secara mandiri oleh Huawei.  Bergantung pada model, jumlah inti bervariasi, frekuensinya dan jumlah prosesor yang dipasang di setiap pengontrol: <br>  Huawei Dorado V6 8000 - 2CPU, 64 inti <br>  Huawei Dorado V6 18000 - 4CPU, 48 inti <br><img src="https://habrastorage.org/webt/ry/dx/i4/rydxi40psrto73xx1dgz78kq_be.png"></p><br><p>  Huawei mengembangkan prosesor ini pada arsitektur ARM, dan sejauh yang saya tahu, awalnya direncanakan untuk menempatkannya hanya pada model Dorado 8000 dan 18000 yang lebih lama, seperti halnya dengan beberapa model V5, tetapi sanksi membuat penyesuaian untuk ide ini.  Tentu saja, ARM juga berbicara tentang penolakan kerja sama dengan Huawei selama pengenaan sanksi, tetapi di sini situasinya berbeda dengan dengan Intel.  Huawei memproduksi chip ini sendiri, dan tidak ada sanksi yang dapat menghentikan proses ini.  Pemutusan hubungan dengan ARM hanya mengancam dengan hilangnya akses ke perkembangan baru.  Adapun kinerja - di sini akan mungkin untuk menilai hanya setelah melakukan tes independen.  Meskipun saya melihat bagaimana 1M IOPS dihapus dari sistem Dorado 18000 tanpa masalah, sampai saya melakukan ini dengan tangan saya sendiri di rak, saya tidak akan percaya.  Tetapi kapasitas di controller benar-benar tidak cukup.  Model lama dilengkapi dengan 4 pengontrol, masing-masing memiliki 4 prosesor yang diinstal, yang memberikan total 768 core. <br><img src="https://habrastorage.org/webt/so/rq/ge/sorqge26yqm7i3j0gl7gm3dyqyo.jpeg"></p><br><p>  Tapi saya akan memberi tahu Anda tentang kernel bahkan nanti, ketika kita melihat arsitektur sistem baru, tetapi untuk sekarang mari kita kembali ke chip lain yang terpasang dalam sistem.  Chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ascend 310</a> terlihat seperti solusi yang sangat menarik (seperti yang saya mengerti, adik lelaki Ascend 910, yang baru-baru ini diperkenalkan ke publik).  Tugasnya adalah untuk menganalisis blok data yang tiba di sistem untuk meningkatkan rasio hit Baca.  Masih sulit untuk mengatakan bagaimana ia akan menunjukkan dirinya dalam pekerjaan, karena  Saat ini ia bekerja hanya sesuai dengan pola yang diberikan dan tidak memiliki kemampuan untuk belajar dalam mode intelektual.  Tampilan mode cerdas dijanjikan dalam firmware di masa depan, kemungkinan besar pada awal tahun depan. </p><br><p>  Mari beralih ke arsitektur.  Huawei terus mengembangkan teknologi Smart Matrix-nya sendiri, yang menerapkan pendekatan jala penuh untuk menghubungkan komponen.  Tetapi jika dalam V5 itu hanya untuk akses dari pengontrol ke disk, sekarang semua pengontrol memiliki akses ke semua port baik di Back-End dan Front-End. <br><img src="https://habrastorage.org/webt/sq/4v/no/sq4vnozkqfimysajqmkepxlnzy0.png"></p><br><p>  Berkat arsitektur microservice baru, ini juga memungkinkan menyeimbangkan beban antara semua pengontrol, bahkan jika hanya ada satu lun.  OS untuk jajaran array ini dikembangkan dari awal, dan tidak hanya dioptimalkan untuk penggunaan Flash-drive.  Karena kenyataan bahwa semua pengontrol memiliki akses ke port yang sama, jika terjadi kegagalan atau reboot pengontrol, tuan rumah tidak kehilangan satu jalur tunggal ke sistem penyimpanan, dan pengalihan jalur dilakukan pada tingkat sistem penyimpanan data.  Pada saat yang sama, penggunaan UltraPath pada host bukan kebutuhan yang ketat.  "Penghematan" lain dalam instalasi sistem adalah sejumlah kecil tautan yang diperlukan.  Dan jika dengan pendekatan "klasik" untuk 4 pengendali kita perlu 8 tautan dari 2 pabrik, maka dalam kasus Huawei genap 2 akan cukup (saya tidak berbicara tentang kecukupan bandwidth satu tautan). <br><img src="https://habrastorage.org/webt/hr/a9/pq/hra9pqgs3u61zday9wnciwxkrcy.png"></p><br><p>  Seperti pada versi sebelumnya, cache global dengan mirroring digunakan.  Ini memungkinkan Anda kehilangan hingga dua kontroler secara bersamaan atau tiga kontroler secara seri tanpa memengaruhi ketersediaan.  Tetapi perlu dicatat bahwa kami tidak melihat penyeimbangan muatan penuh antara 3 pengontrol yang tersisa jika terjadi kegagalan, pada demo stand.  Beban pengontrol yang gagal sepenuhnya diambil alih oleh salah satu yang tersisa.  Ada kemungkinan bahwa untuk ini perlu membiarkan sistem bekerja lebih lama dalam konfigurasi ini.  Bagaimanapun, pada tes saya sendiri saya akan memeriksanya lebih terinci. <br>  Huawei memposisikan sistem baru sebagai sistem NVMe End-to-End, tetapi saat ini frontend NVMeOF belum didukung, hanya FC, iSCSI atau NFS.  Pada akhir ini atau awal berikutnya, seperti chip lainnya, kami dijanjikan dukungan RoCE. <br><img src="https://habrastorage.org/webt/qw/bb/ta/qwbbtadffklr9azbeiuvwerwx-m.png"></p><br><p>  Rak terhubung ke controller dengan cara yang sama menggunakan RoCE, dan ini memiliki satu kelemahan - kurangnya koneksi "loop" dari rak, seperti halnya dengan SAS.  Menurut pendapat saya, sementara ini adalah kelemahan yang cukup besar, jika Anda telah merencanakan sistem yang cukup besar.  Faktanya adalah bahwa semua rak terhubung secara seri, dan kegagalan salah satu rak memerlukan tidak dapat diaksesnya semua yang mengikutinya.  Dalam hal ini, untuk memastikan toleransi kesalahan, kita harus menghubungkan semua rak ke controller, yang memerlukan peningkatan jumlah port backend yang diperlukan dalam sistem. </p><br><p>  Dan satu hal lagi yang perlu disebutkan adalah pembaruan yang tidak mengganggu (NDU).  Seperti yang saya katakan di atas, Huawei telah menerapkan pendekatan wadah dalam mengoperasikan OS untuk jalur Dorado baru, ini memungkinkan memperbarui dan memulai kembali layanan, tanpa perlu reboot penuh controller.  Perlu disebutkan segera bahwa beberapa pembaruan akan berisi pembaruan kernel, dan dalam hal ini reboot klasik dari pengontrol terkadang masih diperlukan saat memperbarui, tetapi tidak selalu.  Ini akan mengurangi tingkat pengaruh operasi ini pada sistem produktif. </p><br><p>  Di gudang kami, sebagian besar array dari NetApp perusahaan.  Oleh karena itu, saya pikir itu akan sangat logis jika saya membuat perbandingan kecil dengan sistem yang saya gunakan untuk bekerja cukup banyak.  Ini bukan upaya untuk menentukan siapa yang lebih baik dan siapa yang lebih buruk atau yang arsitekturnya lebih menguntungkan.  Saya akan mencoba dengan sungguh-sungguh dan tanpa fanatisme untuk membandingkan dua pendekatan berbeda untuk menyelesaikan masalah yang sama dari vendor yang berbeda.  Ya, tentu saja, dalam hal ini, kami akan mempertimbangkan sistem Huawei dalam "teori" dan saya juga akan secara terpisah mencatat momen-momen yang hanya direncanakan untuk diimplementasikan dalam versi firmware mendatang.  Apa plus yang saya lihat saat ini: </p><br><ol><li>  Jumlah drive NVMe yang didukung.  NetApp hari ini memiliki jumlah 288, Huawei tergantung pada model - 1600-6400.  Pada saat yang sama, kapasitas maksimal Huawei yang dapat digunakan adalah 32PBe, seperti sistem NetApp (lebih tepatnya, mereka memiliki 31.64PBe).  Dan ini terlepas dari kenyataan bahwa drive dengan volume yang sama didukung (hingga 15Tb).  Huawei menjelaskan fakta ini sebagai berikut - mereka tidak memiliki kesempatan untuk membuat pendirian yang lebih besar.  Secara teori, mereka tidak memiliki batas volume, tetapi mereka belum bisa menguji fakta ini.  Tetapi perlu dicatat bahwa kemampuan flash drive sangat tinggi saat ini, dan dalam kasus sistem NVMe, kita dihadapkan dengan fakta bahwa 24 drive cukup untuk menggunakan sistem 2-controller top-end.  Dengan demikian, peningkatan lebih lanjut dalam jumlah disk dalam sistem tidak hanya tidak akan memberikan peningkatan kinerja, tetapi juga akan mempengaruhi rasio IOPS / Tb.  Tentu saja, ada baiknya melihat berapa banyak drive yang dapat ditarik oleh sistem 4-controller 8000 dan 16000, karena  kemampuan dan potensi Kunpeng 920 masih belum sepenuhnya jelas. </li><li>  Lun memiliki pemilik di sistem NetApp.  Yaitu  hanya satu pengontrol yang dapat melakukan operasi dengan bulan, sedangkan yang kedua hanya melewati IO sendiri.  Sistem Huawei, sebaliknya, tidak memiliki pemilik dan operasi dengan blok data (kompresi, deduplikasi) dapat dilakukan oleh salah satu pengendali, serta ditulis ke disk. </li><li>  Tidak ada port drop jika terjadi kegagalan salah satu pengendali.  Bagi sebagian orang, momen ini terlihat sangat kritis.  Intinya adalah bahwa beralih di dalam sistem penyimpanan harus lebih cepat daripada di sisi host.  Dan jika dalam kasus NetApp yang sama, dalam praktiknya kami mengungkapkan dekorasi 5 detik ketika menarik keluar controller dan berpindah jalur, maka beralih ke Huawei masih harus berlatih. </li><li>  Tidak perlu me-restart controller selama upgrade.  Saya sangat khawatir tentang hal ini dengan rilis yang lebih sering dari versi baru dan cabang firmware untuk NetApps.  Ya, beberapa pembaruan untuk Huawei masih akan membutuhkan restart, tetapi tidak semua. </li><li>  4 pengendali Huawei untuk harga dua pengendali NetApp.  Seperti yang saya katakan di atas, berkat kebijakan penetapan harga Huawei, Huawei dapat bersaing dengan Mid-range dengan model Hight-end-nya. </li><li>  Kehadiran chip tambahan di pengendali rak dan kartu port, yang berpotensi dimaksudkan untuk meningkatkan efisiensi sistem. </li></ol><br><p>  Kontra dan ketakutan secara umum: </p><br><ol><li>  Koneksi langsung rak ke pengontrol atau kebutuhan untuk sejumlah besar port back-end untuk menghubungkan semua rak ke pengontrol. </li><li>  Arsitektur ARM dan keberadaan sejumlah besar chip - seberapa efisien kerjanya, dan apakah akan ada kinerja yang cukup. </li></ol><br><p>  Sebagian besar ketakutan dan ketakutan akan mampu menghilangkan pengujian sendiri dari baris baru.  Saya berharap bahwa segera setelah rilis mereka akan muncul di Moskow dan akan ada cukup banyak dari mereka untuk dengan cepat mendapatkan satu untuk tes mereka sendiri.  Sejauh ini, kita dapat mengatakan bahwa pendekatan perusahaan secara keseluruhan terlihat menarik, dan lini baru terlihat sangat baik terhadap pesaing.  implementasi akhir menimbulkan banyak pertanyaan, karena  kita akan melihat banyak hal hanya pada akhir tahun, dan mungkin hanya pada tahun 2020. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467975/">https://habr.com/ru/post/id467975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467961/index.html">Masalah dan nuansa saat mengembangkan untuk SmartTV menggunakan React.js</a></li>
<li><a href="../id467965/index.html">Vivaldi 2.8 - Menu, silakan</a></li>
<li><a href="../id467967/index.html">Perendaman dalam jaringan saraf convolutional: transfer learning</a></li>
<li><a href="../id467969/index.html">Presentasi layar modal modal di iOS 13</a></li>
<li><a href="../id467973/index.html">Kelahiran platform</a></li>
<li><a href="../id467977/index.html">Membuat Aplikasi Menggunakan Komponen Bergaya di Vue.js</a></li>
<li><a href="../id467979/index.html">Integrasi iklan: bagaimana cara kerjanya?</a></li>
<li><a href="../id467981/index.html">Anboxing Rack Server Cisco UCS C240 ​​M5</a></li>
<li><a href="../id467987/index.html">Jelly warna-warni yang hidup: pengambilan keputusan di tingkat materi tanpa CPU</a></li>
<li><a href="../id467989/index.html">Cara mendesain unit kontrol suspensi mobil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>