<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฒ ๐ฉ๐ปโ๐คโ๐จ๐ฝ ๐ ุชุทูุฑ ุฌุฏููุฉ ุงูููุงู ๐ผ๐ฟ ๐ฉ๐ผโ๐คโ๐ฉ๐ป ๐ถ๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุทุจูู iFunny ุงูุฐู ูุนูู ุนููู ูุชููุฑ ูู ุงููุชุงุฌุฑ ูุฃูุซุฑ ูู ุฎูุณ ุณููุงุช. ุฎูุงู ูุฐุง ุงูููุช ุ ูุงู ุนูู ุงููุฑูู ุงููุชููู ูุชุงุจุนุฉ ุงูุนุฏูุฏ ูู ุงูุฃุณุงููุจ ูุงููุฌุฑุงุช ุงููุฎุชููุฉ ุจ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทูุฑ ุฌุฏููุฉ ุงูููุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/434680/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bv/mr/ps/bvmrpspwu-kyhojb5tiu4lqbdi8.jpeg"><br><br>  ุชุทุจูู iFunny ุงูุฐู ูุนูู ุนููู ูุชููุฑ ูู ุงููุชุงุฌุฑ ูุฃูุซุฑ ูู ุฎูุณ ุณููุงุช.  ุฎูุงู ูุฐุง ุงูููุช ุ ูุงู ุนูู ุงููุฑูู ุงููุชููู ูุชุงุจุนุฉ ุงูุนุฏูุฏ ูู ุงูุฃุณุงููุจ ูุงููุฌุฑุงุช ุงููุฎุชููุฉ ุจูู ุงูุฃุฏูุงุช ุ ููุจู ุนุงู ูุงู ููุงู ููุช ููุชุจุฏูู ูู ุญู ููุชูุจ ุฐุงุชููุง ูุงูุจุญุซ ูู ุงุชุฌุงู ุดูุก "ุฃูุซุฑ ุดููุนูุง" ูุงูุชุดุงุฑูุง.  ูุฐุง ุงูููุงู ุนุจุงุฑุฉ ุนู ุถุบุท ุตุบูุฑ ุญูู ูุง ุชูุช ุฏุฑุงุณุชู ุ ููุง ูู ุงูุญููู ุงูุชู ุชู ุงููุธุฑ ูููุง ุ ููุง ุงูุฐู ุงูุชูู ุฅููู ุงูุฃูุฑ. <a name="habracut"></a><br><br>  <b>ููุงุฐุง ูุญุชุงุฌ ูู ูุฐุงุ</b> <br><br>  ูููุฑุฑ ุนูู ุงูููุฑ ุชูุฑูููุง ููุงููุฉ ูุฐู ุงูููุงูุฉ ูููุงุฐุง ุชุจูู ุฃู ูุฐุง ุงูููุถูุน ููู ููุฑูู ุชุทููุฑ Android: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงูุณููุงุฑูููุงุช ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชุดุบูู ุงูููุงู ุฎุงุฑุฌ ุฅุทุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุดุทุฉ </li><li style=";text-align:right;direction:rtl">  ููุฑุถ ุงููุธุงู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงููููุฏ ุนูู ุจุฏุก ูุฐู ุงูููุงู ุ </li><li style=";text-align:right;direction:rtl">  ููุฏ ุฃุตุจุญ ูู ุงูุตุนุจ ููุบุงูุฉ ุงูุงุฎุชูุงุฑ ุจูู ุงูุญููู ุงูุญุงููุฉ ุ ุญูุซ ุฃู ูู ุฃุฏุงุฉ ููุง ูุฒุงูุงูุง ูุนููุจูุง. </li></ol><br><h3 style=";text-align:right;direction:rtl">  <b>ุงูุชุณูุณู ุงูุฒููู ูุชุทูุฑ ุงูุฃุญุฏุงุซ</b> </h3><br>  <b>ุฃูุฏุฑููุฏ 0</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  AlarmManager ุ ูุนุงูุฌ ุ ุงูุฎุฏูุฉ </h3><br>  ูู ุงูุจุฏุงูุฉ ุ ุชู ุชูููุฐ ุญููููู ูุจุฏุก ุงูููุงู ุงููุณุชูุฏุฉ ุฅูู ุงูุฎูููุฉ ุนูู ุฃุณุงุณ ุงูุฎุฏูุงุช.  ูุงูุช ููุงู ุฃูุถูุง ุขููุฉ ุชุฑุจุท ุงูููุงู ุจุฏูุฑุฉ ุงูุญูุงุฉ ูุชูููุช ูู ุฅูุบุงุคูุง ูุงุณุชุนุงุฏุชูุง.  ููุงุณุจ ูุฐุง ุงููุฑูู ููุชุฑุฉ ุทูููุฉ ุ ุญูุซ ุฃู ุงูููุตุฉ ูู ุชูุฑุถ ุฃู ูููุฏ ุนูู ูุซู ูุฐู ุงูููุงู. <br>  ุชูุตุญ Google ุจุงูููุงู ุจุฐูู ุจูุงุกู ุนูู ุงููุฎุทุท ุงูุชุงูู: <br><br><img src="https://habrastorage.org/webt/e-/46/zn/e-46znleyxvynpm35pbebgrkdhk.png"><br><br>  ูู ููุงูุฉ ุนุงู 2018 ุ ูุง ููุฌุฏ ุฃู ูุนูู ูููู ุฐูู ุ ูููู ูุชูููู ุญุฌู ุงููุงุฑุซุฉ. <br>  ูู ุงููุงูุน ุ ูู ููุชู ุฃุญุฏ ุจุญุฌู ุงูุนูู ุงูุฐู ูุญุฏุซ ูู ุงูุฎูููุฉ.  ูุนูุช ุงูุชุทุจููุงุช ูุง ุฃุฑุงุฏูุง ูุนูุฏูุง ุฃุฑุงุฏูุง. <br><br>  <i><b>ุงูุงูุฌุงุจูุงุช</b> :</i> <i><br></i>  <i>ูุชุงุญ ูู ูู ููุงู</i> <i><br></i>  <i>ูู ูุชูุงูู ุงูุฌููุน.</i> <i><br><br></i>  <i><b>ุณูุจูุงุช</b> :</i> <i><br></i>  <i>ูููุฏ ุงููุธุงู ุงูุนูู ุจูู ุงูุทุฑู ุ</i> <i><br></i>  <i>ูุง ุชุทูู ูู ูุจู ุงูุดุฑุท.</i> <i><br></i>  <i>ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API) ุถุฆููุฉ ููุบุงูุฉ ูุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.</i> <i><br></i> <br>  <b>ุฃูุฏุฑููุฏ 5. ุงููุตุงุตุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  Jobcheduler </h3><br>  ุจุนุฏ 5 (!) ุณููุงุช ุ ุฃูุฑุจ ุฅูู ุนุงู 2015 ุ ูุงุญุธุช Google ุฃู ุงูููุงู ูุฏ ุชู ุฅุทูุงููุง ุจุดูู ุบูุฑ ูุนุงู.  ุจุฏุฃ ุงููุณุชุฎุฏููู ูุชุฐูุฑูู ุจุงูุชุธุงู ูู ุงูุฎูุงุถ ููุงุชููู ุจุจุณุงุทุฉ ุนู ุทุฑูู ุงูุงุณุชููุงุก ุนูู ุทุงููุฉ ุฃู ูู ุฌูุจูู. <br><br>  ูุน ุฅุตุฏุงุฑ Android 5 ุ ุธูุฑุช ุฃุฏุงุฉ ูุซู JobScheduler.  ูุฐู ูู ุงูุขููุฉ ุงูุชู ูููู ูู ุฎูุงููุง ุชูููุฐ ุงูุนุฏูุฏ ูู ุงูุฃุนูุงู ูู ุงูุฎูููุฉ ุ ูุงูุชู ุชู ุชุญุณูููุง ูุชุจุณูุทูุง ูุธุฑูุง ูููุธุงู ุงููุฑูุฒู ูุฅุทูุงู ูุฐู ุงูููุงู ูุงููุฏุฑุฉ ุนูู ูุถุน ุดุฑูุท ูุนูููุฉ ุงูุฅุทูุงู ูุฐู. <br><br>  ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูู ูุฐุง ูุจุฏู ุจุณูุทูุง ููุบุงูุฉ: ูุชู ุงูุฅุนูุงู ุนู ุฎุฏูุฉ ุชุฃุชู ูููุง ุฃุญุฏุงุซ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ. <br>  ูู ุงููุฑูู ุงูุฏูููุฉ: ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฃุฏุงุก ุงูุนูู ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุจุฏุก ุงูุฏูู ูู onStartJob ุ  ุงูุดูุก ุงูุฑุฆูุณู ูู ุนุฏู ูุณูุงู ุงุณุชุฏุนุงุก ุทุฑููุฉ jobFinished ูู ููุงูุฉ ุงูุนูู ุ ูุฅูุง ููู ูุชุฑู ุงููุธุงู WakeLock ุ ูู ุชุนุชุจุฑ ูููุชู ููุชููุฉ ูุณุชููุฏ. <br><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobSchedulerService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStartJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobParameters params)</span></span></span><span class="hljs-function"> </span></span>{ doWork(params); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStopJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobParameters params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre> <br>  ูู ุฃู ููุงู ูู ุงูุชุทุจูู ุ ููููู ุจุฏุก ูุฐุง ุงูุนูู.  ูุชู ุชูููุฐ ุงูููุงู ูู ุนูููุชูุง ุ ูููู ูุชู ุงูุจุฏุก ุจูุง ุนูู ูุณุชูู IPC.  ููุงู ุขููุฉ ูุฑูุฒูุฉ ุชุชุญูู ูู ุชูููุฐูุง ูุชุณุชููุธ ุงูุชุทุจูู ููุท ูู ุงููุญุธุงุช ุงูุถุฑูุฑูุฉ ูุฐูู.  ููููู ุฃูุถูุง ุถุจุท ุงูุนุฏูุฏ ูู ุดุฑูุท ุงูุชุดุบูู ูููู ุงูุจูุงูุงุช ูู ุฎูุงู Bundle. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">JobInfo task = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JobInfo.Builder(JOB_ID, serviceName) .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED) .setRequiresDeviceIdle(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .setRequiresCharging(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .build(); JobScheduler scheduler = (JobScheduler) context.getSystemService(JOB_SCHEDULER_SERVICE); scheduler.schedule(task);</code> </pre> <br>  ุจุดูู ุนุงู ุ ุจุงูููุงุฑูุฉ ูุน ูุง ุดูุก ุ ูุงู ูุฐุง ุจุงููุนู ุดูุก.  ููู ูุฐู ุงูุขููุฉ ูุชููุฑุฉ ููุท ูุน API 21 ุ ูุนูุฏ ุฅุตุฏุงุฑ Android 5.0 ุณูููู ูู ุงูุบุฑูุจ ุงูุชููู ุนู ุฏุนู ุฌููุน ุงูุฃุฌูุฒุฉ ุงููุฏููุฉ (ููุฏ ูุฑุช 3 ุณููุงุช ุ ููุง ุฒููุง ูุฏุนู ุฃุฑุจุน). <br><br>  <i><b>ุงูุงูุฌุงุจูุงุช</b> :</i> <i><br></i>  <i>ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุจุณูุทุฉ ุ</i> <i><br></i>  <i>ุดุฑูุท ุงูุงุทูุงู.</i> <i><br></i> <br>  <b><i>ุณูุจูุงุช</i></b> : <br>  <s>ูุชุงุญ ุจุฏุกุง ูู API 21</s> <br>  ูู ุงููุงูุน ุ ููุท ูุน API 23 ุ <br>  ูู ุงูุณูู ุฃู ูุฎุทุฆ. <br><br>  <b>ุฃูุฏุฑููุฏ 5. ุงููุตุงุตุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>ูุฏูุฑ ุดุจูุฉ GCM</b> </h3><br>  ุชู ุชูุฏูู ุนุฑุถ ุชูุซููู ูู JobScheduler - ูุฏูุฑ ุดุจูุฉ GCM.  ูุฐู ููุชุจุฉ ุชููุฑ ูุธุงุฆู ููุงุซูุฉ ุ ููููุง ุนููุช ุจุงููุนู ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช 9. ุตุญูุญูุง ุ ููุฏ ุชุทูุจ ุงูุฃูุฑ ุฎุฏูุงุช Google Play ูู ุงูููุงุจู.  ุนูู ูุง ูุจุฏู ุ ูุฅู ุงููุธููุฉ ุงููุงุฒูุฉ ูุชุดุบูู JobScheduler ุ ุจุฏุฃุช ุชูุฏู ููุณ ููุท ูู ุฎูุงู ุฅุตุฏุงุฑ Android ุ ูููู ุฃูุถูุง ุนูู ูุณุชูู GPS.  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุทูุฑู ุงูุฅุทุงุฑ ุบูุฑูุง ุฑุฃููู ุจุณุฑุนุฉ ูุจูุฑุฉ ููุฑุฑูุง ุนุฏู ุฑุจุท ูุณุชูุจููู ุจูุธุงู GPS.  ุดูุฑุง ููู ุนูู ุฐูู. <br><br>  ูู ุดูุก ูุจุฏู ูุชุทุงุจูุฉ ุชูุงูุง.  ููุณ ุงูุฎุฏูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GcmNetworkManagerService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GcmTaskService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRunTask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TaskParams taskParams)</span></span></span><span class="hljs-function"> </span></span>{ doWork(taskParams); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre><br>  ุฅุทูุงู ุงููููุฉ ููุณูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">OneoffTask task = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OneoffTask.Builder() .setService(GcmNetworkManagerService.class) .setTag(TAG) .setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED) .setRequiresCharging(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .build(); GcmNetworkManager mGcmNetworkManager = GcmNetworkManager.getInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); mGcmNetworkManager.schedule(task);</code> </pre> <br>  ูุฐุง ุงูุชุดุงุจู ูู ุงูุนูุงุฑุฉ ุชูููู ุงููุธููุฉ ุงูููุฑูุซุฉ ูุงูุฑุบุจุฉ ูู ุงูุญุตูู ุนูู ุงูุชูุงู ุจุณูุท ุจูู ุงูุฃุฏูุงุช. <br><br>  <i><b>ุงูุงูุฌุงุจูุงุช</b> :</i> <i><br></i>  <i>API ููุงุซูุฉ ู JobScheduler.</i> <i><br></i>  <i>ูุชุงุญ ุจุฏุกุง ูู API 9.</i> <i><br><br></i>  <i><b>ุณูุจูุงุช</b> :</i> <i><br></i>  <i>ูุฌุจ ุฃู ูููู ูุฏูู ุฎุฏูุงุช Google Play</i> <i><br></i>  <i>ูู ุงูุณูู ุฃู ูุฎุทุฆ.</i> <br><br>  <b>ุฃูุฏุฑููุฏ 5. ุงููุตุงุตุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>WakefulBroadcastReceiver</b> </h3><br>  ุจุนุฏ ุฐูู ุ ุณุฃูุชุจ ุจุถุน ูููุงุช ุนู ุฅุญุฏู ุงูุขููุงุช ุงูุฃุณุงุณูุฉ ุงููุณุชุฎุฏูุฉ ูู JobScheduler ููุชุงุญุฉ ูุจุงุดุฑุฉ ูููุทูุฑูู.  ูุฐุง ูู WakeLock ูููุฑู WakefulBroadcastReceiver. <br><br>  ุจุงุณุชุฎุฏุงู WakeLock ุ ููููู ููุน ุงููุธุงู ูู ุชุฑู ุงูุชุนููู ุ ุฃู ุฅุจูุงุก ุงูุฌูุงุฒ ูู ุญุงูุฉ ูุดุทุฉ.  ูุฐุง ุถุฑูุฑู ุฅุฐุง ุฃุฑุฏูุง ุงูููุงู ุจุจุนุถ ุงูุฃุนูุงู ุงููููุฉ. <br>  ุนูุฏ ุฅูุดุงุก WakeLock ุ ููููู ุชุญุฏูุฏ ุฅุนุฏุงุฏุงุชู: ุงุถุบุท ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฃู ุงูุดุงุดุฉ ุฃู ููุญุฉ ุงูููุงุชูุญ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE) PowerManager.WakeLock wl = pm.newWakeLock(PARTIAL_WAKE_LOCK, <span class="hljs-string"><span class="hljs-string">"name"</span></span>) wl.acquire(timeout);</code> </pre> <br>  ุจูุงุกู ุนูู ูุฐู ุงูุขููุฉ ุ ูุนูู WakefulBroadcastReceiver.  ูุจุฏุฃ ุงูุฎุฏูุฉ ูุนูุฏ WakeLock. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleWakefulReceiver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WakefulBroadcastReceiver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ Intent service = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(context, SimpleWakefulService.class); startWakefulService(context, service); } }</code> </pre> <br>  ุจุนุฏ ุงูุชูุงุก ุงูุฎุฏูุฉ ุงููุงุฒูุฉ ูู ุงูุนูู ุ ูุทูููุง ูู ุฎูุงู ุทุฑู ููุงุซูุฉ. <br><br>  ูู ุฎูุงู 4 ุฅุตุฏุงุฑุงุช ุ ุณูุชู ุฅููุงู ุจุฑูุงูุฌ BroadcastReceiver ูุฐุง ุ ูุณูุชู ูุตู ุงูุจุฏุงุฆู ุงูุชุงููุฉ ุนูู developer.android.com: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  JobScheduler </li><li style=";text-align:right;direction:rtl">  Syncadapter </li><li style=";text-align:right;direction:rtl">  DownloadManager </li><li style=";text-align:right;direction:rtl">  FLAG_KEEP_SCREEN_ON ูู Window. </li></ul><br>  <b>ุฃูุฏุฑููุฏ 6. ูุณูู ุนููู</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>DozeMode: ุงูููู ุฃุซูุงุก ุงูุชููู</b> </h3><br>  ุซู ุจุฏุฃุช Google ูู ุชุทุจูู ุชุญุณููุงุช ูุชุนุฏุฏุฉ ููุชุทุจููุงุช ุงูุชู ุชุนูู ุนูู ุงูุฌูุงุฒ.  ูููู ูุง ูู ุงูุฃูุซู ูููุณุชุฎุฏู ูู ูููุฏ ูููุทูุฑ. <br><br>  ูุงูุช ุงูุฎุทูุฉ ุงูุฃููู ูู DozeMode ุ ูุงูุชู ุชุถุน ุงูุฌูุงุฒ ูู ูุถุน ุงูุณููู ุฅุฐุง ูุงู ุฎุงููุงู ููุชุฑุฉ ูุนููุฉ.  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃููู ุ ุงุณุชูุฑุช ุณุงุนุฉ ุ ูู ุงูุฅุตุฏุงุฑุงุช ุงููุงุญูุฉ ุ ุชู ุชุฎููุถ ูุฏุฉ ุงูููู ุฅูู 30 ุฏูููุฉ.  ุจุดูู ุฏูุฑู ุ ูุณุชููุธ ุงููุงุชู ุ ููููู ุจุฌููุน ุงูููุงู ุงููุนููุฉ ูููุงู ูุฑุฉ ุฃุฎุฑู.  ูุงูุฐุฉ DozeMode ุชุชูุณุน ุจุดูู ูุจูุฑ.  ูููู ุชุชุจุน ุฌููุน ุงูุชุญููุงุช ุจูู ูุณุงุฆุท ูู ุฎูุงู ุจูู ุงูุชูููุฉ ุงูุขุณููู. <br><br>  ุนูุฏ ุญุฏูุซ DozeMode ุ ูุชู ูุฑุถ ุงููููุฏ ุงูุชุงููุฉ ุนูู ุงูุชุทุจูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชุฌุงูู ุงููุธุงู ูู WakeLock ุ </li><li style=";text-align:right;direction:rtl">  AlarmManager ุชุฃุฎุฑุช. </li><li style=";text-align:right;direction:rtl">  JobScheduler ูุง ูุนูู ุ </li><li style=";text-align:right;direction:rtl">  SyncAdapter ูุง ูุนูู ุ </li><li style=";text-align:right;direction:rtl">  ุงููุตูู ุฅูู ุงูุดุจูุฉ ูุญุฏูุฏ. </li></ul><br>  ููููู ุฃูุถูุง ุฅุถุงูุฉ ุงูุชุทุจูู ุงูุฎุงุต ุจู ุฅูู ุงููุงุฆูุฉ ุงูุจูุถุงุก ุจุญูุซ ูุง ููุฏุฑุฌ ุชุญุช ูููุฏ DozeMode ุ ููู ุนูู ุงูุฃูู ุชุฌุงููุช Samsung ูุฐู ุงููุงุฆูุฉ ุชูุงููุง. <br><br>  <b>ุฃูุฏุฑููุฏ 6. ูุณูู ุนููู</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>AppStandby: ุงูุชุทุจููุงุช ุบูุฑ ุงููุดุทุฉ</b> </h3><br>  ูุญุฏุฏ ุงููุธุงู ุงูุชุทุจููุงุช ุบูุฑ ุงููุดุทุฉ ูููุฑุถ ุฌููุน ุงููููุฏ ููุณูุง ุนูููุง ูู DozeMode. <br>  ูุชู ุฅุฑุณุงู ุงูุทูุจ ุฅูู ุงูุนุฒูุฉ ุฅุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณ ูุฏููุง ุนูููุฉ ูู ุงูููุฏูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ููุณ ูุฏูู ุฅุดุนุงุฑ ูุดุท ุ </li><li style=";text-align:right;direction:rtl">  ูู ุชุชู ุฅุถุงูุชู ุฅูู ูุงุฆูุฉ ุงูุงุณุชุจุนุงุฏ. </li></ul><br>  <b>ุฃูุฏุฑููุฏ 7. ููุบุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>ุชุญุณููุงุช ุงูุฎูููุฉ.</b>  <b>Svelte</b> </h3><br>  Svelte ูู ูุดุฑูุน ุชุญุงูู Google ูู ุฎูุงูู ุชุญุณูู ุงุณุชููุงู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุนู ุทุฑูู ุงูุชุทุจููุงุช ูุงููุธุงู ููุณู. <br>  ูู Android 7 ุ ุถูู ุฅุทุงุฑ ูุฐุง ุงููุดุฑูุน ุ ุชูุฑุฑ ุฃู ุงูุจุซ ุงูุถููู ููุณ ูุนุงููุง ููุบุงูุฉ ุ ูุธุฑูุง ูุฃู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูุชุทุจููุงุช ูุณุชูุน ุฅูููุง ุ ููููู ุงููุธุงู ูุฏุฑูุง ูุจูุฑูุง ูู ุงูููุงุฑุฏ ุนูุฏ ุญุฏูุซ ูุฐู ุงูุฃุญุฏุงุซ.  ูุฐูู ุ ุชู ุญุธุฑ ุฃููุงุน ุงูุฃุญุฏุงุซ ุงูุชุงููุฉ ููุฅุนูุงู ูู ุงูุจูุงู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  CONNECTIVITY_ACTION ุ </li><li style=";text-align:right;direction:rtl">  ACTION_NEW_PICTURE ุ </li><li style=";text-align:right;direction:rtl">  ACTION_NEW_VIDEO. </li></ul><br>  <b>ุฃูุฏุฑููุฏ 7. ููุบุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>FirebaseJobDispatcher</b> </h3><br>  ูู ุงูููุช ููุณู ุ ุชู ูุดุฑ ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ุฅุทุงุฑ ุนูู ุฅุทูุงู ุงููููุฉ - FirebaseJobDispatcher.  ูู ุงููุงูุน ุ ูุงู GCM NetworkManager ุงูููุชูู ุ ูุงูุฐู ุชู ุชุฑุชูุจู ููููุงู ูุฌุนูู ุฃูุซุฑ ูุฑููุฉ ููููุงู. <br><br>  ุจุตุฑูุง ุ ุจุฏุง ูู ุดูุก ูู ููุณู ุชูุงูุง.  ููุณ ุงูุฎุฏูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobSchedulerService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStartJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobParameters params)</span></span></span><span class="hljs-function"> </span></span>{ doWork(params); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStopJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobParameters params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre> <br>  ุงููุฑู ุงููุญูุฏ ุจููู ูู ุงููุฏุฑุฉ ุนูู ุชุซุจูุช ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุฎุงุต ุจู.  ุงูุณุงุฆู ูู ุงููุฆุฉ ุงูุชู ูุงูุช ูุณุคููุฉ ุนู ุงุณุชุฑุงุชูุฌูุฉ ุฅุทูุงู ุงููููุฉ. <br><br>  ูู ูุชุบูุฑ ุฅุทูุงู ุงูููุงู ููุณูุง ุจูุฑูุฑ ุงูููุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">FirebaseJobDispatcher dispatcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FirebaseJobDispatcher(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GooglePlayDriver(context)); Job task = dispatcher.newJobBuilder() .setService(FirebaseJobDispatcherService.class) .setTag(TAG) .setConstraints(Constraint.ON_UNMETERED_NETWORK, Constraint.DEVICE_IDLE) .build(); dispatcher.mustSchedule(task);</code> </pre><br>  <i><b>ุงูุงูุฌุงุจูุงุช</b> :</i> <i><br></i>  <i>API ููุงุซูุฉ ู JobScheduler.</i> <i><br></i>  <i>ูุชุงุญ ุจุฏุกุง ูู API 9.</i> <i><br><br></i>  <i><b>ุณูุจูุงุช</b> :</i> <i><br></i>  <i>ูุฌุจ ุฃู ูููู ูุฏูู ุฎุฏูุงุช Google Play</i> <i><br></i>  <i>ูู ุงูุณูู ุฃู ูุฎุทุฆ.</i> <i><br></i> <br>  ูุงู ูู ุงููุดุฌุน ุชุซุจูุช ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุฎุงุต ุจู ููุชุฎูุต ูู GPS.  ููุฏ ุจุญุซูุง ุ ูููู ูุฌุฏูุง ูู ุงูููุงูุฉ ูุง ููู: <br><br><img src="https://habrastorage.org/webt/3n/39/ua/3n39uanajermu--vb5qrzgfl8jq.png"><br><br><img src="https://habrastorage.org/webt/zm/rq/i3/zmrqi3pnt_0hx8lcspdy8k6xio8.png"><br><br>  ุชุนุฑู Google ุฐูู ุ ููู ุชุธู ูุฐู ุงูููุงู ููุชูุญุฉ ูุนุฏุฉ ุณููุงุช. <br><br>  <b>ุฃูุฏุฑููุฏ 7. ููุบุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>ูุธููุฉ ุงูุฑูุจูุช ูู Evernote</b> </h3><br>  ูุชูุฌุฉู ูุฐูู ุ ูู ูุชููู ุงููุฌุชูุน ูู ุงููููู ูุธูุฑ ุญู ุนุตุงูู ูู ุดูู ููุชุจุฉ ูู Evernote.  ูู ููู ุงูุญู ุงููุญูุฏ ุ ูููู ูุงู ุงูุญู ูู Evernote ูู ุงูุฐู ูุงู ูุงุฏุฑุงู ุนูู ุชุฑุณูุฎ ููุณู ู "ุงูุงูุฎุฑุงุท ูู ุงููุงุณ". <br><br>  ูู ุงููุงุญูุฉ ุงููุนูุงุฑูุฉ ุ ูุงูุช ูุฐู ุงูููุชุจุฉ ุฃูุซุฑ ููุงุกูุฉ ูู ุณุงุจูุงุชูุง. <br>  ููุฏ ุธูุฑ ุงูููุงู ุงููุณุคูู ุนู ุฅูุดุงุก ุงูููุงู.  ูู ุญุงูุฉ JobScheduler ุ ุชู ุฅูุดุงุคูุง ูู ุฎูุงู ุงูุชูููุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SendLogsJobCreator</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobCreator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">override fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(tag: String)</span></span></span><span class="hljs-function">: Job? </span></span>{ when (tag) { SendLogsJob.TAG -&gt; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SendLogsJob() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> } }</code> </pre> <br>  ููุงู ูุฆุฉ ูููุตูุฉ ุ ููู ุงููููุฉ ููุณูุง.  ูู JobScheduler ุ ุชู ุฅููุงุก ูู ูุฐุง ูู ููุชุงุญ ุฏุงุฎู onStartJob. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SendLogsJob</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Job</span></span></span><span class="hljs-class">() </span></span>{ <span class="hljs-function"><span class="hljs-function">override fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRunJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params: Params)</span></span></span><span class="hljs-function">: Result </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doWork(params) } }</code> </pre> <br>  ุฅุทูุงู ุงูููุงู ูุทุงุจู ุ ูููู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃุญุฏุงุซ ุงูููุฑูุซุฉ ุ ุฃุถุงู Evernote ุฃูุถูุง ููุงูู ุงูุฎุงุตุฉ ุ ูุซู ุจุฏุก ุชุดุบูู ุงูููุงู ุงูููููุฉ ูุงูููุงู ุงููุฑูุฏุฉ ูุงูุชุดุบูู ุฏุงุฎู ุงููุงูุฐุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JobRequest.Builder(JOB_ID) .setRequiresDeviceIdle(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .setRequiresCharging(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .setRequiredNetworkType(JobRequest.NetworkType.UNMETERED) .build() .scheduleAsync();</code> </pre> <br>  <i><b>ุงูุงูุฌุงุจูุงุช</b> :</i> <i><br></i>  <i>API ูุฑูุญุฉ.</i> <i><br></i>  <i>ูุฏุนููุฉ ุนูู ุฌููุน ุงูุฅุตุฏุงุฑุงุช ุ</i> <i><br></i>  <i>ูุง ุชุญุชุงุฌ ุฅูู ุฎุฏูุงุช Google Play.</i> <i><br><br></i>  <i><b>ุณูุจูุงุช</b> :</i> <i><br></i>  <i>ุญู ุงูุทุฑู ุงูุซุงูุซ.</i> <i><br></i> <br>  ุงูุฑุฌุงู ุจูุดุงุท ุฏุนู ููุชุจุชูู.  ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุนุฏุฏ ูููู ูู ุงููุดููุงุช ุงูุญุฑุฌุฉ ุ ุฅูุง ุฃููุง ุนููุช ุนูู ุฌููุน ุงูุฅุตุฏุงุฑุงุช ูุนูู ุฌููุน ุงูุฃุฌูุฒุฉ.  ููุชูุฌุฉ ูุฐูู ุ ุงุฎุชุงุฑ ูุฑูู Android ูุฏููุง ูู ุงูุนุงู ุงููุงุถู ุญูุงู ูู Evernote ุ ูุธุฑูุง ูุฃู ุงูููุชุจุงุช ูู Google ุชูุทุน ุทุจูุฉ ูุจูุฑุฉ ูู ุงูุฃุฌูุฒุฉ ุงูุชู ูุง ูููููุง ุฏุนููุง. <br>  ูู ุงูุฏุงุฎู ุ ุนููุช ุนูู ุญููู ูู Google ุ ูู ุงูุญุงูุงุช ุงููุตูู - ูุน AlarmManager. <br><br>  <b>ุฃูุฏุฑููุฏ 8. ุฃูุฑูู</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>ุญุฏูุฏ ุชูููุฐ ุงูุฎูููุฉ</b> </h3><br>  ุฏุนูุง ูุนูุฏ ุฅูู ุญุฏูุฏูุง.  ูุน ุธููุฑ Android ุงูุฌุฏูุฏ ุ ุธูุฑุช ุชุญุณููุงุช ุฌุฏูุฏุฉ.  ูุฌุฏ ุงูุฑุฌุงู ูู Google ูุดููุฉ ุฃุฎุฑู.  ูุฐู ุงููุฑุฉ ุชุญูู ูู ุดูุก ุฅูู ุงูุฎุฏูุงุช ูุงูุจุซ (ูุนู ุ ูุง ุดูุก ุฌุฏูุฏ). <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <s>startService ุฅุฐุง ุงูุชุทุจููุงุช ูู ุงูุฎูููุฉ</s> </li><li style=";text-align:right;direction:rtl">  <s>ุงูุจุซ ุงูุถููู ูู ุงูุจูุงู</s> </li></ul><br>  ุฃููุงู ุ ุชู ุญุธุฑ ุจุฏุก ุงูุฎุฏูุงุช ูู ุงูุฎูููุฉ.  ูู "ุฅุทุงุฑ ุงููุงููู" ุธูุช ุงูุฎุฏูุงุช ุงูุฃูุงููุฉ ููุท.  ุงูุฎุฏูุงุช ุงูุขู ูููู ุฃู ููุงู ุฃู ูุชู ุฅููุงููุง. <br>  ุงูููุฏ ุงูุซุงูู ูู ููุณ ุงูุจุซ.  ูุฐู ุงููุฑุฉ ุฃุตุจุญ ูู ุงููุญุธูุฑ ุชุณุฌูู ุฌููุน ุงูุจุซ ุงูุถููู ูู ุงูุจูุงู.  ุงูุจุซ ุงูุถููู ูู ุจุซ ุ ููุณ ูุฎุตุตูุง ูุชุทุจูููุง ููุท.  ุนูู ุณุจูู ุงููุซุงู ุ ููุงู ุฅุฌุฑุงุก ACTION_PACKAGE_REPLACED ุ ูููุงู ACTION_MY_PACKAGE_REPLACED.  ูุฐูู ุ ุฃูู ูุงุญุฏ ูู ุถููู. <br><br>  ูููู ูุง ูุฒุงู ูู ุงููููู ุชุณุฌูู ุฃู ุจุซ ูู ุฎูุงู Context.registerBroadcast. <br><br>  <b>ุฃูุฏุฑููุฏ 9. ูุทูุฑุฉ</b> <b><br></b> <h3 style=";text-align:right;direction:rtl">  <b>ุงูุนุงูู</b> </h3><br>  ุนูู ูุฐุง ุงูุชุญุณูู ูุฏ ุชููู ุจุนุฏ.  ุฑุจูุง ุจุฏุฃุช ุงูุฃุฌูุฒุฉ ุชุนูู ุจุณุฑุนุฉ ูุจุฏูุฉ ูู ุญูุซ ุงุณุชููุงู ุงูุทุงูุฉ ุ  ุฑุจูุง ุงุดุชูู ุงููุณุชุฎุฏููู ุฃูู ูู ุฐูู. <br>  ูู Android 9 ุ ุชุนุงูู ูุทูุฑู ุงูุฅุทุงุฑ ุจุฏูุฉ ูุน ุฃุฏุงุฉ ุจุฏุก ุงูููุงู.  ูู ูุญุงููุฉ ูุญู ุฌููุน ุงููุดููุงุช ุงูููุญุฉ ุ ุชู ุชูุฏูู ููุชุจุฉ ุนูู Google I / O ูุจุฏุก ุชุดุบูู ุงูููุงู ุงูุฃุณุงุณูุฉ ูู WorkManager. <br><br>  ุชุญุงูู Google ูุคุฎุฑูุง ุชุดููู ุฑุคูุชูุง ูุจููุฉ ุชุทุจูู Android ูุชููุญ ุงููุทูุฑูู ุงูุฃุฏูุงุช ุงููุงุฒูุฉ ูุฐูู.  ูุฐูู ูุงูุช ููุงู ููููุงุช ูุนูุงุฑูุฉ ูุน LiveData ู ViewModel ู Room.  WorkManager ูุดุจู ุชูููุฉ ูุนูููุฉ ูููุฌูู ูุงููููุฐุฌ. <br><br>  ุฅุฐุง ุชุญุฏุซูุง ุนู ููููุฉ ุชุฑุชูุจ WorkManager ุจุงูุฏุงุฎู ุ ููุง ููุฌุฏ ุชูุฏู ุชูููููุฌู ููู.  ูู ุงููุงูุน ุ ูุฐู ูุฌููุนุฉ ูู ุงูุญููู ุงูุญุงููุฉ: JobScheduler ู FirebaseJobDispatcher ู AlarmManager. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">createBestAvailableBackgroundScheduler</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Scheduler </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createBestAvailableBackgroundScheduler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context, WorkManager)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &gt;= MIN_JOB_SCHEDULER_API_LEVEL) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemJobScheduler(context, workManager); } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tryCreateFirebaseJobScheduler(context); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemAlarmScheduler(context); } }</code> </pre> <br></div></div><br>  ุฑูุฒ ุงูุงุฎุชูุงุฑ ุจุณูุท ุฌุฏุง.  ูููู ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู JobScheduler ูุชุงุญ ุจุฏุกูุง ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช 21 ุ ููููู ูุณุชุฎุฏููููุง ููุท ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช 23 ุ ูุธุฑูุง ูุฃู ุงูุฅุตุฏุงุฑุงุช ุงูุฃููู ูุงูุช ุบูุฑ ูุณุชูุฑุฉ ุฅูู ุญุฏ ูุง. <br><br>  ุฅุฐุง ูุงู ุงูุฅุตุฏุงุฑ ุฃูู ูู 23 ุ ููู ุฎูุงู ุงูุงูุนูุงุณ ูุญุงูู ุงูุนุซูุฑ ุนูู FirebaseJobDispatcher ุ ูุฅูุง ูุฅููุง ูุณุชุฎุฏู AlarmManager. <br><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงููุฌูุน ุฃุตุจุญ ูุฑูุง ููุบุงูุฉ.  ูุฐู ุงููุฑุฉ ุ ูุงู ุงููุทูุฑูู ุจุชูุณูู ูู ุดูุก ุฅูู ููุงูุงุช ูููุตูุฉ ุ ููุจุฏู ูุนูุงุฑูุงู ุฃูู ููุงุณุจ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุนุงูู - ููุทู ุงูุนูู ุ </li><li style=";text-align:right;direction:rtl">  WorkRequest - ููุทู ุฅุทูุงู ุงููููุฉ ุ </li><li style=";text-align:right;direction:rtl">  WorkRequest.Builder - ุงููุนููุงุช ุ </li><li style=";text-align:right;direction:rtl">  ุงููููุฏ - ุงูุธุฑูู ุ </li><li style=";text-align:right;direction:rtl">  WorkManager - ูุฏูุฑ ูุฏูุฑ ุงูููุงู ุ </li><li style=";text-align:right;direction:rtl">  WorkStatus - ุญุงูุฉ ุงููููุฉ. </li></ul><br><br><img src="https://habrastorage.org/webt/n_/ts/xi/n_tsxiw0wsxv6a5abotzdzokcba.png"><br><br>  ุชู ุชูุฑูุซ ุดุฑูุท ุงูุชุดุบูู ูู JobScheduler. <br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงููุดุบู ูุชุบููุฑ URI ูุธูุฑ ููุท ูุน API 23. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููููู ุงูุงุดุชุฑุงู ูู ุชุบููุฑ ููุณ ููุท URI ูุนูู ุ ูููู ุฃูุถูุง ูู ุงููุชุฏุงุฎูุฉ ููู ุจุงุณุชุฎุฏุงู ุงูุนูุงูุฉ ูู ุงูุทุฑููุฉ. <br><br>  ุฅุฐุง ุชุญุฏุซูุง ุนูุง ุ ุซู ูู ูุฑุญูุฉ ุฃููุง ุ ููุฏ ุชูุฑุฑ ุงูุชุจุฏูู ุฅูู WorkManager. <br>  ููุงู ุนุฏุฉ ุฃุณุจุงุจ ูุฐูู.  ูุญุชูู Evernote ุนูู ุจุนุถ ุงูุฃุฎุทุงุก ุงููุงูุฉ ุงูุชู ูุนุฏ ูุทูุฑู ุงูููุชุจุฉ ุจุฅุตูุงุญูุง ูุน ุงูุงูุชูุงู ุฅูู ุฅุตุฏุงุฑ ูุน WorkManager ูุชูุงูู.  ููู ุฃููุณูู ูุชูููู ุนูู ุฃู ูุฑุงุฑ Google ูููู ูุฒุงูุง Evernote.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุชูุงุณุจ ูุฐุง ุงูุญู ูุน ูููููุง ุ ุญูุซ ูุณุชุฎุฏู ููููุงุช ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุฃูุฏ ุฃู ุฃูุถุญ ูุน ูุซุงู ุจุณูุท ููู ูุญุงูู ุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ.  ูู ุงูููุช ููุณู ุ ููุณ ูู ุงูุฃูููุฉ ุจููุงู ุฃู ูููู ูุฏูู WorkManager ุฃู JobScheduler. <br><br><img src="https://habrastorage.org/webt/ox/yd/0p/oxyd0pizr6h8tx4egaz_kub5wqy.png" width="300" height="430"><img src="https://habrastorage.org/webt/6m/ec/hd/6mechdqawzamahgaij7df-isocg.png" width="300" height="430"><br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ูุญุงูุฉ ุจุณูุทุฉ ููุบุงูุฉ: ุงูููุฑ ุนูู ุฅุนุงุฏุฉ ุงููุดุฑ ุฃู ูุง ุดุงุจู. <br><br>  ุชุญุงูู ุฌููุน ุงูุชุทุจููุงุช ุงูุขู ุงูุงุจุชุนุงุฏ ุนู ุญุธุฑ ุงูุทูุจุงุช ุนูู ุงูุดุจูุฉ ุ ูุฃู ูุฐุง ูุฌุนู ุงููุณุชุฎุฏู ูุดุนุฑ ุจุงูุชูุชุฑ ููุฌุนูู ููุชุธุฑ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูู ุงูููุช ุงูุญุงูู ููููู ุฅุฌุฑุงุก ุนูููุงุช ุดุฑุงุก ุฏุงุฎู ุงูุชุทุจูู ุฃู ูุดุงูุฏุฉ ุงูุฅุนูุงูุงุช. <br><br>  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ุชุชุบูุฑ ุงูุจูุงูุงุช ุงููุญููุฉ ุฃููุงู - ูุฑู ุงููุณุชุฎุฏู ุนูู ุงูููุฑ ูุชูุฌุฉ ุชุตุฑูู.  ุซู ูู ุงูุฎูููุฉ ููุฌุฏ ุทูุจ ููุฎุงุฏู ุ ุฅุฐุง ูุดู ุ ุชุชู ุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช ุฅูู ุญุงูุชูุง ุงูุฃูููุฉ. <br><br>  ุจุนุฏ ุฐูู ุ ุณุฃุนุฑุถ ูุซุงูุงู ุนู ููู ูุจุฏู ูุนูุง. <br><br>  JobRunner ูุญุชูู ุนูู ููุทู ูุจุฏุก ุงูููุงู.  ุฃุณุงููุจู ุชุตู ุชูููู ุงูููุงู ูุชูุฑูุฑ ุงููุนููุงุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">JobRunner.java</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">likePost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(content: IFunnyContent)</span></span></span><span class="hljs-function"> </span></span>{ val constraints = Constraints.Builder() .setRequiredNetworkType(NetworkType.CONNECTED) .build() val input = Data.Builder() .putString(LikeContentJob.ID, content.id) .build() val request = OneTimeWorkRequest.Builder(LikeContentJob::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setInputData</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">input</span></span></span><span class="hljs-class">) .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setConstraints</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constraints</span></span></span><span class="hljs-class">) .</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">build</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WorkManager</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getInstance</span></span></span><span class="hljs-class">().</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">enqueue</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">request</span></span></span><span class="hljs-class">) }</span></span></code> </pre><br></div></div><br>  ุงููููุฉ ููุณูุง ุฏุงุฎู WorkManager ูู ููุง ููู: ูุฃุฎุฐ ุงููุนุฑูู ูู ุงููุนููุงุช ููุณุชุฏุนู ุงูุทุฑููุฉ ุนูู ุงูุฎุงุฏู ูุชุนุฌุจ ูุฐุง ุงููุญุชูู. <br><br>  ูุฏููุง ูุฆุฉ ุฃุณุงุณูุฉ ุชุญุชูู ุนูู ุงูููุทู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseJob</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Worker</span></span></span><span class="hljs-class">() </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> override fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doWork</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: Result </span></span>{ val workerInjector = WorkerInjectorProvider.injector() workerInjector.inject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> performJob(inputData) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params: Data)</span></span></span><span class="hljs-function">: Result }</span></span></code> </pre><br>  ุฃููุงู ุ ูุชูุญ ูู ุงูุงุจุชุนุงุฏ ููููุงู ุนู ุงููุนุฑูุฉ ุงููุงุถุญุฉ ููุนุงูู.  ููุง ุฃูู ูุญุชูู ุนูู ููุทู ุญูู ุงูุชุจุนูุฉ ูู ุฎูุงู WorkerInjector. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">WorkerInjectorImpl.java</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Singleton</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WorkerInjectorImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WorkerInjector</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WorkerInjectorImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Ovierride</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Worker job)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (worker <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> AppCrashedEventSendJob) { Injector.getAppComponent().inject((AppCrashedEventSendJob) job); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (worker <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> CheckNativeCrashesJob) { Injector.getAppComponent().inject((CheckNativeCrashesJob) job); } } }</code> </pre><br></div></div><br>  ุฅูู ุจุจุณุงุทุฉ ููุฌู ุงูููุงููุงุช ุฅูู Dagger ุ ูููู ูุณุงุนุฏูุง ูู ุงูุงุฎุชุจุงุฑ: ูุญู ูุญู ูุญู ุชุทุจููุงุช ุงูุญุงูู ููููุฐ ุงูุจูุฆุฉ ุงููุงุฒูุฉ ูู ุงูููุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">fun </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testRegisterPushProvider</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ WorkManagerTestInitHelper.initializeTestWorkManager(context) val testDriver = WorkManagerTestInitHelper.getTestDriver() WorkerInjectorProvider.setInjector(TestInjector()) <span class="hljs-comment"><span class="hljs-comment">// mock dependencies val id = jobRunner.runPushRegisterJob() testDriver.setAllConstraintsMet(id) Assert.assertTrue(โฆ) }</span></span></code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LikePostInteractor</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Inject</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constructor</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iFunnyContentDao</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IFunnyContentDao</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jobRunner</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JobRunner</span></span></span><span class="hljs-class">) : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interactor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ iFunnyContentDao.like(getContent().id) jobRunner.likePost(getContent()) } }</code> </pre> <br>  Interactor ูู ุงูููุงู ุงูุฐู ูุณุญุจ ViewController ูุจุฏุก ูุฑูุฑ ุงูุจุฑูุงูุฌ ุงููุตู (ูู ูุฐู ุงูุญุงูุฉ ุ ูุซูู).  ูุถุน ุนูุงูุฉ ุนูู ุงููุญุชูู ูุญูููุง ุนูู ุฃูู "ุชู ุงูุฑูุน" ููุฑุณู ุงููููุฉ ููุชูููุฐ.  ุฅุฐุง ูุดูุช ุงููููุฉ ุ ุชุชู ุฅุฒุงูุฉ ูุซู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IFunnyContentViewModel</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iFunnyContentDao</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IFunnyContentDao</span></span></span><span class="hljs-class">) : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModel</span></span></span><span class="hljs-class">() </span></span>{ val likeState = MediatorLiveData&lt;Boolean&gt;() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iFunnyContentId = MutableLiveData&lt;String&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iFunnyContentState: LiveData&lt;IFunnyContent&gt; = attachLiveDataToContentId(); init { likeState.addSource(iFunnyContentState) { likeState.postValue(it!!.hasLike) } } }</code> </pre> <br>  ูุญู ูุณุชุฎุฏู ููููุงุช ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูู Google: ViewModel ู LiveData.  ูุฐุง ูู ูุง ูุดุจู ViewModel ูุฏููุง.  ูุญู ููุง ูุฑุจุท ุชุญุฏูุซ ุงููุงุฆู ูู DAO ุจุญุงูุฉ ุงูุฅุนุฌุงุจ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">IFunnyContentViewController.java</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IFunnyContentViewController</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Inject</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constructor</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">likePostInteractor</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LikePostInteractor</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">viewModel</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IFunnyContentViewModel</span></span></span><span class="hljs-class">) : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">override fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attach</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: View)</span></span></span><span class="hljs-function"> </span></span>{ viewModel.likeState.observe(lifecycleOwner, { updateLikeView(it!!) }) } <span class="hljs-function"><span class="hljs-function">fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onLikePost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ likePostInteractor.setContent(getContent()) likePostInteractor.execute() } }</code> </pre> <br></div></div><br>  ViewController ุ ูู ูุงุญูุฉ ุ ุชุดุชุฑู ูู ุชุบููุฑ ุญุงูุฉ ูุง ุดุงุจู ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุจุฏุฃ ูุฑูุฑ ุงููุต ุงูุฐู ูุญุชุงุฌู. <br><br>  ููุฐุง ุนูููุง ูู ุงูููุฏ ุงูุฐู ูุญุชุงุฌู.  ูุจูู ูุฅุถุงูุฉ ุณููู ุงูุนุฑุถ ููุณู ูุน ูุง ุดุงุจู ูุชูููุฐ DAO ุงูุฎุงุต ุจู ุ  ุฅุฐุง ููุช ุชุณุชุฎุฏู Room ุ ููู ููุท ุจุชุณุฌูู ุงูุญููู ูู ุงููุงุฆู.  ูุจุฏู ุจุณูุท ุฌุฏุง ููุนุงูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  <b>ูุชูุฎูุต</b> </h3><br>  <b>JobScheduler ุ ูุฏูุฑ ุดุจูุฉ GCM ุ FirebaseJobDispatcher:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ุชุณุชุฎุฏููุง </li><li style=";text-align:right;direction:rtl">  ูุง ุชูุฑุฃ ููุงูุงุช ุนููุง ุจุนุฏ ุงูุขู </li><li style=";text-align:right;direction:rtl">  ูุง ุชุดุงูุฏ ุงูุชูุงุฑูุฑ </li><li style=";text-align:right;direction:rtl">  ูุง ุฃุนุชูุฏ ุฃู ูุงุญุฏ ููุงุฎุชูุงุฑ. </li></ul><br>  <b>ูุธููุฉ Android ุจูุงุณุทุฉ Evernote:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฏุงุฎู ุณูู ูุณุชุฎุฏููู WorkManager. </li><li style=";text-align:right;direction:rtl">  ุงูุฃุฎุทุงุก ุงูุญุฑุฌุฉ ุบูุฑ ูุงุถุญุฉ ุจูู ุงูุญููู. </li></ul><br>  <b>ูุฏูุฑ ุงูุนูู:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงููุณุชูู 9+ ุ </li><li style=";text-align:right;direction:rtl">  ูุณุชููุฉ ุนู ุฎุฏูุงุช Google Play ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุณูุณู / InputMergers. </li><li style=";text-align:right;direction:rtl">  ููุฌ ุฑุฏ ุงููุนู. </li><li style=";text-align:right;direction:rtl">  ุงูุฏุนู ูู ุฌูุฌู (ุฃุฑูุฏ ุฃู ุฃุตุฏู ุฐูู). </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar434680/">https://habr.com/ru/post/ar434680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar434670/index.html">Habrapost ุงูุชูุงุฑูุฑ ุงูุณูููุฉ - 2018</a></li>
<li><a href="../ar434672/index.html">Fintech Digest: ุงูููุชุฌุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ ูู ุนุงู 2018 ุ ุฃู ูุถุงุนูุฉ ุญุฌู ุงูุชุญูููุงุช ูู ุจุทุงูุฉ ุฅูู ุฃุฎุฑู ุ ูุถุฑูุจุฉ ุนูู ุงูุนููุฉ ุงููุดูุฑุฉ</a></li>
<li><a href="../ar434674/index.html">ูุฑุฏ ุนูู ุชุฎุฑูุจ ุงููุงุจูุงุช ุจุณุฑุนุฉ ุ ูู ูู ููุงู ูุจุฏูู ูุตุงุฆุฏ ุฌุณุฏูุฉ</a></li>
<li><a href="../ar434676/index.html">TOP-10 - ูุงุฐุง ุชุชุนูู ูู ุนุงู 2019</a></li>
<li><a href="../ar434678/index.html">ุตุจุงุญ ุงููุณุคูู: ุฅุถุงูุฉ ูุณุงุญุฉ ุนูู ุงูุนุดุฑุงุช ูู ุฎูุงุฏู ุงููููุฉ</a></li>
<li><a href="../ar434682/index.html">ุดุฎุตูุฉ ูุฏููุฉ Teleportator</a></li>
<li><a href="../ar434684/index.html">ุงูุตุฏุฃ 2019 ููุง ุจุนุฏู: ูููุฏ ุงูููู</a></li>
<li><a href="../ar434686/index.html">ุฏูุฑุฉ ูุญุงุถุฑุฉ ูู JavaScript ู Node.js ูู KPI</a></li>
<li><a href="../ar434688/index.html">FreeBSD ุชุฎุทุท ููุชุจุฏูู ุฅูู ZFSonLinux</a></li>
<li><a href="../ar434690/index.html">ูุธุงู ุงูุชุดุบูู Haiku: ุชุฑููุฉ ุงูุชุทุจููุงุช ูุฅูุดุงุก ุงูุญุฒู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>