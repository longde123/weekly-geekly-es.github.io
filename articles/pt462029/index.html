<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¢ üëï üç∫ 19 recursos √∫teis do arquivo .htaccess üë®üèº‚Äçüî¨ ü•ñ üîò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aposto que voc√™ n√£o tinha conhecimento de alguns. Reunimos aplicativos .htaccess para melhorar o site. Geralmente, √© usado pelos otimizadores para con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>19 recursos √∫teis do arquivo .htaccess</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/promopult/blog/462029/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/j1/7v/fpj17vbejxqjouncivragbm2t5m.jpeg" alt="19 recursos √∫teis do arquivo .htaccess"></div><br><br><p>  Aposto que voc√™ n√£o tinha conhecimento de alguns.  Reunimos aplicativos .htaccess para melhorar o site.  Geralmente, √© usado pelos otimizadores para configurar corretamente os redirecionamentos 301.  Mas as possibilidades do arquivo n√£o se limitam a isso.  Aqui, seguran√ßa, otimiza√ß√£o e configura√ß√µes de exibi√ß√£o - usando .htaccess, o webmaster pode fazer muitas coisas √∫teis para fazer o site funcionar corretamente. </p><a name="habracut"></a><br><p>  O arquivo .htaccess (abrevia√ß√£o de "acesso ao hipertexto") substitui as configura√ß√µes do tipo mais popular de servidor da web Apache e de seus an√°logos.  Abaixo est√£o algumas maneiras de usar o .htaccess para diferentes finalidades, com exemplos de c√≥digo. </p><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do do artigo</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por que. Htaccess √© necess√°rio e onde procur√°-lo</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sintaxe .htaccess</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configurar redirecionamentos para SEO</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fornecemos seguran√ßa no site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Personalize a exibi√ß√£o do site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Otimizamos o site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mais algumas possibilidades</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Regras gerais de .htaccess</a> <br></div></div><br><a name="id1"></a><h2>  Por que. Htaccess √© necess√°rio e onde procur√°-lo </h2><br><p>  O arquivo √© necess√°rio para configura√ß√µes mais flex√≠veis do servidor para tarefas do otimizador.  N√£o vale a pena definir regras em .htaccess se voc√™ tiver acesso ao arquivo de configura√ß√£o principal do servidor .httpd.conf ou apache.conf (o nome depende das configura√ß√µes do sistema operacional).  As altera√ß√µes s√£o mais r√°pidas, as solicita√ß√µes n√£o sobrecarregam o servidor.  No entanto, muitas vezes n√£o existe esse acesso, por exemplo, no caso de hospedagem compartilhada.  Ent√£o voc√™ deve registrar as configura√ß√µes necess√°rias atrav√©s do .htaccess. </p><br><p>  Apresenta .htaccess para otimiza√ß√£o do site: </p><br><ul><li>  Configurando redirecionamentos para SEO. </li><li>  Garantir a seguran√ßa do recurso como um todo e se√ß√µes individuais. </li><li>  Definindo a exibi√ß√£o correta do site. </li><li>  Otimiza√ß√£o de velocidade de download. </li></ul><br><h3>  Onde procurar e como editar </h3><br><p>  Se o arquivo .htaccess estiver na pasta raiz, a a√ß√£o do comando se estender√° a todo o site, mas voc√™ poder√° coloc√°-lo em qualquer diret√≥rio.  Em seguida, as diretivas dir√£o respeito apenas a um diret√≥rio e subdiret√≥rios espec√≠ficos.  Assim, um recurso pode ter v√°rios arquivos .htaccess.  √â dada prioridade aos comandos do arquivo localizado no diret√≥rio, e n√£o na raiz. </p><br><p>  .htaccess √© o nome geralmente aceito e mais popular, mas n√£o √© obrigat√≥rio (√© especificado no arquivo httpd.conf).  Apesar do nome incomum, voc√™ pode criar e editar o arquivo em qualquer editor de texto. </p><br><p>  Alguns CMS oferecem a capacidade de editar o arquivo atrav√©s do painel administrativo.  No Bitrix, ele pode ser facilmente encontrado na se√ß√£o Conte√∫do - Arquivos e Pastas: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1_/2f/vc/1_2fvcz6ltpvxfcnlxvi9gwi94u.png" alt="19 recursos √∫teis do arquivo .htaccess"></div><br><br><p>  No WordPress, voc√™ pode editar .htaccess usando os m√≥dulos de plug-in Yoast SEO e All in One SEO Pack. </p><br><p>  Se o arquivo .htaccess estiver ausente, crie-o em um editor de texto e coloque-o na pasta raiz do site ou no diret√≥rio desejado (voc√™ precisar√° acessar a hospedagem ou via ftp). </p><br><a name="id2"></a><h2>  Sintaxe .htaccess </h2><br><p>  A sintaxe do arquivo √© simples: cada diretiva (comando) inicia em uma nova linha, ap√≥s o sinal #, voc√™ pode adicionar coment√°rios que n√£o ser√£o levados em considera√ß√£o pelo servidor.  As altera√ß√µes no site entram em vigor imediatamente; a reinicializa√ß√£o do servidor n√£o √© necess√°ria. </p><br><p>  As regras s√£o definidas, incluindo o uso de express√µes regulares.  Para l√™-los, voc√™ precisa entender o significado de caracteres e vari√°veis ‚Äã‚Äãespeciais.  Descriptografe o mais usado. </p><br><h3>  Os principais caracteres especiais: </h3><br><ul><li>  ^ - in√≠cio da linha; </li><li>  $ - fim de linha; </li><li>  .  - qualquer personagem; </li><li>  * - qualquer n√∫mero de caracteres; </li><li> ?  - um caractere espec√≠fico; </li><li>  [0-9] √© uma sequ√™ncia de caracteres, por exemplo, de 0 a 9; </li><li>  |  - s√≠mbolo ‚Äúou‚Äù, um grupo ou outro √© selecionado; </li><li>  () - usado para selecionar grupos de caracteres. </li></ul><br><h3>  As principais vari√°veis ‚Äã‚Äãs√£o: </h3><br><ul><li>  % {HTTP_USER_AGENT} - campo User-Agent, que √© transmitido pelo navegador do usu√°rio; </li><li>  % {REMOTE_ADDR} - endere√ßo IP do usu√°rio; </li><li>  % {REQUEST_URI} - o URI solicitado; </li><li>  % {QUERY_STRING} - consulta par√¢metros ap√≥s o sinal? </li></ul><br><p>  Para aqueles que desejam aprofundar-se no t√≥pico - a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://">documenta√ß√£o</a> oficial completa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://">sobre o uso de .htaccess</a> ou um bom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurso em russo</a> .  E analisaremos os principais recursos do arquivo para otimizar seu site. </p><br><a name="id3"></a><h2>  Configurar redirecionamentos para SEO </h2><br><p>  Como mencionamos, esta √© a maneira mais popular de usar .htaccess.  Antes de configurar esse ou aquele tipo de encaminhamento de chamadas, verifique se √© realmente necess√°rio.  Por exemplo, um redirecionamento para p√°ginas com uma barra √© configurado por padr√£o em alguns CMS.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Escrevemos</a> sobre as configura√ß√µes de redirecionamento para SEO <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no blog</a> . </p><br><h3>  Ao configurar os redirecionamentos 301, lembre-se de duas regras: </h3><br><ol><li>  Evite v√°rios redirecionamentos consecutivos - eles aumentam a carga no servidor e reduzem a velocidade do site. </li><li>  Coloque redirecionamentos de privado para global.  Por exemplo, primeiro redirecione de uma p√°gina para outra, depois um redirecionamento geral para p√°ginas com uma barra.  Essa regra n√£o funciona em 100% dos casos, portanto, voc√™ precisa experimentar o posicionamento de diretivas. </li></ol><br><h3>  1. Configure os redirecionamentos da p√°gina 301 </h3><br><p>  Isso ser√° necess√°rio nos seguintes casos: </p><br><ul><li>  a estrutura do site mudou e o n√≠vel de aninhamento da p√°gina mudou; </li><li>  a p√°gina deixou de existir, mas √© necess√°rio preservar o tr√°fego recebido (por exemplo, na aus√™ncia de mercadorias, elas geralmente redirecionam para a categoria de produto); </li><li>  URL alterado, o que √© extremamente indesej√°vel, mas tamb√©m encontrado. </li></ul><br><p>  Apenas excluir a p√°gina √© uma m√° id√©ia, √© melhor n√£o dar ao rob√¥ um erro 404, mas redirecion√°-lo para outro URL.  Nesse caso, h√° uma chance de n√£o perder a posi√ß√£o do site na emiss√£o e no tr√°fego direcionado.  Voc√™ pode configurar os redirecionamentos 301 de uma p√°gina para outra usando a <strong>diretiva de redirecionamento simples</strong> : </p><br><p></p><pre><code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">Redirect</span></span> 301 /page1/ https://mysite.com/page2/</code> </pre> <br><ul><li>  <code>/page1/</code> - endere√ßo da p√°gina da raiz, sem protocolo e dom√≠nio.  Por exemplo, <code>/catalog/ofisnaya-mebel/kompjuternye-stoly/</code> . </li><li>  <code>https://mysite.com/page2/</code> - endere√ßo completo da p√°gina de redirecionamento, incluindo protocolo e dom√≠nio.  Por exemplo, <code>https://dom-mebeli.com/ofisnaya-mebel/stoly-v-ofis/</code> . </li></ul><br><h3>  2. Livre-se das tomadas </h3><br><p>  Cada p√°gina do site deve estar acess√≠vel em apenas um endere√ßo.  Para fazer isso, o seguinte deve ser configurado: </p><br><ul><li>  redirecionar para p√°ginas com uma barra no final do URL ou vice-versa; </li><li>  O espelho principal √© o endere√ßo do site principal na pesquisa. </li></ul><br><p>  Isso pode ser feito usando o m√≥dulo <code>mod_rewrite</code> .  Ele usa comandos especiais - <strong>diretivas de redirecionamento complexas</strong> .  O primeiro comando √© sempre ativar a convers√£o de URL: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span></code> </pre> <br><h4>  Encaminhar para barra ou vice-versa </h4><br><p>  Se voc√™ deseja redirecionar para p√°ginas com ou sem barra, em cada caso, voc√™ precisa decidir individualmente.  Se o site j√° acumulou um hist√≥rico na pesquisa, analise quais p√°ginas no √≠ndice s√£o maiores.  Para novos sites, eles geralmente configuram um redirecionamento para uma barra.  Verificar se o redirecionamento n√£o est√° configurado por padr√£o √© simples: remova / adicione uma barra no final da URL.  Se a p√°gina recarregar com um novo endere√ßo - temos duplicatas, √© necess√°ria configura√ß√£o.  Se o URL for substitu√≠do, tudo estar√° em ordem.  √â melhor verificar v√°rios n√≠veis de aninhamento. </p><br><h4>  O c√≥digo 301 redireciona para uma barra: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> /+[^\.]+$ RewriteRule ^(.+[^/])$ <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span>/<span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><h4>  O c√≥digo 301 redireciona para p√°ginas sem uma barra: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\? RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\&amp; RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\= RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\. RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> ![^\/]$ RewriteRule ^(.*)\/$ /<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><h3>  3. Configure o espelho principal </h3><br><p>  Primeiro, voc√™ precisa decidir qual endere√ßo ser√° o principal da pesquisa.  O certificado SSL h√° muito tempo √© um cabe√ßalho.  Basta instal√°-lo e adicionar a regra em .htaccess.  Lembre-se de registr√°-lo no robots.txt tamb√©m. </p><br><h4>  Redirecionamento HTTPS </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTPS}</span></span> !<span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteRule (.*) https://<span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span><span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span></code> </pre> <br><p>  Existem v√°rias maneiras de determinar se o espelho principal estar√° ou n√£o com "www": </p><br><ul><li>  adicione um site ao Yandex.Webmaster em duas vers√µes, o console exibe informa√ß√µes sobre qual URL o mecanismo de pesquisa considera o espelho principal; </li><li>  analise a emiss√£o e veja quais p√°ginas do site est√£o mais no √≠ndice; </li><li>  n√£o importa para um novo recurso, com ou sem www haver√° um endere√ßo, a escolha √© sua. </li></ul><br><p>  Ap√≥s a escolha, use uma das duas op√ß√µes de c√≥digo. </p><br><h4>  Redirecionar de www para sem www </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> ^www\.(.*)$<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*)$ http://%1/$1 [R=301,L]</span></span></code> </pre> <br><h4>  Redirecionar sem www para www </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> !^www\..*<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [R=301]</span></span></code> </pre> <br><h3>  4. Redirecionamos de um dom√≠nio para outro </h3><br><p>  O motivo mais √≥bvio para configurar esse redirecionamento √© redirecionar rob√¥s e usu√°rios para um endere√ßo diferente quando o site se move para um novo dom√≠nio.  Al√©m disso, os otimizadores o utilizam para manipular a massa de refer√™ncia, mas os dom√≠nios descartados e o PBN s√£o tecnologias de promo√ß√£o cinza que n√£o abordaremos neste material. </p><br><p>  <strong>Use uma das op√ß√µes de c√≥digo:</strong> </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteRule ^(.*)$ http://www.mysite2.com/<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><p>  <strong>ou</strong> </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> ^www\.mysite1\.ru$<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*)$ http://www.mysite2.ru/$1 [R=301,L]</span></span></code> </pre> <br><p>  N√£o se esque√ßa de alterar "mysite1" e "mysite2" no c√≥digo para o dom√≠nio antigo e o novo, respectivamente. </p><br><blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">M√≥dulo de SEO</a> no sistema Promopult: para quem n√£o quer se afogar na rotina.  Todas as ferramentas para melhorar a qualidade do site e promover a pesquisa, automa√ß√£o de processos, listas de verifica√ß√£o, relat√≥rios detalhados. </p></blockquote><br><a name="id4"></a><h2>  Fornecemos seguran√ßa no site </h2><br><p>  O arquivo .htaccess oferece grandes oportunidades para proteger o site contra scripts maliciosos, roubo de conte√∫do e ataques do DOS.  Voc√™ tamb√©m pode proteger o acesso a arquivos e parti√ß√µes espec√≠ficos. </p><br><h3>  5. Proibimos o download de imagens do seu site </h3><br><p>  Existem tecnologias nas quais sites de terceiros usam conte√∫do, incluindo imagens, baixando-o diretamente da sua hospedagem por hotlink (links diretos para arquivos).  Isso n√£o √© apenas um insulto e viola os direitos autorais, mas tamb√©m cria uma carga adicional desnecess√°ria no seu servidor. </p><br><p>  Ladr√µes de cerco com este c√≥digo: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymlinks RewriteEngine <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !^$ RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !^https://(www.)?mysite.com/<span class="hljs-meta"><span class="hljs-meta"> [nc] RewriteRule .*.(gif|jpg|png)$ https://mysite.com/img/goaway.gif[nc]</span></span></code> </pre> <br><p>  Substitua ‚Äúmysite.com‚Äù pelo endere√ßo do seu site e crie uma imagem com qualquer mensagem dizendo que roubar as fotos de outras pessoas n√£o √© bom em <code>https://mysite.com/img/goaway.gif</code> .  Esta imagem ser√° mostrada em um recurso de terceiros. </p><br><h3>  6. Negar acesso </h3><br><p>  Grupos inteiros de convidados indesejados de endere√ßos IP espec√≠ficos, sub-redes e bots maliciosos podem ter acesso negado ao seu recurso usando as diretivas a seguir em .htaccess. </p><br><h4>  Para agentes de usu√°rios indesejados (bots) </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">SetEnvIfNoCase</span></span> user-Agent ^FrontPage<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] SetEnvIfNoCase user-Agent ^Java.* [NC,OR] SetEnvIfNoCase user-Agent ^Microsoft.URL [NC,OR] SetEnvIfNoCase user-Agent ^MSFrontPage [NC,OR] SetEnvIfNoCase user-Agent ^Offline.Explorer [NC,OR] SetEnvIfNoCase user-Agent ^[Ww]eb[Bb]andit [NC,OR] SetEnvIfNoCase user-Agent ^Zeus [NC] &lt;limit get=‚Äù‚Äù post=‚Äù‚Äù head=‚Äù‚Äù&gt; Order Allow,Deny Allow from all Deny from env=bad_bot &lt;/limit&gt;</span></span></code> </pre> <br><p>  A lista de agentes do usu√°rio pode ser complementada, reduzida ou criada por voc√™.  A lista de bots bons e ruins pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Um caso especial dessa proibi√ß√£o √© a proibi√ß√£o de rob√¥s de pesquisa.  Se, por algum motivo, voc√™ n√£o estiver satisfeito com a regra no robots.txt, poder√° negar o acesso, por exemplo, ao Googlebot usando as seguintes diretrizes: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{USER_AGENT}</span></span> Googlebot RewriteRule .* -<span class="hljs-meta"><span class="hljs-meta"> [F]</span></span></code> </pre> <br><h4>  Para todos, exceto o IP especificado </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">ErrorDocument</span></span></span></span> 403 https://mysite.com Order deny,allow Deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> Allow from IP1 Allow from IP2  . .</code> </pre> <br><p>  N√£o se esque√ßa de substituir "https://mysite.com" pelo endere√ßo do seu site e inserir endere√ßos IP em vez de IP1, IP2 etc. </p><br><h4>  Para endere√ßos IP espec√≠ficos </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">allow</span></span></span></span> from <span class="hljs-literal"><span class="hljs-literal">all</span></span> deny from IP1 deny from IP2  . .</code> </pre> <br><h4>  Para sub-rede </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">allow</span></span></span></span> from <span class="hljs-literal"><span class="hljs-literal">all</span></span> deny from 192.168.0.0/24</code> </pre> <br><p>  Digite a m√°scara de rede na linha ap√≥s "negar de". </p><br><p>  Os endere√ßos IP de spam podem ser calculados nos logs do servidor ou nos servi√ßos de estat√≠sticas.  O painel de administra√ß√£o do WordPress exibe os endere√ßos IP dos comentaristas: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/h-/pv/tuh-pvunxnt_8dwik_mcs_qqrwe.png" alt="19 recursos √∫teis do arquivo .htaccess"></div><br><br><h4>  Para arquivo espec√≠fico </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files myfile.html&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/files&gt;</code> </pre> <br><p>  Digite o nome do arquivo em vez de "myfile.html" no exemplo.  O usu√°rio ver√° o erro 403 - "acesso negado". </p><br><p>  N√£o ser√° sup√©rfluo restringir o acesso ao pr√≥prio arquivo .htaccess por motivos de seguran√ßa, e tamb√©m recomendamos que voc√™ defina 444 permiss√µes no arquivo ap√≥s definir todas as regras. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Files .htaccess&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/Files&gt;</code> </pre> <br><p>  Para sites do WordPress, √© importante restringir o acesso ao arquivo wp-config.php, como  cont√©m informa√ß√µes sobre o banco de dados: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files wp-config.php&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/files&gt;</code> </pre> <br><h4>  Para usu√°rios provenientes de um site espec√≠fico </h4><br><p>  Voc√™ pode bloquear os visitantes de recursos indesejados (por exemplo, com conte√∫do adulto ou chocante). </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;IfModule mod_rewrite.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> bad-site.com<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] RewriteCond %{HTTP_REFERER} bad-site.com [NC,OR] RewriteRule .* - [F] &lt;/ifModule&gt;</span></span></code> </pre> <br><h3>  7. Proteja o acesso a um arquivo ou pasta espec√≠fica </h3><br><p>  Para come√ßar, crie um arquivo .htpasswd, escreva logins e senhas no formato user: password e coloque-o na raiz do site.  Por raz√µes de seguran√ßa, as senhas s√£o melhor criptografadas.  Isso pode ser feito usando servi√ßos especiais para gerar registros, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso</a> .  A pr√≥xima etapa √© adicionar diret√≥rios ou arquivos ao .htaccess: </p><br><h4>  Prote√ß√£o de senha de arquivo </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files secure.php=‚Äù‚Äù&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">AuthType</span></span> Basic AuthName ‚Äú‚Äù AuthUserFile /pub/home/.htpasswd Require valid-user &lt;/files&gt;</code> </pre> <br><h4>  Pastas de prote√ß√£o por senha </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">resides</span></span> AuthType basic AuthName ‚ÄúThis directory is protected‚Äù AuthUserFile /pub/home/.htpasswd AuthGroupFile /dev/null Require valid-user</code> </pre> <br><p>  Em vez de "/pub/home/.htpasswd", especifique o caminho para o arquivo .htpasswd na raiz do servidor.  Recomendamos verificar o acesso depois de instalar o c√≥digo. </p><br><h3>  8. Proibimos a execu√ß√£o de scripts maliciosos </h3><br><p>  O seguinte grupo de diretivas protege o site da chamada "inje√ß√£o de script" - uma ferramenta para ataques de hackers: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymLinks RewriteEngine <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{QUERY_STRING}</span></span> (\&lt;|<span class="hljs-number"><span class="hljs-number">%3</span></span>C).*script.*(\&gt;|<span class="hljs-number"><span class="hljs-number">%3</span></span>E)<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR] RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) RewriteRule ^(.*)$ index.php [F,L]</span></span></code> </pre> <br><p>  Todas as tentativas de danificar seu recurso ser√£o redirecionadas para a p√°gina de erro 403 "acesso negado". </p><br><h3>  9. Protegendo o site contra ataques do DOS </h3><br><p>  Um dos m√©todos de prote√ß√£o √© limitar o tamanho m√°ximo permitido da solicita√ß√£o (n√£o h√° restri√ß√£o por padr√£o). </p><br><p>  Para fazer isso, defina o tamanho dos arquivos baixados em bytes em .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">LimitRequestBody</span></span> 10240000</code> </pre> <br><p>  No exemplo, o tamanho √© 10 MB.  Se voc√™ deseja proibir o download de arquivos, escreva um n√∫mero menor que 1 MB (1048576 bytes). </p><br><p>  Voc√™ tamb√©m pode explorar as possibilidades das diretivas LimitRequestFields, LimitRequestFieldSize e LimitRequestLine na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://">documenta√ß√£o</a> oficial. </p><br><a name="id5"></a><h2>  Personalize a exibi√ß√£o do site </h2><br><p>  Vamos ver o que pode ser feito com a exibi√ß√£o de todo o recurso ou de suas se√ß√µes nos navegadores dos usu√°rios usando .htaccess. </p><br><h3>  10. Substitua o arquivo de √≠ndice </h3><br><p>  Um arquivo de √≠ndice √© aquele que √© aberto por padr√£o ao acessar um diret√≥rio espec√≠fico.  Geralmente eles s√£o chamados: index.html, index.htm, index.php, index.phtml, index.shtml, default.htm, default.html. </p><br><p>  Aqui est√° o que parece na estrutura de diret√≥rios: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kk/hy/8m/kkhy8muv-omjellggi7b6kwczto.png" alt="19 recursos √∫teis do arquivo .htaccess"></div><br><br><p>  Para substituir este arquivo por qualquer outro, coloque-o no diret√≥rio .htaccess e adicione este comando: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">DirectoryIndex</span></span> hello.html</code> </pre> <br><p>  Em vez de "hello.html", digite o endere√ßo do arquivo desejado. </p><br><p>  Voc√™ pode especificar a sequ√™ncia de arquivos que ser√£o abertos na ordem especificada se um deles estiver indispon√≠vel: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">DirectoryIndex</span></span> hello.html hello.php hello.pl</code> </pre> <br><h3>  11. Adicione ou remova html no final da URL </h3><br><p>  Manter ou remover a extens√£o do arquivo na URL √© uma quest√£o para todo otimizador.  N√£o h√° estudos confi√°veis ‚Äã‚Äãsobre o efeito das extens√µes nos endere√ßos na classifica√ß√£o de recursos, mas cada webmaster tem uma opini√£o sobre isso. </p><br><h4>  Para adicionar .html: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> (.*/[^/.]+)($|\?) RewriteRule .* <span class="hljs-number"><span class="hljs-number">%1</span></span>.html<span class="hljs-meta"><span class="hljs-meta"> [R=301,L] RewriteRule ^(.*)/$ /$1.html [R=301,L]</span></span></code> </pre> <br><h4>  Para remover .html: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">RewriteBase</span></span> / RewriteRule (.*)\.html$ <span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><p>  As mesmas diretivas podem adicionar / remover a extens√£o php. </p><br><h3>  12. Configure a codifica√ß√£o </h3><br><p>  Para evitar erros na exibi√ß√£o do recurso pelo navegador, √© necess√°rio informar em qual codifica√ß√£o o site foi criado.  Mais populares: </p><br><ul><li>  UTF-8 - universal </li><li>  Windows-1251 - cir√≠lico </li><li>  Windows-1250 - para a Europa Central </li><li>  Windows-1252 - para a Europa Ocidental </li><li>  KOI8-R - Cir√≠lico (KOI8-R) </li></ul><br><p>  Na maioria das vezes, eles usam UTF-8 e Windows-1251. </p><br><p>  Se a codifica√ß√£o n√£o for especificada na metatag de cada p√°gina, voc√™ poder√° especific√°-la atrav√©s de .htaccess. </p><br><p>  Um exemplo de diretiva que define o arquivo para codifica√ß√£o UTF-8: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">AddDefaultCharset</span></span> UTF-8</code> </pre> <br><p>  E esse comando significa que todos os arquivos carregados no servidor ser√£o convertidos para Windows-1251: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">CharsetSourceEnc</span></span> WINDOWS-1251</code> </pre> <br><p>  Os exemplos mostram codifica√ß√µes diferentes, mas dentro do mesmo site, as codifica√ß√µes nessas diretivas devem corresponder. </p><br><h3>  13. Crie p√°ginas de erro personalizadas </h3><br><p>  Usando regras no .htaccess, voc√™ pode configurar a exibi√ß√£o de p√°ginas especialmente criadas para os erros mais populares, por exemplo: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">ErrorDocument</span></span></span></span> 401 /error/401.php ErrorDocument 403 /error/403.php ErrorDocument 404 /error/404.php ErrorDocument 500 /error/500.php</code> </pre> <br><p>  Antes de escrever as diretivas, crie a pasta de erro na raiz do site e coloque os arquivos correspondentes nas p√°ginas de erro. </p><br><p>  Por que isso √© necess√°rio?  Por exemplo, para n√£o perder o usu√°rio na p√°gina 404, mas para lhe dar a oportunidade de ir para outras se√ß√µes do site: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3p/lg/xe/3plgxe1dd33l2sqrixfcjqw_jie.png" alt="19 recursos √∫teis do arquivo .htaccess"></div><br><br><a name="id6"></a><h2>  Otimizamos o site </h2><br><p>  A velocidade de carregamento do site √© um dos fatores de classifica√ß√£o nos mecanismos de pesquisa.  Voc√™ pode aument√°-lo, inclusive usando as diretivas em .htaccess. </p><br><h3>  14. Compactar componentes do site usando mod_gzip ou mod_deflate </h3><br><p>  A compacta√ß√£o de arquivos, por um lado, aumenta a velocidade de carregamento de um site, mas, por outro lado, carrega mais o servidor.  No .htaccess, voc√™ pode ativar a compacta√ß√£o usando dois m√≥dulos - mod_zip e mod_deflate.  Eles s√£o quase id√™nticos na qualidade da compacta√ß√£o. </p><br><p>  A sintaxe do m√≥dulo Gzip √© mais flex√≠vel e pode funcionar com m√°scaras: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_gzip.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">mod_gzip_on</span></span> Yes mod_gzip_dechunk Yes mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$ mod_gzip_item_include handler ^cgi-script$ mod_gzip_item_include mime ^text/.* mod_gzip_item_include mime ^application/x-javascript.* mod_gzip_item_exclude mime ^image/.* mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.* &lt;/ifModule&gt;</code> </pre> <br><p>  No mod_deflate, voc√™ lista os tipos de arquivos que deseja compactar: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_deflate.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">AddOutputFilterByType</span></span> DEFLATE text/html text/plain text/xml application/xml application/xhtml+xml text/css text/javascript application/javascript application/x-javascript &lt;/ifModule&gt;</code> </pre> <br><h3>  15. Fortalecemos o cache </h3><br><p>  Esse conjunto de comandos ajudar√° a carregar rapidamente o site para os visitantes que j√° estavam nele.  O navegador n√£o baixa novamente imagens e scripts do servidor, mas usa dados do cache. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">FileETag</span></span> MTime Size &lt;ifmodule mod_expires.c&gt; &lt;filesmatch ‚Äú.(jpg|gif|png|css|js)$‚Äù&gt; ExpiresActive <span class="hljs-literal"><span class="hljs-literal">on</span></span> ExpiresDefault ‚Äúaccess plus 1 week‚Äù &lt;/filesmatch&gt; &lt;/ifmodule&gt;</code> </pre> <br><p>  No exemplo, a vida √∫til do cache √© limitada a uma semana ("1 semana"), voc√™ pode especificar seu per√≠odo em meses (m√™s), anos (ano), horas (horas) etc. </p><br><p>  Outra op√ß√£o de c√≥digo: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;IfModule mod_expires.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">ExpiresActive</span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> ExpiresByType application/javascript <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType text/javascript <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType text/css <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/gif <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/jpeg <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/png <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> &lt;/IfModule&gt;</code> </pre> <br><p>  Os seguintes tipos de arquivo est√£o dispon√≠veis para armazenamento em cache: </p><br><ul><li>  imagem / √≠cone x; </li><li>  image / jpeg; </li><li>  imagem / png; </li><li>  imagem / gif; </li><li>  application / x-shockwave-flash; </li><li>  texto / css; </li><li>  texto / javascript; </li><li>  aplica√ß√£o / javascript; </li><li>  aplica√ß√£o / x-javascript; </li><li>  texto / html; </li><li>  application / xhtml + xml. </li></ul><br><a name="id7"></a><h2>  Mais algumas possibilidades </h2><br><h3>  16. Gerenciar configura√ß√µes de php </h3><br><p>  Esse conjunto de configura√ß√µes √© feito pelos programadores se n√£o houver acesso ao arquivo php.ini.  Vamos nos debru√ßar sobre express√µes php_value, respons√°veis ‚Äã‚Äãpela quantidade de dados carregados no site e pelo tempo de processamento dos scripts, porque  isso afeta diretamente o desempenho. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_php.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">php_value</span></span> upload_max_filesize 125M php_value post_max_size 20M php_value max_execution_time 60 &lt;/ifModule&gt;</code> </pre> <br><p>  Na linha "upload_max_filesize", indique o tamanho m√°ximo dos arquivos baixados em megabytes, "post_max_size" significa a quantidade m√°xima de postagens, "max_execution_time" indica o tempo em segundos para processar os scripts. </p><br><h3>  17. Combater coment√°rios de spam no WordPress </h3><br><p>  Para impedir que os remetentes de spam acessem o arquivo wp-comments-post.php, adicione estas diretrizes ao arquivo .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_METHOD}</span></span> POST RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> .wp-comments-post\.php* RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !.*mysite.com.*<span class="hljs-meta"><span class="hljs-meta"> [OR] RewriteCond %{HTTP_USER_AGENT} ^$ RewriteRule (.*) ^http://%{REMOTE_ADDR}/$ [R=301,L]</span></span></code> </pre> <br><p>  Em vez de "mysite.com", digite o endere√ßo do seu site. </p><br><h3>  18. Instale o email para o administrador do servidor </h3><br><p>  Esse c√≥digo em .htaccess definir√° o endere√ßo de e-mail do administrador por padr√£o.  Ele receber√° notifica√ß√µes relacionadas a eventos importantes no servidor. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">ServerSignature</span></span> EMail SetEnv SERVER_ADMIN admin@mysite.com</code> </pre> <br><h3>  19. Avisamos sobre a indisponibilidade do site </h3><br><p>  Em uma situa√ß√£o em que o site n√£o est√° dispon√≠vel por motivos t√©cnicos, voc√™ pode redirecionar os usu√°rios para uma p√°gina com informa√ß√µes sobre quando o trabalho ser√° restaurado.  √â melhor evitar essas interrup√ß√µes, mas em circunst√¢ncias de for√ßa maior adicione as seguintes diretivas ao .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !/info.html$ RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REMOTE_HOST}</span></span> !^12\.345\.678\.90 RewriteRule $ https://mysite.ru/info.html<span class="hljs-meta"><span class="hljs-meta"> [R=302,L]</span></span></code> </pre> <br><p>  No exemplo (12 \ .345 \ .678 \ .90), substitua o endere√ßo IP pelo seu pr√≥prio. Na √∫ltima linha, indique o endere√ßo da p√°gina do seu recurso com informa√ß√µes sobre a natureza e o momento da conclus√£o. </p><br><a name="id8"></a><h2>  Regras gerais de .htaccess </h2><br><ul><li>  Sempre fa√ßa backup do arquivo antes de fazer altera√ß√µes para revert√™-los rapidamente. </li><li>  Fa√ßa as altera√ß√µes passo a passo, adicione uma regra e avalie como ela funcionou. </li><li>  Se voc√™ colocar v√°rios arquivos .htaccess em diret√≥rios diferentes, escreva apenas novas diretivas relevantes para um diret√≥rio espec√≠fico nos filhos, o restante ser√° herdado do diret√≥rio ou arquivo pai na pasta raiz. </li><li>  Limpe o cache do navegador: Ctrl + F5, no Safari: Ctrl + R, no Mac OS: Cmd + R. </li><li>  Se ocorrer um erro 500, verifique a sintaxe da regra (para erros de digita√ß√£o).  Voc√™ pode usar os servi√ßos de verifica√ß√£o on-line do arquivo .htaccess, por exemplo.  Se nenhum erro for encontrado, esse tipo de diretiva √© proibido no arquivo de configura√ß√£o principal. Voc√™ precisar√° consultar um programador e um provedor de hospedagem. </li><li>  Caracteres cir√≠licos n√£o s√£o permitidos nas diretivas .htaccess.  Se voc√™ precisar especificar o endere√ßo do dom√≠nio cir√≠lico (moysite.rf), use qualquer servi√ßo whois para descobrir sua ortografia usando o m√©todo punycode.  Por exemplo, o endere√ßo "site.rf" seria "xn - 80aswg.xn - p1ai / $ 1". </li><li>  Muitas diretivas no .htaccess podem reduzir o desempenho do site.  Tente usar o arquivo apenas se o problema n√£o puder ser resolvido de outra maneira. </li><li>  Se voc√™ n√£o tiver tempo para estudar os recursos das diretivas em detalhes, use <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o gerador .htaccess</a> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462029/">https://habr.com/ru/post/pt462029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462015/index.html">Universo de relat√≥rios SAP</a></li>
<li><a href="../pt462021/index.html">Como parar de fazer a mesma coisa</a></li>
<li><a href="../pt462023/index.html">Cascadeur: O Futuro da Anima√ß√£o de Jogos</a></li>
<li><a href="../pt462025/index.html">Modelo de dados de rede relacional</a></li>
<li><a href="../pt462027/index.html">Como o Dark implanta c√≥digo de 50ms</a></li>
<li><a href="../pt462031/index.html">Por exemplo, se voc√™ ler os logs!: Inicie o Hotspot 2.0 na rede Wi-Fi no metr√¥</a></li>
<li><a href="../pt462033/index.html">A √öltima Ceia dos Desenvolvedores</a></li>
<li><a href="../pt462035/index.html">Python Vs R - Ci√™ncia de Dados</a></li>
<li><a href="../pt462041/index.html">Abordagens de segmenta√ß√£o para celular - tradu√ß√£o</a></li>
<li><a href="../pt462043/index.html">Pesca Inteligente no FishSensor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>