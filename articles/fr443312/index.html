<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÇ üëß üç¢ Gestion de la m√©moire Python üíÜüèø ‚ù£Ô∏è üòö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! La longue fin de semaine de mars s'est donc termin√©e. Nous voulons d√©dier la premi√®re publication post-vacances aux bien-aim√©s de nomb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gestion de la m√©moire Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/443312/">  Bonjour √† tous!  La longue fin de semaine de mars s'est donc termin√©e.  Nous voulons d√©dier la premi√®re publication post-vacances aux bien-aim√©s de nombreux cours - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"D√©veloppeur Python"</a> , qui commence dans moins de 2 semaines.  Allons-y. <br><br>  <b>Table des mati√®res</b> <br><br><ol><li>  La m√©moire est un livre vide </li><li>  Gestion de la m√©moire: du mat√©riel au logiciel </li><li>  Impl√©mentation de la base Python </li><li>  Concept Global Interpreter Lock (GIL) </li><li>  Collecteur d'ordures </li><li>  Gestion de la m√©moire dans CPython: <br><ul><li>  Piscines </li><li>  Blocs </li><li>  Ar√®nes </li></ul></li><li>  Conclusion </li></ol><br><img src="https://habrastorage.org/webt/ww/vn/wj/wwvnwjqala4vtezc2ei4dx4ml_w.png"><br><br>  Vous √™tes-vous d√©j√† demand√© comment Python backstage traite vos donn√©es?  Comment vos variables sont-elles stock√©es en m√©moire?  √Ä quel moment sont-ils supprim√©s? <br>  Dans cet article, nous allons approfondir la structure interne de Python pour comprendre comment fonctionne la gestion de la m√©moire. <br><br>  Apr√®s avoir lu cet article, vous: <br><br><ul><li>  En savoir plus sur les op√©rations de bas niveau, en particulier la m√©moire. </li><li>  Comprenez comment Python r√©sume les op√©rations de bas niveau. </li><li>  D√©couvrez les algorithmes de gestion de la m√©moire en Python. </li></ul><br>  Conna√Ætre la structure interne de Python permettra de mieux comprendre les principes de son comportement.  J'esp√®re que vous pourrez jeter un ≈ìil √† Python sous un nouvel angle.  Dans les coulisses, il y a tellement d'op√©rations logiques pour faire fonctionner correctement votre programme. <a name="habracut"></a><br><br>  <b>La m√©moire est un livre vide</b> <br><br>  Vous pouvez imaginer la m√©moire de l'ordinateur comme un livre vide, en attendant qu'il √©crive beaucoup d'histoires courtes.  Il n'y a encore rien sur ses pages, mais des auteurs appara√Ætront bient√¥t qui souhaitent y √©crire leurs histoires.  Pour ce faire, ils auront besoin d'une place. <br>  Puisqu'ils ne peuvent pas √©crire une histoire au-dessus d'une autre, ils doivent faire tr√®s attention aux pages sur lesquelles ils √©crivent.  Avant de commencer √† √©crire, ils consultent le gestionnaire de livres.  Le manager d√©cide o√π dans le livre les auteurs peuvent √©crire leur histoire. <br><br>  Depuis que le livre existe depuis de nombreuses ann√©es, de nombreuses histoires y sont d√©pass√©es.  Lorsque personne ne lit ou ne traite de l'histoire, il la supprime pour faire place √† de nouvelles histoires. <br>  Au fond, la m√©moire de l'ordinateur est comme un livre vide.  Les blocs de m√©moire continus d'une longueur fixe sont g√©n√©ralement appel√©s pages, donc cette analogie est tr√®s pratique. <br><br>  Les auteurs peuvent √™tre diverses applications ou processus qui doivent stocker des donn√©es en m√©moire.  Un gestionnaire qui d√©cide o√π les auteurs peuvent √©crire leurs histoires joue le r√¥le d'un gestionnaire de m√©moire - un trieur.  Et celui qui efface les vieilles histoires est un ramasse-miettes. <br><br>  <b>Gestion de la m√©moire: du mat√©riel au logiciel</b> <br><br>  La gestion de la m√©moire est le processus dans lequel les applications logicielles lisent et √©crivent des donn√©es.  Le gestionnaire de m√©moire d√©termine o√π placer les donn√©es du programme.  √âtant donn√© que la quantit√© de m√©moire est bien s√ªr, comme le nombre de pages dans le livre, en cons√©quence, le gestionnaire doit trouver de l'espace libre pour le fournir pour une utilisation par l'application.  Ce processus est appel√© ¬´allocation de m√©moire¬ª. <br><br>  En revanche, lorsque les donn√©es ne sont plus n√©cessaires, elles peuvent √™tre supprim√©es.  Dans ce cas, ils parlent de lib√©rer de la m√©moire.  Mais de quoi est-il lib√©r√© et d'o√π vient-il? <br>  Quelque part √† l'int√©rieur de l'ordinateur, il y a un p√©riph√©rique physique qui stocke les donn√©es lorsque vous ex√©cutez des programmes Python.  Le code Python passe par de nombreux niveaux d'abstraction avant d'acc√©der √† cet appareil. <br><br>  L'un des principaux niveaux situ√©s au-dessus de l'√©quipement (RAM, disque dur, etc.) est le syst√®me d'exploitation.  Il g√®re les demandes de lecture et d'√©criture en m√©moire. <br>  Au-dessus du syst√®me d'exploitation, il y a une couche d'application dans laquelle se trouve l'une des impl√©mentations Python (c√¢bl√©e dans votre syst√®me d'exploitation ou t√©l√©charg√©e depuis python.org).  La gestion de la m√©moire pour le code dans ce langage de programmation est r√©gul√©e par des outils sp√©ciaux Python.  Les algorithmes et les structures que Python utilise pour g√©rer la m√©moire sont le sujet principal de cet article. <br><br>  <b>Impl√©mentation de la base Python</b> <br><br>  L'impl√©mentation de base de Python, ou ¬´pur Python¬ª, est CPython √©crit en C. <br>  J'ai √©t√© tr√®s surpris lorsque j'en ai entendu parler pour la premi√®re fois.  Comment une langue peut-elle √™tre √©crite dans une autre langue?!  Eh bien, pas litt√©ralement, bien s√ªr, mais l'id√©e est quelque chose comme √ßa. <br><br>  Le langage Python est d√©crit dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manuel de r√©f√©rence sp√©cial en anglais</a> .  Cependant, ce guide √† lui seul n'est pas tr√®s utile.  Vous avez toujours besoin d'un outil pour interpr√©ter le code √©crit par les r√®gles du r√©pertoire. <br><br>  Vous aurez √©galement besoin de quelque chose pour ex√©cuter le code sur votre ordinateur.  L'impl√©mentation de base de Python fournit les deux conditions.  Il convertit le code Python en instructions qui sont ex√©cut√©es dans une machine virtuelle. <br><br><blockquote>  Remarque: les machines virtuelles sont similaires aux ordinateurs physiques, mais elles sont int√©gr√©es au logiciel.  Ils traitent des instructions de base similaires au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code assembleur</a> . </blockquote><br><br>  Python est un langage de programmation interpr√©t√©.  Votre code Python est compil√© en utilisant des instructions plus facilement comprises par l'ordinateur - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bytecode</a> .  Ces instructions sont interpr√©t√©es par la machine virtuelle lorsque vous ex√©cutez le code. <br><br>  Avez-vous d√©j√† vu des fichiers avec l'extension <i>.pyc</i> ou le dossier <i>__pycache__</i> ?  Il s'agit du m√™me bytecode qui est interpr√©t√© par la machine virtuelle. <br>  Il est important de comprendre qu'il existe d'autres impl√©mentations en plus de CPython, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IronPython</a> , qui compile et s'ex√©cute dans Microsoft Common Language Runtime (CLR).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jython se</a> compile en bytecode Java pour s'ex√©cuter sur une machine virtuelle Java.  Il y a aussi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PyPy</a> sur lequel vous pouvez √©crire un article s√©par√©, donc je ne le mentionnerai qu'en passant. <br><br>  Dans cet article, nous nous concentrerons sur la gestion de la m√©moire √† l'aide des outils CPython. <br>  Remarque: les versions de Python sont mises √† jour et tout peut arriver √† l'avenir.  Au moment d'√©crire ces lignes, la derni√®re version √©tait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Python 3.7</a> . <br><br>  Ok, nous avons CPython √©crit en C qui interpr√®te le bytecode Python.  Quel est le lien avec la gestion de la m√©moire?  Pour commencer, les algorithmes et les structures de gestion de la m√©moire existent dans le code CPython, en C. Pour comprendre ces principes en Python, vous avez besoin d'une compr√©hension de base de CPython. <br><br>  CPython est √©crit en C, qui √† son tour ne prend pas en charge la programmation orient√©e objet.  Pour cette raison, le code CPython a une structure plut√¥t int√©ressante. <br><br>  Vous devez avoir entendu que tout en Python est un objet, m√™me des types comme int et str, par exemple.  Cela est vrai au niveau de l'impl√©mentation de CPython.  Il existe une structure appel√©e PyObject que chaque objet de CPython utilise. <br><br>  Remarque: Une structure en C est un type de donn√©es d√©fini par l'utilisateur qui regroupe diff√©rents types de donn√©es en soi.  Nous pouvons faire une analogie avec les langages orient√©s objet et dire qu'une structure est une classe avec des attributs, mais sans m√©thodes. <br><br>  PyObject est l'anc√™tre de tous les objets en Python, contenant seulement deux choses: <br><br><ul><li>  <b>ob_refcnt</b> : compteur de r√©f√©rence; </li><li>  <b>ob_type</b> : pointeur vers un autre type. </li></ul><br>  Un compteur de r√©f√©rence est requis pour la r√©cup√©ration de place.  Nous avons √©galement un pointeur sur un type d'objet sp√©cifique.  Un type d'objet est juste une autre structure qui d√©crit des objets en Python (tels que dict ou int). <br><br>  Chaque objet a un allocateur de m√©moire orient√© objet qui sait allouer de la m√©moire et stocker l'objet.  Chaque objet poss√®de √©galement un lib√©rateur de ressources orient√© objet qui nettoie la m√©moire si son contenu n'est plus n√©cessaire. <br><br>  Il y a un facteur important lorsque l'on parle d'allocation de m√©moire et de son nettoyage.  La m√©moire est une ressource partag√©e d'un ordinateur et une chose plut√¥t d√©sagr√©able peut se produire si deux processus tentent d'√©crire des donn√©es dans le m√™me emplacement m√©moire en m√™me temps. <br><br>  <b>Verrou d'interpr√©tation globale (GIL)</b> <br><br>  GIL est une solution au probl√®me g√©n√©ral du partage de m√©moire entre des ressources partag√©es telles que la m√©moire d'un ordinateur.  Lorsque deux threads tentent de changer la m√™me ressource en m√™me temps, ils marchent sur les talons l'un de l'autre.  En cons√©quence, un d√©sordre complet est form√© dans la m√©moire et aucun processus ne terminera son travail avec le r√©sultat souhait√©. <br><br>  Revenant √† l'analogie avec le livre, supposons que des deux auteurs, chacun d√©cide qu'il doit √©crire son histoire sur la page en cours √† ce moment particulier.  Chacun d'eux ignore les tentatives de l'autre pour √©crire une histoire et commence √† √©crire obstin√©ment sur la page.  En cons√©quence, nous avons deux histoires, l'une au-dessus de l'autre, et une page absolument illisible. <br><br>  Une des solutions √† ce probl√®me est pr√©cis√©ment GIL, qui bloque l'interpr√©teur pendant que le thread interagit avec la ressource allou√©e, permettant ainsi √† un et un seul thread d'√©crire dans la zone de m√©moire allou√©e.  Lorsque CPython alloue de la m√©moire, il utilise le GIL pour s'assurer qu'il le fait correctement. <br>  Cette approche pr√©sente √† la fois de nombreux avantages et de nombreux inconv√©nients, c'est pourquoi GIL provoque des conflits dans la communaut√© Python.  Pour en savoir plus sur GIL, je vous sugg√®re de lire l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> suivant. <br><br>  <b>Collecteur d'ordures</b> <br><br>  Revenons √† notre analogie avec le livre et imaginons que certaines histoires qu'il contient sont d√©sesp√©r√©ment d√©pass√©es.  Personne ne les lit et ne s‚Äôadresse √† eux.  Dans ce cas, une solution naturelle serait de s'en d√©barrasser comme inutile, lib√©rant ainsi de l'espace pour de nouvelles histoires. <br>  Ces vieilles histoires inutilis√©es peuvent √™tre compar√©es √† des objets en Python dont le nombre de r√©f√©rences est tomb√© √† 0. N'oubliez pas que chaque objet en Python a un nombre de r√©f√©rences et un pointeur vers un type. <br><br>  Le nombre de r√©f√©rences peut augmenter pour plusieurs raisons.  Par exemple, il augmentera si vous affectez une variable √† une autre variable. <br><br><img src="https://habrastorage.org/webt/zv/me/dj/zvmedjrxhn3qqrac6tibjlrpnuu.png"><br><br>  Il augmentera √©galement si vous passez l'objet en argument. <br><br><img src="https://habrastorage.org/webt/kq/np/pm/kqnppmeqfhl4pg6-4atqz_nnhhq.png"><br><br>  Dans le dernier exemple, le nombre de r√©f√©rences augmentera si vous incluez l'objet dans la liste. <br><br><img src="https://habrastorage.org/webt/ql/ro/mj/qlromj2eg80jfhzykfkpzv8syfg.png"><br><br>  Python vous permet de conna√Ætre la valeur actuelle du compteur de r√©f√©rence √† l'aide du module sys.  Vous pouvez utiliser <code>sys.getrefcount(numbers)</code> , mais n'oubliez pas que l'appel √† <code>getrefcount()</code> incr√©mentera le compteur de r√©f√©rence d'un autre. <br><br>  Dans tous les cas, si l'objet de votre code est toujours n√©cessaire, sa valeur pour son compteur de r√©f√©rence sera sup√©rieure √† 0. Et lorsqu'il tombe √† z√©ro, une fonction sp√©ciale sera lanc√©e pour effacer la m√©moire, ce qui la lib√©rera et la rendra disponible pour d'autres objets. <br><br>  Mais que signifie ¬´lib√©rer de la m√©moire¬ª et comment les autres objets l'utilisent-ils?  Plongeons directement dans la gestion de la m√©moire dans CPython. <br><br>  <b>Gestion de la m√©moire dans CPython</b> <br><br>  Dans cette partie, nous allons plonger dans l'architecture de m√©moire CPython et les algorithmes par lesquels elle fonctionne. <br><br>  Comme mentionn√© pr√©c√©demment, il existe des niveaux d'abstraction entre l'√©quipement physique et CPython.  Le syst√®me d'exploitation (OS) extrait la m√©moire physique et cr√©e un niveau de m√©moire virtuelle auquel les applications, y compris Python, peuvent acc√©der. <br><br>  Un gestionnaire de m√©moire virtuelle orient√© OS alloue une zone m√©moire sp√©cifique aux processus Python.  Dans l'image, les zones gris fonc√© sont l'espace occup√© par le processus Python. <br><br><img src="https://habrastorage.org/webt/6k/-f/n6/6k-fn6hhelja1ilktfil1yzmaas.png"><br><br>  Python utilise une partie de la m√©moire pour une utilisation interne et une m√©moire non objet.  L'autre partie est divis√©e en stockage d'objets (votre <i>int, dict</i> , etc.) Maintenant, je parle dans un langage tr√®s simple, mais vous pouvez regarder directement sous le capot, c'est-√†-dire dans le <a href="">code source de CPython</a> et voir comment tout cela se passe d'un point de vue pratique . <br><br>  Dans CPython, il existe un allocateur d'objets responsable de l'allocation de m√©moire dans une zone de m√©moire d'objets.  C'est dans ce distributeur d'objets que se r√©alise toute magie.  Il est appel√© √† chaque fois que chaque nouvel objet doit occuper ou lib√©rer de la m√©moire. <br><br>  Habituellement, l'ajout et la suppression de donn√©es en Python, comme int ou list, par exemple, n'utilisent pas beaucoup de donn√©es √† la fois.  C'est pourquoi l'architecture du distributeur se concentre sur le travail avec de petites quantit√©s de donn√©es par unit√© de temps.  De plus, il n'alloue pas de m√©moire √† l'avance, c'est-√†-dire jusqu'√† ce moment jusqu'√† ce qu'elle devienne absolument n√©cessaire. <br><br>  Les commentaires dans le code source d√©finissent l'allocateur comme ¬´un allocateur de m√©moire rapide √† usage sp√©cial qui fonctionne comme la fonction malloc universelle¬ª.  Par cons√©quent, en C, malloc est utilis√© pour allouer de la m√©moire. <br><br>  Voyons maintenant la strat√©gie d'allocation de m√©moire de CPython.  Tout d'abord, parlons des trois parties principales et de leur relation. <br><br>  Les ar√®nes sont les plus grandes zones de m√©moire qui occupent l'espace jusqu'aux fronti√®res des pages en m√©moire.  La bordure de page (page spread) est le point extr√™me d'un bloc de m√©moire continu d'une longueur fixe utilis√© par l'OS.  Python d√©finit la bordure de la page syst√®me sur 256 Ko. <br><br><img src="https://habrastorage.org/webt/cu/t2/ta/cut2ta8lwor00zy8h5k8ogjjhgy.png"><br><br>  √Ä l'int√©rieur des ar√®nes se trouvent des pools (pool), qui sont consid√©r√©s comme une page virtuelle de m√©moire (4 Ko).  Ils ressemblent √† des pages dans notre analogie.  Les pools sont divis√©s en blocs de m√©moire encore plus petits. <br><br>  Tous les blocs du pool se trouvent dans une ¬´classe de taille¬ª.  La classe de taille d√©termine la taille du bloc, ayant une certaine quantit√© de donn√©es demand√©es.  La gradation dans le tableau ci-dessous est tir√©e directement des commentaires dans le code source: <br><br><img src="https://habrastorage.org/webt/n9/sk/55/n9sk55ex-esbcfdnnxhavivbeta.png"><br><br>  Par exemple, si 42 octets sont n√©cessaires, les donn√©es seront plac√©es dans un bloc de 48 octets. <br><br>  <b>Piscines</b> <br><br>  Les piscines sont constitu√©es de blocs de la m√™me classe de taille.  Chaque pool fonctionne sur le principe d'une liste doublement li√©e avec d'autres pools de la m√™me classe de taille.  Par cons√©quent, l'algorithme peut facilement trouver la place n√©cessaire pour la taille de bloc requise, m√™me parmi de nombreux pools. <br><br>  La <code>usedpools list</code> conserve une trace de tous les pools qui ont une sorte d'espace libre disponible pour les donn√©es de chaque classe de taille.  Lorsque la taille de bloc requise est demand√©e, l'algorithme v√©rifie la liste des pools utilis√©s pour trouver un pool appropri√© pour celui-ci. <br><br>  Les pools sont dans trois √©tats: utilis√©, plein, vide.  Le pool utilis√© contient des blocs dans lesquels certaines informations peuvent √™tre √©crites.  Les blocs du pool complet sont tous distribu√©s et contiennent d√©j√† des donn√©es.  Les pools vides ne contiennent aucune donn√©e et peuvent √™tre d√©compos√©s en quelles classes de taille conviennent si n√©cessaire. <br><br>  La liste des pools vides ( <code>freepools list</code> ) contient, respectivement, tous les pools dans un √©tat vide.  Mais √† quel moment sont-ils utilis√©s? <br><br>  Disons que votre code a besoin d'une zone m√©moire de 8 octets.  S'il n'y a pas de pools dans la liste des pools utilis√©s avec une taille de classe de 8 octets, un nouveau pool vide est initialis√© comme stockant des blocs de 8 octets.  Ensuite, le pool vide est ajout√© √† la liste des pools utilis√©s et peut √™tre utilis√© dans les requ√™tes suivantes. <br><br>  Un pool complet lib√®re certains blocs lorsque ces informations ne sont plus n√©cessaires.  Ce pool sera ajout√© √† la liste utilis√©e selon sa classe de taille.  Vous pouvez observer comment les pools changent leurs √©tats et m√™me leurs classes de taille en fonction de l'algorithme. <br><br>  <b>Blocs</b> <br><br><img src="https://habrastorage.org/webt/p4/y1/_v/p4y1_v_kaiwweb9eut_gl3boybg.png"><br><br>  Comme le montre la figure, les pools contiennent des pointeurs pour lib√©rer des blocs de m√©moire.  Il y a une l√©g√®re nuance dans leur travail.  Selon les commentaires du code source, le distributeur "s'efforce de ne jamais toucher √† aucune zone de m√©moire √† aucun des niveaux (ar√®ne, pool, bloc) jusqu'√† ce que cela soit n√©cessaire". <br><br>  Cela signifie qu'un bloc peut avoir trois √©tats.  Ils peuvent √™tre d√©finis comme suit: <br><br><ul><li>  <b>Inchang√©</b> : zones de m√©moire non allou√©es; </li><li>  <b>Libre</b> : zones de m√©moire qui ont √©t√© allou√©es mais lib√©r√©es plus tard par CPython car elles ne contenaient pas d'informations pertinentes; </li><li>  <b>Distribu√©</b> : zones de m√©moire qui contiennent actuellement des informations actuelles. </li></ul><br>  Le pointeur freeblock est une liste √† liaison unique de blocs de m√©moire libres.  En d'autres termes, il s'agit d'une liste d'endroits gratuits o√π vous pouvez √©crire des informations.  Si plus de m√©moire est n√©cessaire que dans les blocs libres, alors l'allocateur utilise les blocs intacts dans le pool. <br><br>  D√®s que le gestionnaire de m√©moire lib√®re des blocs, ces blocs sont ajout√©s en haut de la liste des blocs libres.  La liste r√©elle peut ne pas contenir une s√©quence continue de blocs de m√©moire, comme dans la premi√®re figure ¬´r√©ussie¬ª. <br><br><img src="https://habrastorage.org/webt/cj/7g/d-/cj7gd-xeci1k_d0qwexo8zarr5y.png"><br><br>  <b>Ar√®nes</b> <br><br>  Les ar√®nes contiennent des piscines.  Les ar√®nes, contrairement aux pools, n'ont pas de divisions √©tatiques explicites. <br><br>  Ils sont eux-m√™mes organis√©s en une liste doublement li√©e appel√©e la liste des ar√®nes utilisables (ar√®nes_utilisables).  Cette liste est tri√©e par nombre de pools gratuits.  Moins il y a de piscines gratuites, plus l'ar√®ne est proche du haut de la liste. <br><br><img src="https://habrastorage.org/webt/4e/1f/fl/4e1ffl6eisaila8c1zxsmh3fc_m.png"><br><br>  Cela signifie que l'ar√®ne la plus compl√®te sera s√©lectionn√©e pour enregistrer encore plus de donn√©es.  Mais pourquoi exactement?  Pourquoi ne pas √©crire des donn√©es l√† o√π se trouve l'espace le plus libre? <br><br>  Cela nous am√®ne √† l'id√©e de lib√©rer compl√®tement la m√©moire.  Le fait est que dans certains cas, lorsque la m√©moire est lib√©r√©e, elle reste inaccessible au syst√®me d'exploitation.  Le processus Python le maintient distribu√© et l'utilise plus tard pour de nouvelles donn√©es.  La d√©sallocation compl√®te de la m√©moire renvoie la m√©moire au syst√®me d'exploitation <br><br>  Les ar√®nes ne sont pas les seules zones qui peuvent √™tre compl√®tement √©vacu√©es.  Ainsi, nous comprenons que les ar√®nes qui sont sur la liste ¬´plus proche du vide¬ª devraient √™tre lib√©r√©es.  Dans ce cas, la zone m√©moire peut vraiment √™tre compl√®tement lib√©r√©e, et en cons√©quence, la capacit√© m√©moire totale de votre programme Python est r√©duite. <br><br>  <b>Conclusion</b> <br><br>  La gestion de la m√©moire est l'une des parties les plus importantes du travail avec un ordinateur.  D'une mani√®re ou d'une autre, Python effectue pratiquement toutes ses op√©rations en mode furtif. <br><br>  De cet article, vous avez appris: <br><br><ul><li>  Qu'est-ce que la gestion de la m√©moire et pourquoi est-elle importante? </li><li>  Qu'est-ce que CPython, une impl√©mentation de base de Python; </li><li>  Fonctionnement des structures de donn√©es et des algorithmes dans la gestion de la m√©moire de CPython et stockage de vos donn√©es. </li></ul><br>  Python r√©sume les nombreuses nuances du travail avec un ordinateur.  Cela permet de travailler √† un niveau sup√©rieur et de se d√©barrasser des maux de t√™te sur le sujet o√π et comment les octets de votre programme sont stock√©s. <br><br>  Nous avons donc appris la gestion de la m√©moire en Python.  Traditionnellement, nous attendons vos commentaires, et nous vous invitons √©galement √† une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">journ√©e portes ouvertes</a> au cours Python Developer, qui aura lieu le 13 mars </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443312/">https://habr.com/ru/post/fr443312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443302/index.html">Comment Apple se pr√©pare pour une √®re apr√®s l'iPhone</a></li>
<li><a href="../fr443304/index.html">√ätre technophobe est inutile, m√™me si la technophobie est justifi√©e</a></li>
<li><a href="../fr443306/index.html">Huit lois de d√©nomination dans la conception UX (partie 1)</a></li>
<li><a href="../fr443308/index.html">Mythes de la physique moderne. Lois sur la conservation</a></li>
<li><a href="../fr443310/index.html">Revue du gadget de bien-√™tre f√©minin Bellabeat</a></li>
<li><a href="../fr443314/index.html">Qu'est-ce que la cordentit√©? [Traduction de l'article]</a></li>
<li><a href="../fr443318/index.html">√âcriture d'un chargeur de wasm pour Ghidra. Partie 1: √©nonc√© du probl√®me et configuration de l'environnement</a></li>
<li><a href="../fr443320/index.html">Syst√®me de gestion √©lectronique des documents "Vizier"</a></li>
<li><a href="../fr443322/index.html">GitLab 11.8 publi√© avec SAST pour JavaScript, GitLab Pages pour les sous-groupes et suivi des bogues</a></li>
<li><a href="../fr443324/index.html">Python contre Scala pour Apache Spark - r√©f√©rence attendue avec un r√©sultat inattendu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>