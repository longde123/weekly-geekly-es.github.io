<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👋 🤭 ❕ Révolution ou évolution du modèle objet page? 🏏 👂🏻 🚤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous! Je m'appelle Artyom Sokovets . Je veux partager la traduction de mon article sur Atlas: la réincarnation du framework HTML Elements, q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Révolution ou évolution du modèle objet page?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/474408/">  Bonjour à tous!  Je m'appelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Artyom Sokovets</a> .  Je veux partager la traduction de mon article sur Atlas: la réincarnation du framework HTML Elements, qui présente une approche complètement différente du travail avec Page Object. <br><br>  Avant d'entrer dans les détails, je veux demander: combien de wrappers pour objet de page connaissez-vous?  Élément de page, ScreenPlay, composant chargeable, chaîne d'invocations ... <br><br>  Et que se passera-t-il si nous prenons un objet Page avec une implémentation sur l'interface, visser le modèle de proxy et ajouter un peu de fonctionnalité Java 8? <br><br>  Si vous êtes intéressé, je suggère de passer au chat. <br><br><img src="https://habrastorage.org/webt/sk/d9/ms/skd9msauqsfknsh8sw9sxyrj2dk.png"><br><a name="habracut"></a><br><h2>  Présentation </h2><br>  Lors de l'utilisation du modèle de conception PageObject standard, un certain nombre de problèmes se posent: <br><br>  <b>Duplication d'éléments</b> <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyOtherPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; }</code> </pre> <br>  Ici, le bloc En-tête est utilisé dans diverses classes PageObject. <br><br>  <b>Manque de paramétrage pour les éléments</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EditUserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_1']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock lastActivity; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_2']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock blockReason; }</code> </pre><br>  Cet exemple décrit les éléments de la page de modification des paramètres utilisateur.  Deux éléments TextBlock contiennent un localisateur presque identique avec une différence uniquement dans la valeur du texte ("Text_1" et "Text_2"). <br><br>  <b>Le même type de code</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput innerPhone; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Email']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput email; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton save; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton toUsersList; }</code> </pre><br>  Dans le travail quotidien, vous pouvez trouver un objet Page, composé de nombreuses lignes de code avec les mêmes éléments.  À l'avenir, de telles classes seront "peu pratiques" à maintenir. <br><br>  <b>Grande classe avec marches</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSteps</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linkContains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, String s)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//... }</span></span></span></span></code> </pre><br>  Au fil du temps, la classe d'étapes pour travailler avec des éléments se développe.  Une plus grande attention est requise afin qu'il n'y ait pas de méthodes en double. <br><br><h2>  Votre guide du monde de Page Object </h2><br>  La réincarnation du framework HTML Elements vise à résoudre les problèmes ci-dessus, à réduire le nombre de lignes de code pour un projet de test, un travail plus réfléchi avec les listes et les attentes, ainsi qu'à affiner l'outil par vous-même grâce au système d'extension. <br><br>  <b>Atlas</b> est un framework Java de nouvelle génération pour développer des autotests UI avec l'implémentation du modèle Page Object via des interfaces.  Cette approche offre la possibilité d'héritage multiple dans la construction de l'arbre des éléments, ce qui fournit finalement un code concis pour vos autotests. <br><br>  La principale innovation du framework est l'utilisation d'interfaces au lieu de classes standard. <br><br>  Voici à quoi ressemble la description de la page d'accueil de github.com: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Le code ci-dessus décrit la page principale du site GitHub avec un élément et plusieurs héritages des couches WebPage et WithHeader (l'exemple est donné à des fins éducatives uniquement, donc la plupart des éléments Web sont omis). <br><br><h2>  Architecture du framework </h2><br>  Atlas se compose actuellement de trois modules: <br><br><ul><li>  atlas-core </li><li>  atlas-webdriver </li><li>  atlas-appium </li></ul><br>  L' <b>atlas-core</b> décrit les fonctionnalités de base pour le traitement des objets de page à l'aide des interfaces.  L'idée même d'utiliser des interfaces est tirée du célèbre outil Retrofit. <br><br><img src="https://habrastorage.org/webt/-s/mm/8w/-smm8wwthpyo0xu7lrweew0ew54.png"><br><br>  Les deux autres <b>modules</b> <b>atlas-webdriver</b> et <b>atlas-appium</b> sont utilisés pour développer des scripts UI web et UI mobile automatisés.  Le principal point d'entrée pour décrire les pages Web est l'interface WebPage et pour les écrans mobiles - Écran.  Conceptuellement, atlas-webdriver et atlas-appium sont construits sur des extensions (package * .extension). <br><br><h2>  Articles </h2><br><img src="https://habrastorage.org/webt/ot/hn/ql/othnql8naaytd5_voumj6ev9uwy.png"><br><br>  L'outil est livré avec <b>deux</b> classes spécialisées pour travailler avec des éléments d'interface utilisateur (un analogue de la classe WebElement). <br><br><img src="https://habrastorage.org/webt/xy/n0/6v/xyn06vwigi41-bob1cxykbq-7dq.png"><br><br>  <b>AtlasWebElement</b> et <b>AtlasMobileElement sont</b> complétés par les <b>méthodes</b> <b>should</b> et <b>waitUntil</b> .  (L'examen de ces méthodes sera développé dans l'article). <br><br>  L'outil offre la possibilité de créer vos propres composants en développant les classes ci-dessus, ce qui vous permet de créer un élément multiplateforme. <br><br><h2>  Caractéristiques clés </h2><br>  Examinons plus en détail la fonctionnalité de l'outil: <br><br><img src="https://habrastorage.org/webt/ef/yd/-c/efyd-c1u5ywgk7ql59ablf3aw5g.png"><br><br>  <b>Interfaces au lieu de classes</b> <br><br>  Lors de la description de PageObjects standard, des interfaces sont utilisées à la place des classes. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free trial of Enterprise Server')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Cet exemple décrit le lien sur la page de démarrage de GitHub. <br><br>  <b>Paramétrage des éléments</b> <br><br>  Imaginez que nous ayons un formulaire avec des champs: <br><br><img src="https://habrastorage.org/webt/uu/mb/wj/uumbwjd2-nqpladvu1m6khwmxg0.png" width="420"><br><br>  Pour le décrire, vous devez créer 11 variables avec l'annotation @FindBy et, si nécessaire, déclarer getter. <br><br>  Avec Atlas, vous n'avez besoin que d' <b>un</b> seul élément AtlasWebElement paramétré. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//div[text()='{{ text }}']/input"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"text"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String text)</span></span>; }</code> </pre><br>  Le code de test automatisé est le suivant: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().input(<span class="hljs-string"><span class="hljs-string">"First Name"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Postcode"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); }</code> </pre><br>  Nous passons à la page souhaitée, appelons la méthode avec le paramètre et effectuons les actions requises avec l'élément.  Une méthode avec un paramètre décrit un champ spécifique. <br><br>  <b>Héritage multiple</b> <br><br>  Il a été mentionné précédemment qu'un bloc (par exemple, en-tête), qui est utilisé dans différents objets de page, est une duplication de code. <br><br>  Il y a un github d'en-tête. <br><br><img src="https://habrastorage.org/webt/_p/ca/39/_pca39zx5r4iw6kkwy9azeqy4d4.png"><br><br>  Nous décrivons ce bloc (la plupart des éléments web sont omis): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//input[contains(@class,'header-search-input')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Ensuite, créez un calque qui peut être connecté à n'importe quelle page: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//header[contains(@class,'Header')]"</span></span>) <span class="hljs-function"><span class="hljs-function">Header </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">header</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Nous développons la page principale avec le bloc d'en-tête. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  En général, vous pouvez créer plus de calques et les connecter à la page souhaitée.  Dans l'exemple ci-dessous, connectez les couches d'en-tête, de pied de page et de barre latérale de la page principale. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithFooter</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithSidebar</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br>  Continuons.  L'en-tête contient 4 boutons, 3 menus déroulants et un champ de recherche: <br><br><img src="https://habrastorage.org/webt/bf/pk/dg/bfpkdgqfxasiualhznwxmis_nd8.png"><br><br>  Créons notre propre élément <b>Button</b> et décrivons quatre boutons avec un élément. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//a[contains(., '{{ value }}')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br>  Connectez le bouton bouton à la couche d'en-tête.  Ainsi, nous étendons la fonctionnalité de l'en-tête GitHub. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithButton</span></span></span><span class="hljs-class"> </span></span>{ … }</code> </pre><br>  Un élément <b>Button</b> séparé peut être connecté à différentes couches du site Web et obtenir rapidement l'élément souhaité sur la page souhaitée. <br><br>  Un exemple: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"Priing"</span></span>).click(); }</code> </pre><br>  Dans la deuxième ligne du test, on accède à l'en-tête du site, puis on appelle le bouton paramétré avec la valeur «Tarification» et on clique. <br><br>  Il peut y avoir plusieurs éléments sur le site testé qui se répètent de page en page.  Afin de ne pas les décrire tous avec l'approche standard des objets Page, vous pouvez les décrire une fois et les connecter si nécessaire.  Le gain de temps et de nombre de lignes de code est évident. <br><br><img src="https://habrastorage.org/webt/jk/mb/hw/jkmbhwzovztryyxlgoxu-slikau.png"><br><br>  <b>Méthodes par défaut</b> <br><br>  Java 8 a introduit des méthodes par défaut, qui sont utilisées pour prédéfinir la fonctionnalité souhaitée. <br><br>  Supposons que nous ayons un élément «nuisible»: par exemple, une case à cocher activée ou désactivée.  De nombreux scénarios le traversent.  Il est nécessaire d'activer la case à cocher si elle est désactivée: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).click(); }</code> </pre><br>  Afin de ne pas stocker tout ce code dans la classe step, il est possible de le placer à côté de l'élément comme méthode par défaut. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Checkbox</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//..."</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectCheckbox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (checkBox(value).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { checkBox(value).click(); } } }</code> </pre><br>  Maintenant, l'étape du test ressemblera à ceci: <br><br><pre> <code class="java hljs">onMainPage().rentFilter().selectCheckbox(<span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre><br>  Un autre exemple dans lequel vous souhaitez combiner le nettoyage et la saisie de caractères dans un champ. <br><br><pre> <code class="java hljs">onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).clear(); onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);</code> </pre><br>  Définissez une méthode qui efface le champ et renvoie l'élément lui-même: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//xpath"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withClearInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ input(value).clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input(value); } }</code> </pre><br>  Dans la méthode de test, l'étape est la suivante: <br><br><pre> <code class="java hljs">onMainPage().header().withClearInput(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>);</code> </pre><br>  De cette façon, le comportement souhaité dans l'élément peut être programmé. <br><br>  <b>Réessais</b> <br><br>  Atlas a des tentatives intégrées.  Vous n'avez pas à vous soucier des exceptions telles que <i>NotFoundException</i> , <i>StaleElementReferenceException</i> et <i>WebDriverException</i> , et vous pouvez également oublier d'utiliser les attentes explicites et implicites de l'API Selenium. <br><br><pre> <code class="java hljs">onSite().onSearchPage(<span class="hljs-string"><span class="hljs-string">"Junit 5"</span></span>).repositories().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">10</span></span>));</code> </pre><br>  Si, à un moment de la chaîne, vous avez détecté une exception, la phase se répète depuis le début. <br><br>  Il est possible de régler indépendamment l'intervalle de temps pendant lequel vous pouvez répéter ou la fréquence de répétition. <br><br><pre> <code class="java hljs">Atlas atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)) .context(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RetryerContext(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultRetryer(<span class="hljs-number"><span class="hljs-number">3000L</span></span>, <span class="hljs-number"><span class="hljs-number">1000L</span></span>, Collections.singletonList(Throwable.class))));</code> </pre><br>  Nous nous attendons à trois secondes avec un taux d'interrogation d'une fois par seconde. <br><br>  Nous pouvons également ajuster l'attente d'un élément spécifique à l'aide de l'annotation <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Réessayer</a></b> .  Pour tous les éléments, la recherche aura lieu dans les 3 secondes, et dans le cas d'un, elle sera de 20. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre><br>  <b>Travailler avec des listes</b> <br><br>  Prêt à l'emploi, l'outil permet de travailler avec des listes.  Qu'est-ce que cela signifie?  Il y a un champ avec une balise d'entrée où nous entrons le texte, puis une liste déroulante apparaît, les éléments n'apparaissent pas immédiatement. <br><br><img src="https://habrastorage.org/webt/-r/y7/uy/-ry7uy6gnjyp02kyy94ikb8prde.png"><br><br>  Pour de tels cas, il existe une entité ElementsCollection.  Avec son aide, il existe un travail avec des listes. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContributorsPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//ol[contains(@class, 'contrib-data')]//li[contains(@class, 'contrib-person')]"</span></span>) <span class="hljs-function"><span class="hljs-function">ElementsCollection&lt;RepositoryCard&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hovercards</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Utilisation: <br><br><pre> <code class="java hljs">onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>));</code> </pre><br>  Il est également possible de filtrer les éléments et de les convertir en une liste d'un autre type. <br><br>  <b>Assertions intelligentes</b> <br><br>  Comme mentionné précédemment, les <b>entités</b> <b>AtlasWebElement</b> et <b>AtlasMobileElement</b> utilisent les méthodes should, waitUntil pour travailler avec les vérifications (instructions). <br><br><div class="scrollable-table"><table><tbody><tr><th>  La méthode </th><th>  La description </th></tr><tr><td>  devrait (...) </td><td>  Effectue diverses instructions (vérifications) avec un élément.  Lance une <b>AssertionError</b> </td></tr><tr><td>  attendre (...) </td><td>  Effectue diverses instructions (vérifications) avec un élément.  <b>Lève une exception RuntimeException</b> </td></tr></tbody></table></div><br>  Pourquoi est-ce fait?  Pour gagner du temps lors de l'analyse des rapports d'exécution pour les scripts automatisés.  La plupart des contrôles fonctionnels sont effectués à la fin du script: ils intéressent un spécialiste des tests fonctionnels et les contrôles intermédiaires pour un spécialiste des tests automatisés.  Par conséquent, si la fonctionnalité du produit ne fonctionne pas, il est logique de lever une exception AssumptionError, sinon une RuntimeException. <br><br><img src="https://habrastorage.org/webt/fx/ry/lh/fxrylhza6j8ng2c8hawoaniixvc.png"><br><br><img src="https://habrastorage.org/webt/x3/jh/qv/x3jhqvyysqmclcpoe7recbi8tim.png"><br><br>  Allure montrera immédiatement à quoi nous avons affaire: soit nous avons un défaut de produit (le spécialiste FT prend le travail), soit l'autotest tombe en panne (le spécialiste AT le comprend). <br><br>  <b>Modèle d'extension</b> <br><br><img src="https://habrastorage.org/webt/nr/re/tj/nrretjnxyedry2guei6w0p1opqa.png"><br><br>  L'utilisateur a la possibilité de redéfinir les fonctionnalités de base de l'outil ou de mettre en œuvre sa propre fonctionnalité.  Le modèle d'extension Atlas est similaire au modèle d'extension JUnit 5. Les modules atlas-webdriver et atlas-appium sont construits sur des extensions.  Si vous êtes intéressé, consultez le code source. <br><br>  Examinons un exemple abstrait: il est nécessaire de développer des tests d'interface utilisateur pour Internet Explorer 11 (dans certains endroits, il est encore utilisé).  Il y a des moments où le clic standard sur les éléments ne fonctionne pas, alors vous pouvez utiliser le clic JS.  Vous décidez de remplacer temporairement le clic sur l'ensemble du projet de test. <br><br><pre> <code class="java hljs">onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"en"</span></span>).click();</code> </pre><br>  Comment faire <br><br>  Créez une extension qui implémente l'interface MethodExtension. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JSClickExt</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MethodExtension</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object proxy, MethodInfo methodInfo, Configuration config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WebDriver driver = config.getContext(WebDriverContext.class) .orElseThrow(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtlasException(<span class="hljs-string"><span class="hljs-string">"Context doesn't exist"</span></span>)).getValue(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(<span class="hljs-string"><span class="hljs-string">"arguments[0].click();"</span></span>, proxy); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proxy; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Method method)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> method.getName().equals(<span class="hljs-string"><span class="hljs-string">"click"</span></span>); } }</code> </pre><br>  Nous redéfinissons deux méthodes.  Dans la méthode test (), nous spécifions que nous remplaçons la méthode click.  La méthode invoke implémente la logique requise.  Maintenant, le clic sur l'élément se fera via JavaScript. <br><br>  Nous connectons l'extension comme suit: <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver, <span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>)) .extension(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JSClickExt());</code> </pre><br>  Avec l'aide d'extensions, il est possible de créer une recherche de localisateurs d'éléments dans la base de données et de mettre en œuvre d'autres fonctionnalités intéressantes - tout dépend de votre imagination et de vos besoins. <br><br>  <b>Point d'entrée unique vers PageObjects (WebSite)</b> <br><br>  L'outil vous permet de stocker toutes vos pages en un seul endroit et de ne travailler que par le biais de l'entité Site à l'avenir. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GitHubSite</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebSite</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">MainPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMainPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"search"</span></span>) <span class="hljs-function"><span class="hljs-function">SearchPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSearchPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Query(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"q"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"{profile}/{project}/tree/master/"</span></span>) <span class="hljs-function"><span class="hljs-function">ProjectPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onProjectPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Path(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"profile"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String profile, @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Path</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"project"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String project)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">ContributorsPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onContributorsPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  De plus, il est possible pour les pages de définir une URL rapide, des paramètres de requête et des segments de chemin. <br><br><pre> <code class="java hljs">onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click();</code> </pre><br>  La ligne ci-dessus contient deux segments de chemin (qameta et atlas), ce qui se traduit par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/qameta/atlas/tree/master</a> .  Le principal avantage de cette approche est qu'il est possible d'ouvrir immédiatement la page souhaitée sans cliquer dessus. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usePathWebSiteTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click(); onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>)); }</code> </pre><br>  <b>Travailler avec un élément mobile</b> <br><br>  L'utilisation d'un élément mobile (AtlasMobileElement) est similaire à l'utilisation de l'élément Web AtlasWebElement.  De plus, trois méthodes ont été ajoutées à AtlasMobileElement: faire défiler l'écran vers le haut / bas (scrollUp / scrollDown) et cliquer sur un élément en attente (longPress). <br><br>  Permettez-moi de vous donner un exemple de l'écran principal de l'application Wikipedia.  Un élément est décrit à la fois pour la plate-forme iOS et Android.  Ils décrivent également un bouton paramétré. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"{{ value }}"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">button</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br>  Les tests se ressemblent: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainScreen().searchWikipedia().click(); onSearchScreen().search().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onSearchScreen().item(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>).swipeDownOn().click(); onArticleScreen().articleTitle().should(allOf(displayed(), text(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>))); }</code> </pre><br>  Dans l'exemple ci-dessus, nous ouvrons la page principale de Wikipédia, cliquez sur la barre de recherche, entrez le texte Atlas, puis faites défiler jusqu'à l'élément de liste avec la valeur Atlas LV-3B et accédez à sa vue.  La dernière ligne vérifie que le titre est affiché et contient la valeur souhaitée. <br><br>  <b>Auditeur</b> <br><br>  La journalisation des événements peut être implémentée à l'aide d'un écouteur spécial (interface d'écoute).  Chaque méthode a quatre événements lorsqu'elle est appelée: <b>Before</b> , <b>Pass</b> , <b>Fail</b> .  <b>Après</b> . <br><br><img src="https://habrastorage.org/webt/vf/to/ku/vftokukrzuynpobt2yjtulqy2g8.png"><br><br>  À l'aide de cette interface, vous pouvez organiser les rapports.  Voici un exemple de l'écouteur Allure, qui peut être trouvé sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> . <br><br><img src="https://habrastorage.org/webt/x3/fo/3c/x3fo3cmcfe7beqygkorupy3ngxo.png"><br><br>  Ensuite, connectez l'écouteur lors de l'initialisation de la classe Atlas. <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)).listener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AllureListener());</code> </pre><br><br>  De la manière ci-dessus, il est possible de créer un écouteur pour différents systèmes de génération de rapports (par exemple, pour ReportPortal). <br><br><h2>  Connexion </h2><br><br>  Pour automatiser l'interface utilisateur Web, il suffit d'enregistrer la dépendance atlas-webdriver et d'indiquer la dernière version actuelle (la version 1.6.0 est pertinente au moment de la rédaction de ce texte). <br><br>  Maven: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-webdriver<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Gradle: <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-webdriver:1.+'</span></span> }</code> </pre><br><br>  Nous faisons de même si vous souhaitez automatiser UI Mobile. <br><br>  Maven: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-appium<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Gradle: <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-appium:1.+'</span></span> }</code> </pre><br><br><h2>  Utiliser </h2><br><br>  Après avoir ajouté la dépendance à votre projet, vous devez initialiser l'instance de classe Atlas. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startDriver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChromeDriver(); atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)); }</code> </pre><br>  Nous transmettons l'instance de configuration et le pilote au constructeur Atlas. <br><br>  Il existe actuellement deux configurations: WebDriverConfiguration et AppiumDriverConfiguration.  Chaque configuration contient des extensions par défaut spécifiques. <br><br>  Ensuite, nous définissons une méthode qui créera tous les PageObject. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> &lt;T extends WebPage&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;T&gt; page)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atlas.create(driver, page); }</code> </pre><br><br>  Un exemple de scénario de test simple: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onPage(MainPage.class).open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onPage(MainPage.class).header().searchInput().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onPage(MainPage.class).header().searchInput().submit(); }</code> </pre><br>  Nous ouvrons le site, tournons-nous vers la couche d'en-tête, recherchons un champ de texte (entrée de recherche), entrez le texte et appuyez sur Entrée. <br><br><h2>  Résumé </h2><br>  En conclusion, je tiens à noter que Atlas est un outil flexible avec de grandes fonctionnalités.  Il peut être personnalisé pour un projet de test spécifique d'une manière qui convient à votre équipe et à vous.  Développer des tests multiplateformes, etc. <br><br>  Des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">clips</a> vidéo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> rapports de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Heisenbug</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Selenium Camp</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nexign QA Meetup sont disponibles</a> .  Il y a un chat Telegram @atlashelp. <br><br>  En utilisant cet outil, vous pouvez réduire un nombre important de lignes de code (testé sur des projets d'entreprises telles que Yandex, SberTech et Tinkoff). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474408/">https://habr.com/ru/post/fr474408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474396/index.html">Dell assemblera pour l'industrie pétrolière le supercalculateur industriel le plus puissant de l'histoire</a></li>
<li><a href="../fr474400/index.html">Mythes sur la disponibilité du contraste des couleurs</a></li>
<li><a href="../fr474402/index.html">Guide de l'API Vavr Collections</a></li>
<li><a href="../fr474404/index.html">Analyse des problèmes résolus du championnat de programmation de Yandex (développement front-end) 2019</a></li>
<li><a href="../fr474406/index.html">La première apparition de BlueKeep à l'état sauvage enregistrée</a></li>
<li><a href="../fr474414/index.html">Nous écrivons notre propre moteur voxel</a></li>
<li><a href="../fr474418/index.html">Conférence DEFCON 27. Bénéficier des produits de piratage pour macOS. Partie 1</a></li>
<li><a href="../fr474420/index.html">Formation du thermostat: comment c'est arrivé</a></li>
<li><a href="../fr474422/index.html">Des plateformes open source passionnantes pour le développement d'applications mobiles</a></li>
<li><a href="../fr474424/index.html">Formation mixte - qu'est-ce que c'est et comment ça marche</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>