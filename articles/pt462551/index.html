<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÄ üöû ü§ôüèΩ Perguntas populares do desenvolvedor sobre testes ‚ôªÔ∏è üë®üèø‚Äçü§ù‚Äçüë®üèæ ü•ê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo n√£o √© um guia te√≥rico para escrever testes e n√£o instru√ß√µes sobre o uso de ferramentas em uma pilha espec√≠fica, mas uma s√©rie de perguntas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perguntas populares do desenvolvedor sobre testes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462551/"><p>  Este artigo n√£o √© um guia te√≥rico para escrever testes e n√£o instru√ß√µes sobre o uso de ferramentas em uma pilha espec√≠fica, mas uma s√©rie de perguntas populares, √†s vezes at√© muitas que n√£o foram formadas, para as quais tentarei dar respostas.  A fonte dessas perguntas s√£o colegas, pessoas de ambos os lados nas entrevistas e conhecidos, e as respostas ser√£o subjetivas, curtas e n√£o exaustivas, com base nos materiais de outras pessoas e em suas experi√™ncias.  O p√∫blico-alvo do artigo s√£o desenvolvedores que escrevem com certo sucesso, ou pelo menos tentam escrever testes, mas t√™m certas dificuldades em escrev√™-los. </p><br><p>  Tentei n√£o me apegar a uma linguagem espec√≠fica para aumentar o alcance dos leitores, mas farei uma reserva imediatamente de que trabalho no ecossistema PHP usando PHPUnit e, portanto, algumas das minhas conclus√µes podem n√£o ser adequadas para outros ecossistemas.  Ao selecionar perguntas e escrever, concentrei-me em muitos relat√≥rios e artigos e os usei como refer√™ncia. </p><br><p>  A raz√£o para escrever foi o recente artigo ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PHPUnit.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wretting the Doctrine Entity Manager</a> "por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">arrasto</a> , alguns dos quais discutirei tamb√©m. </p><br><p>  Lista de perguntas: </p><br><ul><li>  Escrever ou n√£o escrever testes? </li><li>  E se o tempo n√£o for alocado para testes? </li><li>  Tipos de teste, como escolher? </li><li>  Por que √© dif√≠cil escrever testes por um longo tempo? </li><li>  Como testar m√©todos privados? </li><li>  Como escrever testes de integra√ß√£o?  Como testar a base? </li><li>  Como: integra√ß√£o ou funcional? </li><li>  O que fazer com depend√™ncias externas? </li><li>  Como simplificar a navega√ß√£o entre testes e assunto do teste? </li><li>  Devo usar TDD? </li><li>  O que mais pode ser usado para melhorar o c√≥digo? </li></ul><a name="habracut"></a><br><h2 id="pisat-ili-ne-pisat-testy">  Escrever ou n√£o escrever testes? </h2><br><p>  Vi muitas opini√µes sobre esse assunto, mas vim por conta pr√≥pria: preciso me concentrar nas necessidades dos neg√≥cios. </p><br><p>  Para um peda√ßo de c√≥digo feito em algumas horas no joelho, os testes n√£o s√£o necess√°rios.  Por outro lado, para um grande projeto corporativo para centenas de recursos humanos, todos os tipos populares de testes s√£o necess√°rios.  E tudo o que h√° entre esses p√≥los deve ser considerado como um caso especial, avaliando o custo de certos tipos de testes: com testes, deve ser menor do que sem eles.  Pessoalmente, escrevo testes de fuma√ßa mesmo para um projeto CRUD min√∫sculo que dura algumas semanas, porque j√° a essa dist√¢ncia eles trazem benef√≠cios e reduzem o custo de desenvolvimento. </p><br><p>  Vantagens de testar, resumidamente e abstratamente: </p><br><ul><li>  Uma redu√ß√£o significativa no custo de corre√ß√£o de um bug devido √† detec√ß√£o precoce. </li><li>  Contratos de fixa√ß√£o. </li><li>  Documenta√ß√£o de baixo n√≠vel. </li><li>  Detec√ß√£o de problemas de arquitetura. </li></ul><br><p>  Portanto, se seus projetos n√£o s√£o scripts √∫nicos de v√°rios arquivos, eu definitivamente recomendo a cria√ß√£o de testes.  Portanto, a pergunta do t√≠tulo deve ser reformulada: "At√© que ponto os testes devem ser escritos e quais?"  Sobre isso mais. </p><br><h2 id="a-esli-na-testy-ne-vydelyayut-vremya">  E se o tempo n√£o for alocado para testes? </h2><br><p>  Esta √© uma quest√£o muito controversa, por isso farei uma reserva mais uma vez que estou falando exclusivamente sobre minha opini√£o subjetiva, enquanto tento fazer isso da maneira mais delicada poss√≠vel. </p><br><p>  Escrever testes √© t√£o uma tarefa quanto pensar, codificar ou depurar.  Os testes s√£o do mesmo c√≥digo da l√≥gica de neg√≥cios ou dos controladores.  Mas voc√™ tem alguma d√∫vida sobre eles?  Voc√™ n√£o define uma tarefa separada para escrever um controlador e n√£o o coordena com os gerentes? </p><br><p>  N√£o √© necess√°rio dedicar tempo adicional para escrever testes de unidade e integra√ß√£o.  Os testes s√£o escritos como parte da tarefa principal.  O l√≠der t√©cnico do projeto, como o propriet√°rio do reposit√≥rio do projeto e uma pessoa competente, decide como, o que e com que cobertura os testes devem ser escritos, concentrando-se nas tarefas do neg√≥cio, n√£o inflando, mas reduzindo o custo de desenvolvimento. </p><br><p>  No entanto, pode acontecer que o cliente n√£o acredite em testes e acredite que, com a ajuda deles, voc√™ n√£o economiza, mas apenas perde tempo.  Ele paga dinheiro e define condi√ß√µes, com o mesmo sucesso que pode proibir que voc√™ use um tema sombrio no seu IDE ou para usar cinco espa√ßos como recuo.  E se as condi√ß√µes n√£o forem discutidas ou a discuss√£o estiver em um impasse, sua escolha √© aceitar essas condi√ß√µes ou recusar.  Com consequ√™ncias de aconselhamento. </p><br><p>  Farei uma reserva de que o √∫ltimo √© verdadeiro apenas se voc√™ puder escrever testes, avaliar adequadamente os custos deles e o retorno estimado.  Se voc√™ quer aprender a escrev√™-las √†s custas do empregador em um projeto de curto prazo, e ele √© contra, ent√£o estou do lado dele. </p><br><h2 id="vidy-testirovaniya-kak-vybrat">  Tipos de teste, como escolher? </h2><br><p><img src="https://habrastorage.org/webt/cl/ht/zi/clhtzij_yx42bnmlrlkqsqff-oi.png" alt="Michael Cohen Testing Pyramid"></p><br><p>  Voc√™ pode olhar para a pir√¢mide de teste de Mike Cohen: como desenvolvedores, estamos interessados ‚Äã‚Äãnos dois n√≠veis mais baixos de teste.  O esfor√ßo m√°ximo deve ser dado ao teste de unidade, √© o mais barato (por baixo pre√ßo, quero dizer o tempo gasto em desenvolvimento e suporte), esses testes s√£o muito simples de implementar, muito simples de executar, funcionam rapidamente. </p><br><p>  Mas o teste de unidade √© sempre aplic√°vel ou aconselh√°vel?  Acredito que, para o CRUD primitivo, esses testes levem muito tempo com pouco impacto e n√£o garantam nada.  Tente testar o reposit√≥rio (Repository in DataMapper) e, em seguida, responda √† pergunta, o que ele nos deu.  Mas para uma variedade de calculadoras, essa abordagem ser√° ideal. </p><br><p>  Sempre tente escrever testes de unidade sempre que poss√≠vel, mas n√£o teste o que √© in√∫til testar. </p><br><p>  Como testar o trabalho conjunto de back-end e front-end, se houver projetos diferentes em pilhas diferentes?  Assim como o back-end e o aplicativo m√≥vel: trata-se de um teste do sistema e deve ser do interesse dos engenheiros de QA e DevOps, n√£o dos desenvolvedores (bem, apenas se voc√™ n√£o tiver um scrum real e impiedoso, onde a √∫nica fun√ß√£o dispon√≠vel √© um desenvolvedor de pilha completa). </p><br><p>  Al√©m disso, o teste do sistema √© o mais caro em termos de desenvolvimento e suporte, tanto em tempo quanto em infraestrutura.  A solu√ß√£o dos problemas relacionados a isso j√° est√° fora da compet√™ncia dos desenvolvedores "lineares" e a quest√£o de sua aplica√ß√£o e volumes deve ser decidida pelo diretor t√©cnico e pelos l√≠deres das √°reas, juntamente com o neg√≥cio. </p><br><h2 id="pochemu-mne-slozhno-i-dolgo-pisat-testy">  Por que √© dif√≠cil escrever testes por um longo tempo? </h2><br><p>  √Äs vezes, √© dif√≠cil escrever testes porque o c√≥digo n√£o est√° pronto para eles.  Uma pilha de multid√µes, onde alguns deles d√£o a outros, tamb√©m s√£o uma consequ√™ncia. </p><br><p>  N√£o use registros, singletones, localizadores, pois isso complica muito sua vida.  Esta foi a principal reivindica√ß√£o do artigo a que me referi acima.  Use o DI e implemente os reposit√≥rios necess√°rios nos servi√ßos imediatamente.  Observe a lei de Dem√©ter para evitar cadeias de mokas.  Tente um pouco de trabalho usando a metodologia TDD. </p><br><p>  Trate os testes como c√≥digo de primeira classe, observando o mesmo c√≥digo de alta qualidade da l√≥gica de neg√≥cios.  A m√° qualidade do c√≥digo de teste reduzir√° a produtividade ao longo do tempo. </p><br><h2 id="kak-testirovat-privatnye-metody">  Como testar m√©todos privados? </h2><br><p>  De jeito nenhum.  Estamos testando um contrato - a interface fornecida pelo m√≥dulo para outros m√≥dulos.  N√£o precisamos testar a implementa√ß√£o interna, ela pode mudar. </p><br><p>  E se houver alguma l√≥gica complicada dentro do teste e testar o contrato se transformar em uma grande quantidade de informa√ß√µes, onde algo estranho acontece dentro?  √â necess√°rio refatorar o c√≥digo, distribuindo-o em diferentes classes, onde esses m√©todos privados se tornar√£o p√∫blicos, eles j√° escrevem testes de unidade.  E se n√£o houvesse testes, esses lugares seriam dif√≠ceis de detectar, o que aumentaria o custo do suporte a esse c√≥digo. </p><br><h2 id="kak-pisat-integracionnye-testy-kak-testirovat-bazu">  Como escrever testes de integra√ß√£o?  Como testar a base? </h2><br><p>  Use acess√≥rios.  Explore ferramentas populares na sua pilha. <br>  N√£o escreva pacotes universais grandes de acess√≥rios, use seu n√∫mero m√≠nimo.  Se voc√™ precisar de um determinado estado de objetos para seus testes, n√£o reutilize esses equipamentos em outros locais onde esse estado n√£o √© necess√°rio; caso contr√°rio, o suporte ao teste se tornar√° mais complicado: alter√°-los para alguns testes interromper√° outros e exigir√° tempo adicional. </p><br><p>  Existem testes de integra√ß√£o que n√£o passam por um ciclo completo da solicita√ß√£o √† resposta, e a intera√ß√£o das classes √© verificada apenas dentro do componente.  Se eles n√£o tiverem trabalho direto com o banco de dados, voc√™ poder√° criar um conjunto de dados e / ou mok que ser√£o inseridos na entrada.  Nesses casos, voc√™ pode evitar o uso de acess√≥rios e reduzir a complexidade e o tempo de execu√ß√£o desses testes de integra√ß√£o para o n√≠vel modular. </p><br><h2 id="kak-pravilno-integracionnye-ili-funkcionalnye">  Como: integra√ß√£o ou funcional? </h2><br><p>  O teste de integra√ß√£o √© um dos n√≠veis de teste em termos de isolamento.  Teste funcional - teste de conformidade.  Essas defini√ß√µes est√£o em planos diferentes, e voc√™ n√£o pode colocar um sinal de igual entre eles, mas, na pr√°tica, nas conversas entre desenvolvedores, elas significam a mesma coisa, embora isso n√£o esteja correto. </p><br><h2 id="kak-byt-s-vneshnimi-zavisimostyami">  O que fazer com depend√™ncias externas? </h2><br><p>  Substitu√≠mos depend√™ncias externas por moki.  N√£o apenas para testes de unidade, mas tamb√©m para testes de integra√ß√£o. </p><br><p>  Por exemplo, usamos o cliente HTTPS para acessar alguma API atrav√©s da classe Guzzle.  Se voc√™ criar uma inst√¢ncia dessa classe dentro da classe testada, ser√° dif√≠cil substitu√≠-la, mas a solu√ß√£o ser√° muito simples: implementamos esse cliente no construtor e, durante o teste, substitu√≠mos por um moch. </p><br><h2 id="kak-uprostit-navigaciyu-mezhdu-testami-i-predmetom-testirovaniya">  Como simplificar a navega√ß√£o entre testes e assunto do teste? </h2><br><p>  As ferramentas de desenvolvimento modernas podem rastrear a localiza√ß√£o dos testes ou classes de teste se voc√™ usar padr√µes de nomenclatura.  Para facilitar a navega√ß√£o, voc√™ pode usar a combina√ß√£o de teclas Ctrl + Shift + T nos produtos JetBrains. Al√©m disso, se o teste n√£o existir, voc√™ ser√° solicitado a cri√°-lo e criar uma estrutura de arame. </p><br><p>  √Äs vezes, voc√™ precisa de v√°rias classes ou m√©todos de teste diferentes para o assunto do teste; nesse caso, voc√™ precisa ajudar o IDE, por exemplo, adicionar a anota√ß√£o @covers no caso do PHPUnit. </p><br><h2 id="dolzhen-li-ya-ispolzovat-tdd">  Devo usar TDD? </h2><br><p>  O TDD √© uma das metodologias de desenvolvimento nas quais iterativa e necessariamente escreve primeiro os testes e depois o c√≥digo.  Definitivamente, vale a pena experiment√°-lo, ele ensinar√° como escrever c√≥digo bem testado.  No entanto, essa abordagem n√£o foi amplamente utilizada, tem problemas.  Um desses problemas √© que voc√™ escreve testes que n√£o escreveria com a abordagem cl√°ssica.  E esses testes tamb√©m precisam ser suportados, gastando tempo com isso, e o benef√≠cio deles √© pequeno.  Por exemplo, testes para setters ou testes para classes em que nada acontece, exceto chamadas de depend√™ncia.  Esses locais s√£o melhor verificados pelo teste de integra√ß√£o. </p><br><h2 id="chto-esche-mozhno-ispolzovat-dlya-uluchsheniya-koda">  O que mais pode ser usado para melhorar o c√≥digo? </h2><br><p>  As ferramentas de an√°lise est√°tica s√£o outra maneira de melhorar a qualidade do seu c√≥digo.  Eles se sobrep√µem parcialmente aos testes pelo resultado, mas geralmente descobrem que os testes n√£o foram encontrados, especialmente com baixa cobertura.  Sua vantagem indiscut√≠vel - voc√™ v√™ o resultado imediatamente no IDE e obt√©m feedback instantaneamente. </p><br><p>  Isso n√£o significa que √© suficiente deix√°-los apenas no IDE; √© altamente recomend√°vel us√°-los no IC para ver poss√≠veis erros e n√£o estragar esse c√≥digo. <br>  Tamb√©m recomendo adicionar o suporte da ferramenta de verifica√ß√£o de estilo de c√≥digo ao IDE e ao CI.  Os erros geralmente s√£o ocultados entre c√≥digos escritos descuidadamente e essas ferramentas permitem encontrar essas √°reas. </p><br><h2 id="materialy-dlya-dalneyshego-izucheniya">  Materiais para estudos adicionais </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Testando pir√¢mide fowler</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria fundamental</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Antipadr√µes de teste de software</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Receitas simples para bons testes de unidade (Konstantin Zaikin / Yandex Academy)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por que e como escrever testes de unidade de alta qualidade (Alexey Solodky / Badoo)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PRIMEIROS princ√≠pios</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TDDx2, BDD, DDD, FDD, MDD e PDD, ou o que voc√™ quiser saber sobre Desenvolvimento Orientado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como calcular o ROI da automa√ß√£o de teste com o Selenium?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462551/">https://habr.com/ru/post/pt462551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462541/index.html">Usando Condicional no Spring</a></li>
<li><a href="../pt462543/index.html">Meetup sobre Java em Raiffeisenbank</a></li>
<li><a href="../pt462545/index.html">Bloqueio de telegrama, sub-rede Hetzner / 16, experi√™ncia com ILV</a></li>
<li><a href="../pt462547/index.html">SGX Malvar: como os vil√µes exploram a nova tecnologia da Intel para prop√≥sitos errados</a></li>
<li><a href="../pt462549/index.html">Blockchain de quorum: integra√ß√£o ao c√≥digo Java</a></li>
<li><a href="../pt462553/index.html">Um pouco sobre simples. Projeto de teste. Parte 1</a></li>
<li><a href="../pt462555/index.html">Discuss√£o: e se trabalhar sem cookies - informamos quais s√£o as alternativas</a></li>
<li><a href="../pt462563/index.html">Webinar "Como sobreviver √† conformidade?" A melhor abordagem para atender aos requisitos regulat√≥rios ‚Äù</a></li>
<li><a href="../pt462565/index.html">Como preparar dados para o SAP Process Mining by Celonis</a></li>
<li><a href="../pt462567/index.html">Sodinokibi Ransomware: um estudo detalhado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>