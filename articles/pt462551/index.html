<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐀 🚞 🤙🏽 Perguntas populares do desenvolvedor sobre testes ♻️ 👨🏿‍🤝‍👨🏾 🥐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo não é um guia teórico para escrever testes e não instruções sobre o uso de ferramentas em uma pilha específica, mas uma série de perguntas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perguntas populares do desenvolvedor sobre testes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462551/"><p>  Este artigo não é um guia teórico para escrever testes e não instruções sobre o uso de ferramentas em uma pilha específica, mas uma série de perguntas populares, às vezes até muitas que não foram formadas, para as quais tentarei dar respostas.  A fonte dessas perguntas são colegas, pessoas de ambos os lados nas entrevistas e conhecidos, e as respostas serão subjetivas, curtas e não exaustivas, com base nos materiais de outras pessoas e em suas experiências.  O público-alvo do artigo são desenvolvedores que escrevem com certo sucesso, ou pelo menos tentam escrever testes, mas têm certas dificuldades em escrevê-los. </p><br><p>  Tentei não me apegar a uma linguagem específica para aumentar o alcance dos leitores, mas farei uma reserva imediatamente de que trabalho no ecossistema PHP usando PHPUnit e, portanto, algumas das minhas conclusões podem não ser adequadas para outros ecossistemas.  Ao selecionar perguntas e escrever, concentrei-me em muitos relatórios e artigos e os usei como referência. </p><br><p>  A razão para escrever foi o recente artigo “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PHPUnit.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wretting the Doctrine Entity Manager</a> "por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">arrasto</a> , alguns dos quais discutirei também. </p><br><p>  Lista de perguntas: </p><br><ul><li>  Escrever ou não escrever testes? </li><li>  E se o tempo não for alocado para testes? </li><li>  Tipos de teste, como escolher? </li><li>  Por que é difícil escrever testes por um longo tempo? </li><li>  Como testar métodos privados? </li><li>  Como escrever testes de integração?  Como testar a base? </li><li>  Como: integração ou funcional? </li><li>  O que fazer com dependências externas? </li><li>  Como simplificar a navegação entre testes e assunto do teste? </li><li>  Devo usar TDD? </li><li>  O que mais pode ser usado para melhorar o código? </li></ul><a name="habracut"></a><br><h2 id="pisat-ili-ne-pisat-testy">  Escrever ou não escrever testes? </h2><br><p>  Vi muitas opiniões sobre esse assunto, mas vim por conta própria: preciso me concentrar nas necessidades dos negócios. </p><br><p>  Para um pedaço de código feito em algumas horas no joelho, os testes não são necessários.  Por outro lado, para um grande projeto corporativo para centenas de recursos humanos, todos os tipos populares de testes são necessários.  E tudo o que há entre esses pólos deve ser considerado como um caso especial, avaliando o custo de certos tipos de testes: com testes, deve ser menor do que sem eles.  Pessoalmente, escrevo testes de fumaça mesmo para um projeto CRUD minúsculo que dura algumas semanas, porque já a essa distância eles trazem benefícios e reduzem o custo de desenvolvimento. </p><br><p>  Vantagens de testar, resumidamente e abstratamente: </p><br><ul><li>  Uma redução significativa no custo de correção de um bug devido à detecção precoce. </li><li>  Contratos de fixação. </li><li>  Documentação de baixo nível. </li><li>  Detecção de problemas de arquitetura. </li></ul><br><p>  Portanto, se seus projetos não são scripts únicos de vários arquivos, eu definitivamente recomendo a criação de testes.  Portanto, a pergunta do título deve ser reformulada: "Até que ponto os testes devem ser escritos e quais?"  Sobre isso mais. </p><br><h2 id="a-esli-na-testy-ne-vydelyayut-vremya">  E se o tempo não for alocado para testes? </h2><br><p>  Esta é uma questão muito controversa, por isso farei uma reserva mais uma vez que estou falando exclusivamente sobre minha opinião subjetiva, enquanto tento fazer isso da maneira mais delicada possível. </p><br><p>  Escrever testes é tão uma tarefa quanto pensar, codificar ou depurar.  Os testes são do mesmo código da lógica de negócios ou dos controladores.  Mas você tem alguma dúvida sobre eles?  Você não define uma tarefa separada para escrever um controlador e não o coordena com os gerentes? </p><br><p>  Não é necessário dedicar tempo adicional para escrever testes de unidade e integração.  Os testes são escritos como parte da tarefa principal.  O líder técnico do projeto, como o proprietário do repositório do projeto e uma pessoa competente, decide como, o que e com que cobertura os testes devem ser escritos, concentrando-se nas tarefas do negócio, não inflando, mas reduzindo o custo de desenvolvimento. </p><br><p>  No entanto, pode acontecer que o cliente não acredite em testes e acredite que, com a ajuda deles, você não economiza, mas apenas perde tempo.  Ele paga dinheiro e define condições, com o mesmo sucesso que pode proibir que você use um tema sombrio no seu IDE ou para usar cinco espaços como recuo.  E se as condições não forem discutidas ou a discussão estiver em um impasse, sua escolha é aceitar essas condições ou recusar.  Com consequências de aconselhamento. </p><br><p>  Farei uma reserva de que o último é verdadeiro apenas se você puder escrever testes, avaliar adequadamente os custos deles e o retorno estimado.  Se você quer aprender a escrevê-las às custas do empregador em um projeto de curto prazo, e ele é contra, então estou do lado dele. </p><br><h2 id="vidy-testirovaniya-kak-vybrat">  Tipos de teste, como escolher? </h2><br><p><img src="https://habrastorage.org/webt/cl/ht/zi/clhtzij_yx42bnmlrlkqsqff-oi.png" alt="Michael Cohen Testing Pyramid"></p><br><p>  Você pode olhar para a pirâmide de teste de Mike Cohen: como desenvolvedores, estamos interessados ​​nos dois níveis mais baixos de teste.  O esforço máximo deve ser dado ao teste de unidade, é o mais barato (por baixo preço, quero dizer o tempo gasto em desenvolvimento e suporte), esses testes são muito simples de implementar, muito simples de executar, funcionam rapidamente. </p><br><p>  Mas o teste de unidade é sempre aplicável ou aconselhável?  Acredito que, para o CRUD primitivo, esses testes levem muito tempo com pouco impacto e não garantam nada.  Tente testar o repositório (Repository in DataMapper) e, em seguida, responda à pergunta, o que ele nos deu.  Mas para uma variedade de calculadoras, essa abordagem será ideal. </p><br><p>  Sempre tente escrever testes de unidade sempre que possível, mas não teste o que é inútil testar. </p><br><p>  Como testar o trabalho conjunto de back-end e front-end, se houver projetos diferentes em pilhas diferentes?  Assim como o back-end e o aplicativo móvel: trata-se de um teste do sistema e deve ser do interesse dos engenheiros de QA e DevOps, não dos desenvolvedores (bem, apenas se você não tiver um scrum real e impiedoso, onde a única função disponível é um desenvolvedor de pilha completa). </p><br><p>  Além disso, o teste do sistema é o mais caro em termos de desenvolvimento e suporte, tanto em tempo quanto em infraestrutura.  A solução dos problemas relacionados a isso já está fora da competência dos desenvolvedores "lineares" e a questão de sua aplicação e volumes deve ser decidida pelo diretor técnico e pelos líderes das áreas, juntamente com o negócio. </p><br><h2 id="pochemu-mne-slozhno-i-dolgo-pisat-testy">  Por que é difícil escrever testes por um longo tempo? </h2><br><p>  Às vezes, é difícil escrever testes porque o código não está pronto para eles.  Uma pilha de multidões, onde alguns deles dão a outros, também são uma consequência. </p><br><p>  Não use registros, singletones, localizadores, pois isso complica muito sua vida.  Esta foi a principal reivindicação do artigo a que me referi acima.  Use o DI e implemente os repositórios necessários nos serviços imediatamente.  Observe a lei de Deméter para evitar cadeias de mokas.  Tente um pouco de trabalho usando a metodologia TDD. </p><br><p>  Trate os testes como código de primeira classe, observando o mesmo código de alta qualidade da lógica de negócios.  A má qualidade do código de teste reduzirá a produtividade ao longo do tempo. </p><br><h2 id="kak-testirovat-privatnye-metody">  Como testar métodos privados? </h2><br><p>  De jeito nenhum.  Estamos testando um contrato - a interface fornecida pelo módulo para outros módulos.  Não precisamos testar a implementação interna, ela pode mudar. </p><br><p>  E se houver alguma lógica complicada dentro do teste e testar o contrato se transformar em uma grande quantidade de informações, onde algo estranho acontece dentro?  É necessário refatorar o código, distribuindo-o em diferentes classes, onde esses métodos privados se tornarão públicos, eles já escrevem testes de unidade.  E se não houvesse testes, esses lugares seriam difíceis de detectar, o que aumentaria o custo do suporte a esse código. </p><br><h2 id="kak-pisat-integracionnye-testy-kak-testirovat-bazu">  Como escrever testes de integração?  Como testar a base? </h2><br><p>  Use acessórios.  Explore ferramentas populares na sua pilha. <br>  Não escreva pacotes universais grandes de acessórios, use seu número mínimo.  Se você precisar de um determinado estado de objetos para seus testes, não reutilize esses equipamentos em outros locais onde esse estado não é necessário; caso contrário, o suporte ao teste se tornará mais complicado: alterá-los para alguns testes interromperá outros e exigirá tempo adicional. </p><br><p>  Existem testes de integração que não passam por um ciclo completo da solicitação à resposta, e a interação das classes é verificada apenas dentro do componente.  Se eles não tiverem trabalho direto com o banco de dados, você poderá criar um conjunto de dados e / ou mok que serão inseridos na entrada.  Nesses casos, você pode evitar o uso de acessórios e reduzir a complexidade e o tempo de execução desses testes de integração para o nível modular. </p><br><h2 id="kak-pravilno-integracionnye-ili-funkcionalnye">  Como: integração ou funcional? </h2><br><p>  O teste de integração é um dos níveis de teste em termos de isolamento.  Teste funcional - teste de conformidade.  Essas definições estão em planos diferentes, e você não pode colocar um sinal de igual entre eles, mas, na prática, nas conversas entre desenvolvedores, elas significam a mesma coisa, embora isso não esteja correto. </p><br><h2 id="kak-byt-s-vneshnimi-zavisimostyami">  O que fazer com dependências externas? </h2><br><p>  Substituímos dependências externas por moki.  Não apenas para testes de unidade, mas também para testes de integração. </p><br><p>  Por exemplo, usamos o cliente HTTPS para acessar alguma API através da classe Guzzle.  Se você criar uma instância dessa classe dentro da classe testada, será difícil substituí-la, mas a solução será muito simples: implementamos esse cliente no construtor e, durante o teste, substituímos por um moch. </p><br><h2 id="kak-uprostit-navigaciyu-mezhdu-testami-i-predmetom-testirovaniya">  Como simplificar a navegação entre testes e assunto do teste? </h2><br><p>  As ferramentas de desenvolvimento modernas podem rastrear a localização dos testes ou classes de teste se você usar padrões de nomenclatura.  Para facilitar a navegação, você pode usar a combinação de teclas Ctrl + Shift + T nos produtos JetBrains. Além disso, se o teste não existir, você será solicitado a criá-lo e criar uma estrutura de arame. </p><br><p>  Às vezes, você precisa de várias classes ou métodos de teste diferentes para o assunto do teste; nesse caso, você precisa ajudar o IDE, por exemplo, adicionar a anotação @covers no caso do PHPUnit. </p><br><h2 id="dolzhen-li-ya-ispolzovat-tdd">  Devo usar TDD? </h2><br><p>  O TDD é uma das metodologias de desenvolvimento nas quais iterativa e necessariamente escreve primeiro os testes e depois o código.  Definitivamente, vale a pena experimentá-lo, ele ensinará como escrever código bem testado.  No entanto, essa abordagem não foi amplamente utilizada, tem problemas.  Um desses problemas é que você escreve testes que não escreveria com a abordagem clássica.  E esses testes também precisam ser suportados, gastando tempo com isso, e o benefício deles é pequeno.  Por exemplo, testes para setters ou testes para classes em que nada acontece, exceto chamadas de dependência.  Esses locais são melhor verificados pelo teste de integração. </p><br><h2 id="chto-esche-mozhno-ispolzovat-dlya-uluchsheniya-koda">  O que mais pode ser usado para melhorar o código? </h2><br><p>  As ferramentas de análise estática são outra maneira de melhorar a qualidade do seu código.  Eles se sobrepõem parcialmente aos testes pelo resultado, mas geralmente descobrem que os testes não foram encontrados, especialmente com baixa cobertura.  Sua vantagem indiscutível - você vê o resultado imediatamente no IDE e obtém feedback instantaneamente. </p><br><p>  Isso não significa que é suficiente deixá-los apenas no IDE; é altamente recomendável usá-los no IC para ver possíveis erros e não estragar esse código. <br>  Também recomendo adicionar o suporte da ferramenta de verificação de estilo de código ao IDE e ao CI.  Os erros geralmente são ocultados entre códigos escritos descuidadamente e essas ferramentas permitem encontrar essas áreas. </p><br><h2 id="materialy-dlya-dalneyshego-izucheniya">  Materiais para estudos adicionais </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Testando pirâmide fowler</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria fundamental</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Antipadrões de teste de software</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Receitas simples para bons testes de unidade (Konstantin Zaikin / Yandex Academy)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por que e como escrever testes de unidade de alta qualidade (Alexey Solodky / Badoo)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PRIMEIROS princípios</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TDDx2, BDD, DDD, FDD, MDD e PDD, ou o que você quiser saber sobre Desenvolvimento Orientado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como calcular o ROI da automação de teste com o Selenium?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462551/">https://habr.com/ru/post/pt462551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462541/index.html">Usando Condicional no Spring</a></li>
<li><a href="../pt462543/index.html">Meetup sobre Java em Raiffeisenbank</a></li>
<li><a href="../pt462545/index.html">Bloqueio de telegrama, sub-rede Hetzner / 16, experiência com ILV</a></li>
<li><a href="../pt462547/index.html">SGX Malvar: como os vilões exploram a nova tecnologia da Intel para propósitos errados</a></li>
<li><a href="../pt462549/index.html">Blockchain de quorum: integração ao código Java</a></li>
<li><a href="../pt462553/index.html">Um pouco sobre simples. Projeto de teste. Parte 1</a></li>
<li><a href="../pt462555/index.html">Discussão: e se trabalhar sem cookies - informamos quais são as alternativas</a></li>
<li><a href="../pt462563/index.html">Webinar "Como sobreviver à conformidade?" A melhor abordagem para atender aos requisitos regulatórios ”</a></li>
<li><a href="../pt462565/index.html">Como preparar dados para o SAP Process Mining by Celonis</a></li>
<li><a href="../pt462567/index.html">Sodinokibi Ransomware: um estudo detalhado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>