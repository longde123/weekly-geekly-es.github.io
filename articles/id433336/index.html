<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ…ğŸ½ ğŸ˜ ğŸ‘†ğŸ» Implementasi perpustakaan Babel ğŸ‘° ğŸ‘©ğŸ¾â€ğŸ« ğŸŒ¦ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel ini Anda akan mempelajari semua tentang perpustakaan Babel, dan yang paling penting - cara membuatnya kembali, dan memang perpustakaan m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implementasi perpustakaan Babel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433336/">  Dalam artikel ini Anda akan mempelajari semua tentang perpustakaan Babel, dan yang paling penting - cara membuatnya kembali, dan memang perpustakaan mana pun. <a name="habracut"></a><br><br>  Mari kita mulai dengan kutipan dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Perpustakaan Babel</a> oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Luis Borges</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Kutipan</b> <div class="spoiler_text"><blockquote>  <i>â€œAlam semesta - beberapa menyebutnya Perpustakaan - terdiri dari sejumlah besar galeri hexagonal yang tak terbatas, dengan ruang ventilasi luas yang dikelilingi oleh rel rendah.</i>  <i>Dari setiap segi enam, dua lantai atas dan bawah terlihat, hingga tak terbatas. â€</i> </blockquote><br><blockquote>  <i>â€œPerpustakaan adalah sebuah bola, pusat tepatnya di salah satu segi enam, dan permukaannya tidak dapat diakses.</i>  <i>Di setiap dinding setiap segi enam ada lima rak, di setiap rak ada tiga puluh dua buku dengan format yang sama, setiap buku memiliki empat ratus sepuluh halaman, setiap halaman memiliki empat puluh baris, setiap baris berisi sekitar delapan puluh huruf hitam.</i>  <i>Ada beberapa huruf di tulang belakang buku ini, tetapi mereka tidak menentukan atau memberi tahu apa yang akan dikatakan halaman-halaman itu.</i>  <i>Ketidakcocokan ini, saya tahu, dulu tampak misterius. "</i> </blockquote><br></div></div><br>  Jika Anda memasukkan segi enam acak, naik ke dinding mana pun, lihat rak apa saja dan ambil buku yang paling Anda sukai, maka kemungkinan besar Anda akan kesal.  Bagaimanapun, Anda diharapkan untuk mencari tahu tentang arti kehidupan di sana, tetapi Anda melihat beberapa karakter yang aneh.  Tapi jangan cepat kesal!  Sebagian besar buku tidak ada artinya, karena mereka adalah pencarian kombinatorial dari semua varian yang mungkin dari dua puluh lima karakter ( <b>ini adalah alfabet yang digunakan Borges di perpustakaannya, tetapi kemudian pembaca akan mengetahui bahwa ada sejumlah karakter di perpustakaan</b> ).  Hukum utama perpustakaan adalah bahwa tidak ada dua buku yang benar-benar identik di dalamnya, sehingga jumlahnya terbatas, dan perpustakaan juga suatu hari nanti akan berakhir.  Borges percaya bahwa perpustakaan itu berkala: <br><br><div class="spoiler">  <b class="spoiler_title">Kutipan</b> <div class="spoiler_text"><blockquote>  <i>â€œMungkin rasa takut dan usia tua menipu saya, tetapi saya berpikir bahwa umat manusia - satu-satunya - dekat dengan kepunahan, dan Perpustakaan akan bertahan: diterangi, tidak berpenghuni, tak ada habisnya, sama sekali tidak bergerak, diisi dengan volume yang berharga, tidak berguna, tidak rusak, misterius.</i>  <i>Saya hanya menulis tanpa akhir.</i>  <i>Saya tidak menetapkan kata ini karena cinta untuk retorika;</i>  <i>Saya pikir logis untuk mengasumsikan bahwa dunia ini tidak ada habisnya.</i>  <i>Mereka yang menganggapnya terbatas mengakui bahwa di suatu tempat di koridor jarak, dan tangga, dan segi enam dapat berakhir karena alasan yang tidak diketahui - asumsi seperti itu tidak masuk akal.</i>  <i>Mereka yang membayangkannya tanpa batas lupa bahwa jumlah buku yang mungkin terbatas.</i>  <i>Saya berani mengusulkan solusi untuk masalah kuno ini: Perpustakaan tidak terbatas dan berkala.</i>  <i>Jika pengembara abadi memulai perjalanan ke segala arah, ia akan dapat memverifikasi setelah berabad-abad bahwa buku-buku yang sama diulang dalam kekacauan yang sama (yang, ketika diulang, menjadi urutan - Orde).</i>  <i>Harapan anggun ini mencerahkan kesepian saya. "</i> </blockquote><br></div></div><br>  Dibandingkan dengan omong kosong, ada sangat sedikit buku yang isinya setidaknya dapat dipahami oleh seseorang, tetapi ini tidak mengubah fakta bahwa perpustakaan memuat semua teks yang pernah dan akan ditemukan oleh seseorang.  Dan selain itu, sejak kecil Anda terbiasa mempertimbangkan beberapa urutan simbol yang bermakna, sementara yang lain tidak.  Bahkan, dalam konteks perpustakaan, tidak ada perbedaan di antara mereka.  Tetapi apa yang masuk akal memiliki persentase yang jauh lebih rendah, dan kami menyebutnya bahasa.  Ini adalah sarana komunikasi antar manusia.  Bahasa apa pun hanya berisi beberapa puluh ribu kata, yang kita ketahui 70% dari kekuatannya, maka ternyata kita tidak bisa menafsirkan sebagian besar pencarian kombinatorial buku.  Dan seseorang menderita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">apophenia</a> dan bahkan dalam rangkaian karakter acak melihat makna tersembunyi.  Tapi ini ide yang bagus untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">steganografi</a> !  Baiklah, saya terus membahas topik ini di komentar. <br><br>  Sebelum melanjutkan dengan implementasi perpustakaan ini, saya akan mengejutkan Anda dengan fakta yang menarik: jika Anda ingin membuat kembali perpustakaan Babel Louis Borges, Anda tidak akan berhasil, karena volumenya melebihi volume Alam Semesta yang kelihatan 10 ^ 611338 (!) Times.  Dan tentang apa yang akan terjadi di perpustakaan yang lebih besar, saya bahkan takut untuk berpikir. <br><br><h2>  Implementasi perpustakaan </h2><br><h3>  Deskripsi modul </h3><br>  Pengantar kecil kami sudah berakhir.  Tetapi ini bukan tanpa makna: sekarang Anda mengerti seperti apa perpustakaan Babel, dan membaca hanya akan lebih menarik.  Tapi saya akan menjauh dari ide asli, saya ingin membuat perpustakaan "universal", yang akan dibahas nanti.  Saya akan menulis dalam JavaScript di bawah Node.js. Apa yang harus dapat dilakukan perpustakaan? <br><ul><li>  Temukan teks yang diinginkan dengan cepat dan tampilkan lokasinya di perpustakaan </li><li>  Tentukan judul buku </li><li>  Temukan buku dengan judul yang tepat dengan cepat </li></ul><br>  Selain itu, itu harus bersifat universal, yaitu  salah satu parameter pustaka dapat diubah jika saya mau.  Baiklah, saya pikir saya pertama-tama akan menunjukkan seluruh kode modul, kita akan menganalisisnya secara terperinci, melihat cara kerjanya, dan saya akan mengatakan beberapa kata.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori Github</a> <br><br>  File utama adalah index.js, seluruh logika perpustakaan dijelaskan di sana, saya akan menjelaskan isi file ini. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sha512 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`js-sha512`</span></span>);</code> </pre> <br>  Kami menghubungkan modul yang mengimplementasikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">algoritma hasa sha512</a> .  Ini mungkin tampak aneh bagi Anda, tetapi itu tetap berguna bagi kami. <br>  Apa output dari modul kami?  Ini mengembalikan fungsi, panggilan yang akan mengembalikan objek perpustakaan dengan semua metode yang diperlukan.  Kami dapat mengembalikannya segera, tetapi mengelola pustaka tidak akan begitu nyaman ketika kami memberikan parameter ke fungsi dan mendapatkan pustaka "yang diperlukan".  Ini akan memungkinkan kita untuk membuat perpustakaan "universal".  Karena saya mencoba menulis dalam gaya ES6, fungsi panah saya menerima objek sebagai parameter, yang selanjutnya akan dihancurkan menjadi variabel yang diperlukan: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ lengthOfPage = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4819</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lengthOfTitle = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, digs = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'0123456789abcdefghijklmnopqrstuvwxyz'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, alphabet = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">', .'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, wall = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, shelf = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, volume = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, page = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">421</span></span></span></span><span class="hljs-function"><span class="hljs-params">, } = {}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... };</span></span></code> </pre><br>  Sekarang mari kita periksa parameternya.  Sebagai parameter numerik standar, saya memutuskan untuk memilih bilangan prima, karena bagi saya tampaknya akan lebih menarik. <br><br><ul><li>  <b>lengthOfPage</b> - jumlah, jumlah karakter pada satu halaman.  Standarnya adalah 4819. Jika kita memfaktorkan angka ini, kita mendapatkan 61 dan 79. 61 baris dengan 79 karakter, atau sebaliknya, tetapi saya lebih suka opsi pertama. </li><li>  <b>lengthOfTitle</b> - jumlah, jumlah karakter dalam judul judul buku. </li><li>  <b>digs</b> - string, kemungkinan digit angka dengan basis sama dengan panjang string ini.  Untuk apa angka ini?  Ini akan berisi nomor (pengidentifikasi) dari segi enam yang ingin kita tuju.  Secara default, ini adalah huruf latin kecil dan angka 0-9.  Sebagian besar teks dikodekan di sini, sehingga akan menjadi sejumlah besar - beberapa ribu bit (tergantung pada jumlah karakter pada halaman), tetapi akan diproses karakter demi karakter. </li><li>  <b>alfabet</b> - string, karakter yang ingin kita lihat di perpustakaan.  Itu akan diisi dengan mereka.  Agar semuanya berfungsi dengan benar, jumlah karakter dalam alfabet harus sama dengan jumlah karakter dalam string dengan kemungkinan digit nomor yang mengidentifikasi segi enam. </li><li>  nomor dinding, nomor dinding maksimum, standar 5 </li><li>  nomor <b>rak</b> , jumlah <b>rak</b> maksimum, standar 7 </li><li>  <b>volume</b> - angka, nomor buku maksimum, secara default 31 </li><li>  <b>halaman</b> - nomor, nomor halaman maksimum, standar 421 </li></ul><br>  Seperti yang Anda lihat, ini sedikit seperti perpustakaan Babilonia Luis Borges yang asli.  Tetapi saya telah mengatakan lebih dari sekali bahwa kita akan membuat perpustakaan "universal" yang dapat menjadi cara kita ingin melihatnya (oleh karena itu, nomor hex dapat diartikan dengan cara yang berbeda, misalnya, hanya pengidentifikasi dari beberapa tempat di mana yang diinginkan disimpan informasi).  Perpustakaan Babilonia hanyalah salah satunya.  Tetapi semuanya memiliki banyak kesamaan - satu algoritma bertanggung jawab atas kinerjanya, yang sekarang akan dibahas. <br><br><h3>  Algoritma pencarian halaman dan tampilan </h3><br>  Ketika kami pergi ke beberapa alamat, kami melihat isi halaman.  Jika kita pergi ke alamat yang sama lagi, kontennya harus persis sama.  Properti perpustakaan ini menyediakan algoritma untuk menghasilkan angka pseudorandom - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">metode kongruen linier</a> .  Ketika kita perlu memilih karakter untuk menghasilkan alamat atau, sebaliknya, isi halaman, itu akan membantu kita, dan jumlah halaman, rak, dll akan digunakan sebagai biji-bijian.  Konfigurasi PRNG saya: m = 2 ^ 32 (4294967296), a = 22695477, c = 1. Saya juga ingin menambahkan bahwa dalam implementasi kami hanya prinsip pembangkitan angka yang tersisa dari metode kongruen linier, sisanya diubah.  Kami melanjutkan daftar program lebih lanjut: <br><br><div class="spoiler">  <b class="spoiler_title">Kode</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ lengthOfPage = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4819</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lengthOfTitle = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, digs = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'0123456789abcdefghijklmnopqrstuvwxyz'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, alphabet = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">', .'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, wall = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, shelf = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, volume = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, page = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">421</span></span></span></span><span class="hljs-function"><span class="hljs-params">, } = {}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> seed = <span class="hljs-number"><span class="hljs-number">13</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   const rnd = (min = 1, max = 0) =&gt; { //   //    min  max seed = (seed * 22695477 + 1) % 4294967296; //   //      return min + seed / 4294967296 * (max - min); //   //   }; const pad = (s, size) =&gt; s.padStart(size, `0`); //   //       let getHash = str =&gt; parseInt(sha512(str).slice(0, 7), 16); //  const mod = (a, b) =&gt; ((a % b) + b) % b; //    const digsIndexes = {}; //     //    digs const alphabetIndexes = {}; //     //    alphabet Array.from(digs).forEach((char, position) =&gt; { //    digs digsIndexes[char] = position; //     //   }); Array.from(alphabet).forEach((char, position) =&gt; { //    alphabet alphabetIndexes[char] = position; //     //   }); return { //    };</span></span></code> </pre><br></div></div><br>  Seperti yang Anda lihat, butiran PRNG berubah setelah setiap penerimaan nomor, dan hasilnya langsung tergantung pada titik referensi yang disebut - butir, setelah angka akan menarik bagi kami.  (kami menghasilkan alamat atau mendapatkan konten halaman) <br><br>  Fungsi <b>getHash</b> akan membantu kami menghasilkan titik referensi.  Kami baru saja mendapatkan hash dari beberapa data, mengambil 7 karakter, menerjemahkan ke dalam sistem angka desimal dan Anda selesai! <br><br>  Fungsi <b>mod</b> berperilaku sama dengan operator%.  Tetapi jika dividen adalah &lt;0 (situasi seperti itu dimungkinkan), fungsi <b>mod</b> akan mengembalikan angka positif karena struktur khusus, kita memerlukan ini untuk memilih karakter dari string <b>alfabet dengan benar</b> ketika menerima konten halaman di alamat. <br><br>  Dan potongan terakhir dari kode makanan penutup adalah objek perpustakaan yang dikembalikan: <br><br><div class="spoiler">  <b class="spoiler_title">Kode</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { wall, shelf, volume, page, lengthOfPage, lengthOfTitle, search(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), page = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.page + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${page}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>, depth = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - searchStr.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; depth; i++){ searchStr = alphabet[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * alphabet.length ^ <span class="hljs-number"><span class="hljs-number">0</span></span>] + searchStr; } seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]] || <span class="hljs-number"><span class="hljs-number">-1</span></span>, rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+page}</span></span></span><span class="hljs-string">`</span></span>; }, searchExactly(text) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pos = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - text.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.search(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(pos)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${text}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfPage - (pos + text.length))}</span></span></span><span class="hljs-string">`</span></span>); }, searchTitle(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>; searchStr = searchStr.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); searchStr = searchStr.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle ? searchStr : <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${searchStr}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfTitle - searchStr.length)}</span></span></span><span class="hljs-string">`</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">`</span></span>; }, getPage(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">4</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage); }, getTitle(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); } };</code> </pre><br></div></div><br>  Pada awalnya, kami menulis properti perpustakaan yang saya jelaskan sebelumnya.  Anda dapat mengubahnya bahkan setelah fungsi utama dipanggil (yang, pada prinsipnya, dapat disebut konstruktor, tetapi kode saya lemah mirip dengan implementasi kelas perpustakaan, jadi saya akan membatasi diri saya pada kata "main").  Mungkin perilaku ini tidak sepenuhnya memadai, tetapi fleksibel.  Sekarang pergi ke setiap metode. <br><br><h3>  Metode pencarian </h3><br><pre> <code class="javascript hljs">search(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), page = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.page + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${page}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>, depth = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - searchStr.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; depth; i++){ searchStr = alphabet[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * alphabet.length ^ <span class="hljs-number"><span class="hljs-number">0</span></span>] + searchStr; } seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]] || <span class="hljs-number"><span class="hljs-number">-1</span></span>, rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+page}</span></span></span><span class="hljs-string">`</span></span>; }</code> </pre><br>  Mengembalikan alamat string <b>searchStr</b> di perpustakaan.  Untuk melakukan ini, pilih <b>dinding, rak, volume, halaman</b> secara acak.  <b>volume</b> dan <b>halaman</b> juga diisi dengan nol dengan panjang yang diinginkan.  Selanjutnya, gabungkan keduanya menjadi string untuk diteruskan ke fungsi <b>getHash</b> .  <b>LocHash yang</b> dihasilkan adalah titik awal, mis.  biji-bijian. <br><br>  Untuk ketidakpastian yang lebih besar, kami menambah <b>kedalaman</b> <b>searchStr</b> <b>dengan</b> karakter pseudorandom dari alfabet, mengatur seed <b>seed</b> menjadi <b>locHash</b> .  Pada tahap ini, tidak masalah bagaimana kami melengkapi baris, sehingga Anda dapat menggunakan PRNG JavaScript bawaan, ini tidak penting.  Anda dapat sepenuhnya mengabaikannya sehingga hasil yang menarik bagi kami selalu berada di bagian atas halaman. <br><br>  Satu-satunya yang tersisa adalah menghasilkan pengidentifikasi segi enam.  Untuk setiap karakter string <b>searchStr</b> , <b>kami</b> mengeksekusi algoritma: <br><br><ol><li>  Dapatkan nomor karakter <b>indeks</b> dalam alfabet dari objek <b>alphabetIndexes</b> .  Jika tidak, kembali -1, tetapi jika ini terjadi, Anda pasti melakukan sesuatu yang salah. </li><li>  Hasilkan <b>rand</b> angka pseudo-acak menggunakan PRNG kami, dalam kisaran dari 0 hingga panjang alfabet. </li><li>  Hitung indeks baru, yang dihitung sebagai jumlah dari jumlah <b>indeks</b> simbol dan nomor acak semu, dibagi modulo panjang <b>penggalian</b> . </li><li>  Dengan demikian, kami mendapat digit pengidentifikasi segi enam - <b>newChar</b> (mengambilnya dari <b>penggalian</b> ). </li><li>  Tambahkan <b>newChar</b> ke hex identifier <b>hex</b> </li></ol><br>  Setelah menyelesaikan generasi <b>hex</b> , kami mengembalikan alamat lengkap tempat di mana baris yang diinginkan terkandung.  Komponen alamat dipisahkan oleh tanda hubung. <br><br><h3>  Metode Pencarian Tepat </h3><br><pre> <code class="javascript hljs">searchExactly(text) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pos = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - text.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.search(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(pos)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${text}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfPage - (pos + text.length))}</span></span></span><span class="hljs-string">`</span></span>); }</code> </pre><br>  Metode ini melakukan hal yang sama dengan metode <b>pencarian</b> , tetapi mengisi semua ruang kosong (membuat <b>pencarian</b> string <b>searchStr</b> dengan panjang karakter <b>lengthOfPage</b> ).  Saat melihat halaman seperti itu, akan muncul bahwa tidak ada apa-apa di sana selain teks Anda. <br><br><h3>  Metode SearchTitle </h3><br><pre> <code class="javascript hljs">searchTitle(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>; searchStr = searchStr.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); searchStr = searchStr.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle ? searchStr : <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${searchStr}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfTitle - searchStr.length)}</span></span></span><span class="hljs-string">`</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">`</span></span>; }</code> </pre><br>  Metode <b>searchTitle</b> mengembalikan alamat buku yang disebut <b>searchStr</b> .  Di dalam, sangat mirip dengan <b>pencarian</b> .  Perbedaannya adalah ketika menghitung <b>locHash</b> kita tidak menggunakan halaman untuk mengikat namanya ke buku.  Seharusnya tidak tergantung pada halaman.  <b>searchStr</b> dipotong menjadi <b>lengthOfTitle</b> dan diisi dengan spasi jika perlu.  Demikian pula, pengidentifikasi segi enam dihasilkan dan alamat yang diterima dikembalikan.  Harap perhatikan bahwa tidak ada halaman di dalamnya, seperti ketika mencari alamat teks arbitrer yang tepat.  Jadi, jika Anda ingin mencari tahu apa yang ada di buku dengan nama yang Anda buat, tentukan halaman yang ingin Anda tuju. <br><br><h3>  Metode GetPage </h3><br><pre> <code class="javascript hljs">getPage(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">4</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage); }</code> </pre><br>  Kebalikan dari metode <b>pencarian</b> .  Tugasnya adalah mengembalikan konten halaman ke alamat yang ditentukan.  Untuk melakukan ini, kami mengonversi alamat ke array menggunakan pemisah "-".  Sekarang kami memiliki berbagai komponen alamat: pengidentifikasi segi enam, dinding, rak, buku, halaman.  Kami menghitung <b>locHash</b> dengan cara yang sama seperti yang kami lakukan dalam metode <b>pencarian</b> .  Kami mendapatkan nomor yang sama ketika menghasilkan alamat.  Ini berarti bahwa PRNG akan menghasilkan angka yang sama, perilaku inilah yang memastikan kebalikan dari transformasi kami terhadap teks sumber.  Untuk menghitungnya, kami melakukan algoritme pada setiap karakter (de facto, ini adalah digit) dari pengidentifikasi segi enam: <br><br><ol><li>  Kami menghitung <b>indeks</b> dalam <b>penggalian</b> string.  Ambillah dari <b>digsIndexes</b> . </li><li>  Dengan menggunakan PRNG, kita menghasilkan <b>rand</b> angka pseudo-acak dalam kisaran 0 ke dasar sistem angka dalam jumlah besar, sama dengan panjang string yang berisi digit dari angka cantik ini.  Semuanya jelas. </li><li>  Kami menghitung posisi simbol dari teks sumber <b>newIndex</b> sebagai perbedaan antara <b>indeks</b> dan <b>rand</b> , dibagi modulo panjang alfabet.  Mungkin saja perbedaannya negatif, maka modulo divisi biasa akan memberikan indeks negatif, yang tidak sesuai dengan kami, jadi kami menggunakan versi modifikasi dari divisi modulo.  (Anda dapat mencoba opsi mengambil nilai absolut dari rumus di atas, ini juga memecahkan masalah angka negatif, tetapi dalam praktiknya ini belum diuji) </li><li>  Karakter teks halaman adalah <b>newChar</b> , kami mendapatkan indeks dari alfabet. </li><li>  Tambahkan karakter teks ke hasilnya. </li></ol><br>  Hasil yang diperoleh pada tahap ini tidak akan selalu mengisi seluruh halaman, jadi kami akan menghitung butir baru dari hasil saat ini dan mengisi ruang kosong dengan karakter dari alfabet.  PRNG membantu kami dalam memilih simbol. <br><br>  Ini melengkapi perhitungan konten halaman, kami mengembalikannya, tidak lupa untuk memotong panjang maksimal.  Mungkin pengidentifikasi segi enam itu besar di alamat input. <br><br><h3>  Metode GetTitle </h3><br><pre> <code class="javascript hljs">getTitle(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); }</code> </pre><br>  Nah, ceritanya sama.  Bayangkan Anda membaca deskripsi metode sebelumnya, hanya ketika menghitung butir PRNG Anda tidak memperhitungkan nomor halaman, dan menambahkan dan memotong hasilnya ke panjang maksimum nama buku - <b>lengthOfTitle</b> . <br><br><h2>  Menguji modul untuk membuat perpustakaan </h2><br>  Setelah kita memeriksa prinsip pengoperasian perpustakaan seperti Babilonia - inilah saatnya untuk mencoba semuanya dalam praktik.  Saya akan menggunakan konfigurasi sedekat mungkin dengan yang dibuat oleh Louis Borges.  Kami akan mencari frasa sederhana "habr.com": <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); //  console.log(libraryofbabel.search(`habr.com`));</span></span></code> </pre><br>  Jalankan, hasilnya: <br><br><img src="https://habrastorage.org/webt/in/75/3w/in753wlgenqcq0riibootatdxn4.png" alt="gambar"><br><br>  Saat ini, itu tidak memberi kita apa-apa.  Tapi mari kita cari tahu apa yang tersembunyi di balik alamat ini!  Kode akan seperti ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.search(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text)));</span></span></code> </pre><br>  Hasil: <br><br><img src="https://habrastorage.org/webt/qb/6n/8q/qb6n8qcbd3gyd9xbou3tvgh4czg.png" alt="gambar"><br><br>  Kami menemukan apa yang kami cari dalam jumlah tak terbatas halaman (tanpa taruhan)! <br><br>  Tapi ini jauh dari satu-satunya tempat di mana frase ini berada.  Saat berikutnya program dimulai, alamat lain akan dibuat.  Jika mau, Anda dapat menyimpannya dan bekerja dengannya.  Hal utama adalah bahwa isi halaman tidak pernah berubah.  Mari kita lihat judul buku tempat frasa kita berada.  Kode tersebut adalah sebagai berikut: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.search(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br>  Judul buku ini kira-kira seperti ini: <br><br><img src="https://habrastorage.org/webt/3_/ei/e3/3_eie30ck52m1pfmpaix-al2_pu.png" alt="gambar"><br><br>  Jujur, itu tidak terlihat sangat menarik.  Kalau begitu mari kita cari buku dengan frasa kami di judul: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.searchTitle(text); //    const newAdress = `${adress}-${1}`; //    console.log(libraryofbabel.getPage(newAdress)); //     console.log(libraryofbabel.getTitle(newAdress)); //  ,        :)</span></span></code> </pre><br><img src="https://habrastorage.org/webt/vh/4t/gf/vh4tgfcjmuyvkm6paed3z0z9rco.png" alt="gambar"><br><br>  Sekarang Anda mengerti cara menggunakan perpustakaan ini.  Biarkan saya menunjukkan kemungkinan membuat perpustakaan yang sama sekali berbeda.  Sekarang akan diisi dengan satu dan nol, setiap halaman akan memiliki 100 karakter, alamatnya akan menjadi angka heksadesimal.  Jangan lupa untuk mengamati kondisi kesetaraan panjang alfabet dan deretan digit angka besar kami.  Kami akan mencari, misalnya, "10101100101010111001000000".  Kami melihat: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`1010101010101010`</span></span>, <span class="hljs-comment"><span class="hljs-comment">// 1  0,     digs: `0123456789abcdef`, // - 16-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `10101100101010111001000000`; //  const adress = libraryofbabel.search(text); //    console.log(`\n${adress}\n`); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br><img src="https://habrastorage.org/webt/ns/lz/wu/nslzwulb-mfzpxn1gywod1pd4d8.png" alt="gambar"><br><br>  Mari kita lihat menemukan kecocokan yang lengkap.  Untuk melakukan ini, <b>mari</b> kembali ke contoh lama dan dalam kode ganti <b>libraryofbabel.search</b> dengan <b>libraryofbabel.searchExactly</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.searchExactly(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br><img src="https://habrastorage.org/webt/nb/vz/tw/nbvztwt7rggv9cxpp5ekozlhfeq.png" alt="gambar"><br><br><h2>  Kesimpulan </h2><br>  Setelah membaca deskripsi algoritma operasi perpustakaan, Anda mungkin sudah menduga bahwa ini adalah semacam penipuan.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat Anda mencari sesuatu yang bermakna di perpustakaan, itu hanya dikodekan dalam bentuk yang berbeda dan ditampilkan dalam bentuk yang berbeda. Tetapi disajikan dengan sangat indah sehingga Anda mulai percaya pada barisan heksagon yang tak berujung ini. Sebenarnya, ini tidak lebih dari abstraksi matematis. Tetapi kenyataan bahwa di perpustakaan ini Anda dapat menemukan apa pun, apa pun, benar. Yang benar adalah bahwa jika Anda menghasilkan urutan karakter acak, cepat atau lambat Anda bisa mendapatkan teks apa pun. Untuk pemahaman yang lebih baik tentang topik ini, Anda dapat mempelajari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teorema monyet tak berujung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat menemukan opsi lain untuk mengimplementasikan pustaka: gunakan algoritma enkripsi apa pun, di mana ciphertext akan menjadi alamat di pustaka komprehensif Anda. Dekripsi - mendapatkan konten halaman. Atau mungkin mencoba</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemungkinan penggunaan perpustakaan adalah untuk menyimpan kata sandi di beberapa tempat. Buat konfigurasi yang Anda butuhkan, cari tahu di mana kata sandi Anda berada di perpustakaan (ya, mereka sudah ada. Dan Anda pikir Anda yang menciptakannya?), Simpan alamatnya. Dan sekarang, ketika Anda perlu menemukan beberapa jenis kata sandi, temukan saja di perpustakaan. Tetapi pendekatan ini berbahaya, karena penyerang dapat mengetahui konfigurasi perpustakaan dan cukup menggunakan alamat Anda. Tetapi jika dia tidak tahu arti dari apa yang dia temukan, kecil kemungkinan data Anda akan sampai kepadanya. Dan apakah ini benar-benar metode penyimpanan kata sandi utama? Tidak, jadi ada tempatnya.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ide ini dapat digunakan untuk membuat berbagai "perpustakaan". </font><font style="vertical-align: inherit;">Anda dapat mengulangi tidak hanya karakter, tetapi juga seluruh kata, atau bahkan suara! </font><font style="vertical-align: inherit;">Bayangkan tempat di mana Anda dapat mendengarkan suara apa pun yang tersedia untuk persepsi manusia, atau untuk menemukan beberapa jenis lagu. </font><font style="vertical-align: inherit;">Di masa depan saya pasti akan mencoba menerapkan ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi web dalam bahasa Rusia tersedia di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , disebarkan di server virtual saya. </font><font style="vertical-align: inherit;">Saya tidak tahu semua pencarian yang menyenangkan untuk makna hidup di perpustakaan Babel, atau apa yang ingin Anda buat. </font><font style="vertical-align: inherit;">Sampai jumpa!</font></font> :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id433336/">https://habr.com/ru/post/id433336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id433326/index.html">Kualitas kode</a></li>
<li><a href="../id433328/index.html">Lebih baik kehilangan sehari</a></li>
<li><a href="../id433330/index.html">Pecahkan teka-teki silang Jepang dengan SAT Solver</a></li>
<li><a href="../id433332/index.html">Dukungan Python di Fungsi Azure</a></li>
<li><a href="../id433334/index.html">Perilaku XAML untuk WPF sekarang adalah Open Source</a></li>
<li><a href="../id433338/index.html">Ikhtisar Produsen Printer 3D Creality</a></li>
<li><a href="../id433340/index.html">Perangkat nirkabel Xiaomi di rumah pintar ioBroker</a></li>
<li><a href="../id433342/index.html">Prosesor Verilog sederhana lainnya</a></li>
<li><a href="../id433344/index.html">Dua keberhasilan ruang pribadi</a></li>
<li><a href="../id433346/index.html">Beralih dari Redshift ke ClickHouse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>