<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¾â€ğŸ¤ ğŸ¤½ğŸ» ğŸª Bagaimana cara mengalahkan klik di Y. Direct dan AdWords untuk 600 ribu rubel sebulan ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ¾ ğŸ’’ ğŸ“ </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selama enam bulan terakhir, kami telah berhasil mengalahkan "klik" iklan kontekstual kami dengan anggaran 1 juta rubel per bulan. 

 Kunci untuk menga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara mengalahkan klik di Y. Direct dan AdWords untuk 600 ribu rubel sebulan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423335/">  Selama enam bulan terakhir, kami telah berhasil mengalahkan "klik" iklan kontekstual kami dengan anggaran 1 juta rubel per bulan. <br><br>  Kunci untuk mengalahkan penipuan adalah pemantauan lalu lintas per menit dengan pemberitahuan perubahan abnormal dan penonaktifan pengumuman bermasalah oleh API, dan sejumlah laporan yang mencerminkan situasi secara real time. <br><br><img src="https://habrastorage.org/webt/ss/cg/tk/sscgtkndx4m1wahkipwk1ozgxwk.png"><br>  <font color="#7c8792">Gambar 1. Bagan jumlah pengunjung berdasarkan kata kunci dengan decamines</font> <br><br><h2>  <font color="#3e6c9a">Bagaimana Anda tahu bahwa Anda sedang diserang?</font> </h2><br>  <b>Salah satu tanda pertama dari iklan "klik-tayang" adalah peningkatan persentase pengembalian uang untuk penipuan di Yandex.Direct dan AdWords.</b> <br><blockquote>  â€œDi Yandex Direct, biaya untuk penipuan secara otomatis dikembalikan ke saldo kampanye iklan.  Jumlah klik yang dihilangkan oleh sistem anti-penipuan ditampilkan dalam laporan "statistik harian" "statistik umum" di baris "klik tidak sah untuk seluruh periode yang dipilih." </blockquote>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bantu J. Mengarahkan "klik tidak valid</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"</a> <br><br>  Di AdWords, menampilkan tingkat "klik tidak sah" dapat diaktifkan pada tab "kolom": <br><br><img src="https://habrastorage.org/webt/kf/0y/sp/kf0ysp3nbfkov-ypcrfcc1sbmgw.png"><br>  <font color="#7c8792">Gambar 2. Kolom khusus dengan tingkat "klik tidak sah" di AdWords</font> <br><br>  Dalam kasus kami, dengan tingkat rata-rata " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">klik tidak sah</a> " di Yandex.Direct â‰ˆ 10%, Yandex tiba-tiba mulai mengembalikan 40% dari anggaran iklan, dan setelah sebulan, 54% sama sekali. <br><a name="habracut"></a><br>  <b>Tanda penipuan berikutnya adalah peningkatan yang tidak masuk akal dalam jumlah transisi dan perubahan kuat dalam indikator perilaku untuk sejumlah grup iklan.</b> <br><br>  Kami perhatikan bahwa untuk sejumlah kata kunci yang tidak pernah memiliki lebih dari 200 pengunjung sehari, lonjakan hingga 3.000 pengunjung tiba-tiba muncul.  Bahkan, anggaran, pada hari-hari kegiatan semacam itu, dapat digunakan untuk satu kampanye iklan jika tidak dihentikan tepat waktu. <br><br><img src="https://habrastorage.org/webt/dy/dj/37/dydj375imemm0ytnqa6ttkesya8.png"><br>  <font color="#7c8792">Gambar 3. Pertumbuhan lalu lintas yang tidak masuk akal untuk grup iklan tertentu di Direct</font> <br><br><h2>  <font color="#3e6c9a">Yandex dan Google tidak melindungi dari penipuan</font> </h2><br>  Cukup membaca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diskusi tentang tingkat penipuan dalam iklan kontekstual</a> di Klub Langsung resmi untuk memastikan bahwa banyak pengiklan kehilangan uang karena penipuan. <br><br>  Google secara resmi mengakui kesalahan sistem keamanannya dan memberikan "Pengembalian Klaim" kepada pengiklan (pengembalian sesuai anggaran).  Menurut statistik dari layanan ClickSease, Iklan Google menghasilkan rata-rata 12% dari anggaran iklan. <br><br><div class="spoiler">  <b class="spoiler_title">Cara mengembalikan sebagian uang untuk klik melalui AdWords</b> <div class="spoiler_text">  Anda harus mengirim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">keluhan tentang "klik tidak sah"</a> ke Adwords, setelah itu Anda akan diganti dengan â‰ˆ 12% dari uang yang dihabiskan.  Juga, layanan ClickSease secara otomatis mengirimkan permintaan serupa untuk pengembalian dana setiap 2 bulan ke Google. <br><br>  Dalam kasus kami, Google AdWords pertama-tama mengakui 18% dari lalu lintas kami sebagai " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tidak valid</a> " dan mengembalikan uang untuk mereka, dan ketika kami mengirim keluhan "klaim pengembalian uang", Google mengembalikan 13% anggaran lainnya. <br></div></div><br>  Yandex tidak mengenali kerentanan filter perlindungannya sendiri dan keluhan tentang kasus penipuan yang jelas, mengirimkan respons templat bahwa masalahnya ada pada pengiklan dan situsnya. <br><br>  Dalam kasus kami, persentase "klik tidak sah" di Y. Laporan langsung tidak pernah naik di atas 50% yang didambakan untuk kampanye iklan mana pun, bahkan pada masa ledakan paling dahsyat, ketika 80% anggaran "digabungkan" ke dalam grup iklan yang biasanya populer tanpa panggilan dan aplikasi. <br><br><img src="https://habrastorage.org/webt/6h/4u/ef/6h4uefov0nkyjh0n3wpuii9qb0q.png"><br>  <font color="#7c8792">Gambar 4. Tingkat â€œklik tidak sahâ€ di salah satu kampanye di Direct</font> <br><br><h2>  <font color="#3e6c9a">Apa tingkat serangan yang kita temui?</font> </h2><br>  Lalu lintas penipuan diarahkan ke empat lini bisnis di dua kota.  Saat menghubungkan kampanye iklan baru atau memulai kampanye yang sudah lama berhenti, dalam beberapa jam "klik" juga didistribusikan ke mereka. <br><br>  Penipuan Klik tidak terkait dengan waktu, dan mendistribusikan ulang anggaran, misalnya pada malam hari, tidak berpengaruh: kami masih mendapatkan volume lalu lintas kiri kami.  "Mengklik" sama-sama aktif di YAN, pada pencarian Yandex, dan di Jaringan Display Google. <br><br>  Di situs, bot mensimulasikan perilaku pengguna, menavigasi bagian-bagian situs, teks yang dipilih, digulir secara alami dan memindahkan kursor. <br><br><h2>  <font color="#3e6c9a">Apakah ada solusi yang sudah jadi?</font> </h2><br>  Semua layanan perlindungan penipuan klik hanya memiliki satu alat melawan langsung - ini memblokir alamat IP mencurigakan atau situs penempatan di Ya.Direct dan kampanye AdWords. <br><br>  Jika IP dinamis digunakan terhadap Anda, layanan kontrol penipuan klik akan selalu selangkah di belakang scammer dalam memblokirnya dengan IP: bot sudah akan membuat beberapa klik pada iklan Anda pada saat layanan memasukkan daftar hitam ke IP ini. dan berhenti menampilkan iklan di situ.  Selain itu, setelah perangkat lunak penipuan tidak dapat melihat iklan Anda, itu hanya akan mengubah alamat IP, Hardware-ID dan melanjutkan tindakannya. <br><br>  Saat menyerang iklan di GDN atau YAN, berbagai penempatan biasanya digunakan, dan sistem perlindungan otomatis tidak dapat mendeteksi situs yang mencurigakan untuk dicekal. <br><br>  Mari kita kembali ke pemblokiran IP - di sini kita sampai pada bagian yang paling menarik: jika AdWords memungkinkan Anda untuk memblokir hingga 500 alamat IP, maka <u>Yandex Direct dapat memblokir hanya 25 alamat IP unik</u> per kampanye iklan!  Daftar hitam alamat IP yang sedemikian kecil tidak lagi relevan, karena sekarang Anda dapat dengan aman membeli 500 alamat IPv4 untuk 10 ribu rubel dan menghindari batasan ini. <br><br>  Ada dua cara untuk melindungi diri Anda dari "klik" tingkat tinggi: <br><br><ol><li>  belajarlah untuk tidak menampilkan iklan kepada pengguna atau bot yang curang, untuk itu Anda perlu menemukan "pola" tertentu dalam perilaku dan karakteristik mereka; <br></li><li>  hentikan sementara grup iklan dan kata kunci spesifik yang sedang ditargetkan. <br></li></ol><br><h2>  <font color="#3e6c9a">Potong sebagian audiens untuk menghemat sebagian besar</font> </h2><br>  Jika Anda belajar untuk tidak menampilkan iklan klik kepada bot atau pengguna yang curang, maka mereka tidak akan dapat membahayakan. <br><br>  Anda selalu dapat melacak pola perilaku dan pola yang serupa, misalnya, bahwa penipuan biasanya berjalan pada Windows 7 dari 5:00 hingga 9:00 di Moskow, dan menetapkan penyesuaian tawaran sebesar -100% untuk pemirsa yang sama di semua kampanye iklan yang diserang.  Fungsionalitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penyesuaian tawaran di AdWords</a> cukup luas, yang tidak dapat dikatakan tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penyesuaian di Yandex Direct</a> . <br><br><h3>  Kami mencari pola penipuan melalui layanan keamanan </h3><br>  Untuk mengetahui bagaimana sebenarnya mereka menyerang kami dan melacak pola secara manual dalam lalu lintas penipuan, kami menghubungkan layanan anti-penipuan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ClickFrog</a> Rusia.  Produk ini telah lama dikenal semua orang, populer di lingkungan BPA dan sebagainya. <br><br>  ClickFrog dengan cepat membuktikan cacat total: <br><br><ol><li>  per hari mengalokasikan tidak lebih dari 40 alamat IP mencurigakan, dengan lalu lintas dari Direct pada 3.000 ribu klik per hari, dan, bahkan diakui oleh Yandex, 1.300 klik "kiri" per hari; <br></li><li>  alat utama untuk melindungi layanan ini adalah pemblokiran berdasarkan alamat IP, perintah tentang yang dikirim melalui API ke J. Direct, namun, segera setelah daftar hitam 25 alamat IP diisi, Anda perlu secara manual menghapus beberapa IP terakhir dalam setiap kampanye iklan dan menunggu daftar berikutnya diisi, dan jadi dalam lingkaran. <br></li></ol><br>  Kemudian, kami memasang kode untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ClickSease</a> , sebuah layanan Amerika yang ditargetkan pada AdWords dan belum bekerja dengan Yandex.Direct.  Layanan, omong-omong, memiliki, tidak seperti ClickFrog, masa percobaan gratis 2 minggu. <br><br>  ClickSease ternyata lebih bermanfaat: mulai menangkap 300-400 IP penipuan unik per hari.  Untuk setiap layanan IP yang diblokir, berikan statistik: <br><br><ul><li>  Penyedia Layanan Internet </li><li>  platform dari mana transisi terjadi; </li><li>  sistem operasi </li><li>  ID perangkat unik </li><li>  waktu transisi pertama dan terakhir; </li><li>  wilayah. </li></ul><br>  Dari laporan ClickSease, kami dapat mengidentifikasi pola dalam penipuan: <br><ul><li>  dalam 81% kasus, perangkat mensimulasikan OS seluler: Android atau iOS; </li><li>  dalam 59% kasus, geolokasi alamat IP tidak berlaku untuk Moskow, dengan penipuan diarahkan ke Moskow. </li></ul><br><h3>  Mencari pola penipuan secara manual </h3><br>  Namun, bahkan pola yang jelas seperti itu tidak cukup untuk mengurangi bahaya dari penipuan, dan saya tidak ingin mematikan iklan seluler.  Layanan biasanya hanya dapat memberikan ide untuk mengidentifikasi pola serupa dalam penipuan, dan kemudian Anda perlu mendeteksi penipuan di Metric (dalam kasus serangan terhadap Direct) dan memilihnya di segmen Yandex Audience terpisah untuk analisis dan pemblokiran lebih lanjut. <br><br><img src="https://habrastorage.org/webt/p3/op/ya/p3opya9dpzuhirhhz0_wfdeywf8.png"><br>  <font color="#7c8792">Gambar 5. Contoh analisis lalu lintas oleh kelompok umur di Metrik untuk mencari pola penipuan</font> <br><br>  Irisan lalu lintas untuk membantu mengidentifikasi pola penipuan: <br><ul><li>  dinamika audiens berdasarkan kelompok umur; </li><li>  dinamika kepentingan jangka panjang pengguna; </li><li>  dinamika perangkat dan OS. </li></ul><br>  <b>Dalam kasus AdWords, penanggulangannya jelas:</b> <br><br><ol><li>  kami mendefinisikan segmen audiens yang â€œterinfeksiâ€ dengan penipuan; </li><li>  Kami menetapkan penyesuaian tawaran -100% untuk segmen yang dipilih; </li><li>  Kami memantau perubahan indikator: konversi, waktu di situs, kedalaman tampilan, rasio pentalan. </li></ol><br>  <b>Di Yandex Direct, mekanisme perjuangan lebih kompleks dan dibagi menjadi dua opsi:</b> <br><br>  a) Anda berhasil menemukan pola penipuan yang jelas terkait dengan jenis kelamin, usia atau mobilitas: <br><br><ol><li>  kami menetapkan penyesuaian tawaran -50% atau -100% untuk segmen yang dipilih; </li><li>  Kami memantau perubahan indikator utama. </li></ol><br>  b) tidak ditemukan pola yang jelas: <br><br><ol><li>  kami memilih lalu lintas penipuan dalam segmen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Yandex.Audience yang</a> terpisah (misalnya, Anda tahu bahwa mulai 1 Oktober hingga 20 Oktober tidak ada 5.000 klik pada grup iklan, yang selalu memiliki tidak lebih dari 30 kunjungan per hari) </li><li>  melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mirip-mirip Yandex kami</a> membuat segmen pengguna yang mirip dengan penipuan kami; </li><li>  atur penyesuaian penawaran -100% untuk segmen audiens yang dibuat secara manual; </li><li>  Kami dengan hati-hati menguji pengurangan tarif iklan untuk segmen yang dibuat oleh Yandex. </li></ol><br><h2>  <font color="#3e6c9a">Buat bagan yang menunjukkan penipuan</font> </h2><br>  <b>Penipuan selalu menghasilkan fokus dan puncak yang jelas</b> , apakah itu perangkat lunak musykil dengan meniru perilaku pengguna nyata atau sekelompok freelancer yang melakukan tugas teknis. <br><br><img src="https://habrastorage.org/webt/go/o2/al/goo2alj10gtzlycltq5rje0hoji.png"><br>  <font color="#7c8792">Gambar 6. Bagan jumlah pengunjung berdasarkan kata kunci dengan decamines</font> <br><br>  Penipuan terjadi tidak merata karena beberapa alasan: <br><ul><li>  Untuk membuat serangan "dihaluskan" Anda harus memiliki informasi rahasia dan tahu siapa, kapan dan berapa banyak klik yang dilakukan iklan Anda; </li><li>  perangkat lunak bertindak dalam sentakan, dan pada menit, 10 menit, dan kadang-kadang pada grafik per jam, tindakannya akan mengejutkan; </li><li>  bahkan jika "anak sekolah" bekerja melawan Anda dari papan buletin, maka mereka bertindak berdasarkan tugas tertentu dengan suatu algoritma, dan anomali yang dihasilkan oleh mereka akan mudah dilacak. </li></ul><br>  Jika Anda belajar untuk dengan cepat menemukan dan menghilangkan fokus, maka Anda dapat secara signifikan mengurangi bahaya dari penipuan.  Dalam kasus kami, tanda yang jelas adalah peningkatan abnormal dalam jumlah klik pada iklan kontekstual dalam 10 menit tertentu atau satu menit untuk beberapa kata kunci. <br><br>  Untuk visualisasi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Google Data Studio</a> paling cocok, karena hanya Analytics yang dapat mengumpulkan data secara benar dalam waktu 1 dan 10 menit, dan Metrika, ketika membuat laporan dekomints, memberikan indikator yang salah. <br><br><div class="spoiler">  <b class="spoiler_title">Cara membuat bagan dalam 10 menit, bukan setiap jam, di Google Data Studio</b> <div class="spoiler_text">  Secara default, di Analytics atau Data Studio, Anda tidak dapat membuat grafik per menit atau selama 10 menit, tetapi ini dapat dilakukan sebagai berikut di Date Studio: <br><br>  Langkah 1. Buka pengeditan bidang <br><br><img src="https://habrastorage.org/webt/sy/y2/1v/syy21vr-evstitegmwu-ivqreh8.png"><br><br>  Langkah 2. Buat salinan bidang-bidang berikut: Tahun, Bulan tahun, Hari bulan, Jam, Menit, dan beri nama, misalnya, Tahun (hari), Bulan tahun tahun (hari), dan sebagainya.  Juga di bidang yang disalin, Anda harus mengubah jenis dari format waktu dan tanggal ke "angka" seperti yang ditunjukkan pada gambar. <br><br><img src="https://habrastorage.org/webt/zj/3a/a6/zj3aa66qqh0eq42cyc-ajbujxzm.png"><br>  <font color="#7c8792">Langkah 2. Ubah jenis bidang yang disalin dari "date" menjadi "number"</font> <br><br>  Langkah 3. Buat bidang baru di mana kami menulis rumus berikut: Tahun (hari) * 10000000 + Bulan tahun (hari) * 100000 + Hari dalam bulan (hari) * 1000 + Jam (hari) * 10 + LANTAI (Menit (hari) / 10) <br><br><img src="https://habrastorage.org/webt/ud/mm/8o/udmm8oej5cb9ysefk3zpmka2rvs.png"><br>  <font color="#7c8792">Langkah 3. Buat bidang terhitung â€œWaktu selama 10 menitâ€</font> <br><br>  Langkah 4. Kami menyimpan bidang yang dibuat, lalu kembali ke daftar semua bidang dan menemukan bidang baru kami "Waktu selama 10 menit (decamenut)".  Penting untuk mengubah jenisnya dari "Nomor" ke "Tanggal dan waktu" seperti yang ditunjukkan pada gambar, dan kemudian menetapkan jenis "Nomor" kembali ke bidang ini. <br><br><img src="https://habrastorage.org/webt/7f/bi/hh/7fbihh4hc4yss02cqsfra1ljfta.png"><br>  <font color="#7c8792">Langkah 4. Buat bidang terhitung â€œWaktu selama 10 menitâ€</font> <br><br>  Langkah 5. Buat "Grafik Gabungan" dan setel bidang "Waktu untuk 10 menit" kami yang baru sebagai parameter, seperti yang ditunjukkan pada gambar.  Selesai <br><br><img src="https://habrastorage.org/webt/rq/o5/hy/rqo5hybxbnptkakzlyrs4rclzqu.png"><br>  <font color="#7c8792">Langkah 5. Buat "grafik kombo"</font> <br></div></div><br><br><h2>  <font color="#3e6c9a">Konfigurasikan pemberitahuan tentang wabah penipuan</font> </h2><br>  Agar tidak mengikuti semua kasus penipuan secara manual, saya membuat laporan di Google Sheets, yang memperbarui data setiap menit dan memberi tahu dimulainya penipuan. <br><br>  Google Sheets mendukung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Core Reporting API</a> , yang dapat diakses melalui Editor Skrip di Sheets. <br><br>  Langkah 1. Buka editor skrip untuk mengakses Analytics <br><br><img src="https://habrastorage.org/webt/fe/6t/r-/fe6tr-kjvklwxovqwutpmuvbvcc.png"><br>  <font color="#7c8792">Gambar 7. Editor skrip untuk mengakses API Pelaporan Inti Analytics melalui Google Tables</font> <br><br>  Langkah 2. Kami menulis permintaan API ke Analytics untuk menerima data pada indikator yang diperlukan (misalnya, jumlah pengguna yang mengklik iklan berbayar pada setiap menit setiap hari, seperti dalam kasus kami). <br><br><div class="spoiler">  <b class="spoiler_title">Kode Google Script untuk meminta data apa pun dari Analytics di Google Sheets</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runDemo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstProfile = getFirstProfile(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = getReportDataForProfile(firstProfile); outputToSpreadsheet(results); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(error) { Browser.msgBox(error.message); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstProfile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> accounts = Analytics.Management.Accounts.list(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (accounts.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstAccountId = accounts.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>].getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webProperties = Analytics.Management.Webproperties.list(firstAccountId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (webProperties.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstWebPropertyId = webProperties.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>].getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> profiles = Analytics.Management.Profiles.list(firstAccountId, firstWebPropertyId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (profiles.getItems()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstProfile = profiles.getItems()[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> firstProfile; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No views (profiles) found.'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No webproperties found.'</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'No accounts found.'</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getReportDataForProfile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">firstProfile</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> profileId = firstProfile.getId(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tableId = <span class="hljs-string"><span class="hljs-string">'ga:'</span></span> + profileId; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> startDate = <span class="hljs-string"><span class="hljs-string">"today"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// getLastNdays(14)  2 weeks (a fortnight) ago. var endDate = "today"; //getLastNdays(0)  Today. var optArgs = { 'dimensions': 'ga:date,ga:hour,ga:minute,ga:sourceMedium', // Comma separated list of dimensions. 'sort': 'ga:date,ga:hour,ga:minute', // Sort by sessions descending, then keyword. //'segment': 'dynamic::ga:isMobile==Yes', // Process only mobile traffic. 'filters': 'ga:sourceMedium==yandex / cpc', 'start-index': '1', 'max-results': '10000' // Display the first 250 results. }; // Make a request to the API. var results = Analytics.Data.Ga.get( tableId, // Table id (format ga:xxxxxx). startDate, // Start-date (format yyyy-MM-dd). endDate, // End-date (format yyyy-MM-dd). 'ga:users', // Comma seperated list of metrics. optArgs); if (results.getRows()) { return results; } else { throw new Error('No views (profiles) found'); } } function getLastNdays(nDaysAgo) { var today = new Date(); var before = new Date(); before.setDate(today.getDate() - nDaysAgo); return Utilities.formatDate(before, 'GMT', 'yyyy-MM-dd'); } function outputToSpreadsheet(results) { var sheets = SpreadsheetApp.getActiveSpreadsheet(); var sheet = sheets.getSheetByName("coeff1"); var range = sheet.getRange('A:E'); range.clear(); // Print the headers. var headerNames = []; for (var i = 0, header; header = results.getColumnHeaders()[i]; ++i) { headerNames.push(header.getName()); } sheet.getRange(1, 1, 1, headerNames.length) .setValues([headerNames]); // Print the rows of data. sheet.getRange(2, 1, results.getRows().length, headerNames.length) .setValues(results.getRows()); }</span></span></code> </pre> <br></div></div><br><br>  Langkah 3. Kami mengatur pemicu untuk memperbarui data setiap menit: <br><br><img src="https://habrastorage.org/webt/bu/-f/lq/bu-flq0ftubu0wa1lcqxw1uilz0.png"><br>  <font color="#7c8792">Gambar 8. Kami meminta data segar setiap menit untuk respons cepat terhadap penipuan</font> <br><br>  Langkah 4. Kami membuat tabel pivot dari lembaran yang diperbarui dengan data yang diperlukan satu menit sekali, dan menganalisis indikator ini untuk mengonfigurasi pemicu untuk pemberitahuan email atau menonaktifkan grup iklan menggunakan Yandex.Direct API atau AdWords. <br><br><img src="https://habrastorage.org/webt/ha/ba/-g/haba-goptrqk9xjgxrge_wjqqjs.png" alt="gambar">  <font color="#7c8792">Gambar 9. Contoh pengaturan rumus untuk pemberitahuan anomali</font> <br><br><div class="spoiler">  <b class="spoiler_title">Contoh kode Google Script saya untuk mengirim pemberitahuan email</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ss = SpreadsheetApp.getActiveSpreadsheet(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sheet = ss.getSheetByName(<span class="hljs-string"><span class="hljs-string">"notification"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> range = sheet.getRange(<span class="hljs-string"><span class="hljs-string">"D2:E4"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// The row and column here are relative to the range // getCell(1,1) in this code returns the cell at B2, B2 var cell = range.getCell(1, 2); Logger.log(cell.getValue()); if (cell.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell.getValue(), "Check me "+range.getCell(1, 1).getValue()); } else { } var cell2 = range.getCell(2, 2); Logger.log(cell2.getValue()); if (cell2.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell2.getValue(), "Check me "+range.getCell(2, 1).getValue()); } else { } var cell3 = range.getCell(3, 2); Logger.log(cell3.getValue()); if (cell3.getValue() !== "no") { MailApp.sendEmail("your_email@yandex.ru", "Fraud notification "+cell3.getValue(), "Check me "+range.getCell(3, 1).getValue()); } else { } }</span></span></code> </pre> <br></div></div><br><h2>  <font color="#3e6c9a">Intinya: bagaimana cara mengalahkan klik</font> </h2><br>  Melawan penipuan klik dapat dibagi menjadi tiga kelompok: <br><br>  a) Tindakan proaktif: <br><ul><li>  penutupan "situs yang tercemar"; </li><li>  Menonaktifkan iklan untuk audiens dengan tanda-tanda penipuan untuk Anda, misalnya, untuk orang-orang di tablet dari St. Petersburg (parameter yang lebih kompleks untuk pemblokiran dapat digunakan melalui daftar AdWords dan segmen Metrik); </li><li>  penyesuaian tawaran untuk segmen audiens yang mirip dengan segmen penipuan (segmen â€œmiripâ€ dibuat di Y. Audiens dan daftar Google); </li><li>  blokir penipuan oleh topeng jaringan IP (hanya tersedia di AdWords). </li></ul><br>  b) Tindakan pencegahan: <br><ul><li>  Melaporkan pengembalian anggaran ke AdWords dan Direct </li><li>  investigasi "yang memerintahkan serangan terhadap Anda"; </li><li>  pengelompokan grup iklan yang mencurigakan dan sering diserang ke dalam satu kampanye iklan; </li><li>  "Traps" untuk bot paling sederhana, yaitu tombol tersembunyi di situs yang hanya terlihat oleh bot dan ketika diklik akan masuk ke daftar. </li></ul><br>  c) tindakan â€œPasca factumâ€: <br><ul><li>  pemblokiran oleh alamat IP; </li><li>  pemutusan cepat pusat klik: kata kunci, grup iklan, kampanye iklan, segmen audiens. </li></ul><br><img src="https://habrastorage.org/webt/lh/kt/qu/lhktquoljkgpshxr78ig6mspa4q.png" alt="gambar"><br>  <font color="#7c8792">Gambar 10. Perlindungan terhadap penipuan klik</font> <br><br>  <b>Tautan yang bermanfaat:</b> <b><br></b> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pustaka</a> API Pelaporan Inti </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Explorer Kueri</a> untuk pengujian nyaman perintah API; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami menulis skrip untuk mengotomatiskan pekerjaan dengan aplikasi Google</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Otomatiskan Google Sheets</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Analytics Intelligence</a> , untuk bertanya bot Analytics: - "Tapi apakah ada anomali dalam lalu lintas berbayar selama setahun terakhir?"  - dan dapatkan jawaban yang jelas. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Cara mengetahui siapa yang memerintahkan serangan terhadap iklan Anda</b> <div class="spoiler_text">  Pesaing manapun yang memadai akan meminimalkan kerusakan mereka ketika menyerang orang lain: <br><br><ol><li>  pertama, penyerang akan berusaha untuk tidak menampilkan iklannya ke arah bahwa serangan sedang terjadi saat ini, agar tidak menggabungkan CTR dan meningkatkan BPK-nya; <br></li><li>  kedua, pesaing yang tidak bermoral akan memilih kata kunci untuk serangan itu, yang menurutnya dia dapat berhenti menampilkan iklannya tanpa banyak merugikan dirinya sendiri. <br></li></ol><br>  Dalam kasus kami, pesaing juga mulai mengklik penipuan di 4 arah di dua kota, jadi tidak sulit untuk menghitungnya. <br><br>  Untuk membuatnya lebih mudah untuk menganalisis pesaing Anda bersinggungan, Anda dapat melihat semua iklan pesaing yang disertakan untuk setiap kata kunci di antarmuka Yandex.Direct: <br><br><img src="https://habrastorage.org/webt/w2/_t/4p/w2_t4p4zpj0imyxdogo7saha0sg.png"><br>  <font color="#7c8792">Gambar 9. Semua iklan pesaing berdasarkan kata kunci</font> <br></div></div><br><br>  <b>Yang juga menghadapi klik iklan kontekstual - tulis di komentar, kami akan mencoba saling membantu!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423335/">https://habr.com/ru/post/id423335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423317/index.html">Kenapa pria Scala?</a></li>
<li><a href="../id423319/index.html">Integrasi kode Vivaldi. Pengembang kami memberi tahu</a></li>
<li><a href="../id423321/index.html">Melindungi repositori GitHub dari komitmen jahat</a></li>
<li><a href="../id423323/index.html">"Kamu harus malas untuk menjadi penguji yang baik."</a></li>
<li><a href="../id423329/index.html">Mempersiapkan wawancara dengan perusahaan Lima Besar</a></li>
<li><a href="../id423337/index.html">Bagaimana cara berteman dengan PHPstorm, xDebug dan cabang jarak jauh yang dikompilasi melalui Docker? Terlalu sederhana ...</a></li>
<li><a href="../id423339/index.html">Apakah ada kehidupan di bawah Windows 98, bagian satu - tentang perangkat keras</a></li>
<li><a href="../id423341/index.html">Di bawah tekanan publik, Sony mengakui bahwa karya Bach bukan miliknya.</a></li>
<li><a href="../id423343/index.html">Nilai-nilai budaya yang terbuat dari plastik mulai membusuk</a></li>
<li><a href="../id423345/index.html">Perasaan takut</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>