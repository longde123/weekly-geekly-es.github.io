<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¶ ğŸ¦“ ğŸ™…ğŸ¾ Wir generieren Kachelebenen und verstecken Quadrate vor dem Spieler ğŸ½ ğŸ‘¨ğŸ¾â€ğŸ”§ ğŸ§˜ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Levelgenerierung in unerforscht 2 
 Wir sind sehr stolz auf den Unexplored 2 Game Level Generator, ein Programm, das alle modernen Anforderungen erfÃ¼l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir generieren Kachelebenen und verstecken Quadrate vor dem Spieler</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457766/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y7/gx/lz/y7gxlziwifqpjitd5m4rqtp-x8a.gif"></div><br><h1>  Levelgenerierung in unerforscht 2 </h1><br>  Wir sind sehr stolz auf den Unexplored 2 Game Level Generator, ein Programm, das alle modernen Anforderungen erfÃ¼llt.  In einem Beitrag werde ich darÃ¼ber sprechen, wie Spielebenen erstellt werden. <br><br>  Wir mussten das Rad nicht neu erfinden.  In Unexplored 1 haben wir bereits Techniken entwickelt, die den Erfolg des ersten Spiels stark beeinflusst haben.  Unexplored 2 setzte gerade fort, was gestartet wurde.  Die Grundlage unserer Technologie besteht aus zwei Teilen: Wir verwenden eine mehrstufige Erzeugung, die fast einen Prozess simuliert, der der Arbeit eines Designers auf lebender Ebene sehr Ã¤hnlich ist.  DarÃ¼ber hinaus verwenden wir eine Technik namens " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cyclic Dungeon Generation</a> ", mit der sich natÃ¼rlich besser aussehende Ebenen erzeugen lassen als mit den meisten Standardanwendungen zur Erstellung generativer Inhalte.  In diesem Beitrag werde ich Ã¼ber den ersten Aspekt sprechen.  Die Anpassung der zyklischen Dungeon-Generation an Unexplored 2 wird das Thema eines zukÃ¼nftigen Beitrags sein. <br><br><h2>  Nachahmung des Designs auf â€menschlicherâ€œ Ebene </h2><br>  Der Pegelgenerator unterteilt den Prozess der Pegelgenerierung in eine ganze Reihe geregelter Stufen.  Es geht von der Planung auf hoher Ebene zu einer detaillierten Karte auf niedriger Ebene.  TatsÃ¤chlich erstellt er zuerst eine Skizze des Levels und fÃ¼gt dann Details hinzu, bis das Level abgeschlossen und gefÃ¼llt ist. <br><a name="habracut"></a><br>  In jeder einzelnen Phase dieses Prozesses verwenden wir generative Grammatiken, um die in den vorherigen Phasen generierte Ebene zu transformieren.  Insbesondere verwenden wir Kachelgrammatiken und Diagrammgrammatiken, bei denen es sich um Varianten allgemeinerer Zeichenfolgengrammatiken handelt, die einfach nach Teilen von Zeichenfolgen suchen und diese durch andere Zeichenfolgen ersetzen, Ã¤hnlich wie dies bei regulÃ¤ren AusdrÃ¼cken der Fall ist.  Wenn Sie mit den Konzepten generativer Grammatiken und regulÃ¤rer AusdrÃ¼cke nicht vertraut sind, empfehle ich Ihnen, im Internet nach Beispielen zu suchen (oder einfach weiterzulesen - Sie benÃ¶tigen keine grÃ¼ndlichen Kenntnisse, um die Bedeutung dieses Beitrags zu verstehen). <br><br>  Die erste Stufe des Levels ist relativ einfach.  Wir verwenden eine Bitmap mit niedriger AuflÃ¶sung, um die Grundlagen des Levels zu lokalisieren.  Im folgenden Beispiel ist die Ebene zunÃ¤chst sehr einfach: Sie besteht nur aus dem Eingang (e) links, dem Eingang rechts und der Verbindung des direkten Pfades.  Die meisten anderen Kacheln sind entweder undefiniert (u) oder blockiert (B), da sie sich an den RÃ¤ndern des Levels befinden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a03/aa5/2fa/a03aa52fae0cb45e82425c4c95e38214.png"></div><br>  <i>Abbildung 1: Eine einfache Skizze des Levels</i> <br><br>  In der nÃ¤chsten Phase werden Details hinzugefÃ¼gt: Es erscheint eine Gruppe von RÃ¤umen, die durch Tore verbunden sind und so gestaltet sind, dass sie in eine bestimmte Richtung verlaufen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b9/7cd/1e4/2b97cd1e4732bab984f5181a37ba71f7.png"></div><br>  <i>Abbildung 2: Struktur hinzugefÃ¼gt</i> <br><br>  Kachelkarten eignen sich hervorragend zum Erstellen von Ebenengeometrien. Es ist jedoch praktischer, mit Diagrammen zu arbeiten, um Strukturen und Spiellogik zu generieren.  Dies ist, was der Generator als nÃ¤chstes tut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b3/da0/5c5/2b3da05c5967229d8d14816df5bf80ce.png"></div><br>  <i>Abbildung 3: Basisdiagramm</i> <br><br>  In der Grafik enthalten einige Knoten Unterknoten, in unserem Fall sind die meisten Tore als gefÃ¤hrlich (H) und einige als offen (O) markiert. <br><br>  Basierend auf einer relativ einfachen Analyse und generativen Regeln werden dem Diagramm neue Elemente hinzugefÃ¼gt.  Beispielsweise befindet sich der Endpunkt (G) an einem Ort, der weit genug von den EingÃ¤ngen entfernt ist.  ZusÃ¤tzlich werden dem Diagramm kleine Gefahren hinzugefÃ¼gt, um das Level bedrohlicher zu machen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/3a5/6e0/7843a56e0fb89b3a1350076657c212c5.png"></div><br>  Abbildung 4: Neue Elemente zum Diagramm hinzugefÃ¼gt. <br><br>  In der Zwischenzeit wird eine Kachelkarte mit niedriger AuflÃ¶sung mithilfe mehrerer Rauschfunktionen in eine Kachelkarte mit hoher AuflÃ¶sung konvertiert, um ihr ein natÃ¼rlicheres Aussehen zu verleihen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/465/e65/18e/465e6518e606b4eb70e4d04b2b3ca8c1.png"></div><br>  Abbildung 5: HochauflÃ¶sende Kachelkarte <br><br>  AnschlieÃŸend werden die Informationen aus dem Diagramm verwendet, um die Kachelkarte zu dekorieren und neue Elemente hinzuzufÃ¼gen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/722/9b7/140/7229b7140304bb1f8302586b2dfb6c16.png"></div><br>  <i>Abbildung 6: Verzierte Kachelkarte.</i> <br><br>  Die Karte, wie sie ist, wird ausschlieÃŸlich zur PrÃ¤sentation im Gameplay generiert.  WeiÃŸe Kacheln kennzeichnen offene Felder, und fast alle anderen Kacheln kennzeichnen sehr spezifische Spielelemente, z. B. einen Geheimgang durch die BÃ¼sche (grÃ¼ne Kreise), â€Tore im Dickichtâ€œ (grÃ¼ne Quadrate und lila Streifen) oder LaichplÃ¤tze zum Binden von BÃ¤umen (rote Kreise mit) Buchstaben s).  Der Hauptteil des Levels ist noch undefiniert und zu diesem Zeitpunkt geht der Generator davon aus, dass diese Bereiche gefÃ¼llt werden sollten, um die Bewegung des Spielers zu blockieren. <br><br>  Er fÃ¼hrt diese Aufgabe auf mehreren Schichten aus: Die untere Schicht gibt die HÃ¶he und Art der OberflÃ¤che an, die zweite fÃ¼gt an bestimmten Stellen Wasser hinzu und die dritte Schicht fÃ¼gt Vegetation und andere Dekorationen hinzu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e37/6b6/f11/e376b6f11b4e4e526986238c4d0c50cc.png"></div><br>  <i>Abbildung 7: ErdoberflÃ¤chentypen (Gras, Schlamm und Steine)</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/898/9ac/2d78989ac691225d306a3319c2f7e111.png"></div><br>  <i>Abbildung 8: Wasser</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/ade/799/021ade7992212c857d6e4101e31273e0.png"></div><br>  <i>Abbildung 9: Vegetation und andere Dekorationen</i> <br><br>  Diese Ebenen werden dann zur Datendatei der letzten Ebene hinzugefÃ¼gt, zu der einige weitere Details hinzugefÃ¼gt werden.  Das Spiel verwendet diese Daten, um Assets zu platzieren und das Level so zu erstellen, wie Sie es sehen.  In dieser Phase gibt es viele Tricks.  Beispielsweise kÃ¶nnen Sie feststellen, dass die LandplÃ¤ttchen in der obigen Abbildung seltsame Formen haben.  Diese Formulare werden verwendet, um Bodenkacheln so zu erstellen, dass der Spieler nicht bemerkt, dass die Quelldaten eine Kachelkarte waren.  Ich werde darÃ¼ber im zweiten Teil des Artikels sprechen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc9/b89/75c/bc9b8975c9b0704266c5786af53834eb.png"></div><br>  <i>Abbildung 10: Bereitschaftsstufe</i> <br><br><h2>  Gameplay hinzufÃ¼gen </h2><br>  Diese Level-Generierungsmethode bietet viele Vorteile.  Die Phase der Umwandlung eines Levels in ein Diagramm ist besonders wichtig, um die â€Argumentationâ€œ Ã¼ber das Gameplay fÃ¼r den Generator zu vereinfachen.  In dem oben gezeigten Beispiel haben wir nichts damit gemacht, auÃŸer um zu Ã¼berprÃ¼fen, ob Level-Ziele in einiger Entfernung von den Eingaben erstellt wurden.  FÃ¼r andere Ebenen in diesen Phasen werden jedoch mehr Aufgaben ausgefÃ¼hrt. <br><br>  Nehmen Sie zum Beispiel eine HÃ¶hlenkarte in einem klassischeren Dungeonstil (im Vergleich zum Waldniveau aus dem obigen Beispiel).  Das Basisdiagramm dieser Ebene hat nur einen Eingang und einige neue Tortypen.  Ein Paar von ihnen ist geschlossen (L): Einige Tore fangen den Spieler von einer Seite ein (T), und dunkelgrÃ¼n nenne ich das â€Ventilâ€œ: Diese Art von Tor ermÃ¶glicht es dem Spieler, nur in eine Richtung zu gehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>  <i>Abbildung 11: Basisanzahl der HÃ¶hle</i> <br><br>  Die Struktur dieses Levels ermÃ¶glicht es dem Generator, eine viel komplexere Mission zu erstellen.  Zum Beispiel ist der einzige Weg, um dieses Level zu erreichen, ein â€Ventilâ€œ, das den Spieler zwingt, nach einem anderen Ausweg zu suchen.  Der SchlÃ¼ssel zum Ã–ffnen des Auswegs (unten links) befindet sich hinter der Gefahr oben links, und das Ziel befindet sich hinter den Toren, die den Spieler fangen.  Ein Beispiel fÃ¼r ein solches Ziel wÃ¤re eine Passage, die hinter einem Spieler zusammenbricht.  Im Allgemeinen entsteht dadurch eine HÃ¶hle, die auf eigene Faust interessant zu erkunden ist. Unexplored 2 bietet jedoch auch die MÃ¶glichkeit, Kreaturen und Ereignisse hinzuzufÃ¼gen, die sich zur Laufzeit einfÃ¼gen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>  <i>Abbildung 12: Der HÃ¶hle hinzugefÃ¼gte SchlÃ¶sser und SchlÃ¼ssel</i> <br><br>  Mit dem oben beschriebenen Verfahren wird das Diagramm verwendet, um eine vollstÃ¤ndig detaillierte Kachelkarte zu generieren und zu fÃ¼llen.  Die Anwendung verschiedener Parameter, die die HÃ¶hlennatur dieses Niveaus widerspiegeln, fÃ¼hrt zu sehr unterschiedlichen Ergebnissen mit zerstÃ¶rten unterirdischen Strukturen (blaue Quadrate, die mit dem Buchstaben c markiert sind) und breiten AbgrÃ¼nden mit Stacheln (lila Kreise): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fca/65c/c79/fca65cc79406fa4ba471d763f8ab6539.png"></div><br>  <i>Abbildung 13: HÃ¶hlenebene im Detail</i> <br><br><h2>  Zusammenfassend </h2><br>  Ich hoffe, Sie haben eine allgemeine Vorstellung davon, wie wir uns der Erzeugung von Ebenen in Unexplored 2 nÃ¤hern. Dies ist ein komplexer mehrstufiger Prozess, Ã¼ber den ich in naher Zukunft mehr schreiben mÃ¶chte.  Zumindest habe ich Ihnen bereits versprochen, Ã¼ber die Anwendung der zyklischen Dungeon-Generierung zu schreiben.  Aber Sie kÃ¶nnen noch viel mehr erzÃ¤hlen, von generativen ErzÃ¤hltechniken Ã¼ber das Rendern von Linien und Schattierungsmethoden bis hin zum langwierigen Entwurfsprozess, mit dem wir das GlÃ¼ckssystem erstellt haben, und anderen Aspekten. <br><br><h1>  Teil 2. Von Kacheln zu Kurven oder SpaÃŸ mit Voronoi zÃ¤hlt </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a15/895/3a8/a158953a829bff67da8a242686b2675b.png"></div><br>  Der unerforschte 2-Inhaltsgenerator generiert Kachelkarten.  Ein typisches Ergebnis sieht folgendermaÃŸen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e2/f20/fff/0e2f20fff2077a7259c639e8aa5bdda8.png"></div><br>  Diese Kachelkarten sind Ã¼bereinander gestapelt und verwenden verschiedene Kacheln, um die Arten der ErdoberflÃ¤che (in diesem Beispiel Gras oder Schmutz) sowie verschiedene Dekorationen anzuzeigen.  In diesem Fall gibt es mehrere BÃ¼sche (groÃŸe grÃ¼ne Kreise), Steine â€‹â€‹(schwarze Kreise), Pflanzen (kleine grÃ¼ne Kreise), Blumen (weiÃŸe Kreise) und dekorative Texturen (graue Quadrate).  Es gibt auch spezielle Kacheln, die Spieldaten anzeigen, z. B. Spawnpunkte, die mit dem Buchstaben "s" gekennzeichnet sind.  DarÃ¼ber hinaus kÃ¶nnen Kacheln mit zusÃ¤tzlichen Informationen markiert werden, z. B. HÃ¶henstufe oder spezielle Untertypen. <br><br>  Kachelkarten sind eine Datenstruktur, die fÃ¼r Generatoren praktisch ist.  Gleichzeitig ist es jedoch recht einfach und das Raster ist im Spiel oft bemerkbar.  Nach dem Laden der Daten in das Spiel und dem Platzieren der Assets sieht das Ergebnis jedoch folgendermaÃŸen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br>  Ich denke, wir haben die Fliesen ziemlich gut versteckt, und so haben wir es bekommen. <br><br><h2>  Voronoi Magie </h2><br>  Der Trick besteht darin, dass einzelne Kacheln den Zellen im Voronoi-Diagramm entsprechen.  Dieses Diagramm kann verwendet werden, um viel natÃ¼rlichere Formen zu erzeugen.  Das Voronoi-Diagramm wird erstellt, indem die Ebene mit zufÃ¤lligen Punkten ausgesÃ¤t und in Zellen unterteilt wird, sodass jeder Punkt auf der Ebene zu der Zelle gehÃ¶rt, die dem nÃ¤chsten Startpunkt entspricht.  Bei der Erstellung von prozeduralen Inhalten kÃ¶nnen Voronoi-Diagramme auf verschiedene interessante Arten verwendet werden. <br><br>  Ein typisches Voronoi-Diagramm wird aus einer zufÃ¤lligen, aber ziemlich gleichmÃ¤ÃŸigen Verteilung der Erzeugungspunkte erstellt, die ungefÃ¤hr so â€‹â€‹aussieht: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fd/15a/338/5fd15a3382b48d74706d5f5458c4f7cb.png"></div><br>  In Unexplored 2 verwenden wir eine andere Art der Verteilung von Erzeugungspunkten.  Zuerst generieren wir einen Punkt fÃ¼r jede Kachel.  So kÃ¶nnen wir sicher sein, dass jede Kachel auf der Kachelkarte einer Zelle im Voronoi-Diagramm entspricht. <br><br>  Wenn wir die Erzeugungspunkte in der Mitte jeder Zelle platzieren, erhalten wir ein gerades Gitter, das genau wie eine Kachelkarte aussieht (fÃ¼r dieses und andere Bilder unten habe ich eine Schachversion erstellt, in der die HÃ¤lfte der Kacheln gelb dargestellt wird, damit Sie es etwas besser machen kÃ¶nnen siehe Muster): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0dd/a26/a2f/0dda26a2fa9d01ea045c1219d0a3c999.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8eb/451/15b/8eb45115b429cbb8b612f46ce3fad524.png"></div><br>  Am einfachsten ist es, das Diagramm zu verbessern, indem Sie einfach die Position jedes Erzeugungspunkts randomisieren.  Wenn Sie Punkte verschieben, sollten Sie Ã¼berprÃ¼fen, ob der Punkt nicht Ã¼ber die ursprÃ¼ngliche Kachel hinausgeht. <br><br>  Das Ergebnis sieht ungefÃ¤hr so â€‹â€‹aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/33a/043/4a333a043cf9caadc0a09ff606c046ca.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab6/c25/031/ab6c250312ab2f4e4efec42788c129d5.png"></div><br>  Schon besser, aber sehr laut, und damit keine schÃ¶nen Wickellinien bekommen.  Das Bild kann verbessert werden, indem Voronoi-Diagramme â€entspanntâ€œ werden (dies ist eine Standardtechnik fÃ¼r sie, auf die ich hier nicht nÃ¤her eingehen werde).  Es bleibt jedoch immer etwas laut, und es ist schwierig, die Zahlen auf einer Skala, die die Skala der einzelnen Kacheln Ã¼berschreitet, effektiv vorherzusagen. <br><br>  Um dieses Problem zu lÃ¶sen, mÃ¼ssen wir uns nicht nur zufÃ¤llig bewegen, sondern uns diesem intelligenteren Ansatz nÃ¤hern.  Unterschiedliche Bewegungsarten kÃ¶nnen sehr unterschiedliche Auswirkungen haben.  Wenn Sie beispielsweise Perlin-Rauschen verwenden, erhalten Sie interessante kurvige Kachelkarten.  Oder Sie kÃ¶nnen das gesamte Raster in sechseckige Kacheln verwandeln, indem Sie einfach jede zweite Linie der Erzeugungspunkte nach links verschieben: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b1/ccb/69e/6b1ccb69e7e6ca475e6c62c56f52b56c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/787/b2f/b06787b2f08c28d84f009caffd76ff14.png"></div><br>  Wir haben einen echten Durchbruch erzielt, als wir begonnen haben, die Erzeugungspunkte in bestimmten Mustern zu verschieben, um abgerundete Ecken zu erstellen.  Die erste Stufe dieses Prozesses wird bereits im FÃ¼llstandsgenerator durchgefÃ¼hrt.  Die Winkel zwischen verschiedenen Arten der ErdoberflÃ¤che werden erkannt, und Eckkacheln sind mit verschiedenen Figuren markiert, die angeben, wie sie verformt werden, um eine schÃ¶nere Umgebung zu schaffen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/822/1fb/21a8221fb1d87fec480db9cc2c95425e.png"></div><br>  In diesem Fall fÃ¼hrt der Unterschied in den HÃ¶henstufen auch dazu, dass Winkel auf der Kachelkarte angezeigt werden.  Deshalb sehen Sie oben rechts und unten links zusÃ¤tzliche abgerundete Ecken im Gras, wo die HÃ¤nge erzeugt wurden. <br><br>  Das Spiel verwendet diese Informationen, um die Erzeugungspunkte des Voronoi-Graphen zu verschieben.  Jede abgerundete Ecke verschiebt die Position des Ursprungspunkts (siehe Abbildung unten).  AuÃŸerdem verschiebt es die Erzeugungspunkte seiner vier orthogonalen Nachbarn.  Dieser Prozess ist kumulativ;  Generierungspunkte kÃ¶nnen sich mehrmals bewegen, wenn sie sich in der NÃ¤he mehrerer Winkel befinden.  Nach der Verarbeitung aller Offsets sind die Erzeugungspunkte jedoch etwas zufÃ¤llig angeordnet (etwa 10% der Kachelbreite in jeder Richtung), und der endgÃ¼ltige Versatz ist auf maximal 40% der Kachelbreite begrenzt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a94/9b9/3f5/a949b93f5e2e724a95658f75af6a50c4.png"></div><br>  Das Ergebnis ist bereits von ziemlich hoher QualitÃ¤t: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ccc/830/f24/ccc830f24c201bd4e519ca0407f77c18.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8b/d27/edb/b8bd27edb8a753ee92e9d2d5551e6a05.png"></div><br>  Aber wir sind noch nicht fertig ... <br><br><h2>  Mit Bedacht dekorieren </h2><br>  Die Gesamtform ist besser geworden, aber die Kanten sind immer noch sehr gerade und sehen irgendwie gezackt aus.  Wir werden dies verbergen, indem wir gekrÃ¼mmte Elemente an den Kanten platzieren, an denen sich die Farben unterscheiden.  Der eigentliche Trick besteht jedoch darin, dass eine Kurve hÃ¤ufig an zwei Kanten platziert wird und ihre Winkel relativ zueinander verwendet werden, um die Richtung der Kurve zu bestimmen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d27/4ef/fc6/d274effc6224874373a8c8c355dcb209.png"></div><br>  Das Ergebnis sieht folgendermaÃŸen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e97/591/baa/e97591baad40e954f3c4b164f2b91739.png"></div><br>  Als NÃ¤chstes haben wir 3D-Assets verwendet, um Texturausschnitte hinzuzufÃ¼gen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/711/70a/6b0/71170a6b0ea154c6974e8787be8c0680.png"></div><br>  SchlieÃŸlich fÃ¼gen wir ein weiteres Asset hinzu, um das Level zu fÃ¼llen.  Der Standort dieser Assets wird durch die zuvor generierten Level-Daten bestimmt und folgt im Allgemeinen einfachen Prinzipien.  Wir verwenden kleine Assets, die grÃ¶ÃŸere umgeben, um natÃ¼rliche und schÃ¶ne ÃœbergÃ¤nge zu schaffen.  Insbesondere ist es erwÃ¤hnenswert, dass am FuÃŸe der Klippen Steine â€‹â€‹hinzugefÃ¼gt werden, die VariabilitÃ¤t erzeugen und die vertikalen HÃ¤nge, die fÃ¼r das Gameplay erforderlich sind, optisch weicher machen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br><h2>  Lokale VariabilitÃ¤t </h2><br>  Winkel sind nicht die einzige Art der Verschiebung, die wir verwenden.  Insbesondere mÃ¶chten wir, dass die Kanten neben den kÃ¼nstlichen Strukturen (z. B. den unten gezeigten zerstÃ¶rten WÃ¤nden) gerader sind: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/9f5/127/8399f5127ae11017b243716b075c3324.png"></div><br>  In unserem System ist dieser Effekt leicht zu erreichen.  Wir fÃ¼gen einfach eine weitere Verschiebungsregel hinzu, die die Verschiebung von Fliesen mit kÃ¼nstlichen Strukturen verbietet.  Der Generator verwendet kleine Quadrate, um solche Kacheln zu markieren, und das Spiel stellt sicher, dass alle Offsets einfach ignoriert werden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b84/5b1/372/b845b1372a6623d931eb30ed29fe5bcc.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09e/2c4/f64/09e2c4f64fad5ee474fcbfa21e607c73.png"></div><br>  Wenn Sie auf den Boden schauen, kÃ¶nnen Sie deutlich sehen, dass bestimmte Bereiche gerade sind, wÃ¤hrend andere sich natÃ¼rlicher biegen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c60/5e3/635/c605e363554553121d8c70c61ebaa5b2.png"></div><br>  Ist es nicht schÃ¶n <br><br>  Es gibt andere Regeln, die mit dieser Technik einfach hinzugefÃ¼gt werden kÃ¶nnen.  Zum Beispiel zwingen wir Kacheln manchmal, ein sechseckiges Muster zu erstellen, damit die schmalen Pfade breit genug bleiben, um sich um sie herum zu bewegen.  Ich bin sicher, dass wir andere Verwendungszwecke fÃ¼r andere Muster finden werden. <br><br>  Dies ist einer von vielen GrÃ¼nden, warum ich Voronoi-Diagramme liebe.  Ein anderes Mal werde ich darÃ¼ber schreiben, wie wir sie verwenden, um Unexplored 2-Weltkarten zu generieren und zu dekorieren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457766/">https://habr.com/ru/post/de457766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457756/index.html">Das Buch Kafka Streams in Aktion. Echtzeitanwendungen und Microservices Â»</a></li>
<li><a href="../de457758/index.html">Ingenieure retten Menschen, die im Wald verloren gegangen sind, aber der Wald hat sich noch nicht ergeben</a></li>
<li><a href="../de457760/index.html">So machen Sie Container noch isolierter: eine ÃœberprÃ¼fung der Container-Sandbox-Technologien</a></li>
<li><a href="../de457762/index.html">CCD-Lineal: Womit es gegessen wird</a></li>
<li><a href="../de457764/index.html">10 Fehler der jungen PO (Teil II)</a></li>
<li><a href="../de457768/index.html">Wie ich verwundbar wurde: Scannen der IT-Infrastruktur mit Qualys</a></li>
<li><a href="../de457770/index.html">Wir schreiben benutzerdefinierte Transformatoren AST auf TypeScript</a></li>
<li><a href="../de457774/index.html">Studieren als Privatpilot in Mittelerde: Umzug und Leben in einem neuseelÃ¤ndischen Dorf</a></li>
<li><a href="../de457776/index.html">Minen unter Leistung warten in den FlÃ¼geln: Teil 2</a></li>
<li><a href="../de457784/index.html">Benutzerdefinierte Eye-Tracker-Kalibrierung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>