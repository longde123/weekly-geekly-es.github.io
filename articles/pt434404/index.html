<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüåæ üôçüèº üõë Projeto de implementa√ß√£o do SAP Single Sign On üë¶üèª üí™üèº üßòüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No final do ano, todo mundo est√° avaliando lentamente. 


 Para mim, este ano foi lembrado pelo projeto de implementa√ß√£o do Single Sign On (SSO) entre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Projeto de implementa√ß√£o do SAP Single Sign On</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434404/"><p>  No final do ano, todo mundo est√° avaliando lentamente. </p><br><p> Para mim, este ano foi lembrado pelo projeto de implementa√ß√£o do Single Sign On (SSO) entre SAP e Windows.  Neste artigo, falarei sobre a experi√™ncia de implementa√ß√£o e gerenciamento de projetos, armadilhas, descobertas e conclus√µes. </p><br><p><img src="https://habrastorage.org/webt/cn/to/6k/cnto6kpsemohl4qre396cg74uhs.jpeg"></p><br><p>  A empresa √© uma grande empresa de transporte na B√©lgica, combinando metr√¥, bonde e √¥nibus.  S√£o mais de 10 mil funcion√°rios, dos quais quase dois mil s√£o backoffice, usando muitas ferramentas: site corporativo, correio, servi√ßo de aplicativo, sharepoint, arquivista e, √© claro, SAP. </p><br><p>  A SAP est√° em todo lugar: da contabilidade e RH ao registro de movimenta√ß√£o de unidades de transporte, documenta√ß√£o de acidentes, an√°lises, compras, armazenagem, etc. </p><br><p>  <strong>Problema:</strong> </p><br><ul><li>  O usu√°rio do SAP for PC √© um aplicativo separado para o qual voc√™ precisa da sua senha </li><li>  Primeiro voc√™ precisa solicitar uma senha e depois lembrar.  O suporte t√©cnico √© for√ßado a receber chamadas para criar e alterar senhas. </li><li>  Do ponto de vista do usu√°rio, uma senha extra √© um aborrecimento extra.  As pessoas armazenam senhas em papel ou as tornam muito simples.  A seguran√ßa grita sobre viola√ß√µes graves. </li><li>  Os requisitos m√≠nimos para uma senha para um PC n√£o correspondem √†s configura√ß√µes de senha no SAP.  Se voc√™ os levar a um denominador comum, √© melhor implementar imediatamente o SSO. </li></ul><br><p>  <strong>Objetivo:</strong> implementar um SSO entre o Windows e o SAP, para que, ao fazer login na sua conta de PC, o usu√°rio possa efetuar login no SAP sem inserir uma senha. </p><br><p>  Se voc√™ n√£o lida com a SAP, estar√° interessado neste artigo do ponto de vista do gerenciamento de projetos, pois os detalhes desses detalhes ser√£o fornecidos (entre colchetes). </p><br><p>  Sob o corte: </p><br><ol><li>  √Çmbito de aplica√ß√£o <br>  1.1 Pessoas do escopo <br>  1.2 Sistemas de escopo </li><li>  Componentes <br>  2.1 Alterando par√¢metros do sistema <br>  2.2 Diret√≥rio Ativo do Windows (AD) <br>  2.3 SAP Secure Login Client (SLC) <br>  2.4 Vinculando um usu√°rio SAP ao seu AD <br>  2.5 Modificando o arquivo logon.ini do SAP </li><li>  Teste </li><li>  SNC √© uma brecha na seguran√ßa </li><li>  Trabalho em equipe </li><li>  Informa√ß√µes comerciais </li><li>  Dificuldades de tradu√ß√£o </li><li>  Resumo e Conclus√µes </li></ol><a name="habracut"></a><br><h1 id="vvedenie">  1. Introdu√ß√£o </h1><br><p>  Olhando para o futuro, se voc√™ n√£o estiver disposto a preencher cones padr√£o, aqui est√° uma lista de perguntas que voc√™ deve esclarecer no in√≠cio do projeto: </p><br><ul><li>  <strong>Escopo do projeto</strong> (sistemas, usu√°rios - em que ordem estamos implementando, qual √© a prioridade e o que pode ser descartado se algo der errado, quais usu√°rios devem ter acesso etc.) </li><li>  <strong>Os principais departamentos afetados pelo projeto</strong> (mesmo que o projeto seja tangencial, ainda √© importante que todos sejam informados com anteced√™ncia) </li><li>  <strong>Seus poderes</strong> (n√£o √© muito f√°cil fugir daqui - em uma empresa europ√©ia tudo se baseia no consentimento e no desejo volunt√°rio de ajudar. Se o departamento disser que eles n√£o t√™m recursos, √© quase imposs√≠vel pressionar e "for√ßar". Mas voc√™ pode chamar um consultor externo para obter ajuda, por exemplo) </li><li>  <strong>Tempo</strong> (para todo o projeto como um todo e para partes espec√≠ficas) </li><li>  <strong>Procedimentos de aprova√ß√£o</strong> (Regulamentos burocr√°ticos - em uma grande empresa, essa n√£o √© a √∫ltima pergunta) </li><li>  <strong>Poss√≠veis dificuldades</strong> (Tudo. Poss√≠veis. Dificuldades.) </li></ul><br><p>  Alteramos a associa√ß√£o do projeto v√°rias vezes: no in√≠cio, era apenas o departamento de autoriza√ß√£o no SAP e o departamento de administradores (Componentes B√°sicos).  Em seguida, eles se juntaram ao departamento de autoriza√ß√£o no Windows (Active Directory, AD) e ao departamento de implementa√ß√£o de atualiza√ß√µes (Empacotamento), depois ao departamento de bancos de dados e ao departamento de aplicativos m√≥veis, etc. </p><br><p>  Um consultor externo foi convidado para o lado t√©cnico do assunto, e o gerente de projeto (PM) se tornou eu, como pessoa envolvida na autoriza√ß√£o no SAP (portanto, haver√° mais detalhes sobre a autoriza√ß√£o no SAP neste artigo do que outros). </p><br><p>  <em>Um esclarecimento importante:</em> todo o acesso que oferecemos no SAP √© personalizado.  N√£o usamos as fun√ß√µes padr√£o que o sistema oferece, mas criamos novas, por departamento, por posi√ß√£o, por fun√ß√£o.  At√© o momento, n√£o temos sincroniza√ß√£o entre usu√°rios do SAP e do Windows AD.  Por exemplo, se seu usu√°rio tiver direitos de administrador na rede local, isso n√£o significa que ele tamb√©m seja um administrador no SAP. </p><br><h1 id="1-scope">  1. √Çmbito </h1><br><h2 id="11-scope-lyudi">  1.1 Pessoas do escopo </h2><br><p>  As pessoas de nossa empresa usam o SAP atrav√©s de um aplicativo em um computador pessoal (thin client - SAP Logon GUI), mas n√£o apenas.  Como contar os usu√°rios classificados em distribui√ß√£o? </p><br><p>  Tomamos como base todos os que se conectam diariamente via SAP Logon (tipo de usu√°rio SAP Dialogue) a partir de laptops.  Nesta categoria, todo o backoffice - equipe de administra√ß√£o, bukhs, Ichars, desenvolvedores, testadores, log√≠stica, etc. </p><br><p>  Exclu√≠dos: </p><br><ul><li>  aqueles que t√™m um computador de mesa, n√£o um laptop </li><li>  8 mil usu√°rios que nunca abrem o logon do SAP, mas usam o SAP no site e nos aplicativos (Comunica√ß√£o do tipo de usu√°rio do SAP) </li><li>  todos os usu√°rios externos (n√£o funcion√°rios, mas devem fazer login no sistema via VPN) </li></ul><br><h2 id="12-scope-systems">  1.2 Sistemas de escopo </h2><br><p>  Em nossa empresa, a SAP usa seis cen√°rios ativos ( <strong>ECC, BI, SRM, Netweaver, PI, gerente de solu√ß√µes</strong> ), sem contar as caixas de prote√ß√£o.  Cada um deles tem seu pr√≥prio <em>DEV</em> , <em>ACC</em> , <em>PRD</em> - ou seja,  de fato, s√£o 6 * 3 = 18 sistemas. </p><br><p>  Pela vota√ß√£o das vogais, foi decidido tirar apenas as quatro primeiras paisagens.  O PI e o SM s√£o usados ‚Äã‚Äãpor um c√≠rculo restrito de administradores e exigem a atualiza√ß√£o do pr√≥prio sistema (pelo menos, a atualiza√ß√£o do componente SAP_BASIS para a vers√£o 740).  Caso contr√°rio, a transa√ß√£o <strong>sncwizard</strong> n√£o <strong>√©</strong> suportada e fazer isso manualmente √© muito problem√°tico para 10 a 20 pessoas. </p><br><h1 id="2-komponenty">  2. Componentes </h1><br><p>  As pessoas interessadas nesses detalhes encontrar√£o instru√ß√µes passo a passo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no site da SAP</a> , bem como os v√°rios m√©todos dispon√≠veis (escolhemos o <em>SSO baseado no Kerberos</em> , mas essa nem sempre √© uma op√ß√£o √≥bvia). </p><br><p>  De um ponto de vista muito simplificado (o meu), o SSO √© um complemento no SAP que permite fazer login usando sua conta do Windows.  Voc√™ liga o computador, insira a senha e, para fazer login no SAP, basta clicar duas vezes. </p><br><p>  Para que a m√°gica funcione, voc√™ precisa de 5 componentes: </p><br><p><img src="https://habrastorage.org/webt/9k/ui/9t/9kui9tikv_zq_ki7cam_adhkqfa.jpeg"></p><br><h2 id="21-izmenenie-parametrov-sistemy-instances-sap">  2.1 Alterando par√¢metros do sistema (inst√¢ncias SAP) </h2><br><p>  No sistema SAP ( <em>ECC</em> , <em>BI</em> , <em>SRM</em> , <em>Netweaver</em> ), √© necess√°rio ativar o par√¢metro <em>snc</em> / enable = 1.  Isso √© feito atrav√©s do <em>sncwizard</em> e inclui <em>etapas de</em> prepara√ß√£o, reinicializa√ß√£o do sistema e ativa√ß√£o final. </p><br><p><img src="https://habrastorage.org/webt/pz/yo/ff/pzyofft_tdqezwdvg74bez13ofy.png"></p><br><p>  Descobrimos os par√¢metros antes e depois com a ajuda desses consultores, assist√™ncia de outros departamentos e tentativa e erro.  A coisa mais dif√≠cil aqui foi reiniciar o sistema. </p><br><p>  Sempre √© dif√≠cil reiniciar o PRD na produ√ß√£o; o trabalho est√° acontecendo o tempo todo.  E em uma empresa de transporte isso √© duplamente mais complicado: o transporte muda das cinco da manh√£ at√© a uma da manh√£, mesmo nos finais de semana.  Quaisquer dificuldades com o PRD afetam n√£o apenas os funcion√°rios da empresa, mas toda a cidade e dezenas de milhares de pessoas.  Em outras palavras - voc√™ precisa minimizar o tempo em que o sistema n√£o est√° dispon√≠vel e, se poss√≠vel, combinar com outras atualiza√ß√µes.  Ao mesmo tempo, a burocracia n√£o deve ser subestimada: reiniciar √© uma data, hora, dura√ß√£o (se os par√¢metros n√£o forem salvos na primeira vez) e uma notifica√ß√£o comercial. </p><br><p>  <strong>T√≠nhamos quatro sistemas SAP PRD: ECC, Netweaver, SRM, BI - para reinicializa√ß√£o</strong> </p><br><p>  <strong>O ECC</strong> √© o mais importante, todos os dados em tempo real e o transporte principal est√£o ligados a ele: √¥nibus, bondes. </p><br><p>  Os dados do sistema <strong>Netweaver</strong> (acidentes, aplicativos m√≥veis), bem como dos sistemas ECC, s√£o usados ‚Äã‚Äãat√© √†s 3 da manh√£ - se os bondes n√£o saem, as equipes de reparo v√£o embora. </p><br><p>  Sistema <strong>SRM</strong> - usado principalmente para compras e estava dispon√≠vel qualquer dia ap√≥s as 18:00. </p><br><p>  Com o <strong>BI, a</strong> dificuldade √© que, nos fins de semana, os fluxos de dados do ECC v√£o para o sistema; al√©m disso, √†s vezes os relat√≥rios do BI s√£o usados ‚Äã‚Äãpela alta ger√™ncia fora do hor√°rio comercial. </p><br><p>  No total, foram necess√°rias duas semanas para reiniciar todos os PRDs. <br>  PS A reinicializa√ß√£o de cada um dos sistemas PRD foi precedida pela reinicializa√ß√£o de todos os DEV e ACC, que s√£o mais f√°ceis de coordenar, mas tamb√©m exigem planejamento. </p><br><h2 id="22-windows-active-directory-ad">  2.2 Diret√≥rio Ativo do Windows (AD) </h2><br><p>  O Active Directory requer a cria√ß√£o de um usu√°rio t√©cnico especial (SAP Kerberos).  Este usu√°rio entrar√° em contato com o Windows para obter uma c√≥pia do ticket de entrada para SAP.  Um desses usu√°rios do servi√ßo AD √© suficiente para todos os sistemas SAP. </p><br><p><img src="https://habrastorage.org/webt/tq/hk/fs/tqhkfsq1vqbh3dka2dwhqgltkue.png"></p><br><p>  Essa parte foi inteiramente feita por nosso consultor externo e pela equipe do Active Directory, incluindo v√°rias itera√ß√µes para refinar os par√¢metros e configurar a biblioteca especial, mas para mim permaneceu mais uma "caixa preta". </p><br><h2 id="23-ustanovka-na-kompyuter-polzovatelya-programmy-sap-secure-login-client-slc">  2.3 Instalando o SAP Secure Login Client (SLC) no computador de um usu√°rio </h2><br><p><img src="https://habrastorage.org/webt/0s/uk/ug/0sukugpdet6o952l_cswvaarm8s.jpeg"></p><br><p>  Este programa por si s√≥ n√£o faz nada.  Voc√™ precisa armazenar um ticket do AD que confirme seu usu√°rio ao fazer login em uma sess√£o do Windows e, se necess√°rio, envie esse ticket ao SAP para autoriza√ß√£o.  O SLC pode ser instalado para todos os usu√°rios imediatamente no in√≠cio do projeto - sem os outros componentes SSO, ele n√£o funcionar√° de qualquer maneira. </p><br><h2 id="24-privyazka-polzovatelya-sap-k-ego-polzovatelyu-ad">  2.4 Vinculando um usu√°rio do SAP ao seu usu√°rio do AD </h2><br><p>  Como j√° mencionado, em nossa empresa n√£o existe um gerenciamento √∫nico de usu√°rios, o acesso a diferentes sistemas √© obtido de diferentes equipes.  Nesse caso, o login do usu√°rio no SAP √© diferente do nome do usu√°rio no Windows; por exemplo, o usu√°rio <strong># 45011</strong> no AD √© Ivan Ivanov ou <strong>IVANOVI</strong> .  √â esse grupo que precisa ser preenchido no SNC (por meio da transa√ß√£o SU01, campo SNC, p: CN = ADname @ domain). </p><br><p><img src="https://habrastorage.org/webt/-1/wm/1m/-1wm1mhmz1d8vo_nixlvtp3mvjm.jpeg"></p><br><p>  Nossa empresa n√£o possui o SAP Identity Management.  Portanto, foi necess√°rio resolver dois problemas: criar novos usu√°rios e atualizar os par√¢metros dos j√° existentes. </p><br><p>  <strong>Crie novos usu√°rios</strong> <br>  No sistema principal (ECC), todos os dias √∫teis, s√£o criados de 4 a 6 novos logins, s√£o quase 1000 novos usu√°rios por ano.  O processo √© automatizado: ao criar um usu√°rio, o programa preenche seu endere√ßo, nome, configura√ß√µes b√°sicas.  Decidimos que o programa tamb√©m deve preencher o campo SNC no est√°gio de cria√ß√£o do usu√°rio, independentemente de a pessoa precisar do SSO no SAP posteriormente ou n√£o. </p><br><p>  O problema foi que, para cada usu√°rio, voc√™ precisa preencher um nome exclusivo no AD, ou seja,  n√£o √© o mesmo par√¢metro para todos - ou seja,  √© necess√°rio que o pr√≥prio programa procure o nome de usu√°rio no AD e o preencha no SAP. </p><br><p>  O desenvolvedor atualizou rapidamente o programa.  O c√≥digo e os testes b√°sicos levaram 2 dias, mas os dados para verifica√ß√£o no ACC n√£o eram adequados para n√≥s (o AD n√£o foi atualizado), por isso enviamos imediatamente as altera√ß√µes ao PRD.  Acabou que tudo √© mais complicado do que pens√°vamos.  No decorrer da investiga√ß√£o, chegamos ao seguinte esquema: </p><br><p><img src="https://habrastorage.org/webt/wx/ma/7q/wxma7qi0z2cf0ksqmq9i8nbdcoc.jpeg"></p><br><ol><li>  Primeiro, os usu√°rios s√£o criados no sistema de RH (no SAP, eles podem ser vistos no <strong>PA20</strong> ) </li><li>  Em seguida, eles s√£o copiados para a tabela Z, juntamente com os dados sobre o departamento, posi√ß√£o, posi√ß√£o, se √© o link principal etc. </li><li>  Em seguida, os dados do usu√°rio s√£o enviados para o AD e aqui o sistema cria um usu√°rio no Windows e fornece um nome no AD e no correio </li><li>  O fluxo do PI neste diagrama √© simplesmente para entender que √© um processo de terceiros do terceiro sistema </li><li>  Os dados s√£o copiados de volta para o SAP (na nova tabela Z), desta vez apenas os nomes e endere√ßos de email do AD </li><li>  No √∫ltimo est√°gio, o programa Z √© iniciado, o que cria usu√°rios no SAP ( <strong>SU01</strong> ).  Nem todos os usu√°rios criados no sistema de RH ser√£o criados posteriormente no SAP; muitos s√£o os que, em √∫ltima an√°lise, n√£o usam o SAP </li></ol><br><p>  Demorou quase duas semanas para pesquisar, coordenar altera√ß√µes, concordar com um cronograma para atualizar e carregar / descarregar tabelas.  Era uma quest√£o de sincroniza√ß√£o - o programa de cria√ß√£o do usu√°rio (ponto 6) deve ser estritamente iniciado depois que todos os outros programas j√° tiverem funcionado e os dados forem copiados para as tabelas.  Como resultado, rastreamos por duas semanas quando o programa terminou e a que horas e depuramos o esquema. </p><br><p>  Quando os usu√°rios s√£o criados com um campo SNC preenchido, mas sem os nomes necess√°rios do AD, em SU01, √© poss√≠vel ver todos os infelizes usu√°rios associados a um usu√°rio inexistente do AD. </p><br><p><img src="https://habrastorage.org/webt/-e/w0/xv/-ew0xv-5cdxzkn-khyyhp5aecb8.jpeg"></p><br><p>  <strong>Atualizando configura√ß√µes de usu√°rio existentes</strong> <br>  Precisamente porque nosso SAP e Windows de login n√£o coincidem, n√£o conseguimos usar a solu√ß√£o SAP padr√£o para preenchimento em massa no campo SNC ( <em>RSUSR300</em> via <em>programa SNC1</em> ). </p><br><p>  Como resultado, atualizei os dados de 10 mil usu√°rios existentes usando um script improvisado ( <em>SAP eCATT</em> ), carregando manualmente os dados do usu√°rio e criando uma variante.  Para ter sucesso, tive que abrir para alterar os sistemas eCATT no PRD e no ACC e prometer aos desenvolvedores milh√µes de cookies. </p><br><h2 id="25-modifikaciya-fayla-sap-logonini">  2.5 Modificando o arquivo logon.ini do SAP </h2><br><p>  Tecnicamente, isso √© 1 minuto.  √â necess√°rio apenas observar nas propriedades do arquivo que a conex√£o via <strong>SNC est√° dispon√≠vel</strong> . </p><br><p><img src="https://habrastorage.org/webt/rj/ih/d0/rjihd0garduexbu5whx_yeg4jnm.jpeg"></p><br><p>  A dificuldade √© que esse arquivo est√° localizado localmente no PC do usu√°rio e dois mil usu√°rios precisam alter√°-lo. </p><br><p>  De fato, para n√≥s, a implementa√ß√£o final foi o momento de distribuir o novo arquivo <strong>sap.logon.ini</strong> entre os usu√°rios, em vez de alterar os par√¢metros do PRD.  Porque mesmo que os quatro primeiros componentes j√° estejam prontos e o √∫ltimo quinto n√£o esteja, a m√°gica n√£o acontecer√°. </p><br><p>  Com o √∫ltimo par√°grafo, veio um pequeno incidente.  Eu relatei ao gerenciamento que possu√≠mos 2.000 usu√°rios que ter√£o a atualiza√ß√£o instalada e, quando chegou a hora de implement√°-la, eles me enviaram um status em que havia 3.500 deles.  Isso porque, da minha parte, vi apenas usu√°rios ativos da SAP, mas, na realidade, a atualiza√ß√£o foi enviada a todos os laptops pessoais, que s√£o muito mais na empresa.  Gra√ßas a Deus n√£o surgiram erros t√©cnicos. </p><br><h1 id="3-testirovanie">  3. Teste </h1><br><p>  Como testar o SSO?  Ou funciona ou n√£o.  Nosso desenvolvedor bufou e disse que n√£o √© necess√°rio testar nada e, assim que tudo funcionar na sandbox, voc√™ precisar√° envi√°-lo para produ√ß√£o.  Claro.  Ningu√©m dir√° que ele escreve c√≥digo com bugs. </p><br><p>  Voc√™ precisa verificar: </p><br><ul><li>  O login do SAP funciona com o SSO logo ap√≥s a reinicializa√ß√£o </li><li>  os usu√°rios podem usar o SSO quando conectados √† VPN </li><li>  dificuldades para desenvolvedores de outros sistemas para modificar o logon do SAP </li></ul><br><p>  O SSO n√£o √© um programa, √© dif√≠cil implement√°-lo consistentemente DEV - ACC - PRD.  No entanto, o teste inicial √© necess√°rio para capturar tudo o que poderia dar errado.  O teste neste caso √© a distribui√ß√£o do novo SAP logon.ini quando todos os componentes j√° estiverem em execu√ß√£o.  Testamos o DEV e o ACC com os desenvolvedores e o novo SAP logon.ini com o PRD com uma sele√ß√£o de usu√°rios corporativos. </p><br><p>  O que eles encontraram: </p><br><ul><li>  √†s vezes (1 caso por 500), √© necess√°rio reinstalar completamente o logon do SAP ou o SLC </li><li>  <strong>principais usu√°rios</strong> que t√™m direitos para alterar outros usu√°rios (mais sobre isso no pr√≥ximo par√°grafo) </li></ul><br><h1 id="4-snc-eto-dyra-v-bezopasnosti">  4. SNC √© uma falha de seguran√ßa </h1><br><p>  Que tal modificar o campo SNC? <br>  O fato √© que, alterando o campo SNC de outro usu√°rio (em SU01) para o seu, voc√™ pode conectar-se √† conta de outra pessoa sem alterar a senha.  O sistema simplesmente perguntar√° a voc√™ qual usu√°rio escolher, seu ou de outra pessoa.  No entanto, se voc√™ fizer isso, amanh√£ ningu√©m notar√° nada, porque a senha permaneceu inalterada. </p><br><p><img src="https://habrastorage.org/webt/nf/oo/b0/nfoob05hx89xqaum7iwgctub5vq.jpeg"></p><br><p>  Em qualquer empresa, h√° pessoas envolvidas no <strong>gerenciamento de usu√°rios</strong> .  Normalmente, essas pessoas monitoram a cria√ß√£o de usu√°rios ( <strong>SU01</strong> ) e acessam por eles ( <strong>PFCG</strong> ), al√©m de atualiza√ß√µes de senha.  √â l√≥gico que eles tamb√©m possam preencher o campo <em>SNC</em> . </p><br><p>  O problema surge quando a empresa precisa separar o gerenciamento de usu√°rios e apenas os principais usu√°rios.  Os administradores criam usu√°rios e os principais usu√°rios, se necess√°rio, alteram seus dados: par√¢metros do usu√°rio, idioma, localiza√ß√£o, etc. </p><br><p>  No SAP, n√£o h√° etapa de controle separada para alterar o campo SNC.  Todos os que t√™m direitos para alterar o usu√°rio (objeto <strong>S_USER_GRP, ACTVT 02</strong> ) tamb√©m podem alterar o campo SNC (enquanto a altera√ß√£o da senha requer o mesmo objeto, mas com o <strong>ACTVT 05</strong> ). </p><br><p><img src="https://habrastorage.org/webt/kn/vd/4x/knvd4x9cvj5xiww9cjwdgigoxvw.jpeg"></p><br><p>  Pode haver v√°rias solu√ß√µes: </p><br><ul><li>  tirar direitos de acesso ao SU01 dos principais usu√°rios e, em resposta, fornecer a todos SU2 e SU3, onde o usu√°rio pode alterar seus pr√≥prios par√¢metros </li><li>  retire os direitos de acesso ao SU01 e, em troca, forne√ßa uma transa√ß√£o z onde a guia SNC n√£o ser√° mostrada </li><li>  deixe SU01, mas proteja o campo SNC com controle especial </li></ul><br><p>  Como resultado, escolhemos a √∫ltima op√ß√£o criando um objeto de autoriza√ß√£o personalizado e vinculando o programa SU01.  No entanto, como se descobriu mais tarde, a SAP tem uma solu√ß√£o semelhante - voc√™ pode ativar a <em>manuten√ß√£o estendida</em> ( <strong>nota 1882254</strong> ) para campos individuais SU01. </p><br><h2 id="5-komandnaya-rabota">  5. Trabalho em equipe </h2><br><p>  Durante o projeto, encontrei todas as dificuldades do trabalho em equipe e descobri muitas verdades b√°sicas: </p><br><ul><li>  <em>Nunca h√° muito tempo</em> .  A margem de tempo √© a melhor que o PM pode oferecer. </li><li>  <em>Deve haver um plano b√°sico do projeto</em> , mas ele precisa ser revisado toda semana, deixando uma grande margem de flexibilidade.  Em algum lugar nos movemos mais r√°pido, em algum lugar pisoteado no local. </li><li>  <em>√Äs vezes, os tios adultos no departamento de TI n√£o diferem no comportamento das meninas na contabilidade</em> : eles se recusam a trabalhar um com o outro, simplesmente porque n√£o gostam da pessoa.  E mais uma vez √© necess√°rio resolver quest√µes de subordina√ß√£o. </li><li>  <em>Muitas vezes, os departamentos dificultam a aprova√ß√£o do projeto</em> , porque n√£o est√° claro quem √© respons√°vel pela implementa√ß√£o e cujo or√ßamento horas adicionais caem.  √â importante deixar os gerentes discutirem tudo diretamente. </li><li>  <em>Situa√ß√µes imprevistas surgem de vez em quando</em> .  O melhor que pode ser √© a comunica√ß√£o oportuna, uma carta, uma chamada, SMS para <strong>todas</strong> as pessoas envolvidas. </li><li>  <em>N√£o h√° nada melhor do que uma reuni√£o pessoal</em> .  As perguntas s√£o resolvidas muitas vezes mais rapidamente do que quando discutidas pelo correio.  Por outro lado, todos os arranjos pessoais devem ser seguidos imediatamente por uma carta subsequente (para corrigir e n√£o esquecer) </li><li>  <em>O gerente de projetos em um projeto de TI pode confiar apenas nas pessoas</em> .  Na verdade, voc√™ n√£o tem id√©ia de quanto tempo levar√° essa ou aquela a√ß√£o: por exemplo, criando um usu√°rio no AD para Kerberos, 10 minutos ou tr√™s dias?  E n√£o h√° como verificar se o teste realmente parou ou se algu√©m estava brincando.  Resta apenas confiar. </li></ul><br><p>  Al√©m disso, depende muito da perseveran√ßa do consultor.  Algu√©m sozinho, ou um consultor de desenvolvimento ou PM, deve ser t√£o insolente quanto uma bala e socar as paredes de uma burocracia.  Nesse caso, tive uma sorte parcial, nosso consultor convidado era irritante e √†s vezes insuport√°vel (era dif√≠cil faz√™-lo ouvir alguma coisa), mas ele conhecia a empresa: relatava problemas e parava imediatamente e n√£o se acalmava at√© que o problema fosse resolvido. </p><br><h2 id="6-informaciya-dlya-biznesa">  6. Informa√ß√µes para neg√≥cios </h2><br><p>  Em uma grande empresa, as mudan√ßas que afetam os usu√°rios finais devem ser oportunas e melhor anunciadas com anteced√™ncia. </p><br><p>  No nosso caso, era necess√°rio informar a todos os usu√°rios que agora eles n√£o precisam de uma senha para entrar no SAP.  Al√©m disso, era necess√°rio fornecer documenta√ß√£o t√©cnica para a 1¬™ linha de suporte com todos os erros poss√≠veis que possam surgir ap√≥s a implementa√ß√£o. </p><br><p>  Devo admitir que com a comunica√ß√£o tudo o que poderia ter dado errado. </p><br><p>  <em>Em primeiro lugar</em> , anunciamos aos usu√°rios sobre o SSO no site corporativo, e n√£o por carta.  Com que frequ√™ncia voc√™ l√™ um site corporativo?           SAP     . </p><br><p> <em>-</em> , ,    , , ,  ,    ,   (   -   ?)        ,   . </p><br><p> <em>-</em> ,      Go Live,     ,         (    2 ),         .      . </p><br><h2 id="7-trudnosti-perevoda-ili-posledniy-fuck-up"> 7.     fuck-up </h2><br><p>       5-   SSO   SAP,    ,    . </p><br><p>     :   . ,      ‚Äî    .           .     2-   ,  500   -.          . </p><br><p><img src="https://habrastorage.org/webt/dq/rg/lm/dqrglmeighaas0ta0bqcxkkay0a.jpeg"></p><br><p>       .       ‚Äúuse a default language SAP logon‚Äù  ‚Äî     ,      ,       ( <strong>SU01</strong> ,  <strong>Defaults</strong> ).       <em>¬´  SAP¬ª</em> . </p><br><p>       ,       -,       . </p><br><p><img src="https://habrastorage.org/webt/y2/k1/1z/y2k11zgxul7yy70mnjfc_q9jjok.jpeg"></p><br><p>         -        . </p><br><h2 id="8-itogi-i-vyvody"> 8.    </h2><br><p>    SSO ‚Äî  ,           . ,    1-2  ,    3- . </p><br><p>        .                .        ,     , , . </p><br><p>    SSO , ,   ,  , .      AD,   SNC.    ,    .     ,     (        ,      ) ‚Äî        . </p><br><pre><code class="plaintext hljs"> ,     ,   .</code> </pre> <br><p>  S√≥lidos: </p><br><ul><li>  O tempo principal em tr√™s meses foi gasto na coordena√ß√£o e coordena√ß√£o de a√ß√µes </li><li>  Os departamentos envolvidos neste projeto come√ßaram a entender melhor o trabalho um do outro. </li><li>  Durante o teste, voc√™ precisa se apresentar no lugar do usu√°rio final - o que voc√™ gostaria de ver na mensagem informativa e nas configura√ß√µes b√°sicas. </li><li>  SSO para SAP √© implementado.  Os usu√°rios est√£o felizes e j√° se esqueceram dos momentos em que era necess√°rio lembrar a senha da SAP.  Ligue para o suporte t√©cnico com menos frequ√™ncia, felicidades. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434404/">https://habr.com/ru/post/pt434404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434384/index.html">Sobre a responsabilidade dos artistas</a></li>
<li><a href="../pt434386/index.html">Douglas Engelbart: "Aumentando o intelecto humano: uma estrutura conceitual"</a></li>
<li><a href="../pt434394/index.html">Bugatti Automobiles testa com sucesso pin√ßa de freio impressa em 3D</a></li>
<li><a href="../pt434398/index.html">Vanivar Bush: "Como podemos pensar". Parte 2</a></li>
<li><a href="../pt434402/index.html">Solu√ß√£o Veeam para backup e recupera√ß√£o de m√°quinas virtuais na plataforma Nutanix AHV. Parte 1</a></li>
<li><a href="../pt434406/index.html">Notas de um fitoqu√≠mico. Habra Banana Sunset</a></li>
<li><a href="../pt434408/index.html">Projeto de Malta: armazenamento de energia com sal fundido atinge um novo n√≠vel</a></li>
<li><a href="../pt434410/index.html">Carregadores descart√°veis. O que √© isso para n√≥s?</a></li>
<li><a href="../pt434412/index.html">Remo√ß√£o de foguetes antes do lan√ßamento no Vostochny</a></li>
<li><a href="../pt434414/index.html">Iceberg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>