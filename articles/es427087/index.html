<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úîÔ∏è üë©üèº‚Äçüíº üë≤üèæ Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 12: Seguridad de la red, parte 2 üêÑ üöü üë®üèø‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnolog√≠a de Massachusetts. Conferencia Curso # 6.858. "Seguridad de los sistemas inform√°ticos". Nikolai Zeldovich, James Mickens. A√±o 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 12: Seguridad de la red, parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427087/"><h3>  Instituto de Tecnolog√≠a de Massachusetts.  Conferencia Curso # 6.858.  "Seguridad de los sistemas inform√°ticos".  Nikolai Zeldovich, James Mickens.  A√±o 2014 </h3><br>  Computer Systems Security es un curso sobre el desarrollo e implementaci√≥n de sistemas inform√°ticos seguros.  Las conferencias cubren modelos de amenazas, ataques que comprometen la seguridad y t√©cnicas de seguridad basadas en trabajos cient√≠ficos recientes.  Los temas incluyen seguridad del sistema operativo (SO), caracter√≠sticas, gesti√≥n del flujo de informaci√≥n, seguridad del idioma, protocolos de red, seguridad de hardware y seguridad de aplicaciones web. <br><br>  Lecci√≥n 1: "Introducci√≥n: modelos de amenaza" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 2: "Control de ataques de hackers" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 3: ‚ÄúDesbordamientos del b√∫fer: exploits y protecci√≥n‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 4: ‚ÄúSeparaci√≥n de privilegios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 5: ‚Äú¬øDe d√≥nde vienen los sistemas de seguridad?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br>  Lecci√≥n 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 7: ‚ÄúSandbox de cliente nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 8: "Modelo de seguridad de red" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 9: "Seguridad de aplicaciones web" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 10: ‚ÄúEjecuci√≥n simb√≥lica‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 11: "Ur / Lenguaje de programaci√≥n web" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 12: Seguridad de red <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Estudiante:</b> quiz√°s todav√≠a tenga un problema de conflicto de intereses porque podr√≠a usar 32 bits para las direcciones de pares y tiene muchos puertos para cada uno de ellos.  ¬øProbablemente tiene un conflicto de n√∫meros de secuencia de todas estas conexiones que obtiene? <br><br>  <b>Profesor:</b> resulta que estos n√∫meros de secuencia son espec√≠ficos de la direcci√≥n IP y el n√∫mero de puerto del par de origen / destino.  Entonces, si estos son puertos diferentes, entonces no interfieren entre s√≠ en absoluto.  Espec√≠ficamente, los puertos tienen n√∫meros de serie m√°s bajos. <br><br><img src="https://habrastorage.org/webt/ln/rp/sm/lnrpsmdw6g-ionqcpock0lqzf-s.jpeg"><br><br>  <b>Estudiante:</b> si los n√∫meros de serie son globales, ¬øpuede el atacante entrar en la conexi√≥n entre otros clientes? <br><br>  <b>Profesor:</b> s√≠, este es un buen punto.  De hecho, si el servidor aumenta el n√∫mero de serie, por ejemplo, en 64k para cada conexi√≥n, se conecta al servidor, y luego otras 5 personas se conectan a √©l, y aqu√≠ puede organizar un ataque.  Entonces, hasta cierto punto, tienes raz√≥n, es un poco problem√°tico.  Por otro lado, probablemente podr√≠a hacerlo para que un paquete de la √∫ltima l√≠nea de S-&gt; A se entregue inmediatamente antes de este paquete en la primera l√≠nea de C-&gt; S.  Si env√≠a sus paquetes uno tras otro, existe una buena posibilidad de que tambi√©n lleguen al servidor uno por uno. <br><br>  El servidor recibir√° S-&gt; A y responder√° con este n√∫mero de secuencia (SN).  Ser√° diferente a los (SN) en la segunda l√≠nea, pero con el n√∫mero de serie inmediatamente despu√©s.  Y entonces sabr√° exactamente qu√© n√∫mero de secuencia (SN) debe incluirse en el tercer paquete de su secuencia. <br>  Por lo tanto, creo que esta no es una forma muy confiable de conectarse al servidor, se basa en suposiciones.  Pero si organiza cuidadosamente sus paquetes de la manera correcta, puede adivinar f√°cilmente la secuencia.  O tal vez lo intentes varias veces y tendr√°s suerte. <br><br>  <b>Estudiante:</b> incluso si los n√∫meros se generan por casualidad, debe adivinar uno de los 4 mil millones de n√∫meros posibles.  Esto no es demasiado, ¬øverdad?  Creo que dentro de un a√±o probablemente podr√°s entrar en esta red. <br><br>  <b>Profesor:</b> s√≠, tienes toda la raz√≥n.  No debe confiar demasiado en TCP en t√©rminos de seguridad.  Porque tienes raz√≥n, son solo 4 mil millones de conjeturas.  Y probablemente pueda enviar muchos paquetes durante el d√≠a si tiene una conexi√≥n razonablemente r√°pida. <br><br>  As√≠ que aqu√≠ tenemos una especie de argumento interesante sobre la falta de fiabilidad de TCP, porque solo tenemos 32 bits.  No podemos asegurarlo de ninguna manera.  Pero creo que muchas aplicaciones que dependen de este protocolo lo suficiente no piensan en absoluto en seguridad, y esto realmente se convierte en un problema. <br><br>  Pero tienes toda la raz√≥n.  En la pr√°ctica, desea utilizar alg√∫n tipo de cifrado adem√°s de obtener garant√≠as m√°s serias de que nadie ha falsificado sus datos, ya que utiliza claves de cifrado de m√°s de 32 bits.  En la mayor√≠a de los casos, esto sigue siendo efectivo para evitar la manipulaci√≥n de la conexi√≥n TCP. <br><br>  Veamos ahora por qu√© es malo si las personas pueden falsificar conexiones TCP desde direcciones arbitrarias. <br><br>  Una de las razones por las cuales esto es malo es que puede afectar la autorizaci√≥n basada en la direcci√≥n IP cuando el servidor verifica de qu√© direcci√≥n proviene la solicitud.  Si un servidor decide si permite o rechaza la conexi√≥n en funci√≥n de la direcci√≥n IP, esto podr√≠a ser un problema para un atacante que falsific√≥ la conexi√≥n desde una direcci√≥n de origen arbitraria. <br><br>  Entonces, un ejemplo donde esto era un problema, hoy este problema se resuelve b√°sicamente, es el uso de una familia de comandos r, como rlogin.  Sol√≠a ‚Äã‚Äãser que podr√≠a ejecutar algo como rlogin para una computadora en, por ejemplo, athena.dialup.mit.edu.  Y si su conexi√≥n proviene del host MIT, entonces este comando rlogin tendr√° √©xito si dice: "s√≠, soy el usuario de Alice en esta computadora, d√©jenme iniciar sesi√≥n como usuario de Alice en otra computadora".  Y esta operaci√≥n ser√° permitida, ya que todas las computadoras en la red mit.edu son confiables para hacer tales declaraciones. <br><br>  Tengo que decir que el acceso telef√≥nico nunca tuvo este problema.  Este compuesto us√≥ Cerberus desde el principio.  Pero otros sistemas, por supuesto, ten√≠an tales problemas.  Y este es un ejemplo del uso de una direcci√≥n IP en un mecanismo de autenticaci√≥n de conexi√≥n cuando el sistema verifica si el cliente que llama al servidor es confiable.  Entonces, lo que sol√≠a ser un problema ya no es un problema.  Pero confiar en IP todav√≠a parece un mal plan. <br><br><img src="https://habrastorage.org/webt/xp/zi/_1/xpzi_1guskiwnqi-52aokxflicq.jpeg"><br><br>  Ahora rlogin ya no est√° en uso, recientemente ha sido reemplazado por el shell SSH seguro, que es un excelente protocolo de capa de red.  Por otro lado, hay muchos otros ejemplos de protocolos que dependen de la autorizaci√≥n basada en la direcci√≥n IP.  Uno de ellos es SMTP.  Cuando env√≠a un correo electr√≥nico, utiliza SMTP para hablar con alg√∫n servidor de correo para enviar mensajes.  Para evitar el spam, muchos servidores SMTP solo aceptan mensajes entrantes de una direcci√≥n IP de origen espec√≠fica.  Por ejemplo, el servidor de correo de Comcast solo acepta correo de direcciones IP de Comcast.  Lo mismo ocurre con los servidores de correo MIT: solo aceptar√°n correo de direcciones IP de MIT.  Pero ten√≠amos al menos un servidor que no funcionaba como deber√≠a, utilizando autenticaci√≥n IP. <br><br>  Todo aqu√≠ no es tan malo.  En el peor de los casos, enviar√° correo no deseado a trav√©s del servidor de correo.  Probablemente por eso todav√≠a usan rlogin, mientras que las cosas que le permiten iniciar sesi√≥n en una cuenta arbitraria han dejado de usar la autenticaci√≥n basada en IP. <br><br>  Entonces, ¬øpor qu√© ese mecanismo de autenticaci√≥n es un mal plan?  Como suposici√≥n, supongamos que alg√∫n servidor usa rlogin.  ¬øQu√© har√≠as para atacar?  ¬øQu√© mal podr√≠a pasar? <br><br>  <b>Estudiante:</b> un atacante puede simplemente ingresar a su computadora, falsificar a un usuario que va a ingresar a la red con su nombre de usuario y obtener acceso a la red. <br><br>  <b>Profesor:</b> s√≠, b√°sicamente un atacante se hace cargo de una computadora.  Sintetiza datos que parecen un conjunto v√°lido de comandos rlogin que dicen: "Inicie sesi√≥n como este usuario y ejecute este comando en mi shell de Unix". <br><br>  Sintetiza estos datos (SNc + 1), monta todo el ataque y env√≠a estos datos como si un usuario leg√≠timo interactuara con el cliente rlogin, y luego puede continuar. <br><br><img src="https://habrastorage.org/webt/8v/b-/ws/8vb-ws9vmaat0zscptpwoh8-cze.jpeg"><br><br>  Bueno, esa es una de las razones por las que no desea que se adivinen sus n√∫meros de secuencia TCP.  Otro problema es que estos ataques de reinicio reinician el ataque.  De la misma manera que podr√≠amos enviar un paquete SYN, si conocemos el n√∫mero de serie de alguien, podemos enviar un paquete de reinicio de la misma manera. <br><br>  Mencionamos brevemente a un cliente legal que env√≠a un paquete de restablecimiento de conexi√≥n falso que un atacante ha establecido.  Un atacante tambi√©n podr√≠a intentar enviar paquetes de descarte para una conexi√≥n existente si de alguna manera sabe que su n√∫mero de secuencia est√° en esa conexi√≥n.  De hecho, no est√° claro qu√© tan grande es este problema. <br><br>  En alg√∫n nivel, debe suponer que todas sus conexiones TCP pueden interrumpirse en cualquier caso y en cualquier momento, es decir, no parece que su red sea confiable.  Por lo tanto, tal vez deber√≠a esperar una desconexi√≥n. <br><br>  En el caso de que los enrutadores "hablen" entre s√≠, esta suposici√≥n es especialmente cr√≠tica.  Si tiene muchos enrutadores que se comunican entre s√≠ mediante algunos protocolos de enrutamiento, existen algunas conexiones f√≠sicas entre ellos.  Pero adem√°s de estas conexiones f√≠sicas, se comunican a trav√©s de un protocolo de red que funciona a trav√©s de TCP.  De hecho, en cada una de estas conexiones f√≠sicas que utilizan los enrutadores para intercambiar informaci√≥n de enrutamiento, se inicia una sesi√≥n TCP.  Aqu√≠ se usa el protocolo BGP, del que hablaremos m√°s adelante. <br><br>  Este protocolo BGP utiliza el hecho de que si la conexi√≥n TCP est√° activa, la conexi√≥n f√≠sica tambi√©n est√° activa.  Entonces, si una conexi√≥n TCP se rompe, el enrutador cree que la conexi√≥n est√° rota y comienza a contar todas sus tablas de enrutamiento. <br><br><img src="https://habrastorage.org/webt/v6/wj/cc/v6wjccjolqvci5pvynpn_uui-pm.jpeg"><br><br>  Por lo tanto, si el adversario desea organizar alg√∫n tipo de ataque de denegaci√≥n de servicio DoS, puede intentar adivinar los n√∫meros de serie de estos enrutadores y abandonar estas sesiones.  Si la sesi√≥n TCP entre los dos enrutadores est√° desactivada, ambos enrutadores consideran que esta conexi√≥n est√° inactiva y deben volver a contar todas las tablas de enrutamiento, lo que har√° que las rutas cambien.  Despu√©s de eso, el atacante puede restablecer otra conexi√≥n, y as√≠ sucesivamente. <br><br>  Por lo tanto, este es un ataque algo alarmante, y no porque viole el secreto de otra persona, etc., al menos no directamente, sino porque realmente causa muchos problemas de acceso para otros usuarios del sistema. <br><br>  <b>Estudiante:</b> si usted es un atacante y desea organizar un ataque dirigido contra un usuario espec√≠fico, ¬øpodr√≠a seguir enviando solicitudes para conectarse al servidor en nombre de su direcci√≥n IP y obligarlo a restablecer la conexi√≥n al servidor? <br><br>  <b>Profesor:</b> suponga que uso Gmail y desea evitar que reciba cualquier informaci√≥n de Gmail, as√≠ que simplemente env√≠e paquetes a mi m√°quina, fingiendo que provienen de un servidor de Gmail.  En este caso, debe adivinar los n√∫meros de puerto de origen y destino correctos. <br><br>  El n√∫mero de puerto de destino es probablemente 443 porque uso HTTPS.  Pero el n√∫mero de puerto de origen ser√° algo aleatorio de 16 bits.  Adem√°s, los n√∫meros de serie variar√°n.  Por lo tanto, si no adivina el n√∫mero de secuencia que est√° en mi ventana TCP y que es de decenas de kilobytes, no tendr√° √©xito. <br><br>  Entonces tienes que adivinar una buena cantidad de cosas.  No hay acceso a Oracle aqu√≠.  No puedes pedirle al servidor el n√∫mero de serie de este tipo.  Esta es la raz√≥n por la cual esto tampoco funcionar√°. <br><br>  Por lo tanto, muchos de estos problemas se han solucionado, incluida esta cosa basada en RST, especialmente para los enrutadores BGP.  En realidad hubo dos soluciones divertidas.  Una cosa realmente muestra c√≥mo puede explotar cosas existentes o usarlas para solucionar problemas espec√≠ficos.  Utiliza la propiedad de que estos enrutadores se comunican solo entre s√≠ y no con nadie m√°s en la red.  Como resultado, si el paquete no llega desde un enrutador ubicado en el otro extremo de la conexi√≥n, este paquete se descarta. <br><br>  La implementaci√≥n exitosa de los desarrolladores de estos protocolos es un √°rea maravillosa en el paquete llamado "curso de la vida", o TTL.  Este es un campo de 8 bits que cada enrutador reduce para garantizar que los paquetes no terminen en un bucle infinito.  El valor m√°ximo de TTL es 255 y disminuye a√∫n m√°s. <br><br>  Entonces, ¬øqu√© estoy haciendo estos protocolos inteligentes?  Desechan cualquier paquete con un valor TTL que no sea igual a 255. Porque si el paquete tiene un valor de 255, entonces solo puede provenir de un enrutador en el otro lado de esta conexi√≥n.  Y si el adversario intenta inyectar cualquier otro paquete en la conexi√≥n BGP existente, tendr√° un valor TTL menor que 255, porque este valor ser√° reducido por otros enrutadores ubicados a lo largo de la ruta de enrutamiento, incluido este enrutador.  Por lo tanto, este paquete simplemente ser√° rechazado por el destinatario. <br><br>  As√≠ que este es un ejemplo de una combinaci√≥n inteligente de t√©cnicas retrocompatibles que resuelven este problema tan espec√≠fico. <br><br><img src="https://habrastorage.org/webt/k4/ix/mo/k4ixmopv2goqdgdhy48-lh1wol4.jpeg"><br><br>  <b>Estudiante:</b> ¬øEl enrutador inferior derecho no env√≠a algo con un TTL de 255? <br><br>  <b>Profesor:</b> Este es un enrutador f√≠sico.  Y √©l sabe que se trata de conexiones separadas, por lo que analiza tanto el TTL como el origen del paquete.  Entonces, si el paquete vino del enrutador superior izquierdo, no lo aceptar√° para una conexi√≥n TCP entre √©l y el enrutador superior derecho. <br><br>  En su mayor parte, estos enrutadores conf√≠an en sus vecinos inmediatos, y este proceso puede controlarse utilizando el mecanismo de enrutamiento de ruta m√∫ltiple autom√°tico. <br><br>  Otras soluciones para BGP son implementar alguna forma de encabezado de autenticaci√≥n, incluido un encabezado de autenticaci√≥n MD5.  Pero en realidad, los desarrolladores se centraron en esta aplicaci√≥n en particular, para la cual un ataque de reinicio es especialmente cr√≠tico. <br><br>  Este problema persiste hoy.  Si hay alguna conexi√≥n a largo plazo y quiero interrumpirla, solo tengo que enviar una gran cantidad de paquetes RST, aproximadamente cientos de miles, pero probablemente no 4 mil millones.  Porque los servidores en realidad son algo vulnerables a qu√© n√∫mero de secuencia aceptan para restablecer. <br><br>  Puede ser cualquier paquete en una ventana espec√≠fica.  En este caso, el atacante podr√≠a romper esta conexi√≥n sin mucho esfuerzo.  Este sigue siendo un problema para el que no hay una soluci√≥n realmente buena. <br><br>  Y lo √∫ltimo que puede suceder debido a la previsibilidad de los n√∫meros de secuencia es inyectar datos en las conexiones existentes.  Supongamos que tenemos un protocolo hipot√©tico similar a rlogin, que en realidad no realiza una autenticaci√≥n basada en IP, por lo que debe ingresar su contrase√±a para iniciar sesi√≥n. <br><br>  El problema es que tan pronto como ingrese su contrase√±a, tal vez su conexi√≥n TCP simplemente se establezca y pueda aceptar datos arbitrarios.  Entonces, el atacante solo necesita esperar hasta que uno de ustedes inicie sesi√≥n en la computadora ingresando su contrase√±a. <br><br>  El atacante no sabe cu√°l es la contrase√±a, pero tan pronto como establezca una conexi√≥n TCP, inmediatamente tratar√° de adivinar su n√∫mero de serie e ingresar√° algunos datos en su conexi√≥n existente.  Entonces, si puedo adivinar correctamente su n√∫mero de serie, esto me permitir√° fingir que no soy yo, pero ingres√≥ alg√∫n comando despu√©s de autenticarse correctamente con una contrase√±a. <br><br><img src="https://habrastorage.org/webt/ao/0n/xw/ao0nxw7zfmyfhjhmb56s6ht7l7s.jpeg"><br><br>  Todo esto indica por qu√© realmente no desea confiar en estos n√∫meros de secuencia de 32 bits en el sentido de seguridad.  Pero veamos qu√© hacen realmente las pilas TCP modernas para mitigar este problema.  Un enfoque del problema que cubriremos en las pr√≥ximas 2 conferencias es implementar cierto grado de seguridad a nivel de aplicaci√≥n.  En este nivel, utilizaremos la criptograf√≠a para autenticar, cifrar, firmar y verificar mensajes sin mucha participaci√≥n de TCP. <br><br>  Algunas de las aplicaciones existentes tambi√©n ayudan a resolver problemas de seguridad, o al menos dificultan que un atacante explote estos problemas.  La gente pone esto en pr√°ctica hoy, por ejemplo, en Linux y Windows, manteniendo diferentes n√∫meros de secuencia inicial para cada par de origen / destino. <br><br>  Por lo tanto, la mayor√≠a de las implementaciones de TCP SYN todav√≠a calculan este n√∫mero de secuencia ISN inicial de la misma manera que lo hicimos antes.  As√≠ que este es un viejo estilo ISN, digamos que s√≠.  Y para generar realmente un n√∫mero de serie para cualquier conexi√≥n en particular, agregamos a este ISN de estilo antiguo un desplazamiento aleatorio de 32 bits.  Es decir, le agregamos una funci√≥n, algo como una funci√≥n hash o SHA-1, o algo mejor. <br><br><img src="https://habrastorage.org/webt/lm/wp/fm/lmwpfmcij_lsb9m2hggzeic9duy.jpeg"><br><br>  Esta funci√≥n incluye la direcci√≥n IP de origen, el n√∫mero de puerto de origen, la direcci√≥n IP de destino, el n√∫mero de puerto de destino y alguna clave secreta que solo el servidor conoce.  Por lo tanto, creamos una buena oportunidad para que cualquier conexi√≥n en particular determine la direcci√≥n IP y el puerto para el par fuente / destino, al tiempo que conservamos todas las buenas propiedades de este antiguo algoritmo de asignaci√≥n de n√∫meros de secuencia de estilo. <br><br>  Pero si tiene conexiones de diferentes conjuntos de origen / destino, entonces no hay nada que le permita averiguar el valor exacto del n√∫mero de serie de otro conjunto de conexiones.  De hecho, debe adivinar esta clave para calcular este valor. <br><br>  Espero que el n√∫cleo del sistema operativo del servidor almacene esta clave en alg√∫n lugar de su memoria y no se la d√© a nadie.  As√≠ es como la mayor√≠a de las pilas TCP de hoy resuelven este problema particular en el campo de los n√∫meros de secuencia comunes de 32 bits.  Esto no es demasiado bueno, pero funciona. <br><br>  <b>Estudiante: ¬ø</b> podr√≠as repetir esto de nuevo?  Sobre la singularidad de la clave ... <br><br>  <b>Profesor:</b> cuando mi m√°quina arranca, o cuando cualquier m√°quina arranca, genera una clave aleatoria.  Cada vez que lo recarga, genera una nueva clave.  Esto significa que cada vez que los n√∫meros de serie de un par de origen / destino en particular cambian con la misma frecuencia de desplazamiento.  Por lo tanto, para un par de origen / destino dado, los par√°metros de la funci√≥n son fijos.  Entonces sigue la secuencia cuando los n√∫meros evolucionan de acuerdo con sus n√∫meros de secuencia iniciales para nuevos compuestos, cambiando de acuerdo con un algoritmo espec√≠fico.  Por lo tanto, se proporciona protecci√≥n contra la inyecci√≥n de paquetes antiguos de conexiones anteriores en conexiones nuevas, as√≠ como protecci√≥n contra la reasignaci√≥n de paquetes. <br><br>  Lo √∫nico para lo que necesitamos este n√∫mero de serie de la muestra anterior es la elecci√≥n del algoritmo para evitar problemas con estos paquetes duplicados.  Anteriormente, consideramos que si obtiene un n√∫mero de serie para una conexi√≥n A: A -&gt; S: SYN (...), luego puede llegar a una conclusi√≥n sobre el n√∫mero de serie para la conexi√≥n ACK (SN). <br><br><img src="https://habrastorage.org/webt/a0/w1/-x/a0w1-xenwugh56twqvkfkgzkai0.jpeg"><br><br>    ,         32-   ,     F.  ,         ,      . <br><br> <b>:</b>       ? <br><br> <b>:</b>     ,      .      F,    ,    F  ,   ,   ,       . <br><br> <b>:</b>      ,        ‚Ä¶ <br><br> <b>:</b>  ,     F  -    -,     .            -,   ,         .  , ,  ,   ,        .       ,     F     . <br><br> ,           TCP,      .          ,    ,   -  . <br><br>   ,        .   ,   TCP    ,       DNS,        .    ,  DNS   UDP ‚Äì   . UDP ‚Äî     ,      ,     .  UDP         .  ,    ,       ,        .     ,              ,       .         DNS-.       DNS? <br><br><img src="https://habrastorage.org/webt/zg/um/eo/zgumeoz-kafodeqfjnjyhkjotjs.jpeg"><br><br> ,   DNS-  C: C53 -&gt; S53     mit.edu,        53. <br><br>      S: S53 -&gt; C53       IP-,      ‚Äì  . <br><br>    ,         ,  ,     ,      .   ,      mit.edu,         . <br><br>   ,  DNS-   .     IP-,       ,    .        IP-  mit.edu  IP-.        ,     ,   ,      ,       .      ,                . <br><br><img src="https://habrastorage.org/webt/n0/f3/6e/n0f36e0r8uoipzszlz4mdtywwcm.jpeg"><br><br>   ,      ,   .           IP-. ,   ,   DNS-  .  ,       ,          IP- mit.edu. <br><br> <b>:</b>            ,    ,    ? <br><br> <b>:</b>   ,   . ,    ,    .       DNS-,    ,       .    2  .  ‚Äî    ,   16  .           ,    16 .      ID,    16 ,      . <br><br>  ,     ,        32  . ,  ,    ,          ,        . <br><br><img src="https://habrastorage.org/webt/py/ca/my/pycamyquozaz7jj41b01zovow7q.jpeg"><br><br>  ,    ,         . <br><br>  ,         DNS    DNS   .  ,          ,  DNS     . ,  DNS SEC,       .  ,         ,  ,   DNS-     .    ,  ,        . <br><br>           origin.  DNS    ,       IP-,  : ‚Äû,     ‚Äú.  ,     ,   ,     ,     ,     ,    .      ,        ,        ? <br><br>  ,    ‚Äì    DNS- ,     . , ,   .    -,    DNS-,    .   ,    DNS SEC,   ,         ,    DNS-   .  DNS-     , ,     ,      ‚Äì     ,      . <br><br>  DNS SEC       ,   NSEC.   ,     . , NSEC  ,     foo.mit.edu,         goo.mit.edu,          ,    . <br><br><img src="https://habrastorage.org/webt/vy/w6/a1/vyw6a1qrruintd6iwnsg8exluzs.jpeg"><br><br> ,    ,      ,    ,        ,       ,         ‚Äû,     ‚Äú. <br><br>         .       ,    foo.mit.edu -&gt; goo.mit.edu ‚Äî &gt;‚Ä¶.  : ¬ª ,    ,       gooa.mit.edu".    , ,         . <br><br>          ,       DNS          .        NSEC3,       ‚Äì -  , -  . <br><br> 52:00  <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Curso MIT "Seguridad de sistemas inform√°ticos".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> 12: ¬´ ¬ª,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . <br><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  <b>Ap√≥yenos</b> haciendo un pedido o recomend√°ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an√°logo √∫nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps hasta diciembre de forma gratuita</b> al pagar por un per√≠odo de seis meses, puede ordenar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  <b>Dell R730xd 2 veces m√°s barato?</b>  ¬°Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Pa√≠ses Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427087/">https://habr.com/ru/post/es427087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427069/index.html">Repositorio local de NPM en 5 minutos con sus paquetes y cach√©</a></li>
<li><a href="../es427075/index.html">La historia de un desarrollo.</a></li>
<li><a href="../es427077/index.html">Desenfoque de Laplace: ¬øes posible borrar Laplace en lugar de Gauss, cu√°ntas veces es m√°s r√°pido y vale la pena perder 1/32 de precisi√≥n?</a></li>
<li><a href="../es427079/index.html">NetApp Insight 2018</a></li>
<li><a href="../es427081/index.html">Criterios de la mente humana, desde el punto de vista de un programador.</a></li>
<li><a href="../es427091/index.html">Verificaci√≥n num√©rica de la hip√≥tesis abc (s√≠, esa)</a></li>
<li><a href="../es427093/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 12: Seguridad de red, Parte 3</a></li>
<li><a href="../es427095/index.html">Antimonio - CAD de un mundo paralelo</a></li>
<li><a href="../es427097/index.html">La aplicaci√≥n m√≥vil ayuda a detectar la depresi√≥n y otros problemas psicol√≥gicos en las primeras etapas.</a></li>
<li><a href="../es427101/index.html">Google planea cobrar a los fabricantes de dispositivos m√≥viles hasta $ 40 por cada dispositivo vendido</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>