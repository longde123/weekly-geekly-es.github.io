<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò© üé• üé© AudioKit y s√≠ntesis de audio en iOS / OSX üëäüèø ü§∑üèΩ üë®üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AudioKit es un marco de audio desarrollado por ingenieros de audio, programadores y m√∫sicos espec√≠ficamente para iOS y OSX. Proporciona herramientas p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AudioKit y s√≠ntesis de audio en iOS / OSX</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/440226/"><img src="https://habrastorage.org/webt/y1/mf/ce/y1mfceq59vbcmxgabehfybmd5rc.jpeg"><br><br>  AudioKit es un marco de audio desarrollado por ingenieros de audio, programadores y m√∫sicos espec√≠ficamente para iOS y OSX.  Proporciona herramientas para <b>procesar</b> y <b>sintetizar</b> sonido.  Debajo del cap√≥ hay una mezcla de Swift, Objective-C, C ++ y C, y la API de Audio Unit de Apple.  ¬°Las tecnolog√≠as impresionantes (y bastante sofisticadas) est√°n envueltas en una API Swift muy amigable, a la que se puede acceder directamente desde Xcode Playgrounds! <br><br>  En este tutorial, realizaremos un viaje a trav√©s de AudioKit, as√≠ como la <b>historia de</b> la s√≠ntesis <b>de</b> sonido.  Aprender√° los conceptos b√°sicos de la f√≠sica del sonido y c√≥mo funcionaron los primeros sintetizadores como el Hammond Organ.  Adem√°s, se considerar√°n t√©cnicas modernas, por ejemplo, muestreo. <br><br>  ¬°Haz tu bebida favorita, si√©ntate y vete! <br><a name="habracut"></a><br><h1>  Primer paso </h1><br>  Comenzando con AudioKit 3.6, configurar parques infantiles para trabajar con el marco se ha vuelto bastante simple.  Descargue y descomprima la lista de reproducci√≥n de inicio <a href="">aqu√≠</a> . <br><br>  El viaje comienza con unos pocos pasos para configurar los parques infantiles para trabajar con AudioKit. <br><br>  Abra el archivo <b>AudioKitPlaygrounds.xcodeproj</b> en Xcode.  Haga clic en el bot√≥n <b>+</b> en la esquina inferior izquierda de la pantalla, seleccione <b>Archivo ...</b> y luego En <b>blanco</b> en la secci√≥n <b>Zona de juegos</b> , guarde el nuevo archivo en la carpeta Zona de juegos junto con √°reas de juegos de demostraci√≥n. <br><br>  El √°rea de juegos recientemente agregada comenzar√° y se ver√° m√°s o menos as√≠: <br><img src="https://habrastorage.org/webt/tz/db/cn/tzdbcnrjbmbep10dyndfyg3xu2s.png"><br><br>  Reemplace el c√≥digo generado con lo siguiente: <br><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit let oscillator = AKOscillator()  AudioKit.output = oscillator try AudioKit.start() oscillator.start() sleep(10)</code> </pre> <br>  El √°rea de juegos no comenzar√° hasta que al menos una vez que haya ensamblado el proyecto, para esto puede usar el elemento de men√∫ <b>Producto / Construcci√≥n</b> o la combinaci√≥n de teclas <b>‚åò-B</b> .  Despu√©s de eso, vuelva a correr el patio de recreo y escuche un zumbido durante 10 segundos.  (Nota del traductor: a veces el error no desaparece, y debe cambiar a otro patio de juegos y volver para que funcione).  Puede usar el bot√≥n Reproducir / Detener en la parte inferior izquierda de la ventana de reproducci√≥n para detener la reproducci√≥n o reiniciarla. <br><blockquote>  <b>Nota:</b> Si a√∫n ve errores, intente reiniciar Xcode.  Desafortunadamente, los frameworks y parques infantiles no son muy buenos amigos entre s√≠ y pueden comportarse de manera impredecible. </blockquote><h1>  Osciladores y f√≠sica del sonido. </h1><br>  La humanidad ha estado tocando m√∫sica a trav√©s de varios objetos f√≠sicos durante miles de a√±os.  Muchos de nuestros instrumentos habituales, como guitarras o bater√≠as, tienen cientos de a√±os.  La primera experiencia registrada de usar circuitos electr√≥nicos para generar sonido fue llevada a cabo en 1874 por Elias Gray.  Elisha trabaj√≥ en el campo de las telecomunicaciones, e invent√≥ el oscilador, el sintetizador musical m√°s simple.  Con √©l comenzaremos nuestra inmersi√≥n. <br><br>  Haga clic derecho en su √°rea de juegos, seleccione <b>Nueva p√°gina de juegos</b> y reemplace el c√≥digo generado con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport <span class="hljs-comment"><span class="hljs-comment">// 1. Create an oscillator let oscillator = AKOscillator() // 2. Start the AudioKit 'engine' AudioKit.output = oscillator try AudioKit.start() // 3. Start the oscillator oscillator.start() PlaygroundPage.current.needsIndefiniteExecution = true</span></span></code> </pre> <br>  El patio de juegos comenzar√° a generar un zumbido continuo, seg√∫n lo previsto.  Puede hacer clic en detener para detenerlo. <br><br>  Esto es casi lo mismo que hicimos en el patio anterior, pero esta vez vamos a profundizar en los detalles. <br><br>  Considere todos los pasos en orden: <br><br><ol><li>  Aqu√≠ creamos un oscilador.  El oscilador es el sucesor de <code>AKNode</code> .  Los nodos son los elementos que forman una cadena de audio que genera y modifica el sonido. <br></li><li>  Aqu√≠ conectamos la salida de nuestro √∫ltimo nodo con el motor AudioKit.  En nuestro caso, solo un nodo.  Adem√°s, el marco dirigir√° la salida del nodo al dispositivo de reproducci√≥n de audio. <br></li><li>  Bueno, comenzamos el oscilador, en la salida comienza a enviar una onda de sonido. <br></li></ol><br>  El oscilador genera una se√±al repetitiva que no se detiene.  En este libro de jugadas, <code>AKOscillator</code> genera una onda sinusoidal.  Usando AudioKit, se env√≠a una se√±al digital de onda sinusoidal a los altavoces o auriculares.  Como resultado, escuchamos un sonido que oscila a la misma frecuencia que la onda sinusoidal que generamos.  Esta onda sinusoidal no suena muy musical. <br><br><img src="https://habrastorage.org/webt/rx/yw/xw/rxywxwhvbneupuvsb3tx4egropi.png"><br><br>  Dos par√°metros son responsables del sonido de este oscilador: la amplitud, la altura de la onda sinusoidal, determina el volumen y la frecuencia del sonido, la altura del sonido depende de ello. <br><br>  En el patio de recreo, agregue las siguientes l√≠neas de c√≥digo justo despu√©s de crear el oscilador: <br><br><pre> <code class="swift hljs">oscillator.frequency = <span class="hljs-number"><span class="hljs-number">300</span></span> oscillator.amplitude = <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre><br>  El sonido ha cambiado, ahora suena el doble de silencioso y mucho m√°s bajo.  La frecuencia de la se√±al se mide en hercios (n√∫mero de repeticiones por segundo) y determina el tono de la nota.  La amplitud (amplitud) se establece de 0 a 1 y es responsable del volumen. <br><br>  La invenci√≥n de Elijah Gray fue registrada en la primera patente de un instrumento musical electr√≥nico. <br><br><img src="https://habrastorage.org/webt/33/xp/gy/33xpgyaps40rjq2tyojz5wdzfxi.png"><br><br>  Muchos a√±os despu√©s, Leo Theremin invent√≥ un instrumento musical un poco extra√±o utilizado hasta el d√≠a de hoy: theremin.  En el theremin, puede cambiar la frecuencia del sonido con movimientos de las manos sobre el instrumento.  Para entender c√≥mo suena el theremin, puedes escuchar las vibraciones de los Beach Boys, y no hay nada con lo que confundir el theremin. <br><br>  Puede simular el sonido de thereminvox, para esto, agregue el siguiente c√≥digo a la configuraci√≥n del oscilador: <br><br><pre> <code class="swift hljs">oscillator.rampDuration = <span class="hljs-number"><span class="hljs-number">0.2</span></span></code> </pre> <br>  Y reemplace la l√≠nea que inicia AudioKit ( <code>try AudioKit.start()</code> ) con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { oscillator.frequency = oscillator.frequency == <span class="hljs-number"><span class="hljs-number">500</span></span> ? <span class="hljs-number"><span class="hljs-number">100</span></span> : <span class="hljs-number"><span class="hljs-number">500</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start()</code> </pre> <br>  La propiedad <code>rampDuration</code> permite que el oscilador cambie suavemente los valores de sus par√°metros (por ejemplo, frecuencia o amplitud).  <code>AKPeriodicFunction</code> es una utilidad √∫til de AudioKit para la ejecuci√≥n peri√≥dica de c√≥digo.  En nuestro ejemplo, cambia la frecuencia de la onda sinusoidal de 500Hz a 100Hz cada 0.5 segundos. <br><br>  Felicidades  Acabas de hacer tu primer theremin.  Un oscilador simple puede generar notas musicales, pero no suena muy bien.  Hay muchos factores que afectan el sonido de los instrumentos f√≠sicos, como el piano, por ejemplo.  Y adem√°s consideraremos algunos de ellos. <br><br><h1>  Sobres de sonido </h1><br>  Cuando un instrumento musical toca una nota, el volumen de su sonido cambia con el tiempo y la naturaleza de los cambios difiere de un instrumento a otro.  Un modelo que puede simular este efecto se llama el sobre Ataque-Decaimiento-Liberaci√≥n-sostenido (ADSR) (Nota: los sintetizadores disponibles para la compra nunca se localizan, por lo que el nombre de la curva es el mismo que se puede ver en el panel de este sintetizador). <br><br><img src="https://habrastorage.org/webt/hj/nu/1i/hjnu1iomuddzc5t-p0egelaougy.png"><br><br>  El sobre ADSR consta de: <br><br><ul><li>  <b>Ataque</b> : ataque o tiempo en el que el sonido alcanza su volumen m√°ximo. <br></li><li>  <b>Decaimiento</b> : salvaje o tiempo durante el cual el volumen cae del m√°ximo al principal <br></li><li>  <b>Sostener</b> : el volumen principal, a diferencia de los dos par√°metros anteriores, no es el tiempo, despu√©s de que pasan el ataque y los salvajes y antes de soltar la tecla del sintetizador, se generar√° sonido con este volumen <br></li><li>  <b>Liberaci√≥n</b> : liberaci√≥n o tiempo en el que el volumen se convierte en cero <br></li></ul><br>  En el piano, el sonido se extrae con martillos que tocan las cuerdas y, por lo tanto, son r√°pidos o, tambi√©n dicen, ataques cortos y salvajes.  El viol√≠n puede tener un ataque largo, salvaje y sostenido, el m√∫sico puede influir en estos par√°metros por la forma en que usa el arco. <br><br>  Uno de los primeros instrumentos musicales electr√≥nicos fue Hammond Novachord.  Este instrumento fue fabricado en 1939, constaba de 163 tubos de vac√≠o y m√°s de 1000 condensadores, y pesaba 230 kilogramos.  Desafortunadamente, solo se hicieron unos cientos de copias, y nunca recibi√≥ el √©xito comercial. <br><br><img src="https://habrastorage.org/webt/xm/ag/oa/xmagoabyxwbjfzl97fil0x-xo1u.jpeg"><br><br>  Haga clic derecho en <b>Journey</b> <b>Playground</b> , seleccione <b>New Playground Page</b> y cree una nueva p√°gina llamada <b>ADSR</b> .  Reemplace el c√≥digo generado con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport          let oscillator = AKOscillator()</code> </pre><br>  Simplemente crea un oscilador con el que ya estamos familiarizados.  A continuaci√≥n, agregue el siguiente c√≥digo al final del patio de recreo: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> envelope = <span class="hljs-type"><span class="hljs-type">AKAmplitudeEnvelope</span></span>(oscillator) envelope.attackDuration = <span class="hljs-number"><span class="hljs-number">0.01</span></span> envelope.decayDuration = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.sustainLevel = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.releaseDuration = <span class="hljs-number"><span class="hljs-number">0.3</span></span></code> </pre> <br>  Esto crea un <code>AKAmplitudeEnvelope</code> que define el sobre ADSR.  Los par√°metros de duraci√≥n (attackDuration, decayDuration, releaseDuration) se especifican en segundos, y el volumen (sustainLevel) se establece en el rango de 0 a 1. <br><br>  <code>AKAmplitudeEnvelope</code> es el sucesor de <code>AKNode</code> de la misma manera que <code>AKOscillator</code> . En el c√≥digo anterior, pasamos los nodos de envolvente del oscilador al inicializador, conectando as√≠ los nodos. <br><br>  A continuaci√≥n, agregue el siguiente c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = envelope <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (envelope.isStarted) { envelope.stop() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { envelope.start() } } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start() oscillator.start() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Lanzar√° AudioKit, pero esta vez alimentamos la salida del nodo ADSR a su entrada.  Para escuchar el efecto ADSR, constantemente <code>AKPeriodicFunction</code> y desactivamos el nodo utilizando la funci√≥n <code>AKPeriodicFunction</code> . <br><br><img src="https://habrastorage.org/webt/q6/nl/s1/q6nls1yfzrh8wxwzwxhzc0wny1s.png"><br><br>  Ahora puedes escuchar c√≥mo se toca la nota en ciclos, pero esta vez es un poco m√°s como un piano. <br><br>  El ciclo se ejecuta dos veces por segundo en cada iteraci√≥n, iniciando o deteniendo el ADSR.  Cuando el ADSR comienza con un ataque r√°pido, el volumen alcanza su valor m√°ximo en 0.01 segundos, despu√©s de lo cual el volumen disminuye en 0.1 segundos al nivel principal y permanece all√≠ durante 0.5 segundos, y finalmente decae en 0.3 segundos. <br><br>  Puede tocar con los par√°metros usted mismo e intentar tocar, por ejemplo, el sonido de un viol√≠n. <br><br>  Los sonidos que encontramos se basan en la onda sinusoidal que genera <code>AKOscillator</code> .  Aunque ASDR ayuda a suavizar los sonidos fuertes, a√∫n no puede llamar a estos sonidos musicales. <br><br>  Adem√°s, consideraremos c√≥mo obtener un sonido m√°s profundo. <br><br><h1>  S√≠ntesis aditiva </h1><br>  Cada instrumento musical tiene su propio sonido o timbre especial.  <b>Un timbre</b> es lo que distingue los sonidos de un piano de los sonidos de un viol√≠n, a pesar de que pueden tocar la misma nota.  Un par√°metro importante del timbre es el espectro de sonido.  El espectro de sonido describe el rango de frecuencias reproducidas que, cuando se suman, dan una nota.  Nuestro patio de recreo actual usa un oscilador que suena solo a una frecuencia y suena bastante artificial. <br><br>  Puede obtener un sonido m√°s vivo utilizando un conjunto de osciladores para tocar una sola nota.  Este enfoque se conoce como s√≠ntesis aditiva, y este es el tema de nuestro pr√≥ximo patio de recreo. <br><br>  Haga clic derecho en el √°rea de juegos, seleccione <b>Nueva p√°gina de juegos</b> y cree una nueva p√°gina llamada <b>S√≠ntesis aditiva</b> .  Reemplace el c√≥digo generado con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitUI <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport func createAndStartOscillator(frequency: Double) -&gt; AKOscillator { let oscillator = AKOscillator() oscillator.frequency = frequency return oscillator }</code> </pre> <br>  Para la s√≠ntesis aditiva, necesita varios osciladores, para esto usaremos. <code>createAndStartOscillator</code> <br><br>  A continuaci√≥n, agregue el c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> frequencies = (<span class="hljs-number"><span class="hljs-number">1</span></span>...<span class="hljs-number"><span class="hljs-number">5</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { $<span class="hljs-number"><span class="hljs-number">0</span></span> * <span class="hljs-number"><span class="hljs-number">261.63</span></span> }</code> </pre> <br>  Aqu√≠ tomamos un intervalo de n√∫meros del 1 al 5 y multiplicamos cada uno por 261.53, la frecuencia de la nota.  Las m√∫ltiples frecuencias resultantes se denominan arm√≥nicos. <br><br>  Ahora agregue el c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> oscillators = frequencies.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { createAndStartOscillator(frequency: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre> <br>  Aqu√≠ creamos un oscilador para cada una de las frecuencias que usamos. <br><br>  Para combinar osciladores, agregue el siguiente c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mixer = <span class="hljs-type"><span class="hljs-type">AKMixer</span></span>() oscillators.forEach { $<span class="hljs-number"><span class="hljs-number">0</span></span>.connect(to: mixer) }</code> </pre> <br>  <code>AKMixer</code> es otro tipo de nodo AudioKit.  Recibe informaci√≥n de uno o m√°s nodos y los combina en uno. <br><br>  Agregue el siguiente c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> envelope = <span class="hljs-type"><span class="hljs-type">AKAmplitudeEnvelope</span></span>(mixer) envelope.attackDuration = <span class="hljs-number"><span class="hljs-number">0.01</span></span> envelope.decayDuration = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.sustainLevel = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.releaseDuration = <span class="hljs-number"><span class="hljs-number">0.3</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = envelope <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (envelope.isStarted) { envelope.stop() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { envelope.start() } } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start() oscillators.forEach { $<span class="hljs-number"><span class="hljs-number">0</span></span>.start() }</code> </pre> <br>  Todo debe quedar claro con este c√≥digo: agregue ADSR a la salida del mezclador, salida a trav√©s de AudioKit y act√≠velo / desact√≠velo peri√≥dicamente. <br><br>  Para lidiar bien con la s√≠ntesis aditiva, ser√° √∫til jugar con varias combinaciones de estas frecuencias.  Y en esto, la oportunidad de parques infantiles como Live View es ideal para nosotros. <br><br>  Para hacer esto, agregue el c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { addTitle(<span class="hljs-string"><span class="hljs-string">"Harmonics"</span></span>) oscillators.forEach { oscillator <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> harmonicSlider = <span class="hljs-type"><span class="hljs-type">AKSlider</span></span>( property: <span class="hljs-string"><span class="hljs-string">"\(oscillator.frequency) Hz"</span></span>, value: oscillator.amplitude ) { amplitude <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> oscillator.amplitude = amplitude } addView(harmonicSlider) } } } <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.liveView = <span class="hljs-type"><span class="hljs-type">LiveView</span></span>()</code> </pre> <br>  En AudioKit hay clases espec√≠ficamente para el trabajo conveniente en parques infantiles.  En nuestro ejemplo, usamos <code>AKLiveViewController</code> , al usarlo colocamos elementos verticalmente.  Y tambi√©n para cada oscilador creamos un <code>AKSlider</code> .  Los controles deslizantes se inicializan por los valores de la frecuencia y la amplitud de los osciladores, y causan un bloqueo al interactuar con ellos.  En el bloque de cada control deslizante, cambiamos la amplitud del oscilador correspondiente.  As√≠ que solo puede agregar interactividad a sus √°reas de juego. <br><br>  Para ver los resultados del √°rea de juegos, debe tener Live View en la pantalla.  Para hacer esto, seleccione el bot√≥n con c√≠rculos que se cruzan en la parte superior derecha de la ventana y aseg√∫rese de que est√© seleccionada la lista de reproducci√≥n correcta para Live View. <br><br><img src="https://habrastorage.org/webt/rz/sg/3p/rzsg3psadssk1spigpzyqaltcwq.png"><br><br>  Para cambiar el tono de su instrumento, puede cambiar los valores de cada control deslizante individualmente.  Para un sonido realista, le sugiero que pruebe la configuraci√≥n que se muestra en la captura de pantalla anterior. <br><br>  ¬°Uno de los primeros sintetizadores en usar s√≠ntesis aditiva fue Teleharmonium y pesaba 200 toneladas!  Su incre√≠ble peso y tama√±o, muy probablemente, se convirti√≥ en la raz√≥n de su oscuridad.  El √≥rgano Hammond m√°s exitoso us√≥ ruedas de tonos similares, pero era mucho m√°s peque√±o.  Inventado en 1935, todav√≠a es ampliamente conocido como un instrumento popular en la era del rock progresivo. <br><br><img src="https://habrastorage.org/webt/tb/nj/tn/tbnjtngmdjzwb6ddutkpmumkbqy.jpeg"><br><br>  La rueda de tonos es un disco giratorio con peque√±as cavidades a lo largo del borde y una pastilla ubicada cerca del borde.  El √≥rgano Hammond ten√≠a un conjunto completo de ruedas de tono que pod√≠an girar a diferentes velocidades.  Una forma bastante inusual de generar sonido es m√°s bien electromec√°nica que electr√≥nica. <br><br>  Para generar un espectro de sonido m√°s realista, existen varias t√©cnicas m√°s: modulaci√≥n de frecuencia (Modulaci√≥n de frecuencia o FM) y modulaci√≥n de ancho de pulso (Modulaci√≥n de ancho de pulso o PWM), ambas t√©cnicas est√°n disponibles en AudioKit en las <code>AKPWMOscillator</code> <code>AKFMOscillator</code> y <code>AKPWMOscillator</code> respectivamente.  Le sugiero que pruebe ambos, sustituy√©ndolos en lugar del <code>AKOscillator</code> , que usamos anteriormente. <br><br><h1>  Polifon√≠a </h1><br>  En la d√©cada de 1970, el movimiento comenz√≥ desde sintetizadores modulares, que consisten en osciladores de envolvente y filtros separados, hasta microprocesadores.  En lugar de utilizar circuitos anal√≥gicos, el sonido comenz√≥ a generarse en formato digital.  Esto hizo que los sintetizadores fueran m√°s baratos y compactos, y los sintetizadores de marcas como Yamaha muy populares. <br><br><img src="https://habrastorage.org/webt/xi/2y/uc/xi2yucsslswbjqknyj0b_8cgtcw.jpeg"><br><br>  Todos nuestros parques infantiles se limitaban a tocar una nota a la vez.  Muchos instrumentos son capaces de tocar m√°s de una nota a la vez; se llaman <b>polif√≥nicos</b> .  Los instrumentos que solo pueden tocar una nota se llaman <b>monof√≥nicos</b> . <br><br>  Para obtener un sonido polif√≥nico, puede crear varios osciladores y enviarlos al mezclador, pero en AudioKit hay una forma m√°s adecuada para esto. <br><br>  Cree una nueva p√°gina en el patio de juegos y as√≠gnele el nombre Polifon√≠a.  Reemplace el c√≥digo generado con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitUI <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport let bank = AKOscillatorBank() AudioKit.output = bank try AudioKit.start()</code> </pre> <br>  Aqu√≠ creamos el banco de osciladores <code>AKOscillatorBank</code> .  Si va a la declaraci√≥n de clase, puede encontrar que es el heredero de <code>AKPolyphonicNode</code> , que, a su vez, es el heredero del <code>AKNode</code> ya conocemos, y tambi√©n implementa el protocolo <code>AKPolyphonic</code> . <br><br>  Como resultado, el banco de osciladores es el mismo nodo AudioKit que revisamos anteriormente.  Su salida se puede enviar a mezcladores, sobres o cualquier otro filtro y efecto.  El protocolo <code>AKPolyphonic</code> describe c√≥mo tocar notas en una nota polif√≥nica; consideremos con m√°s detalle. <br><br>  Para probar nuestro oscilador, necesitamos una forma de tocar varias notas a la vez.  ¬°Esto no es del todo dif√≠cil! <br><br>  Agregue el siguiente c√≥digo a la lista de reproducci√≥n y aseg√∫rese de que Live View est√© abierto: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKKeyboardDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> keyboard = <span class="hljs-type"><span class="hljs-type">AKKeyboardView</span></span>(width: <span class="hljs-number"><span class="hljs-number">440</span></span>, height: <span class="hljs-number"><span class="hljs-number">100</span></span>) addView(keyboard) } } <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.liveView = <span class="hljs-type"><span class="hljs-type">LiveView</span></span>() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Cuando se compile el patio de recreo, ver√° lo siguiente: <br><br><img src="https://habrastorage.org/webt/c4/jc/ra/c4jcramxnalsdi-ksf1nfq5zm80.png"><br><br>  Genial, ¬øeh?  ¬°El teclado musical est√° justo en el patio de recreo! <br><br>  <code>AKKeyboardView</code> es otra utilidad de AudioKit que facilita la exploraci√≥n de las posibilidades del marco.  Presione las teclas y ver√° que no emiten ning√∫n sonido. <br><br>  Actualice la <code>setUp</code> su <code>PlaygroundView</code> con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> keyboard = <span class="hljs-type"><span class="hljs-type">AKKeyboardView</span></span>(width: <span class="hljs-number"><span class="hljs-number">440</span></span>, height: <span class="hljs-number"><span class="hljs-number">100</span></span>) keyboard.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addView(keyboard)</code> </pre> <br>  Esto har√° que <code>PlaygroundView</code> un delegado de teclado y le permitir√° responder a las pulsaciones de teclas. <br><br>  Actualice la declaraci√≥n de clase de la siguiente manera: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKKeyboardDelegate</span></span></span></span></code> </pre> <br><br>  Agregue tambi√©n un par de m√©todos justo despu√©s de la <code>setUp</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noteOn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(note: MIDINoteNumber)</span></span></span></span> { bank.play(noteNumber: note, velocity: <span class="hljs-number"><span class="hljs-number">80</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noteOff</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(note: MIDINoteNumber)</span></span></span></span> { bank.stop(noteNumber: note) }</code> </pre> <br>  Cada vez que presiona una tecla, se <code>noteOn</code> m√©todo <code>noteOn</code> , todo lo que hace es decirle al banco de osciladores que comience a tocar la nota, respectivamente, en el m√©todo <code>noteOff</code> , la <code>noteOff</code> se detiene. <br><br>  Sostenga el mouse y deslice las teclas, escuchar√° un hermoso crescendo (un t√©rmino musical para un aumento gradual de la potencia del sonido).  El banco de osciladores ya contiene un efecto ADSR incorporado, como resultado, la atenuaci√≥n de una nota se mezcla con el ataque de la siguiente y suena bastante bien. <br><br>  Es posible que haya notado que las notas que nos dieron las claves no vienen en forma de frecuencia.  Se declaran como <code>MIDINoteNumber</code> .  Si va a un anuncio de este tipo, ver√° lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">MIDINoteNumber</span></span> = <span class="hljs-type"><span class="hljs-type">Int</span></span></code> </pre> <br>  MIDI significa interfaz digital de instrumentos musicales.  Este es un formato extendido para la interacci√≥n de instrumentos musicales entre s√≠.  Los n√∫meros de nota corresponden a notas en un teclado de m√∫sica est√°ndar.  El segundo par√°metro: esta velocidad (velocidad) corresponde a la fuerza del golpe en la tecla.  Cuanto menor sea el valor, m√°s suave ser√° el toque de la tecla, m√°s silencioso ser√° el sonido final. <br><br>  Al final, debe habilitar el modo polif√≥nico en las teclas.  Agregue el siguiente c√≥digo al m√©todo de <code>setUp</code> : <br><br><pre> <code class="swift hljs">keyboard.polyphonicMode = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Ahora puede tocar varias notas al mismo tiempo, como se muestra en la imagen: <br><br><img src="https://habrastorage.org/webt/ji/vq/_x/jivq_xdx2rewvc4prnyjtu4b2p8.png"><br><br>  Esto, por cierto, est√° en Do mayor :) <br><br>  AudioKit comenz√≥ su historia hace mucho tiempo.  Hoy usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Soundpipe</a> y el c√≥digo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Csound</a> (un proyecto MIT que se lanz√≥ en 1985).  Sorprendentemente, el c√≥digo que ahora estamos lanzando en los parques infantiles y agregando al iPhone se escribi√≥ hace casi 30 a√±os. <br><br><h1>  Muestreo </h1><br>  Las t√©cnicas de s√≠ntesis de sonido que exploramos anteriormente est√°n tratando de recrear un sonido realista usando bloques b√°sicos simples: osciladores, filtros y mezcladores.  A principios de la d√©cada de 1970, el desarrollo de la potencia de la computadora condujo a la aparici√≥n de un nuevo enfoque: el muestreo de sonido, cuyo prop√≥sito es crear una copia digital del sonido. <br><br>  El muestreo es una tecnolog√≠a bastante simple similar a la fotograf√≠a digital.  Durante el muestreo a intervalos regulares, se registra la amplitud de las ondas de sonido: <br><br><img src="https://habrastorage.org/webt/o4/a_/uu/o4a_uur6ow0lpjkukkaappxx25a.png"><br><br>  Dos par√°metros afectan la precisi√≥n con la que se grab√≥ el sonido: <br><br><ul><li>  <b>Profundidad de bits</b> : o profundidad de bits, el n√∫mero de niveles de volumen individuales que puede reproducir la muestra <br></li><li>  <b>Frecuencia de</b> muestreo: o frecuencia de muestreo, indica con qu√© frecuencia se toman las mediciones de amplitud.  Medido en hercios. <br></li></ul><br>  Exploremos estas propiedades en un nuevo parque infantil.  Cree una nueva p√°gina y as√≠gnele el nombre "Muestras".  Reemplace el c√≥digo generado con lo siguiente: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport let file = try AKAudioFile(readFileName: "climax-disco-part2.wav", baseDir: .resources) let player = try AKAudioPlayer(file: file) player.looping = true</code> </pre> <br>  El c√≥digo anterior carga la muestra, crea un reproductor de audio y lo pone en reproducci√≥n sin fin. <br><br>  Un archivo con un archivo WAV para este tutorial est√° disponible <a href="">aqu√≠</a> .  Desc√°rguelo y descompr√≠malo en la carpeta Recursos de su √°rea de juegos. <br><br>  Luego agregue el siguiente c√≥digo al final del patio de recreo: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = player <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start() player.play() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Esto conectar√° su reproductor de audio con AudioKit, ¬°solo necesita subir el volumen y disfrutar! <br><br>        ,         . <br><br> MP3-,    ,      ,      .                : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bitcrusher = <span class="hljs-type"><span class="hljs-type">AKBitCrusher</span></span>(player) bitcrusher.bitDepth = <span class="hljs-number"><span class="hljs-number">16</span></span> bitcrusher.sampleRate = <span class="hljs-number"><span class="hljs-number">40000</span></span></code> </pre> <br>      AudioKit: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = bitcrusher</code> </pre> <br>    .    ,      . <br><br> <code>AKBitCrusher</code> ‚Äî   AudioKit,       . ,     ,       ZX Spectrum  BBC Micro.            ,  . <br><br>           ,     (. delay).     ,       <code>AKBitCrusher</code> .    : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> delay = <span class="hljs-type"><span class="hljs-type">AKDelay</span></span>(player) delay.time = <span class="hljs-number"><span class="hljs-number">0.1</span></span> delay.dryWetMix = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>      0.1       .  <code>dryWetMix</code>          .     1 ,          . <br><br>   : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> leftPan = <span class="hljs-type"><span class="hljs-type">AKPanner</span></span>(player, pan: -<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rightPan = <span class="hljs-type"><span class="hljs-type">AKPanner</span></span>(delay, pan: <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br> <code>AKPanner</code>     ,   - .             . <br><br>          AudioKit.  ,   <code>AKBitCrusher</code>  AudioKit   : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mix = <span class="hljs-type"><span class="hljs-type">AKMixer</span></span>(leftPan, rightPan) <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = mix</code> </pre> <br>  ,    ,         . <br><br><img src="https://habrastorage.org/webt/i0/6x/ha/i06xhaf2i0gnjeuebj3xqbdc3iw.png"><br><br><h1>  Que sigue </h1><br>          AudioKit.    , -, ,  ,      .   ,      ,     . <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440226/">https://habr.com/ru/post/440226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440214/index.html">Spring y JDK 8: ¬øSigues usando @Param y name / value en las anotaciones de Spring MVC? Entonces el art√≠culo es para ti</a></li>
<li><a href="../440216/index.html">C√≥mo le ense√±√© a Zabbix a vigilar mi nodo e informar problemas</a></li>
<li><a href="../440218/index.html">Ataque DoS que no se puede cerrar: las adquisiciones tienen su propia atm√≥sfera</a></li>
<li><a href="../440220/index.html">El s√≠ndrome del impostor no solo es da√±ino, sino tambi√©n beneficioso</a></li>
<li><a href="../440222/index.html">M√≥dulo de tel√©metro ultras√≥nico submarino</a></li>
<li><a href="../440230/index.html">La Duma del Estado pospuso la discusi√≥n del proyecto de ley sobre los agregadores de noticias</a></li>
<li><a href="../440232/index.html">Proyecto de ley sobre el "trabajo sostenible" Runet: ¬øqu√© hacer antes de la segunda lectura?</a></li>
<li><a href="../440234/index.html">Julia y el enjambre de part√≠culas</a></li>
<li><a href="../440236/index.html">Carrera de esteroides. Algoritmo b√°sico</a></li>
<li><a href="../440238/index.html">¬øC√≥mo puede un gerente de producto estropear un lanzamiento en el segmento final?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>