<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚶🏿 🛒 🤐 宣布Azure Spot虚拟机的预览 🥐 🛳️ 👩🏿‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我们宣布了Azure Spot虚拟机的预览。 Azure Spot虚拟机以很高的折扣提供对未使用的Azure计算容量的访问。 除虚拟机规模集（VMSS）外，单个虚拟机还提供现货定价。 这使您可以在Azure上部署各种各样的工作负载，同时享受折扣价。 现货虚拟机提供的功能与即付即用虚拟机相同，但价格和...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>宣布Azure Spot虚拟机的预览</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/480026/"> 我们宣布了Azure Spot虚拟机的预览。  Azure Spot虚拟机以很高的折扣提供对未使用的Azure计算容量的访问。 除虚拟机规模集（VMSS）外，单个虚拟机还提供现货定价。 这使您可以在Azure上部署各种各样的工作负载，同时享受折扣价。 现货虚拟机提供的功能与即付即用虚拟机相同，但价格和驱逐费用有所不同。 如果Azure需要容量，则可以随时驱除Spot虚拟机。 <br><br> 最适合在Spot虚拟机上运行的工作负载包括但不限于以下各项： <br><br><ul><li> 批处理作业。 </li><li> 可以维持和/或从中断中恢复的工作量。 </li><li> 开发和测试。 </li><li> 可以使用Spot虚拟机进行横向扩展的无状态应用程序，从而可以节省成本。 </li><li> 如果虚拟机被驱逐，可以很容易地再次运行短暂的作业。 </li></ul><br><img src="https://habrastorage.org/webt/m_/fm/3_/m_fm3_d6zghepgkspialf3tykxe.png"><a name="habracut"></a><br><br>  Spot虚拟机的预览将替换规模集上的Azure低优先级虚拟机的预览。 合格的低优先级虚拟机将自动转换为Spot虚拟机。 请参考<a href="https://azure.microsoft.com/en-us/pricing/spot/">常见问题解答</a>以获取更多信息。 <br><br><h2> 计价 </h2><br> 与低优先级虚拟机不同，现货虚拟机的价格将根据Azure区域中大小或SKU的容量而有所不同。 现货定价可以让您深入了解给定Azure虚拟机系列的可用性和需求以及区域中的特定大小。 价格将缓慢变化以保持稳定，从而使您可以更好地管理预算。 在Azure门户中，您可以访问当前的Azure虚拟机现货价格，以轻松确定最适合您需求的区域或虚拟机大小。 现货价格上限为即付即用价格。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1d/d9c/2ab/b1dd9c2ab8b9478a9ed941aebe6b9249.jpg"><br><br><h2> 部署方式 </h2><br> 现货虚拟机易于部署和管理。 部署竞价型虚拟机类似于配置和部署常规虚拟机。 例如，在Azure门户中，您只需选择Azure Spot实例即可部署Spot虚拟机。 您还可以为Spot虚拟机定义最高价格。 这里有两个选择： <br><br><ol><li> 您可以选择在不限制价格的情况下部署<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/spot-portal">Spot虚拟机</a> 。  Azure将在任何给定时间向您收取现货虚拟机价格，让您放心，不会因为价格原因而将您的虚拟机逐出。 <br><img src="https://habrastorage.org/getpro/habr/post_images/935/098/506/935098506147cb25358c90431d30b87d.jpg"></li><li> 另外，您可以决定提供一个特定的价格以保持预算。  Azure不会向您收取高于您设置的最高价格的费用，如果现货价格高于您定义的最高价格，则将驱逐虚拟机。 <br><img src="https://habrastorage.org/getpro/habr/post_images/190/d93/4f2/190d934f261e866dc01e08453adabb59.jpg"></li></ol><br> 很少有其他选择可以降低成本。 <br><br><ol><li> 如果您的工作负载不需要特定的虚拟机系列和大小，则可以在同一地区找到其他较便宜的虚拟机。 </li><li> 如果您的工作负载不依赖于特定区域，则可以找到其他Azure区域以降低成本。 </li></ol><br><h2> 配额 </h2><br> 作为此公告的一部分，为了提供更好的灵活性，Azure还为Spot虚拟机推出了单独的配额，该配额与按需购买的虚拟机配额是分开的。  Spot虚拟机和Spot VMSS实例的配额是特定Azure区域中所有虚拟机大小的单一配额。 这种方法使您可以轻松访问更广泛的虚拟机集。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56d/502/9d1/56d5029d1acc9c0b88cb5a8509d99151.jpg"><br><br><h2> 处理搬迁 </h2><br>  Azure将尝试使Spot虚拟机保持运行并最大程度地减少驱逐，但是您的工作负载应做好准备以处理驱逐，因为不能保证Azure Spot虚拟机和VMSS实例的运行时。 您可以通过订阅计划的事件来获得<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/scheduled-events">30秒的驱逐通知</a> 。 由于以下原因，可以驱逐虚拟机： <br><br><ol><li> 现货价格已经超过您为虚拟机定义的最高价格。 当您选择的虚拟机的现货价格高于部署时定义的价格时，Azure现货虚拟机将被收回。 您可以尝试通过更改价格来重新部署虚拟机。 </li><li>  Azure需要回收容量。 </li></ol><br> 在这两种情况下，您都可以尝试在相同的区域或可用性区域中重新部署虚拟机。 <br><br><h2> 最佳实务 </h2><br> 以下是一些最佳利用Azure Spot虚拟机的有效方法： <br><br><ul><li> 对于长时间运行的操作，请尝试创建检查点，以便可以从先前已知的检查点重新启动工作负载以处理逐出并节省时间。 </li><li>在横向扩展方案中，为了节省成本，您可以拥有两个VMSS，其中一个具有常规虚拟机，另一个具有Spot虚拟机。 您可以将两者放在同一个负载均衡器中以进行机会扩展。 </li><li> 收听虚拟机中的驱逐通知，以在虚拟机即将被驱逐时得到通知。 </li><li> 如果您愿意使用随用随付的价格，则使用Eviction类型来“仅容量驱逐”，在API中提供“ -1”作为最高价格，因为Azure永远不会向您收取高于现货虚拟机价格的费用。 </li><li> 要处理逐出，请构建重试逻辑以重新部署虚拟机。 如果不需要特定的虚拟机系列和大小，请尝试部署与您的工作负载需求相匹配的其他大小。 </li><li> 部署VMSS时，在Portal Management（门户网站管理）选项卡中选择“最大传播”，或在API中选择FD == 1，以查找区域或区域中的容量。 </li></ul><br><h2> 了解更多 </h2><br><ul><li> 现货虚拟机<a href="https://azure.microsoft.com/en-us/pricing/spot/">详细信息</a> </li><li> 虚拟机现货定价： <a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/windows/">Windows</a>和<a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux/">Linux</a> </li><li> 在<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/spot-portal">门户中</a>创建竞价型虚拟机 </li><li> 在<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/spot-cli">Azure CLI中</a>创建Spot虚拟机 </li><li> 在<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/spot-powershell">Azure PowerShell中</a>创建Spot虚拟机 </li><li> 在<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/spot-template">Azure资源管理器模板中</a>创建Spot虚拟机 </li><li> 在<a href="https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/use-spot">Azure资源管理器模板中</a>创建Spot VMSS </li><li>  <a href="https://docs.microsoft.com/en-us/azure/batch/batch-low-pri-vms">针对Spot虚拟机的</a>计划<a href="https://docs.microsoft.com/en-us/azure/batch/batch-low-pri-vms">Azure批处理支持</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN480026/">https://habr.com/ru/post/zh-CN480026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN480012/index.html">lang格式会降低程序速度</a></li>
<li><a href="../zh-CN480016/index.html">39％的俄罗斯SMB公司面临针对性的网络攻击</a></li>
<li><a href="../zh-CN480018/index.html">使用Python进行移动应用开发。 KivyMD库</a></li>
<li><a href="../zh-CN480022/index.html">Python实例化</a></li>
<li><a href="../zh-CN480024/index.html">长春：单指令处理器</a></li>
<li><a href="../zh-CN480028/index.html">最和平的革命</a></li>
<li><a href="../zh-CN480032/index.html">使用Async，Swoole和Parallel加速Tarantool的PHP连接器</a></li>
<li><a href="../zh-CN480034/index.html">Habraiting 2019：2019年作者的统计数据和排名</a></li>
<li><a href="../zh-CN480038/index.html">Xamarin.Forms 4.4助您一臂之力</a></li>
<li><a href="../zh-CN480040/index.html">Rambler Group对Nginx和创始人的冲击是什么，以及它将如何影响在线行业</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>