<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôåüèΩ üß¢ ü•ú Adaptador blockchain Ethereum para a plataforma de dados InterSystems IRIS üë¶üèª üï∏Ô∏è ‚ÅâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Blockchain 
 Agora, quando escrevo este artigo, a taxa de c√¢mbio do Bitcoin caiu mais de 5 vezes em rela√ß√£o ao valor m√°ximo e, quando eu disse que ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptador blockchain Ethereum para a plataforma de dados InterSystems IRIS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/439560/"><h4>  1. Blockchain </h4><br>  Agora, quando escrevo este artigo, a taxa de c√¢mbio do Bitcoin caiu mais de 5 vezes em rela√ß√£o ao valor m√°ximo e, quando eu disse que estava fazendo algo relacionado √† blockchain, a primeira coisa que ouvi foi o ceticismo aberto - "quem agora precisa de toda essa sua blockchain" . <br><br>  Sim, de fato, o hype em torno da blockchain j√° passou.  Mas as tecnologias subjacentes permaneceram, elas est√£o se desenvolvendo e continuar√£o se desenvolvendo e sendo usadas em determinados nichos. <a name="habracut"></a>  Na Internet e, em particular, em Habr√©, existem muitos materiais que descrevem as duas √°reas gerais de aplica√ß√£o de tecnologia (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">habr.com/company/bitfury/blog/353350</a> e exemplos mais espec√≠ficos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">habr.com/company/raiffeisenbank/blog/332756</a> ). <br><br>  Como voc√™ sabe, blockchain √© um registro distribu√≠do, ou seja,  um banco de dados distribu√≠do entre v√°rios n√≥s, enquanto cada n√≥ armazena uma c√≥pia completa do registro.  A peculiaridade da blockchain √© que os registros (transa√ß√µes) s√£o agrupados em blocos e os blocos s√£o combinados em uma cadeia de blocos.  No entanto, apenas opera√ß√µes de adi√ß√£o de dados est√£o dispon√≠veis.  Tudo isso leva ao fato de que √© quase imposs√≠vel fazer altera√ß√µes nas transa√ß√µes j√° salvas na blockchain. <br><br>  Existem muitos materiais sobre como o blockchain funciona (se voc√™ nunca ouviu falar sobre o blockchain antes, pode come√ßar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este v√≠deo simples</a> ). <br><br>  Na √©poca do aumento m√°ximo de interesse na tecnologia blockchain, havia muitas chamadas para usar blockchain absolutamente em todos os lugares.  No entanto, existem certos sinais de projetos / tarefas, cuja implementa√ß√£o pode exigir uma blockchain. <br><br>  Em primeiro lugar, a participa√ß√£o de um grande n√∫mero de jogadores (usu√°rios) que registram dados, enquanto √© necess√°rio evitar inconsist√™ncias e aumentar a confian√ßa. <br><br>  Em segundo lugar, a aus√™ncia de terceiros em que todos confiam. <br><br>  Em terceiro lugar, a necessidade de um mecanismo para verifica√ß√£o de dados p√∫blicos. <br>  Se todas as condi√ß√µes acima forem atendidas, voc√™ precisar√° pensar em usar uma blockchain. <br><br>  Tais tarefas podem surgir em qualquer setor.  O projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.101blockchains.com</a> coleta informa√ß√µes sobre projetos potenciais e implementados, bem como sobre os recursos do uso de blockchain em diferentes √°reas. <br><br>  Por exemplo, no setor de sa√∫de, a blockchain pode ser usada: <br><br><ul><li>  para gerenciamento seguro dos dados do paciente; </li><li>  combater drogas falsificadas por meio de transa√ß√µes invari√°veis ‚Äã‚Äãem toda a cadeia de suprimentos; </li><li>  melhorar o monitoramento e a efic√°cia dos ensaios cl√≠nicos, eliminando fraudes e manipula√ß√£o de dados. </li></ul><br>  Ao usar o blockchain no segmento corporativo, eles geralmente usam um blockchain privado com v√°rios n√≠veis de permiss√£o (Private Permissioned Blockchain).  Essas redes t√™m um conjunto especial de n√≥s para confirmar transa√ß√µes. <br><br>  No entanto, ao desenvolver o primeiro adaptador IRIS da InterSystems para trabalhar com o blockchain, escolhemos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ethereum</a> , que pertence √† categoria do Blockchain sem permiss√£o - uma plataforma aberta sem um √≥rg√£o de governo.  Essa op√ß√£o est√° associada √† popularidade do Ethereum e a uma infraestrutura bastante desenvolvida: a presen√ßa de v√°rias ferramentas e bibliotecas.  Voc√™ tamb√©m pode perceber que, usando o software Ethereum, voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criar uma blockchain privada</a> . <br><br><h4>  2. O adaptador </h4><br>  Agora √© hora de seguir para o pr√≥prio adaptador. <br><br>  Um adaptador no InterSystems IRIS (assim como no Ensemble) √© uma classe ou pacote de classes InterSystems IRIS que fornece a capacidade de trabalhar com um sistema externo.  Os adaptadores InterSystems IRIS s√£o divididos em entrada (para receber dados de um sistema externo quando o sistema externo √© o iniciador da intera√ß√£o) e sa√≠da (para trabalhar com um sistema externo quando o iniciador da intera√ß√£o √© o InterSystems IRIS). <br><br>  O adaptador IRIS Ethereum √© um adaptador de sa√≠da e √© um pouco diferente da maioria dos outros adaptadores InterSystems IRIS, pois parte desse adaptador √© um pacote de classes IRIS da InterSystems, mas o adaptador tamb√©m inclui um pequeno m√≥dulo NodeJS.  A arquitetura √© mostrada na Figura 1. <br><br><img src="https://habrastorage.org/webt/mo/kz/3c/mokz3cufv-4t24zab_oeouy5ef8.png"><br>  <i>Figura 1</i> <br><br>  O m√≥dulo adaptador NodeJS usa bibliotecas NodeJS existentes para trabalhar com o Ethereum. <br><br>  O adaptador fornece os seguintes recursos: <br><br><ul><li>  Coloque um contrato inteligente no Ethereum (planejamos preparar outro artigo no qual falaremos mais sobre contratos inteligentes, ferramentas de desenvolvimento e discutiremos um exemplo). </li><li>  Chame m√©todos de contrato inteligentes: m√©todos que n√£o alteram o estado da blockchain e m√©todos que alteram o estado da blockchain </li><li>  Salvando uma transa√ß√£o (transferindo fundos da carteira para a carteira) </li><li>  Chamando m√©todos auxiliares para obter o estado blockchain </li><li>  Registrando todas as solicita√ß√µes (executa o m√≥dulo NodeJS, √∫til para depura√ß√£o) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O adaptador est√° dispon√≠vel com o c√≥digo-fonte do <b>OpenExchange</b></a> . <br><br><h4>  3. Um exemplo simples </h4><br>  Um exemplo "Hello world" √© instalado com o adaptador. <br><br>  Para come√ßar a trabalhar com o Ethereum (inclusive para executar este exemplo), voc√™ precisa: <br><br><ul><li>  Escolha com qual rede voc√™ trabalhar√°.  Para o desenvolvimento, geralmente s√£o usadas redes de teste como o Ropsten. </li><li>  Crie uma carteira nesta rede e reabaste√ßa </li><li>  Instale um cliente local do Ethereum (por exemplo, Geth) ou obtenha uma chave para trabalhar com um provedor de nuvem (por exemplo, Infura) </li></ul><br>  Ao configurar uma transa√ß√£o comercial, voc√™ deve especificar (Figura 2): <br><br><ol><li>  Servidor e porta em que o m√≥dulo NodeJS est√° em execu√ß√£o (a porta padr√£o √© 3000) </li><li>  Configura√ß√µes do provedor (neste caso, acesso ao Infura) </li><li>  Detalhes de acesso (nos detalhes de acesso, voc√™ precisa indicar sua carteira como nome de usu√°rio, a chave privada da carteira como senha. No InterSystems IRIS, os detalhes de acesso s√£o armazenados em um banco de dados separado, para o qual a criptografia deve ser ativada) </li></ol><br><img src="https://habrastorage.org/webt/ei/kr/bv/eikrbvchchjm5xwkbrfv9qm4olk.png"><br>  <i>Figura 2</i> <br><br>  Para trabalhar com contratos inteligentes, voc√™ precisar√° criar (para cada contrato inteligente que entrar√° em contato) uma pasta no sistema de arquivos e colocar 2 arquivos l√°: <br>  * abi.txt <br>  * bytecode.txt <br><br>  Esses arquivos devem ter um contrato inteligente ABI e Bytecode.  Contrato inteligente ABI - uma descri√ß√£o formal da interface do contrato inteligente no formato json.  ABI e Bytecode s√£o criados no momento em que o contrato inteligente √© compilado. <br><br>  O bytecode √© necess√°rio apenas para implantar um contrato. <br><br>  Usando o servi√ßo de teste, voc√™ pode verificar a opera√ß√£o de uma transa√ß√£o comercial. <br><br>  Na Figura 3, usando o servi√ßo de teste, o contrato inteligente √© implantado.  O resultado da chamada desta opera√ß√£o de neg√≥cios √© uma mensagem que cont√©m um hash de transa√ß√£o. <br><br><img src="https://habrastorage.org/webt/it/qm/wk/itqmwkzesdspagy8vxdwh0klpn4.png"><br>  <i>Figura 3</i> <br><br>  Usando o navegador ropsten.etherscan.io (https://etherscan.io/), voc√™ pode encontrar esta transa√ß√£o e obter o endere√ßo do contrato inteligente colocado. <br><br>  Para executar m√©todos de contrato inteligentes usando o adaptador, voc√™ deve especificar as configura√ß√µes na configura√ß√£o do produto: ContractFolder e ContractAddress. <br><br>  O c√≥digo para chamar o m√©todo de contrato inteligente √© bastante simples: <br><br><pre><code class="go hljs">set ..ContractABI = [].%FromJSON(..ContractFolder_<span class="hljs-string"><span class="hljs-string">"abi.txt"</span></span>) set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) set result = contract.hello() set pResponse = ##class(Ens.StringContainer).%New(result.args)</code> </pre> <br>  Usando o m√©todo do adaptador GetContract, que recebe o endere√ßo do contrato inteligente e da ABI, √© criado um objeto de contrato inteligente, que √© usado para chamar os m√©todos.  Nesse caso, o m√©todo hello () deve ser definido no contrato inteligente, que retorna uma string. <br><br>  Neste exemplo, o m√©todo hello () n√£o altera o estado da blockchain, portanto, pode ser chamado de forma s√≠ncrona.  No entanto, os m√©todos que alteram o estado da blockchain podem levar muito tempo (aguardando a confirma√ß√£o da transa√ß√£o). <br><br>  Para chamar esses m√©todos, voc√™ pode usar o mecanismo de resposta diferida no InterSystems IRIS.  O adaptador precisa passar o token diferido e, quando a transa√ß√£o do NodeJS for confirmada, o m√≥dulo transmitir√° o resultado de sua execu√ß√£o ao InterSystems IRIS.  Para fazer isso, voc√™ deve configurar o aplicativo Web e adicionar uma transa√ß√£o comercial ao produto que processar√° a resposta recebida. <br><br>  C√≥digo para chamar um m√©todo que altera o estado da blockchain: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// getting EthereumAccount(wallet) and privateKey do ##class(Ens.Config.Credentials).GetCredentialsObj(.cred, "Ethereum.Demo.EthereumOperation", "Ens.Config.Credentials", ..Credentials) set account = ##class(Ethereum.Address).%New(cred.Username) set privateKey = cred.Password //reading contract ABI set ..ContractABI = [].%FromJSON(..ContractFolder_"abi.txt") // get contract object set contract = ..Adapter.GetContract( ##class(Ethereum.Address).%New(..ContractAddress), ..ContractABI) $$$ThrowOnError(..DeferResponse(.deferred)) // estimate gas do contract.SetOptions(account) set gasJSON = contract.EstimateGas("setName",pRequest.Name) $$$TRACE(gasJSON.gas) do contract.SetOptions(account, privateKey, ##class(Ethereum.Wei).%New(1000000000), ##class(Ethereum.Wei).%New(100*gasJSON.gas),,deferred) set result = contract.setName(pRequest.Name)</span></span></code> </pre> <br>  Nesse caso, antes de chamar o m√©todo de contrato inteligente setName (), √© necess√°rio especificar v√°rios par√¢metros, incluindo um token de resposta atrasada. <br><br>  Em nosso pr√≥ximo artigo, falaremos mais sobre contratos inteligentes e daremos um exemplo de solu√ß√£o de um aplicativo usando o adaptador InterSystems IRIS Ethereum. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt439560/">https://habr.com/ru/post/pt439560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt439546/index.html">Os andr√≥ides sonham com punk el√©trico? Como eu ensinei uma rede neural a escrever m√∫sica</a></li>
<li><a href="../pt439550/index.html">Hackquest 2018. Resultados e revis√µes. Dia 1-3</a></li>
<li><a href="../pt439552/index.html">Extens√µes maliciosas do Chrome</a></li>
<li><a href="../pt439556/index.html">TDMS Fairway. Metodologias do PMBOK e organiza√ß√µes de design russas</a></li>
<li><a href="../pt439558/index.html">Novo telefone antigo. Reinvente o telefone PSTN</a></li>
<li><a href="../pt439562/index.html">Configure o cluster de alta disponibilidade do Kubernetes no bare metal com o kubeadm. Parte 1/3</a></li>
<li><a href="../pt439564/index.html">Aplica√ß√£o pr√°tica da transforma√ß√£o de √°rvore AST usando Putout como exemplo</a></li>
<li><a href="../pt439566/index.html">Por que a documenta√ß√£o do SRE √© importante. Parte 3</a></li>
<li><a href="../pt439568/index.html">SSDs baseados em QLC - um assassino de disco r√≠gido? Realmente n√£o</a></li>
<li><a href="../pt439570/index.html">Magia IPython para editar tags de c√©lulas Jupyter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>