<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏾 👩🏿‍🔧 🧖🏽 YIMP-Bootstrap 4上Yii 2的控制面板 👶 🤛 🎑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我确信，很多喜欢框架而不是现成CMS的开发人员都有关于Bootstrap或其类似物的解决方案，该解决方案用于创建管理界面和其他后台界面。 我有。 它已经成功运行了很多年，但是已经过时了。 现在该重写了。 


 在开发新版本时，我尝试总结了我在该主题上的所有经验，结果得到了YIMP ，这是我不为共享...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>YIMP-Bootstrap 4上Yii 2的控制面板</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466505/"><p> 我确信，很多喜欢框架而不是现成CMS的开发人员都有关于Bootstrap或其类似物的解决方案，该解决方案用于创建管理界面和其他后台界面。 我有。 它已经成功运行了很多年，但是已经过时了。 现在该重写了。 </p><br><p> 在开发新版本时，我尝试总结了我在该主题上的所有经验，结果得到了<strong>YIMP</strong> ，这是我<strong>不为共享的自行车：</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">LiveDemo</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">API Documentation</a> 。 </p><br><p>  YIMP非常简单。 但是，在这种简单性背后还有一个漫长的想法，我也想分享一下。 因此，本文并非说明。 当然，在这里我们讨论架构，依赖管理，MVC范例和用户界面。 </p><a name="habracut"></a><br><p> 因此，YIMP是一个仪表板。 这不是现成的管理面板，也不是CMS甚至CMF。 表示代码需要独立编写或使用Gii（附带模板）。  YIMP提供了一个布局，该布局定义了控件应位于的位置以及应用程序通过其将数据传输到布局的接口。 这是在台式机上的外观： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mg/cq/8p/mgcq8plajqml62wpyw6za3gnode.png"></div><br><p> 布局自适应。 随着屏幕缩小，元素开始消失或在导航栏中的按钮上移动。 结果<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，</a>电话上<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的同一页面</a>如下所示： </p><br><div class="spoiler">  <b class="spoiler_title">最好让它处于扰流板之下</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vv/gi/ni/vvginigkcypah1yxxxp7jnr6-6e.png" width="250"></div></div></div><br><p> 我们在布局中看到了什么？ 应用程序标题，面包屑，三个菜单（左，右和顶部），侧边栏中的小部件，页面标题。 在我的实践中，这组元素足以开发任何界面-从登录页面的管理页面到公司信息系统。 我试图安排它们，以便尽可能有效地利用空间。 你说什么 </p><br><p> 标记是用纯Bootstrap编写的，没有扩展和自定义。 尽可能使用Bootstrap中的类，因此，如果您决定使用自定义，那么应该没有问题。 </p><br><p> 如我所说，YIMP包含一个接口，应用程序通过该接口将数据传输到布局。 让我们看看这是怎么发生的。 打开引擎盖！ </p><br><h2 id="leyaut"> 布局图 </h2><br><p> 我认为开发人员应该完全控制布局，因此在安装YIMP时，我建议将其代码复制到他的应用程序中。 我认为，这比在程序包中保留布局并阻止一堆设置要好得多。 让我们看一下布局代码： </p><br><div class="spoiler">  <b class="spoiler_title">77行代码。</b>  <b class="spoiler_title">不必去研究！</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">dmitrybtn</span></span>\<span class="hljs-title"><span class="hljs-title">yimp</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Alert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">dmitrybtn</span></span>\<span class="hljs-title"><span class="hljs-title">yimp</span></span>\<span class="hljs-title"><span class="hljs-title">Yimp</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap4</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; $yimp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Yimp(); $yimp-&gt;register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string $content Content came from view */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;charset ?&gt;"</span></span>&gt; &lt;meta name=<span class="hljs-string"><span class="hljs-string">"viewport"</span></span> content=<span class="hljs-string"><span class="hljs-string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Html::csrfMetaTags() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;title&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Html::encode($yimp-&gt;nav-&gt;getTitle()) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/title&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;head() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;navbar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginSidebars() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginLeftSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginLeftSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;menuLeft([ <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nav-pills flex-column border rounded py-2'</span></span>] ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endLeftSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_LEFT])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_LEFT] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endLeftSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginRightSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginRightSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;menuRight([ <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nav-pills flex-column border rounded py-2'</span></span>] ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endRightSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_RIGHT])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_RIGHT] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endRightSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endSidebars() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginContent() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;headerDesktop() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Alert::widget() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $content <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endContent() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::FOOTER])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::FOOTER] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;endBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/body&gt; &lt;/html&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;endPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> </div></div><br><p> 如您所见，所有YIMP标记都包装在方法中。 这些方法大多数都只打印<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">从此数组</a>获取的行。 是的， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KISS</a>原则就是我们的一切。 </p><br><p> 请注意，布局中使用了块。 需要它们来显示在视图中定义的窗口小部件（这就是呈现表单控件的方式）。 好吧，如果该小部件应该挂在所有页面上，则最好直接在布局中确定它。 </p><br><p> 因此，主要区域和小部件在视图中定义。 标题，菜单和面包屑在哪里确定？ 我认为，最好在控制器中定义它们。 这一点很重要，因为这样的决定与MVC范式相矛盾。 让我们更详细地研究这个问题。 </p><br><h2 id="kontrollery"> 控制器 </h2><br><p> 因此，让一个<code>ProfileController</code>可以显示有关当前用户的个人资料的信息并更改密码。 从逻辑上讲， <code>profile/view</code>操作将称为“我的配置文件”。 在主菜单中应该有一个“我的个人资料”项目也是合乎逻辑的。 最后，“我的个人资料”应该位于面包屑中：“首页/我的个人资料/更改密码”。 我认为用“我的资料”一词定义一个常量的愿望是很合理的。 您无法在视图中执行此操作。 为标题选择单独的图层很麻烦。 像这样的推理，我来到了控制器。 </p><br><p> 下一步是不仅要定义控制器中的动作标题，还要定义面包屑和菜单。 并这样做，以便YIMP可以读取它们。 这里我们需要一个例子。 让我们看一下<code>ProfileController</code>类的可能实现。 </p><br><div class="spoiler">  <b class="spoiler_title">52行简单代码。</b>  <b class="spoiler_title">最好仔细看！</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfileController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">web</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $nav; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::init(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \dmitrybtn\yimp\Navigator; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">titleView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">titlePassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crumbsToView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titleView(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/profile/view'</span></span>]] ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;title = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titleView(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;menuRight = [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(), [<span class="hljs-string"><span class="hljs-string">'password'</span></span>]], ]; ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'view'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;title = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;crumbs = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::crumbsToView(); ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'password'</span></span>); } }</code> </pre> </div></div><br><p> 标头和面包屑是使用静态方法定义的，这意味着它们可以在任何地方使用。 例如，在应用程序的主菜单中，您可以编写： </p><br><pre> <code class="php hljs">[<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; ProfileController::titleView(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/profile/view'</span></span>]],</code> </pre> <br><p> 为什么要使用这些方法？ 因为明天将询问您而不是单词“我的个人资料”，以显示当前用户的登录名。 </p><br><p> 与面包屑一样。 假设我们的用户有一个由<code>ImageController</code>负责的图片列表。 然后在<code>image/create</code>动作中可以编写： </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;crumbs = ProfileController::crumbsToView(),</code> </pre> <br><p> 并获得面包屑，例如“首页/我的个人资料/添加图片”。 顺便说一句，由于<code>image/create</code>操作被称为“添加图片”，因此需要更正<code>profile/view</code>操作菜单： </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;menuRight = [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(), [<span class="hljs-string"><span class="hljs-string">'password'</span></span>]], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; ImageController::titleCreate(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/image/create'</span></span>]] ];</code> </pre> <br><p> 我认为这个想法是可以理解的。 我认为，这是一种简单有效的解决方案，您可以摆脱MVC范式。 是的，控制器代码越来越大，但是在控制器中有一定的位置-我们不在那儿编写业务逻辑，对吗？ 是的，我很想知道您对此事的看法。 </p><br><p> 我们走得更远。 您可能已经猜到了，定义为<code>\dmitrybtn\yimp\Navigator</code>的<code>nav</code>属性用于将标题，菜单和面包屑从控制器传输到布局。 这是YIMP的另一个功能。 </p><br><h2 id="navigator"> 导航器 </h2><br><p> 设置如何进入布局？ 很简单 在初始化期间，YIMP检查当前控制器的<code>nav</code>属性。 如果此属性是可读的并且是导航器（ <code>instanceof \dmitrybtn\yimp\Navigator</code> ），则将其用于显示相应的信息。 导航器包含与布局元素相对应的属性，在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">API文档中</a>更容易看到其完整列表。 </p><br><p> 在应用程序中，建议创建自己的导航器并在其中定义不依赖于当前操作（顶部和左侧）的菜单。 之后，在所有控制器中，您需要创建<code>nav</code>属性并将其定义为导航器（可以使用双手，可以继承或可以使用trait）。 如有必要，您可以定义几个导航器。 </p><br><p> 这种方法消除了YIMP与控制器之间的直接关系。 所有交互都是通过一个对象执行的，该对象的实现由开发人员控制。 也就是说，这与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SOLID的</a>依赖转换原理或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GRASP的</a>低耦合原理相同。 </p><br><p> 从理论上讲，对于控制器和导航器都使用接口是正确的。 但是在这里，我决定采用最简单的方法，而不要弄乱系统。 最后，DIP不讨论接口，而是讨论抽象。 在这种情况下，抽象是关于特定类中某种类型的属性的存在的协议。 你觉得呢 </p><br><p> 当系统中出现对YIMP一无所知的模块时，YIMP与控制器之间就没有直接关系就变得很重要。 反之亦然-使用YIMP编写的模块安装在不使用YIMP的系统中。 </p><br><p> 在第一种情况下，YIMP将不会在控制器中看到<code>nav</code>属性。 不会有错误，但是您的菜单将从屏幕上消失，并且操作ID将用作标题。 如何成为 非常简单-如果YIMP无法从控制器获取导航器，它将使用别名<code>yimp-nav</code>通过DI容器创建<code>yimp-nav</code> 。 使用此别名，您可以注册自己的默认导航器，例如通过在应用程序设置中指定： </p><br><pre> <code class="php hljs"> <span class="hljs-string"><span class="hljs-string">'container'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'definitions'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'yimp-nav'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'\your\own\Navigator'</span></span>, ] ] ],</code> </pre> <br><p> 在第二种情况下，控制器中的导航器将是，但是没有人可以读取它。 在这种情况下，建议为模块中的视图编写包装器，以使导航器从当前控制器适应Yii接受的格式。 也就是说，在主区域中显示<code>&lt;h1&gt;</code> ， <code>&lt;title&gt;</code>和面包屑通过参数<code>Yii::$app-&gt;view</code> ，并以按钮的形式显示右键菜单。 </p><br><h2 id="zaklyuchenie"> 结论 </h2><br><p> 现在发布的YIMP没有版本。 我看不出发布预发行版本的任何理由-一切都太简单了。 我认为最好在一个真实的项目上测试几个星期，然后立即切换到1.0.0版。 因此，非常欢迎对GitHub提出批评，评论和帮助。 </p><br><p> 我正在完成一个实现访问控制的模块。 如何完成-我会写。 </p><br><p> 如您所见，这里没有什么复杂的。 我相信你们中的许多人都有类似的库存。 我很想知道您如何解决您在管理区域中的用户界面任务。 </p><br><p> 谢谢大家！ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466505/">https://habr.com/ru/post/zh-CN466505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466495/index.html">如何在Go中竞争不会出错</a></li>
<li><a href="../zh-CN466497/index.html">React Native应用程序的现代环境</a></li>
<li><a href="../zh-CN466499/index.html">Python中的C / C ++（ctypes）</a></li>
<li><a href="../zh-CN466501/index.html">Github动作和跨平台构建</a></li>
<li><a href="../zh-CN466503/index.html">lur饮DevOps。 第二天 IaC，基础架构测试和“ Slurm激发灵感！”</a></li>
<li><a href="../zh-CN466509/index.html">内部概览：Google中设备正常工作和适应的过程</a></li>
<li><a href="../zh-CN466515/index.html">面试 工程师在欧洲的一家初创公司工作应该期望什么，面试如何完成，适应困难吗？</a></li>
<li><a href="../zh-CN466517/index.html">华盛顿大学本地化培训</a></li>
<li><a href="../zh-CN466519/index.html">AWS Lambda的详细分析</a></li>
<li><a href="../zh-CN466521/index.html">C for Metal-用于Intel显卡的计算的贵金属</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>