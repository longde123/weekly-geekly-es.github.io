<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’§ ğŸ”… ğŸ¥¡ Rustä¸­çš„é­”æœ¯æ•°æ®ç±»å‹è½¬æ¢ï¼šIntrinsika mem :: transmute <Tï¼ŒU> ğŸ· ğŸ•Ÿ ğŸ‘©ğŸ½â€ğŸ«</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¼•è¨€ 


 å°½ç®¡å…·æœ‰å…¨é¢çš„æ•°æ®å®‰å…¨æ„è¯†å½¢æ€ï¼Œ Rustç¼–ç¨‹è¯­è¨€ä¹Ÿå…·æœ‰ä¸å®‰å…¨çš„ç¼–ç¨‹æ–¹æ³•ï¼Œå› ä¸ºæœ‰æ—¶å®ƒä»¬å¯â€‹â€‹ä»¥é€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„è®¡ç®—æ¥æé«˜é€Ÿåº¦ï¼Œæœ‰æ—¶è¿™æ˜¯è‡³å…³é‡è¦çš„ã€‚ 


å…¶ä¸­ä¹‹ä¸€æ˜¯æˆ‘ä»¬å½“å‰çš„å®ä¾‹-å†…åœ¨å‡½æ•°mem::transmute<T, U> ï¼Œä¸ºå®ƒä»¬ä¸¤ä¸ªè®¾è®¡äº†ä¸€ä¸‹ï¼Œåœ¨æå…¶ä¸å¯»å¸¸çš„æƒ…å†µä¸‹æ´¾ä¸Šç”¨åœºã€‚ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rustä¸­çš„é­”æœ¯æ•°æ®ç±»å‹è½¬æ¢ï¼šIntrinsika mem :: transmute <Tï¼ŒU></h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448240/"><p><img src="https://habrastorage.org/webt/m-/yv/sg/m-yvsgqiqpdkzs8z020qxwp8qry.jpeg"></p><br><h1 id="vvedenie"> å¼•è¨€ </h1><br><p> å°½ç®¡å…·æœ‰å…¨é¢çš„æ•°æ®å®‰å…¨æ„è¯†å½¢æ€ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Rust</a>ç¼–ç¨‹è¯­è¨€ä¹Ÿå…·æœ‰ä¸å®‰å…¨çš„ç¼–ç¨‹æ–¹æ³•ï¼Œå› ä¸ºæœ‰æ—¶å®ƒä»¬å¯â€‹â€‹ä»¥é€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„è®¡ç®—æ¥æé«˜é€Ÿåº¦ï¼Œæœ‰æ—¶è¿™æ˜¯è‡³å…³é‡è¦çš„ã€‚ </p><br><p>å…¶ä¸­ä¹‹ä¸€æ˜¯æˆ‘ä»¬å½“å‰çš„å®ä¾‹-å†…åœ¨å‡½æ•°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>mem::transmute&lt;T, U&gt;</code></a> ï¼Œä¸ºå®ƒä»¬ä¸¤ä¸ªè®¾è®¡äº†ä¸€ä¸‹ï¼Œåœ¨æå…¶ä¸å¯»å¸¸çš„æƒ…å†µä¸‹æ´¾ä¸Šç”¨åœºã€‚ </p><a name="habracut"></a><br><h1 id="opisanie-funkcionala"> åŠŸèƒ½è¯´æ˜ </h1><br><p>  <code>mem::transmute&lt;T, U&gt;</code>ç”±ç¼–è¯‘å™¨ç›´æ¥å®ç°ï¼Œå› ä¸ºæ ¹æ®å®šä¹‰ï¼Œå®ƒä¸èƒ½ç”¨Rustè¯­è¨€çš„è¯­æ³•æè¿°ã€‚ å®ƒåªæ˜¯å°†ä¸€ç§æ•°æ®ç±»å‹çš„ä½é‡æ–°è§£é‡Šä¸ºå¦ä¸€ç§æ•°æ®ä½ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"rust-intrinsic"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transmute</span></span></span></span>&lt;T, U&gt;(e: T) -&gt; U</code> </pre> <br><p> åœ¨é‡æ–°è§£é‡Šä¹‹å‰ï¼Œæ­¤å‡½æ•°å°†æ¥ç®¡æ•°æ®ç±»å‹<code>T</code>çš„é‡æ–°è§£é‡Šå˜é‡çš„æ‰€æœ‰æƒï¼Œç„¶åï¼Œå®ƒâ€œå¿˜è®°â€å®ƒï¼ˆä½†ä¸è°ƒç”¨ç›¸åº”çš„ææ„å‡½æ•°ï¼‰ã€‚ </p><br><p> ä¸ä¼šåœ¨ç‰©ç†å†…å­˜ä¸­è¿›è¡Œä»»ä½•å¤åˆ¶ï¼Œå› ä¸ºè¿™ç§å†…åœ¨ç‰¹æ€§ä½¿ç¼–è¯‘å™¨æ¸…æ¥šåœ°çŸ¥é“ç±»å‹<code>T</code>çš„å†…å®¹å®é™…ä¸Šæ˜¯ç±»å‹<code>U</code> </p><br><p> å¦‚æœç±»å‹<code>T</code>å’Œ<code>U</code>å…·æœ‰ä¸åŒçš„é•¿åº¦ï¼Œåˆ™ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ å‚æ•°å’Œè¿”å›å€¼éƒ½ä¸èƒ½ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ— æ•ˆå€¼</a> ã€‚ </p><br><h1 id="neopredelyonnoe-povedenie"> æœªå®šä¹‰çš„è¡Œä¸º </h1><br><p> æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ­¤åŠŸèƒ½è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ï¼Œè¿™æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå› ä¸ºç”±äºè®¸å¤šå› ç´ ï¼Œå®ƒå¯èƒ½äº§ç”Ÿ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœªå®šä¹‰çš„è¡Œä¸º</a> ï¼š </p><br><ul><li> åˆ›å»ºçŠ¶æ€æ— æ•ˆçš„ä»»ä½•ç±»å‹çš„å®ä¾‹ï¼› </li><li> åˆ›å»ºå…·æœ‰æ— æ•ˆå€¼çš„åŸè¯­ï¼› </li><li> ä¸ºäº†æ»¡è¶³ç±»å‹æ¨æ–­ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°å®Œå…¨æ„å¤–çš„è¾“å‡ºç±»å‹ã€‚ </li><li>  <code>non-repr(C)</code>ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼› </li><li> è½¬æ¢ä¸ºæ²¡æœ‰æ˜ç¡®æŒ‡å®šç”Ÿå­˜æ—¶é—´çš„å¸¸è§„é“¾æ¥ä¼šå¯¼è‡´<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ç›¸å…³çš„ç”Ÿå­˜æ—¶é—´</a> ï¼› </li><li> å°†ä¸å¯å˜é“¾æ¥è½¬æ¢ä¸ºå¯å˜é“¾æ¥ã€‚ </li></ul><br><h1 id="otkrytye-vozmozhnosti"> å¼€æ”¾æœºä¼š </h1><br><p> ä½†æ˜¯ï¼Œæ­¤æŠ€æœ¯åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹è¯æ˜å…¶è‡ªèº«åˆç†æ€§ï¼Œä¾‹å¦‚ï¼Œè·å¾—æµ®ç‚¹æ•°æ®ç±»å‹çš„ä½æ¨¡å¼ï¼ˆæˆ–æ›´æ™®éçš„æ˜¯ï¼Œç±»å‹ä¸ºpunningï¼Œå…¶ä¸­<code>T</code>å’Œ<code>U</code>ä¸æ˜¯åŸå§‹æŒ‡é’ˆï¼‰ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bitpattern = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;<span class="hljs-built_in"><span class="hljs-built_in">f32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u32</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">1.0</span></span>) }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(bitpattern, <span class="hljs-number"><span class="hljs-number">0x3F800000</span></span>);</code> </pre> <br><p> å°†åŸå§‹æŒ‡é’ˆè½¬æ¢ä¸ºæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥æŠ€æœ¯åœ¨å‡½æ•°æŒ‡é’ˆå’Œå¸¸è§„æŒ‡é’ˆå¤§å°ä¸åŒçš„å¹³å°ä¹‹é—´ä¸å¯ç§»æ¤ã€‚ </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> { <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pointer = foo <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> (); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> function = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;*<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> (), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>&gt;(pointer) }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(function(), <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><p> å»¶é•¿å¯¿å‘½æˆ–ç¼©çŸ­ä¸å˜å¯¿å‘½ã€‚ è¿™æ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼ŒåŒæ—¶å…·æœ‰é«˜çº§Rustè¯­æ³•ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extend_lifetime</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;(r: R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;) -&gt; R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt; { std::mem::transmute::&lt;R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;, R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;&gt;(r) } <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shorten_invariant_lifetime</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt;(r: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;) -&gt; &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt; { std::mem::transmute::&lt;&amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;, &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt;&gt;(r) }</code> </pre> <br><h1 id="schadyaschie-alternativy"> å¤‡ç”¨æ›¿ä»£å“ </h1><br><p> åŸºæœ¬ä¸Šï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code> as</code></a>å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°é˜²æ­¢ç”±äº<code>mem::transmute&lt;T, U&gt;</code>å¼•èµ·çš„ä¸ç¡®å®šè¡Œä¸ºï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ptr = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> val_transmuted = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-built_in"><span class="hljs-built_in">u32</span></span>&gt;(ptr) }; <span class="hljs-comment"><span class="hljs-comment">//   `as`  .  ,  //   `as    let val_casts = unsafe { &amp;mut *(ptr as *mut i32 as *mut u32) };</span></span></code> </pre> <br><p> è¿˜å¯ä»¥ä½¿ç”¨å®‰å…¨æ–¹æ³•ï¼Œä¸å¯¹<code>mem::transmute&lt;T, U&gt;</code>çš„ç±»ä¼¼è°ƒç”¨è¿›è¡Œç›¸åŒçš„æ“ä½œï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//        //    let slice = unsafe { std::mem::transmute::&lt;&amp;str, &amp;[u8]&gt;("Rust") }; assert_eq!(slice, &amp;[82, 117, 115, 116]); //      `as_bytes()`,  //     let slice = "Rust".as_bytes(); assert_eq!(slice, &amp;[82, 117, 115, 116]); //      //   assert_eq!(b"Rust", &amp;[82, 117, 115, 116]);</span></span></code> </pre> <br><p> å¹¶é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>slice::split_at_mut()</code></a>å‡½æ•°çš„ä¸‰ç§å®ç°æ¥æ¼”ç¤ºæ­¤æºä»£ç ï¼šä½¿ç”¨<code>mem::transmute&lt;T, U&gt;</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>slice::split_at_mut()</code></a> <code>mem::transmute&lt;T, U&gt;</code> <code>as</code>è¿ç®—ç¬¦ä»¥åŠ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>slice::from_raw_parts()</code></a>å‡½æ•°ã€‚ </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::{slice, mem}; <span class="hljs-comment"><span class="hljs-comment">//     ,    //     fn split_at_mut_transmute&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let slice2 = mem::transmute::&lt;&amp;mut [T], &amp;mut [T]&gt;(slice); // -, mem::transmute&lt;T, U&gt;   , //  ,    -    T  U. // // -,      ,  //        (&amp;mut slice[0..mid], &amp;mut slice2[mid..len]) } } //       ; `&amp;mut *` //    `&amp;mut T`  `&amp;mut T`  `*mut T`. fn split_at_mut_casts&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let slice2 = &amp;mut *(slice as *mut [T]); //        ,  //        (&amp;mut slice[0..mid], &amp;mut slice2[mid..len]) } } //    ,    //  fn split_at_stdlib&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let ptr = slice.as_mut_ptr(); //      ,  //    : `slice`, r-value ret.0  r-value ret.1. // // `slice`     `let ptr = ...`,   // ,    "",  ,  //      . (slice::from_raw_parts_mut(ptr, mid), slice::from_raw_parts_mut(ptr.add(mid), len - mid)) } }</span></span></code> </pre> <br><p> æ¢å¥è¯è¯´ï¼Œä»…åœ¨æ²¡æœ‰å…¶ä»–å¸®åŠ©çš„æƒ…å†µä¸‹æ‰è¯æ˜ä½¿ç”¨<code>mem::transmute&lt;T, U&gt;</code>åˆç†çš„ï¼ˆåœ¨æŸäº›è¯­è¨€ä¸­ç”¨åå°„è¿›è¡Œç±»æ¯”æ˜¯é€‚å½“çš„ï¼‰ã€‚ </p><br><h1 id="variaciya-memtransmute_copyt-u"> å˜ä½“å†…å­˜:: transmute_copy &lt;Tï¼ŒU&gt; </h1><br><p> é€šå¸¸çš„å†…åœ¨å‡½æ•°<code>mem::transmute&lt;T, U&gt;</code>åœ¨æ— æ³•è½¬è®©<code>T</code>ç±»å‹å˜é‡çš„æ‰€æœ‰æƒçš„æƒ…å†µä¸‹å¯èƒ½ä¸åˆé€‚ã€‚ å®ƒçš„å˜ä½“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>mem::transmute_copy&lt;T, U&gt;</code></a>å¯ä»¥è§£å†³ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transmute_copy</span></span></span></span>&lt;T, U&gt;(src: &amp;T) -&gt; U</code> </pre> <br><p> æ‚¨å¯èƒ½å·²ç»çŒœåˆ°ï¼Œå®ƒæ²¡æœ‰ç§»åŠ¨å•ä¸ªå‚æ•°ï¼Œè€Œæ˜¯å¯¹å…¶è¿›è¡Œäº†å®Œæ•´å¤åˆ¶å¹¶è½¬ç§»äº†ç»“æœçš„æ‰€æœ‰æƒã€‚ æ­¤å˜ä½“çš„è¿è¡Œé€Ÿåº¦ä¼šæ›´æ…¢ï¼Œå› æ­¤å»ºè®®æ‚¨å‡å°‘ä½¿ç”¨é¢‘ç‡ã€‚ </p><br><p> ä¸<code>mem::transmute&lt;T, U&gt;</code> ï¼Œå¦‚æœç±»å‹<code>T</code>å’Œ<code>U</code>å­—èŠ‚é•¿åº¦ä¸åŒï¼Œåˆ™å½“å‰çš„æ¨¡æ‹Ÿä¸ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œä½†å¼ºçƒˆå»ºè®®ä»…åœ¨å¤§å°ç›¸åŒçš„æƒ…å†µä¸‹è°ƒç”¨å®ƒã€‚ </p><br><p> è¿˜åº”è¯¥è®°ä½ï¼Œå¦‚æœç±»å‹<code>U</code>çš„å¤§å°è¶…è¿‡<code>T</code>çš„å¤§å°ï¼Œåˆ™æ­¤å‡½æ•°å°†ç”Ÿæˆæœªå®šä¹‰çš„è¡Œä¸ºã€‚ </p><br><h1 id="zaklyuchenie"> ç»“è®º </h1><br><p> å†æ¬¡æé†’æ‚¨ï¼Œåªæœ‰åœ¨æ‚¨å®Œå…¨æ— æ³•ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œæ‰åº”ä½¿ç”¨è¿™äº›åŠŸèƒ½ã€‚ æ­£å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nomicon</a>æ‰€è¯´ï¼Œè¿™å®é™…ä¸Šæ˜¯æ‚¨åœ¨Rustä¸­å¯ä»¥åšçš„æœ€ä¸å®‰å…¨çš„äº‹æƒ…ã€‚ </p><br><p> æœ¬æ–‡çš„æ‰€æœ‰ç¤ºä¾‹å‡æ‘˜è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>  mem::transmute&lt;T, U&gt;</code></a> ï¼Œè¿˜ä½¿ç”¨äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„çš„</a>ææ–™ã€‚ æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ã€‚ <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN448240/">https://habr.com/ru/post/zh-CN448240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN448228/index.html">å»ºæ¨¡ç±»å‹ã€‚ é›•åˆ»ï¼Œé‡æ–°æ‹“æ‰‘å’Œæ‰«æçš„åŸºç¡€</a></li>
<li><a href="../zh-CN448230/index.html">ä½¿ç”¨ClearViewç®¡ç†ä¸šåŠ¡è¿ç»­æ€§</a></li>
<li><a href="../zh-CN448234/index.html">AIå’ŒMOï¼šä¸€äº›è¶‹åŠ¿å’Œè¶‹åŠ¿</a></li>
<li><a href="../zh-CN448236/index.html">Facebookçš„TerragraphæŠ€æœ¯ä»æµ‹è¯•è½¬å˜ä¸ºå•†ä¸šç”¨é€”</a></li>
<li><a href="../zh-CN448238/index.html">æ™¶ä½“ç®¡æ•…äº‹ï¼šåœ¨é»‘æš—ä¸­æ¶‰æ°´</a></li>
<li><a href="../zh-CN448242/index.html">å®‡å®™ä¸åŸºå› </a></li>
<li><a href="../zh-CN448244/index.html">DAB +æ•°å­—å¹¿æ’­-å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ ¹æœ¬éœ€è¦å®ƒå—ï¼Ÿ</a></li>
<li><a href="../zh-CN448248/index.html">åœ¨è¶…çº§æ¸¸æˆç”·å­©ä¸­å®‰è£…é€šä¿¡ç”µç¼†è¿æ¥å™¨</a></li>
<li><a href="../zh-CN448250/index.html">äº§å“å¼€å‘è§†è§‰è¾…åŠ©ï¼šæ„æƒ³</a></li>
<li><a href="../zh-CN448254/index.html">iPhoneä¸æ˜¯ç¬¬ä¸€æ¬¾Appleæ‰‹æœº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>