<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüç≥ üïï üï¥üèæ Construindo um projeto BEM usando o Webpack üöß üíáüèæ ü§∂üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo focar√° na montagem de projetos BEM usando o empacotador Webpack. Vou mostrar um exemplo de configura√ß√£o sem carregar leitores com entidades d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Construindo um projeto BEM usando o Webpack</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447560/"><p>  O artigo focar√° na montagem de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">projetos BEM</a> usando o empacotador Webpack.  Vou mostrar um exemplo de configura√ß√£o sem carregar leitores com entidades desnecess√°rias. </p><br><p>  O material √© adequado para quem est√° come√ßando a se familiarizar com o BEM.  Primeiro, abordaremos os aspectos te√≥ricos da metodologia e, na se√ß√£o "Pr√°tica", mostrarei como eles podem ser aplicados. </p><a name="habracut"></a><br><h3 id="nemnogo-teorii">  Pouco de teoria </h3><br><p>  Se √© a primeira vez que voc√™ ouve sobre o BEM e deseja conhec√™-lo, guarde a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . </p><br><p>  <strong>O BEM</strong> √© uma metodologia usada para organizar projetos de qualquer escala.  A Yandex a desenvolveu e a princ√≠pio a utilizou apenas no trabalho de seus servi√ßos, mas depois foi publicada em dom√≠nio p√∫blico. </p><br><p>  BEM significa "Bloco, Elemento, Modificador". </p><br><p>  <strong>Block</strong> √© uma entidade com uma arquitetura aut√¥noma que pode ser reutilizada.  Um bloco pode conter seus pr√≥prios elementos. </p><br><p>  <strong>Um elemento</strong> √© parte integrante de um bloco.  Um item s√≥ pode ser usado dentro do bloco pai. </p><br><p>  <strong>Um modificador</strong> √© uma entidade que altera a exibi√ß√£o, estado ou comportamento de um bloco. </p><br><p>  Esses componentes est√£o subjacentes √† metodologia.  Eles oferecem beleza e separa√ß√£o de c√≥digo conveniente.  Mais detalhes sobre o dispositivo est√£o escritos na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . </p><br><p>  A documenta√ß√£o do BEM √© extensivamente escrita.  No entanto, existe um "mas": um limite alto para a entrada do material.  Se o b√°sico do layout puder ser descoberto lendo uma p√°gina da documenta√ß√£o, a quest√£o da montagem do projeto √© mais complicada. </p><br><p>  Por que foi a montagem do projeto?  Ao trabalhar em um projeto de larga escala, todos enfrentam o problema de organizar o c√≥digo.  √â inconveniente armazenar todo o c√≥digo de um projeto grande em um arquivo.  Dividir o c√≥digo em v√°rios arquivos e compil√°-lo manualmente tamb√©m n√£o √© uma boa sa√≠da.  Para resolver esse problema, s√£o usados ‚Äã‚Äãcoletores ou <em>empacotadores</em> que automatizam a convers√£o do c√≥digo-fonte do projeto em c√≥digo que est√° pronto para ser enviado √† produ√ß√£o. </p><br><p>  Deixe-me lembr√°-lo: sup√µe-se ainda que os leitores tenham habilidades b√°sicas no Webpack.  Se voc√™ n√£o trabalhou com ele antes, recomendo que voc√™ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se familiarize</a> com essa ferramenta. </p><br><p>  A documenta√ß√£o do BEM fornece <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recomenda√ß√µes</a> para a montagem de projetos.  Apenas duas op√ß√µes s√£o oferecidas como exemplos: montagem usando ENB e Gulp. </p><br><p>  <strong>ENB</strong> √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">utilit√°rio</a> projetado especificamente para a constru√ß√£o de projetos BEM.  Ela √© capaz de trabalhar com entidades do BEM imediatamente.  Mas d√™ uma olhada no c√≥digo.  √Ä primeira vista, ele pode desmotivar um desenvolvedor despreparado: </p><br><div class="spoiler">  <b class="spoiler_title">make.js</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> techs = { <span class="hljs-comment"><span class="hljs-comment">// essential fileProvider: require('enb/techs/file-provider'), fileMerge: require('enb/techs/file-merge'), // optimization borschik: require('enb-borschik/techs/borschik'), // css postcss: require('enb-postcss/techs/enb-postcss'), postcssPlugins: [ require('postcss-import')(), require('postcss-each'), require('postcss-for'), require('postcss-simple-vars')(), require('postcss-calc')(), require('postcss-nested'), require('rebem-css'), require('postcss-url')({ url: 'rebase' }), require('autoprefixer')(), require('postcss-reporter')() ], // js browserJs: require('enb-js/techs/browser-js'), // bemtree // bemtree: require('enb-bemxjst/techs/bemtree'), // bemhtml bemhtml: require('enb-bemxjst/techs/bemhtml'), bemjsonToHtml: require('enb-bemxjst/techs/bemjson-to-html') }, enbBemTechs = require('enb-bem-techs'), levels = [ { path: 'node_modules/bem-core/common.blocks', check: false }, { path: 'node_modules/bem-core/desktop.blocks', check: false }, { path: 'node_modules/bem-components/common.blocks', check: false }, { path: 'node_modules/bem-components/desktop.blocks', check: false }, { path: 'node_modules/bem-components/design/common.blocks', check: false }, { path: 'node_modules/bem-components/design/desktop.blocks', check: false }, 'common.blocks', 'desktop.blocks' ]; module.exports = function(config) { const isProd = process.env.YENV === 'production'; config.nodes('*.bundles/*', function(nodeConfig) { nodeConfig.addTechs([ // essential [enbBemTechs.levels, { levels: levels }], [techs.fileProvider, { target: '?.bemjson.js' }], [enbBemTechs.bemjsonToBemdecl], [enbBemTechs.deps], [enbBemTechs.files], // css [techs.postcss, { target: '?.css', oneOfSourceSuffixes: ['post.css', 'css'], plugins: techs.postcssPlugins }], // bemtree // [techs.bemtree, { sourceSuffixes: ['bemtree', 'bemtree.js'] }], // bemhtml [techs.bemhtml, { sourceSuffixes: ['bemhtml', 'bemhtml.js'], forceBaseTemplates: true, engineOptions : { elemJsInstances : true } }], // html [techs.bemjsonToHtml], // client bemhtml [enbBemTechs.depsByTechToBemdecl, { target: '?.bemhtml.bemdecl.js', sourceTech: 'js', destTech: 'bemhtml' }], [enbBemTechs.deps, { target: '?.bemhtml.deps.js', bemdeclFile: '?.bemhtml.bemdecl.js' }], [enbBemTechs.files, { depsFile: '?.bemhtml.deps.js', filesTarget: '?.bemhtml.files', dirsTarget: '?.bemhtml.dirs' }], [techs.bemhtml, { target: '?.browser.bemhtml.js', filesTarget: '?.bemhtml.files', sourceSuffixes: ['bemhtml', 'bemhtml.js'], engineOptions : { elemJsInstances : true } }], // js [techs.browserJs, { includeYM: true }], [techs.fileMerge, { target: '?.js', sources: ['?.browser.js', '?.browser.bemhtml.js'] }], // borschik [techs.borschik, { source: '?.js', target: '?.min.js', minify: isProd }], [techs.borschik, { source: '?.css', target: '?.min.css', minify: isProd }] ]); nodeConfig.addTargets([/* '?.bemtree.js', */ '?.html', '?.min.css', '?.min.js']); }); };</span></span></code> </pre> <br><p>  <em>C√≥digo do reposit√≥rio p√∫blico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">project-stub</a> .</em> </p></div></div><br><p>  O c√≥digo de configura√ß√£o da ENB obviamente ser√° complicado para quem est√° come√ßando a usar o BEM. </p><br><p>  A documenta√ß√£o cont√©m <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">configura√ß√µes prontas para o coletor</a> e podem ser usadas sem se aprofundar nos detalhes da montagem.  Mas e se voc√™, como eu, gostaria de ter uma imagem completa do que est√° acontecendo com o projeto durante a constru√ß√£o? </p><br><p>  A documenta√ß√£o do BEM explica bem o processo de montagem na teoria; no entanto, existem poucos exemplos pr√°ticos e nem sempre s√£o adequados para uma compreens√£o clara do processo.  Para resolver esse problema, tentarei criar um projeto BEM elementar usando o Webpack. </p><br><h3 id="praktika">  Pr√°tica </h3><br><p>  Antes disso, mencionei que a separa√ß√£o de c√≥digo e a organiza√ß√£o da montagem simplificaram o trabalho com o projeto.  No exemplo abaixo, forneceremos a separa√ß√£o de c√≥digo usando o BEM e seu assembly usando o Webpack. </p><br><p>  Queremos obter a configura√ß√£o mais simples, a l√≥gica de montagem deve ser linear e intuitiva.  Vamos montar uma p√°gina com um bloco BEM, que ter√° duas tecnologias: CSS e JS. </p><br><p>  Voc√™ pode escrever c√≥digo HTML com um DIV com a classe "block" e conectar manualmente todas as suas tecnologias.  Usando a nomea√ß√£o de classe BEM e a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrutura de arquivo</a> correspondente, n√£o violamos os princ√≠pios da metodologia. </p><br><p>  Eu recebi a seguinte √°rvore de projeto: </p><br><pre> <code class="bash hljs">‚îú‚îÄ‚îÄ desktop <span class="hljs-comment"><span class="hljs-comment">#   "desktop" ‚îÇ ‚îî‚îÄ‚îÄ block #  "block" ‚îÇ ‚îú‚îÄ‚îÄ block.css # CSS-  "block" ‚îÇ ‚îî‚îÄ‚îÄ block.js # JS-  "block" ‚îú‚îÄ‚îÄ dist # ,      ‚îú‚îÄ‚îÄ pages # ,       JS- ‚îÇ ‚îú‚îÄ‚îÄ index.html # ,     ‚îÇ ‚îî‚îÄ‚îÄ index.js #      index.html ‚îî‚îÄ‚îÄ webpack.config.js # - Webpack</span></span></code> </pre> <br><p>  A primeira linha refere-se ao n√≠vel de substitui√ß√£o de "√°rea de trabalho".  Na terminologia BEM, os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√≠veis de redefini√ß√£o</a> s√£o diret√≥rios que cont√™m suas pr√≥prias implementa√ß√µes de bloco.  Ao montar um projeto, implementa√ß√µes de todos os n√≠veis de redefini√ß√£o em uma determinada ordem caem no pacote final. </p><br><p>  Por exemplo, temos um n√≠vel de redefini√ß√£o de "√°rea de trabalho" no qual as implementa√ß√µes de bloco para dispositivos de √°rea de trabalho s√£o armazenadas.  Se precisarmos complementar o projeto com o layout para dispositivos m√≥veis, ser√° suficiente criar um novo n√≠vel de redefini√ß√£o de "m√≥vel" e preench√™-lo com novas implementa√ß√µes dos mesmos blocos.  A conveni√™ncia dessa abordagem √© que, em um novo n√≠vel de redefini√ß√£o, n√£o precisaremos duplicar o c√≥digo que j√° existe no "desktop", pois ele se conectar√° automaticamente. </p><br><p>  Aqui est√° a configura√ß√£o do Webpack: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// webpack.config.js //    const path = require('path'); const opy = require('copy-webpack-plugin'); module.exports = { //  entry  output -       entry: path.resolve(__dirname, "pages", "index.js"), output: { filename: 'index.js', path: path.join(__dirname, 'dist') }, module: { rules: [ //    CSS- { test: /\.css$/, loader: 'style-loader!css-loader' } ] }, plugins: [ new opy([ //  HTML-      { from: path.join(__dirname, 'pages'), test: /\.html$/, to: path.join(__dirname, "dist") } ]) ] }</span></span></code> </pre> <br><p>  Aqui, especificamos o arquivo <code>/pages/index.js</code> como um ponto de entrada, adicionamos carregadores para estilos CSS e <code>/pages/index.html</code> para <code>/dist/index.html</code> . </p><br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"block"</span></span></span><span class="hljs-tag">&gt;</span></span>Hello, World!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"index.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">block.css</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.block</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">block.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'block'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].innerHTML += <span class="hljs-string"><span class="hljs-string">" [This text is added by block.js!]"</span></span></code> </pre> </div></div><br><p>  O exemplo usa um n√≠vel de substitui√ß√£o e um bloco.  A tarefa √© montar a p√°gina para que as tecnologias (css, js) do nosso bloco estejam conectadas a ela. </p><br><p>  Para conectar tecnologias, usamos o <code>require()</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// index.js require('../desktop/block/block.js'); require('../desktop/block/block.css');</span></span></code> </pre> <br><p>  Inicie o Webpack e veja o que acontece.  Abra <code>index.html</code> na pasta <code>./dist</code> : </p><br><div class="spoiler">  <b class="spoiler_title">Captura de tela da p√°gina</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jt/hn/mi/jthnmiunob5petfsjxx6aktp9wy.png"></p></div></div><br><p>  Os estilos de bloco foram carregados, o javascript funcionou com sucesso.  Agora podemos adicionar, com raz√£o, as preciosas letras "BEM" ao nosso projeto. </p><br><p>  Primeiro, o BEM foi criado para trabalhar com grandes projetos.  Vamos imaginar que nosso designer tentou e na p√°gina agora n√£o √© um bloco, mas cem.  Seguindo o cen√°rio anterior, conectaremos manualmente as tecnologias de cada bloco usando <code>require()</code> .  Ou seja, pelo menos cem linhas de c√≥digo adicionais aparecer√£o no index.js. </p><br><p>  Linhas extras de c√≥digo que poderiam ter sido evitadas s√£o ruins.  C√≥digo n√£o utilizado √© ainda pior.  E se, em nossa p√°gina, houver apenas 10 dos blocos dispon√≠veis, ou 20 ou 53?  O desenvolvedor ter√° mais trabalho: ele ter√° que se concentrar exatamente em quais blocos s√£o usados ‚Äã‚Äãna p√°gina, al√©m de conect√°-los e desconect√°-los manualmente para evitar c√≥digo desnecess√°rio no pacote final. </p><br><p>  Felizmente, este trabalho pode ser confiado ao Webpack. </p><br><p>  O algoritmo ideal de a√ß√µes para automatizar esse processo: </p><br><ol><li>  Selecione as classes correspondentes √† nomea√ß√£o do BEM a partir do c√≥digo HTML existente; </li><li>  Com base nas classes, obtenha a lista de entidades do BEM usadas na p√°gina; </li><li>  Verifique se existem diret√≥rios de blocos, elementos e modificadores usados ‚Äã‚Äãnos n√≠veis de redefini√ß√£o; </li><li>  Conecte a tecnologia dessas entidades ao projeto adicionando as express√µes <code>require()</code> apropriadas. </li></ol><br><p>  Para come√ßar, decidi verificar se h√° algum carregador de inicializa√ß√£o pronto para esta tarefa.  N√£o encontrei um m√≥dulo que fornecesse toda a funcionalidade necess√°ria em um frasco.  Mas me deparei com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bemdecl-to-fs-loader</a> , que converte declara√ß√µes BEM em express√µes <code>require()</code> .  Ele se baseia nos n√≠veis de redefini√ß√£o e nas tecnologias dispon√≠veis na estrutura do arquivo do projeto. </p><br><blockquote>  <strong>Declara√ß√£o BEM</strong> - uma lista de entidades BEM usadas na p√°gina.  Leia mais sobre eles na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . </blockquote><p>  Um link est√° ausente - a convers√£o de HTML para uma matriz de entidades BEM.  Esta tarefa √© resolvida pelo m√≥dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">html2bemjson</a> . </p><br><blockquote>  <strong>bemjson</strong> - dados que refletem a estrutura da p√°gina futura.  Geralmente eles s√£o usados ‚Äã‚Äãpelo mecanismo de modelo bem-xjst para formar p√°ginas.  A sintaxe do bemjson √© semelhante √† sintaxe das declara√ß√µes, mas a declara√ß√£o cont√©m apenas uma lista de entidades usadas, enquanto o bemjson tamb√©m reflete sua ordem. </blockquote><p>  o bemjson n√£o √© uma declara√ß√£o; portanto, primeiro a convertemos para o formato decl para transmiss√£o no bemdecl-to-fs-loader.  Para esta tarefa, use o m√≥dulo do SDK: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bemjson-to-decl</a> .  Como esses s√£o m√≥dulos regulares do NodeJS, n√£o carregadores Webpack, √© necess√°rio criar um carregador de wrapper.  Depois disso, podemos us√°-los para converter em Webpack. </p><br><p>  N√≥s obtemos o seguinte c√≥digo do carregador de inicializa√ß√£o: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> html2bemjson = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"html2bemjson"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bemjson2decl = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"bemjson-to-decl"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> content </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; content == <span class="hljs-string"><span class="hljs-string">""</span></span>) callback(<span class="hljs-string"><span class="hljs-string">"html2bemdecl requires a valid HTML."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> callback = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.async(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bemjson = html2bemjson.convert( content ); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> decl = bemjson2decl.convert( bemjson ); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(decl); <span class="hljs-comment"><span class="hljs-comment">//     callback(null, decl); }</span></span></code> </pre> <br><p>  Para simplificar a instala√ß√£o do gerenciador de inicializa√ß√£o e economizar tempo no futuro, baixei o m√≥dulo no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NPM</a> . </p><br><p>  Vamos instalar o carregador de inicializa√ß√£o em nosso projeto e fazer altera√ß√µes na configura√ß√£o do Webpack: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> opy = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'copy-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">"pages"</span></span>, <span class="hljs-string"><span class="hljs-string">"index.js"</span></span>), <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.join(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>) }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.html$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ { <span class="hljs-comment"><span class="hljs-comment">//    bemdecl-to-fs-loader loader: 'bemdecl-to-fs-loader', //       options: { levels: ['desktop'], extensions: ['css', 'js'] } }, //      html2bemdecl-loader { loader: 'html2bemdecl-loader' } ] }, { test: /\.css$/, loader: 'style-loader!css-loader' } ] }, plugins: [ new opy([ { from: path.resolve(__dirname, 'pages'), test: /\.html$/, to: path.resolve(__dirname, "dist") } ]) ] }</span></span></code> </pre> <br><p>  O par√¢metro de <code>levels</code> <code>bemdecl-to-fs-loader</code> inicializa√ß√£o do <code>bemdecl-to-fs-loader</code> especifica quais n√≠veis de substitui√ß√£o usar e em que ordem.  As <code>extensions</code> fornecem as extens√µes de tecnologia de arquivo usadas em nosso projeto. </p><br><p>  Como resultado, em vez de conectar tecnologias manualmente, inclu√≠mos apenas um arquivo HTML.  Todas as convers√µes necess√°rias ser√£o realizadas automaticamente. </p><br><p>  Vamos substituir o conte√∫do de index.js pela linha: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./index.html'</span></span>);</code> </pre> <br><p>  Agora execute o Webpack.  Ao montar, a linha √© exibida: </p><br><pre> <code class="javascript hljs">[ BemEntityName { <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'block'</span></span> } ]</code> </pre> <br><p>  Isto significa que a forma√ß√£o da declara√ß√£o foi bem sucedida.  Observamos diretamente a sa√≠da do Webpack: </p><br><pre> <code class="plaintext hljs"> Entrypoint main = index.js [0] ./pages/index.js 24 bytes {0} [built] [1] ./pages/index.html 74 bytes {0} [built] [2] ./desktop/block/block.css 1.07 KiB {0} [built] [3] ./node_modules/css-loader/dist/cjs.js!./desktop/block/block.css 217 bytes {0} [built] [7] ./desktop/block/block.js 93 bytes {0} [built] + 3 hidden modules</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Captura de tela da p√°gina</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/7d/vj/9c/7dvj9c2y_s3w28rncbsfa1yem2m.png"></p></div></div><br><p>  Obtivemos um resultado id√™ntico ao anterior, com a diferen√ßa de que todas as tecnologias de bloco foram conectadas automaticamente.  Por enquanto, basta adicionar uma classe nomeada BEM ao HTML, conectar esse HTML com <code>require()</code> e criar o diret√≥rio apropriado com as tecnologias para conex√£o. </p><br><p>  Portanto, temos uma estrutura de arquivos que corresponde √† metodologia BEM, bem como um mecanismo para conectar automaticamente tecnologias de bloco. </p><br><p>  Abstraindo dos mecanismos e entidades da metodologia, criamos uma configura√ß√£o Webpack extremamente simples, por√©m eficaz.  Espero que este exemplo ajude todos que come√ßarem a conhecer o BEM a entender melhor os princ√≠pios b√°sicos da cria√ß√£o de projetos. </p><br><h3 id="poleznye-ssylki">  Links √∫teis </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Reposit√≥rio do projeto GitHub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guia completo BEM</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Recomenda√ß√µes para a montagem de projetos BEM</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Outra maneira de criar um projeto BEM com o Webpack</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447560/">https://habr.com/ru/post/pt447560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447548/index.html">Qu√£o justificada √© a introdu√ß√£o de VDI em pequenas e m√©dias empresas?</a></li>
<li><a href="../pt447552/index.html">Como otimizar se√ß√µes de cat√°logo em uma loja online: instru√ß√µes passo a passo</a></li>
<li><a href="../pt447554/index.html">Vis√£o geral dos novos recursos do NestJS 6</a></li>
<li><a href="../pt447556/index.html">Extens√£o Mypy com plugins</a></li>
<li><a href="../pt447558/index.html">Realidade virtual - jogo, tratamento, vida. Tecnologia VR ao servi√ßo da medicina de reabilita√ß√£o</a></li>
<li><a href="../pt447562/index.html">Introdu√ß√£o √† engenharia reversa: pirataria no formato de dados do jogo</a></li>
<li><a href="../pt447564/index.html">Altera√ß√µes na autoriza√ß√£o do reposit√≥rio no GitLab.com</a></li>
<li><a href="../pt447566/index.html">Os cientistas mostraram pela primeira vez uma "foto" real de um buraco negro</a></li>
<li><a href="../pt447568/index.html">Entrevista com o astronauta Alexander Laveikin sobre cinema espacial, sobrecargas de 20 unidades e pouso suave</a></li>
<li><a href="../pt447570/index.html">GoLand 2019.1: an√°lise de desempenho de c√≥digo, Smart Step Into, refatora√ß√£o da Extract Interface, Nilness Analyzer e mais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>